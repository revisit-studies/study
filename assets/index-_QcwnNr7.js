var OHe=Object.defineProperty;var PHe=(e,t,n)=>t in e?OHe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var kHe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ru=(e,t,n)=>(PHe(e,typeof t!="symbol"?t+"":t,n),n);var Ywn=kHe((lxn,nie)=>{function $He(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function RHe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ebe={exports:{}},SM={},tbe={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xC=Symbol.for("react.element"),NHe=Symbol.for("react.portal"),DHe=Symbol.for("react.fragment"),LHe=Symbol.for("react.strict_mode"),MHe=Symbol.for("react.profiler"),FHe=Symbol.for("react.provider"),BHe=Symbol.for("react.context"),jHe=Symbol.for("react.forward_ref"),zHe=Symbol.for("react.suspense"),UHe=Symbol.for("react.memo"),VHe=Symbol.for("react.lazy"),mie=Symbol.iterator;function HHe(e){return e===null||typeof e!="object"?null:(e=mie&&e[mie]||e["@@iterator"],typeof e=="function"?e:null)}var nbe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rbe=Object.assign,ibe={};function vE(e,t,n){this.props=e,this.context=t,this.refs=ibe,this.updater=n||nbe}vE.prototype.isReactComponent={};vE.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vE.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sbe(){}sbe.prototype=vE.prototype;function xW(e,t,n){this.props=e,this.context=t,this.refs=ibe,this.updater=n||nbe}var SW=xW.prototype=new sbe;SW.constructor=xW;rbe(SW,vE.prototype);SW.isPureReactComponent=!0;var gie=Array.isArray,obe=Object.prototype.hasOwnProperty,TW={current:null},abe={key:!0,ref:!0,__self:!0,__source:!0};function ube(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)obe.call(t,r)&&!abe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xC,type:e,key:s,ref:o,props:i,_owner:TW.current}}function qHe(e,t){return{$$typeof:xC,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function AW(e){return typeof e=="object"&&e!==null&&e.$$typeof===xC}function WHe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yie=/\/+/g;function w8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WHe(""+e.key):t.toString(36)}function Ok(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xC:case NHe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+w8(o,0):r,gie(i)?(n="",e!=null&&(n=e.replace(yie,"$&/")+"/"),Ok(i,t,n,"",function(l){return l})):i!=null&&(AW(i)&&(i=qHe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",gie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+w8(s,a);o+=Ok(s,t,n,u,i)}else if(u=HHe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+w8(s,a++),o+=Ok(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function TO(e,t,n){if(e==null)return e;var r=[],i=0;return Ok(e,r,"","",function(s){return t.call(n,s,i++)}),r}function GHe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ra={current:null},Pk={transition:null},YHe={ReactCurrentDispatcher:Ra,ReactCurrentBatchConfig:Pk,ReactCurrentOwner:TW};Rn.Children={map:TO,forEach:function(e,t,n){TO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return TO(e,function(){t++}),t},toArray:function(e){return TO(e,function(t){return t})||[]},only:function(e){if(!AW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rn.Component=vE;Rn.Fragment=DHe;Rn.Profiler=MHe;Rn.PureComponent=xW;Rn.StrictMode=LHe;Rn.Suspense=zHe;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YHe;Rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rbe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=TW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)obe.call(t,u)&&!abe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:xC,type:e.type,key:i,ref:s,props:r,_owner:o}};Rn.createContext=function(e){return e={$$typeof:BHe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FHe,_context:e},e.Consumer=e};Rn.createElement=ube;Rn.createFactory=function(e){var t=ube.bind(null,e);return t.type=e,t};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(e){return{$$typeof:jHe,render:e}};Rn.isValidElement=AW;Rn.lazy=function(e){return{$$typeof:VHe,_payload:{_status:-1,_result:e},_init:GHe}};Rn.memo=function(e,t){return{$$typeof:UHe,type:e,compare:t===void 0?null:t}};Rn.startTransition=function(e){var t=Pk.transition;Pk.transition={};try{e()}finally{Pk.transition=t}};Rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rn.useCallback=function(e,t){return Ra.current.useCallback(e,t)};Rn.useContext=function(e){return Ra.current.useContext(e)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(e){return Ra.current.useDeferredValue(e)};Rn.useEffect=function(e,t){return Ra.current.useEffect(e,t)};Rn.useId=function(){return Ra.current.useId()};Rn.useImperativeHandle=function(e,t,n){return Ra.current.useImperativeHandle(e,t,n)};Rn.useInsertionEffect=function(e,t){return Ra.current.useInsertionEffect(e,t)};Rn.useLayoutEffect=function(e,t){return Ra.current.useLayoutEffect(e,t)};Rn.useMemo=function(e,t){return Ra.current.useMemo(e,t)};Rn.useReducer=function(e,t,n){return Ra.current.useReducer(e,t,n)};Rn.useRef=function(e){return Ra.current.useRef(e)};Rn.useState=function(e){return Ra.current.useState(e)};Rn.useSyncExternalStore=function(e,t,n){return Ra.current.useSyncExternalStore(e,t,n)};Rn.useTransition=function(){return Ra.current.useTransition()};Rn.version="18.2.0";tbe.exports=Rn;var A=tbe.exports;const L=pl(A),A1=$He({__proto__:null,default:L},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KHe=A,XHe=Symbol.for("react.element"),QHe=Symbol.for("react.fragment"),JHe=Object.prototype.hasOwnProperty,ZHe=KHe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eqe={key:!0,ref:!0,__self:!0,__source:!0};function lbe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)JHe.call(t,r)&&!eqe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:XHe,type:e,key:s,ref:o,props:i,_owner:ZHe.current}}SM.Fragment=QHe;SM.jsx=lbe;SM.jsxs=lbe;ebe.exports=SM;var R=ebe.exports,D7={},cbe={exports:{}},ml={},fbe={exports:{}},dbe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,G){var U=j.length;j.push(G);e:for(;0<U;){var P=U-1>>>1,k=j[P];if(0<i(k,G))j[P]=G,j[U]=k,U=P;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var G=j[0],U=j.pop();if(U!==G){j[0]=U;e:for(var P=0,k=j.length,H=k>>>1;P<H;){var M=2*(P+1)-1,F=j[M],J=M+1,se=j[J];if(0>i(F,U))J<k&&0>i(se,F)?(j[P]=se,j[J]=U,P=J):(j[P]=F,j[M]=U,P=M);else if(J<k&&0>i(se,U))j[P]=se,j[J]=U,P=J;else break e}}return G}function i(j,G){var U=j.sortIndex-G.sortIndex;return U!==0?U:j.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=j)r(l),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(l)}}function b(j){if(m=!1,_(j),!p)if(n(u)!==null)p=!0,B(E);else{var G=n(l);G!==null&&V(b,G.startTime-j)}}function E(j,G){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var U=d;try{for(_(G),f=n(u);f!==null&&(!(f.expirationTime>G)||j&&!O());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var k=P(f.expirationTime<=G);G=e.unstable_now(),typeof k=="function"?f.callback=k:f===n(u)&&r(u),_(G)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var M=n(l);M!==null&&V(b,M.startTime-G),H=!1}return H}finally{f=null,d=U,h=!1}}var w=!1,x=null,S=-1,I=5,C=-1;function O(){return!(e.unstable_now()-C<I)}function z(){if(x!==null){var j=e.unstable_now();C=j;var G=!0;try{G=x(!0,j)}finally{G?N():(w=!1,x=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=z,N=function(){D.postMessage(null)}}else N=function(){g(z,0)};function B(j){x=j,w||(w=!0,N())}function V(j,G){S=g(function(){j(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(E))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var U=d;d=G;try{return j()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=d;d=j;try{return G()}finally{d=U}},e.unstable_scheduleCallback=function(j,G,U){var P=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?P+U:P):U=P,j){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=U+k,j={id:c++,callback:G,priorityLevel:j,startTime:U,expirationTime:k,sortIndex:-1},U>P?(j.sortIndex=U,t(l,j),n(u)===null&&j===n(l)&&(m?(y(S),S=-1):m=!0,V(b,U-P))):(j.sortIndex=k,t(u,j),p||h||(p=!0,B(E))),j},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(j){var G=d;return function(){var U=d;d=G;try{return j.apply(this,arguments)}finally{d=U}}}})(dbe);fbe.exports=dbe;var tqe=fbe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hbe=A,rl=tqe;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pbe=new Set,O2={};function yv(e,t){tw(e,t),tw(e+"Capture",t)}function tw(e,t){for(O2[e]=t,e=0;e<t.length;e++)pbe.add(t[e])}var wp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L7=Object.prototype.hasOwnProperty,nqe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vie={},_ie={};function rqe(e){return L7.call(_ie,e)?!0:L7.call(vie,e)?!1:nqe.test(e)?_ie[e]=!0:(vie[e]=!0,!1)}function iqe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sqe(e,t,n,r){if(t===null||typeof t>"u"||iqe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Na(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var bo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bo[e]=new Na(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bo[t]=new Na(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bo[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bo[e]=new Na(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bo[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bo[e]=new Na(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bo[e]=new Na(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bo[e]=new Na(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bo[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)});var CW=/[\-:]([a-z])/g;function IW(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(CW,IW);bo[t]=new Na(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(CW,IW);bo[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(CW,IW);bo[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bo[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)});bo.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bo[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)});function OW(e,t,n,r){var i=bo.hasOwnProperty(t)?bo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sqe(t,n,i,r)&&(n=null),r||i===null?rqe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gp=hbe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,AO=Symbol.for("react.element"),z_=Symbol.for("react.portal"),U_=Symbol.for("react.fragment"),PW=Symbol.for("react.strict_mode"),M7=Symbol.for("react.profiler"),mbe=Symbol.for("react.provider"),gbe=Symbol.for("react.context"),kW=Symbol.for("react.forward_ref"),F7=Symbol.for("react.suspense"),B7=Symbol.for("react.suspense_list"),$W=Symbol.for("react.memo"),Cm=Symbol.for("react.lazy"),ybe=Symbol.for("react.offscreen"),bie=Symbol.iterator;function $x(e){return e===null||typeof e!="object"?null:(e=bie&&e[bie]||e["@@iterator"],typeof e=="function"?e:null)}var bi=Object.assign,E8;function LS(e){if(E8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E8=t&&t[1]||""}return`
`+E8+e}var x8=!1;function S8(e,t){if(!e||x8)return"";x8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{x8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?LS(e):""}function oqe(e){switch(e.tag){case 5:return LS(e.type);case 16:return LS("Lazy");case 13:return LS("Suspense");case 19:return LS("SuspenseList");case 0:case 2:case 15:return e=S8(e.type,!1),e;case 11:return e=S8(e.type.render,!1),e;case 1:return e=S8(e.type,!0),e;default:return""}}function j7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U_:return"Fragment";case z_:return"Portal";case M7:return"Profiler";case PW:return"StrictMode";case F7:return"Suspense";case B7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gbe:return(e.displayName||"Context")+".Consumer";case mbe:return(e._context.displayName||"Context")+".Provider";case kW:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $W:return t=e.displayName||null,t!==null?t:j7(e.type)||"Memo";case Cm:t=e._payload,e=e._init;try{return j7(e(t))}catch{}}return null}function aqe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j7(t);case 8:return t===PW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vbe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uqe(e){var t=vbe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function CO(e){e._valueTracker||(e._valueTracker=uqe(e))}function _be(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vbe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Q$(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function z7(e,t){var n=t.checked;return bi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mg(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bbe(e,t){t=t.checked,t!=null&&OW(e,"checked",t,!1)}function U7(e,t){bbe(e,t);var n=Mg(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?V7(e,t.type,n):t.hasOwnProperty("defaultValue")&&V7(e,t.type,Mg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Eie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function V7(e,t,n){(t!=="number"||Q$(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var MS=Array.isArray;function mb(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mg(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function H7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return bi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(MS(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mg(n)}}function wbe(e,t){var n=Mg(t.value),r=Mg(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Sie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ebe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ebe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var IO,xbe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(IO=IO||document.createElement("div"),IO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=IO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function P2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var CT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lqe=["Webkit","ms","Moz","O"];Object.keys(CT).forEach(function(e){lqe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),CT[t]=CT[e]})});function Sbe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||CT.hasOwnProperty(e)&&CT[e]?(""+t).trim():t+"px"}function Tbe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Sbe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var cqe=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function W7(e,t){if(t){if(cqe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function G7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y7=null;function RW(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var K7=null,gb=null,yb=null;function Tie(e){if(e=AC(e)){if(typeof K7!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=OM(t),K7(e.stateNode,e.type,t))}}function Abe(e){gb?yb?yb.push(e):yb=[e]:gb=e}function Cbe(){if(gb){var e=gb,t=yb;if(yb=gb=null,Tie(e),t)for(e=0;e<t.length;e++)Tie(t[e])}}function Ibe(e,t){return e(t)}function Obe(){}var T8=!1;function Pbe(e,t,n){if(T8)return e(t,n);T8=!0;try{return Ibe(e,t,n)}finally{T8=!1,(gb!==null||yb!==null)&&(Obe(),Cbe())}}function k2(e,t){var n=e.stateNode;if(n===null)return null;var r=OM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var X7=!1;if(wp)try{var Rx={};Object.defineProperty(Rx,"passive",{get:function(){X7=!0}}),window.addEventListener("test",Rx,Rx),window.removeEventListener("test",Rx,Rx)}catch{X7=!1}function fqe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var IT=!1,J$=null,Z$=!1,Q7=null,dqe={onError:function(e){IT=!0,J$=e}};function hqe(e,t,n,r,i,s,o,a,u){IT=!1,J$=null,fqe.apply(dqe,arguments)}function pqe(e,t,n,r,i,s,o,a,u){if(hqe.apply(this,arguments),IT){if(IT){var l=J$;IT=!1,J$=null}else throw Error(qe(198));Z$||(Z$=!0,Q7=l)}}function vv(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kbe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Aie(e){if(vv(e)!==e)throw Error(qe(188))}function mqe(e){var t=e.alternate;if(!t){if(t=vv(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Aie(i),e;if(s===r)return Aie(i),t;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function $be(e){return e=mqe(e),e!==null?Rbe(e):null}function Rbe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Rbe(e);if(t!==null)return t;e=e.sibling}return null}var Nbe=rl.unstable_scheduleCallback,Cie=rl.unstable_cancelCallback,gqe=rl.unstable_shouldYield,yqe=rl.unstable_requestPaint,Ui=rl.unstable_now,vqe=rl.unstable_getCurrentPriorityLevel,NW=rl.unstable_ImmediatePriority,Dbe=rl.unstable_UserBlockingPriority,eR=rl.unstable_NormalPriority,_qe=rl.unstable_LowPriority,Lbe=rl.unstable_IdlePriority,TM=null,wd=null;function bqe(e){if(wd&&typeof wd.onCommitFiberRoot=="function")try{wd.onCommitFiberRoot(TM,e,void 0,(e.current.flags&128)===128)}catch{}}var nf=Math.clz32?Math.clz32:xqe,wqe=Math.log,Eqe=Math.LN2;function xqe(e){return e>>>=0,e===0?32:31-(wqe(e)/Eqe|0)|0}var OO=64,PO=4194304;function FS(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tR(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=FS(a):(s&=o,s!==0&&(r=FS(s)))}else o=n&~i,o!==0?r=FS(o):s!==0&&(r=FS(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-nf(t),i=1<<n,r|=e[n],t&=~i;return r}function Sqe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tqe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-nf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Sqe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function J7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mbe(){var e=OO;return OO<<=1,!(OO&4194240)&&(OO=64),e}function A8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function SC(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nf(t),e[t]=n}function Aqe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-nf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function DW(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-nf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var br=0;function Fbe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bbe,LW,jbe,zbe,Ube,Z7=!1,kO=[],cg=null,fg=null,dg=null,$2=new Map,R2=new Map,Mm=[],Cqe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iie(e,t){switch(e){case"focusin":case"focusout":cg=null;break;case"dragenter":case"dragleave":fg=null;break;case"mouseover":case"mouseout":dg=null;break;case"pointerover":case"pointerout":$2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":R2.delete(t.pointerId)}}function Nx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=AC(t),t!==null&&LW(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Iqe(e,t,n,r,i){switch(t){case"focusin":return cg=Nx(cg,e,t,n,r,i),!0;case"dragenter":return fg=Nx(fg,e,t,n,r,i),!0;case"mouseover":return dg=Nx(dg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return $2.set(s,Nx($2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,R2.set(s,Nx(R2.get(s)||null,e,t,n,r,i)),!0}return!1}function Vbe(e){var t=Fy(e.target);if(t!==null){var n=vv(t);if(n!==null){if(t=n.tag,t===13){if(t=kbe(n),t!==null){e.blockedOn=t,Ube(e.priority,function(){jbe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kk(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ez(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Y7=r,n.target.dispatchEvent(r),Y7=null}else return t=AC(n),t!==null&&LW(t),e.blockedOn=n,!1;t.shift()}return!0}function Oie(e,t,n){kk(e)&&n.delete(t)}function Oqe(){Z7=!1,cg!==null&&kk(cg)&&(cg=null),fg!==null&&kk(fg)&&(fg=null),dg!==null&&kk(dg)&&(dg=null),$2.forEach(Oie),R2.forEach(Oie)}function Dx(e,t){e.blockedOn===t&&(e.blockedOn=null,Z7||(Z7=!0,rl.unstable_scheduleCallback(rl.unstable_NormalPriority,Oqe)))}function N2(e){function t(i){return Dx(i,e)}if(0<kO.length){Dx(kO[0],e);for(var n=1;n<kO.length;n++){var r=kO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cg!==null&&Dx(cg,e),fg!==null&&Dx(fg,e),dg!==null&&Dx(dg,e),$2.forEach(t),R2.forEach(t),n=0;n<Mm.length;n++)r=Mm[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mm.length&&(n=Mm[0],n.blockedOn===null);)Vbe(n),n.blockedOn===null&&Mm.shift()}var vb=Gp.ReactCurrentBatchConfig,nR=!0;function Pqe(e,t,n,r){var i=br,s=vb.transition;vb.transition=null;try{br=1,MW(e,t,n,r)}finally{br=i,vb.transition=s}}function kqe(e,t,n,r){var i=br,s=vb.transition;vb.transition=null;try{br=4,MW(e,t,n,r)}finally{br=i,vb.transition=s}}function MW(e,t,n,r){if(nR){var i=ez(e,t,n,r);if(i===null)L8(e,t,r,rR,n),Iie(e,r);else if(Iqe(i,e,t,n,r))r.stopPropagation();else if(Iie(e,r),t&4&&-1<Cqe.indexOf(e)){for(;i!==null;){var s=AC(i);if(s!==null&&Bbe(s),s=ez(e,t,n,r),s===null&&L8(e,t,r,rR,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else L8(e,t,r,null,n)}}var rR=null;function ez(e,t,n,r){if(rR=null,e=RW(r),e=Fy(e),e!==null)if(t=vv(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kbe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rR=e,null}function Hbe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vqe()){case NW:return 1;case Dbe:return 4;case eR:case _qe:return 16;case Lbe:return 536870912;default:return 16}default:return 16}}var Gm=null,FW=null,$k=null;function qbe(){if($k)return $k;var e,t=FW,n=t.length,r,i="value"in Gm?Gm.value:Gm.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return $k=i.slice(e,1<r?1-r:void 0)}function Rk(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $O(){return!0}function Pie(){return!1}function gl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$O:Pie,this.isPropagationStopped=Pie,this}return bi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$O)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$O)},persist:function(){},isPersistent:$O}),t}var _E={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},BW=gl(_E),TC=bi({},_E,{view:0,detail:0}),$qe=gl(TC),C8,I8,Lx,AM=bi({},TC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lx&&(Lx&&e.type==="mousemove"?(C8=e.screenX-Lx.screenX,I8=e.screenY-Lx.screenY):I8=C8=0,Lx=e),C8)},movementY:function(e){return"movementY"in e?e.movementY:I8}}),kie=gl(AM),Rqe=bi({},AM,{dataTransfer:0}),Nqe=gl(Rqe),Dqe=bi({},TC,{relatedTarget:0}),O8=gl(Dqe),Lqe=bi({},_E,{animationName:0,elapsedTime:0,pseudoElement:0}),Mqe=gl(Lqe),Fqe=bi({},_E,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bqe=gl(Fqe),jqe=bi({},_E,{data:0}),$ie=gl(jqe),zqe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uqe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vqe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hqe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vqe[e])?!!t[e]:!1}function jW(){return Hqe}var qqe=bi({},TC,{key:function(e){if(e.key){var t=zqe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rk(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uqe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jW,charCode:function(e){return e.type==="keypress"?Rk(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rk(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wqe=gl(qqe),Gqe=bi({},AM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rie=gl(Gqe),Yqe=bi({},TC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jW}),Kqe=gl(Yqe),Xqe=bi({},_E,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qqe=gl(Xqe),Jqe=bi({},AM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zqe=gl(Jqe),eWe=[9,13,27,32],zW=wp&&"CompositionEvent"in window,OT=null;wp&&"documentMode"in document&&(OT=document.documentMode);var tWe=wp&&"TextEvent"in window&&!OT,Wbe=wp&&(!zW||OT&&8<OT&&11>=OT),Nie=" ",Die=!1;function Gbe(e,t){switch(e){case"keyup":return eWe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ybe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var V_=!1;function nWe(e,t){switch(e){case"compositionend":return Ybe(t);case"keypress":return t.which!==32?null:(Die=!0,Nie);case"textInput":return e=t.data,e===Nie&&Die?null:e;default:return null}}function rWe(e,t){if(V_)return e==="compositionend"||!zW&&Gbe(e,t)?(e=qbe(),$k=FW=Gm=null,V_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wbe&&t.locale!=="ko"?null:t.data;default:return null}}var iWe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iWe[e.type]:t==="textarea"}function Kbe(e,t,n,r){Abe(r),t=iR(t,"onChange"),0<t.length&&(n=new BW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var PT=null,D2=null;function sWe(e){owe(e,0)}function CM(e){var t=W_(e);if(_be(t))return e}function oWe(e,t){if(e==="change")return t}var Xbe=!1;if(wp){var P8;if(wp){var k8="oninput"in document;if(!k8){var Mie=document.createElement("div");Mie.setAttribute("oninput","return;"),k8=typeof Mie.oninput=="function"}P8=k8}else P8=!1;Xbe=P8&&(!document.documentMode||9<document.documentMode)}function Fie(){PT&&(PT.detachEvent("onpropertychange",Qbe),D2=PT=null)}function Qbe(e){if(e.propertyName==="value"&&CM(D2)){var t=[];Kbe(t,D2,e,RW(e)),Pbe(sWe,t)}}function aWe(e,t,n){e==="focusin"?(Fie(),PT=t,D2=n,PT.attachEvent("onpropertychange",Qbe)):e==="focusout"&&Fie()}function uWe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return CM(D2)}function lWe(e,t){if(e==="click")return CM(t)}function cWe(e,t){if(e==="input"||e==="change")return CM(t)}function fWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ff=typeof Object.is=="function"?Object.is:fWe;function L2(e,t){if(ff(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!L7.call(t,i)||!ff(e[i],t[i]))return!1}return!0}function Bie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jie(e,t){var n=Bie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bie(n)}}function Jbe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jbe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zbe(){for(var e=window,t=Q$();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Q$(e.document)}return t}function UW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function dWe(e){var t=Zbe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Jbe(n.ownerDocument.documentElement,n)){if(r!==null&&UW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=jie(n,s);var o=jie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hWe=wp&&"documentMode"in document&&11>=document.documentMode,H_=null,tz=null,kT=null,nz=!1;function zie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nz||H_==null||H_!==Q$(r)||(r=H_,"selectionStart"in r&&UW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kT&&L2(kT,r)||(kT=r,r=iR(tz,"onSelect"),0<r.length&&(t=new BW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=H_)))}function RO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var q_={animationend:RO("Animation","AnimationEnd"),animationiteration:RO("Animation","AnimationIteration"),animationstart:RO("Animation","AnimationStart"),transitionend:RO("Transition","TransitionEnd")},$8={},ewe={};wp&&(ewe=document.createElement("div").style,"AnimationEvent"in window||(delete q_.animationend.animation,delete q_.animationiteration.animation,delete q_.animationstart.animation),"TransitionEvent"in window||delete q_.transitionend.transition);function IM(e){if($8[e])return $8[e];if(!q_[e])return e;var t=q_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ewe)return $8[e]=t[n];return e}var twe=IM("animationend"),nwe=IM("animationiteration"),rwe=IM("animationstart"),iwe=IM("transitionend"),swe=new Map,Uie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function x0(e,t){swe.set(e,t),yv(t,[e])}for(var R8=0;R8<Uie.length;R8++){var N8=Uie[R8],pWe=N8.toLowerCase(),mWe=N8[0].toUpperCase()+N8.slice(1);x0(pWe,"on"+mWe)}x0(twe,"onAnimationEnd");x0(nwe,"onAnimationIteration");x0(rwe,"onAnimationStart");x0("dblclick","onDoubleClick");x0("focusin","onFocus");x0("focusout","onBlur");x0(iwe,"onTransitionEnd");tw("onMouseEnter",["mouseout","mouseover"]);tw("onMouseLeave",["mouseout","mouseover"]);tw("onPointerEnter",["pointerout","pointerover"]);tw("onPointerLeave",["pointerout","pointerover"]);yv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yv("onBeforeInput",["compositionend","keypress","textInput","paste"]);yv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var BS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gWe=new Set("cancel close invalid load scroll toggle".split(" ").concat(BS));function Vie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,pqe(r,t,void 0,e),e.currentTarget=null}function owe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Vie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Vie(i,a,l),s=u}}}if(Z$)throw e=Q7,Z$=!1,Q7=null,e}function Wr(e,t){var n=t[az];n===void 0&&(n=t[az]=new Set);var r=e+"__bubble";n.has(r)||(awe(t,e,2,!1),n.add(r))}function D8(e,t,n){var r=0;t&&(r|=4),awe(n,e,r,t)}var NO="_reactListening"+Math.random().toString(36).slice(2);function M2(e){if(!e[NO]){e[NO]=!0,pbe.forEach(function(n){n!=="selectionchange"&&(gWe.has(n)||D8(n,!1,e),D8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[NO]||(t[NO]=!0,D8("selectionchange",!1,t))}}function awe(e,t,n,r){switch(Hbe(t)){case 1:var i=Pqe;break;case 4:i=kqe;break;default:i=MW}n=i.bind(null,t,n,e),i=void 0,!X7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function L8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Fy(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Pbe(function(){var l=s,c=RW(n),f=[];e:{var d=swe.get(e);if(d!==void 0){var h=BW,p=e;switch(e){case"keypress":if(Rk(n)===0)break e;case"keydown":case"keyup":h=Wqe;break;case"focusin":p="focus",h=O8;break;case"focusout":p="blur",h=O8;break;case"beforeblur":case"afterblur":h=O8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=kie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Nqe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Kqe;break;case twe:case nwe:case rwe:h=Mqe;break;case iwe:h=Qqe;break;case"scroll":h=$qe;break;case"wheel":h=Zqe;break;case"copy":case"cut":case"paste":h=Bqe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Rie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=k2(v,y),b!=null&&m.push(F2(v,b,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Y7&&(p=n.relatedTarget||n.fromElement)&&(Fy(p)||p[Ep]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Fy(p):null,p!==null&&(g=vv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=kie,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Rie,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:W_(h),_=p==null?d:W_(p),d=new m(b,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,b=null,Fy(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=r_(_))v++;for(_=0,b=y;b;b=r_(b))_++;for(;0<v-_;)m=r_(m),v--;for(;0<_-v;)y=r_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=r_(m),y=r_(y)}m=null}else m=null;h!==null&&Hie(f,d,h,m,!1),p!==null&&g!==null&&Hie(f,g,p,m,!0)}}e:{if(d=l?W_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=oWe;else if(Lie(d))if(Xbe)E=cWe;else{E=uWe;var w=aWe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=lWe);if(E&&(E=E(e,l))){Kbe(f,E,n,c);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&V7(d,"number",d.value)}switch(w=l?W_(l):window,e){case"focusin":(Lie(w)||w.contentEditable==="true")&&(H_=w,tz=l,kT=null);break;case"focusout":kT=tz=H_=null;break;case"mousedown":nz=!0;break;case"contextmenu":case"mouseup":case"dragend":nz=!1,zie(f,n,c);break;case"selectionchange":if(hWe)break;case"keydown":case"keyup":zie(f,n,c)}var x;if(zW)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else V_?Gbe(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Wbe&&n.locale!=="ko"&&(V_||S!=="onCompositionStart"?S==="onCompositionEnd"&&V_&&(x=qbe()):(Gm=c,FW="value"in Gm?Gm.value:Gm.textContent,V_=!0)),w=iR(l,S),0<w.length&&(S=new $ie(S,e,null,n,c),f.push({event:S,listeners:w}),x?S.data=x:(x=Ybe(n),x!==null&&(S.data=x)))),(x=tWe?nWe(e,n):rWe(e,n))&&(l=iR(l,"onBeforeInput"),0<l.length&&(c=new $ie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}owe(f,t)})}function F2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function iR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=k2(e,n),s!=null&&r.unshift(F2(e,s,i)),s=k2(e,t),s!=null&&r.push(F2(e,s,i))),e=e.return}return r}function r_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=k2(n,s),u!=null&&o.unshift(F2(n,u,a))):i||(u=k2(n,s),u!=null&&o.push(F2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var yWe=/\r\n?/g,vWe=/\u0000|\uFFFD/g;function qie(e){return(typeof e=="string"?e:""+e).replace(yWe,`
`).replace(vWe,"")}function DO(e,t,n){if(t=qie(t),qie(e)!==t&&n)throw Error(qe(425))}function sR(){}var rz=null,iz=null;function sz(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oz=typeof setTimeout=="function"?setTimeout:void 0,_We=typeof clearTimeout=="function"?clearTimeout:void 0,Wie=typeof Promise=="function"?Promise:void 0,bWe=typeof queueMicrotask=="function"?queueMicrotask:typeof Wie<"u"?function(e){return Wie.resolve(null).then(e).catch(wWe)}:oz;function wWe(e){setTimeout(function(){throw e})}function M8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),N2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);N2(t)}function hg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var bE=Math.random().toString(36).slice(2),td="__reactFiber$"+bE,B2="__reactProps$"+bE,Ep="__reactContainer$"+bE,az="__reactEvents$"+bE,EWe="__reactListeners$"+bE,xWe="__reactHandles$"+bE;function Fy(e){var t=e[td];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ep]||n[td]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gie(e);e!==null;){if(n=e[td])return n;e=Gie(e)}return t}e=n,n=e.parentNode}return null}function AC(e){return e=e[td]||e[Ep],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function W_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function OM(e){return e[B2]||null}var uz=[],G_=-1;function S0(e){return{current:e}}function Zr(e){0>G_||(e.current=uz[G_],uz[G_]=null,G_--)}function Ur(e,t){G_++,uz[G_]=e.current,e.current=t}var Fg={},Jo=S0(Fg),lu=S0(!1),C1=Fg;function nw(e,t){var n=e.type.contextTypes;if(!n)return Fg;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function cu(e){return e=e.childContextTypes,e!=null}function oR(){Zr(lu),Zr(Jo)}function Yie(e,t,n){if(Jo.current!==Fg)throw Error(qe(168));Ur(Jo,t),Ur(lu,n)}function uwe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(qe(108,aqe(e)||"Unknown",i));return bi({},n,r)}function aR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fg,C1=Jo.current,Ur(Jo,e),Ur(lu,lu.current),!0}function Kie(e,t,n){var r=e.stateNode;if(!r)throw Error(qe(169));n?(e=uwe(e,t,C1),r.__reactInternalMemoizedMergedChildContext=e,Zr(lu),Zr(Jo),Ur(Jo,e)):Zr(lu),Ur(lu,n)}var Dh=null,PM=!1,F8=!1;function lwe(e){Dh===null?Dh=[e]:Dh.push(e)}function SWe(e){PM=!0,lwe(e)}function T0(){if(!F8&&Dh!==null){F8=!0;var e=0,t=br;try{var n=Dh;for(br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Dh=null,PM=!1}catch(i){throw Dh!==null&&(Dh=Dh.slice(e+1)),Nbe(NW,T0),i}finally{br=t,F8=!1}}return null}var Y_=[],K_=0,uR=null,lR=0,Pl=[],kl=0,I1=null,Gh=1,Yh="";function dy(e,t){Y_[K_++]=lR,Y_[K_++]=uR,uR=e,lR=t}function cwe(e,t,n){Pl[kl++]=Gh,Pl[kl++]=Yh,Pl[kl++]=I1,I1=e;var r=Gh;e=Yh;var i=32-nf(r)-1;r&=~(1<<i),n+=1;var s=32-nf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gh=1<<32-nf(t)+i|n<<i|r,Yh=s+e}else Gh=1<<s|n<<i|r,Yh=e}function VW(e){e.return!==null&&(dy(e,1),cwe(e,1,0))}function HW(e){for(;e===uR;)uR=Y_[--K_],Y_[K_]=null,lR=Y_[--K_],Y_[K_]=null;for(;e===I1;)I1=Pl[--kl],Pl[kl]=null,Yh=Pl[--kl],Pl[kl]=null,Gh=Pl[--kl],Pl[kl]=null}var Ju=null,Wu=null,ci=!1,Bc=null;function fwe(e,t){var n=zl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Xie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ju=e,Wu=hg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ju=e,Wu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=I1!==null?{id:Gh,overflow:Yh}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ju=e,Wu=null,!0):!1;default:return!1}}function lz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cz(e){if(ci){var t=Wu;if(t){var n=t;if(!Xie(e,t)){if(lz(e))throw Error(qe(418));t=hg(n.nextSibling);var r=Ju;t&&Xie(e,t)?fwe(r,n):(e.flags=e.flags&-4097|2,ci=!1,Ju=e)}}else{if(lz(e))throw Error(qe(418));e.flags=e.flags&-4097|2,ci=!1,Ju=e}}}function Qie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ju=e}function LO(e){if(e!==Ju)return!1;if(!ci)return Qie(e),ci=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sz(e.type,e.memoizedProps)),t&&(t=Wu)){if(lz(e))throw dwe(),Error(qe(418));for(;t;)fwe(e,t),t=hg(t.nextSibling)}if(Qie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wu=hg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wu=null}}else Wu=Ju?hg(e.stateNode.nextSibling):null;return!0}function dwe(){for(var e=Wu;e;)e=hg(e.nextSibling)}function rw(){Wu=Ju=null,ci=!1}function qW(e){Bc===null?Bc=[e]:Bc.push(e)}var TWe=Gp.ReactCurrentBatchConfig;function Rc(e,t){if(e&&e.defaultProps){t=bi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var cR=S0(null),fR=null,X_=null,WW=null;function GW(){WW=X_=fR=null}function YW(e){var t=cR.current;Zr(cR),e._currentValue=t}function fz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _b(e,t){fR=e,WW=X_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(su=!0),e.firstContext=null)}function Xl(e){var t=e._currentValue;if(WW!==e)if(e={context:e,memoizedValue:t,next:null},X_===null){if(fR===null)throw Error(qe(308));X_=e,fR.dependencies={lanes:0,firstContext:e}}else X_=X_.next=e;return t}var By=null;function KW(e){By===null?By=[e]:By.push(e)}function hwe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,KW(t)):(n.next=i.next,i.next=n),t.interleaved=n,xp(e,r)}function xp(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Im=!1;function XW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pwe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function op(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,xp(e,n)}return i=r.interleaved,i===null?(t.next=t,KW(r)):(t.next=i.next,i.next=t),r.interleaved=t,xp(e,n)}function Nk(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,DW(e,n)}}function Jie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dR(e,t,n,r){var i=e.updateQueue;Im=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=bi({},f,d);break e;case 2:Im=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);P1|=o,e.lanes=o,e.memoizedState=f}}function Zie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var mwe=new hbe.Component().refs;function dz(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:bi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var kM={isMounted:function(e){return(e=e._reactInternals)?vv(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ba(),i=gg(e),s=op(r,i);s.payload=t,n!=null&&(s.callback=n),t=pg(e,s,i),t!==null&&(rf(t,e,i,r),Nk(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ba(),i=gg(e),s=op(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=pg(e,s,i),t!==null&&(rf(t,e,i,r),Nk(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ba(),r=gg(e),i=op(n,r);i.tag=2,t!=null&&(i.callback=t),t=pg(e,i,r),t!==null&&(rf(t,e,r,n),Nk(t,e,r))}};function ese(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!L2(n,r)||!L2(i,s):!0}function gwe(e,t,n){var r=!1,i=Fg,s=t.contextType;return typeof s=="object"&&s!==null?s=Xl(s):(i=cu(t)?C1:Jo.current,r=t.contextTypes,s=(r=r!=null)?nw(e,i):Fg),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function tse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&kM.enqueueReplaceState(t,t.state,null)}function hz(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=mwe,XW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Xl(s):(s=cu(t)?C1:Jo.current,i.context=nw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(dz(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&kM.enqueueReplaceState(i,i.state,null),dR(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Mx(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===mwe&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function MO(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nse(e){var t=e._init;return t(e._payload)}function ywe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=yg(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,b){return v===null||v.tag!==6?(v=q8(_,y.mode,b),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,b){var E=_.type;return E===U_?c(y,v,_.props.children,b,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Cm&&nse(E)===v.type)?(b=i(v,_.props),b.ref=Mx(y,v,_),b.return=y,b):(b=jk(_.type,_.key,_.props,null,y.mode,b),b.ref=Mx(y,v,_),b.return=y,b)}function l(y,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=W8(_,y.mode,b),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,b,E){return v===null||v.tag!==7?(v=a1(_,y.mode,b,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=q8(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case AO:return _=jk(v.type,v.key,v.props,null,y.mode,_),_.ref=Mx(y,null,v),_.return=y,_;case z_:return v=W8(v,y.mode,_),v.return=y,v;case Cm:var b=v._init;return f(y,b(v._payload),_)}if(MS(v)||$x(v))return v=a1(v,y.mode,_,null),v.return=y,v;MO(y,v)}return null}function d(y,v,_,b){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case AO:return _.key===E?u(y,v,_,b):null;case z_:return _.key===E?l(y,v,_,b):null;case Cm:return E=_._init,d(y,v,E(_._payload),b)}if(MS(_)||$x(_))return E!==null?null:c(y,v,_,b,null);MO(y,_)}return null}function h(y,v,_,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,a(v,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case AO:return y=y.get(b.key===null?_:b.key)||null,u(v,y,b,E);case z_:return y=y.get(b.key===null?_:b.key)||null,l(v,y,b,E);case Cm:var w=b._init;return h(y,v,_,w(b._payload),E)}if(MS(b)||$x(b))return y=y.get(_)||null,c(v,y,b,E,null);MO(v,b)}return null}function p(y,v,_,b){for(var E=null,w=null,x=v,S=v=0,I=null;x!==null&&S<_.length;S++){x.index>S?(I=x,x=null):I=x.sibling;var C=d(y,x,_[S],b);if(C===null){x===null&&(x=I);break}e&&x&&C.alternate===null&&t(y,x),v=s(C,v,S),w===null?E=C:w.sibling=C,w=C,x=I}if(S===_.length)return n(y,x),ci&&dy(y,S),E;if(x===null){for(;S<_.length;S++)x=f(y,_[S],b),x!==null&&(v=s(x,v,S),w===null?E=x:w.sibling=x,w=x);return ci&&dy(y,S),E}for(x=r(y,x);S<_.length;S++)I=h(x,y,S,_[S],b),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?S:I.key),v=s(I,v,S),w===null?E=I:w.sibling=I,w=I);return e&&x.forEach(function(O){return t(y,O)}),ci&&dy(y,S),E}function m(y,v,_,b){var E=$x(_);if(typeof E!="function")throw Error(qe(150));if(_=E.call(_),_==null)throw Error(qe(151));for(var w=E=null,x=v,S=v=0,I=null,C=_.next();x!==null&&!C.done;S++,C=_.next()){x.index>S?(I=x,x=null):I=x.sibling;var O=d(y,x,C.value,b);if(O===null){x===null&&(x=I);break}e&&x&&O.alternate===null&&t(y,x),v=s(O,v,S),w===null?E=O:w.sibling=O,w=O,x=I}if(C.done)return n(y,x),ci&&dy(y,S),E;if(x===null){for(;!C.done;S++,C=_.next())C=f(y,C.value,b),C!==null&&(v=s(C,v,S),w===null?E=C:w.sibling=C,w=C);return ci&&dy(y,S),E}for(x=r(y,x);!C.done;S++,C=_.next())C=h(x,y,S,C.value,b),C!==null&&(e&&C.alternate!==null&&x.delete(C.key===null?S:C.key),v=s(C,v,S),w===null?E=C:w.sibling=C,w=C);return e&&x.forEach(function(z){return t(y,z)}),ci&&dy(y,S),E}function g(y,v,_,b){if(typeof _=="object"&&_!==null&&_.type===U_&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case AO:e:{for(var E=_.key,w=v;w!==null;){if(w.key===E){if(E=_.type,E===U_){if(w.tag===7){n(y,w.sibling),v=i(w,_.props.children),v.return=y,y=v;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Cm&&nse(E)===w.type){n(y,w.sibling),v=i(w,_.props),v.ref=Mx(y,w,_),v.return=y,y=v;break e}n(y,w);break}else t(y,w);w=w.sibling}_.type===U_?(v=a1(_.props.children,y.mode,b,_.key),v.return=y,y=v):(b=jk(_.type,_.key,_.props,null,y.mode,b),b.ref=Mx(y,v,_),b.return=y,y=b)}return o(y);case z_:e:{for(w=_.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=W8(_,y.mode,b),v.return=y,y=v}return o(y);case Cm:return w=_._init,g(y,v,w(_._payload),b)}if(MS(_))return p(y,v,_,b);if($x(_))return m(y,v,_,b);MO(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=q8(_,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var iw=ywe(!0),vwe=ywe(!1),CC={},Ed=S0(CC),j2=S0(CC),z2=S0(CC);function jy(e){if(e===CC)throw Error(qe(174));return e}function QW(e,t){switch(Ur(z2,t),Ur(j2,e),Ur(Ed,CC),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:q7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=q7(t,e)}Zr(Ed),Ur(Ed,t)}function sw(){Zr(Ed),Zr(j2),Zr(z2)}function _we(e){jy(z2.current);var t=jy(Ed.current),n=q7(t,e.type);t!==n&&(Ur(j2,e),Ur(Ed,n))}function JW(e){j2.current===e&&(Zr(Ed),Zr(j2))}var vi=S0(0);function hR(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var B8=[];function ZW(){for(var e=0;e<B8.length;e++)B8[e]._workInProgressVersionPrimary=null;B8.length=0}var Dk=Gp.ReactCurrentDispatcher,j8=Gp.ReactCurrentBatchConfig,O1=0,_i=null,fs=null,Rs=null,pR=!1,$T=!1,U2=0,AWe=0;function So(){throw Error(qe(321))}function eG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ff(e[n],t[n]))return!1;return!0}function tG(e,t,n,r,i,s){if(O1=s,_i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dk.current=e===null||e.memoizedState===null?PWe:kWe,e=n(r,i),$T){s=0;do{if($T=!1,U2=0,25<=s)throw Error(qe(301));s+=1,Rs=fs=null,t.updateQueue=null,Dk.current=$We,e=n(r,i)}while($T)}if(Dk.current=mR,t=fs!==null&&fs.next!==null,O1=0,Rs=fs=_i=null,pR=!1,t)throw Error(qe(300));return e}function nG(){var e=U2!==0;return U2=0,e}function Vf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rs===null?_i.memoizedState=Rs=e:Rs=Rs.next=e,Rs}function Ql(){if(fs===null){var e=_i.alternate;e=e!==null?e.memoizedState:null}else e=fs.next;var t=Rs===null?_i.memoizedState:Rs.next;if(t!==null)Rs=t,fs=e;else{if(e===null)throw Error(qe(310));fs=e,e={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},Rs===null?_i.memoizedState=Rs=e:Rs=Rs.next=e}return Rs}function V2(e,t){return typeof t=="function"?t(e):t}function z8(e){var t=Ql(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=fs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((O1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,_i.lanes|=c,P1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,ff(r,t.memoizedState)||(su=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,_i.lanes|=s,P1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function U8(e){var t=Ql(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);ff(s,t.memoizedState)||(su=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function bwe(){}function wwe(e,t){var n=_i,r=Ql(),i=t(),s=!ff(r.memoizedState,i);if(s&&(r.memoizedState=i,su=!0),r=r.queue,rG(Swe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Rs!==null&&Rs.memoizedState.tag&1){if(n.flags|=2048,H2(9,xwe.bind(null,n,r,i,t),void 0,null),Vs===null)throw Error(qe(349));O1&30||Ewe(n,t,i)}return i}function Ewe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_i.updateQueue,t===null?(t={lastEffect:null,stores:null},_i.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xwe(e,t,n,r){t.value=n,t.getSnapshot=r,Twe(t)&&Awe(e)}function Swe(e,t,n){return n(function(){Twe(t)&&Awe(e)})}function Twe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ff(e,n)}catch{return!0}}function Awe(e){var t=xp(e,1);t!==null&&rf(t,e,1,-1)}function rse(e){var t=Vf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:V2,lastRenderedState:e},t.queue=e,e=e.dispatch=OWe.bind(null,_i,e),[t.memoizedState,e]}function H2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_i.updateQueue,t===null?(t={lastEffect:null,stores:null},_i.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cwe(){return Ql().memoizedState}function Lk(e,t,n,r){var i=Vf();_i.flags|=e,i.memoizedState=H2(1|t,n,void 0,r===void 0?null:r)}function $M(e,t,n,r){var i=Ql();r=r===void 0?null:r;var s=void 0;if(fs!==null){var o=fs.memoizedState;if(s=o.destroy,r!==null&&eG(r,o.deps)){i.memoizedState=H2(t,n,s,r);return}}_i.flags|=e,i.memoizedState=H2(1|t,n,s,r)}function ise(e,t){return Lk(8390656,8,e,t)}function rG(e,t){return $M(2048,8,e,t)}function Iwe(e,t){return $M(4,2,e,t)}function Owe(e,t){return $M(4,4,e,t)}function Pwe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kwe(e,t,n){return n=n!=null?n.concat([e]):null,$M(4,4,Pwe.bind(null,t,e),n)}function iG(){}function $we(e,t){var n=Ql();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&eG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Rwe(e,t){var n=Ql();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&eG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nwe(e,t,n){return O1&21?(ff(n,t)||(n=Mbe(),_i.lanes|=n,P1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,su=!0),e.memoizedState=n)}function CWe(e,t){var n=br;br=n!==0&&4>n?n:4,e(!0);var r=j8.transition;j8.transition={};try{e(!1),t()}finally{br=n,j8.transition=r}}function Dwe(){return Ql().memoizedState}function IWe(e,t,n){var r=gg(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lwe(e))Mwe(t,n);else if(n=hwe(e,t,n,r),n!==null){var i=ba();rf(n,e,r,i),Fwe(n,t,r)}}function OWe(e,t,n){var r=gg(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lwe(e))Mwe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ff(a,o)){var u=t.interleaved;u===null?(i.next=i,KW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=hwe(e,t,i,r),n!==null&&(i=ba(),rf(n,e,r,i),Fwe(n,t,r))}}function Lwe(e){var t=e.alternate;return e===_i||t!==null&&t===_i}function Mwe(e,t){$T=pR=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fwe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,DW(e,n)}}var mR={readContext:Xl,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},PWe={readContext:Xl,useCallback:function(e,t){return Vf().memoizedState=[e,t===void 0?null:t],e},useContext:Xl,useEffect:ise,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Lk(4194308,4,Pwe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lk(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lk(4,2,e,t)},useMemo:function(e,t){var n=Vf();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Vf();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=IWe.bind(null,_i,e),[r.memoizedState,e]},useRef:function(e){var t=Vf();return e={current:e},t.memoizedState=e},useState:rse,useDebugValue:iG,useDeferredValue:function(e){return Vf().memoizedState=e},useTransition:function(){var e=rse(!1),t=e[0];return e=CWe.bind(null,e[1]),Vf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_i,i=Vf();if(ci){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),Vs===null)throw Error(qe(349));O1&30||Ewe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ise(Swe.bind(null,r,s,e),[e]),r.flags|=2048,H2(9,xwe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Vf(),t=Vs.identifierPrefix;if(ci){var n=Yh,r=Gh;n=(r&~(1<<32-nf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=U2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=AWe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kWe={readContext:Xl,useCallback:$we,useContext:Xl,useEffect:rG,useImperativeHandle:kwe,useInsertionEffect:Iwe,useLayoutEffect:Owe,useMemo:Rwe,useReducer:z8,useRef:Cwe,useState:function(){return z8(V2)},useDebugValue:iG,useDeferredValue:function(e){var t=Ql();return Nwe(t,fs.memoizedState,e)},useTransition:function(){var e=z8(V2)[0],t=Ql().memoizedState;return[e,t]},useMutableSource:bwe,useSyncExternalStore:wwe,useId:Dwe,unstable_isNewReconciler:!1},$We={readContext:Xl,useCallback:$we,useContext:Xl,useEffect:rG,useImperativeHandle:kwe,useInsertionEffect:Iwe,useLayoutEffect:Owe,useMemo:Rwe,useReducer:U8,useRef:Cwe,useState:function(){return U8(V2)},useDebugValue:iG,useDeferredValue:function(e){var t=Ql();return fs===null?t.memoizedState=e:Nwe(t,fs.memoizedState,e)},useTransition:function(){var e=U8(V2)[0],t=Ql().memoizedState;return[e,t]},useMutableSource:bwe,useSyncExternalStore:wwe,useId:Dwe,unstable_isNewReconciler:!1};function ow(e,t){try{var n="",r=t;do n+=oqe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function V8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function pz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var RWe=typeof WeakMap=="function"?WeakMap:Map;function Bwe(e,t,n){n=op(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yR||(yR=!0,Sz=r),pz(e,t)},n}function jwe(e,t,n){n=op(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pz(e,t),typeof r!="function"&&(mg===null?mg=new Set([this]):mg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function sse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new RWe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=GWe.bind(null,e,t,n),t.then(e,e))}function ose(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ase(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=op(-1,1),t.tag=2,pg(n,t,1))),n.lanes|=1),e)}var NWe=Gp.ReactCurrentOwner,su=!1;function fa(e,t,n,r){t.child=e===null?vwe(t,null,n,r):iw(t,e.child,n,r)}function use(e,t,n,r,i){n=n.render;var s=t.ref;return _b(t,i),r=tG(e,t,n,r,s,i),n=nG(),e!==null&&!su?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Sp(e,t,i)):(ci&&n&&VW(t),t.flags|=1,fa(e,t,r,i),t.child)}function lse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!dG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,zwe(e,t,s,r,i)):(e=jk(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:L2,n(o,r)&&e.ref===t.ref)return Sp(e,t,i)}return t.flags|=1,e=yg(s,r),e.ref=t.ref,e.return=t,t.child=e}function zwe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(L2(s,r)&&e.ref===t.ref)if(su=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(su=!0);else return t.lanes=e.lanes,Sp(e,t,i)}return mz(e,t,n,r,i)}function Uwe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(J_,Fu),Fu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ur(J_,Fu),Fu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ur(J_,Fu),Fu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ur(J_,Fu),Fu|=r;return fa(e,t,i,n),t.child}function Vwe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mz(e,t,n,r,i){var s=cu(n)?C1:Jo.current;return s=nw(t,s),_b(t,i),n=tG(e,t,n,r,s,i),r=nG(),e!==null&&!su?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Sp(e,t,i)):(ci&&r&&VW(t),t.flags|=1,fa(e,t,n,i),t.child)}function cse(e,t,n,r,i){if(cu(n)){var s=!0;aR(t)}else s=!1;if(_b(t,i),t.stateNode===null)Mk(e,t),gwe(t,n,r),hz(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Xl(l):(l=cu(n)?C1:Jo.current,l=nw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&tse(t,o,r,l),Im=!1;var d=t.memoizedState;o.state=d,dR(t,r,o,i),u=t.memoizedState,a!==r||d!==u||lu.current||Im?(typeof c=="function"&&(dz(t,n,c,r),u=t.memoizedState),(a=Im||ese(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,pwe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Rc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xl(u):(u=cu(n)?C1:Jo.current,u=nw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&tse(t,o,r,u),Im=!1,d=t.memoizedState,o.state=d,dR(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||lu.current||Im?(typeof h=="function"&&(dz(t,n,h,r),p=t.memoizedState),(l=Im||ese(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return gz(e,t,n,r,s,i)}function gz(e,t,n,r,i,s){Vwe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Kie(t,n,!1),Sp(e,t,s);r=t.stateNode,NWe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=iw(t,e.child,null,s),t.child=iw(t,null,a,s)):fa(e,t,a,s),t.memoizedState=r.state,i&&Kie(t,n,!0),t.child}function Hwe(e){var t=e.stateNode;t.pendingContext?Yie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yie(e,t.context,!1),QW(e,t.containerInfo)}function fse(e,t,n,r,i){return rw(),qW(i),t.flags|=256,fa(e,t,n,r),t.child}var yz={dehydrated:null,treeContext:null,retryLane:0};function vz(e){return{baseLanes:e,cachePool:null,transitions:null}}function qwe(e,t,n){var r=t.pendingProps,i=vi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ur(vi,i&1),e===null)return cz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=DM(o,r,0,null),e=a1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=vz(n),t.memoizedState=yz,e):sG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return DWe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=yg(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yg(a,s):(s=a1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?vz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=yz,r}return s=e.child,e=s.sibling,r=yg(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sG(e,t){return t=DM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function FO(e,t,n,r){return r!==null&&qW(r),iw(t,e.child,null,n),e=sG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function DWe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=V8(Error(qe(422))),FO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=DM({mode:"visible",children:r.children},i,0,null),s=a1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&iw(t,e.child,null,o),t.child.memoizedState=vz(o),t.memoizedState=yz,s);if(!(t.mode&1))return FO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=V8(s,r,void 0),FO(e,t,o,r)}if(a=(o&e.childLanes)!==0,su||a){if(r=Vs,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xp(e,i),rf(r,e,i,-1))}return fG(),r=V8(Error(qe(421))),FO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=YWe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wu=hg(i.nextSibling),Ju=t,ci=!0,Bc=null,e!==null&&(Pl[kl++]=Gh,Pl[kl++]=Yh,Pl[kl++]=I1,Gh=e.id,Yh=e.overflow,I1=t),t=sG(t,r.children),t.flags|=4096,t)}function dse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fz(e.return,t,n)}function H8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wwe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(fa(e,t,r.children,n),r=vi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dse(e,n,t);else if(e.tag===19)dse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ur(vi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&hR(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),H8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&hR(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}H8(t,!0,n,null,s);break;case"together":H8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sp(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),P1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=yg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function LWe(e,t,n){switch(t.tag){case 3:Hwe(t),rw();break;case 5:_we(t);break;case 1:cu(t.type)&&aR(t);break;case 4:QW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ur(cR,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ur(vi,vi.current&1),t.flags|=128,null):n&t.child.childLanes?qwe(e,t,n):(Ur(vi,vi.current&1),e=Sp(e,t,n),e!==null?e.sibling:null);Ur(vi,vi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Wwe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ur(vi,vi.current),r)break;return null;case 22:case 23:return t.lanes=0,Uwe(e,t,n)}return Sp(e,t,n)}var Gwe,_z,Ywe,Kwe;Gwe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_z=function(){};Ywe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jy(Ed.current);var s=null;switch(n){case"input":i=z7(e,i),r=z7(e,r),s=[];break;case"select":i=bi({},i,{value:void 0}),r=bi({},r,{value:void 0}),s=[];break;case"textarea":i=H7(e,i),r=H7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=sR)}W7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(O2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(O2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Wr("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Kwe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Fx(e,t){if(!ci)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function To(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function MWe(e,t,n){var r=t.pendingProps;switch(HW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return To(t),null;case 1:return cu(t.type)&&oR(),To(t),null;case 3:return r=t.stateNode,sw(),Zr(lu),Zr(Jo),ZW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(LO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bc!==null&&(Cz(Bc),Bc=null))),_z(e,t),To(t),null;case 5:JW(t);var i=jy(z2.current);if(n=t.type,e!==null&&t.stateNode!=null)Ywe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qe(166));return To(t),null}if(e=jy(Ed.current),LO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[td]=t,r[B2]=s,e=(t.mode&1)!==0,n){case"dialog":Wr("cancel",r),Wr("close",r);break;case"iframe":case"object":case"embed":Wr("load",r);break;case"video":case"audio":for(i=0;i<BS.length;i++)Wr(BS[i],r);break;case"source":Wr("error",r);break;case"img":case"image":case"link":Wr("error",r),Wr("load",r);break;case"details":Wr("toggle",r);break;case"input":wie(r,s),Wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wr("invalid",r);break;case"textarea":xie(r,s),Wr("invalid",r)}W7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&DO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&DO(r.textContent,a,e),i=["children",""+a]):O2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wr("scroll",r)}switch(n){case"input":CO(r),Eie(r,s,!0);break;case"textarea":CO(r),Sie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sR)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ebe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[td]=t,e[B2]=r,Gwe(e,t,!1,!1),t.stateNode=e;e:{switch(o=G7(n,r),n){case"dialog":Wr("cancel",e),Wr("close",e),i=r;break;case"iframe":case"object":case"embed":Wr("load",e),i=r;break;case"video":case"audio":for(i=0;i<BS.length;i++)Wr(BS[i],e);i=r;break;case"source":Wr("error",e),i=r;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),i=r;break;case"details":Wr("toggle",e),i=r;break;case"input":wie(e,r),i=z7(e,r),Wr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=bi({},r,{value:void 0}),Wr("invalid",e);break;case"textarea":xie(e,r),i=H7(e,r),Wr("invalid",e);break;default:i=r}W7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Tbe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xbe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&P2(e,u):typeof u=="number"&&P2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(O2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Wr("scroll",e):u!=null&&OW(e,s,u,o))}switch(n){case"input":CO(e),Eie(e,r,!1);break;case"textarea":CO(e),Sie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mg(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?mb(e,!!r.multiple,s,!1):r.defaultValue!=null&&mb(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=sR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return To(t),null;case 6:if(e&&t.stateNode!=null)Kwe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qe(166));if(n=jy(z2.current),jy(Ed.current),LO(t)){if(r=t.stateNode,n=t.memoizedProps,r[td]=t,(s=r.nodeValue!==n)&&(e=Ju,e!==null))switch(e.tag){case 3:DO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&DO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[td]=t,t.stateNode=r}return To(t),null;case 13:if(Zr(vi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ci&&Wu!==null&&t.mode&1&&!(t.flags&128))dwe(),rw(),t.flags|=98560,s=!1;else if(s=LO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(qe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[td]=t}else rw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;To(t),s=!1}else Bc!==null&&(Cz(Bc),Bc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vi.current&1?gs===0&&(gs=3):fG())),t.updateQueue!==null&&(t.flags|=4),To(t),null);case 4:return sw(),_z(e,t),e===null&&M2(t.stateNode.containerInfo),To(t),null;case 10:return YW(t.type._context),To(t),null;case 17:return cu(t.type)&&oR(),To(t),null;case 19:if(Zr(vi),s=t.memoizedState,s===null)return To(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Fx(s,!1);else{if(gs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=hR(e),o!==null){for(t.flags|=128,Fx(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ur(vi,vi.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ui()>aw&&(t.flags|=128,r=!0,Fx(s,!1),t.lanes=4194304)}else{if(!r)if(e=hR(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ci)return To(t),null}else 2*Ui()-s.renderingStartTime>aw&&n!==1073741824&&(t.flags|=128,r=!0,Fx(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ui(),t.sibling=null,n=vi.current,Ur(vi,r?n&1|2:n&1),t):(To(t),null);case 22:case 23:return cG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fu&1073741824&&(To(t),t.subtreeFlags&6&&(t.flags|=8192)):To(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function FWe(e,t){switch(HW(t),t.tag){case 1:return cu(t.type)&&oR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sw(),Zr(lu),Zr(Jo),ZW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return JW(t),null;case 13:if(Zr(vi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));rw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zr(vi),null;case 4:return sw(),null;case 10:return YW(t.type._context),null;case 22:case 23:return cG(),null;case 24:return null;default:return null}}var BO=!1,Bo=!1,BWe=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Q_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ii(e,t,r)}else n.current=null}function bz(e,t,n){try{n()}catch(r){Ii(e,t,r)}}var hse=!1;function jWe(e,t){if(rz=nR,e=Zbe(),UW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(iz={focusedElem:e,selectionRange:n},nR=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){t=dt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Rc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(b){Ii(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}return p=hse,hse=!1,p}function RT(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&bz(t,n,s)}i=i.next}while(i!==r)}}function RM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function wz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xwe(e){var t=e.alternate;t!==null&&(e.alternate=null,Xwe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[td],delete t[B2],delete t[az],delete t[EWe],delete t[xWe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qwe(e){return e.tag===5||e.tag===3||e.tag===4}function pse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qwe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ez(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=sR));else if(r!==4&&(e=e.child,e!==null))for(Ez(e,t,n),e=e.sibling;e!==null;)Ez(e,t,n),e=e.sibling}function xz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xz(e,t,n),e=e.sibling;e!==null;)xz(e,t,n),e=e.sibling}var no=null,Dc=!1;function dm(e,t,n){for(n=n.child;n!==null;)Jwe(e,t,n),n=n.sibling}function Jwe(e,t,n){if(wd&&typeof wd.onCommitFiberUnmount=="function")try{wd.onCommitFiberUnmount(TM,n)}catch{}switch(n.tag){case 5:Bo||Q_(n,t);case 6:var r=no,i=Dc;no=null,dm(e,t,n),no=r,Dc=i,no!==null&&(Dc?(e=no,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):no.removeChild(n.stateNode));break;case 18:no!==null&&(Dc?(e=no,n=n.stateNode,e.nodeType===8?M8(e.parentNode,n):e.nodeType===1&&M8(e,n),N2(e)):M8(no,n.stateNode));break;case 4:r=no,i=Dc,no=n.stateNode.containerInfo,Dc=!0,dm(e,t,n),no=r,Dc=i;break;case 0:case 11:case 14:case 15:if(!Bo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bz(n,t,o),i=i.next}while(i!==r)}dm(e,t,n);break;case 1:if(!Bo&&(Q_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ii(n,t,a)}dm(e,t,n);break;case 21:dm(e,t,n);break;case 22:n.mode&1?(Bo=(r=Bo)||n.memoizedState!==null,dm(e,t,n),Bo=r):dm(e,t,n);break;default:dm(e,t,n)}}function mse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new BWe),t.forEach(function(r){var i=KWe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ec(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:no=a.stateNode,Dc=!1;break e;case 3:no=a.stateNode.containerInfo,Dc=!0;break e;case 4:no=a.stateNode.containerInfo,Dc=!0;break e}a=a.return}if(no===null)throw Error(qe(160));Jwe(s,o,i),no=null,Dc=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ii(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zwe(t,e),t=t.sibling}function Zwe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ec(t,e),Df(e),r&4){try{RT(3,e,e.return),RM(3,e)}catch(m){Ii(e,e.return,m)}try{RT(5,e,e.return)}catch(m){Ii(e,e.return,m)}}break;case 1:Ec(t,e),Df(e),r&512&&n!==null&&Q_(n,n.return);break;case 5:if(Ec(t,e),Df(e),r&512&&n!==null&&Q_(n,n.return),e.flags&32){var i=e.stateNode;try{P2(i,"")}catch(m){Ii(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bbe(i,s),G7(a,o);var l=G7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Tbe(i,f):c==="dangerouslySetInnerHTML"?xbe(i,f):c==="children"?P2(i,f):OW(i,c,f,l)}switch(a){case"input":U7(i,s);break;case"textarea":wbe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?mb(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?mb(i,!!s.multiple,s.defaultValue,!0):mb(i,!!s.multiple,s.multiple?[]:"",!1))}i[B2]=s}catch(m){Ii(e,e.return,m)}}break;case 6:if(Ec(t,e),Df(e),r&4){if(e.stateNode===null)throw Error(qe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ii(e,e.return,m)}}break;case 3:if(Ec(t,e),Df(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{N2(t.containerInfo)}catch(m){Ii(e,e.return,m)}break;case 4:Ec(t,e),Df(e);break;case 13:Ec(t,e),Df(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(uG=Ui())),r&4&&mse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Bo=(l=Bo)||c,Ec(t,e),Bo=l):Ec(t,e),Df(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(dt=e,c=e.child;c!==null;){for(f=dt=c;dt!==null;){switch(d=dt,h=d.child,d.tag){case 0:case 11:case 14:case 15:RT(4,d,d.return);break;case 1:Q_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ii(r,n,m)}}break;case 5:Q_(d,d.return);break;case 22:if(d.memoizedState!==null){yse(f);continue}}h!==null?(h.return=d,dt=h):yse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Sbe("display",o))}catch(m){Ii(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ii(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ec(t,e),Df(e),r&4&&mse(e);break;case 21:break;default:Ec(t,e),Df(e)}}function Df(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Qwe(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(P2(i,""),r.flags&=-33);var s=pse(e);xz(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pse(e);Ez(e,a,o);break;default:throw Error(qe(161))}}catch(u){Ii(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zWe(e,t,n){dt=e,eEe(e)}function eEe(e,t,n){for(var r=(e.mode&1)!==0;dt!==null;){var i=dt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||BO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Bo;a=BO;var l=Bo;if(BO=o,(Bo=u)&&!l)for(dt=i;dt!==null;)o=dt,u=o.child,o.tag===22&&o.memoizedState!==null?vse(i):u!==null?(u.return=o,dt=u):vse(i);for(;s!==null;)dt=s,eEe(s),s=s.sibling;dt=i,BO=a,Bo=l}gse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,dt=s):gse(e)}}function gse(e){for(;dt!==null;){var t=dt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bo||RM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bo)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Rc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Zie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&N2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Bo||t.flags&512&&wz(t)}catch(d){Ii(t,t.return,d)}}if(t===e){dt=null;break}if(n=t.sibling,n!==null){n.return=t.return,dt=n;break}dt=t.return}}function yse(e){for(;dt!==null;){var t=dt;if(t===e){dt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,dt=n;break}dt=t.return}}function vse(e){for(;dt!==null;){var t=dt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{RM(4,t)}catch(u){Ii(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ii(t,i,u)}}var s=t.return;try{wz(t)}catch(u){Ii(t,s,u)}break;case 5:var o=t.return;try{wz(t)}catch(u){Ii(t,o,u)}}}catch(u){Ii(t,t.return,u)}if(t===e){dt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,dt=a;break}dt=t.return}}var UWe=Math.ceil,gR=Gp.ReactCurrentDispatcher,oG=Gp.ReactCurrentOwner,Wl=Gp.ReactCurrentBatchConfig,Qn=0,Vs=null,ts=null,po=0,Fu=0,J_=S0(0),gs=0,q2=null,P1=0,NM=0,aG=0,NT=null,Qa=null,uG=0,aw=1/0,Ph=null,yR=!1,Sz=null,mg=null,jO=!1,Ym=null,vR=0,DT=0,Tz=null,Fk=-1,Bk=0;function ba(){return Qn&6?Ui():Fk!==-1?Fk:Fk=Ui()}function gg(e){return e.mode&1?Qn&2&&po!==0?po&-po:TWe.transition!==null?(Bk===0&&(Bk=Mbe()),Bk):(e=br,e!==0||(e=window.event,e=e===void 0?16:Hbe(e.type)),e):1}function rf(e,t,n,r){if(50<DT)throw DT=0,Tz=null,Error(qe(185));SC(e,n,r),(!(Qn&2)||e!==Vs)&&(e===Vs&&(!(Qn&2)&&(NM|=n),gs===4&&Fm(e,po)),fu(e,r),n===1&&Qn===0&&!(t.mode&1)&&(aw=Ui()+500,PM&&T0()))}function fu(e,t){var n=e.callbackNode;Tqe(e,t);var r=tR(e,e===Vs?po:0);if(r===0)n!==null&&Cie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Cie(n),t===1)e.tag===0?SWe(_se.bind(null,e)):lwe(_se.bind(null,e)),bWe(function(){!(Qn&6)&&T0()}),n=null;else{switch(Fbe(r)){case 1:n=NW;break;case 4:n=Dbe;break;case 16:n=eR;break;case 536870912:n=Lbe;break;default:n=eR}n=uEe(n,tEe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tEe(e,t){if(Fk=-1,Bk=0,Qn&6)throw Error(qe(327));var n=e.callbackNode;if(bb()&&e.callbackNode!==n)return null;var r=tR(e,e===Vs?po:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_R(e,r);else{t=r;var i=Qn;Qn|=2;var s=rEe();(Vs!==e||po!==t)&&(Ph=null,aw=Ui()+500,o1(e,t));do try{qWe();break}catch(a){nEe(e,a)}while(!0);GW(),gR.current=s,Qn=i,ts!==null?t=0:(Vs=null,po=0,t=gs)}if(t!==0){if(t===2&&(i=J7(e),i!==0&&(r=i,t=Az(e,i))),t===1)throw n=q2,o1(e,0),Fm(e,r),fu(e,Ui()),n;if(t===6)Fm(e,r);else{if(i=e.current.alternate,!(r&30)&&!VWe(i)&&(t=_R(e,r),t===2&&(s=J7(e),s!==0&&(r=s,t=Az(e,s))),t===1))throw n=q2,o1(e,0),Fm(e,r),fu(e,Ui()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(qe(345));case 2:hy(e,Qa,Ph);break;case 3:if(Fm(e,r),(r&130023424)===r&&(t=uG+500-Ui(),10<t)){if(tR(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ba(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=oz(hy.bind(null,e,Qa,Ph),t);break}hy(e,Qa,Ph);break;case 4:if(Fm(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-nf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ui()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UWe(r/1960))-r,10<r){e.timeoutHandle=oz(hy.bind(null,e,Qa,Ph),r);break}hy(e,Qa,Ph);break;case 5:hy(e,Qa,Ph);break;default:throw Error(qe(329))}}}return fu(e,Ui()),e.callbackNode===n?tEe.bind(null,e):null}function Az(e,t){var n=NT;return e.current.memoizedState.isDehydrated&&(o1(e,t).flags|=256),e=_R(e,t),e!==2&&(t=Qa,Qa=n,t!==null&&Cz(t)),e}function Cz(e){Qa===null?Qa=e:Qa.push.apply(Qa,e)}function VWe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ff(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fm(e,t){for(t&=~aG,t&=~NM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nf(t),r=1<<n;e[n]=-1,t&=~r}}function _se(e){if(Qn&6)throw Error(qe(327));bb();var t=tR(e,0);if(!(t&1))return fu(e,Ui()),null;var n=_R(e,t);if(e.tag!==0&&n===2){var r=J7(e);r!==0&&(t=r,n=Az(e,r))}if(n===1)throw n=q2,o1(e,0),Fm(e,t),fu(e,Ui()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hy(e,Qa,Ph),fu(e,Ui()),null}function lG(e,t){var n=Qn;Qn|=1;try{return e(t)}finally{Qn=n,Qn===0&&(aw=Ui()+500,PM&&T0())}}function k1(e){Ym!==null&&Ym.tag===0&&!(Qn&6)&&bb();var t=Qn;Qn|=1;var n=Wl.transition,r=br;try{if(Wl.transition=null,br=1,e)return e()}finally{br=r,Wl.transition=n,Qn=t,!(Qn&6)&&T0()}}function cG(){Fu=J_.current,Zr(J_)}function o1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_We(n)),ts!==null)for(n=ts.return;n!==null;){var r=n;switch(HW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oR();break;case 3:sw(),Zr(lu),Zr(Jo),ZW();break;case 5:JW(r);break;case 4:sw();break;case 13:Zr(vi);break;case 19:Zr(vi);break;case 10:YW(r.type._context);break;case 22:case 23:cG()}n=n.return}if(Vs=e,ts=e=yg(e.current,null),po=Fu=t,gs=0,q2=null,aG=NM=P1=0,Qa=NT=null,By!==null){for(t=0;t<By.length;t++)if(n=By[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}By=null}return e}function nEe(e,t){do{var n=ts;try{if(GW(),Dk.current=mR,pR){for(var r=_i.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pR=!1}if(O1=0,Rs=fs=_i=null,$T=!1,U2=0,oG.current=null,n===null||n.return===null){gs=1,q2=t,ts=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=po,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=ose(o);if(h!==null){h.flags&=-257,ase(h,o,a,s,t),h.mode&1&&sse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){sse(s,l,t),fG();break e}u=Error(qe(426))}}else if(ci&&a.mode&1){var g=ose(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ase(g,o,a,s,t),qW(ow(u,a));break e}}s=u=ow(u,a),gs!==4&&(gs=2),NT===null?NT=[s]:NT.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Bwe(s,u,t);Jie(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(mg===null||!mg.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=jwe(s,a,t);Jie(s,b);break e}}s=s.return}while(s!==null)}sEe(n)}catch(E){t=E,ts===n&&n!==null&&(ts=n=n.return);continue}break}while(!0)}function rEe(){var e=gR.current;return gR.current=mR,e===null?mR:e}function fG(){(gs===0||gs===3||gs===2)&&(gs=4),Vs===null||!(P1&268435455)&&!(NM&268435455)||Fm(Vs,po)}function _R(e,t){var n=Qn;Qn|=2;var r=rEe();(Vs!==e||po!==t)&&(Ph=null,o1(e,t));do try{HWe();break}catch(i){nEe(e,i)}while(!0);if(GW(),Qn=n,gR.current=r,ts!==null)throw Error(qe(261));return Vs=null,po=0,gs}function HWe(){for(;ts!==null;)iEe(ts)}function qWe(){for(;ts!==null&&!gqe();)iEe(ts)}function iEe(e){var t=aEe(e.alternate,e,Fu);e.memoizedProps=e.pendingProps,t===null?sEe(e):ts=t,oG.current=null}function sEe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FWe(n,t),n!==null){n.flags&=32767,ts=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gs=6,ts=null;return}}else if(n=MWe(n,t,Fu),n!==null){ts=n;return}if(t=t.sibling,t!==null){ts=t;return}ts=t=e}while(t!==null);gs===0&&(gs=5)}function hy(e,t,n){var r=br,i=Wl.transition;try{Wl.transition=null,br=1,WWe(e,t,n,r)}finally{Wl.transition=i,br=r}return null}function WWe(e,t,n,r){do bb();while(Ym!==null);if(Qn&6)throw Error(qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Aqe(e,s),e===Vs&&(ts=Vs=null,po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jO||(jO=!0,uEe(eR,function(){return bb(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wl.transition,Wl.transition=null;var o=br;br=1;var a=Qn;Qn|=4,oG.current=null,jWe(e,n),Zwe(n,e),dWe(iz),nR=!!rz,iz=rz=null,e.current=n,zWe(n),yqe(),Qn=a,br=o,Wl.transition=s}else e.current=n;if(jO&&(jO=!1,Ym=e,vR=i),s=e.pendingLanes,s===0&&(mg=null),bqe(n.stateNode),fu(e,Ui()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yR)throw yR=!1,e=Sz,Sz=null,e;return vR&1&&e.tag!==0&&bb(),s=e.pendingLanes,s&1?e===Tz?DT++:(DT=0,Tz=e):DT=0,T0(),null}function bb(){if(Ym!==null){var e=Fbe(vR),t=Wl.transition,n=br;try{if(Wl.transition=null,br=16>e?16:e,Ym===null)var r=!1;else{if(e=Ym,Ym=null,vR=0,Qn&6)throw Error(qe(331));var i=Qn;for(Qn|=4,dt=e.current;dt!==null;){var s=dt,o=s.child;if(dt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(dt=l;dt!==null;){var c=dt;switch(c.tag){case 0:case 11:case 15:RT(8,c,s)}var f=c.child;if(f!==null)f.return=c,dt=f;else for(;dt!==null;){c=dt;var d=c.sibling,h=c.return;if(Xwe(c),c===l){dt=null;break}if(d!==null){d.return=h,dt=d;break}dt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}dt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,dt=o;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:RT(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,dt=y;break e}dt=s.return}}var v=e.current;for(dt=v;dt!==null;){o=dt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,dt=_;else e:for(o=v;dt!==null;){if(a=dt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:RM(9,a)}}catch(E){Ii(a,a.return,E)}if(a===o){dt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,dt=b;break e}dt=a.return}}if(Qn=i,T0(),wd&&typeof wd.onPostCommitFiberRoot=="function")try{wd.onPostCommitFiberRoot(TM,e)}catch{}r=!0}return r}finally{br=n,Wl.transition=t}}return!1}function bse(e,t,n){t=ow(n,t),t=Bwe(e,t,1),e=pg(e,t,1),t=ba(),e!==null&&(SC(e,1,t),fu(e,t))}function Ii(e,t,n){if(e.tag===3)bse(e,e,n);else for(;t!==null;){if(t.tag===3){bse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mg===null||!mg.has(r))){e=ow(n,e),e=jwe(t,e,1),t=pg(t,e,1),e=ba(),t!==null&&(SC(t,1,e),fu(t,e));break}}t=t.return}}function GWe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ba(),e.pingedLanes|=e.suspendedLanes&n,Vs===e&&(po&n)===n&&(gs===4||gs===3&&(po&130023424)===po&&500>Ui()-uG?o1(e,0):aG|=n),fu(e,t)}function oEe(e,t){t===0&&(e.mode&1?(t=PO,PO<<=1,!(PO&130023424)&&(PO=4194304)):t=1);var n=ba();e=xp(e,t),e!==null&&(SC(e,t,n),fu(e,n))}function YWe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oEe(e,n)}function KWe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(t),oEe(e,n)}var aEe;aEe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||lu.current)su=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return su=!1,LWe(e,t,n);su=!!(e.flags&131072)}else su=!1,ci&&t.flags&1048576&&cwe(t,lR,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mk(e,t),e=t.pendingProps;var i=nw(t,Jo.current);_b(t,n),i=tG(null,t,r,e,i,n);var s=nG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cu(r)?(s=!0,aR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,XW(t),i.updater=kM,t.stateNode=i,i._reactInternals=t,hz(t,r,e,n),t=gz(null,t,r,!0,s,n)):(t.tag=0,ci&&s&&VW(t),fa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=QWe(r),e=Rc(r,e),i){case 0:t=mz(null,t,r,e,n);break e;case 1:t=cse(null,t,r,e,n);break e;case 11:t=use(null,t,r,e,n);break e;case 14:t=lse(null,t,r,Rc(r.type,e),n);break e}throw Error(qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rc(r,i),mz(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rc(r,i),cse(e,t,r,i,n);case 3:e:{if(Hwe(t),e===null)throw Error(qe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,pwe(e,t),dR(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ow(Error(qe(423)),t),t=fse(e,t,r,n,i);break e}else if(r!==i){i=ow(Error(qe(424)),t),t=fse(e,t,r,n,i);break e}else for(Wu=hg(t.stateNode.containerInfo.firstChild),Ju=t,ci=!0,Bc=null,n=vwe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rw(),r===i){t=Sp(e,t,n);break e}fa(e,t,r,n)}t=t.child}return t;case 5:return _we(t),e===null&&cz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,sz(r,i)?o=null:s!==null&&sz(r,s)&&(t.flags|=32),Vwe(e,t),fa(e,t,o,n),t.child;case 6:return e===null&&cz(t),null;case 13:return qwe(e,t,n);case 4:return QW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=iw(t,null,r,n):fa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rc(r,i),use(e,t,r,i,n);case 7:return fa(e,t,t.pendingProps,n),t.child;case 8:return fa(e,t,t.pendingProps.children,n),t.child;case 12:return fa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ur(cR,r._currentValue),r._currentValue=o,s!==null)if(ff(s.value,o)){if(s.children===i.children&&!lu.current){t=Sp(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=op(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),fz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_b(t,n),i=Xl(i),r=r(i),t.flags|=1,fa(e,t,r,n),t.child;case 14:return r=t.type,i=Rc(r,t.pendingProps),i=Rc(r.type,i),lse(e,t,r,i,n);case 15:return zwe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rc(r,i),Mk(e,t),t.tag=1,cu(r)?(e=!0,aR(t)):e=!1,_b(t,n),gwe(t,r,i),hz(t,r,i,n),gz(null,t,r,!0,e,n);case 19:return Wwe(e,t,n);case 22:return Uwe(e,t,n)}throw Error(qe(156,t.tag))};function uEe(e,t){return Nbe(e,t)}function XWe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(e,t,n,r){return new XWe(e,t,n,r)}function dG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function QWe(e){if(typeof e=="function")return dG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kW)return 11;if(e===$W)return 14}return 2}function yg(e,t){var n=e.alternate;return n===null?(n=zl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jk(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")dG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case U_:return a1(n.children,i,s,t);case PW:o=8,i|=8;break;case M7:return e=zl(12,n,t,i|2),e.elementType=M7,e.lanes=s,e;case F7:return e=zl(13,n,t,i),e.elementType=F7,e.lanes=s,e;case B7:return e=zl(19,n,t,i),e.elementType=B7,e.lanes=s,e;case ybe:return DM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mbe:o=10;break e;case gbe:o=9;break e;case kW:o=11;break e;case $W:o=14;break e;case Cm:o=16,r=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=zl(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function a1(e,t,n,r){return e=zl(7,e,r,t),e.lanes=n,e}function DM(e,t,n,r){return e=zl(22,e,r,t),e.elementType=ybe,e.lanes=n,e.stateNode={isHidden:!1},e}function q8(e,t,n){return e=zl(6,e,null,t),e.lanes=n,e}function W8(e,t,n){return t=zl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JWe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A8(0),this.expirationTimes=A8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hG(e,t,n,r,i,s,o,a,u){return e=new JWe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=zl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},XW(s),e}function ZWe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lEe(e){if(!e)return Fg;e=e._reactInternals;e:{if(vv(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(cu(n))return uwe(e,n,t)}return t}function cEe(e,t,n,r,i,s,o,a,u){return e=hG(n,r,!0,e,i,s,o,a,u),e.context=lEe(null),n=e.current,r=ba(),i=gg(n),s=op(r,i),s.callback=t??null,pg(n,s,i),e.current.lanes=i,SC(e,i,r),fu(e,r),e}function LM(e,t,n,r){var i=t.current,s=ba(),o=gg(i);return n=lEe(n),t.context===null?t.context=n:t.pendingContext=n,t=op(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pg(i,t,o),e!==null&&(rf(e,i,o,s),Nk(e,i,o)),o}function bR(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pG(e,t){wse(e,t),(e=e.alternate)&&wse(e,t)}function eGe(){return null}var fEe=typeof reportError=="function"?reportError:function(e){console.error(e)};function mG(e){this._internalRoot=e}MM.prototype.render=mG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));LM(e,t,null,null)};MM.prototype.unmount=mG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;k1(function(){LM(null,e,null,null)}),t[Ep]=null}};function MM(e){this._internalRoot=e}MM.prototype.unstable_scheduleHydration=function(e){if(e){var t=zbe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mm.length&&t!==0&&t<Mm[n].priority;n++);Mm.splice(n,0,e),n===0&&Vbe(e)}};function gG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function FM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ese(){}function tGe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=bR(o);s.call(l)}}var o=cEe(t,r,e,0,null,!1,!1,"",Ese);return e._reactRootContainer=o,e[Ep]=o.current,M2(e.nodeType===8?e.parentNode:e),k1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=bR(u);a.call(l)}}var u=hG(e,0,!1,null,null,!1,!1,"",Ese);return e._reactRootContainer=u,e[Ep]=u.current,M2(e.nodeType===8?e.parentNode:e),k1(function(){LM(t,u,n,r)}),u}function BM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=bR(o);a.call(u)}}LM(t,o,e,i)}else o=tGe(n,t,e,i,r);return bR(o)}Bbe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=FS(t.pendingLanes);n!==0&&(DW(t,n|1),fu(t,Ui()),!(Qn&6)&&(aw=Ui()+500,T0()))}break;case 13:k1(function(){var r=xp(e,1);if(r!==null){var i=ba();rf(r,e,1,i)}}),pG(e,1)}};LW=function(e){if(e.tag===13){var t=xp(e,134217728);if(t!==null){var n=ba();rf(t,e,134217728,n)}pG(e,134217728)}};jbe=function(e){if(e.tag===13){var t=gg(e),n=xp(e,t);if(n!==null){var r=ba();rf(n,e,t,r)}pG(e,t)}};zbe=function(){return br};Ube=function(e,t){var n=br;try{return br=e,t()}finally{br=n}};K7=function(e,t,n){switch(t){case"input":if(U7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=OM(r);if(!i)throw Error(qe(90));_be(r),U7(r,i)}}}break;case"textarea":wbe(e,n);break;case"select":t=n.value,t!=null&&mb(e,!!n.multiple,t,!1)}};Ibe=lG;Obe=k1;var nGe={usingClientEntryPoint:!1,Events:[AC,W_,OM,Abe,Cbe,lG]},Bx={findFiberByHostInstance:Fy,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rGe={bundleType:Bx.bundleType,version:Bx.version,rendererPackageName:Bx.rendererPackageName,rendererConfig:Bx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gp.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$be(e),e===null?null:e.stateNode},findFiberByHostInstance:Bx.findFiberByHostInstance||eGe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zO.isDisabled&&zO.supportsFiber)try{TM=zO.inject(rGe),wd=zO}catch{}}ml.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nGe;ml.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gG(t))throw Error(qe(200));return ZWe(e,t,null,n)};ml.createRoot=function(e,t){if(!gG(e))throw Error(qe(299));var n=!1,r="",i=fEe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=hG(e,1,!1,null,null,n,!1,r,i),e[Ep]=t.current,M2(e.nodeType===8?e.parentNode:e),new mG(t)};ml.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=$be(t),e=e===null?null:e.stateNode,e};ml.flushSync=function(e){return k1(e)};ml.hydrate=function(e,t,n){if(!FM(t))throw Error(qe(200));return BM(null,e,t,!0,n)};ml.hydrateRoot=function(e,t,n){if(!gG(e))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fEe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=cEe(t,null,e,1,n??null,i,!1,s,o),e[Ep]=t.current,M2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new MM(t)};ml.render=function(e,t,n){if(!FM(t))throw Error(qe(200));return BM(null,e,t,!1,n)};ml.unmountComponentAtNode=function(e){if(!FM(e))throw Error(qe(40));return e._reactRootContainer?(k1(function(){BM(null,null,e,!1,function(){e._reactRootContainer=null,e[Ep]=null})}),!0):!1};ml.unstable_batchedUpdates=lG;ml.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!FM(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return BM(e,t,n,!1,r)};ml.version="18.2.0-next-9e3b772b8-20220608";function dEe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dEe)}catch(e){console.error(e)}}dEe(),cbe.exports=ml;var _v=cbe.exports,xse=_v;D7.createRoot=xse.createRoot,D7.hydrateRoot=xse.hydrateRoot;const hEe=A.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),uc=()=>A.useContext(hEe);function iGe({children:e}){const[t,n]=L.useState(void 0),r=L.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return R.jsx(hEe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W2.apply(this,arguments)}var Km;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Km||(Km={}));const Sse="popstate";function sGe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Iz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:pEe(i)}return aGe(t,n,null,e)}function rs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yG(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oGe(){return Math.random().toString(36).substr(2,8)}function Tse(e,t){return{usr:e.state,key:e.key,idx:t}}function Iz(e,t,n,r){return n===void 0&&(n=null),W2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wE(t):t,{state:n,key:t&&t.key||r||oGe()})}function pEe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function wE(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function aGe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Km.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(W2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Km.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Km.Push;let v=Iz(m.location,g,y);n&&n(v,g),l=c()+1;let _=Tse(v,l),b=m.createHref(v);try{o.pushState(_,"",b)}catch{i.location.assign(b)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Km.Replace;let v=Iz(m.location,g,y);n&&n(v,g),l=c();let _=Tse(v,l),b=m.createHref(v);o.replaceState(_,"",b),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:pEe(g);return rs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Sse,f),u=g,()=>{i.removeEventListener(Sse,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Ase;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ase||(Ase={}));function uGe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?wE(t):t,i=yEe(r.pathname||"/",n);if(i==null)return null;let s=mEe(e);lGe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=vGe(s[a],wGe(i));return o}function mEe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(rs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=vg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(rs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),mEe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:gGe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of gEe(s.path))i(s,o,u)}),t}function gEe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=gEe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function lGe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yGe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cGe=/^:\w+$/,fGe=3,dGe=2,hGe=1,pGe=10,mGe=-2,Cse=e=>e==="*";function gGe(e,t){let n=e.split("/"),r=n.length;return n.some(Cse)&&(r+=mGe),t&&(r+=dGe),n.filter(i=>!Cse(i)).reduce((i,s)=>i+(cGe.test(s)?fGe:s===""?hGe:pGe),r)}function yGe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function vGe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=_Ge({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:vg([i,c.pathname]),pathnameBase:TGe(vg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=vg([i,c.pathnameBase]))}return s}function _Ge(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=bGe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=EGe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function bGe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),yG(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wGe(e){try{return decodeURI(e)}catch(t){return yG(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function EGe(e,t){try{return decodeURIComponent(e)}catch(n){return yG(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function yEe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function xGe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?wE(e):e;return{pathname:n?n.startsWith("/")?n:SGe(n,t):t,search:AGe(r),hash:CGe(i)}}function SGe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function G8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vEe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _Ee(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=wE(e):(i=W2({},e),rs(!i.pathname||!i.pathname.includes("?"),G8("?","pathname","search",i)),rs(!i.pathname||!i.pathname.includes("#"),G8("#","pathname","hash",i)),rs(!i.search||!i.search.includes("#"),G8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=xGe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const vg=e=>e.join("/").replace(/\/\/+/g,"/"),TGe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AGe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,CGe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function IGe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bEe=["post","put","patch","delete"];new Set(bEe);const OGe=["get",...bEe];new Set(OGe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function PGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const kGe=typeof Object.is=="function"?Object.is:PGe,{useState:$Ge,useEffect:RGe,useLayoutEffect:NGe,useDebugValue:DGe}=A1;function LGe(e,t,n){const r=t(),[{inst:i},s]=$Ge({inst:{value:r,getSnapshot:t}});return NGe(()=>{i.value=r,i.getSnapshot=t,Y8(i)&&s({inst:i})},[e,r,t]),RGe(()=>(Y8(i)&&s({inst:i}),e(()=>{Y8(i)&&s({inst:i})})),[e]),DGe(r),r}function Y8(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!kGe(n,r)}catch{return!0}}function MGe(e,t,n){return t()}const FGe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BGe=!FGe,jGe=BGe?MGe:LGe;"useSyncExternalStore"in A1&&(e=>e.useSyncExternalStore)(A1);const wEe=A.createContext(null),vG=A.createContext(null),jM=A.createContext(null),zM=A.createContext(null),A0=A.createContext({outlet:null,matches:[]}),EEe=A.createContext(null);function Oz(){return Oz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oz.apply(this,arguments)}function zGe(e,t){let{relative:n}=t===void 0?{}:t;EE()||rs(!1);let{basename:r,navigator:i}=A.useContext(jM),{hash:s,pathname:o,search:a}=HGe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:vg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function EE(){return A.useContext(zM)!=null}function UM(){return EE()||rs(!1),A.useContext(zM).location}function bv(){EE()||rs(!1);let{basename:e,navigator:t}=A.useContext(jM),{matches:n}=A.useContext(A0),{pathname:r}=UM(),i=JSON.stringify(vEe(n).map(a=>a.pathnameBase)),s=A.useRef(!1);return A.useEffect(()=>{s.current=!0}),A.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=_Ee(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:vg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const UGe=A.createContext(null);function VGe(e){let t=A.useContext(A0).outlet;return t&&A.createElement(UGe.Provider,{value:e},t)}function VM(){let{matches:e}=A.useContext(A0),t=e[e.length-1];return t?t.params:{}}function HGe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=A.useContext(A0),{pathname:i}=UM(),s=JSON.stringify(vEe(r).map(o=>o.pathnameBase));return A.useMemo(()=>_Ee(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function xEe(e,t){EE()||rs(!1);let{navigator:n}=A.useContext(jM),r=A.useContext(vG),{matches:i}=A.useContext(A0),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=UM(),l;if(t){var c;let m=typeof t=="string"?wE(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||rs(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=uGe(e,{pathname:d}),p=YGe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:vg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:vg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?A.createElement(zM.Provider,{value:{location:Oz({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Km.Pop}},p):p}function qGe(){let e=JGe(),t=IGe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,s)}class WGe extends A.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?A.createElement(A0.Provider,{value:this.props.routeContext},A.createElement(EEe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GGe(e){let{routeContext:t,match:n,children:r}=e,i=A.useContext(wEe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(A0.Provider,{value:t},r)}function YGe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||rs(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=A.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=A.createElement(qGe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=A.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),A.createElement(GGe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?A.createElement(WGe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var Ise;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(Ise||(Ise={}));var wR;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(wR||(wR={}));function KGe(e){let t=A.useContext(vG);return t||rs(!1),t}function XGe(e){let t=A.useContext(A0);return t||rs(!1),t}function QGe(e){let t=XGe(),n=t.matches[t.matches.length-1];return n.route.id||rs(!1),n.route.id}function JGe(){var e;let t=A.useContext(EEe),n=KGe(wR.UseRouteError),r=QGe(wR.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function _G(e){let{to:t,replace:n,state:r,relative:i}=e;EE()||rs(!1);let s=A.useContext(vG),o=bv();return A.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function ZGe(e){return VGe(e.context)}function jS(e){rs(!1)}function eYe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Km.Pop,navigator:s,static:o=!1}=e;EE()&&rs(!1);let a=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=wE(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=A.useMemo(()=>{let m=yEe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:A.createElement(jM.Provider,{value:u},A.createElement(zM.Provider,{children:n,value:p}))}function tYe(e){let{children:t,location:n}=e,r=A.useContext(wEe),i=r&&!t?r.router.routes:Pz(t);return xEe(i,n)}var Ose;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Ose||(Ose={}));new Promise(()=>{});function Pz(e,t){t===void 0&&(t=[]);let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let s=[...t,i];if(r.type===A.Fragment){n.push.apply(n,Pz(r.props.children,s));return}r.type!==jS&&rs(!1),!r.props.index||!r.props.children||rs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Pz(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function nYe(e,t){let n=kz(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function rYe(e){let{basename:t,children:n,window:r}=e,i=A.useRef();i.current==null&&(i.current=sGe({window:r,v5Compat:!0}));let s=i.current,[o,a]=A.useState({action:s.action,location:s.location});return A.useLayoutEffect(()=>s.listen(a),[s]),A.createElement(eYe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var Pse;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Pse||(Pse={}));var kse;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kse||(kse={}));function bG(e){let t=A.useRef(kz(e)),n=A.useRef(!1),r=UM(),i=A.useMemo(()=>nYe(r.search,n.current?null:t.current),[r.search]),s=bv(),o=A.useCallback((a,u)=>{const l=kz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function ER(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function iYe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function sYe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function oYe(e,t,n){return ER(e,n)===ER(t,n)}function aYe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=ER(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>oYe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=sYe(c,l,r),d=iYe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function uYe(e,t,n){var r;return n?Array.from(((r=ER(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function SEe(e){const t=A.createContext(null);return[({children:i,value:s})=>L.createElement(t.Provider,{value:s},i),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function $1(e){return Array.isArray(e)?e:[e]}const lYe=()=>{};function cYe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||lYe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Kh(e,t){return n=>{e==null||e(n),t==null||t(n)}}function fYe(){const[e,t]=A.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function TEe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function IC(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==L.Fragment:!1}function AEe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=AEe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function CEe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=AEe(t))&&(r&&(r+=" "),r+=n);return r}const dYe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function hYe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var pYe=Object.defineProperty,$se=Object.getOwnPropertySymbols,mYe=Object.prototype.hasOwnProperty,gYe=Object.prototype.propertyIsEnumerable,Rse=(e,t,n)=>t in e?pYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nse=(e,t)=>{for(var n in t||(t={}))mYe.call(t,n)&&Rse(e,n,t[n]);if($se)for(var n of $se(t))gYe.call(t,n)&&Rse(e,n,t[n]);return e};function yYe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:Nse({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Nse({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function OC(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function wG(e){const t=OC(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function IEe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function vYe(e,...t){return`linear-gradient(${e}deg, ${IEe(t)})`}function _Ye(...e){return`radial-gradient(circle, ${IEe(e)})`}function OEe(e){const t=wG(e),n=OC(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function EG(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function bYe(e){return t=>`@media (min-width: ${EG({size:t,sizes:e.breakpoints})}px)`}function wYe(e){return t=>`@media (max-width: ${EG({size:t,sizes:e.breakpoints})-1}px)`}function EYe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function xYe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function SYe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function xG(e){return EYe(e)?xYe(e):e.startsWith("rgb")?SYe(e):{r:0,g:0,b:0,a:1}}function O_(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=xG(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function TYe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function AYe(e,t){const{r:n,g:r,b:i,a:s}=xG(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function CYe(e,t){const{r:n,g:r,b:i,a:s}=xG(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function IYe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function OYe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function PYe(e){const t=wG(e),n=OC(e),r=OEe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=OYe(s,e);switch(i){case"light":return{border:"transparent",background:O_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:O_(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:O_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?O_(t(s,5,a,!1),.05):O_(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function kYe(e){return t=>{const n=OC(e)(t);return e.colors[e.primaryColor][n]}}function $Ye(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Os={fontStyles:hYe,themeColor:wG,focusStyles:yYe,linearGradient:vYe,radialGradient:_Ye,smallerThan:wYe,largerThan:bYe,rgba:O_,size:EG,cover:TYe,darken:AYe,lighten:CYe,radius:IYe,variant:PYe,primaryShade:OC,hover:$Ye,gradient:OEe,primaryColor:kYe};var RYe=Object.defineProperty,NYe=Object.defineProperties,DYe=Object.getOwnPropertyDescriptors,Dse=Object.getOwnPropertySymbols,LYe=Object.prototype.hasOwnProperty,MYe=Object.prototype.propertyIsEnumerable,Lse=(e,t,n)=>t in e?RYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FYe=(e,t)=>{for(var n in t||(t={}))LYe.call(t,n)&&Lse(e,n,t[n]);if(Dse)for(var n of Dse(t))MYe.call(t,n)&&Lse(e,n,t[n]);return e},BYe=(e,t)=>NYe(e,DYe(t));function jYe(e){return BYe(FYe({},e),{fn:{fontStyles:Os.fontStyles(e),themeColor:Os.themeColor(e),focusStyles:Os.focusStyles(e),largerThan:Os.largerThan(e),smallerThan:Os.smallerThan(e),radialGradient:Os.radialGradient,linearGradient:Os.linearGradient,gradient:Os.gradient(e),rgba:Os.rgba,size:Os.size,cover:Os.cover,lighten:Os.lighten,darken:Os.darken,primaryShade:Os.primaryShade(e),radius:Os.radius(e),variant:Os.variant(e),hover:Os.hover,primaryColor:Os.primaryColor(e)}})}const zYe=["xs","sm","md","lg","xl"],UYe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:dYe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},PEe=jYe(UYe);function VYe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function HYe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var qYe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(HYe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=VYe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),$o="-ms-",xR="-moz-",lr="-webkit-",kEe="comm",SG="rule",TG="decl",WYe="@import",$Ee="@keyframes",GYe=Math.abs,HM=String.fromCharCode,YYe=Object.assign;function KYe(e,t){return ao(e,0)^45?(((t<<2^ao(e,0))<<2^ao(e,1))<<2^ao(e,2))<<2^ao(e,3):0}function REe(e){return e.trim()}function XYe(e,t){return(e=t.exec(e))?e[0]:e}function mr(e,t,n){return e.replace(t,n)}function $z(e,t){return e.indexOf(t)}function ao(e,t){return e.charCodeAt(t)|0}function G2(e,t,n){return e.slice(t,n)}function Jf(e){return e.length}function AG(e){return e.length}function UO(e,t){return t.push(e),e}function QYe(e,t){return e.map(t).join("")}var qM=1,uw=1,NEe=0,mu=0,Zi=0,xE="";function WM(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:qM,column:uw,length:o,return:""}}function jx(e,t){return YYe(WM("",null,null,"",null,null,0),e,{length:-e.length},t)}function JYe(){return Zi}function ZYe(){return Zi=mu>0?ao(xE,--mu):0,uw--,Zi===10&&(uw=1,qM--),Zi}function Zu(){return Zi=mu<NEe?ao(xE,mu++):0,uw++,Zi===10&&(uw=1,qM++),Zi}function xd(){return ao(xE,mu)}function zk(){return mu}function PC(e,t){return G2(xE,e,t)}function Y2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DEe(e){return qM=uw=1,NEe=Jf(xE=e),mu=0,[]}function LEe(e){return xE="",e}function Uk(e){return REe(PC(mu-1,Rz(e===91?e+2:e===40?e+1:e)))}function eKe(e){for(;(Zi=xd())&&Zi<33;)Zu();return Y2(e)>2||Y2(Zi)>3?"":" "}function tKe(e,t){for(;--t&&Zu()&&!(Zi<48||Zi>102||Zi>57&&Zi<65||Zi>70&&Zi<97););return PC(e,zk()+(t<6&&xd()==32&&Zu()==32))}function Rz(e){for(;Zu();)switch(Zi){case e:return mu;case 34:case 39:e!==34&&e!==39&&Rz(Zi);break;case 40:e===41&&Rz(e);break;case 92:Zu();break}return mu}function nKe(e,t){for(;Zu()&&e+Zi!==57;)if(e+Zi===84&&xd()===47)break;return"/*"+PC(t,mu-1)+"*"+HM(e===47?e:Zu())}function rKe(e){for(;!Y2(xd());)Zu();return PC(e,mu)}function iKe(e){return LEe(Vk("",null,null,null,[""],e=DEe(e),0,[0],e))}function Vk(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,E=s,w=r,x=_;g;)switch(p=v,v=Zu()){case 40:if(p!=108&&ao(x,f-1)==58){$z(x+=mr(Uk(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:x+=Uk(v);break;case 9:case 10:case 13:case 32:x+=eKe(p);break;case 92:x+=tKe(zk()-1,7);continue;case 47:switch(xd()){case 42:case 47:UO(sKe(nKe(Zu(),zk()),t,n),u);break;default:x+="/"}break;case 123*m:a[l++]=Jf(x)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&Jf(x)-f&&UO(h>32?Fse(x+";",r,n,f-1):Fse(mr(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(UO(w=Mse(x,t,n,l,c,i,a,_,b=[],E=[],f),s),v===123)if(c===0)Vk(x,t,w,w,b,s,f,a,E);else switch(d===99&&ao(x,3)===110?100:d){case 100:case 109:case 115:Vk(e,w,w,r&&UO(Mse(e,w,w,0,0,i,a,_,i,b=[],f),E),i,E,f,a,r?b:E);break;default:Vk(x,w,w,w,[""],E,0,a,E)}}l=c=h=0,m=y=1,_=x="",f=o;break;case 58:f=1+Jf(x),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&ZYe()==125)continue}switch(x+=HM(v),v*m){case 38:y=c>0?1:(x+="\f",-1);break;case 44:a[l++]=(Jf(x)-1)*y,y=1;break;case 64:xd()===45&&(x+=Uk(Zu())),d=xd(),c=f=Jf(_=x+=rKe(zk())),v++;break;case 45:p===45&&Jf(x)==2&&(m=0)}}return s}function Mse(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=AG(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=G2(e,f+1,f=GYe(m=o[p])),_=e;y<h;++y)(_=REe(m>0?d[y]+" "+v:mr(v,/&\f/g,d[y])))&&(u[g++]=_);return WM(e,t,n,i===0?SG:a,u,l,c)}function sKe(e,t,n){return WM(e,t,n,kEe,HM(JYe()),G2(e,2,-2),0)}function Fse(e,t,n,r){return WM(e,t,n,TG,G2(e,0,r),G2(e,r+1,-1),r)}function wb(e,t){for(var n="",r=AG(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function oKe(e,t,n,r){switch(e.type){case WYe:case TG:return e.return=e.return||e.value;case kEe:return"";case $Ee:return e.return=e.value+"{"+wb(e.children,r)+"}";case SG:e.value=e.props.join(",")}return Jf(n=wb(e.children,r))?e.return=e.value+"{"+n+"}":""}function aKe(e){var t=AG(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function uKe(e){return function(t){t.root||(t=t.return)&&e(t)}}function lKe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var cKe=function(t,n,r){for(var i=0,s=0;i=s,s=xd(),i===38&&s===12&&(n[r]=1),!Y2(s);)Zu();return PC(t,mu)},fKe=function(t,n){var r=-1,i=44;do switch(Y2(i)){case 0:i===38&&xd()===12&&(n[r]=1),t[r]+=cKe(mu-1,n,r);break;case 2:t[r]+=Uk(i);break;case 4:if(i===44){t[++r]=xd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=HM(i)}while(i=Zu());return t},dKe=function(t,n){return LEe(fKe(DEe(t),n))},Bse=new WeakMap,hKe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Bse.get(r))&&!i){Bse.set(t,!0);for(var s=[],o=dKe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},pKe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function MEe(e,t){switch(KYe(e,t)){case 5103:return lr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lr+e+xR+e+$o+e+e;case 6828:case 4268:return lr+e+$o+e+e;case 6165:return lr+e+$o+"flex-"+e+e;case 5187:return lr+e+mr(e,/(\w+).+(:[^]+)/,lr+"box-$1$2"+$o+"flex-$1$2")+e;case 5443:return lr+e+$o+"flex-item-"+mr(e,/flex-|-self/,"")+e;case 4675:return lr+e+$o+"flex-line-pack"+mr(e,/align-content|flex-|-self/,"")+e;case 5548:return lr+e+$o+mr(e,"shrink","negative")+e;case 5292:return lr+e+$o+mr(e,"basis","preferred-size")+e;case 6060:return lr+"box-"+mr(e,"-grow","")+lr+e+$o+mr(e,"grow","positive")+e;case 4554:return lr+mr(e,/([^-])(transform)/g,"$1"+lr+"$2")+e;case 6187:return mr(mr(mr(e,/(zoom-|grab)/,lr+"$1"),/(image-set)/,lr+"$1"),e,"")+e;case 5495:case 3959:return mr(e,/(image-set\([^]*)/,lr+"$1$`$1");case 4968:return mr(mr(e,/(.+:)(flex-)?(.*)/,lr+"box-pack:$3"+$o+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lr+e+e;case 4095:case 3583:case 4068:case 2532:return mr(e,/(.+)-inline(.+)/,lr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jf(e)-1-t>6)switch(ao(e,t+1)){case 109:if(ao(e,t+4)!==45)break;case 102:return mr(e,/(.+:)(.+)-([^]+)/,"$1"+lr+"$2-$3$1"+xR+(ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$z(e,"stretch")?MEe(mr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ao(e,t+1)!==115)break;case 6444:switch(ao(e,Jf(e)-3-(~$z(e,"!important")&&10))){case 107:return mr(e,":",":"+lr)+e;case 101:return mr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+lr+(ao(e,14)===45?"inline-":"")+"box$3$1"+lr+"$2$3$1"+$o+"$2box$3")+e}break;case 5936:switch(ao(e,t+11)){case 114:return lr+e+$o+mr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lr+e+$o+mr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lr+e+$o+mr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return lr+e+$o+e+e}return e}var mKe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case TG:t.return=MEe(t.value,t.length);break;case $Ee:return wb([jx(t,{value:mr(t.value,"@","@"+lr)})],i);case SG:if(t.length)return QYe(t.props,function(s){switch(XYe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wb([jx(t,{props:[mr(s,/:(read-\w+)/,":"+xR+"$1")]})],i);case"::placeholder":return wb([jx(t,{props:[mr(s,/:(plac\w+)/,":"+lr+"input-$1")]}),jx(t,{props:[mr(s,/:(plac\w+)/,":"+xR+"$1")]}),jx(t,{props:[mr(s,/:(plac\w+)/,$o+"input-$1")]})],i)}return""})}},gKe=[mKe],yKe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||gKe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[hKe,pKe];{var c,f=[oKe,uKe(function(m){c.insert(m)})],d=aKe(l.concat(i,f)),h=function(g){return wb(iKe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new qYe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};const FEe=yKe;function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},di.apply(this,arguments)}var BEe={exports:{}},Er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=typeof Symbol=="function"&&Symbol.for,CG=Gs?Symbol.for("react.element"):60103,IG=Gs?Symbol.for("react.portal"):60106,GM=Gs?Symbol.for("react.fragment"):60107,YM=Gs?Symbol.for("react.strict_mode"):60108,KM=Gs?Symbol.for("react.profiler"):60114,XM=Gs?Symbol.for("react.provider"):60109,QM=Gs?Symbol.for("react.context"):60110,OG=Gs?Symbol.for("react.async_mode"):60111,JM=Gs?Symbol.for("react.concurrent_mode"):60111,ZM=Gs?Symbol.for("react.forward_ref"):60112,e6=Gs?Symbol.for("react.suspense"):60113,vKe=Gs?Symbol.for("react.suspense_list"):60120,t6=Gs?Symbol.for("react.memo"):60115,n6=Gs?Symbol.for("react.lazy"):60116,_Ke=Gs?Symbol.for("react.block"):60121,bKe=Gs?Symbol.for("react.fundamental"):60117,wKe=Gs?Symbol.for("react.responder"):60118,EKe=Gs?Symbol.for("react.scope"):60119;function yl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case CG:switch(e=e.type,e){case OG:case JM:case GM:case KM:case YM:case e6:return e;default:switch(e=e&&e.$$typeof,e){case QM:case ZM:case n6:case t6:case XM:return e;default:return t}}case IG:return t}}}function jEe(e){return yl(e)===JM}Er.AsyncMode=OG;Er.ConcurrentMode=JM;Er.ContextConsumer=QM;Er.ContextProvider=XM;Er.Element=CG;Er.ForwardRef=ZM;Er.Fragment=GM;Er.Lazy=n6;Er.Memo=t6;Er.Portal=IG;Er.Profiler=KM;Er.StrictMode=YM;Er.Suspense=e6;Er.isAsyncMode=function(e){return jEe(e)||yl(e)===OG};Er.isConcurrentMode=jEe;Er.isContextConsumer=function(e){return yl(e)===QM};Er.isContextProvider=function(e){return yl(e)===XM};Er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===CG};Er.isForwardRef=function(e){return yl(e)===ZM};Er.isFragment=function(e){return yl(e)===GM};Er.isLazy=function(e){return yl(e)===n6};Er.isMemo=function(e){return yl(e)===t6};Er.isPortal=function(e){return yl(e)===IG};Er.isProfiler=function(e){return yl(e)===KM};Er.isStrictMode=function(e){return yl(e)===YM};Er.isSuspense=function(e){return yl(e)===e6};Er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===GM||e===JM||e===KM||e===YM||e===e6||e===vKe||typeof e=="object"&&e!==null&&(e.$$typeof===n6||e.$$typeof===t6||e.$$typeof===XM||e.$$typeof===QM||e.$$typeof===ZM||e.$$typeof===bKe||e.$$typeof===wKe||e.$$typeof===EKe||e.$$typeof===_Ke)};Er.typeOf=yl;BEe.exports=Er;var xKe=BEe.exports,zEe=xKe,SKe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TKe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},UEe={};UEe[zEe.ForwardRef]=SKe;UEe[zEe.Memo]=TKe;var AKe=!0;function CKe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var IKe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||AKe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},VEe=function(t,n,r){IKe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function OKe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var PKe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kKe=/[A-Z]|^ms/g,$Ke=/_EMO_([^_]+?)_([^]*?)_EMO_/g,HEe=function(t){return t.charCodeAt(1)===45},jse=function(t){return t!=null&&typeof t!="boolean"},K8=lKe(function(e){return HEe(e)?e:e.replace(kKe,"-$&").toLowerCase()}),zse=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace($Ke,function(r,i,s){return Zf={name:i,styles:s,next:Zf},i})}return PKe[t]!==1&&!HEe(t)&&typeof n=="number"&&n!==0?n+"px":n};function K2(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Zf={name:n.name,styles:n.styles,next:Zf},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Zf={name:r.name,styles:r.styles,next:Zf},r=r.next;var i=n.styles+";";return i}return RKe(e,t,n)}case"function":{if(e!==void 0){var s=Zf,o=n(e);return Zf=s,K2(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function RKe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=K2(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":jse(o)&&(r+=K8(s)+":"+zse(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)jse(o[a])&&(r+=K8(s)+":"+zse(s,o[a])+";");else{var u=K2(e,t,o);switch(s){case"animation":case"animationName":{r+=K8(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var Use=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Zf,PG=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";Zf=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=K2(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=K2(r,n,t[a]),i&&(s+=o[a]);Use.lastIndex=0;for(var u="",l;(l=Use.exec(s))!==null;)u+="-"+l[1];var c=OKe(s)+u;return{name:c,styles:s,next:Zf}},NKe=A1.useInsertionEffect?A1.useInsertionEffect:!1,Vse=NKe||A.useLayoutEffect,qEe=A.createContext(typeof HTMLElement<"u"?FEe({key:"css"}):null);qEe.Provider;var DKe=function(t){return A.forwardRef(function(n,r){var i=A.useContext(qEe);return t(n,i,r)})},LKe=A.createContext({}),MKe=DKe(function(e,t){var n=e.styles,r=PG([n],void 0,A.useContext(LKe)),i=A.useRef();return Vse(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),Vse(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&VEe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function WEe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PG(t)}var FKe=function(){var t=WEe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function GEe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var BKe=Object.defineProperty,Hse=Object.getOwnPropertySymbols,jKe=Object.prototype.hasOwnProperty,zKe=Object.prototype.propertyIsEnumerable,qse=(e,t,n)=>t in e?BKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X8=(e,t)=>{for(var n in t||(t={}))jKe.call(t,n)&&qse(e,n,t[n]);if(Hse)for(var n of Hse(t))zKe.call(t,n)&&qse(e,n,t[n]);return e};const YEe=A.createContext({theme:PEe});function as(){var e;return((e=A.useContext(YEe))==null?void 0:e.theme)||PEe}function UKe(e){const t=as(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function KEe(){var e;return(e=A.useContext(YEe))==null?void 0:e.emotionCache}function Ct(e,t,n){var r;const s=(r=as().components[e])==null?void 0:r.defaultProps;return X8(X8(X8({},t),s),GEe(n))}const XEe=A.createContext({classNames:{},styles:{},unstyled:!1});function QEe({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return L.createElement(XEe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function kC(){return A.useContext(XEe)}const VKe={app:100,modal:200,popover:300,overlay:400,max:9999};function Au(e){return VKe[e]}function HKe(e,t){const n=A.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const qKe=FEe({key:"mantine",prepend:!0});function WKe(){return KEe()||qKe}var GKe=Object.defineProperty,Wse=Object.getOwnPropertySymbols,YKe=Object.prototype.hasOwnProperty,KKe=Object.prototype.propertyIsEnumerable,Gse=(e,t,n)=>t in e?GKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XKe=(e,t)=>{for(var n in t||(t={}))YKe.call(t,n)&&Gse(e,n,t[n]);if(Wse)for(var n of Wse(t))KKe.call(t,n)&&Gse(e,n,t[n]);return e};const Q8="ref";function QKe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(Q8 in n))return{args:e,ref:t};t=n[Q8];const r=XKe({},n);return delete r[Q8],{args:[r],ref:t}}const{cssFactory:JKe}=(()=>{function e(n,r,i){const s=[],o=CKe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=QKe(o),l=PG(u,r.registered);return VEe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,CEe(o))}}return{cssFactory:t}})();function JEe(){const e=WKe();return HKe(()=>JKe({cache:e}),[e])}function ZKe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var eXe=Object.defineProperty,Yse=Object.getOwnPropertySymbols,tXe=Object.prototype.hasOwnProperty,nXe=Object.prototype.propertyIsEnumerable,Kse=(e,t,n)=>t in e?eXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J8=(e,t)=>{for(var n in t||(t={}))tXe.call(t,n)&&Kse(e,n,t[n]);if(Yse)for(var n of Yse(t))nXe.call(t,n)&&Kse(e,n,t[n]);return e};function rXe(e){return`__mantine-ref-${e||""}`}function Xse(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=J8(J8({},i[o]),s[o]):i[o]=J8({},s[o])}),i),{}):r(e)}function ht(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=as(),o=UKe(i==null?void 0:i.name),a=KEe(),{css:u,cx:l}=JEe(),c=t(s,r,rXe),f=Xse(i==null?void 0:i.styles,s,r),d=Xse(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:ZKe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function ZEe({styles:e}){const t=as();return L.createElement(MKe,{styles:WEe(typeof e=="function"?e(t):e)})}var iXe=Object.defineProperty,sXe=Object.defineProperties,oXe=Object.getOwnPropertyDescriptors,Qse=Object.getOwnPropertySymbols,aXe=Object.prototype.hasOwnProperty,uXe=Object.prototype.propertyIsEnumerable,Jse=(e,t,n)=>t in e?iXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zx=(e,t)=>{for(var n in t||(t={}))aXe.call(t,n)&&Jse(e,n,t[n]);if(Qse)for(var n of Qse(t))uXe.call(t,n)&&Jse(e,n,t[n]);return e},Ux=(e,t)=>sXe(e,oXe(t));const Vx={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},VO={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:Ux(zx({},Vx),{common:{transformOrigin:"center center"}}),"pop-bottom-left":Ux(zx({},Vx),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":Ux(zx({},Vx),{common:{transformOrigin:"bottom right"}}),"pop-top-left":Ux(zx({},Vx),{common:{transformOrigin:"top left"}}),"pop-top-right":Ux(zx({},Vx),{common:{transformOrigin:"top right"}})},Zse=["mousedown","touchstart"];function lXe(e,t,n){const r=A.useRef();return A.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Zse).forEach(s=>document.addEventListener(s,i)),()=>{(t||Zse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function cXe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function fXe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function dXe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?!1:fXe(e,t)),s=A.useRef();return A.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),cXe(s.current,o=>i(o.matches))},[e]),r}function sf(e,t,n){return Math.min(Math.max(e,t),n)}const kG=typeof document<"u"?A.useLayoutEffect:A.useEffect;function _s(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function exe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return _s(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const hXe=/input|select|textarea|button|object/,txe="a, input, select, textarea, button, object, [tabindex]";function pXe(e){return e.style.display==="none"}function mXe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(pXe(n))return!1;n=n.parentNode}return!0}function nxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Nz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(nxe(e));return(hXe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&mXe(e)}function rxe(e){const t=nxe(e);return(Number.isNaN(t)||t>=0)&&Nz(e)}function gXe(e){return Array.from(e.querySelectorAll(txe)).filter(rxe)}function yXe(e,t){const n=gXe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function vXe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function ixe(e=!0){const t=A.useRef(),n=A.useRef(null),r=A.useCallback(i=>{if(e&&i!==null&&(n.current=vXe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(txe));o=a.find(rxe)||a.find(Nz)||null,!o&&Nz(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return A.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&yXe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const _Xe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,bXe=L.useId||(()=>{});function wXe(){const[e,t]=A.useState("");return kG(()=>{t(_Xe())},[]),e}function EXe(){const e=bXe();return e?`mantine-${e.replace(/:/g,"")}`:""}function vl(e){return typeof e=="string"?e:EXe()||wXe()}function Dz(e,t,n){A.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function sxe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function oxe(...e){return t=>{e.forEach(n=>sxe(n,t))}}function Ts(...e){return A.useCallback(oxe(...e),e)}function axe(e,t,n="ltr"){const r=A.useRef(),i=A.useRef(!1),s=A.useRef(!1),o=A.useRef(0),[a,u]=A.useState(!1);return A.useEffect(()=>{i.current=!0},[]),A.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const b=r.current.getBoundingClientRect();if(b.width&&b.height){const E=sf((v-b.left)/b.width,0,1);e({x:n==="ltr"?E:1-E,y:sf((_-b.top)/b.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Aa({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=A.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function r6(e,t){return dXe("(prefers-reduced-motion: reduce)",e,t)}const xXe=e=>e<.5?2*e*e:-1+(4-2*e)*e,SXe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},TXe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},AXe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function uxe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=xXe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=A.useRef(0),u=A.useRef(0),l=A.useRef(!1),c=A.useRef(null),f=A.useRef(null),d=r6(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=A.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=TXe({parent:c.current,axis:t}))!=null?y:0,_=SXe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function b(){u.current===0&&(u.current=performance.now());const w=performance.now()-u.current,x=d||e===0?1:w/e,S=v+_*r(x);AXe({parent:c.current,axis:t,distance:S}),!l.current&&x<1?a.current=requestAnimationFrame(b):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}b()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return Dz("wheel",m,{passive:!0}),Dz("touchmove",m,{passive:!0}),A.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const CXe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Eb(){const e=A.useRef(0),t=A.useRef(null),[n,r]=A.useState(CXe),i=A.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return A.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function IXe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const OXe=({disableBodyPadding:e})=>{const t=e?null:IXe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function PXe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kXe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function $Xe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function RXe(e,t={disableBodyPadding:!1}){const[n,r]=A.useState(e||!1),i=A.useRef(0),{disableBodyPadding:s}=t,o=A.useRef(null),a=()=>{i.current=window.scrollY;const l=OXe({disableBodyPadding:s}),c=$Xe();PXe(c,l),kXe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return A.useEffect(()=>(n?a():u(),u),[n]),A.useEffect(()=>{e!==void 0&&r(e)},[e]),A.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var NXe=Object.defineProperty,DXe=Object.defineProperties,LXe=Object.getOwnPropertyDescriptors,eoe=Object.getOwnPropertySymbols,MXe=Object.prototype.hasOwnProperty,FXe=Object.prototype.propertyIsEnumerable,toe=(e,t,n)=>t in e?NXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BXe=(e,t)=>{for(var n in t||(t={}))MXe.call(t,n)&&toe(e,n,t[n]);if(eoe)for(var n of eoe(t))FXe.call(t,n)&&toe(e,n,t[n]);return e},jXe=(e,t)=>DXe(e,LXe(t));function zXe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return jXe(BXe({},n),{key:i})}function UXe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function VXe(e){return t=>UXe(zXe(e),t)}function HXe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{VXe(r)(n)&&(t.preventDefault(),i(n))})}}function qXe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function WXe(){return typeof window<"u"?qXe():"undetermined"}function GXe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n.type==="checkbox"?e(n.checked):e(n.value)}else e(t)}}function YXe(e){const[t,n]=A.useState(e);return[t,GXe(n)]}function LT(e,t){const[n,r]=A.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function KXe(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Xm(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var noe=Object.getOwnPropertySymbols,XXe=Object.prototype.hasOwnProperty,QXe=Object.prototype.propertyIsEnumerable,JXe=(e,t)=>{var n={};for(var r in e)XXe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&noe)for(var r of noe(e))t.indexOf(r)<0&&QXe.call(e,r)&&(n[r]=e[r]);return n};function wf(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:I,tt:C,td:O,w:z,miw:N,maw:$,h:D,mih:B,mah:V,bgsz:j,bgp:G,bgr:U,bga:P,pos:k,top:H,left:M,bottom:F,right:J,inset:se,display:ae}=t,ce=JXe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:GEe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:I,tt:C,td:O,w:z,miw:N,maw:$,h:D,mih:B,mah:V,bgsz:j,bgp:G,bgr:U,bga:P,pos:k,top:H,left:M,bottom:F,right:J,inset:se,display:ae}),rest:ce}}function ZXe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function eQe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return ZXe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function tQe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function nQe(e){return e}function rQe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const iQe=["-xs","-sm","-md","-lg","-xl"];function sQe(e,t){return iQe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const oQe={color:tQe,default:nQe,fontSize:rQe,spacing:sQe},aQe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var uQe=Object.defineProperty,roe=Object.getOwnPropertySymbols,lQe=Object.prototype.hasOwnProperty,cQe=Object.prototype.propertyIsEnumerable,ioe=(e,t,n)=>t in e?uQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,soe=(e,t)=>{for(var n in t||(t={}))lQe.call(t,n)&&ioe(e,n,t[n]);if(roe)for(var n of roe(t))cQe.call(t,n)&&ioe(e,n,t[n]);return e};function Lz(e,t,n=aQe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(eQe({value:e[s],getValue:oQe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=soe(soe({},i[o]),s[o]):i[o]=s[o]}),i),{})}function ooe(e,t){return typeof e=="function"?e(t):e}function fQe(e,t,n){const r=as(),{css:i,cx:s}=JEe();return Array.isArray(e)?s(n,i(Lz(t,r)),e.map(o=>i(ooe(o,r)))):s(n,i(ooe(e,r)),i(Lz(t,r)))}var dQe=Object.defineProperty,SR=Object.getOwnPropertySymbols,lxe=Object.prototype.hasOwnProperty,cxe=Object.prototype.propertyIsEnumerable,aoe=(e,t,n)=>t in e?dQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hQe=(e,t)=>{for(var n in t||(t={}))lxe.call(t,n)&&aoe(e,n,t[n]);if(SR)for(var n of SR(t))cxe.call(t,n)&&aoe(e,n,t[n]);return e},pQe=(e,t)=>{var n={};for(var r in e)lxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SR)for(var r of SR(e))t.indexOf(r)<0&&cxe.call(e,r)&&(n[r]=e[r]);return n};const fxe=A.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=pQe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=wf(a),c=i||"div";return L.createElement(c,hQe({ref:t,className:fQe(o,u,r),style:s},l))});fxe.displayName="@mantine/core/Box";const At=fxe;var mQe=Object.defineProperty,gQe=Object.defineProperties,yQe=Object.getOwnPropertyDescriptors,uoe=Object.getOwnPropertySymbols,vQe=Object.prototype.hasOwnProperty,_Qe=Object.prototype.propertyIsEnumerable,loe=(e,t,n)=>t in e?mQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,coe=(e,t)=>{for(var n in t||(t={}))vQe.call(t,n)&&loe(e,n,t[n]);if(uoe)for(var n of uoe(t))_Qe.call(t,n)&&loe(e,n,t[n]);return e},bQe=(e,t)=>gQe(e,yQe(t)),wQe=ht(e=>({root:bQe(coe(coe({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const EQe=wQe;var xQe=Object.defineProperty,TR=Object.getOwnPropertySymbols,dxe=Object.prototype.hasOwnProperty,hxe=Object.prototype.propertyIsEnumerable,foe=(e,t,n)=>t in e?xQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SQe=(e,t)=>{for(var n in t||(t={}))dxe.call(t,n)&&foe(e,n,t[n]);if(TR)for(var n of TR(t))hxe.call(t,n)&&foe(e,n,t[n]);return e},TQe=(e,t)=>{var n={};for(var r in e)dxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TR)for(var r of TR(e))t.indexOf(r)<0&&hxe.call(e,r)&&(n[r]=e[r]);return n};const pxe=A.forwardRef((e,t)=>{const n=Ct("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=TQe(n,["className","component","unstyled"]),{classes:a,cx:u}=EQe(null,{name:"UnstyledButton",unstyled:s});return L.createElement(At,SQe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});pxe.displayName="@mantine/core/UnstyledButton";const Bg=pxe;var AQe=Object.defineProperty,CQe=Object.defineProperties,IQe=Object.getOwnPropertyDescriptors,AR=Object.getOwnPropertySymbols,mxe=Object.prototype.hasOwnProperty,gxe=Object.prototype.propertyIsEnumerable,doe=(e,t,n)=>t in e?AQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xc=(e,t)=>{for(var n in t||(t={}))mxe.call(t,n)&&doe(e,n,t[n]);if(AR)for(var n of AR(t))gxe.call(t,n)&&doe(e,n,t[n]);return e},Hx=(e,t)=>CQe(e,IQe(t)),OQe=(e,t)=>{var n={};for(var r in e)mxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AR)for(var r of AR(e))t.indexOf(r)<0&&gxe.call(e,r)&&(n[r]=e[r]);return n};function PQe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Z8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function kQe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const Eh=typeof window<"u"&&window.requestAnimationFrame;function $Qe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=A.useRef(null),o="0px",[a,u]=A.useState({}),l=g=>{_v.flushSync(()=>u(g))},c=g=>{l(y=>xc(xc({},y),g))};function f(g){const y=e||PQe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:kQe(s),height:Z8(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};A.useEffect(()=>{Eh(()=>{const{x:g,y}=h();i==="x"&&!r?l(xc({},g)):i==="y"&&!r&&l(xc({},y))})},[]),_s(()=>{i!=="x"&&Eh(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Eh(()=>{const g=Z8(s);c(Hx(xc({},f(g)),{height:g}))})}:()=>{const g=Z8(s);c(Hx(xc({},f(g)),{willChange:"height",height:g})),Eh(()=>c({height:o,overflow:"hidden"}))})},[r]),_s(()=>{i!=="y"&&Eh(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),Eh(()=>{c(Hx(xc({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(Hx(xc({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),Eh(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,b=OQe(y,["style","refKey"]);const E=b[_];return Hx(xc({"aria-hidden":!r},b),{[_]:oxe(s,E),onTransitionEnd:p,style:xc(xc({boxSizing:"border-box"},v),a)})}return m}var RQe=Object.defineProperty,CR=Object.getOwnPropertySymbols,yxe=Object.prototype.hasOwnProperty,vxe=Object.prototype.propertyIsEnumerable,hoe=(e,t,n)=>t in e?RQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HO=(e,t)=>{for(var n in t||(t={}))yxe.call(t,n)&&hoe(e,n,t[n]);if(CR)for(var n of CR(t))vxe.call(t,n)&&hoe(e,n,t[n]);return e},NQe=(e,t)=>{var n={};for(var r in e)yxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CR)for(var r of CR(e))t.indexOf(r)<0&&vxe.call(e,r)&&(n[r]=e[r]);return n};const DQe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},_xe=A.forwardRef((e,t)=>{const n=Ct("Collapse",DQe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=NQe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=as(),h=r6(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=wf(f),v=$Qe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?L.createElement(At,HO({},y),r):null:L.createElement(At,HO({},v(HO(HO({style:a,ref:t},y),g))),L.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});_xe.displayName="@mantine/core/Collapse";var LQe=Object.defineProperty,poe=Object.getOwnPropertySymbols,MQe=Object.prototype.hasOwnProperty,FQe=Object.prototype.propertyIsEnumerable,moe=(e,t,n)=>t in e?LQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BQe=(e,t)=>{for(var n in t||(t={}))MQe.call(t,n)&&moe(e,n,t[n]);if(poe)for(var n of poe(t))FQe.call(t,n)&&moe(e,n,t[n]);return e};function jQe(e){return L.createElement("svg",BQe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),L.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var zQe=Object.defineProperty,UQe=Object.defineProperties,VQe=Object.getOwnPropertyDescriptors,goe=Object.getOwnPropertySymbols,HQe=Object.prototype.hasOwnProperty,qQe=Object.prototype.propertyIsEnumerable,yoe=(e,t,n)=>t in e?zQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bxe=(e,t)=>{for(var n in t||(t={}))HQe.call(t,n)&&yoe(e,n,t[n]);if(goe)for(var n of goe(t))qQe.call(t,n)&&yoe(e,n,t[n]);return e},WQe=(e,t)=>UQe(e,VQe(t));const zS={xs:18,sm:22,md:28,lg:34,xl:44};function GQe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:bxe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var YQe=ht((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:WQe(bxe({},GQe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:zS}),minHeight:e.fn.size({size:n,sizes:zS}),width:e.fn.size({size:n,sizes:zS}),minWidth:e.fn.size({size:n,sizes:zS}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})}));const KQe=YQe;var XQe=Object.defineProperty,IR=Object.getOwnPropertySymbols,wxe=Object.prototype.hasOwnProperty,Exe=Object.prototype.propertyIsEnumerable,voe=(e,t,n)=>t in e?XQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QQe=(e,t)=>{for(var n in t||(t={}))wxe.call(t,n)&&voe(e,n,t[n]);if(IR)for(var n of IR(t))Exe.call(t,n)&&voe(e,n,t[n]);return e},JQe=(e,t)=>{var n={};for(var r in e)wxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IR)for(var r of IR(e))t.indexOf(r)<0&&Exe.call(e,r)&&(n[r]=e[r]);return n};function ZQe(e){var t=e,{size:n,color:r}=t,i=JQe(t,["size","color"]);return L.createElement("svg",QQe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),L.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var eJe=Object.defineProperty,OR=Object.getOwnPropertySymbols,xxe=Object.prototype.hasOwnProperty,Sxe=Object.prototype.propertyIsEnumerable,_oe=(e,t,n)=>t in e?eJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tJe=(e,t)=>{for(var n in t||(t={}))xxe.call(t,n)&&_oe(e,n,t[n]);if(OR)for(var n of OR(t))Sxe.call(t,n)&&_oe(e,n,t[n]);return e},nJe=(e,t)=>{var n={};for(var r in e)xxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OR)for(var r of OR(e))t.indexOf(r)<0&&Sxe.call(e,r)&&(n[r]=e[r]);return n};function rJe(e){var t=e,{size:n,color:r}=t,i=nJe(t,["size","color"]);return L.createElement("svg",tJe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),L.createElement("g",{fill:"none",fillRule:"evenodd"},L.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},L.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),L.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},L.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var iJe=Object.defineProperty,PR=Object.getOwnPropertySymbols,Txe=Object.prototype.hasOwnProperty,Axe=Object.prototype.propertyIsEnumerable,boe=(e,t,n)=>t in e?iJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sJe=(e,t)=>{for(var n in t||(t={}))Txe.call(t,n)&&boe(e,n,t[n]);if(PR)for(var n of PR(t))Axe.call(t,n)&&boe(e,n,t[n]);return e},oJe=(e,t)=>{var n={};for(var r in e)Txe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PR)for(var r of PR(e))t.indexOf(r)<0&&Axe.call(e,r)&&(n[r]=e[r]);return n};function aJe(e){var t=e,{size:n,color:r}=t,i=oJe(t,["size","color"]);return L.createElement("svg",sJe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),L.createElement("circle",{cx:"15",cy:"15",r:"15"},L.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},L.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("circle",{cx:"105",cy:"15",r:"15"},L.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var uJe=Object.defineProperty,kR=Object.getOwnPropertySymbols,Cxe=Object.prototype.hasOwnProperty,Ixe=Object.prototype.propertyIsEnumerable,woe=(e,t,n)=>t in e?uJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lJe=(e,t)=>{for(var n in t||(t={}))Cxe.call(t,n)&&woe(e,n,t[n]);if(kR)for(var n of kR(t))Ixe.call(t,n)&&woe(e,n,t[n]);return e},cJe=(e,t)=>{var n={};for(var r in e)Cxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kR)for(var r of kR(e))t.indexOf(r)<0&&Ixe.call(e,r)&&(n[r]=e[r]);return n};const e9={bars:ZQe,oval:rJe,dots:aJe},fJe={xs:18,sm:22,md:36,lg:44,xl:58},dJe={size:"md"};function C0(e){const t=Ct("Loader",dJe,e),{size:n,color:r,variant:i}=t,s=cJe(t,["size","color","variant"]),o=as(),a=i in e9?i:o.loader;return L.createElement(At,lJe({role:"presentation",component:e9[a]||e9.bars,size:o.fn.size({size:n,sizes:fJe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}C0.displayName="@mantine/core/Loader";var hJe=Object.defineProperty,$R=Object.getOwnPropertySymbols,Oxe=Object.prototype.hasOwnProperty,Pxe=Object.prototype.propertyIsEnumerable,Eoe=(e,t,n)=>t in e?hJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xoe=(e,t)=>{for(var n in t||(t={}))Oxe.call(t,n)&&Eoe(e,n,t[n]);if($R)for(var n of $R(t))Pxe.call(t,n)&&Eoe(e,n,t[n]);return e},pJe=(e,t)=>{var n={};for(var r in e)Oxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$R)for(var r of $R(e))t.indexOf(r)<0&&Pxe.call(e,r)&&(n[r]=e[r]);return n};const mJe={color:"gray",size:"md",variant:"subtle",loading:!1},kxe=A.forwardRef((e,t)=>{const n=Ct("ActionIcon",mJe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=pJe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=KQe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=L.createElement(C0,xoe({color:v.color,size:y.fn.size({size:a,sizes:zS})-12},f));return L.createElement(Bg,xoe({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});kxe.displayName="@mantine/core/ActionIcon";const RR=kxe;function $xe(e){const{children:t,target:n,className:r}=Ct("Portal",{},e),i=as(),[s,o]=A.useState(!1),a=A.useRef();return kG(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?_v.createPortal(L.createElement("div",{className:r,dir:i.dir},t),a.current):null}$xe.displayName="@mantine/core/Portal";var gJe=Object.defineProperty,NR=Object.getOwnPropertySymbols,Rxe=Object.prototype.hasOwnProperty,Nxe=Object.prototype.propertyIsEnumerable,Soe=(e,t,n)=>t in e?gJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yJe=(e,t)=>{for(var n in t||(t={}))Rxe.call(t,n)&&Soe(e,n,t[n]);if(NR)for(var n of NR(t))Nxe.call(t,n)&&Soe(e,n,t[n]);return e},vJe=(e,t)=>{var n={};for(var r in e)Rxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NR)for(var r of NR(e))t.indexOf(r)<0&&Nxe.call(e,r)&&(n[r]=e[r]);return n};function $C(e){var t=e,{withinPortal:n=!0,children:r}=t,i=vJe(t,["withinPortal","children"]);return n?L.createElement($xe,yJe({},i),r):L.createElement(L.Fragment,null,r)}$C.displayName="@mantine/core/OptionalPortal";var _Je=Object.defineProperty,bJe=Object.defineProperties,wJe=Object.getOwnPropertyDescriptors,Toe=Object.getOwnPropertySymbols,EJe=Object.prototype.hasOwnProperty,xJe=Object.prototype.propertyIsEnumerable,Aoe=(e,t,n)=>t in e?_Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t9=(e,t)=>{for(var n in t||(t={}))EJe.call(t,n)&&Aoe(e,n,t[n]);if(Toe)for(var n of Toe(t))xJe.call(t,n)&&Aoe(e,n,t[n]);return e},Coe=(e,t)=>bJe(e,wJe(t));function SJe({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var TJe=ht((e,{color:t,radius:n,variant:r})=>({root:t9(Coe(t9({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),SJe({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:Coe(t9({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}}));const AJe=TJe;var CJe=Object.defineProperty,Ioe=Object.getOwnPropertySymbols,IJe=Object.prototype.hasOwnProperty,OJe=Object.prototype.propertyIsEnumerable,Ooe=(e,t,n)=>t in e?CJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PJe=(e,t)=>{for(var n in t||(t={}))IJe.call(t,n)&&Ooe(e,n,t[n]);if(Ioe)for(var n of Ioe(t))OJe.call(t,n)&&Ooe(e,n,t[n]);return e};function Dxe(e){return L.createElement("svg",PJe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}Dxe.displayName="@mantine/core/CloseIcon";var kJe=Object.defineProperty,DR=Object.getOwnPropertySymbols,Lxe=Object.prototype.hasOwnProperty,Mxe=Object.prototype.propertyIsEnumerable,Poe=(e,t,n)=>t in e?kJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$Je=(e,t)=>{for(var n in t||(t={}))Lxe.call(t,n)&&Poe(e,n,t[n]);if(DR)for(var n of DR(t))Mxe.call(t,n)&&Poe(e,n,t[n]);return e},RJe=(e,t)=>{var n={};for(var r in e)Lxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DR)for(var r of DR(e))t.indexOf(r)<0&&Mxe.call(e,r)&&(n[r]=e[r]);return n};const NJe={xs:12,sm:14,md:16,lg:20,xl:24},DJe={size:"md"},Fxe=A.forwardRef((e,t)=>{const n=Ct("CloseButton",DJe,e),{iconSize:r,size:i="md"}=n,s=RJe(n,["iconSize","size"]),o=as(),a=r||o.fn.size({size:i,sizes:NJe});return L.createElement(RR,$Je({size:i,ref:t},s),L.createElement(Dxe,{width:a,height:a}))});Fxe.displayName="@mantine/core/CloseButton";const wv=Fxe;var LJe=Object.defineProperty,LR=Object.getOwnPropertySymbols,Bxe=Object.prototype.hasOwnProperty,jxe=Object.prototype.propertyIsEnumerable,koe=(e,t,n)=>t in e?LJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MJe=(e,t)=>{for(var n in t||(t={}))Bxe.call(t,n)&&koe(e,n,t[n]);if(LR)for(var n of LR(t))jxe.call(t,n)&&koe(e,n,t[n]);return e},FJe=(e,t)=>{var n={};for(var r in e)Bxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LR)for(var r of LR(e))t.indexOf(r)<0&&jxe.call(e,r)&&(n[r]=e[r]);return n};const BJe={variant:"light"},zxe=A.forwardRef((e,t)=>{const n=Ct("Alert",BJe,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=FJe(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=AJe({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),b=vl(r),E=s&&`${b}-title`,w=`${b}-body`;return L.createElement(At,MJe({id:b,role:"alert","aria-labelledby":E,"aria-describedby":w,className:_(v.root,v[o],i),ref:t},y),L.createElement("div",{className:v.wrapper},c&&L.createElement("div",{className:v.icon},c),L.createElement("div",{className:v.body},s&&L.createElement("div",{className:v.title,"data-with-close-button":p||void 0},L.createElement("span",{id:E,className:v.label},s)),p&&L.createElement(wv,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),L.createElement("div",{id:w,className:v.message},a))))});zxe.displayName="@mantine/core/Alert";var jJe=Object.defineProperty,zJe=Object.defineProperties,UJe=Object.getOwnPropertyDescriptors,$oe=Object.getOwnPropertySymbols,VJe=Object.prototype.hasOwnProperty,HJe=Object.prototype.propertyIsEnumerable,Roe=(e,t,n)=>t in e?jJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qO=(e,t)=>{for(var n in t||(t={}))VJe.call(t,n)&&Roe(e,n,t[n]);if($oe)for(var n of $oe(t))HJe.call(t,n)&&Roe(e,n,t[n]);return e},qJe=(e,t)=>zJe(e,UJe(t));function WJe({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function GJe({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function YJe(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var KJe=ht((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:qO(qJe(qO(qO(qO({},e.fn.fontStyles()),e.fn.focusStyles()),YJe(i)),{color:GJe({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:WJe({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const XJe=KJe;var QJe=Object.defineProperty,MR=Object.getOwnPropertySymbols,Uxe=Object.prototype.hasOwnProperty,Vxe=Object.prototype.propertyIsEnumerable,Noe=(e,t,n)=>t in e?QJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JJe=(e,t)=>{for(var n in t||(t={}))Uxe.call(t,n)&&Noe(e,n,t[n]);if(MR)for(var n of MR(t))Vxe.call(t,n)&&Noe(e,n,t[n]);return e},ZJe=(e,t)=>{var n={};for(var r in e)Uxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MR)for(var r of MR(e))t.indexOf(r)<0&&Vxe.call(e,r)&&(n[r]=e[r]);return n};const eZe={variant:"text"},Hxe=A.forwardRef((e,t)=>{const n=Ct("Text",eZe,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:b}=n,E=ZJe(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:w,cx:x}=XJe({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return L.createElement(At,JJe({ref:t,className:x(w.root,{[w.gradient]:l==="gradient"},r),component:b?"span":"div"},E))});Hxe.displayName="@mantine/core/Text";const Ot=Hxe;var tZe=ht(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}}));const nZe=tZe;var rZe=Object.defineProperty,FR=Object.getOwnPropertySymbols,qxe=Object.prototype.hasOwnProperty,Wxe=Object.prototype.propertyIsEnumerable,Doe=(e,t,n)=>t in e?rZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Loe=(e,t)=>{for(var n in t||(t={}))qxe.call(t,n)&&Doe(e,n,t[n]);if(FR)for(var n of FR(t))Wxe.call(t,n)&&Doe(e,n,t[n]);return e},iZe=(e,t)=>{var n={};for(var r in e)qxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FR)for(var r of FR(e))t.indexOf(r)<0&&Wxe.call(e,r)&&(n[r]=e[r]);return n};const sZe={},Gxe=A.forwardRef((e,t)=>{const n=Ct("Anchor",sZe,e),{component:r,className:i,unstyled:s}=n,o=iZe(n,["component","className","unstyled"]),{classes:a,cx:u}=nZe(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return L.createElement(Ot,Loe(Loe({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});Gxe.displayName="@mantine/core/Anchor";const Yxe=Gxe,Kxe=A.createContext({}),oZe=Kxe.Provider;function Xxe(){return A.useContext(Kxe)}function i6(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var aZe=Object.defineProperty,uZe=Object.defineProperties,lZe=Object.getOwnPropertyDescriptors,Moe=Object.getOwnPropertySymbols,cZe=Object.prototype.hasOwnProperty,fZe=Object.prototype.propertyIsEnumerable,Foe=(e,t,n)=>t in e?aZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WO=(e,t)=>{for(var n in t||(t={}))cZe.call(t,n)&&Foe(e,n,t[n]);if(Moe)for(var n of Moe(t))fZe.call(t,n)&&Foe(e,n,t[n]);return e},Boe=(e,t)=>uZe(e,lZe(t)),dZe=ht((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?i6(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:Boe(WO(WO(Boe(WO(WO({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const hZe=dZe;var pZe=Object.defineProperty,BR=Object.getOwnPropertySymbols,Qxe=Object.prototype.hasOwnProperty,Jxe=Object.prototype.propertyIsEnumerable,joe=(e,t,n)=>t in e?pZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zoe=(e,t)=>{for(var n in t||(t={}))Qxe.call(t,n)&&joe(e,n,t[n]);if(BR)for(var n of BR(t))Jxe.call(t,n)&&joe(e,n,t[n]);return e},mZe=(e,t)=>{var n={};for(var r in e)Qxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BR)for(var r of BR(e))t.indexOf(r)<0&&Jxe.call(e,r)&&(n[r]=e[r]);return n};const $G=A.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=Au("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=mZe(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=Xxe(),{classes:b,cx:E,theme:w}=hZe({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),x=i6(r,w).reduce((S,[I,C])=>(S[`@media (min-width: ${I}px)`]={[`--mantine-${m}-width`]:`${C}px`},S),{});return L.createElement(At,zoe({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:E(b.root,f)},v),p,L.createElement(ZEe,{styles:()=>({":root":zoe({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},x)})}))});$G.displayName="@mantine/core/HorizontalSection";var gZe=Object.defineProperty,jR=Object.getOwnPropertySymbols,Zxe=Object.prototype.hasOwnProperty,eSe=Object.prototype.propertyIsEnumerable,Uoe=(e,t,n)=>t in e?gZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yZe=(e,t)=>{for(var n in t||(t={}))Zxe.call(t,n)&&Uoe(e,n,t[n]);if(jR)for(var n of jR(t))eSe.call(t,n)&&Uoe(e,n,t[n]);return e},vZe=(e,t)=>{var n={};for(var r in e)Zxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jR)for(var r of jR(e))t.indexOf(r)<0&&eSe.call(e,r)&&(n[r]=e[r]);return n};const tSe=A.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=vZe(n,["children","grow","sx"]);return L.createElement(At,yZe({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...$1(s)]},o),r)});tSe.displayName="@mantine/core/Section";const nSe=tSe;var _Ze=Object.defineProperty,Voe=Object.getOwnPropertySymbols,bZe=Object.prototype.hasOwnProperty,wZe=Object.prototype.propertyIsEnumerable,Hoe=(e,t,n)=>t in e?_Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EZe=(e,t)=>{for(var n in t||(t={}))bZe.call(t,n)&&Hoe(e,n,t[n]);if(Voe)for(var n of Voe(t))wZe.call(t,n)&&Hoe(e,n,t[n]);return e};const xZe={fixed:!1,position:{top:0,left:0},zIndex:Au("app"),hiddenBreakpoint:"md",hidden:!1},u1=A.forwardRef((e,t)=>{const n=Ct("Navbar",xZe,e);return L.createElement($G,EZe({section:"navbar",__staticSelector:"Navbar",ref:t},n))});u1.Section=nSe;u1.displayName="@mantine/core/Navbar";var SZe=Object.defineProperty,TZe=Object.defineProperties,AZe=Object.getOwnPropertyDescriptors,qoe=Object.getOwnPropertySymbols,CZe=Object.prototype.hasOwnProperty,IZe=Object.prototype.propertyIsEnumerable,Woe=(e,t,n)=>t in e?SZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n9=(e,t)=>{for(var n in t||(t={}))CZe.call(t,n)&&Woe(e,n,t[n]);if(qoe)for(var n of qoe(t))IZe.call(t,n)&&Woe(e,n,t[n]);return e},Goe=(e,t)=>TZe(e,AZe(t)),OZe=ht((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?i6(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:Goe(n9(Goe(n9(n9({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const PZe=OZe;var kZe=Object.defineProperty,zR=Object.getOwnPropertySymbols,rSe=Object.prototype.hasOwnProperty,iSe=Object.prototype.propertyIsEnumerable,Yoe=(e,t,n)=>t in e?kZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Koe=(e,t)=>{for(var n in t||(t={}))rSe.call(t,n)&&Yoe(e,n,t[n]);if(zR)for(var n of zR(t))iSe.call(t,n)&&Yoe(e,n,t[n]);return e},$Ze=(e,t)=>{var n={};for(var r in e)rSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zR)for(var r of zR(e))t.indexOf(r)<0&&iSe.call(e,r)&&(n[r]=e[r]);return n};const sSe=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=Au("app"),section:d,unstyled:h,__staticSelector:p}=n,m=$Ze(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=Xxe(),{classes:y,cx:v,theme:_}=PZe({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),b=typeof a=="object"&&a!==null?i6(a,_).reduce((E,[w,x])=>(E[`@media (min-width: ${w}px)`]={[`--mantine-${d}-height`]:`${x}px`},E),{}):null;return L.createElement(At,Koe({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,L.createElement(ZEe,{styles:()=>({":root":Koe({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},b)})}))});sSe.displayName="@mantine/core/VerticalSection";var RZe=Object.defineProperty,NZe=Object.defineProperties,DZe=Object.getOwnPropertyDescriptors,Xoe=Object.getOwnPropertySymbols,LZe=Object.prototype.hasOwnProperty,MZe=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?RZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FZe=(e,t)=>{for(var n in t||(t={}))LZe.call(t,n)&&Qoe(e,n,t[n]);if(Xoe)for(var n of Xoe(t))MZe.call(t,n)&&Qoe(e,n,t[n]);return e},BZe=(e,t)=>NZe(e,DZe(t));const jZe={fixed:!1,position:{top:0,left:0,right:0},zIndex:Au("app")},RG=A.forwardRef((e,t)=>{const n=Ct("Header",jZe,e);return L.createElement(sSe,BZe(FZe({section:"header",__staticSelector:"Header"},n),{ref:t}))});RG.displayName="@mantine/core/Header";var zZe=Object.defineProperty,Joe=Object.getOwnPropertySymbols,UZe=Object.prototype.hasOwnProperty,VZe=Object.prototype.propertyIsEnumerable,Zoe=(e,t,n)=>t in e?zZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HZe=(e,t)=>{for(var n in t||(t={}))UZe.call(t,n)&&Zoe(e,n,t[n]);if(Joe)for(var n of Joe(t))VZe.call(t,n)&&Zoe(e,n,t[n]);return e};const qZe={fixed:!1,position:{top:0,right:0},zIndex:Au("app"),hiddenBreakpoint:"md",hidden:!1},NG=A.forwardRef((e,t)=>{const n=Ct("Aside",qZe,e);return L.createElement($G,HZe({section:"aside",__staticSelector:"Aside",ref:t},n))});NG.Section=nSe;NG.displayName="@mantine/core/Aside";var WZe=Object.defineProperty,eae=Object.getOwnPropertySymbols,GZe=Object.prototype.hasOwnProperty,YZe=Object.prototype.propertyIsEnumerable,tae=(e,t,n)=>t in e?WZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KZe=(e,t)=>{for(var n in t||(t={}))GZe.call(t,n)&&tae(e,n,t[n]);if(eae)for(var n of eae(t))YZe.call(t,n)&&tae(e,n,t[n]);return e};function XZe(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var QZe=ht((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:KZe({flex:1,width:"100vw",boxSizing:"border-box"},XZe(t,e))}));const JZe=QZe;var ZZe=Object.defineProperty,UR=Object.getOwnPropertySymbols,oSe=Object.prototype.hasOwnProperty,aSe=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?ZZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eet=(e,t)=>{for(var n in t||(t={}))oSe.call(t,n)&&nae(e,n,t[n]);if(UR)for(var n of UR(t))aSe.call(t,n)&&nae(e,n,t[n]);return e},tet=(e,t)=>{var n={};for(var r in e)oSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UR)for(var r of UR(e))t.indexOf(r)<0&&aSe.call(e,r)&&(n[r]=e[r]);return n};const net={fixed:!0,zIndex:Au("app"),padding:"md"},DG=A.forwardRef((e,t)=>{const n=Ct("AppShell",net,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=tet(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:b}=JZe({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?L.createElement(L.Fragment,null,r):L.createElement(oZe,{value:{fixed:u,zIndex:l}},L.createElement(At,eet({className:b(_.root,h),ref:t},v),s,L.createElement("div",{className:_.body},i,L.createElement("main",{className:_.main},r),a),o))});DG.displayName="@mantine/core/AppShell";const GO={xs:1,sm:2,md:3,lg:4,xl:5};function YO(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var ret=ht((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:GO})}px ${n} ${YO(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:GO})}px ${n} ${YO(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:GO}),borderTopColor:YO(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:GO}),borderLeftColor:YO(e,r),borderLeftStyle:n}}));const iet=ret;var set=Object.defineProperty,oet=Object.defineProperties,aet=Object.getOwnPropertyDescriptors,VR=Object.getOwnPropertySymbols,uSe=Object.prototype.hasOwnProperty,lSe=Object.prototype.propertyIsEnumerable,rae=(e,t,n)=>t in e?set(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iae=(e,t)=>{for(var n in t||(t={}))uSe.call(t,n)&&rae(e,n,t[n]);if(VR)for(var n of VR(t))lSe.call(t,n)&&rae(e,n,t[n]);return e},uet=(e,t)=>oet(e,aet(t)),cet=(e,t)=>{var n={};for(var r in e)uSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VR)for(var r of VR(e))t.indexOf(r)<0&&lSe.call(e,r)&&(n[r]=e[r]);return n};const fet={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},Mz=A.forwardRef((e,t)=>{const n=Ct("Divider",fet,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=cet(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=iet({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,b=!(l!=null&&l.color);return L.createElement(At,iae({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&L.createElement(Ot,uet(iae({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:b})}),a))});Mz.displayName="@mantine/core/Divider";var det=Object.defineProperty,het=Object.defineProperties,pet=Object.getOwnPropertyDescriptors,sae=Object.getOwnPropertySymbols,met=Object.prototype.hasOwnProperty,get=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?det(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aae=(e,t)=>{for(var n in t||(t={}))met.call(t,n)&&oae(e,n,t[n]);if(sae)for(var n of sae(t))get.call(t,n)&&oae(e,n,t[n]);return e},yet=(e,t)=>het(e,pet(t)),vet=ht((e,{size:t})=>({item:yet(aae({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":aae({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const _et=vet;var bet=Object.defineProperty,uae=Object.getOwnPropertySymbols,wet=Object.prototype.hasOwnProperty,Eet=Object.prototype.propertyIsEnumerable,lae=(e,t,n)=>t in e?bet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xet=(e,t)=>{for(var n in t||(t={}))wet.call(t,n)&&lae(e,n,t[n]);if(uae)for(var n of uae(t))Eet.call(t,n)&&lae(e,n,t[n]);return e};function LG({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=_et({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const b=(w,x)=>{const S=typeof i=="function"?i(w.value):!1;return L.createElement(c,xet({key:w.value,className:g.item,"data-disabled":w.disabled||void 0,"data-hovered":!w.disabled&&t===x||void 0,"data-selected":!w.disabled&&S||void 0,onMouseEnter:()=>a(x),id:`${s}-${x}`,role:"option",tabIndex:-1,"aria-selected":t===x,ref:I=>{l&&l.current&&(l.current[w.value]=I)},onMouseDown:w.disabled?null:I=>{I.preventDefault(),u(w)},disabled:w.disabled},w))};let E=null;if(e.forEach((w,x)=>{w.creatable?_=x:w.group?(E!==w.group&&(E=w.group,v.push(L.createElement("div",{className:g.separator,key:`__mantine-divider-${x}`},L.createElement(Mz,{classNames:{label:g.separatorLabel},label:w.group})))),v.push(b(w,x))):y.push(b(w,x))}),h){const w=e[_];y.push(L.createElement("div",{key:KXe(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:x=>{x.preventDefault(),u(w)},tabIndex:-1,ref:x=>{l&&l.current&&(l.current[w.value]=x)}},p))}return v.length>0&&y.length>0&&y.unshift(L.createElement("div",{className:g.separator,key:"empty-group-separator"},L.createElement(Mz,null))),v.length>0||y.length>0?L.createElement(L.Fragment,null,v,y):L.createElement(Ot,{size:f,unstyled:m,className:g.nothingFound},d)}LG.displayName="@mantine/core/SelectItems";var Tet=Object.defineProperty,HR=Object.getOwnPropertySymbols,cSe=Object.prototype.hasOwnProperty,fSe=Object.prototype.propertyIsEnumerable,cae=(e,t,n)=>t in e?Tet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aet=(e,t)=>{for(var n in t||(t={}))cSe.call(t,n)&&cae(e,n,t[n]);if(HR)for(var n of HR(t))fSe.call(t,n)&&cae(e,n,t[n]);return e},Cet=(e,t)=>{var n={};for(var r in e)cSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HR)for(var r of HR(e))t.indexOf(r)<0&&fSe.call(e,r)&&(n[r]=e[r]);return n};const MG=A.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=Cet(n,["label","value"]);return L.createElement("div",Aet({ref:t},s),r||i)});MG.displayName="@mantine/core/DefaultItem";function Iet(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function dSe(...e){return t=>e.forEach(n=>Iet(n,t))}function Ev(...e){return A.useCallback(dSe(...e),e)}const hSe=A.forwardRef((e,t)=>{const{children:n,...r}=e,i=A.Children.toArray(n),s=i.find(Pet);if(s){const o=s.props.children,a=i.map(u=>u===s?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:u);return A.createElement(Fz,di({},r,{ref:t}),A.isValidElement(o)?A.cloneElement(o,void 0,a):null)}return A.createElement(Fz,di({},r,{ref:t}),n)});hSe.displayName="Slot";const Fz=A.forwardRef((e,t)=>{const{children:n,...r}=e;return A.isValidElement(n)?A.cloneElement(n,{...ket(r,n.props),ref:dSe(t,n.ref)}):A.Children.count(n)>1?A.Children.only(null):null});Fz.displayName="SlotClone";const Oet=({children:e})=>A.createElement(A.Fragment,null,e);function Pet(e){return A.isValidElement(e)&&e.type===Oet}function ket(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const $et=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],RC=$et.reduce((e,t)=>{const n=A.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?hSe:t;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(a,di({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Bz=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function Ret(e,t){return A.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const NC=e=>{const{present:t,children:n}=e,r=Net(t),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=Ev(r.ref,i.ref);return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};NC.displayName="Presence";function Net(e){const[t,n]=A.useState(),r=A.useRef({}),i=A.useRef(e),s=A.useRef("none"),o=e?"mounted":"unmounted",[a,u]=Ret(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const l=KO(r.current);s.current=a==="mounted"?l:"none"},[a]),Bz(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=KO(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),Bz(()=>{if(t){const l=f=>{const h=KO(r.current).includes(f.animationName);f.target===t&&h&&_v.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=KO(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function KO(e){return(e==null?void 0:e.animationName)||"none"}function Det(e,t=[]){let n=[];function r(s,o){const a=A.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=A.useMemo(()=>p,Object.values(p));return A.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=A.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>A.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return A.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,Let(i,...t)]}function Let(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Sy(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const Met=A.createContext(void 0);function Fet(e){const t=A.useContext(Met);return e||t||"ltr"}function Bet(e,[t,n]){return Math.min(n,Math.max(t,e))}function l1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function jet(e,t){return A.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const pSe="ScrollArea",[mSe,Xwn]=Det(pSe),[zet,lc]=mSe(pSe),Uet=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=A.useState(null),[l,c]=A.useState(null),[f,d]=A.useState(null),[h,p]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(0),[_,b]=A.useState(0),[E,w]=A.useState(!1),[x,S]=A.useState(!1),I=Ev(t,O=>u(O)),C=Fet(i);return A.createElement(zet,{scope:n,type:r,dir:C,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:w,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:b},A.createElement(RC.div,di({dir:C},o,{ref:I,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),Vet="ScrollAreaViewport",Het=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=lc(Vet,n),o=A.useRef(null),a=Ev(t,o,s.onViewportChange);return A.createElement(A.Fragment,null,A.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),A.createElement(RC.div,di({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),A.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Yp="ScrollAreaScrollbar",qet=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=lc(Yp,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?A.createElement(Wet,di({},r,{ref:t,forceMount:n})):i.type==="scroll"?A.createElement(Get,di({},r,{ref:t,forceMount:n})):i.type==="auto"?A.createElement(gSe,di({},r,{ref:t,forceMount:n})):i.type==="always"?A.createElement(FG,di({},r,{ref:t})):null}),Wet=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=lc(Yp,e.__scopeScrollArea),[s,o]=A.useState(!1);return A.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),A.createElement(NC,{present:n||s},A.createElement(gSe,di({"data-state":s?"visible":"hidden"},r,{ref:t})))}),Get=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=lc(Yp,e.__scopeScrollArea),s=e.orientation==="horizontal",o=o6(()=>u("SCROLL_END"),100),[a,u]=jet("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),A.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),A.createElement(NC,{present:n||a!=="hidden"},A.createElement(FG,di({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:l1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:l1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),gSe=A.forwardRef((e,t)=>{const n=lc(Yp,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=A.useState(!1),a=e.orientation==="horizontal",u=o6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return lw(n.viewport,u),lw(n.content,u),A.createElement(NC,{present:r||s},A.createElement(FG,di({"data-state":s?"visible":"hidden"},i,{ref:t})))}),FG=A.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=lc(Yp,e.__scopeScrollArea),s=A.useRef(null),o=A.useRef(0),[a,u]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=bSe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return ttt(d,o.current,a,h)}return n==="horizontal"?A.createElement(Yet,di({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=fae(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?A.createElement(Ket,di({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=fae(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),Yet=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=lc(Yp,e.__scopeScrollArea),[o,a]=A.useState(),u=A.useRef(null),l=Ev(t,u,s.onScrollbarXChange);return A.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),A.createElement(vSe,di({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":s6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),ESe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:qR(o.paddingLeft),paddingEnd:qR(o.paddingRight)}})}}))}),Ket=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=lc(Yp,e.__scopeScrollArea),[o,a]=A.useState(),u=A.useRef(null),l=Ev(t,u,s.onScrollbarYChange);return A.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),A.createElement(vSe,di({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":s6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),ESe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:qR(o.paddingTop),paddingEnd:qR(o.paddingBottom)}})}}))}),[Xet,ySe]=mSe(Yp),vSe=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=lc(Yp,n),[p,m]=A.useState(null),g=Ev(t,I=>m(I)),y=A.useRef(null),v=A.useRef(""),_=h.viewport,b=r.content-r.viewport,E=Sy(c),w=Sy(u),x=o6(f,10);function S(I){if(y.current){const C=I.clientX-y.current.left,O=I.clientY-y.current.top;l({x:C,y:O})}}return A.useEffect(()=>{const I=C=>{const O=C.target;(p==null?void 0:p.contains(O))&&E(C,b)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[_,p,b,E]),A.useEffect(w,[r,w]),lw(p,x),lw(h.content,x),A.createElement(Xet,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:Sy(s),onThumbPointerUp:Sy(o),onThumbPositionChange:w,onThumbPointerDown:Sy(a)},A.createElement(RC.div,di({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:l1(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(I))}),onPointerMove:l1(e.onPointerMove,S),onPointerUp:l1(e.onPointerUp,I=>{I.target.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),jz="ScrollAreaThumb",Qet=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ySe(jz,e.__scopeScrollArea);return A.createElement(NC,{present:n||i.hasThumb},A.createElement(Jet,di({ref:t},r)))}),Jet=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=lc(jz,n),o=ySe(jz,n),{onThumbPositionChange:a}=o,u=Ev(t,f=>o.onThumbChange(f)),l=A.useRef(),c=o6(()=>{l.current&&(l.current(),l.current=void 0)},100);return A.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=ntt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),A.createElement(RC.div,di({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:l1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:l1(e.onPointerUp,o.onThumbPointerUp)}))}),_Se="ScrollAreaCorner",Zet=A.forwardRef((e,t)=>{const n=lc(_Se,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?A.createElement(ett,di({},e,{ref:t})):null}),ett=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=lc(_Se,n),[s,o]=A.useState(0),[a,u]=A.useState(0),l=!!(s&&a);return lw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),lw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?A.createElement(RC.div,di({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function qR(e){return e?parseInt(e,10):0}function bSe(e,t){const n=e/t;return isNaN(n)?0:n}function s6(e){const t=bSe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ttt(e,t,n,r="ltr"){const i=s6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return wSe([u,l],f)(e)}function fae(e,t,n="ltr"){const r=s6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Bet(e,u);return wSe([0,o],[0,a])(l)}function wSe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ESe(e,t){return e>0&&e<t}const ntt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function o6(e,t){const n=Sy(e),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function lw(e,t){const n=Sy(t);Bz(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const rtt=Uet,itt=Het,dae=qet,hae=Qet,stt=Zet;var ott=ht((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const att=ott;var utt=Object.defineProperty,ltt=Object.defineProperties,ctt=Object.getOwnPropertyDescriptors,WR=Object.getOwnPropertySymbols,xSe=Object.prototype.hasOwnProperty,SSe=Object.prototype.propertyIsEnumerable,pae=(e,t,n)=>t in e?utt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TSe=(e,t)=>{for(var n in t||(t={}))xSe.call(t,n)&&pae(e,n,t[n]);if(WR)for(var n of WR(t))SSe.call(t,n)&&pae(e,n,t[n]);return e},ftt=(e,t)=>ltt(e,ctt(t)),ASe=(e,t)=>{var n={};for(var r in e)xSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WR)for(var r of WR(e))t.indexOf(r)<0&&SSe.call(e,r)&&(n[r]=e[r]);return n};const CSe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},a6=A.forwardRef((e,t)=>{const n=Ct("ScrollArea",CSe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=ASe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=A.useState(!1),v=as(),{classes:_,cx:b}=att({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return L.createElement(rtt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},L.createElement(At,TSe({className:b(_.root,i)},m),L.createElement(itt,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:E})=>h({x:E.scrollLeft,y:E.scrollTop}):void 0},r),L.createElement(dae,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},L.createElement(hae,{className:_.thumb})),L.createElement(dae,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},L.createElement(hae,{className:_.thumb})),L.createElement(stt,{className:_.corner})))}),ISe=A.forwardRef((e,t)=>{const n=Ct("ScrollAreaAutosize",CSe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=ASe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return L.createElement(At,ftt(TSe({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...$1(m)]}),L.createElement(At,{sx:{display:"flex",flexDirection:"column",flex:1}},L.createElement(a6,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});ISe.displayName="@mantine/core/ScrollAreaAutosize";a6.displayName="@mantine/core/ScrollArea";a6.Autosize=ISe;const OSe=a6;var dtt=Object.defineProperty,htt=Object.defineProperties,ptt=Object.getOwnPropertyDescriptors,GR=Object.getOwnPropertySymbols,PSe=Object.prototype.hasOwnProperty,kSe=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?dtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gae=(e,t)=>{for(var n in t||(t={}))PSe.call(t,n)&&mae(e,n,t[n]);if(GR)for(var n of GR(t))kSe.call(t,n)&&mae(e,n,t[n]);return e},mtt=(e,t)=>htt(e,ptt(t)),gtt=(e,t)=>{var n={};for(var r in e)PSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GR)for(var r of GR(e))t.indexOf(r)<0&&kSe.call(e,r)&&(n[r]=e[r]);return n};const u6=A.forwardRef((e,t)=>{var n=e,{style:r}=n,i=gtt(n,["style"]);return L.createElement(OSe,mtt(gae({},i),{style:gae({width:"100%"},r),viewportRef:t}),i.children)});u6.displayName="@mantine/core/SelectScrollArea";var ytt=ht(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const vtt=ytt;function Tp(e){return e.split("-")[0]}function DC(e){return e.split("-")[1]}function xv(e){return["top","bottom"].includes(Tp(e))?"x":"y"}function BG(e){return e==="y"?"height":"width"}function yae(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=xv(t),u=BG(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(Tp(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(DC(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const _tt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=yae(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:b,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=yae(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function jG(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function X2(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function zG(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=jG(h),m=a[d?f==="floating"?"reference":"floating":f],g=X2(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=X2(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const $Se=Math.min,Om=Math.max;function zz(e,t,n){return Om(e,$Se(t,n))}const vae=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=jG(r),c={x:i,y:s},f=xv(o),d=DC(o),h=BG(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let b=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;b===0&&(b=a.floating[h]);const E=y/2-v/2,w=l[m],x=b-p[h]-l[g],S=b/2-p[h]/2+E,I=zz(w,S,x),C=(d==="start"?l[m]:l[g])>0&&S!==I&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(C?S<w?w-S:x-S:0),data:{[f]:I,centerOffset:S-I}}}}),btt={left:"right",right:"left",bottom:"top",top:"bottom"};function YR(e){return e.replace(/left|right|bottom|top/g,t=>btt[t])}function wtt(e,t,n){n===void 0&&(n=!1);const r=DC(e),i=xv(e),s=BG(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=YR(o)),{main:o,cross:YR(o)}}const Ett={start:"end",end:"start"};function _ae(e){return e.replace(/start|end/g,t=>Ett[t])}const xtt=["top","right","bottom","left"];xtt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const RSe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=Tp(r),g=f||(m===o||!h?[YR(o)]:function(S){const I=YR(S);return[_ae(S),I,_ae(I)]}(o)),y=[o,...g],v=await zG(t,p),_=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:S,cross:I}=wtt(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[S],v[I])}if(b=[...b,{placement:r,overflows:_}],!_.every(S=>S<=0)){var E,w;const S=((E=(w=i.flip)==null?void 0:w.index)!=null?E:0)+1,I=y[S];if(I)return{data:{index:S,overflows:b},reset:{placement:I}};let C="bottom";switch(d){case"bestFit":{var x;const O=(x=b.map(z=>[z,z.overflows.filter(N=>N>0).reduce((N,$)=>N+$,0)]).sort((z,N)=>z[1]-N[1])[0])==null?void 0:x[0].placement;O&&(C=O);break}case"initialPlacement":C=o}if(r!==C)return{reset:{placement:C}}}return{}}}},NSe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=Tp(a),d=DC(a),h=xv(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function DSe(e){return e==="x"?"y":"x"}const UG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await zG(t,u),f=xv(Tp(i)),d=DSe(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=zz(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=zz(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Stt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=xv(i),d=DSe(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const E=f==="y"?"height":"width",w=s.reference[f]-s.floating[E]+g.mainAxis,x=s.reference[f]+s.reference[E]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v,_,b;const E=f==="y"?"width":"height",w=["top","left"].includes(Tp(i)),x=s.reference[d]-s.floating[E]+(w&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[E]+(w?0:(_=(b=o.offset)==null?void 0:b[d])!=null?_:0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[f]:h,[d]:p}}}},Ttt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await zG(t,a),l=Tp(n),c=DC(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=Om(u.left,0),p=Om(u.right,0),m=Om(u.top,0),g=Om(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:Om(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:Om(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},LSe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=X2(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=jG(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(xv(r)==="x"){const w=d[0],x=d[d.length-1],S=Tp(r)==="top",I=w.top,C=x.bottom,O=S?w.left:x.left,z=S?w.right:x.right;return{top:I,bottom:C,left:O,right:z,width:z-O,height:C-I,x:O,y:I}}const g=Tp(r)==="left",y=Om(...d.map(w=>w.right)),v=$Se(...d.map(w=>w.left)),_=d.filter(w=>g?w.left===v:w.right===y),b=_[0].top,E=_[_.length-1].bottom;return{top:b,bottom:E,left:v,right:y,width:y-v,height:E-b,x:v,y:b}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function MSe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Kp(e){if(e==null)return window;if(!MSe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function jg(e){return Kp(e).getComputedStyle(e)}function zg(e){return MSe(e)?"":e?(e.nodeName||"").toLowerCase():""}function FSe(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Ap(e){return e instanceof Kp(e).HTMLElement}function ap(e){return e instanceof Kp(e).Element}function bae(e){return typeof ShadowRoot>"u"?!1:e instanceof Kp(e).ShadowRoot||e instanceof ShadowRoot}function l6(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=jg(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function Att(e){return["table","td","th"].includes(zg(e))}function Uz(e){const t=/firefox/i.test(FSe()),n=jg(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function BSe(){return!/^((?!chrome|android).)*safari/i.test(FSe())}function VG(e){return["html","body","#document"].includes(zg(e))}const wae=Math.min,MT=Math.max,KR=Math.round;function up(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&Ap(e)&&(u=e.offsetWidth>0&&KR(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&KR(a.height)/e.offsetHeight||1);const c=ap(e)?Kp(e):window,f=!BSe()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function _g(e){return(t=e,(t instanceof Kp(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function c6(e){return ap(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function jSe(e){return up(_g(e)).left+c6(e).scrollLeft}function Ctt(e,t,n){const r=Ap(t),i=_g(t),s=up(e,r&&function(u){const l=up(u);return KR(l.width)!==u.offsetWidth||KR(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((zg(t)!=="body"||l6(i))&&(o=c6(t)),Ap(t)){const u=up(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=jSe(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function XR(e){if(zg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(bae(e)?e.host:null)||_g(e);return bae(t)?t.host:t}function Eae(e){return Ap(e)&&jg(e).position!=="fixed"?e.offsetParent:null}function xae(e){const t=Kp(e);let n=Eae(e);for(;n&&Att(n)&&jg(n).position==="static";)n=Eae(n);return n&&(zg(n)==="html"||zg(n)==="body"&&jg(n).position==="static"&&!Uz(n))?t:n||function(r){let i=XR(r);for(;Ap(i)&&!VG(i);){if(Uz(i))return i;i=XR(i)}return null}(e)||t}function Sae(e){if(Ap(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=up(e);return{width:t.width,height:t.height}}function zSe(e){const t=XR(e);return VG(t)?e.ownerDocument.body:Ap(t)&&l6(t)?t:zSe(t)}function lp(e,t){var n;t===void 0&&(t=[]);const r=zSe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=Kp(r),o=i?[s].concat(s.visualViewport||[],l6(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(lp(o))}function Tae(e,t,n){return t==="viewport"?X2(function(r,i){const s=Kp(r),o=_g(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=BSe();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):ap(t)?function(r,i){const s=up(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):X2(function(r){var i;const s=_g(r),o=c6(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=MT(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=MT(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+jSe(r);const f=-o.scrollTop;return jg(a||s).direction==="rtl"&&(c+=MT(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(_g(e)))}const Itt={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=lp(l).filter(h=>ap(h)&&zg(h)!=="body"),f=l,d=null;for(;ap(f)&&!VG(f);){const h=jg(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!Uz(f)?c=c.filter(p=>p!==f):d=h,f=XR(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=Tae(t,c,i);return l.top=MT(f.top,l.top),l.right=wae(f.right,l.right),l.bottom=wae(f.bottom,l.bottom),l.left=MT(f.left,l.left),l},Tae(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Ap(n),s=_g(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((zg(n)!=="body"||l6(s))&&(o=c6(n)),Ap(n))){const u=up(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:ap,getDimensions:Sae,getOffsetParent:xae,getDocumentElement:_g,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:Ctt(t,xae(n),r),floating:{...Sae(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>jg(e).direction==="rtl"};function Ott(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...ap(e)?lp(e):e.contextElement?lp(e.contextElement):[],...lp(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),ap(e)&&!a&&f.observe(e),ap(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?up(e):null;return a&&function h(){const p=up(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const Ptt=(e,t,n)=>_tt(e,t,{platform:Itt,...n});var Vz=typeof document<"u"?A.useLayoutEffect:A.useEffect;function QR(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!QR(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!QR(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ktt(e){const t=A.useRef(e);return Vz(()=>{t.current=e}),t}function $tt(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=A.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=A.useState(t);QR(a,t)||u(t);const l=A.useRef(null),c=A.useRef(null),f=A.useRef(null),d=A.useRef(s),h=ktt(i),p=A.useCallback(()=>{!l.current||!c.current||Ptt(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(b=>{m.current&&!QR(d.current,b)&&(d.current=b,_v.flushSync(()=>{o(b)}))})},[a,n,r]);Vz(()=>{m.current&&p()},[p]);const m=A.useRef(!1);Vz(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=A.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const b=h.current(l.current,c.current,p);f.current=b}else p()},[p,h]),y=A.useCallback(b=>{l.current=b,g()},[g]),v=A.useCallback(b=>{c.current=b,g()},[g]),_=A.useMemo(()=>({reference:l,floating:c}),[]);return A.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const USe=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?vae({element:t.current,padding:n}).fn(i):{}:t?vae({element:t,padding:n}).fn(i):{}}}};var cw=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Rtt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let r9=!1,Ntt=0;const Aae=()=>"floating-ui-"+Ntt++;function Dtt(){const[e,t]=A.useState(()=>r9?Aae():void 0);return cw(()=>{e==null&&t(Aae())},[]),A.useEffect(()=>{r9||(r9=!0)},[]),e}const Cae=A1.useId,Iae=Cae??Dtt,Ltt=A.createContext(null),Mtt=A.createContext(null),VSe=()=>{var e,t;return(e=(t=A.useContext(Ltt))==null?void 0:t.id)!=null?e:null},HG=()=>A.useContext(Mtt);function Bm(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function HSe(e){var t;return(t=Bm(e).defaultView)!=null?t:window}function zy(e){return e?e instanceof HSe(e).Element:!1}function Ftt(e){return e?e instanceof HSe(e).HTMLElement:!1}const Oae=A1.useInsertionEffect;function Btt(e){const t=A.useRef(()=>{});return Oae?Oae(()=>{t.current=e}):t.current=e,A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function qG(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=A.useState(null),c=HG(),f=A.useRef(null),d=A.useRef({}),h=A.useState(()=>Rtt())[0],p=$tt({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=Btt(n),g=A.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=A.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);cw(()=>{const b=c==null?void 0:c.nodesRef.current.find(E=>E.id===a);b&&(b.context=y)});const{reference:v}=p,_=A.useCallback(b=>{(zy(b)||b===null)&&(y.refs.domReference.current=b,l(b)),v(b)},[v,y.refs]);return A.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function i9(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const jtt=function(e){e===void 0&&(e=[]);const t=e,n=A.useCallback(s=>i9(s,e,"reference"),t),r=A.useCallback(s=>i9(s,e,"floating"),t),i=A.useCallback(s=>i9(s,e,"item"),t);return A.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function s9(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function ztt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Pae(e){const t=A.useRef(e);return cw(()=>{t.current=e}),t}function Utt(e){const t=A.useRef();return cw(()=>{t.current=e},[e]),t.current}function Hk(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const Vtt=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=HG(),m=VSe(),g=Pae(i),y=Pae(r),v=Utt(u),_=A.useRef(),b=A.useRef(),E=A.useRef(),w=A.useRef(),x=A.useRef(!0),S=A.useRef(!1),I=A.useCallback(()=>{var N;const $=(N=c.current.openEvent)==null?void 0:N.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[c]);A.useEffect(()=>{if(!n)return;function N(){clearTimeout(b.current),clearTimeout(w.current),x.current=!0}return f.on("dismiss",N),()=>{f.off("dismiss",N)}},[n,f,d]),A.useEffect(()=>{if(!n||!g.current)return;function N(){I()&&l(!1)}const $=Bm(d.floating.current).documentElement;return $.addEventListener("mouseleave",N),()=>{$.removeEventListener("mouseleave",N)}},[d,l,n,g,c,I]);const C=A.useCallback(function(N){N===void 0&&(N=!0);const $=Hk(y.current,"close",_.current);$&&!E.current?(clearTimeout(b.current),b.current=setTimeout(()=>l(!1),$)):N&&(clearTimeout(b.current),l(!1))},[y,l]),O=A.useCallback(()=>{E.current&&(Bm(d.floating.current).removeEventListener("pointermove",E.current),E.current=void 0)},[d]),z=A.useCallback(()=>{Bm(d.floating.current).body.style.pointerEvents="",S.current=!1},[d]);return A.useEffect(()=>{if(!n)return;function N(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function $(G){if(clearTimeout(b.current),x.current=!1,s&&_.current!=="mouse"||o>0&&Hk(y.current,"open")===0)return;c.current.openEvent=G;const U=Hk(y.current,"open",_.current);U?b.current=setTimeout(()=>{l(!0)},U):l(!0)}function D(G){if(N())return;const U=Bm(d.floating.current);if(clearTimeout(w.current),g.current){clearTimeout(b.current),E.current&&U.removeEventListener("pointermove",E.current),E.current=g.current({...e,tree:p,x:G.clientX,y:G.clientY,onClose(){z(),O(),C()}}),U.addEventListener("pointermove",E.current);return}C()}function B(G){N()||g.current==null||g.current({...e,tree:p,x:G.clientX,y:G.clientY,leave:!0,onClose(){z(),O(),C()}})(G)}const V=d.floating.current,j=d.domReference.current;if(zy(j))return u&&j.addEventListener("mouseleave",B),V==null||V.addEventListener("mouseleave",B),a&&j.addEventListener("mousemove",$,{once:!0}),j.addEventListener("mouseenter",$),j.addEventListener("mouseleave",D),()=>{u&&j.removeEventListener("mouseleave",B),V==null||V.removeEventListener("mouseleave",B),a&&j.removeEventListener("mousemove",$),j.removeEventListener("mouseenter",$),j.removeEventListener("mouseleave",D)}},[h.domReference,n,e,s,o,a,C,O,z,l,u,p,d,y,g,c]),cw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&I()){Bm(d.floating.current).body.style.pointerEvents="none",S.current=!0;const D=d.domReference.current,B=d.floating.current;if(zy(D)&&B){var N,$;const V=p==null||(N=p.nodesRef.current.find(j=>j.id===m))==null||($=N.context)==null?void 0:$.refs.floating.current;return V&&(V.style.pointerEvents=""),D.style.pointerEvents="auto",B.style.pointerEvents="auto",()=>{D.style.pointerEvents="",B.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,I]),cw(()=>{v&&!u&&(_.current=void 0,O(),z())}),A.useEffect(()=>()=>{O(),clearTimeout(b.current),clearTimeout(w.current),S.current&&z()},[n,O,z]),A.useMemo(()=>{if(!n)return{};function N($){_.current=$.pointerType}return{reference:{onPointerDown:N,onPointerEnter:N,onMouseMove(){u||o===0||(clearTimeout(w.current),w.current=setTimeout(()=>{x.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(){C(!1)}}}},[n,o,u,l,C])},qSe=A.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),WSe=()=>A.useContext(qSe),Htt=e=>{let{children:t,delay:n}=e;const[r,i]=A.useState({delay:n,initialDelay:n,currentId:null}),s=A.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return A.createElement(qSe.Provider,{value:A.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},qtt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=WSe();A.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:Hk(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),A.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},Wtt=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=Iae(),o=Iae();return A.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function o9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const Gtt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Ytt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ktt=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=HG(),g=VSe()!=null,y=A.useRef(!1);return A.useEffect(()=>{if(!n||!a)return;function v(x){if(x.key==="Escape"){if(!p&&m&&s9(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(x){const S=y.current;if(y.current=!1,S)return;const I=ztt(x);if(zy(I)&&i.floating.current){var C;const z=(C=i.floating.current.ownerDocument.defaultView)!=null?C:window,N=I.scrollWidth>I.clientWidth,$=I.scrollHeight>I.clientHeight;let D=$&&x.offsetX>I.clientWidth;if($&&z.getComputedStyle(I).direction==="rtl"&&(D=x.offsetX<=I.offsetWidth-I.clientWidth),D||N&&x.offsetY>I.clientHeight)return}const O=m&&s9(m.nodesRef.current,o).some(z=>{var N;return o9(x,(N=z.context)==null?void 0:N.refs.floating.current)});o9(x,i.floating.current)||o9(x,i.domReference.current)||O||!p&&m&&s9(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function b(){r(!1)}const E=Bm(i.floating.current);u&&E.addEventListener("keydown",v),l&&E.addEventListener(c,_);let w=[];return h&&(zy(i.domReference.current)&&(w=lp(i.domReference.current)),zy(i.floating.current)&&(w=w.concat(lp(i.floating.current))),!zy(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(w=w.concat(lp(i.reference.current.contextElement)))),w=w.filter(x=>{var S;return x!==((S=E.defaultView)==null?void 0:S.visualViewport)}),w.forEach(x=>{x.addEventListener("scroll",b,{passive:!0})}),()=>{u&&E.removeEventListener("keydown",v),l&&E.removeEventListener(c,_),w.forEach(x=>{x.removeEventListener("scroll",b)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),A.useEffect(()=>{y.current=!1},[l,c]),A.useMemo(()=>a?{reference:{[Gtt[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[Ytt[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},Xtt=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=A.useRef(""),c=A.useRef(!1),f=A.useRef();return A.useEffect(()=>{var d;if(!a)return;const p=(d=Bm(s.floating.current).defaultView)!=null?d:window;function m(){!n&&Ftt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),A.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),A.useEffect(()=>()=>{clearTimeout(f.current)},[]),A.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function GSe({opened:e,floating:t,positionDependencies:n}){const[r,i]=A.useState(0);A.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Ott(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),_s(()=>{t.update()},n),_s(()=>{i(s=>s+1)},[e])}function Qtt(e){const t=[NSe(e.offset)];return e.middlewares.shift&&t.push(UG({limiter:Stt()})),e.middlewares.flip&&t.push(RSe()),e.middlewares.inline&&t.push(LSe()),t.push(USe({element:e.arrowRef})),t}function Jtt(e){const[t,n]=Aa({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=qG({placement:e.position,middleware:[...Qtt(e),...e.width==="target"?[Ttt({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return GSe({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),_s(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const YSe={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Ztt,KSe]=SEe(YSe.context);var ent=Object.defineProperty,tnt=Object.defineProperties,nnt=Object.getOwnPropertyDescriptors,JR=Object.getOwnPropertySymbols,XSe=Object.prototype.hasOwnProperty,QSe=Object.prototype.propertyIsEnumerable,kae=(e,t,n)=>t in e?ent(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XO=(e,t)=>{for(var n in t||(t={}))XSe.call(t,n)&&kae(e,n,t[n]);if(JR)for(var n of JR(t))QSe.call(t,n)&&kae(e,n,t[n]);return e},rnt=(e,t)=>tnt(e,nnt(t)),int=(e,t)=>{var n={};for(var r in e)XSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JR)for(var r of JR(e))t.indexOf(r)<0&&QSe.call(e,r)&&(n[r]=e[r]);return n};const JSe=A.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=int(n,["children","refProp","popupType"]);if(!IC(r))throw new Error(YSe.children);const a=o,u=KSe(),l=Ts(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return A.cloneElement(r,XO(rnt(XO(XO(XO({},a),c),u.targetProps),{className:CEe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});JSe.displayName="@mantine/core/PopoverTarget";var snt=ht((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const ont=snt;var ant=Object.defineProperty,$ae=Object.getOwnPropertySymbols,unt=Object.prototype.hasOwnProperty,lnt=Object.prototype.propertyIsEnumerable,Rae=(e,t,n)=>t in e?ant(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i_=(e,t)=>{for(var n in t||(t={}))unt.call(t,n)&&Rae(e,n,t[n]);if($ae)for(var n of $ae(t))lnt.call(t,n)&&Rae(e,n,t[n]);return e};const Nae={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function ZSe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in VO?i_(i_(i_({transitionProperty:VO[e].transitionProperty},i),VO[e].common),VO[e][Nae[t]]):null:i_(i_(i_({transitionProperty:e.transitionProperty},i),e.common),e[Nae[t]])}function eTe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=as(),l=r6(),c=u.respectReducedMotion?l:!1,[f,d]=A.useState(r?"entered":"exited");let h=c?0:e;const p=A.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return _s(()=>{m(r)},[r]),A.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function LC({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=eTe({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?L.createElement(L.Fragment,null,i({})):null:f==="exited"?null:L.createElement(L.Fragment,null,i(ZSe({transition:e,duration:c,state:f,timingFunction:d})))}LC.displayName="@mantine/core/Transition";function tTe({children:e,active:t=!0,refProp:n="ref"}){const r=ixe(t),i=Ts(r,e==null?void 0:e.ref);return IC(e)?A.cloneElement(e,{[n]:i}):e}tTe.displayName="@mantine/core/FocusTrap";var cnt=Object.defineProperty,fnt=Object.defineProperties,dnt=Object.getOwnPropertyDescriptors,Dae=Object.getOwnPropertySymbols,hnt=Object.prototype.hasOwnProperty,pnt=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?cnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hm=(e,t)=>{for(var n in t||(t={}))hnt.call(t,n)&&Lae(e,n,t[n]);if(Dae)for(var n of Dae(t))pnt.call(t,n)&&Lae(e,n,t[n]);return e},QO=(e,t)=>fnt(e,dnt(t));function Mae(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Fae(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const mnt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function gnt({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[mnt[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?QO(hm(hm({},c),Mae(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?QO(hm(hm({},c),Mae(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?QO(hm(hm({},c),Fae(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?QO(hm(hm({},c),Fae(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var ynt=Object.defineProperty,vnt=Object.defineProperties,_nt=Object.getOwnPropertyDescriptors,ZR=Object.getOwnPropertySymbols,nTe=Object.prototype.hasOwnProperty,rTe=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?ynt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bnt=(e,t)=>{for(var n in t||(t={}))nTe.call(t,n)&&Bae(e,n,t[n]);if(ZR)for(var n of ZR(t))rTe.call(t,n)&&Bae(e,n,t[n]);return e},wnt=(e,t)=>vnt(e,_nt(t)),Ent=(e,t)=>{var n={};for(var r in e)nTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZR)for(var r of ZR(e))t.indexOf(r)<0&&rTe.call(e,r)&&(n[r]=e[r]);return n};const WG=A.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=Ent(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=as();return u?L.createElement("div",wnt(bnt({},f),{ref:t,style:gnt({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});WG.displayName="@mantine/core/FloatingArrow";var xnt=Object.defineProperty,Snt=Object.defineProperties,Tnt=Object.getOwnPropertyDescriptors,eN=Object.getOwnPropertySymbols,iTe=Object.prototype.hasOwnProperty,sTe=Object.prototype.propertyIsEnumerable,jae=(e,t,n)=>t in e?xnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JO=(e,t)=>{for(var n in t||(t={}))iTe.call(t,n)&&jae(e,n,t[n]);if(eN)for(var n of eN(t))sTe.call(t,n)&&jae(e,n,t[n]);return e},zae=(e,t)=>Snt(e,Tnt(t)),Ant=(e,t)=>{var n={};for(var r in e)iTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eN)for(var r of eN(e))t.indexOf(r)<0&&sTe.call(e,r)&&(n[r]=e[r]);return n};function oTe(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=Ant(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=kC(),f=KSe(),{classes:d,cx:h}=ont({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=exe({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:L.createElement($C,{withinPortal:f.withinPortal},L.createElement(LC,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return L.createElement(tTe,{active:f.trapFocus},L.createElement(At,JO(zae(JO({},m),{tabIndex:-1,ref:f.floating,style:zae(JO(JO({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:cYe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,L.createElement(WG,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}oTe.displayName="@mantine/core/PopoverDropdown";function aTe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var Uae=Object.getOwnPropertySymbols,Cnt=Object.prototype.hasOwnProperty,Int=Object.prototype.propertyIsEnumerable,Ont=(e,t)=>{var n={};for(var r in e)Cnt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Uae)for(var r of Uae(e))t.indexOf(r)<0&&Int.call(e,r)&&(n[r]=e[r]);return n};const Pnt={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Au("popover"),__staticSelector:"Popover",width:"max-content"};function Vi(e){var t,n,r,i,s,o;const a=A.useRef(null),u=Ct("Popover",Pnt,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,unstyled:x,classNames:S,styles:I,closeOnClickOutside:C,withinPortal:O,closeOnEscape:z,clickOutsideEvents:N,trapFocus:$,onClose:D,onOpen:B,onChange:V,zIndex:j,radius:G,shadow:U,id:P,defaultOpened:k,exitTransitionDuration:H,__staticSelector:M,withRoles:F,disabled:J,returnFocus:se}=u,ae=Ont(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ce,le]=A.useState(null),[ge,ue]=A.useState(null),Fe=vl(P),ke=as(),Ge=Jtt({middlewares:v,width:y,position:aTe(ke.dir,c),offset:f+(_?b/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:k,onChange:V,onOpen:B,onClose:D});lXe(()=>C&&Ge.onClose(),N,[ce,ge]);const Re=A.useCallback(Le=>{le(Le),Ge.floating.reference(Le)},[Ge.floating.reference]),Oe=A.useCallback(Le=>{ue(Le),Ge.floating.floating(Le)},[Ge.floating.floating]);return L.createElement(QEe,{classNames:S,styles:I,unstyled:x,staticSelector:M},L.createElement(Ztt,{value:{returnFocus:se,disabled:J,controlled:Ge.controlled,reference:Re,floating:Oe,x:Ge.floating.x,y:Ge.floating.y,arrowX:(r=(n=(t=Ge.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ge.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ge.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:H,width:y,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,placement:Ge.floating.placement,trapFocus:$,withinPortal:O,zIndex:j,radius:G,shadow:U,closeOnEscape:z,onClose:Ge.onClose,onToggle:Ge.onToggle,getTargetId:()=>`${Fe}-target`,getDropdownId:()=>`${Fe}-dropdown`,withRoles:F,targetProps:ae}},l))}Vi.Target=JSe;Vi.Dropdown=oTe;Vi.displayName="@mantine/core/Popover";var knt=Object.defineProperty,tN=Object.getOwnPropertySymbols,uTe=Object.prototype.hasOwnProperty,lTe=Object.prototype.propertyIsEnumerable,Vae=(e,t,n)=>t in e?knt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$nt=(e,t)=>{for(var n in t||(t={}))uTe.call(t,n)&&Vae(e,n,t[n]);if(tN)for(var n of tN(t))lTe.call(t,n)&&Vae(e,n,t[n]);return e},Rnt=(e,t)=>{var n={};for(var r in e)uTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tN)for(var r of tN(e))t.indexOf(r)<0&&lTe.call(e,r)&&(n[r]=e[r]);return n};function Nnt(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=Rnt(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=vtt(null,{name:u,styles:l,classNames:c,unstyled:f});return L.createElement(Vi.Dropdown,$nt({p:0,onMouseDown:p=>p.preventDefault()},d),L.createElement("div",{style:{maxHeight:i,display:"flex"}},L.createElement(At,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==u6?"auto":void 0},"data-combobox-popover":!0,ref:a},L.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function bg({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return L.createElement(Vi,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}bg.Target=Vi.Target;bg.Dropdown=Nnt;var Dnt=Object.defineProperty,Lnt=Object.defineProperties,Mnt=Object.getOwnPropertyDescriptors,nN=Object.getOwnPropertySymbols,cTe=Object.prototype.hasOwnProperty,fTe=Object.prototype.propertyIsEnumerable,Hae=(e,t,n)=>t in e?Dnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a9=(e,t)=>{for(var n in t||(t={}))cTe.call(t,n)&&Hae(e,n,t[n]);if(nN)for(var n of nN(t))fTe.call(t,n)&&Hae(e,n,t[n]);return e},Fnt=(e,t)=>Lnt(e,Mnt(t)),Bnt=(e,t)=>{var n={};for(var r in e)cTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nN)for(var r of nN(e))t.indexOf(r)<0&&fTe.call(e,r)&&(n[r]=e[r]);return n};function dTe(e,t,n){const r=Ct(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x}=r,S=Bnt(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),I=vl(v),{systemStyles:C,rest:O}=wf(S);return Fnt(a9({},O),{classNames:u,styles:l,unstyled:f,wrapperProps:a9(a9({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:I,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x},y),C),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:I,size:_,__staticSelector:d,invalid:!!o}})}var jnt=ht((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const znt=jnt;var Unt=Object.defineProperty,rN=Object.getOwnPropertySymbols,hTe=Object.prototype.hasOwnProperty,pTe=Object.prototype.propertyIsEnumerable,qae=(e,t,n)=>t in e?Unt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vnt=(e,t)=>{for(var n in t||(t={}))hTe.call(t,n)&&qae(e,n,t[n]);if(rN)for(var n of rN(t))pTe.call(t,n)&&qae(e,n,t[n]);return e},Hnt=(e,t)=>{var n={};for(var r in e)hTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rN)for(var r of rN(e))t.indexOf(r)<0&&pTe.call(e,r)&&(n[r]=e[r]);return n};const GG=A.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=Hnt(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=znt({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return L.createElement(At,Vnt({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&L.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});GG.displayName="@mantine/core/InputLabel";var qnt=ht((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const Wnt=qnt;var Gnt=Object.defineProperty,iN=Object.getOwnPropertySymbols,mTe=Object.prototype.hasOwnProperty,gTe=Object.prototype.propertyIsEnumerable,Wae=(e,t,n)=>t in e?Gnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ynt=(e,t)=>{for(var n in t||(t={}))mTe.call(t,n)&&Wae(e,n,t[n]);if(iN)for(var n of iN(t))gTe.call(t,n)&&Wae(e,n,t[n]);return e},Knt=(e,t)=>{var n={};for(var r in e)mTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iN)for(var r of iN(e))t.indexOf(r)<0&&gTe.call(e,r)&&(n[r]=e[r]);return n};const YG=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=Knt(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=Wnt({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return L.createElement(Ot,Ynt({className:d(f.error,i),ref:t,role:"alert"},c),r)});YG.displayName="@mantine/core/InputError";var Xnt=ht((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const Qnt=Xnt;var Jnt=Object.defineProperty,sN=Object.getOwnPropertySymbols,yTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,Gae=(e,t,n)=>t in e?Jnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Znt=(e,t)=>{for(var n in t||(t={}))yTe.call(t,n)&&Gae(e,n,t[n]);if(sN)for(var n of sN(t))vTe.call(t,n)&&Gae(e,n,t[n]);return e},ert=(e,t)=>{var n={};for(var r in e)yTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sN)for(var r of sN(e))t.indexOf(r)<0&&vTe.call(e,r)&&(n[r]=e[r]);return n};const KG=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=ert(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=Qnt({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return L.createElement(Ot,Znt({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});KG.displayName="@mantine/core/InputDescription";const _Te=A.createContext({offsetBottom:!1,offsetTop:!1}),trt=_Te.Provider,nrt=()=>A.useContext(_Te);function rrt(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var irt=Object.defineProperty,srt=Object.defineProperties,ort=Object.getOwnPropertyDescriptors,Yae=Object.getOwnPropertySymbols,art=Object.prototype.hasOwnProperty,urt=Object.prototype.propertyIsEnumerable,Kae=(e,t,n)=>t in e?irt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lrt=(e,t)=>{for(var n in t||(t={}))art.call(t,n)&&Kae(e,n,t[n]);if(Yae)for(var n of Yae(t))urt.call(t,n)&&Kae(e,n,t[n]);return e},crt=(e,t)=>srt(e,ort(t)),frt=ht(e=>({root:crt(lrt({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const drt=frt;var hrt=Object.defineProperty,prt=Object.defineProperties,mrt=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,bTe=Object.prototype.hasOwnProperty,wTe=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?hrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z0=(e,t)=>{for(var n in t||(t={}))bTe.call(t,n)&&Xae(e,n,t[n]);if(oN)for(var n of oN(t))wTe.call(t,n)&&Xae(e,n,t[n]);return e},Qae=(e,t)=>prt(e,mrt(t)),grt=(e,t)=>{var n={};for(var r in e)bTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oN)for(var r of oN(e))t.indexOf(r)<0&&wTe.call(e,r)&&(n[r]=e[r]);return n};const yrt={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},ETe=A.forwardRef((e,t)=>{const n=Ct("InputWrapper",yrt,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:b,withAsterisk:E}=n,w=grt(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:x,cx:S}=drt(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),I={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},C=typeof E=="boolean"?E:o,O=i&&L.createElement(GG,Z0(Z0({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:C},I),f),i),z=l&&L.createElement(KG,Qae(Z0(Z0({key:"description"},d),I),{size:(d==null?void 0:d.size)||I.size}),l),N=L.createElement(A.Fragment,{key:"input"},y(s)),$=typeof u!="boolean"&&u&&L.createElement(YG,Qae(Z0(Z0({},h),I),{size:(h==null?void 0:h.size)||I.size,key:"error"}),u),D=b.map(B=>{switch(B){case"label":return O;case"input":return N;case"description":return z;case"error":return $;default:return null}});return L.createElement(trt,{value:rrt(b,{hasDescription:!!z,hasError:!!$})},L.createElement(At,Z0({className:S(x.root,r),ref:t},w),D))});ETe.displayName="@mantine/core/InputWrapper";var vrt=Object.defineProperty,_rt=Object.defineProperties,brt=Object.getOwnPropertyDescriptors,Jae=Object.getOwnPropertySymbols,wrt=Object.prototype.hasOwnProperty,Ert=Object.prototype.propertyIsEnumerable,Zae=(e,t,n)=>t in e?vrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u9=(e,t)=>{for(var n in t||(t={}))wrt.call(t,n)&&Zae(e,n,t[n]);if(Jae)for(var n of Jae(t))Ert.call(t,n)&&Zae(e,n,t[n]);return e},eue=(e,t)=>_rt(e,brt(t));const Mo={xs:30,sm:36,md:42,lg:50,xl:60};function xrt({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Srt=ht((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:Mo}),paddingLeft:e.fn.size({size:t,sizes:Mo})/3,paddingRight:a?o:e.fn.size({size:t,sizes:Mo})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:u9(eue(u9(eue(u9({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:Mo}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:Mo})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),xrt({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:Mo})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:Mo}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}});const Trt=Srt;var Art=Object.defineProperty,Crt=Object.defineProperties,Irt=Object.getOwnPropertyDescriptors,aN=Object.getOwnPropertySymbols,xTe=Object.prototype.hasOwnProperty,STe=Object.prototype.propertyIsEnumerable,tue=(e,t,n)=>t in e?Art(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZO=(e,t)=>{for(var n in t||(t={}))xTe.call(t,n)&&tue(e,n,t[n]);if(aN)for(var n of aN(t))STe.call(t,n)&&tue(e,n,t[n]);return e},nue=(e,t)=>Crt(e,Irt(t)),Ort=(e,t)=>{var n={};for(var r in e)xTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aN)for(var r of aN(e))t.indexOf(r)<0&&STe.call(e,r)&&(n[r]=e[r]);return n};const Prt={rightSectionWidth:36,size:"sm",variant:"default"},SE=A.forwardRef((e,t)=>{const n=Ct("Input",Prt,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:b,sx:E,unstyled:w,pointer:x}=n,S=Ort(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:I,offsetTop:C}=nrt(),{classes:O,cx:z}=Trt({radius:p,size:m,multiline:b,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:I,offsetTop:C,pointer:x},{classNames:y,styles:v,name:["Input",_],unstyled:w}),{systemStyles:N,rest:$}=wf(S);return L.createElement(At,ZO(ZO({className:z(O.wrapper,r),sx:E,style:l},N),g),u&&L.createElement("div",{className:O.icon},u),L.createElement(At,nue(ZO({component:"input"},$),{ref:t,required:s,"aria-invalid":i,disabled:o,className:z(O[`${a}Variant`],O.input,{[O.withIcon]:u,[O.invalid]:i,[O.disabled]:o})})),d&&L.createElement("div",nue(ZO({},h),{className:O.rightSection}),d))});SE.displayName="@mantine/core/Input";SE.Wrapper=ETe;SE.Label=GG;SE.Description=KG;SE.Error=YG;const is=SE;var krt=Object.defineProperty,$rt=Object.defineProperties,Rrt=Object.getOwnPropertyDescriptors,rue=Object.getOwnPropertySymbols,Nrt=Object.prototype.hasOwnProperty,Drt=Object.prototype.propertyIsEnumerable,iue=(e,t,n)=>t in e?krt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l9=(e,t)=>{for(var n in t||(t={}))Nrt.call(t,n)&&iue(e,n,t[n]);if(rue)for(var n of rue(t))Drt.call(t,n)&&iue(e,n,t[n]);return e},Lrt=(e,t)=>$rt(e,Rrt(t));const c9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Mrt={xs:4,sm:4,md:6,lg:8,xl:10};function Frt({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:Mrt});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var Brt=ht((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in c9?c9[n]:c9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:l9(Lrt(l9(l9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),Frt({theme:e,variant:o,color:t,size:n,gradient:i}))}});const jrt=Brt;var zrt=Object.defineProperty,uN=Object.getOwnPropertySymbols,TTe=Object.prototype.hasOwnProperty,ATe=Object.prototype.propertyIsEnumerable,sue=(e,t,n)=>t in e?zrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Urt=(e,t)=>{for(var n in t||(t={}))TTe.call(t,n)&&sue(e,n,t[n]);if(uN)for(var n of uN(t))ATe.call(t,n)&&sue(e,n,t[n]);return e},Vrt=(e,t)=>{var n={};for(var r in e)TTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uN)for(var r of uN(e))t.indexOf(r)<0&&ATe.call(e,r)&&(n[r]=e[r]);return n};const Hrt={variant:"light",size:"md",radius:"xl"},CTe=A.forwardRef((e,t)=>{const n=Ct("Badge",Hrt,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=Vrt(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=jrt({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return L.createElement(At,Urt({className:v(y.root,r),ref:t},g),l&&L.createElement("span",{className:y.leftSection},l),L.createElement("span",{className:y.inner},a),c&&L.createElement("span",{className:y.rightSection},c))});CTe.displayName="@mantine/core/Badge";const xb=CTe;var qrt=ht((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const Wrt=qrt;var Grt=Object.defineProperty,lN=Object.getOwnPropertySymbols,ITe=Object.prototype.hasOwnProperty,OTe=Object.prototype.propertyIsEnumerable,oue=(e,t,n)=>t in e?Grt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yrt=(e,t)=>{for(var n in t||(t={}))ITe.call(t,n)&&oue(e,n,t[n]);if(lN)for(var n of lN(t))OTe.call(t,n)&&oue(e,n,t[n]);return e},Krt=(e,t)=>{var n={};for(var r in e)ITe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lN)for(var r of lN(e))t.indexOf(r)<0&&OTe.call(e,r)&&(n[r]=e[r]);return n};const Xrt={orientation:"horizontal",buttonBorderWidth:1},PTe=A.forwardRef((e,t)=>{const n=Ct("ButtonGroup",Xrt,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=Krt(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=Wrt({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return L.createElement(At,Yrt({className:l(u.root,r),ref:t},a))});PTe.displayName="@mantine/core/ButtonGroup";var Qrt=Object.defineProperty,Jrt=Object.defineProperties,Zrt=Object.getOwnPropertyDescriptors,aue=Object.getOwnPropertySymbols,eit=Object.prototype.hasOwnProperty,tit=Object.prototype.propertyIsEnumerable,uue=(e,t,n)=>t in e?Qrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ty=(e,t)=>{for(var n in t||(t={}))eit.call(t,n)&&uue(e,n,t[n]);if(aue)for(var n of aue(t))tit.call(t,n)&&uue(e,n,t[n]);return e},Hz=(e,t)=>Jrt(e,Zrt(t));const qz={xs:{height:Mo.xs,paddingLeft:14,paddingRight:14},sm:{height:Mo.sm,paddingLeft:18,paddingRight:18},md:{height:Mo.md,paddingLeft:22,paddingRight:22},lg:{height:Mo.lg,paddingLeft:26,paddingRight:26},xl:{height:Mo.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function nit({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return qz[`compact-${t}`];const i=qz[t];return Hz(Ty({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const rit=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function iit({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Ty({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var sit=ht((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:Hz(Ty(Hz(Ty(Ty(Ty(Ty({},nit({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),rit(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),iit({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const oit=sit;var ait=Object.defineProperty,cN=Object.getOwnPropertySymbols,kTe=Object.prototype.hasOwnProperty,$Te=Object.prototype.propertyIsEnumerable,lue=(e,t,n)=>t in e?ait(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cue=(e,t)=>{for(var n in t||(t={}))kTe.call(t,n)&&lue(e,n,t[n]);if(cN)for(var n of cN(t))$Te.call(t,n)&&lue(e,n,t[n]);return e},uit=(e,t)=>{var n={};for(var r in e)kTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cN)for(var r of cN(e))t.indexOf(r)<0&&$Te.call(e,r)&&(n[r]=e[r]);return n};const lit={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},XG=A.forwardRef((e,t)=>{const n=Ct("Button",lit,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:b,styles:E,unstyled:w}=n,x=uit(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:S,cx:I,theme:C}=oit({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:w,classNames:b,styles:E}),O=C.fn.variant({color:s,variant:d}),z=L.createElement(C0,cue({color:O.color,size:C.fn.size({size:i,sizes:qz}).height/2},v));return L.createElement(Bg,cue({className:I(S.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:w},x),L.createElement("div",{className:S.inner},(l||g&&y==="left")&&L.createElement("span",{className:I(S.icon,S.leftIcon)},g&&y==="left"?z:l),g&&y==="center"&&L.createElement("span",{className:S.centerLoader},z),L.createElement("span",{className:S.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&L.createElement("span",{className:I(S.icon,S.rightIcon)},g&&y==="right"?z:c)))});XG.displayName="@mantine/core/Button";XG.Group=PTe;const wa=XG;var cit=ht((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}}));const fit=cit;var dit=Object.defineProperty,fN=Object.getOwnPropertySymbols,RTe=Object.prototype.hasOwnProperty,NTe=Object.prototype.propertyIsEnumerable,fue=(e,t,n)=>t in e?dit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hit=(e,t)=>{for(var n in t||(t={}))RTe.call(t,n)&&fue(e,n,t[n]);if(fN)for(var n of fN(t))NTe.call(t,n)&&fue(e,n,t[n]);return e},pit=(e,t)=>{var n={};for(var r in e)RTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fN)for(var r of fN(e))t.indexOf(r)<0&&NTe.call(e,r)&&(n[r]=e[r]);return n};const mit={},DTe=A.forwardRef((e,t)=>{const n=Ct("Paper",mit,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=pit(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=fit({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return L.createElement(At,hit({className:f(c.root,r),ref:t},l),i)});DTe.displayName="@mantine/core/Paper";const LTe=DTe,MTe=A.createContext({padding:0}),git=MTe.Provider,yit=()=>A.useContext(MTe).padding;var vit=ht((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const _it=vit;var bit=Object.defineProperty,dN=Object.getOwnPropertySymbols,FTe=Object.prototype.hasOwnProperty,BTe=Object.prototype.propertyIsEnumerable,due=(e,t,n)=>t in e?bit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wit=(e,t)=>{for(var n in t||(t={}))FTe.call(t,n)&&due(e,n,t[n]);if(dN)for(var n of dN(t))BTe.call(t,n)&&due(e,n,t[n]);return e},Eit=(e,t)=>{var n={};for(var r in e)FTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dN)for(var r of dN(e))t.indexOf(r)<0&&BTe.call(e,r)&&(n[r]=e[r]);return n};const jTe=A.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=Eit(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=_it({padding:yit(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return L.createElement(At,wit({className:l(u.cardSection,r),ref:t},a))});jTe.displayName="@mantine/core/CardSection";const zTe=jTe;var xit=ht(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}}));const Sit=xit;var Tit=Object.defineProperty,hN=Object.getOwnPropertySymbols,UTe=Object.prototype.hasOwnProperty,VTe=Object.prototype.propertyIsEnumerable,hue=(e,t,n)=>t in e?Tit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ait=(e,t)=>{for(var n in t||(t={}))UTe.call(t,n)&&hue(e,n,t[n]);if(hN)for(var n of hN(t))VTe.call(t,n)&&hue(e,n,t[n]);return e},Cit=(e,t)=>{var n={};for(var r in e)UTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hN)for(var r of hN(e))t.indexOf(r)<0&&VTe.call(e,r)&&(n[r]=e[r]);return n};const Iit={p:"md"},QG=A.forwardRef((e,t)=>{const n=Ct("Card",Iit,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=Cit(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Sit(null,{name:"Card",unstyled:a}),f=A.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===zTe?A.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return L.createElement(git,{value:{padding:i}},L.createElement(LTe,Ait({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});QG.Section=zTe;QG.displayName="@mantine/core/Card";const JG=QG;var Oit=Object.defineProperty,pN=Object.getOwnPropertySymbols,HTe=Object.prototype.hasOwnProperty,qTe=Object.prototype.propertyIsEnumerable,pue=(e,t,n)=>t in e?Oit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pit=(e,t)=>{for(var n in t||(t={}))HTe.call(t,n)&&pue(e,n,t[n]);if(pN)for(var n of pN(t))qTe.call(t,n)&&pue(e,n,t[n]);return e},kit=(e,t)=>{var n={};for(var r in e)HTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&qTe.call(e,r)&&(n[r]=e[r]);return n};const WTe=A.forwardRef((e,t)=>{const n=Ct("Center",{},e),{inline:r,sx:i}=n,s=kit(n,["inline","sx"]);return L.createElement(At,Pit({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...$1(i)]},s))});WTe.displayName="@mantine/core/Center";const Ug=WTe,GTe=A.createContext(null),$it=GTe.Provider,Rit=()=>A.useContext(GTe);function Nit(e){return A.Children.toArray(e).filter(Boolean)}const Dit={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var Lit=ht((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:Dit[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const Mit=Lit;var Fit=Object.defineProperty,mN=Object.getOwnPropertySymbols,YTe=Object.prototype.hasOwnProperty,KTe=Object.prototype.propertyIsEnumerable,mue=(e,t,n)=>t in e?Fit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bit=(e,t)=>{for(var n in t||(t={}))YTe.call(t,n)&&mue(e,n,t[n]);if(mN)for(var n of mN(t))KTe.call(t,n)&&mue(e,n,t[n]);return e},jit=(e,t)=>{var n={};for(var r in e)YTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&KTe.call(e,r)&&(n[r]=e[r]);return n};const zit={position:"left",spacing:"md"},Jl=A.forwardRef((e,t)=>{const n=Ct("Group",zit,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=jit(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=Nit(o),{classes:h,cx:p}=Mit({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return L.createElement(At,Bit({className:p(h.root,r),ref:t},f),d)});Jl.displayName="@mantine/core/Group";var Uit=ht((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}}));const Vit=Uit;var Hit=Object.defineProperty,gN=Object.getOwnPropertySymbols,XTe=Object.prototype.hasOwnProperty,QTe=Object.prototype.propertyIsEnumerable,gue=(e,t,n)=>t in e?Hit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qit=(e,t)=>{for(var n in t||(t={}))XTe.call(t,n)&&gue(e,n,t[n]);if(gN)for(var n of gN(t))QTe.call(t,n)&&gue(e,n,t[n]);return e},Wit=(e,t)=>{var n={};for(var r in e)XTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&QTe.call(e,r)&&(n[r]=e[r]);return n};const Git={spacing:"md",align:"stretch",justify:"top"},Qm=A.forwardRef((e,t)=>{const n=Ct("Stack",Git,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=Wit(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=Vit({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return L.createElement(At,qit({className:c(l.root,i),ref:t},u))});Qm.displayName="@mantine/core/Stack";function JTe({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?L.createElement(Jl,{pt:t,spacing:e,role:i,unstyled:s},r):L.createElement(Qm,{pt:t,spacing:e,role:i,unstyled:s},r)}var Yit=Object.defineProperty,yN=Object.getOwnPropertySymbols,ZTe=Object.prototype.hasOwnProperty,e2e=Object.prototype.propertyIsEnumerable,yue=(e,t,n)=>t in e?Yit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vue=(e,t)=>{for(var n in t||(t={}))ZTe.call(t,n)&&yue(e,n,t[n]);if(yN)for(var n of yN(t))e2e.call(t,n)&&yue(e,n,t[n]);return e},Kit=(e,t)=>{var n={};for(var r in e)ZTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&e2e.call(e,r)&&(n[r]=e[r]);return n};const Xit={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},t2e=A.forwardRef((e,t)=>{const n=Ct("CheckboxGroup",Xit,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=Kit(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=Aa({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return L.createElement($it,{value:{value:h,onChange:m,size:l}},L.createElement(is.Wrapper,vue(vue({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),L.createElement(JTe,{spacing:u,orientation:a,offset:f},r)))});t2e.displayName="@mantine/core/CheckboxGroup";var Qit=Object.defineProperty,vN=Object.getOwnPropertySymbols,n2e=Object.prototype.hasOwnProperty,r2e=Object.prototype.propertyIsEnumerable,_ue=(e,t,n)=>t in e?Qit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wz=(e,t)=>{for(var n in t||(t={}))n2e.call(t,n)&&_ue(e,n,t[n]);if(vN)for(var n of vN(t))r2e.call(t,n)&&_ue(e,n,t[n]);return e},Jit=(e,t)=>{var n={};for(var r in e)n2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&r2e.call(e,r)&&(n[r]=e[r]);return n};function Zit(e){return L.createElement("svg",Wz({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function est(e){var t=e,{indeterminate:n}=t,r=Jit(t,["indeterminate"]);return n?L.createElement("svg",Wz({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),L.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):L.createElement(Zit,Wz({},r))}var tst=Object.defineProperty,nst=Object.defineProperties,rst=Object.getOwnPropertyDescriptors,bue=Object.getOwnPropertySymbols,ist=Object.prototype.hasOwnProperty,sst=Object.prototype.propertyIsEnumerable,wue=(e,t,n)=>t in e?tst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ost=(e,t)=>{for(var n in t||(t={}))ist.call(t,n)&&wue(e,n,t[n]);if(bue)for(var n of bue(t))sst.call(t,n)&&wue(e,n,t[n]);return e},ast=(e,t)=>nst(e,rst(t));const ust={xs:16,sm:20,md:24,lg:30,xl:36},lst={xs:8,sm:10,md:14,lg:16,xl:20};var cst=ht((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:ust}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:lst}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:ast(ost({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const fst=cst;var dst=Object.defineProperty,hst=Object.defineProperties,pst=Object.getOwnPropertyDescriptors,Eue=Object.getOwnPropertySymbols,mst=Object.prototype.hasOwnProperty,gst=Object.prototype.propertyIsEnumerable,xue=(e,t,n)=>t in e?dst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yst=(e,t)=>{for(var n in t||(t={}))mst.call(t,n)&&xue(e,n,t[n]);if(Eue)for(var n of Eue(t))gst.call(t,n)&&xue(e,n,t[n]);return e},vst=(e,t)=>hst(e,pst(t));const _st={xs:16,sm:20,md:24,lg:30,xl:36};var bst=ht((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:vst(yst({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:_st})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const wst=bst;var Est=Object.defineProperty,_N=Object.getOwnPropertySymbols,i2e=Object.prototype.hasOwnProperty,s2e=Object.prototype.propertyIsEnumerable,Sue=(e,t,n)=>t in e?Est(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xst=(e,t)=>{for(var n in t||(t={}))i2e.call(t,n)&&Sue(e,n,t[n]);if(_N)for(var n of _N(t))s2e.call(t,n)&&Sue(e,n,t[n]);return e},Sst=(e,t)=>{var n={};for(var r in e)i2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&s2e.call(e,r)&&(n[r]=e[r]);return n};function ZG(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=Sst(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=wst({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return L.createElement(At,xst({className:y(g.root,r)},m),L.createElement("div",{className:y(g.body)},a,L.createElement("div",{className:g.labelWrapper},u&&L.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&L.createElement(is.Description,{className:g.description},l),d&&d!=="boolean"&&L.createElement(is.Error,{className:g.error},d))))}ZG.displayName="@mantine/core/InlineInput";var Tst=Object.defineProperty,bN=Object.getOwnPropertySymbols,o2e=Object.prototype.hasOwnProperty,a2e=Object.prototype.propertyIsEnumerable,Tue=(e,t,n)=>t in e?Tst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eP=(e,t)=>{for(var n in t||(t={}))o2e.call(t,n)&&Tue(e,n,t[n]);if(bN)for(var n of bN(t))a2e.call(t,n)&&Tue(e,n,t[n]);return e},Ast=(e,t)=>{var n={};for(var r in e)o2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&a2e.call(e,r)&&(n[r]=e[r]);return n};const Cst={size:"sm",transitionDuration:100,icon:est,labelPosition:"right"},wN=A.forwardRef((e,t)=>{const n=Ct("Checkbox",Cst,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:b,labelPosition:E,description:w,error:x}=n,S=Ast(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),I=Rit(),C=vl(f),{systemStyles:O,rest:z}=wf(S),{classes:N}=fst({size:(I==null?void 0:I.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:E,error:!!x,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:b}),$=I?{checked:I.value.includes(z.value),onChange:I.onChange}:{};return L.createElement(ZG,eP(eP({className:r,sx:s,style:i,id:C,size:(I==null?void 0:I.size)||d,labelPosition:E,label:l,description:w,error:x,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:b,"data-checked":$.checked||void 0},O),p),L.createElement("div",{className:N.inner},L.createElement("input",eP(eP({id:C,ref:t,type:"checkbox",className:N.input,checked:o,disabled:a},z),$)),L.createElement(_,{indeterminate:c,className:N.icon})))});wN.displayName="@mantine/core/Checkbox";wN.Group=t2e;var Ist=ht((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}}));const Ost=Ist;var Pst=Object.defineProperty,EN=Object.getOwnPropertySymbols,u2e=Object.prototype.hasOwnProperty,l2e=Object.prototype.propertyIsEnumerable,Aue=(e,t,n)=>t in e?Pst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kst=(e,t)=>{for(var n in t||(t={}))u2e.call(t,n)&&Aue(e,n,t[n]);if(EN)for(var n of EN(t))l2e.call(t,n)&&Aue(e,n,t[n]);return e},$st=(e,t)=>{var n={};for(var r in e)u2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&l2e.call(e,r)&&(n[r]=e[r]);return n};const Rst={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},MC=A.forwardRef((e,t)=>{const n=Ct("Container",Rst,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=$st(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=Ost({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return L.createElement(At,kst({className:c(l.root,r),ref:t},u))});MC.displayName="@mantine/core/Container";function c2e({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=eTe({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?L.createElement(L.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=ZSe({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return L.createElement(L.Fragment,null,i(h))}c2e.displayName="@mantine/core/GroupedTransition";var Nst=ht((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}}));const Dst=Nst;var Lst=Object.defineProperty,Mst=Object.defineProperties,Fst=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,f2e=Object.prototype.hasOwnProperty,d2e=Object.prototype.propertyIsEnumerable,Cue=(e,t,n)=>t in e?Lst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f9=(e,t)=>{for(var n in t||(t={}))f2e.call(t,n)&&Cue(e,n,t[n]);if(xN)for(var n of xN(t))d2e.call(t,n)&&Cue(e,n,t[n]);return e},Bst=(e,t)=>Mst(e,Fst(t)),jst=(e,t)=>{var n={};for(var r in e)f2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&d2e.call(e,r)&&(n[r]=e[r]);return n};const zst={opacity:.6,color:"#fff",zIndex:Au("modal"),radius:0,blur:0},h2e=A.forwardRef((e,t)=>{const n=Ct("Overlay",zst,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=jst(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=Dst({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>L.createElement(At,f9({ref:t,className:p(h.root,f),sx:[v=>Bst(f9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...$1(l)]},y));return i?L.createElement(At,f9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...$1(l)]},d),g()):g(d)});h2e.displayName="@mantine/core/Overlay";const p2e=h2e,Ust={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var Vst=Object.defineProperty,Hst=Object.defineProperties,qst=Object.getOwnPropertyDescriptors,SN=Object.getOwnPropertySymbols,m2e=Object.prototype.hasOwnProperty,g2e=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?Vst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wst=(e,t)=>{for(var n in t||(t={}))m2e.call(t,n)&&Iue(e,n,t[n]);if(SN)for(var n of SN(t))g2e.call(t,n)&&Iue(e,n,t[n]);return e},Gst=(e,t)=>Hst(e,qst(t)),Yst=(e,t)=>{var n={};for(var r in e)m2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&g2e.call(e,r)&&(n[r]=e[r]);return n};const Kst={},Sd=A.forwardRef((e,t)=>{const n=Ct("Flex",Kst,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=Yst(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return L.createElement(At,Gst(Wst({},f),{sx:[{display:"flex"},d=>Lz({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,Ust),...$1(c)],ref:t}))});Sd.displayName="@mantine/core/Flex";const y2e=A.createContext(null),Xst=y2e.Provider,Qst=()=>A.useContext(y2e);var Jst=Object.defineProperty,Oue=Object.getOwnPropertySymbols,Zst=Object.prototype.hasOwnProperty,eot=Object.prototype.propertyIsEnumerable,Pue=(e,t,n)=>t in e?Jst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tot=(e,t)=>{for(var n in t||(t={}))Zst.call(t,n)&&Pue(e,n,t[n]);if(Oue)for(var n of Oue(t))eot.call(t,n)&&Pue(e,n,t[n]);return e};const eY=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,v2e=(e,t,n)=>n||e==="auto"||e==="content"?"unset":eY(e,t),_2e=(e,t)=>{if(e)return e==="auto"||t?1:0},b2e=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function not({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return zYe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:eY(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:v2e(e[a],i,s),marginLeft:b2e(t[a],i),flexGrow:_2e(e[a],s)},o),{})}var rot=ht((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E})=>({root:tot({boxSizing:"border-box",flexGrow:_2e(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:b2e(r,l),flexBasis:eY(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:v2e(c,l,n)},not({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:b,xl:E},theme:e,columns:l,grow:n}))}));const iot=rot;var sot=Object.defineProperty,TN=Object.getOwnPropertySymbols,w2e=Object.prototype.hasOwnProperty,E2e=Object.prototype.propertyIsEnumerable,kue=(e,t,n)=>t in e?sot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oot=(e,t)=>{for(var n in t||(t={}))w2e.call(t,n)&&kue(e,n,t[n]);if(TN)for(var n of TN(t))E2e.call(t,n)&&kue(e,n,t[n]);return e},aot=(e,t)=>{var n={};for(var r in e)w2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&E2e.call(e,r)&&(n[r]=e[r]);return n};const uot={};function lot(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const x2e=A.forwardRef((e,t)=>{const n=Ct("Grid.Col",uot,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,className:w,id:x,unstyled:S}=n,I=aot(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),C=Qst();if(!C)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const O=i||C.columns,{classes:z,cx:N}=iot({gutter:C.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,grow:C.grow,columns:C.columns,span:O},{unstyled:S,name:"Col"});return!lot(O)||O>C.columns?null:L.createElement(At,oot({className:N(z.root,w),ref:t},I),r)});x2e.displayName="@mantine/core/Col";var cot=ht((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}}));const fot=cot;var dot=Object.defineProperty,AN=Object.getOwnPropertySymbols,S2e=Object.prototype.hasOwnProperty,T2e=Object.prototype.propertyIsEnumerable,$ue=(e,t,n)=>t in e?dot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hot=(e,t)=>{for(var n in t||(t={}))S2e.call(t,n)&&$ue(e,n,t[n]);if(AN)for(var n of AN(t))T2e.call(t,n)&&$ue(e,n,t[n]);return e},pot=(e,t)=>{var n={};for(var r in e)S2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&T2e.call(e,r)&&(n[r]=e[r]);return n};const mot={gutter:"md",justify:"flex-start",align:"stretch",columns:12},Gu=A.forwardRef((e,t)=>{const n=Ct("Grid",mot,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=pot(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=fot({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return L.createElement(Xst,{value:{gutter:r,grow:s,columns:u}},L.createElement(At,hot({className:p(h.root,l),ref:t},d),i))});Gu.Col=x2e;Gu.displayName="@mantine/core/Grid";function got({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),s=A.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return A.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var yot=Object.defineProperty,Rue=Object.getOwnPropertySymbols,vot=Object.prototype.hasOwnProperty,_ot=Object.prototype.propertyIsEnumerable,Nue=(e,t,n)=>t in e?yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bot=(e,t)=>{for(var n in t||(t={}))vot.call(t,n)&&Nue(e,n,t[n]);if(Rue)for(var n of Rue(t))_ot.call(t,n)&&Nue(e,n,t[n]);return e};function wot(e){return L.createElement("svg",bot({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var Eot=Object.defineProperty,xot=Object.defineProperties,Sot=Object.getOwnPropertyDescriptors,Due=Object.getOwnPropertySymbols,Tot=Object.prototype.hasOwnProperty,Aot=Object.prototype.propertyIsEnumerable,Lue=(e,t,n)=>t in e?Eot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mue=(e,t)=>{for(var n in t||(t={}))Tot.call(t,n)&&Lue(e,n,t[n]);if(Due)for(var n of Due(t))Aot.call(t,n)&&Lue(e,n,t[n]);return e},Fue=(e,t)=>xot(e,Sot(t)),Cot=ht((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:Fue(Mue({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:Fue(Mue({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})}));const Iot=Cot;var Oot=Object.defineProperty,CN=Object.getOwnPropertySymbols,A2e=Object.prototype.hasOwnProperty,C2e=Object.prototype.propertyIsEnumerable,Bue=(e,t,n)=>t in e?Oot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d9=(e,t)=>{for(var n in t||(t={}))A2e.call(t,n)&&Bue(e,n,t[n]);if(CN)for(var n of CN(t))C2e.call(t,n)&&Bue(e,n,t[n]);return e},Pot=(e,t)=>{var n={};for(var r in e)A2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&C2e.call(e,r)&&(n[r]=e[r]);return n};const kot={fit:"cover",width:"100%",height:"auto",radius:0},Sv=A.forwardRef((e,t)=>{const n=Ct("Image",kot,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=Pot(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:b,cx:E}=Iot({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[w,x]=A.useState(!s),S=f&&w;return _s(()=>{x(!1)},[s]),L.createElement(At,d9({className:E(b.root,r),ref:t,style:d9({width:a},v)},_),L.createElement("figure",{className:b.figure},L.createElement("div",{className:b.imageWrapper},L.createElement("img",d9({className:b.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:I=>{x(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(I)}},c)),S&&L.createElement("div",{className:b.placeholder,title:i},d||L.createElement("div",null,L.createElement(wot,{style:{width:40,height:40}})))),!!g&&L.createElement(Ot,{component:"figcaption",size:"sm",align:"center",className:b.caption},g)))});Sv.displayName="@mantine/core/Image";function $ot(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Rot=A.useLayoutEffect,Not=function(t){var n=A.useRef(t);return Rot(function(){n.current=t}),n},jue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Dot=function(t,n){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&jue(r.current,null),r.current=n,n&&jue(n,i)},[n])},zue={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Uue=function(t){Object.keys(zue).forEach(function(n){t.style.setProperty(n,zue[n],"important")})},Nu=null,Lot=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Mot(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Nu||(Nu=document.createElement("textarea"),Nu.setAttribute("tabindex","-1"),Nu.setAttribute("aria-hidden","true"),Uue(Nu)),Nu.parentNode===null&&document.body.appendChild(Nu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Nu.style[h]=o[h]}),Uue(Nu),Nu.value=t;var u=Lot(Nu,e);Nu.value="x";var l=Nu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Vue=function(){},Fot=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Bot=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],jot=!!document.documentElement.currentStyle,zot=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Fot(Bot,n),i=r.boxSizing;if(i==="")return null;jot&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Uot=function(t){var n=Not(t);A.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},Vot=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Vue:o,u=t.onHeightChange,l=u===void 0?Vue:u,c=$ot(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=A.useRef(null),h=Dot(d,n),p=A.useRef(0),m=A.useRef(),g=function(){var _=d.current,b=r&&m.current?m.current:zot(_);if(b){m.current=b;var E=Mot(b,_.value||_.placeholder||"x",s,i),w=E[0],x=E[1];p.current!==w&&(p.current=w,_.style.setProperty("height",w+"px","important"),l(w,{rowHeight:x}))}},y=function(_){f||g(),a(_)};return A.useLayoutEffect(g),Uot(g),A.createElement("textarea",di({},c,{onChange:y,ref:h}))},Hot=A.forwardRef(Vot);const qot=Hot;var Wot=ht(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const Got=Wot;var Yot=Object.defineProperty,Kot=Object.defineProperties,Xot=Object.getOwnPropertyDescriptors,IN=Object.getOwnPropertySymbols,I2e=Object.prototype.hasOwnProperty,O2e=Object.prototype.propertyIsEnumerable,Hue=(e,t,n)=>t in e?Yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s_=(e,t)=>{for(var n in t||(t={}))I2e.call(t,n)&&Hue(e,n,t[n]);if(IN)for(var n of IN(t))O2e.call(t,n)&&Hue(e,n,t[n]);return e},h9=(e,t)=>Kot(e,Xot(t)),Qot=(e,t)=>{var n={};for(var r in e)I2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&O2e.call(e,r)&&(n[r]=e[r]);return n};const Jot={autosize:!1,size:"sm",__staticSelector:"Textarea"},P2e=A.forwardRef((e,t)=>{const n=Ct("Textarea",Jot,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:b,labelProps:E,inputWrapperOrder:w,inputContainer:x,unstyled:S,withAsterisk:I}=n,C=Qot(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),O=vl(l),{classes:z,cx:N}=Got(),{systemStyles:$,rest:D}=wf(C),B=s_({required:f,ref:t,invalid:!!a,id:O,classNames:h9(s_({},p),{input:N(z.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:S},D);return L.createElement(is.Wrapper,s_(s_({label:o,error:a,id:O,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:E,descriptionProps:b,inputContainer:x,inputWrapperOrder:w,unstyled:S,withAsterisk:I},$),h),r?L.createElement(is,h9(s_({},B),{component:qot,maxRows:i,minRows:s})):L.createElement(is,h9(s_({},B),{component:"textarea",rows:s})))});P2e.displayName="@mantine/core/Textarea";const k2e=A.createContext(null);function Zot(){return A.useContext(k2e)||{}}var eat=ht((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}}));const tat=eat;var nat=Object.defineProperty,ON=Object.getOwnPropertySymbols,$2e=Object.prototype.hasOwnProperty,R2e=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?nat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rat=(e,t)=>{for(var n in t||(t={}))$2e.call(t,n)&&que(e,n,t[n]);if(ON)for(var n of ON(t))R2e.call(t,n)&&que(e,n,t[n]);return e},iat=(e,t)=>{var n={};for(var r in e)$2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&R2e.call(e,r)&&(n[r]=e[r]);return n};function N2e(e){var t=e,{className:n,children:r,icon:i}=t,s=iat(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=Zot(),{classNames:d,styles:h,unstyled:p}=kC(),m=i||o,{classes:g,cx:y}=tat({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return L.createElement(At,rat({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),L.createElement("div",{className:g.itemWrapper},m&&L.createElement("span",{className:g.itemIcon},m),L.createElement("span",null,r)))}N2e.displayName="@mantine/core/ListItem";var sat=Object.defineProperty,oat=Object.defineProperties,aat=Object.getOwnPropertyDescriptors,Wue=Object.getOwnPropertySymbols,uat=Object.prototype.hasOwnProperty,lat=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?sat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cat=(e,t)=>{for(var n in t||(t={}))uat.call(t,n)&&Gue(e,n,t[n]);if(Wue)for(var n of Wue(t))lat.call(t,n)&&Gue(e,n,t[n]);return e},fat=(e,t)=>oat(e,aat(t)),dat=ht((e,{withPadding:t,size:n,listStyleType:r})=>({root:fat(cat({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})}));const hat=dat;var pat=Object.defineProperty,PN=Object.getOwnPropertySymbols,D2e=Object.prototype.hasOwnProperty,L2e=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?pat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mat=(e,t)=>{for(var n in t||(t={}))D2e.call(t,n)&&Yue(e,n,t[n]);if(PN)for(var n of PN(t))L2e.call(t,n)&&Yue(e,n,t[n]);return e},gat=(e,t)=>{var n={};for(var r in e)D2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&L2e.call(e,r)&&(n[r]=e[r]);return n};const yat={type:"unordered",size:"md",spacing:0},fw=A.forwardRef((e,t)=>{const n=Ct("List",yat,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=gat(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=hat({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return L.createElement(QEe,{classNames:h,styles:d,unstyled:p},L.createElement(k2e.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},L.createElement(At,mat({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});fw.Item=N2e;fw.displayName="@mantine/core/List";var vat=ht({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}});const _at=vat;var bat=Object.defineProperty,wat=Object.defineProperties,Eat=Object.getOwnPropertyDescriptors,kN=Object.getOwnPropertySymbols,M2e=Object.prototype.hasOwnProperty,F2e=Object.prototype.propertyIsEnumerable,Kue=(e,t,n)=>t in e?bat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tP=(e,t)=>{for(var n in t||(t={}))M2e.call(t,n)&&Kue(e,n,t[n]);if(kN)for(var n of kN(t))F2e.call(t,n)&&Kue(e,n,t[n]);return e},xat=(e,t)=>wat(e,Eat(t)),Sat=(e,t)=>{var n={};for(var r in e)M2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&F2e.call(e,r)&&(n[r]=e[r]);return n};const Tat={overlayOpacity:.75,transitionDuration:0,zIndex:Au("overlay")},FC=A.forwardRef((e,t)=>{const n=Ct("LoadingOverlay",Tat,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=Sat(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=_at(null,{name:"LoadingOverlay",unstyled:m}),b=`calc(${c} + 1)`;return L.createElement(LC,{duration:u,exitDuration:l,mounted:i,transition:"fade"},E=>L.createElement(At,tP({className:v(y.root,r),style:xat(tP(tP({},E),f),{zIndex:c}),ref:t},g),d?L.createElement("div",{style:{zIndex:b}},d):L.createElement(C0,tP({style:{zIndex:b}},s)),L.createElement(p2e,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});FC.displayName="@mantine/core/LoadingOverlay";var Aat=ht(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}}));const Cat=Aat;var Iat=Object.defineProperty,$N=Object.getOwnPropertySymbols,B2e=Object.prototype.hasOwnProperty,j2e=Object.prototype.propertyIsEnumerable,Xue=(e,t,n)=>t in e?Iat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oat=(e,t)=>{for(var n in t||(t={}))B2e.call(t,n)&&Xue(e,n,t[n]);if($N)for(var n of $N(t))j2e.call(t,n)&&Xue(e,n,t[n]);return e},Pat=(e,t)=>{var n={};for(var r in e)B2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&j2e.call(e,r)&&(n[r]=e[r]);return n};function z2e(e){var t=e,{children:n,className:r}=t,i=Pat(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=kC(),{classes:u,cx:l}=Cat(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return L.createElement(At,Oat({className:l(u.divider,r)},i))}z2e.displayName="@mantine/core/MenuDivider";const U2e={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[kat,tY]=SEe(U2e.context);var $at=Object.defineProperty,RN=Object.getOwnPropertySymbols,V2e=Object.prototype.hasOwnProperty,H2e=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?$at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rat=(e,t)=>{for(var n in t||(t={}))V2e.call(t,n)&&Que(e,n,t[n]);if(RN)for(var n of RN(t))H2e.call(t,n)&&Que(e,n,t[n]);return e},Nat=(e,t)=>{var n={};for(var r in e)V2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&H2e.call(e,r)&&(n[r]=e[r]);return n};function q2e(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=Nat(t,["children","onMouseEnter","onMouseLeave"]);const o=A.useRef(),a=tY(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=Kh(r,()=>a.trigger==="hover"&&a.openDropdown()),c=Kh(i,()=>a.trigger==="hover"&&a.closeDropdown());return L.createElement(Vi.Dropdown,Rat({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),L.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}q2e.displayName="@mantine/core/MenuDropdown";var Dat=Object.defineProperty,Lat=Object.defineProperties,Mat=Object.getOwnPropertyDescriptors,Jue=Object.getOwnPropertySymbols,Fat=Object.prototype.hasOwnProperty,Bat=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?Dat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jat=(e,t)=>{for(var n in t||(t={}))Fat.call(t,n)&&Zue(e,n,t[n]);if(Jue)for(var n of Jue(t))Bat.call(t,n)&&Zue(e,n,t[n]);return e},zat=(e,t)=>Lat(e,Mat(t)),Uat=ht((e,{color:t,radius:n})=>({item:zat(jat({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const Vat=Uat;var Hat=Object.defineProperty,qat=Object.defineProperties,Wat=Object.getOwnPropertyDescriptors,NN=Object.getOwnPropertySymbols,W2e=Object.prototype.hasOwnProperty,G2e=Object.prototype.propertyIsEnumerable,ele=(e,t,n)=>t in e?Hat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gat=(e,t)=>{for(var n in t||(t={}))W2e.call(t,n)&&ele(e,n,t[n]);if(NN)for(var n of NN(t))G2e.call(t,n)&&ele(e,n,t[n]);return e},Yat=(e,t)=>qat(e,Wat(t)),Kat=(e,t)=>{var n={};for(var r in e)W2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&G2e.call(e,r)&&(n[r]=e[r]);return n};const Y2e=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=Kat(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=tY(),{classNames:f,styles:d,unstyled:h}=kC(),{classes:p,cx:m,theme:g}=Vat({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=A.useRef(),v=c.getItemIndex(y.current),_=l,b=Kh(_.onMouseLeave,()=>c.setHovered(-1)),E=Kh(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),w=Kh(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),x=Kh(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return L.createElement(At,Yat(Gat({component:"button",type:"button"},l),{tabIndex:-1,onFocus:x,className:m(p.item,i),ref:Ts(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:b,onClick:w,onKeyDown:aYe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&L.createElement("div",{className:p.itemIcon},a),r&&L.createElement("div",{className:p.itemLabel},r),u&&L.createElement("div",{className:p.itemRightSection},u))});Y2e.displayName="@mantine/core/MenuItem";const Xat=Y2e;var Qat=ht(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}}));const Jat=Qat;var Zat=Object.defineProperty,DN=Object.getOwnPropertySymbols,K2e=Object.prototype.hasOwnProperty,X2e=Object.prototype.propertyIsEnumerable,tle=(e,t,n)=>t in e?Zat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eut=(e,t)=>{for(var n in t||(t={}))K2e.call(t,n)&&tle(e,n,t[n]);if(DN)for(var n of DN(t))X2e.call(t,n)&&tle(e,n,t[n]);return e},tut=(e,t)=>{var n={};for(var r in e)K2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&X2e.call(e,r)&&(n[r]=e[r]);return n};function Q2e(e){var t=e,{children:n,className:r}=t,i=tut(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=kC(),{classes:u,cx:l}=Jat(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return L.createElement(Ot,eut({className:l(u.label,r)},i),n)}Q2e.displayName="@mantine/core/MenuLabel";var nut=Object.defineProperty,LN=Object.getOwnPropertySymbols,J2e=Object.prototype.hasOwnProperty,Z2e=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?nut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rut=(e,t)=>{for(var n in t||(t={}))J2e.call(t,n)&&nle(e,n,t[n]);if(LN)for(var n of LN(t))Z2e.call(t,n)&&nle(e,n,t[n]);return e},iut=(e,t)=>{var n={};for(var r in e)J2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&Z2e.call(e,r)&&(n[r]=e[r]);return n};const eAe=A.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=iut(n,["children","refProp"]);if(!IC(r))throw new Error(U2e.children);const o=tY(),a=Kh(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=Kh(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=Kh(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return L.createElement(Vi.Target,rut({refProp:i,popupType:"menu",ref:t},s),A.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});eAe.displayName="@mantine/core/MenuTarget";var sut=ht({dropdown:{padding:4}});const out=sut;var aut=Object.defineProperty,uut=Object.defineProperties,lut=Object.getOwnPropertyDescriptors,MN=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,nAe=Object.prototype.propertyIsEnumerable,rle=(e,t,n)=>t in e?aut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ile=(e,t)=>{for(var n in t||(t={}))tAe.call(t,n)&&rle(e,n,t[n]);if(MN)for(var n of MN(t))nAe.call(t,n)&&rle(e,n,t[n]);return e},sle=(e,t)=>uut(e,lut(t)),cut=(e,t)=>{var n={};for(var r in e)tAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&nAe.call(e,r)&&(n[r]=e[r]);return n};const fut={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function $l(e){const t=Ct("Menu",fut,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=cut(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:b}=out(),[E,{setHovered:w,resetHovered:x}]=fYe(),[S,I]=Aa({value:s,defaultValue:o,finalValue:!1,onChange:a}),C=()=>{I(!1),S&&(i==null||i())},O=()=>{I(!0),!S&&(r==null||r())},z=()=>S?C():O(),{openDropdown:N,closeDropdown:$}=got({open:O,close:C,closeDelay:h,openDelay:d}),D=B=>uYe("[data-menu-item]","[data-menu-dropdown]",B);return _s(()=>{x()},[S]),L.createElement(kat,{value:{opened:S,toggleDropdown:z,getItemIndex:D,hovered:E,setHovered:w,closeOnItemClick:u,closeDropdown:f==="click"?C:$,openDropdown:f==="click"?O:N,closeDropdownImmediately:C,loop:l,trigger:f,radius:y}},L.createElement(Vi,sle(ile({},v),{radius:y,opened:S,onChange:I,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:sle(ile({},p),{dropdown:b(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:C,onOpen:O}),n))}$l.displayName="@mantine/core/Menu";$l.Item=Xat;$l.Label=Q2e;$l.Dropdown=q2e;$l.Target=eAe;$l.Divider=z2e;var dut=Object.defineProperty,ole=Object.getOwnPropertySymbols,hut=Object.prototype.hasOwnProperty,put=Object.prototype.propertyIsEnumerable,ale=(e,t,n)=>t in e?dut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mut=(e,t)=>{for(var n in t||(t={}))hut.call(t,n)&&ale(e,n,t[n]);if(ole)for(var n of ole(t))put.call(t,n)&&ale(e,n,t[n]);return e};const gut={xs:320,sm:380,md:440,lg:620,xl:780};function yut(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var vut=ht((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:mut({position:"relative",width:s?"100vw":e.fn.size({sizes:gut,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},yut(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}}));const _ut=vut;var but=Object.defineProperty,FN=Object.getOwnPropertySymbols,rAe=Object.prototype.hasOwnProperty,iAe=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?but(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wut=(e,t)=>{for(var n in t||(t={}))rAe.call(t,n)&&ule(e,n,t[n]);if(FN)for(var n of FN(t))iAe.call(t,n)&&ule(e,n,t[n]);return e},Eut=(e,t)=>{var n={};for(var r in e)rAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&iAe.call(e,r)&&(n[r]=e[r]);return n};const xut={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:Au("modal"),exitTransitionDuration:0};function BC(e){const t=Ct("Modal",xut,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:b,styles:E,closeOnClickOutside:w,trapFocus:x,closeOnEscape:S,centered:I,target:C,withinPortal:O,zIndex:z,overlayBlur:N,transitionTimingFunction:$,fullScreen:D,unstyled:B,lockScroll:V,withFocusReturn:j}=t,G=Eut(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),U=vl(_),P=`${U}-title`,k=`${U}-body`,{classes:H,cx:M,theme:F}=_ut({size:l,overflow:p,centered:I,zIndex:z,fullScreen:D},{unstyled:B,classNames:b,styles:E,name:"Modal"}),J=ixe(x&&r),se=A.useRef(null),ae=Ts(J,se),ce=typeof u=="number"?u:F.colorScheme==="dark"?.85:.75;RXe(V&&r);const le=Fe=>{!x&&Fe.key==="Escape"&&S&&s()};A.useEffect(()=>{if(!x)return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[x]),exe({opened:r,shouldReturnFocus:x&&j});const ge=A.useRef(null);Dz("mousedown",Fe=>{ge.current=Fe.target});const ue=()=>{ge.current===se.current&&w&&s()};return L.createElement($C,{withinPortal:O,target:C},L.createElement(c2e,{mounted:r,duration:c,exitDuration:f,timingFunction:$,transitions:{modal:{duration:c,transition:m||(D?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Fe=>L.createElement(L.Fragment,null,L.createElement(At,wut({id:U,className:M(H.root,n)},G),L.createElement("div",{style:Fe.overlay},L.createElement(p2e,{className:H.overlay,sx:{position:"fixed"},zIndex:0,blur:N,color:h||(F.colorScheme==="dark"?F.colors.dark[9]:F.black),opacity:ce,unstyled:B})),L.createElement("div",{role:"presentation",className:H.inner,onClick:ue,onKeyDown:ke=>{var Ge;((Ge=ke.target)==null?void 0:Ge.getAttribute("data-mantine-stop-propagation"))!=="true"&&ke.key==="Escape"&&S&&s()},ref:ae},L.createElement(LTe,{className:H.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":P,"aria-describedby":k,"aria-modal":!0,tabIndex:-1,style:Fe.modal,unstyled:B,onClick:ke=>ke.stopPropagation()},(i||a)&&L.createElement("div",{className:H.header},L.createElement(Ot,{id:P,className:H.title},i),a&&L.createElement(wv,{iconSize:16,onClick:s,"aria-label":d,className:H.close})),L.createElement("div",{id:k,className:H.body},o)))))))}BC.displayName="@mantine/core/Modal";const Sut={xs:16,sm:22,md:26,lg:30,xl:36},Tut={xs:10,sm:12,md:14,lg:16,xl:18};var Aut=ht((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:Sut}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:Tut}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const Cut=Aut;var Iut=Object.defineProperty,BN=Object.getOwnPropertySymbols,sAe=Object.prototype.hasOwnProperty,oAe=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?Iut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Out=(e,t)=>{for(var n in t||(t={}))sAe.call(t,n)&&lle(e,n,t[n]);if(BN)for(var n of BN(t))oAe.call(t,n)&&lle(e,n,t[n]);return e},Put=(e,t)=>{var n={};for(var r in e)sAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&oAe.call(e,r)&&(n[r]=e[r]);return n};const cle={xs:16,sm:22,md:24,lg:26,xl:30};function aAe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=Put(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=Cut({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return L.createElement("div",Out({className:p(h.defaultValue,s)},d),L.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&L.createElement(wv,{"aria-hidden":!0,onMouseDown:o,size:cle[l],radius:2,color:"blue",variant:"transparent",iconSize:cle[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}aAe.displayName="@mantine/core/MultiSelect/DefaultValue";function kut({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var $ut=Object.defineProperty,jN=Object.getOwnPropertySymbols,uAe=Object.prototype.hasOwnProperty,lAe=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?$ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dle=(e,t)=>{for(var n in t||(t={}))uAe.call(t,n)&&fle(e,n,t[n]);if(jN)for(var n of jN(t))lAe.call(t,n)&&fle(e,n,t[n]);return e},Rut=(e,t)=>{var n={};for(var r in e)uAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&lAe.call(e,r)&&(n[r]=e[r]);return n};const Nut={xs:14,sm:18,md:20,lg:24,xl:28};function cAe(e){var t=e,{size:n,error:r,style:i}=t,s=Rut(t,["size","error","style"]);const o=as(),a=o.fn.size({size:n,sizes:Nut});return L.createElement("svg",dle({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:dle({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),L.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function fAe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?L.createElement(wv,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):L.createElement(cAe,{error:i,size:r})}fAe.displayName="@mantine/core/SelectRightSection";var Dut=Object.defineProperty,Lut=Object.defineProperties,Mut=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty,hAe=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?Dut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p9=(e,t)=>{for(var n in t||(t={}))dAe.call(t,n)&&hle(e,n,t[n]);if(zN)for(var n of zN(t))hAe.call(t,n)&&hle(e,n,t[n]);return e},ple=(e,t)=>Lut(e,Mut(t)),Fut=(e,t)=>{var n={};for(var r in e)dAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&hAe.call(e,r)&&(n[r]=e[r]);return n};const But={xs:24,sm:30,md:34,lg:44,xl:54};function pAe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=Fut(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:But}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&L.createElement(fAe,p9({},o)),styles:ple(p9({},a),{rightSection:ple(p9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var jut=Object.defineProperty,zut=Object.defineProperties,Uut=Object.getOwnPropertyDescriptors,mle=Object.getOwnPropertySymbols,Vut=Object.prototype.hasOwnProperty,Hut=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?jut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qut=(e,t)=>{for(var n in t||(t={}))Vut.call(t,n)&&gle(e,n,t[n]);if(mle)for(var n of mle(t))Hut.call(t,n)&&gle(e,n,t[n]);return e},Wut=(e,t)=>zut(e,Uut(t)),Gut=ht((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:Mo})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:Wut(qut({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:Mo})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const Yut=Gut;var Kut=Object.defineProperty,Xut=Object.defineProperties,Qut=Object.getOwnPropertyDescriptors,UN=Object.getOwnPropertySymbols,mAe=Object.prototype.hasOwnProperty,gAe=Object.prototype.propertyIsEnumerable,yle=(e,t,n)=>t in e?Kut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o_=(e,t)=>{for(var n in t||(t={}))mAe.call(t,n)&&yle(e,n,t[n]);if(UN)for(var n of UN(t))gAe.call(t,n)&&yle(e,n,t[n]);return e},vle=(e,t)=>Xut(e,Qut(t)),Jut=(e,t)=>{var n={};for(var r in e)mAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&gAe.call(e,r)&&(n[r]=e[r]);return n};function Zut(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function elt(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function _le(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const tlt={size:"sm",valueComponent:aAe,itemComponent:MG,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:Zut,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:elt,switchDirectionOnFlip:!1,zIndex:Au("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},yAe=A.forwardRef((e,t)=>{const n=Ct("MultiSelect",tlt,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:b,transitionDuration:E,transitionTimingFunction:w,maxDropdownHeight:x,shadow:S,nothingFound:I,onFocus:C,onBlur:O,searchable:z,placeholder:N,filter:$,limit:D,clearSearchOnChange:B,clearable:V,clearSearchOnBlur:j,clearButtonLabel:G,variant:U,onSearchChange:P,searchValue:k,disabled:H,initiallyOpened:M,radius:F,icon:J,rightSection:se,rightSectionWidth:ae,creatable:ce,getCreateLabel:le,shouldCreate:ge,onCreate:ue,sx:Fe,dropdownComponent:ke,onDropdownClose:Ge,onDropdownOpen:Re,maxSelectedValues:Oe,withinPortal:Le,switchDirectionOnFlip:Ut,zIndex:Qe,selectOnBlur:je,name:bt,dropdownPosition:et,errorProps:ut,labelProps:lt,descriptionProps:jt,clearButtonTabIndex:Dn,form:he,positionDependencies:_e,onKeyDown:Pe,unstyled:it,inputContainer:Ye,inputWrapperOrder:at,readOnly:tt,withAsterisk:vt}=n,In=Jut(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Wt,cx:Vt,theme:hr}=Yut({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:it,name:"MultiSelect"}),{systemStyles:Yn,rest:ku}=wf(In),Mr=A.useRef(),us=A.useRef(),ti=A.useRef({}),Ei=vl(_),[qr,yr]=A.useState(M),[gt,Fr]=A.useState(-1),[xi,Yi]=A.useState("column"),[Qs,Ba]=Aa({value:k,defaultValue:"",finalValue:void 0,onChange:P}),[ne,Q]=A.useState(!1),{scrollIntoView:ie,targetRef:ve,scrollableRef:ye}=uxe({duration:0,offset:5,cancelable:!1,isList:!0}),pt=ce&&typeof le=="function";let Ce=null;const ft=m.map(yt=>typeof yt=="string"?{label:yt,value:yt}:yt),Bt=TEe({data:ft}),[St,Ht]=Aa({value:_le(h,m),defaultValue:_le(p,m),finalValue:[],onChange:g}),fn=A.useRef(!!Oe&&Oe<St.length),Tr=yt=>{if(!tt){const wn=St.filter(Br=>Br!==yt);Ht(wn),Oe&&wn.length<Oe&&(fn.current=!1)}},zt=yt=>{Ba(yt.currentTarget.value),!H&&!fn.current&&z&&yr(!0)},pr=yt=>{typeof C=="function"&&C(yt),!H&&!fn.current&&z&&yr(!0)},Xt=kut({data:Bt,searchable:z,searchValue:Qs,limit:D,filter:$,value:St}),er=(yt,wn,Br)=>{let Is=yt;for(;Br(Is);)if(Is=wn(Is),!Xt[Is].disabled)return Is;return yt};_s(()=>{Fr(-1)},[Qs]),_s(()=>{!H&&St.length>m.length&&yr(!1),Oe&&St.length<Oe&&(fn.current=!1),Oe&&St.length>=Oe&&(fn.current=!0,yr(!1))},[St]);const ni=yt=>{if(!tt)if(B&&Ba(""),St.includes(yt.value))Tr(yt.value);else{if(yt.creatable&&typeof ue=="function"){const wn=ue(yt.value);typeof wn<"u"&&wn!==null&&Ht(typeof wn=="string"?[...St,wn]:[...St,wn.value])}else Ht([...St,yt.value]);St.length===Oe-1&&(fn.current=!0,yr(!1)),gt===Xt.length-1&&Fr(Xt.length-2),Xt.length===1&&yr(!1)}},ls=yt=>{typeof O=="function"&&O(yt),je&&Xt[gt]&&qr&&ni(Xt[gt]),j&&Ba(""),yr(!1)},Fi=yt=>{if(ne||(Pe==null||Pe(yt),tt)||yt.key!=="Backspace"&&Oe&&fn.current)return;const wn=xi==="column",Br=()=>{Fr(ja=>{var q;const te=er(ja,K=>K+1,K=>K<Xt.length-1);return qr&&(ve.current=ti.current[(q=Xt[te])==null?void 0:q.value],ie({alignment:wn?"end":"start"})),te})},Is=()=>{Fr(ja=>{var q;const te=er(ja,K=>K-1,K=>K>0);return qr&&(ve.current=ti.current[(q=Xt[te])==null?void 0:q.value],ie({alignment:wn?"start":"end"})),te})};switch(yt.key){case"ArrowUp":{yt.preventDefault(),yr(!0),wn?Is():Br();break}case"ArrowDown":{yt.preventDefault(),yr(!0),wn?Br():Is();break}case"Enter":{yt.preventDefault(),Xt[gt]&&qr?ni(Xt[gt]):yr(!0);break}case" ":{z||(yt.preventDefault(),Xt[gt]&&qr?ni(Xt[gt]):yr(!0));break}case"Backspace":{St.length>0&&Qs.length===0&&(Ht(St.slice(0,-1)),yr(!0),Oe&&(fn.current=!1));break}case"Home":{if(!z){yt.preventDefault(),qr||yr(!0);const ja=Xt.findIndex(q=>!q.disabled);Fr(ja),ie({alignment:wn?"end":"start"})}break}case"End":{if(!z){yt.preventDefault(),qr||yr(!0);const ja=Xt.map(q=>!!q.disabled).lastIndexOf(!1);Fr(ja),ie({alignment:wn?"end":"start"})}break}case"Escape":yr(!1)}},oa=St.map(yt=>{let wn=Bt.find(Br=>Br.value===yt&&!Br.disabled);return!wn&&pt&&(wn={value:yt,label:yt}),wn}).filter(yt=>!!yt).map(yt=>L.createElement(y,vle(o_({},yt),{variant:U,disabled:H,className:Wt.value,readOnly:tt,onRemove:wn=>{wn.preventDefault(),wn.stopPropagation(),Tr(yt.value)},key:yt.value,size:u,styles:f,classNames:c,radius:F}))),Js=()=>{var yt;Ba(""),Ht([]),(yt=Mr.current)==null||yt.focus(),Oe&&(fn.current=!1)};pt&&ge(Qs,Bt)&&(Ce=le(Qs),Xt.push({label:Qs,value:Qs,creatable:!0}));const mi=!tt&&(Xt.length>0?qr:qr&&!!I);return _s(()=>{const yt=mi?Re:Ge;typeof yt=="function"&&yt()},[mi]),L.createElement(is.Wrapper,o_(o_({required:s,id:Ei,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Fe,errorProps:ut,descriptionProps:jt,labelProps:lt,inputContainer:Ye,inputWrapperOrder:at,unstyled:it,withAsterisk:vt},Yn),d),L.createElement(bg,{opened:mi,transition:b,transitionDuration:E,shadow:"sm",withinPortal:Le,__staticSelector:"MultiSelect",onDirectionChange:Yi,switchDirectionOnFlip:Ut,zIndex:Qe,dropdownPosition:et,positionDependencies:_e,classNames:c,styles:f,unstyled:it},L.createElement(bg.Target,null,L.createElement("div",{className:Wt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":qr&&mi?`${Ei}-items`:null,"aria-controls":Ei,"aria-expanded":qr,onMouseLeave:()=>Fr(-1),tabIndex:-1,ref:us},L.createElement("input",{type:"hidden",name:bt,value:St.join(","),form:he,disabled:H}),L.createElement(is,o_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:U,disabled:H,invalid:!!l,required:s,radius:F,icon:J,unstyled:it,onMouseDown:yt=>{var wn;yt.preventDefault(),!H&&!fn.current&&yr(!qr),(wn=Mr.current)==null||wn.focus()},classNames:vle(o_({},c),{input:Vt({[Wt.input]:!z},c==null?void 0:c.input)})},pAe({theme:hr,rightSection:se,rightSectionWidth:ae,styles:f,size:u,shouldClear:V&&St.length>0,clearButtonLabel:G,onClear:Js,error:l,disabled:H,clearButtonTabIndex:Dn,readOnly:tt})),L.createElement("div",{className:Wt.values},oa,L.createElement("input",o_({ref:Ts(t,Mr),type:"search",id:Ei,className:Vt(Wt.searchInput,{[Wt.searchInputPointer]:!z,[Wt.searchInputInputHidden]:!qr&&St.length>0||!z&&St.length>0,[Wt.searchInputEmpty]:St.length===0}),onKeyDown:Fi,value:Qs,onChange:zt,onFocus:pr,onBlur:ls,readOnly:!z||fn.current||tt,placeholder:St.length===0?N:void 0,disabled:H,"data-mantine-stop-propagation":qr,autoComplete:"off",onCompositionStart:()=>Q(!0),onCompositionEnd:()=>Q(!1)},ku)))))),L.createElement(bg.Dropdown,{component:ke||u6,maxHeight:x,direction:xi,id:Ei,innerRef:ye,__staticSelector:"MultiSelect",classNames:c,styles:f},L.createElement(LG,{data:Xt,hovered:gt,classNames:c,styles:f,uuid:Ei,__staticSelector:"MultiSelect",onItemHover:Fr,onItemSelect:ni,itemsRefs:ti,itemComponent:v,size:u,nothingFound:I,creatable:ce&&!!Ce,createLabel:Ce,unstyled:it}))))});yAe.displayName="@mantine/core/MultiSelect";var nlt=Object.defineProperty,rlt=Object.defineProperties,ilt=Object.getOwnPropertyDescriptors,ble=Object.getOwnPropertySymbols,slt=Object.prototype.hasOwnProperty,olt=Object.prototype.propertyIsEnumerable,wle=(e,t,n)=>t in e?nlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ele=(e,t)=>{for(var n in t||(t={}))slt.call(t,n)&&wle(e,n,t[n]);if(ble)for(var n of ble(t))olt.call(t,n)&&wle(e,n,t[n]);return e},alt=(e,t)=>rlt(e,ilt(t)),ult=ht((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:alt(Ele({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Ele({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}});const llt=ult;var clt=Object.defineProperty,VN=Object.getOwnPropertySymbols,vAe=Object.prototype.hasOwnProperty,_Ae=Object.prototype.propertyIsEnumerable,xle=(e,t,n)=>t in e?clt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,flt=(e,t)=>{for(var n in t||(t={}))vAe.call(t,n)&&xle(e,n,t[n]);if(VN)for(var n of VN(t))_Ae.call(t,n)&&xle(e,n,t[n]);return e},dlt=(e,t)=>{var n={};for(var r in e)vAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&_Ae.call(e,r)&&(n[r]=e[r]);return n};const hlt={variant:"light",childrenOffset:"lg"},bAe=A.forwardRef((e,t)=>{const n=Ct("NavLink",hlt,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:b,disabled:E,onClick:w}=n,x=dlt(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:S,cx:I}=llt({color:d,variant:h,noWrap:p,childrenOffset:b,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[C,O]=Aa({value:g,defaultValue:y,finalValue:!1,onChange:v}),z=!!m,N=$=>{z?($.preventDefault(),w==null||w($),O(!C)):w==null||w($)};return L.createElement(L.Fragment,null,L.createElement(Bg,flt({ref:t,className:I(S.root,a),"data-active":f||void 0,onClick:N,unstyled:c,"data-expanded":C||void 0,"data-disabled":E||void 0,disabled:E},x),s&&L.createElement("span",{className:S.icon},s),L.createElement("span",{className:S.body},L.createElement(Ot,{component:"span",size:"sm",className:S.label},r),L.createElement(Ot,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:S.description},i)),(z||o)&&L.createElement("span",{className:S.rightSection,"data-rotate":C&&!_||void 0},z?o||L.createElement(jQe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),L.createElement(_xe,{in:C},L.createElement("div",{className:S.children},m)))});bAe.displayName="@mantine/core/NavLink";const FT=bAe,plt=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function Sle({direction:e,size:t}){return L.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},L.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const wAe={xs:20,sm:24,md:30,lg:34,xl:36};var mlt=ht((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:wAe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const glt=mlt;var ylt=Object.defineProperty,vlt=Object.defineProperties,_lt=Object.getOwnPropertyDescriptors,HN=Object.getOwnPropertySymbols,EAe=Object.prototype.hasOwnProperty,xAe=Object.prototype.propertyIsEnumerable,Tle=(e,t,n)=>t in e?ylt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m9=(e,t)=>{for(var n in t||(t={}))EAe.call(t,n)&&Tle(e,n,t[n]);if(HN)for(var n of HN(t))xAe.call(t,n)&&Tle(e,n,t[n]);return e},blt=(e,t)=>vlt(e,_lt(t)),wlt=(e,t)=>{var n={};for(var r in e)EAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&xAe.call(e,r)&&(n[r]=e[r]);return n};const Elt={type:"text",size:"sm",__staticSelector:"TextInput"},nY=A.forwardRef((e,t)=>{const n=dTe("TextInput",Elt,e),{inputProps:r,wrapperProps:i}=n,s=wlt(n,["inputProps","wrapperProps"]);return L.createElement(is.Wrapper,m9({},i),L.createElement(is,blt(m9(m9({},r),s),{ref:t})))});nY.displayName="@mantine/core/TextInput";var xlt=Object.defineProperty,Slt=Object.defineProperties,Tlt=Object.getOwnPropertyDescriptors,qN=Object.getOwnPropertySymbols,SAe=Object.prototype.hasOwnProperty,TAe=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?xlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Alt=(e,t)=>{for(var n in t||(t={}))SAe.call(t,n)&&Ale(e,n,t[n]);if(qN)for(var n of qN(t))TAe.call(t,n)&&Ale(e,n,t[n]);return e},Clt=(e,t)=>Slt(e,Tlt(t)),Ilt=(e,t)=>{var n={};for(var r in e)SAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&TAe.call(e,r)&&(n[r]=e[r]);return n};const Olt=e=>e||"",Plt=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},Cle={xs:10,sm:14,md:16,lg:18,xl:20},klt={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:Olt,parser:Plt,type:"text"},AAe=A.forwardRef((e,t)=>{const n=Ct("NumberInput",klt,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:b,removeTrailingZeros:E,defaultValue:w,noClampOnBlur:x,handlersRef:S,classNames:I,styles:C,size:O,rightSection:z,rightSectionWidth:N,formatter:$,parser:D,inputMode:B,unstyled:V,type:j}=n,G=Ilt(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:U,cx:P,theme:k}=glt({radius:v,size:O},{classNames:I,styles:C,unstyled:V,name:"NumberInput"}),H=Ye=>{if(Ye===void 0)return;let at=Ye.toFixed(b);return E&&b>0&&(at=at.replace(new RegExp(`[0]{0,${b}}$`),""),(at.endsWith(".")||at.endsWith(o))&&(at=at.slice(0,-1))),at},[M,F]=A.useState(!1),[J,se]=A.useState(typeof i=="number"?i:typeof w=="number"?w:void 0),ae=typeof i=="number"?i:J,[ce,le]=A.useState(typeof ae=="number"?H(ae):""),ge=A.useRef(),ue=Ye=>{Ye!==J&&!Number.isNaN(Ye)&&(typeof s=="function"&&s(Ye),se(Ye))},Fe=(Ye="")=>{let at=typeof Ye=="number"?String(Ye):Ye;return o&&(at=at.replace(/\./g,o)),$(at)},ke=Ye=>{let at=Ye;return o&&(at=at.replace(new RegExp(`\\${o}`,"g"),".")),D(at)},Ge=typeof a=="number"?a:-1/0,Re=typeof u=="number"?u:1/0,Oe=A.useRef();Oe.current=()=>{var Ye,at,tt;if(J===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(at=H(l))!=null?at:H(a))!=null?tt:"0");else{const vt=H(sf(J+c,Ge,Re));ue(parseFloat(vt)),le(vt)}};const Le=A.useRef();Le.current=()=>{var Ye,at,tt;if(J===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(at=H(l))!=null?at:H(a))!=null?tt:"0");else{const vt=H(sf(J-c,Ge,Re));ue(parseFloat(vt)),le(vt)}},sxe(S,{increment:Oe.current,decrement:Le.current}),A.useEffect(()=>{typeof i=="number"&&!M&&(se(i),le(H(i))),w===void 0&&i===void 0&&!M&&(se(i),le(""))},[i]);const Ut=d!==void 0&&f!==void 0,Qe=A.useRef(null),je=A.useRef(0),bt=()=>{Qe.current&&window.clearTimeout(Qe.current),Qe.current=null,je.current=0},et=Ye=>{Ye?Oe.current():Le.current(),je.current+=1},ut=Ye=>{if(et(Ye),Ut){const at=typeof f=="number"?f:f(je.current);Qe.current=window.setTimeout(()=>ut(Ye),at)}},lt=(Ye,at)=>{Ye.preventDefault(),ge.current.focus(),et(at),Ut&&(Qe.current=window.setTimeout(()=>ut(at),d))};A.useEffect(()=>(bt(),bt),[]);const jt=L.createElement("div",{className:U.rightSection},L.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae>=u,className:P(U.control,U.controlUp),onPointerDown:Ye=>{lt(Ye,!0)},onPointerUp:bt,onPointerLeave:bt},L.createElement(Sle,{size:k.fn.size({size:O,sizes:Cle}),direction:"up"})),L.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae<=a,className:P(U.control,U.controlDown),onPointerDown:Ye=>{lt(Ye,!1)},onPointerUp:bt,onPointerLeave:bt},L.createElement(Sle,{size:k.fn.size({size:O,sizes:Cle}),direction:"down"}))),Dn=Ye=>{if(Ye.nativeEvent.isComposing)return;const tt=Ye.target.value,vt=ke(tt);le(vt),tt===""||tt==="-"?ue(void 0):tt.trim()!==""&&!Number.isNaN(vt)&&ue(parseFloat(vt))},he=Ye=>{var at;if(Ye.target.value==="")le(""),ue(void 0);else{let tt=Ye.target.value;(tt[0]===`${o}`||tt[0]===".")&&(tt=`0${tt}`);const vt=ke(tt),In=sf(parseFloat(vt),Ge,Re);Number.isNaN(In)?le((at=H(ae))!=null?at:""):x||(le(H(In)),ue(parseFloat(H(In))))}F(!1),typeof h=="function"&&h(Ye)},_e=Ye=>{F(!0),typeof p=="function"&&p(Ye)},Pe=Ye=>{if(typeof m=="function"&&m(Ye),Ye.repeat&&Ut&&(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")){Ye.preventDefault();return}Ye.key==="ArrowUp"?lt(Ye,!0):Ye.key==="ArrowDown"&&lt(Ye,!1)},it=Ye=>{typeof g=="function"&&g(Ye),(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")&&bt()};return L.createElement(nY,Clt(Alt({},G),{type:j,variant:_,value:Fe(ce),disabled:r,ref:Ts(ge,t),onChange:Dn,onBlur:he,onFocus:_e,onKeyDown:Pe,onKeyUp:it,rightSection:z||(r||y||_==="unstyled"?null:jt),rightSectionWidth:N||k.fn.size({size:O,sizes:wAe})+1,radius:v,max:u,min:a,step:c,size:O,styles:C,classNames:I,inputMode:B||plt(c,b,WXe()),__staticSelector:"NumberInput",unstyled:V}))});AAe.displayName="@mantine/core/NumberInput";const Ile={xs:3,sm:5,md:8,lg:12,xl:16},$lt=FKe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var Rlt=ht((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:Ile}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${$lt} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:Ile})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const Nlt=Rlt,CAe=A.createContext(!1),Dlt=CAe.Provider,Llt=()=>A.useContext(CAe);function IAe({children:e,openDelay:t=0,closeDelay:n=0}){return L.createElement(Dlt,{value:!0},L.createElement(Htt,{delay:{open:t,close:n}},e))}IAe.displayName="@mantine/core/TooltipGroup";var Mlt=Object.defineProperty,Flt=Object.defineProperties,Blt=Object.getOwnPropertyDescriptors,Ole=Object.getOwnPropertySymbols,jlt=Object.prototype.hasOwnProperty,zlt=Object.prototype.propertyIsEnumerable,Ple=(e,t,n)=>t in e?Mlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kle=(e,t)=>{for(var n in t||(t={}))jlt.call(t,n)&&Ple(e,n,t[n]);if(Ole)for(var n of Ole(t))zlt.call(t,n)&&Ple(e,n,t[n]);return e},Ult=(e,t)=>Flt(e,Blt(t));function Vlt(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var Hlt=ht((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:Ult(kle(kle({},e.fn.fontStyles()),Vlt(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const OAe=Hlt,PAe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function qlt({offset:e,position:t}){const[n,r]=A.useState(!1),i=A.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=qG({placement:t,middleware:[UG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=A.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return A.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=lp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var Wlt=Object.defineProperty,Glt=Object.defineProperties,Ylt=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,kAe=Object.prototype.hasOwnProperty,$Ae=Object.prototype.propertyIsEnumerable,$le=(e,t,n)=>t in e?Wlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g9=(e,t)=>{for(var n in t||(t={}))kAe.call(t,n)&&$le(e,n,t[n]);if(WN)for(var n of WN(t))$Ae.call(t,n)&&$le(e,n,t[n]);return e},y9=(e,t)=>Glt(e,Ylt(t)),Klt=(e,t)=>{var n={};for(var r in e)kAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&$Ae.call(e,r)&&(n[r]=e[r]);return n};const Xlt={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Au("popover")};function RAe(e){var t;const n=Ct("TooltipFloating",Xlt,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,b=Klt(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:E,x:w,y:x,opened:S,boundaryRef:I,floating:C,setOpened:O}=qlt({offset:p,position:m}),{classes:z,cx:N}=OAe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!IC(r))throw new Error(PAe.children);const $=Ts(I,r.ref),D=V=>{var j,G;(G=(j=r.props).onMouseEnter)==null||G.call(j,V),E(V),O(!0)},B=V=>{var j,G;(G=(j=r.props).onMouseLeave)==null||G.call(j,V),O(!1)};return _?L.createElement(L.Fragment,null,r):L.createElement(L.Fragment,null,L.createElement($C,{withinPortal:s},L.createElement(At,y9(g9({},b),{ref:C,className:N(z.tooltip,a),style:y9(g9({},o),{zIndex:v,display:S?"block":"none",top:x??"",left:(t=Math.round(w))!=null?t:""})}),h)),A.cloneElement(r,y9(g9({},r.props),{[i]:$,onMouseEnter:D,onMouseLeave:B})))}RAe.displayName="@mantine/core/TooltipFloating";function Qlt(e){const[t,n]=A.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Llt(),o=vl(),{delay:a,currentId:u,setCurrentId:l}=WSe(),c=A.useCallback(S=>{n(S),S&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:b}={}}}=qG({placement:e.position,open:i,onOpenChange:c,middleware:[NSe(e.offset),UG({padding:8}),RSe(),USe({element:e.arrowRef}),...e.inline?[LSe()]:[]]}),{getReferenceProps:E,getFloatingProps:w}=jtt([Vtt(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),Xtt(m,{enabled:e.events.focus,keyboardOnly:!0}),Wtt(m,{role:"tooltip"}),Ktt(m,{enabled:typeof e.opened===void 0}),qtt(m,{id:o})]);return GSe({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),_s(()=>{var S;(S=e.onPositionChange)==null||S.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:b,reference:h,floating:p,getFloatingProps:w,getReferenceProps:E,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var Jlt=Object.defineProperty,Zlt=Object.defineProperties,ect=Object.getOwnPropertyDescriptors,GN=Object.getOwnPropertySymbols,NAe=Object.prototype.hasOwnProperty,DAe=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?Jlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qx=(e,t)=>{for(var n in t||(t={}))NAe.call(t,n)&&Rle(e,n,t[n]);if(GN)for(var n of GN(t))DAe.call(t,n)&&Rle(e,n,t[n]);return e},tct=(e,t)=>Zlt(e,ect(t)),nct=(e,t)=>{var n={};for(var r in e)NAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&DAe.call(e,r)&&(n[r]=e[r]);return n};const rct={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Au("popover"),positionDependencies:[]},f6=A.forwardRef((e,t)=>{const n=A.useRef(null),r=Ct("Tooltip",rct,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:b,arrowSize:E,arrowOffset:w,arrowRadius:x,offset:S,transition:I,transitionDuration:C,multiline:O,width:z,events:N,zIndex:$,disabled:D,positionDependencies:B,onClick:V,onMouseEnter:j,onMouseLeave:G,inline:U}=r,P=nct(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:k,cx:H,theme:M}=OAe({radius:h,color:p,width:z,multiline:O},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),F=Qlt({position:aTe(M.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:N,arrowRef:n,offset:S+(b?E/2:0),positionDependencies:[...B,i],inline:U});if(!IC(i))throw new Error(PAe.children);const J=Ts(F.reference,i.ref,t);return L.createElement(L.Fragment,null,L.createElement($C,{withinPortal:d},L.createElement(LC,{mounted:!D&&F.opened,transition:I,duration:F.isGroupPhase?10:C},se=>{var ae,ce;return L.createElement(At,qx(qx({},P),F.getFloatingProps({ref:F.floating,className:k.tooltip,style:tct(qx(qx({},v),se),{zIndex:$,top:(ae=F.y)!=null?ae:0,left:(ce=F.x)!=null?ce:0})})),a,L.createElement(WG,{ref:n,arrowX:F.arrowX,arrowY:F.arrowY,visible:b,withBorder:!1,position:F.placement,arrowSize:E,arrowOffset:w,arrowRadius:x,className:k.arrow}))})),A.cloneElement(i,F.getReferenceProps(qx({onClick:V,onMouseEnter:j,onMouseLeave:G,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:J,className:H(_,i.props.className)},i.props))))});f6.Group=IAe;f6.Floating=RAe;f6.displayName="@mantine/core/Tooltip";const LAe=f6;var ict=Object.defineProperty,sct=Object.defineProperties,oct=Object.getOwnPropertyDescriptors,YN=Object.getOwnPropertySymbols,MAe=Object.prototype.hasOwnProperty,FAe=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?ict(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gz=(e,t)=>{for(var n in t||(t={}))MAe.call(t,n)&&Nle(e,n,t[n]);if(YN)for(var n of YN(t))FAe.call(t,n)&&Nle(e,n,t[n]);return e},BAe=(e,t)=>sct(e,oct(t)),Dle=(e,t)=>{var n={};for(var r in e)MAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&FAe.call(e,r)&&(n[r]=e[r]);return n};function act(e){return e.reduce((t,n)=>(t.sections.push(BAe(Gz({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const uct={size:"md",radius:"sm",striped:!1,animate:!1,label:""},jAe=A.forwardRef((e,t)=>{const n=Ct("Progress",uct,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=Dle(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=Nlt({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),b=Array.isArray(p)?act(p).map((E,w)=>{var x=E,{tooltip:S,accumulated:I,value:C,label:O,color:z}=x,N=Dle(x,["tooltip","accumulated","value","label","color"]);return L.createElement(LAe.Floating,{label:S,disabled:!S,key:w},L.createElement(At,BAe(Gz({},N),{className:v(y.bar,N.className),sx:{width:`${C}%`,left:`${I}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:z||_.primaryColor}).background}}),O&&L.createElement(Ot,{className:y.label},O)))}):null;return L.createElement(At,Gz({className:v(y.root,r),ref:t},g),b||L.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?L.createElement(Ot,{className:y.label},c):""))});jAe.displayName="@mantine/core/Progress";var lct=Object.defineProperty,Lle=Object.getOwnPropertySymbols,cct=Object.prototype.hasOwnProperty,fct=Object.prototype.propertyIsEnumerable,Mle=(e,t,n)=>t in e?lct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dct=(e,t)=>{for(var n in t||(t={}))cct.call(t,n)&&Mle(e,n,t[n]);if(Lle)for(var n of Lle(t))fct.call(t,n)&&Mle(e,n,t[n]);return e};function hct(e){return L.createElement("svg",dct({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),L.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const zAe=A.createContext(null),pct=zAe.Provider,mct=()=>A.useContext(zAe);var gct=Object.defineProperty,KN=Object.getOwnPropertySymbols,UAe=Object.prototype.hasOwnProperty,VAe=Object.prototype.propertyIsEnumerable,Fle=(e,t,n)=>t in e?gct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ble=(e,t)=>{for(var n in t||(t={}))UAe.call(t,n)&&Fle(e,n,t[n]);if(KN)for(var n of KN(t))VAe.call(t,n)&&Fle(e,n,t[n]);return e},yct=(e,t)=>{var n={};for(var r in e)UAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&VAe.call(e,r)&&(n[r]=e[r]);return n};const vct={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},HAe=A.forwardRef((e,t)=>{const n=Ct("RadioGroup",vct,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=yct(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=Aa({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return L.createElement(pct,{value:{value:m,onChange:y,size:l,name:h}},L.createElement(is.Wrapper,Ble(Ble({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),L.createElement(JTe,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});HAe.displayName="@mantine/core/RadioGroup";var _ct=Object.defineProperty,bct=Object.defineProperties,wct=Object.getOwnPropertyDescriptors,jle=Object.getOwnPropertySymbols,Ect=Object.prototype.hasOwnProperty,xct=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?_ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sct=(e,t)=>{for(var n in t||(t={}))Ect.call(t,n)&&zle(e,n,t[n]);if(jle)for(var n of jle(t))xct.call(t,n)&&zle(e,n,t[n]);return e},Tct=(e,t)=>bct(e,wct(t));const v9={xs:16,sm:20,md:24,lg:30,xl:36},nP={xs:6,sm:8,md:10,lg:14,xl:16};var Act=ht((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:nP,size:t}),height:e.fn.size({sizes:nP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:nP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:nP,size:t})/2}px)`},radio:Tct(Sct({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:v9,size:t}),height:e.fn.size({sizes:v9,size:t}),borderRadius:e.fn.size({sizes:v9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}});const Cct=Act;var Ict=Object.defineProperty,XN=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable,Ule=(e,t,n)=>t in e?Ict(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rP=(e,t)=>{for(var n in t||(t={}))qAe.call(t,n)&&Ule(e,n,t[n]);if(XN)for(var n of XN(t))WAe.call(t,n)&&Ule(e,n,t[n]);return e},Oct=(e,t)=>{var n={};for(var r in e)qAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&WAe.call(e,r)&&(n[r]=e[r]);return n};const Pct={icon:hct,transitionDuration:100,size:"sm",labelPosition:"right"},QN=A.forwardRef((e,t)=>{var n,r;const i=Ct("Radio",Pct,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:b,description:E,error:w}=i,x=Oct(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),S=mct(),I=(n=S==null?void 0:S.size)!=null?n:l,C=e.size?l:I,{classes:O}=Cct({color:d,size:C,transitionDuration:y,labelPosition:b,error:!!w},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:z,rest:N}=wf(x),$=vl(a),D=S?{checked:S.value===N.value,name:(r=N.name)!=null?r:S.name,onChange:S.onChange}:{};return L.createElement(ZG,rP(rP({className:s,sx:m,style:o,id:$,size:C,labelPosition:b,label:u,description:E,error:w,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":D.checked||void 0},z),v),L.createElement("div",{className:O.inner},L.createElement("input",rP(rP({ref:t,className:O.radio,type:"radio",id:$,disabled:f},N),D)),L.createElement(g,{className:O.icon,"aria-hidden":!0})))});QN.displayName="@mantine/core/Radio";QN.Group=HAe;var kct=Object.defineProperty,$ct=Object.defineProperties,Rct=Object.getOwnPropertyDescriptors,Vle=Object.getOwnPropertySymbols,Nct=Object.prototype.hasOwnProperty,Dct=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?kct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iP=(e,t)=>{for(var n in t||(t={}))Nct.call(t,n)&&Hle(e,n,t[n]);if(Vle)for(var n of Vle(t))Dct.call(t,n)&&Hle(e,n,t[n]);return e},Lct=(e,t)=>$ct(e,Rct(t));const qk=4,qle={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var Mct=ht((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:Lct(iP(iP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:qle[a in qle?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:iP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:iP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:qk},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const Fct=Mct;var Bct=Object.defineProperty,JN=Object.getOwnPropertySymbols,GAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,Wle=(e,t,n)=>t in e?Bct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jct=(e,t)=>{for(var n in t||(t={}))GAe.call(t,n)&&Wle(e,n,t[n]);if(JN)for(var n of JN(t))YAe.call(t,n)&&Wle(e,n,t[n]);return e},zct=(e,t)=>{var n={};for(var r in e)GAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&YAe.call(e,r)&&(n[r]=e[r]);return n};const Uct={disabled:!1,size:"sm",transitionDuration:200},KAe=A.forwardRef((e,t)=>{var n,r,i,s;const o=Ct("SegmentedControl",Uct,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:b,defaultValue:E,orientation:w,unstyled:x}=o,S=zct(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),I=as(),C=r6(),O=I.respectReducedMotion?C:!1,z=l.map(ae=>typeof ae=="string"?{label:ae,value:ae}:ae),N=A.useRef(),[$,D]=A.useState(!1),[B,V]=Aa({value:f,defaultValue:E,finalValue:Array.isArray(z)&&(s=(i=(n=z.find(ae=>!ae.disabled))==null?void 0:n.value)!=null?i:(r=z[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:j,cx:G}=Fct({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:O||!$,transitionDuration:y,transitionTimingFunction:v,orientation:w},{classNames:_,styles:b,unstyled:x,name:"SegmentedControl"}),[U,P]=A.useState({width:0,height:0,translate:[0,0]}),k=vl(c),H=A.useRef({}),[M,F]=Eb();kG(()=>{N.current?D(!0):(N.current=!0,D(!1))}),A.useEffect(()=>{if(B in H.current&&M.current){const ae=H.current[B],ce=ae.getBoundingClientRect(),le=ae.offsetWidth/ce.width,ge=ce.width*le||0,ue=ce.height*le||0,Fe=F.width-ae.parentElement.offsetLeft+qk-ge,ke=ae.parentElement.offsetLeft-qk;P({width:ge,height:ue,translate:[I.dir==="rtl"?Fe:ke,ae.parentElement.offsetTop-qk]})}},[B,F]);const J=z.map(ae=>L.createElement("div",{className:G(j.control,{[j.controlActive]:B===ae.value}),key:ae.value},L.createElement("input",{className:j.input,disabled:u||ae.disabled,type:"radio",name:k,value:ae.value,id:`${k}-${ae.value}`,checked:B===ae.value,onChange:()=>V(ae.value)}),L.createElement("label",{className:G(j.label,{[j.labelActive]:B===ae.value,[j.disabled]:u||ae.disabled}),htmlFor:`${k}-${ae.value}`,ref:ce=>{H.current[ae.value]=ce}},ae.label))),se=Ts(M,t);return z.length===0?null:L.createElement(At,jct({className:G(j.root,a),ref:se},S),typeof B=="string"&&$&&L.createElement(At,{component:"span",className:j.active,sx:{width:U.width,height:U.height,transform:`translate(${U.translate[0]}px, ${U.translate[1]}px )`}}),J)});KAe.displayName="@mantine/core/SegmentedControl";function Vct({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var Hct=ht(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const qct=Hct;var Wct=Object.defineProperty,Gct=Object.defineProperties,Yct=Object.getOwnPropertyDescriptors,ZN=Object.getOwnPropertySymbols,XAe=Object.prototype.hasOwnProperty,QAe=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?Wct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wx=(e,t)=>{for(var n in t||(t={}))XAe.call(t,n)&&Gle(e,n,t[n]);if(ZN)for(var n of ZN(t))QAe.call(t,n)&&Gle(e,n,t[n]);return e},_9=(e,t)=>Gct(e,Yct(t)),Kct=(e,t)=>{var n={};for(var r in e)XAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&QAe.call(e,r)&&(n[r]=e[r]);return n};function Xct(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Qct(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const Jct={required:!1,size:"sm",shadow:"sm",itemComponent:MG,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:Xct,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:Qct,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Au("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},JAe=A.forwardRef((e,t)=>{const n=dTe("Select",Jct,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:b,filter:E,maxDropdownHeight:w,searchable:x,clearable:S,nothingFound:I,clearButtonLabel:C,limit:O,disabled:z,onSearchChange:N,searchValue:$,rightSection:D,rightSectionWidth:B,creatable:V,getCreateLabel:j,shouldCreate:G,selectOnBlur:U,onCreate:P,dropdownComponent:k,onDropdownClose:H,onDropdownOpen:M,withinPortal:F,switchDirectionOnFlip:J,zIndex:se,name:ae,dropdownPosition:ce,allowDeselect:le,placeholder:ge,filterDataOnExactSearchMatch:ue,clearButtonTabIndex:Fe,form:ke,positionDependencies:Ge,readOnly:Re}=n,Oe=Kct(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:Le,cx:Ut,theme:Qe}=qct(),[je,bt]=A.useState(g),[et,ut]=A.useState(-1),lt=A.useRef(),jt=A.useRef({}),[Dn,he]=A.useState("column"),_e=Dn==="column",{scrollIntoView:Pe,targetRef:it,scrollableRef:Ye}=uxe({duration:0,offset:5,cancelable:!1,isList:!0}),at=le===void 0?S:le,tt=Ce=>{if(je!==Ce){bt(Ce);const ft=Ce?M:H;typeof ft=="function"&&ft()}},vt=V&&typeof j=="function";let In=null;const Wt=o.map(Ce=>typeof Ce=="string"?{label:Ce,value:Ce}:Ce),Vt=TEe({data:Wt}),[hr,Yn,ku]=Aa({value:a,defaultValue:u,finalValue:null,onChange:l}),Mr=Vt.find(Ce=>Ce.value===hr),[us,ti]=Aa({value:$,defaultValue:(Mr==null?void 0:Mr.label)||"",finalValue:void 0,onChange:N}),Ei=Ce=>{ti(Ce),x&&typeof N=="function"&&N(Ce)},qr=()=>{var Ce;Re||(Yn(null),ku||Ei(""),(Ce=lt.current)==null||Ce.focus())};A.useEffect(()=>{const Ce=Vt.find(ft=>ft.value===hr);Ce?Ei(Ce.label):(!vt||!hr)&&Ei("")},[hr]),A.useEffect(()=>{Mr&&(!x||!je)&&Ei(Mr.label)},[Mr==null?void 0:Mr.label]);const yr=Ce=>{if(!Re)if(at&&(Mr==null?void 0:Mr.value)===Ce.value)Yn(null),tt(!1);else{if(Ce.creatable&&typeof P=="function"){const ft=P(Ce.value);typeof ft<"u"&&ft!==null&&Yn(typeof ft=="string"?ft:ft.value)}else Yn(Ce.value);ku||Ei(Ce.label),ut(-1),tt(!1),lt.current.focus()}},gt=Vct({data:Vt,searchable:x,limit:O,searchValue:us,filter:E,filterDataOnExactSearchMatch:ue,value:hr});vt&&G(us,gt)&&(In=j(us),gt.push({label:us,value:us,creatable:!0}));const Fr=(Ce,ft,Bt)=>{let St=Ce;for(;Bt(St);)if(St=ft(St),!gt[St].disabled)return St;return Ce};_s(()=>{ut(-1)},[us]);const xi=hr?gt.findIndex(Ce=>Ce.value===hr):0,Yi=!Re&&(gt.length>0?je:je&&!!I),Qs=()=>{ut(Ce=>{var ft;const Bt=Fr(Ce,St=>St-1,St=>St>0);return it.current=jt.current[(ft=gt[Bt])==null?void 0:ft.value],Yi&&Pe({alignment:_e?"start":"end"}),Bt})},Ba=()=>{ut(Ce=>{var ft;const Bt=Fr(Ce,St=>St+1,St=>St<gt.length-1);return it.current=jt.current[(ft=gt[Bt])==null?void 0:ft.value],Yi&&Pe({alignment:_e?"end":"start"}),Bt})},ne=()=>window.setTimeout(()=>{var Ce;it.current=jt.current[(Ce=gt[xi])==null?void 0:Ce.value],Pe({alignment:_e?"end":"start"})},0);_s(()=>{Yi&&ne()},[Yi]);const Q=Ce=>{switch(typeof f=="function"&&f(Ce),Ce.key){case"ArrowUp":{Ce.preventDefault(),je?_e?Qs():Ba():(ut(xi),tt(!0),ne());break}case"ArrowDown":{Ce.preventDefault(),je?_e?Ba():Qs():(ut(xi),tt(!0),ne());break}case"Home":{if(!x){Ce.preventDefault(),je||tt(!0);const ft=gt.findIndex(Bt=>!Bt.disabled);ut(ft),Yi&&Pe({alignment:_e?"end":"start"})}break}case"End":{if(!x){Ce.preventDefault(),je||tt(!0);const ft=gt.map(Bt=>!!Bt.disabled).lastIndexOf(!1);ut(ft),Yi&&Pe({alignment:_e?"end":"start"})}break}case"Escape":{Ce.preventDefault(),tt(!1),ut(-1);break}case" ":{x||(Ce.preventDefault(),gt[et]&&je?yr(gt[et]):(tt(!0),ut(xi),ne()));break}case"Enter":x||Ce.preventDefault(),gt[et]&&je&&(Ce.preventDefault(),yr(gt[et]))}},ie=Ce=>{typeof d=="function"&&d(Ce);const ft=Vt.find(Bt=>Bt.value===hr);U&&gt[et]&&je&&yr(gt[et]),Ei((ft==null?void 0:ft.label)||""),tt(!1)},ve=Ce=>{typeof h=="function"&&h(Ce),x&&tt(!0)},ye=Ce=>{Re||(Ei(Ce.currentTarget.value),S&&Ce.currentTarget.value===""&&Yn(null),ut(-1),tt(!0))},pt=()=>{Re||(tt(!je),hr&&!je&&ut(xi))};return L.createElement(is.Wrapper,_9(Wx({},i),{__staticSelector:"Select"}),L.createElement(bg,{opened:Yi,transition:p,transitionDuration:m,shadow:"sm",withinPortal:F,__staticSelector:"Select",onDirectionChange:he,switchDirectionOnFlip:J,zIndex:se,dropdownPosition:ce,positionDependencies:Ge,classNames:_,styles:b,unstyled:v},L.createElement(bg.Target,null,L.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":Yi?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":Yi,onMouseLeave:()=>ut(-1),tabIndex:-1},L.createElement("input",{type:"hidden",name:ae,value:hr||"",form:ke,disabled:z}),L.createElement(is,Wx(_9(Wx(Wx({autoComplete:"off",type:"search"},r),Oe),{ref:Ts(t,lt),onKeyDown:Q,__staticSelector:"Select",value:us,placeholder:ge,onChange:ye,"aria-autocomplete":"list","aria-controls":Yi?`${r.id}-items`:null,"aria-activedescendant":et>=0?`${r.id}-${et}`:null,onMouseDown:pt,onBlur:ie,onFocus:ve,readOnly:!x||Re,disabled:z,"data-mantine-stop-propagation":Yi,name:null,classNames:_9(Wx({},_),{input:Ut({[Le.input]:!x},_==null?void 0:_.input)})}),pAe({theme:Qe,rightSection:D,rightSectionWidth:B,styles:b,size:r.size,shouldClear:S&&!!Mr,clearButtonLabel:C,onClear:qr,error:i.error,clearButtonTabIndex:Fe,disabled:z,readOnly:Re}))))),L.createElement(bg.Dropdown,{component:k||u6,maxHeight:w,direction:Dn,id:r.id,innerRef:Ye,__staticSelector:"Select",classNames:_,styles:b},L.createElement(LG,{data:gt,hovered:et,classNames:_,styles:b,isItemSelected:Ce=>Ce===hr,uuid:r.id,__staticSelector:"Select",onItemHover:ut,onItemSelect:yr,itemsRefs:jt,itemComponent:c,size:r.size,nothingFound:I,creatable:vt&&!!In,createLabel:In,"aria-label":i.label,unstyled:v}))))});JAe.displayName="@mantine/core/Select";function eD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Yz({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var Zct=Object.defineProperty,eft=Object.defineProperties,tft=Object.getOwnPropertyDescriptors,Yle=Object.getOwnPropertySymbols,nft=Object.prototype.hasOwnProperty,rft=Object.prototype.propertyIsEnumerable,Kle=(e,t,n)=>t in e?Zct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ift=(e,t)=>{for(var n in t||(t={}))nft.call(t,n)&&Kle(e,n,t[n]);if(Yle)for(var n of Yle(t))rft.call(t,n)&&Kle(e,n,t[n]);return e},sft=(e,t)=>eft(e,tft(t));const tu={xs:4,sm:6,md:8,lg:10,xl:12};var oft=ht((e,{size:t,disabled:n})=>({root:sft(ift({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:tu,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const aft=oft;var uft=Object.defineProperty,lft=Object.defineProperties,cft=Object.getOwnPropertyDescriptors,Xle=Object.getOwnPropertySymbols,fft=Object.prototype.hasOwnProperty,dft=Object.prototype.propertyIsEnumerable,Qle=(e,t,n)=>t in e?uft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hft=(e,t)=>{for(var n in t||(t={}))fft.call(t,n)&&Qle(e,n,t[n]);if(Xle)for(var n of Xle(t))dft.call(t,n)&&Qle(e,n,t[n]);return e},pft=(e,t)=>lft(e,cft(t)),mft=ht((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:pft(hft({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:tu,size:n})*2,width:i||e.fn.size({sizes:tu,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const gft=mft,tD=A.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:b,unstyled:E,thumbSize:w},x)=>{const{classes:S,cx:I,theme:C}=gft({color:a,size:c,disabled:b,thumbSize:w},{classNames:u,styles:l,unstyled:E,name:"Slider"}),[O,z]=A.useState(!1),N=p||s||O||v;return L.createElement(At,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:x,className:I(S.thumb,{[S.dragging]:s}),onFocus:()=>{z(!0),typeof g=="function"&&g()},onBlur:()=>{z(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:$=>$.stopPropagation(),style:{[C.dir==="rtl"?"right":"left"]:`${r}%`}},_,L.createElement(LC,{mounted:i!=null&&N,duration:d,transition:f,timingFunction:h||C.transitionTimingFunction},$=>L.createElement("div",{style:$,className:S.label},i)))});tD.displayName="@mantine/core/SliderThumb";function yft({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var vft=ht((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:tu})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:tu,size:t}),width:e.fn.size({sizes:tu,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:tu,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));const _ft=vft;function ZAe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=_ft({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>L.createElement(At,{className:h.markWrapper,sx:{left:`${eD({value:g.value,min:r,max:i})}%`},key:y},L.createElement("div",{className:p(h.mark,{[h.markFilled]:yft({mark:g,value:s,offset:u,inverted:d})})}),g.label&&L.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return L.createElement("div",null,m)}ZAe.displayName="@mantine/core/SliderMarks";var bft=ht((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:tu,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:tu}),marginLeft:e.fn.size({size:n,sizes:tu}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:tu}),left:-e.fn.size({size:n,sizes:tu}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}}));const wft=bft;var Eft=Object.defineProperty,xft=Object.defineProperties,Sft=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,eCe=Object.prototype.hasOwnProperty,tCe=Object.prototype.propertyIsEnumerable,Jle=(e,t,n)=>t in e?Eft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tft=(e,t)=>{for(var n in t||(t={}))eCe.call(t,n)&&Jle(e,n,t[n]);if(nD)for(var n of nD(t))tCe.call(t,n)&&Jle(e,n,t[n]);return e},Aft=(e,t)=>xft(e,Sft(t)),Cft=(e,t)=>{var n={};for(var r in e)eCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&tCe.call(e,r)&&(n[r]=e[r]);return n};function rY(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=Cft(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=wft({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return L.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},L.createElement(At,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:tu})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:tu})}px)`})}),u,L.createElement(ZAe,Aft(Tft({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}rY.displayName="@mantine/core/SliderTrack";var Ift=Object.defineProperty,Oft=Object.defineProperties,Pft=Object.getOwnPropertyDescriptors,rD=Object.getOwnPropertySymbols,nCe=Object.prototype.hasOwnProperty,rCe=Object.prototype.propertyIsEnumerable,Zle=(e,t,n)=>t in e?Ift(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kft=(e,t)=>{for(var n in t||(t={}))nCe.call(t,n)&&Zle(e,n,t[n]);if(rD)for(var n of rD(t))rCe.call(t,n)&&Zle(e,n,t[n]);return e},$ft=(e,t)=>Oft(e,Pft(t)),Rft=(e,t)=>{var n={};for(var r in e)nCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&rCe.call(e,r)&&(n[r]=e[r]);return n};const iY=A.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=Rft(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=aft({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return L.createElement(At,$ft(kft({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});iY.displayName="@mantine/core/SliderRoot";var Nft=Object.defineProperty,Dft=Object.defineProperties,Lft=Object.getOwnPropertyDescriptors,iD=Object.getOwnPropertySymbols,iCe=Object.prototype.hasOwnProperty,sCe=Object.prototype.propertyIsEnumerable,ece=(e,t,n)=>t in e?Nft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mft=(e,t)=>{for(var n in t||(t={}))iCe.call(t,n)&&ece(e,n,t[n]);if(iD)for(var n of iD(t))sCe.call(t,n)&&ece(e,n,t[n]);return e},Fft=(e,t)=>Dft(e,Lft(t)),Bft=(e,t)=>{var n={};for(var r in e)iCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&sCe.call(e,r)&&(n[r]=e[r]);return n};const jft={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},sY=A.forwardRef((e,t)=>{const n=Ct("Slider",jft,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,thumbChildren:I,disabled:C,unstyled:O,thumbSize:z,scale:N,inverted:$}=n,D=Bft(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),B=as(),[V,j]=A.useState(!1),[G,U]=Aa({value:typeof o=="number"?sf(o,f,d):o,defaultValue:typeof m=="number"?sf(m,f,d):m,finalValue:sf(0,f,d),onChange:a}),P=A.useRef(G),k=A.useRef(),H=eD({value:G,min:f,max:d}),M=N(G),F=typeof v=="function"?v(M):v,J=A.useCallback(({x:ge})=>{if(!C){const ue=Yz({value:ge,min:f,max:d,step:h,precision:p});U(ue),P.current=ue}},[C,f,d,h,p]),{ref:se,active:ae}=axe(J,{onScrubEnd:()=>u==null?void 0:u(P.current)},B.dir),ce=ge=>{ge.stopPropagation()},le=ge=>{if(!C)switch(ge.key){case"ArrowUp":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(G+h,f),d);u==null||u(ue),U(ue);break}case"ArrowRight":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(B.dir==="rtl"?G-h:G+h,f),d);u==null||u(ue),U(ue);break}case"ArrowDown":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(G-h,f),d);u==null||u(ue),U(ue);break}case"ArrowLeft":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(B.dir==="rtl"?G+h:G-h,f),d);u==null||u(ue),U(ue);break}case"Home":{ge.preventDefault(),k.current.focus(),u==null||u(f),U(f);break}case"End":{ge.preventDefault(),k.current.focus(),u==null||u(d),U(d);break}}};return L.createElement(iY,Fft(Mft({},D),{size:l,ref:Ts(se,t),onKeyDownCapture:le,onMouseDownCapture:()=>{var ge;return(ge=se.current)==null?void 0:ge.focus()},classNames:r,styles:i,disabled:C,unstyled:O}),L.createElement(rY,{inverted:$,offset:0,filled:H,marks:y,size:l,radius:c,color:s,min:f,max:d,value:M,onChange:U,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,classNames:r,styles:i,disabled:C,unstyled:O},L.createElement(tD,{max:d,min:f,value:M,position:H,dragging:ae,color:s,size:l,label:F,ref:k,onMouseDown:ce,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,classNames:r,styles:i,thumbLabel:x,showLabelOnHover:S&&V,disabled:C,unstyled:O,thumbSize:z},I)),L.createElement("input",{type:"hidden",name:g,value:M}))});sY.displayName="@mantine/core/Slider";function zft(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var Uft=Object.defineProperty,Vft=Object.defineProperties,Hft=Object.getOwnPropertyDescriptors,sD=Object.getOwnPropertySymbols,oCe=Object.prototype.hasOwnProperty,aCe=Object.prototype.propertyIsEnumerable,tce=(e,t,n)=>t in e?Uft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b9=(e,t)=>{for(var n in t||(t={}))oCe.call(t,n)&&tce(e,n,t[n]);if(sD)for(var n of sD(t))aCe.call(t,n)&&tce(e,n,t[n]);return e},w9=(e,t)=>Vft(e,Hft(t)),qft=(e,t)=>{var n={};for(var r in e)oCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&aCe.call(e,r)&&(n[r]=e[r]);return n};const Wft={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Kz=A.forwardRef((e,t)=>{const n=Ct("RangeSlider",Wft,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,thumbFromLabel:S,thumbToLabel:I,showLabelOnHover:C,thumbChildren:O,disabled:z,unstyled:N,thumbSize:$,scale:D,inverted:B}=n,V=qft(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),j=as(),[G,U]=A.useState(-1),[P,k]=A.useState(!1),[H,M]=Aa({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),F=A.useRef(H),J=A.useRef([]),se=A.useRef(void 0),ae=[eD({value:H[0],min:f,max:d}),eD({value:H[1],min:f,max:d})],ce=Qe=>{M(Qe),F.current=Qe};A.useEffect(()=>{Array.isArray(o)&&(F.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const le=(Qe,je,bt)=>{const et=[...F.current];et[je]=Qe,je===0&&(Qe>et[1]-(h-1e-9)&&(et[1]=Math.min(Qe+h,d)),Qe>(d-(h-1e-9)||f)&&(et[je]=F.current[je])),je===1&&(Qe<et[0]+h&&(et[0]=Math.max(Qe-h,f)),Qe<et[0]+h&&(et[je]=F.current[je])),ce(et),bt&&(u==null||u(F.current))},ge=Qe=>{if(!z){const je=Yz({value:Qe,min:f,max:d,step:p,precision:m});le(je,se.current,!1)}},{ref:ue,active:Fe}=axe(({x:Qe})=>ge(Qe),{onScrubEnd:()=>u==null?void 0:u(F.current)},j.dir);function ke(Qe,je){Qe.stopPropagation(),se.current=je}const Ge=Qe=>{ue.current.focus();const je=ue.current.getBoundingClientRect(),bt=zft(Qe.nativeEvent),et=Yz({value:bt-je.left,max:d,min:f,step:p,containerWidth:je.width}),ut=Math.abs(H[0]-et)>Math.abs(H[1]-et)?1:0,lt=j.dir==="ltr"?ut:ut===1?0:1;se.current=lt},Re=()=>G!==1&&G!==0?(U(0),0):G,Oe=Qe=>{if(!z)switch(Qe.key){case"ArrowUp":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(F.current[je]+p,f),d),je,!0);break}case"ArrowRight":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?F.current[je]-p:F.current[je]+p,f),d),je,!0);break}case"ArrowDown":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(F.current[je]-p,f),d),je,!0);break}case"ArrowLeft":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?F.current[je]+p:F.current[je]-p,f),d),je,!0);break}}},Le={max:d,min:f,color:s,size:l,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,onBlur:()=>U(-1),classNames:r,styles:i},Ut=Array.isArray(O);return L.createElement(iY,w9(b9({},V),{size:l,ref:Ts(ue,t),onTouchStartCapture:Ge,onTouchEndCapture:()=>{se.current=-1},onMouseDownCapture:Ge,onMouseUpCapture:()=>{se.current=-1},onKeyDownCapture:Oe,styles:i,classNames:r,disabled:z,unstyled:N}),L.createElement(rY,{offset:ae[0],marksOffset:H[0],filled:ae[1]-ae[0],marks:v,inverted:B,size:l,radius:c,color:s,min:f,max:d,value:H[1],styles:i,classNames:r,onMouseEnter:C?()=>k(!0):void 0,onMouseLeave:C?()=>k(!1):void 0,onChange:Qe=>{const je=Math.abs(H[0]-Qe)>Math.abs(H[1]-Qe)?1:0,bt=[...H];bt[je]=Qe,ce(bt)},disabled:z,unstyled:N},L.createElement(tD,w9(b9({},Le),{value:D(H[0]),position:ae[0],dragging:Fe,label:typeof _=="function"?_(D(H[0])):_,ref:Qe=>{J.current[0]=Qe},thumbLabel:S,onMouseDown:Qe=>ke(Qe,0),onFocus:()=>U(0),showLabelOnHover:C&&P,disabled:z,unstyled:N,thumbSize:$}),Ut?O[0]:O),L.createElement(tD,w9(b9({},Le),{thumbLabel:I,value:D(H[1]),position:ae[1],dragging:Fe,label:typeof _=="function"?_(D(H[1])):_,ref:Qe=>{J.current[1]=Qe},onMouseDown:Qe=>ke(Qe,1),onFocus:()=>U(1),showLabelOnHover:C&&P,disabled:z,unstyled:N,thumbSize:$}),Ut?O[1]:O)),L.createElement("input",{type:"hidden",name:`${y}_from`,value:H[0]}),L.createElement("input",{type:"hidden",name:`${y}_to`,value:H[1]}))});Kz.displayName="@mantine/core/RangeSlider";var Gft=Object.defineProperty,oD=Object.getOwnPropertySymbols,uCe=Object.prototype.hasOwnProperty,lCe=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?Gft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yft=(e,t)=>{for(var n in t||(t={}))uCe.call(t,n)&&nce(e,n,t[n]);if(oD)for(var n of oD(t))lCe.call(t,n)&&nce(e,n,t[n]);return e},Kft=(e,t)=>{var n={};for(var r in e)uCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&lCe.call(e,r)&&(n[r]=e[r]);return n};const Xft={w:0,h:0},Q2=A.forwardRef((e,t)=>{const n=Ct("Space",Xft,e),{w:r,h:i,sx:s}=n,o=Kft(n,["w","h","sx"]);return L.createElement(At,Yft({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...$1(s)]},o))});Q2.displayName="@mantine/core/Space";var Qft=Object.defineProperty,Jft=Object.defineProperties,Zft=Object.getOwnPropertyDescriptors,rce=Object.getOwnPropertySymbols,edt=Object.prototype.hasOwnProperty,tdt=Object.prototype.propertyIsEnumerable,ice=(e,t,n)=>t in e?Qft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ndt=(e,t)=>{for(var n in t||(t={}))edt.call(t,n)&&ice(e,n,t[n]);if(rce)for(var n of rce(t))tdt.call(t,n)&&ice(e,n,t[n]);return e},rdt=(e,t)=>Jft(e,Zft(t));function idt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function sdt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var odt=ht((e,{element:t,weight:n,size:r,inline:i})=>({root:rdt(ndt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:idt(r,t,e),lineHeight:i?1:sdt(r,t,e),margin:0})}));const adt=odt;var udt=Object.defineProperty,aD=Object.getOwnPropertySymbols,cCe=Object.prototype.hasOwnProperty,fCe=Object.prototype.propertyIsEnumerable,sce=(e,t,n)=>t in e?udt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ldt=(e,t)=>{for(var n in t||(t={}))cCe.call(t,n)&&sce(e,n,t[n]);if(aD)for(var n of aD(t))fCe.call(t,n)&&sce(e,n,t[n]);return e},cdt=(e,t)=>{var n={};for(var r in e)cCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aD)for(var r of aD(e))t.indexOf(r)<0&&fCe.call(e,r)&&(n[r]=e[r]);return n};const fdt={order:1},jc=A.forwardRef((e,t)=>{const n=Ct("Title",fdt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=cdt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=adt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?L.createElement(Ot,ldt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});jc.displayName="@mantine/core/Title";function oY(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const cc="/study/";var oce={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dCe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},ddt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},aY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dCe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ddt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new hdt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hdt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pdt=function(e){const t=dCe(e);return aY.encodeByteArray(t,!0)},uD=function(e){return pdt(e).replace(/\./g,"")},hCe=function(e){try{return aY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pCe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mdt=()=>pCe().__FIREBASE_DEFAULTS__,gdt=()=>{if(typeof process>"u"||typeof oce>"u")return;const e=oce.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ydt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&hCe(e[1]);return t&&JSON.parse(t)},uY=()=>{try{return mdt()||gdt()||ydt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},mCe=e=>{var t,n;return(n=(t=uY())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},vdt=e=>{const t=mCe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},gCe=()=>{var e;return(e=uY())===null||e===void 0?void 0:e.config},yCe=e=>{var t;return(t=uY())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _dt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[uD(JSON.stringify(n)),uD(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bdt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function wdt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Edt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xdt(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function lY(){try{return typeof indexedDB=="object"}catch{return!1}}function Sdt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tdt="FirebaseError";class sh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Tdt,Object.setPrototypeOf(this,sh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,TE.prototype.create)}}class TE{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Adt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sh(i,a,r)}}function Adt(e,t){return e.replace(Cdt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Cdt=/\{\$([^}]+)}/g;function Idt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Z2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(ace(s)&&ace(o)){if(!Z2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ace(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Odt(e,t){const n=new Pdt(e,t);return n.subscribe.bind(n)}class Pdt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kdt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=E9),i.error===void 0&&(i.error=E9),i.complete===void 0&&(i.complete=E9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kdt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function E9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $dt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rdt=1e3,Ndt=2,Ddt=4*60*60*1e3,Ldt=.5;function Mdt(e,t=Rdt,n=Ndt){const r=t*Math.pow(n,e),i=Math.round(Ldt*r*(Math.random()-.5)*2);return Math.min(Ddt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(e){return e&&e._delegate?e._delegate:e}class jd{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fdt=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new J2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jdt(t))try{this.getOrInitializeService({instanceIdentifier:py})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=py){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=py){return this.instances.has(t)}getOptions(t=py){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bdt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=py){return this.component?this.component.multipleInstances?t:py:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Bdt(e){return e===py?void 0:e}function jdt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zdt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Fdt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fn||(Fn={}));const Udt={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},Vdt=Fn.INFO,Hdt={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},qdt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Hdt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class d6{constructor(t){this.name=t,this._logLevel=Vdt,this._logHandler=qdt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Udt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}const Wdt=(e,t)=>t.some(n=>e instanceof n);let uce,lce;function Gdt(){return uce||(uce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ydt(){return lce||(lce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vCe=new WeakMap,Xz=new WeakMap,_Ce=new WeakMap,x9=new WeakMap,cY=new WeakMap;function Kdt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(wg(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&vCe.set(n,e)}).catch(()=>{}),cY.set(t,e),t}function Xdt(e){if(Xz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Xz.set(e,t)}let Qz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Xz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||_Ce.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wg(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Qdt(e){Qz=e(Qz)}function Jdt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(S9(this),t,...n);return _Ce.set(r,t.sort?t.sort():[t]),wg(r)}:Ydt().includes(e)?function(...t){return e.apply(S9(this),t),wg(vCe.get(this))}:function(...t){return wg(e.apply(S9(this),t))}}function Zdt(e){return typeof e=="function"?Jdt(e):(e instanceof IDBTransaction&&Xdt(e),Wdt(e,Gdt())?new Proxy(e,Qz):e)}function wg(e){if(e instanceof IDBRequest)return Kdt(e);if(x9.has(e))return x9.get(e);const t=Zdt(e);return t!==e&&(x9.set(e,t),cY.set(t,e)),t}const S9=e=>cY.get(e);function eht(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=wg(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wg(o.result),u.oldVersion,u.newVersion,wg(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const tht=["get","getKey","getAll","getAllKeys","count"],nht=["put","add","delete","clear"],T9=new Map;function cce(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(T9.get(t))return T9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=nht.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tht.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return T9.set(t,s),s}Qdt(e=>({...e,get:(t,n,r)=>cce(t,n)||e.get(t,n,r),has:(t,n)=>!!cce(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rht{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iht(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iht(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Jz="@firebase/app",fce="0.9.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new d6("@firebase/app"),sht="@firebase/app-compat",oht="@firebase/analytics-compat",aht="@firebase/analytics",uht="@firebase/app-check-compat",lht="@firebase/app-check",cht="@firebase/auth",fht="@firebase/auth-compat",dht="@firebase/database",hht="@firebase/database-compat",pht="@firebase/functions",mht="@firebase/functions-compat",ght="@firebase/installations",yht="@firebase/installations-compat",vht="@firebase/messaging",_ht="@firebase/messaging-compat",bht="@firebase/performance",wht="@firebase/performance-compat",Eht="@firebase/remote-config",xht="@firebase/remote-config-compat",Sht="@firebase/storage",Tht="@firebase/storage-compat",Aht="@firebase/firestore",Cht="@firebase/firestore-compat",Iht="firebase",Oht="10.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz="[DEFAULT]",Pht={[Jz]:"fire-core",[sht]:"fire-core-compat",[aht]:"fire-analytics",[oht]:"fire-analytics-compat",[lht]:"fire-app-check",[uht]:"fire-app-check-compat",[cht]:"fire-auth",[fht]:"fire-auth-compat",[dht]:"fire-rtdb",[hht]:"fire-rtdb-compat",[pht]:"fire-fn",[mht]:"fire-fn-compat",[ght]:"fire-iid",[yht]:"fire-iid-compat",[vht]:"fire-fcm",[_ht]:"fire-fcm-compat",[bht]:"fire-perf",[wht]:"fire-perf-compat",[Eht]:"fire-rc",[xht]:"fire-rc-compat",[Sht]:"fire-gcs",[Tht]:"fire-gcs-compat",[Aht]:"fire-fst",[Cht]:"fire-fst-compat","fire-js":"fire-js",[Iht]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Map,eU=new Map;function kht(e,t){try{e.container.addComponent(t)}catch(n){R1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cp(e){const t=e.name;if(eU.has(t))return R1.debug(`There were multiple attempts to register component ${t}.`),!1;eU.set(t,e);for(const n of lD.values())kht(n,e);return!0}function AE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ht={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Eg=new TE("app","Firebase",$ht);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rht{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Eg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=Oht;function bCe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Zz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Eg.create("bad-app-name",{appName:String(i)});if(n||(n=gCe()),!n)throw Eg.create("no-options");const s=lD.get(i);if(s){if(Z2(n,s.options)&&Z2(r,s.config))return s;throw Eg.create("duplicate-app",{appName:i})}const o=new zdt(i);for(const u of eU.values())o.addComponent(u);const a=new Rht(n,r,o);return lD.set(i,a),a}function fY(e=Zz){const t=lD.get(e);if(!t&&e===Zz&&gCe())return bCe();if(!t)throw Eg.create("no-app",{appName:e});return t}function of(e,t,n){var r;let i=(r=Pht[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),R1.warn(a.join(" "));return}Cp(new jd(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nht="firebase-heartbeat-database",Dht=1,eA="firebase-heartbeat-store";let A9=null;function wCe(){return A9||(A9=eht(Nht,Dht,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(eA)}}}).catch(e=>{throw Eg.create("idb-open",{originalErrorMessage:e.message})})),A9}async function Lht(e){try{return await(await wCe()).transaction(eA).objectStore(eA).get(ECe(e))}catch(t){if(t instanceof sh)R1.warn(t.message);else{const n=Eg.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});R1.warn(n.message)}}}async function dce(e,t){try{const r=(await wCe()).transaction(eA,"readwrite");await r.objectStore(eA).put(t,ECe(e)),await r.done}catch(n){if(n instanceof sh)R1.warn(n.message);else{const r=Eg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});R1.warn(r.message)}}}function ECe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mht=1024,Fht=30*24*60*60*1e3;class Bht{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zht(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hce();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Fht}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hce(),{heartbeatsToSend:r,unsentEntries:i}=jht(this._heartbeatsCache.heartbeats),s=uD(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function hce(){return new Date().toISOString().substring(0,10)}function jht(e,t=Mht){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pce(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pce(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zht{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lY()?Sdt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lht(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dce(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dce(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function pce(e){return uD(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uht(e){Cp(new jd("platform-logger",t=>new rht(t),"PRIVATE")),Cp(new jd("heartbeat",t=>new Bht(t),"PRIVATE")),of(Jz,fce,e),of(Jz,fce,"esm2017"),of("fire-js","")}Uht("");function dY(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function jh(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function mce(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(e){return this instanceof Bn?(this.v=e,this):new Bn(e)}function Uy(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof Bn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function C9(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Bn(e[i](o)),done:!1}:s?s(o):o}:s}}function BT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mce=="function"?mce(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}function xCe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vht=xCe,SCe=new TE("auth","Firebase",xCe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new d6("@firebase/auth");function Hht(e,...t){cD.logLevel<=Fn.WARN&&cD.warn(`Auth (${Tv}): ${e}`,...t)}function Wk(e,...t){cD.logLevel<=Fn.ERROR&&cD.error(`Auth (${Tv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(e,...t){throw hY(e,...t)}function Td(e,...t){return hY(e,...t)}function TCe(e,t,n){const r=Object.assign(Object.assign({},Vht()),{[t]:n});return new TE("auth","Firebase",r).create(t,{appName:e.name})}function qht(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&zd(e,"argument-error"),TCe(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hY(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return SCe.create(e,...t)}function tn(e,t,...n){if(!e)throw hY(t,...n)}function Xh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wk(t),new Error(t)}function Ip(e,t){e||Xh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Wht(){return gce()==="http:"||gce()==="https:"}function gce(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ght(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wht()||wdt()||"connection"in navigator)?navigator.onLine:!0}function Yht(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ip(n>t,"Short delay should be less than long delay!"),this.isMobile=bdt()||Edt()}get(){return Ght()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(e,t){Ip(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ACe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xht=new zC(3e4,6e4);function h6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function CE(e,t,n,r,i={}){return CCe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=jC(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),ACe.fetch()(OCe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function CCe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kht),t);try{const i=new Qht(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw sP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw sP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TCe(e,c,l);zd(e,c)}}catch(i){if(i instanceof sh)throw i;zd(e,"network-request-failed",{message:String(i)})}}async function ICe(e,t,n,r,i={}){const s=await CE(e,t,n,r,i);return"mfaPendingCredential"in s&&zd(e,"multi-factor-auth-required",{_serverResponse:s}),s}function OCe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?pY(e.config,i):`${e.config.apiScheme}://${i}`}class Qht{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Td(this.auth,"network-request-failed")),Xht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Td(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jht(e,t){return CE(e,"POST","/v1/accounts:delete",t)}async function Zht(e,t){return CE(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ept(e,t=!1){const n=xs(e),r=await n.getIdToken(t),i=mY(r);tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:jT(I9(i.auth_time)),issuedAtTime:jT(I9(i.iat)),expirationTime:jT(I9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function I9(e){return Number(e)*1e3}function mY(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Wk("JWT malformed, contained fewer than 3 sections"),null;try{const i=hCe(n);return i?JSON.parse(i):(Wk("Failed to decode base64 JWT payload"),null)}catch(i){return Wk("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tpt(e){const t=mY(e);return tn(t,"internal-error"),tn(typeof t.exp<"u","internal-error"),tn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof sh&&npt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function npt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rpt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PCe{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jT(this.lastLoginAt),this.creationTime=jT(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(e){var t;const n=e.auth,r=await e.getIdToken(),i=await tA(e,Zht(n,{idToken:r}));tn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?opt(s.providerUserInfo):[],a=spt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new PCe(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function ipt(e){const t=xs(e);await fD(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function spt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function opt(e){return e.map(t=>{var{providerId:n}=t,r=dY(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function apt(e,t){const n=await CCe(e,{},async()=>{const r=jC({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=OCe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ACe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function upt(e,t){return CE(e,"POST","/v2/accounts:revokeToken",h6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){tn(t.idToken,"internal-error"),tn(typeof t.idToken<"u","internal-error"),tn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):tpt(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await apt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new nA;return r&&(tn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(tn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(tn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new nA,this.toJSON())}_performRefresh(){return Xh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(e,t){tn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class c1{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=dY(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rpt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new PCe(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await tA(this,this.stsTokenManager.getToken(this.auth,t));return tn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ept(this,t)}reload(){return ipt(this)}_assign(t){this!==t&&(tn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new c1(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await fD(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await tA(this,Jht(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:w,stsTokenManager:x}=n;tn(_&&x,t,"internal-error");const S=nA.fromJSON(this.name,x);tn(typeof _=="string",t,"internal-error"),pm(f,t.name),pm(d,t.name),tn(typeof b=="boolean",t,"internal-error"),tn(typeof E=="boolean",t,"internal-error"),pm(h,t.name),pm(p,t.name),pm(m,t.name),pm(g,t.name),pm(y,t.name),pm(v,t.name);const I=new c1({uid:_,auth:t,email:d,emailVerified:b,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return w&&Array.isArray(w)&&(I.providerData=w.map(C=>Object.assign({},C))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new nA;i.updateFromServerResponse(n);const s=new c1({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await fD(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yce=new Map;function Qh(e){Ip(e instanceof Function,"Expected a class definition");let t=yce.get(e);return t?(Ip(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yce.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kCe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}kCe.type="NONE";const vce=kCe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(e,t,n){return`firebase:${e}:${t}:${n}`}class Sb{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gk(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gk("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?c1._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Sb(Qh(vce),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Qh(vce);const o=Gk(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=c1._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Sb(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Sb(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ce(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NCe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($Ce(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(LCe(t))return"Blackberry";if(MCe(t))return"Webos";if(gY(t))return"Safari";if((t.includes("chrome/")||RCe(t))&&!t.includes("edge/"))return"Chrome";if(DCe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $Ce(e=Zo()){return/firefox\//i.test(e)}function gY(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function RCe(e=Zo()){return/crios\//i.test(e)}function NCe(e=Zo()){return/iemobile/i.test(e)}function DCe(e=Zo()){return/android/i.test(e)}function LCe(e=Zo()){return/blackberry/i.test(e)}function MCe(e=Zo()){return/webos/i.test(e)}function p6(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lpt(e=Zo()){var t;return p6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cpt(){return xdt()&&document.documentMode===10}function FCe(e=Zo()){return p6(e)||DCe(e)||MCe(e)||LCe(e)||/windows phone/i.test(e)||NCe(e)}function fpt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BCe(e,t=[]){let n;switch(e){case"Browser":n=_ce(Zo());break;case"Worker":n=`${_ce(Zo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dpt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hpt(e,t={}){return CE(e,"GET","/v2/passwordPolicy",h6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppt=6;class mpt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ppt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gpt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bce(this),this.idTokenSubscription=new bce(this),this.beforeStateQueue=new dpt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SCe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Qh(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Sb.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await fD(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Yht()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?xs(t):null;return n&&tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Qh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await hpt(this),n=new mpt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new TE("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await upt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Qh(t)||this._popupRedirectResolver;tn(n,this,"argument-error"),this.redirectPersistenceManager=await Sb.create(this,[Qh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=BCe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Hht(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function UC(e){return xs(e)}class bce{constructor(t){this.auth=t,this.observer=null,this.addObserver=Odt(n=>this.observer=n)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ypt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function vpt(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Td("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ypt().appendChild(r)})}function _pt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bpt(e,t){const n=AE(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Z2(s,t??{}))return i;zd(i,"already-initialized")}return n.initialize({options:t})}function wpt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Ept(e,t,n){const r=UC(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=jCe(t),{host:o,port:a}=xpt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Spt()}function jCe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xpt(e){const t=jCe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wce(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wce(o)}}}function wce(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Spt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zCe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Xh("not implemented")}_getIdTokenResponse(t){return Xh("not implemented")}_linkToIdToken(t,n){return Xh("not implemented")}_getReauthenticationResolver(t){return Xh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(e,t){return ICe(e,"POST","/v1/accounts:signInWithIdp",h6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tpt="http://localhost";class N1 extends zCe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new N1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):zd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=dY(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new N1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Tb(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Tb(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Tb(t,n)}buildRequest(){const t={requestUri:Tpt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=jC(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends yY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends VC{constructor(){super("facebook.com")}static credential(t){return N1._fromParams({providerId:jm.PROVIDER_ID,signInMethod:jm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jm.credentialFromTaggedObject(t)}static credentialFromError(t){return jm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jm.credential(t.oauthAccessToken)}catch{return null}}}jm.FACEBOOK_SIGN_IN_METHOD="facebook.com";jm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends VC{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return N1._fromParams({providerId:zh.PROVIDER_ID,signInMethod:zh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return zh.credentialFromTaggedObject(t)}static credentialFromError(t){return zh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zh.credential(n,r)}catch{return null}}}zh.GOOGLE_SIGN_IN_METHOD="google.com";zh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends VC{constructor(){super("github.com")}static credential(t){return N1._fromParams({providerId:zm.PROVIDER_ID,signInMethod:zm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zm.credentialFromTaggedObject(t)}static credentialFromError(t){return zm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zm.credential(t.oauthAccessToken)}catch{return null}}}zm.GITHUB_SIGN_IN_METHOD="github.com";zm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends VC{constructor(){super("twitter.com")}static credential(t,n){return N1._fromParams({providerId:Um.PROVIDER_ID,signInMethod:Um.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Um.credentialFromTaggedObject(t)}static credentialFromError(t){return Um.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Um.credential(n,r)}catch{return null}}}Um.TWITTER_SIGN_IN_METHOD="twitter.com";Um.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Apt(e,t){return ICe(e,"POST","/v1/accounts:signUp",h6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await c1._fromIdTokenResponse(t,r,i),o=Ece(r);return new Vg({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Ece(r);return new Vg({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Ece(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cpt(e){var t;const n=UC(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Vg({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Apt(n,{returnSecureToken:!0}),i=await Vg._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD extends sh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,dD.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new dD(t,n,r,i)}}function UCe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dD._fromErrorAndOperation(e,s,t,r):s})}async function Ipt(e,t,n=!1){const r=await tA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Vg._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Opt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await tA(e,UCe(r,i,t,e),n);tn(s.idToken,r,"internal-error");const o=mY(s.idToken);tn(o,r,"internal-error");const{sub:a}=o;return tn(e.uid===a,r,"user-mismatch"),Vg._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zd(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ppt(e,t,n=!1){const r="signIn",i=await UCe(e,r,t),s=await Vg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function kpt(e,t,n,r){return xs(e).onIdTokenChanged(t,n,r)}function $pt(e,t,n){return xs(e).beforeAuthStateChanged(t,n)}function Rpt(e,t,n,r){return xs(e).onAuthStateChanged(t,n,r)}function Npt(e){return xs(e).signOut()}const hD="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VCe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hD,"1"),this.storage.removeItem(hD),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dpt(){const e=Zo();return gY(e)||p6(e)}const Lpt=1e3,Mpt=10;class HCe extends VCe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Dpt()&&fpt(),this.fallbackToPolling=FCe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cpt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Mpt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Lpt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}HCe.type="LOCAL";const Fpt=HCe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qCe extends VCe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}qCe.type="SESSION";const WCe=qCe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bpt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new m6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Bpt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}m6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vY(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jpt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=vY("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(){return window}function zpt(e){Ad().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GCe(){return typeof Ad().WorkerGlobalScope<"u"&&typeof Ad().importScripts=="function"}async function Upt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vpt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Hpt(){return GCe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YCe="firebaseLocalStorageDb",qpt=1,pD="firebaseLocalStorage",KCe="fbase_key";class HC{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function g6(e,t){return e.transaction([pD],t?"readwrite":"readonly").objectStore(pD)}function Wpt(){const e=indexedDB.deleteDatabase(YCe);return new HC(e).toPromise()}function nU(){const e=indexedDB.open(YCe,qpt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(pD,{keyPath:KCe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(pD)?t(r):(r.close(),await Wpt(),t(await nU()))})})}async function xce(e,t,n){const r=g6(e,!0).put({[KCe]:t,value:n});return new HC(r).toPromise()}async function Gpt(e,t){const n=g6(e,!1).get(t),r=await new HC(n).toPromise();return r===void 0?null:r.value}function Sce(e,t){const n=g6(e,!0).delete(t);return new HC(n).toPromise()}const Ypt=800,Kpt=3;class XCe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nU(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Kpt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GCe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=m6._getInstance(Hpt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Upt(),!this.activeServiceWorker)return;this.sender=new jpt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Vpt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nU();return await xce(t,hD,"1"),await Sce(t,hD),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xce(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Gpt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sce(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=g6(i,!1).getAll();return new HC(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ypt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XCe.type="LOCAL";const Xpt=XCe;new zC(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QCe(e,t){return t?Qh(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y extends zCe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tb(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Tb(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Tb(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Qpt(e){return Ppt(e.auth,new _Y(e),e.bypassAuthState)}function Jpt(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),Opt(n,new _Y(e),e.bypassAuthState)}async function Zpt(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),Ipt(n,new _Y(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JCe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Qpt;case"linkViaPopup":case"linkViaRedirect":return Zpt;case"reauthViaPopup":case"reauthViaRedirect":return Jpt;default:zd(this.auth,"internal-error")}}resolve(t){Ip(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ip(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const emt=new zC(2e3,1e4);async function tmt(e,t,n){const r=UC(e);qht(e,t,yY);const i=QCe(r,n);return new Vy(r,"signInViaPopup",t,i).executeNotNull()}class Vy extends JCe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vy.currentPopupAction&&Vy.currentPopupAction.cancel(),Vy.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return tn(t,this.auth,"internal-error"),t}async onExecution(){Ip(this.filter.length===1,"Popup operations only handle one event");const t=vY();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Td(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Td(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vy.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Td(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,emt.get())};t()}}Vy.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nmt="pendingRedirect",Yk=new Map;class rmt extends JCe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Yk.get(this.auth._key());if(!t){try{const r=await imt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Yk.set(this.auth._key(),t)}return this.bypassAuthState||Yk.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function imt(e,t){const n=amt(t),r=omt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function smt(e,t){Yk.set(e._key(),t)}function omt(e){return Qh(e._redirectPersistence)}function amt(e){return Gk(nmt,e.config.apiKey,e.name)}async function umt(e,t,n=!1){const r=UC(e),i=QCe(r,t),o=await new rmt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lmt=10*60*1e3;class cmt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!fmt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!ZCe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Td(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=lmt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tce(t))}saveEventToCache(t){this.cachedEventUids.add(Tce(t)),this.lastProcessedEventTime=Date.now()}}function Tce(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function ZCe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function fmt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZCe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dmt(e,t={}){return CE(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hmt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pmt=/^https?/;async function mmt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await dmt(e);for(const n of t)try{if(gmt(n))return}catch{}zd(e,"unauthorized-domain")}function gmt(e){const t=tU(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pmt.test(n))return!1;if(hmt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ymt=new zC(3e4,6e4);function Ace(){const e=Ad().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function vmt(e){return new Promise((t,n)=>{var r,i,s;function o(){Ace(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ace(),n(Td(e,"network-request-failed"))},timeout:ymt.get()})}if(!((i=(r=Ad().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Ad().gapi)===null||s===void 0)&&s.load)o();else{const a=_pt("iframefcb");return Ad()[a]=()=>{gapi.load?o():n(Td(e,"network-request-failed"))},vpt(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw Kk=null,t})}let Kk=null;function _mt(e){return Kk=Kk||vmt(e),Kk}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bmt=new zC(5e3,15e3),wmt="__/auth/iframe",Emt="emulator/auth/iframe",xmt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Smt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tmt(e){const t=e.config;tn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?pY(t,Emt):`https://${e.config.authDomain}/${wmt}`,r={apiKey:t.apiKey,appName:e.name,v:Tv},i=Smt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${jC(r).slice(1)}`}async function Amt(e){const t=await _mt(e),n=Ad().gapi;return tn(n,e,"internal-error"),t.open({where:document.body,url:Tmt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xmt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Td(e,"network-request-failed"),a=Ad().setTimeout(()=>{s(o)},bmt.get());function u(){Ad().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cmt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Imt=500,Omt=600,Pmt="_blank",kmt="http://localhost";class Cce{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $mt(e,t,n,r=Imt,i=Omt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Cmt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Zo().toLowerCase();n&&(a=RCe(l)?Pmt:n),$Ce(l)&&(t=t||kmt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(lpt(l)&&a!=="_self")return Rmt(t||"",a),new Cce(null);const f=window.open(t||"",a,c);tn(f,e,"popup-blocked");try{f.focus()}catch{}return new Cce(f)}function Rmt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nmt="__/auth/handler",Dmt="emulator/auth/handler",Lmt=encodeURIComponent("fac");async function Ice(e,t,n,r,i,s){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tv,eventId:i};if(t instanceof yY){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Idt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof VC){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Lmt}=${encodeURIComponent(u)}`:"";return`${Mmt(e)}?${jC(a).slice(1)}${l}`}function Mmt({config:e}){return e.emulator?pY(e,Dmt):`https://${e.authDomain}/${Nmt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="webStorageSupport";class Fmt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WCe,this._completeRedirectFn=umt,this._overrideRedirectResult=smt}async _openPopup(t,n,r,i){var s;Ip((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ice(t,n,r,tU(),i);return $mt(t,o,vY())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Ice(t,n,r,tU(),i);return zpt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ip(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Amt(t),r=new cmt(t);return n.register("authEvent",i=>(tn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(O9,{type:O9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[O9];o!==void 0&&n(!!o),zd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mmt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FCe()||gY()||p6()}}const Bmt=Fmt;var Oce="@firebase/auth",Pce="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jmt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zmt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Umt(e){Cp(new jd("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;tn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BCe(e)},l=new gpt(r,i,s,u);return wpt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Cp(new jd("auth-internal",t=>{const n=UC(t.getProvider("auth").getImmediate());return(r=>new jmt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),of(Oce,Pce,zmt(e)),of(Oce,Pce,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vmt=5*60,Hmt=yCe("authIdTokenMaxAge")||Vmt;let kce=null;const qmt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Hmt)return;const i=n==null?void 0:n.token;kce!==i&&(kce=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mD(e=fY()){const t=AE(e,"auth");if(t.isInitialized())return t.getImmediate();const n=bpt(e,{popupRedirectResolver:Bmt,persistence:[Xpt,Fpt,WCe]}),r=yCe("authTokenSyncURL");if(r){const s=qmt(r);$pt(n,s,()=>s(n.currentUser)),kpt(n,o=>s(o))}const i=mCe("auth");return i&&Ept(n,`http://${i}`),n}Umt("Browser");const Wmt={},Gmt=Object.freeze(Object.defineProperty({__proto__:null,default:Wmt},Symbol.toStringTag,{value:"Module"})),Ymt=RHe(Gmt);var Kmt=Ymt;function Xmt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Qmt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function Jmt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Zmt(e){return e.__COMMENTS__}function egt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var y6={EOL:Kmt.EOL||`
`,tryParseNumber:Xmt,createComment:Qmt,removeComment:Jmt,getComment:Zmt,forceComment:egt},tgt="3.2.1";function ngt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return $ce}else if(e.length===0)return $ce;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return igt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),rgt.bind(null,n)}function rgt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function $ce(){}function igt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function eIe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}eIe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function tIe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}tIe.description="parse hexadecimal numbers prefixed with 0x";function nIe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}nIe.description="support ISO dates";var bY={loadDsf:ngt,std:{math:eIe,hex:tIe,date:nIe}},sgt=function(e,t){var n=y6,r=bY,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var D,B=0,V=1;for(D=s-1;D>0&&i[D]!==`
`;D--,B++);for(;D>0;D--)i[D]===`
`&&V++;throw new Error($+" at line "+V+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var D="",B=o;h();){if(o===B)return h(),$&&B==="'"&&o==="'"&&D.length===0?(h(),g()):D;if(o==="\\")if(h(),o==="u"){for(var V=0,j=0;j<4;j++){h();var G=o.charCodeAt(0),U;o>="0"&&o<="9"?U=G-48:o>="a"&&o<="f"?U=G-97+10:o>="A"&&o<="F"?U=G-65+10:d("Bad \\u char "+o),V=V*16+U}D+=String.fromCharCode(V)}else if(typeof a[o]=="string")D+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):D+=o}d("Bad string")}function g(){for(var $="",D=0,B=0;;){var V=p(-B-5);if(!V||V===`
`)break;B++}function j(){for(var G=B;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),j());;){if(!o)d("Bad multiline string");else if(o==="'"){if(D++,h(),D===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;D>0;)$+="'",D--;o===`
`?($+=`
`,h(),j()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",D=s,B=-1;;){if(o===":")return $?B>=0&&B!==$.length&&(s=D+B,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?B<0&&(B=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var D=o==="\r"||o===`
`||o==="";if(D||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=$[0];switch(B){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var V=n.tryParseNumber($);if(V!==void 0)return V}}if(D){$=$.trim();var j=l($);return j!==void 0?j:$}}$+=o}}function b($,D){var B;for($--,B=s-2;B>$&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var V=i.substr($,B-$+1);for(B=0;B<V.length;B++)if(V[B]>" "){var j=V.indexOf(`
`);if(j>=0){var G=[V.substr(0,j),V.substr(j+1)];return D&&G[0].trim().length===0&&G.shift(),G}else return[V]}return[]}function E($){function D(V,j){var G,U,P,k;switch(typeof V){case"string":V.indexOf(j)>=0&&(k=V);break;case"object":if(Object.prototype.toString.apply(V)==="[object Array]")for(G=0,P=V.length;G<P;G++)k=D(V[G],j)||k;else for(U in V)Object.prototype.hasOwnProperty.call(V,U)&&(k=D(V[U],j)||k)}return k}function B(V){var j=D($,V);return j?"found '"+V+`' in a string value, your mistake could be with:
  > `+j+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function w(){var $=[],D,B,V;try{if(u&&(D=n.createComment($,{a:[]})),h(),B=s,v(),D&&(V=b(B,!0).join(`
`)),o==="]")return h(),D&&(D.e=[V]),$;for(;o;){if($.push(S()),B=s,v(),o===","&&(h(),B=s,v()),D){var j=b(B);D.a.push([V||"",j[0]||""]),V=j[1]}if(o==="]")return h(),D&&(D.a[D.a.length-1][1]+=V||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||E($),G}}function x($){var D="",B={},V,j,G;try{if(u&&(V=n.createComment(B,{c:{},o:[]})),$?j=1:(h(),j=s),v(),V&&(G=b(j,!0).join(`
`)),o==="}"&&!$)return V&&(V.e=[G]),h(),B;for(;o;){if(D=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),B[D]=S(),j=s,v(),o===","&&(h(),j=s,v()),V){var U=b(j);V.c[D]=[G||"",U[0]||""],G=U[1],V.o.push(D)}if(o==="}"&&!$)return h(),V&&(V.c[D][1]+=G||""),B;v()}if($)return B;d("End of input while parsing an object (missing '}')")}catch(P){throw P.hint=P.hint||E(B),P}}function S(){switch(v(),o){case"{":return x();case"[":return w();case"'":case'"':return m(!0);default:return _()}}function I($,D){var B=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var V=D.join(`
`),j=b(B).join(`
`);if(j||V){var G=n.createComment($,n.getComment($));G.r=[V,j]}}return $}function C(){v();var $=u?b(1):null;switch(o){case"{":return I(x(),$);case"[":return I(w(),$);default:return I(S(),$)}}function O(){v();var $=u?b(1):null;switch(o){case"{":return I(x(),$);case"[":return I(w(),$)}try{return I(x(!0),$)}catch(D){c();try{return I(S(),$)}catch{throw D}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,N=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,N=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),N?O():C()},ogt=function(e,t){var n=y6,r=bY,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var b,E="---\u2028--\uFEFF-",w=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),C={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",N=0;function $(k,H){return N+=k[0].length+k[1].length-k[2]-k[3],k[0]+H+k[1]}function D(k){return k.replace(w,function(H){var M=C[H];return typeof M=="string"?$(g.esc,M):$(g.uni,("0000"+H.charCodeAt(0).toString(16)).slice(-4))})}function B(k,H,M,F){return k?(x.lastIndex=0,I.lastIndex=0,c||M||x.test(k)||n.tryParseNumber(k,!0)!==void 0||I.test(k)?(w.lastIndex=0,S.lastIndex=0,w.test(k)?!S.test(k)&&!F&&d?V(k,H):$(g.qstr,D(k)):$(g.qstr,k)):$(g.str,k)):$(g.qstr,"")}function V(k,H){var M,F=k.replace(/\r/g,"").split(`
`);if(H+=o,F.length===1)return $(g.mstr,F[0]);var J=s+H+g.mstr[0];for(M=0;M<F.length;M++)J+=s,F[M]&&(J+=H+F[M]);return J+s+H+g.mstr[1]}function j(k){return k?l||O.test(k)?(w.lastIndex=0,$(g.qkey,w.test(k)?D(k):k)):$(g.key,k):'""'}function G(k,H,M,F){function J(vt){return vt&&vt[vt[0]==="\r"?1:0]===`
`}function se(vt){return vt&&!J(vt)}function ae(vt,In,Wt){if(!vt)return"";vt=n.forceComment(vt);var Vt,hr=vt.length;for(Vt=0;Vt<hr&&vt[Vt]<=" ";Vt++);return Wt&&Vt>0&&(vt=vt.substr(Vt)),Vt<hr?In+$(g.rem,vt):vt}var ce=b(k);if(ce!==void 0)return $(g.dsf,ce);switch(typeof k){case"string":return B(k,z,H,F);case"number":return isFinite(k)?$(g.num,String(k)):$(g.lit,"null");case"boolean":return $(g.lit,String(k));case"object":if(!k)return $(g.lit,"null");var le;a&&(le=n.getComment(k));var ge=Object.prototype.toString.apply(k)==="[object Array]",ue=z;z+=o;var Fe=s+ue,ke=s+z,Ge=M||u?"":Fe,Re=[],Oe,Le=f?[]:null,Ut=c,Qe=d,je=h?"":g.com[0],bt=0,et,ut,lt,jt,Dn,he,_e,Pe,it;if(ge){for(et=0,ut=k.length;et<ut;et++){if(Oe=et<ut-1,le?(he=le.a[et]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+ke),Le&&(he[0]||he[1]||_e)&&(Le=null)):Re.push(ke),N=0,jt=k[et],Re.push(G(jt,le?_e:!1,!0)+(Oe?h:"")),Le){switch(typeof jt){case"string":N=0,c=!0,d=0,Le.push(G(jt,!1,!0)+(Oe?g.com[0]:"")),c=Ut,d=Qe;break;case"object":if(jt){Le=null;break}default:Le.push(Re[Re.length-1]+(Oe?je:""));break}Oe&&(N+=g.com[0].length-g.com[2]),bt+=N}le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e))}ut===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=$(g.arr,""):(Pe=Ge+$(g.arr,Re.join("")),Le&&(it=Le.join(" "),it.length-bt<=f&&(Pe=$(g.arr,it))))}else{var Ye=le?le.o.slice():[],at=[];for(lt in k)Object.prototype.hasOwnProperty.call(k,lt)&&Ye.indexOf(lt)<0&&at.push(lt);m&&at.sort();var tt=Ye.concat(at);for(et=0,ut=tt.length;et<ut;et++)if(Oe=et<ut-1,lt=tt[et],le?(he=le.c[lt]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+ke),Le&&(he[0]||he[1]||_e)&&(Le=null)):Re.push(ke),N=0,jt=k[lt],Dn=G(jt,le&&_e),Re.push(j(lt)+g.col[0]+(J(Dn)?"":" ")+Dn+(Oe?h:"")),le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e)),Le){switch(typeof jt){case"string":N=0,c=!0,d=0,Dn=G(jt,!1),c=Ut,d=Qe,Le.push(j(lt)+g.col[0]+" "+Dn+(Oe?g.com[0]:""));break;case"object":if(jt){Le=null;break}default:Le.push(Re[Re.length-1]+(Oe?je:""));break}N+=g.col[0].length-g.col[2],Oe&&(N+=g.com[0].length-g.com[2]),bt+=N}ut===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=$(g.obj,""):(Pe=Ge+$(g.obj,Re.join("")),Le&&(it=Le.join(" "),it.length-bt<=f&&(Pe=$(g.obj,it))))}return z=ue,Pe}}b=r.loadDsf(p,"stringify");var U="",P=a?P=(n.getComment(e)||{}).r:null;return P&&P[0]&&(U=P[0]+`
`),U+=G(e,null,!0,!0),P&&(U+=P[1]||""),U},Ab=y6;function zT(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function rU(e,t){if(!(e===null||typeof e!="object")){var n=Ab.getComment(e);n&&Ab.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Rce(o.a,r,n.a[r],rU(e[r]))&&(s=!0);!s&&n.e&&(o.e=zT(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Rce(o.s,l,n.c[l],rU(e[l]))&&(s=!0)}!s&&n.e&&(o.e=zT(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=zT(n.r[0],n.r[1])),s?o:void 0}}function agt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function ugt(e,t){var n=[];if(iU(e,t,n,[]),n.length>0){var r=gD(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+agt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),gD(t,r,1)}}function Rce(e,t,n,r){var i=zT(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function UT(e,t){var n=zT(t.b,t.a);return n.path=e,n}function VT(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(UT(s,o)),VT(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(UT(u,l)),VT(l.x,t,u))});e.e&&t.push(UT(n,e.e))}}function iU(e,t,n,r){if(e){if(t===null||typeof t!="object"){VT(e,n,r);return}var i,s=Ab.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],iU(u.x,t[i],n,l)):(n.push(UT(l,u)),VT(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],iU(d.x,t[c],n,f))):d&&(n.push(UT(f,d)),VT(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function gD(e,t,n){var r=Ab.createComment(e,Ab.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Ab.forceComment(t)),r.r[n]||""}var lgt={extract:function(e){return rU(e,!0)},merge:ugt,header:function(e,t){return gD(e,t,0)},footer:function(e,t){return gD(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Nce=y6,cgt=tgt,Dce=sgt,Lce=ogt,fgt=lgt,dgt=bY,wY={parse:Dce,stringify:Lce,endOfLine:function(){return Nce.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Nce.EOL=e)},version:cgt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Dce(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Lce(e,t)}},comments:fgt,dsf:dgt.std},hgt="firebase",pgt="10.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */of(hgt,pgt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rIe="firebasestorage.googleapis.com",iIe="storageBucket",mgt=2*60*1e3,ggt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends sh{constructor(t,n,r=0){super(P9(t),`Firebase Storage: ${n} (${P9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return P9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Di;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Di||(Di={}));function P9(e){return"storage/"+e}function EY(){const e="An unknown error occurred, please check the error payload for server response.";return new Mi(Di.UNKNOWN,e)}function ygt(e){return new Mi(Di.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function vgt(e){return new Mi(Di.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _gt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mi(Di.UNAUTHENTICATED,e)}function bgt(){return new Mi(Di.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wgt(e){return new Mi(Di.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Egt(){return new Mi(Di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xgt(){return new Mi(Di.CANCELED,"User canceled the upload/download.")}function Sgt(e){return new Mi(Di.INVALID_URL,"Invalid URL '"+e+"'.")}function Tgt(e){return new Mi(Di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Agt(){return new Mi(Di.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iIe+"' property when initializing the app?")}function Cgt(){return new Mi(Di.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Igt(){return new Mi(Di.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ogt(e){return new Mi(Di.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sU(e){return new Mi(Di.INVALID_ARGUMENT,e)}function sIe(){return new Mi(Di.APP_DELETED,"The Firebase app was deleted.")}function Pgt(e){return new Mi(Di.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HT(e,t){return new Mi(Di.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Gx(e){throw new Mi(Di.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Yu.makeFromUrl(t,n)}catch{return new Yu(t,"")}if(r.path==="")return r;throw Tgt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===rIe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<_.length;b++){const E=_[b],w=E.regex.exec(t);if(w){const x=w[E.indices.bucket];let S=w[E.indices.path];S||(S=""),r=new Yu(x,S),E.postModify(r);break}}if(r==null)throw Sgt(t);return r}}class kgt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $gt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function Rgt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ngt(e){return e!==void 0}function Dgt(e){return typeof e=="object"&&!Array.isArray(e)}function xY(e){return typeof e=="string"||e instanceof String}function Mce(e){return SY()&&e instanceof Blob}function SY(){return typeof Blob<"u"}function Fce(e,t,n,r){if(r<t)throw sU(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw sU(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function oIe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(f1||(f1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lgt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mgt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new oP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===f1.NO_ERROR,u=s.getStatus();if(!a||Lgt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===f1.ABORT;r(!1,new oP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new oP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Ngt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=EY();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?sIe():xgt();o(u)}else{const u=Egt();o(u)}};this.canceled_?n(!1,new oP(!1,null,!0)):this.backoffId_=$gt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Rgt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Fgt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Bgt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function jgt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function zgt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Ugt(e,t,n,r,i,s,o=!0){const a=oIe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return jgt(l,t),Fgt(l,n),Bgt(l,s),zgt(l,r),new Mgt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vgt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hgt(...e){const t=Vgt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(SY())return new Blob(e);throw new Mi(Di.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qgt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wgt(e){if(typeof atob>"u")throw Ogt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class k9{constructor(t,n){this.data=t,this.contentType=n||null}}function Ggt(e,t){switch(e){case pd.RAW:return new k9(aIe(t));case pd.BASE64:case pd.BASE64URL:return new k9(uIe(e,t));case pd.DATA_URL:return new k9(Kgt(t),Xgt(t))}throw EY()}function aIe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Ygt(e){let t;try{t=decodeURIComponent(e)}catch{throw HT(pd.DATA_URL,"Malformed data URL.")}return aIe(t)}function uIe(e,t){switch(e){case pd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw HT(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case pd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw HT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Wgt(t)}catch(i){throw i.message.includes("polyfill")?i:HT(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class lIe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw HT(pd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Qgt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Kgt(e){const t=new lIe(e);return t.base64?uIe(pd.BASE64,t.rest):Ygt(t.rest)}function Xgt(e){return new lIe(e).contentType}function Qgt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,n){let r=0,i="";Mce(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Mce(this.data_)){const r=this.data_,i=qgt(r,t,n);return i===null?null:new Vm(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Vm(r,!0)}}static getBlob(...t){if(SY()){const n=t.map(r=>r instanceof Vm?r.data_:r);return new Vm(Hgt.apply(null,n))}else{const n=t.map(o=>xY(o)?Ggt(pd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Vm(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cIe(e){let t;try{t=JSON.parse(e)}catch{return null}return Dgt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jgt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Zgt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function fIe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0t(e,t){return t}class aa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||e0t}}let aP=null;function t0t(e){return!xY(e)||e.length<2?e:fIe(e)}function dIe(){if(aP)return aP;const e=[];e.push(new aa("bucket")),e.push(new aa("generation")),e.push(new aa("metageneration")),e.push(new aa("name","fullPath",!0));function t(s,o){return t0t(o)}const n=new aa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new aa("size");return i.xform=r,e.push(i),e.push(new aa("timeCreated")),e.push(new aa("updated")),e.push(new aa("md5Hash",null,!0)),e.push(new aa("cacheControl",null,!0)),e.push(new aa("contentDisposition",null,!0)),e.push(new aa("contentEncoding",null,!0)),e.push(new aa("contentLanguage",null,!0)),e.push(new aa("contentType",null,!0)),e.push(new aa("metadata","customMetadata",!0)),aP=e,aP}function n0t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Yu(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function r0t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return n0t(r,e),r}function hIe(e,t,n){const r=cIe(t);return r===null?null:r0t(e,r,n)}function i0t(e,t,n,r){const i=cIe(t);if(i===null||!xY(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=TY(d,n,r),p=oIe({alt:"media",token:l});return h+p})[0]}function s0t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class pIe{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mIe(e){if(!e)throw EY()}function o0t(e,t){function n(r,i){const s=hIe(e,i,t);return mIe(s!==null),s}return n}function a0t(e,t){function n(r,i){const s=hIe(e,i,t);return mIe(s!==null),i0t(s,i,e.host,e._protocol)}return n}function gIe(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=bgt():i=_gt():n.getStatus()===402?i=vgt(e.bucket):n.getStatus()===403?i=wgt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function u0t(e){const t=gIe(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=ygt(e.path)),s.serverResponse=i.serverResponse,s}return n}function l0t(e,t,n){const r=t.fullServerUrl(),i=TY(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new pIe(i,s,a0t(e,n),o);return a.errorHandler=u0t(t),a}function c0t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function f0t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=c0t(null,t)),r}function d0t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=f0t(t,r,i),c=s0t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Vm.getBlob(f,r,d);if(h===null)throw Cgt();const p={name:l.fullPath},m=TY(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new pIe(m,g,o0t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=gIe(t),v}class h0t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=f1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=f1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=f1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Gx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gx("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class p0t extends h0t{initXhr(){this.xhr_.responseType="text"}}function yIe(){return new p0t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,n){this._service=t,n instanceof Yu?this._location=n:this._location=Yu.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new D1(t,n)}get root(){const t=new Yu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fIe(this._location.path)}get storage(){return this._service}get parent(){const t=Jgt(this._location.path);if(t===null)return null;const n=new Yu(this._location.bucket,t);return new D1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Pgt(t)}}function m0t(e,t,n){e._throwIfRoot("uploadBytes");const r=d0t(e.storage,e._location,dIe(),new Vm(t,!0),n);return e.storage.makeRequestWithTokens(r,yIe).then(i=>({metadata:i,ref:e}))}function g0t(e){e._throwIfRoot("getDownloadURL");const t=l0t(e.storage,e._location,dIe());return e.storage.makeRequestWithTokens(t,yIe).then(n=>{if(n===null)throw Igt();return n})}function y0t(e,t){const n=Zgt(e._location.path,t),r=new Yu(e._location.bucket,n);return new D1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0t(e){return/^[A-Za-z]+:\/\//.test(e)}function _0t(e,t){return new D1(e,t)}function vIe(e,t){if(e instanceof AY){const n=e;if(n._bucket==null)throw Agt();const r=new D1(n,n._bucket);return t!=null?vIe(r,t):r}else return t!==void 0?y0t(e,t):e}function b0t(e,t){if(t&&v0t(t)){if(e instanceof AY)return _0t(e,t);throw sU("To use ref(service, url), the first argument must be a Storage instance.")}else return vIe(e,t)}function Bce(e,t){const n=t==null?void 0:t[iIe];return n==null?null:Yu.makeFromBucketSpec(n,e)}function w0t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:_dt(i,e.app.options.projectId))}class AY{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rIe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mgt,this._maxUploadRetryTime=ggt,this._requests=new Set,i!=null?this._bucket=Yu.makeFromBucketSpec(i,this._host):this._bucket=Bce(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Yu.makeFromBucketSpec(this._url,t):this._bucket=Bce(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Fce("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Fce("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new D1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new kgt(sIe());{const o=Ugt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const jce="@firebase/storage",zce="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ie="storage";function E0t(e,t,n){return e=xs(e),m0t(e,t,n)}function x0t(e){return e=xs(e),g0t(e)}function Uce(e,t){return e=xs(e),b0t(e,t)}function Vce(e=fY(),t){e=xs(e);const r=AE(e,_Ie).getImmediate({identifier:t}),i=vdt("storage");return i&&S0t(r,...i),r}function S0t(e,t,n,r={}){w0t(e,t,n,r)}function T0t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new AY(n,r,i,t,Tv)}function A0t(){Cp(new jd(_Ie,T0t,"PUBLIC").setMultipleInstances(!0)),of(jce,zce,""),of(jce,zce,"esm2017")}A0t();var C0t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot,CY=CY||{},Zt=C0t||self;function v6(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function qC(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function I0t(e){return Object.prototype.hasOwnProperty.call(e,$9)&&e[$9]||(e[$9]=++O0t)}var $9="closure_uid_"+(1e9*Math.random()>>>0),O0t=0;function P0t(e,t,n){return e.call.apply(e.bind,arguments)}function k0t(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Wo(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Wo=P0t:Wo=k0t,Wo.apply(null,arguments)}function uP(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ys(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function I0(){this.s=this.s,this.o=this.o}var $0t=0;I0.prototype.s=!1;I0.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$0t!=0)&&I0t(this)};I0.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bIe=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function IY(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Hce(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(v6(r)){const i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function Go(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Go.prototype.h=function(){this.defaultPrevented=!0};var R0t=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};Zt.addEventListener("test",n,t),Zt.removeEventListener("test",n,t)}catch{}return e}();function rA(e){return/^[\s\xa0]*$/.test(e)}function _6(){var e=Zt.navigator;return e&&(e=e.userAgent)?e:""}function nd(e){return _6().indexOf(e)!=-1}function OY(e){return OY[" "](e),e}OY[" "]=function(){};function N0t(e,t){var n=Ayt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var D0t=nd("Opera"),dw=nd("Trident")||nd("MSIE"),wIe=nd("Edge"),oU=wIe||dw,EIe=nd("Gecko")&&!(_6().toLowerCase().indexOf("webkit")!=-1&&!nd("Edge"))&&!(nd("Trident")||nd("MSIE"))&&!nd("Edge"),L0t=_6().toLowerCase().indexOf("webkit")!=-1&&!nd("Edge");function xIe(){var e=Zt.document;return e?e.documentMode:void 0}var aU;e:{var R9="",N9=function(){var e=_6();if(EIe)return/rv:([^\);]+)(\)|;)/.exec(e);if(wIe)return/Edge\/([\d\.]+)/.exec(e);if(dw)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(L0t)return/WebKit\/(\S+)/.exec(e);if(D0t)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(N9&&(R9=N9?N9[1]:""),dw){var D9=xIe();if(D9!=null&&D9>parseFloat(R9)){aU=String(D9);break e}}aU=R9}var uU;if(Zt.document&&dw){var qce=xIe();uU=qce||parseInt(aU,10)||void 0}else uU=void 0;var M0t=uU;function iA(e,t){if(Go.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(EIe){e:{try{OY(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:F0t[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&iA.$.h.call(this)}}Ys(iA,Go);var F0t={2:"touch",3:"pen",4:"mouse"};iA.prototype.h=function(){iA.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var WC="closure_listenable_"+(1e6*Math.random()|0),B0t=0;function j0t(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++B0t,this.fa=this.ia=!1}function b6(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function PY(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function z0t(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function SIe(e){const t={};for(const n in e)t[n]=e[n];return t}const Wce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TIe(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<Wce.length;s++)n=Wce[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function w6(e){this.src=e,this.g={},this.h=0}w6.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=cU(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new j0t(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function lU(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=bIe(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(b6(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function cU(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var kY="closure_lm_"+(1e6*Math.random()|0),L9={};function AIe(e,t,n,r,i){if(r&&r.once)return IIe(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)AIe(e,t[s],n,r,i);return null}return n=NY(n),e&&e[WC]?e.O(t,n,qC(r)?!!r.capture:!!r,i):CIe(e,t,n,!1,r,i)}function CIe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=qC(i)?!!i.capture:!!i,a=RY(e);if(a||(e[kY]=a=new w6(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=U0t(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R0t||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(PIe(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function U0t(){function e(n){return t.call(e.src,e.listener,n)}const t=V0t;return e}function IIe(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)IIe(e,t[s],n,r,i);return null}return n=NY(n),e&&e[WC]?e.P(t,n,qC(r)?!!r.capture:!!r,i):CIe(e,t,n,!0,r,i)}function OIe(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)OIe(e,t[s],n,r,i);else r=qC(r)?!!r.capture:!!r,n=NY(n),e&&e[WC]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=cU(s,n,r,i),-1<n&&(b6(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=RY(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cU(t,n,r,i)),(n=-1<e?t[e]:null)&&$Y(n))}function $Y(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[WC])lU(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(PIe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=RY(t))?(lU(n,e),n.h==0&&(n.src=null,t[kY]=null)):b6(e)}}}function PIe(e){return e in L9?L9[e]:L9[e]="on"+e}function V0t(e,t){if(e.fa)e=!0;else{t=new iA(t,this);var n=e.listener,r=e.la||e.src;e.ia&&$Y(e),e=n.call(r,t)}return e}function RY(e){return e=e[kY],e instanceof w6?e:null}var M9="__closure_events_fn_"+(1e9*Math.random()>>>0);function NY(e){return typeof e=="function"?e:(e[M9]||(e[M9]=function(t){return e.handleEvent(t)}),e[M9])}function qs(){I0.call(this),this.i=new w6(this),this.S=this,this.J=null}Ys(qs,I0);qs.prototype[WC]=!0;qs.prototype.removeEventListener=function(e,t,n,r){OIe(this,e,t,n,r)};function mo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Go(t,e);else if(t instanceof Go)t.target=t.target||e;else{var i=t;t=new Go(r,e),TIe(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=lP(o,r,!0,t)&&i}if(o=t.g=e,i=lP(o,r,!0,t)&&i,i=lP(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=lP(o,r,!1,t)&&i}qs.prototype.N=function(){if(qs.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)b6(n[r]);delete e.g[t],e.h--}}this.J=null};qs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};qs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function lP(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&lU(e.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var DY=Zt.JSON.stringify;class H0t{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function q0t(){var e=LY;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class W0t{constructor(){this.h=this.g=null}add(t,n){const r=kIe.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var kIe=new H0t(()=>new G0t,e=>e.reset());class G0t{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Y0t(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function K0t(e){Zt.setTimeout(()=>{throw e},0)}let sA,oA=!1,LY=new W0t,$Ie=()=>{const e=Zt.Promise.resolve(void 0);sA=()=>{e.then(X0t)}};var X0t=()=>{for(var e;e=q0t();){try{e.h.call(e.g)}catch(n){K0t(n)}var t=kIe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}oA=!1};function E6(e,t){qs.call(this),this.h=e||1,this.g=t||Zt,this.j=Wo(this.qb,this),this.l=Date.now()}Ys(E6,qs);ot=E6.prototype;ot.ga=!1;ot.T=null;ot.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mo(this,"tick"),this.ga&&(MY(this),this.start()))}};ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function MY(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}ot.N=function(){E6.$.N.call(this),MY(this),delete this.g};function FY(e,t,n){if(typeof e=="function")n&&(e=Wo(e,n));else if(e&&typeof e.handleEvent=="function")e=Wo(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Zt.setTimeout(e,t||0)}function RIe(e){e.g=FY(()=>{e.g=null,e.i&&(e.i=!1,RIe(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class Q0t extends I0{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:RIe(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aA(e){I0.call(this),this.h=e,this.g={}}Ys(aA,I0);var Gce=[];function NIe(e,t,n,r){Array.isArray(n)||(n&&(Gce[0]=n.toString()),n=Gce);for(var i=0;i<n.length;i++){var s=AIe(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function DIe(e){PY(e.g,function(t,n){this.g.hasOwnProperty(n)&&$Y(t)},e),e.g={}}aA.prototype.N=function(){aA.$.N.call(this),DIe(this)};aA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function x6(){this.g=!0}x6.prototype.Ea=function(){this.g=!1};function J0t(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&f[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function Z0t(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function Z_(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+tyt(e,n)+(r?" "+r:"")})}function eyt(e,t){e.info(function(){return"TIMEOUT: "+t})}x6.prototype.info=function(){};function tyt(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return DY(n)}catch{return t}}var Av={},Yce=null;function S6(){return Yce=Yce||new qs}Av.Ta="serverreachability";function LIe(e){Go.call(this,Av.Ta,e)}Ys(LIe,Go);function uA(e){const t=S6();mo(t,new LIe(t))}Av.STAT_EVENT="statevent";function MIe(e,t){Go.call(this,Av.STAT_EVENT,e),this.stat=t}Ys(MIe,Go);function va(e){const t=S6();mo(t,new MIe(t,e))}Av.Ua="timingevent";function FIe(e,t){Go.call(this,Av.Ua,e),this.size=t}Ys(FIe,Go);function GC(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){e()},t)}var T6={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},BIe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function BY(){}BY.prototype.h=null;function Kce(e){return e.h||(e.h=e.i())}function jIe(){}var YC={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jY(){Go.call(this,"d")}Ys(jY,Go);function zY(){Go.call(this,"c")}Ys(zY,Go);var fU;function A6(){}Ys(A6,BY);A6.prototype.g=function(){return new XMLHttpRequest};A6.prototype.i=function(){return{}};fU=new A6;function KC(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new aA(this),this.P=nyt,e=oU?125:void 0,this.V=new E6(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zIe}function zIe(){this.i=null,this.g="",this.h=!1}var nyt=45e3,UIe={},dU={};ot=KC.prototype;ot.setTimeout=function(e){this.P=e};function hU(e,t,n){e.L=1,e.A=I6(Op(t)),e.u=n,e.S=!0,VIe(e,null)}function VIe(e,t){e.G=Date.now(),XC(e),e.B=Op(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),QIe(n.i,"t",r),e.o=0,n=e.l.J,e.h=new zIe,e.g=vOe(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Q0t(Wo(e.Pa,e,e.g),e.O)),NIe(e.U,e.g,"readystatechange",e.nb),t=e.I?SIe(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),uA(),J0t(e.j,e.v,e.B,e.m,e.W,e.u)}ot.nb=function(e){e=e.target;const t=this.M;t&&md(e)==3?t.l():this.Pa(e)};ot.Pa=function(e){try{if(e==this.g)e:{const c=md(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>c)&&(c!=3||oU||this.g&&(this.h.h||this.g.ja()||Zce(this.g)))){this.J||c!=4||t==7||(t==8||0>=f?uA(3):uA(2)),C6(this);var n=this.g.da();this.ca=n;t:if(HIe(this)){var r=Zce(this.g);e="";var i=r.length,s=md(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hy(this),qT(this);var o="";break t}this.h.i=new Zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Z0t(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rA(a)){var l=a;break t}}l=null}if(n=l)Z_(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pU(this,n);else{this.i=!1,this.s=3,va(12),Hy(this),qT(this);break e}}this.S?(qIe(this,c,o),oU&&this.i&&c==3&&(NIe(this.U,this.V,"tick",this.mb),this.V.start())):(Z_(this.j,this.m,o,null),pU(this,o)),c==4&&Hy(this),this.i&&!this.J&&(c==4?pOe(this.l,this):(this.i=!1,XC(this)))}else xyt(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,va(12)):(this.s=0,va(13)),Hy(this),qT(this)}}}catch{}finally{}};function HIe(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function qIe(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=ryt(e,n),i==dU){t==4&&(e.s=4,va(14),r=!1),Z_(e.j,e.m,null,"[Incomplete Response]");break}else if(i==UIe){e.s=4,va(15),Z_(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Z_(e.j,e.m,i,null),pU(e,i);HIe(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,va(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),GY(t),t.M=!0,va(11))):(Z_(e.j,e.m,n,"[Invalid Chunked Response]"),Hy(e),qT(e))}ot.mb=function(){if(this.g){var e=md(this.g),t=this.g.ja();this.o<t.length&&(C6(this),qIe(this,e,t),this.i&&e!=4&&XC(this))}};function ryt(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?dU:(n=Number(t.substring(n,r)),isNaN(n)?UIe:(r+=1,r+n>t.length?dU:(t=t.slice(r,r+n),e.o=r+n,t)))}ot.cancel=function(){this.J=!0,Hy(this)};function XC(e){e.Y=Date.now()+e.P,WIe(e,e.P)}function WIe(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=GC(Wo(e.lb,e),t)}function C6(e){e.C&&(Zt.clearTimeout(e.C),e.C=null)}ot.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(eyt(this.j,this.B),this.L!=2&&(uA(),va(17)),Hy(this),this.s=2,qT(this)):WIe(this,this.Y-e)};function qT(e){e.l.H==0||e.J||pOe(e.l,e)}function Hy(e){C6(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,MY(e.V),DIe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function pU(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||mU(n.i,e))){if(!e.K&&mU(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)_D(n),$6(n);else break e;WY(n),va(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=GC(Wo(n.ib,n),6e3));if(1>=eOe(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else qy(n,11)}else if((e.K||n.g==e)&&_D(n),!rA(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const f=l[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const p=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(UY(s,s.h),s.h=null))}if(r.F){const m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Yr(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=yOe(r,r.J?r.pa:null,r.Y),o.K){tOe(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(C6(a),XC(a)),r.g=o}else dOe(r);0<n.j.length&&R6(n)}else l[0]!="stop"&&l[0]!="close"||qy(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?qy(n,7):qY(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}uA(4)}catch{}}function iyt(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(v6(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function syt(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(v6(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function GIe(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(v6(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=syt(e),r=iyt(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var YIe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oyt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function d1(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof d1){this.h=e.h,yD(this,e.j),this.s=e.s,this.g=e.g,vD(this,e.m),this.l=e.l;var t=e.i,n=new lA;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Xce(this,n),this.o=e.o}else e&&(t=String(e).match(YIe))?(this.h=!1,yD(this,t[1]||"",!0),this.s=US(t[2]||""),this.g=US(t[3]||"",!0),vD(this,t[4]),this.l=US(t[5]||"",!0),Xce(this,t[6]||"",!0),this.o=US(t[7]||"")):(this.h=!1,this.i=new lA(null,this.h))}d1.prototype.toString=function(){var e=[],t=this.j;t&&e.push(VS(t,Qce,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(VS(t,Qce,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(VS(n,n.charAt(0)=="/"?lyt:uyt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",VS(n,fyt)),e.join("")};function Op(e){return new d1(e)}function yD(e,t,n){e.j=n?US(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vD(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Xce(e,t,n){t instanceof lA?(e.i=t,dyt(e.i,e.h)):(n||(t=VS(t,cyt)),e.i=new lA(t,e.h))}function Yr(e,t,n){e.i.set(t,n)}function I6(e){return Yr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function US(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function VS(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,ayt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ayt(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Qce=/[#\/\?@]/g,uyt=/[#\?:]/g,lyt=/[#\?]/g,cyt=/[#\?@]/g,fyt=/#/g;function lA(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function O0(e){e.g||(e.g=new Map,e.h=0,e.i&&oyt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ot=lA.prototype;ot.add=function(e,t){O0(this),this.i=null,e=IE(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function KIe(e,t){O0(e),t=IE(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function XIe(e,t){return O0(e),t=IE(e,t),e.g.has(t)}ot.forEach=function(e,t){O0(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};ot.ta=function(){O0(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};ot.Z=function(e){O0(this);let t=[];if(typeof e=="string")XIe(this,e)&&(t=t.concat(this.g.get(IE(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};ot.set=function(e,t){return O0(this),this.i=null,e=IE(this,e),XIe(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ot.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function QIe(e,t,n){KIe(e,t),0<n.length&&(e.i=null,e.g.set(IE(e,t),IY(n)),e.h+=n.length)}ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function IE(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function dyt(e,t){t&&!e.j&&(O0(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(KIe(this,r),QIe(this,i,n))},e)),e.j=t}var hyt=class{constructor(e,t){this.g=e,this.map=t}};function JIe(e){this.l=e||pyt,Zt.PerformanceNavigationTiming?(e=Zt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pyt=10;function ZIe(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function eOe(e){return e.h?1:e.g?e.g.size:0}function mU(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function UY(e,t){e.g?e.g.add(t):e.h=t}function tOe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}JIe.prototype.cancel=function(){if(this.i=nOe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function nOe(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return IY(e.i)}var myt=class{stringify(e){return Zt.JSON.stringify(e,void 0)}parse(e){return Zt.JSON.parse(e,void 0)}};function gyt(){this.g=new myt}function yyt(e,t,n){const r=n||"";try{GIe(e,function(i,s){let o=i;qC(i)&&(o=DY(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vyt(e,t){const n=new x6;if(Zt.Image){const r=new Image;r.onload=uP(cP,n,r,"TestLoadImage: loaded",!0,t),r.onerror=uP(cP,n,r,"TestLoadImage: error",!1,t),r.onabort=uP(cP,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=uP(cP,n,r,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function cP(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function O6(e){this.l=e.ec||null,this.j=e.ob||!1}Ys(O6,BY);O6.prototype.g=function(){return new P6(this.l,this.j)};O6.prototype.i=function(e){return function(){return e}}({});function P6(e,t){qs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=VY,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ys(P6,qs);var VY=0;ot=P6.prototype;ot.open=function(e,t){if(this.readyState!=VY)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,cA(this)};ot.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,QC(this)),this.readyState=VY};ot.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,cA(this)),this.g&&(this.readyState=3,cA(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rOe(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function rOe(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}ot.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?QC(this):cA(this),this.readyState==3&&rOe(this)}};ot.Za=function(e){this.g&&(this.response=this.responseText=e,QC(this))};ot.Ya=function(e){this.g&&(this.response=e,QC(this))};ot.ka=function(){this.g&&QC(this)};function QC(e){e.readyState=4,e.l=null,e.j=null,e.A=null,cA(e)}ot.setRequestHeader=function(e,t){this.v.append(e,t)};ot.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ot.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function cA(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(P6.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var _yt=Zt.JSON.parse;function Li(e){qs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=iOe,this.L=this.M=!1}Ys(Li,qs);var iOe="",byt=/^https?$/i,wyt=["POST","PUT"];ot=Li.prototype;ot.Oa=function(e){this.M=e};ot.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fU.g(),this.C=this.u?Kce(this.u):Kce(fU),this.g.onreadystatechange=Wo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){Jce(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Zt.FormData&&e instanceof Zt.FormData,!(0<=bIe(wyt,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{aOe(this),0<this.B&&((this.L=Eyt(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wo(this.ua,this)):this.A=FY(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Jce(this,s)}};function Eyt(e){return dw&&typeof e.timeout=="number"&&e.ontimeout!==void 0}ot.ua=function(){typeof CY<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mo(this,"timeout"),this.abort(8))};function Jce(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,sOe(e),k6(e)}function sOe(e){e.F||(e.F=!0,mo(e,"complete"),mo(e,"error"))}ot.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,mo(this,"complete"),mo(this,"abort"),k6(this))};ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),k6(this,!0)),Li.$.N.call(this)};ot.La=function(){this.s||(this.G||this.v||this.l?oOe(this):this.kb())};ot.kb=function(){oOe(this)};function oOe(e){if(e.h&&typeof CY<"u"&&(!e.C[1]||md(e)!=4||e.da()!=2)){if(e.v&&md(e)==4)FY(e.La,0,e);else if(mo(e,"readystatechange"),md(e)==4){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(YIe)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!byt.test(i?i.toLowerCase():"")}n=r}if(n)mo(e,"complete"),mo(e,"success");else{e.m=6;try{var s=2<md(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",sOe(e)}}finally{k6(e)}}}}function k6(e,t){if(e.g){aOe(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||mo(e,"ready");try{n.onreadystatechange=r}catch{}}}function aOe(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zt.clearTimeout(e.A),e.A=null)}ot.isActive=function(){return!!this.g};function md(e){return e.g?e.g.readyState:0}ot.da=function(){try{return 2<md(this)?this.g.status:-1}catch{return-1}};ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ot.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),_yt(t)}};function Zce(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case iOe:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function xyt(e){const t={};e=(e.g&&2<=md(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(rA(e[r]))continue;var n=Y0t(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}z0t(t,function(r){return r.join(", ")})}ot.Ia=function(){return this.m};ot.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function uOe(e){let t="";return PY(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function HY(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=uOe(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Yr(e,t,n))}function Yx(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function lOe(e){this.Ga=0,this.j=[],this.l=new x6,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yx("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yx("baseRetryDelayMs",5e3,e),this.hb=Yx("retryDelaySeedMs",1e4,e),this.eb=Yx("forwardChannelMaxRetries",2,e),this.xa=Yx("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new JIe(e&&e.concurrentRequestLimit),this.Ja=new gyt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ot=lOe.prototype;ot.ra=8;ot.H=1;function qY(e){if(cOe(e),e.H==3){var t=e.W++,n=Op(e.I);if(Yr(n,"SID",e.K),Yr(n,"RID",t),Yr(n,"TYPE","terminate"),JC(e,n),t=new KC(e,e.l,t),t.L=2,t.A=I6(Op(n)),n=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{n=Zt.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&Zt.Image&&(new Image().src=t.A,n=!0),n||(t.g=vOe(t.l,null),t.g.ha(t.A)),t.G=Date.now(),XC(t)}gOe(e)}function $6(e){e.g&&(GY(e),e.g.cancel(),e.g=null)}function cOe(e){$6(e),e.u&&(Zt.clearTimeout(e.u),e.u=null),_D(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Zt.clearTimeout(e.m),e.m=null)}function R6(e){if(!ZIe(e.i)&&!e.m){e.m=!0;var t=e.Na;sA||$Ie(),oA||(sA(),oA=!0),LY.add(t,e),e.C=0}}function Syt(e,t){return eOe(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=GC(Wo(e.Na,e,t),mOe(e,e.C)),e.C++,!0)}ot.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new KC(this,this.l,e);let s=this.s;if(this.U&&(s?(s=SIe(s),TIe(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=fOe(this,i,t),n=Op(this.I),Yr(n,"RID",e),Yr(n,"CVER",22),this.F&&Yr(n,"X-HTTP-Session-Id",this.F),JC(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(uOe(s)))+"&"+t:this.o&&HY(n,this.o,s)),UY(this.i,i),this.bb&&Yr(n,"TYPE","init"),this.P?(Yr(n,"$req",t),Yr(n,"SID","null"),i.aa=!0,hU(i,n,null)):hU(i,n,t),this.H=2}}else this.H==3&&(e?efe(this,e):this.j.length==0||ZIe(this.i)||efe(this))};function efe(e,t){var n;t?n=t.m:n=e.W++;const r=Op(e.I);Yr(r,"SID",e.K),Yr(r,"RID",n),Yr(r,"AID",e.V),JC(e,r),e.o&&e.s&&HY(r,e.o,e.s),n=new KC(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=fOe(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),UY(e.i,n),hU(n,r,t)}function JC(e,t){e.na&&PY(e.na,function(n,r){Yr(t,r,n)}),e.h&&GIe({},function(n,r){Yr(t,r,n)})}function fOe(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Wo(e.h.Va,e.h,e):null;e:{var i=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{yyt(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function dOe(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;sA||$Ie(),oA||(sA(),oA=!0),LY.add(t,e),e.A=0}}function WY(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=GC(Wo(e.Ma,e),mOe(e,e.A)),e.A++,!0)}ot.Ma=function(){if(this.u=null,hOe(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=GC(Wo(this.jb,this),e)}};ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,va(10),$6(this),hOe(this))};function GY(e){e.B!=null&&(Zt.clearTimeout(e.B),e.B=null)}function hOe(e){e.g=new KC(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Op(e.wa);Yr(t,"RID","rpc"),Yr(t,"SID",e.K),Yr(t,"AID",e.V),Yr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Yr(t,"TO",e.qa),Yr(t,"TYPE","xmlhttp"),JC(e,t),e.o&&e.s&&HY(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=I6(Op(t)),n.u=null,n.S=!0,VIe(n,e)}ot.ib=function(){this.v!=null&&(this.v=null,$6(this),WY(this),va(19))};function _D(e){e.v!=null&&(Zt.clearTimeout(e.v),e.v=null)}function pOe(e,t){var n=null;if(e.g==t){_D(e),GY(e),e.g=null;var r=2}else if(mU(e.i,t))n=t.F,tOe(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=S6(),mo(r,new FIe(r,n)),R6(e)}else dOe(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&Syt(e,t)||r==2&&WY(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qy(e,5);break;case 4:qy(e,10);break;case 3:qy(e,6);break;default:qy(e,2)}}}function mOe(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function qy(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Wo(e.pb,e);n||(n=new d1("//www.google.com/images/cleardot.gif"),Zt.location&&Zt.location.protocol=="http"||yD(n,"https"),I6(n)),vyt(n.toString(),r)}else va(2);e.H=0,e.h&&e.h.za(t),gOe(e),cOe(e)}ot.pb=function(e){e?(this.l.info("Successfully pinged google.com"),va(2)):(this.l.info("Failed to ping google.com"),va(1))};function gOe(e){if(e.H=0,e.ma=[],e.h){const t=nOe(e.i);(t.length!=0||e.j.length!=0)&&(Hce(e.ma,t),Hce(e.ma,e.j),e.i.i.length=0,IY(e.j),e.j.length=0),e.h.ya()}}function yOe(e,t,n){var r=n instanceof d1?Op(n):new d1(n);if(r.g!="")t&&(r.g=t+"."+r.g),vD(r,r.m);else{var i=Zt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new d1(null);r&&yD(s,r),t&&(s.g=t),i&&vD(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Yr(r,n,t),Yr(r,"VER",e.ra),JC(e,r),r}function vOe(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Li(new O6({ob:n})):new Li(e.va),t.Oa(e.J),t}ot.isActive=function(){return!!this.h&&this.h.isActive(this)};function _Oe(){}ot=_Oe.prototype;ot.Ba=function(){};ot.Aa=function(){};ot.za=function(){};ot.ya=function(){};ot.isActive=function(){return!0};ot.Va=function(){};function bD(){if(dw&&!(10<=Number(M0t)))throw Error("Environmental error: no available transport.")}bD.prototype.g=function(e,t){return new il(e,t)};function il(e,t){qs.call(this),this.g=new lOe(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!rA(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!rA(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new OE(this)}Ys(il,qs);il.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;va(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=yOe(e,null,e.Y),R6(e)};il.prototype.close=function(){qY(this.g)};il.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=DY(e),e=n);t.j.push(new hyt(t.fb++,e)),t.H==3&&R6(t)};il.prototype.N=function(){this.g.h=null,delete this.j,qY(this.g),delete this.g,il.$.N.call(this)};function bOe(e){jY.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ys(bOe,jY);function wOe(){zY.call(this),this.status=1}Ys(wOe,zY);function OE(e){this.g=e}Ys(OE,_Oe);OE.prototype.Ba=function(){mo(this.g,"a")};OE.prototype.Aa=function(e){mo(this.g,new bOe(e))};OE.prototype.za=function(e){mo(this.g,new wOe)};OE.prototype.ya=function(){mo(this.g,"b")};function Tyt(){this.blockSize=-1}function df(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ys(df,Tyt);df.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function F9(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}df.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)F9(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){F9(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){F9(this,r),i=0;break}}this.h=i,this.i+=t};df.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function wr(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var Ayt={};function YY(e){return-128<=e&&128>e?N0t(e,function(t){return new wr([t|0],0>t?-1:0)}):new wr([e|0],0>e?-1:0)}function gd(e){if(isNaN(e)||!isFinite(e))return Cb;if(0>e)return uo(gd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=gU;return new wr(t,0)}function EOe(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return uo(EOe(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=gd(Math.pow(t,8)),r=Cb,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=gd(Math.pow(t,s)),r=r.R(s).add(gd(o))):(r=r.R(n),r=r.add(gd(o)))}return r}var gU=4294967296,Cb=YY(0),yU=YY(1),tfe=YY(16777216);ot=wr.prototype;ot.ea=function(){if(Fl(this))return-uo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:gU+r)*t,t*=gU}return e};ot.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Jh(this))return"0";if(Fl(this))return"-"+uo(this).toString(e);for(var t=gd(Math.pow(e,6)),n=this,r="";;){var i=ED(n,t).g;n=wD(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Jh(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ot.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Jh(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Fl(e){return e.h==-1}ot.X=function(e){return e=wD(this,e),Fl(e)?-1:Jh(e)?0:1};function uo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wr(n,~e.h).add(yU)}ot.abs=function(){return Fl(this)?uo(this):this};ot.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new wr(n,n[n.length-1]&-2147483648?-1:0)};function wD(e,t){return e.add(uo(t))}ot.R=function(e){if(Jh(this)||Jh(e))return Cb;if(Fl(this))return Fl(e)?uo(this).R(uo(e)):uo(uo(this).R(e));if(Fl(e))return uo(this.R(uo(e)));if(0>this.X(tfe)&&0>e.X(tfe))return gd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,u=e.D(i)&65535;n[2*r+2*i]+=o*u,fP(n,2*r+2*i),n[2*r+2*i+1]+=s*u,fP(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,fP(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,fP(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wr(n,0)};function fP(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Kx(e,t){this.g=e,this.h=t}function ED(e,t){if(Jh(t))throw Error("division by zero");if(Jh(e))return new Kx(Cb,Cb);if(Fl(e))return t=ED(uo(e),t),new Kx(uo(t.g),uo(t.h));if(Fl(t))return t=ED(e,uo(t)),new Kx(uo(t.g),t.h);if(30<e.g.length){if(Fl(e)||Fl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=yU,r=t;0>=r.X(e);)n=nfe(n),r=nfe(r);var i=a_(n,1),s=a_(r,1);for(r=a_(r,2),n=a_(n,2);!Jh(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=a_(r,1),n=a_(n,1)}return t=wD(e,i.R(t)),new Kx(i,t)}for(i=Cb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=gd(n),o=s.R(t);Fl(o)||0<o.X(e);)n-=r,s=gd(n),o=s.R(t);Jh(s)&&(s=yU),i=i.add(s),e=wD(e,o)}return new Kx(i,e)}ot.gb=function(e){return ED(this,e).h};ot.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wr(n,this.h&e.h)};ot.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wr(n,this.h|e.h)};ot.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wr(n,this.h^e.h)};function nfe(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wr(n,e.h)}function a_(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new wr(i,e.h)}bD.prototype.createWebChannel=bD.prototype.g;il.prototype.send=il.prototype.u;il.prototype.open=il.prototype.m;il.prototype.close=il.prototype.close;T6.NO_ERROR=0;T6.TIMEOUT=8;T6.HTTP_ERROR=6;BIe.COMPLETE="complete";jIe.EventType=YC;YC.OPEN="a";YC.CLOSE="b";YC.ERROR="c";YC.MESSAGE="d";qs.prototype.listen=qs.prototype.O;Li.prototype.listenOnce=Li.prototype.P;Li.prototype.getLastError=Li.prototype.Sa;Li.prototype.getLastErrorCode=Li.prototype.Ia;Li.prototype.getStatus=Li.prototype.da;Li.prototype.getResponseJson=Li.prototype.Wa;Li.prototype.getResponseText=Li.prototype.ja;Li.prototype.send=Li.prototype.ha;Li.prototype.setWithCredentials=Li.prototype.Oa;df.prototype.digest=df.prototype.l;df.prototype.reset=df.prototype.reset;df.prototype.update=df.prototype.j;wr.prototype.add=wr.prototype.add;wr.prototype.multiply=wr.prototype.R;wr.prototype.modulo=wr.prototype.gb;wr.prototype.compare=wr.prototype.X;wr.prototype.toNumber=wr.prototype.ea;wr.prototype.toString=wr.prototype.toString;wr.prototype.getBits=wr.prototype.D;wr.fromNumber=gd;wr.fromString=EOe;var Cyt=function(){return new bD},Iyt=function(){return S6()},B9=T6,Oyt=BIe,Pyt=Av,rfe={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dP=jIe,kyt=Li,$yt=df,Ib=wr;const ife="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ga.UNAUTHENTICATED=new Ga(null),Ga.GOOGLE_CREDENTIALS=new Ga("google-credentials-uid"),Ga.FIRST_PARTY=new Ga("first-party-uid"),Ga.MOCK_USER=new Ga("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PE="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=new d6("@firebase/firestore");function Xx(){return L1.logLevel}function Et(e,...t){if(L1.logLevel<=Fn.DEBUG){const n=t.map(KY);L1.debug(`Firestore (${PE}): ${e}`,...n)}}function Pp(e,...t){if(L1.logLevel<=Fn.ERROR){const n=t.map(KY);L1.error(`Firestore (${PE}): ${e}`,...n)}}function fA(e,...t){if(L1.logLevel<=Fn.WARN){const n=t.map(KY);L1.warn(`Firestore (${PE}): ${e}`,...n)}}function KY(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e="Unexpected state"){const t=`FIRESTORE (${PE}) INTERNAL ASSERTION FAILED: `+e;throw Pp(t),new Error(t)}function Vr(e,t){e||Yt()}function an(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends sh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ryt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Nyt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ga.UNAUTHENTICATED))}shutdown(){}}class Dyt{constructor(t){this.t=t,this.currentUser=Ga.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vr(typeof r.accessToken=="string"),new Ryt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Vr(t===null||typeof t=="string"),new Ga(t)}}class Lyt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ga.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Myt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Lyt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ga.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fyt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Byt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Vr(typeof n.token=="string"),this.R=n.token,new Fyt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jyt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xOe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=jyt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function cr(e,t){return e<t?-1:e>t?1:0}function hw(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=class Xk{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ct($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ct($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ct($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ct($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Xk.fromMillis(Date.now())}static fromDate(t){return Xk.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Xk(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?cr(this.nanoseconds,t.nanoseconds):cr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.timestamp=t}static fromTimestamp(t){return new en(t)}static min(){return new en(new Ea(0,0))}static max(){return new en(new Ea(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t,n,r){n===void 0?n=0:n>t.length&&Yt(),r===void 0?r=t.length-n:r>t.length-n&&Yt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return dA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof dA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Kr extends dA{construct(t,n,r){return new Kr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ct($e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Kr(n)}static emptyPath(){return new Kr([])}}const zyt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class co extends dA{construct(t,n,r){return new co(t,n,r)}static isValidIdentifier(t){return zyt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),co.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new co(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ct($e.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new ct($e.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ct($e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ct($e.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new co(n)}static emptyPath(){return new co([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(Kr.fromString(t))}static fromName(t){return new Lt(Kr.fromString(t).popFirst(5))}static empty(){return new Lt(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Kr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new Kr(t.slice()))}}function Uyt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=en.fromTimestamp(r===1e9?new Ea(n+1,0):new Ea(n,r));return new Hg(i,Lt.empty(),t)}function Vyt(e){return new Hg(e.readTime,e.key,-1)}class Hg{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Hg(en.min(),Lt.empty(),-1)}static max(){return new Hg(en.max(),Lt.empty(),-1)}}function Hyt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Lt.comparator(e.documentKey,t.documentKey),n!==0?n:cr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qyt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wyt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(e){if(e.code!==$e.FAILED_PRECONDITION||e.message!==qyt)throw e;Et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Me?n:Me.resolve(n)}catch(n){return Me.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Me.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Me.reject(n)}static resolve(t){return new Me((n,r)=>{n(t)})}static reject(t){return new Me((n,r)=>{r(t)})}static waitFor(t){return new Me((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Me.resolve(!1);for(const r of t)n=n.next(i=>i?Me.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Me((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Me((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function eI(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}XY._e=-1;function N6(e){return e==null}function xD(e){return e===0&&1/e==-1/0}function Gyt(e){return typeof e=="number"&&Number.isInteger(e)&&!xD(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sfe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kE(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function SOe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,n){this.comparator=t,this.root=n||so.EMPTY}insert(t,n){return new wi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,so.BLACK,null,null))}remove(t){return new wi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,so.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hP(this.root,t,this.comparator,!1)}getReverseIterator(){return new hP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hP(this.root,t,this.comparator,!0)}}class hP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class so{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??so.RED,this.left=i??so.EMPTY,this.right=s??so.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new so(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return so.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return so.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,so.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,so.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const t=this.left.check();if(t!==this.right.check())throw Yt();return t+(this.isRed()?0:1)}}so.EMPTY=null,so.RED=!0,so.BLACK=!1;so.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(t,n,r,i,s){return this}insert(t,n,r){return new so(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.comparator=t,this.data=new wi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ofe(this.data.getIterator())}getIteratorFrom(t){return new ofe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof go)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new go(this.comparator);return n.data=t,n}}class ofe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t){this.fields=t,t.sort(co.comparator)}static empty(){return new Kc([])}unionWith(t){let n=new go(co.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Kc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return hw(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TOe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TOe("Invalid base64 string: "+s):s}}(t);return new ea(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ea(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return cr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ea.EMPTY_BYTE_STRING=new ea("");const Yyt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qg(e){if(Vr(!!e),typeof e=="string"){let t=0;const n=Yyt.exec(e);if(Vr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ji(e.seconds),nanos:Ji(e.nanos)}}function Ji(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function M1(e){return typeof e=="string"?ea.fromBase64String(e):ea.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QY(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function JY(e){const t=e.mapValue.fields.__previous_value__;return QY(t)?JY(t):t}function hA(e){const t=qg(e.mapValue.fields.__local_write_time__.timestampValue);return new Ea(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kyt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class pA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new pA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof pA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function F1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?QY(e)?4:Xyt(e)?9007199254740991:10:Yt()}function Ud(e,t){if(e===t)return!0;const n=F1(e);if(n!==F1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hA(e).isEqual(hA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=qg(i.timestampValue),a=qg(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return M1(i.bytesValue).isEqual(M1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ji(i.geoPointValue.latitude)===Ji(s.geoPointValue.latitude)&&Ji(i.geoPointValue.longitude)===Ji(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ji(i.integerValue)===Ji(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ji(i.doubleValue),a=Ji(s.doubleValue);return o===a?xD(o)===xD(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return hw(e.arrayValue.values||[],t.arrayValue.values||[],Ud);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(sfe(o)!==sfe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ud(o[u],a[u])))return!1;return!0}(e,t);default:return Yt()}}function mA(e,t){return(e.values||[]).find(n=>Ud(n,t))!==void 0}function pw(e,t){if(e===t)return 0;const n=F1(e),r=F1(t);if(n!==r)return cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ji(s.integerValue||s.doubleValue),u=Ji(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return afe(e.timestampValue,t.timestampValue);case 4:return afe(hA(e),hA(t));case 5:return cr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=M1(s),u=M1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=cr(a[l],u[l]);if(c!==0)return c}return cr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=cr(Ji(s.latitude),Ji(o.latitude));return a!==0?a:cr(Ji(s.longitude),Ji(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=pw(a[l],u[l]);if(c)return c}return cr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===pP.mapValue&&o===pP.mapValue)return 0;if(s===pP.mapValue)return 1;if(o===pP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=cr(u[f],c[f]);if(d!==0)return d;const h=pw(a[u[f]],l[c[f]]);if(h!==0)return h}return cr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Yt()}}function afe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return cr(e,t);const n=qg(e),r=qg(t),i=cr(n.seconds,r.seconds);return i!==0?i:cr(n.nanos,r.nanos)}function mw(e){return vU(e)}function vU(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=qg(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return M1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Lt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vU(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vU(n.fields[o])}`;return i+"}"}(e.mapValue):Yt()}function ufe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _U(e){return!!e&&"integerValue"in e}function ZY(e){return!!e&&"arrayValue"in e}function lfe(e){return!!e&&"nullValue"in e}function cfe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qk(e){return!!e&&"mapValue"in e}function WT(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return kE(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=WT(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=WT(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Xyt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t){this.value=t}static empty(){return new Bl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Qk(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=WT(n)}setAll(t){let n=co.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=WT(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());Qk(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ud(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Qk(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){kE(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Bl(WT(this.value))}}function AOe(e){const t=[];return kE(e.fields,(n,r)=>{const i=new co([n]);if(Qk(r)){const s=AOe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Kc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new jo(t,0,en.min(),en.min(),en.min(),Bl.empty(),0)}static newFoundDocument(t,n,r,i){return new jo(t,1,n,en.min(),r,i,0)}static newNoDocument(t,n){return new jo(t,2,n,en.min(),en.min(),Bl.empty(),0)}static newUnknownDocument(t,n){return new jo(t,3,n,en.min(),en.min(),Bl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof jo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new jo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SD=class{constructor(t,n){this.position=t,this.inclusive=n}};function ffe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Lt.comparator(Lt.fromName(o.referenceValue),n.key):r=pw(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dfe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ud(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,n="asc"){this.field=t,this.dir=n}}function Qyt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let COe=class{};class ns extends COe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Zyt(t,n,r):n==="array-contains"?new n1t(t,r):n==="in"?new r1t(t,r):n==="not-in"?new i1t(t,r):n==="array-contains-any"?new s1t(t,r):new ns(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new e1t(t,r):new t1t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(pw(n,this.value)):n!==null&&F1(this.value)===F1(n)&&this.matchesComparison(pw(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hf extends COe{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new hf(t,n)}matches(t){return IOe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function IOe(e){return e.op==="and"}function OOe(e){return Jyt(e)&&IOe(e)}function Jyt(e){for(const t of e.filters)if(t instanceof hf)return!1;return!0}function bU(e){if(e instanceof ns)return e.field.canonicalString()+e.op.toString()+mw(e.value);if(OOe(e))return e.filters.map(t=>bU(t)).join(",");{const t=e.filters.map(n=>bU(n)).join(",");return`${e.op}(${t})`}}function POe(e,t){return e instanceof ns?function(r,i){return i instanceof ns&&r.op===i.op&&r.field.isEqual(i.field)&&Ud(r.value,i.value)}(e,t):e instanceof hf?function(r,i){return i instanceof hf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&POe(o,i.filters[a]),!0):!1}(e,t):void Yt()}function kOe(e){return e instanceof ns?function(n){return`${n.field.canonicalString()} ${n.op} ${mw(n.value)}`}(e):e instanceof hf?function(n){return n.op.toString()+" {"+n.getFilters().map(kOe).join(" ,")+"}"}(e):"Filter"}class Zyt extends ns{constructor(t,n,r){super(t,n,r),this.key=Lt.fromName(r.referenceValue)}matches(t){const n=Lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class e1t extends ns{constructor(t,n){super(t,"in",n),this.keys=$Oe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class t1t extends ns{constructor(t,n){super(t,"not-in",n),this.keys=$Oe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function $Oe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Lt.fromName(r.referenceValue))}class n1t extends ns{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ZY(n)&&mA(n.arrayValue,this.value)}}class r1t extends ns{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&mA(this.value.arrayValue,n)}}class i1t extends ns{constructor(t,n){super(t,"not-in",n)}matches(t){if(mA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!mA(this.value.arrayValue,n)}}class s1t extends ns{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ZY(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function hfe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new o1t(e,t,n,r,i,s,o)}function eK(e){const t=an(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>bU(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),N6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>mw(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>mw(r)).join(",")),t.ce=n}return t.ce}function tK(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qyt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!POe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dfe(e.startAt,t.startAt)&&dfe(e.endAt,t.endAt)}function wU(e){return Lt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function a1t(e,t,n,r,i,s,o,a){return new $E(e,t,n,r,i,s,o,a)}function nK(e){return new $E(e)}function pfe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function ROe(e){return e.collectionGroup!==null}function GT(e){const t=an(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new go(co.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new gA(s,r))}),n.has(co.keyField().canonicalString())||t.le.push(new gA(co.keyField(),r))}return t.le}function Cd(e){const t=an(e);return t.he||(t.he=u1t(t,GT(e))),t.he}function u1t(e,t){if(e.limitType==="F")return hfe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new gA(i.field,s)});const n=e.endAt?new SD(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new SD(e.startAt.position,e.startAt.inclusive):null;return hfe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function EU(e,t){const n=e.filters.concat([t]);return new $E(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xU(e,t,n){return new $E(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function D6(e,t){return tK(Cd(e),Cd(t))&&e.limitType===t.limitType}function NOe(e){return`${eK(Cd(e))}|lt:${e.limitType}`}function P_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kOe(i)).join(", ")}]`),N6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mw(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mw(i)).join(",")),`Target(${r})`}(Cd(e))}; limitType=${e.limitType})`}function L6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Lt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of GT(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=ffe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,GT(r),i)||r.endAt&&!function(o,a,u){const l=ffe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,GT(r),i))}(e,t)}function l1t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function DOe(e){return(t,n)=>{let r=!1;for(const i of GT(e)){const s=c1t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function c1t(e,t,n){const r=e.field.isKeyField()?Lt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?pw(u,l):Yt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){kE(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return SOe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1t=new wi(Lt.comparator);function kp(){return f1t}const LOe=new wi(Lt.comparator);function HS(...e){let t=LOe;for(const n of e)t=t.insert(n.key,n);return t}function MOe(e){let t=LOe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Wy(){return YT()}function FOe(){return YT()}function YT(){return new RE(e=>e.toString(),(e,t)=>e.isEqual(t))}const d1t=new wi(Lt.comparator),h1t=new go(Lt.comparator);function On(...e){let t=h1t;for(const n of e)t=t.add(n);return t}const p1t=new go(cr);function m1t(){return p1t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BOe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xD(t)?"-0":t}}function jOe(e){return{integerValue:""+e}}function g1t(e,t){return Gyt(t)?jOe(t):BOe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this._=void 0}}function y1t(e,t,n){return e instanceof yA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&QY(s)&&(s=JY(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof vA?UOe(e,t):e instanceof _A?VOe(e,t):function(i,s){const o=zOe(i,s),a=mfe(o)+mfe(i.Ie);return _U(o)&&_U(i.Ie)?jOe(a):BOe(i.serializer,a)}(e,t)}function v1t(e,t,n){return e instanceof vA?UOe(e,t):e instanceof _A?VOe(e,t):n}function zOe(e,t){return e instanceof TD?function(r){return _U(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class yA extends M6{}class vA extends M6{constructor(t){super(),this.elements=t}}function UOe(e,t){const n=HOe(t);for(const r of e.elements)n.some(i=>Ud(i,r))||n.push(r);return{arrayValue:{values:n}}}class _A extends M6{constructor(t){super(),this.elements=t}}function VOe(e,t){let n=HOe(t);for(const r of e.elements)n=n.filter(i=>!Ud(i,r));return{arrayValue:{values:n}}}class TD extends M6{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function mfe(e){return Ji(e.integerValue||e.doubleValue)}function HOe(e){return ZY(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1t{constructor(t,n){this.field=t,this.transform=n}}function b1t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof vA&&i instanceof vA||r instanceof _A&&i instanceof _A?hw(r.elements,i.elements,Ud):r instanceof TD&&i instanceof TD?Ud(r.Ie,i.Ie):r instanceof yA&&i instanceof yA}(e.transform,t.transform)}class w1t{constructor(t,n){this.version=t,this.transformResults=n}}class fp{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new fp}static exists(t){return new fp(void 0,t)}static updateTime(t){return new fp(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Jk(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class F6{}function qOe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new GOe(e.key,fp.none()):new tI(e.key,e.data,fp.none());{const n=e.data,r=Bl.empty();let i=new go(co.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cv(e.key,r,new Kc(i.toArray()),fp.none())}}function E1t(e,t,n){e instanceof tI?function(i,s,o){const a=i.value.clone(),u=yfe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Cv?function(i,s,o){if(!Jk(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=yfe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(WOe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function KT(e,t,n,r){return e instanceof tI?function(s,o,a,u){if(!Jk(s.precondition,o))return a;const l=s.value.clone(),c=vfe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Cv?function(s,o,a,u){if(!Jk(s.precondition,o))return a;const l=vfe(s.fieldTransforms,u,o),c=o.data;return c.setAll(WOe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return Jk(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function x1t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=zOe(r.transform,i||null);s!=null&&(n===null&&(n=Bl.empty()),n.set(r.field,s))}return n||null}function gfe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hw(r,i,(s,o)=>b1t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class tI extends F6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cv extends F6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function WOe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function yfe(e,t,n){const r=new Map;Vr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,v1t(o,a,n[i]))}return r}function vfe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,y1t(s,o,t))}return r}class GOe extends F6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S1t extends F6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&E1t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=KT(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=KT(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=FOe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=qOe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(en.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),On())}isEqual(t){return this.batchId===t.batchId&&hw(this.mutations,t.mutations,(n,r)=>gfe(n,r))&&hw(this.baseMutations,t.baseMutations,(n,r)=>gfe(n,r))}}class rK{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Vr(t.mutations.length===r.length);let i=function(){return d1t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rK(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki,qn;function I1t(e){switch(e){default:return Yt();case $e.CANCELLED:case $e.UNKNOWN:case $e.DEADLINE_EXCEEDED:case $e.RESOURCE_EXHAUSTED:case $e.INTERNAL:case $e.UNAVAILABLE:case $e.UNAUTHENTICATED:return!1;case $e.INVALID_ARGUMENT:case $e.NOT_FOUND:case $e.ALREADY_EXISTS:case $e.PERMISSION_DENIED:case $e.FAILED_PRECONDITION:case $e.ABORTED:case $e.OUT_OF_RANGE:case $e.UNIMPLEMENTED:case $e.DATA_LOSS:return!0}}function YOe(e){if(e===void 0)return Pp("GRPC error has no .code"),$e.UNKNOWN;switch(e){case Ki.OK:return $e.OK;case Ki.CANCELLED:return $e.CANCELLED;case Ki.UNKNOWN:return $e.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return $e.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return $e.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return $e.INTERNAL;case Ki.UNAVAILABLE:return $e.UNAVAILABLE;case Ki.UNAUTHENTICATED:return $e.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return $e.INVALID_ARGUMENT;case Ki.NOT_FOUND:return $e.NOT_FOUND;case Ki.ALREADY_EXISTS:return $e.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return $e.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return $e.FAILED_PRECONDITION;case Ki.ABORTED:return $e.ABORTED;case Ki.OUT_OF_RANGE:return $e.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return $e.UNIMPLEMENTED;case Ki.DATA_LOSS:return $e.DATA_LOSS;default:return Yt()}}(qn=Ki||(Ki={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1t=new Ib([4294967295,4294967295],0);function _fe(e){const t=O1t().encode(e),n=new $yt;return n.update(t),new Uint8Array(n.digest())}function bfe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ib([n,r],0),new Ib([i,s],0)]}class iK{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qS(`Invalid padding: ${n}`);if(r<0)throw new qS(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new qS(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new qS(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Ib.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Ib.fromNumber(r)));return i.compare(P1t)===1&&(i=new Ib([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=_fe(t),[r,i]=bfe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new iK(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=_fe(t),[r,i]=bfe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class qS extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,nI.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new B6(en.min(),i,new wi(cr),kp(),On())}}class nI{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new nI(r,n,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class KOe{constructor(t,n){this.targetId=t,this.fe=n}}class XOe{constructor(t,n,r=ea.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wfe{constructor(){this.ge=0,this.pe=xfe(),this.ye=ea.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=On(),n=On(),r=On();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Yt()}}),new nI(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=xfe()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Vr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class k1t{constructor(t){this.Le=t,this.ke=new Map,this.qe=kp(),this.Qe=Efe(),this.Ke=new wi(cr)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Yt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const s=i.target;if(wU(s))if(r===0){const o=new Lt(s.path);this.We(n,o,jo.newNoDocument(o,en.min()))}else Vr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=M1(r).toUint8Array()}catch(u){if(u instanceof TOe)return fA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new iK(o,i,s)}catch(u){return fA(u instanceof qS?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&wU(a.target)){const u=new Lt(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,jo.newNoDocument(u,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=On();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const i=new B6(t,n,this.Ke,this.qe,r);return this.qe=kp(),this.Qe=Efe(),this.Ke=new wi(cr),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new wfe,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new go(cr),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Et("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new wfe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Efe(){return new wi(Lt.comparator)}function xfe(){return new wi(Lt.comparator)}const $1t={asc:"ASCENDING",desc:"DESCENDING"},R1t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N1t={and:"AND",or:"OR"};class D1t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function SU(e,t){return e.useProto3Json||N6(t)?t:{value:t}}function AD(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function QOe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function L1t(e,t){return AD(e,t.toTimestamp())}function Id(e){return Vr(!!e),en.fromTimestamp(function(n){const r=qg(n);return new Ea(r.seconds,r.nanos)}(e))}function sK(e,t){return function(r){return new Kr(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function JOe(e){const t=Kr.fromString(e);return Vr(nPe(t)),t}function TU(e,t){return sK(e.databaseId,t.path)}function j9(e,t){const n=JOe(t);if(n.get(1)!==e.databaseId.projectId)throw new ct($e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ct($e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lt(ZOe(n))}function AU(e,t){return sK(e.databaseId,t)}function M1t(e){const t=JOe(e);return t.length===4?Kr.emptyPath():ZOe(t)}function CU(e){return new Kr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ZOe(e){return Vr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Sfe(e,t,n){return{name:TU(e,t),fields:n.value.mapValue.fields}}function F1t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Vr(c===void 0||typeof c=="string"),ea.fromBase64String(c||"")):(Vr(c===void 0||c instanceof Uint8Array),ea.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?$e.UNKNOWN:YOe(l.code);return new ct(c,l.message||"")}(o);n=new XOe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=j9(e,r.document.name),s=Id(r.document.updateTime),o=r.document.createTime?Id(r.document.createTime):en.min(),a=new Bl({mapValue:{fields:r.document.fields}}),u=jo.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new Zk(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=j9(e,r.document),s=r.readTime?Id(r.readTime):en.min(),o=jo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Zk([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=j9(e,r.document),s=r.removedTargetIds||[];n=new Zk([],s,i,null)}else{if(!("filter"in t))return Yt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new C1t(i,s),a=r.targetId;n=new KOe(a,o)}}return n}function B1t(e,t){let n;if(t instanceof tI)n={update:Sfe(e,t.key,t.value)};else if(t instanceof GOe)n={delete:TU(e,t.key)};else if(t instanceof Cv)n={update:Sfe(e,t.key,t.data),updateMask:Y1t(t.fieldMask)};else{if(!(t instanceof S1t))return Yt();n={verify:TU(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof yA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _A)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof TD)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Yt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:L1t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Yt()}(e,t.precondition)),n}function j1t(e,t){return e&&e.length>0?(Vr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Id(i.updateTime):Id(s);return o.isEqual(en.min())&&(o=Id(s)),new w1t(o,i.transformResults||[])}(n,t))):[]}function z1t(e,t){return{documents:[AU(e,t.path)]}}function U1t(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=AU(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=AU(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return tPe(hf.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:k_(f.field),direction:q1t(f.dir)}}(l))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=SU(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),n}function V1t(e){let t=M1t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=ePe(f);return d instanceof hf&&OOe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new gA($_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,N6(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new SD(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new SD(h,d)}(n.endAt)),a1t(t,i,o,s,a,"F",u,l)}function H1t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function ePe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$_(n.unaryFilter.field);return ns.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$_(n.unaryFilter.field);return ns.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$_(n.unaryFilter.field);return ns.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$_(n.unaryFilter.field);return ns.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(e):e.fieldFilter!==void 0?function(n){return ns.create($_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return hf.create(n.compositeFilter.filters.map(r=>ePe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(e):Yt()}function q1t(e){return $1t[e]}function W1t(e){return R1t[e]}function G1t(e){return N1t[e]}function k_(e){return{fieldPath:e.canonicalString()}}function $_(e){return co.fromServerFormat(e.fieldPath)}function tPe(e){return e instanceof ns?function(n){if(n.op==="=="){if(cfe(n.value))return{unaryFilter:{field:k_(n.field),op:"IS_NAN"}};if(lfe(n.value))return{unaryFilter:{field:k_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cfe(n.value))return{unaryFilter:{field:k_(n.field),op:"IS_NOT_NAN"}};if(lfe(n.value))return{unaryFilter:{field:k_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:k_(n.field),op:W1t(n.op),value:n.value}}}(e):e instanceof hf?function(n){const r=n.getFilters().map(i=>tPe(i));return r.length===1?r[0]:{compositeFilter:{op:G1t(n.op),filters:r}}}(e):Yt()}function Y1t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function nPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n,r,i,s=en.min(),o=en.min(),a=ea.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Jm(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1t{constructor(t){this.ut=t}}function X1t(e){const t=V1t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xU(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1t{constructor(){this.on=new J1t}addToCollectionParentIndex(t,n){return this.on.add(n),Me.resolve()}getCollectionParents(t,n){return Me.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return Me.resolve()}deleteFieldIndex(t,n){return Me.resolve()}deleteAllFieldIndexes(t){return Me.resolve()}createTargetIndexes(t,n){return Me.resolve()}getDocumentsMatchingTarget(t,n){return Me.resolve(null)}getIndexType(t,n){return Me.resolve(0)}getFieldIndexes(t,n){return Me.resolve([])}getNextCollectionGroupToUpdate(t){return Me.resolve(null)}getMinOffset(t,n){return Me.resolve(Hg.min())}getMinOffsetFromCollectionGroup(t,n){return Me.resolve(Hg.min())}updateCollectionGroup(t,n,r){return Me.resolve()}updateIndexEntries(t,n){return Me.resolve()}}class J1t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new go(Kr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new go(Kr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new gw(0)}static Nn(){return new gw(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1t{constructor(){this.changes=new RE(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,jo.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Me.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class evt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tvt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&KT(r.mutation,i,Kc.empty(),Ea.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,On()).next(()=>r))}getLocalViewOfDocuments(t,n,r=On()){const i=Wy();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=HS();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Wy();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,On()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=kp();const o=YT(),a=function(){return YT()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Cv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),KT(c.mutation,l,c.mutation.getFieldMask(),Ea.now())):o.set(l.key,Kc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new evt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=YT();let i=new wi((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Kc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||On()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=FOe();c.forEach(d=>{if(!s.has(d)){const h=qOe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Me.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):ROe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Me.resolve(Wy());let a=-1,u=s;return o.next(l=>Me.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Me.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,On())).next(c=>({batchId:a,changes:MOe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Lt(n)).next(r=>{let i=HS();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=HS();return this.indexManager.getCollectionParents(t,s).next(a=>Me.forEach(a,u=>{const l=function(f,d){return new $E(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,jo.newInvalidDocument(c)))});let a=HS();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&KT(c.mutation,l,Kc.empty(),Ea.now()),L6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nvt{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return Me.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Id(i.createTime)}}(n)),Me.resolve()}getNamedQuery(t,n){return Me.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(i){return{name:i.name,query:X1t(i.bundledQuery),readTime:Id(i.readTime)}}(n)),Me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rvt{constructor(){this.overlays=new wi(Lt.comparator),this.lr=new Map}getOverlay(t,n){return Me.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Wy();return Me.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.lt(t,n,s)}),Me.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),Me.resolve()}getOverlaysForCollection(t,n,r){const i=Wy(),s=n.length+1,o=new Lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Me.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new wi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Wy(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Wy(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Me.resolve(a)}lt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new A1t(n,r));let s=this.lr.get(n);s===void 0&&(s=On(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(){this.hr=new go($s.Pr),this.Ir=new go($s.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new $s(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new $s(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new Lt(new Kr([])),r=new $s(n,t),i=new $s(n,t+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new Lt(new Kr([])),r=new $s(n,t),i=new $s(n,t+1);let s=On();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new $s(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class $s{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return Lt.comparator(t.key,n.key)||cr(t.gr,n.gr)}static Tr(t,n){return cr(t.gr,n.gr)||Lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ivt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new go($s.Pr)}checkEmpty(t){return Me.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new T1t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new $s(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Me.resolve(o)}lookupMutationBatch(t,n){return Me.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return Me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new $s(n,0),i=new $s(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),Me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new go(cr);return n.forEach(i=>{const s=new $s(i,0),o=new $s(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),Me.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Lt.isDocumentKey(s)||(s=s.child(""));const o=new $s(new Lt(s),0);let a=new go(cr);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),Me.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Vr(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return Me.forEach(n.mutations,i=>{const s=new $s(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new $s(n,0),i=this.yr.firstAfterOrEqual(r);return Me.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Me.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class svt{constructor(t){this.Cr=t,this.docs=function(){return new wi(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Me.resolve(r?r.document.mutableCopy():jo.newInvalidDocument(n))}getEntries(t,n){let r=kp();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jo.newInvalidDocument(i))}),Me.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=kp();const o=n.path,a=new Lt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Hyt(Vyt(c),r)<=0||(i.has(c.key)||L6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Me.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Yt()}vr(t,n){return Me.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new ovt(this)}getSize(t){return Me.resolve(this.size)}}class ovt extends Z1t{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(t,i)):this._r.removeEntry(r)}),Me.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class avt{constructor(t){this.persistence=t,this.Fr=new RE(n=>eK(n),tK),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Mr=0,this.Or=new oK,this.targetCount=0,this.Nr=gw.On()}forEachTarget(t,n){return this.Fr.forEach((r,i)=>n(i)),Me.resolve()}getLastRemoteSnapshotVersion(t){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Me.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),Me.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new gw(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,Me.resolve()}updateTargetData(t,n){return this.kn(n),Me.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Me.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Me.waitFor(s).next(()=>i)}getTargetCount(t){return Me.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return Me.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),Me.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Me.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),Me.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return Me.resolve(r)}containsKey(t,n){return Me.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uvt{constructor(t,n){this.Br={},this.overlays={},this.Lr=new XY(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new avt(this),this.indexManager=new Q1t,this.remoteDocumentCache=function(i){return new svt(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new K1t(n),this.Kr=new nvt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new rvt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new ivt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){Et("MemoryPersistence","Starting transaction:",t);const i=new lvt(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(t,n){return Me.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class lvt extends Wyt{constructor(t){super(),this.currentSequenceNumber=t}}class aK{constructor(t){this.persistence=t,this.Gr=new oK,this.zr=null}static jr(t){return new aK(t)}get Hr(){if(this.zr)return this.zr;throw Yt()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),Me.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),Me.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),Me.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Hr,r=>{const i=Lt.fromPath(r);return this.Jr(t,i).next(s=>{s||n.removeEntry(i,en.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return Me.or([()=>Me.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}static Qi(t,n){let r=On(),i=On();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uK(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cvt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fvt{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cvt;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,r,i){return r.documentReadCount<this.Ui?(Xx()<=Fn.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",P_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Me.resolve()):(Xx()<=Fn.DEBUG&&Et("QueryEngine","Query:",P_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Xx()<=Fn.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",P_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Cd(n))):Me.resolve())}zi(t,n){if(pfe(n))return Me.resolve(null);let r=Cd(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xU(n,null,"F"),r=Cd(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=On(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(t,xU(n,null,"F")):this.Xi(t,l,n,u)}))})))}ji(t,n,r,i){return pfe(n)||i.isEqual(en.min())?Me.resolve(null):this.Gi.getDocuments(t,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?Me.resolve(null):(Xx()<=Fn.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),P_(n)),this.Xi(t,o,n,Uyt(i,-1)).next(a=>a))})}Yi(t,n){let r=new go(DOe(t));return n.forEach((i,s)=>{L6(t,s)&&(r=r.add(s))}),r}Zi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(t,n,r){return Xx()<=Fn.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",P_(n)),this.Gi.getDocumentsMatchingQuery(t,n,Hg.min(),r)}Xi(t,n,r,i){return this.Gi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dvt{constructor(t,n,r,i){this.persistence=t,this.es=n,this.serializer=i,this.ts=new wi(cr),this.ns=new RE(s=>eK(s),tK),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tvt(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function hvt(e,t,n,r){return new dvt(e,t,n,r)}async function rPe(e,t){const n=an(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=On();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}function pvt(e,t){const n=an(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Me.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Vr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=On();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function iPe(e){const t=an(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function mvt(e,t){const n=an(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ea.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.qr.updateTargetData(s,h))});let u=kp(),l=On();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(gvt(s,o,t.documentUpdates).next(c=>{u=c.us,l=c.cs})),!r.isEqual(en.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(f=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Me.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}function gvt(e,t,n){let r=On(),i=On();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=kp();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(en.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Et("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function yvt(e,t){const n=an(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function vvt(e,t){const n=an(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,t).next(s=>s?(i=s,Me.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Jm(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function IU(e,t,n){const r=an(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!eI(o))throw o;Et("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Tfe(e,t,n){const r=an(e);let i=en.min(),s=On();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=an(u),d=f.ns.get(c);return d!==void 0?Me.resolve(f.ts.get(d)):f.qr.getTargetData(l,c)}(r,o,Cd(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?i:en.min(),n?s:On())).next(a=>(_vt(r,l1t(t),a),{documents:a,ls:s})))}function _vt(e,t,n){let r=e.rs.get(t)||en.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.rs.set(t,r)}class Afe{constructor(){this.activeTargetIds=m1t()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class bvt{constructor(){this.eo=new Afe,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new Afe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wvt{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mP=null;function z9(){return mP===null?mP=function(){return 268435456+Math.round(2147483648*Math.random())}():mP++,"0x"+mP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Evt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xvt{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="WebChannelConnection";class Svt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=z9(),u=this.So(n,r);Et("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(c=>(Et("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw fA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+PE}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=Evt[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,i){const s=z9();return new Promise((o,a)=>{const u=new kyt;u.setWithCredentials(!0),u.listenOnce(Oyt.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case B9.NO_ERROR:const c=u.getResponseJson();Et(Ao,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case B9.TIMEOUT:Et(Ao,`RPC '${t}' ${s} timed out`),a(new ct($e.DEADLINE_EXCEEDED,"Request time out"));break;case B9.HTTP_ERROR:const f=u.getStatus();if(Et(Ao,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values($e).indexOf(y)>=0?y:$e.UNKNOWN}(h.status);a(new ct(p,h.message))}else a(new ct($e.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ct($e.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{Et(Ao,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Et(Ao,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(t,n,r){const i=z9(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Cyt(),a=Iyt(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Et(Ao,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new xvt({co:g=>{h?Et(Ao,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Et(Ao,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Et(Ao,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},lo:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return m(f,dP.EventType.OPEN,()=>{h||Et(Ao,`RPC '${t}' stream ${i} transport opened.`)}),m(f,dP.EventType.CLOSE,()=>{h||(h=!0,Et(Ao,`RPC '${t}' stream ${i} transport closed`),p.Ro())}),m(f,dP.EventType.ERROR,g=>{h||(h=!0,fA(Ao,`RPC '${t}' stream ${i} transport errored:`,g),p.Ro(new ct($e.UNAVAILABLE,"The operation could not be completed")))}),m(f,dP.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Vr(!!v);const _=v,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){Et(Ao,`RPC '${t}' stream ${i} received error:`,b);const E=b.status;let w=function(I){const C=Ki[I];if(C!==void 0)return YOe(C)}(E),x=b.message;w===void 0&&(w=$e.INTERNAL,x="Unknown error status: "+E+" with message "+b.message),h=!0,p.Ro(new ct(w,x)),f.close()}else Et(Ao,`RPC '${t}' stream ${i} received:`,v),p.Vo(v)}}),m(a,Pyt.STAT_EVENT,g=>{g.stat===rfe.PROXY?Et(Ao,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===rfe.NOPROXY&&Et(Ao,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}}function U9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(e){return new D1t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&Et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oPe{constructor(t,n,r,i,s,o,a,u){this.si=t,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new sPe(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===$e.RESOURCE_EXHAUSTED?(Pp(n.toString()),Pp("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===$e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{t(()=>{const i=new ct($e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return Et("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(Et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tvt extends oPe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=F1t(this.serializer,t),r=function(s){if(!("targetChange"in s))return en.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?en.min():o.readTime?Id(o.readTime):en.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=CU(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=wU(u)?{documents:z1t(s,u)}:{query:U1t(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QOe(s,o.resumeToken);const l=SU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(en.min())>0){a.readTime=AD(s,o.snapshotVersion.toTimestamp());const l=SU(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=H1t(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=CU(this.serializer),n.removeTarget=t,this.e_(n)}}class Avt extends oPe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(Vr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=j1t(t.writeResults,t.commitTime),r=Id(t.commitTime);return this.listener.I_(r,n)}return Vr(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=CU(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>B1t(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cvt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ct($e.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(t,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ct($e.UNKNOWN,i.toString())})}Co(t,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ct($e.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class Ivt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Pp(n),this.f_=!1):Et("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ovt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{Iv(this)&&(Et("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=an(u);l.C_.add(4),await iI(l),l.M_.set("Unknown"),l.C_.delete(4),await rI(l)}(this))})}),this.M_=new Ivt(r,i)}}async function rI(e){if(Iv(e))for(const t of e.v_)await t(!0)}async function iI(e){for(const t of e.v_)await t(!1)}function aPe(e,t){const n=an(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),fK(n)?cK(n):NE(n).Ho()&&lK(n,t))}function uPe(e,t){const n=an(e),r=NE(n);n.D_.delete(t),r.Ho()&&lPe(n,t),n.D_.size===0&&(r.Ho()?r.Zo():Iv(n)&&n.M_.set("Unknown"))}function lK(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}NE(e).u_(t)}function lPe(e,t){e.x_.Oe(t),NE(e).c_(t)}function cK(e){e.x_=new k1t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),NE(e).start(),e.M_.g_()}function fK(e){return Iv(e)&&!NE(e).jo()&&e.D_.size>0}function Iv(e){return an(e).C_.size===0}function cPe(e){e.x_=void 0}async function Pvt(e){e.D_.forEach((t,n)=>{lK(e,t)})}async function kvt(e,t){cPe(e),fK(e)?(e.M_.w_(t),cK(e)):e.M_.set("Unknown")}async function $vt(e,t,n){if(e.M_.set("Online"),t instanceof XOe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(e,t)}catch(r){Et("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await CD(e,r)}else if(t instanceof Zk?e.x_.$e(t):t instanceof KOe?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(en.min()))try{const r=await iPe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.D_.get(l);c&&s.D_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.D_.get(u);if(!c)return;s.D_.set(u,c.withResumeToken(ea.EMPTY_BYTE_STRING,c.snapshotVersion)),lPe(s,u);const f=new Jm(c.target,u,l,c.sequenceNumber);lK(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Et("RemoteStore","Failed to raise snapshot:",r),await CD(e,r)}}async function CD(e,t,n){if(!eI(t))throw t;e.C_.add(1),await iI(e),e.M_.set("Offline"),n||(n=()=>iPe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Et("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await rI(e)})}function fPe(e,t){return t().catch(n=>CD(e,n,t))}async function z6(e){const t=an(e),n=Wg(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Rvt(t);)try{const i=await yvt(t.localStore,r);if(i===null){t.b_.length===0&&n.Zo();break}r=i.batchId,Nvt(t,i)}catch(i){await CD(t,i)}dPe(t)&&hPe(t)}function Rvt(e){return Iv(e)&&e.b_.length<10}function Nvt(e,t){e.b_.push(t);const n=Wg(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function dPe(e){return Iv(e)&&!Wg(e).jo()&&e.b_.length>0}function hPe(e){Wg(e).start()}async function Dvt(e){Wg(e).E_()}async function Lvt(e){const t=Wg(e);for(const n of e.b_)t.P_(n.mutations)}async function Mvt(e,t,n){const r=e.b_.shift(),i=rK.from(r,t,n);await fPe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await z6(e)}async function Fvt(e,t){t&&Wg(e).h_&&await async function(r,i){if(function(o){return I1t(o)&&o!==$e.ABORTED}(i.code)){const s=r.b_.shift();Wg(r).Yo(),await fPe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await z6(r)}}(e,t),dPe(e)&&hPe(e)}async function Ife(e,t){const n=an(e);n.asyncQueue.verifyOperationInProgress(),Et("RemoteStore","RemoteStore received new credentials");const r=Iv(n);n.C_.add(3),await iI(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await rI(n)}async function Bvt(e,t){const n=an(e);t?(n.C_.delete(2),await rI(n)):t||(n.C_.add(2),await iI(n),n.M_.set("Unknown"))}function NE(e){return e.O_||(e.O_=function(n,r,i){const s=an(n);return s.A_(),new Tvt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:Pvt.bind(null,e),Io:kvt.bind(null,e),a_:$vt.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),fK(e)?cK(e):e.M_.set("Unknown")):(await e.O_.stop(),cPe(e))})),e.O_}function Wg(e){return e.N_||(e.N_=function(n,r,i){const s=an(n);return s.A_(),new Avt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:Dvt.bind(null,e),Io:Fvt.bind(null,e),T_:Lvt.bind(null,e),I_:Mvt.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await z6(e)):(await e.N_.stop(),e.b_.length>0&&(Et("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new dK(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct($e.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hK(e,t){if(Pp("AsyncQueue",`${t}: ${e}`),eI(e))return new ct($e.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Lt.comparator(n.key,r.key):(n,r)=>Lt.comparator(n.key,r.key),this.keyedMap=HS(),this.sortedSet=new wi(this.comparator)}static emptySet(t){return new Ob(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ob)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ob;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ofe{constructor(){this.B_=new wi(Lt.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Yt():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class yw{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yw(t,n,Ob.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&D6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jvt{constructor(){this.k_=void 0,this.listeners=[]}}class zvt{constructor(){this.queries=new RE(t=>NOe(t),D6),this.onlineState="Unknown",this.q_=new Set}}async function pPe(e,t){const n=an(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new jvt),i)try{s.k_=await n.onListen(r)}catch(o){const a=hK(o,`Initialization of query '${P_(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&pK(n)}async function mPe(e,t){const n=an(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Uvt(e,t){const n=an(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&pK(n)}function Vvt(e,t,n){const r=an(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function pK(e){e.q_.forEach(t=>{t.next()})}class gPe{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new yw(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=yw.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yPe{constructor(t){this.key=t}}class vPe{constructor(t){this.key=t}}class Hvt{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=On(),this.mutatedKeys=On(),this._a=DOe(t),this.aa=new Ob(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new Ofe,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=L6(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ha(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this._a(h,u)>0||l&&this._a(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return m(h)-m(p)}(c.type,f.type)||this._a(c.doc,f.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],u=this.oa.size===0&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,o.length!==0||l?{snapshot:new yw(this.query,t.aa,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Ofe,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=On(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new vPe(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new yPe(r))}),n}da(t){this.ia=t.ls,this.oa=On();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return yw.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class qvt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Wvt{constructor(t){this.key=t,this.Ra=!1}}class Gvt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new RE(a=>NOe(a),D6),this.fa=new Map,this.ga=new Set,this.pa=new wi(Lt.comparator),this.ya=new Map,this.wa=new oK,this.Sa={},this.ba=new Map,this.Da=gw.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function Yvt(e,t){const n=i_t(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await vvt(n.localStore,Cd(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await Kvt(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&aPe(n.remoteStore,o)}return i}async function Kvt(e,t,n,r,i){e.va=(f,d,h)=>async function(m,g,y,v){let _=g.view.ca(y);_.Zi&&(_=await Tfe(m.localStore,g.query,!1).then(({documents:x})=>g.view.ca(x,_)));const b=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(_,m.isPrimaryClient,b,E);return kfe(m,g.targetId,w.Ta),w.snapshot}(e,f,d,h);const s=await Tfe(e.localStore,t,!0),o=new Hvt(t,s.ls),a=o.ca(s.documents),u=nI.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);kfe(e,n,l.Ta);const c=new qvt(t,n,o);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}async function Xvt(e,t){const n=an(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!D6(s,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await IU(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),uPe(n.remoteStore,r.targetId),OU(n,r.targetId)}).catch(ZC)):(OU(n,r.targetId),await IU(n.localStore,r.targetId,!0))}async function Qvt(e,t,n){const r=s_t(e);try{const i=await function(o,a){const u=an(o),l=Ea.now(),c=a.reduce((h,p)=>h.add(p.key),On());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=kp(),m=On();return u.ss.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=x1t(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Cv(v.key,_,AOe(_.value.mapValue),fp.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:MOe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new wi(cr)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),await sI(r,i.changes),await z6(r.remoteStore)}catch(i){const s=hK(i,"Failed to persist write");n.reject(s)}}async function _Pe(e,t){const n=an(e);try{const r=await mvt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Vr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Vr(o.Ra):i.removedDocuments.size>0&&(Vr(o.Ra),o.Ra=!1))}),await sI(n,r,t)}catch(r){await ZC(r)}}function Pfe(e,t,n){const r=an(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=an(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.listeners)d.Q_(a)&&(l=!0)}),l&&pK(u)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Jvt(e,t,n){const r=an(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let o=new wi(Lt.comparator);o=o.insert(s,jo.newNoDocument(s,en.min()));const a=On().add(s),u=new B6(en.min(),new Map,new wi(cr),o,a);await _Pe(r,u),r.pa=r.pa.remove(s),r.ya.delete(t),mK(r)}else await IU(r.localStore,t,!1).then(()=>OU(r,t,n)).catch(ZC)}async function Zvt(e,t){const n=an(e),r=t.batch.batchId;try{const i=await pvt(n.localStore,t);wPe(n,r,null),bPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sI(n,i)}catch(i){await ZC(i)}}async function e_t(e,t,n){const r=an(e);try{const i=await function(o,a){const u=an(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Vr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);wPe(r,t,n),bPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await sI(r,i)}catch(i){await ZC(i)}}function bPe(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function wPe(e,t,n){const r=an(e);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function OU(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||EPe(e,r)})}function EPe(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(uPe(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),mK(e))}function kfe(e,t,n){for(const r of n)r instanceof yPe?(e.wa.addReference(r.key,t),t_t(e,r)):r instanceof vPe?(Et("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||EPe(e,r.key)):Yt()}function t_t(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Et("SyncEngine","New document in limbo: "+n),e.ga.add(r),mK(e))}function mK(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Lt(Kr.fromString(t)),r=e.Da.next();e.ya.set(r,new Wvt(n)),e.pa=e.pa.insert(n,r),aPe(e.remoteStore,new Jm(Cd(nK(n.path)),r,"TargetPurposeLimboResolution",XY._e))}}async function sI(e,t,n){const r=an(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=uK.Qi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(u,l){const c=an(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Me.forEach(l,d=>Me.forEach(d.ki,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Me.forEach(d.qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!eI(f))throw f;Et("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ts.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ts=c.ts.insert(d,m)}}}(r.localStore,s))}async function n_t(e,t){const n=an(e);if(!n.currentUser.isEqual(t)){Et("SyncEngine","User change. New user:",t.toKey());const r=await rPe(n.localStore,t);n.currentUser=t,function(s,o){s.ba.forEach(a=>{a.forEach(u=>{u.reject(new ct($e.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await sI(n,r._s)}}function r_t(e,t){const n=an(e),r=n.ya.get(t);if(r&&r.Ra)return On().add(r.key);{let i=On();const s=n.fa.get(t);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function i_t(e){const t=an(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_Pe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=r_t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jvt.bind(null,t),t.Va.a_=Uvt.bind(null,t.eventManager),t.Va.Fa=Vvt.bind(null,t.eventManager),t}function s_t(e){const t=an(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zvt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=e_t.bind(null,t),t}class $fe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=j6(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return hvt(this.persistence,new fvt,t.initialUser,this.serializer)}createPersistence(t){return new uvt(aK.jr,this.serializer)}createSharedClientState(t){return new bvt}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class o_t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pfe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n_t.bind(null,this.syncEngine),await Bvt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new zvt}()}createDatastore(t){const n=j6(t.databaseInfo.databaseId),r=function(s){return new Svt(s)}(t.databaseInfo);return function(s,o,a,u){return new Cvt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Ovt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Pfe(this.syncEngine,n,0),function(){return Cfe.D()?new Cfe:new wvt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Gvt(i,s,o,a,u,l);return c&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=an(n);Et("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await iI(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Pp("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ga.UNAUTHENTICATED,this.clientId=xOe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Et("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Et("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ct($e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hK(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function V9(e,t){e.asyncQueue.verifyOperationInProgress(),Et("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Rfe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await SPe(e);Et("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>Ife(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>Ife(t.remoteStore,s)),e._onlineComponents=t}function u_t(e){return e.name==="FirebaseError"?e.code===$e.FAILED_PRECONDITION||e.code===$e.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function SPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Et("FirestoreClient","Using user provided OfflineComponentProvider");try{await V9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!u_t(n))throw n;fA("Error using user provided cache. Falling back to memory cache: "+n),await V9(e,new $fe)}}else Et("FirestoreClient","Using default OfflineComponentProvider"),await V9(e,new $fe);return e._offlineComponents}async function gK(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Et("FirestoreClient","Using user provided OnlineComponentProvider"),await Rfe(e,e._uninitializedComponentsProvider._online)):(Et("FirestoreClient","Using default OnlineComponentProvider"),await Rfe(e,new o_t))),e._onlineComponents}function l_t(e){return SPe(e).then(t=>t.persistence)}function c_t(e){return gK(e).then(t=>t.remoteStore)}function f_t(e){return gK(e).then(t=>t.syncEngine)}async function TPe(e){const t=await gK(e),n=t.eventManager;return n.onListen=Yvt.bind(null,t.syncEngine),n.onUnlisten=Xvt.bind(null,t.syncEngine),n}function d_t(e){return e.asyncQueue.enqueue(async()=>{const t=await l_t(e),n=await c_t(e);return t.setNetworkEnabled(!0),function(i){const s=an(i);return s.C_.delete(0),rI(s)}(n)})}function h_t(e,t,n={}){const r=new cp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new xPe({next:d=>{o.enqueueAndForget(()=>mPe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new ct($e.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new ct($e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new gPe(nK(a.path),c,{includeMetadataChanges:!0,J_:!0});return pPe(s,f)}(await TPe(e),e.asyncQueue,t,n,r)),r.promise}function p_t(e,t,n={}){const r=new cp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new xPe({next:d=>{o.enqueueAndForget(()=>mPe(s,f)),d.fromCache&&u.source==="server"?l.reject(new ct($e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new gPe(a,c,{includeMetadataChanges:!0,J_:!0});return pPe(s,f)}(await TPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function APe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CPe(e,t,n){if(!n)throw new ct($e.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function m_t(e,t,n,r){if(t===!0&&r===!0)throw new ct($e.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Dfe(e){if(!Lt.isDocumentKey(e))throw new ct($e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Lfe(e){if(Lt.isDocumentKey(e))throw new ct($e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function U6(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Yt()}function B1(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ct($e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=U6(e);throw new ct($e.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ct($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ct($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}m_t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=APe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ct($e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yK{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mfe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ct($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ct($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mfe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nyt;switch(r.type){case"firstParty":return new Myt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nfe.get(n);r&&(Et("ComponentProvider","Removing Datastore"),Nfe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oI=class IPe{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new IPe(this.firestore,t,this._query)}};class du{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xg(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new du(this.firestore,t,this._key)}}class xg extends oI{constructor(t,n,r){super(t,n,nK(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new du(this.firestore,null,new Lt(t))}withConverter(t){return new xg(this.firestore,t,this._path)}}function gP(e,t,...n){if(e=xs(e),CPe("collection","path",t),e instanceof yK){const r=Kr.fromString(t,...n);return Lfe(r),new xg(e,null,r)}{if(!(e instanceof du||e instanceof xg))throw new ct($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Kr.fromString(t,...n));return Lfe(r),new xg(e.firestore,null,r)}}function Sc(e,t,...n){if(e=xs(e),arguments.length===1&&(t=xOe.newId()),CPe("doc","path",t),e instanceof yK){const r=Kr.fromString(t,...n);return Dfe(r),new du(e,null,new Lt(r))}{if(!(e instanceof du||e instanceof xg))throw new ct($e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Kr.fromString(t,...n));return Dfe(r),new du(e.firestore,e instanceof xg?e.converter:null,new Lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_t{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new sPe(this,"async_queue_retry"),this.iu=()=>{const n=U9();n&&Et("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=U9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=U9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new cp;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!eI(t))throw t;Et("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Pp("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const i=dK.createAndSchedule(this,t,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Yt()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}class aI extends yK{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new g_t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||OPe(this),this._firestoreClient.terminate()}}function y_t(e,t,n){n||(n="(default)");const r=AE(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Z2(s,t))return i;throw new ct($e.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ct($e.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ct($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function V6(e){return e._firestoreClient||OPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function OPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Kyt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,APe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new a_t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function v_t(e){return d_t(V6(e=B1(e,aI)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vw(ea.fromBase64String(t))}catch(n){throw new ct($e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new vw(ea.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ct($e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new co(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bK=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ct($e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ct($e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return cr(this._lat,t._lat)||cr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __t=/^__.*__$/;class b_t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Cv(t,this.data,this.fieldMask,n,this.fieldTransforms):new tI(t,this.data,n,this.fieldTransforms)}}function PPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class wK{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new wK(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Au(t),i}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return ID(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(PPe(this.Iu)&&__t.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class w_t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||j6(t)}pu(t,n,r,i=!1){return new wK({Iu:t,methodName:n,gu:r,path:co.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kPe(e){const t=e._freezeSettings(),n=j6(e._databaseId);return new w_t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function E_t(e,t,n,r,i,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);NPe("Data must be an object, but it was:",o,r);const a=$Pe(r,o);let u,l;if(s.merge)u=new Kc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=S_t(t,f,n);if(!o.contains(d))throw new ct($e.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);A_t(c,d)||c.push(d)}u=new Kc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new b_t(new Bl(a),u,l)}class EK extends _K{_toFieldTransform(t){return new _1t(t.path,new yA)}isEqual(t){return t instanceof EK}}function x_t(e,t,n,r=!1){return xK(n,e.pu(r?4:3,t))}function xK(e,t){if(RPe(e=xs(e)))return NPe("Unsupported field value:",t,e),$Pe(e,t);if(e instanceof _K)return function(r,i){if(!PPe(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=xK(a,i.Vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=xs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g1t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ea.fromDate(r);return{timestampValue:AD(i.serializer,s)}}if(r instanceof Ea){const s=new Ea(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:AD(i.serializer,s)}}if(r instanceof bK)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vw)return{bytesValue:QOe(i.serializer,r._byteString)};if(r instanceof du){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sK(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${U6(r)}`)}(e,t)}function $Pe(e,t){const n={};return SOe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kE(e,(r,i)=>{const s=xK(i,t.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function RPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ea||e instanceof bK||e instanceof vw||e instanceof du||e instanceof _K)}function NPe(e,t,n){if(!RPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=U6(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function S_t(e,t,n){if((t=xs(t))instanceof vK)return t._internalPath;if(typeof t=="string")return DPe(e,t);throw ID("Field path arguments must be of type string or ",e,!1,void 0,n)}const T_t=new RegExp("[~\\*/\\[\\]]");function DPe(e,t,n){if(t.search(T_t)>=0)throw ID(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vK(...t.split("."))._internalPath}catch{throw ID(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ID(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ct($e.INVALID_ARGUMENT,a+e+u)}function A_t(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new du(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new C_t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(SK("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C_t extends LPe{data(){return super.data()}}function SK(e,t){return typeof t=="string"?DPe(e,t):t instanceof vK?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ct($e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TK{}class MPe extends TK{}function O_t(e,t,...n){let r=[];t instanceof TK&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof CK).length,a=s.filter(u=>u instanceof AK).length;if(o>1||o>0&&a>0)throw new ct($e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class AK extends MPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new AK(t,n,r)}_apply(t){const n=this._parse(t);return FPe(t._query,n),new oI(t.firestore,t.converter,EU(t._query,n))}_parse(t){const n=kPe(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ct($e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Bfe(f,c);const h=[];for(const p of f)h.push(Ffe(u,s,p));d={arrayValue:{values:h}}}else d=Ffe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Bfe(f,c),d=x_t(a,o,f,c==="in"||c==="not-in");return ns.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class CK extends TK{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new CK(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)FPe(o,u),o=EU(o,u)}(t._query,n),new oI(t.firestore,t.converter,EU(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IK extends MPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new IK(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new ct($e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ct($e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gA(s,o)}(t._query,this._field,this._direction);return new oI(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $E(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function P_t(e,t="asc"){const n=t,r=SK("orderBy",e);return IK._create(r,n)}function Ffe(e,t,n){if(typeof(n=xs(n))=="string"){if(n==="")throw new ct($e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ROe(t)&&n.indexOf("/")!==-1)throw new ct($e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Kr.fromString(n));if(!Lt.isDocumentKey(r))throw new ct($e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ufe(e,new Lt(r))}if(n instanceof du)return ufe(e,n._key);throw new ct($e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U6(n)}.`)}function Bfe(e,t){if(!Array.isArray(e)||e.length===0)throw new ct($e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FPe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ct($e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ct($e.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class k_t{convertValue(t,n="none"){switch(F1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ji(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(M1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Yt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return kE(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new bK(Ji(t.latitude),Ji(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=JY(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hA(t));default:return null}}convertTimestamp(t){const n=qg(t);return new Ea(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Kr.fromString(t);Vr(nPe(r));const i=new pA(r.get(1),r.get(3)),s=new Lt(r.popFirst(5));return i.isEqual(n)||Pp(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_t(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class BPe extends LPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new e$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(SK("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class e$ extends BPe{data(t={}){return super.data(t)}}class R_t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new WS(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new e$(this._firestore,this._userDataWriter,r.key,r,new WS(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ct($e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new e$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new WS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new e$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new WS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:N_t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function N_t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(e){e=B1(e,du);const t=B1(e.firestore,aI);return h_t(V6(t),e._key).then(n=>L_t(t,e,n))}class jPe extends k_t{constructor(t){super(),this.firestore=t}convertBytes(t){return new vw(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new du(this.firestore,null,n)}}function H9(e){e=B1(e,oI);const t=B1(e.firestore,aI),n=V6(t),r=new jPe(t);return I_t(e._query),p_t(n,e._query).then(i=>new R_t(t,r,e,i))}function u_(e,t,n){e=B1(e,du);const r=B1(e.firestore,aI),i=$_t(e.converter,t,n);return D_t(r,[E_t(kPe(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,fp.none())])}function D_t(e,t){return function(r,i){const s=new cp;return r.asyncQueue.enqueueAndForget(async()=>Qvt(await f_t(r),i,s)),s.promise}(V6(e),t)}function L_t(e,t,n){const r=n.docs.get(t._key),i=new jPe(e);return new BPe(e,i,t._key,r,new WS(n.hasPendingWrites,n.fromCache),t.converter)}function M_t(){return new EK("serverTimestamp")}(function(t,n=!0){(function(i){PE=i})(Tv),Cp(new jd("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new aI(new Dyt(r.getProvider("auth-internal")),new Byt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ct($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),of(ife,"4.4.0",t),of(ife,"4.4.0","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=new Map,zPe={activated:!1,tokenObservers:[]},F_t={initialized:!1,enabled:!1};function bs(e){return PU.get(e)||Object.assign({},zPe)}function B_t(e,t){return PU.set(e,t),PU.get(e)}function H6(){return F_t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPe="https://content-firebaseappcheck.googleapis.com/v1",j_t="exchangeRecaptchaV3Token",z_t="exchangeDebugToken",jfe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},U_t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new J2,await H_t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new J2,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function H_t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ou=new TE("appCheck","AppCheck",q_t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zfe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function OK(e){if(!bs(e).activated)throw ou.create("use-before-activation",{appName:e.name})}function VPe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=vP(n)+"d:"),r&&(o+=vP(r)+"h:"),o+=vP(i)+"m:"+vP(s)+"s",o}function vP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PK({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ou.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ou.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ou.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ou.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function W_t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${UPe}/projects/${n}/apps/${r}:${j_t}?key=${i}`,body:{recaptcha_v3_token:t}}}function HPe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${UPe}/projects/${n}/apps/${r}:${z_t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_t="firebase-app-check-database",Y_t=1,bA="firebase-app-check-store",qPe="debug-token";let _P=null;function WPe(){return _P||(_P=new Promise((e,t)=>{try{const n=indexedDB.open(G_t,Y_t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ou.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(bA,{keyPath:"compositeKey"})}}}catch(n){t(ou.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),_P)}function K_t(e){return YPe(KPe(e))}function X_t(e,t){return GPe(KPe(e),t)}function Q_t(e){return GPe(qPe,e)}function J_t(){return YPe(qPe)}async function GPe(e,t){const r=(await WPe()).transaction(bA,"readwrite"),s=r.objectStore(bA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ou.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function YPe(e){const n=(await WPe()).transaction(bA,"readonly"),i=n.objectStore(bA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ou.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function KPe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new d6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z_t(e){if(lY()){let t;try{t=await K_t(e)}catch(n){wA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function q9(e,t){return lY()?X_t(e,t).catch(n=>{wA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function ebt(){let e;try{e=await J_t()}catch{}if(e)return e;{const t=$dt();return Q_t(t).catch(n=>wA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(){return H6().enabled}async function $K(){const e=H6();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function tbt(){const e=pCe(),t=H6();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new J2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ebt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nbt={error:"UNKNOWN_ERROR"};function rbt(e){return aY.encodeString(JSON.stringify(e),!1)}async function kU(e,t=!1){const n=e.app;OK(n);const r=bs(n);let i=r.token,s;if(i&&!eb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(eb(u)?i=u:await q9(n,void 0))}if(!t&&i&&eb(i))return{token:i.token};let o=!1;if(kK()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PK(HPe(n,await $K()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await q9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await bs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?wA.warn(u.message):wA.error(u),s=u}let a;return i?s?eb(i)?a={token:i.token,internalError:s}:a=Vfe(s):(a={token:i.token},r.token=i,await q9(n,i)):a=Vfe(s),o&&JPe(n,a),a}async function ibt(e){const t=e.app;OK(t);const{provider:n}=bs(t);if(kK()){const r=await $K(),{token:i}=await PK(HPe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function XPe(e,t,n,r){const{app:i}=e,s=bs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&eb(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ufe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ufe(e))}function QPe(e,t){const n=bs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ufe(e){const{app:t}=e,n=bs(t);let r=n.tokenRefresher;r||(r=sbt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function sbt(e){const{app:t}=e;return new V_t(async()=>{const n=bs(t);let r;if(n.token?r=await kU(e,!0):r=await kU(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=bs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jfe.RETRIAL_MIN_WAIT,jfe.RETRIAL_MAX_WAIT)}function JPe(e,t){const n=bs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function eb(e){return e.expireTimeMillis-Date.now()>0}function Vfe(e){return{token:rbt(nbt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class obt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=bs(this.app);for(const n of t)QPe(this.app,n.next);return Promise.resolve()}}function abt(e,t){return new obt(e,t)}function ubt(e){return{getToken:t=>kU(e,t),getLimitedUseToken:()=>ibt(e),addTokenListener:t=>XPe(e,"INTERNAL",t),removeTokenListener:t=>QPe(e.app,t)}}const lbt="@firebase/app-check",cbt="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fbt="https://www.google.com/recaptcha/api.js";function dbt(e,t){const n=new J2,r=bs(e);r.reCAPTCHAState={initialized:n};const i=hbt(e),s=zfe(!1);return s?Hfe(e,t,s,i,n):gbt(()=>{const o=zfe(!1);if(!o)throw new Error("no recaptcha");Hfe(e,t,o,i,n)}),n.promise}function Hfe(e,t,n,r,i){n.ready(()=>{mbt(e,t,n,r),i.resolve(n)})}function hbt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function pbt(e){OK(e);const n=await bs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=bs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function mbt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{bs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{bs(e).reCAPTCHAState.succeeded=!1}}),s=bs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function gbt(e){const t=document.createElement("script");t.src=fbt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;vbt(this._throttleData);const i=await pbt(this._app).catch(o=>{throw ou.create("recaptcha-error")});if(!(!((t=bs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ou.create("recaptcha-error");let s;try{s=await PK(W_t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=ybt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ou.create("throttled",{time:VPe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=AE(t,"heartbeat"),dbt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof RK?this._siteKey===t._siteKey:!1}}function ybt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+U_t,httpStatus:e};{const n=t?t.backoffCount:0,r=Mdt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function vbt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ou.create("throttled",{time:VPe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _bt(e=fY(),t){e=xs(e);const n=AE(e,"app-check");if(H6().initialized||tbt(),kK()&&$K().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ou.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return bbt(e,t.provider,t.isTokenAutoRefreshEnabled),bs(e).isTokenAutoRefreshEnabled&&XPe(r,"INTERNAL",()=>{}),r}function bbt(e,t,n){const r=B_t(e,Object.assign({},zPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=Z_t(e).then(i=>(i&&eb(i)&&(r.token=i,JPe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const wbt="app-check",qfe="app-check-internal";function Ebt(){Cp(new jd(wbt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return abt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(qfe).initialize()})),Cp(new jd(qfe,e=>{const t=e.getProvider("app-check").getImmediate();return ubt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),of(lbt,cbt)}Ebt();function bP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ZPe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof bP=="function"&&bP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof bP=="function"&&bP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,w){if(typeof E!="function"&&this.state===l||typeof w!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var S=this.state===l?E:w;h(x,S,this.outcome)}else this.queue.push(new d(x,E,w));return x};function d(E,w,x){this.promise=E,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,w,x){s(function(){var S;try{S=w(x)}catch(I){return a.reject(E,I)}S===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,S)})}a.resolve=function(E,w){var x=g(p,w);if(x.status==="error")return a.reject(E,x.value);var S=x.value;if(S)m(E,S);else{E.state=l,E.outcome=w;for(var I=-1,C=E.queue.length;++I<C;)E.queue[I].callFulfilled(w)}return E},a.reject=function(E,w){E.state=u,E.outcome=w;for(var x=-1,S=E.queue.length;++x<S;)E.queue[x].callRejected(w);return E};function p(E){var w=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof w=="function")return function(){w.apply(E,arguments)}}function m(E,w){var x=!1;function S(z){x||(x=!0,a.reject(E,z))}function I(z){x||(x=!0,a.resolve(E,z))}function C(){w(I,S)}var O=g(C);O.status==="error"&&S(O.value)}function g(E,w){var x={};try{x.value=E(w),x.status="success"}catch(S){x.status="error",x.value=S}return x}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var w=new this(o);return a.reject(w,E)}f.all=_;function _(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var I=new Array(x),C=0,O=-1,z=new this(o);++O<x;)N(E[O],O);return z;function N($,D){w.resolve($).then(B,function(V){S||(S=!0,a.reject(z,V))});function B(V){I[D]=V,++C===x&&!S&&(S=!0,a.resolve(z,I))}}}f.race=b;function b(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var I=-1,C=new this(o);++I<x;)O(E[I]);return C;function O(z){w.resolve(z).then(function(N){S||(S=!0,a.resolve(C,N))},function(N){S||(S=!0,a.reject(C,N))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof iu<"u"?iu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};function o(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!q||te)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(q,te){q=q||[],te=te||{};try{return new Blob(q,te)}catch(oe){if(oe.name!=="TypeError")throw oe;for(var K=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new K,pe=0;pe<q.length;pe+=1)fe.append(q[pe]);return fe.getBlob(te.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(q,te){te&&q.then(function(K){te(null,K)},function(K){te(K)})}function h(q,te,K){typeof te=="function"&&q.then(te),typeof K=="function"&&q.catch(K)}function p(q){return typeof q!="string"&&(console.warn(q+" used as a key, but it is not a string."),q=String(q)),q}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,b="readonly",E="readwrite";function w(q){for(var te=q.length,K=new ArrayBuffer(te),fe=new Uint8Array(K),pe=0;pe<te;pe++)fe[pe]=q.charCodeAt(pe);return K}function x(q){return new f(function(te){var K=q.transaction(g,E),fe=c([""]);K.objectStore(g).put(fe,"key"),K.onabort=function(pe){pe.preventDefault(),pe.stopPropagation(),te(!1)},K.oncomplete=function(){var pe=navigator.userAgent.match(/Chrome\/(\d+)/),oe=navigator.userAgent.match(/Edge\//);te(oe||!pe||parseInt(pe[1],10)>=43)}}).catch(function(){return!1})}function S(q){return typeof y=="boolean"?f.resolve(y):x(q).then(function(te){return y=te,y})}function I(q){var te=v[q.name],K={};K.promise=new f(function(fe,pe){K.resolve=fe,K.reject=pe}),te.deferredOperations.push(K),te.dbReady?te.dbReady=te.dbReady.then(function(){return K.promise}):te.dbReady=K.promise}function C(q){var te=v[q.name],K=te.deferredOperations.pop();if(K)return K.resolve(),K.promise}function O(q,te){var K=v[q.name],fe=K.deferredOperations.pop();if(fe)return fe.reject(te),fe.promise}function z(q,te){return new f(function(K,fe){if(v[q.name]=v[q.name]||k(),q.db)if(te)I(q),q.db.close();else return K(q.db);var pe=[q.name];te&&pe.push(q.version);var oe=u.open.apply(u,pe);te&&(oe.onupgradeneeded=function(Se){var De=oe.result;try{De.createObjectStore(q.storeName),Se.oldVersion<=1&&De.createObjectStore(g)}catch(ze){if(ze.name==="ConstraintError")console.warn('The database "'+q.name+'" has been upgraded from version '+Se.oldVersion+" to version "+Se.newVersion+', but the storage "'+q.storeName+'" already exists.');else throw ze}}),oe.onerror=function(Se){Se.preventDefault(),fe(oe.error)},oe.onsuccess=function(){var Se=oe.result;Se.onversionchange=function(De){De.target.close()},K(Se),C(q)}})}function N(q){return z(q,!1)}function $(q){return z(q,!0)}function D(q,te){if(!q.db)return!0;var K=!q.db.objectStoreNames.contains(q.storeName),fe=q.version<q.db.version,pe=q.version>q.db.version;if(fe&&(q.version!==te&&console.warn('The database "'+q.name+`" can't be downgraded from version `+q.db.version+" to version "+q.version+"."),q.version=q.db.version),pe||K){if(K){var oe=q.db.version+1;oe>q.version&&(q.version=oe)}return!0}return!1}function B(q){return new f(function(te,K){var fe=new FileReader;fe.onerror=K,fe.onloadend=function(pe){var oe=btoa(pe.target.result||"");te({__local_forage_encoded_blob:!0,data:oe,type:q.type})},fe.readAsBinaryString(q)})}function V(q){var te=w(atob(q.data));return c([te],{type:q.type})}function j(q){return q&&q.__local_forage_encoded_blob}function G(q){var te=this,K=te._initReady().then(function(){var fe=v[te._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(K,q,q),K}function U(q){I(q);for(var te=v[q.name],K=te.forages,fe=0;fe<K.length;fe++){var pe=K[fe];pe._dbInfo.db&&(pe._dbInfo.db.close(),pe._dbInfo.db=null)}return q.db=null,N(q).then(function(oe){return q.db=oe,D(q)?$(q):oe}).then(function(oe){q.db=te.db=oe;for(var Se=0;Se<K.length;Se++)K[Se]._dbInfo.db=oe}).catch(function(oe){throw O(q,oe),oe})}function P(q,te,K,fe){fe===void 0&&(fe=1);try{var pe=q.db.transaction(q.storeName,te);K(null,pe)}catch(oe){if(fe>0&&(!q.db||oe.name==="InvalidStateError"||oe.name==="NotFoundError"))return f.resolve().then(function(){if(!q.db||oe.name==="NotFoundError"&&!q.db.objectStoreNames.contains(q.storeName)&&q.version<=q.db.version)return q.db&&(q.version=q.db.version+1),$(q)}).then(function(){return U(q).then(function(){P(q,te,K,fe-1)})}).catch(K);K(oe)}}function k(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function H(q){var te=this,K={db:null};if(q)for(var fe in q)K[fe]=q[fe];var pe=v[K.name];pe||(pe=k(),v[K.name]=pe),pe.forages.push(te),te._initReady||(te._initReady=te.ready,te.ready=G);var oe=[];function Se(){return f.resolve()}for(var De=0;De<pe.forages.length;De++){var ze=pe.forages[De];ze!==te&&oe.push(ze._initReady().catch(Se))}var He=pe.forages.slice(0);return f.all(oe).then(function(){return K.db=pe.db,N(K)}).then(function(Ze){return K.db=Ze,D(K,te._defaultConfig.version)?$(K):Ze}).then(function(Ze){K.db=pe.db=Ze,te._dbInfo=K;for(var wt=0;wt<He.length;wt++){var gn=He[wt];gn!==te&&(gn._dbInfo.db=K.db,gn._dbInfo.version=K.version)}})}function M(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.get(q);He.onsuccess=function(){var Ze=He.result;Ze===void 0&&(Ze=null),j(Ze)&&(Ze=V(Ze)),pe(Ze)},He.onerror=function(){oe(He.error)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function F(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.openCursor(),Ze=1;He.onsuccess=function(){var wt=He.result;if(wt){var gn=wt.value;j(gn)&&(gn=V(gn));var tr=q(gn,wt.key,Ze++);tr!==void 0?pe(tr):wt.continue()}else pe()},He.onerror=function(){oe(He.error)}}catch(wt){oe(wt)}})}).catch(oe)});return d(fe,te),fe}function J(q,te,K){var fe=this;q=p(q);var pe=new f(function(oe,Se){var De;fe.ready().then(function(){return De=fe._dbInfo,_.call(te)==="[object Blob]"?S(De.db).then(function(ze){return ze?te:B(te)}):te}).then(function(ze){P(fe._dbInfo,E,function(He,Ze){if(He)return Se(He);try{var wt=Ze.objectStore(fe._dbInfo.storeName);ze===null&&(ze=void 0);var gn=wt.put(ze,q);Ze.oncomplete=function(){ze===void 0&&(ze=null),oe(ze)},Ze.onabort=Ze.onerror=function(){var tr=gn.error?gn.error:gn.transaction.error;Se(tr)}}catch(tr){Se(tr)}})}).catch(Se)});return d(pe,K),pe}function se(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,E,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.delete(q);De.oncomplete=function(){pe()},De.onerror=function(){oe(He.error)},De.onabort=function(){var Ze=He.error?He.error:He.transaction.error;oe(Ze)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function ae(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,E,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.clear();Se.oncomplete=function(){fe()},Se.onabort=Se.onerror=function(){var He=ze.error?ze.error:ze.transaction.error;pe(He)}}catch(He){pe(He)}})}).catch(pe)});return d(K,q),K}function ce(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.count();ze.onsuccess=function(){fe(ze.result)},ze.onerror=function(){pe(ze.error)}}catch(He){pe(He)}})}).catch(pe)});return d(K,q),K}function le(q,te){var K=this,fe=new f(function(pe,oe){if(q<0){pe(null);return}K.ready().then(function(){P(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=!1,Ze=ze.openKeyCursor();Ze.onsuccess=function(){var wt=Ze.result;if(!wt){pe(null);return}q===0||He?pe(wt.key):(He=!0,wt.advance(q))},Ze.onerror=function(){oe(Ze.error)}}catch(wt){oe(wt)}})}).catch(oe)});return d(fe,te),fe}function ge(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.openKeyCursor(),He=[];ze.onsuccess=function(){var Ze=ze.result;if(!Ze){fe(He);return}He.push(Ze.key),Ze.continue()},ze.onerror=function(){pe(ze.error)}}catch(Ze){pe(Ze)}})}).catch(pe)});return d(K,q),K}function ue(q,te){te=m.apply(this,arguments);var K=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||K.name,q.storeName=q.storeName||K.storeName);var fe=this,pe;if(!q.name)pe=f.reject("Invalid arguments");else{var oe=q.name===K.name&&fe._dbInfo.db,Se=oe?f.resolve(fe._dbInfo.db):N(q).then(function(De){var ze=v[q.name],He=ze.forages;ze.db=De;for(var Ze=0;Ze<He.length;Ze++)He[Ze]._dbInfo.db=De;return De});q.storeName?pe=Se.then(function(De){if(De.objectStoreNames.contains(q.storeName)){var ze=De.version+1;I(q);var He=v[q.name],Ze=He.forages;De.close();for(var wt=0;wt<Ze.length;wt++){var gn=Ze[wt];gn._dbInfo.db=null,gn._dbInfo.version=ze}var tr=new f(function(ur,Si){var ri=u.open(q.name,ze);ri.onerror=function(za){var Q0=ri.result;Q0.close(),Si(za)},ri.onupgradeneeded=function(){var za=ri.result;za.deleteObjectStore(q.storeName)},ri.onsuccess=function(){var za=ri.result;za.close(),ur(za)}});return tr.then(function(ur){He.db=ur;for(var Si=0;Si<Ze.length;Si++){var ri=Ze[Si];ri._dbInfo.db=ur,C(ri._dbInfo)}}).catch(function(ur){throw(O(q,ur)||f.resolve()).catch(function(){}),ur})}}):pe=Se.then(function(De){I(q);var ze=v[q.name],He=ze.forages;De.close();for(var Ze=0;Ze<He.length;Ze++){var wt=He[Ze];wt._dbInfo.db=null}var gn=new f(function(tr,ur){var Si=u.deleteDatabase(q.name);Si.onerror=function(){var ri=Si.result;ri&&ri.close(),ur(Si.error)},Si.onblocked=function(){console.warn('dropInstance blocked for database "'+q.name+'" until all open connections are closed')},Si.onsuccess=function(){var ri=Si.result;ri&&ri.close(),tr(ri)}});return gn.then(function(tr){ze.db=tr;for(var ur=0;ur<He.length;ur++){var Si=He[ur];C(Si._dbInfo)}}).catch(function(tr){throw(O(q,tr)||f.resolve()).catch(function(){}),tr})})}return d(pe,te),pe}var Fe={_driver:"asyncStorage",_initStorage:H,_support:l(),iterate:F,getItem:M,setItem:J,removeItem:se,clear:ae,length:ce,key:le,keys:ge,dropInstance:ue};function ke(){return typeof openDatabase=="function"}var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,Le="__lfsc__:",Ut=Le.length,Qe="arbf",je="blob",bt="si08",et="ui08",ut="uic8",lt="si16",jt="si32",Dn="ur16",he="ui32",_e="fl32",Pe="fl64",it=Ut+Qe.length,Ye=Object.prototype.toString;function at(q){var te=q.length*.75,K=q.length,fe,pe=0,oe,Se,De,ze;q[q.length-1]==="="&&(te--,q[q.length-2]==="="&&te--);var He=new ArrayBuffer(te),Ze=new Uint8Array(He);for(fe=0;fe<K;fe+=4)oe=Ge.indexOf(q[fe]),Se=Ge.indexOf(q[fe+1]),De=Ge.indexOf(q[fe+2]),ze=Ge.indexOf(q[fe+3]),Ze[pe++]=oe<<2|Se>>4,Ze[pe++]=(Se&15)<<4|De>>2,Ze[pe++]=(De&3)<<6|ze&63;return He}function tt(q){var te=new Uint8Array(q),K="",fe;for(fe=0;fe<te.length;fe+=3)K+=Ge[te[fe]>>2],K+=Ge[(te[fe]&3)<<4|te[fe+1]>>4],K+=Ge[(te[fe+1]&15)<<2|te[fe+2]>>6],K+=Ge[te[fe+2]&63];return te.length%3===2?K=K.substring(0,K.length-1)+"=":te.length%3===1&&(K=K.substring(0,K.length-2)+"=="),K}function vt(q,te){var K="";if(q&&(K=Ye.call(q)),q&&(K==="[object ArrayBuffer]"||q.buffer&&Ye.call(q.buffer)==="[object ArrayBuffer]")){var fe,pe=Le;q instanceof ArrayBuffer?(fe=q,pe+=Qe):(fe=q.buffer,K==="[object Int8Array]"?pe+=bt:K==="[object Uint8Array]"?pe+=et:K==="[object Uint8ClampedArray]"?pe+=ut:K==="[object Int16Array]"?pe+=lt:K==="[object Uint16Array]"?pe+=Dn:K==="[object Int32Array]"?pe+=jt:K==="[object Uint32Array]"?pe+=he:K==="[object Float32Array]"?pe+=_e:K==="[object Float64Array]"?pe+=Pe:te(new Error("Failed to get type for BinaryArray"))),te(pe+tt(fe))}else if(K==="[object Blob]"){var oe=new FileReader;oe.onload=function(){var Se=Re+q.type+"~"+tt(this.result);te(Le+je+Se)},oe.readAsArrayBuffer(q)}else try{te(JSON.stringify(q))}catch(Se){console.error("Couldn't convert value into a JSON string: ",q),te(null,Se)}}function In(q){if(q.substring(0,Ut)!==Le)return JSON.parse(q);var te=q.substring(it),K=q.substring(Ut,it),fe;if(K===je&&Oe.test(te)){var pe=te.match(Oe);fe=pe[1],te=te.substring(pe[0].length)}var oe=at(te);switch(K){case Qe:return oe;case je:return c([oe],{type:fe});case bt:return new Int8Array(oe);case et:return new Uint8Array(oe);case ut:return new Uint8ClampedArray(oe);case lt:return new Int16Array(oe);case Dn:return new Uint16Array(oe);case jt:return new Int32Array(oe);case he:return new Uint32Array(oe);case _e:return new Float32Array(oe);case Pe:return new Float64Array(oe);default:throw new Error("Unkown type: "+K)}}var Wt={serialize:vt,deserialize:In,stringToBuffer:at,bufferToString:tt};function Vt(q,te,K,fe){q.executeSql("CREATE TABLE IF NOT EXISTS "+te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],K,fe)}function hr(q){var te=this,K={db:null};if(q)for(var fe in q)K[fe]=typeof q[fe]!="string"?q[fe].toString():q[fe];var pe=new f(function(oe,Se){try{K.db=openDatabase(K.name,String(K.version),K.description,K.size)}catch(De){return Se(De)}K.db.transaction(function(De){Vt(De,K,function(){te._dbInfo=K,oe()},function(ze,He){Se(He)})},Se)});return K.serializer=Wt,pe}function Yn(q,te,K,fe,pe,oe){q.executeSql(K,fe,pe,function(Se,De){De.code===De.SYNTAX_ERR?Se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[te.storeName],function(ze,He){He.rows.length?oe(ze,De):Vt(ze,te,function(){ze.executeSql(K,fe,pe,oe)},oe)},oe):oe(Se,De)},oe)}function ku(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName+" WHERE key = ? LIMIT 1",[q],function(ze,He){var Ze=He.rows.length?He.rows.item(0).value:null;Ze&&(Ze=Se.serializer.deserialize(Ze)),pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Mr(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName,[],function(ze,He){for(var Ze=He.rows,wt=Ze.length,gn=0;gn<wt;gn++){var tr=Ze.item(gn),ur=tr.value;if(ur&&(ur=Se.serializer.deserialize(ur)),ur=q(ur,tr.key,gn+1),ur!==void 0){pe(ur);return}}pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function us(q,te,K,fe){var pe=this;q=p(q);var oe=new f(function(Se,De){pe.ready().then(function(){te===void 0&&(te=null);var ze=te,He=pe._dbInfo;He.serializer.serialize(te,function(Ze,wt){wt?De(wt):He.db.transaction(function(gn){Yn(gn,He,"INSERT OR REPLACE INTO "+He.storeName+" (key, value) VALUES (?, ?)",[q,Ze],function(){Se(ze)},function(tr,ur){De(ur)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(fe>0){Se(us.apply(pe,[q,ze,K,fe-1]));return}De(gn)}})})}).catch(De)});return d(oe,K),oe}function ti(q,te,K){return us.apply(this,[q,te,K,1])}function Ei(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"DELETE FROM "+Se.storeName+" WHERE key = ?",[q],function(){pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function qr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"DELETE FROM "+oe.storeName,[],function(){fe()},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function yr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT COUNT(key) as c FROM "+oe.storeName,[],function(De,ze){var He=ze.rows.item(0).c;fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function gt(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT key FROM "+Se.storeName+" WHERE id = ? LIMIT 1",[q+1],function(ze,He){var Ze=He.rows.length?He.rows.item(0).key:null;pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Fr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT key FROM "+oe.storeName,[],function(De,ze){for(var He=[],Ze=0;Ze<ze.rows.length;Ze++)He.push(ze.rows.item(Ze).key);fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function xi(q){return new f(function(te,K){q.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(pe,oe){for(var Se=[],De=0;De<oe.rows.length;De++)Se.push(oe.rows.item(De).name);te({db:q,storeNames:Se})},function(pe,oe){K(oe)})},function(fe){K(fe)})})}function Yi(q,te){te=m.apply(this,arguments);var K=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||K.name,q.storeName=q.storeName||K.storeName);var fe=this,pe;return q.name?pe=new f(function(oe){var Se;q.name===K.name?Se=fe._dbInfo.db:Se=openDatabase(q.name,"","",0),q.storeName?oe({db:Se,storeNames:[q.storeName]}):oe(xi(Se))}).then(function(oe){return new f(function(Se,De){oe.db.transaction(function(ze){function He(tr){return new f(function(ur,Si){ze.executeSql("DROP TABLE IF EXISTS "+tr,[],function(){ur()},function(ri,za){Si(za)})})}for(var Ze=[],wt=0,gn=oe.storeNames.length;wt<gn;wt++)Ze.push(He(oe.storeNames[wt]));f.all(Ze).then(function(){Se()}).catch(function(tr){De(tr)})},function(ze){De(ze)})})}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var Qs={_driver:"webSQLStorage",_initStorage:hr,_support:ke(),iterate:Mr,getItem:ku,setItem:ti,removeItem:Ei,clear:qr,length:yr,key:gt,keys:Fr,dropInstance:Yi};function Ba(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ne(q,te){var K=q.name+"/";return q.storeName!==te.storeName&&(K+=q.storeName+"/"),K}function Q(){var q="_localforage_support_test";try{return localStorage.setItem(q,!0),localStorage.removeItem(q),!1}catch{return!0}}function ie(){return!Q()||localStorage.length>0}function ve(q){var te=this,K={};if(q)for(var fe in q)K[fe]=q[fe];return K.keyPrefix=ne(q,te._defaultConfig),ie()?(te._dbInfo=K,K.serializer=Wt,f.resolve()):f.reject()}function ye(q){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo.keyPrefix,pe=localStorage.length-1;pe>=0;pe--){var oe=localStorage.key(pe);oe.indexOf(fe)===0&&localStorage.removeItem(oe)}});return d(K,q),K}function pt(q,te){var K=this;q=p(q);var fe=K.ready().then(function(){var pe=K._dbInfo,oe=localStorage.getItem(pe.keyPrefix+q);return oe&&(oe=pe.serializer.deserialize(oe)),oe});return d(fe,te),fe}function Ce(q,te){var K=this,fe=K.ready().then(function(){for(var pe=K._dbInfo,oe=pe.keyPrefix,Se=oe.length,De=localStorage.length,ze=1,He=0;He<De;He++){var Ze=localStorage.key(He);if(Ze.indexOf(oe)===0){var wt=localStorage.getItem(Ze);if(wt&&(wt=pe.serializer.deserialize(wt)),wt=q(wt,Ze.substring(Se),ze++),wt!==void 0)return wt}}});return d(fe,te),fe}function ft(q,te){var K=this,fe=K.ready().then(function(){var pe=K._dbInfo,oe;try{oe=localStorage.key(q)}catch{oe=null}return oe&&(oe=oe.substring(pe.keyPrefix.length)),oe});return d(fe,te),fe}function Bt(q){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo,pe=localStorage.length,oe=[],Se=0;Se<pe;Se++){var De=localStorage.key(Se);De.indexOf(fe.keyPrefix)===0&&oe.push(De.substring(fe.keyPrefix.length))}return oe});return d(K,q),K}function St(q){var te=this,K=te.keys().then(function(fe){return fe.length});return d(K,q),K}function Ht(q,te){var K=this;q=p(q);var fe=K.ready().then(function(){var pe=K._dbInfo;localStorage.removeItem(pe.keyPrefix+q)});return d(fe,te),fe}function fn(q,te,K){var fe=this;q=p(q);var pe=fe.ready().then(function(){te===void 0&&(te=null);var oe=te;return new f(function(Se,De){var ze=fe._dbInfo;ze.serializer.serialize(te,function(He,Ze){if(Ze)De(Ze);else try{localStorage.setItem(ze.keyPrefix+q,He),Se(oe)}catch(wt){(wt.name==="QuotaExceededError"||wt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&De(wt),De(wt)}})})});return d(pe,K),pe}function Tr(q,te){if(te=m.apply(this,arguments),q=typeof q!="function"&&q||{},!q.name){var K=this.config();q.name=q.name||K.name,q.storeName=q.storeName||K.storeName}var fe=this,pe;return q.name?pe=new f(function(oe){q.storeName?oe(ne(q,fe._defaultConfig)):oe(q.name+"/")}).then(function(oe){for(var Se=localStorage.length-1;Se>=0;Se--){var De=localStorage.key(Se);De.indexOf(oe)===0&&localStorage.removeItem(De)}}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var zt={_driver:"localStorageWrapper",_initStorage:ve,_support:Ba(),iterate:Ce,getItem:pt,setItem:fn,removeItem:Ht,clear:ye,length:St,key:ft,keys:Bt,dropInstance:Tr},pr=function(te,K){return te===K||typeof te=="number"&&typeof K=="number"&&isNaN(te)&&isNaN(K)},Xt=function(te,K){for(var fe=te.length,pe=0;pe<fe;){if(pr(te[pe],K))return!0;pe++}return!1},er=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},ni={},ls={},Fi={INDEXEDDB:Fe,WEBSQL:Qs,LOCALSTORAGE:zt},oa=[Fi.INDEXEDDB._driver,Fi.WEBSQL._driver,Fi.LOCALSTORAGE._driver],Js=["dropInstance"],mi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Js),yt={description:"",driver:oa.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wn(q,te){q[te]=function(){var K=arguments;return q.ready().then(function(){return q[te].apply(q,K)})}}function Br(){for(var q=1;q<arguments.length;q++){var te=arguments[q];if(te)for(var K in te)te.hasOwnProperty(K)&&(er(te[K])?arguments[0][K]=te[K].slice():arguments[0][K]=te[K])}return arguments[0]}var Is=function(){function q(te){o(this,q);for(var K in Fi)if(Fi.hasOwnProperty(K)){var fe=Fi[K],pe=fe._driver;this[K]=pe,ni[pe]||this.defineDriver(fe)}this._defaultConfig=Br({},yt),this._config=Br({},this._defaultConfig,te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return q.prototype.config=function(K){if((typeof K>"u"?"undefined":s(K))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in K){if(fe==="storeName"&&(K[fe]=K[fe].replace(/\W/g,"_")),fe==="version"&&typeof K[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=K[fe]}return"driver"in K&&K.driver?this.setDriver(this._config.driver):!0}else return typeof K=="string"?this._config[K]:this._config},q.prototype.defineDriver=function(K,fe,pe){var oe=new f(function(Se,De){try{var ze=K._driver,He=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!K._driver){De(He);return}for(var Ze=mi.concat("_initStorage"),wt=0,gn=Ze.length;wt<gn;wt++){var tr=Ze[wt],ur=!Xt(Js,tr);if((ur||K[tr])&&typeof K[tr]!="function"){De(He);return}}var Si=function(){for(var Q0=function(m8){return function(){var t_=new Error("Method "+m8+" is not implemented by the current driver"),n_=f.reject(t_);return d(n_,arguments[arguments.length-1]),n_}},Cx=0,Ix=Js.length;Cx<Ix;Cx++){var Ox=Js[Cx];K[Ox]||(K[Ox]=Q0(Ox))}};Si();var ri=function(Q0){ni[ze]&&console.info("Redefining LocalForage driver: "+ze),ni[ze]=K,ls[ze]=Q0,Se()};"_support"in K?K._support&&typeof K._support=="function"?K._support().then(ri,De):ri(!!K._support):ri(!0)}catch(za){De(za)}});return h(oe,fe,pe),oe},q.prototype.driver=function(){return this._driver||null},q.prototype.getDriver=function(K,fe,pe){var oe=ni[K]?f.resolve(ni[K]):f.reject(new Error("Driver not found."));return h(oe,fe,pe),oe},q.prototype.getSerializer=function(K){var fe=f.resolve(Wt);return h(fe,K),fe},q.prototype.ready=function(K){var fe=this,pe=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(pe,K,K),pe},q.prototype.setDriver=function(K,fe,pe){var oe=this;er(K)||(K=[K]);var Se=this._getSupportedDrivers(K);function De(){oe._config.driver=oe.driver()}function ze(wt){return oe._extend(wt),De(),oe._ready=oe._initStorage(oe._config),oe._ready}function He(wt){return function(){var gn=0;function tr(){for(;gn<wt.length;){var ur=wt[gn];return gn++,oe._dbInfo=null,oe._ready=null,oe.getDriver(ur).then(ze).catch(tr)}De();var Si=new Error("No available storage method found.");return oe._driverSet=f.reject(Si),oe._driverSet}return tr()}}var Ze=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ze.then(function(){var wt=Se[0];return oe._dbInfo=null,oe._ready=null,oe.getDriver(wt).then(function(gn){oe._driver=gn._driver,De(),oe._wrapLibraryMethodsWithReady(),oe._initDriver=He(Se)})}).catch(function(){De();var wt=new Error("No available storage method found.");return oe._driverSet=f.reject(wt),oe._driverSet}),h(this._driverSet,fe,pe),this._driverSet},q.prototype.supports=function(K){return!!ls[K]},q.prototype._extend=function(K){Br(this,K)},q.prototype._getSupportedDrivers=function(K){for(var fe=[],pe=0,oe=K.length;pe<oe;pe++){var Se=K[pe];this.supports(Se)&&fe.push(Se)}return fe},q.prototype._wrapLibraryMethodsWithReady=function(){for(var K=0,fe=mi.length;K<fe;K++)wn(this,mi[K])},q.prototype.createInstance=function(K){return new q(K)},q}(),ja=new Is;r.exports=ja},{3:3}]},{},[4])(4)})})(ZPe);var xbt=ZPe.exports;const eke=pl(xbt);class tke{constructor(t){Ru(this,"engine");Ru(this,"connected",!1);Ru(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Pb(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function Gg(e){return e.components.flatMap(t=>typeof t=="string"?t:Gg(t))}class OD extends tke{constructor(){super("firebase");Ru(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");Ru(this,"firestore");Ru(this,"collectionPrefix","prod-");Ru(this,"studyCollection");Ru(this,"studyId","");Ru(this,"localForage",eke.createInstance({name:"currentParticipantId"}));Ru(this,"localProvenanceCopy",{});Ru(this,"localWindowEvents",{});const n=wY.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=bCe(n);this.firestore=y_t(r,{});try{_bt(r,{provider:new RK(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await v_t(this.firestore);const n=await Sc(this.firestore,".info/connected");await yP(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=mD();if(!i.currentUser&&(await Cpt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await Pb(JSON.stringify(r));this.studyCollection=gP(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const o=Sc(this.studyCollection,"configs"),a=gP(o,"configs"),u=Sc(a,s);return await u_(u,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=Sc(this.studyCollection,this.currentParticipantId),o=(await yP(s)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([l,c])=>{o!==null&&(c===void 0||c.length===0?o.answers[l].windowEvents=[]:o.answers[l].windowEvents=c)}),o)return o;const a=await Pb(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n};return await u_(s,u),u}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Sc(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=Sc(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await u_(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=Sc(this.studyCollection,"sequenceAssignment"),i=gP(r,"sequenceAssignment"),s=Sc(i,this.currentParticipantId);await u_(s,{participantId:this.currentParticipantId,timestamp:M_t()});const o=O_t(i,P_t("timestamp","asc")),l=(await H9(o)).docs.map(f=>f.data()).findIndex(f=>f.participantId===this.currentParticipantId),c=n[l%n.length];if(!c)throw new Error("Latin square is empty");return c}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await H9(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let n=null;if(this.currentParticipantId!==null){const r=Sc(this.studyCollection,this.currentParticipantId);if(n=(await yP(r)).data(),n!==null){const i=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),s=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents");Object.entries(n.answers).forEach(([o,a])=>{a!==void 0&&(a.provenanceGraph=i[o],a.windowEvents=s[o])})}}return n}async nextParticipant(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Sc(this.studyCollection),i=r.id;await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;let s=null;if(this.currentParticipantId!==null&&(s=(await yP(r)).data()),!s){const o=await Pb(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{}};await u_(r,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return Gg(n.sequence).every((i,s)=>i==="end"?!0:n.answers[`${i}_${s}`]!==void 0)}async getUserManagementData(n){const r=gP(this.firestore,"user-management"),i=await H9(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async editUserManagementAdmins(n,r){if(n.length>0){const i=await this.getUserManagementData("adminUsers"),s=[];if(i){const o=Object.fromEntries(i==null?void 0:i.adminUsersList.map(a=>[a.email,a.uid]));n.forEach(a=>{let u;a in o?u=o[a]||(r.email===a?r.uid:null):u=r.email===a?r.uid:null,s.push({email:a,uid:u})})}else{let o;n.forEach(a=>{o=r.email===a?r.uid:null,s.push({email:a,uid:o})})}return await u_(Sc(this.firestore,"user-management","adminUsers"),{adminUsersList:s})}return null}async validateUserAdminStatus(n,r){if(n){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const o=Object.fromEntries(i.adminUsersList.map(u=>[u.email,u.uid]));return n.email&&(o[n.email]===n.uid||o[n.email]===null)?(await this.editUserManagementAdmins(r,n),!0):!1}return(n.email&&r.includes(n.email))??!1?(await this.editUserManagementAdmins(r,n),!0):!1}return!1}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Vce(),s=Uce(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await x0t(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=Vce(),o=Uce(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await E0t(o,a)}}}const nke=A.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),NK=()=>A.useContext(nke);function Sbt({children:e,globalConfig:t}){const n={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},r={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},i={user:{name:"fakeName",email:"fakeEmail@fake.com"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[s,o]=A.useState(n),{storageEngine:a}=uc(),u=async()=>{const h=mD();try{await Npt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{o(r)}};function l(h){return h!==null&&typeof h=="object"&&"uid"in h}function c(h){return h!==null&&typeof h=="object"&&!("uid"in h)}const f=async h=>{if(h===null)return!0;if(l(h)){const p=h;if(a instanceof OD){const m=await(a==null?void 0:a.getUserManagementData("authentication"));return(m?m.isEnabled:!0)?await a.validateUserAdminStatus(p,t.adminUsers):!0}return!1}return c(h)?!!a:!1};A.useEffect(()=>{o(n);let h;try{h=mD()}catch{console.warn("No firebase store.")}const p=async y=>{if(o(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v=await f(y);o({user:y,determiningStatus:!1,isAdmin:v,adminVerification:!0})}else u()},g=(async()=>{if(a instanceof OD){const y=await(a==null?void 0:a.getUserManagementData("authentication"));if(y!==null?y.isEnabled:!0){const _=Rpt(h,async b=>await p(b));return()=>_()}o(i)}else a&&o(i);return()=>{}})();return()=>{g.then(y=>y())}},[a]);const d=A.useMemo(()=>({user:s,logout:u,verifyAdminStatus:f}),[s]);return R.jsx(nke.Provider,{value:d,children:s.determiningStatus?R.jsx(FC,{visible:s.determiningStatus,opacity:1}):e})}const Tbt="https://github.com/revisit-studies/study/tree/main/public/";function Abt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=bv(),{logout:i}=NK(),{storageEngine:s}=uc();return R.jsxs(MC,{size:"xs",px:"xs",style:{marginTop:100,marginBottom:100},children:[(s==null?void 0:s.getEngine())==="firebase"?R.jsx(Bg,{style:{position:"absolute",top:"30px",right:"30px"},onClick:()=>{i()},children:"Logout"}):null,R.jsx(Sv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${cc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),R.jsx(Ot,{children:"Select an experiment to launch:"}),n.map(o=>{const a=t[o];if(!a)return null;const u=oY(o);return R.jsx(Bg,{onClick:()=>{r(`/${u}`)},my:"sm",style:{width:"100%"},children:R.jsxs(JG,{shadow:"sm",radius:"md",withBorder:!0,children:[R.jsx(Ot,{fw:"bold",children:a.studyMetadata.title}),R.jsxs(Ot,{c:"dimmed",children:["Authors:",a.studyMetadata.authors]}),R.jsx(Ot,{c:"dimmed",children:a.studyMetadata.description}),R.jsx(Ot,{c:"dimmed",ta:"right",style:{paddingRight:5},children:R.jsxs(Yxe,{target:"_blank",onClick:l=>l.stopPropagation(),href:`${Tbt}${u}`,children:["View source:"," ",u]})})]})},o)})]})}var rke={exports:{}},ike={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w=A;function Cbt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ibt=typeof Object.is=="function"?Object.is:Cbt,Obt=_w.useState,Pbt=_w.useEffect,kbt=_w.useLayoutEffect,$bt=_w.useDebugValue;function Rbt(e,t){var n=t(),r=Obt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return kbt(function(){i.value=n,i.getSnapshot=t,W9(i)&&s({inst:i})},[e,n,t]),Pbt(function(){return W9(i)&&s({inst:i}),e(function(){W9(i)&&s({inst:i})})},[e]),$bt(n),n}function W9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ibt(e,n)}catch{return!0}}function Nbt(e,t){return t()}var Dbt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Nbt:Rbt;ike.useSyncExternalStore=_w.useSyncExternalStore!==void 0?_w.useSyncExternalStore:Dbt;rke.exports=ike;var Lbt=rke.exports,ske={exports:{}},oke={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q6=A,Mbt=Lbt;function Fbt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bbt=typeof Object.is=="function"?Object.is:Fbt,jbt=Mbt.useSyncExternalStore,zbt=q6.useRef,Ubt=q6.useEffect,Vbt=q6.useMemo,Hbt=q6.useDebugValue;oke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=zbt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Vbt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Bbt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=jbt(e,s[0],s[1]);return Ubt(function(){o.hasValue=!0,o.value=a},[a]),Hbt(a),a};ske.exports=oke;var qbt=ske.exports;function Wbt(e){e()}let ake=Wbt;const Gbt=e=>ake=e,Ybt=()=>ake,Yg=A.createContext(null);function uke(){return A.useContext(Yg)}const Kbt=()=>{throw new Error("uSES not initialized!")};let lke=Kbt;const Xbt=e=>{lke=e},Qbt=(e,t)=>e===t;function Jbt(e=Yg){const t=e===Yg?uke:()=>A.useContext(e);return function(r,i=Qbt){const{store:s,subscription:o,getServerState:a}=t(),u=lke(o.addNestedSub,s.getState,a||s.getState,r,i);return A.useDebugValue(u),u}}const Zbt=Jbt();var kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DK=Symbol.for("react.element"),LK=Symbol.for("react.portal"),W6=Symbol.for("react.fragment"),G6=Symbol.for("react.strict_mode"),Y6=Symbol.for("react.profiler"),K6=Symbol.for("react.provider"),X6=Symbol.for("react.context"),ewt=Symbol.for("react.server_context"),Q6=Symbol.for("react.forward_ref"),J6=Symbol.for("react.suspense"),Z6=Symbol.for("react.suspense_list"),e4=Symbol.for("react.memo"),t4=Symbol.for("react.lazy"),twt=Symbol.for("react.offscreen"),cke;cke=Symbol.for("react.module.reference");function fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case DK:switch(e=e.type,e){case W6:case Y6:case G6:case J6:case Z6:return e;default:switch(e=e&&e.$$typeof,e){case ewt:case X6:case Q6:case t4:case e4:case K6:return e;default:return t}}case LK:return t}}}kr.ContextConsumer=X6;kr.ContextProvider=K6;kr.Element=DK;kr.ForwardRef=Q6;kr.Fragment=W6;kr.Lazy=t4;kr.Memo=e4;kr.Portal=LK;kr.Profiler=Y6;kr.StrictMode=G6;kr.Suspense=J6;kr.SuspenseList=Z6;kr.isAsyncMode=function(){return!1};kr.isConcurrentMode=function(){return!1};kr.isContextConsumer=function(e){return fc(e)===X6};kr.isContextProvider=function(e){return fc(e)===K6};kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===DK};kr.isForwardRef=function(e){return fc(e)===Q6};kr.isFragment=function(e){return fc(e)===W6};kr.isLazy=function(e){return fc(e)===t4};kr.isMemo=function(e){return fc(e)===e4};kr.isPortal=function(e){return fc(e)===LK};kr.isProfiler=function(e){return fc(e)===Y6};kr.isStrictMode=function(e){return fc(e)===G6};kr.isSuspense=function(e){return fc(e)===J6};kr.isSuspenseList=function(e){return fc(e)===Z6};kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===W6||e===Y6||e===G6||e===J6||e===Z6||e===twt||typeof e=="object"&&e!==null&&(e.$$typeof===t4||e.$$typeof===e4||e.$$typeof===K6||e.$$typeof===X6||e.$$typeof===Q6||e.$$typeof===cke||e.getModuleId!==void 0)};kr.typeOf=fc;function nwt(){const e=Ybt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const Wfe={notify(){},get:()=>[]};function rwt(e,t){let n,r=Wfe;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=nwt())}function l(){n&&(n(),n=void 0,r.clear(),r=Wfe)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const iwt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",swt=iwt?A.useLayoutEffect:A.useEffect;function owt({store:e,context:t,children:n,serverState:r}){const i=A.useMemo(()=>{const a=rwt(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=A.useMemo(()=>e.getState(),[e]);swt(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||Yg;return L.createElement(o.Provider,{value:i},n)}function fke(e=Yg){const t=e===Yg?uke:()=>A.useContext(e);return function(){const{store:r}=t();return r}}const awt=fke();function uwt(e=Yg){const t=e===Yg?awt:fke(e);return function(){return t().dispatch}}const dke=uwt();Xbt(qbt.useSyncExternalStoreWithSelector);Gbt(_v.unstable_batchedUpdates);function n4(){const{studyId:e}=VM();return`${e}`}function dc(){const{index:e}=VM();return parseInt(e||"0",10)}function Vc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Kg(e){return!!e&&!!e[li]}function $p(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ywt}(e)||Array.isArray(e)||!!e[Zfe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Zfe])||MK(e)||FK(e))}function j1(e,t,n){n===void 0&&(n=!1),DE(e)===0?(n?Object.keys:$b)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function DE(e){var t=e[li];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:MK(e)?2:FK(e)?3:0}function kb(e,t){return DE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function lwt(e,t){return DE(e)===2?e.get(t):e[t]}function hke(e,t,n){var r=DE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function pke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function MK(e){return mwt&&e instanceof Map}function FK(e){return gwt&&e instanceof Set}function my(e){return e.o||e.t}function BK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=gke(e);delete t[li];for(var n=$b(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function jK(e,t){return t===void 0&&(t=!1),zK(e)||Kg(e)||!$p(e)||(DE(e)>1&&(e.set=e.add=e.clear=e.delete=cwt),Object.freeze(e),t&&j1(e,function(n,r){return jK(r,!0)},!0)),e}function cwt(){Vc(2)}function zK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Od(e){var t=DU[e];return t||Vc(18,e),t}function fwt(e,t){DU[e]||(DU[e]=t)}function $U(){return EA}function G9(e,t){t&&(Od("Patches"),e.u=[],e.s=[],e.v=t)}function PD(e){RU(e),e.p.forEach(dwt),e.p=null}function RU(e){e===EA&&(EA=e.l)}function Gfe(e){return EA={p:[],l:EA,h:e,m:!0,_:0}}function dwt(e){var t=e[li];t.i===0||t.i===1?t.j():t.O=!0}function Y9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Od("ES5").S(t,e,r),r?(n[li].P&&(PD(t),Vc(4)),$p(e)&&(e=kD(t,e),t.l||$D(t,e)),t.u&&Od("Patches").M(n[li].t,e,t.u,t.s)):e=kD(t,n,[]),PD(t),t.u&&t.v(t.u,t.s),e!==mke?e:void 0}function kD(e,t,n){if(zK(t))return t;var r=t[li];if(!r)return j1(t,function(a,u){return Yfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return $D(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=BK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),j1(s,function(a,u){return Yfe(e,r,i,a,u,n,o)}),$D(e,i,!1),n&&e.u&&Od("Patches").N(r,n,e.u,e.s)}return r.o}function Yfe(e,t,n,r,i,s,o){if(Kg(i)){var a=kD(e,i,s&&t&&t.i!==3&&!kb(t.R,r)?s.concat(r):void 0);if(hke(n,r,a),!Kg(a))return;e.m=!1}else o&&n.add(i);if($p(i)&&!zK(i)){if(!e.h.D&&e._<1)return;kD(e,i),t&&t.A.l||$D(e,i)}}function $D(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&jK(t,n)}function K9(e,t){var n=e[li];return(n?my(n):e)[t]}function Kfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Hm(e){e.P||(e.P=!0,e.l&&Hm(e.l))}function X9(e){e.o||(e.o=BK(e.t))}function NU(e,t,n){var r=MK(t)?Od("MapSet").F(t,n):FK(t)?Od("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:$U(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=xA;o&&(u=[a],l=GS);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Od("ES5").J(t,n);return(n?n.A:$U()).p.push(r),r}function hwt(e){return Kg(e)||Vc(22,e),function t(n){if(!$p(n))return n;var r,i=n[li],s=DE(n);if(i){if(!i.P&&(i.i<4||!Od("ES5").K(i)))return i.t;i.I=!0,r=Xfe(n,s),i.I=!1}else r=Xfe(n,s);return j1(r,function(o,a){i&&lwt(i.t,o)===a||hke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Xfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return BK(e)}function pwt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[li];return xA.get(u,s)},set:function(u){var l=this[li];xA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][li];if(!a.P)switch(a.i){case 5:r(a)&&Hm(a);break;case 4:n(a)&&Hm(a)}}}function n(s){for(var o=s.t,a=s.k,u=$b(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==li){var f=o[c];if(f===void 0&&!kb(o,c))return!0;var d=a[c],h=d&&d[li];if(h?h.t!==f:!pke(d,f))return!0}}var p=!!o[li];return u.length!==$b(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};fwt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=gke(f);delete p[li];for(var m=$b(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:$U(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,li,{value:l,writable:!0}),u},S:function(s,o,a){a?Kg(o)&&o[li].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[li];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)j1(d,function(_){_!==li&&(f[_]!==void 0||kb(f,_)?h[_]||u(d[_]):(h[_]=!0,Hm(c)))}),j1(f,function(_){d[_]!==void 0||kb(d,_)||(h[_]=!1,Hm(c))});else if(p===5){if(r(c)&&(Hm(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Qfe,EA,UK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mwt=typeof Map<"u",gwt=typeof Set<"u",Jfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mke=UK?Symbol.for("immer-nothing"):((Qfe={})["immer-nothing"]=!0,Qfe),Zfe=UK?Symbol.for("immer-draftable"):"__$immer_draftable",li=UK?Symbol.for("immer-state"):"__$immer_state",ywt=""+Object.prototype.constructor,$b=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,gke=Object.getOwnPropertyDescriptors||function(e){var t={};return $b(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},DU={},xA={get:function(e,t){if(t===li)return e;var n=my(e);if(!kb(n,t))return function(i,s,o){var a,u=Kfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$p(r)?r:r===K9(e.t,t)?(X9(e),e.o[t]=NU(e.A.h,r,e)):r},has:function(e,t){return t in my(e)},ownKeys:function(e){return Reflect.ownKeys(my(e))},set:function(e,t,n){var r=Kfe(my(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=K9(my(e),t),s=i==null?void 0:i[li];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(pke(n,i)&&(n!==void 0||kb(e.t,t)))return!0;X9(e),Hm(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return K9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,X9(e),Hm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=my(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Vc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Vc(12)}},GS={};j1(xA,function(e,t){GS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),GS.deleteProperty=function(e,t){return GS.set.call(this,e,t,void 0)},GS.set=function(e,t,n){return xA.set.call(this,e[0],t,n,e[0])};var vwt=function(){function e(n){var r=this;this.g=Jfe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&Vc(6),o!==void 0&&typeof o!="function"&&Vc(7),$p(i)){var c=Gfe(r),f=NU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?PD(c):RU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return G9(c,o),Y9(m,c)},function(m){throw PD(c),m}):(G9(c,o),Y9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===mke&&(l=void 0),r.D&&jK(l,!0),o){var h=[],p=[];Od("Patches").M(i,l,h,p),o(h,p)}return l}Vc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$p(n)||Vc(8),Kg(n)&&(n=hwt(n));var r=Gfe(this),i=NU(this,n,void 0);return i[li].C=!0,RU(r),i},t.finishDraft=function(n,r){var i=n&&n[li],s=i.A;return G9(s,r),Y9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Jfe&&Vc(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Od("Patches").$;return Kg(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),sl=new vwt,yke=sl.produce;sl.produceWithPatches.bind(sl);sl.setAutoFreeze.bind(sl);sl.setUseProxies.bind(sl);sl.applyPatches.bind(sl);sl.createDraft.bind(sl);sl.finishDraft.bind(sl);function SA(e){"@babel/helpers - typeof";return SA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SA(e)}function _wt(e,t){if(SA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(SA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bwt(e){var t=_wt(e,"string");return SA(t)=="symbol"?t:String(t)}function wwt(e,t,n){return t=bwt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ede(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ede(Object(n),!0).forEach(function(r){wwt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ede(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Do(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var nde=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Q9=function(){return Math.random().toString(36).substring(7).split("").join(".")},RD={INIT:"@@redux/INIT"+Q9(),REPLACE:"@@redux/REPLACE"+Q9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Q9()}};function Ewt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function vke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Do(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Do(1));return n(vke)(e,t)}if(typeof e!="function")throw new Error(Do(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Do(3));return s}function f(m){if(typeof m!="function")throw new Error(Do(4));if(u)throw new Error(Do(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Do(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Ewt(m))throw new Error(Do(7));if(typeof m.type>"u")throw new Error(Do(8));if(u)throw new Error(Do(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Do(10));i=m,d({type:RD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Do(11));function _(){v.next&&v.next(c())}_();var b=g(_);return{unsubscribe:b}}},m[nde]=function(){return this},m}return d({type:RD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[nde]=p,r}function xwt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:RD.INIT});if(typeof r>"u")throw new Error(Do(12));if(typeof n(void 0,{type:RD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Do(13))})}function Swt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{xwt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Do(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function ND(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Twt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Do(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=ND.apply(void 0,a)(i.dispatch),tde(tde({},i),{},{dispatch:s})}}}function _ke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var bke=_ke();bke.withExtraArgument=_ke;const rde=bke;var Awt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},TA=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Cwt=Object.defineProperty,Iwt=Object.defineProperties,Owt=Object.getOwnPropertyDescriptors,ide=Object.getOwnPropertySymbols,Pwt=Object.prototype.hasOwnProperty,kwt=Object.prototype.propertyIsEnumerable,sde=function(e,t,n){return t in e?Cwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Sg=function(e,t){for(var n in t||(t={}))Pwt.call(t,n)&&sde(e,n,t[n]);if(ide)for(var r=0,i=ide(t);r<i.length;r++){var n=i[r];kwt.call(t,n)&&sde(e,n,t[n])}return e},J9=function(e,t){return Iwt(e,Owt(t))},lI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},$wt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ND:ND.apply(null,arguments)};function Rwt(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Nwt=function(e){Awt(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,TA([void 0],n[0].concat(this)))):new(t.bind.apply(t,TA([void 0],n.concat(this))))},t}(Array);function LU(e){return $p(e)?yke(e,function(){}):e}function Dwt(e){return typeof e=="boolean"}function Lwt(){return function(t){return Mwt(t)}}function Mwt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new Nwt;return n&&(Dwt(n)?r.push(rde):r.push(rde.withExtraArgument(n.extraArgument))),r}var Fwt=!0;function wke(e){var t=Lwt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Rwt(i))h=Swt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Twt.apply(void 0,p),g=ND;u&&(g=$wt(Sg({trace:!Fwt},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=TA([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return vke(h,c,v)}function Pd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Sg(Sg({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Eke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Bwt(e){return typeof e=="function"}function jwt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Eke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Bwt(e))u=function(){return LU(e())};else{var l=LU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=TA([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Kg(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if($p(p))return yke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function zwt(e,t){return e+"/"+t}function xke(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:LU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=zwt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Pd(d,p):Pd(d)});function u(){var c=typeof e.extraReducers=="function"?Eke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Sg(Sg({},d),o);return jwt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var b=0,E=p;b<E.length;b++){var w=E[b];v.addMatcher(w.matcher,w.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Uwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ske=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Uwt[Math.random()*64|0];return t},Vwt=["name","message","stack","code"],Z9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),ode=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Hwt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Vwt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Pd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:J9(Sg({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Pd(t+"/pending",function(l,c,f){return{payload:void 0,meta:J9(Sg({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Pd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Hwt)(l||"Rejected"),meta:J9(Sg({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Ske(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return lI(this,null,function(){var v,_,b,E,w,x,S;return uI(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Wwt(E)?[4,E]:[3,2];case 1:E=I.sent(),I.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(C,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([w,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(C,O){return new Z9(C,O)},fulfillWithValue:function(C,O){return new ode(C,O)}})).then(function(C){if(C instanceof Z9)throw C;return C instanceof ode?i(C.payload,h,l,C.meta):i(C,h,l)})])];case 3:return b=I.sent(),[3,5];case 4:return x=I.sent(),b=x instanceof Z9?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition,S||c(b),[2,b]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(qwt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function qwt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Wwt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Gwt=function(e){return e&&typeof e.match=="function"},Ywt=function(e,t){return Gwt(e)?e.match(t):e(t)};function ade(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Ywt(r,n)})}}var VK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},MU=function(){},Tke=function(e,t){return t===void 0&&(t=MU),e.catch(t),e},Ake=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Rb=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Kwt="task",Cke="listener",Ike="completed",HK="cancelled",Xwt="task-"+HK,Qwt="task-"+Ike,Oke=Cke+"-"+HK,Jwt=Cke+"-"+Ike,r4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Kwt+" "+HK+" (reason: "+t+")"}return e}(),Nb=function(e){if(e.aborted)throw new r4(e.reason)};function Pke(e,t){var n=MU;return new Promise(function(r,i){var s=function(){return i(new r4(e.reason))};if(e.aborted){s();return}n=Ake(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=MU})}var Zwt=function(e,t){return lI(void 0,null,function(){var n,r;return uI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof r4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},DD=function(e){return function(t){return Tke(Pke(e,t).then(function(n){return Nb(e),n}))}},kke=function(e){var t=DD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},eEt=Object.assign,ude={},cI="listenerMiddleware",tEt=function(e){var t=function(n){return Ake(e,function(){return Rb(n,e.reason)})};return function(n){VK(n,"taskExecutor");var r=new AbortController;t(r);var i=Zwt(function(){return lI(void 0,null,function(){var s;return uI(this,function(o){switch(o.label){case 0:return Nb(e),Nb(r.signal),[4,n({pause:DD(r.signal),delay:kke(r.signal),signal:r.signal})];case 1:return s=o.sent(),Nb(r.signal),[2,s]}})})},function(){return Rb(r,Qwt)});return{result:DD(e)(i),cancel:function(){Rb(r,Xwt)}}}},nEt=function(e,t){var n=function(r,i){return lI(void 0,null,function(){var s,o,a,u;return uI(this,function(l){switch(l.label){case 0:Nb(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Pke(t,Promise.race(a))];case 2:return u=l.sent(),Nb(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Tke(n(r,i))}},$ke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Pd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return VK(s,"options.listener"),{predicate:i,type:t,effect:s}},rEt=function(e){var t=$ke(e),n=t.type,r=t.predicate,i=t.effect,s=Ske(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},FU=function(e){e.pending.forEach(function(t){Rb(t,Oke)})},iEt=function(e){return function(){e.forEach(FU),e.clear()}},lde=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},sEt=Pd(cI+"/add"),oEt=Pd(cI+"/removeAll"),aEt=Pd(cI+"/remove"),uEt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,TA([cI+"/error"],e))};function lEt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?uEt:i;VK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&FU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=rEt(h)),o(p)},l=function(h){var p=$ke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var b=typeof m=="string"?_.type===m:_.predicate===y;return b&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&FU(v)),!!v},c=function(h,p,m,g){return lI(t,null,function(){var y,v,_;return uI(this,function(b){switch(b.label){case 0:y=new AbortController,v=nEt(u,y.signal),b.label=1;case 1:return b.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,eEt({},m,{getOriginalState:g,condition:function(E,w){return v(E,w).then(Boolean)},take:v,delay:kke(y.signal),pause:DD(y.signal),extra:r,signal:y.signal,fork:tEt(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(E,w,x){E!==y&&(Rb(E,Oke),x.delete(E))})}})))];case 2:return b.sent(),[3,5];case 3:return _=b.sent(),_ instanceof r4||lde(s,_,{raisedBy:"effect"}),[3,5];case 4:return Rb(y,Jwt),h.pending.delete(y),[7];case 5:return[2]}})})},f=iEt(n),d=function(h){return function(p){return function(m){if(sEt.match(m))return u(m.payload);if(oEt.match(m)){f();return}if(aEt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===ude)throw new Error(cI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),b=Array.from(n.values()),E=0,w=b;E<w.length;E++){var x=w[E],S=!1;try{S=x.predicate(m,_,g)}catch(I){S=!1,lde(s,I,{raisedBy:"predicate"})}S&&c(x,m,h,y)}}finally{g=ude}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var cde;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);pwt();async function cEt(e,t,n,r){const i=Gg(n),s={...i.map(f=>({[f]:{}}))},o=Object.assign({},...i.map((f,d)=>({[`${f}_${d}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),a=Object.assign({},...i.map((f,d)=>({[`${f}_${d}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),u={studyId:e,answers:r||s,sequence:n,config:t,showAdmin:!1,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:r?a:o,iframeAnswers:[]},l=xke({name:"storeSlice",initialState:u,reducers:{setConfig(f,d){f.config=d.payload},toggleShowAdmin:f=>{f.showAdmin=!f.showAdmin},toggleShowHelpText:f=>{f.showHelpText=!f.showHelpText},setAlertModal:(f,d)=>{f.alertModal=d.payload},setIframeAnswers:(f,d)=>{f.iframeAnswers=d.payload},updateResponseBlockValidation:(f,{payload:d})=>{f.trialValidation[d.identifier]||(f.trialValidation[d.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),f.trialValidation[d.identifier][d.location]={valid:d.status,values:d.values},d.provenanceGraph&&(f.trialValidation[d.identifier].provenanceGraph=d.provenanceGraph)},saveTrialAnswer(f,{payload:d}){const{identifier:h,answer:p,startTime:m,endTime:g,provenanceGraph:y,windowEvents:v}=d;f.answers[h]={answer:p,startTime:m,endTime:g,provenanceGraph:y,windowEvents:v}}}});return{store:wke({reducer:l.reducer,preloadedState:u}),actions:l.actions}}const Rke=A.createContext(null);function Xp(){return A.useContext(Rke).actions}const Qp=dke,Ef=Zbt;function fEt(e){return Ef(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function oh(){return Ef(e=>Gg(e.sequence))}var LD={exports:{}};LD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",b="[object RegExp]",E="[object Set]",w="[object String]",x="[object Undefined]",S="[object WeakMap]",I="[object ArrayBuffer]",C="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",N="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",B="[object Uint8Array]",V="[object Uint8ClampedArray]",j="[object Uint16Array]",G="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,H={};H[O]=H[z]=H[N]=H[$]=H[D]=H[B]=H[V]=H[j]=H[G]=!0,H[a]=H[u]=H[I]=H[c]=H[C]=H[f]=H[d]=H[h]=H[m]=H[g]=H[v]=H[b]=H[E]=H[w]=H[S]=!1;var M=typeof iu=="object"&&iu&&iu.Object===Object&&iu,F=typeof self=="object"&&self&&self.Object===Object&&self,J=M||F||Function("return this")(),se=t&&!t.nodeType&&t,ae=se&&!0&&e&&!e.nodeType&&e,ce=ae&&ae.exports===se,le=ce&&M.process,ge=function(){try{var Z=ae&&ae.require&&ae.require("util").types;return Z||le&&le.binding&&le.binding("util")}catch{}}(),ue=ge&&ge.isTypedArray;function Fe(Z,de,be){switch(be.length){case 0:return Z.call(de);case 1:return Z.call(de,be[0]);case 2:return Z.call(de,be[0],be[1]);case 3:return Z.call(de,be[0],be[1],be[2])}return Z.apply(de,be)}function ke(Z,de){for(var be=-1,mt=Array(Z);++be<Z;)mt[be]=de(be);return mt}function Ge(Z){return function(de){return Z(de)}}function Re(Z,de){return Z==null?void 0:Z[de]}function Oe(Z,de){return function(be){return Z(de(be))}}var Le=Array.prototype,Ut=Function.prototype,Qe=Object.prototype,je=J["__core-js_shared__"],bt=Ut.toString,et=Qe.hasOwnProperty,ut=function(){var Z=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),lt=Qe.toString,jt=bt.call(Object),Dn=RegExp("^"+bt.call(et).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ce?J.Buffer:void 0,_e=J.Symbol,Pe=J.Uint8Array,it=he?he.allocUnsafe:void 0,Ye=Oe(Object.getPrototypeOf,Object),at=Object.create,tt=Qe.propertyIsEnumerable,vt=Le.splice,In=_e?_e.toStringTag:void 0,Wt=function(){try{var Z=He(Object,"defineProperty");return Z({},"",{}),Z}catch{}}(),Vt=he?he.isBuffer:void 0,hr=Math.max,Yn=Date.now,ku=He(J,"Map"),Mr=He(Object,"create"),us=function(){function Z(){}return function(de){if(!J0(de))return{};if(at)return at(de);Z.prototype=de;var be=new Z;return Z.prototype=void 0,be}}();function ti(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var mt=Z[de];this.set(mt[0],mt[1])}}function Ei(){this.__data__=Mr?Mr(null):{},this.size=0}function qr(Z){var de=this.has(Z)&&delete this.__data__[Z];return this.size-=de?1:0,de}function yr(Z){var de=this.__data__;if(Mr){var be=de[Z];return be===r?void 0:be}return et.call(de,Z)?de[Z]:void 0}function gt(Z){var de=this.__data__;return Mr?de[Z]!==void 0:et.call(de,Z)}function Fr(Z,de){var be=this.__data__;return this.size+=this.has(Z)?0:1,be[Z]=Mr&&de===void 0?r:de,this}ti.prototype.clear=Ei,ti.prototype.delete=qr,ti.prototype.get=yr,ti.prototype.has=gt,ti.prototype.set=Fr;function xi(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var mt=Z[de];this.set(mt[0],mt[1])}}function Yi(){this.__data__=[],this.size=0}function Qs(Z){var de=this.__data__,be=ni(de,Z);if(be<0)return!1;var mt=de.length-1;return be==mt?de.pop():vt.call(de,be,1),--this.size,!0}function Ba(Z){var de=this.__data__,be=ni(de,Z);return be<0?void 0:de[be][1]}function ne(Z){return ni(this.__data__,Z)>-1}function Q(Z,de){var be=this.__data__,mt=ni(be,Z);return mt<0?(++this.size,be.push([Z,de])):be[mt][1]=de,this}xi.prototype.clear=Yi,xi.prototype.delete=Qs,xi.prototype.get=Ba,xi.prototype.has=ne,xi.prototype.set=Q;function ie(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var mt=Z[de];this.set(mt[0],mt[1])}}function ve(){this.size=0,this.__data__={hash:new ti,map:new(ku||xi),string:new ti}}function ye(Z){var de=ze(this,Z).delete(Z);return this.size-=de?1:0,de}function pt(Z){return ze(this,Z).get(Z)}function Ce(Z){return ze(this,Z).has(Z)}function ft(Z,de){var be=ze(this,Z),mt=be.size;return be.set(Z,de),this.size+=be.size==mt?0:1,this}ie.prototype.clear=ve,ie.prototype.delete=ye,ie.prototype.get=pt,ie.prototype.has=Ce,ie.prototype.set=ft;function Bt(Z){var de=this.__data__=new xi(Z);this.size=de.size}function St(){this.__data__=new xi,this.size=0}function Ht(Z){var de=this.__data__,be=de.delete(Z);return this.size=de.size,be}function fn(Z){return this.__data__.get(Z)}function Tr(Z){return this.__data__.has(Z)}function zt(Z,de){var be=this.__data__;if(be instanceof xi){var mt=be.__data__;if(!ku||mt.length<n-1)return mt.push([Z,de]),this.size=++be.size,this;be=this.__data__=new ie(mt)}return be.set(Z,de),this.size=be.size,this}Bt.prototype.clear=St,Bt.prototype.delete=Ht,Bt.prototype.get=fn,Bt.prototype.has=Tr,Bt.prototype.set=zt;function pr(Z,de){var be=g8(Z),mt=!be&&n_(Z),Hn=!be&&!mt&&lie(Z),Rr=!be&&!mt&&!Hn&&fie(Z),ii=be||mt||Hn||Rr,Ln=ii?ke(Z.length,String):[],si=Ln.length;for(var wl in Z)(de||et.call(Z,wl))&&!(ii&&(wl=="length"||Hn&&(wl=="offset"||wl=="parent")||Rr&&(wl=="buffer"||wl=="byteLength"||wl=="byteOffset")||gn(wl,si)))&&Ln.push(wl);return Ln}function Xt(Z,de,be){(be!==void 0&&!t_(Z[de],be)||be===void 0&&!(de in Z))&&ls(Z,de,be)}function er(Z,de,be){var mt=Z[de];(!(et.call(Z,de)&&t_(mt,be))||be===void 0&&!(de in Z))&&ls(Z,de,be)}function ni(Z,de){for(var be=Z.length;be--;)if(t_(Z[be][0],de))return be;return-1}function ls(Z,de,be){de=="__proto__"&&Wt?Wt(Z,de,{configurable:!0,enumerable:!0,value:be,writable:!0}):Z[de]=be}var Fi=De();function oa(Z){return Z==null?Z===void 0?x:y:In&&In in Object(Z)?Ze(Z):Q0(Z)}function Js(Z){return Px(Z)&&oa(Z)==a}function mi(Z){if(!J0(Z)||Si(Z))return!1;var de=v8(Z)?Dn:P;return de.test(m8(Z))}function yt(Z){return Px(Z)&&cie(Z.length)&&!!H[oa(Z)]}function wn(Z){if(!J0(Z))return za(Z);var de=ri(Z),be=[];for(var mt in Z)mt=="constructor"&&(de||!et.call(Z,mt))||be.push(mt);return be}function Br(Z,de,be,mt,Hn){Z!==de&&Fi(de,function(Rr,ii){if(Hn||(Hn=new Bt),J0(Rr))Is(Z,de,ii,be,Br,mt,Hn);else{var Ln=mt?mt(Ix(Z,ii),Rr,ii+"",Z,de,Hn):void 0;Ln===void 0&&(Ln=Rr),Xt(Z,ii,Ln)}},die)}function Is(Z,de,be,mt,Hn,Rr,ii){var Ln=Ix(Z,be),si=Ix(de,be),wl=ii.get(si);if(wl){Xt(Z,be,wl);return}var $u=Rr?Rr(Ln,si,be+"",Z,de,ii):void 0,kx=$u===void 0;if(kx){var _8=g8(si),b8=!_8&&lie(si),pie=!_8&&!b8&&fie(si);$u=si,_8||b8||pie?g8(Ln)?$u=Ln:xHe(Ln)?$u=pe(Ln):b8?(kx=!1,$u=te(si,!0)):pie?(kx=!1,$u=fe(si,!0)):$u=[]:SHe(si)||n_(si)?($u=Ln,n_(Ln)?$u=THe(Ln):(!J0(Ln)||v8(Ln))&&($u=wt(si))):kx=!1}kx&&(ii.set(si,$u),Hn($u,si,mt,Rr,ii),ii.delete(si)),Xt(Z,be,$u)}function ja(Z,de){return Ox(Cx(Z,de,hie),Z+"")}var q=Wt?function(Z,de){return Wt(Z,"toString",{configurable:!0,enumerable:!1,value:CHe(de),writable:!0})}:hie;function te(Z,de){if(de)return Z.slice();var be=Z.length,mt=it?it(be):new Z.constructor(be);return Z.copy(mt),mt}function K(Z){var de=new Z.constructor(Z.byteLength);return new Pe(de).set(new Pe(Z)),de}function fe(Z,de){var be=de?K(Z.buffer):Z.buffer;return new Z.constructor(be,Z.byteOffset,Z.length)}function pe(Z,de){var be=-1,mt=Z.length;for(de||(de=Array(mt));++be<mt;)de[be]=Z[be];return de}function oe(Z,de,be,mt){var Hn=!be;be||(be={});for(var Rr=-1,ii=de.length;++Rr<ii;){var Ln=de[Rr],si=mt?mt(be[Ln],Z[Ln],Ln,be,Z):void 0;si===void 0&&(si=Z[Ln]),Hn?ls(be,Ln,si):er(be,Ln,si)}return be}function Se(Z){return ja(function(de,be){var mt=-1,Hn=be.length,Rr=Hn>1?be[Hn-1]:void 0,ii=Hn>2?be[2]:void 0;for(Rr=Z.length>3&&typeof Rr=="function"?(Hn--,Rr):void 0,ii&&tr(be[0],be[1],ii)&&(Rr=Hn<3?void 0:Rr,Hn=1),de=Object(de);++mt<Hn;){var Ln=be[mt];Ln&&Z(de,Ln,mt,Rr)}return de})}function De(Z){return function(de,be,mt){for(var Hn=-1,Rr=Object(de),ii=mt(de),Ln=ii.length;Ln--;){var si=ii[Z?Ln:++Hn];if(be(Rr[si],si,Rr)===!1)break}return de}}function ze(Z,de){var be=Z.__data__;return ur(de)?be[typeof de=="string"?"string":"hash"]:be.map}function He(Z,de){var be=Re(Z,de);return mi(be)?be:void 0}function Ze(Z){var de=et.call(Z,In),be=Z[In];try{Z[In]=void 0;var mt=!0}catch{}var Hn=lt.call(Z);return mt&&(de?Z[In]=be:delete Z[In]),Hn}function wt(Z){return typeof Z.constructor=="function"&&!ri(Z)?us(Ye(Z)):{}}function gn(Z,de){var be=typeof Z;return de=de??o,!!de&&(be=="number"||be!="symbol"&&k.test(Z))&&Z>-1&&Z%1==0&&Z<de}function tr(Z,de,be){if(!J0(be))return!1;var mt=typeof de;return(mt=="number"?y8(be)&&gn(de,be.length):mt=="string"&&de in be)?t_(be[de],Z):!1}function ur(Z){var de=typeof Z;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?Z!=="__proto__":Z===null}function Si(Z){return!!ut&&ut in Z}function ri(Z){var de=Z&&Z.constructor,be=typeof de=="function"&&de.prototype||Qe;return Z===be}function za(Z){var de=[];if(Z!=null)for(var be in Object(Z))de.push(be);return de}function Q0(Z){return lt.call(Z)}function Cx(Z,de,be){return de=hr(de===void 0?Z.length-1:de,0),function(){for(var mt=arguments,Hn=-1,Rr=hr(mt.length-de,0),ii=Array(Rr);++Hn<Rr;)ii[Hn]=mt[de+Hn];Hn=-1;for(var Ln=Array(de+1);++Hn<de;)Ln[Hn]=mt[Hn];return Ln[de]=be(ii),Fe(Z,this,Ln)}}function Ix(Z,de){if(!(de==="constructor"&&typeof Z[de]=="function")&&de!="__proto__")return Z[de]}var Ox=uie(q);function uie(Z){var de=0,be=0;return function(){var mt=Yn(),Hn=s-(mt-be);if(be=mt,Hn>0){if(++de>=i)return arguments[0]}else de=0;return Z.apply(void 0,arguments)}}function m8(Z){if(Z!=null){try{return bt.call(Z)}catch{}try{return Z+""}catch{}}return""}function t_(Z,de){return Z===de||Z!==Z&&de!==de}var n_=Js(function(){return arguments}())?Js:function(Z){return Px(Z)&&et.call(Z,"callee")&&!tt.call(Z,"callee")},g8=Array.isArray;function y8(Z){return Z!=null&&cie(Z.length)&&!v8(Z)}function xHe(Z){return Px(Z)&&y8(Z)}var lie=Vt||IHe;function v8(Z){if(!J0(Z))return!1;var de=oa(Z);return de==h||de==p||de==l||de==_}function cie(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function J0(Z){var de=typeof Z;return Z!=null&&(de=="object"||de=="function")}function Px(Z){return Z!=null&&typeof Z=="object"}function SHe(Z){if(!Px(Z)||oa(Z)!=v)return!1;var de=Ye(Z);if(de===null)return!0;var be=et.call(de,"constructor")&&de.constructor;return typeof be=="function"&&be instanceof be&&bt.call(be)==jt}var fie=ue?Ge(ue):yt;function THe(Z){return oe(Z,die(Z))}function die(Z){return y8(Z)?pr(Z,!0):wn(Z)}var AHe=Se(function(Z,de,be){Br(Z,de,be)});function CHe(Z){return function(){return Z}}function hie(Z){return Z}function IHe(){return!1}e.exports=AHe})(LD,LD.exports);var dEt=LD.exports;const qK=pl(dEt);function h1(e){return structuredClone(e)}function WK(){const{answers:e}=Ef(i=>i),t=dc(),r=`${oh()[t]}_${t}`;return e[r]}const Nke=A.createContext(null);function hEt(){const e=A.useContext(Nke);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Dke(){const e=dc(),n=`${oh()[e]}_${e}`,{trialValidation:r}=Ef(v=>v),i=WK(),s=Qp(),{saveTrialAnswer:o,setIframeAnswers:a}=Xp(),{storageEngine:u}=uc(),c=!fEt(n),f=i==null?void 0:i.answer,d=bv(),h=A.useMemo(()=>e+1,[e]),p=`/${n4()}/${h}`,m=A.useMemo(()=>Date.now(),[]),g=hEt(),y=A.useCallback(()=>{const v=h1(r[n]),_=Object.values(v).reduce((x,S)=>Object.hasOwn(S,"values")?{...x,...S.values}:x,{}),{provenanceGraph:b}=v,E=Date.now(),w=g&&"current"in g&&g.current?g.current.splice(0,g.current.length):[];Object.keys(f||{}).length===0&&(s(o({identifier:n,answer:_,startTime:m,endTime:E,provenanceGraph:b,windowEvents:w})),u&&u.saveAnswer(n,{answer:_,startTime:m,endTime:E,provenanceGraph:b,windowEvents:w}),s(a([]))),d(`${p}${window.location.search}`)},[a,u,s,f,r,d,m,e,o,p,g,n]);return{nextStep:h,isNextDisabled:c,goToNextStep:y}}function pEt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Dke(),o=A.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return R.jsx(wa,{type:"submit",disabled:t||i,onClick:o,children:e})}var GK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const BU=pl(GK);function jU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var mEt=Object.defineProperty,fde=Object.getOwnPropertySymbols,gEt=Object.prototype.hasOwnProperty,yEt=Object.prototype.propertyIsEnumerable,dde=(e,t,n)=>t in e?mEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vEt=(e,t)=>{for(var n in t||(t={}))gEt.call(t,n)&&dde(e,n,t[n]);if(fde)for(var n of fde(t))yEt.call(t,n)&&dde(e,n,t[n]);return e};function Lke(e,t){if(t===null||typeof t!="object")return{};const n=vEt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const _Et="__MANTINE_FORM_INDEX__";function hde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${_Et}`)):!1:!1}function pde(e,t,n){typeof n.value=="object"&&(n.value=tb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function tb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(tb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(tb(a),tb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(tb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)pde(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||pde(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Mke(e){return typeof e!="string"?[]:e.split(".")}function i4(e,t,n){const r=Mke(e);if(r.length===0)return n;const i=tb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Uh(e,t){const n=Mke(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function mde(e){const t=jU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function zU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Uh(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>zU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||zU(o,t,a,i)),i},r)}function UU(e,t){return mde(typeof e=="function"?e(t):zU(e,t))}function wP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=UU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function bEt(e,{from:t,to:n},r){const i=Uh(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),i4(e,s,r)}var wEt=Object.defineProperty,gde=Object.getOwnPropertySymbols,EEt=Object.prototype.hasOwnProperty,xEt=Object.prototype.propertyIsEnumerable,yde=(e,t,n)=>t in e?wEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SEt=(e,t)=>{for(var n in t||(t={}))EEt.call(t,n)&&yde(e,n,t[n]);if(gde)for(var n of gde(t))xEt.call(t,n)&&yde(e,n,t[n]);return e};function TEt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=SEt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function AEt(e,t,n){const r=Uh(e,n);return Array.isArray(r)?i4(e,r.filter((i,s)=>s!==t),n):n}var CEt=Object.defineProperty,vde=Object.getOwnPropertySymbols,IEt=Object.prototype.hasOwnProperty,OEt=Object.prototype.propertyIsEnumerable,_de=(e,t,n)=>t in e?CEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PEt=(e,t)=>{for(var n in t||(t={}))IEt.call(t,n)&&_de(e,n,t[n]);if(vde)for(var n of vde(t))OEt.call(t,n)&&_de(e,n,t[n]);return e};function bde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function wde(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Lke(`${i}.${t}`,s));const o=PEt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=bde(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=bde(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function kEt(e,t,n,r){const i=Uh(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),i4(e,s,r)}function Ede(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function $Et(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var REt=Object.defineProperty,NEt=Object.defineProperties,DEt=Object.getOwnPropertyDescriptors,xde=Object.getOwnPropertySymbols,LEt=Object.prototype.hasOwnProperty,MEt=Object.prototype.propertyIsEnumerable,Sde=(e,t,n)=>t in e?REt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mm=(e,t)=>{for(var n in t||(t={}))LEt.call(t,n)&&Sde(e,n,t[n]);if(xde)for(var n of xde(t))MEt.call(t,n)&&Sde(e,n,t[n]);return e},eB=(e,t)=>NEt(e,DEt(t));function FEt({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=A.useState(r),[f,d]=A.useState(n),[h,p]=A.useState(e),[m,g]=A.useState(jU(t)),y=A.useRef(e),v=F=>{y.current=F},_=A.useCallback(()=>c({}),[]),b=F=>{const J=F?mm(mm({},h),F):h;v(J),d({})},E=A.useCallback(F=>g(J=>jU(typeof F=="function"?F(J):F)),[]),w=A.useCallback(()=>g({}),[]),x=A.useCallback(()=>{p(e),w(),v(e),d({}),_()},[]),S=A.useCallback((F,J)=>E(se=>eB(mm({},se),{[F]:J})),[]),I=A.useCallback(F=>E(J=>{if(typeof F!="string")return J;const se=mm({},J);return delete se[F],se}),[]),C=A.useCallback(F=>d(J=>{if(typeof F!="string")return J;const se=Lke(F,J);return delete se[F],se}),[]),O=A.useCallback((F,J)=>{const se=hde(F,s);C(F),c(ae=>eB(mm({},ae),{[F]:!0})),p(ae=>{const ce=i4(F,J,ae);if(se){const le=wP(F,u,ce);le.hasError?S(F,le.error):I(F)}return ce}),!se&&i&&S(F,null)},[]),z=A.useCallback(F=>{p(J=>{const se=typeof F=="function"?F(J):F;return mm(mm({},J),se)}),i&&w()},[]),N=A.useCallback((F,J)=>{C(F),p(se=>bEt(F,J,se)),g(se=>TEt(F,J,se))},[]),$=A.useCallback((F,J)=>{C(F),p(se=>AEt(F,J,se)),g(se=>wde(F,J,se,-1))},[]),D=A.useCallback((F,J,se)=>{C(F),p(ae=>kEt(F,J,se,ae)),g(ae=>wde(F,se,ae,1))},[]),B=A.useCallback(()=>{const F=UU(u,h);return g(F.errors),F},[h,u]),V=A.useCallback(F=>{const J=wP(F,u,h);return J.hasError?S(F,J.error):I(F),J},[h,u]),j=(F,{type:J="input",withError:se=!0,withFocus:ae=!0}={})=>{const le={onChange:$Et(ge=>O(F,ge))};return se&&(le.error=m[F]),J==="checkbox"?le.checked=Uh(F,h):le.value=Uh(F,h),ae&&(le.onFocus=()=>c(ge=>eB(mm({},ge),{[F]:!0})),le.onBlur=()=>{if(hde(F,o)){const ge=wP(F,u,h);ge.hasError?S(F,ge.error):I(F)}}),le},G=(F,J)=>se=>{se==null||se.preventDefault();const ae=B();ae.hasErrors?J==null||J(ae.errors,h,se):F==null||F(a(h),se)},U=F=>a(F||h),P=A.useCallback(F=>{F.preventDefault(),x()},[]),k=F=>{if(F){const se=Uh(F,f);if(typeof se=="boolean")return se;const ae=Uh(F,h),ce=Uh(F,y.current);return!BU(ae,ce)}return Object.keys(f).length>0?Ede(f):!BU(h,y.current)},H=A.useCallback(F=>Ede(l,F),[l]),M=A.useCallback(F=>F?!wP(F,u,h).hasError:!UU(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:z,setErrors:E,setFieldValue:O,setFieldError:S,clearFieldError:I,clearErrors:w,reset:x,validate:B,validateField:V,reorderListItem:N,removeListItem:$,insertListItem:D,getInputProps:j,onSubmit:G,onReset:P,isDirty:k,isTouched:H,setTouched:c,setDirty:d,resetTouched:_,resetDirty:b,isValid:M,getTransformedValues:U}}const BEt=new URLSearchParams(window.location.search),jEt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?BEt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},zEt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function UEt(e,t,n){const[r,i]=A.useState(null),s=FEt({initialValues:jEt(e,n),validate:zEt(e)});return A.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Ov(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}const Tde=["http","https","mailto","tel"];function VEt(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<Tde.length;){const s=Tde[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var HEt=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const YK=pl(HEt);function Db(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ade(e.position):"start"in e||"end"in e?Ade(e):"line"in e||"column"in e?VU(e):""}function VU(e){return Cde(e&&e.line)+":"+Cde(e&&e.column)}function Ade(e){return VU(e&&e.start)+"-"+VU(e&&e.end)}function Cde(e){return e&&typeof e=="number"?e:1}let hc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Db(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};hc.prototype.file="";hc.prototype.name="";hc.prototype.reason="";hc.prototype.message="";hc.prototype.stack="";hc.prototype.fatal=null;hc.prototype.column=null;hc.prototype.line=null;hc.prototype.source=null;hc.prototype.ruleId=null;hc.prototype.position=null;const Hf={basename:qEt,dirname:WEt,extname:GEt,join:YEt,sep:"/"};function qEt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');fI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function WEt(e){if(fI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function GEt(e){fI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function YEt(...e){let t=-1,n;for(;++t<e.length;)fI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":KEt(n)}function KEt(e){fI(e);const t=e.charCodeAt(0)===47;let n=XEt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function XEt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function fI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const QEt={cwd:JEt};function JEt(){return"/"}function HU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function ZEt(e){if(typeof e=="string")e=new URL(e);else if(!HU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ext(e)}function ext(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const tB=["history","path","basename","stem","extname","dirname"];let txt=class{constructor(t){let n;t?typeof t=="string"||YK(t)?n={value:t}:HU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=QEt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<tB.length;){const s=tB[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)tB.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){HU(t)&&(t=ZEt(t)),rB(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Hf.dirname(this.path):void 0}set dirname(t){Ide(this.basename,"dirname"),this.path=Hf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Hf.basename(this.path):void 0}set basename(t){rB(t,"basename"),nB(t,"basename"),this.path=Hf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Hf.extname(this.path):void 0}set extname(t){if(nB(t,"extname"),Ide(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Hf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Hf.basename(this.path,this.extname):void 0}set stem(t){rB(t,"stem"),nB(t,"stem"),this.path=Hf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new hc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function nB(e,t){if(e&&e.includes(Hf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Hf.sep+"`")}function rB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ide(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ode(e){if(e)throw e}var t$=Object.prototype.hasOwnProperty,Fke=Object.prototype.toString,Pde=Object.defineProperty,kde=Object.getOwnPropertyDescriptor,$de=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Fke.call(t)==="[object Array]"},Rde=function(t){if(!t||Fke.call(t)!=="[object Object]")return!1;var n=t$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&t$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||t$.call(t,i)},Nde=function(t,n){Pde&&n.name==="__proto__"?Pde(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Dde=function(t,n){if(n==="__proto__")if(t$.call(t,n)){if(kde)return kde(t,n).value}else return;return t[n]},nxt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Dde(a,n),i=Dde(t,n),a!==i&&(c&&i&&(Rde(i)||(s=$de(i)))?(s?(s=!1,o=r&&$de(r)?r:[]):o=r&&Rde(r)?r:{},Nde(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Nde(a,{name:n,newValue:i}));return a};const Lde=pl(nxt);function qU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function rxt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?ixt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function ixt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class pc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Db(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}pc.prototype.file="";pc.prototype.name="";pc.prototype.reason="";pc.prototype.message="";pc.prototype.stack="";pc.prototype.fatal=null;pc.prototype.column=null;pc.prototype.line=null;pc.prototype.source=null;pc.prototype.ruleId=null;pc.prototype.position=null;const qf={basename:sxt,dirname:oxt,extname:axt,join:uxt,sep:"/"};function sxt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');dI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function oxt(e){if(dI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function axt(e){dI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function uxt(...e){let t=-1,n;for(;++t<e.length;)dI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":lxt(n)}function lxt(e){dI(e);const t=e.charCodeAt(0)===47;let n=cxt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function cxt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function dI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const fxt={cwd:dxt};function dxt(){return"/"}function WU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function hxt(e){if(typeof e=="string")e=new URL(e);else if(!WU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return pxt(e)}function pxt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const iB=["history","path","basename","stem","extname","dirname"];class mxt{constructor(t){let n;t?typeof t=="string"||YK(t)?n={value:t}:WU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=fxt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<iB.length;){const s=iB[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)iB.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){WU(t)&&(t=hxt(t)),oB(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?qf.dirname(this.path):void 0}set dirname(t){Mde(this.basename,"dirname"),this.path=qf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?qf.basename(this.path):void 0}set basename(t){oB(t,"basename"),sB(t,"basename"),this.path=qf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?qf.extname(this.path):void 0}set extname(t){if(sB(t,"extname"),Mde(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?qf.basename(this.path,this.extname):void 0}set stem(t){oB(t,"stem"),sB(t,"stem"),this.path=qf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new pc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function sB(e,t){if(e&&e.includes(qf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+qf.sep+"`")}function oB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Mde(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const gxt=jke().freeze(),Bke={}.hasOwnProperty;function jke(){const e=rxt(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=jke();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Lde(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(lB("data",r),n[m]=g,s):Bke.call(n,m)&&n[m]||null:m?(lB("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(lB("use",r),m!=null)if(typeof m=="function")E(m,...g);else if(typeof m=="object")Array.isArray(m)?b(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(w){if(typeof w=="function")E(w);else if(typeof w=="object")if(Array.isArray(w)){const[x,...S]=w;E(x,...S)}else _(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function _(w){b(w.plugins),w.settings&&(y=Object.assign(y||{},w.settings))}function b(w){let x=-1;if(w!=null)if(Array.isArray(w))for(;++x<w.length;){const S=w[x];v(S)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function E(w,x){let S=-1,I;for(;++S<t.length;)if(t[S][0]===w){I=t[S];break}I?(qU(I[1])&&qU(x)&&(x=Lde(!0,I[1],x)),I[1]=x):t.push([...arguments])}}function l(m){s.freeze();const g=Qx(m),y=s.Parser;return aB("parse",y),Fde(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=Qx(g),v=s.Compiler;return uB("stringify",v),Bde(m),Fde(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Bde(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,b){e.run(m,Qx(g),E);function E(w,x,S){x=x||m,w?b(w):_?_(x):y(null,x,S)}}}function d(m,g){let y,v;return s.run(m,g,_),jde("runSync","run",v),y;function _(b,E){Ode(b),y=E,v=!0}}function h(m,g){if(s.freeze(),aB("process",s.Parser),uB("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const b=Qx(m);s.run(s.parse(b),b,(w,x,S)=>{if(w||!x||!S)E(w);else{const I=s.stringify(x,S);I==null||(_xt(I)?S.value=I:S.result=I),E(w,S)}});function E(w,x){w||!x?_(w):v?v(x):g(null,x)}}}function p(m){let g;s.freeze(),aB("processSync",s.Parser),uB("processSync",s.Compiler);const y=Qx(m);return s.process(y,v),jde("processSync","process",g),y;function v(_){g=!0,Ode(_)}}}function Fde(e,t){return typeof e=="function"&&e.prototype&&(yxt(e.prototype)||t in e.prototype)}function yxt(e){let t;for(t in e)if(Bke.call(e,t))return!0;return!1}function aB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function uB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function lB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Bde(e){if(!qU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function jde(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Qx(e){return vxt(e)?e:new mxt(e)}function vxt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function _xt(e){return typeof e=="string"||YK(e)}function bxt(e,t){var{includeImageAlt:n=!0}=t||{};return zke(e,n)}function zke(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&zde(e.children,t)||Array.isArray(e)&&zde(e,t))||""}function zde(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=zke(e[r],t);return n.join("")}function Vd(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Rl(e,t){return e.length>0?(Vd(e,e.length,0,t),e):t}const Ude={}.hasOwnProperty;function wxt(e){const t={};let n=-1;for(;++n<e.length;)Ext(t,e[n]);return t}function Ext(e,t){let n;for(n in t){const i=(Ude.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){Ude.call(i,o)||(i[o]=[]);const a=s[o];xxt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function xxt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Vd(e,0,0,r)}const Sxt=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,rd=P0(/[A-Za-z]/),GU=P0(/\d/),Txt=P0(/[\dA-Fa-f]/),Ku=P0(/[\dA-Za-z]/),Axt=P0(/[!-/:-@[-`{-~]/),Vde=P0(/[#-'*+\--9=?A-Z^-~]/);function YU(e){return e!==null&&(e<32||e===127)}function Gl(e){return e!==null&&(e<0||e===32)}function Jt(e){return e!==null&&e<-2}function es(e){return e===-2||e===-1||e===32}const Cxt=P0(/\s/),Ixt=P0(Sxt);function P0(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Nr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return es(u)?(e.enter(n),a(u)):t(u)}function a(u){return es(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Oxt={tokenize:Pxt};function Pxt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Jt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const kxt={tokenize:$xt},Hde={tokenize:Rxt};function $xt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const b=n[r];return t.containerState=b[1],e.attempt(b[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const b=t.events.length;let E=b,w;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){w=t.events[E][1].end;break}y(r);let x=b;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},w),x++;return Vd(t.events,E+1,0,t.events.slice(b)),t.events.length=x,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Hde,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Hde,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return Jt(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,b){const E=t.sliceStream(_);if(b&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const x=t.events.length;let S=x,I,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(I){C=t.events[S][1].end;break}I=!0}for(y(r),w=x;w<t.events.length;)t.events[w][1].end=Object.assign({},C),w++;Vd(t.events,S+1,0,t.events.slice(x)),t.events.length=w}}function y(_){let b=n.length;for(;b-- >_;){const E=n[b];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Rxt(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function qde(e){if(e===null||Gl(e)||Cxt(e))return 1;if(Ixt(e))return 2}function KK(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const KU={name:"attention",tokenize:Dxt,resolveAll:Nxt};function Nxt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Wde(f,-u),Wde(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Rl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Rl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Rl(l,KK(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Rl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Rl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Vd(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Dxt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=qde(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=qde(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Wde(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Lxt={name:"autolink",tokenize:Mxt};function Mxt(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return rd(p)?(e.consume(p),o):Vde(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||Ku(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||Ku(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||YU(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):Vde(p)?(e.consume(p),l):n(p)}function c(p){return Ku(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||Ku(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const s4={tokenize:Fxt,partial:!0};function Fxt(e,t,n){return Nr(e,r,"linePrefix");function r(i){return i===null||Jt(i)?t(i):n(i)}}const Uke={name:"blockQuote",tokenize:Bxt,continuation:{tokenize:jxt},exit:zxt};function Bxt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return es(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function jxt(e,t,n){return Nr(e,e.attempt(Uke,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function zxt(e){e.exit("blockQuote")}const Vke={name:"characterEscape",tokenize:Uxt};function Uxt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Axt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Gde=document.createElement("i");function XK(e){const t="&"+e+";";Gde.innerHTML=t;const n=Gde.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const Hke={name:"characterReference",tokenize:Vxt};function Vxt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Ku,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Txt,c):(e.enter("characterReferenceValue"),s=7,o=GU,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===Ku&&!XK(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const Yde={name:"codeFenced",tokenize:Hxt,concrete:!0};function Hxt(e,t,n){const r=this,i={tokenize:E,partial:!0},s={tokenize:b,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=w,f(w)}function f(w){return w===l?(e.consume(w),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(w):Nr(e,d,"whitespace")(w))}function d(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||Gl(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,p,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),h)}function p(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||Jt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(w)):w===96&&w===l?n(w):(e.consume(w),m)}function g(w){return e.exit("codeFencedFence"),r.interrupt?t(w):y(w)}function y(w){return w===null?_(w):Jt(w)?e.attempt(s,e.attempt(i,_,a?Nr(e,y,"linePrefix",a+1):y),_)(w):(e.enter("codeFlowValue"),v(w))}function v(w){return w===null||Jt(w)?(e.exit("codeFlowValue"),y(w)):(e.consume(w),v)}function _(w){return e.exit("codeFenced"),t(w)}function b(w,x,S){const I=this;return C;function C(z){return w.enter("lineEnding"),w.consume(z),w.exit("lineEnding"),O}function O(z){return I.parser.lazy[I.now().line]?S(z):x(z)}}function E(w,x,S){let I=0;return Nr(w,C,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C(N){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),O(N)}function O(N){return N===l?(w.consume(N),I++,O):I<u?S(N):(w.exit("codeFencedFenceSequence"),Nr(w,z,"whitespace")(N))}function z(N){return N===null||Jt(N)?(w.exit("codeFencedFence"),x(N)):S(N)}}}const cB={name:"codeIndented",tokenize:Wxt},qxt={tokenize:Gxt,partial:!0};function Wxt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Nr(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Jt(l)?e.attempt(qxt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Jt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Gxt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Jt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Nr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Jt(o)?i(o):n(o)}}const Yxt={name:"codeText",tokenize:Qxt,resolve:Kxt,previous:Xxt};function Kxt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Xxt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Qxt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):Jt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Jt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function qke(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Jxt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),Vd(e,i,n-i+1,a))}}return!l}function Jxt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),Vd(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Zxt={tokenize:nSt,resolve:tSt},eSt={tokenize:rSt,partial:!0};function tSt(e){return qke(e),e}function nSt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Jt(a)?e.check(eSt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function rSt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Nr(e,s,"linePrefix")}function s(o){if(o===null||Jt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Wke(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||YU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Jt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||Gl(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):YU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Gke(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Jt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Jt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!es(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Yke(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Jt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Nr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Jt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function XT(e,t){let n;return r;function r(i){return Jt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):es(i)?Nr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function Lb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const iSt={name:"definition",tokenize:oSt},sSt={tokenize:aSt,partial:!0};function oSt(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),Gke.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=Lb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),XT(e,Wke(e,e.attempt(sSt,Nr(e,a,"whitespace"),Nr(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||Jt(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function aSt(e,t,n){return r;function r(o){return Gl(o)?XT(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?Yke(e,Nr(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||Jt(o)?t(o):n(o)}}const uSt={name:"hardBreakEscape",tokenize:lSt};function lSt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return Jt(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const cSt={name:"headingAtx",tokenize:dSt,resolve:fSt};function fSt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Vd(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function dSt(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||Gl(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Jt(c)?(e.exit("atxHeading"),t(c)):es(c)?Nr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Gl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const hSt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Kde=["pre","script","style","textarea"],pSt={name:"htmlFlow",tokenize:ySt,resolveTo:gSt,concrete:!0},mSt={tokenize:vSt,partial:!0};function gSt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ySt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(k){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),f):k===47?(e.consume(k),p):k===63?(e.consume(k),i=3,r.interrupt?t:G):rd(k)?(e.consume(k),o=String.fromCharCode(k),s=!0,m):n(k)}function f(k){return k===45?(e.consume(k),i=2,d):k===91?(e.consume(k),i=5,o="CDATA[",a=0,h):rd(k)?(e.consume(k),i=4,r.interrupt?t:G):n(k)}function d(k){return k===45?(e.consume(k),r.interrupt?t:G):n(k)}function h(k){return k===o.charCodeAt(a++)?(e.consume(k),a===o.length?r.interrupt?t:O:h):n(k)}function p(k){return rd(k)?(e.consume(k),o=String.fromCharCode(k),m):n(k)}function m(k){return k===null||k===47||k===62||Gl(k)?k!==47&&s&&Kde.includes(o.toLowerCase())?(i=1,r.interrupt?t(k):O(k)):hSt.includes(o.toLowerCase())?(i=6,k===47?(e.consume(k),g):r.interrupt?t(k):O(k)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(k):s?v(k):y(k)):k===45||Ku(k)?(e.consume(k),o+=String.fromCharCode(k),m):n(k)}function g(k){return k===62?(e.consume(k),r.interrupt?t:O):n(k)}function y(k){return es(k)?(e.consume(k),y):I(k)}function v(k){return k===47?(e.consume(k),I):k===58||k===95||rd(k)?(e.consume(k),_):es(k)?(e.consume(k),v):I(k)}function _(k){return k===45||k===46||k===58||k===95||Ku(k)?(e.consume(k),_):b(k)}function b(k){return k===61?(e.consume(k),E):es(k)?(e.consume(k),b):v(k)}function E(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),u=k,w):es(k)?(e.consume(k),E):(u=null,x(k))}function w(k){return k===null||Jt(k)?n(k):k===u?(e.consume(k),S):(e.consume(k),w)}function x(k){return k===null||k===34||k===39||k===60||k===61||k===62||k===96||Gl(k)?b(k):(e.consume(k),x)}function S(k){return k===47||k===62||es(k)?v(k):n(k)}function I(k){return k===62?(e.consume(k),C):n(k)}function C(k){return es(k)?(e.consume(k),C):k===null||Jt(k)?O(k):n(k)}function O(k){return k===45&&i===2?(e.consume(k),D):k===60&&i===1?(e.consume(k),B):k===62&&i===4?(e.consume(k),U):k===63&&i===3?(e.consume(k),G):k===93&&i===5?(e.consume(k),j):Jt(k)&&(i===6||i===7)?e.check(mSt,U,z)(k):k===null||Jt(k)?z(k):(e.consume(k),O)}function z(k){return e.exit("htmlFlowData"),N(k)}function N(k){return k===null?P(k):Jt(k)?e.attempt({tokenize:$,partial:!0},N,P)(k):(e.enter("htmlFlowData"),O(k))}function $(k,H,M){return F;function F(se){return k.enter("lineEnding"),k.consume(se),k.exit("lineEnding"),J}function J(se){return r.parser.lazy[r.now().line]?M(se):H(se)}}function D(k){return k===45?(e.consume(k),G):O(k)}function B(k){return k===47?(e.consume(k),o="",V):O(k)}function V(k){return k===62&&Kde.includes(o.toLowerCase())?(e.consume(k),U):rd(k)&&o.length<8?(e.consume(k),o+=String.fromCharCode(k),V):O(k)}function j(k){return k===93?(e.consume(k),G):O(k)}function G(k){return k===62?(e.consume(k),U):k===45&&i===2?(e.consume(k),G):O(k)}function U(k){return k===null||Jt(k)?(e.exit("htmlFlowData"),P(k)):(e.consume(k),U)}function P(k){return e.exit("htmlFlow"),t(k)}}function vSt(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(s4,t,n)}}const _St={name:"htmlText",tokenize:bSt};function bSt(e,t,n){const r=this;let i,s,o,a;return u;function u(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),l}function l(P){return P===33?(e.consume(P),c):P===47?(e.consume(P),x):P===63?(e.consume(P),E):rd(P)?(e.consume(P),C):n(P)}function c(P){return P===45?(e.consume(P),f):P===91?(e.consume(P),s="CDATA[",o=0,g):rd(P)?(e.consume(P),b):n(P)}function f(P){return P===45?(e.consume(P),d):n(P)}function d(P){return P===null||P===62?n(P):P===45?(e.consume(P),h):p(P)}function h(P){return P===null||P===62?n(P):p(P)}function p(P){return P===null?n(P):P===45?(e.consume(P),m):Jt(P)?(a=p,j(P)):(e.consume(P),p)}function m(P){return P===45?(e.consume(P),U):p(P)}function g(P){return P===s.charCodeAt(o++)?(e.consume(P),o===s.length?y:g):n(P)}function y(P){return P===null?n(P):P===93?(e.consume(P),v):Jt(P)?(a=y,j(P)):(e.consume(P),y)}function v(P){return P===93?(e.consume(P),_):y(P)}function _(P){return P===62?U(P):P===93?(e.consume(P),_):y(P)}function b(P){return P===null||P===62?U(P):Jt(P)?(a=b,j(P)):(e.consume(P),b)}function E(P){return P===null?n(P):P===63?(e.consume(P),w):Jt(P)?(a=E,j(P)):(e.consume(P),E)}function w(P){return P===62?U(P):E(P)}function x(P){return rd(P)?(e.consume(P),S):n(P)}function S(P){return P===45||Ku(P)?(e.consume(P),S):I(P)}function I(P){return Jt(P)?(a=I,j(P)):es(P)?(e.consume(P),I):U(P)}function C(P){return P===45||Ku(P)?(e.consume(P),C):P===47||P===62||Gl(P)?O(P):n(P)}function O(P){return P===47?(e.consume(P),U):P===58||P===95||rd(P)?(e.consume(P),z):Jt(P)?(a=O,j(P)):es(P)?(e.consume(P),O):U(P)}function z(P){return P===45||P===46||P===58||P===95||Ku(P)?(e.consume(P),z):N(P)}function N(P){return P===61?(e.consume(P),$):Jt(P)?(a=N,j(P)):es(P)?(e.consume(P),N):O(P)}function $(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):Jt(P)?(a=$,j(P)):es(P)?(e.consume(P),$):(e.consume(P),i=void 0,V)}function D(P){return P===i?(e.consume(P),B):P===null?n(P):Jt(P)?(a=D,j(P)):(e.consume(P),D)}function B(P){return P===62||P===47||Gl(P)?O(P):n(P)}function V(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===62||Gl(P)?O(P):(e.consume(P),V)}function j(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),Nr(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function G(P){return e.enter("htmlTextData"),a(P)}function U(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}}const QK={name:"labelEnd",tokenize:ASt,resolveTo:TSt,resolveAll:SSt},wSt={tokenize:CSt},ESt={tokenize:ISt},xSt={tokenize:OSt};function SSt(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function TSt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Rl(a,e.slice(s+1,s+r+3)),a=Rl(a,[["enter",c,t]]),a=Rl(a,KK(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Rl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Rl(a,e.slice(o+1)),a=Rl(a,[["exit",u,t]]),Vd(e,s,e.length,a),e}function ASt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(Lb(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(wSt,t,o?t:l)(c):c===91?e.attempt(ESt,t,o?e.attempt(xSt,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function CSt(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),XT(e,i)}function i(u){return u===41?a(u):Wke(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return Gl(u)?XT(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?Yke(e,XT(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function ISt(e,t,n){const r=this;return i;function i(o){return Gke.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Lb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function OSt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const PSt={name:"labelStartImage",tokenize:kSt,resolveAll:QK.resolveAll};function kSt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const $St={name:"labelStartLink",tokenize:RSt,resolveAll:QK.resolveAll};function RSt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const fB={name:"lineEnding",tokenize:NSt};function NSt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const n$={name:"thematicBreak",tokenize:DSt};function DSt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):es(u)?Nr(e,o,"whitespace")(u):r<3||u!==null&&!Jt(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const Ha={name:"list",tokenize:FSt,continuation:{tokenize:BSt},exit:zSt},LSt={tokenize:USt,partial:!0},MSt={tokenize:jSt,partial:!0};function FSt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:GU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(n$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return GU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(s4,r.interrupt?n:c,e.attempt(LSt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return es(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function BSt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(s4,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!es(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(MSt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(Ha,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function jSt(e,t,n){const r=this;return Nr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function zSt(e){e.exit(this.containerState.type)}function USt(e,t,n){const r=this;return Nr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!es(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Xde={name:"setextUnderline",tokenize:HSt,resolveTo:VSt};function VSt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function HSt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),Nr(e,l,"lineSuffix")(c))}function l(c){return c===null||Jt(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const qSt={tokenize:WSt};function WSt(e){const t=this,n=e.attempt(s4,r,e.attempt(this.parser.constructs.flowInitial,i,Nr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Zxt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const GSt={resolveAll:Xke()},YSt=Kke("string"),KSt=Kke("text");function Kke(e){return{tokenize:t,resolveAll:Xke(e==="text"?XSt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Xke(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function XSt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function QSt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:b,attempt:x(E),check:x(w),interrupt:x(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(O){return o=Rl(o,O),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=KK(s,l.events,l),l.events)}function d(O,z){return ZSt(h(O),z)}function h(O){return JSt(o,O)}function p(){return Object.assign({},r)}function m(O){i[O.line]=O.column,C()}function g(){let O;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(O){c=c(O)}function v(O){Jt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,C()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function _(O,z){const N=z||{};return N.type=O,N.start=p(),l.events.push(["enter",N,l]),a.push(N),N}function b(O){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function E(O,z){S(O,z.from)}function w(O,z){z.restore()}function x(O,z){return N;function N($,D,B){let V,j,G,U;return Array.isArray($)?k($):"tokenize"in $?k([$]):P($);function P(J){return se;function se(ae){const ce=ae!==null&&J[ae],le=ae!==null&&J.null,ge=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(le)?le:le?[le]:[]];return k(ge)(ae)}}function k(J){return V=J,j=0,J.length===0?B:H(J[j])}function H(J){return se;function se(ae){return U=I(),G=J,J.partial||(l.currentConstruct=J),J.name&&l.parser.constructs.disable.null.includes(J.name)?F():J.tokenize.call(z?Object.assign(Object.create(l),z):l,u,M,F)(ae)}}function M(J){return O(G,U),D}function F(J){return U.restore(),++j<V.length?H(V[j]):B}}}function S(O,z){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Vd(l.events,z,l.events.length-z,O.resolve(l.events.slice(z),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function I(){const O=p(),z=l.previous,N=l.currentConstruct,$=l.events.length,D=Array.from(a);return{restore:B,from:$};function B(){r=O,l.previous=z,l.currentConstruct=N,l.events.length=$,a=D,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function JSt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function ZSt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const eTt={42:Ha,43:Ha,45:Ha,48:Ha,49:Ha,50:Ha,51:Ha,52:Ha,53:Ha,54:Ha,55:Ha,56:Ha,57:Ha,62:Uke},tTt={91:iSt},nTt={[-2]:cB,[-1]:cB,32:cB},rTt={35:cSt,42:n$,45:[Xde,n$],60:pSt,61:Xde,95:n$,96:Yde,126:Yde},iTt={38:Hke,92:Vke},sTt={[-5]:fB,[-4]:fB,[-3]:fB,33:PSt,38:Hke,42:KU,60:[Lxt,_St],91:$St,92:[uSt,Vke],93:QK,95:KU,96:Yxt},oTt={null:[KU,GSt]},aTt={null:[42,95]},uTt={null:[]},lTt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:aTt,contentInitial:tTt,disable:uTt,document:eTt,flow:rTt,flowInitial:nTt,insideSpan:oTt,string:iTt,text:sTt},Symbol.toStringTag,{value:"Module"}));function cTt(e={}){const t=wxt([lTt].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(Oxt),document:r(kxt),flow:r(qSt),string:r(YSt),text:r(KSt)};return n;function r(i){return s;function s(o){return QSt(n,i,o)}}}const Qde=/[\0\t\n\r]/g;function fTt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Qde.lastIndex=f,l=Qde.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function dTt(e){for(;!qke(e););return e}function Qke(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const hTt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function pTt(e){return e.replace(hTt,mTt)}function mTt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Qke(n.slice(s?2:1),s?16:10)}return XK(n)||e}const XU={}.hasOwnProperty,gTt=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),yTt(n)(dTt(cTt(n).document().write(fTt()(e,t,!0))))};function yTt(e={}){const t=Jke({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(je),autolinkProtocol:z,autolinkEmail:z,atxHeading:u(Oe),blockQuote:u(ue),characterEscape:z,characterReference:z,codeFenced:u(Fe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Fe,l),codeText:u(ke,l),codeTextData:z,data:z,codeFlowValue:z,definition:u(Ge),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(Re),hardBreakEscape:u(Le),hardBreakTrailing:u(Le),htmlFlow:u(Ut,l),htmlFlowData:z,htmlText:u(Ut,l),htmlTextData:z,image:u(Qe),label:l,link:u(je),listItem:u(et),listItemValue:m,listOrdered:u(bt,p),listUnordered:u(bt),paragraph:u(ut),reference:J,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(Oe),strong:u(lt),thematicBreak:u(Dn)},exit:{atxHeading:f(),atxHeadingSequence:S,autolink:f(),autolinkEmail:ge,autolinkProtocol:le,blockQuote:f(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:ce,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:N,codeIndented:f(b),codeText:f(j),codeTextData:N,data:N,definition:f(),definitionDestinationString:x,definitionLabelString:E,definitionTitleString:w,emphasis:f(),hardBreakEscape:f(D),hardBreakTrailing:f(D),htmlFlow:f(B),htmlFlowData:N,htmlText:f(V),htmlTextData:N,image:f(U),label:k,labelText:P,lineEnding:$,link:f(G),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:H,resourceTitleString:M,resource:F,setextHeading:f(O),setextHeadingLineSequence:C,setextHeadingText:I,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(he){let _e={type:"root",children:[]};const Pe=[_e],it=[],Ye=[],at={stack:Pe,tokenStack:it,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let tt=-1;for(;++tt<he.length;)if(he[tt][1].type==="listOrdered"||he[tt][1].type==="listUnordered")if(he[tt][0]==="enter")Ye.push(tt);else{const vt=Ye.pop();tt=i(he,vt,tt)}for(tt=-1;++tt<he.length;){const vt=t[he[tt][0]];XU.call(vt,he[tt][1].type)&&vt[he[tt][1].type].call(Object.assign({sliceSerialize:he[tt][2].sliceSerialize},at),he[tt][1])}if(it.length>0){const vt=it[it.length-1];(vt[1]||Jde).call(at,void 0,vt[0])}for(_e.position={start:a(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:a(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<t.transforms.length;)_e=t.transforms[tt](_e)||_e;return _e}function i(he,_e,Pe){let it=_e-1,Ye=-1,at=!1,tt,vt,In,Wt;for(;++it<=Pe;){const Vt=he[it];if(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered"||Vt[1].type==="blockQuote"?(Vt[0]==="enter"?Ye++:Ye--,Wt=void 0):Vt[1].type==="lineEndingBlank"?Vt[0]==="enter"&&(tt&&!Wt&&!Ye&&!In&&(In=it),Wt=void 0):Vt[1].type==="linePrefix"||Vt[1].type==="listItemValue"||Vt[1].type==="listItemMarker"||Vt[1].type==="listItemPrefix"||Vt[1].type==="listItemPrefixWhitespace"||(Wt=void 0),!Ye&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Ye===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(tt){let hr=it;for(vt=void 0;hr--;){const Yn=he[hr];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;vt&&(he[vt][1].type="lineEndingBlank",at=!0),Yn[1].type="lineEnding",vt=hr}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}In&&(!vt||In<vt)&&(tt._spread=!0),tt.end=Object.assign({},vt?he[vt][1].start:Vt[1].end),he.splice(vt||it,0,["exit",tt,Vt[2]]),it++,Pe++}Vt[1].type==="listItemPrefix"&&(tt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start)},he.splice(it,0,["enter",tt,Vt[2]]),it++,Pe++,In=void 0,Wt=!0)}}return he[_e][1]._spread=at,Pe}function s(he,_e){n[he]=_e}function o(he){return n[he]}function a(he){return{line:he.line,column:he.column,offset:he.offset}}function u(he,_e){return Pe;function Pe(it){c.call(this,he(it),it),_e&&_e.call(this,it)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(he,_e,Pe){return this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([_e,Pe]),he.position={start:a(_e.start)},he}function f(he){return _e;function _e(Pe){he&&he.call(this,Pe),d.call(this,Pe)}}function d(he,_e){const Pe=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==he.type&&(_e?_e.call(this,he,it[0]):(it[1]||Jde).call(this,he,it[0]));else throw new Error("Cannot close `"+he.type+"` ("+Db({start:he.start,end:he.end})+"): its not open");return Pe.position.end=a(he.end),Pe}function h(){return bxt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(he){if(o("expectingFirstListItemValue")){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(he),10),s("expectingFirstListItemValue")}}function g(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=he}function y(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=he}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/(\r?\n|\r)$/g,"")}function E(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Lb(this.sliceSerialize(he)).toLowerCase()}function w(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function x(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function S(he){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Pe=this.sliceSerialize(he).length;_e.depth=Pe}}function I(){s("setextHeadingSlurpLineEnding",!0)}function C(he){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(he).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function z(he){const _e=this.stack[this.stack.length-1];let Pe=_e.children[_e.children.length-1];(!Pe||Pe.type!=="text")&&(Pe=jt(),Pe.position={start:a(he.start)},_e.children.push(Pe)),this.stack.push(Pe)}function N(he){const _e=this.stack.pop();_e.value+=this.sliceSerialize(he),_e.position.end=a(he.end)}function $(he){const _e=this.stack[this.stack.length-1];if(o("atHardBreak")){const Pe=_e.children[_e.children.length-1];Pe.position.end=a(he.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(_e.type)&&(z.call(this,he),N.call(this,he))}function D(){s("atHardBreak",!0)}function B(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function V(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function j(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function G(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function U(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function P(he){const _e=this.stack[this.stack.length-2],Pe=this.sliceSerialize(he);_e.label=pTt(Pe),_e.identifier=Lb(Pe).toLowerCase()}function k(){const he=this.stack[this.stack.length-1],_e=this.resume(),Pe=this.stack[this.stack.length-1];s("inReference",!0),Pe.type==="link"?Pe.children=he.children:Pe.alt=_e}function H(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function M(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function F(){s("inReference")}function J(){s("referenceType","collapsed")}function se(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Lb(this.sliceSerialize(he)).toLowerCase(),s("referenceType","full")}function ae(he){s("characterReferenceType",he.type)}function ce(he){const _e=this.sliceSerialize(he),Pe=o("characterReferenceType");let it;Pe?(it=Qke(_e,Pe==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):it=XK(_e);const Ye=this.stack.pop();Ye.value+=it,Ye.position.end=a(he.end)}function le(he){N.call(this,he);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(he)}function ge(he){N.call(this,he);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(he)}function ue(){return{type:"blockquote",children:[]}}function Fe(){return{type:"code",lang:null,meta:null,value:""}}function ke(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Le(){return{type:"break"}}function Ut(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function je(){return{type:"link",title:null,url:"",children:[]}}function bt(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function et(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function ut(){return{type:"paragraph",children:[]}}function lt(){return{type:"strong",children:[]}}function jt(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function Jke(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Jke(e,r):vTt(e,r)}return e}function vTt(e,t){let n;for(n in t)if(XU.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(XU.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function Jde(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Db({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Db({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Db({start:t.start,end:t.end})+") is still open")}function _Tt(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return gTt(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var ws=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const r$={}.hasOwnProperty;function bTt(e,t){const n=t.data||{};return"value"in t&&!(r$.call(n,"hName")||r$.call(n,"hProperties")||r$.call(n,"hChildren"))?e.augment(t,ws("text",t.value)):e(t,"div",ia(e,t))}function Zke(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return r$.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=wTt:i=e.unknownHandler,(typeof i=="function"?i:bTt)(e,t,n)}function wTt(e,t){return"children"in t?{...t,children:ia(e,t)}:t}function ia(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=Zke(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const e$e=function(e){if(e==null)return TTt;if(typeof e=="string")return STt(e);if(typeof e=="object")return Array.isArray(e)?ETt(e):xTt(e);if(typeof e=="function")return o4(e);throw new Error("Expected function, string, or object as test")};function ETt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=e$e(e[n]);return o4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function xTt(e){return o4(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function STt(e){return o4(t);function t(n){return n&&n.type===e}}function o4(e){return t;function t(...n){return!!e.call(this,...n)}}function TTt(){return!0}const ATt=!0,CTt="skip",Zde=!1,ITt=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=e$e(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=OTt(n(a,l)),h[0]===Zde))return h;if(a.children&&h[0]!==CTt)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===Zde)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function OTt(e){return Array.isArray(e)?e:typeof e=="number"?[ATt,e]:[e]}const JK=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),ITt(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},t$e=r$e("start"),n$e=r$e("end");function r$e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function PTt(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const ehe={}.hasOwnProperty;function kTt(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return JK(e,"definition",r=>{const i=the(r.identifier);i&&!ehe.call(t,i)&&(t[i]=r)}),n;function n(r){const i=the(r);return i&&ehe.call(t,i)?t[i]:null}}function the(e){return String(e||"").toUpperCase()}function LE(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Ku(e.charCodeAt(n+1))&&Ku(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Zh(e,t){const n=[];let r=-1;for(t&&n.push(ws("text",`
`));++r<e.length;)r&&n.push(ws("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(ws("text",`
`)),n}function $Tt(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=ia(e,r),s=String(r.identifier),o=LE(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:Zh(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[ws("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Zh(n,!0)},{type:"text",value:`
`}]}}function RTt(e,t){return e(t,"blockquote",Zh(ia(e,t),!0))}function NTt(e,t){return[e(t,"br"),ws("text",`
`)]}function DTt(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[ws("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function LTt(e,t){return e(t,"del",ia(e,t))}function MTt(e,t){return e(t,"em",ia(e,t))}function i$e(e,t){const n=String(t.identifier),r=LE(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[ws("text",String(s))])])}function FTt(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},i$e(e,{type:"footnoteReference",identifier:i,position:t.position})}function BTt(e,t){return e(t,"h"+t.depth,ia(e,t))}function jTt(e,t){return e.dangerous?e.augment(t,ws("raw",t.value)):null}function s$e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return ws("text","!["+t.alt+r);const i=ia(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(ws("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(ws("text",r)),i}function zTt(e,t){const n=e.definition(t.identifier);if(!n)return s$e(e,t);const r={src:LE(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function UTt(e,t){const n={src:LE(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function VTt(e,t){return e(t,"code",[ws("text",t.value.replace(/\r?\n|\r/g," "))])}function HTt(e,t){const n=e.definition(t.identifier);if(!n)return s$e(e,t);const r={href:LE(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,ia(e,t))}function qTt(e,t){const n={href:LE(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,ia(e,t))}function WTt(e,t,n){const r=ia(e,t),i=n?GTt(n):o$e(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(ws("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(ws("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(ws("text",`
`)),e(t,"li",s,o)}function GTt(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=o$e(n[r]);return!!t}function o$e(e){const t=e.spread;return t??e.children.length>1}function YTt(e,t){const n={},r=t.ordered?"ol":"ul",i=ia(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Zh(i,!0))}function KTt(e,t){return e(t,"p",ia(e,t))}function XTt(e,t){return e.augment(t,ws("root",Zh(ia(e,t))))}function QTt(e,t){return e(t,"strong",ia(e,t))}function JTt(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?ia(e,f):[]))}s[r]=e(n[r],"tr",Zh(u,!0))}return e(t,"table",Zh([e(s[0].position,"thead",Zh([s[0]],!0))].concat(s[1]?e({start:t$e(s[1]),end:n$e(s[s.length-1])},"tbody",Zh(s.slice(1),!0)):[]),!0))}const nhe=9,rhe=32;function ZTt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(ihe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(ihe(t.slice(i),i>0,!1)),s.join("")}function ihe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===nhe||s===rhe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===nhe||s===rhe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function e2t(e,t){return e.augment(t,ws("text",ZTt(String(t.value))))}function t2t(e,t){return e(t,"hr")}const n2t={blockquote:RTt,break:NTt,code:DTt,delete:LTt,emphasis:MTt,footnoteReference:i$e,footnote:FTt,heading:BTt,html:jTt,imageReference:zTt,image:UTt,inlineCode:VTt,linkReference:HTt,link:qTt,listItem:WTt,list:YTt,paragraph:KTt,root:XTt,strong:QTt,table:JTt,text:e2t,thematicBreak:t2t,toml:EP,yaml:EP,definition:EP,footnoteDefinition:EP};function EP(){return null}const r2t={}.hasOwnProperty;function i2t(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=kTt(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...n2t,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,JK(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();r2t.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};PTt(l)||(u.position={start:t$e(l),end:n$e(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function a$e(e,t){const n=i2t(e,t),r=Zke(n,e,null),i=$Tt(n);return i&&r.children.push(ws("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const s2t=function(e,t){return e&&"run"in e?a2t(e,t):u2t(e||t)},o2t=s2t;function a2t(e,t){return(n,r,i)=>{e.run(a$e(n,t),r,s=>{i(s)})}}function u2t(e){return t=>a$e(t,e)}var u$e={exports:{}},l2t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",c2t=l2t,f2t=c2t;function l$e(){}function c$e(){}c$e.resetWarningCache=l$e;var d2t=function(){function e(r,i,s,o,a,u){if(u!==f2t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:c$e,resetWarningCache:l$e};return n.PropTypes=n,n};u$e.exports=d2t();var h2t=u$e.exports;const Mt=pl(h2t);let hI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};hI.prototype.property={};hI.prototype.normal={};hI.prototype.space=null;function f$e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new hI(n,r,t)}function AA(e){return e.toLowerCase()}let mc=class{constructor(t,n){this.property=t,this.attribute=n}};mc.prototype.space=null;mc.prototype.boolean=!1;mc.prototype.booleanish=!1;mc.prototype.overloadedBoolean=!1;mc.prototype.number=!1;mc.prototype.commaSeparated=!1;mc.prototype.spaceSeparated=!1;mc.prototype.commaOrSpaceSeparated=!1;mc.prototype.mustUseProperty=!1;mc.prototype.defined=!1;let p2t=0;const _n=Pv(),Xi=Pv(),d$e=Pv(),Ke=Pv(),Gr=Pv(),Mb=Pv(),Du=Pv();function Pv(){return 2**++p2t}const QU=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:Xi,commaOrSpaceSeparated:Du,commaSeparated:Mb,number:Ke,overloadedBoolean:d$e,spaceSeparated:Gr},Symbol.toStringTag,{value:"Module"})),dB=Object.keys(QU);class ZK extends mc{constructor(t,n,r,i){let s=-1;if(super(t,n),she(this,"space",i),typeof r=="number")for(;++s<dB.length;){const o=dB[s];she(this,dB[s],(r&QU[o])===QU[o])}}}ZK.prototype.defined=!0;function she(e,t,n){n&&(e[t]=n)}const m2t={}.hasOwnProperty;function ME(e){const t={},n={};let r;for(r in e.properties)if(m2t.call(e.properties,r)){const i=e.properties[r],s=new ZK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[AA(r)]=r,n[AA(s.attribute)]=r}return new hI(t,n,e.space)}const h$e=ME({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),p$e=ME({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function m$e(e,t){return t in e?e[t]:t}function g$e(e,t){return m$e(e,t.toLowerCase())}const y$e=ME({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:g$e,properties:{xmlns:null,xmlnsXLink:null}}),v$e=ME({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Xi,ariaAutoComplete:null,ariaBusy:Xi,ariaChecked:Xi,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:Gr,ariaCurrent:null,ariaDescribedBy:Gr,ariaDetails:null,ariaDisabled:Xi,ariaDropEffect:Gr,ariaErrorMessage:null,ariaExpanded:Xi,ariaFlowTo:Gr,ariaGrabbed:Xi,ariaHasPopup:null,ariaHidden:Xi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gr,ariaLevel:Ke,ariaLive:null,ariaModal:Xi,ariaMultiLine:Xi,ariaMultiSelectable:Xi,ariaOrientation:null,ariaOwns:Gr,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:Xi,ariaReadOnly:Xi,ariaRelevant:null,ariaRequired:Xi,ariaRoleDescription:Gr,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:Xi,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null}}),g2t=ME({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:g$e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mb,acceptCharset:Gr,accessKey:Gr,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:Gr,autoFocus:_n,autoPlay:_n,capture:_n,charSet:null,checked:_n,cite:null,className:Gr,cols:Ke,colSpan:null,content:null,contentEditable:Xi,controls:_n,controlsList:Gr,coords:Ke|Mb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:d$e,draggable:Xi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:Gr,height:Ke,hidden:_n,high:Ke,href:null,hrefLang:null,htmlFor:Gr,httpEquiv:Gr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:Gr,itemRef:Gr,itemScope:_n,itemType:Gr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:Ke,pattern:null,ping:Gr,placeholder:null,playsInline:_n,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:Gr,required:_n,reversed:_n,rows:Ke,rowSpan:Ke,sandbox:Gr,scope:null,scoped:_n,seamless:_n,selected:_n,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:Xi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:Xi,width:Ke,wrap:null,align:null,aLink:null,archive:Gr,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:Xi,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:Ke,security:null,unselectable:null}}),y2t=ME({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:m$e,properties:{about:Du,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:Gr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mb,g2:Mb,glyphName:Mb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:Du,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Du,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Du,rev:Du,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Du,requiredFeatures:Du,requiredFonts:Du,requiredFormats:Du,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:Du,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Du,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Du,to:null,transform:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),v2t=/^data[-\w.:]+$/i,ohe=/-[a-z]/g,_2t=/[A-Z]/g;function a4(e,t){const n=AA(t);let r=t,i=mc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&v2t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(ohe,w2t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!ohe.test(s)){let o=s.replace(_2t,b2t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=ZK}return new i(r,t)}function b2t(e){return"-"+e.toLowerCase()}function w2t(e){return e.charAt(1).toUpperCase()}const ahe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},pI=f$e([p$e,h$e,y$e,v$e,g2t],"html"),FE=f$e([p$e,h$e,y$e,v$e,y2t],"svg");function E2t(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{JK(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var _$e={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eX=Symbol.for("react.element"),tX=Symbol.for("react.portal"),u4=Symbol.for("react.fragment"),l4=Symbol.for("react.strict_mode"),c4=Symbol.for("react.profiler"),f4=Symbol.for("react.provider"),d4=Symbol.for("react.context"),x2t=Symbol.for("react.server_context"),h4=Symbol.for("react.forward_ref"),p4=Symbol.for("react.suspense"),m4=Symbol.for("react.suspense_list"),g4=Symbol.for("react.memo"),y4=Symbol.for("react.lazy"),S2t=Symbol.for("react.offscreen"),b$e;b$e=Symbol.for("react.module.reference");function gc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case eX:switch(e=e.type,e){case u4:case c4:case l4:case p4:case m4:return e;default:switch(e=e&&e.$$typeof,e){case x2t:case d4:case h4:case y4:case g4:case f4:return e;default:return t}}case tX:return t}}}xr.ContextConsumer=d4;xr.ContextProvider=f4;xr.Element=eX;xr.ForwardRef=h4;xr.Fragment=u4;xr.Lazy=y4;xr.Memo=g4;xr.Portal=tX;xr.Profiler=c4;xr.StrictMode=l4;xr.Suspense=p4;xr.SuspenseList=m4;xr.isAsyncMode=function(){return!1};xr.isConcurrentMode=function(){return!1};xr.isContextConsumer=function(e){return gc(e)===d4};xr.isContextProvider=function(e){return gc(e)===f4};xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===eX};xr.isForwardRef=function(e){return gc(e)===h4};xr.isFragment=function(e){return gc(e)===u4};xr.isLazy=function(e){return gc(e)===y4};xr.isMemo=function(e){return gc(e)===g4};xr.isPortal=function(e){return gc(e)===tX};xr.isProfiler=function(e){return gc(e)===c4};xr.isStrictMode=function(e){return gc(e)===l4};xr.isSuspense=function(e){return gc(e)===p4};xr.isSuspenseList=function(e){return gc(e)===m4};xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===u4||e===c4||e===l4||e===p4||e===m4||e===S2t||typeof e=="object"&&e!==null&&(e.$$typeof===y4||e.$$typeof===g4||e.$$typeof===f4||e.$$typeof===d4||e.$$typeof===h4||e.$$typeof===b$e||e.getModuleId!==void 0)};xr.typeOf=gc;_$e.exports=xr;var T2t=_$e.exports;const A2t=pl(T2t);function C2t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function uhe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function w$e(e){return e.join(" ").trim()}function lhe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function E$e(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var nX={exports:{}},che=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,I2t=/\n/g,O2t=/^\s*/,P2t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,k2t=/^:\s*/,$2t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,R2t=/^[;\s]*/,N2t=/^\s+|\s+$/g,D2t=`
`,fhe="/",dhe="*",Ay="",L2t="comment",M2t="declaration",F2t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(I2t);m&&(n+=m.length);var g=p.lastIndexOf(D2t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(O2t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(fhe!=e.charAt(0)||dhe!=e.charAt(1))){for(var m=2;Ay!=e.charAt(m)&&(dhe!=e.charAt(m)||fhe!=e.charAt(m+1));)++m;if(m+=2,Ay===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:L2t,comment:g})}}function d(){var p=s(),m=u(P2t);if(m){if(f(),!u(k2t))return a("property missing ':'");var g=u($2t),y=p({type:M2t,property:hhe(m[0].replace(che,Ay)),value:g?hhe(g[0].replace(che,Ay)):Ay});return u(R2t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function hhe(e){return e?e.replace(N2t,Ay):Ay}var B2t=F2t;function x$e(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=B2t(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}nX.exports=x$e;nX.exports.default=x$e;var j2t=nX.exports;const z2t=pl(j2t),JU={}.hasOwnProperty,U2t=new Set(["table","thead","tbody","tfoot","tr"]);function S$e(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(V2t(e,i,r,t)):i.type==="text"?(t.type!=="element"||!U2t.has(t.tagName)||!C2t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function V2t(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?VEt:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=FE,e.schema=l),t.properties)for(c in t.properties)JU.call(t.properties,c)&&q2t(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=S$e(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&JU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===L.Fragment;if(!A2t.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=H2t(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=hB(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=Y2t(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=hB(r,t),u.siblingCount=hB(r)),p||(u.node=t),f.length>0?L.createElement(h,u,f):L.createElement(h,u)}function H2t(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function hB(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function q2t(e,t,n,r){const i=a4(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?E$e(s):w$e(s)),i.property==="style"&&typeof s=="string"&&(s=W2t(s)),i.space&&i.property?e[JU.call(ahe,i.property)?ahe[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function W2t(e){const t={};try{z2t(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,G2t)]=i}}function G2t(e,t){return t.toUpperCase()}function Y2t(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const phe={}.hasOwnProperty,K2t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function T$e(e){for(const s in xP)if(phe.call(xP,s)&&phe.call(e,s)){const o=xP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${K2t}#${o.id}> for more info)`),delete xP[s]}const t=gxt().use(_Tt).use(e.remarkPlugins||[]).use(o2t,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(E2t,e),n=new txt;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=L.createElement(L.Fragment,{},S$e({options:e,schema:pI,listDepth:0},r));return e.className&&(i=L.createElement("div",{className:e.className},i)),i}T$e.propTypes={children:Mt.string,className:Mt.string,allowElement:Mt.func,allowedElements:Mt.arrayOf(Mt.string),disallowedElements:Mt.arrayOf(Mt.string),unwrapDisallowed:Mt.bool,remarkPlugins:Mt.arrayOf(Mt.oneOfType([Mt.object,Mt.func,Mt.arrayOf(Mt.oneOfType([Mt.bool,Mt.string,Mt.object,Mt.func,Mt.arrayOf(Mt.any)]))])),rehypePlugins:Mt.arrayOf(Mt.oneOfType([Mt.object,Mt.func,Mt.arrayOf(Mt.oneOfType([Mt.bool,Mt.string,Mt.object,Mt.func,Mt.arrayOf(Mt.any)]))])),sourcePos:Mt.bool,rawSourcePos:Mt.bool,skipHtml:Mt.bool,includeElementIndex:Mt.bool,transformLinkUri:Mt.oneOfType([Mt.func,Mt.bool]),linkTarget:Mt.oneOfType([Mt.func,Mt.string]),transformImageUri:Mt.func,components:Mt.object};const A$e=-1,v4=0,MD=1,FD=2,rX=3,iX=4,sX=5,oX=6,C$e=7,I$e=8,mhe=typeof self=="object"?self:globalThis,X2t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case v4:case A$e:return n(o,i);case MD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case FD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case rX:return n(new Date(o),i);case iX:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case sX:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case oX:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case C$e:{const{name:a,message:u}=o;return n(new mhe[a](u),i)}case I$e:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new mhe[s](o),i)};return r},ghe=e=>X2t(new Map,e)(0),l_="",{toString:Q2t}={},{keys:J2t}=Object,Jx=e=>{const t=typeof e;if(t!=="object"||!e)return[v4,t];const n=Q2t.call(e).slice(8,-1);switch(n){case"Array":return[MD,l_];case"Object":return[FD,l_];case"Date":return[rX,l_];case"RegExp":return[iX,l_];case"Map":return[sX,l_];case"Set":return[oX,l_]}return n.includes("Array")?[MD,n]:n.includes("Error")?[C$e,n]:[FD,n]},SP=([e,t])=>e===v4&&(t==="function"||t==="symbol"),Z2t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Jx(o);switch(a){case v4:{let c=o;switch(u){case"bigint":a=I$e,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([A$e],o)}return i([a,c],o)}case MD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case FD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of J2t(o))(e||!SP(Jx(o[d])))&&c.push([s(d),s(o[d])]);return f}case rX:return i([a,o.toISOString()],o);case iX:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case sX:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(SP(Jx(d))||SP(Jx(h))))&&c.push([s(d),s(h)]);return f}case oX:{const c=[],f=i([a,c],o);for(const d of o)(e||!SP(Jx(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},yhe=(e,{json:t,lossy:n}={})=>{const r=[];return Z2t(!(t||n),!!t,new Map,r)(e),r},vhe=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?ghe(yhe(e,t)):structuredClone(e):(e,t)=>ghe(yhe(e,t)),_he=/[#.]/g;function eAt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){_he.lastIndex=i;const a=_he.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const tAt=new Set(["button","menu","reset","submit"]),ZU={}.hasOwnProperty;function O$e(e,t,n){const r=n&&sAt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=eAt(s,t),l.tagName=l.tagName.toLowerCase(),r&&ZU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),nAt(o,l.tagName)){let c;for(c in o)ZU.call(o,c)&&rAt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)eV(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function nAt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?tAt.has(e.type.toLowerCase()):!("value"in e)}function rAt(e,t,n,r){const i=a4(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=uhe(r):i.commaSeparated?o=lhe(r):i.commaOrSpaceSeparated?o=uhe(lhe(r).join(" ")):o=bhe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?iAt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=bhe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function eV(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)eV(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?eV(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function bhe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||AA(n)===AA(t)))return!0}return n}function iAt(e){const t=[];let n;for(n in e)ZU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function sAt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const oAt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],aAt=O$e(pI,"div"),uAt=O$e(FE,"g",oAt),pB=/\r?\n|\r/g;function lAt(e){const t=String(e),n=[];for(pB.lastIndex=0;pB.test(t);)n.push(pB.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Gy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},P$e={}.hasOwnProperty,cAt=Object.prototype;function fAt(e,t){const n=t||{};return aX({file:n.file||void 0,location:!1,schema:n.space==="svg"?FE:pI,verbose:n.verbose||!1},e)}function aX(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},i$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:k$e(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=lAt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},i$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},i$(e,r,n),n}default:return n=dAt(e,t),n}}function k$e(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=aX(e,t[n]);r.push(i)}return r}function dAt(e,t){const n=e.schema;e.schema=t.namespaceURI===Gy.svg?FE:pI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;P$e.call(cAt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?uAt:aAt)(t.tagName,i,k$e(e,t.childNodes));if(i$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&nb(u.startTag),c=u&&u.endTag&&nb(u.endTag),f=aX(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function i$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=hAt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function hAt(e,t,n){const r=nb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)P$e.call(n.attrs,o)&&(s[a4(e.schema,o).property]=nb(n.attrs[o]));n.startTag;const a=nb(n.startTag),u=n.endTag?nb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function nb(e){const t=whe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=whe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function whe(e){return e.line&&e.column?e:void 0}const Ehe={}.hasOwnProperty;function $$e(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Ehe.call(i,e)){const u=String(i[e]);o=Ehe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const pAt={},mAt={}.hasOwnProperty,R$e=$$e("type",{handlers:{root:yAt,element:EAt,text:bAt,comment:wAt,doctype:_At}});function gAt(e,t){const r=(t||pAt).space;return R$e(e,r==="svg"?FE:pI)}function yAt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=uX(e.children,n,t),BE(e,n),n}function vAt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=uX(e.children,n,t),BE(e,n),n}function _At(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return BE(e,t),t}function bAt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return BE(e,t),t}function wAt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return BE(e,t),t}function EAt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=FE);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&mAt.call(e.properties,s)){const u=xAt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Gy[o],childNodes:[],parentNode:null};return a.childNodes=uX(e.children,a,r),BE(e,a),e.tagName==="template"&&e.content&&(a.content=vAt(e.content,r)),a}function xAt(e,t,n){const r=a4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?E$e(n):w$e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Gy[r.space]}return i}function uX(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=R$e(e[r],n);s.parentNode=t,i.push(s)}return i}function BE(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const SAt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],TAt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ai="";var Y;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Y=Y||(Y={}));const Ua={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function N$e(e){return e>=55296&&e<=57343}function AAt(e){return e>=56320&&e<=57343}function CAt(e,t){return(e-55296)*1024+9216+t}function D$e(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function L$e(e){return e>=64976&&e<=65007||TAt.has(e)}var we;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(we=we||(we={}));const IAt=65536;class OAt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=IAt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(AAt(n))return this.pos++,this._addGap(),CAt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Y.EOF;return this._err(we.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;const r=this.html.charCodeAt(n);return r===Y.CARRIAGE_RETURN?Y.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;let t=this.html.charCodeAt(this.pos);return t===Y.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Y.LINE_FEED):t===Y.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,N$e(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Y.LINE_FEED||t===Y.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){D$e(t)?this._err(we.controlCharacterInInputStream):L$e(t)&&this._err(we.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var En;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(En=En||(En={}));function M$e(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const wm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),PAt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var mB;const kAt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),$At=(mB=String.fromCodePoint)!==null&&mB!==void 0?mB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function RAt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=kAt.get(e))!==null&&t!==void 0?t:e}var Ls;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ls||(Ls={}));const NAt=32;var yd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(yd||(yd={}));function tV(e){return e>=Ls.ZERO&&e<=Ls.NINE}function DAt(e){return e>=Ls.UPPER_A&&e<=Ls.UPPER_F||e>=Ls.LOWER_A&&e<=Ls.LOWER_F}function LAt(e){return e>=Ls.UPPER_A&&e<=Ls.UPPER_Z||e>=Ls.LOWER_A&&e<=Ls.LOWER_Z||tV(e)}function MAt(e){return e===Ls.EQUALS||LAt(e)}var Ps;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ps||(Ps={}));var Cy;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Cy||(Cy={}));class FAt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ps.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Cy.Strict}startEntity(t){this.decodeMode=t,this.state=Ps.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ps.EntityStart:return t.charCodeAt(n)===Ls.NUM?(this.state=Ps.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ps.NamedEntity,this.stateNamedEntity(t,n));case Ps.NumericStart:return this.stateNumericStart(t,n);case Ps.NumericDecimal:return this.stateNumericDecimal(t,n);case Ps.NumericHex:return this.stateNumericHex(t,n);case Ps.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|NAt)===Ls.LOWER_X?(this.state=Ps.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ps.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(tV(i)||DAt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(tV(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ls.SEMI)this.consumed+=1;else if(this.decodeMode===Cy.Strict)return 0;return this.emitCodePoint(RAt(this.result),this.consumed),this.errors&&(t!==Ls.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&yd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=B$e(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Cy.Attribute&&(s===0||MAt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&yd.VALUE_LENGTH)>>14,s!==0){if(o===Ls.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Cy.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&yd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~yd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ps.NamedEntity:return this.result!==0&&(this.decodeMode!==Cy.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ps.NumericDecimal:return this.emitNumericEntity(0,2);case Ps.NumericHex:return this.emitNumericEntity(0,3);case Ps.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ps.EntityStart:return 0}}}function F$e(e){let t="";const n=new FAt(e,r=>t+=$At(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function B$e(e,t,n,r){const i=(t&yd.BRANCH_LENGTH)>>7,s=t&yd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}F$e(wm);F$e(PAt);var Ae;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ae=Ae||(Ae={}));var Tg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Tg=Tg||(Tg={}));var ju;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(ju=ju||(ju={}));var me;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(me=me||(me={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(T=T||(T={}));const BAt=new Map([[me.A,T.A],[me.ADDRESS,T.ADDRESS],[me.ANNOTATION_XML,T.ANNOTATION_XML],[me.APPLET,T.APPLET],[me.AREA,T.AREA],[me.ARTICLE,T.ARTICLE],[me.ASIDE,T.ASIDE],[me.B,T.B],[me.BASE,T.BASE],[me.BASEFONT,T.BASEFONT],[me.BGSOUND,T.BGSOUND],[me.BIG,T.BIG],[me.BLOCKQUOTE,T.BLOCKQUOTE],[me.BODY,T.BODY],[me.BR,T.BR],[me.BUTTON,T.BUTTON],[me.CAPTION,T.CAPTION],[me.CENTER,T.CENTER],[me.CODE,T.CODE],[me.COL,T.COL],[me.COLGROUP,T.COLGROUP],[me.DD,T.DD],[me.DESC,T.DESC],[me.DETAILS,T.DETAILS],[me.DIALOG,T.DIALOG],[me.DIR,T.DIR],[me.DIV,T.DIV],[me.DL,T.DL],[me.DT,T.DT],[me.EM,T.EM],[me.EMBED,T.EMBED],[me.FIELDSET,T.FIELDSET],[me.FIGCAPTION,T.FIGCAPTION],[me.FIGURE,T.FIGURE],[me.FONT,T.FONT],[me.FOOTER,T.FOOTER],[me.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[me.FORM,T.FORM],[me.FRAME,T.FRAME],[me.FRAMESET,T.FRAMESET],[me.H1,T.H1],[me.H2,T.H2],[me.H3,T.H3],[me.H4,T.H4],[me.H5,T.H5],[me.H6,T.H6],[me.HEAD,T.HEAD],[me.HEADER,T.HEADER],[me.HGROUP,T.HGROUP],[me.HR,T.HR],[me.HTML,T.HTML],[me.I,T.I],[me.IMG,T.IMG],[me.IMAGE,T.IMAGE],[me.INPUT,T.INPUT],[me.IFRAME,T.IFRAME],[me.KEYGEN,T.KEYGEN],[me.LABEL,T.LABEL],[me.LI,T.LI],[me.LINK,T.LINK],[me.LISTING,T.LISTING],[me.MAIN,T.MAIN],[me.MALIGNMARK,T.MALIGNMARK],[me.MARQUEE,T.MARQUEE],[me.MATH,T.MATH],[me.MENU,T.MENU],[me.META,T.META],[me.MGLYPH,T.MGLYPH],[me.MI,T.MI],[me.MO,T.MO],[me.MN,T.MN],[me.MS,T.MS],[me.MTEXT,T.MTEXT],[me.NAV,T.NAV],[me.NOBR,T.NOBR],[me.NOFRAMES,T.NOFRAMES],[me.NOEMBED,T.NOEMBED],[me.NOSCRIPT,T.NOSCRIPT],[me.OBJECT,T.OBJECT],[me.OL,T.OL],[me.OPTGROUP,T.OPTGROUP],[me.OPTION,T.OPTION],[me.P,T.P],[me.PARAM,T.PARAM],[me.PLAINTEXT,T.PLAINTEXT],[me.PRE,T.PRE],[me.RB,T.RB],[me.RP,T.RP],[me.RT,T.RT],[me.RTC,T.RTC],[me.RUBY,T.RUBY],[me.S,T.S],[me.SCRIPT,T.SCRIPT],[me.SECTION,T.SECTION],[me.SELECT,T.SELECT],[me.SOURCE,T.SOURCE],[me.SMALL,T.SMALL],[me.SPAN,T.SPAN],[me.STRIKE,T.STRIKE],[me.STRONG,T.STRONG],[me.STYLE,T.STYLE],[me.SUB,T.SUB],[me.SUMMARY,T.SUMMARY],[me.SUP,T.SUP],[me.TABLE,T.TABLE],[me.TBODY,T.TBODY],[me.TEMPLATE,T.TEMPLATE],[me.TEXTAREA,T.TEXTAREA],[me.TFOOT,T.TFOOT],[me.TD,T.TD],[me.TH,T.TH],[me.THEAD,T.THEAD],[me.TITLE,T.TITLE],[me.TR,T.TR],[me.TRACK,T.TRACK],[me.TT,T.TT],[me.U,T.U],[me.UL,T.UL],[me.SVG,T.SVG],[me.VAR,T.VAR],[me.WBR,T.WBR],[me.XMP,T.XMP]]);function jE(e){var t;return(t=BAt.get(e))!==null&&t!==void 0?t:T.UNKNOWN}const Be=T,jAt={[Ae.HTML]:new Set([Be.ADDRESS,Be.APPLET,Be.AREA,Be.ARTICLE,Be.ASIDE,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BLOCKQUOTE,Be.BODY,Be.BR,Be.BUTTON,Be.CAPTION,Be.CENTER,Be.COL,Be.COLGROUP,Be.DD,Be.DETAILS,Be.DIR,Be.DIV,Be.DL,Be.DT,Be.EMBED,Be.FIELDSET,Be.FIGCAPTION,Be.FIGURE,Be.FOOTER,Be.FORM,Be.FRAME,Be.FRAMESET,Be.H1,Be.H2,Be.H3,Be.H4,Be.H5,Be.H6,Be.HEAD,Be.HEADER,Be.HGROUP,Be.HR,Be.HTML,Be.IFRAME,Be.IMG,Be.INPUT,Be.LI,Be.LINK,Be.LISTING,Be.MAIN,Be.MARQUEE,Be.MENU,Be.META,Be.NAV,Be.NOEMBED,Be.NOFRAMES,Be.NOSCRIPT,Be.OBJECT,Be.OL,Be.P,Be.PARAM,Be.PLAINTEXT,Be.PRE,Be.SCRIPT,Be.SECTION,Be.SELECT,Be.SOURCE,Be.STYLE,Be.SUMMARY,Be.TABLE,Be.TBODY,Be.TD,Be.TEMPLATE,Be.TEXTAREA,Be.TFOOT,Be.TH,Be.THEAD,Be.TITLE,Be.TR,Be.TRACK,Be.UL,Be.WBR,Be.XMP]),[Ae.MATHML]:new Set([Be.MI,Be.MO,Be.MN,Be.MS,Be.MTEXT,Be.ANNOTATION_XML]),[Ae.SVG]:new Set([Be.TITLE,Be.FOREIGN_OBJECT,Be.DESC]),[Ae.XLINK]:new Set,[Ae.XML]:new Set,[Ae.XMLNS]:new Set};function j$e(e){return e===Be.H1||e===Be.H2||e===Be.H3||e===Be.H4||e===Be.H5||e===Be.H6}me.STYLE,me.SCRIPT,me.XMP,me.IFRAME,me.NOEMBED,me.NOFRAMES,me.PLAINTEXT;const zAt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var X;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(X||(X={}));const Hi={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function QT(e){return e>=Y.DIGIT_0&&e<=Y.DIGIT_9}function YS(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_Z}function UAt(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_Z}function Em(e){return UAt(e)||YS(e)}function nV(e){return Em(e)||QT(e)}function z$e(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_F}function U$e(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_F}function VAt(e){return QT(e)||z$e(e)||U$e(e)}function TP(e){return e+32}function V$e(e){return e===Y.SPACE||e===Y.LINE_FEED||e===Y.TABULATION||e===Y.FORM_FEED}function HAt(e){return e===Y.EQUALS_SIGN||nV(e)}function xhe(e){return V$e(e)||e===Y.SOLIDUS||e===Y.GREATER_THAN_SIGN}class qAt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new OAt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:En.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:En.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:En.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:En.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(M$e(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(we.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=jE(t.tagName),t.type===En.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(we.endTagWithAttributes),t.selfClosing&&this._err(we.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case En.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case En.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case En.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:En.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=V$e(t)?En.WHITESPACE_CHARACTER:t===Y.NULL?En.NULL_CHARACTER:En.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(En.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=wm[0];s>=0&&(s=B$e(wm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=wm[s];const a=o&yd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Y.SEMICOLON&&this._isCharacterReferenceInAttribute()&&HAt(this.preprocessor.peek(1))?(n=[Y.AMPERSAND],s+=u):(n=u===0?[wm[s]&~yd.VALUE_LENGTH]:u===1?[wm[++s]]:[wm[++s],wm[++s]],r=0,i=t!==Y.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(we.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case X.DATA:{this._stateData(t);break}case X.RCDATA:{this._stateRcdata(t);break}case X.RAWTEXT:{this._stateRawtext(t);break}case X.SCRIPT_DATA:{this._stateScriptData(t);break}case X.PLAINTEXT:{this._statePlaintext(t);break}case X.TAG_OPEN:{this._stateTagOpen(t);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case X.TAG_NAME:{this._stateTagName(t);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case X.BOGUS_COMMENT:{this._stateBogusComment(t);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case X.COMMENT_START:{this._stateCommentStart(t);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case X.COMMENT:{this._stateComment(t);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case X.COMMENT_END:{this._stateCommentEnd(t);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case X.DOCTYPE:{this._stateDoctype(t);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case X.CDATA_SECTION:{this._stateCdataSection(t);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case X.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case X.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case X.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case X.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case Y.AMPERSAND:{this.returnState=X.DATA,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitCodePoint(t);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Y.AMPERSAND:{this.returnState=X.RCDATA,this.state=X.CHARACTER_REFERENCE;break}case Y.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Em(t))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case Y.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case Y.QUESTION_MARK:{this._err(we.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t);break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Em(t))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.GREATER_THAN_SIGN:{this._err(we.missingEndTagName),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.tagName+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(YS(t)?TP(t):t)}}_stateRcdataLessThanSign(t){t===Y.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Em(t)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case Y.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case Y.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Y.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Em(t)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Y.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case Y.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Em(t)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Y.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Em(t)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Em(t)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ua.SCRIPT,!1)&&xhe(this.preprocessor.peek(Ua.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ua.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Y.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ua.SCRIPT,!1)&&xhe(this.preprocessor.peek(Ua.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ua.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._err(we.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:{this._err(we.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.name+=ai;break}default:this.currentAttr.name+=String.fromCodePoint(YS(t)?TP(t):t)}}_stateAfterAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_UNQUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:case Y.EQUALS_SIGN:case Y.GRAVE_ACCENT:{this._err(we.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Y.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ai;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ua.DASH_DASH,!0)?(this._createCommentToken(Ua.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(Ua.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ua.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(Ua.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(we.cdataInHtmlContent),this._createCommentToken(Ua.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(we.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case Y.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ai;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Y.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Y.GREATER_THAN_SIGN&&t!==Y.EOF&&this._err(we.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case Y.HYPHEN_MINUS:{n.data+="-";break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(YS(t))this._createDoctypeToken(String.fromCharCode(TP(t))),this.state=X.DOCTYPE_NAME;else switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.NULL:{this._err(we.unexpectedNullCharacter),this._createDoctypeToken(ai),this.state=X.DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.name+=ai;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(YS(t)?TP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ua.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ua.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(we.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.NULL:{this._err(we.unexpectedNullCharacter);break}case Y.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Y.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case Y.EOF:{this._err(we.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Y.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA;break}case Y.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Y.NUMBER_SIGN?this.state=X.NUMERIC_CHARACTER_REFERENCE:nV(t)?(this.state=X.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this.state=X.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){nV(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Y.SEMICOLON&&this._err(we.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Y.LATIN_SMALL_X||t===Y.LATIN_CAPITAL_X?this.state=X.HEXADEMICAL_CHARACTER_REFERENCE_START:QT(t)?(this.state=X.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){VAt(t)?(this.state=X.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){z$e(t)?this.charRefCode=this.charRefCode*16+t-55:U$e(t)?this.charRefCode=this.charRefCode*16+t-87:QT(t)?this.charRefCode=this.charRefCode*16+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){QT(t)?this.charRefCode=this.charRefCode*10+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Y.NULL)this._err(we.nullCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(we.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(N$e(this.charRefCode))this._err(we.surrogateCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(L$e(this.charRefCode))this._err(we.noncharacterCharacterReference);else if(D$e(this.charRefCode)||this.charRefCode===Y.CARRIAGE_RETURN){this._err(we.controlCharacterReference);const n=zAt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const H$e=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),She=new Set([...H$e,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),AP=new Map([[T.APPLET,Ae.HTML],[T.CAPTION,Ae.HTML],[T.HTML,Ae.HTML],[T.MARQUEE,Ae.HTML],[T.OBJECT,Ae.HTML],[T.TABLE,Ae.HTML],[T.TD,Ae.HTML],[T.TEMPLATE,Ae.HTML],[T.TH,Ae.HTML],[T.ANNOTATION_XML,Ae.MATHML],[T.MI,Ae.MATHML],[T.MN,Ae.MATHML],[T.MO,Ae.MATHML],[T.MS,Ae.MATHML],[T.MTEXT,Ae.MATHML],[T.DESC,Ae.SVG],[T.FOREIGN_OBJECT,Ae.SVG],[T.TITLE,Ae.SVG]]),WAt=[T.H1,T.H2,T.H3,T.H4,T.H5,T.H6],GAt=[T.TR,T.TEMPLATE,T.HTML],YAt=[T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML],KAt=[T.TABLE,T.TEMPLATE,T.HTML],XAt=[T.TD,T.TH];class QAt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ae.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ae.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(WAt,Ae.HTML)}popUntilTableCellPopped(){this.popUntilPopped(XAt,Ae.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(KAt,Ae.HTML)}clearBackToTableBodyContext(){this.clearBackTo(YAt,Ae.HTML)}clearBackToTableRowContext(){this.clearBackTo(GAt,Ae.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if(AP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(j$e(n)&&r===Ae.HTML)return!0;if(AP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if((r===T.UL||r===T.OL)&&i===Ae.HTML||AP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if(r===T.BUTTON&&i===Ae.HTML||AP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ae.HTML){if(r===t)return!0;if(r===T.TABLE||r===T.TEMPLATE||r===T.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ae.HTML){if(n===T.TBODY||n===T.THEAD||n===T.TFOOT)return!0;if(n===T.TABLE||n===T.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ae.HTML){if(r===t)return!0;if(r!==T.OPTION&&r!==T.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;H$e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;She.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&She.has(this.currentTagId);)this.pop()}}const gB=3;var zc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(zc=zc||(zc={}));const The={type:zc.Marker};class JAt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===zc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<gB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<gB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=gB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(The)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:zc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:zc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(The);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===zc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===zc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===zc.Element&&n.element===t)}}function Ahe(e){return{nodeName:"#text",value:e,parentNode:null}}const R_={createDocument(){return{nodeName:"#document",mode:ju.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};R_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(R_.isTextNode(n)){n.value+=t;return}}R_.appendChild(e,Ahe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&R_.isTextNode(r)?r.value+=t:R_.insertBefore(e,Ahe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},q$e="html",ZAt="about:legacy-compat",eCt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",W$e=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],tCt=[...W$e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],nCt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),G$e=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],rCt=[...G$e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Che(e,t){return t.some(n=>e.startsWith(n))}function iCt(e){return e.name===q$e&&e.publicId===null&&(e.systemId===null||e.systemId===ZAt)}function sCt(e){if(e.name!==q$e)return ju.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===eCt)return ju.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),nCt.has(n))return ju.QUIRKS;let r=t===null?tCt:W$e;if(Che(n,r))return ju.QUIRKS;if(r=t===null?G$e:rCt,Che(n,r))return ju.LIMITED_QUIRKS}return ju.NO_QUIRKS}const Ihe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},oCt="definitionurl",aCt="definitionURL",uCt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),lCt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ae.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ae.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ae.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ae.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ae.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ae.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ae.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ae.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ae.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ae.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ae.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ae.XMLNS}]]),cCt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),fCt=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function dCt(e){const t=e.tagID;return t===T.FONT&&e.attrs.some(({name:r})=>r===Tg.COLOR||r===Tg.SIZE||r===Tg.FACE)||fCt.has(t)}function Y$e(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===oCt){e.attrs[t].name=aCt;break}}function K$e(e){for(let t=0;t<e.attrs.length;t++){const n=uCt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function lX(e){for(let t=0;t<e.attrs.length;t++){const n=lCt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function hCt(e){const t=cCt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=jE(e.tagName))}function pCt(e,t){return t===Ae.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function mCt(e,t,n){if(t===Ae.MATHML&&e===T.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Tg.ENCODING){const i=n[r].value.toLowerCase();return i===Ihe.TEXT_HTML||i===Ihe.APPLICATION_XML}}return t===Ae.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function gCt(e,t,n,r){return(!r||r===Ae.HTML)&&mCt(e,t,n)||(!r||r===Ae.MATHML)&&pCt(e,t)}const yCt="hidden",vCt=8,_Ct=3;var ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const bCt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},X$e=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),Ohe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:R_,onParseError:null};let Phe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Ohe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new qAt(this.options,this),this.activeFormattingElements=new JAt(this.treeAdapter),this.fragmentContextID=r?jE(this.treeAdapter.getTagName(r)):T.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new QAt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Ohe,...n};t??(t=r.treeAdapter.createElement(me.TEMPLATE,Ae.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ae.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===T.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:bCt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ae.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ae.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=Hi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===me.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ae.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=Hi.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=Hi.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=Hi.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=Hi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ae.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ae.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(me.HTML,Ae.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,T.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===En.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===T.SVG&&this.treeAdapter.getTagName(n)===me.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ae.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===T.MGLYPH||t.tagID===T.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ae.HTML)}_processToken(t){switch(t.type){case En.CHARACTER:{this.onCharacter(t);break}case En.NULL_CHARACTER:{this.onNullCharacter(t);break}case En.COMMENT:{this.onComment(t);break}case En.DOCTYPE:{this.onDoctype(t);break}case En.START_TAG:{this._processStartTag(t);break}case En.END_TAG:{this.onEndTag(t);break}case En.EOF:{this.onEof(t);break}case En.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return gCt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===zc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case T.TR:{this.insertionMode=ee.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=ee.IN_TABLE;return}case T.BODY:{this.insertionMode=ee.IN_BODY;return}case T.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(t);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case T.TD:case T.TH:{if(t>0){this.insertionMode=ee.IN_CELL;return}break}case T.HEAD:{if(t>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===T.TEMPLATE)break;if(r===T.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(t){return X$e.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ae.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case T.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return jAt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){XIt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{JT(this,t);break}case ee.BEFORE_HEAD:{ZT(this,t);break}case ee.IN_HEAD:{e2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{t2(this,t);break}case ee.AFTER_HEAD:{n2(this,t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{J$e(this,t);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{yB(this,t);break}case ee.IN_TABLE_TEXT:{iRe(this,t);break}case ee.IN_COLUMN_GROUP:{BD(this,t);break}case ee.AFTER_BODY:{jD(this,t);break}case ee.AFTER_AFTER_BODY:{s$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){KIt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{JT(this,t);break}case ee.BEFORE_HEAD:{ZT(this,t);break}case ee.IN_HEAD:{e2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{t2(this,t);break}case ee.AFTER_HEAD:{n2(this,t);break}case ee.TEXT:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{yB(this,t);break}case ee.IN_COLUMN_GROUP:{BD(this,t);break}case ee.AFTER_BODY:{jD(this,t);break}case ee.AFTER_AFTER_BODY:{s$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){rV(this,t);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{rV(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.AFTER_BODY:{CCt(this,t);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{ICt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{OCt(this,t);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(t,we.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,we.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?QIt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{PCt(this,t);break}case ee.BEFORE_HEAD:{$Ct(this,t);break}case ee.IN_HEAD:{xf(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{DCt(this,t);break}case ee.AFTER_HEAD:{MCt(this,t);break}case ee.IN_BODY:{sa(this,t);break}case ee.IN_TABLE:{bw(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.IN_CAPTION:{RIt(this,t);break}case ee.IN_COLUMN_GROUP:{dX(this,t);break}case ee.IN_TABLE_BODY:{w4(this,t);break}case ee.IN_ROW:{E4(this,t);break}case ee.IN_CELL:{LIt(this,t);break}case ee.IN_SELECT:{aRe(this,t);break}case ee.IN_SELECT_IN_TABLE:{FIt(this,t);break}case ee.IN_TEMPLATE:{jIt(this,t);break}case ee.AFTER_BODY:{UIt(this,t);break}case ee.IN_FRAMESET:{VIt(this,t);break}case ee.AFTER_FRAMESET:{qIt(this,t);break}case ee.AFTER_AFTER_BODY:{GIt(this,t);break}case ee.AFTER_AFTER_FRAMESET:{YIt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?JIt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{kCt(this,t);break}case ee.BEFORE_HEAD:{RCt(this,t);break}case ee.IN_HEAD:{NCt(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{LCt(this,t);break}case ee.AFTER_HEAD:{FCt(this,t);break}case ee.IN_BODY:{b4(this,t);break}case ee.TEXT:{xIt(this,t);break}case ee.IN_TABLE:{CA(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.IN_CAPTION:{NIt(this,t);break}case ee.IN_COLUMN_GROUP:{DIt(this,t);break}case ee.IN_TABLE_BODY:{iV(this,t);break}case ee.IN_ROW:{oRe(this,t);break}case ee.IN_CELL:{MIt(this,t);break}case ee.IN_SELECT:{uRe(this,t);break}case ee.IN_SELECT_IN_TABLE:{BIt(this,t);break}case ee.IN_TEMPLATE:{zIt(this,t);break}case ee.AFTER_BODY:{cRe(this,t);break}case ee.IN_FRAMESET:{HIt(this,t);break}case ee.AFTER_FRAMESET:{WIt(this,t);break}case ee.AFTER_AFTER_BODY:{s$(this,t);break}}}onEof(t){switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{JT(this,t);break}case ee.BEFORE_HEAD:{ZT(this,t);break}case ee.IN_HEAD:{e2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{t2(this,t);break}case ee.AFTER_HEAD:{n2(this,t);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{nRe(this,t);break}case ee.TEXT:{SIt(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.IN_TEMPLATE:{lRe(this,t);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{fX(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Y.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{Q$e(this,t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{yB(this,t);break}case ee.IN_TABLE_TEXT:{rRe(this,t);break}}}};function wCt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):tRe(e,t),n}function ECt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function xCt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=_Ct;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=SCt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function SCt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function TCt(e,t,n){const r=e.treeAdapter.getTagName(t),i=jE(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===T.TEMPLATE&&s===Ae.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function ACt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function cX(e,t){for(let n=0;n<vCt;n++){const r=wCt(e,t);if(!r)break;const i=ECt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=xCt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&TCt(e,o,s),ACt(e,i,r)}}function rV(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function CCt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function ICt(e,t){e._appendCommentNode(t,e.document)}function fX(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function OCt(e,t){e._setDocumentType(t);const n=t.forceQuirks?ju.QUIRKS:sCt(t);iCt(t)||e._err(t,we.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ee.BEFORE_HTML}function Zx(e,t){e._err(t,we.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,ju.QUIRKS),e.insertionMode=ee.BEFORE_HTML,e._processToken(t)}function PCt(e,t){t.tagID===T.HTML?(e._insertElement(t,Ae.HTML),e.insertionMode=ee.BEFORE_HEAD):JT(e,t)}function kCt(e,t){const n=t.tagID;(n===T.HTML||n===T.HEAD||n===T.BODY||n===T.BR)&&JT(e,t)}function JT(e,t){e._insertFakeRootElement(),e.insertionMode=ee.BEFORE_HEAD,e._processToken(t)}function $Ct(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.HEAD:{e._insertElement(t,Ae.HTML),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD;break}default:ZT(e,t)}}function RCt(e,t){const n=t.tagID;n===T.HEAD||n===T.BODY||n===T.HTML||n===T.BR?ZT(e,t):e._err(t,we.endTagWithoutMatchingOpenElement)}function ZT(e,t){e._insertFakeElement(me.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD,e._processToken(t)}function xf(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,Hi.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Hi.RAWTEXT):(e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,Hi.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,Hi.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:e2(e,t)}}function NCt(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{e2(e,t);break}case T.TEMPLATE:{kv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function kv(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,we.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,we.endTagWithoutMatchingOpenElement)}function e2(e,t){e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD,e._processToken(t)}function DCt(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{xf(e,t);break}case T.NOSCRIPT:{e._err(t,we.nestedNoscriptInHead);break}default:t2(e,t)}}function LCt(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ee.IN_HEAD;break}case T.BR:{t2(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function t2(e,t){const n=t.type===En.EOF?we.openElementsLeftAfterEof:we.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ee.IN_HEAD,e._processToken(t)}function MCt(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.BODY:{e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,we.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),xf(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:n2(e,t)}}function FCt(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{n2(e,t);break}case T.TEMPLATE:{kv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function n2(e,t){e._insertFakeElement(me.BODY,T.BODY),e.insertionMode=ee.IN_BODY,_4(e,t)}function _4(e,t){switch(t.type){case En.CHARACTER:{J$e(e,t);break}case En.WHITESPACE_CHARACTER:{Q$e(e,t);break}case En.COMMENT:{rV(e,t);break}case En.START_TAG:{sa(e,t);break}case En.END_TAG:{b4(e,t);break}case En.EOF:{nRe(e,t);break}}}function Q$e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function J$e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function BCt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function jCt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function zCt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_FRAMESET)}function UCt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML)}function VCt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),j$e(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ae.HTML)}function HCt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function qCt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),n||(e.formElement=e.openElements.current))}function WCt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===T.LI&&i===T.LI||(n===T.DD||n===T.DT)&&(i===T.DD||i===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==T.ADDRESS&&i!==T.DIV&&i!==T.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML)}function GCt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.tokenizer.state=Hi.PLAINTEXT}function YCt(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.framesetOk=!1}function KCt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(me.A);n&&(cX(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function XCt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function QCt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(cX(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function JCt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function ZCt(e,t){e.treeAdapter.getDocumentMode(e.document)!==ju.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_TABLE}function Z$e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ae.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function eRe(e){const t=M$e(e,Tg.TYPE);return t!=null&&t.toLowerCase()===yCt}function eIt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ae.HTML),eRe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function tIt(e,t){e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0}function nIt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,Ae.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function rIt(e,t){t.tagName=me.IMG,t.tagID=T.IMG,Z$e(e,t)}function iIt(e,t){e._insertElement(t,Ae.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Hi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ee.TEXT}function sIt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function oIt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function khe(e,t){e._switchToTextParsing(t,Hi.RAWTEXT)}function aIt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ee.IN_TABLE||e.insertionMode===ee.IN_CAPTION||e.insertionMode===ee.IN_TABLE_BODY||e.insertionMode===ee.IN_ROW||e.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function uIt(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML)}function lIt(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ae.HTML)}function cIt(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,Ae.HTML)}function fIt(e,t){e._reconstructActiveFormattingElements(),Y$e(t),lX(t),t.selfClosing?e._appendElement(t,Ae.MATHML):e._insertElement(t,Ae.MATHML),t.ackSelfClosing=!0}function dIt(e,t){e._reconstructActiveFormattingElements(),K$e(t),lX(t),t.selfClosing?e._appendElement(t,Ae.SVG):e._insertElement(t,Ae.SVG),t.ackSelfClosing=!0}function $he(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML)}function sa(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{XCt(e,t);break}case T.A:{KCt(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{VCt(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{UCt(e,t);break}case T.LI:case T.DD:case T.DT:{WCt(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{Z$e(e,t);break}case T.HR:{nIt(e,t);break}case T.RB:case T.RTC:{lIt(e,t);break}case T.RT:case T.RP:{cIt(e,t);break}case T.PRE:case T.LISTING:{HCt(e,t);break}case T.XMP:{sIt(e,t);break}case T.SVG:{dIt(e,t);break}case T.HTML:{BCt(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{xf(e,t);break}case T.BODY:{jCt(e,t);break}case T.FORM:{qCt(e,t);break}case T.NOBR:{QCt(e,t);break}case T.MATH:{fIt(e,t);break}case T.TABLE:{ZCt(e,t);break}case T.INPUT:{eIt(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{tIt(e,t);break}case T.IMAGE:{rIt(e,t);break}case T.BUTTON:{YCt(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{JCt(e,t);break}case T.IFRAME:{oIt(e,t);break}case T.SELECT:{aIt(e,t);break}case T.OPTION:case T.OPTGROUP:{uIt(e,t);break}case T.NOEMBED:{khe(e,t);break}case T.FRAMESET:{zCt(e,t);break}case T.TEXTAREA:{iIt(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?khe(e,t):$he(e,t);break}case T.PLAINTEXT:{GCt(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:$he(e,t)}}function hIt(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function pIt(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,cRe(e,t))}function mIt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function gIt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):n&&e.openElements.remove(n))}function yIt(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(me.P,T.P),e._closePElement()}function vIt(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function _It(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function bIt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function wIt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function EIt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(me.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function tRe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==T.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function b4(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{cX(e,t);break}case T.P:{yIt(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{mIt(e,t);break}case T.LI:{vIt(e);break}case T.DD:case T.DT:{_It(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{bIt(e);break}case T.BR:{EIt(e);break}case T.BODY:{hIt(e,t);break}case T.HTML:{pIt(e,t);break}case T.FORM:{gIt(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{wIt(e,t);break}case T.TEMPLATE:{kv(e,t);break}default:tRe(e,t)}}function nRe(e,t){e.tmplInsertionModeStack.length>0?lRe(e,t):fX(e,t)}function xIt(e,t){var n;t.tagID===T.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function SIt(e,t){e._err(t,we.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function yB(e,t){if(X$e.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ee.IN_TABLE_TEXT,t.type){case En.CHARACTER:{iRe(e,t);break}case En.WHITESPACE_CHARACTER:{rRe(e,t);break}}else mI(e,t)}function TIt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_CAPTION}function AIt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_COLUMN_GROUP}function CIt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.COLGROUP,T.COLGROUP),e.insertionMode=ee.IN_COLUMN_GROUP,dX(e,t)}function IIt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_TABLE_BODY}function OIt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.TBODY,T.TBODY),e.insertionMode=ee.IN_TABLE_BODY,w4(e,t)}function PIt(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function kIt(e,t){eRe(t)?e._appendElement(t,Ae.HTML):mI(e,t),t.ackSelfClosing=!0}function $It(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ae.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function bw(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{OIt(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{xf(e,t);break}case T.COL:{CIt(e,t);break}case T.FORM:{$It(e,t);break}case T.TABLE:{PIt(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{IIt(e,t);break}case T.INPUT:{kIt(e,t);break}case T.CAPTION:{TIt(e,t);break}case T.COLGROUP:{AIt(e,t);break}default:mI(e,t)}}function CA(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{kv(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:mI(e,t)}}function mI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,_4(e,t),e.fosterParentingEnabled=n}function rRe(e,t){e.pendingCharacterTokens.push(t)}function iRe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function eS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)mI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const sRe=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function RIt(e,t){const n=t.tagID;sRe.has(n)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,bw(e,t)):sa(e,t)}function NIt(e,t){const n=t.tagID;switch(n){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,n===T.TABLE&&CA(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:b4(e,t)}}function dX(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.COL:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{xf(e,t);break}default:BD(e,t)}}function DIt(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TEMPLATE:{kv(e,t);break}case T.COL:break;default:BD(e,t)}}function BD(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE,e._processToken(t))}function w4(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(me.TR,T.TR),e.insertionMode=ee.IN_ROW,E4(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,bw(e,t));break}default:bw(e,t)}}function iV(e,t){const n=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,CA(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:CA(e,t)}}function E4(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,w4(e,t));break}default:bw(e,t)}}function oRe(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,iV(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,iV(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:CA(e,t)}}function LIt(e,t){const n=t.tagID;sRe.has(n)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),E4(e,t)):sa(e,t)}function MIt(e,t){const n=t.tagID;switch(n){case T.TD:case T.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),oRe(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:b4(e,t)}}function aRe(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,Ae.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ae.HTML);break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{xf(e,t);break}}}function uRe(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{kv(e,t);break}}}function FIt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):aRe(e,t)}function BIt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):uRe(e,t)}function jIt(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{xf(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=ee.IN_TABLE,e.insertionMode=ee.IN_TABLE,bw(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,e.insertionMode=ee.IN_COLUMN_GROUP,dX(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,e.insertionMode=ee.IN_TABLE_BODY,w4(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=ee.IN_ROW,e.insertionMode=ee.IN_ROW,E4(e,t);break}default:e.tmplInsertionModeStack[0]=ee.IN_BODY,e.insertionMode=ee.IN_BODY,sa(e,t)}}function zIt(e,t){t.tagID===T.TEMPLATE&&kv(e,t)}function lRe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):fX(e,t)}function UIt(e,t){t.tagID===T.HTML?sa(e,t):jD(e,t)}function cRe(e,t){var n;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else jD(e,t)}function jD(e,t){e.insertionMode=ee.IN_BODY,_4(e,t)}function VIt(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.FRAMESET:{e._insertElement(t,Ae.HTML);break}case T.FRAME:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{xf(e,t);break}}}function HIt(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=ee.AFTER_FRAMESET))}function qIt(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.NOFRAMES:{xf(e,t);break}}}function WIt(e,t){t.tagID===T.HTML&&(e.insertionMode=ee.AFTER_AFTER_FRAMESET)}function GIt(e,t){t.tagID===T.HTML?sa(e,t):s$(e,t)}function s$(e,t){e.insertionMode=ee.IN_BODY,_4(e,t)}function YIt(e,t){switch(t.tagID){case T.HTML:{sa(e,t);break}case T.NOFRAMES:{xf(e,t);break}}}function KIt(e,t){t.chars=ai,e._insertCharacters(t)}function XIt(e,t){e._insertCharacters(t),e.framesetOk=!1}function fRe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ae.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function QIt(e,t){if(dCt(t))fRe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ae.MATHML?Y$e(t):r===Ae.SVG&&(hCt(t),K$e(t)),lX(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function JIt(e,t){if(t.tagID===T.P||t.tagID===T.BR){fRe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ae.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}me.AREA,me.BASE,me.BASEFONT,me.BGSOUND,me.BR,me.COL,me.EMBED,me.FRAME,me.HR,me.IMG,me.INPUT,me.KEYGEN,me.LINK,me.META,me.PARAM,me.SOURCE,me.TRACK,me.WBR;const dRe=hRe("end"),$v=hRe("start");function hRe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const pRe=function(e){if(e==null)return nOt;if(typeof e=="function")return x4(e);if(typeof e=="object")return Array.isArray(e)?ZIt(e):eOt(e);if(typeof e=="string")return tOt(e);throw new Error("Expected function, string, or object as test")};function ZIt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=pRe(e[n]);return x4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function eOt(e){const t=e;return x4(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function tOt(e){return x4(t);function t(n){return n&&n.type===e}}function x4(e){return t;function t(n,r,i){return!!(rOt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function nOt(){return!0}function rOt(e){return e!==null&&typeof e=="object"&&"type"in e}const mRe=[],iOt=!0,Rhe=!1,sOt="skip";function oOt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=pRe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=mRe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=aOt(n(u,c)),h[0]===Rhe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==sOt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Rhe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function aOt(e){return Array.isArray(e)?e:typeof e=="number"?[iOt,e]:e==null?mRe:[e]}function uOt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),oOt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const lOt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Nhe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function gRe(e,t){const n=_Ot(e),r=$$e("type",{handlers:{root:cOt,element:fOt,text:dOt,comment:vRe,doctype:hOt,raw:mOt},unknown:gOt}),i={parser:n?new Phe(Nhe):Phe.getFragmentParser(void 0,Nhe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),zE(i,$v());const s=n?i.parser.document:i.parser.getFragment(),o=fAt(s,{file:i.options.file});return i.stitches&&uOt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function yRe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function cOt(e,t){yRe(e.children,t)}function fOt(e,t){yOt(e,t),yRe(e.children,t),vOt(e,t)}function dOt(e,t){const n={type:En.CHARACTER,chars:e.value,location:gI(e)};zE(t,$v(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function hOt(e,t){const n={type:En.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:gI(e)};zE(t,$v(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function pOt(e,t){t.stitches=!0;const n=bOt(e);if("children"in e&&"children"in n){const r=gRe({type:"root",children:e.children},t.options);n.children=r.children}vRe({type:"comment",value:{stitch:n}},t)}function vRe(e,t){const n=e.value,r={type:En.COMMENT,data:n,location:gI(e)};zE(t,$v(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function mOt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,_Re(t,$v(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function gOt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))pOt(n,t);else{let r="";throw lOt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function zE(e,t){_Re(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Hi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function _Re(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function yOt(e,t){if(t.parser.tokenizer.state===Hi.PLAINTEXT)return;zE(t,$v(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:Gy.html;r===Gy.html&&e.tagName==="svg"&&(r=Gy.svg);const i=gAt({...e,children:[]},{space:r===Gy.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:En.START_TAG,tagName:e.tagName,tagID:jE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:gI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function vOt(e,t){if(!t.parser.tokenizer.inForeignNode&&SAt.includes(e.tagName)||t.parser.tokenizer.state===Hi.PLAINTEXT)return;zE(t,dRe(e));const n={type:En.END_TAG,tagName:e.tagName,tagID:jE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:gI(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Hi.RCDATA||t.parser.tokenizer.state===Hi.RAWTEXT||t.parser.tokenizer.state===Hi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Hi.DATA)}function _Ot(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function gI(e){const t=$v(e)||{line:void 0,column:void 0,offset:void 0},n=dRe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function bOt(e){return"children"in e?vhe({...e,children:[]}):vhe(e)}function wOt(e){return function(t,n){return gRe(t,{...e,file:n})}}function gu({text:e}){const t={img:({node:n,...r})=>R.jsx(Sv,{...r}),p:({node:n,...r})=>R.jsx(Ot,{...r,pb:8}),h1:({node:n,...r})=>R.jsx(jc,{order:1,...r,pb:12}),h2:({node:n,...r})=>R.jsx(jc,{order:2,...r,pb:12}),h3:({node:n,...r})=>R.jsx(jc,{order:3,...r,pb:12}),h4:({node:n,...r})=>R.jsx(jc,{order:4,...r,pb:12}),h5:({node:n,...r})=>R.jsx(jc,{order:5,...r,pb:12}),h6:({node:n,...r})=>R.jsx(jc,{order:6,...r,pb:12}),a:({node:n,...r})=>R.jsx(Yxe,{...r}),ul:({node:n,...r})=>R.jsx(fw,{withPadding:!0,...r,pb:8}),ol:({node:n,...r})=>R.jsx(fw,{type:"ordered",withPadding:!0,...r,pb:8})};return R.jsx("div",{style:{display:"inherit"},children:R.jsx(T$e,{components:t,rehypePlugins:[wOt],children:e})})}function EOt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return R.jsx(wN.Group,{label:R.jsx(gu,{text:r}),withAsterisk:i,...n,error:Ov(e,n,s),size:"md",children:R.jsx(Jl,{mt:"md",children:s.map(o=>R.jsx(wN,{disabled:t,value:o.value,label:o.label},o.value))})})}function xOt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return R.jsx(JAe,{disabled:t,label:R.jsx(gu,{text:i}),placeholder:r,data:o,withAsterisk:s,radius:"md",size:"md",...n,error:Ov(e,n,o)})}function SOt({response:e,answer:t}){const{prompt:n}=e;return R.jsxs(R.Fragment,{children:[R.jsx(Ot,{fz:"md",fw:500,children:R.jsx(gu,{text:n})}),R.jsx(fw,{children:Array.isArray(t.value)&&t.value.map(r=>R.jsx(fw.Item,{children:r},r))})]})}function bRe({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return R.jsxs(QN.Group,{name:`radioInput${e.id}`,label:R.jsx(gu,{text:r}),withAsterisk:i,size:"md",...n,error:Ov(e,n,s),children:[o?R.jsx(Ot,{children:o}):null,R.jsx(Jl,{mt:"xs",children:s.map(u=>R.jsx(QN,{disabled:t,value:u.value,label:u.label},u.label))}),R.jsx(Ot,{children:a})]},e.id)}function TOt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return R.jsx(bRe,{disabled:t,response:s,answer:n})}function AOt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return R.jsx(AAe,{disabled:t,placeholder:a,label:R.jsx(gu,{text:r}),withAsterisk:i,radius:"md",size:"md",min:s,max:o,...n,error:Ov(e,n)})}function COt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=Ov(e,n);return R.jsx(is.Wrapper,{withAsterisk:i,label:R.jsx(gu,{text:r}),error:o,size:"md",children:R.jsx(sY,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function IOt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(nY,{disabled:t,placeholder:r,label:R.jsx(gu,{text:i}),radius:"md",size:"md",withAsterisk:s,...n,value:n.value||"",error:Ov(e,n)})}function OOt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(P2e,{disabled:t,placeholder:r,label:R.jsx(gu,{text:i}),radius:"md",size:"md",withAsterisk:s,...n,value:n.value||"",error:Ov(e,n)})}function POt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=bG(),o=A.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return R.jsxs(At,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&R.jsx(AOt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&R.jsx(IOt,{response:e,disabled:o,answer:r}),e.type==="longText"&&R.jsx(OOt,{response:e,disabled:o,answer:r}),e.type==="likert"&&R.jsx(TOt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&R.jsx(xOt,{response:e,disabled:o,answer:r}),e.type==="slider"&&R.jsx(COt,{response:e,disabled:o,answer:r}),e.type==="radio"&&R.jsx(bRe,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&R.jsx(EOt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&R.jsx(SOt,{response:e,answer:r})]})}function zD({config:e,location:t,status:n,style:r}){var y,v;const i=dc(),s=oh()[i],o=n==null?void 0:n.answer,a=e,u=((y=a==null?void 0:a.response)==null?void 0:y.filter(_=>_.location?_.location===t:t==="belowStimulus"))||[],l=Qp(),{updateResponseBlockValidation:c}=Xp(),f=UEt(u,i,o||{}),[d,h]=A.useState(!1),{iframeAnswers:p}=Ef(_=>_),m=(((v=a==null?void 0:a.correctAnswer)==null?void 0:v.length)||0)>0,g=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return A.useEffect(()=>{const _=u.find(b=>b.type==="iframe");if(_){const b=_.id;f.setValues({...f.values,[b]:p})}},[p]),A.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:h1(f.values)}))},[f.values,i,t]),R.jsxs("div",{style:r,children:[u.map(_=>{var b,E;return R.jsx(L.Fragment,{children:_.hidden?"":R.jsxs(R.Fragment,{children:[R.jsx(POt,{storedAnswer:o?o[_.id]:void 0,answer:{...f.getInputProps(_.id,{type:_.type==="checkbox"?"checkbox":"input"})},response:_}),m&&d&&R.jsx(Ot,{children:`The correct answer is: ${(E=(b=a.correctAnswer)==null?void 0:b.find(w=>w.id===_.id))==null?void 0:E.answer}`})]})},`${_.id}-${i}`)}),R.jsxs(Jl,{position:"right",spacing:"xs",mt:"xl",children:[m&&g&&R.jsx(wa,{onClick:()=>h(!0),disabled:!f.isValid(),children:"Check Answer"}),g&&R.jsx(pEt,{disabled:m&&!d,setCheckClicked:h,label:a.nextButtonText||"Next"})]})]})}const CP="@REVISIT_COMMS",kOt={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function $Ot({currentConfig:e}){const{setIframeAnswers:t}=Xp(),n=Qp(),r=dke(),i=A.useRef(null),s=A.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),o=dc(),a=oh()[o],u=bv(),l=A.useCallback((c,f)=>{var d,h;(h=(d=i.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${CP}/${c}`,iframeId:s,message:f},"*")},[i,s]);return A.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&s===d.iframeId)switch(d.type){case`${CP}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${CP}/READY`:i.current&&(i.current.style.height=`${d.message.documentHeight}px`);break;case`${CP}/ANSWERS`:n(t(d.message.answer));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[n,o,r,s,u,e,l]),R.jsx("div",{children:R.jsx("iframe",{ref:i,src:`${cc}${e.path}?trialid=${a}&id=${s}`,style:kOt})})}const ROt={maxWidth:"100%"};function NOt({currentConfig:e}){const t={...ROt,...e.style};return R.jsx(Sv,{mx:"auto",src:`${cc}${e.path}`,style:t})}function Dhe(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Lhe extends Map{constructor(t,n=xRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(sV(this,t))}has(t){return super.has(sV(this,t))}set(t,n){return super.set(wRe(this,t),n)}delete(t){return super.delete(ERe(this,t))}}class UD extends Set{constructor(t,n=xRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(sV(this,t))}add(t){return super.add(wRe(this,t))}delete(t){return super.delete(ERe(this,t))}}function sV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function wRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function ERe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function xRe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function DOt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var LOt={value:()=>{}};function S4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new o$(n)}function o$(e){this._=e}function MOt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}o$.prototype=S4.prototype={constructor:o$,on:function(e,t){var n=this._,r=MOt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=FOt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Mhe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Mhe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new o$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function FOt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Mhe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=LOt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var oV="http://www.w3.org/1999/xhtml";const Fhe={svg:"http://www.w3.org/2000/svg",xhtml:oV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function T4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fhe.hasOwnProperty(t)?{space:Fhe[t],local:e}:e}function BOt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===oV&&t.documentElement.namespaceURI===oV?t.createElement(e):t.createElementNS(n,e)}}function jOt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function SRe(e){var t=T4(e);return(t.local?jOt:BOt)(t)}function zOt(){}function hX(e){return e==null?zOt:function(){return this.querySelector(e)}}function UOt(e){typeof e!="function"&&(e=hX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ca(r,this._parents)}function TRe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function VOt(){return[]}function ARe(e){return e==null?VOt:function(){return this.querySelectorAll(e)}}function HOt(e){return function(){return TRe(e.apply(this,arguments))}}function qOt(e){typeof e=="function"?e=HOt(e):e=ARe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ca(r,i)}function CRe(e){return function(){return this.matches(e)}}function IRe(e){return function(t){return t.matches(e)}}var WOt=Array.prototype.find;function GOt(e){return function(){return WOt.call(this.children,e)}}function YOt(){return this.firstElementChild}function KOt(e){return this.select(e==null?YOt:GOt(typeof e=="function"?e:IRe(e)))}var XOt=Array.prototype.filter;function QOt(){return Array.from(this.children)}function JOt(e){return function(){return XOt.call(this.children,e)}}function ZOt(e){return this.selectAll(e==null?QOt:JOt(typeof e=="function"?e:IRe(e)))}function ePt(e){typeof e!="function"&&(e=CRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ca(r,this._parents)}function ORe(e){return new Array(e.length)}function tPt(){return new Ca(this._enter||this._groups.map(ORe),this._parents)}function VD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}VD.prototype={constructor:VD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nPt(e){return function(){return e}}function rPt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new VD(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function iPt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new VD(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function sPt(e){return e.__data__}function oPt(e,t){if(!arguments.length)return Array.from(this,sPt);var n=t?iPt:rPt,r=this._parents,i=this._groups;typeof e!="function"&&(e=nPt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=aPt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,b,E;v<p;++v)if(b=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);b._next=E||null}}return o=new Ca(o,r),o._enter=a,o._exit=u,o}function aPt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uPt(){return new Ca(this._exit||this._groups.map(ORe),this._parents)}function lPt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function cPt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ca(a,this._parents)}function fPt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function dPt(e){e||(e=hPt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ca(i,this._parents).order()}function hPt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pPt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function mPt(){return Array.from(this)}function gPt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function yPt(){let e=0;for(const t of this)++e;return e}function vPt(){return!this.node()}function _Pt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function bPt(e){return function(){this.removeAttribute(e)}}function wPt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function EPt(e,t){return function(){this.setAttribute(e,t)}}function xPt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function SPt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function TPt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function APt(e,t){var n=T4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?wPt:bPt:typeof t=="function"?n.local?TPt:SPt:n.local?xPt:EPt)(n,t))}function PRe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function CPt(e){return function(){this.style.removeProperty(e)}}function IPt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function OPt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function PPt(e,t,n){return arguments.length>1?this.each((t==null?CPt:typeof t=="function"?OPt:IPt)(e,t,n??"")):ww(this.node(),e)}function ww(e,t){return e.style.getPropertyValue(t)||PRe(e).getComputedStyle(e,null).getPropertyValue(t)}function kPt(e){return function(){delete this[e]}}function $Pt(e,t){return function(){this[e]=t}}function RPt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function NPt(e,t){return arguments.length>1?this.each((t==null?kPt:typeof t=="function"?RPt:$Pt)(e,t)):this.node()[e]}function kRe(e){return e.trim().split(/^|\s+/)}function pX(e){return e.classList||new $Re(e)}function $Re(e){this._node=e,this._names=kRe(e.getAttribute("class")||"")}$Re.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function RRe(e,t){for(var n=pX(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function NRe(e,t){for(var n=pX(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function DPt(e){return function(){RRe(this,e)}}function LPt(e){return function(){NRe(this,e)}}function MPt(e,t){return function(){(t.apply(this,arguments)?RRe:NRe)(this,e)}}function FPt(e,t){var n=kRe(e+"");if(arguments.length<2){for(var r=pX(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?MPt:t?DPt:LPt)(n,t))}function BPt(){this.textContent=""}function jPt(e){return function(){this.textContent=e}}function zPt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function UPt(e){return arguments.length?this.each(e==null?BPt:(typeof e=="function"?zPt:jPt)(e)):this.node().textContent}function VPt(){this.innerHTML=""}function HPt(e){return function(){this.innerHTML=e}}function qPt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function WPt(e){return arguments.length?this.each(e==null?VPt:(typeof e=="function"?qPt:HPt)(e)):this.node().innerHTML}function GPt(){this.nextSibling&&this.parentNode.appendChild(this)}function YPt(){return this.each(GPt)}function KPt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function XPt(){return this.each(KPt)}function QPt(e){var t=typeof e=="function"?e:SRe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function JPt(){return null}function ZPt(e,t){var n=typeof e=="function"?e:SRe(e),r=t==null?JPt:typeof t=="function"?t:hX(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ekt(){var e=this.parentNode;e&&e.removeChild(this)}function tkt(){return this.each(ekt)}function nkt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rkt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ikt(e){return this.select(e?rkt:nkt)}function skt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function okt(e){return function(t){e.call(this,t,this.__data__)}}function akt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ukt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function lkt(e,t,n){return function(){var r=this.__on,i,s=okt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ckt(e,t,n){var r=akt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?lkt:ukt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function DRe(e,t,n){var r=PRe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fkt(e,t){return function(){return DRe(this,e,t)}}function dkt(e,t){return function(){return DRe(this,e,t.apply(this,arguments))}}function hkt(e,t){return this.each((typeof t=="function"?dkt:fkt)(e,t))}function*pkt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var mX=[null];function Ca(e,t){this._groups=e,this._parents=t}function yI(){return new Ca([[document.documentElement]],mX)}function mkt(){return this}Ca.prototype=yI.prototype={constructor:Ca,select:UOt,selectAll:qOt,selectChild:KOt,selectChildren:ZOt,filter:ePt,data:oPt,enter:tPt,exit:uPt,join:lPt,merge:cPt,selection:mkt,order:fPt,sort:dPt,call:pPt,nodes:mPt,node:gPt,size:yPt,empty:vPt,each:_Pt,attr:APt,style:PPt,property:NPt,classed:FPt,text:UPt,html:WPt,raise:YPt,lower:XPt,append:QPt,insert:ZPt,remove:tkt,clone:ikt,datum:skt,on:ckt,dispatch:hkt,[Symbol.iterator]:pkt};function Qi(e){return typeof e=="string"?new Ca([[document.querySelector(e)]],[document.documentElement]):new Ca([[e]],mX)}function gkt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function aV(e,t){if(e=gkt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function ykt(e){return typeof e=="string"?new Ca([document.querySelectorAll(e)],[document.documentElement]):new Ca([TRe(e)],mX)}const uV={capture:!0,passive:!1};function lV(e){e.preventDefault(),e.stopImmediatePropagation()}function vkt(e){var t=e.document.documentElement,n=Qi(e).on("dragstart.drag",lV,uV);"onselectstart"in t?n.on("selectstart.drag",lV,uV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _kt(e,t){var n=e.document.documentElement,r=Qi(e).on("dragstart.drag",null);t&&(r.on("click.drag",lV,uV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function UE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function k0(){}var z1=.7,Ew=1/z1,Fb="\\s*([+-]?\\d+)\\s*",IA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bkt=/^#([0-9a-f]{3,8})$/,wkt=new RegExp(`^rgb\\(${Fb},${Fb},${Fb}\\)$`),Ekt=new RegExp(`^rgb\\(${kd},${kd},${kd}\\)$`),xkt=new RegExp(`^rgba\\(${Fb},${Fb},${Fb},${IA}\\)$`),Skt=new RegExp(`^rgba\\(${kd},${kd},${kd},${IA}\\)$`),Tkt=new RegExp(`^hsl\\(${IA},${kd},${kd}\\)$`),Akt=new RegExp(`^hsla\\(${IA},${kd},${kd},${IA}\\)$`),Bhe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UE(k0,U1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jhe,formatHex:jhe,formatHex8:Ckt,formatHsl:Ikt,formatRgb:zhe,toString:zhe});function jhe(){return this.rgb().formatHex()}function Ckt(){return this.rgb().formatHex8()}function Ikt(){return LRe(this).formatHsl()}function zhe(){return this.rgb().formatRgb()}function U1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bkt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Uhe(t):n===3?new Fs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?IP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?IP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wkt.exec(e))?new Fs(t[1],t[2],t[3],1):(t=Ekt.exec(e))?new Fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xkt.exec(e))?IP(t[1],t[2],t[3],t[4]):(t=Skt.exec(e))?IP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tkt.exec(e))?qhe(t[1],t[2]/100,t[3]/100,1):(t=Akt.exec(e))?qhe(t[1],t[2]/100,t[3]/100,t[4]):Bhe.hasOwnProperty(e)?Uhe(Bhe[e]):e==="transparent"?new Fs(NaN,NaN,NaN,0):null}function Uhe(e){return new Fs(e>>16&255,e>>8&255,e&255,1)}function IP(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fs(e,t,n,r)}function gX(e){return e instanceof k0||(e=U1(e)),e?(e=e.rgb(),new Fs(e.r,e.g,e.b,e.opacity)):new Fs}function Xg(e,t,n,r){return arguments.length===1?gX(e):new Fs(e,t,n,r??1)}function Fs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}UE(Fs,Xg,vI(k0,{brighter(e){return e=e==null?Ew:Math.pow(Ew,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?z1:Math.pow(z1,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fs(p1(this.r),p1(this.g),p1(this.b),HD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vhe,formatHex:Vhe,formatHex8:Okt,formatRgb:Hhe,toString:Hhe}));function Vhe(){return`#${Yy(this.r)}${Yy(this.g)}${Yy(this.b)}`}function Okt(){return`#${Yy(this.r)}${Yy(this.g)}${Yy(this.b)}${Yy((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hhe(){const e=HD(this.opacity);return`${e===1?"rgb(":"rgba("}${p1(this.r)}, ${p1(this.g)}, ${p1(this.b)}${e===1?")":`, ${e})`}`}function HD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function p1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yy(e){return e=p1(e),(e<16?"0":"")+e.toString(16)}function qhe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hc(e,t,n,r)}function LRe(e){if(e instanceof Hc)return new Hc(e.h,e.s,e.l,e.opacity);if(e instanceof k0||(e=U1(e)),!e)return new Hc;if(e instanceof Hc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Hc(o,a,u,e.opacity)}function qD(e,t,n,r){return arguments.length===1?LRe(e):new Hc(e,t,n,r??1)}function Hc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}UE(Hc,qD,vI(k0,{brighter(e){return e=e==null?Ew:Math.pow(Ew,e),new Hc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?z1:Math.pow(z1,e),new Hc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fs(vB(e>=240?e-240:e+120,i,r),vB(e,i,r),vB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hc(Whe(this.h),OP(this.s),OP(this.l),HD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=HD(this.opacity);return`${e===1?"hsl(":"hsla("}${Whe(this.h)}, ${OP(this.s)*100}%, ${OP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Whe(e){return e=(e||0)%360,e<0?e+360:e}function OP(e){return Math.max(0,Math.min(1,e||0))}function vB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const MRe=Math.PI/180,FRe=180/Math.PI,WD=18,BRe=.96422,jRe=1,zRe=.82521,URe=4/29,Bb=6/29,VRe=3*Bb*Bb,Pkt=Bb*Bb*Bb;function HRe(e){if(e instanceof $d)return new $d(e.l,e.a,e.b,e.opacity);if(e instanceof ep)return qRe(e);e instanceof Fs||(e=gX(e));var t=EB(e.r),n=EB(e.g),r=EB(e.b),i=_B((.2225045*t+.7168786*n+.0606169*r)/jRe),s,o;return t===n&&n===r?s=o=i:(s=_B((.4360747*t+.3850649*n+.1430804*r)/BRe),o=_B((.0139322*t+.0971045*n+.7141733*r)/zRe)),new $d(116*i-16,500*(s-i),200*(i-o),e.opacity)}function GD(e,t,n,r){return arguments.length===1?HRe(e):new $d(e,t,n,r??1)}function $d(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}UE($d,GD,vI(k0,{brighter(e){return new $d(this.l+WD*(e??1),this.a,this.b,this.opacity)},darker(e){return new $d(this.l-WD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=BRe*bB(t),e=jRe*bB(e),n=zRe*bB(n),new Fs(wB(3.1338561*t-1.6168667*e-.4906146*n),wB(-.9787684*t+1.9161415*e+.033454*n),wB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function _B(e){return e>Pkt?Math.pow(e,1/3):e/VRe+URe}function bB(e){return e>Bb?e*e*e:VRe*(e-URe)}function wB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function EB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kkt(e){if(e instanceof ep)return new ep(e.h,e.c,e.l,e.opacity);if(e instanceof $d||(e=HRe(e)),e.a===0&&e.b===0)return new ep(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*FRe;return new ep(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function YD(e,t,n,r){return arguments.length===1?kkt(e):new ep(e,t,n,r??1)}function ep(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function qRe(e){if(isNaN(e.h))return new $d(e.l,0,0,e.opacity);var t=e.h*MRe;return new $d(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}UE(ep,YD,vI(k0,{brighter(e){return new ep(this.h,this.c,this.l+WD*(e??1),this.opacity)},darker(e){return new ep(this.h,this.c,this.l-WD*(e??1),this.opacity)},rgb(){return qRe(this).rgb()}}));var WRe=-.14861,yX=1.78277,vX=-.29227,A4=-.90649,OA=1.97294,Ghe=OA*A4,Yhe=OA*yX,Khe=yX*vX-A4*WRe;function $kt(e){if(e instanceof m1)return new m1(e.h,e.s,e.l,e.opacity);e instanceof Fs||(e=gX(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Khe*r+Ghe*t-Yhe*n)/(Khe+Ghe-Yhe),s=r-i,o=(OA*(n-i)-vX*s)/A4,a=Math.sqrt(o*o+s*s)/(OA*i*(1-i)),u=a?Math.atan2(o,s)*FRe-120:NaN;return new m1(u<0?u+360:u,a,i,e.opacity)}function cV(e,t,n,r){return arguments.length===1?$kt(e):new m1(e,t,n,r??1)}function m1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}UE(m1,cV,vI(k0,{brighter(e){return e=e==null?Ew:Math.pow(Ew,e),new m1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?z1:Math.pow(z1,e),new m1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*MRe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Fs(255*(t+n*(WRe*r+yX*i)),255*(t+n*(vX*r+A4*i)),255*(t+n*(OA*r)),this.opacity)}}));function GRe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function YRe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return GRe((n-r/t)*t,o,i,s,a)}}function KRe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return GRe((n-r/t)*t,i,s,o,a)}}const C4=e=>()=>e;function XRe(e,t){return function(n){return e+n*t}}function Rkt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function I4(e,t){var n=t-e;return n?XRe(e,n>180||n<-180?n-360*Math.round(n/360):n):C4(isNaN(e)?t:e)}function Nkt(e){return(e=+e)==1?Bs:function(t,n){return n-t?Rkt(t,n,e):C4(isNaN(t)?n:t)}}function Bs(e,t){var n=t-e;return n?XRe(e,n):C4(isNaN(e)?t:e)}const PA=function e(t){var n=Nkt(t);function r(i,s){var o=n((i=Xg(i)).r,(s=Xg(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Bs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function QRe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Xg(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Dkt=QRe(YRe),Lkt=QRe(KRe);function _X(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function JRe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mkt(e,t){return(JRe(t)?_X:ZRe)(e,t)}function ZRe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Jp(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function eNe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Nl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function tNe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Jp(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var fV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xB=new RegExp(fV.source,"g");function Fkt(e){return function(){return e}}function Bkt(e){return function(t){return e(t)+""}}function bX(e,t){var n=fV.lastIndex=xB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=fV.exec(e))&&(i=xB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Nl(r,i)})),n=xB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Bkt(u[0].x):Fkt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Jp(e,t){var n=typeof t,r;return t==null||n==="boolean"?C4(t):(n==="number"?Nl:n==="string"?(r=U1(t))?(t=r,PA):bX:t instanceof U1?PA:t instanceof Date?eNe:JRe(t)?_X:Array.isArray(t)?ZRe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tNe:Nl)(e,t)}function jkt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function zkt(e,t){var n=I4(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function _I(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Xhe=180/Math.PI,dV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nNe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Xhe,skewX:Math.atan(u)*Xhe,scaleX:o,scaleY:a}}var PP;function Ukt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dV:nNe(t.a,t.b,t.c,t.d,t.e,t.f)}function Vkt(e){return e==null||(PP||(PP=document.createElementNS("http://www.w3.org/2000/svg","g")),PP.setAttribute("transform",e),!(e=PP.transform.baseVal.consolidate()))?dV:(e=e.matrix,nNe(e.a,e.b,e.c,e.d,e.e,e.f))}function rNe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Nl(l,f)},{i:m-2,x:Nl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Nl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Nl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Nl(l,f)},{i:m-2,x:Nl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var iNe=rNe(Ukt,"px, ","px)","deg)"),sNe=rNe(Vkt,", ",")",")"),Hkt=1e-12;function Qhe(e){return((e=Math.exp(e))+1/e)/2}function qkt(e){return((e=Math.exp(e))-1/e)/2}function Wkt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Gkt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Hkt)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),b=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),w=Math.log(Math.sqrt(b*b+1)-b);y=(w-E)/t,g=function(x){var S=x*y,I=Qhe(E),C=l/(n*v)*(I*Wkt(t*S+E)-qkt(E));return[a+C*h,u+C*p,l*I/Qhe(t*S+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function oNe(e){return function(t,n){var r=e((t=qD(t)).h,(n=qD(n)).h),i=Bs(t.s,n.s),s=Bs(t.l,n.l),o=Bs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Ykt=oNe(I4);var Kkt=oNe(Bs);function Xkt(e,t){var n=Bs((e=GD(e)).l,(t=GD(t)).l),r=Bs(e.a,t.a),i=Bs(e.b,t.b),s=Bs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function aNe(e){return function(t,n){var r=e((t=YD(t)).h,(n=YD(n)).h),i=Bs(t.c,n.c),s=Bs(t.l,n.l),o=Bs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Qkt=aNe(I4);var Jkt=aNe(Bs);function uNe(e){return function t(n){n=+n;function r(i,s){var o=e((i=cV(i)).h,(s=cV(s)).h),a=Bs(i.s,s.s),u=Bs(i.l,s.l),l=Bs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Zkt=uNe(I4);var e$t=uNe(Bs);function wX(e,t){t===void 0&&(t=e,e=Jp);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function t$t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const n$t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Jp,interpolateArray:Mkt,interpolateBasis:YRe,interpolateBasisClosed:KRe,interpolateCubehelix:Zkt,interpolateCubehelixLong:e$t,interpolateDate:eNe,interpolateDiscrete:jkt,interpolateHcl:Qkt,interpolateHclLong:Jkt,interpolateHsl:Ykt,interpolateHslLong:Kkt,interpolateHue:zkt,interpolateLab:Xkt,interpolateNumber:Nl,interpolateNumberArray:_X,interpolateObject:tNe,interpolateRgb:PA,interpolateRgbBasis:Dkt,interpolateRgbBasisClosed:Lkt,interpolateRound:_I,interpolateString:bX,interpolateTransformCss:iNe,interpolateTransformSvg:sNe,interpolateZoom:Gkt,piecewise:wX,quantize:t$t},Symbol.toStringTag,{value:"Module"}));var xw=0,KS=0,tS=0,lNe=1e3,KD,XS,XD=0,V1=0,O4=0,kA=typeof performance=="object"&&performance.now?performance:Date,cNe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function P4(){return V1||(cNe(r$t),V1=kA.now()+O4)}function r$t(){V1=0}function $A(){this._call=this._time=this._next=null}$A.prototype=EX.prototype={constructor:$A,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?P4():+n)+(t==null?0:+t),!this._next&&XS!==this&&(XS?XS._next=this:KD=this,XS=this),this._call=e,this._time=n,hV()},stop:function(){this._call&&(this._call=null,this._time=1/0,hV())}};function EX(e,t,n){var r=new $A;return r.restart(e,t,n),r}function i$t(){P4(),++xw;for(var e=KD,t;e;)(t=V1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xw}function Jhe(){V1=(XD=kA.now())+O4,xw=KS=0;try{i$t()}finally{xw=0,o$t(),V1=0}}function s$t(){var e=kA.now(),t=e-XD;t>lNe&&(O4-=t,XD=e)}function o$t(){for(var e,t=KD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:KD=n);XS=e,hV(r)}function hV(e){if(!xw){KS&&(KS=clearTimeout(KS));var t=e-V1;t>24?(e<1/0&&(KS=setTimeout(Jhe,e-kA.now()-O4)),tS&&(tS=clearInterval(tS))):(tS||(XD=kA.now(),tS=setInterval(s$t,lNe)),xw=1,cNe(Jhe))}}function Zhe(e,t,n){var r=new $A;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function a$t(e,t,n){var r=new $A,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?P4():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var u$t=S4("start","end","cancel","interrupt"),l$t=[],fNe=0,epe=1,pV=2,a$=3,tpe=4,mV=5,u$=6;function k4(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;c$t(e,n,{name:t,index:r,group:i,on:u$t,tween:l$t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fNe})}function xX(e,t){var n=Sf(e,t);if(n.state>fNe)throw new Error("too late; already scheduled");return n}function ah(e,t){var n=Sf(e,t);if(n.state>a$)throw new Error("too late; already running");return n}function Sf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function c$t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=EX(s,0,n.time);function s(l){n.state=epe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==epe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===a$)return Zhe(o);h.state===tpe?(h.state=u$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=u$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Zhe(function(){n.state===a$&&(n.state=tpe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=pV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pV){for(n.state=a$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=mV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===mV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=u$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function gV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>pV&&r.state<mV,r.state=u$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function f$t(e){return this.each(function(){gV(this,e)})}function d$t(e,t){var n,r;return function(){var i=ah(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function h$t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ah(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function p$t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Sf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?d$t:h$t)(n,e,t))}function SX(e,t,n){var r=e._id;return e.each(function(){var i=ah(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Sf(i,r).value[t]}}function dNe(e,t){var n;return(typeof t=="number"?Nl:t instanceof U1?PA:(n=U1(t))?(t=n,PA):bX)(e,t)}function m$t(e){return function(){this.removeAttribute(e)}}function g$t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function y$t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function v$t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function _$t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function b$t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function w$t(e,t){var n=T4(e),r=n==="transform"?sNe:dNe;return this.attrTween(e,typeof t=="function"?(n.local?b$t:_$t)(n,r,SX(this,"attr."+e,t)):t==null?(n.local?g$t:m$t)(n):(n.local?v$t:y$t)(n,r,t))}function E$t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function x$t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function S$t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&x$t(e,s)),n}return i._value=t,i}function T$t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&E$t(e,s)),n}return i._value=t,i}function A$t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=T4(e);return this.tween(n,(r.local?S$t:T$t)(r,t))}function C$t(e,t){return function(){xX(this,e).delay=+t.apply(this,arguments)}}function I$t(e,t){return t=+t,function(){xX(this,e).delay=t}}function O$t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?C$t:I$t)(t,e)):Sf(this.node(),t).delay}function P$t(e,t){return function(){ah(this,e).duration=+t.apply(this,arguments)}}function k$t(e,t){return t=+t,function(){ah(this,e).duration=t}}function $$t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?P$t:k$t)(t,e)):Sf(this.node(),t).duration}function R$t(e,t){if(typeof t!="function")throw new Error;return function(){ah(this,e).ease=t}}function N$t(e){var t=this._id;return arguments.length?this.each(R$t(t,e)):Sf(this.node(),t).ease}function D$t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ah(this,e).ease=n}}function L$t(e){if(typeof e!="function")throw new Error;return this.each(D$t(this._id,e))}function M$t(e){typeof e!="function"&&(e=CRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Rp(r,this._parents,this._name,this._id)}function F$t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Rp(o,this._parents,this._name,this._id)}function B$t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function j$t(e,t,n){var r,i,s=B$t(t)?xX:ah;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function z$t(e,t){var n=this._id;return arguments.length<2?Sf(this.node(),n).on.on(e):this.each(j$t(n,e,t))}function U$t(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function V$t(){return this.on("end.remove",U$t(this._id))}function H$t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hX(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,k4(l[d],t,n,d,l,Sf(c,n)));return new Rp(s,this._parents,t,n)}function q$t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ARe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Sf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&k4(h,t,n,m,d,p);s.push(d),o.push(c)}return new Rp(s,o,t,n)}var W$t=yI.prototype.constructor;function G$t(){return new W$t(this._groups,this._parents)}function Y$t(e,t){var n,r,i;return function(){var s=ww(this,e),o=(this.style.removeProperty(e),ww(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function hNe(e){return function(){this.style.removeProperty(e)}}function K$t(e,t,n){var r,i=n+"",s;return function(){var o=ww(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function X$t(e,t,n){var r,i,s;return function(){var o=ww(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),ww(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Q$t(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=ah(this,e),l=u.on,c=u.value[s]==null?a||(a=hNe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function J$t(e,t,n){var r=(e+="")=="transform"?iNe:dNe;return t==null?this.styleTween(e,Y$t(e,r)).on("end.style."+e,hNe(e)):typeof t=="function"?this.styleTween(e,X$t(e,r,SX(this,"style."+e,t))).each(Q$t(this._id,e)):this.styleTween(e,K$t(e,r,t),n).on("end.style."+e,null)}function Z$t(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function eRt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Z$t(e,o,n)),r}return s._value=t,s}function tRt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,eRt(e,t,n??""))}function nRt(e){return function(){this.textContent=e}}function rRt(e){return function(){var t=e(this);this.textContent=t??""}}function iRt(e){return this.tween("text",typeof e=="function"?rRt(SX(this,"text",e)):nRt(e==null?"":e+""))}function sRt(e){return function(t){this.textContent=e.call(this,t)}}function oRt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&sRt(i)),t}return r._value=e,r}function aRt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oRt(e))}function uRt(){for(var e=this._name,t=this._id,n=pNe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Sf(u,t);k4(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rp(r,this._parents,e,n)}function lRt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=ah(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var cRt=0;function Rp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function pNe(){return++cRt}var xh=yI.prototype;Rp.prototype={constructor:Rp,select:H$t,selectAll:q$t,selectChild:xh.selectChild,selectChildren:xh.selectChildren,filter:M$t,merge:F$t,selection:G$t,transition:uRt,call:xh.call,nodes:xh.nodes,node:xh.node,size:xh.size,empty:xh.empty,each:xh.each,on:z$t,attr:w$t,attrTween:A$t,style:J$t,styleTween:tRt,text:iRt,textTween:aRt,remove:V$t,tween:p$t,delay:O$t,duration:$$t,ease:N$t,easeVarying:L$t,end:lRt,[Symbol.iterator]:xh[Symbol.iterator]};const fRt=e=>+e;function dRt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hRt={time:null,delay:0,duration:250,ease:dRt};function pRt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mRt(e){var t,n;e instanceof Rp?(t=e._id,e=e._name):(t=pNe(),(n=hRt).time=P4(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&k4(u,e,t,l,o,n||pRt(u,t));return new Rp(r,this._parents,e,t)}yI.prototype.interrupt=f$t;yI.prototype.transition=mRt;const SB=e=>()=>e;function gRt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function yRt(e){e.stopImmediatePropagation()}function TB(e){e.preventDefault(),e.stopImmediatePropagation()}var npe={name:"drag"},AB={name:"space"},c_={name:"handle"},f_={name:"center"};const{abs:rpe,max:Co,min:Io}=Math;function ipe(e){return[+e[0],+e[1]]}function yV(e){return[ipe(e[0]),ipe(e[1])]}var l$={name:"x",handles:["w","e"].map(RA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},c$={name:"y",handles:["n","s"].map(RA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},vRt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(RA),input:function(e){return e==null?null:yV(e)},output:function(e){return e}},Sh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},spe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ope={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_Rt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},bRt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function RA(e){return{type:e}}function wRt(e){return!e.ctrlKey&&!e.button}function ERt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function xRt(){return navigator.maxTouchPoints||"ontouchstart"in this}function CB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function SRt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function TRt(){return TX(l$)}function ARt(){return TX(c$)}function CRt(){return TX(vRt)}function TX(e){var t=ERt,n=wRt,r=xRt,i=!0,s=S4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([RA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Sh.overlay).merge(y).each(function(){var _=CB(this).extent;Qi(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([RA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Sh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Sh[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,b=_.__brush,E=c(_,arguments),w=b.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,b.extent),S=Jp(w,x);function I(C){b.selection=C===1&&x===null?null:S(C),l.call(_),E.brush()}return w!==null&&x!==null?I:I(1)}):g.each(function(){var _=this,b=arguments,E=_.__brush,w=e.input(typeof y=="function"?y.apply(_,b):y,E.extent),x=c(_,b).beforestart();gV(_),E.selection=w===null?null:w,l.call(_),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Qi(this),y=CB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=Qi(this.that).datum();s.call(g,this.that,new gRt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?npe:i&&g.altKey?f_:c_,b=e===c$?null:_Rt[v],E=e===l$?null:bRt[v],w=CB(y),x=w.extent,S=w.selection,I=x[0][0],C,O,z=x[0][1],N,$,D=x[1][0],B,V,j=x[1][1],G,U,P=0,k=0,H,M=b&&E&&i&&g.shiftKey,F,J,se=Array.from(g.touches||[g],Oe=>{const Le=Oe.identifier;return Oe=aV(Oe,y),Oe.point0=Oe.slice(),Oe.identifier=Le,Oe});gV(y);var ae=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(H=!0);const Oe=[se[0],se[1]||se[0]];w.selection=S=[[C=e===c$?I:Io(Oe[0][0],Oe[1][0]),N=e===l$?z:Io(Oe[0][1],Oe[1][1])],[B=e===c$?D:Co(Oe[0][0],Oe[1][0]),G=e===l$?j:Co(Oe[0][1],Oe[1][1])]],se.length>1&&Fe(g)}else C=S[0][0],N=S[0][1],B=S[1][0],G=S[1][1];O=C,$=N,V=B,U=G;var ce=Qi(y).attr("pointer-events","none"),le=ce.selectAll(".overlay").attr("cursor",Sh[v]);if(g.touches)ae.moved=ue,ae.ended=ke;else{var ge=Qi(g.view).on("mousemove.brush",ue,!0).on("mouseup.brush",ke,!0);i&&ge.on("keydown.brush",Ge,!0).on("keyup.brush",Re,!0),vkt(g.view)}l.call(y),ae.start(g,_.name);function ue(Oe){for(const Le of Oe.changedTouches||[Oe])for(const Ut of se)Ut.identifier===Le.identifier&&(Ut.cur=aV(Le,y));if(M&&!F&&!J&&se.length===1){const Le=se[0];rpe(Le.cur[0]-Le[0])>rpe(Le.cur[1]-Le[1])?J=!0:F=!0}for(const Le of se)Le.cur&&(Le[0]=Le.cur[0],Le[1]=Le.cur[1]);H=!0,TB(Oe),Fe(Oe)}function Fe(Oe){const Le=se[0],Ut=Le.point0;var Qe;switch(P=Le[0]-Ut[0],k=Le[1]-Ut[1],_){case AB:case npe:{b&&(P=Co(I-C,Io(D-B,P)),O=C+P,V=B+P),E&&(k=Co(z-N,Io(j-G,k)),$=N+k,U=G+k);break}case c_:{se[1]?(b&&(O=Co(I,Io(D,se[0][0])),V=Co(I,Io(D,se[1][0])),b=1),E&&($=Co(z,Io(j,se[0][1])),U=Co(z,Io(j,se[1][1])),E=1)):(b<0?(P=Co(I-C,Io(D-C,P)),O=C+P,V=B):b>0&&(P=Co(I-B,Io(D-B,P)),O=C,V=B+P),E<0?(k=Co(z-N,Io(j-N,k)),$=N+k,U=G):E>0&&(k=Co(z-G,Io(j-G,k)),$=N,U=G+k));break}case f_:{b&&(O=Co(I,Io(D,C-P*b)),V=Co(I,Io(D,B+P*b))),E&&($=Co(z,Io(j,N-k*E)),U=Co(z,Io(j,G+k*E)));break}}V<O&&(b*=-1,Qe=C,C=B,B=Qe,Qe=O,O=V,V=Qe,v in spe&&le.attr("cursor",Sh[v=spe[v]])),U<$&&(E*=-1,Qe=N,N=G,G=Qe,Qe=$,$=U,U=Qe,v in ope&&le.attr("cursor",Sh[v=ope[v]])),w.selection&&(S=w.selection),F&&(O=S[0][0],V=S[1][0]),J&&($=S[0][1],U=S[1][1]),(S[0][0]!==O||S[0][1]!==$||S[1][0]!==V||S[1][1]!==U)&&(w.selection=[[O,$],[V,U]],l.call(y),ae.brush(Oe,_.name))}function ke(Oe){if(yRt(Oe),Oe.touches){if(Oe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else _kt(Oe.view,H),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ce.attr("pointer-events","all"),le.attr("cursor",Sh.overlay),w.selection&&(S=w.selection),SRt(S)&&(w.selection=null,l.call(y)),ae.end(Oe,_.name)}function Ge(Oe){switch(Oe.keyCode){case 16:{M=b&&E;break}case 18:{_===c_&&(b&&(B=V-P*b,C=O+P*b),E&&(G=U-k*E,N=$+k*E),_=f_,Fe(Oe));break}case 32:{(_===c_||_===f_)&&(b<0?B=V-P:b>0&&(C=O-P),E<0?G=U-k:E>0&&(N=$-k),_=AB,le.attr("cursor",Sh.selection),Fe(Oe));break}default:return}TB(Oe)}function Re(Oe){switch(Oe.keyCode){case 16:{M&&(F=J=M=!1,Fe(Oe));break}case 18:{_===f_&&(b<0?B=V:b>0&&(C=O),E<0?G=U:E>0&&(N=$),_=c_,Fe(Oe));break}case 32:{_===AB&&(Oe.altKey?(b&&(B=V-P*b,C=O+P*b),E&&(G=U-k*E,N=$+k*E),_=f_):(b<0?B=V:b>0&&(C=O),E<0?G=U:E>0&&(N=$),_=c_),le.attr("cursor",Sh[v]),Fe(Oe));break}default:return}TB(Oe)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=yV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:SB(yV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:SB(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:SB(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const vV=Math.PI,_V=2*vV,gy=1e-6,IRt=_V-gy;function mNe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ORt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mNe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let AX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mNe:ORt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>gy)if(!(Math.abs(f*u-l*c)>gy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((vV-Math.acos((m+d-g)/(2*y*v)))/2),b=_/v,E=_/y;Math.abs(b-1)>gy&&this._append`L${t+b*c},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>gy||Math.abs(this._y1-c)>gy)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%_V+_V),d>IRt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>gy&&this._append`A${r},${r},0,${+(d>=vV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function $4(){return new AX}$4.prototype=AX.prototype;const dp=11102230246251565e-32,Oo=134217729,PRt=(3+8*dp)*dp;function IB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function kRt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function bI(e){return new Float64Array(e)}const $Rt=(3+16*dp)*dp,RRt=(2+12*dp)*dp,NRt=(9+64*dp)*dp*dp,d_=bI(4),ape=bI(8),upe=bI(12),lpe=bI(16),ua=bI(4);function DRt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,b,E,w,x,S;const I=e-i,C=n-i,O=t-s,z=r-s;b=I*z,d=Oo*I,h=d-(d-I),p=I-h,d=Oo*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=O*C,d=Oo*O,h=d-(d-O),p=O-h,d=Oo*C,m=d-(d-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,d_[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,d_[1]=_-(y+f)+(f-w),S=v+y,f=S-v,d_[2]=v-(S-f)+(y-f),d_[3]=S;let N=kRt(4,d_),$=RRt*o;if(N>=$||-N>=$||(f=e-I,a=e-(I+f)+(f-i),f=n-C,l=n-(C+f)+(f-i),f=t-O,u=t-(O+f)+(f-s),f=r-z,c=r-(z+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=NRt*o+PRt*Math.abs(N),N+=I*c+z*a-(O*l+C*u),N>=$||-N>=$))return N;b=a*z,d=Oo*a,h=d-(d-a),p=a-h,d=Oo*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=u*C,d=Oo*u,h=d-(d-u),p=u-h,d=Oo*C,m=d-(d-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const D=IB(4,d_,4,ua,ape);b=I*c,d=Oo*I,h=d-(d-I),p=I-h,d=Oo*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=O*l,d=Oo*O,h=d-(d-O),p=O-h,d=Oo*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const B=IB(D,ape,4,ua,upe);b=a*c,d=Oo*a,h=d-(d-a),p=a-h,d=Oo*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=u*l,d=Oo*u,h=d-(d-u),p=u-h,d=Oo*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const V=IB(B,upe,4,ua,lpe);return lpe[V-1]}function kP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=$Rt*l?u:-DRt(e,t,n,r,i,s,l)}const cpe=Math.pow(2,-52),$P=new Uint32Array(512);class QD{static from(t,n=jRt,r=zRt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new QD(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const O=t[2*C],z=t[2*C+1];O<a&&(a=O),z<u&&(u=z),O>l&&(l=O),z>c&&(c=z),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let C=0;C<o;C++){const O=OB(f,d,t[2*C],t[2*C+1]);O<h&&(p=C,h=O)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let C=0;C<o;C++){if(C===p)continue;const O=OB(y,v,t[2*C],t[2*C+1]);O<h&&O>0&&(m=C,h=O)}let _=t[2*m],b=t[2*m+1],E=1/0;for(let C=0;C<o;C++){if(C===p||C===m)continue;const O=FRt(y,v,_,b,t[2*C],t[2*C+1]);O<E&&(g=C,E=O)}let w=t[2*g],x=t[2*g+1];if(E===1/0){for(let z=0;z<o;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];rb(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let O=0;for(let z=0,N=-1/0;z<o;z++){const $=this._ids[z];this._dists[$]>N&&(C[O++]=$,N=this._dists[$])}this.hull=C.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(kP(y,v,_,b,w,x)<0){const C=m,O=_,z=b;m=g,_=w,b=x,g=C,w=O,x=z}const S=BRt(y,v,_,b,w,x);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=OB(t[2*C],t[2*C+1],S.x,S.y);rb(this._ids,this._dists,0,o-1),this._hullStart=p;let I=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,b)]=m,s[this._hashKey(w,x)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let C=0,O,z;C<this._ids.length;C++){const N=this._ids[C],$=t[2*N],D=t[2*N+1];if(C>0&&Math.abs($-O)<=cpe&&Math.abs(D-z)<=cpe||(O=$,z=D,N===p||N===m||N===g))continue;let B=0;for(let P=0,k=this._hashKey($,D);P<this._hashSize&&(B=s[(k+P)%this._hashSize],!(B!==-1&&B!==r[B]));P++);B=n[B];let V=B,j;for(;j=r[V],kP($,D,t[2*V],t[2*V+1],t[2*j],t[2*j+1])>=0;)if(V=j,V===B){V=-1;break}if(V===-1)continue;let G=this._addTriangle(V,N,r[V],-1,-1,i[V]);i[N]=this._legalize(G+2),i[V]=G,I++;let U=r[V];for(;j=r[U],kP($,D,t[2*U],t[2*U+1],t[2*j],t[2*j+1])<0;)G=this._addTriangle(U,N,j,i[N],-1,i[U]),i[N]=this._legalize(G+2),r[U]=U,I--,U=j;if(V===B)for(;j=n[V],kP($,D,t[2*j],t[2*j+1],t[2*V],t[2*V+1])<0;)G=this._addTriangle(j,N,V,-1,i[V],i[j]),this._legalize(G+2),i[j]=G,r[V]=V,I--,V=j;this._hullStart=n[N]=V,r[V]=n[U]=N,r[N]=U,s[this._hashKey($,D)]=N,s[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(I);for(let C=0,O=this._hullStart;C<I;C++)this.hull[C]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(LRt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=$P[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(MRt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<$P.length&&($P[s++]=v)}else{if(s===0)break;t=$P[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function LRt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function OB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function MRt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function FRt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function BRt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function rb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;nS(e,i,s),t[e[n]]>t[e[r]]&&nS(e,n,r),t[e[s]]>t[e[r]]&&nS(e,s,r),t[e[n]]>t[e[s]]&&nS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;nS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(rb(e,t,s,r),rb(e,t,n,o-1)):(rb(e,t,n,o-1),rb(e,t,s,r))}}function nS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function jRt(e){return e[0]}function zRt(e){return e[1]}var fpe={},PB={},kB=34,rS=10,$B=13;function gNe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function URt(e,t){var n=gNe(e);return function(r,i){return t(n(r),i,e)}}function dpe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function qa(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function VRt(e){return e<0?"-"+qa(-e,6):e>9999?"+"+qa(e,6):qa(e,4)}function HRt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":VRt(e.getUTCFullYear())+"-"+qa(e.getUTCMonth()+1,2)+"-"+qa(e.getUTCDate(),2)+(i?"T"+qa(t,2)+":"+qa(n,2)+":"+qa(r,2)+"."+qa(i,3)+"Z":r?"T"+qa(t,2)+":"+qa(n,2)+":"+qa(r,2)+"Z":n||t?"T"+qa(t,2)+":"+qa(n,2)+"Z":"")}function yNe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?URt(g,d):gNe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===rS&&--p,f.charCodeAt(p-1)===$B&&--p;function b(){if(v)return PB;if(_)return _=!1,fpe;var w,x=m,S;if(f.charCodeAt(x)===kB){for(;m++<p&&f.charCodeAt(m)!==kB||f.charCodeAt(++m)===kB;);return(w=m)>=p?v=!0:(S=f.charCodeAt(m++))===rS?_=!0:S===$B&&(_=!0,f.charCodeAt(m)===rS&&++m),f.slice(x+1,w-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(w=m++))===rS)_=!0;else if(S===$B)_=!0,f.charCodeAt(m)===rS&&++m;else if(S!==n)continue;return f.slice(x,w)}return v=!0,f.slice(x,p)}for(;(y=b())!==PB;){for(var E=[];y!==fpe&&y!==PB;)E.push(y),y=b();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=dpe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=dpe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?HRt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var qRt=yNe(","),WRt=qRt.parse;function GRt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function YRt(e,t){return fetch(e,t).then(GRt)}function KRt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),YRt(t,n).then(function(i){return e(i,r)})}}var XRt=KRt(WRt);function QRt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function JRt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return vNe(this.cover(t,n),t,n,e)}function vNe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function ZRt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)vNe(this,o[n],a[n],e[n]);return this}function eNt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function tNt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function nNt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ya(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function rNt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new ya(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new ya(h[3],g,y,u,l),new ya(h[2],o,y,g,l),new ya(h[1],g,a,u,y),new ya(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),b=v*v+_*_;if(b<n){var E=Math.sqrt(n=b);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function iNt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function sNt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function oNt(){return this._root}function aNt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function uNt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new ya(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new ya(i,l,c,a,u)),(i=r[2])&&t.push(new ya(i,s,c,l,u)),(i=r[1])&&t.push(new ya(i,l,o,a,c)),(i=r[0])&&t.push(new ya(i,s,o,l,c))}return this}function lNt(e){var t=[],n=[],r;for(this._root&&t.push(new ya(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new ya(s,o,a,c,f)),(s=i[1])&&t.push(new ya(s,c,a,u,f)),(s=i[2])&&t.push(new ya(s,o,f,c,l)),(s=i[3])&&t.push(new ya(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cNt(e){return e[0]}function fNt(e){return arguments.length?(this._x=e,this):this._x}function dNt(e){return e[1]}function hNt(e){return arguments.length?(this._y=e,this):this._y}function CX(e,t,n){var r=new IX(t??cNt,n??dNt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function IX(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function hpe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Da=CX.prototype=IX.prototype;Da.copy=function(){var e=new IX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hpe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=hpe(r));return e};Da.add=JRt;Da.addAll=ZRt;Da.cover=eNt;Da.data=tNt;Da.extent=nNt;Da.find=rNt;Da.remove=iNt;Da.removeAll=sNt;Da.root=oNt;Da.size=aNt;Da.visit=uNt;Da.visitAfter=lNt;Da.x=fNt;Da.y=hNt;function _a(e){return function(){return e}}function Zm(e){return(e()-.5)*1e-6}function pNt(e){return e.x+e.vx}function mNt(e){return e.y+e.vy}function gNt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=_a(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=CX(t,pNt,mNt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,b,E,w,x){var S=_.data,I=_.r,C=m+I;if(S){if(S.index>d.index){var O=h-S.x-S.vx,z=p-S.y-S.vy,N=O*O+z*z;N<C*C&&(O===0&&(O=Zm(r),N+=O*O),z===0&&(z=Zm(r),N+=z*z),N=(C-(N=Math.sqrt(N)))/N*i,d.vx+=(O*=N)*(C=(I*=I)/(g+I)),d.vy+=(z*=N)*C,S.vx-=O*(C=1-C),S.vy-=z*C)}return}return b>h+C||w<h-C||E>p+C||x<p-C}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:_a(+l),u(),o):e},o}function yNt(e){return e.index}function ppe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function vNt(e){var t=yNt,n=f,r,i=_a(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,b,E,w,x,S,I,C;_<v;++_)b=e[_],E=b.source,w=b.target,x=w.x+w.vx-E.x-E.vx||Zm(l),S=w.y+w.vy-E.y-E.vy||Zm(l),I=Math.sqrt(x*x+S*S),I=(I-s[_])/I*g*r[_],x*=I,S*=I,w.vx-=x*(C=u[_]),w.vy-=S*C,E.vx+=x*(C=1-C),E.vy+=S*C}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,w)=>[t(E,w,o),E])),b;for(g=0,a=new Array(y);g<v;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=ppe(_,b.source)),typeof b.target!="object"&&(b.target=ppe(_,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)b=e[g],u[g]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:_a(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:_a(+g),m(),d):i},d}const _Nt=1664525,bNt=1013904223,mpe=4294967296;function wNt(){let e=1;return()=>(e=(_Nt*e+bNt)%mpe)/mpe}function ENt(e){return e.x}function xNt(e){return e.y}var SNt=10,TNt=Math.PI*(3-Math.sqrt(5));function ANt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=EX(f),l=S4("tick","end"),c=wNt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(b){b(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=SNt*Math.sqrt(.5+m),_=m*TNt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,b,E,w,x,S;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],b=m-x.x,E=g-x.y,w=b*b+E*E,w<y&&(S=x,y=w);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function CNt(){var e,t,n,r,i=_a(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=CX(e,ENt,xNt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,b;if(h.length){for(v=_=b=0;b<4;++b)(m=h[b])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,b=y*y+v*v;if(_*_/u<b)return b<a&&(y===0&&(y=Zm(n),b+=y*y),v===0&&(v=Zm(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zm(n),b+=y*y),v===0&&(v=Zm(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)));do h.data!==t&&(_=s[h.data.index]*r/b,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:_a(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function INt(e){var t=_a(.1),n,r,i;typeof e!="function"&&(e=_a(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:_a(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:_a(+a),o(),s):e},s}function ONt(e){var t=_a(.1),n,r,i;typeof e!="function"&&(e=_a(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:_a(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:_a(+a),o(),s):e},s}function PNt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function JD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Sw(e){return e=JD(Math.abs(e)),e?e[1]:NaN}function kNt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function $Nt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var RNt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H1(e){if(!(t=RNt.exec(e)))throw new Error("invalid format: "+e);var t;return new OX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}H1.prototype=OX.prototype;function OX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}OX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NNt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _Ne;function DNt(e,t){var n=JD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_Ne=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+JD(e,Math.max(0,t+s-1))[0]}function gpe(e,t){var n=JD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ype={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PNt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gpe(e*100,t),r:gpe,s:DNt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vpe(e){return e}var _pe=Array.prototype.map,bpe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bNe(e){var t=e.grouping===void 0||e.thousands===void 0?vpe:kNt(_pe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?vpe:$Nt(_pe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=H1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,b=f.trim,E=f.type;E==="n"?(v=!0,E="g"):ype[E]||(_===void 0&&(_=12),b=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",S=ype[E],I=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function C(O){var z=w,N=x,$,D,B;if(E==="c")N=S(O)+N,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?u:S(Math.abs(O),_),b&&(O=NNt(O)),V&&+O==0&&p!=="+"&&(V=!1),z=(V?p==="("?p:a:p==="-"||p==="("?"":p)+z,N=(E==="s"?bpe[8+_Ne/3]:"")+N+(V&&p==="("?")":""),I){for($=-1,D=O.length;++$<D;)if(B=O.charCodeAt($),48>B||B>57){N=(B===46?i+O.slice($+1):O.slice($))+N,O=O.slice(0,$);break}}}v&&!g&&(O=t(O,1/0));var j=z.length+O.length+N.length,G=j<y?new Array(y-j+1).join(d):"";switch(v&&g&&(O=t(G+O,G.length?y-N.length:1/0),G=""),h){case"<":O=z+O+N+G;break;case"=":O=z+G+O+N;break;case"^":O=G.slice(0,j=G.length>>1)+z+O+N+G.slice(j);break;default:O=G+z+O+N;break}return s(O)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=H1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Sw(d)/3)))*3,m=Math.pow(10,-p),g=bpe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var RP,VE,PX;LNt({thousands:",",grouping:[3],currency:["$",""]});function LNt(e){return RP=bNe(e),VE=RP.format,PX=RP.formatPrefix,RP}function wNe(e){return Math.max(0,-Sw(Math.abs(e)))}function ENe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sw(t)/3)))*3-Sw(Math.abs(e)))}function xNe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sw(t)-Sw(e))+1}function MNt(e,t){return e.parent===t.parent?1:2}function FNt(e){return e.reduce(BNt,0)/e.length}function BNt(e,t){return e+t.x}function jNt(e){return 1+e.reduce(zNt,0)}function zNt(e,t){return Math.max(e,t.y)}function UNt(e){for(var t;t=e.children;)e=t[0];return e}function VNt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function HNt(){var e=MNt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=FNt(h),d.y=jNt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=UNt(s),l=VNt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function qNt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function WNt(){return this.eachAfter(qNt)}function GNt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function YNt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function KNt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function XNt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function QNt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function JNt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ZNt(e){for(var t=this,n=eDt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function eDt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function tDt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function nDt(){return Array.from(this)}function rDt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function iDt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*sDt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function R4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=uDt)):t===void 0&&(t=aDt);for(var n=new Tw(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new Tw(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(SNe)}function oDt(){return R4(this).eachBefore(lDt)}function aDt(e){return e.children}function uDt(e){return Array.isArray(e)?e[1]:null}function lDt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function SNe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Tw(e){this.data=e,this.depth=this.height=0,this.parent=null}Tw.prototype=R4.prototype={constructor:Tw,count:WNt,each:GNt,eachAfter:KNt,eachBefore:YNt,find:XNt,sum:QNt,sort:JNt,path:ZNt,ancestors:tDt,descendants:nDt,leaves:rDt,links:iDt,copy:oDt,[Symbol.iterator]:sDt};function f$(e){return e==null?null:TNe(e)}function TNe(e){if(typeof e!="function")throw new Error;return e}function Iy(){return 0}function N_(e){return function(){return e}}const cDt=1664525,fDt=1013904223,wpe=4294967296;function dDt(){let e=1;return()=>(e=(cDt*e+fDt)%wpe)/wpe}function hDt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pDt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function mDt(e,t){for(var n=0,r=(e=pDt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&ANe(o,s)?++n:(o=yDt(i=gDt(i,s)),n=0);return o}function gDt(e,t){var n,r;if(RB(t,e))return[t];for(n=0;n<e.length;++n)if(NP(t,e[n])&&RB(QS(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(NP(QS(e[n],e[r]),t)&&NP(QS(e[n],t),e[r])&&NP(QS(e[r],t),e[n])&&RB(CNe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function NP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function ANe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function RB(e,t){for(var n=0;n<t.length;++n)if(!ANe(e,t[n]))return!1;return!0}function yDt(e){switch(e.length){case 1:return vDt(e[0]);case 2:return QS(e[0],e[1]);case 3:return CNe(e[0],e[1],e[2])}}function vDt(e){return{x:e.x,y:e.y,r:e.r}}function QS(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function CNe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,b=v-l*l-c*c+f*f,E=h*p-d*m,w=(p*b-m*_)/(E*2)-r,x=(m*g-p*y)/E,S=(h*_-d*b)/(E*2)-i,I=(d*y-h*g)/E,C=x*x+I*I-1,O=2*(s+w*x+S*I),z=w*w+S*S-s*s,N=-(Math.abs(C)>1e-6?(O+Math.sqrt(O*O-4*C*z))/(2*C):z/O);return{x:r+w+x*N,y:i+S+I*N,r:N}}function Epe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function xpe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Spe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function DP(e){this._=e,this.next=null,this.previous=null}function _Dt(e,t){if(!(s=(e=hDt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Epe(r,n,i=e[2]),n=new DP(n),r=new DP(r),i=new DP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Epe(n._,r._,i=e[u]),i=new DP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(xpe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(xpe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Spe(n);(i=i.next)!==r;)(a=Spe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=mDt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function bDt(e){return Math.sqrt(e.value)}function INe(){var e=null,t=1,n=1,r=Iy;function i(s){const o=dDt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Tpe(e)).eachAfter(NB(r,.5,o)).eachBefore(Ape(1)):s.eachBefore(Tpe(bDt)).eachAfter(NB(Iy,1,o)).eachAfter(NB(r,s.r/Math.min(t,n),o)).eachBefore(Ape(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=f$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:N_(+s),i):r},i}function Tpe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function NB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=_Dt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Ape(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ONe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function wI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function wDt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(ONe),o}function s(o,a){return function(u){u.children&&wI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var EDt={depth:-1},Cpe={},DB={};function xDt(e){return e.id}function SDt(e){return e.parentId}function Ipe(){var e=xDt,t=SDt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((b,E)=>TDt(n(b,E,i))),v=y.map(Ope),_=new Set(y).add("");for(const b of v)_.has(b)||(_.add(b),y.push(b),v.push(Ope(b)),s.push(DB));o=(b,E)=>y[E],a=(b,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new Tw(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Cpe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Cpe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===DB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===DB);--y)h.data=null}if(f.parent=EDt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(SNe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=f$(i),r):e},r.parentId=function(i){return arguments.length?(t=f$(i),r):t},r.path=function(i){return arguments.length?(n=f$(i),r):n},r}function TDt(e){e=`${e}`;let t=e.length;return bV(e,t-1)&&!bV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Ope(e){let t=e.length;if(t<2)return"";for(;--t>1&&!bV(e,t););return e.slice(0,t)}function bV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function ADt(e,t){return e.parent===t.parent?1:2}function LB(e){var t=e.children;return t?t[0]:e.t}function MB(e){var t=e.children;return t?t[t.length-1]:e.t}function CDt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function IDt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function ODt(e,t,n){return e.a.parent===t.parent?e.a:n}function d$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}d$.prototype=Object.create(Tw.prototype);function PDt(e){for(var t=new d$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new d$(s[o],o)),i.parent=n;return(t.parent=new d$(null,0)).children=[t],t}function kDt(){var e=ADt,t=1,n=1,r=null;function i(l){var c=PDt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){IDt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,b;p=MB(p),d=LB(d),p&&d;)m=LB(m),h=MB(h),h.a=l,b=p.z+v-d.z-g+e(p._,d._),b>0&&(CDt(ODt(p,l,f),l,b),g+=b,y+=b),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!MB(h)&&(h.t=p,h.m+=v-y),d&&!LB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function N4(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var PNe=(1+Math.sqrt(5))/2;function kNe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,b,E,w;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),w=g*g*E,b=Math.max(v/w,w/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),w=g*g*E,_=Math.max(v/w,w/y),_>b){g-=l;break}b=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?wI(u,n,r,i,m?r+=p*g/m:s):N4(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const $Ne=function e(t){function n(r,i,s,o,a){kNe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PNe);function $Dt(){var e=$Ne,t=!1,n=1,r=1,i=[0],s=Iy,o=Iy,a=Iy,u=Iy,l=Iy;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(ONe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=TNe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:N_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:N_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:N_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:N_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:N_(+d),c):l},c}function RDt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],b=h/2+_,E=f+1,w=d-1;E<w;){var x=E+w>>>1;l[x]<b?E=x+1:w=x}b-l[E-1]<l[E]-b&&f+1<E&&--E;var S=l[E]-_,I=h-S;if(g-p>y-m){var C=h?(p*I+g*S)/h:g;c(f,E,S,p,m,C,y),c(E,d,I,C,m,g,y)}else{var O=h?(m*I+y*S)/h:y;c(f,E,S,p,m,g,O),c(E,d,I,p,O,g,y)}}}function NDt(e,t,n,r,i){(e.depth&1?N4:wI)(e,t,n,r,i)}const DDt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?wI(l,i,s,o,m?s+=(a-s)*l.value/m:a):N4(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=kNe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PNe);function r2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function LDt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function RNe(e){let t,n,r;e.length!==2?(t=r2,n=(a,u)=>r2(e(a),u),r=(a,u)=>e(a)-u):(t=e===r2||e===LDt?e:MDt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function MDt(){return 0}function NNe(e){return e===null?NaN:+e}const FDt=RNe(r2),BDt=FDt.right;RNe(NNe).center;const D4=BDt,jDt=Math.sqrt(50),zDt=Math.sqrt(10),UDt=Math.sqrt(2);function ZD(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=jDt?10:s>=zDt?5:s>=UDt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?ZD(e,t,n*2):[a,u,l]}function wV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?ZD(t,e,n):ZD(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function EV(e,t,n){return t=+t,e=+e,n=+n,ZD(e,t,n)[2]}function VDt(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?EV(t,e,n):EV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function HDt(e,t,n=NNe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function qDt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Tf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xV=Symbol("implicit");function HE(){var e=new Lhe,t=[],n=[],r=xV;function i(s){let o=e.get(s);if(o===void 0){if(r!==xV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Lhe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return HE(t,n).unknown(r)},Tf.apply(i,arguments),i}function EI(){var e=HE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=qDt(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return EI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Tf.apply(f(),arguments)}function WDt(e){return function(){return e}}function SV(e){return+e}var Ppe=[0,1];function au(e){return e}function TV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:WDt(isNaN(t)?NaN:.5)}function GDt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function YDt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=TV(i,r),s=n(o,s)):(r=TV(r,i),s=n(s,o)),function(a){return s(r(a))}}function KDt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=TV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=D4(e,a,1,r)-1;return s[u](i[u](a))}}function xI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function L4(){var e=Ppe,t=Ppe,n=Jp,r,i,s,o=au,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==au&&(o=GDt(e[0],e[d-1])),a=d>2?KDt:YDt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Nl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,SV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=_I,c()},f.clamp=function(d){return arguments.length?(o=d?!0:au,c()):o!==au},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function DNe(){return L4()(au,au)}function LNe(e,t,n,r){var i=VDt(e,t,n),s;switch(r=H1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=ENe(i,o))&&(r.precision=s),PX(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=xNe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=wNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return VE(r)}function Rv(e){var t=e.domain;return e.ticks=function(n){var r=t();return wV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return LNe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=EV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Np(){var e=DNe();return e.copy=function(){return xI(e,Np())},Tf.apply(e,arguments),Rv(e)}function MNe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,SV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return MNe(e).unknown(t)},e=arguments.length?Array.from(e,SV):[0,1],Rv(n)}function FNe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function kpe(e){return Math.log(e)}function $pe(e){return Math.exp(e)}function XDt(e){return-Math.log(-e)}function QDt(e){return-Math.exp(-e)}function JDt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZDt(e){return e===10?JDt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function e3t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Rpe(e){return(t,n)=>-e(-t,n)}function kX(e){const t=e(kpe,$pe),n=t.domain;let r=10,i,s;function o(){return i=e3t(r),s=ZDt(r),n()[0]<0?(i=Rpe(i),s=Rpe(s),e(XDt,QDt)):e(kpe,$pe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=wV(l,c,g))}else y=wV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=H1(u)).precision==null&&(u.trim=!0),u=VE(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(FNe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function BNe(){const e=kX(L4()).domain([1,10]);return e.copy=()=>xI(e,BNe()).base(e.base()),Tf.apply(e,arguments),e}function Npe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Dpe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $X(e){var t=1,n=e(Npe(t),Dpe(t));return n.constant=function(r){return arguments.length?e(Npe(t=+r),Dpe(t)):t},Rv(n)}function jNe(){var e=$X(L4());return e.copy=function(){return xI(e,jNe()).constant(e.constant())},Tf.apply(e,arguments)}function Lpe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function t3t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function n3t(e){return e<0?-e*e:e*e}function RX(e){var t=e(au,au),n=1;function r(){return n===1?e(au,au):n===.5?e(t3t,n3t):e(Lpe(n),Lpe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Rv(t)}function NX(){var e=RX(L4());return e.copy=function(){return xI(e,NX()).exponent(e.exponent())},Tf.apply(e,arguments),e}function r3t(){return NX.apply(null,arguments).exponent(.5)}function zNe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=HDt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[D4(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(r2),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return zNe().domain(e).range(t).unknown(r)},Tf.apply(s,arguments)}function UNe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[D4(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return UNe().domain([e,t]).range(i).unknown(s)},Tf.apply(Rv(o),arguments)}function VNe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[D4(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return VNe().domain(e).range(t).unknown(n)},Tf.apply(i,arguments)}const FB=new Date,BB=new Date;function As(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>As(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(FB.setTime(+s),BB.setTime(+o),e(FB),e(BB),Math.floor(n(FB,BB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Aw=As(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Aw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?As(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Aw);Aw.range;const tp=1e3,Ul=tp*60,np=Ul*60,Dp=np*24,DX=Dp*7,Mpe=Dp*30,jB=Dp*365,rp=As(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*tp)},(e,t)=>(t-e)/tp,e=>e.getUTCSeconds());rp.range;const M4=As(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tp)},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getMinutes());M4.range;const F4=As(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getUTCMinutes());F4.range;const B4=As(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tp-e.getMinutes()*Ul)},(e,t)=>{e.setTime(+e+t*np)},(e,t)=>(t-e)/np,e=>e.getHours());B4.range;const j4=As(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*np)},(e,t)=>(t-e)/np,e=>e.getUTCHours());j4.range;const hp=As(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ul)/Dp,e=>e.getDate()-1);hp.range;const Ag=As(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dp,e=>e.getUTCDate()-1);Ag.range;const HNe=As(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dp,e=>Math.floor(e/Dp));HNe.range;function Nv(e){return As(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ul)/DX)}const qE=Nv(0),e3=Nv(1),i3t=Nv(2),s3t=Nv(3),Cw=Nv(4),o3t=Nv(5),a3t=Nv(6);qE.range;e3.range;i3t.range;s3t.range;Cw.range;o3t.range;a3t.range;function Dv(e){return As(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/DX)}const WE=Dv(0),t3=Dv(1),u3t=Dv(2),l3t=Dv(3),Iw=Dv(4),c3t=Dv(5),f3t=Dv(6);WE.range;t3.range;u3t.range;l3t.range;Iw.range;c3t.range;f3t.range;const NA=As(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());NA.range;const DA=As(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());DA.range;const Hd=As(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:As(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Hd.range;const qd=As(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());qd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:As(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});qd.range;function zB(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function d3t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function h3t(e){let t,n,r;e.length!==2?(t=zB,n=(a,u)=>zB(e(a),u),r=(a,u)=>e(a)-u):(t=e===zB||e===d3t?e:p3t,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function p3t(){return 0}const m3t=Math.sqrt(50),g3t=Math.sqrt(10),y3t=Math.sqrt(2);function qNe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=m3t?10:s>=g3t?5:s>=y3t?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?qNe(e,t,n*2):[a,u,l]}function Fpe(e,t,n){return t=+t,e=+e,n=+n,qNe(e,t,n)[2]}function Bpe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Fpe(t,e,n):Fpe(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function WNe(e,t,n,r,i,s){const o=[[rp,1,tp],[rp,5,5*tp],[rp,15,15*tp],[rp,30,30*tp],[s,1,Ul],[s,5,5*Ul],[s,15,15*Ul],[s,30,30*Ul],[i,1,np],[i,3,3*np],[i,6,6*np],[i,12,12*np],[r,1,Dp],[r,2,2*Dp],[n,1,DX],[t,1,Mpe],[t,3,3*Mpe],[e,1,jB]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=h3t(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Bpe(l/jB,c/jB,f));if(h===0)return Aw.every(Math.max(Bpe(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[v3t,_3t]=WNe(qd,DA,WE,HNe,j4,F4),[b3t,w3t]=WNe(Hd,NA,qE,hp,B4,M4);function UB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function VB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function iS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function GNe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=sS(i),c=oS(i),f=sS(s),d=oS(s),h=sS(o),p=oS(o),m=sS(a),g=oS(a),y=sS(u),v=oS(u),_={a:V,A:j,b:G,B:U,c:null,d:qpe,e:qpe,f:H3t,g:eLt,G:nLt,H:z3t,I:U3t,j:V3t,L:YNe,m:q3t,M:W3t,p:P,q:k,Q:Ype,s:Kpe,S:G3t,u:Y3t,U:K3t,V:X3t,w:Q3t,W:J3t,x:null,X:null,y:Z3t,Y:tLt,Z:rLt,"%":Gpe},b={a:H,A:M,b:F,B:J,c:null,d:Wpe,e:Wpe,f:aLt,g:yLt,G:_Lt,H:iLt,I:sLt,j:oLt,L:XNe,m:uLt,M:lLt,p:se,q:ae,Q:Ype,s:Kpe,S:cLt,u:fLt,U:dLt,V:hLt,w:pLt,W:mLt,x:null,X:null,y:gLt,Y:vLt,Z:bLt,"%":Gpe},E={a:C,A:O,b:z,B:N,c:$,d:Vpe,e:Vpe,f:M3t,g:Upe,G:zpe,H:Hpe,I:Hpe,j:R3t,L:L3t,m:$3t,M:N3t,p:I,q:k3t,Q:B3t,s:j3t,S:D3t,u:A3t,U:C3t,V:I3t,w:T3t,W:O3t,x:D,X:B,y:Upe,Y:zpe,Z:P3t,"%":F3t};_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b);function w(ce,le){return function(ge){var ue=[],Fe=-1,ke=0,Ge=ce.length,Re,Oe,Le;for(ge instanceof Date||(ge=new Date(+ge));++Fe<Ge;)ce.charCodeAt(Fe)===37&&(ue.push(ce.slice(ke,Fe)),(Oe=jpe[Re=ce.charAt(++Fe)])!=null?Re=ce.charAt(++Fe):Oe=Re==="e"?" ":"0",(Le=le[Re])&&(Re=Le(ge,Oe)),ue.push(Re),ke=Fe+1);return ue.push(ce.slice(ke,Fe)),ue.join("")}}function x(ce,le){return function(ge){var ue=iS(1900,void 0,1),Fe=S(ue,ce,ge+="",0),ke,Ge;if(Fe!=ge.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(le&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(ke=VB(iS(ue.y,0,1)),Ge=ke.getUTCDay(),ke=Ge>4||Ge===0?t3.ceil(ke):t3(ke),ke=Ag.offset(ke,(ue.V-1)*7),ue.y=ke.getUTCFullYear(),ue.m=ke.getUTCMonth(),ue.d=ke.getUTCDate()+(ue.w+6)%7):(ke=UB(iS(ue.y,0,1)),Ge=ke.getDay(),ke=Ge>4||Ge===0?e3.ceil(ke):e3(ke),ke=hp.offset(ke,(ue.V-1)*7),ue.y=ke.getFullYear(),ue.m=ke.getMonth(),ue.d=ke.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Ge="Z"in ue?VB(iS(ue.y,0,1)).getUTCDay():UB(iS(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Ge+5)%7:ue.w+ue.U*7-(Ge+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,VB(ue)):UB(ue)}}function S(ce,le,ge,ue){for(var Fe=0,ke=le.length,Ge=ge.length,Re,Oe;Fe<ke;){if(ue>=Ge)return-1;if(Re=le.charCodeAt(Fe++),Re===37){if(Re=le.charAt(Fe++),Oe=E[Re in jpe?le.charAt(Fe++):Re],!Oe||(ue=Oe(ce,ge,ue))<0)return-1}else if(Re!=ge.charCodeAt(ue++))return-1}return ue}function I(ce,le,ge){var ue=l.exec(le.slice(ge));return ue?(ce.p=c.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function C(ce,le,ge){var ue=h.exec(le.slice(ge));return ue?(ce.w=p.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function O(ce,le,ge){var ue=f.exec(le.slice(ge));return ue?(ce.w=d.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function z(ce,le,ge){var ue=y.exec(le.slice(ge));return ue?(ce.m=v.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function N(ce,le,ge){var ue=m.exec(le.slice(ge));return ue?(ce.m=g.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function $(ce,le,ge){return S(ce,t,le,ge)}function D(ce,le,ge){return S(ce,n,le,ge)}function B(ce,le,ge){return S(ce,r,le,ge)}function V(ce){return o[ce.getDay()]}function j(ce){return s[ce.getDay()]}function G(ce){return u[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function P(ce){return i[+(ce.getHours()>=12)]}function k(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return o[ce.getUTCDay()]}function M(ce){return s[ce.getUTCDay()]}function F(ce){return u[ce.getUTCMonth()]}function J(ce){return a[ce.getUTCMonth()]}function se(ce){return i[+(ce.getUTCHours()>=12)]}function ae(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var le=w(ce+="",_);return le.toString=function(){return ce},le},parse:function(ce){var le=x(ce+="",!1);return le.toString=function(){return ce},le},utcFormat:function(ce){var le=w(ce+="",b);return le.toString=function(){return ce},le},utcParse:function(ce){var le=x(ce+="",!0);return le.toString=function(){return ce},le}}}var jpe={"-":"",_:" ",0:"0"},Ks=/^\s*\d+/,E3t=/^%/,x3t=/[\\^$*+?|[\]().{}]/g;function sr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function S3t(e){return e.replace(x3t,"\\$&")}function sS(e){return new RegExp("^(?:"+e.map(S3t).join("|")+")","i")}function oS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function T3t(e,t,n){var r=Ks.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function A3t(e,t,n){var r=Ks.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function C3t(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function I3t(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function O3t(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function zpe(e,t,n){var r=Ks.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Upe(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function P3t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function k3t(e,t,n){var r=Ks.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function $3t(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Vpe(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function R3t(e,t,n){var r=Ks.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Hpe(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function N3t(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function D3t(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function L3t(e,t,n){var r=Ks.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function M3t(e,t,n){var r=Ks.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function F3t(e,t,n){var r=E3t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function B3t(e,t,n){var r=Ks.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function j3t(e,t,n){var r=Ks.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function qpe(e,t){return sr(e.getDate(),t,2)}function z3t(e,t){return sr(e.getHours(),t,2)}function U3t(e,t){return sr(e.getHours()%12||12,t,2)}function V3t(e,t){return sr(1+hp.count(Hd(e),e),t,3)}function YNe(e,t){return sr(e.getMilliseconds(),t,3)}function H3t(e,t){return YNe(e,t)+"000"}function q3t(e,t){return sr(e.getMonth()+1,t,2)}function W3t(e,t){return sr(e.getMinutes(),t,2)}function G3t(e,t){return sr(e.getSeconds(),t,2)}function Y3t(e){var t=e.getDay();return t===0?7:t}function K3t(e,t){return sr(qE.count(Hd(e)-1,e),t,2)}function KNe(e){var t=e.getDay();return t>=4||t===0?Cw(e):Cw.ceil(e)}function X3t(e,t){return e=KNe(e),sr(Cw.count(Hd(e),e)+(Hd(e).getDay()===4),t,2)}function Q3t(e){return e.getDay()}function J3t(e,t){return sr(e3.count(Hd(e)-1,e),t,2)}function Z3t(e,t){return sr(e.getFullYear()%100,t,2)}function eLt(e,t){return e=KNe(e),sr(e.getFullYear()%100,t,2)}function tLt(e,t){return sr(e.getFullYear()%1e4,t,4)}function nLt(e,t){var n=e.getDay();return e=n>=4||n===0?Cw(e):Cw.ceil(e),sr(e.getFullYear()%1e4,t,4)}function rLt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function Wpe(e,t){return sr(e.getUTCDate(),t,2)}function iLt(e,t){return sr(e.getUTCHours(),t,2)}function sLt(e,t){return sr(e.getUTCHours()%12||12,t,2)}function oLt(e,t){return sr(1+Ag.count(qd(e),e),t,3)}function XNe(e,t){return sr(e.getUTCMilliseconds(),t,3)}function aLt(e,t){return XNe(e,t)+"000"}function uLt(e,t){return sr(e.getUTCMonth()+1,t,2)}function lLt(e,t){return sr(e.getUTCMinutes(),t,2)}function cLt(e,t){return sr(e.getUTCSeconds(),t,2)}function fLt(e){var t=e.getUTCDay();return t===0?7:t}function dLt(e,t){return sr(WE.count(qd(e)-1,e),t,2)}function QNe(e){var t=e.getUTCDay();return t>=4||t===0?Iw(e):Iw.ceil(e)}function hLt(e,t){return e=QNe(e),sr(Iw.count(qd(e),e)+(qd(e).getUTCDay()===4),t,2)}function pLt(e){return e.getUTCDay()}function mLt(e,t){return sr(t3.count(qd(e)-1,e),t,2)}function gLt(e,t){return sr(e.getUTCFullYear()%100,t,2)}function yLt(e,t){return e=QNe(e),sr(e.getUTCFullYear()%100,t,2)}function vLt(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function _Lt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Iw(e):Iw.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function bLt(){return"+0000"}function Gpe(){return"%"}function Ype(e){return+e}function Kpe(e){return Math.floor(+e/1e3)}var h_,LX,JNe,z4,ZNe;wLt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wLt(e){return h_=GNe(e),LX=h_.format,JNe=h_.parse,z4=h_.utcFormat,ZNe=h_.utcParse,h_}function ELt(e){return new Date(e)}function xLt(e){return e instanceof Date?+e:+new Date(+e)}function MX(e,t,n,r,i,s,o,a,u,l){var c=DNe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),b=l("%Y");function E(w){return(u(w)<w?h:a(w)<w?p:o(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?y:v:n(w)<w?_:b)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,xLt)):d().map(ELt)},c.ticks=function(w){var x=d();return e(x[0],x[x.length-1],w??10)},c.tickFormat=function(w,x){return x==null?E:l(x)},c.nice=function(w){var x=d();return(!w||typeof w.range!="function")&&(w=t(x[0],x[x.length-1],w??10)),w?d(FNe(x,w)):c},c.copy=function(){return xI(c,MX(e,t,n,r,i,s,o,a,u,l))},c}function eDe(){return Tf.apply(MX(b3t,w3t,Hd,NA,qE,hp,B4,M4,rp,LX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SLt(){return Tf.apply(MX(v3t,_3t,qd,DA,WE,Ag,j4,F4,rp,z4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function U4(){var e=0,t=1,n,r,i,s,o=au,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Jp),l.rangeRound=c(_I),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function R0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FX(){var e=Rv(U4()(au));return e.copy=function(){return R0(e,FX())},$0.apply(e,arguments)}function tDe(){var e=kX(U4()).domain([1,10]);return e.copy=function(){return R0(e,tDe()).base(e.base())},$0.apply(e,arguments)}function nDe(){var e=$X(U4());return e.copy=function(){return R0(e,nDe()).constant(e.constant())},$0.apply(e,arguments)}function BX(){var e=RX(U4());return e.copy=function(){return R0(e,BX()).exponent(e.exponent())},$0.apply(e,arguments)}function TLt(){return BX.apply(null,arguments).exponent(.5)}function V4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=au,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=wX(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Jp),h.rangeRound=p(_I),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function rDe(){var e=Rv(V4()(au));return e.copy=function(){return R0(e,rDe())},$0.apply(e,arguments)}function iDe(){var e=kX(V4()).domain([.1,1,10]);return e.copy=function(){return R0(e,iDe()).base(e.base())},$0.apply(e,arguments)}function sDe(){var e=$X(V4());return e.copy=function(){return R0(e,sDe()).constant(e.constant())},$0.apply(e,arguments)}function jX(){var e=RX(V4());return e.copy=function(){return R0(e,jX()).exponent(e.exponent())},$0.apply(e,arguments)}function ALt(){return jX.apply(null,arguments).exponent(.5)}function CLt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const oDe=CLt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function yn(e){return function(){return e}}const Xpe=Math.abs,Po=Math.atan2,ey=Math.cos,ILt=Math.max,HB=Math.min,Lf=Math.sin,Ky=Math.sqrt,Ro=1e-12,Ow=Math.PI,n3=Ow/2,i2=2*Ow;function OLt(e){return e>1?0:e<-1?Ow:Math.acos(e)}function Qpe(e){return e>=1?n3:e<=-1?-n3:Math.asin(e)}function H4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new AX(t)}function PLt(e){return e.innerRadius}function kLt(e){return e.outerRadius}function $Lt(e){return e.startAngle}function RLt(e){return e.endAngle}function NLt(e){return e&&e.padAngle}function DLt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Ro))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function LP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Ky(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,b=v*v+_*_,E=i-s,w=d*m-p*h,x=(_<0?-1:1)*Ky(ILt(0,E*E*b-w*w)),S=(w*_-v*x)/b,I=(-w*v-_*x)/b,C=(w*_+v*x)/b,O=(-w*v+_*x)/b,z=S-g,N=I-y,$=C-g,D=O-y;return z*z+N*N>$*$+D*D&&(S=C,I=O),{cx:S,cy:I,x01:-c,y01:-f,x11:S*(i/E-1),y11:I*(i/E-1)}}function AV(){var e=PLt,t=kLt,n=yn(0),r=null,i=$Lt,s=RLt,o=NLt,a=null,u=H4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-n3,m=s.apply(this,arguments)-n3,g=Xpe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Ro))a.moveTo(0,0);else if(g>i2-Ro)a.moveTo(h*ey(p),h*Lf(p)),a.arc(0,0,h,p,m,!y),d>Ro&&(a.moveTo(d*ey(m),d*Lf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,b=p,E=m,w=g,x=g,S=o.apply(this,arguments)/2,I=S>Ro&&(r?+r.apply(this,arguments):Ky(d*d+h*h)),C=HB(Xpe(h-d)/2,+n.apply(this,arguments)),O=C,z=C,N,$;if(I>Ro){var D=Qpe(I/d*Lf(S)),B=Qpe(I/h*Lf(S));(w-=D*2)>Ro?(D*=y?1:-1,b+=D,E-=D):(w=0,b=E=(p+m)/2),(x-=B*2)>Ro?(B*=y?1:-1,v+=B,_-=B):(x=0,v=_=(p+m)/2)}var V=h*ey(v),j=h*Lf(v),G=d*ey(E),U=d*Lf(E);if(C>Ro){var P=h*ey(_),k=h*Lf(_),H=d*ey(b),M=d*Lf(b),F;if(g<Ow)if(F=DLt(V,j,H,M,P,k,G,U)){var J=V-F[0],se=j-F[1],ae=P-F[0],ce=k-F[1],le=1/Lf(OLt((J*ae+se*ce)/(Ky(J*J+se*se)*Ky(ae*ae+ce*ce)))/2),ge=Ky(F[0]*F[0]+F[1]*F[1]);O=HB(C,(d-ge)/(le-1)),z=HB(C,(h-ge)/(le+1))}else O=z=0}x>Ro?z>Ro?(N=LP(H,M,V,j,h,z,y),$=LP(P,k,G,U,h,z,y),a.moveTo(N.cx+N.x01,N.cy+N.y01),z<C?a.arc(N.cx,N.cy,z,Po(N.y01,N.x01),Po($.y01,$.x01),!y):(a.arc(N.cx,N.cy,z,Po(N.y01,N.x01),Po(N.y11,N.x11),!y),a.arc(0,0,h,Po(N.cy+N.y11,N.cx+N.x11),Po($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,z,Po($.y11,$.x11),Po($.y01,$.x01),!y))):(a.moveTo(V,j),a.arc(0,0,h,v,_,!y)):a.moveTo(V,j),!(d>Ro)||!(w>Ro)?a.lineTo(G,U):O>Ro?(N=LP(G,U,P,k,d,-O,y),$=LP(V,j,H,M,d,-O,y),a.lineTo(N.cx+N.x01,N.cy+N.y01),O<C?a.arc(N.cx,N.cy,O,Po(N.y01,N.x01),Po($.y01,$.x01),!y):(a.arc(N.cx,N.cy,O,Po(N.y01,N.x01),Po(N.y11,N.x11),!y),a.arc(0,0,d,Po(N.cy+N.y11,N.cx+N.x11),Po($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,O,Po($.y11,$.x11),Po($.y01,$.x01),!y))):a.arc(0,0,d,E,b,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Ow/2;return[ey(f)*c,Lf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:yn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:yn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:yn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:yn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:yn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:yn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:yn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function q4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aDe(e){this._context=e}aDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zX(e){return new aDe(e)}function uDe(e){return e[0]}function lDe(e){return e[1]}function cDe(e,t){var n=yn(!0),r=null,i=zX,s=null,o=H4(a);e=typeof e=="function"?e:e===void 0?uDe:yn(e),t=typeof t=="function"?t:t===void 0?lDe:yn(t);function a(u){var l,c=(u=q4(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:yn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:yn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:yn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function fDe(e,t,n){var r=null,i=yn(!0),s=null,o=zX,a=null,u=H4(l);e=typeof e=="function"?e:e===void 0?uDe:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?lDe:yn(+n);function l(f){var d,h,p,m=(f=q4(f)).length,g,y=!1,v,_=new Array(m),b=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),b[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return cDe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function LLt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function MLt(e){return e}function FLt(){var e=MLt,t=LLt,n=null,r=yn(0),i=yn(i2),s=yn(0);function o(a){var u,l=(a=q4(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(i2,Math.max(-i2,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),b;for(u=0;u<l;++u)(b=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=b);for(t!=null?h.sort(function(E,w){return t(p[E],p[w])}):n!=null&&h.sort(function(E,w){return n(a[E],a[w])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],b=p[c],y=m+(b>0?b*f:0)+_,p[c]={data:a[c],index:u,value:b,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:yn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:yn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:yn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:yn(+a),o):s},o}const BLt={draw(e,t){const n=Ky(t/Ow);e.moveTo(n,0),e.arc(0,0,n,0,i2)}};function jLt(e,t){let n=null,r=H4(i);e=typeof e=="function"?e:yn(e||BLt),t=typeof t=="function"?t:yn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Qg(){}function r3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function W4(e){this._context=e}W4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zLt(e){return new W4(e)}function dDe(e){this._context=e}dDe.prototype={areaStart:Qg,areaEnd:Qg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:r3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ULt(e){return new dDe(e)}function hDe(e){this._context=e}hDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:r3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VLt(e){return new hDe(e)}function pDe(e,t){this._basis=new W4(e),this._beta=t}pDe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const HLt=function e(t){function n(r){return t===1?new W4(r):new pDe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function i3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function UX(e,t){this._context=e,this._k=(1-t)/6}UX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:i3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:i3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qLt=function e(t){function n(r){return new UX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function VX(e,t){this._context=e,this._k=(1-t)/6}VX.prototype={areaStart:Qg,areaEnd:Qg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:i3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WLt=function e(t){function n(r){return new VX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function HX(e,t){this._context=e,this._k=(1-t)/6}HX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:i3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GLt=function e(t){function n(r){return new HX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function qX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Ro){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Ro){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function mDe(e,t){this._context=e,this._alpha=t}mDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:qX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YLt=function e(t){function n(r){return t?new mDe(r,t):new UX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gDe(e,t){this._context=e,this._alpha=t}gDe.prototype={areaStart:Qg,areaEnd:Qg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:qX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KLt=function e(t){function n(r){return t?new gDe(r,t):new VX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yDe(e,t){this._context=e,this._alpha=t}yDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XLt=function e(t){function n(r){return t?new yDe(r,t):new HX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function vDe(e){this._context=e}vDe.prototype={areaStart:Qg,areaEnd:Qg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QLt(e){return new vDe(e)}function Jpe(e){return e<0?-1:1}function Zpe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Jpe(s)+Jpe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function eme(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function qB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function s3(e){this._context=e}s3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qB(this,this._t0,eme(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qB(this,eme(this,n=Zpe(this,e,t)),n);break;default:qB(this,this._t0,n=Zpe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function _De(e){this._context=new bDe(e)}(_De.prototype=Object.create(s3.prototype)).point=function(e,t){s3.prototype.point.call(this,t,e)};function bDe(e){this._context=e}bDe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function JLt(e){return new s3(e)}function ZLt(e){return new _De(e)}function wDe(e){this._context=e}wDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=tme(e),i=tme(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function tme(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function eMt(e){return new wDe(e)}function G4(e,t){this._context=e,this._t=t}G4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function tMt(e){return new G4(e,.5)}function nMt(e){return new G4(e,0)}function rMt(e){return new G4(e,1)}function nme(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function rme(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function iMt(e,t){return e[t]}function sMt(e){const t=[];return t.key=e,t}function oMt(){var e=yn([]),t=rme,n=nme,r=iMt;function i(s){var o=Array.from(e.apply(this,arguments),sMt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=q4(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:yn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?rme:typeof s=="function"?s:yn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??nme,i):n},i}function JS(e,t,n){this.k=e,this.x=t,this.y=n}JS.prototype={constructor:JS,scale:function(e){return e===1?this:new JS(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new JS(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};JS.prototype;function WX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=A.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=A.useCallback(c=>(s?z4("%B"):VE(".2s"))(c),[s]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:R.jsx(Ug,{children:R.jsx(Jl,{spacing:3,children:R.jsx(Ot,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?R.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>R.jsxs("g",{transform:`translate(${f}, ${n})`,children:[R.jsx("line",{y2:"6",stroke:"currentColor"}),o?R.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,R.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:R.jsx(Ug,{children:R.jsx(LAe,{withinPortal:!0,label:c,children:R.jsx(Ot,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const aMt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:WX},Symbol.toStringTag,{value:"Module"}));function EDe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=A.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Ug,{children:R.jsx(Jl,{spacing:3,children:R.jsx(Ot,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>R.jsxs("g",{transform:`translate(${n}, ${l})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),s?R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,R.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:R.jsx("foreignObject",{width:a,height:20,children:R.jsx(Jl,{style:{width:"100%",height:"100%"},position:"right",children:R.jsx(Ot,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const uMt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:EDe},Symbol.toStringTag,{value:"Module"})),El={top:15,left:100,right:50,bottom:50};function CV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Eb(),o=A.useMemo(()=>s-El.left-El.right,[s]),a=A.useMemo(()=>i-El.top-El.bottom,[i]),u=A.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return HE(oDe).domain(d)},[n,t.category]),l=A.useMemo(()=>e?Np([El.left,o+El.left]).domain([0,DOt(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=A.useMemo(()=>e?EI([El.top,a+El.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=A.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:R.jsxs("g",{children:[R.jsx("rect",{x:El.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-El.left},h),R.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?R.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[R.jsx(WX,{xScale:l,yRange:c.range(),vertPosition:a+El.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?R.jsx(EDe,{yScale:c,horizontalPosition:El.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):R.jsx(C0,{})}const lMt=Object.freeze(Object.defineProperty({__proto__:null,Bar:CV,default:CV},Symbol.toStringTag,{value:"Module"})),nr=Array.isArray;function yu(e){return e!=null?nr(e)?e:[e]:[]}function cMt(e=0,t=1/0){return`${ime(e)} < row_number() && row_number() <= ${ime(t)}`}function ime(e){return e<0?`count() + ${e}`:e}class xDe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(cMt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,yu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function vn(e){throw Error(e)}function Ia(e){return typeof e=="number"}function ei(e){return typeof e=="function"}function Y4(e,t){const n=Array(e);if(ei(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let fMt=class extends xDe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){vn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){vn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){vn("Not implemented")}getter(t){vn("Not implemented")}objects(t){vn("Not implemented")}object(t){vn("Not implemented")}[Symbol.iterator](){vn("Not implemented")}print(t={}){Ia(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=Y4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},dMt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},hMt=function(e){return e&&ei(e.get)?e:new dMt(e)};function Lp(e){return e instanceof Date}function ta(e){return e===Object(e)}function o3(e){return e instanceof RegExp}function Eo(e){return typeof e=="string"}function pMt(e,t){const n=r=>vn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?sme(e.entries(),t):Lp(e)?n("Date"):o3(e)?n("RegExp"):Eo(e)?n():nr(e)?mMt(e,t):ei(e[Symbol.iterator])?gMt(e,t):ta(e)?sme(Object.entries(e),t):n()}function sme(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function mMt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function gMt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:yMt}=Object.prototype;function pf(e,t){return yMt.call(e,t)}function _l(e){return e?new ome({...e.data()},e.columnNames()):new ome}class ome{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return pf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Xn=void 0,vMt=Object.getPrototypeOf(Int8Array);function SI(e){return e instanceof vMt}function Xy(e){return nr(e)||SI(e)}function Xc(e){return e!=null&&e===e}const aS=e=>Xy(e)||Eo(e),_Mt={compact:e=>Xy(e)?e.filter(t=>Xc(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>aS(e)?e.includes(t,n):!1,indexof:(e,t)=>aS(e)?e.indexOf(t):-1,join:(e,t)=>Xy(e)?e.join(t):Xn,lastindexof:(e,t)=>aS(e)?e.lastIndexOf(t):-1,length:e=>aS(e)?e.length:0,pluck:(e,t)=>Xy(e)?e.map(n=>Xc(n)?n[t]:Xn):Xn,reverse:e=>Xy(e)?e.slice().reverse():Eo(e)?e.split("").reverse().join(""):Xn,slice:(e,t,n)=>aS(e)?e.slice(t,n):Xn};function bMt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function h$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Mf=e=>(e<10?"0":"")+e,wMt=e=>e<0?"-"+h$(-e,6):e>9999?"+"+h$(e,6):h$(e,4);function SDe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return wMt(e)+"-"+Mf(t+1)+"-"+Mf(n)+(!u||o?"T"+Mf(r)+":"+Mf(i)+":"+Mf(s)+"."+h$(o,3)+l:s?"T"+Mf(r)+":"+Mf(i)+":"+Mf(s)+l:i||r||!a?"T"+Mf(r)+":"+Mf(i)+l:"")}function TDe(e,t){return isNaN(e)?"Invalid Date":SDe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function K4(e,t){return isNaN(e)?"Invalid Date":SDe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const EMt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function xMt(e){return e.match(EMt)}function SMt(e,t=Date.parse){return xMt(e)?t(e):e}const ADe=6e4,CDe=864e5,IDe=6048e5,Oi=new Date,Pi=new Date,Bi=e=>(Oi.setTime(typeof e=="string"?SMt(e):e),Oi);function TMt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function AMt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function CMt(e){Pi.setTime(+e),Pi.setHours(0,0,0,0),Oi.setTime(+Pi),Oi.setMonth(0),Oi.setDate(1);const t=(Pi.getTimezoneOffset()-Oi.getTimezoneOffset())*ADe;return Math.floor(1+(Pi-Oi-t)/CDe)}function IMt(e){Pi.setTime(+e),Pi.setUTCHours(0,0,0,0);const t=Date.UTC(Pi.getUTCFullYear(),0,1);return Math.floor(1+(Pi-t)/CDe)}function OMt(e,t){const n=t||0;Pi.setTime(+e),Pi.setDate(Pi.getDate()-(Pi.getDay()+7-n)%7),Pi.setHours(0,0,0,0),Oi.setTime(+e),Oi.setMonth(0),Oi.setDate(1),Oi.setDate(1-(Oi.getDay()+7-n)%7),Oi.setHours(0,0,0,0);const r=(Pi.getTimezoneOffset()-Oi.getTimezoneOffset())*ADe;return Math.floor((1+(Pi-Oi)-r)/IDe)}function PMt(e,t){const n=t||0;return Pi.setTime(+e),Pi.setUTCDate(Pi.getUTCDate()-(Pi.getUTCDay()+7-n)%7),Pi.setUTCHours(0,0,0,0),Oi.setTime(+e),Oi.setUTCMonth(0),Oi.setUTCDate(1),Oi.setUTCDate(1-(Oi.getUTCDay()+7-n)%7),Oi.setUTCHours(0,0,0,0),Math.floor((1+(Pi-Oi))/IDe)}const kMt={format_date:(e,t)=>TDe(Bi(e),!t),format_utcdate:(e,t)=>K4(Bi(e),!t),timestamp:e=>+Bi(e),year:e=>Bi(e).getFullYear(),quarter:e=>Math.floor(Bi(e).getMonth()/3),month:e=>Bi(e).getMonth(),date:e=>Bi(e).getDate(),dayofweek:e=>Bi(e).getDay(),hours:e=>Bi(e).getHours(),minutes:e=>Bi(e).getMinutes(),seconds:e=>Bi(e).getSeconds(),milliseconds:e=>Bi(e).getMilliseconds(),utcyear:e=>Bi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Bi(e).getUTCMonth()/3),utcmonth:e=>Bi(e).getUTCMonth(),utcdate:e=>Bi(e).getUTCDate(),utcdayofweek:e=>Bi(e).getUTCDay(),utchours:e=>Bi(e).getUTCHours(),utcminutes:e=>Bi(e).getUTCMinutes(),utcseconds:e=>Bi(e).getUTCSeconds(),utcmilliseconds:e=>Bi(e).getUTCMilliseconds(),datetime:TMt,dayofyear:CMt,week:OMt,utcdatetime:AMt,utcdayofyear:IMt,utcweek:PMt,now:Date.now};function GX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Lp(e)||Lp(t)?+e==+t:o3(e)&&o3(t)?e+""==t+"":ta(e)&&ta(t)?$Mt(e,t):!1}function $Mt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return ame(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!ame(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!GX(e[o],t[o]))return!1}return!0}function ame(e,t,n=GX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const RMt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let NMt=Math.random;function GE(){return NMt()}const DMt={random:GE,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function YX(e){return e instanceof Map}function LMt(e){return e instanceof Set}function p$(e){return YX(e)||LMt(e)}function WB(e){return Array.from(e)}const MMt={has:(e,t)=>p$(e)?e.has(t):e!=null?pf(e,t):!1,keys:e=>YX(e)?WB(e.keys()):e!=null?Object.keys(e):[],values:e=>p$(e)?WB(e.values()):e!=null?Object.values(e):[],entries:e=>p$(e)?WB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Xn};function FMt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(pf(t,e))return t[e];return n!==void 0?n:e}function BMt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const jMt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},ib={bin:bMt,equal:GX,recode:FMt,sequence:BMt,..._Mt,...kMt,...RMt,...DMt,...MMt,...jMt};function LA(e){return typeof e=="bigint"}function Wd(e){return e===void 0?e+"":LA(e)?e+"n":JSON.stringify(e)}function dn(e,t=[],n=[]){return new zMt(e,yu(t),yu(n))}let zMt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Wd(n)}]`),...this.params.map(Wd)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const ODe=e=>dn("any",e),PDe=()=>dn("count"),kDe=e=>dn("array_agg",e),$De=e=>dn("array_agg_distinct",e),RDe=(e,t)=>dn("map_agg",[e,t]),NDe=(e,t)=>dn("object_agg",[e,t]),DDe=(e,t)=>dn("entries_agg",[e,t]);({...ib});function UMt(e,t){e=p$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function VMt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function HMt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function qMt(e,t,n,r){const i=r==="map"||r===!0?RDe:r==="entries"?DDe:r==="object"?NDe:vn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=UMt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:kDe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const WMt="ArrayPattern",GMt="ArrowFunctionExpression",YMt="FunctionExpression",Cg="Identifier",YE="Literal",LDe="MemberExpression",KMt="ObjectExpression",MDe="ObjectPattern",FDe="Property",TI="Column",XMt="Constant",QMt="Dictionary",JMt="Function",ZMt="Parameter",BDe="Op",jr=(e,t)=>{const n=e6t[e.type];return n?n(e,t):vn(`Unsupported expression construct: ${e.type}`)},GB=(e,t)=>"("+jr(e.left,t)+" "+e.operator+" "+jr(e.right,t)+")",YB=(e,t)=>"("+Wf(e.params,t)+")=>"+jr(e.body,t),ume=(e,t)=>jr(e.callee,t)+"("+Wf(e.arguments,t)+")",Wf=(e,t,n=",")=>e.map(r=>jr(r,t)).join(n),jDe=e=>e.computed?`[${Wd(e.name)}]`:`.${e.name}`,lme=(e,t,n)=>{const r=e.table||"";return`data${r}${jDe(e)}.${n}(${t.index}${r})`},e6t={Constant:e=>e.raw,Column:(e,t)=>lme(e,t,"get"),Dictionary:(e,t)=>lme(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${jDe(e)}`,Op:(e,t)=>`op(${Wd(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+jr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=jr(e.object,t),i=jr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:ume,NewExpression:(e,t)=>"new "+ume(e,t),ArrayExpression:(e,t)=>"["+Wf(e.elements,t)+"]",AssignmentExpression:GB,BinaryExpression:GB,LogicalExpression:GB,UnaryExpression:(e,t)=>"("+e.operator+jr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+jr(e.test,t)+"?"+jr(e.consequent,t)+":"+jr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Wf(e.properties,t)+"})",Property:(e,t)=>{const n=jr(e.key,t);return(e.computed?`[${n}]`:n)+":"+jr(e.value,t)},ArrowFunctionExpression:YB,FunctionExpression:YB,FunctionDeclaration:YB,ArrayPattern:(e,t)=>"["+Wf(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Wf(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Wf(e.declarations,t,","),VariableDeclarator:(e,t)=>jr(e.id,t)+"="+jr(e.init,t),SpreadElement:(e,t)=>"..."+jr(e.argument,t),BlockStatement:(e,t)=>"{"+Wf(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>jr(e.expression,t),IfStatement:(e,t)=>"if ("+jr(e.test,t)+")"+jr(e.consequent,t)+(e.alternate?" else "+jr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+jr(e.discriminant,t)+") {"+Wf(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+jr(e.test,t):"default")+": "+Wf(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+jr(e.argument,t),Program:(e,t)=>jr(e.body[0],t)};function a3(e,t={index:"row"}){return jr(e,t)}function t6t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Pw(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Lp(e)?+e:nr(e)||SI(e)?`[${e.map(Pw)}]`:o3(e)?e+"":n6t(e)}function n6t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${Pw(e[r])}`;return t+="}",t}function u3(e,t){const n=e.length;return n===1?(r,i)=>Pw(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=Pw(a)}return s}}function r6t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Pw(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=Pw(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Lh(){}function i6t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function cs(e){return e.init=e.init||Lh,e.add=e.add||Lh,e.rem=e.rem||Lh,e}function cme(e,t){return e.product_v=!1,e.product=t}const zDe={count:{create:()=>cs({value:e=>e.count}),param:[]},array_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Xn}),param:[1]},valid:{create:()=>cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=r6t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>cs({value:e=>{let t=Xn,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Xn,add:(e,t)=>LA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>cme(e,1),value:e=>e.valid?e.product_v?cme(e,i6t(e.list.values())):e.product:void 0,add:(e,t)=>LA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Xn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>cs({value:e=>e.valid?e.mean:Xn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Xn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>cs({value:e=>e.valid>1?e.dev/e.valid:Xn}),param:[1],req:["variance"]},stdev:{create:()=>cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Xn}),param:[1],req:["variance"]},stdevp:{create:()=>cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Xn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Xn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Xn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Xn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Xn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Xn,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>cs({value:e=>e.valid>1?e.cov/e.valid:Xn}),param:[2],req:["covariance"]},corr:{create:()=>cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Xn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>cs({value:i=>t6t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},fme={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},dme={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},UDe={row_number:{create(){return{init:Lh,value:e=>e.index+1}},param:[]},rank:fme,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=fme.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:dme,ntile:{create(e){e=+e,e>0||vn("ntile num must be greater than zero.");const{init:t,value:n}=dme.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Xn){return e=+e||1,{init:Lh,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Xn){return e=+e||1,{init:Lh,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Lh,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Lh,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||vn("nth_value nth must be greater than zero."),{init:Lh,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Xn}}},param:[1,1]},fill_down:{create(e=Xn){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Xc(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Xn){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=s6t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function s6t(e,t,n){for(const r=e.size;n<r;++n)if(Xc(e.value(n,t)))return n;return-1}function KX(e){return pf(zDe,e)}function XX(e){return pf(UDe,e)}function VDe(e){return pf(ib,e)||e==="row_object"}function HDe(e){return KX(e)&&zDe[e]}function qDe(e){return XX(e)&&UDe[e]}function uS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const QX={escape:(e,t,n)=>uS(e,t,n),expr:(e,t)=>uS(`(row,data,op)=>${e}`,ib,t),expr2:(e,t)=>uS(`(row0,data0,row,data)=>${e}`,ib,t),join:(e,t)=>uS(`(row1,data1,row2,data2)=>${e}`,ib,t),param:(e,t)=>uS(e,ib,t)},o6t={"==":1,"!=":1,"===":1,"!==":1};function WDe(e,t,n=0,r,i){if(e.type=TI,e.name=t,e.table=n,i&&r&&ei(r.keyFor)){const s=o6t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===YE&&a6t(i,e,s,r.keyFor(s.value))}return e}function a6t(e,t,n,r){return r<0?(e.type=YE,e.value=!1,e.raw="false"):(t.type=QMt,n.value=r,n.raw=r+""),!0}function X4(e){return nr(e)?e:YX(e)?e.entries():e?Object.entries(e):[]}const GDe="row_object";function YDe(e,t){e.type=KMt;const n=e.properties=[];for(const r of X4(t)){const[i,s]=nr(r)?r:[r,r];n.push({type:FDe,key:{type:YE,raw:Wd(s)},value:WDe({computed:!0},i)})}return e}function KDe(e){return a3(YDe({},e))}function XDe(e){return QX.expr(KDe(e))}const u6t=new TextDecoder("utf-8"),IV=e=>u6t.decode(e),l6t=new TextEncoder,JX=e=>l6t.encode(e),[hEn,QDe]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Lv,pEn]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Mv,mEn]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),c6t=e=>typeof e=="boolean",Ya=e=>typeof e=="function",N0=e=>e!=null&&Object(e)===e,Q4=e=>N0(e)&&Ya(e.then),ZX=e=>N0(e)&&Ya(e[Symbol.iterator]),J4=e=>N0(e)&&Ya(e[Symbol.asyncIterator]),f6t=e=>N0(e)&&"done"in e&&"value"in e,JDe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,d6t=e=>N0(e)&&Ya(e.abort)&&Ya(e.getWriter)&&!JDe(e),h6t=e=>N0(e)&&Ya(e.end)&&Ya(e.write)&&c6t(e.writable)&&!JDe(e),p6t=e=>N0(e)&&Ya(e.clear)&&Ya(e.bytes)&&Ya(e.position)&&Ya(e.setPosition)&&Ya(e.capacity)&&Ya(e.getBufferIdentifier)&&Ya(e.createLong),eQ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function m6t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function l3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Gd(e,t){const n=m6t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?l3(o,s,a):o=s;break}l3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function io(e,t){let n=f6t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=JX(n)),n instanceof ArrayBuffer?new e(n):n instanceof eQ?new e(n):p6t(n)?io(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const lS=e=>io(Int32Array,e),vr=e=>io(Uint8Array,e),OV=e=>(e.next(),e);function*g6t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof eQ?n(t):ZX(t)?t:n(t);return yield*OV(function*(i){let s=null;do s=i.next(yield io(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const y6t=e=>g6t(Uint8Array,e);function ZDe(e,t){return Uy(this,arguments,function*(){if(Q4(t))return yield Bn(yield Bn(yield*C9(BT(ZDe(e,yield Bn(t))))));const r=function(o){return Uy(this,arguments,function*(){yield yield Bn(yield Bn(o))})},i=function(o){return Uy(this,arguments,function*(){yield Bn(yield*C9(BT(OV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof eQ?r(t):ZX(t)?i(t):J4(t)?t:r(t);return yield Bn(yield*C9(BT(OV(function(o){return Uy(this,arguments,function*(){let a=null;do a=yield Bn(o.next(yield yield Bn(io(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Bn(new e)})}const v6t=e=>ZDe(Uint8Array,e);function tQ(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function _6t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const hme={fromIterable(e){return MP(b6t(e))},fromAsyncIterable(e){return MP(w6t(e))},fromDOMStream(e){return MP(E6t(e))},fromNodeStream(e){return MP(S6t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},MP=e=>(e.next(),e);function*b6t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Gd(r,o)[0]:([i,r,a]=Gd(r,o),i)}({cmd:s,size:o}=yield null);const l=y6t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function w6t(e){return Uy(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Gd(i,a)[0]:([s,i,u]=Gd(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=v6t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.next()):yield Bn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Bn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Bn(c.return(new Uint8Array(0))))}return yield Bn(null)})}function E6t(e){return Uy(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Gd(i,a)[0]:([s,i,u]=Gd(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=new x6t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.read()):yield Bn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(vr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Bn(c.cancel(f)))}finally{r===!1?yield Bn(c.cancel()):e.locked&&c.releaseLock()}return yield Bn(null)})}class x6t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return jh(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return jh(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=vr(n)),n})}}const KB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function S6t(e){return Uy(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Gd(l,a)[0]:([c,l,u]=Gd(l,a),c)}if({cmd:o,size:a}=yield yield Bn(null),e.isTTY)return yield yield Bn(new Uint8Array(0)),yield Bn(null);try{n[0]=KB(e,"end"),n[1]=KB(e,"error");do{if(n[2]=KB(e,"readable"),[r,s]=yield Bn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=vr(e.read(a-u)),c.byteLength<a-u&&(c=vr(e.read()))):c=vr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Bn(f()));while(a<u)}while(!i)}finally{yield Bn(d(n,r==="error"?s:null))}return yield Bn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Hu;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Hu||(Hu={}));var Zl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zl||(Zl={}));var yo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(yo||(yo={}));var Yd;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Yd||(Yd={}));var jn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jn||(jn={}));var Kd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Kd||(Kd={}));var Ns;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ns||(Ns={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(re||(re={}));var kh;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(kh||(kh={}));const T6t=void 0;function Ig(e){if(e===null)return"null";if(e===T6t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Lv||e instanceof Mv?`[${[...e].map(t=>Ig(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const A6t=Symbol.for("isArrowBigNum");function Af(e,...t){return t.length===0?Object.setPrototypeOf(io(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Af.prototype[A6t]=!0;Af.prototype.toJSON=function(){return`"${g1(this)}"`};Af.prototype.valueOf=function(){return e3e(this)};Af.prototype.toString=function(){return g1(this)};Af.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return e3e(this);case"string":return g1(this);case"default":return PV(this)}return g1(this)};function jb(...e){return Af.apply(this,e)}function zb(...e){return Af.apply(this,e)}function MA(...e){return Af.apply(this,e)}Object.setPrototypeOf(jb.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(zb.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(MA.prototype,Object.create(Uint32Array.prototype));Object.assign(jb.prototype,Af.prototype,{constructor:jb,signed:!0,TypedArray:Int32Array,BigIntArray:Lv});Object.assign(zb.prototype,Af.prototype,{constructor:zb,signed:!1,TypedArray:Uint32Array,BigIntArray:Mv});Object.assign(MA.prototype,Af.prototype,{constructor:MA,signed:!0,TypedArray:Uint32Array,BigIntArray:Mv});function e3e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Mv(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let g1,PV;QDe?(PV=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:XB(e),g1=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:XB(e)):(g1=XB,PV=g1);function XB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class nQ{static new(t,n){switch(n){case!0:return new jb(t);case!1:return new zb(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Lv:return new jb(t)}return t.byteLength===16?new MA(t):new zb(t)}static signed(t){return new jb(t)}static unsigned(t){return new zb(t)}static decimal(t){return new MA(t)}constructor(t,n){return nQ.new(t,n)}}var t3e,n3e,r3e,i3e,s3e,o3e,a3e,u3e,l3e,c3e,f3e,d3e,h3e,p3e,m3e,g3e,y3e,v3e,_3e;class Pn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Pn.isUnion(t)&&t.mode===Zl.Dense}static isSparseUnion(t){return Pn.isUnion(t)&&t.mode===Zl.Sparse}get typeId(){return re.NONE}}t3e=Symbol.toStringTag;Pn[t3e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Pn.prototype);let Mp=class extends Pn{toString(){return"Null"}get typeId(){return re.Null}};n3e=Symbol.toStringTag;Mp[n3e]=(e=>e[Symbol.toStringTag]="Null")(Mp.prototype);class Oa extends Pn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Lv:Mv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}r3e=Symbol.toStringTag;Oa[r3e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Oa.prototype);class rQ extends Oa{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class iQ extends Oa{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Jg extends Oa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class sQ extends Oa{constructor(){super(!0,64)}get ArrayType(){return Lv}}class oQ extends Oa{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class aQ extends Oa{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class uQ extends Oa{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class lQ extends Oa{constructor(){super(!1,64)}get ArrayType(){return Mv}}Object.defineProperty(rQ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(iQ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Jg.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(sQ.prototype,"ArrayType",{value:Lv});Object.defineProperty(oQ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(aQ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(uQ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(lQ.prototype,"ArrayType",{value:Mv});class Zg extends Pn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case yo.HALF:return Uint16Array;case yo.SINGLE:return Float32Array;case yo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}i3e=Symbol.toStringTag;Zg[i3e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Zg.prototype);class b3e extends Zg{constructor(){super(yo.HALF)}}class cQ extends Zg{constructor(){super(yo.SINGLE)}}class fQ extends Zg{constructor(){super(yo.DOUBLE)}}Object.defineProperty(b3e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(cQ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(fQ.prototype,"ArrayType",{value:Float64Array});let FA=class extends Pn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};s3e=Symbol.toStringTag;FA[s3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(FA.prototype);let kw=class extends Pn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};o3e=Symbol.toStringTag;kw[o3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(kw.prototype);let BA=class extends Pn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};a3e=Symbol.toStringTag;BA[a3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(BA.prototype);let c3=class extends Pn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};u3e=Symbol.toStringTag;c3[u3e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(c3.prototype);class $w extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Yd[this.unit]}>`}}l3e=Symbol.toStringTag;$w[l3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))($w.prototype);class C6t extends $w{constructor(){super(Yd.DAY)}}class I6t extends $w{constructor(){super(Yd.MILLISECOND)}}class Fp extends Pn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${jn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Lv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}c3e=Symbol.toStringTag;Fp[c3e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Fp.prototype);class O6t extends Fp{constructor(){super(jn.SECOND,32)}}class P6t extends Fp{constructor(){super(jn.MILLISECOND,32)}}class k6t extends Fp{constructor(){super(jn.MICROSECOND,64)}}class $6t extends Fp{constructor(){super(jn.NANOSECOND,64)}}class f3 extends Pn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${jn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}f3e=Symbol.toStringTag;f3[f3e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(f3.prototype);class Rw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Kd[this.unit]}>`}}d3e=Symbol.toStringTag;Rw[d3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Rw.prototype);class R6t extends Rw{constructor(){super(Kd.DAY_TIME)}}class N6t extends Rw{constructor(){super(Kd.YEAR_MONTH)}}let Nw=class extends Pn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};h3e=Symbol.toStringTag;Nw[h3e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Nw.prototype);class zo extends Pn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}p3e=Symbol.toStringTag;zo[p3e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(zo.prototype);class jA extends Pn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}m3e=Symbol.toStringTag;jA[m3e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(jA.prototype);let d3=class extends Pn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};g3e=Symbol.toStringTag;d3[g3e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(d3.prototype);let Dw=class extends Pn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};y3e=Symbol.toStringTag;Dw[y3e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Dw.prototype);class zA extends Pn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}v3e=Symbol.toStringTag;zA[v3e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(zA.prototype);const D6t=(e=>()=>++e)(-1);class e0 extends Pn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?D6t():typeof r=="number"?r:r.low}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}_3e=Symbol.toStringTag;e0[_3e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(e0.prototype);function Kf(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Vn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return L6t(this,t,n)}getVisitFnByTypeId(t,n=!0){return D_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function L6t(e,t,n=!0){return typeof t=="number"?D_(e,t,n):typeof t=="string"&&t in re?D_(e,re[t],n):t&&t instanceof Pn?D_(e,pme(t),n):t!=null&&t.type&&t.type instanceof Pn?D_(e,pme(t.type),n):D_(e,re.NONE,n)}function D_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function pme(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case yo.HALF:return re.Float16;case yo.SINGLE:return re.Float32;case yo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case jn.SECOND:return re.TimeSecond;case jn.MILLISECOND:return re.TimeMillisecond;case jn.MICROSECOND:return re.TimeMicrosecond;case jn.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case jn.SECOND:return re.TimestampSecond;case jn.MILLISECOND:return re.TimestampMillisecond;case jn.MICROSECOND:return re.TimestampMicrosecond;case jn.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Yd.DAY:return re.DateDay;case Yd.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Kd.DAY_TIME:return re.IntervalDayTime;case Kd.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Zl.Dense:return re.DenseUnion;case Zl.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Vn.prototype.visitInt8=null;Vn.prototype.visitInt16=null;Vn.prototype.visitInt32=null;Vn.prototype.visitInt64=null;Vn.prototype.visitUint8=null;Vn.prototype.visitUint16=null;Vn.prototype.visitUint32=null;Vn.prototype.visitUint64=null;Vn.prototype.visitFloat16=null;Vn.prototype.visitFloat32=null;Vn.prototype.visitFloat64=null;Vn.prototype.visitDateDay=null;Vn.prototype.visitDateMillisecond=null;Vn.prototype.visitTimestampSecond=null;Vn.prototype.visitTimestampMillisecond=null;Vn.prototype.visitTimestampMicrosecond=null;Vn.prototype.visitTimestampNanosecond=null;Vn.prototype.visitTimeSecond=null;Vn.prototype.visitTimeMillisecond=null;Vn.prototype.visitTimeMicrosecond=null;Vn.prototype.visitTimeNanosecond=null;Vn.prototype.visitDenseUnion=null;Vn.prototype.visitSparseUnion=null;Vn.prototype.visitIntervalDayTime=null;Vn.prototype.visitIntervalYearMonth=null;const w3e=new Float64Array(1),p_=new Uint32Array(w3e.buffer);function E3e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function x3e(e){if(e!==e)return 32256;w3e[0]=e;const t=(p_[1]&2147483648)>>16&65535;let n=p_[1]&2146435072,r=0;return n>=1089470464?p_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(p_[1]&1048575)>>10):n<=1056964608?(r=1048576+(p_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(p_[1]&1048575)+512>>10),t|n|r&65535}class un extends Vn{}function mn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const M6t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},dQ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},F6t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},B6t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},S3e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},j6t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Zp=({values:e},t,n)=>{e[t]=n},hQ=({values:e},t,n)=>{e[t]=n},T3e=({values:e},t,n)=>{e[t]=x3e(n)},z6t=(e,t,n)=>{switch(e.type.precision){case yo.HALF:return T3e(e,t,n);case yo.SINGLE:case yo.DOUBLE:return hQ(e,t,n)}},pQ=({values:e},t,n)=>{M6t(e,t,n.valueOf())},mQ=({values:e},t,n)=>{dQ(e,t*2,n.valueOf())},A3e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},U6t=({values:e,valueOffsets:t},n,r)=>S3e(e,t,n,r),V6t=({values:e,valueOffsets:t},n,r)=>{S3e(e,t,n,JX(r))},C3e=(e,t,n)=>{e.type.unit===Yd.DAY?pQ(e,t,n):mQ(e,t,n)},gQ=({values:e},t,n)=>dQ(e,t*2,n/1e3),yQ=({values:e},t,n)=>dQ(e,t*2,n),vQ=({values:e},t,n)=>F6t(e,t*2,n),_Q=({values:e},t,n)=>B6t(e,t*2,n),I3e=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return gQ(e,t,n);case jn.MILLISECOND:return yQ(e,t,n);case jn.MICROSECOND:return vQ(e,t,n);case jn.NANOSECOND:return _Q(e,t,n)}},bQ=({values:e},t,n)=>{e[t]=n},wQ=({values:e},t,n)=>{e[t]=n},EQ=({values:e},t,n)=>{e[t]=n},xQ=({values:e},t,n)=>{e[t]=n},O3e=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return bQ(e,t,n);case jn.MILLISECOND:return wQ(e,t,n);case jn.MICROSECOND:return EQ(e,t,n);case jn.NANOSECOND:return xQ(e,t,n)}},P3e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},H6t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ec.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},q6t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ec.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},W6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),G6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Y6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),K6t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),X6t=(e,t,n)=>{const r=e.type.children.map(s=>ec.getVisitFn(s.type)),i=n instanceof Map?Y6t(t,n):n instanceof rr?G6t(t,n):Array.isArray(n)?W6t(t,n):K6t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Q6t=(e,t,n)=>{e.type.mode===Zl.Dense?k3e(e,t,n):$3e(e,t,n)},k3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ec.visit(i,e.valueOffsets[t],n)},$3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ec.visit(i,t,n)},J6t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},R3e=(e,t,n)=>{e.type.unit===Kd.DAY_TIME?SQ(e,t,n):TQ(e,t,n)},SQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},TQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Z6t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ec.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};un.prototype.visitBool=mn(j6t);un.prototype.visitInt=mn(Zp);un.prototype.visitInt8=mn(Zp);un.prototype.visitInt16=mn(Zp);un.prototype.visitInt32=mn(Zp);un.prototype.visitInt64=mn(Zp);un.prototype.visitUint8=mn(Zp);un.prototype.visitUint16=mn(Zp);un.prototype.visitUint32=mn(Zp);un.prototype.visitUint64=mn(Zp);un.prototype.visitFloat=mn(z6t);un.prototype.visitFloat16=mn(T3e);un.prototype.visitFloat32=mn(hQ);un.prototype.visitFloat64=mn(hQ);un.prototype.visitUtf8=mn(V6t);un.prototype.visitBinary=mn(U6t);un.prototype.visitFixedSizeBinary=mn(A3e);un.prototype.visitDate=mn(C3e);un.prototype.visitDateDay=mn(pQ);un.prototype.visitDateMillisecond=mn(mQ);un.prototype.visitTimestamp=mn(I3e);un.prototype.visitTimestampSecond=mn(gQ);un.prototype.visitTimestampMillisecond=mn(yQ);un.prototype.visitTimestampMicrosecond=mn(vQ);un.prototype.visitTimestampNanosecond=mn(_Q);un.prototype.visitTime=mn(O3e);un.prototype.visitTimeSecond=mn(bQ);un.prototype.visitTimeMillisecond=mn(wQ);un.prototype.visitTimeMicrosecond=mn(EQ);un.prototype.visitTimeNanosecond=mn(xQ);un.prototype.visitDecimal=mn(P3e);un.prototype.visitList=mn(H6t);un.prototype.visitStruct=mn(X6t);un.prototype.visitUnion=mn(Q6t);un.prototype.visitDenseUnion=mn(k3e);un.prototype.visitSparseUnion=mn($3e);un.prototype.visitDictionary=mn(J6t);un.prototype.visitInterval=mn(R3e);un.prototype.visitIntervalDayTime=mn(SQ);un.prototype.visitIntervalYearMonth=mn(TQ);un.prototype.visitFixedSizeList=mn(Z6t);un.prototype.visitMap=mn(q6t);const ec=new un,Lc=Symbol.for("parent"),Ub=Symbol.for("rowIndex");class AQ{constructor(t,n){return this[Lc]=t,this[Ub]=n,new Proxy(this,new t4t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ub],n=this[Lc],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=vu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Ig(t)}: ${Ig(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new e4t(this[Lc],this[Ub])}}class e4t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,vu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(AQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Lc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ub]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class t4t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Lc].type.children.map(n=>n.name)}has(t,n){return t[Lc].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Lc].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Lc].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=vu.visit(t[Lc].children[r],t[Ub]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Lc].type.children.findIndex(s=>s.name===n);return i!==-1?(ec.visit(t[Lc].children[i],t[Ub],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class nn extends Vn{}function ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const n4t=(e,t)=>864e5*e[t],CQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),r4t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,i4t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,N3e=e=>new Date(e),s4t=(e,t)=>N3e(n4t(e,t)),o4t=(e,t)=>N3e(CQ(e,t)),a4t=(e,t)=>null,D3e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},u4t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},L3e=({values:e},t)=>s4t(e,t),M3e=({values:e},t)=>o4t(e,t*2),D0=({stride:e,values:t},n)=>t[e*n],l4t=({stride:e,values:t},n)=>E3e(t[e*n]),F3e=({values:e},t)=>e[t],c4t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),f4t=({values:e,valueOffsets:t},n)=>D3e(e,t,n),d4t=({values:e,valueOffsets:t},n)=>{const r=D3e(e,t,n);return r!==null?IV(r):null},h4t=({values:e},t)=>e[t],p4t=({type:e,values:t},n)=>e.precision!==yo.HALF?t[n]:E3e(t[n]),m4t=(e,t)=>e.type.unit===Yd.DAY?L3e(e,t):M3e(e,t),B3e=({values:e},t)=>1e3*CQ(e,t*2),j3e=({values:e},t)=>CQ(e,t*2),z3e=({values:e},t)=>r4t(e,t*2),U3e=({values:e},t)=>i4t(e,t*2),g4t=(e,t)=>{switch(e.type.unit){case jn.SECOND:return B3e(e,t);case jn.MILLISECOND:return j3e(e,t);case jn.MICROSECOND:return z3e(e,t);case jn.NANOSECOND:return U3e(e,t)}},V3e=({values:e},t)=>e[t],H3e=({values:e},t)=>e[t],q3e=({values:e},t)=>e[t],W3e=({values:e},t)=>e[t],y4t=(e,t)=>{switch(e.type.unit){case jn.SECOND:return V3e(e,t);case jn.MILLISECOND:return H3e(e,t);case jn.MICROSECOND:return q3e(e,t);case jn.NANOSECOND:return W3e(e,t)}},v4t=({values:e,stride:t},n)=>nQ.decimal(e.subarray(t*n,t*(n+1))),_4t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new rr([u])},b4t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new Z4(o.slice(i,s-i))},w4t=(e,t)=>new AQ(e,t),E4t=(e,t)=>e.type.mode===Zl.Dense?G3e(e,t):Y3e(e,t),G3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return vu.visit(r,e.valueOffsets[t])},Y3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return vu.visit(r,t)},x4t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},S4t=(e,t)=>e.type.unit===Kd.DAY_TIME?K3e(e,t):X3e(e,t),K3e=({values:e},t)=>e.subarray(2*t,2*(t+1)),X3e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},T4t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new rr([s])};nn.prototype.visitNull=ln(a4t);nn.prototype.visitBool=ln(u4t);nn.prototype.visitInt=ln(h4t);nn.prototype.visitInt8=ln(D0);nn.prototype.visitInt16=ln(D0);nn.prototype.visitInt32=ln(D0);nn.prototype.visitInt64=ln(F3e);nn.prototype.visitUint8=ln(D0);nn.prototype.visitUint16=ln(D0);nn.prototype.visitUint32=ln(D0);nn.prototype.visitUint64=ln(F3e);nn.prototype.visitFloat=ln(p4t);nn.prototype.visitFloat16=ln(l4t);nn.prototype.visitFloat32=ln(D0);nn.prototype.visitFloat64=ln(D0);nn.prototype.visitUtf8=ln(d4t);nn.prototype.visitBinary=ln(f4t);nn.prototype.visitFixedSizeBinary=ln(c4t);nn.prototype.visitDate=ln(m4t);nn.prototype.visitDateDay=ln(L3e);nn.prototype.visitDateMillisecond=ln(M3e);nn.prototype.visitTimestamp=ln(g4t);nn.prototype.visitTimestampSecond=ln(B3e);nn.prototype.visitTimestampMillisecond=ln(j3e);nn.prototype.visitTimestampMicrosecond=ln(z3e);nn.prototype.visitTimestampNanosecond=ln(U3e);nn.prototype.visitTime=ln(y4t);nn.prototype.visitTimeSecond=ln(V3e);nn.prototype.visitTimeMillisecond=ln(H3e);nn.prototype.visitTimeMicrosecond=ln(q3e);nn.prototype.visitTimeNanosecond=ln(W3e);nn.prototype.visitDecimal=ln(v4t);nn.prototype.visitList=ln(_4t);nn.prototype.visitStruct=ln(w4t);nn.prototype.visitUnion=ln(E4t);nn.prototype.visitDenseUnion=ln(G3e);nn.prototype.visitSparseUnion=ln(Y3e);nn.prototype.visitDictionary=ln(x4t);nn.prototype.visitInterval=ln(S4t);nn.prototype.visitIntervalDayTime=ln(K3e);nn.prototype.visitIntervalYearMonth=ln(X3e);nn.prototype.visitFixedSizeList=ln(T4t);nn.prototype.visitMap=ln(b4t);const vu=new nn,qc=Symbol.for("keys"),Vb=Symbol.for("vals");class Z4{constructor(t){return this[qc]=new rr([t.children[0]]).memoize(),this[Vb]=t.children[1],new Proxy(this,new C4t)}[Symbol.iterator](){return new A4t(this[qc],this[Vb])}get size(){return this[qc].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[qc],n=this[Vb],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=vu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Ig(t)}: ${Ig(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class A4t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),vu.visit(this.vals,t)]})}}class C4t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[qc].toArray().map(String)}has(t,n){return t[qc].includes(n)}getOwnPropertyDescriptor(t,n){if(t[qc].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[qc].indexOf(n);if(r!==-1){const i=vu.visit(Reflect.get(t,Vb),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[qc].indexOf(n);return i!==-1?(ec.visit(Reflect.get(t,Vb),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(Z4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[qc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vb]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let mme;function Q3e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(mme=s,s=o,o=mme),o>i&&(o=i),r?r(e,s,o):[s,o]}const gme=e=>e!==e;function KE(e){if(typeof e!=="object"||e===null)return gme(e)?gme:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?_6t(e,n):!1:e instanceof Map?O4t(e):Array.isArray(e)?I4t(e):e instanceof rr?P4t(e):k4t(e,!0)}function I4t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=KE(e[n]);return eF(t)}function O4t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=KE(r);return eF(n)}function P4t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=KE(e.get(n));return eF(t)}function k4t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=KE(e[n[i]]);return eF(r,n)}function eF(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return $4t(e,n);case Map:return yme(e,n,n.keys());case Z4:case AQ:case Object:case void 0:return yme(e,n,t||Object.keys(n))}return n instanceof rr?R4t(e,n):!1}}function $4t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function R4t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function yme(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function J3e(e,t,n,r){return(n&1<<r)!==0}function N4t(e,t,n,r){return(n&1<<r)>>r}function IQ(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):Z3e(new OQ(n,e,t,null,J3e)).subarray(0,r)),i}return n}function Z3e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class OQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function kV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new OQ(e,t,n-t,e,N4t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return kV(e,t,i)+kV(e,r,n)+D4t(e,i>>3,r-i>>3)}function D4t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=QB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=QB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=QB(s.getUint8(i)),i+=1;return r}function QB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const L4t=-1;class Cr{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Cr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Kf(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=L4t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-kV(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Cr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(IQ(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[kh.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[kh.TYPE])&&(o[kh.TYPE]=s.subarray(t,t+n)),(s=o[kh.OFFSET])&&(o[kh.OFFSET]=s.subarray(t,t+n+1))||(s=o[kh.DATA])&&(o[kh.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Cr.prototype.children=Object.freeze([]);class s2 extends Vn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Cr(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),o=io(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(Pn.isSparseUnion(n))return new Cr(n,r,a,u,[void 0,void 0,s,o],i);const l=lS(t.valueOffsets);return new Cr(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.indices.ArrayType,t.data),{["dictionary"]:o=new rr([new s2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=io(n.ArrayType,t.data),{["length"]:o=s.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new s2().visit({type:n.valueType})}=t,s=vr(t.nullBitmap),{["length"]:o=i.length/Kf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new s2().visit({type:n.childType})}=t,s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,void 0,s],[i])}}function Fo(e){return new s2().visit(e)}class vme{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function eLe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function tLe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function nLe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function PQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function kQ(e,t){return e.getValid(t)}function Hb(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return PQ(r,this._offsets,n,t)}}function rLe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=PQ(s,this._offsets,r,n);return t=void 0,o}}function iLe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):PQ(s,this._offsets,i,n);return t=void 0,o}}class rn extends Vn{}function M4t(e,t){return t===null&&e.length>0?0:-1}function F4t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new OQ(n,e.offset+(t||0),e.length,n,J3e)){if(!i)return r;++r}return-1}function bn(e,t,n){if(t===void 0)return-1;if(t===null)return F4t(e,n);const r=vu.getVisitFn(e),i=KE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function sLe(e,t,n){const r=vu.getVisitFn(e),i=KE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}rn.prototype.visitNull=M4t;rn.prototype.visitBool=bn;rn.prototype.visitInt=bn;rn.prototype.visitInt8=bn;rn.prototype.visitInt16=bn;rn.prototype.visitInt32=bn;rn.prototype.visitInt64=bn;rn.prototype.visitUint8=bn;rn.prototype.visitUint16=bn;rn.prototype.visitUint32=bn;rn.prototype.visitUint64=bn;rn.prototype.visitFloat=bn;rn.prototype.visitFloat16=bn;rn.prototype.visitFloat32=bn;rn.prototype.visitFloat64=bn;rn.prototype.visitUtf8=bn;rn.prototype.visitBinary=bn;rn.prototype.visitFixedSizeBinary=bn;rn.prototype.visitDate=bn;rn.prototype.visitDateDay=bn;rn.prototype.visitDateMillisecond=bn;rn.prototype.visitTimestamp=bn;rn.prototype.visitTimestampSecond=bn;rn.prototype.visitTimestampMillisecond=bn;rn.prototype.visitTimestampMicrosecond=bn;rn.prototype.visitTimestampNanosecond=bn;rn.prototype.visitTime=bn;rn.prototype.visitTimeSecond=bn;rn.prototype.visitTimeMillisecond=bn;rn.prototype.visitTimeMicrosecond=bn;rn.prototype.visitTimeNanosecond=bn;rn.prototype.visitDecimal=bn;rn.prototype.visitList=bn;rn.prototype.visitStruct=bn;rn.prototype.visitUnion=bn;rn.prototype.visitDenseUnion=sLe;rn.prototype.visitSparseUnion=sLe;rn.prototype.visitDictionary=bn;rn.prototype.visitInterval=bn;rn.prototype.visitIntervalDayTime=bn;rn.prototype.visitIntervalYearMonth=bn;rn.prototype.visitFixedSizeList=bn;rn.prototype.visitMap=bn;const h3=new rn;class sn extends Vn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Oa&&t.bitWidth!==64||t instanceof Fp&&t.bitWidth!==64||t instanceof Zg&&t.precision!==yo.HALF))return new vme(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new vme(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new B4t(o)})}class B4t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}sn.prototype.visitNull=cn;sn.prototype.visitBool=cn;sn.prototype.visitInt=cn;sn.prototype.visitInt8=cn;sn.prototype.visitInt16=cn;sn.prototype.visitInt32=cn;sn.prototype.visitInt64=cn;sn.prototype.visitUint8=cn;sn.prototype.visitUint16=cn;sn.prototype.visitUint32=cn;sn.prototype.visitUint64=cn;sn.prototype.visitFloat=cn;sn.prototype.visitFloat16=cn;sn.prototype.visitFloat32=cn;sn.prototype.visitFloat64=cn;sn.prototype.visitUtf8=cn;sn.prototype.visitBinary=cn;sn.prototype.visitFixedSizeBinary=cn;sn.prototype.visitDate=cn;sn.prototype.visitDateDay=cn;sn.prototype.visitDateMillisecond=cn;sn.prototype.visitTimestamp=cn;sn.prototype.visitTimestampSecond=cn;sn.prototype.visitTimestampMillisecond=cn;sn.prototype.visitTimestampMicrosecond=cn;sn.prototype.visitTimestampNanosecond=cn;sn.prototype.visitTime=cn;sn.prototype.visitTimeSecond=cn;sn.prototype.visitTimeMillisecond=cn;sn.prototype.visitTimeMicrosecond=cn;sn.prototype.visitTimeNanosecond=cn;sn.prototype.visitDecimal=cn;sn.prototype.visitList=cn;sn.prototype.visitStruct=cn;sn.prototype.visitUnion=cn;sn.prototype.visitDenseUnion=cn;sn.prototype.visitSparseUnion=cn;sn.prototype.visitDictionary=cn;sn.prototype.visitInterval=cn;sn.prototype.visitIntervalDayTime=cn;sn.prototype.visitIntervalYearMonth=cn;sn.prototype.visitFixedSizeList=cn;sn.prototype.visitMap=cn;const $Q=new sn,j4t=(e,t)=>e+t;class L0 extends Vn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===jn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Xd.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Xd.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const z4t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),U4t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),V4t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Xd.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},H4t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Xd.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},q4t=(e,t)=>e.type.mode===Zl.Dense?oLe(e,t):aLe(e,t),oLe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Xd.visit(t[s],r[i])},aLe=({children:e},t)=>4+Xd.visitMany(e,e.map(()=>t)).reduce(j4t,0);L0.prototype.visitUtf8=z4t;L0.prototype.visitBinary=U4t;L0.prototype.visitList=V4t;L0.prototype.visitFixedSizeList=H4t;L0.prototype.visitUnion=q4t;L0.prototype.visitDenseUnion=oLe;L0.prototype.visitSparseUnion=aLe;const Xd=new L0;var uLe;const lLe={},cLe={};class rr{constructor(t){var n,r,i;const s=t[0]instanceof rr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Cr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=lLe[o.typeId],f=s[0];this.isValid=d=>kQ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,cLe[o.typeId]),this._offsets=tLe(s);break}this.data=s,this.type=o,this.stride=Kf(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=eLe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return $Q.visit(this)}concat(...t){return new rr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new rr(Q3e(this,t,n,({data:r,_offsets:i},s,o)=>nLe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new rr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Pn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Pn.isDictionary(this.type)){const t=new p3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return new p3(this)}unmemoize(){if(Pn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return this}}uLe=Symbol.toStringTag;rr[uLe]=(e=>{e.type=Pn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=vu.getVisitFnByTypeId(n),i=ec.getVisitFnByTypeId(n),s=h3.getVisitFnByTypeId(n),o=Xd.getVisitFnByTypeId(n);lLe[n]={get:r,set:i,indexOf:s,byteLength:o},cLe[n]=Object.create(e,{isValid:{value:Hb(kQ)},get:{value:Hb(vu.getVisitFnByTypeId(n))},set:{value:rLe(ec.getVisitFnByTypeId(n))},indexOf:{value:iLe(h3.getVisitFnByTypeId(n))},getByteLength:{value:Hb(Xd.getVisitFnByTypeId(n))}})}return"Vector"})(rr.prototype);class p3 extends rr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new p3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new rr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function W4t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${G4t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function G4t(e){return typeof e!="bigint"?Ig(e):QDe?`${Ig(e)}n`:`"${Ig(e)}"`}const JB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,Y4t=(e,t=0)=>e.length>=t?e.subarray(0,t):l3(new e.constructor(t),e,0);class tF{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?JB(r*1,this.BYTES_PER_ELEMENT):JB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=JB(t*this.stride,this.BYTES_PER_ELEMENT);const n=Y4t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=l3(new this.ArrayType(t),this.buffer)}}tF.prototype.offset=0;class AI extends tF{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class fLe extends AI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class dLe extends AI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Cu=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Kf(t),this._nulls=new fLe,n&&n.length>0&&(this._isValid=W4t(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new rr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Fo({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Cu.prototype.length=1;Cu.prototype.stride=1;Cu.prototype.children=null;Cu.prototype.finished=!1;Cu.prototype.nullValues=null;Cu.prototype._isValid=()=>!0;class M0 extends Cu{constructor(t){super(t),this._values=new AI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class nF extends Cu{constructor(t){super(t),this._pendingLength=0,this._offsets=new dLe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof Z4?n[qc].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class $V{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const ZB=2,id=4,Vh=4,Lr=4,Pm=new Int32Array(2),_me=new Float32Array(Pm.buffer),bme=new Float64Array(Pm.buffer),FP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let pp=class RV{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?RV.ZERO:new RV(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};pp.ZERO=new pp(0,0);var NV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(NV||(NV={}));let m3=class hLe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new hLe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new pp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new pp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Pm[0]=this.readInt32(t),_me[0]}readFloat64(t){return Pm[FP?0:1]=this.readInt32(t),Pm[FP?1:0]=this.readInt32(t+4),bme[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){_me[0]=n,this.writeInt32(t,Pm[0])}writeFloat64(t,n){bme[0]=n,this.writeInt32(t,Pm[FP?0:1]),this.writeInt32(t+4,Pm[FP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+id+Vh)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Vh;n++)t+=String.fromCharCode(this.readInt8(this.position_+id+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=id,n===NV.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+id}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Vh)throw new Error("FlatBuffers: file identifier must be length "+Vh);for(let n=0;n<Vh;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+id+n))return!1;return!0}createLong(t,n){return pp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},pLe=class mLe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=m3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=mLe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=m3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(id,0),this.writeInt32(this.offset()-t+id)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*ZB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=ZB;l<s;l+=ZB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Lr:0;if(n){const s=n;if(this.prep(this.minalign,id+Vh+i),s.length!=Vh)throw new Error("FlatBuffers: file identifier must be length "+Vh);for(let o=Vh-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,id+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(id,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return pp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ds{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ds).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Lr),(n||new ds).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ds.startKeyValue(t),ds.addKey(t,n),ds.addValue(t,r),ds.endKeyValue(t)}}var Lw;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Lw||(Lw={}));var Mw;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Mw||(Mw={}));var g3;(function(e){e[e.DenseArray=0]="DenseArray"})(g3||(g3={}));class zu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Lr),(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return zu.startInt(t),zu.addBitWidth(t,n),zu.addIsSigned(t,r),zu.endInt(t)}}class Hh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Hh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Lr),(n||new Hh).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new zu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):g3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,g3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Qy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Lr),(n||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Qy.startBinary(t),Qy.endBinary(t)}}class Jy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Lr),(n||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Jy.startBool(t),Jy.endBool(t)}}var y3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(y3||(y3={}));let m$=class L_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new L_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Lr),(n||new L_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):y3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,y3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return L_.startDate(t),L_.addUnit(t,n),L_.endDate(t)}};class Ka{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ka).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Lr),(n||new Ka).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ka.startDecimal(t),Ka.addPrecision(t,n),Ka.addScale(t,r),Ka.addBitWidth(t,i),Ka.endDecimal(t)}}var Fw;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Fw||(Fw={}));class sd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new sd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Lr),(n||new sd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return sd.startFixedSizeBinary(t),sd.addByteWidth(t,n),sd.endFixedSizeBinary(t)}}class od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Lr),(n||new od).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return od.startFixedSizeList(t),od.addListSize(t,n),od.endFixedSizeList(t)}}var v3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(v3||(v3={}));class ad{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Lr),(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):v3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,v3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return ad.startFloatingPoint(t),ad.addPrecision(t,n),ad.endFloatingPoint(t)}}var _3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(_3||(_3={}));class ud{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Lr),(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,_3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ud.startInterval(t),ud.addUnit(t,n),ud.endInterval(t)}}class Zy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Zy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Lr),(n||new Zy).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Zy.startList(t),Zy.endList(t)}}let g$=class M_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Lr),(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return M_.startMap(t),M_.addKeysSorted(t,n),M_.endMap(t)}};class e1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Lr),(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e1.startNull(t),e1.endNull(t)}}class t1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Lr),(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return t1.startStruct_(t),t1.endStruct_(t)}}let ZS=class yy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Lr),(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fw.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Fw.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return yy.startTime(t),yy.addUnit(t,n),yy.addBitWidth(t,r),yy.endTime(t)}};class Dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Lr),(n||new Dl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fw.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Fw.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Dl.startTimestamp(t),Dl.addUnit(t,n),Dl.addTimezone(t,r),Dl.endTimestamp(t)}}var b3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(b3||(b3={}));let vy=class _y{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new _y).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Lr),(n||new _y).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):b3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,b3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return _y.startUnion(t),_y.addMode(t,n),_y.addTypeIds(t,r),_y.endUnion(t)}};class n1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Lr),(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return n1.startUtf8(t),n1.endUtf8(t)}}var gi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(gi||(gi={}));let Cl=class y${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new y$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Lr),(n||new y$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):gi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Hh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new y$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,gi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Gf=class Oh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Oh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Lr),(n||new Oh).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Mw.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Cl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Mw.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Oh.startSchema(t),Oh.addEndianness(t,n),Oh.addFields(t,r),Oh.addCustomMetadata(t,i),Oh.addFeatures(t,s),Oh.endSchema(t)}};class Mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Lr),(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lw.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Gf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new $V).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new $V).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Lw.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class gr{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=LV(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new gr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new gr(n,this.metadata)}assign(...t){const n=t[0]instanceof gr?t[0]:Array.isArray(t[0])?new gr(t[0]):new gr(t),r=[...this.fields],i=BP(BP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:BP(BP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=LV(s,new Map);return new gr([...r,...s],i,new Map([...this.dictionaries,...o]))}}gr.prototype.fields=null;gr.prototype.metadata=null;gr.prototype.dictionaries=null;let Ir=class DV{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new DV(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],DV.new(n,r,i,s)}};Ir.prototype.type=null;Ir.prototype.name=null;Ir.prototype.nullable=null;Ir.prototype.metadata=null;function BP(e,t){return new Map([...e||new Map,...t||new Map])}function LV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Pn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&LV(s.children,t)}return t}var wme=pp,K4t=pLe,X4t=m3;class MV{constructor(t,n=Hu.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new X4t(vr(t));const n=Mu.getRootAsFooter(t),r=gr.decode(n.schema());return new Q4t(r,n)}static encode(t){const n=new K4t,r=gr.encode(n,t.schema);Mu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())t0.encode(n,o);const i=n.endVector();Mu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())t0.encode(n,o);const s=n.endVector();return Mu.startFooter(n),Mu.addSchema(n,r),Mu.addVersion(n,Hu.V4),Mu.addRecordBatches(n,i),Mu.addDictionaries(n,s),Mu.finishFooterBuffer(n,Mu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Q4t extends MV{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return t0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return t0.decode(n)}return null}}class t0{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new t0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new wme(n.offset,0),s=new wme(n.bodyLength,0);return $V.createBlock(t,i,r,s)}}const jP=Object.freeze({done:!0,value:void 0});class gLe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class J4t extends gLe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return jh(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(jP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return hme.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return hme.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return jh(this,void 0,void 0,function*(){return yield this.abort(t),jP})}return(t){return jh(this,void 0,void 0,function*(){return yield this.close(),jP})}read(t){return jh(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return jh(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(jP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ej extends J4t{write(t){if((t=vr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?IV(this.toUint8Array(!0)):this.toUint8Array(!1).then(IV)}toUint8Array(t=!1){return t?Gd(this._values)[0]:jh(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=BT(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Gd(i,s)[0]})}}class yLe extends nF{constructor(t){super(t),this._values=new tF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Z4t extends Cu{constructor(t){super(t),this._values=new fLe}setValue(t,n){this._values.set(t,+n)}}class rF extends M0{}rF.prototype._setValue=C3e;class vLe extends rF{}vLe.prototype._setValue=pQ;class _Le extends rF{}_Le.prototype._setValue=mQ;class bLe extends M0{}bLe.prototype._setValue=P3e;class eFt extends Cu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new e0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=w3({type:this.type.indices,nullValues:n}),this.dictionary=w3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wLe extends M0{}wLe.prototype._setValue=A3e;class tFt extends Cu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new Dw(this.type.listSize,new Ir(n,t.type,!0)),r}}class iF extends M0{setValue(t,n){this._values.set(t,n)}}class nFt extends iF{setValue(t,n){super.setValue(t,x3e(n))}}class rFt extends iF{}class iFt extends iF{}class sF extends M0{}sF.prototype._setValue=R3e;class ELe extends sF{}ELe.prototype._setValue=SQ;class xLe extends sF{}xLe.prototype._setValue=TQ;class em extends M0{setValue(t,n){this._values.set(t,n)}}class sFt extends em{}class oFt extends em{}class aFt extends em{}class uFt extends em{}class lFt extends em{}class cFt extends em{}class fFt extends em{}class dFt extends em{}class hFt extends nF{constructor(t){super(t),this._offsets=new dLe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Nw(new Ir(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class pFt extends nF{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new zA(new Ir(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class mFt extends Cu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class gFt extends Cu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new zo([...this.type.children,new Ir(n,t.type,!0)]),r}}class XE extends M0{}XE.prototype._setValue=I3e;class SLe extends XE{}SLe.prototype._setValue=gQ;class TLe extends XE{}TLe.prototype._setValue=yQ;class ALe extends XE{}ALe.prototype._setValue=vQ;class CLe extends XE{}CLe.prototype._setValue=_Q;class QE extends M0{}QE.prototype._setValue=O3e;class ILe extends QE{}ILe.prototype._setValue=bQ;class OLe extends QE{}OLe.prototype._setValue=wQ;class PLe extends QE{}PLe.prototype._setValue=EQ;class kLe extends QE{}kLe.prototype._setValue=xQ;class RQ extends Cu{constructor(t){super(t),this._typeIds=new AI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ir(n,t.type)];return this.type=new jA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class yFt extends RQ{}class vFt extends RQ{constructor(t){super(t),this._offsets=new AI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class $Le extends nF{constructor(t){super(t),this._values=new tF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,JX(n))}_flushPending(t,n){}}$Le.prototype._flushPending=yLe.prototype._flushPending;class _Ft extends Vn{visitNull(){return mFt}visitBool(){return Z4t}visitInt(){return em}visitInt8(){return sFt}visitInt16(){return oFt}visitInt32(){return aFt}visitInt64(){return uFt}visitUint8(){return lFt}visitUint16(){return cFt}visitUint32(){return fFt}visitUint64(){return dFt}visitFloat(){return iF}visitFloat16(){return nFt}visitFloat32(){return rFt}visitFloat64(){return iFt}visitUtf8(){return $Le}visitBinary(){return yLe}visitFixedSizeBinary(){return wLe}visitDate(){return rF}visitDateDay(){return vLe}visitDateMillisecond(){return _Le}visitTimestamp(){return XE}visitTimestampSecond(){return SLe}visitTimestampMillisecond(){return TLe}visitTimestampMicrosecond(){return ALe}visitTimestampNanosecond(){return CLe}visitTime(){return QE}visitTimeSecond(){return ILe}visitTimeMillisecond(){return OLe}visitTimeMicrosecond(){return PLe}visitTimeNanosecond(){return kLe}visitDecimal(){return bLe}visitList(){return hFt}visitStruct(){return gFt}visitUnion(){return RQ}visitDenseUnion(){return vFt}visitSparseUnion(){return yFt}visitDictionary(){return eFt}visitInterval(){return sF}visitIntervalDayTime(){return ELe}visitIntervalYearMonth(){return xLe}visitFixedSizeList(){return tFt}visitMap(){return pFt}}const bFt=new _Ft;class on extends Vn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Iu(e,t){return t instanceof e.constructor}function CI(e,t){return e===t||Iu(e,t)}function tm(e,t){return e===t||Iu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function oF(e,t){return e===t||Iu(e,t)&&e.precision===t.precision}function wFt(e,t){return e===t||Iu(e,t)&&e.byteWidth===t.byteWidth}function NQ(e,t){return e===t||Iu(e,t)&&e.unit===t.unit}function II(e,t){return e===t||Iu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function OI(e,t){return e===t||Iu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function EFt(e,t){return e===t||Iu(e,t)&&e.children.length===t.children.length&&n0.compareManyFields(e.children,t.children)}function xFt(e,t){return e===t||Iu(e,t)&&e.children.length===t.children.length&&n0.compareManyFields(e.children,t.children)}function DQ(e,t){return e===t||Iu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&n0.compareManyFields(e.children,t.children)}function SFt(e,t){return e===t||Iu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&n0.visit(e.indices,t.indices)&&n0.visit(e.dictionary,t.dictionary)}function LQ(e,t){return e===t||Iu(e,t)&&e.unit===t.unit}function TFt(e,t){return e===t||Iu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&n0.compareManyFields(e.children,t.children)}function AFt(e,t){return e===t||Iu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&n0.compareManyFields(e.children,t.children)}on.prototype.visitNull=CI;on.prototype.visitBool=CI;on.prototype.visitInt=tm;on.prototype.visitInt8=tm;on.prototype.visitInt16=tm;on.prototype.visitInt32=tm;on.prototype.visitInt64=tm;on.prototype.visitUint8=tm;on.prototype.visitUint16=tm;on.prototype.visitUint32=tm;on.prototype.visitUint64=tm;on.prototype.visitFloat=oF;on.prototype.visitFloat16=oF;on.prototype.visitFloat32=oF;on.prototype.visitFloat64=oF;on.prototype.visitUtf8=CI;on.prototype.visitBinary=CI;on.prototype.visitFixedSizeBinary=wFt;on.prototype.visitDate=NQ;on.prototype.visitDateDay=NQ;on.prototype.visitDateMillisecond=NQ;on.prototype.visitTimestamp=II;on.prototype.visitTimestampSecond=II;on.prototype.visitTimestampMillisecond=II;on.prototype.visitTimestampMicrosecond=II;on.prototype.visitTimestampNanosecond=II;on.prototype.visitTime=OI;on.prototype.visitTimeSecond=OI;on.prototype.visitTimeMillisecond=OI;on.prototype.visitTimeMicrosecond=OI;on.prototype.visitTimeNanosecond=OI;on.prototype.visitDecimal=CI;on.prototype.visitList=EFt;on.prototype.visitStruct=xFt;on.prototype.visitUnion=DQ;on.prototype.visitDenseUnion=DQ;on.prototype.visitSparseUnion=DQ;on.prototype.visitDictionary=SFt;on.prototype.visitInterval=LQ;on.prototype.visitIntervalDayTime=LQ;on.prototype.visitIntervalYearMonth=LQ;on.prototype.visitFixedSizeList=TFt;on.prototype.visitMap=AFt;const n0=new on;function FV(e,t){return n0.compareSchemas(e,t)}function w3(e){const t=e.type,n=new(bFt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(w3(Object.assign(Object.assign({},l),{type:u})))}}return n}function tj(e,t){return CFt(e,t.map(n=>n.data.concat()))}function CFt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=IFt(n,o,c,t,i),o>0&&(r[s++]=Fo({type:new zo(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Uu(e,f))]}function IFt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Fo({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var RLe;class Ja{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new gr([]),this._offsets=[0],this;let i,s;t[0]instanceof gr&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Uu)return[u];if(u instanceof Ja)return u.batches;if(u instanceof Cr){if(u.type instanceof zo)return[new Uu(new gr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new rr([u[h]])),f=new gr(l.map((h,p)=>new Ir(String(h),c[p].type))),[,d]=tj(f,c);return d.length===0?[new Uu(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new gr([]),!(i instanceof gr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Uu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!FV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??tLe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=eLe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?$Q.visit(new rr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ja(n,r.map(i=>new Uu(n,i)))}slice(t,n){const r=this.schema;[t,n]=Q3e({length:this.numRows},t,n);const i=nLe(this.data,this._offsets,t,n);return new Ja(r,i.map(s=>new Uu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Fo({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new rr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new rr([Fo({type:new Mp,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=tj(r,a)}return new Ja(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ja(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ja(...tj(s,o))}}RLe=Symbol.toStringTag;Ja[RLe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Hb(kQ),e.get=Hb(vu.getVisitFn(re.Struct)),e.set=rLe(ec.getVisitFn(re.Struct)),e.indexOf=iLe(h3.getVisitFn(re.Struct)),e.getByteLength=Hb(Xd.getVisitFn(re.Struct)),"Table"))(Ja.prototype);var NLe;let Uu=class eT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Fo({nullCount:0,type:new zo(this.schema.fields),children:this.schema.fields.map(n=>Fo({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Cr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Eme(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ir.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new gr(r),a=Fo({type:new zo(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Eme(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=DLe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return vu.visit(this.data,t)}set(t,n){return ec.visit(this.data,t,n)}indexOf(t,n){return h3.visit(this.data,t,n)}getByteLength(t){return Xd.visit(this.data,t)}[Symbol.iterator](){return $Q.visit(new rr([this.data]))}toArray(){return[...this]}concat(...t){return new Ja(this.schema,[this,...t])}slice(t,n){const[r]=new rr([this.data]).slice(t,n).data;return new eT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new rr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new rr([Fo({type:new Mp,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new gr(s,new Map(this.schema.metadata)),i=Fo({type:new zo(s),children:o})}return new eT(r,i)}select(t){const n=this.schema.select(t),r=new zo(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new eT(n,Fo({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Fo({type:new zo(n.fields),length:this.numRows,children:r});return new eT(n,i)}};NLe=Symbol.toStringTag;Uu[NLe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Uu.prototype);function Eme(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Fo({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Fo({type:new zo(i),length:n,children:s})]}function DLe(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Pn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&DLe(o.children,a.children,n)}return n}class OFt extends Uu{constructor(t){const n=t.fields.map(i=>Fo({type:i.type})),r=Fo({type:new zo(t.fields),nullCount:0,children:n});super(t,r)}}var E3;(function(e){e[e.BUFFER=0]="BUFFER"})(E3||(E3={}));var x3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(x3||(x3={}));class km{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new km).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Lr),(n||new km).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):x3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):E3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,x3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,E3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return km.startBodyCompression(t),km.addCodec(t,n),km.addMethod(t,r),km.endBodyCompression(t)}}let LLe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},MLe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},$h=class BV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new BV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Lr),(n||new BV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new MLe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new LLe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new km).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},F_=class jV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new jV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Lr),(n||new jV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new $h).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var S3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(S3||(S3={}));let gm=class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Bf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Lr),(n||new Bf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lw.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):S3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ds).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Lw.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,S3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Bf.startMessage(t),Bf.addVersion(t,n),Bf.addHeaderType(t,r),Bf.addHeader(t,i),Bf.addBodyLength(t,s),Bf.addCustomMetadata(t,o),Bf.endMessage(t)}};var PFt=pp;class kFt extends Vn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return e1.startNull(n),e1.endNull(n)}visitInt(t,n){return zu.startInt(n),zu.addBitWidth(n,t.bitWidth),zu.addIsSigned(n,t.isSigned),zu.endInt(n)}visitFloat(t,n){return ad.startFloatingPoint(n),ad.addPrecision(n,t.precision),ad.endFloatingPoint(n)}visitBinary(t,n){return Qy.startBinary(n),Qy.endBinary(n)}visitBool(t,n){return Jy.startBool(n),Jy.endBool(n)}visitUtf8(t,n){return n1.startUtf8(n),n1.endUtf8(n)}visitDecimal(t,n){return Ka.startDecimal(n),Ka.addScale(n,t.scale),Ka.addPrecision(n,t.precision),Ka.addBitWidth(n,t.bitWidth),Ka.endDecimal(n)}visitDate(t,n){return m$.startDate(n),m$.addUnit(n,t.unit),m$.endDate(n)}visitTime(t,n){return ZS.startTime(n),ZS.addUnit(n,t.unit),ZS.addBitWidth(n,t.bitWidth),ZS.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Dl.startTimestamp(n),Dl.addUnit(n,t.unit),r!==void 0&&Dl.addTimezone(n,r),Dl.endTimestamp(n)}visitInterval(t,n){return ud.startInterval(n),ud.addUnit(n,t.unit),ud.endInterval(n)}visitList(t,n){return Zy.startList(n),Zy.endList(n)}visitStruct(t,n){return t1.startStruct_(n),t1.endStruct_(n)}visitUnion(t,n){vy.startTypeIdsVector(n,t.typeIds.length);const r=vy.createTypeIdsVector(n,t.typeIds);return vy.startUnion(n),vy.addMode(n,t.mode),vy.addTypeIds(n,r),vy.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Hh.startDictionaryEncoding(n),Hh.addId(n,new PFt(t.id,0)),Hh.addIsOrdered(n,t.isOrdered),r!==void 0&&Hh.addIndexType(n,r),Hh.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return sd.startFixedSizeBinary(n),sd.addByteWidth(n,t.byteWidth),sd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return od.startFixedSizeList(n),od.addListSize(n,t.listSize),od.endFixedSizeList(n)}visitMap(t,n){return g$.startMap(n),g$.addKeysSorted(n,t.keysSorted),g$.endMap(n)}}const nj=new kFt;function $Ft(e,t=new Map){return new gr(NFt(e,t),v$(e.customMetadata),t)}function FLe(e){return new ol(e.count,BLe(e.columns),jLe(e.columns))}function RFt(e){return new Qd(FLe(e.data),e.id,e.isDelta)}function NFt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function xme(e,t){return(e.children||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function BLe(e){return(e||[]).reduce((t,n)=>[...t,new Fv(n.count,DFt(n.VALIDITY)),...BLe(n.children)],[])}function jLe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new vd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new vd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new vd(t.length,i.OFFSET.length)),i.DATA&&t.push(new vd(t.length,i.DATA.length)),t=jLe(i.children,t)}return t}function DFt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function LFt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Tme(e,xme(e,t)),i=new Ir(e.name,o,e.nullable,v$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?Sme(r):new Jg,a=new e0(t.get(n),r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,v$(e.customMetadata))):(r=(r=s.indexType)?Sme(r):new Jg,t.set(n,o=Tme(e,xme(e,t))),a=new e0(o,r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,v$(e.customMetadata))),i||null}function v$(e){return new Map(Object.entries(e||{}))}function Sme(e){return new Oa(e.isSigned,e.bitWidth)}function Tme(e,t){const n=e.type.name;switch(n){case"NONE":return new Mp;case"null":return new Mp;case"binary":return new FA;case"utf8":return new kw;case"bool":return new BA;case"list":return new Nw((t||[])[0]);case"struct":return new zo(t||[]);case"struct_":return new zo(t||[])}switch(n){case"int":{const r=e.type;return new Oa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Zg(yo[r.precision])}case"decimal":{const r=e.type;return new c3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new $w(Yd[r.unit])}case"time":{const r=e.type;return new Fp(jn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new f3(jn[r.unit],r.timezone)}case"interval":{const r=e.type;return new Rw(Kd[r.unit])}case"union":{const r=e.type;return new jA(Zl[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new d3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Dw(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new zA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var q1=pp,MFt=pLe,FFt=m3;class ld{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new ld(0,Hu.V4,n);return r._createHeader=BFt(t,n),r}static decode(t){t=new FFt(vr(t));const n=gm.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new ld(r,i,s);return o._createHeader=jFt(n,s),o}static encode(t){const n=new MFt;let r=-1;return t.isSchema()?r=gr.encode(n,t.header()):t.isRecordBatch()?r=ol.encode(n,t.header()):t.isDictionaryBatch()&&(r=Qd.encode(n,t.header())),gm.startMessage(n),gm.addVersion(n,Hu.V4),gm.addHeader(n,r),gm.addHeaderType(n,t.headerType),gm.addBodyLength(n,new q1(t.bodyLength,0)),gm.finishMessageBuffer(n,gm.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof gr)return new ld(0,Hu.V4,Ns.Schema,t);if(t instanceof ol)return new ld(n,Hu.V4,Ns.RecordBatch,t);if(t instanceof Qd)return new ld(n,Hu.V4,Ns.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ns.Schema}isRecordBatch(){return this.headerType===Ns.RecordBatch}isDictionaryBatch(){return this.headerType===Ns.DictionaryBatch}}class ol{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Qd{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class vd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class Fv{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function BFt(e,t){return()=>{switch(t){case Ns.Schema:return gr.fromJSON(e);case Ns.RecordBatch:return ol.fromJSON(e);case Ns.DictionaryBatch:return Qd.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ns[t]}, type: ${t} }`)}}function jFt(e,t){return()=>{switch(t){case Ns.Schema:return gr.decode(e.header(new Gf));case Ns.RecordBatch:return ol.decode(e.header(new $h),e.version());case Ns.DictionaryBatch:return Qd.decode(e.header(new F_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ns[t]}, type: ${t} }`)}}Ir.encode=QFt;Ir.decode=KFt;Ir.fromJSON=LFt;gr.encode=XFt;gr.decode=zFt;gr.fromJSON=$Ft;ol.encode=JFt;ol.decode=UFt;ol.fromJSON=FLe;Qd.encode=ZFt;Qd.decode=VFt;Qd.fromJSON=RFt;Fv.encode=e5t;Fv.decode=qFt;vd.encode=t5t;vd.decode=HFt;function zFt(e,t=new Map){const n=YFt(e,t);return new gr(n,_$(e),t)}function UFt(e,t=Hu.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ol(e.length(),WFt(e),GFt(e,t))}function VFt(e,t=Hu.V4){return new Qd(ol.decode(e.data(),t),e.id(),e.isDelta())}function HFt(e){return new vd(e.offset(),e.length())}function qFt(e){return new Fv(e.length(),e.nullCount())}function WFt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Fv.decode(n));return t}function GFt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Hu.V4&&(r.bb_pos+=8*(i+1)),n[++s]=vd.decode(r));return n}function YFt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ir.decode(r,t));return n}function Ame(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ir.decode(r,t));return n}function KFt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Ime(e,Ame(e,t)),r=new Ir(e.name(),i,e.nullable(),_$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?Cme(s):new Jg,o=new e0(t.get(n),s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),_$(e))):(s=(s=a.indexType())?Cme(s):new Jg,t.set(n,i=Ime(e,Ame(e,t))),o=new e0(i,s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),_$(e))),r||null}function _$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Cme(e){return new Oa(e.isSigned(),e.bitWidth())}function Ime(e,t){const n=e.typeType();switch(n){case gi.NONE:return new Mp;case gi.Null:return new Mp;case gi.Binary:return new FA;case gi.Utf8:return new kw;case gi.Bool:return new BA;case gi.List:return new Nw((t||[])[0]);case gi.Struct_:return new zo(t||[])}switch(n){case gi.Int:{const r=e.type(new zu);return new Oa(r.isSigned(),r.bitWidth())}case gi.FloatingPoint:{const r=e.type(new ad);return new Zg(r.precision())}case gi.Decimal:{const r=e.type(new Ka);return new c3(r.scale(),r.precision(),r.bitWidth())}case gi.Date:{const r=e.type(new m$);return new $w(r.unit())}case gi.Time:{const r=e.type(new ZS);return new Fp(r.unit(),r.bitWidth())}case gi.Timestamp:{const r=e.type(new Dl);return new f3(r.unit(),r.timezone())}case gi.Interval:{const r=e.type(new ud);return new Rw(r.unit())}case gi.Union:{const r=e.type(new vy);return new jA(r.mode(),r.typeIdsArray()||[],t||[])}case gi.FixedSizeBinary:{const r=e.type(new sd);return new d3(r.byteWidth())}case gi.FixedSizeList:{const r=e.type(new od);return new Dw(r.listSize(),(t||[])[0])}case gi.Map:{const r=e.type(new g$);return new zA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${gi[n]}" (${n})`)}function XFt(e,t){const n=t.fields.map(s=>Ir.encode(e,s));Gf.startFieldsVector(e,n.length);const r=Gf.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Gf.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ds.startKeyValue(e),ds.addKey(e,a),ds.addValue(e,u),ds.endKeyValue(e)})):-1;return Gf.startSchema(e),Gf.addFields(e,r),Gf.addEndianness(e,n5t?Mw.Little:Mw.Big),i!==-1&&Gf.addCustomMetadata(e,i),Gf.endSchema(e)}function QFt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Pn.isDictionary(s)?(o=s.dictionary.typeId,i=nj.visit(s,e),r=nj.visit(s.dictionary,e)):r=nj.visit(s,e);const a=(s.children||[]).map(c=>Ir.encode(e,c)),u=Cl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Cl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ds.startKeyValue(e),ds.addKey(e,d),ds.addValue(e,h),ds.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Cl.startField(e),Cl.addType(e,r),Cl.addTypeType(e,o),Cl.addChildren(e,u),Cl.addNullable(e,!!t.nullable),n!==-1&&Cl.addName(e,n),i!==-1&&Cl.addDictionary(e,i),l!==-1&&Cl.addCustomMetadata(e,l),Cl.endField(e)}function JFt(e,t){const n=t.nodes||[],r=t.buffers||[];$h.startNodesVector(e,n.length);for(const o of n.slice().reverse())Fv.encode(e,o);const i=e.endVector();$h.startBuffersVector(e,r.length);for(const o of r.slice().reverse())vd.encode(e,o);const s=e.endVector();return $h.startRecordBatch(e),$h.addLength(e,new q1(t.length,0)),$h.addNodes(e,i),$h.addBuffers(e,s),$h.endRecordBatch(e)}function ZFt(e,t){const n=ol.encode(e,t.data);return F_.startDictionaryBatch(e),F_.addId(e,new q1(t.id,0)),F_.addIsDelta(e,t.isDelta),F_.addData(e,n),F_.endDictionaryBatch(e)}function e5t(e,t){return MLe.createFieldNode(e,new q1(t.length,0),new q1(t.nullCount,0))}function t5t(e,t){return LLe.createBuffer(e,new q1(t.offset,0),new q1(t.length,0))}const n5t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),zV="ARROW1",MQ=new Uint8Array(zV.length);for(let e=0;e<zV.length;e+=1)MQ[e]=zV.codePointAt(e);MQ.length;class ss extends Vn{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Uu?s.data.children:s.data),r=new ss;return r.visitMany(n(t)),r}visit(t){if(t instanceof rr)return this.visitMany(t.data),this;const{type:n}=t;if(!Pn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Pn.isNull(n)||af.call(this,i<=0?new Uint8Array(0):IQ(t.offset,r,t.nullBitmap)),this.nodes.push(new Fv(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function af(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new vd(this._byteLength,t)),this._byteLength+=t,this}function r5t(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(af.call(this,r),t.mode===Zl.Sparse)return UV.call(this,e);if(t.mode===Zl.Dense){if(e.offset<=0)return af.call(this,i),UV.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=tQ(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];af.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function i5t(e){let t;return e.nullCount>=e.length?af.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?af.call(this,IQ(e.offset,e.length,t)):af.call(this,Z3e(e.values))}function F0(e){return af.call(this,e.values.subarray(0,e.length*e.stride))}function zLe(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return af.call(this,tQ(-r[0],t,r)),af.call(this,n.subarray(i,i+o)),this}function FQ(e){const{length:t,valueOffsets:n}=e;return n&&af.call(this,tQ(n[0],t,n)),this.visit(e.children[0])}function UV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ss.prototype.visitBool=i5t;ss.prototype.visitInt=F0;ss.prototype.visitFloat=F0;ss.prototype.visitUtf8=zLe;ss.prototype.visitBinary=zLe;ss.prototype.visitFixedSizeBinary=F0;ss.prototype.visitDate=F0;ss.prototype.visitTimestamp=F0;ss.prototype.visitTime=F0;ss.prototype.visitDecimal=F0;ss.prototype.visitList=FQ;ss.prototype.visitStruct=UV;ss.prototype.visitUnion=r5t;ss.prototype.visitInterval=F0;ss.prototype.visitFixedSizeList=FQ;ss.prototype.visitMap=FQ;class ULe extends gLe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new ej,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,N0(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Q4(t)?t.then(n=>this.writeAll(n)):J4(t)?UQ(this,t):zQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof ej?this._sink=t:(this._sink=new ej,t&&d6t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&h6t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!FV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ja&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Uu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!FV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Uu?t instanceof OFt||this._writeRecordBatch(t):t instanceof Ja?this.writeAll(t.batches):ZX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=ld.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ns.RecordBatch?this._recordBatchBlocks.push(new t0(a,t.bodyLength,this._position)):t.headerType===Ns.DictionaryBatch&&this._dictionaryBlocks.push(new t0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=vr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(ld.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(MQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ss.assemble(t),o=new ol(t.numRows,r,i),a=ld.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ss.assemble(new rr([t])),u=new ol(t.length,s,o),l=new Qd(u,n,r),c=ld.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class BQ extends ULe{static writeAll(t,n){const r=new BQ(n);return Q4(t)?t.then(i=>r.writeAll(i)):J4(t)?UQ(r,t):zQ(r,t)}}class jQ extends ULe{static writeAll(t){const n=new jQ;return Q4(t)?t.then(r=>n.writeAll(r)):J4(t)?UQ(n,t):zQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=MV.encode(new MV(t,Hu.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function zQ(e,t){let n=t;t instanceof Ja&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function UQ(e,t){var n,r,i,s;return jh(this,void 0,void 0,function*(){try{for(n=BT(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function s5t(e,t="stream"){return(t==="stream"?BQ:jQ).writeAll(e).toUint8Array(!0)}function VQ(e,t=1){return(e*t+63&-64||64)/t}function r0(e,t,n=e.BYTES_PER_ELEMENT){return new e(VQ(t,n))}function HQ(e){return e instanceof Cr?e:new Cr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function o5t(e){return new rr([HQ(e)])}const qQ=new TextEncoder;function a5t(e,t,n){const r=qQ.encode(n);return e.set(r,t),r.length}function u5t(e,t,n){return qQ.encodeInto(n,e.subarray(t)).written}const l5t=qQ.encodeInto?u5t:a5t;function Ome(e,t){const n=r0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function c5t(e,t){const n=r0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function f5t(e,t){const n=r0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function d5t(e,t){const n=r0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function h5t(e){const t=w3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function p5t(e,t,n){const r=r0(Int32Array,t+1),i=r0(Uint8Array,3*n);let s=0;return{set(o,a){s+=l5t(i,s,o),r[a+1]=s},data:()=>{const o=VQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function m5t(e,t){const n=[],r=r0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:g5t(e.dictionary,n,o)})}}function g5t(e,t,n){const r=p5t(e,t.length,n);return t.forEach(r.set),o5t(r.data())}function y5t(e,t){const n=r0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function v5t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Ome:null;break;case re.Float:r=e.precision>0?Ome:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?m5t:null;break;case re.Bool:r=c5t;break;case re.Date:r=e.unit?d5t:f5t;break}return r==null?h5t(e):n?y5t(r(e,t),t):r(e,t)}function _5t(e,t){const n=e.length,r=VQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),HQ({type:t,length:n,buffers:[null,i]})}function VLe(e,t,n,r,i=!0){const s=v5t(r,e,i);return t(n,s.set),HQ(s.data())}function WQ(e){if(e instanceof Pn||e==null)return e;switch(e){case re.Binary:return new FA;case re.Bool:return new BA;case re.DateDay:return new C6t;case re.DateMillisecond:case re.Date:return new I6t;case re.Dictionary:return new e0(new kw,new Jg);case re.Float16:return new b3e;case re.Float32:return new cQ;case re.Float64:case re.Float:return new fQ;case re.Int8:return new rQ;case re.Int16:return new iQ;case re.Int32:case re.Int:return new Jg;case re.Int64:return new sQ;case re.IntervalDayTime:return new R6t;case re.Interval:case re.IntervalYearMonth:return new N6t;case re.Null:return new Mp;case re.TimeMicrosecond:return new k6t;case re.TimeMillisecond:case re.Time:return new P6t;case re.TimeNanosecond:return new $6t;case re.TimeSecond:return new O6t;case re.Uint8:return new oQ;case re.Uint16:return new aQ;case re.Uint32:return new uQ;case re.Uint64:return new lQ;case re.Utf8:return new kw;default:vn(`Unsupported type code: ${Wd(e)}. Use a data type constructor instead?`)}}function b5t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function HLe(e,t){const n=VV();return e(t,n.add),n}function VV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Lp(t))++e.dates,b5t(t)&&++e.utcdays;else if(Xy(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=VV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=VV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return WQ(w5t(e))}};return e}function w5t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:vn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:vn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Ir.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Dw(e.minlen,n):new Nw(n)}else if(e.structs===t){const n=e.struct_prof;return new zo(Object.keys(n).map(r=>Ir.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;vn("Type inference failure")}}}}function E5t(e,t,n,r,i,s=!0){if(i=WQ(i),!i){const o=HLe(r,t);s=o.nulls>0,i=o.type()}return VLe(n,r,t,i,s)}function x5t(e,t,n,r,i,s=!0){i=WQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=S5t(o);if(u&&a&&Pme(u.type,i))return u;const l=o.data;if(SI(l)){const c=T5t(l);if(a&&c&&Pme(c,i))return _5t(l,c);i=i||c,s=!1}if(!i){const c=HLe(r,o);s=c.nulls>0,i=c.type()}return VLe(n,r,o,i,s)}function S5t(e){return e instanceof rr?e:e.vector instanceof rr?e.vector:null}function T5t(e){const n={Float32Array:cQ,Float64Array:fQ,Int8Array:rQ,Int16Array:iQ,Int32Array:Jg,Uint8Array:oQ,Uint16Array:aQ,Uint32Array:uQ,BigInt64Array:sQ,BigUint64Array:lQ}[e.constructor.name];return n?new n:null}function Pme(e,t){return!e||!t?!0:e.compareTo(t)}function A5t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function C5t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Xy(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const I5t=()=>vn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function O5t(){try{return Ja}catch{I5t()}}function qLe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=P5t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&vn("Column length mismatch"),a[l]=c});const u=O5t();return new u(a)}function P5t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ei(n)?n(e):nr(n)?n:null;if(nr(e))return{dataFrom:E5t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:A5t(e,r,i)};if(k5t(e))return{dataFrom:x5t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:C5t(e,r,i)};vn("Unsupported input data type")}function k5t(e){return e&&ei(e.reify)}function $5t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return s5t(qLe(e,r),n)}function R5t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function N5t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Lp(u))++i,R5t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function aF(e,t){return ei(t)?t(e):t||e.columnNames()}function WLe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=N5t(D5t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function D5t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function GQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function L5t(e,t={}){const n=aF(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Lp(l)?K4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return GQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function GLe(e,t={}){if(ei(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Lp(e))return t.utc?K4(e):TDe(e);{const r=JSON.stringify(e,(s,o)=>SI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function uF(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function M5t(e,t={}){const n=aF(e,t.columns),{align:r,format:i}=WLe(e,n,t),s=F5t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(GLe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",b=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${b?` style="${b}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return GQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function F5t(e){return uF(e.style,t=>ei(t)?t:()=>t)}function B5t(e,t=!0,n=!1){return e===void 0||e?t:n}const j5t=e=>Lp(e)?K4(e,!0):e;function z5t(e,t={}){const n=B5t(t.schema),r=t.format||{},i=aF(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||j5t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function U5t(e,t={}){const n=aF(e,t.columns),{align:r,format:i}=WLe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return GQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(GLe(u,i[l]))+"|"}}),a+`
`}function YLe(e,t){for(const[n,r]of X4(t))e.set(n,r);return e}function V5t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Bp(e,t,n=new Map){return t=Ia(t)?e.columnName(t):t,Eo(t)?n.set(t,t):nr(t)?t.forEach(r=>Bp(e,r,n)):ei(t)?Bp(e,t(e),n):ta(t)?YLe(n,t):vn(`Invalid column selection: ${Wd(t)}`),n}function lF(e,t){return e.toObject=t,e}function KLe(e){return nr(e)?e.map(KLe):e&&e.toObject?e.toObject():e}function Bw(){return lF(e=>e.columnNames(),()=>({all:[]}))}function XLe(...e){return e=e.flat(),lF(t=>{const n=Bp(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:KLe(e)}))}function H5t(e,t){return lF(n=>{let r=Ia(e)?e:n.columnIndex(e),i=Ia(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function q5t(e){return Eo(e)&&(e=RegExp(V5t(e))),lF(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function W5t(e){return SI(e.data)?e.data.constructor:Array}class qh extends fMt{static from(t,n){return new qh(pMt(t,n),n)}static new(t,n){if(t instanceof qh)return t;const r={},i=[];for(const[s,o]of X4(t))r[s]=o,i.push(s);return new qh(r,n||i)}constructor(t,n,r,i,s,o){uF(t,hMt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new qh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:VMt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=_l(r).groupby(r.groups());return t.forEach(s=>{s=qh.new(s),s.numRows()!==n&&vn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):vn(`Unrecognized column: ${t}`)}object(t=0){return kme(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Bp(this,t.columns||Bw()),o=XDe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),qMt(this,u,a,n)}return a}*[Symbol.iterator](){const t=kme(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(W5t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=HMt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return qLe(this,t)}toArrowBuffer(t){return $5t(this,t)}toCSV(t){return L5t(this,t)}toHTML(t){return M5t(this,t)}toJSON(t){return z5t(this,t)}toMarkdown(t){return U5t(this,t)}}function kme(e){let t=e._builder;if(!t){const n=XDe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class G5t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Wn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Y5t[e.type];s&&s(e,t,n)}const zP=(e,t,n)=>{Wn(e.argument,t,n,e)},rj=(e,t,n)=>{Wn(e.left,t,n,e),Wn(e.right,t,n,e)},$me=(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.consequent,t,n,e),e.alternate&&Wn(e.alternate,t,n,e)},ij=(e,t,n)=>{Yf(e.params,t,n,e),Wn(e.body,t,n,e)},Rme=(e,t,n)=>{Wn(e.callee,t,n,e),Yf(e.arguments,t,n,e)},Yf=(e,t,n,r)=>{e.forEach(i=>Wn(i,t,n,r))},Y5t={TemplateLiteral:(e,t,n)=>{Yf(e.expressions,t,n,e),Yf(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Wn(e.object,t,n,e),Wn(e.property,t,n,e)},CallExpression:Rme,NewExpression:Rme,ArrayExpression:(e,t,n)=>{Yf(e.elements,t,n,e)},AssignmentExpression:rj,AwaitExpression:zP,BinaryExpression:rj,LogicalExpression:rj,UnaryExpression:zP,UpdateExpression:zP,ConditionalExpression:$me,ObjectExpression:(e,t,n)=>{Yf(e.properties,t,n,e)},Property:(e,t,n)=>{Wn(e.key,t,n,e),Wn(e.value,t,n,e)},ArrowFunctionExpression:ij,FunctionExpression:ij,FunctionDeclaration:ij,VariableDeclaration:(e,t,n)=>{Yf(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Wn(e.id,t,n,e),Wn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Wn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Yf(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Wn(e.expression,t,n,e)},IfStatement:$me,ForStatement:(e,t,n)=>{Wn(e.init,t,n,e),Wn(e.test,t,n,e),Wn(e.update,t,n,e),Wn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Wn(e.body,t,n,e),Wn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Wn(e.discriminant,t,n,e),Yf(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Wn(e.test,t,n,e),Yf(e.consequent,t,n,e)},ReturnStatement:zP,Program:(e,t,n)=>{Wn(e.body[0],t,n,e)}};function QLe(e){delete e.start,delete e.end,delete e.optional}function Nme(e){QLe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function K5t(e){return Wn(e,null,{Column:Nme,Constant:Nme,Default:QLe}),e}function ps(e,t){return t&&t.type===e}function X5t(e){return ps(YMt,e)||ps(GMt,e)}function Q5t(e){return ei(e)?e:()=>e}const J5t="Escaped functions are not valid as rollup or pivot values.";function Z5t(e,t,n){e.aggronly&&vn(J5t);const r="(row,data)=>fn("+KDe(e.table.columnNames())+",$)";return{escape:QX.escape(r,Q5t(t.expr),n)}}var e8t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],JLe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],t8t="-----------------------------------------------------------------------------------------------------------------------------------------------------",ZLe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",sj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},oj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",n8t={5:oj,"5module":oj+" export import",6:oj+" const class extends export import super"},r8t=/^in(stanceof)?$/,i8t=new RegExp("["+ZLe+"]"),s8t=new RegExp("["+ZLe+t8t+"]");function HV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function jp(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&i8t.test(String.fromCharCode(e)):t===!1?!1:HV(e,JLe)}function jw(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&s8t.test(String.fromCharCode(e)):t===!1?!1:HV(e,JLe)||HV(e,e8t)}var Kn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function xl(e,t){return new Kn(e,{beforeExpr:!0,binop:t})}var Sl={beforeExpr:!0},Va={startsExpr:!0},YQ={};function Mn(e,t){return t===void 0&&(t={}),t.keyword=e,YQ[e]=new Kn(e,t)}var W={num:new Kn("num",Va),regexp:new Kn("regexp",Va),string:new Kn("string",Va),name:new Kn("name",Va),privateId:new Kn("privateId",Va),eof:new Kn("eof"),bracketL:new Kn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Kn("]"),braceL:new Kn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Kn("}"),parenL:new Kn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Kn(")"),comma:new Kn(",",Sl),semi:new Kn(";",Sl),colon:new Kn(":",Sl),dot:new Kn("."),question:new Kn("?",Sl),questionDot:new Kn("?."),arrow:new Kn("=>",Sl),template:new Kn("template"),invalidTemplate:new Kn("invalidTemplate"),ellipsis:new Kn("...",Sl),backQuote:new Kn("`",Va),dollarBraceL:new Kn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Kn("=",{beforeExpr:!0,isAssign:!0}),assign:new Kn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Kn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Kn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:xl("||",1),logicalAND:xl("&&",2),bitwiseOR:xl("|",3),bitwiseXOR:xl("^",4),bitwiseAND:xl("&",5),equality:xl("==/!=/===/!==",6),relational:xl("</>/<=/>=",7),bitShift:xl("<</>>/>>>",8),plusMin:new Kn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:xl("%",10),star:xl("*",10),slash:xl("/",10),starstar:new Kn("**",{beforeExpr:!0}),coalesce:xl("??",1),_break:Mn("break"),_case:Mn("case",Sl),_catch:Mn("catch"),_continue:Mn("continue"),_debugger:Mn("debugger"),_default:Mn("default",Sl),_do:Mn("do",{isLoop:!0,beforeExpr:!0}),_else:Mn("else",Sl),_finally:Mn("finally"),_for:Mn("for",{isLoop:!0}),_function:Mn("function",Va),_if:Mn("if"),_return:Mn("return",Sl),_switch:Mn("switch"),_throw:Mn("throw",Sl),_try:Mn("try"),_var:Mn("var"),_const:Mn("const"),_while:Mn("while",{isLoop:!0}),_with:Mn("with"),_new:Mn("new",{beforeExpr:!0,startsExpr:!0}),_this:Mn("this",Va),_super:Mn("super",Va),_class:Mn("class",Va),_extends:Mn("extends",Sl),_export:Mn("export"),_import:Mn("import",Va),_null:Mn("null",Va),_true:Mn("true",Va),_false:Mn("false",Va),_in:Mn("in",{beforeExpr:!0,binop:7}),_instanceof:Mn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Mn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Mn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Mn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},yc=/\r\n?|\n|\u2028|\u2029/,o8t=new RegExp(yc.source,"g");function JE(e){return e===10||e===13||e===8232||e===8233}function eMe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(JE(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var tMe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ll=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,nMe=Object.prototype,a8t=nMe.hasOwnProperty,u8t=nMe.toString,PI=Object.hasOwn||function(e,t){return a8t.call(e,t)},Dme=Array.isArray||function(e){return u8t.call(e)==="[object Array]"},Lme=Object.create(null);function eg(e){return Lme[e]||(Lme[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function i0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var l8t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,UA=function(t,n){this.line=t,this.column=n};UA.prototype.offset=function(t){return new UA(this.line,this.column+t)};var cF=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function rMe(e,t){for(var n=1,r=0;;){var i=eMe(e,r,t);if(i<0)return new UA(n,t-r);++n,r=i}}var qV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Mme=!1;function c8t(e){var t={};for(var n in qV)t[n]=e&&PI(e,n)?e[n]:qV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Mme&&typeof console=="object"&&console.warn&&(Mme=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Dme(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Dme(t.onComment)&&(t.onComment=f8t(t,t.onComment)),t}function f8t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new cF(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var VA=1,ZE=2,KQ=4,iMe=8,sMe=16,oMe=32,XQ=64,aMe=128,kI=256,QQ=VA|ZE|kI;function JQ(e,t){return ZE|(e?KQ:0)|(t?iMe:0)}var T3=0,ZQ=1,nm=2,uMe=3,lMe=4,cMe=5,Ss=function(t,n,r){this.options=t=c8t(t),this.sourceFile=t.sourceFile,this.keywords=eg(n8t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=sj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=eg(i);var s=(i?i+" ":"")+sj.strict;this.reservedWordsStrict=eg(s),this.reservedWordsStrictBind=eg(s+" "+sj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(yc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=W.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(VA),this.regexpState=null,this.privateNameStack=[]},uh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ss.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};uh.inFunction.get=function(){return(this.currentVarScope().flags&ZE)>0};uh.inGenerator.get=function(){return(this.currentVarScope().flags&iMe)>0&&!this.currentVarScope().inClassFieldInit};uh.inAsync.get=function(){return(this.currentVarScope().flags&KQ)>0&&!this.currentVarScope().inClassFieldInit};uh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&kI)return!1;if(t.flags&ZE)return(t.flags&KQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};uh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&XQ)>0||n||this.options.allowSuperOutsideMethod};uh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&aMe)>0};uh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};uh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(ZE|kI))>0||n};uh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&kI)>0};Ss.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ss.parse=function(t,n){return new this(n,t).parse()};Ss.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ss.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ss.prototype,uh);var La=Ss.prototype,d8t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;La.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Ll.lastIndex=e,e+=Ll.exec(this.input)[0].length;var t=d8t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Ll.lastIndex=e+t[0].length;var n=Ll.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||yc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Ll.lastIndex=e,e+=Ll.exec(this.input)[0].length,this.input[e]===";"&&e++}};La.eat=function(e){return this.type===e?(this.next(),!0):!1};La.isContextual=function(e){return this.type===W.name&&this.value===e&&!this.containsEsc};La.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};La.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};La.canInsertSemicolon=function(){return this.type===W.eof||this.type===W.braceR||yc.test(this.input.slice(this.lastTokEnd,this.start))};La.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};La.semicolon=function(){!this.eat(W.semi)&&!this.insertSemicolon()&&this.unexpected()};La.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};La.expect=function(e){this.eat(e)||this.unexpected()};La.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var fF=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};La.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};La.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};La.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};La.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Pt=Ss.prototype;Pt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==W.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var eJ={kind:"loop"},h8t={kind:"switch"};Pt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ll.lastIndex=this.pos;var t=Ll.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(jp(r,!0)){for(var i=n+1;jw(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!r8t.test(s))return!0}return!1};Pt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ll.lastIndex=this.pos;var e=Ll.exec(this.input),t=this.pos+e[0].length,n;return!yc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(jw(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Pt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=W._var,s="let"),r){case W._break:case W._continue:return this.parseBreakContinueStatement(i,r.keyword);case W._debugger:return this.parseDebuggerStatement(i);case W._do:return this.parseDoStatement(i);case W._for:return this.parseForStatement(i);case W._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case W._class:return e&&this.unexpected(),this.parseClass(i,!0);case W._if:return this.parseIfStatement(i);case W._return:return this.parseReturnStatement(i);case W._switch:return this.parseSwitchStatement(i);case W._throw:return this.parseThrowStatement(i);case W._try:return this.parseTryStatement(i);case W._const:case W._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case W._while:return this.parseWhileStatement(i);case W._with:return this.parseWithStatement(i);case W.braceL:return this.parseBlock(!0,i);case W.semi:return this.parseEmptyStatement(i);case W._export:case W._import:if(this.options.ecmaVersion>10&&r===W._import){Ll.lastIndex=this.pos;var o=Ll.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===W._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===W.name&&c.type==="Identifier"&&this.eat(W.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Pt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(W.semi)||this.insertSemicolon()?e.label=null:this.type!==W.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Pt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Pt.parseDoStatement=function(e){return this.next(),this.labels.push(eJ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(W._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(W.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Pt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(eJ),this.enterScope(0),this.expect(W.parenL),this.type===W.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===W._var||this.type===W._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===W._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===W._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new fF,u=this.parseExpression(t>-1?"await":!0,a);return this.type===W._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===W._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Pt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,o2|(n?0:WV),!1,t)};Pt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(W._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Pt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(W.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Pt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(W.braceL),this.labels.push(h8t),this.enterScope(0);for(var t,n=!1;this.type!==W.braceR;)if(this.type===W._case||this.type===W._default){var r=this.type===W._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(W.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Pt.parseThrowStatement=function(e){return this.next(),yc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var p8t=[];Pt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?oMe:0),this.checkLValPattern(e,t?lMe:nm),this.expect(W.parenR),e};Pt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===W._catch){var t=this.startNode();this.next(),this.eat(W.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(W._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Pt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Pt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(eJ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Pt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Pt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Pt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===W._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Pt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Pt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(W.braceL),e&&this.enterScope(0);this.type!==W.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Pt.parseFor=function(e,t){return e.init=t,this.expect(W.semi),e.test=this.type===W.semi?null:this.parseExpression(),this.expect(W.semi),e.update=this.type===W.parenR?null:this.parseExpression(),this.expect(W.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Pt.parseForIn=function(e,t){var n=this.type===W._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(W.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Pt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(W.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===W._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===W._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(W.comma))break}return e};Pt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?ZQ:nm,!1)};var o2=1,WV=2,fMe=4;Pt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===W.star&&t&WV&&this.unexpected(),e.generator=this.eat(W.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&o2&&(e.id=t&fMe&&this.type!==W.name?null:this.parseIdent(),e.id&&!(t&WV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?ZQ:nm:uMe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(JQ(e.async,e.generator)),t&o2||(e.id=this.type===W.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&o2?"FunctionDeclaration":"FunctionExpression")};Pt.parseFunctionParams=function(e){this.expect(W.parenL),e.params=this.parseBindingList(W.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Pt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(W.braceL);this.type!==W.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&m8t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Pt.parseClassElement=function(e){if(this.eat(W.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(W.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===W.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===W.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(W.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===W.parenL||o!=="method"||i||s){var l=!n.static&&A3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Pt.isClassElementNameStart=function(){return this.type===W.name||this.type===W.privateId||this.type===W.num||this.type===W.string||this.type===W.bracketL||this.type.keyword};Pt.parseClassElementName=function(e){this.type===W.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Pt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&A3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Pt.parseClassField=function(e){if(A3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&A3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(W.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Pt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(kI|XQ);this.type!==W.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Pt.parseClassId=function(e,t){this.type===W.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,nm,!1)):(t===!0&&this.unexpected(),e.id=null)};Pt.parseClassSuper=function(e){e.superClass=this.eat(W._extends)?this.parseExprSubscripts(null,!1):null};Pt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Pt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];PI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function m8t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function A3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Pt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==W.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Pt.parseExport=function(e,t){if(this.next(),this.eat(W.star))return this.parseExportAllDeclaration(e,t);if(this.eat(W._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==W.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Pt.parseExportDeclaration=function(e){return this.parseStatement(null)};Pt.parseExportDefaultDeclaration=function(){var e;if(this.type===W._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,o2|fMe,!1,e)}else if(this.type===W._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Pt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),PI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Pt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Pt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Pt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Pt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Pt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(W.braceL);!this.eat(W.braceR);){if(n)n=!1;else if(this.expect(W.comma),this.afterTrailingComma(W.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Pt.parseImport=function(e){return this.next(),this.type===W.string?(e.specifiers=p8t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===W.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Pt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,nm),this.finishNode(e,"ImportSpecifier")};Pt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,nm),this.finishNode(e,"ImportDefaultSpecifier")};Pt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,nm),this.finishNode(e,"ImportNamespaceSpecifier")};Pt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===W.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(W.comma)))return e;if(this.type===W.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(W.braceL);!this.eat(W.braceR);){if(t)t=!1;else if(this.expect(W.comma),this.afterTrailingComma(W.braceR))break;e.push(this.parseImportSpecifier())}return e};Pt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===W.string){var e=this.parseLiteral(this.value);return l8t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Pt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Pt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var vc=Ss.prototype;vc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};vc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};vc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};vc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==W.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};vc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case W.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(W.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case W.braceL:return this.parseObj(!0)}return this.parseIdent()};vc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(W.comma),t&&this.type===W.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===W.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};vc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};vc.parseBindingListItem=function(e){return e};vc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(W.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};vc.checkLValSimple=function(e,t,n){t===void 0&&(t=T3);var r=t!==T3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===nm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(PI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==cMe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};vc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=T3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};vc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=T3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Cc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},fi={b_stat:new Cc("{",!1),b_expr:new Cc("{",!0),b_tmpl:new Cc("${",!1),p_stat:new Cc("(",!1),p_expr:new Cc("(",!0),q_tmpl:new Cc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Cc("function",!1),f_expr:new Cc("function",!0),f_expr_gen:new Cc("function",!0,!1,null,!0),f_gen:new Cc("function",!1,!1,null,!0)},ex=Ss.prototype;ex.initialContext=function(){return[fi.b_stat]};ex.curContext=function(){return this.context[this.context.length-1]};ex.braceIsBlock=function(e){var t=this.curContext();return t===fi.f_expr||t===fi.f_stat?!0:e===W.colon&&(t===fi.b_stat||t===fi.b_expr)?!t.isExpr:e===W._return||e===W.name&&this.exprAllowed?yc.test(this.input.slice(this.lastTokEnd,this.start)):e===W._else||e===W.semi||e===W.eof||e===W.parenR||e===W.arrow?!0:e===W.braceL?t===fi.b_stat:e===W._var||e===W._const||e===W.name?!1:!this.exprAllowed};ex.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};ex.updateContext=function(e){var t,n=this.type;n.keyword&&e===W.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};ex.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};W.parenR.updateContext=W.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===fi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};W.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?fi.b_stat:fi.b_expr),this.exprAllowed=!0};W.dollarBraceL.updateContext=function(){this.context.push(fi.b_tmpl),this.exprAllowed=!0};W.parenL.updateContext=function(e){var t=e===W._if||e===W._for||e===W._with||e===W._while;this.context.push(t?fi.p_stat:fi.p_expr),this.exprAllowed=!0};W.incDec.updateContext=function(){};W._function.updateContext=W._class.updateContext=function(e){e.beforeExpr&&e!==W._else&&!(e===W.semi&&this.curContext()!==fi.p_stat)&&!(e===W._return&&yc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===W.colon||e===W.braceL)&&this.curContext()===fi.b_stat)?this.context.push(fi.f_expr):this.context.push(fi.f_stat),this.exprAllowed=!1};W.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};W.backQuote.updateContext=function(){this.curContext()===fi.q_tmpl?this.context.pop():this.context.push(fi.q_tmpl),this.exprAllowed=!1};W.star.updateContext=function(e){if(e===W._function){var t=this.context.length-1;this.context[t]===fi.f_expr?this.context[t]=fi.f_expr_gen:this.context[t]=fi.f_gen}this.exprAllowed=!0};W.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==W.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kt=Ss.prototype;Kt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kt.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===W.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(W.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new fF,r=!0);var a=this.start,u=this.startLoc;(this.type===W.parenL||this.type===W.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===W.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===W.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kt.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(W.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(W.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kt.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kt.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==W._in)&&s>r){var o=this.type===W.logicalOR||this.type===W.logicalAND,a=this.type===W.coalesce;a&&(s=W.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===W.coalesce||a&&(this.type===W.logicalOR||this.type===W.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kt.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kt.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===W.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&dMe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===W.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==W._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(W.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function dMe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&dMe(e.expression)}Kt.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kt.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(W.arrow)};Kt.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kt.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(W.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(W.bracketL);if(l||u&&this.type!==W.parenL&&this.type!==W.backQuote||this.eat(W.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(W.bracketR)):this.type===W.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(W.parenL)){var f=new fF,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(W.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===W.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kt.parseExprAtom=function(e,t,n){this.type===W.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case W._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===W.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==W.dot&&this.type!==W.bracketL&&this.type!==W.parenL&&this.unexpected(),this.finishNode(r,"Super");case W._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case W.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(W._function))return this.overrideContext(fi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(W.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===W.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(W.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case W.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case W.num:case W.string:return this.parseLiteral(this.value);case W._null:case W._true:case W._false:return r=this.startNode(),r.value=this.type===W._null?null:this.type===W._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case W.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case W.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(W.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case W.braceL:return this.overrideContext(fi.b_expr),this.parseObj(!1,e);case W._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case W._class:return this.parseClass(this.startNode(),!1);case W._new:return this.parseNew();case W.backQuote:return this.parseTemplate();case W._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kt.parseExprAtomDefault=function(){this.unexpected()};Kt.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===W.parenL&&!e)return this.parseDynamicImport(t);if(this.type===W.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};Kt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(W.parenR)){var t=this.start;this.eat(W.comma)&&this.eat(W.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kt.parseParenExpression=function(){this.expect(W.parenL);var e=this.parseExpression();return this.expect(W.parenR),e};Kt.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new fF,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==W.parenR;)if(l?l=!1:this.expect(W.comma),s&&this.afterTrailingComma(W.parenR,!0)){c=!0;break}else if(this.type===W.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(W.parenR),e&&this.shouldParseArrow(u)&&this.eat(W.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kt.parseParenItem=function(e){return e};Kt.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var g8t=[];Kt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===W.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(W.parenL)?e.arguments=this.parseExprList(W.parenR,this.options.ecmaVersion>=8,!1):e.arguments=g8t,this.finishNode(e,"NewExpression")};Kt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===W.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===W.backQuote,this.finishNode(n,"TemplateElement")};Kt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===W.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(W.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(W.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===W.name||this.type===W.num||this.type===W.string||this.type===W.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===W.star)&&!yc.test(this.input.slice(this.lastTokEnd,this.start))};Kt.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(W.braceR);){if(r)r=!1;else if(this.expect(W.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(W.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kt.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(W.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===W.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(W.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(W.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kt.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kt.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===W.colon&&this.unexpected(),this.eat(W.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===W.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==W.comma&&this.type!==W.braceR&&this.type!==W.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===W.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(W.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(W.bracketR),e.key;e.computed=!1}return e.key=this.type===W.num||this.type===W.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kt.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(JQ(t,r.generator)|XQ|(n?aMe:0)),this.expect(W.parenL),r.params=this.parseBindingList(W.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kt.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(JQ(n,!1)|sMe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kt.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==W.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,cMe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kt.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,ZQ,t?null:n)}};Kt.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(W.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===W.comma?o=null:this.type===W.ellipsis?(o=this.parseSpread(r),r&&this.type===W.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kt.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kt.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kt.parseIdentNode=function(){var e=this.startNode();return this.type===W.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=W.name):this.unexpected(),e};Kt.parsePrivateIdent=function(){var e=this.startNode();return this.type===W.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===W.semi||this.canInsertSemicolon()||this.type!==W.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(W.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var C3=Ss.prototype;C3.raise=function(e,t){var n=rMe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};C3.raiseRecoverable=C3.raise;C3.curPosition=function(){if(this.options.locations)return new UA(this.curLine,this.pos-this.lineStart)};var B0=Ss.prototype,y8t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};B0.enterScope=function(e){this.scopeStack.push(new y8t(e))};B0.exitScope=function(){this.scopeStack.pop()};B0.treatFunctionsAsVarInScope=function(e){return e.flags&ZE||!this.inModule&&e.flags&VA};B0.declareName=function(e,t,n){var r=!1;if(t===nm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&VA&&delete this.undefinedExports[e]}else if(t===lMe){var s=this.currentScope();s.lexical.push(e)}else if(t===uMe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&oMe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&VA&&delete this.undefinedExports[e],u.flags&QQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};B0.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};B0.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};B0.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&QQ)return t}};B0.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&QQ&&!(t.flags&sMe))return t}};var dF=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new cF(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},$I=Ss.prototype;$I.startNode=function(){return new dF(this,this.start,this.startLoc)};$I.startNodeAt=function(e,t){return new dF(this,e,t)};function hMe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}$I.finishNode=function(e,t){return hMe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};$I.finishNodeAt=function(e,t,n,r){return hMe.call(this,e,t,n,r)};$I.copyNode=function(e){var t=new dF(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var pMe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",mMe=pMe+" Extended_Pictographic",gMe=mMe,yMe=gMe+" EBase EComp EMod EPres ExtPict",vMe=yMe,v8t=vMe,_8t={9:pMe,10:mMe,11:gMe,12:yMe,13:vMe,14:v8t},b8t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",w8t={9:"",10:"",11:"",12:"",13:"",14:b8t},Fme="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",_Me="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",bMe=_Me+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",wMe=bMe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",EMe=wMe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",xMe=EMe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",E8t=xMe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",x8t={9:_Me,10:bMe,11:wMe,12:EMe,13:xMe,14:E8t},SMe={};function S8t(e){var t=SMe[e]={binary:eg(_8t[e]+" "+Fme),binaryOfStrings:eg(w8t[e]),nonBinary:{General_Category:eg(Fme),Script:eg(x8t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var aj=0,Bme=[9,10,11,12,13,14];aj<Bme.length;aj+=1){var T8t=Bme[aj];S8t(T8t)}var _t=Ss.prototype,lh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=SMe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};lh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};lh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};lh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};lh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};lh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};lh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};lh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};lh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};lh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};_t.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};_t.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};_t.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};_t.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};_t.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};_t.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};_t.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};_t.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};_t.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};_t.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};_t.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};_t.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};_t.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};_t.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};_t.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};_t.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};_t.regexp_eatSyntaxCharacter=function(e){var t=e.current();return TMe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function TMe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}_t.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!TMe(n);)e.advance();return e.pos!==t};_t.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};_t.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};_t.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};_t.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=i0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=i0(e.lastIntValue);return!0}return!1};_t.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),A8t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function A8t(e){return jp(e,!0)||e===36||e===95}_t.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),C8t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function C8t(e){return jw(e,!0)||e===36||e===95||e===8204||e===8205}_t.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};_t.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};_t.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};_t.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};_t.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};_t.regexp_eatZero=function(e){return e.current()===48&&!hF(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};_t.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};_t.regexp_eatControlLetter=function(e){var t=e.current();return AMe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function AMe(e){return e>=65&&e<=90||e>=97&&e<=122}_t.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&I8t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function I8t(e){return e>=0&&e<=1114111}_t.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};_t.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var CMe=0,zp=1,jl=2;_t.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(O8t(t))return e.lastIntValue=-1,e.advance(),zp;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===jl&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return CMe};function O8t(e){return e===100||e===68||e===115||e===83||e===119||e===87}_t.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),zp}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return CMe};_t.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){PI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};_t.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return zp;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return jl;e.raise("Invalid property name")};_t.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";IMe(t=e.current());)e.lastStringValue+=i0(t),e.advance();return e.lastStringValue!==""};function IMe(e){return AMe(e)||e===95}_t.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";P8t(t=e.current());)e.lastStringValue+=i0(t),e.advance();return e.lastStringValue!==""};function P8t(e){return IMe(e)||hF(e)}_t.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};_t.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===jl&&e.raise("Negated character class may contain strings"),!0}return!1};_t.regexp_classContents=function(e){return e.current()===93?zp:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),zp)};_t.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};_t.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||kMe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};_t.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};_t.regexp_classSetExpression=function(e){var t=zp,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===jl&&(t=jl);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==jl&&(t=zp);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===jl&&(t=jl)}};_t.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};_t.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?zp:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};_t.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===jl&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};_t.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};_t.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===jl&&(t=jl);return t};_t.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?zp:jl};_t.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&k8t(n)||$8t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function k8t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function $8t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}_t.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return R8t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function R8t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}_t.regexp_eatClassControlLetter=function(e){var t=e.current();return hF(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};_t.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};_t.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;hF(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function hF(e){return e>=48&&e<=57}_t.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;OMe(n=e.current());)e.lastIntValue=16*e.lastIntValue+PMe(n),e.advance();return e.pos!==t};function OMe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function PMe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}_t.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};_t.regexp_eatOctalDigit=function(e){var t=e.current();return kMe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function kMe(e){return e>=48&&e<=55}_t.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!OMe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+PMe(i),e.advance()}return!0};var tJ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new cF(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nn=Ss.prototype;Nn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new tJ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Nn.getToken=function(){return this.next(),new tJ(this)};typeof Symbol<"u"&&(Nn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===W.eof,value:t}}}});Nn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(W.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Nn.readToken=function(e){return jp(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Nn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Nn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=eMe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Nn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!JE(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Nn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&tMe.test(String.fromCharCode(e)))++this.pos;else break e}}};Nn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Nn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(W.ellipsis)):(++this.pos,this.finishToken(W.dot))};Nn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(W.assign,2):this.finishOp(W.slash,1)};Nn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?W.star:W.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=W.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(W.assign,n+1):this.finishOp(r,n)};Nn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(W.assign,3)}return this.finishOp(e===124?W.logicalOR:W.logicalAND,2)}return t===61?this.finishOp(W.assign,2):this.finishOp(e===124?W.bitwiseOR:W.bitwiseAND,1)};Nn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(W.assign,2):this.finishOp(W.bitwiseXOR,1)};Nn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||yc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(W.incDec,2):t===61?this.finishOp(W.assign,2):this.finishOp(W.plusMin,1)};Nn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(W.assign,n+1):this.finishOp(W.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(W.relational,n))};Nn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(W.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(W.arrow)):this.finishOp(e===61?W.eq:W.prefix,1)};Nn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(W.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(W.assign,3)}return this.finishOp(W.coalesce,2)}}return this.finishOp(W.question,1)};Nn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),jp(t,!0)||t===92))return this.finishToken(W.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+i0(t)+"'")};Nn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(W.parenL);case 41:return++this.pos,this.finishToken(W.parenR);case 59:return++this.pos,this.finishToken(W.semi);case 44:return++this.pos,this.finishToken(W.comma);case 91:return++this.pos,this.finishToken(W.bracketL);case 93:return++this.pos,this.finishToken(W.bracketR);case 123:return++this.pos,this.finishToken(W.braceL);case 125:return++this.pos,this.finishToken(W.braceR);case 58:return++this.pos,this.finishToken(W.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(W.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(W.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+i0(e)+"'")};Nn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Nn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(yc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new lh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(W.regexp,{pattern:i,flags:o,value:u})};Nn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function N8t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function $Me(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Nn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=$Me(this.input.slice(t,this.pos)),++this.pos):jp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(W.num,n)};Nn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=$Me(this.input.slice(t,this.pos));return++this.pos,jp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(W.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),jp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=N8t(this.input.slice(t,this.pos),n);return this.finishToken(W.num,s)};Nn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Nn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(JE(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(W.string,t)};var RMe={};Nn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===RMe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Nn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw RMe;this.raise(e,t)};Nn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===W.template||this.type===W.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(W.dollarBraceL)):(++this.pos,this.finishToken(W.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(W.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(JE(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Nn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(W.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Nn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return i0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return JE(t)?"":String.fromCharCode(t)}};Nn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Nn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(jw(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?jp:jw)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=i0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Nn.readWord=function(){var e=this.readWord1(),t=W.name;return this.keywords.test(e)&&(t=YQ[e]),this.finishToken(t,e)};var D8t="8.11.2";Ss.acorn={Parser:Ss,version:D8t,defaultOptions:qV,Position:UA,SourceLocation:cF,getLineInfo:rMe,Node:dF,TokenType:Kn,tokTypes:W,keywordTypes:YQ,TokContext:Cc,tokContexts:fi,isIdentifierChar:jw,isIdentifierStart:jp,Token:tJ,isNewLine:JE,lineBreak:yc,lineBreakG:o8t,nonASCIIwhitespace:tMe};function L8t(e,t){return Ss.parse(e,t)}const nJ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},M8t={ecmaVersion:11},jme="$",F8t="d",B8t="d1",j8t="d2",ro=e=>(t,n)=>n.error(t,e+" not allowed"),z8t=ro("Aggregate function"),U8t=ro("Window function"),V8t="Invalid argument",rJ="Invalid column reference",H8t=rJ+" (must be input to an aggregate function)",NMe="Invalid function call",q8t="Invalid member expression",W8t="Invalid operator parameter",G8t="Invalid param reference",Y8t="Invalid variable reference",K8t="Variable not accessible in operator call",X8t="Unsupported variable declaration",Q8t="Unsupported destructuring pattern",DMe="Table expressions do not support closures",LMe="Use aq.escape(fn) to use a function as-is (including closures)",J8t="use table.params({ name: value }) to define dynamic parameters",Z8t="use aq.addFunction(name, fn) to add new op functions",e9t=`
Note: ${DMe}. ${LMe}, or ${J8t}.`,MMe=`
Note: ${DMe}. ${LMe}, or ${Z8t}.`,t9t=`The ${GDe} method is not valid in multi-table expressions.`;function n9t(e,t){const n=r9t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,X5t(r)?(s9t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=B8t),e.scope.add(e.tuple2=j8t),e.scope.add(e.$param=jme)):(e.scope.add(e.tuple=F8t),e.scope.add(e.$param=jme)),Wn(r,e,iJ),e.root}function r9t(e){try{const t=e.field?i9t(e):nr(e)?Wd(e):e;return L8t(`expr=(${t})`,M8t).body[0].expression.right}catch{vn(`Expression parse error: ${e+""}`)}}function i9t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const iJ={FunctionDeclaration:ro("Function definitions"),ForStatement:ro("For loops"),ForOfStatement:ro("For-of loops"),ForInStatement:ro("For-in loops"),WhileStatement:ro("While loops"),DoWhileStatement:ro("Do-while loops"),AwaitExpression:ro("Await expressions"),ArrowFunctionExpression:ro("Function definitions"),AssignmentExpression:ro("Assignments"),FunctionExpression:ro("Function definitions"),NewExpression:ro('Use of "new"'),UpdateExpression:ro("Update expressions"),VariableDeclarator(e,t){KV(e.id,t)},Identifier(e,t,n){jMe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Y8t,e9t)},CallExpression(e,t){const n=FMe(e.callee),r=HDe(n)||qDe(n);if(r){if((t.join||t.aggregate===!1)&&KX(n)&&z8t(e,t),(t.join||t.window===!1)&&XX(n)&&U8t(e,t),t.$op=1,t.ast)YV(e,n,t),e.arguments.forEach(i=>Wn(i,t,GV));else{const i=t.op(o9t(t,r,n,e.arguments));Object.assign(e,{type:BDe,name:i.id})}return t.$op=0,!1}else VDe(n)?YV(e,n,t):t.error(e,NMe,MMe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!ps(Cg,r))return;const{name:s}=r;if(BMe(e)&&ps(Cg,i)&&pf(nJ,i.name)){VMe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return zme(e,o,t,zMe,n);if(s===t.$param)return zme(e,o,t,u9t);t.paramsRef.has(s)?HA(e,t.paramsRef.get(s)):t.columnRef.has(s)?UMe(r,s,t,e):pf(t.params,s)&&HA(r,s)}};function zme(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(ps(YE,s))a=s.value;else try{Wn(s,n,iJ,e),a=n.param(s)}catch{n.error(e,q8t)}return r(e,a,t,n,i),!1}const GV={...iJ,VariableDeclarator:ro("Variable declaration in operator call"),Identifier(e,t,n){jMe(e,t,n)&&t.error(e,K8t)},CallExpression(e,t){const n=FMe(e.callee);VDe(n)?YV(e,n,t):t.error(e,NMe,MMe)}};function s9t(e,t){e.generator&&ro("Generator functions")(e,t),e.async&&ro("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(cS(t,n[0],"tuple1",i(1)),r>1&&cS(t,n[1],"tuple2",i(2)),r>2&&cS(t,n[2],"$param",s)):(cS(t,n[0],"tuple",i(0)),r>1&&cS(t,n[1],"$param",s))),t.root=e.body}function cS(e,t,n,r){ps(Cg,t)?(e.scope.add(t.name),e[n]=t.name):ps(MDe,t)&&t.properties.forEach(i=>{const s=ps(Cg,i.key)?i.key.name:ps(YE,i.key)?i.key.value:e.error(i,V8t);ps(Cg,i.value)||e.error(i.value,Q8t),r(i.value.name,s)})}function o9t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Wn(u,e,GV),i.push(e.field(u))):l<a?(Wn(u,e,GV),s.push(e.param(u))):e.error(u,W8t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function FMe(e){return ps(Cg,e)?e.name:ps(LDe,e)?BMe(e)?a9t(e.property.name):e.property.name:null}function BMe(e){return ps(Cg,e.object)&&e.object.name==="Math"}function a9t(e){return e==="max"?"greatest":e==="min"?"least":e}function jMe(e,t,n){const{name:r}=e;if(!(ps(LDe,n)&&n.property===e)){if(!(ps(FDe,n)&&n.key===e))if(t.paramsRef.has(r))HA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))UMe(e,r,t,n);else if(pf(t.params,r))HA(e,r);else if(pf(nJ,r))VMe(e,r);else return!0}}function zMe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,rJ),r.aggronly&&!r.$op&&r.error(e,H8t),WDe(e,t,n,o,i)}function UMe(e,t,n,r){const[i,s]=n.columnRef.get(t);zMe(e,i,s,n,r)}function u9t(e,t,n,r){r.params&&!pf(r.params,t)&&r.error(e,G8t),HA(e,t)}function HA(e,t){e.type=ZMt,e.name=t}function VMe(e,t){e.type=XMt,e.name=t,e.raw=nJ[t]}function YV(e,t,n){if(t===GDe){const r=n.table;r||n.error(e,t9t),YDe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ia(s)?r.columnName(s):s;return r.column(o)||n.error(i,rJ),o}):r.columnNames())}else e.callee={type:JMt,name:t}}function KV(e,t){ps(Cg,e)?t.scope.add(e.name):ps(WMt,e)?e.elements.forEach(n=>KV(n,t)):ps(MDe,e)?e.properties.forEach(n=>KV(n.value,t)):t.error(e.id,X8t)}const l9t={[TI]:1,[BDe]:1};function _u(e,t={}){const n=t.generate||a3,r=t.compiler||QX,i=f9t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=c9t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return ps(YE,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?K5t(g):f(n(g),i));u.push(y),l9t[g.type]&&y!==g&&ta(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,b=String(d.spec).slice(v,_);vn(`${g}: "${b}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of X4(e))d.value(m+"",g.escape?Z5t(d,g,i):n9t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function c9t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function f9t(e){return(e.table?uj(e.table):e.join?{...uj(e.join[1]),...uj(e.join[0])}:{})||{}}function uj(e){return e&&ei(e.params)?e.params():{}}const HMe="Expr",Ic="ExprList",qMe="ExprNumber",tT="ExprObject",sb="JoinKeys",I3="JoinValues",Il="Options",sJ="OrderKeys",xm="SelectionList",Oy="TableRef",ob="TableRefList",d9t="Descending",h9t="Query",p9t="Selection",m9t="Verb",g9t="Window";function pF(e,t){return e&&e.expr?new Ume({...e,...t}):new Ume(t,e)}class Ume{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ei(this.expr)?{func:!0}:{}}}}function y9t(e){return pF(e,{desc:!0})}function W1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return pF(e,t?{expr:t,...r}:r)}function v9t(e,t,n){return pF(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function _9t(e){const t=n=>n;return t.toString=()=>e,t}function Vme(e,t){return t=t&&ei(t.query)?t.query():t,t&&ei(t.evaluate)?t.evaluate(null,e):e(t)}function WMe(e){return ta(e)&&(nr(e.all)||nr(e.matches)||nr(e.not)||nr(e.range))}function qA(e){return e&&ei(e.toObject)?e.toObject():ei(e)?{expr:String(e),func:!0}:nr(e)?e.map(qA):ta(e)?uF(e,t=>qA(t)):e}function oJ(e){return nr(e)?e.map(oJ):ta(e)?nr(e.verbs)?RI.from(e):nr(e.all)?Bw():nr(e.range)?H5t(...e.range):nr(e.match)?q5t(RegExp(...e.match)):nr(e.not)?XLe(e.not.map(qA)):b9t(e):e}function b9t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=W1(n):e.func===!0&&(t=n=_9t(n)),ta(e.window)){const{frame:r,peers:i}=e.window;t=n=v9t(n,r,i)}e.desc===!0&&(t=y9t(n))}return e===t?uF(e,r=>oJ(r)):t}function w9t(e){return nr(e)?e.map(E9t):e}function E9t(e){const t=[];return yu(e).forEach(n=>{Ia(n)?t.push(n):Eo(n)?t.push(W1(n,null)):ta(n)&&n.expr||ei(n)?t.push(n):vn(`Invalid key value: ${n+""}`)}),t}function x9t(e){return nr(e)?e.map(S9t):e}function S9t(e,t){return t<2?yu(e):e}function T9t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ta(r)&&!ei(r))for(const i in r)t.push(r[i]);else n=Ia(r)?r:Eo(r)?W1(n):ei(r)?n:vn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const A9t={[HMe]:XMe,[Ic]:zw,[qMe]:$9t,[tT]:s0,[sb]:R9t,[I3]:N9t,[sJ]:zw,[xm]:P9t};function C9t(e,t,n){return t===Oy?Hme(e):t===ob?e.map(Hme):GMe(qA(e),t,n)}function GMe(e,t,n){return t===Il?e&&I9t(e,n):A9t[t](e)}function I9t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?GMe(i,t[r]):i}return n}function O9t(e,t){return _u({expr:e},{...t,ast:!0}).exprs[0]}function aJ(e){return{type:TI,name:e}}function YMe(e){return{type:TI,index:e}}function s0(e,t){if(Eo(e))return O9t(e,t);if(e.expr){let n;if(e.field===!0?n=aJ(e.expr):e.func===!0&&(n=s0(e.expr,t)),n)return e.desc&&(n={type:d9t,expr:n}),e.window&&(n={type:g9t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...s0(e[n],t),as:n}))}function KMe(e){const t=p9t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:zw(e.not)}:e.range?{type:t,operator:"range",arguments:zw(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:vn("Invalid input")}function P9t(e){return yu(e).map(k9t).flat()}function k9t(e){return WMe(e)?KMe(e):Ia(e)?YMe(e):Eo(e)?aJ(e):ta(e)?Object.keys(e).map(t=>({type:TI,name:t,as:e[t]})):vn("Invalid input")}function XMe(e){return WMe(e)?KMe(e):Ia(e)?YMe(e):Eo(e)?aJ(e):ta(e)?s0(e):vn("Invalid input")}function zw(e){return yu(e).map(XMe).flat()}function $9t(e){return Ia(e)?e:s0(e)}function R9t(e){return nr(e)?e.map(zw):s0(e,{join:!0})}function N9t(e){return nr(e)?e.map((t,n)=>n<2?zw(t):s0(t,{join:!0})):s0(e,{join:!0})}function Hme(e){return e&&ei(e.toAST)?e.toAST():e}class QMe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===sb?w9t(a):o===I3?x9t(a):o===sJ?T9t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=XV[t.verb],r=(n.schema||[]).map(({name:i})=>oJ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Oy?Vme(n,o):s===ob?o.map(a=>Vme(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=qA(this[n])}),t}toAST(){const t={type:m9t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=C9t(this[n],r,i)}),t}}function Ar(e,t){return Object.assign((...n)=>new QMe(e,t,n),{schema:t})}const XV={count:Ar("count",[{name:"options",type:Il}]),derive:Ar("derive",[{name:"values",type:tT},{name:"options",type:Il,props:{before:xm,after:xm}}]),filter:Ar("filter",[{name:"criteria",type:tT}]),groupby:Ar("groupby",[{name:"keys",type:Ic}]),orderby:Ar("orderby",[{name:"keys",type:sJ}]),relocate:Ar("relocate",[{name:"columns",type:xm},{name:"options",type:Il,props:{before:xm,after:xm}}]),rename:Ar("rename",[{name:"columns",type:xm}]),rollup:Ar("rollup",[{name:"values",type:tT}]),sample:Ar("sample",[{name:"size",type:qMe},{name:"options",type:Il,props:{weight:HMe}}]),select:Ar("select",[{name:"columns",type:xm}]),ungroup:Ar("ungroup"),unorder:Ar("unorder"),reify:Ar("reify"),dedupe:Ar("dedupe",[{name:"keys",type:Ic,default:[]}]),impute:Ar("impute",[{name:"values",type:tT},{name:"options",type:Il,props:{expand:Ic}}]),fold:Ar("fold",[{name:"values",type:Ic},{name:"options",type:Il}]),pivot:Ar("pivot",[{name:"keys",type:Ic},{name:"values",type:Ic},{name:"options",type:Il}]),spread:Ar("spread",[{name:"values",type:Ic},{name:"options",type:Il}]),unroll:Ar("unroll",[{name:"values",type:Ic},{name:"options",type:Il,props:{drop:Ic}}]),lookup:Ar("lookup",[{name:"table",type:Oy},{name:"on",type:sb},{name:"values",type:Ic}]),join:Ar("join",[{name:"table",type:Oy},{name:"on",type:sb},{name:"values",type:I3},{name:"options",type:Il}]),cross:Ar("cross",[{name:"table",type:Oy},{name:"values",type:I3},{name:"options",type:Il}]),semijoin:Ar("semijoin",[{name:"table",type:Oy},{name:"on",type:sb}]),antijoin:Ar("antijoin",[{name:"table",type:Oy},{name:"on",type:sb}]),concat:Ar("concat",[{name:"tables",type:ob}]),union:Ar("union",[{name:"tables",type:ob}]),intersect:Ar("intersect",[{name:"tables",type:ob}]),except:Ar("except",[{name:"tables",type:ob}])};class RI extends xDe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new RI(t.map(QMe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return qme(this,"toObject")}toJSON(){return this.toObject()}toAST(){return qme(this,"toAST",{type:h9t})}}function qme(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function D9t(e,t){return new RI(e._verbs.concat(t),e._params,e._table)}for(const e in XV){const t=XV[e];RI.prototype["__"+e]=function(n,...r){return D9t(n,t(...r))}}function tx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function L9t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function uJ(e,t){const n=_l();return t.forEach((r,i)=>{const s=Eo(r)?r:i;if(s){const o=e.column(i)||vn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function JMe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||vn("relocate requires a before or after option."),i&&s&&vn("relocate accepts only one of the before or after options."),t=Bp(e,t);const o=[...Bp(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),uJ(e,u)}function NI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function lJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function M9t(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function F9t(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function UP(e){return LA(e)?e:+e}function B9t(e,t){const n=e.length;if(!n)return Xn;if((t=+t)<=0||n<2)return UP(e[0]);if(t>=1)return UP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=UP(e[i]);return LA(s)?s:s+(UP(e[i+1])-s)*(r-i)}class j9t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:M9t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:F9t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(lJ)),B9t(this._sorted,t)}}const O3=(e,t,n)=>tx(t,"{"+NI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function z9t(e,t){const{ops:n,output:r}=U9t(e,t),i=e[0].fields,s=i.length,o=s===0?cJ:s===1?V9t:s===2?H9t:vn("Unsupported field count: "+s);return new o(i,n,r,t)}function U9t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=HDe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class cJ extends G5t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new j9t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class V9t extends cJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=O3(n,s,"add"),this._rem=O3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Xc(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Xc(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class H9t extends cJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=O3(n,s,"add"),this._rem=O3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Xc(i)&&Xc(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Xc(i)&&Xc(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Bv(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=nx(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function nx(e,t,n){if(!t.length)return n;const r=ZMe(t),i=e.groups(),s=i?i.size:1;return n=n||Y4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=t6e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=e6e(e,o);o.write(a,n,0)}),n}function ZMe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(z9t(r[i],t));return n}function e6e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function t6e(e,t,n){const{keys:r,size:i}=n,s=Y4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function n6e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function r6e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Wme=r6e(lJ);function q9t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?tx(["w","r","k"],"{"+NI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,b=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Wme.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Wme.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const w=i[E],x=a[E];for(let S=_;S<p.i0;++S)w.rem(x,s[S],e);for(let S=b;S<p.i1;++S)w.add(x,s[S],e);w.write(x,u,l)}return h(p,u,l),u}};return p}const W9t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),G9t=e=>!!e.peers;function Y9t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=qDe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function K9t(e,t,n,r={},i){const s=e.data(),o=X9t(i,s),a=o.length,u=tx(["r","d","op"],"{"+NI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Q9t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function X9t(e,t){const n={};return e.forEach(r=>{const i=W9t(r),s=G9t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});KX(r.name)?a.push(r):u.push(Y9t(r))}),Object.values(n).map(r=>q9t(t,r.frame,r.peers,r.winOps,ZMe(r.aggOps,r.frame[0]!=null?-1:1)))}function Q9t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function J9t(e){return XX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function fJ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=_l(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Z9t(r),c=e.isGrouped()?e.groups().size:1,f=nx(e,u,Y4(r.length,()=>Array(c)));return l.length?K9t(e,a,n,f,l):eBt(e,a,n,f),e.create(o)}function Z9t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(J9t(s)?n:t).push(s)}return[t,n]}function eBt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function tBt(e,t,n={}){const r=fJ(e,_u(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:JMe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function nBt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const VP=2147483648,rBt=4294967295;class i6e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&VP>>>t}set(t){this._bits[t>>5]|=VP>>>t}clear(t){this._bits[t>>5]&=~(VP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&rBt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=VP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function iBt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new i6e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function sBt(e,t){const n=_u({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=fJ(e,n,{drop:!0}).column("p");r=s=>i[s]}return iBt(e,r)}function s6e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Bv(e,r,n),l=_l(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(b=>{if(!a.has(b)){const E=l.add(b,[]);c.has(b)||(f.push(e.column(b)),d.push(E))}}),t.forEach(b=>{a.has(b)||(l.has(b)||l.add(b,[]),h.push(l.data[b]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(b,E)=>{for(let w=0;w<g;++w)d[w].length=m+E,d[w].fill(f[w].get(b),m,m+E)},_=p?(b,E)=>{for(let w=0;w<E;++w)p[b+w]=w}:()=>{};if(y===1){const b=u[0],E=h[0];e.scan((w,x)=>{const S=yu(b(w,x)),I=Math.min(S.length,s);v(w,I);for(let C=0;C<I;++C)E[m+C]=S[C];_(m,I),m+=I})}else e.scan((b,E)=>{let w=0;const x=u.map(S=>{const I=yu(S(b,E));return w=Math.min(Math.max(w,I.length),s),I});v(b,w);for(let S=0;S<y;++S){const I=h[S],C=x[S];for(let O=0;O<w;++O)I[m+O]=C[O]}_(m,w),m+=w});return e.create(l.new())}function oBt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Bv(e,r,n);return s6e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function mf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ia(o)?t.columnName(o):o,Eo(o)?i.set(o,W1(o)):ei(o)?Bp(t,o).forEach(s):ta(o)?YLe(i,o):vn(`Invalid ${e} value: ${o+""}`)};return yu(n).forEach(s),r.preparse&&r.preparse(i),_u(i,{table:t,...r})}function aBt(e,t,n){return oBt(e,mf("fold",e,t),n)}function Gme(e,t,n,r){const i=n&&n.length;return uBt(i?lBt(e,n,r):e,t,i)}function uBt(e,{names:t,exprs:n,ops:r},i){const s=Bv(e,r,n),o=i?null:_l(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Xc(p)?p:d(h)})}),i?e:e.create(o)}function lBt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=u3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=_l(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=u3(o.map((p,m)=>g=>g[m])),h=tx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Yme(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Yme(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Yme(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function dJ(e,{names:t,exprs:n,ops:r}){const i=_l(),s=e.groups();return s&&n6e(i,s),cBt(t,n,s,nx(e,r),i),e.create(i.new())}function cBt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function fBt(e,t,n={}){if(t=_u(t,{table:e}),t.names.forEach(r=>e.column(r)?0:vn(`Invalid impute column ${Wd(r)}`)),n.expand){const r={preparse:dBt,aggronly:!0},i=mf("impute",e,n.expand,r),s=dJ(e.ungroup(),i);return Gme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Gme(e,t)}function dBt(e){e.forEach((t,n)=>t.field?e.set(n,$De(t+"")):0)}function hBt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function o6e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function pBt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function mBt(e,t){const n=["i","a","j","b"];return tx(n,"{"+NI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function gBt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=_l(),g=Array(p),y=Array(p);for(let b=0;b<r.length;++b)g[b]=m.add(r[b],[]),y[b]=i[b];const v=mBt(g,y);if((nr(n)?vBt:yBt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let b=0;b<u;++b)l[b]||v(a[b],o,-1,c);if(s.right)for(let b=0;b<d;++b)h[b]||v(-1,o,f[b],c);return e.create(m.new())}function yBt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function vBt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(w,x,S,I)=>e(S,I,w,x));const b=pBt(v,m,g),E=p.length;for(let w=0;w<E;++w){const x=p[w],S=b.get(d(x,f));if(S){const I=S.length;for(let C=0;C<I;++C){const O=S[C];_(x,f,v[O],m),y[O]=1}h[w]=1}}}function P3(e,t,n){const r=new Map;yu(n).forEach((s,o)=>{s=Ia(s)?t.columnName(s):s,Eo(s)?r.set(o,W1(s)):ei(s)||ta(s)&&s.expr?r.set(o,s):vn(`Invalid ${e} key value: ${s+""}`)});const i=_u(r,{table:t,aggregate:!1,window:!1});return u3(i.exprs,!0)}function _Bt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function hJ(e,t,n){if(n)Eo(n)?n=[n,n]:nr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=_Bt(e.columnNames(),t.columnNames());r.length||vn("Natural join requires shared column names."),n=[r,r]}return n}function a6e(e,t,n,r){return n.length!==r.length&&vn("Mismatched number of join keys"),[P3("join",e,n),P3("join",t,r)]}const bBt={aggregate:!1,window:!1},wBt={...bBt,index:1};function Kme(e,t,n,r,i={}){n=hJ(e,t,n);const s={join:[e,t]};let o;if(nr(n)){const[a,u]=n.map(yu);o=a6e(e,t,a,u),r||(r=EBt(e,a,u,i))}else o=_u({on:n},s).exprs[0],r||(r=[Bw(),Bw()]);return gBt(e,t,o,xBt(e,t,r,s,i&&i.suffix),i)}function EBt(e,t,n,r){const i=[];t.forEach((o,a)=>Eo(o)&&o===n[a]?i.push(o):0);const s=XLe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Wd(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,Bw()]:[Bw(),s]}function xBt(e,t,n,r,i=[]){if(nr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=mf("join",e,n[0],r)),u--&&(o=mf("join",t,n[1],wBt)),u--&&(a=_u(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(Xme(s.names,l,i[0]||"_1"),Xme(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return _u(n,r)}function Xme(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function SBt(e,t,n,r={}){const i=new i6e(e.totalRows());return(nr(n)?TBt:ABt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function TBt(e,t,n,[r,i]){const s=o6e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function ABt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Qme(e,t,n,r){n=hJ(e,t,n);const i=nr(n)?a6e(e,t,...n.map(yu)):_u({on:n},{join:[e,t]}).exprs[0];return SBt(e,t,i,r)}function CBt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=_l(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Xn)));const l=o6e(t,r),c=tx(["lr","rr","data"],"{"+NI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Bv(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function IBt(e,t,n,r){return n=hJ(e,t,n),CBt(e,t,[P3("lookup",e,n[0]),P3("lookup",t,n[1])],mf("lookup",t,r))}const QV=(e,t)=>e??t;function OBt(e,t,n,r={}){const{keys:i,keyColumn:s}=PBt(e,t,r),o=QV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>nx(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(kBt(n,a,e.groups(),u))}function PBt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=QV(n.sort,!0),s=QV(n.keySeparator,"_"),o=Bv(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=nx(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function kBt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=_l(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&n6e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function $Bt(e,t,n,r){return OBt(e,mf("fold",e,t),mf("fold",e,n,{preparse:RBt,aggronly:!0}),r)}function RBt(e){e.forEach((t,n)=>t.field?e.set(n,ODe(t+"")):0)}function NBt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),uJ(e,Bp(e,t,n))}function Jme(e,t){return dJ(e,_u(t,{table:e,aggronly:!0,window:!1}))}function DBt(e,t,n,r){return(t?r?MBt:LBt:r?BBt:FBt)(e.length,e,n,r)}function LBt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*GE()|0];return t}function MBt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=r6e(lJ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*GE())];return t}function FBt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*GE();s<e&&(t[s|0]=n[i])}return t}function BBt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(GE())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function jBt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=GE()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function zBt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):DBt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&jBt(u),e.reify(u)}function UBt(e,t,n={}){return zBt(e,VBt(e,t),HBt(e,n.weight),n)}const u6e=e=>t=>e.get(t)||0;function VBt(e,t){return Ia(t)?()=>t:u6e(dJ(e,_u({size:t},{table:e,window:!1})).column("size"))}function HBt(e,t){return t==null?null:(t=Ia(t)?e.columnName(t):t,u6e(Eo(t)?e.column(t):fJ(e,_u({w:t},{table:e}),{drop:!0}).column("w")))}function qBt(e,t){return uJ(e,Bp(e,t))}function WBt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Bv(e,r,n),l=_l(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=GBt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function GBt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=yu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Xn));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function YBt(e,t,n){return WBt(e,mf("spread",e,t),n)}function KBt(e,t){return e.concat(t).dedupe()}function XBt(e,t,n){return s6e(e,mf("unroll",e,t),n&&n.drop?{...n,drop:mf("unroll",e,n.drop).names}:n)}function QBt(e,t){return e.create({groups:JBt(e,t)})}function JBt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Bv(e,r,n);const o=u3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function ZBt(e,t){return QBt(e,mf("groupby",e,t))}function ejt(e,t){return e.create({order:t})}const tjt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function njt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=_u(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([a3(p,{index:"a",op:o}),a3(p,{index:"b",op:a})])},window:!1}),l=nx(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=tjt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function rjt(e,t){return ejt(e,ijt(e,t))}function ijt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ta(o)&&!ei(o))for(const a in o)i(o[a]);else i(Ia(o)?W1(s,e.columnName(o)):Eo(o)?W1(s):ei(o)?s:vn(`Invalid orderby field: ${s+""}`))}),njt(e,r)}function sjt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=_l();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Xn};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function ojt(e,t){const n=_l(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?t6e(e,t,r):[e6e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function ajt(e){return e.isGrouped()?e.create({groups:null}):e}function ujt(e){return e.isOrdered()?e.create({order:null}):e}const ljt={__antijoin:(e,t,n)=>Qme(e,t,n,{anti:!0}),__count:(e,t={})=>Jme(e,{[t.as||"count"]:PDe()}),__cross:(e,t,n,r)=>Kme(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:sjt,__dedupe:L9t,__derive:tBt,__except:nBt,__filter:sBt,__fold:aBt,__impute:fBt,__intersect:hBt,__join:Kme,__lookup:IBt,__pivot:$Bt,__relocate:JMe,__rename:NBt,__rollup:Jme,__sample:UBt,__select:qBt,__semijoin:Qme,__spread:YBt,__union:KBt,__unroll:XBt,__groupby:ZBt,__orderby:rjt,__ungroup:ajt,__unorder:ujt,__reduce:ojt};Object.assign(qh.prototype,ljt);function cjt(e,t){return qh.from(e,t)}function lj(e){return pF(e,{escape:!0,toString(){vn("Escaped values can not be serialized.")}})}qh.prototype;function fjt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let HP;const djt=new Uint8Array(16);function hjt(){if(!HP&&(HP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!HP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HP(djt)}const Zs=[];for(let e=0;e<256;++e)Zs.push((e+256).toString(16).slice(1));function pjt(e,t=0){return(Zs[e[t+0]]+Zs[e[t+1]]+Zs[e[t+2]]+Zs[e[t+3]]+"-"+Zs[e[t+4]]+Zs[e[t+5]]+"-"+Zs[e[t+6]]+Zs[e[t+7]]+"-"+Zs[e[t+8]]+Zs[e[t+9]]+"-"+Zs[e[t+10]]+Zs[e[t+11]]+Zs[e[t+12]]+Zs[e[t+13]]+Zs[e[t+14]]+Zs[e[t+15]]).toLowerCase()}const mjt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zme={randomUUID:mjt};function ege(e,t,n){if(Zme.randomUUID&&!t&&!e)return Zme.randomUUID();e=e||{};const r=e.random||(e.rng||hjt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return pjt(r)}class Rd{static get(){let t=ege();for(;this.ids.has(t);)t=ege();return this.ids.set(t,!0),t}}Rd.ids=new Map;function Nd(e){return"parent"in e}function gjt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Rd.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Rd.get(),createdOn:Date.now(),val:r}]:[];return{id:Rd.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function yjt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Rd.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Rd.get(),createdOn:Date.now(),val:s}]:[];return{id:Rd.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Ajt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function G1(e){return!!e&&!!e[al]}function o0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Cjt}(e)||Array.isArray(e)||!!e[a2]||!!(!((t=e.constructor)===null||t===void 0)&&t[a2])||mF(e)||gF(e))}function Uw(e,t,n){n===void 0&&(n=!1),a0(e)===0?(n?Object.keys:_J)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function a0(e){var t=e[al];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:mF(e)?2:gF(e)?3:0}function WA(e,t){return a0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b$(e,t){return a0(e)===2?e.get(t):e[t]}function l6e(e,t,n){var r=a0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function vjt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function mF(e){return Sjt&&e instanceof Map}function gF(e){return Tjt&&e instanceof Set}function by(e){return e.o||e.t}function pJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ijt(e);delete t[al];for(var n=_J(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function mJ(e,t){return t===void 0&&(t=!1),gJ(e)||G1(e)||!o0(e)||(a0(e)>1&&(e.set=e.add=e.clear=e.delete=_jt),Object.freeze(e),t&&Uw(e,function(n,r){return mJ(r,!0)},!0)),e}function _jt(){ki(2)}function gJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Dd(e){var t=tH[e];return t||ki(18,e),t}function bjt(e,t){tH[e]||(tH[e]=t)}function tge(){return{}.NODE_ENV==="production"||Vw||ki(0),Vw}function cj(e,t){t&&(Dd("Patches"),e.u=[],e.s=[],e.v=t)}function k3(e){JV(e),e.p.forEach(wjt),e.p=null}function JV(e){e===Vw&&(Vw=e.l)}function nge(e){return Vw={p:[],l:Vw,h:e,m:!0,_:0}}function wjt(e){var t=e[al];t.i===0||t.i===1?t.j():t.O=!0}function fj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Dd("ES5").S(t,e,r),r?(n[al].P&&(k3(t),ki(4)),o0(e)&&(e=$3(t,e),t.l||R3(t,e)),t.u&&Dd("Patches").M(n[al].t,e,t.u,t.s)):e=$3(t,n,[]),k3(t),t.u&&t.v(t.u,t.s),e!==vJ?e:void 0}function $3(e,t,n){if(gJ(t))return t;var r=t[al];if(!r)return Uw(t,function(s,o){return rge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return R3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=pJ(r.k):r.o;Uw(r.i===3?new Set(i):i,function(s,o){return rge(e,r,i,s,o,n)}),R3(e,i,!1),n&&e.u&&Dd("Patches").R(r,n,e.u,e.s)}return r.o}function rge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ki(5),G1(i)){var o=$3(e,i,s&&t&&t.i!==3&&!WA(t.D,r)?s.concat(r):void 0);if(l6e(n,r,o),!G1(o))return;e.m=!1}if(o0(i)&&!gJ(i)){if(!e.h.F&&e._<1)return;$3(e,i),t&&t.A.l||R3(e,i)}}function R3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&mJ(t,n)}function dj(e,t){var n=e[al];return(n?by(n):e)[t]}function ige(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ZV(e){e.P||(e.P=!0,e.l&&ZV(e.l))}function hj(e){e.o||(e.o=pJ(e.t))}function eH(e,t,n){var r=mF(t)?Dd("MapSet").N(t,n):gF(t)?Dd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:tge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=nH;o&&(u=[a],l=nT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Dd("ES5").J(t,n);return(n?n.A:tge()).p.push(r),r}function Ejt(e){return G1(e)||ki(22,e),function t(n){if(!o0(n))return n;var r,i=n[al],s=a0(n);if(i){if(!i.P&&(i.i<4||!Dd("ES5").K(i)))return i.t;i.I=!0,r=sge(n,s),i.I=!1}else r=sge(n,s);return Uw(r,function(o,a){i&&b$(i.t,o)===a||l6e(r,o,t(a))}),s===3?new Set(r):r}(e)}function sge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return pJ(e)}function xjt(){function e(r){if(!o0(r))return r;if(Array.isArray(r))return r.map(e);if(mF(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(gF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return WA(r,a2)&&(i[a2]=r[a2]),i}function t(r){return G1(r)?e(r):r}var n="add";bjt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=a0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||ki(24),typeof u=="function"&&f==="prototype"&&ki(24),typeof(u=b$(u,f))!="object"&&ki(15,o.join("/"))}var d=a0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Uw(a.D,function(h,p){var m=b$(f,h),g=b$(d,h),y=p?WA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===vJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var oge,Vw,yJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Sjt=typeof Map<"u",Tjt=typeof Set<"u",age=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",vJ=yJ?Symbol.for("immer-nothing"):((oge={})["immer-nothing"]=!0,oge),a2=yJ?Symbol.for("immer-draftable"):"__$immer_draftable",al=yJ?Symbol.for("immer-state"):"__$immer_state",Ajt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Cjt=""+Object.prototype.constructor,_J=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ijt=Object.getOwnPropertyDescriptors||function(e){var t={};return _J(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},tH={},nH={get:function(e,t){if(t===al)return e;var n=by(e);if(!WA(n,t))return function(i,s,o){var a,u=ige(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!o0(r)?r:r===dj(e.t,t)?(hj(e),e.o[t]=eH(e.A.h,r,e)):r},has:function(e,t){return t in by(e)},ownKeys:function(e){return Reflect.ownKeys(by(e))},set:function(e,t,n){var r=ige(by(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=dj(by(e),t),s=i==null?void 0:i[al];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(vjt(n,i)&&(n!==void 0||WA(e.t,t)))return!0;hj(e),ZV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return dj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,hj(e),ZV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=by(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ki(12)}},nT={};Uw(nH,function(e,t){nT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ki(13),nT.set.call(this,e,t,void 0)},nT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ki(14),nH.set.call(this,e[0],t,n,e[0])};var Ojt=function(){function e(n){var r=this;this.g=age,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&ki(6),o!==void 0&&typeof o!="function"&&ki(7),o0(i)){var c=nge(r),f=eH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?k3(c):JV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return cj(c,o),fj(m,c)},function(m){throw k3(c),m}):(cj(c,o),fj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===vJ&&(l=void 0),r.F&&mJ(l,!0),o){var h=[],p=[];Dd("Patches").M(i,l,h,p),o(h,p)}return l}ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){o0(n)||ki(8),G1(n)&&(n=Ejt(n));var r=nge(this),i=eH(this,n,void 0);return i[al].C=!0,JV(r),i},t.finishDraft=function(n,r){var i=n&&n[al];({}).NODE_ENV!=="production"&&(i&&i.C||ki(9),i.I&&ki(10));var s=i.A;return cj(s,r),fj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!age&&ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Dd("Patches").$;return G1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ul=new Ojt,Pjt=ul.produce;ul.produceWithPatches.bind(ul);ul.setAutoFreeze.bind(ul);ul.setUseProxies.bind(ul);ul.applyPatches.bind(ul);ul.createDraft.bind(ul);ul.finishDraft.bind(ul);function kjt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=gjt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return xke({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Rd.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Rd.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function $jt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=kjt(e),s=lEt();s.startListening({matcher:ade(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=ade(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=wke({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Rd.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Rjt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Njt=Object.prototype.hasOwnProperty;function rH(e,t){return Njt.call(e,t)}function iH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)rH(e,i)&&r.push(i);return r}function uu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function sH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function wy(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function oH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(oH(e[t]))return!0}else if(typeof e=="object"){for(var r=iH(e),i=r.length,s=0;s<i;s++)if(oH(e[r[s]]))return!0}}return!1}function uge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var f6e=function(e){Rjt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,uge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=uge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ai=f6e,Djt=uu,ab={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=N3(n,this.path);r&&(r=uu(r));var i=y1(n,{op:"remove",path:this.from}).removed;return y1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=N3(n,this.from);return y1(n,{op:"add",path:this.path,value:uu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:GA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ljt={add:function(e,t,n){return sH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ab.move,copy:ab.copy,test:ab.test,_get:ab._get};function N3(e,t){if(t=="")return e;var n={op:"_get",path:t};return y1(e,n),n.value}function y1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):D3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=N3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=GA(e,t.value),o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ai("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=uu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=D3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=c6e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!sH(h))throw new Ai("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);sH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ai("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Ljt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ab[t.op].call(t,l,h,e);if(o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ai("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function yF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ai("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=uu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=y1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Mjt(e,t,n){var r=y1(e,t);if(r.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function D3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ai("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ab[e.op]){if(typeof e.path!="string")throw new Ai("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ai('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ai("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ai("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&oH(e.value))throw new Ai("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ai("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ai("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=d6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ai("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ai("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function d6e(e,t,n){try{if(!Array.isArray(e))throw new Ai("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)yF(uu(t),uu(e),n||!0);else{n=n||D3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ai)return i;throw i}}function GA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!GA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!GA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Fjt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ai,_areEquals:GA,applyOperation:y1,applyPatch:yF,applyReducer:Mjt,deepClone:Djt,getValueByPointer:N3,validate:d6e,validator:D3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var bJ=new WeakMap,Bjt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),jjt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function zjt(e){return bJ.get(e)}function Ujt(e,t){return e.observers.get(t)}function Vjt(e,t){e.observers.delete(t.callback)}function Hjt(e,t){t.unobserve()}function qjt(e,t){var n=[],r,i=zjt(e);if(!i)i=new Bjt(e),bJ.set(e,i);else{var s=Ujt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=uu(e),t){r.callback=t,r.next=null;var o=function(){aH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){aH(r),clearTimeout(r.next),Vjt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new jjt(t,r)),r}function aH(e,t){t===void 0&&(t=!1);var n=bJ.get(e.object);wJ(n.value,e.object,e.patches,"",t),e.patches.length&&yF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function wJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=iH(t),o=iH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(rH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?wJ(c,f,n,r+"/"+wy(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+wy(l),value:uu(c)}),n.push({op:"replace",path:r+"/"+wy(l),value:uu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+wy(l),value:uu(c)}),n.push({op:"remove",path:r+"/"+wy(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!rH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+wy(l),value:uu(t[l])})}}}function h6e(e,t,n){n===void 0&&(n=!1);var r=[];return wJ(e,t,r,"",n),r}const Wjt=Object.freeze(Object.defineProperty({__proto__:null,compare:h6e,generate:aH,observe:qjt,unobserve:Hjt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Fjt,Wjt,{JsonPatchError:f6e,deepClone:uu,escapePathComponent:wy,unescapePathComponent:c6e});var rT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(rT||{});function w$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=m6e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=w$(i,t);return yF(a,uu(o),!0,!1).newDocument}function Gjt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function p6e({registry:e,initialState:t}){let n=!1;const r=fjt(),i=$jt(t);function s(c){return i.backend.nodes[c]}r.listen(rT.TRAVERSAL_START,()=>{n=!0}),r.listen(rT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return w$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=w$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=h6e(y,f);if(Gjt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=yjt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=w$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(rT.TRAVERSAL_START);const f=m6e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Kjt(p,m)?Nd(p)&&d.push(...p.sideEffects.undo):Nd(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(rT.TRAVERSAL_END)},undo(){const{current:c}=i;return Nd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return g6e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Yjt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Nd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Nd(r)&&(r=n[r.parent]),Nd(i)&&(i=n[i.parent]);return r.id}function m6e(e,t,n){const r=Yjt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Nd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Nd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Kjt(e,t){if(Nd(e)&&e.parent===t.id)return!0;if(Nd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function g6e(e,t){return{...e,children:e.children.map(n=>g6e(t[n],t)),name:`${e.label}`}}xjt();function Xjt(e){return e.length===2?Pjt(e):e}class vF{static create(){return new vF}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Xjt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Pd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var Qjt="Expected a function",lge=NaN,Jjt="[object Symbol]",Zjt=/^\s+|\s+$/g,e7t=/^[-+]0x[0-9a-f]+$/i,t7t=/^0b[01]+$/i,n7t=/^0o[0-7]+$/i,r7t=parseInt,i7t=typeof iu=="object"&&iu&&iu.Object===Object&&iu,s7t=typeof self=="object"&&self&&self.Object===Object&&self,o7t=i7t||s7t||Function("return this")(),a7t=Object.prototype,u7t=a7t.toString,l7t=Math.max,c7t=Math.min,pj=function(){return o7t.Date.now()};function f7t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Qjt);t=cge(t)||0,uH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?l7t(cge(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(w){var x=r,S=i;return r=i=void 0,l=w,o=e.apply(S,x),o}function p(w){return l=w,a=setTimeout(y,t),c?h(w):o}function m(w){var x=w-u,S=w-l,I=t-x;return f?c7t(I,s-S):I}function g(w){var x=w-u,S=w-l;return u===void 0||x>=t||x<0||f&&S>=s}function y(){var w=pj();if(g(w))return v(w);a=setTimeout(y,m(w))}function v(w){return a=void 0,d&&r?h(w):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function b(){return a===void 0?o:v(pj())}function E(){var w=pj(),x=g(w);if(r=arguments,i=this,u=w,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=b,E}function uH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function d7t(e){return!!e&&typeof e=="object"}function h7t(e){return typeof e=="symbol"||d7t(e)&&u7t.call(e)==Jjt}function cge(e){if(typeof e=="number")return e;if(h7t(e))return lge;if(uH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Zjt,"");var n=t7t.test(e);return n||n7t.test(e)?r7t(e.slice(2),n?2:8):e7t.test(e)?lge:+e}var p7t=f7t;const jf=pl(p7t);function y6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=A.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=A.useMemo(()=>VE(".2s"),[]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Ug,{children:R.jsx(Jl,{spacing:3,children:R.jsx(Ot,{size:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>R.jsxs("g",{transform:`translate(${n}, ${a})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),R.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const m7t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:y6e},Symbol.toStringTag,{value:"Module"})),mj=15;function v6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=A.useState([0,0]),[l,c]=A.useState(!1);return A.useEffect(()=>{const f=Qi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<mj&&Math.abs(t(g[r.y])-p[1])<mj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[s.ids,i,l,o,r,e,t]),R.jsx("circle",{style:{cursor:l?"pointer":"default"},r:mj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const g7t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:v6e},Symbol.toStringTag,{value:"Module"})),oi={top:15,left:100,right:15,bottom:70};function lH({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Eb(),[c]=Eb(),[f]=Eb(),[d,h]=A.useState(!0),p=A.useMemo(()=>l-oi.left-oi.right,[l]),m=A.useMemo(()=>u-oi.top-oi.bottom,[u]),g=A.useMemo(()=>{const C=Array.from(new Set(s.map(O=>O[i.category])));return HE(oDe).domain(C)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:b}=A.useMemo(()=>{const C=s.map(B=>+B[i.x]).filter(B=>B!==null),[O,z]=Dhe(C),N=s.map(B=>+B[i.y]).filter(B=>B!==null),[$,D]=Dhe(N);return{xMin:O,xMax:z,yMin:$,yMax:D}},[s,i.x,i.y]),E=A.useMemo(()=>{const C=_-y;return p<=0?null:i.dataType==="date"?eDe([oi.left,p+oi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Np([oi.left,p+oi.left]).domain([y-C/10,_+C/10]).nice()},[i.dataType,p,_,y]),w=A.useMemo(()=>{const C=b-v;return m<=0?null:Np([m+oi.top,oi.top]).domain([v-C/10,b+C/10]).nice()},[m,b,v]),x=A.useMemo(()=>{if(!E||!w)return()=>null;if(r==="Axis Selection"){const C=TRt().extent([[oi.left,oi.top+m-5],[oi.left+p,oi.top+m+5]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[z.selection[0],null],[z.selection[1],null]],E,w,z.mode)}),O=ARt().extent([[oi.left-5,oi.top],[oi.left+5,oi.top+m]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[null,z.selection[0]],[null,z.selection[1]]],E,w,z.mode)});return c.current&&f.current&&(Qi(f.current).call(O),Qi(c.current).call(C),t.hasBrush||(Qi(f.current).call(O.move,[w(b),w(v)]),Qi(c.current).call(C.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"drag"))),()=>{Qi(f.current).call(O.move,[w(b),w(v)]),Qi(c.current).call(C.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"clear")}}if(r==="Rectangular Selection"){const C=CRt().extent([[oi.left,oi.top],[oi.left+p,oi.top+m]]).on("brush",O=>{O.sourceEvent!==void 0&&n([[O.selection[0][0],O.selection[0][1]],[O.selection[1][0],O.selection[1][1]]],E,w,O.mode)}).on("end",O=>{O.selection===null&&O.sourceEvent!==void 0&&(Qi(a.current).call(C.move,null),e(null))});return Qi(a.current).call(C),()=>{Qi(a.current).call(C.move,null),n([[null,null],[null,null]],E,w,"clear")}}return r==="Slider Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear"):r==="Paintbrush Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear",[]):()=>null},[t,r,c,f,m,a,n,p,_,y,E,b,v,w]);A.useEffect(()=>{r==="Slider Selection"&&E&&w&&n([[E(y),w(b)],[E(_),w(v)]],E,w,null)},[r,_,y,E,b,v,w]);const S=A.useMemo(()=>o.length===0?null:new Set(o),[o]),I=A.useMemo(()=>!E||!w?null:s.map((C,O)=>{if(C[i.x]===null||C[i.y]===null)return null;const z=i.dataType==="date"?E(new Date(C[i.x])):E(C[i.x]);return R.jsx("circle",{opacity:S&&!S.has(C[i.ids])?.3:1,r:3,fill:S&&!S.has(C[i.ids])?"lightgray":g(C[i.category]),cx:z,cy:w(C[i.y])},O)}),[S,g,s,i.category,i.ids,i.x,i.y,E,w]);return A.useEffect(()=>{r==="Axis Selection"&&ykt(".handle").style("fill","darkgrey")},[t,r]),R.jsxs(Qm,{children:[R.jsxs(Jl,{children:[R.jsx(wa,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?R.jsx(KAe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:C=>h(C==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),R.jsxs(Jl,{style:{width:"100%",height:"100%"},noWrap:!0,children:[R.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&w?R.jsxs("g",{children:[R.jsx(y6e,{yScale:w,label:i.y,horizontalPosition:oi.left,xRange:E.range()}),R.jsx(WX,{xScale:E,yRange:w.range(),isDate:i.dataType==="date",vertPosition:m+oi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(C=>({value:C.toString(),offset:E(C)}))})]}):null,I,R.jsx("g",{id:"brushXRef",ref:c}),R.jsx("g",{id:"brushYRef",ref:f}),E&&w&&r==="Paintbrush Selection"?R.jsx(v6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:w}):null]}),r==="Slider Selection"&&E&&w?R.jsxs(Qm,{style:{flexGrow:1},spacing:50,children:[R.jsxs(Qm,{spacing:0,children:[R.jsx(Ot,{children:i.x}),R.jsx(Kz,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:C=>{n([[E(C[0]),t.y1],[E(C[1]),t.y2]],E,w,"drag")},style:{width:"300px"},marks:E.ticks(5).map(C=>({value:C,label:C})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),R.jsxs(Qm,{spacing:0,children:[R.jsx(Ot,{children:i.y}),R.jsx(Kz,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],onChange:C=>{n([[t.x1,w(C[1])],[t.x2,w(C[0])]],E,w,"drag")},style:{width:"300px"},marks:w.ticks(5).map(C=>({value:C,label:C})),value:[w.invert(t.y2),w.invert(t.y1)]})]})]}):null]})]})}const y7t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:lH,default:lH},Symbol.toStringTag,{value:"Module"}));function fge({parameters:e,setAnswer:t}){const[n,r]=A.useState(null),[i,s]=A.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=A.useState(null);A.useEffect(()=>{XRt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=A.useMemo(()=>o?cjt(o):null,[o]),{actions:l,trrack:c}=A.useMemo(()=>{const g=vF.create(),y=g.register("brush",(w,x)=>(w.all={brush:x},w)),v=g.register("brushMove",(w,x)=>(w.all={brush:x},w)),_=g.register("brushResize",(w,x)=>(w.all={brush:x},w)),b=g.register("brushClear",(w,x)=>(w.all={brush:x},w)),E=p6e({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:b},trrack:E}},[]),f=A.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=A.useMemo(()=>jf(f,100,{maxWait:100}),[f]),h=A.useCallback((g,y,v,_,b)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),w=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),S=v.invert(g[0][1]||i.y1);let I=null;if(_==="clear")I=u;else if(b){const O=new Set(b);I=u.filter(lj(z=>O.has(z[e.ids])))}else e.brushType==="Axis Selection"?I=u.filter(lj(O=>new Date(O[e.x])>=new Date(E)&&new Date(O[e.x])<=new Date(w)&&O[e.y]>=x&&O[e.y]<=S)):I=u.filter(lj(O=>O[e.x]>=E&&O[e.x]<=w&&O[e.y]>=x&&O[e.y]<=S));const C={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?I==null?void 0:I.array("id"):[]};s(C),_==="drag"||_==="handle"?d(_,C):_==="clear"&&c.apply("Clear Brush",l.clearBrush(C)),r(I),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=A.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=A.useCallback(g=>{r(g)},[]);return o?R.jsxs(Qm,{spacing:"xs",children:[R.jsx(lH,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),R.jsx(CV,{data:o,parameters:e,barsTable:p})]}):R.jsx(C0,{})}const v7t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:fge,default:fge},Symbol.toStringTag,{value:"Module"})),_7t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),dge=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},rx=e=>{const t=A.useRef(null),n=dge(e),[r,i]=A.useState(0),[s,o]=A.useState(0);A.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=dge({...n,width:n.width||r,height:n.height||s});return[t,a]},b7t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:rx},Symbol.toStringTag,{value:"Module"}));function _6e({data:e,xScale:t,yScale:n,height:r}){return R.jsx("g",{children:e.map((i,s)=>R.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const w7t=Object.freeze(Object.defineProperty({__proto__:null,Bars:_6e},Symbol.toStringTag,{value:"Module"}));function EJ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Np().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsxs("g",{transform:`translate(0,${a})`,children:[R.jsx("line",{x2:`${r}`,stroke:"currentColor"}),R.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const E7t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:EJ},Symbol.toStringTag,{value:"Module"}));function b6e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=EI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsx("g",{transform:`translate(${a}, 10)`,children:R.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const x7t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:b6e},Symbol.toStringTag,{value:"Module"})),S7t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function T7t({parameters:e}){const[n,r]=rx(S7t),i=EI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Np().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return R.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:R.jsx("svg",{width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[R.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:R.jsx(b6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),R.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:R.jsx(EJ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),R.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:R.jsx(_6e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const A7t=Object.freeze(Object.defineProperty({__proto__:null,default:T7t},Symbol.toStringTag,{value:"Module"}));function w6e({data:e}){return R.jsx("g",{children:e.map(({bubble:t},n)=>R.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const C7t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:w6e},Symbol.toStringTag,{value:"Module"}));function xJ({positions:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const I7t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:xJ},Symbol.toStringTag,{value:"Module"})),O7t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},P7t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=INe().size([t-10,n-10]).padding(1.5),o=R4(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},k7t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function $7t({parameters:e}){const[t,n]=rx(O7t),r=P7t(e,n.width,n.height),i=k7t(r,e.selectedIndices);return R.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:R.jsx("svg",{width:n.width,height:n.height,children:R.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[R.jsx(w6e,{data:r}),R.jsx(xJ,{positions:i})]})})})}const R7t=Object.freeze(Object.defineProperty({__proto__:null,default:$7t},Symbol.toStringTag,{value:"Module"}));function E6e({arcs:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const N7t=Object.freeze(Object.defineProperty({__proto__:null,Slices:E6e},Symbol.toStringTag,{value:"Module"}));function x6e({positions:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("g",{transform:`translate(${t.centroid()})`,children:R.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const D7t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:x6e},Symbol.toStringTag,{value:"Module"})),L7t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},M7t=FLt().value(e=>e.value),fS=150;function F7t({parameters:e}){const[t,n]=rx(L7t),r=M7t(e.data),i=r.map(o=>AV().innerRadius(0).outerRadius(fS).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>AV().outerRadius(fS+10).innerRadius(fS+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return R.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:R.jsx("svg",{width:n.width,height:n.height,children:R.jsxs("g",{transform:`translate(${[n.marginLeft+fS,n.marginTop+fS].join(",")})`,children:[R.jsx(E6e,{arcs:i}),R.jsx(x6e,{positions:s})]})})})}const B7t=Object.freeze(Object.defineProperty({__proto__:null,default:F7t},Symbol.toStringTag,{value:"Module"}));function S6e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Np().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsxs("g",{transform:`translate(${a}, 0)`,children:[R.jsx("line",{y2:`${r}`,stroke:"currentColor"}),R.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const j7t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:S6e},Symbol.toStringTag,{value:"Module"}));function T6e({data:e,barWidth:t,yScale:n}){return R.jsx("g",{children:e.map((r,i)=>R.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const z7t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:T6e},Symbol.toStringTag,{value:"Module"})),U7t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function V7t({parameters:e}){const[n,r]=rx(U7t),i=EI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Np().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,b)=>Number(_)+Number(b))/100,y={};p.forEach((_,b)=>{y[String.fromCharCode(b+65)]=_/g});const v=[y];return oMt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return R.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:R.jsx("svg",{width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[R.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:R.jsx(S6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),R.jsx("g",{transform:"translate(0, 0)",children:R.jsx(EJ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),R.jsxs("g",{transform:"translate(0, 0)",children:[R.jsx(T6e,{data:c,barWidth:f,yScale:s}),R.jsx(xJ,{positions:d})]})]})})})}const H7t=Object.freeze(Object.defineProperty({__proto__:null,default:V7t},Symbol.toStringTag,{value:"Module"})),q7t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function W7t({parameters:e,setAnswer:t}){const[n,r]=rx(q7t),[i,s]=A.useState(100),[o,a]=A.useState(100),[u,l]=A.useState(300),{taskid:c}=e,{actions:f,trrack:d}=A.useMemo(()=>{const p=vF.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=p6e({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=A.useCallback(p=>{const m=Qi("#movingCircle"),g=Qi("#clickAccuracySvg"),y=aV(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return A.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Qi(n.current).select("circle").transition().duration(y).ease(fRt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:R.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[R.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),R.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),R.jsxs(At,{children:["Adjust speed (px/s):",R.jsx(sY,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const G7t=Object.freeze(Object.defineProperty({__proto__:null,default:W7t},Symbol.toStringTag,{value:"Module"}));var Y7t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},K7t=Object.defineProperty,X7t=Object.defineProperties,Q7t=Object.getOwnPropertyDescriptors,L3=Object.getOwnPropertySymbols,A6e=Object.prototype.hasOwnProperty,C6e=Object.prototype.propertyIsEnumerable,hge=(e,t,n)=>t in e?K7t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pge=(e,t)=>{for(var n in t||(t={}))A6e.call(t,n)&&hge(e,n,t[n]);if(L3)for(var n of L3(t))C6e.call(t,n)&&hge(e,n,t[n]);return e},J7t=(e,t)=>X7t(e,Q7t(t)),Z7t=(e,t)=>{var n={};for(var r in e)A6e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&L3)for(var r of L3(e))t.indexOf(r)<0&&C6e.call(e,r)&&(n[r]=e[r]);return n},Ma=(e,t,n)=>{const r=A.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=Z7t(o,["color","size","stroke","children"]);return A.createElement("svg",pge(J7t(pge({ref:s},Y7t),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>A.createElement(d,h)),...c||[]])});return r.propTypes={color:Mt.string,size:Mt.oneOfType([Mt.string,Mt.number]),stroke:Mt.oneOfType([Mt.string,Mt.number])},r.displayName=`${t}`,r},ezt=Ma("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),tzt=Ma("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),nzt=Ma("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),rzt=Ma("brand-google","IconBrandGoogle",[["path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8",key:"svg-0"}]]),izt=Ma("browser-plus","IconBrowserPlus",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h14a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 8h16",key:"svg-1"}],["path",{d:"M8 4v4",key:"svg-2"}],["path",{d:"M10 14h4",key:"svg-3"}],["path",{d:"M12 12v4",key:"svg-4"}]]),gj=Ma("chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),mge=Ma("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),szt=Ma("code-dots","IconCodeDots",[["path",{d:"M15 12h.01",key:"svg-0"}],["path",{d:"M12 12h.01",key:"svg-1"}],["path",{d:"M9 12h.01",key:"svg-2"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-3"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-4"}]]),I6e=Ma("code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]),ozt=Ma("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),azt=Ma("layout-dashboard","IconLayoutDashboard",[["path",{d:"M4 4h6v8h-6z",key:"svg-0"}],["path",{d:"M4 16h6v4h-6z",key:"svg-1"}],["path",{d:"M14 12h6v8h-6z",key:"svg-2"}],["path",{d:"M14 4h6v4h-6z",key:"svg-3"}]]),uzt=Ma("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),gge=Ma("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),SJ=Ma("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),lzt=Ma("zoom-question","IconZoomQuestion",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}],["path",{d:"M10 13l0 .01",key:"svg-2"}],["path",{d:"M10 10a1.5 1.5 0 1 0 -1.14 -2.474",key:"svg-3"}]]);function yge({rankings:e}){return R.jsx("div",{style:{fontFamily:"sans-serif"},children:R.jsx("div",{children:e.map((t,n)=>R.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function czt({parameters:e,setAnswer:t}){const n=dc(),r=oh()[n],[i,s]=A.useState(""),{goToNextStep:o,isNextDisabled:a}=Dke(),u=A.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[l]=A.useState(new URLSearchParams(window.location.search)),c=(l.get("admin")||"f")==="t",f=A.useCallback(p=>{s(p),t({status:!0,answers:{[`${r}/leftARP`]:u==="r1"?e.data.r1ARP:e.data.r2ARP,[`${r}/rightARP`]:u==="r2"?e.data.r1ARP:e.data.r2ARP,[`${r}/leftRanking`]:JSON.stringify(u==="r1"?e.data.r1:e.data.r2),[`${r}/rightRanking`]:JSON.stringify(u==="r2"?e.data.r1:e.data.r2),[`${r}/choice`]:p,[`${r}/correctChoice`]:u==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[r,u,e.data,t]),d=A.useCallback(()=>{a||o()},[a,o]);A.useEffect(()=>{const p=HXe([["ArrowLeft",()=>f("left")],["ArrowRight",()=>f("right")],["Enter",d]]);return document.body.addEventListener("keydown",p),()=>{document.body.removeEventListener("keydown",p)}},[f,d]);let h=!1;return u==="r1"?(i==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||i==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(h=!0):(i==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||i==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(h=!0),R.jsxs("div",{children:[R.jsxs(Gu,{children:[R.jsxs(Gu.Col,{span:2,children:[R.jsx(yge,{rankings:u==="r1"?e.data.r1:e.data.r2}),R.jsx(wa,{fullWidth:!0,disabled:i==="left",onClick:()=>{f("left")},children:i==="left"?R.jsx(mge,{}):"Select this ranking"}),c&&i&&R.jsx("div",{children:u==="r1"?e.data.r1ARP:e.data.r2ARP})]}),R.jsxs(Gu.Col,{span:2,children:[R.jsx(yge,{rankings:u==="r1"?e.data.r2:e.data.r1}),R.jsx(wa,{fullWidth:!0,disabled:i==="right",onClick:()=>{f("right")},children:i==="right"?R.jsx(mge,{}):"Select this ranking"}),c&&i&&R.jsx("div",{children:u==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),c&&i&&R.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:h?"CORRECT":"INCORRECT"})]})}const fzt=Object.freeze(Object.defineProperty({__proto__:null,default:czt},Symbol.toStringTag,{value:"Module"})),dzt=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":lMt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":v7t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":g7t,"../public/demo-brush-interactions/assets/Scatter.tsx":y7t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":aMt,"../public/demo-brush-interactions/assets/YAxis.tsx":m7t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":uMt,"../public/demo-brush-interactions/assets/types.ts":_7t,"../public/demo-cleveland/assets/BarChart.tsx":A7t,"../public/demo-cleveland/assets/BubbleChart.tsx":R7t,"../public/demo-cleveland/assets/PieChart.tsx":B7t,"../public/demo-cleveland/assets/StackedBarChart.tsx":H7t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":w7t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":C7t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":I7t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":j7t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":E7t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":x7t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":N7t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":D7t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":z7t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":b7t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":G7t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":fzt});function hzt({currentConfig:e}){const t=dc(),n=oh()[t],r=`../public/${e.path}`,i=dzt[r].default,s=Qp(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Xp();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(Object.values(f).map(d=>d)))}return R.jsx(A.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:R.jsx(i,{parameters:e.parameters,setAnswer:u})})}function pzt({currentConfig:e}){const[t,n]=A.useState(null);return A.useEffect(()=>{fetch(`${cc}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:R.jsx(gu,{text:t})}function Y1(){return Ef(e=>e.config)}var cH={exports:{}},O6e={},uf={},Hw={},DI={},Cn={},YA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,b)=>`${_}${b}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,b)=>(b instanceof n&&(_[b.str]=(_[b.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let b=0;for(;b<v.length;)a(_,v[b]),_.push(y[++b]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let b=0;for(;b<v.length;)_.push(s),a(_,v[b]),_.push(s,h(y[++b]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(YA);var fH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=YA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(fH);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=YA,n=fH;var r=YA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=fH;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(M,F){return this}}class o extends s{constructor(M,F,J){super(),this.varKind=M,this.name=F,this.rhs=J}render({es5:M,_n:F}){const J=M?n.varKinds.var:this.varKind,se=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${se};`+F}optimizeNames(M,F){if(M[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,M,F)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(M,F,J){super(),this.lhs=M,this.rhs=F,this.sideEffects=J}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,F){if(!(this.lhs instanceof t.Name&&!M[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,M,F),this}get names(){const M=this.lhs instanceof t.Name?{}:{...this.lhs.names};return N(M,this.rhs)}}class u extends a{constructor(M,F,J,se){super(M,J,se),this.op=F}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class l extends s{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class c extends s{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class f extends s{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class d extends s{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,F){return this.code=$(this.code,M,F),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((F,J)=>F+J.render(M),"")}optimizeNodes(){const{nodes:M}=this;let F=M.length;for(;F--;){const J=M[F].optimizeNodes();Array.isArray(J)?M.splice(F,1,...J):J?M[F]=J:M.splice(F,1)}return M.length>0?this:void 0}optimizeNames(M,F){const{nodes:J}=this;let se=J.length;for(;se--;){const ae=J[se];ae.optimizeNames(M,F)||(D(M,ae.names),J.splice(se,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((M,F)=>z(M,F.names),{})}}class p extends h{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(M,F){super(F),this.condition=M}render(M){let F=`if(${this.condition})`+super.render(M);return this.else&&(F+="else "+this.else.render(M)),F}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let F=this.else;if(F){const J=F.optimizeNodes();F=this.else=Array.isArray(J)?new g(J):J}if(F)return M===!1?F instanceof y?F:F.nodes:this.nodes.length?this:new y(B(M),F instanceof y?[F]:F.nodes);if(!(M===!1||!this.nodes.length))return this}optimizeNames(M,F){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(M,F),!!(super.optimizeNames(M,F)||this.else))return this.condition=$(this.condition,M,F),this}get names(){const M=super.names;return N(M,this.condition),this.else&&z(M,this.else.names),M}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,F){if(super.optimizeNames(M,F))return this.iteration=$(this.iteration,M,F),this}get names(){return z(super.names,this.iteration.names)}}class b extends v{constructor(M,F,J,se){super(),this.varKind=M,this.name=F,this.from=J,this.to=se}render(M){const F=M.es5?n.varKinds.var:this.varKind,{name:J,from:se,to:ae}=this;return`for(${F} ${J}=${se}; ${J}<${ae}; ${J}++)`+super.render(M)}get names(){const M=N(super.names,this.from);return N(M,this.to)}}class E extends v{constructor(M,F,J,se){super(),this.loop=M,this.varKind=F,this.name=J,this.iterable=se}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,F){if(super.optimizeNames(M,F))return this.iterable=$(this.iterable,M,F),this}get names(){return z(super.names,this.iterable.names)}}class w extends p{constructor(M,F,J){super(),this.name=M,this.args=F,this.async=J}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}w.kind="func";class x extends h{render(M){return"return "+super.render(M)}}x.kind="return";class S extends p{render(M){let F="try"+super.render(M);return this.catch&&(F+=this.catch.render(M)),this.finally&&(F+=this.finally.render(M)),F}optimizeNodes(){var M,F;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(F=this.finally)===null||F===void 0||F.optimizeNodes(),this}optimizeNames(M,F){var J,se;return super.optimizeNames(M,F),(J=this.catch)===null||J===void 0||J.optimizeNames(M,F),(se=this.finally)===null||se===void 0||se.optimizeNames(M,F),this}get names(){const M=super.names;return this.catch&&z(M,this.catch.names),this.finally&&z(M,this.finally.names),M}}class I extends p{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}I.kind="catch";class C extends p{render(M){return"finally"+super.render(M)}}C.kind="finally";class O{constructor(M,F={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...F,_n:F.lines?`
`:""},this._extScope=M,this._scope=new n.Scope({parent:M}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(M){return this._scope.name(M)}scopeName(M){return this._extScope.name(M)}scopeValue(M,F){const J=this._extScope.value(M,F);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(M,F){return this._extScope.getValue(M,F)}scopeRefs(M){return this._extScope.scopeRefs(M,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(M,F,J,se){const ae=this._scope.toName(F);return J!==void 0&&se&&(this._constants[ae.str]=J),this._leafNode(new o(M,ae,J)),ae}const(M,F,J){return this._def(n.varKinds.const,M,F,J)}let(M,F,J){return this._def(n.varKinds.let,M,F,J)}var(M,F,J){return this._def(n.varKinds.var,M,F,J)}assign(M,F,J){return this._leafNode(new a(M,F,J))}add(M,F){return this._leafNode(new u(M,e.operators.ADD,F))}code(M){return typeof M=="function"?M():M!==t.nil&&this._leafNode(new d(M)),this}object(...M){const F=["{"];for(const[J,se]of M)F.length>1&&F.push(","),F.push(J),(J!==se||this.opts.es5)&&(F.push(":"),(0,t.addCodeArg)(F,se));return F.push("}"),new t._Code(F)}if(M,F,J){if(this._blockNode(new y(M)),F&&J)this.code(F).else().code(J).endIf();else if(F)this.code(F).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(M){return this._elseNode(new y(M))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(M,F){return this._blockNode(M),F&&this.code(F).endFor(),this}for(M,F){return this._for(new _(M),F)}forRange(M,F,J,se,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(M);return this._for(new b(ae,ce,F,J),()=>se(ce))}forOf(M,F,J,se=n.varKinds.const){const ae=this._scope.toName(M);if(this.opts.es5){const ce=F instanceof t.Name?F:this.var("_arr",F);return this.forRange("_i",0,(0,t._)`${ce}.length`,le=>{this.var(ae,(0,t._)`${ce}[${le}]`),J(ae)})}return this._for(new E("of",se,ae,F),()=>J(ae))}forIn(M,F,J,se=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(M,(0,t._)`Object.keys(${F})`,J);const ae=this._scope.toName(M);return this._for(new E("in",se,ae,F),()=>J(ae))}endFor(){return this._endBlockNode(v)}label(M){return this._leafNode(new l(M))}break(M){return this._leafNode(new c(M))}return(M){const F=new x;if(this._blockNode(F),this.code(M),F.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(M,F,J){if(!F&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const se=new S;if(this._blockNode(se),this.code(M),F){const ae=this.name("e");this._currNode=se.catch=new I(ae),F(ae)}return J&&(this._currNode=se.finally=new C,this.code(J)),this._endBlockNode(I,C)}throw(M){return this._leafNode(new f(M))}block(M,F){return this._blockStarts.push(this._nodes.length),M&&this.code(M).endBlock(F),this}endBlock(M){const F=this._blockStarts.pop();if(F===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-F;if(J<0||M!==void 0&&J!==M)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${M} expected`);return this._nodes.length=F,this}func(M,F=t.nil,J,se){return this._blockNode(new w(M,F,J)),se&&this.code(se).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(M=1){for(;M-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(M){return this._currNode.nodes.push(M),this}_blockNode(M){this._currNode.nodes.push(M),this._nodes.push(M)}_endBlockNode(M,F){const J=this._currNode;if(J instanceof M||F&&J instanceof F)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${F?`${M.kind}/${F.kind}`:M.kind}"`)}_elseNode(M){const F=this._currNode;if(!(F instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=F.else=M,this}get _root(){return this._nodes[0]}get _currNode(){const M=this._nodes;return M[M.length-1]}set _currNode(M){const F=this._nodes;F[F.length-1]=M}}e.CodeGen=O;function z(H,M){for(const F in M)H[F]=(H[F]||0)+(M[F]||0);return H}function N(H,M){return M instanceof t._CodeOrName?z(H,M.names):H}function $(H,M,F){if(H instanceof t.Name)return J(H);if(!se(H))return H;return new t._Code(H._items.reduce((ae,ce)=>(ce instanceof t.Name&&(ce=J(ce)),ce instanceof t._Code?ae.push(...ce._items):ae.push(ce),ae),[]));function J(ae){const ce=F[ae.str];return ce===void 0||M[ae.str]!==1?ae:(delete M[ae.str],ce)}function se(ae){return ae instanceof t._Code&&ae._items.some(ce=>ce instanceof t.Name&&M[ce.str]===1&&F[ce.str]!==void 0)}}function D(H,M){for(const F in M)H[F]=(H[F]||0)-(M[F]||0)}function B(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${k(H)}`}e.not=B;const V=P(e.operators.AND);function j(...H){return H.reduce(V)}e.and=j;const G=P(e.operators.OR);function U(...H){return H.reduce(G)}e.or=U;function P(H){return(M,F)=>M===t.nil?F:F===t.nil?M:(0,t._)`${k(M)} ${H} ${k(F)}`}function k(H){return H instanceof t.Name?H:(0,t._)`(${H})`}})(Cn);var Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=Cn,n=YA;function r(w){const x={};for(const S of w)x[S]=!0;return x}e.toHash=r;function i(w,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(s(w,x),!o(x,w.self.RULES.all))}e.alwaysValidSchema=i;function s(w,x=w.schema){const{opts:S,self:I}=w;if(!S.strictSchema||typeof x=="boolean")return;const C=I.RULES.keywords;for(const O in x)C[O]||E(w,`unknown keyword: "${O}"`)}e.checkUnknownRules=s;function o(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(x[S])return!0;return!1}e.schemaHasRules=o;function a(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(S!=="$ref"&&x.all[S])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:w,schemaPath:x},S,I,C){if(!C){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${w}${x}${(0,t.getProperty)(I)}`}e.schemaRefOrVal=u;function l(w){return d(decodeURIComponent(w))}e.unescapeFragment=l;function c(w){return encodeURIComponent(f(w))}e.escapeFragment=c;function f(w){return typeof w=="number"?`${w}`:w.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(w){return w.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(w,x){if(Array.isArray(w))for(const S of w)x(S);else x(w)}e.eachItem=h;function p({mergeNames:w,mergeToName:x,mergeValues:S,resultToName:I}){return(C,O,z,N)=>{const $=z===void 0?O:z instanceof t.Name?(O instanceof t.Name?w(C,O,z):x(C,O,z),z):O instanceof t.Name?(x(C,z,O),O):S(O,z);return N===t.Name&&!($ instanceof t.Name)?I(C,$):$}}e.mergeEvaluated={props:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>{w.if((0,t._)`${x} === true`,()=>w.assign(S,!0),()=>w.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${x})`))}),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>{x===!0?w.assign(S,!0):(w.assign(S,(0,t._)`${S} || {}`),g(w,S,x))}),mergeValues:(w,x)=>w===!0?!0:{...w,...x},resultToName:m}),items:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>w.assign(S,(0,t._)`${x} === true ? true : ${S} > ${x} ? ${S} : ${x}`)),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>w.assign(S,x===!0?!0:(0,t._)`${S} > ${x} ? ${S} : ${x}`)),mergeValues:(w,x)=>w===!0?!0:Math.max(w,x),resultToName:(w,x)=>w.var("items",x)})};function m(w,x){if(x===!0)return w.var("props",!0);const S=w.var("props",(0,t._)`{}`);return x!==void 0&&g(w,S,x),S}e.evaluatedPropsToName=m;function g(w,x,S){Object.keys(S).forEach(I=>w.assign((0,t._)`${x}${(0,t.getProperty)(I)}`,!0))}e.setEvaluated=g;const y={};function v(w,x){return w.scopeValue("func",{ref:x,code:y[x.code]||(y[x.code]=new n._Code(x.code))})}e.useFunc=v;var _;(function(w){w[w.Num=0]="Num",w[w.Str=1]="Str"})(_=e.Type||(e.Type={}));function b(w,x,S){if(w instanceof t.Name){const I=x===_.Num;return S?I?(0,t._)`"[" + ${w} + "]"`:(0,t._)`"['" + ${w} + "']"`:I?(0,t._)`"/" + ${w}`:(0,t._)`"/" + ${w}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(w).toString():"/"+f(w)}e.getErrorPath=b;function E(w,x,S=w.opts.strictSchema){if(S){if(x=`strict mode: ${x}`,S===!0)throw new Error(x);w.self.logger.warn(x)}}e.checkStrictMode=E})(Zn);var ch={};Object.defineProperty(ch,"__esModule",{value:!0});const ko=Cn,mzt={data:new ko.Name("data"),valCxt:new ko.Name("valCxt"),instancePath:new ko.Name("instancePath"),parentData:new ko.Name("parentData"),parentDataProperty:new ko.Name("parentDataProperty"),rootData:new ko.Name("rootData"),dynamicAnchors:new ko.Name("dynamicAnchors"),vErrors:new ko.Name("vErrors"),errors:new ko.Name("errors"),this:new ko.Name("this"),self:new ko.Name("self"),scope:new ko.Name("scope"),json:new ko.Name("json"),jsonPos:new ko.Name("jsonPos"),jsonLen:new ko.Name("jsonLen"),jsonPart:new ko.Name("jsonPart")};ch.default=mzt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Cn,n=Zn,r=ch;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:b}=g,{gen:E,compositeRule:w,allErrors:x}=b,S=f(g,y,v);_??(w||x)?u(E,S):l(b,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:b,compositeRule:E,allErrors:w}=_,x=f(g,y,v);u(b,x),E||w||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:b,it:E}){if(b===void 0)throw new Error("ajv implementation error");const w=g.name("err");g.forRange("i",b,r.default.errors,x=>{g.const(w,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${w}.instancePath === undefined`,()=>g.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${w}.schema`,v),g.assign((0,t._)`${w}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:b}=g;b.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:b}=g,E=[h(b,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let b=_?y:(0,t.str)`${y}/${g}`;return v&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,b]}function m(g,{params:y,message:v},_){const{keyword:b,data:E,schemaValue:w,it:x}=g,{opts:S,propertyName:I,topSchemaRef:C,schemaPath:O}=x;_.push([c.keyword,b],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&_.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&_.push([c.schema,w],[c.parentSchema,(0,t._)`${C}${O}`],[r.default.data,E]),I&&_.push([c.propertyName,I])}})(DI);Object.defineProperty(Hw,"__esModule",{value:!0});Hw.boolOrEmptySchema=Hw.topBoolOrEmptySchema=void 0;const gzt=DI,yzt=Cn,vzt=ch,_zt={message:"boolean schema is false"};function bzt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?P6e(e,!1):typeof n=="object"&&n.$async===!0?t.return(vzt.default.data):(t.assign((0,yzt._)`${r}.errors`,null),t.return(!0))}Hw.topBoolOrEmptySchema=bzt;function wzt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),P6e(e)):n.var(t,!0)}Hw.boolOrEmptySchema=wzt;function P6e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,gzt.reportError)(i,_zt,void 0,t)}var LI={},K1={};Object.defineProperty(K1,"__esModule",{value:!0});K1.getRules=K1.isJSONType=void 0;const Ezt=["string","number","integer","boolean","null","object","array"],xzt=new Set(Ezt);function Szt(e){return typeof e=="string"&&xzt.has(e)}K1.isJSONType=Szt;function Tzt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}K1.getRules=Tzt;var mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.shouldUseRule=mp.shouldUseGroup=mp.schemaHasRulesForType=void 0;function Azt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&k6e(e,r)}mp.schemaHasRulesForType=Azt;function k6e(e,t){return t.rules.some(n=>$6e(e,n))}mp.shouldUseGroup=k6e;function $6e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}mp.shouldUseRule=$6e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=K1,n=mp,r=DI,i=Cn,s=Zn;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const b=u(_.type);if(b.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&b.push("null")}return b}e.getSchemaTypes=a;function u(_){const b=Array.isArray(_)?_:_?[_]:[];if(b.every(t.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}e.getJSONTypes=u;function l(_,b){const{gen:E,data:w,opts:x}=_,S=f(b,x.coerceTypes),I=b.length>0&&!(S.length===0&&b.length===1&&(0,n.schemaHasRulesForType)(_,b[0]));if(I){const C=m(b,w,x.strictNumbers,o.Wrong);E.if(C,()=>{S.length?d(_,b,S):y(_)})}return I}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,b){return b?_.filter(E=>c.has(E)||b==="array"&&E==="array"):[]}function d(_,b,E){const{gen:w,data:x,opts:S}=_,I=w.let("dataType",(0,i._)`typeof ${x}`),C=w.let("coerced",(0,i._)`undefined`);S.coerceTypes==="array"&&w.if((0,i._)`${I} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>w.assign(x,(0,i._)`${x}[0]`).assign(I,(0,i._)`typeof ${x}`).if(m(b,x,S.strictNumbers),()=>w.assign(C,x))),w.if((0,i._)`${C} !== undefined`);for(const z of E)(c.has(z)||z==="array"&&S.coerceTypes==="array")&&O(z);w.else(),y(_),w.endIf(),w.if((0,i._)`${C} !== undefined`,()=>{w.assign(x,C),h(_,C)});function O(z){switch(z){case"string":w.elseIf((0,i._)`${I} == "number" || ${I} == "boolean"`).assign(C,(0,i._)`"" + ${x}`).elseIf((0,i._)`${x} === null`).assign(C,(0,i._)`""`);return;case"number":w.elseIf((0,i._)`${I} == "boolean" || ${x} === null
              || (${I} == "string" && ${x} && ${x} == +${x})`).assign(C,(0,i._)`+${x}`);return;case"integer":w.elseIf((0,i._)`${I} === "boolean" || ${x} === null
              || (${I} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(C,(0,i._)`+${x}`);return;case"boolean":w.elseIf((0,i._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(C,!1).elseIf((0,i._)`${x} === "true" || ${x} === 1`).assign(C,!0);return;case"null":w.elseIf((0,i._)`${x} === "" || ${x} === 0 || ${x} === false`),w.assign(C,null);return;case"array":w.elseIf((0,i._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${x} === null`).assign(C,(0,i._)`[${x}]`)}}}function h({gen:_,parentData:b,parentDataProperty:E},w){_.if((0,i._)`${b} !== undefined`,()=>_.assign((0,i._)`${b}[${E}]`,w))}function p(_,b,E,w=o.Correct){const x=w===o.Correct?i.operators.EQ:i.operators.NEQ;let S;switch(_){case"null":return(0,i._)`${b} ${x} null`;case"array":S=(0,i._)`Array.isArray(${b})`;break;case"object":S=(0,i._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":S=I((0,i._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":S=I();break;default:return(0,i._)`typeof ${b} ${x} ${_}`}return w===o.Correct?S:(0,i.not)(S);function I(C=i.nil){return(0,i.and)((0,i._)`typeof ${b} == "number"`,C,E?(0,i._)`isFinite(${b})`:i.nil)}}e.checkDataType=p;function m(_,b,E,w){if(_.length===1)return p(_[0],b,E,w);let x;const S=(0,s.toHash)(_);if(S.array&&S.object){const I=(0,i._)`typeof ${b} != "object"`;x=S.null?I:(0,i._)`!${b} || ${I}`,delete S.null,delete S.array,delete S.object}else x=i.nil;S.number&&delete S.integer;for(const I in S)x=(0,i.and)(x,p(I,b,E,w));return x}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:b})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${b}}`};function y(_){const b=v(_);(0,r.reportError)(b,g)}e.reportTypeError=y;function v(_){const{gen:b,data:E,schema:w}=_,x=(0,s.schemaRefOrVal)(_,w,"type");return{gen:b,keyword:"type",data:E,schema:w.type,schemaCode:x,schemaValue:x,parentSchema:w,params:{},it:_}}})(LI);var _F={};Object.defineProperty(_F,"__esModule",{value:!0});_F.assignDefaults=void 0;const m_=Cn,Czt=Zn;function Izt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)vge(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>vge(e,s,i.default))}_F.assignDefaults=Izt;function vge(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,m_._)`${s}${(0,m_.getProperty)(t)}`;if(i){(0,Czt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,m_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,m_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,m_._)`${a} = ${(0,m_.stringify)(n)}`)}var _d={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Xr=Cn,TJ=Zn,ym=ch,Ozt=Zn;function Pzt(e,t){const{gen:n,data:r,it:i}=e;n.if(CJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Xr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=Pzt;function kzt({gen:e,data:t,it:{opts:n}},r,i){return(0,Xr.or)(...r.map(s=>(0,Xr.and)(CJ(e,t,s,n.ownProperties),(0,Xr._)`${i} = ${s}`)))}Tn.checkMissingProp=kzt;function $zt(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=$zt;function R6e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Xr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=R6e;function AJ(e,t,n){return(0,Xr._)`${R6e(e)}.call(${t}, ${n})`}Tn.isOwnProperty=AJ;function Rzt(e,t,n,r){const i=(0,Xr._)`${t}${(0,Xr.getProperty)(n)} !== undefined`;return r?(0,Xr._)`${i} && ${AJ(e,t,n)}`:i}Tn.propertyInData=Rzt;function CJ(e,t,n,r){const i=(0,Xr._)`${t}${(0,Xr.getProperty)(n)} === undefined`;return r?(0,Xr.or)(i,(0,Xr.not)(AJ(e,t,n))):i}Tn.noPropertyInData=CJ;function N6e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=N6e;function Nzt(e,t){return N6e(t).filter(n=>!(0,TJ.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=Nzt;function Dzt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Xr._)`${e}, ${t}, ${r}${i}`:t,f=[[ym.default.instancePath,(0,Xr.strConcat)(ym.default.instancePath,s)],[ym.default.parentData,o.parentData],[ym.default.parentDataProperty,o.parentDataProperty],[ym.default.rootData,ym.default.rootData]];o.opts.dynamicRef&&f.push([ym.default.dynamicAnchors,ym.default.dynamicAnchors]);const d=(0,Xr._)`${c}, ${n.object(...f)}`;return u!==Xr.nil?(0,Xr._)`${a}.call(${u}, ${d})`:(0,Xr._)`${a}(${d})`}Tn.callValidateCode=Dzt;const Lzt=(0,Xr._)`new RegExp`;function Mzt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Xr._)`${i.code==="new RegExp"?Lzt:(0,Ozt.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=Mzt;function Fzt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Xr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:TJ.Type.Num},s),t.if((0,Xr.not)(s),a)})}}Tn.validateArray=Fzt;function Bzt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,TJ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Xr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Xr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=Bzt;Object.defineProperty(_d,"__esModule",{value:!0});_d.validateKeywordUsage=_d.validSchemaType=_d.funcKeywordCode=_d.macroKeywordCode=void 0;const da=Cn,Py=ch,jzt=Tn,zzt=DI;function Uzt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=D6e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:da.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}_d.macroKeywordCode=Uzt;function Vzt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;qzt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=D6e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&_ge(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&_ge(e),g(()=>Hzt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,da._)`await `),v=>r.assign(f,!1).if((0,da._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,da._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,da._)`${c}.errors`;return r.assign(y,null),m(da.nil),y}function m(y=t.async?(0,da._)`await `:da.nil){const v=u.opts.passContext?Py.default.this:Py.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,da._)`${y}${(0,jzt.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,da.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}_d.funcKeywordCode=Vzt;function _ge(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,da._)`${r.parentData}[${r.parentDataProperty}]`))}function Hzt(e,t){const{gen:n}=e;n.if((0,da._)`Array.isArray(${t})`,()=>{n.assign(Py.default.vErrors,(0,da._)`${Py.default.vErrors} === null ? ${t} : ${Py.default.vErrors}.concat(${t})`).assign(Py.default.errors,(0,da._)`${Py.default.vErrors}.length`),(0,zzt.extendErrors)(e)},()=>e.error())}function qzt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function D6e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,da.stringify)(n)})}function Wzt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}_d.validSchemaType=Wzt;function Gzt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}_d.validateKeywordUsage=Gzt;var Og={};Object.defineProperty(Og,"__esModule",{value:!0});Og.extendSubschemaMode=Og.extendSubschemaData=Og.getSubschema=void 0;const cd=Cn,L6e=Zn;function Yzt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,cd._)`${e.schemaPath}${(0,cd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,cd._)`${e.schemaPath}${(0,cd.getProperty)(t)}${(0,cd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,L6e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Og.getSubschema=Yzt;function Kzt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,cd._)`${t.data}${(0,cd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,cd.str)`${l}${(0,L6e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,cd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof cd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Og.extendSubschemaData=Kzt;function Xzt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Og.extendSubschemaMode=Xzt;var lo={},M6e={exports:{}},tg=M6e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};E$(t,r,i,e,"",e)};tg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};tg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};tg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};tg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function E$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in tg.arrayKeywords)for(var d=0;d<f.length;d++)E$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in tg.propsKeywords){if(f&&typeof f=="object")for(var h in f)E$(e,t,n,f[h],i+"/"+c+"/"+Qzt(h),s,i,c,r,h)}else(c in tg.keywords||e.allKeys&&!(c in tg.skipKeywords))&&E$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function Qzt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Jzt=M6e.exports;Object.defineProperty(lo,"__esModule",{value:!0});lo.getSchemaRefs=lo.resolveUrl=lo.normalizeId=lo._getFullPath=lo.getFullPath=lo.inlineRef=void 0;const Zzt=Zn,eUt=GK,tUt=Jzt,nUt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function rUt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!dH(e):t?F6e(e)<=t:!1}lo.inlineRef=rUt;const iUt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function dH(e){for(const t in e){if(iUt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(dH)||typeof n=="object"&&dH(n))return!0}return!1}function F6e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!nUt.has(n)&&(typeof e[n]=="object"&&(0,Zzt.eachItem)(e[n],r=>t+=F6e(r)),t===1/0))return 1/0}return t}function B6e(e,t="",n){n!==!1&&(t=qb(t));const r=e.parse(t);return j6e(e,r)}lo.getFullPath=B6e;function j6e(e,t){return e.serialize(t).split("#")[0]+"#"}lo._getFullPath=j6e;const sUt=/#\/?$/;function qb(e){return e?e.replace(sUt,""):""}lo.normalizeId=qb;function oUt(e,t,n){return n=qb(n),e.resolve(t,n)}lo.resolveUrl=oUt;const aUt=/^[a-z_][-a-z0-9._]*$/i;function uUt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=qb(e[n]||t),s={"":i},o=B6e(r,i,!1),a={},u=new Set;return tUt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const b=this.opts.uriResolver.resolve;if(_=qb(g?b(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==qb(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!aUt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!eUt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}lo.getSchemaRefs=uUt;Object.defineProperty(uf,"__esModule",{value:!0});uf.getData=uf.KeywordCxt=uf.validateFunctionCode=void 0;const z6e=Hw,bge=LI,IJ=mp,M3=LI,lUt=_F,u2=_d,yj=Og,It=Cn,Gt=ch,cUt=lo,gp=Zn,dS=DI;function fUt(e){if(H6e(e)&&(q6e(e),V6e(e))){pUt(e);return}U6e(e,()=>(0,z6e.topBoolOrEmptySchema)(e))}uf.validateFunctionCode=fUt;function U6e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,It._)`${Gt.default.data}, ${Gt.default.valCxt}`,r.$async,()=>{e.code((0,It._)`"use strict"; ${wge(n,i)}`),hUt(e,i),e.code(s)}):e.func(t,(0,It._)`${Gt.default.data}, ${dUt(i)}`,r.$async,()=>e.code(wge(n,i)).code(s))}function dUt(e){return(0,It._)`{${Gt.default.instancePath}="", ${Gt.default.parentData}, ${Gt.default.parentDataProperty}, ${Gt.default.rootData}=${Gt.default.data}${e.dynamicRef?(0,It._)`, ${Gt.default.dynamicAnchors}={}`:It.nil}}={}`}function hUt(e,t){e.if(Gt.default.valCxt,()=>{e.var(Gt.default.instancePath,(0,It._)`${Gt.default.valCxt}.${Gt.default.instancePath}`),e.var(Gt.default.parentData,(0,It._)`${Gt.default.valCxt}.${Gt.default.parentData}`),e.var(Gt.default.parentDataProperty,(0,It._)`${Gt.default.valCxt}.${Gt.default.parentDataProperty}`),e.var(Gt.default.rootData,(0,It._)`${Gt.default.valCxt}.${Gt.default.rootData}`),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,It._)`${Gt.default.valCxt}.${Gt.default.dynamicAnchors}`)},()=>{e.var(Gt.default.instancePath,(0,It._)`""`),e.var(Gt.default.parentData,(0,It._)`undefined`),e.var(Gt.default.parentDataProperty,(0,It._)`undefined`),e.var(Gt.default.rootData,Gt.default.data),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,It._)`{}`)})}function pUt(e){const{schema:t,opts:n,gen:r}=e;U6e(e,()=>{n.$comment&&t.$comment&&G6e(e),_Ut(e),r.let(Gt.default.vErrors,null),r.let(Gt.default.errors,0),n.unevaluated&&mUt(e),W6e(e),EUt(e)})}function mUt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,It._)`${n}.evaluated`),t.if((0,It._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,It._)`${e.evaluated}.props`,(0,It._)`undefined`)),t.if((0,It._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,It._)`${e.evaluated}.items`,(0,It._)`undefined`))}function wge(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,It._)`/*# sourceURL=${n} */`:It.nil}function gUt(e,t){if(H6e(e)&&(q6e(e),V6e(e))){yUt(e,t);return}(0,z6e.boolOrEmptySchema)(e,t)}function V6e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function H6e(e){return typeof e.schema!="boolean"}function yUt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&G6e(e),bUt(e),wUt(e);const s=r.const("_errs",Gt.default.errors);W6e(e,s),r.var(t,(0,It._)`${s} === ${Gt.default.errors}`)}function q6e(e){(0,gp.checkUnknownRules)(e),vUt(e)}function W6e(e,t){if(e.opts.jtd)return Ege(e,[],!1,t);const n=(0,bge.getSchemaTypes)(e.schema),r=(0,bge.coerceAndCheckDataType)(e,n);Ege(e,n,!r,t)}function vUt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,gp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function _Ut(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,gp.checkStrictMode)(e,"default is ignored in the schema root")}function bUt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,cUt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function wUt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function G6e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,It._)`${Gt.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,It.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,It._)`${Gt.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function EUt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,It._)`${Gt.default.errors} === 0`,()=>t.return(Gt.default.data),()=>t.throw((0,It._)`new ${i}(${Gt.default.vErrors})`)):(t.assign((0,It._)`${r}.errors`,Gt.default.vErrors),s.unevaluated&&xUt(e),t.return((0,It._)`${Gt.default.errors} === 0`))}function xUt({gen:e,evaluated:t,props:n,items:r}){n instanceof It.Name&&e.assign((0,It._)`${t}.props`,n),r instanceof It.Name&&e.assign((0,It._)`${t}.items`,r)}function Ege(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,gp.schemaHasRulesButRef)(s,c))){i.block(()=>X6e(e,"$ref",c.all.$ref.definition));return}u.jtd||SUt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,IJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,M3.checkDataType)(d.type,o,u.strictNumbers)),xge(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,M3.reportTypeError)(e)),i.endIf()):xge(e,d),a||i.if((0,It._)`${Gt.default.errors} === ${r||0}`))}}function xge(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,lUt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,IJ.shouldUseRule)(r,s)&&X6e(e,s.keyword,s.definition,t.type)})}function SUt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(TUt(e,t),e.opts.allowUnionTypes||AUt(e,t),CUt(e,e.dataTypes))}function TUt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Y6e(e.dataTypes,n)||OJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),OUt(e,t)}}function AUt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&OJ(e,"use allowUnionTypes to allow union type keyword")}function CUt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,IJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>IUt(t,o))&&OJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function IUt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Y6e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function OUt(e,t){const n=[];for(const r of e.dataTypes)Y6e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function OJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,gp.checkStrictMode)(e,t,e.opts.strictTypes)}class K6e{constructor(t,n,r){if((0,u2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,gp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Q6e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,u2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Gt.default.errors))}result(t,n,r){this.failResult((0,It.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,It.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,It._)`${n} !== undefined && (${(0,It.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?dS.reportExtraError:dS.reportError)(this,this.def.error,n)}$dataError(){(0,dS.reportError)(this,this.def.$dataError||dS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,dS.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=It.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=It.nil,n=It.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,It.or)((0,It._)`${i} === undefined`,n)),t!==It.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==It.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,It.or)(o(),a());function o(){if(r.length){if(!(n instanceof It.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,It._)`${(0,M3.checkDataTypes)(u,n,s.opts.strictNumbers,M3.DataType.Wrong)}`}return It.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,It._)`!${u}(${n})`}return It.nil}}subschema(t,n){const r=(0,yj.getSubschema)(this.it,t);(0,yj.extendSubschemaData)(r,this.it,t),(0,yj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return gUt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=gp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=gp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,It.Name)),!0}}uf.KeywordCxt=K6e;function X6e(e,t,n,r){const i=new K6e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,u2.funcKeywordCode)(i,n):"macro"in n?(0,u2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,u2.funcKeywordCode)(i,n)}const PUt=/^\/(?:[^~]|~0|~1)*$/,kUt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Q6e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Gt.default.rootData;if(e[0]==="/"){if(!PUt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Gt.default.rootData}else{const l=kUt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,It._)`${s}${(0,It.getProperty)((0,gp.unescapeJsonPointer)(l))}`,o=(0,It._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}uf.getData=Q6e;var MI={};Object.defineProperty(MI,"__esModule",{value:!0});class $Ut extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}MI.default=$Ut;var FI={};Object.defineProperty(FI,"__esModule",{value:!0});const vj=lo;class RUt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,vj.resolveUrl)(t,n,r),this.missingSchema=(0,vj.normalizeId)((0,vj.getFullPath)(t,this.missingRef))}}FI.default=RUt;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.resolveSchema=nu.getCompilingSchema=nu.resolveRef=nu.compileSchema=nu.SchemaEnv=void 0;const Tc=Cn,NUt=MI,ty=ch,Wc=lo,Sge=Zn,DUt=uf;class bF{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Wc.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}nu.SchemaEnv=bF;function PJ(e){const t=J6e.call(this,e);if(t)return t;const n=(0,Wc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Tc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:NUt.default,code:(0,Tc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:ty.default.data,parentData:ty.default.parentData,parentDataProperty:ty.default.parentDataProperty,dataNames:[ty.default.data],dataPathArr:[Tc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Tc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Tc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Tc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,DUt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(ty.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${ty.default.self}`,`${ty.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Tc.Name?void 0:p,items:m instanceof Tc.Name?void 0:m,dynamicProps:p instanceof Tc.Name,dynamicItems:m instanceof Tc.Name},h.source&&(h.source.evaluated=(0,Tc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}nu.compileSchema=PJ;function LUt(e,t,n){var r;n=(0,Wc.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=BUt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new bF({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=MUt.call(this,s)}nu.resolveRef=LUt;function MUt(e){return(0,Wc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:PJ.call(this,e)}function J6e(e){for(const t of this._compilations)if(FUt(t,e))return t}nu.getCompilingSchema=J6e;function FUt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function BUt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||wF.call(this,e,t)}function wF(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Wc._getFullPath)(this.opts.uriResolver,n);let i=(0,Wc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return _j.call(this,n,e);const s=(0,Wc.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=wF.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:_j.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||PJ.call(this,o),s===(0,Wc.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Wc.resolveUrl)(this.opts.uriResolver,i,l)),new bF({schema:a,schemaId:u,root:e,baseId:i})}return _j.call(this,n,o)}}nu.resolveSchema=wF;const jUt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _j(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Sge.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!jUt.has(a)&&l&&(t=(0,Wc.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Sge.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Wc.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=wF.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new bF({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const zUt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",UUt="Meta-schema for $data reference (JSON AnySchema extension proposal)",VUt="object",HUt=["$data"],qUt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},WUt=!1,GUt={$id:zUt,description:UUt,type:VUt,required:HUt,properties:qUt,additionalProperties:WUt};var kJ={},hH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(iu,function(n){function r(){for(var ne=arguments.length,Q=Array(ne),ie=0;ie<ne;ie++)Q[ie]=arguments[ie];if(Q.length>1){Q[0]=Q[0].slice(0,-1);for(var ve=Q.length-1,ye=1;ye<ve;++ye)Q[ye]=Q[ye].slice(1,-1);return Q[ve]=Q[ve].slice(1),Q.join("")}else return Q[0]}function i(ne){return"(?:"+ne+")"}function s(ne){return ne===void 0?"undefined":ne===null?"null":Object.prototype.toString.call(ne).split(" ").pop().split("]").shift().toLowerCase()}function o(ne){return ne.toUpperCase()}function a(ne){return ne!=null?ne instanceof Array?ne:typeof ne.length!="number"||ne.split||ne.setInterval||ne.call?[ne]:Array.prototype.slice.call(ne):[]}function u(ne,Q){var ie=ne;if(Q)for(var ve in Q)ie[ve]=Q[ve];return ie}function l(ne){var Q="[A-Za-z]",ie="[0-9]",ve=r(ie,"[A-Fa-f]"),ye=i(i("%[EFef]"+ve+"%"+ve+ve+"%"+ve+ve)+"|"+i("%[89A-Fa-f]"+ve+"%"+ve+ve)+"|"+i("%"+ve+ve)),pt="[\\:\\/\\?\\#\\[\\]\\@]",Ce="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ft=r(pt,Ce),Bt=ne?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",St=ne?"[\\uE000-\\uF8FF]":"[]",Ht=r(Q,ie,"[\\-\\.\\_\\~]",Bt);i(Q+r(Q,ie,"[\\+\\-\\.]")+"*"),i(i(ye+"|"+r(Ht,Ce,"[\\:]"))+"*");var fn=i(i("25[0-5]")+"|"+i("2[0-4]"+ie)+"|"+i("1"+ie+ie)+"|"+i("0?[1-9]"+ie)+"|0?0?"+ie),Tr=i(fn+"\\."+fn+"\\."+fn+"\\."+fn),zt=i(ve+"{1,4}"),pr=i(i(zt+"\\:"+zt)+"|"+Tr),Xt=i(i(zt+"\\:")+"{6}"+pr),er=i("\\:\\:"+i(zt+"\\:")+"{5}"+pr),ni=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+pr),ls=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+pr),Fi=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+pr),oa=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+pr),Js=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+pr),mi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),yt=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),wn=i([Xt,er,ni,ls,Fi,oa,Js,mi,yt].join("|")),Br=i(i(Ht+"|"+ye)+"+");i("[vV]"+ve+"+\\."+r(Ht,Ce,"[\\:]")+"+"),i(i(ye+"|"+r(Ht,Ce))+"*");var Is=i(ye+"|"+r(Ht,Ce,"[\\:\\@]"));return i(i(ye+"|"+r(Ht,Ce,"[\\@]"))+"+"),i(i(Is+"|"+r("[\\/\\?]",St))+"*"),{NOT_SCHEME:new RegExp(r("[^]",Q,ie,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Ht,Ce),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Ht,Ce),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Ht,Ce),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Ht,Ce),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Ht,Ce,"[\\:\\@\\/\\?]",St),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Ht,Ce,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Ht,Ce),"g"),UNRESERVED:new RegExp(Ht,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Ht,ft),"g"),PCT_ENCODED:new RegExp(ye,"g"),IPV4ADDRESS:new RegExp("^("+Tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+wn+")"+i(i("\\%25|\\%(?!"+ve+"{2})")+"("+Br+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ne(Q,ie){var ve=[],ye=!0,pt=!1,Ce=void 0;try{for(var ft=Q[Symbol.iterator](),Bt;!(ye=(Bt=ft.next()).done)&&(ve.push(Bt.value),!(ie&&ve.length===ie));ye=!0);}catch(St){pt=!0,Ce=St}finally{try{!ye&&ft.return&&ft.return()}finally{if(pt)throw Ce}}return ve}return function(Q,ie){if(Array.isArray(Q))return Q;if(Symbol.iterator in Object(Q))return ne(Q,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ne){if(Array.isArray(ne)){for(var Q=0,ie=Array(ne.length);Q<ne.length;Q++)ie[Q]=ne[Q];return ie}else return Array.from(ne)},p=2147483647,m=36,g=1,y=26,v=38,_=700,b=72,E=128,w="-",x=/^xn--/,S=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=m-g,z=Math.floor,N=String.fromCharCode;function $(ne){throw new RangeError(C[ne])}function D(ne,Q){for(var ie=[],ve=ne.length;ve--;)ie[ve]=Q(ne[ve]);return ie}function B(ne,Q){var ie=ne.split("@"),ve="";ie.length>1&&(ve=ie[0]+"@",ne=ie[1]),ne=ne.replace(I,".");var ye=ne.split("."),pt=D(ye,Q).join(".");return ve+pt}function V(ne){for(var Q=[],ie=0,ve=ne.length;ie<ve;){var ye=ne.charCodeAt(ie++);if(ye>=55296&&ye<=56319&&ie<ve){var pt=ne.charCodeAt(ie++);(pt&64512)==56320?Q.push(((ye&1023)<<10)+(pt&1023)+65536):(Q.push(ye),ie--)}else Q.push(ye)}return Q}var j=function(Q){return String.fromCodePoint.apply(String,h(Q))},G=function(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:m},U=function(Q,ie){return Q+22+75*(Q<26)-((ie!=0)<<5)},P=function(Q,ie,ve){var ye=0;for(Q=ve?z(Q/_):Q>>1,Q+=z(Q/ie);Q>O*y>>1;ye+=m)Q=z(Q/O);return z(ye+(O+1)*Q/(Q+v))},k=function(Q){var ie=[],ve=Q.length,ye=0,pt=E,Ce=b,ft=Q.lastIndexOf(w);ft<0&&(ft=0);for(var Bt=0;Bt<ft;++Bt)Q.charCodeAt(Bt)>=128&&$("not-basic"),ie.push(Q.charCodeAt(Bt));for(var St=ft>0?ft+1:0;St<ve;){for(var Ht=ye,fn=1,Tr=m;;Tr+=m){St>=ve&&$("invalid-input");var zt=G(Q.charCodeAt(St++));(zt>=m||zt>z((p-ye)/fn))&&$("overflow"),ye+=zt*fn;var pr=Tr<=Ce?g:Tr>=Ce+y?y:Tr-Ce;if(zt<pr)break;var Xt=m-pr;fn>z(p/Xt)&&$("overflow"),fn*=Xt}var er=ie.length+1;Ce=P(ye-Ht,er,Ht==0),z(ye/er)>p-pt&&$("overflow"),pt+=z(ye/er),ye%=er,ie.splice(ye++,0,pt)}return String.fromCodePoint.apply(String,ie)},H=function(Q){var ie=[];Q=V(Q);var ve=Q.length,ye=E,pt=0,Ce=b,ft=!0,Bt=!1,St=void 0;try{for(var Ht=Q[Symbol.iterator](),fn;!(ft=(fn=Ht.next()).done);ft=!0){var Tr=fn.value;Tr<128&&ie.push(N(Tr))}}catch(Se){Bt=!0,St=Se}finally{try{!ft&&Ht.return&&Ht.return()}finally{if(Bt)throw St}}var zt=ie.length,pr=zt;for(zt&&ie.push(w);pr<ve;){var Xt=p,er=!0,ni=!1,ls=void 0;try{for(var Fi=Q[Symbol.iterator](),oa;!(er=(oa=Fi.next()).done);er=!0){var Js=oa.value;Js>=ye&&Js<Xt&&(Xt=Js)}}catch(Se){ni=!0,ls=Se}finally{try{!er&&Fi.return&&Fi.return()}finally{if(ni)throw ls}}var mi=pr+1;Xt-ye>z((p-pt)/mi)&&$("overflow"),pt+=(Xt-ye)*mi,ye=Xt;var yt=!0,wn=!1,Br=void 0;try{for(var Is=Q[Symbol.iterator](),ja;!(yt=(ja=Is.next()).done);yt=!0){var q=ja.value;if(q<ye&&++pt>p&&$("overflow"),q==ye){for(var te=pt,K=m;;K+=m){var fe=K<=Ce?g:K>=Ce+y?y:K-Ce;if(te<fe)break;var pe=te-fe,oe=m-fe;ie.push(N(U(fe+pe%oe,0))),te=z(pe/oe)}ie.push(N(U(te,0))),Ce=P(pt,mi,pr==zt),pt=0,++pr}}}catch(Se){wn=!0,Br=Se}finally{try{!yt&&Is.return&&Is.return()}finally{if(wn)throw Br}}++pt,++ye}return ie.join("")},M=function(Q){return B(Q,function(ie){return x.test(ie)?k(ie.slice(4).toLowerCase()):ie})},F=function(Q){return B(Q,function(ie){return S.test(ie)?"xn--"+H(ie):ie})},J={version:"2.1.0",ucs2:{decode:V,encode:j},decode:k,encode:H,toASCII:F,toUnicode:M},se={};function ae(ne){var Q=ne.charCodeAt(0),ie=void 0;return Q<16?ie="%0"+Q.toString(16).toUpperCase():Q<128?ie="%"+Q.toString(16).toUpperCase():Q<2048?ie="%"+(Q>>6|192).toString(16).toUpperCase()+"%"+(Q&63|128).toString(16).toUpperCase():ie="%"+(Q>>12|224).toString(16).toUpperCase()+"%"+(Q>>6&63|128).toString(16).toUpperCase()+"%"+(Q&63|128).toString(16).toUpperCase(),ie}function ce(ne){for(var Q="",ie=0,ve=ne.length;ie<ve;){var ye=parseInt(ne.substr(ie+1,2),16);if(ye<128)Q+=String.fromCharCode(ye),ie+=3;else if(ye>=194&&ye<224){if(ve-ie>=6){var pt=parseInt(ne.substr(ie+4,2),16);Q+=String.fromCharCode((ye&31)<<6|pt&63)}else Q+=ne.substr(ie,6);ie+=6}else if(ye>=224){if(ve-ie>=9){var Ce=parseInt(ne.substr(ie+4,2),16),ft=parseInt(ne.substr(ie+7,2),16);Q+=String.fromCharCode((ye&15)<<12|(Ce&63)<<6|ft&63)}else Q+=ne.substr(ie,9);ie+=9}else Q+=ne.substr(ie,3),ie+=3}return Q}function le(ne,Q){function ie(ve){var ye=ce(ve);return ye.match(Q.UNRESERVED)?ye:ve}return ne.scheme&&(ne.scheme=String(ne.scheme).replace(Q.PCT_ENCODED,ie).toLowerCase().replace(Q.NOT_SCHEME,"")),ne.userinfo!==void 0&&(ne.userinfo=String(ne.userinfo).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_USERINFO,ae).replace(Q.PCT_ENCODED,o)),ne.host!==void 0&&(ne.host=String(ne.host).replace(Q.PCT_ENCODED,ie).toLowerCase().replace(Q.NOT_HOST,ae).replace(Q.PCT_ENCODED,o)),ne.path!==void 0&&(ne.path=String(ne.path).replace(Q.PCT_ENCODED,ie).replace(ne.scheme?Q.NOT_PATH:Q.NOT_PATH_NOSCHEME,ae).replace(Q.PCT_ENCODED,o)),ne.query!==void 0&&(ne.query=String(ne.query).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_QUERY,ae).replace(Q.PCT_ENCODED,o)),ne.fragment!==void 0&&(ne.fragment=String(ne.fragment).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_FRAGMENT,ae).replace(Q.PCT_ENCODED,o)),ne}function ge(ne){return ne.replace(/^0*(.*)/,"$1")||"0"}function ue(ne,Q){var ie=ne.match(Q.IPV4ADDRESS)||[],ve=d(ie,2),ye=ve[1];return ye?ye.split(".").map(ge).join("."):ne}function Fe(ne,Q){var ie=ne.match(Q.IPV6ADDRESS)||[],ve=d(ie,3),ye=ve[1],pt=ve[2];if(ye){for(var Ce=ye.toLowerCase().split("::").reverse(),ft=d(Ce,2),Bt=ft[0],St=ft[1],Ht=St?St.split(":").map(ge):[],fn=Bt.split(":").map(ge),Tr=Q.IPV4ADDRESS.test(fn[fn.length-1]),zt=Tr?7:8,pr=fn.length-zt,Xt=Array(zt),er=0;er<zt;++er)Xt[er]=Ht[er]||fn[pr+er]||"";Tr&&(Xt[zt-1]=ue(Xt[zt-1],Q));var ni=Xt.reduce(function(mi,yt,wn){if(!yt||yt==="0"){var Br=mi[mi.length-1];Br&&Br.index+Br.length===wn?Br.length++:mi.push({index:wn,length:1})}return mi},[]),ls=ni.sort(function(mi,yt){return yt.length-mi.length})[0],Fi=void 0;if(ls&&ls.length>1){var oa=Xt.slice(0,ls.index),Js=Xt.slice(ls.index+ls.length);Fi=oa.join(":")+"::"+Js.join(":")}else Fi=Xt.join(":");return pt&&(Fi+="%"+pt),Fi}else return ne}var ke=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ge="".match(/(){0}/)[1]===void 0;function Re(ne){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie={},ve=Q.iri!==!1?f:c;Q.reference==="suffix"&&(ne=(Q.scheme?Q.scheme+":":"")+"//"+ne);var ye=ne.match(ke);if(ye){Ge?(ie.scheme=ye[1],ie.userinfo=ye[3],ie.host=ye[4],ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ye[7],ie.fragment=ye[8],isNaN(ie.port)&&(ie.port=ye[5])):(ie.scheme=ye[1]||void 0,ie.userinfo=ne.indexOf("@")!==-1?ye[3]:void 0,ie.host=ne.indexOf("//")!==-1?ye[4]:void 0,ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ne.indexOf("?")!==-1?ye[7]:void 0,ie.fragment=ne.indexOf("#")!==-1?ye[8]:void 0,isNaN(ie.port)&&(ie.port=ne.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ye[4]:void 0)),ie.host&&(ie.host=Fe(ue(ie.host,ve),ve)),ie.scheme===void 0&&ie.userinfo===void 0&&ie.host===void 0&&ie.port===void 0&&!ie.path&&ie.query===void 0?ie.reference="same-document":ie.scheme===void 0?ie.reference="relative":ie.fragment===void 0?ie.reference="absolute":ie.reference="uri",Q.reference&&Q.reference!=="suffix"&&Q.reference!==ie.reference&&(ie.error=ie.error||"URI is not a "+Q.reference+" reference.");var pt=se[(Q.scheme||ie.scheme||"").toLowerCase()];if(!Q.unicodeSupport&&(!pt||!pt.unicodeSupport)){if(ie.host&&(Q.domainHost||pt&&pt.domainHost))try{ie.host=J.toASCII(ie.host.replace(ve.PCT_ENCODED,ce).toLowerCase())}catch(Ce){ie.error=ie.error||"Host's domain name can not be converted to ASCII via punycode: "+Ce}le(ie,c)}else le(ie,ve);pt&&pt.parse&&pt.parse(ie,Q)}else ie.error=ie.error||"URI can not be parsed.";return ie}function Oe(ne,Q){var ie=Q.iri!==!1?f:c,ve=[];return ne.userinfo!==void 0&&(ve.push(ne.userinfo),ve.push("@")),ne.host!==void 0&&ve.push(Fe(ue(String(ne.host),ie),ie).replace(ie.IPV6ADDRESS,function(ye,pt,Ce){return"["+pt+(Ce?"%25"+Ce:"")+"]"})),(typeof ne.port=="number"||typeof ne.port=="string")&&(ve.push(":"),ve.push(String(ne.port))),ve.length?ve.join(""):void 0}var Le=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,je=/^\/?(?:.|\n)*?(?=\/|$)/;function bt(ne){for(var Q=[];ne.length;)if(ne.match(Le))ne=ne.replace(Le,"");else if(ne.match(Ut))ne=ne.replace(Ut,"/");else if(ne.match(Qe))ne=ne.replace(Qe,"/"),Q.pop();else if(ne==="."||ne==="..")ne="";else{var ie=ne.match(je);if(ie){var ve=ie[0];ne=ne.slice(ve.length),Q.push(ve)}else throw new Error("Unexpected dot segment condition")}return Q.join("")}function et(ne){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=Q.iri?f:c,ve=[],ye=se[(Q.scheme||ne.scheme||"").toLowerCase()];if(ye&&ye.serialize&&ye.serialize(ne,Q),ne.host&&!ie.IPV6ADDRESS.test(ne.host)){if(Q.domainHost||ye&&ye.domainHost)try{ne.host=Q.iri?J.toUnicode(ne.host):J.toASCII(ne.host.replace(ie.PCT_ENCODED,ce).toLowerCase())}catch(ft){ne.error=ne.error||"Host's domain name can not be converted to "+(Q.iri?"Unicode":"ASCII")+" via punycode: "+ft}}le(ne,ie),Q.reference!=="suffix"&&ne.scheme&&(ve.push(ne.scheme),ve.push(":"));var pt=Oe(ne,Q);if(pt!==void 0&&(Q.reference!=="suffix"&&ve.push("//"),ve.push(pt),ne.path&&ne.path.charAt(0)!=="/"&&ve.push("/")),ne.path!==void 0){var Ce=ne.path;!Q.absolutePath&&(!ye||!ye.absolutePath)&&(Ce=bt(Ce)),pt===void 0&&(Ce=Ce.replace(/^\/\//,"/%2F")),ve.push(Ce)}return ne.query!==void 0&&(ve.push("?"),ve.push(ne.query)),ne.fragment!==void 0&&(ve.push("#"),ve.push(ne.fragment)),ve.join("")}function ut(ne,Q){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=arguments[3],ye={};return ve||(ne=Re(et(ne,ie),ie),Q=Re(et(Q,ie),ie)),ie=ie||{},!ie.tolerant&&Q.scheme?(ye.scheme=Q.scheme,ye.userinfo=Q.userinfo,ye.host=Q.host,ye.port=Q.port,ye.path=bt(Q.path||""),ye.query=Q.query):(Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0?(ye.userinfo=Q.userinfo,ye.host=Q.host,ye.port=Q.port,ye.path=bt(Q.path||""),ye.query=Q.query):(Q.path?(Q.path.charAt(0)==="/"?ye.path=bt(Q.path):((ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0)&&!ne.path?ye.path="/"+Q.path:ne.path?ye.path=ne.path.slice(0,ne.path.lastIndexOf("/")+1)+Q.path:ye.path=Q.path,ye.path=bt(ye.path)),ye.query=Q.query):(ye.path=ne.path,Q.query!==void 0?ye.query=Q.query:ye.query=ne.query),ye.userinfo=ne.userinfo,ye.host=ne.host,ye.port=ne.port),ye.scheme=ne.scheme),ye.fragment=Q.fragment,ye}function lt(ne,Q,ie){var ve=u({scheme:"null"},ie);return et(ut(Re(ne,ve),Re(Q,ve),ve,!0),ve)}function jt(ne,Q){return typeof ne=="string"?ne=et(Re(ne,Q),Q):s(ne)==="object"&&(ne=Re(et(ne,Q),Q)),ne}function Dn(ne,Q,ie){return typeof ne=="string"?ne=et(Re(ne,ie),ie):s(ne)==="object"&&(ne=et(ne,ie)),typeof Q=="string"?Q=et(Re(Q,ie),ie):s(Q)==="object"&&(Q=et(Q,ie)),ne===Q}function he(ne,Q){return ne&&ne.toString().replace(!Q||!Q.iri?c.ESCAPE:f.ESCAPE,ae)}function _e(ne,Q){return ne&&ne.toString().replace(!Q||!Q.iri?c.PCT_ENCODED:f.PCT_ENCODED,ce)}var Pe={scheme:"http",domainHost:!0,parse:function(Q,ie){return Q.host||(Q.error=Q.error||"HTTP URIs must have a host."),Q},serialize:function(Q,ie){var ve=String(Q.scheme).toLowerCase()==="https";return(Q.port===(ve?443:80)||Q.port==="")&&(Q.port=void 0),Q.path||(Q.path="/"),Q}},it={scheme:"https",domainHost:Pe.domainHost,parse:Pe.parse,serialize:Pe.serialize};function Ye(ne){return typeof ne.secure=="boolean"?ne.secure:String(ne.scheme).toLowerCase()==="wss"}var at={scheme:"ws",domainHost:!0,parse:function(Q,ie){var ve=Q;return ve.secure=Ye(ve),ve.resourceName=(ve.path||"/")+(ve.query?"?"+ve.query:""),ve.path=void 0,ve.query=void 0,ve},serialize:function(Q,ie){if((Q.port===(Ye(Q)?443:80)||Q.port==="")&&(Q.port=void 0),typeof Q.secure=="boolean"&&(Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0),Q.resourceName){var ve=Q.resourceName.split("?"),ye=d(ve,2),pt=ye[0],Ce=ye[1];Q.path=pt&&pt!=="/"?pt:void 0,Q.query=Ce,Q.resourceName=void 0}return Q.fragment=void 0,Q}},tt={scheme:"wss",domainHost:at.domainHost,parse:at.parse,serialize:at.serialize},vt={},In="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Wt="[0-9A-Fa-f]",Vt=i(i("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+i("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+i("%"+Wt+Wt)),hr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Yn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ku=r(Yn,'[\\"\\\\]'),Mr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",us=new RegExp(In,"g"),ti=new RegExp(Vt,"g"),Ei=new RegExp(r("[^]",hr,"[\\.]",'[\\"]',ku),"g"),qr=new RegExp(r("[^]",In,Mr),"g"),yr=qr;function gt(ne){var Q=ce(ne);return Q.match(us)?Q:ne}var Fr={scheme:"mailto",parse:function(Q,ie){var ve=Q,ye=ve.to=ve.path?ve.path.split(","):[];if(ve.path=void 0,ve.query){for(var pt=!1,Ce={},ft=ve.query.split("&"),Bt=0,St=ft.length;Bt<St;++Bt){var Ht=ft[Bt].split("=");switch(Ht[0]){case"to":for(var fn=Ht[1].split(","),Tr=0,zt=fn.length;Tr<zt;++Tr)ye.push(fn[Tr]);break;case"subject":ve.subject=_e(Ht[1],ie);break;case"body":ve.body=_e(Ht[1],ie);break;default:pt=!0,Ce[_e(Ht[0],ie)]=_e(Ht[1],ie);break}}pt&&(ve.headers=Ce)}ve.query=void 0;for(var pr=0,Xt=ye.length;pr<Xt;++pr){var er=ye[pr].split("@");if(er[0]=_e(er[0]),ie.unicodeSupport)er[1]=_e(er[1],ie).toLowerCase();else try{er[1]=J.toASCII(_e(er[1],ie).toLowerCase())}catch(ni){ve.error=ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+ni}ye[pr]=er.join("@")}return ve},serialize:function(Q,ie){var ve=Q,ye=a(Q.to);if(ye){for(var pt=0,Ce=ye.length;pt<Ce;++pt){var ft=String(ye[pt]),Bt=ft.lastIndexOf("@"),St=ft.slice(0,Bt).replace(ti,gt).replace(ti,o).replace(Ei,ae),Ht=ft.slice(Bt+1);try{Ht=ie.iri?J.toUnicode(Ht):J.toASCII(_e(Ht,ie).toLowerCase())}catch(pr){ve.error=ve.error||"Email address's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+pr}ye[pt]=St+"@"+Ht}ve.path=ye.join(",")}var fn=Q.headers=Q.headers||{};Q.subject&&(fn.subject=Q.subject),Q.body&&(fn.body=Q.body);var Tr=[];for(var zt in fn)fn[zt]!==vt[zt]&&Tr.push(zt.replace(ti,gt).replace(ti,o).replace(qr,ae)+"="+fn[zt].replace(ti,gt).replace(ti,o).replace(yr,ae));return Tr.length&&(ve.query=Tr.join("&")),ve}},xi=/^([^\:]+)\:(.*)/,Yi={scheme:"urn",parse:function(Q,ie){var ve=Q.path&&Q.path.match(xi),ye=Q;if(ve){var pt=ie.scheme||ye.scheme||"urn",Ce=ve[1].toLowerCase(),ft=ve[2],Bt=pt+":"+(ie.nid||Ce),St=se[Bt];ye.nid=Ce,ye.nss=ft,ye.path=void 0,St&&(ye=St.parse(ye,ie))}else ye.error=ye.error||"URN can not be parsed.";return ye},serialize:function(Q,ie){var ve=ie.scheme||Q.scheme||"urn",ye=Q.nid,pt=ve+":"+(ie.nid||ye),Ce=se[pt];Ce&&(Q=Ce.serialize(Q,ie));var ft=Q,Bt=Q.nss;return ft.path=(ye||ie.nid)+":"+Bt,ft}},Qs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ba={scheme:"urn:uuid",parse:function(Q,ie){var ve=Q;return ve.uuid=ve.nss,ve.nss=void 0,!ie.tolerant&&(!ve.uuid||!ve.uuid.match(Qs))&&(ve.error=ve.error||"UUID is not valid."),ve},serialize:function(Q,ie){var ve=Q;return ve.nss=(Q.uuid||"").toLowerCase(),ve}};se[Pe.scheme]=Pe,se[it.scheme]=it,se[at.scheme]=at,se[tt.scheme]=tt,se[Fr.scheme]=Fr,se[Yi.scheme]=Yi,se[Ba.scheme]=Ba,n.SCHEMES=se,n.pctEncChar=ae,n.pctDecChars=ce,n.parse=Re,n.removeDotSegments=bt,n.serialize=et,n.resolveComponents=ut,n.resolve=lt,n.normalize=jt,n.equal=Dn,n.escapeComponent=he,n.unescapeComponent=_e,Object.defineProperty(n,"__esModule",{value:!0})})})(hH,hH.exports);var YUt=hH.exports;Object.defineProperty(kJ,"__esModule",{value:!0});const Z6e=YUt;Z6e.code='require("ajv/dist/runtime/uri").default';kJ.default=Z6e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=uf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Cn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=MI,i=FI,s=K1,o=nu,a=Cn,u=lo,l=LI,c=Zn,f=GUt,d=kJ,h=(U,P)=>new RegExp(U,P);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(U){var P,k,H,M,F,J,se,ae,ce,le,ge,ue,Fe,ke,Ge,Re,Oe,Le,Ut,Qe,je,bt,et,ut,lt;const jt=U.strict,Dn=(P=U.code)===null||P===void 0?void 0:P.optimize,he=Dn===!0||Dn===void 0?1:Dn||0,_e=(H=(k=U.code)===null||k===void 0?void 0:k.regExp)!==null&&H!==void 0?H:h,Pe=(M=U.uriResolver)!==null&&M!==void 0?M:d.default;return{strictSchema:(J=(F=U.strictSchema)!==null&&F!==void 0?F:jt)!==null&&J!==void 0?J:!0,strictNumbers:(ae=(se=U.strictNumbers)!==null&&se!==void 0?se:jt)!==null&&ae!==void 0?ae:!0,strictTypes:(le=(ce=U.strictTypes)!==null&&ce!==void 0?ce:jt)!==null&&le!==void 0?le:"log",strictTuples:(ue=(ge=U.strictTuples)!==null&&ge!==void 0?ge:jt)!==null&&ue!==void 0?ue:"log",strictRequired:(ke=(Fe=U.strictRequired)!==null&&Fe!==void 0?Fe:jt)!==null&&ke!==void 0?ke:!1,code:U.code?{...U.code,optimize:he,regExp:_e}:{optimize:he,regExp:_e},loopRequired:(Ge=U.loopRequired)!==null&&Ge!==void 0?Ge:v,loopEnum:(Re=U.loopEnum)!==null&&Re!==void 0?Re:v,meta:(Oe=U.meta)!==null&&Oe!==void 0?Oe:!0,messages:(Le=U.messages)!==null&&Le!==void 0?Le:!0,inlineRefs:(Ut=U.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Qe=U.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(je=U.addUsedSchema)!==null&&je!==void 0?je:!0,validateSchema:(bt=U.validateSchema)!==null&&bt!==void 0?bt:!0,validateFormats:(et=U.validateFormats)!==null&&et!==void 0?et:!0,unicodeRegExp:(ut=U.unicodeRegExp)!==null&&ut!==void 0?ut:!0,int32range:(lt=U.int32range)!==null&&lt!==void 0?lt:!0,uriResolver:Pe}}class b{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,..._(P)};const{es5:k,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:k,lines:H}),this.logger=z(P.logger);const M=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,P,"NOT SUPPORTED"),E.call(this,y,P,"DEPRECATED","warn"),this._metaOpts=C.call(this),P.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&I.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),x.call(this),P.validateFormats=M}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:k,schemaId:H}=this.opts;let M=f;H==="id"&&(M={...f},M.id=M.$id,delete M.$id),k&&P&&this.addMetaSchema(M,M[H],!1)}defaultMeta(){const{meta:P,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[k]||P:void 0}validate(P,k){let H;if(typeof P=="string"){if(H=this.getSchema(P),!H)throw new Error(`no schema with key or ref "${P}"`)}else H=this.compile(P);const M=H(k);return"$async"in H||(this.errors=H.errors),M}compile(P,k){const H=this._addSchema(P,k);return H.validate||this._compileSchemaEnv(H)}compileAsync(P,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return M.call(this,P,k);async function M(le,ge){await F.call(this,le.$schema);const ue=this._addSchema(le,ge);return ue.validate||J.call(this,ue)}async function F(le){le&&!this.getSchema(le)&&await M.call(this,{$ref:le},!0)}async function J(le){try{return this._compileSchemaEnv(le)}catch(ge){if(!(ge instanceof i.default))throw ge;return se.call(this,ge),await ae.call(this,ge.missingSchema),J.call(this,le)}}function se({missingSchema:le,missingRef:ge}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ge} cannot be resolved`)}async function ae(le){const ge=await ce.call(this,le);this.refs[le]||await F.call(this,ge.$schema),this.refs[le]||this.addSchema(ge,le,k)}async function ce(le){const ge=this._loading[le];if(ge)return ge;try{return await(this._loading[le]=H(le))}finally{delete this._loading[le]}}}addSchema(P,k,H,M=this.opts.validateSchema){if(Array.isArray(P)){for(const J of P)this.addSchema(J,void 0,H,M);return this}let F;if(typeof P=="object"){const{schemaId:J}=this.opts;if(F=P[J],F!==void 0&&typeof F!="string")throw new Error(`schema ${J} must be string`)}return k=(0,u.normalizeId)(k||F),this._checkUnique(k),this.schemas[k]=this._addSchema(P,H,k,M,!0),this}addMetaSchema(P,k,H=this.opts.validateSchema){return this.addSchema(P,k,!0,H),this}validateSchema(P,k){if(typeof P=="boolean")return!0;let H;if(H=P.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const M=this.validate(H,P);if(!M&&k){const F="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(F);else throw new Error(F)}return M}getSchema(P){let k;for(;typeof(k=w.call(this,P))=="string";)P=k;if(k===void 0){const{schemaId:H}=this.opts,M=new o.SchemaEnv({schema:{},schemaId:H});if(k=o.resolveSchema.call(this,M,P),!k)return;this.refs[P]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=w.call(this,P);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const k=P;this._cache.delete(k);let H=P[this.opts.schemaId];return H&&(H=(0,u.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const k of P)this.addKeyword(k);return this}addKeyword(P,k){let H;if(typeof P=="string")H=P,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=H);else if(typeof P=="object"&&k===void 0){if(k=P,H=k.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,H,k),!k)return(0,c.eachItem)(H,F=>D.call(this,F)),this;V.call(this,k);const M={...k,type:(0,l.getJSONTypes)(k.type),schemaType:(0,l.getJSONTypes)(k.schemaType)};return(0,c.eachItem)(H,M.type.length===0?F=>D.call(this,F,M):F=>M.type.forEach(J=>D.call(this,F,M,J))),this}getKeyword(P){const k=this.RULES.all[P];return typeof k=="object"?k.definition:!!k}removeKeyword(P){const{RULES:k}=this;delete k.keywords[P],delete k.all[P];for(const H of k.rules){const M=H.rules.findIndex(F=>F.keyword===P);M>=0&&H.rules.splice(M,1)}return this}addFormat(P,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[P]=k,this}errorsText(P=this.errors,{separator:k=", ",dataVar:H="data"}={}){return!P||P.length===0?"No errors":P.map(M=>`${H}${M.instancePath} ${M.message}`).reduce((M,F)=>M+k+F)}$dataMetaSchema(P,k){const H=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const M of k){const F=M.split("/").slice(1);let J=P;for(const se of F)J=J[se];for(const se in H){const ae=H[se];if(typeof ae!="object")continue;const{$data:ce}=ae.definition,le=J[se];ce&&le&&(J[se]=G(le))}}return P}_removeAllSchemas(P,k){for(const H in P){const M=P[H];(!k||k.test(H))&&(typeof M=="string"?delete P[H]:M&&!M.meta&&(this._cache.delete(M.schema),delete P[H]))}}_addSchema(P,k,H,M=this.opts.validateSchema,F=this.opts.addUsedSchema){let J;const{schemaId:se}=this.opts;if(typeof P=="object")J=P[se];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(P);if(ae!==void 0)return ae;H=(0,u.normalizeId)(J||H);const ce=u.getSchemaRefs.call(this,P,H);return ae=new o.SchemaEnv({schema:P,schemaId:se,meta:k,baseId:H,localRefs:ce}),this._cache.set(ae.schema,ae),F&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=ae),M&&this.validateSchema(P,!0),ae}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):o.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const k=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,P)}finally{this.opts=k}}}e.default=b,b.ValidationError=r.default,b.MissingRefError=i.default;function E(U,P,k,H="error"){for(const M in U){const F=M;F in P&&this.logger[H](`${k}: option ${M}. ${U[F]}`)}}function w(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function x(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const P in U)this.addSchema(U[P],P)}function S(){for(const U in this.opts.formats){const P=this.opts.formats[U];P&&this.addFormat(U,P)}}function I(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in U){const k=U[P];k.keyword||(k.keyword=P),this.addKeyword(k)}}function C(){const U={...this.opts};for(const P of p)delete U[P];return U}const O={log(){},warn(){},error(){}};function z(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const N=/^[a-z_$][a-z0-9_$:-]*$/i;function $(U,P){const{RULES:k}=this;if((0,c.eachItem)(U,H=>{if(k.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!N.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function D(U,P,k){var H;const M=P==null?void 0:P.post;if(k&&M)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:F}=this;let J=M?F.post:F.rules.find(({type:ae})=>ae===k);if(J||(J={type:k,rules:[]},F.rules.push(J)),F.keywords[U]=!0,!P)return;const se={keyword:U,definition:{...P,type:(0,l.getJSONTypes)(P.type),schemaType:(0,l.getJSONTypes)(P.schemaType)}};P.before?B.call(this,J,se,P.before):J.rules.push(se),F.all[U]=se,(H=P.implements)===null||H===void 0||H.forEach(ae=>this.addKeyword(ae))}function B(U,P,k){const H=U.rules.findIndex(M=>M.keyword===k);H>=0?U.rules.splice(H,0,P):(U.rules.push(P),this.logger.warn(`rule ${k} is not defined`))}function V(U){let{metaSchema:P}=U;P!==void 0&&(U.$data&&this.opts.$data&&(P=G(P)),U.validateSchema=this.compile(P,!0))}const j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(U){return{anyOf:[U,j]}}})(O6e);var $J={},RJ={},NJ={};Object.defineProperty(NJ,"__esModule",{value:!0});const KUt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};NJ.default=KUt;var X1={};Object.defineProperty(X1,"__esModule",{value:!0});X1.callRef=X1.getValidate=void 0;const XUt=FI,Tge=Tn,Wa=Cn,g_=ch,Age=nu,qP=Zn,QUt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Age.resolveRef.call(u,l,i,n);if(c===void 0)throw new XUt.default(r.opts.uriResolver,i,n);if(c instanceof Age.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return x$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return x$(e,(0,Wa._)`${p}.validate`,l,l.$async)}function d(p){const m=e4e(e,p);x$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Wa.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Wa.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function e4e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Wa._)`${n.scopeValue("wrapper",{ref:t})}.validate`}X1.getValidate=e4e;function x$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?g_.default.this:Wa.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Wa._)`await ${(0,Tge.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Wa._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Tge.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Wa._)`${p}.errors`;i.assign(g_.default.vErrors,(0,Wa._)`${g_.default.vErrors} === null ? ${m} : ${g_.default.vErrors}.concat(${m})`),i.assign(g_.default.errors,(0,Wa._)`${g_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=qP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Wa._)`${p}.evaluated.props`);s.props=qP.mergeEvaluated.props(i,y,s.props,Wa.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=qP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Wa._)`${p}.evaluated.items`);s.items=qP.mergeEvaluated.items(i,y,s.items,Wa.Name)}}}X1.callRef=x$;X1.default=QUt;Object.defineProperty(RJ,"__esModule",{value:!0});const JUt=NJ,ZUt=X1,eVt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",JUt.default,ZUt.default];RJ.default=eVt;var DJ={},LJ={};Object.defineProperty(LJ,"__esModule",{value:!0});const F3=Cn,vm=F3.operators,B3={maximum:{okStr:"<=",ok:vm.LTE,fail:vm.GT},minimum:{okStr:">=",ok:vm.GTE,fail:vm.LT},exclusiveMaximum:{okStr:"<",ok:vm.LT,fail:vm.GTE},exclusiveMinimum:{okStr:">",ok:vm.GT,fail:vm.LTE}},tVt={message:({keyword:e,schemaCode:t})=>(0,F3.str)`must be ${B3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,F3._)`{comparison: ${B3[e].okStr}, limit: ${t}}`},nVt={keyword:Object.keys(B3),type:"number",schemaType:"number",$data:!0,error:tVt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,F3._)`${n} ${B3[t].fail} ${r} || isNaN(${n})`)}};LJ.default=nVt;var MJ={};Object.defineProperty(MJ,"__esModule",{value:!0});const l2=Cn,rVt={message:({schemaCode:e})=>(0,l2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,l2._)`{multipleOf: ${e}}`},iVt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:rVt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,l2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,l2._)`${o} !== parseInt(${o})`;e.fail$data((0,l2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};MJ.default=iVt;var FJ={},BJ={};Object.defineProperty(BJ,"__esModule",{value:!0});function t4e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}BJ.default=t4e;t4e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(FJ,"__esModule",{value:!0});const ky=Cn,sVt=Zn,oVt=BJ,aVt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,ky.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,ky._)`{limit: ${e}}`},uVt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:aVt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?ky.operators.GT:ky.operators.LT,o=i.opts.unicode===!1?(0,ky._)`${n}.length`:(0,ky._)`${(0,sVt.useFunc)(e.gen,oVt.default)}(${n})`;e.fail$data((0,ky._)`${o} ${s} ${r}`)}};FJ.default=uVt;var jJ={};Object.defineProperty(jJ,"__esModule",{value:!0});const lVt=Tn,j3=Cn,cVt={message:({schemaCode:e})=>(0,j3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,j3._)`{pattern: ${e}}`},fVt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:cVt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,j3._)`(new RegExp(${i}, ${o}))`:(0,lVt.usePattern)(e,r);e.fail$data((0,j3._)`!${a}.test(${t})`)}};jJ.default=fVt;var zJ={};Object.defineProperty(zJ,"__esModule",{value:!0});const c2=Cn,dVt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,c2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,c2._)`{limit: ${e}}`},hVt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:dVt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?c2.operators.GT:c2.operators.LT;e.fail$data((0,c2._)`Object.keys(${n}).length ${i} ${r}`)}};zJ.default=hVt;var UJ={};Object.defineProperty(UJ,"__esModule",{value:!0});const hS=Tn,f2=Cn,pVt=Zn,mVt={message:({params:{missingProperty:e}})=>(0,f2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,f2._)`{missingProperty: ${e}}`},gVt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:mVt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,pVt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(f2.nil,f);else for(const h of n)(0,hS.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,hS.checkMissingProp)(e,n,h)),(0,hS.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,hS.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,hS.propertyInData)(t,i,h,a.ownProperties)),t.if((0,f2.not)(p),()=>{e.error(),t.break()})},f2.nil)}}};UJ.default=gVt;var VJ={};Object.defineProperty(VJ,"__esModule",{value:!0});const d2=Cn,yVt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,d2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,d2._)`{limit: ${e}}`},vVt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:yVt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?d2.operators.GT:d2.operators.LT;e.fail$data((0,d2._)`${n}.length ${i} ${r}`)}};VJ.default=vVt;var HJ={},BI={};Object.defineProperty(BI,"__esModule",{value:!0});const n4e=GK;n4e.code='require("ajv/dist/runtime/equal").default';BI.default=n4e;Object.defineProperty(HJ,"__esModule",{value:!0});const bj=LI,to=Cn,_Vt=Zn,bVt=BI,wVt={message:({params:{i:e,j:t}})=>(0,to.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,to._)`{i: ${e}, j: ${t}}`},EVt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:wVt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,bj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,to._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,to._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,to._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,bj.checkDataTypes)(l,g,a.opts.strictNumbers,bj.DataType.Wrong),v=t.const("indices",(0,to._)`{}`);t.for((0,to._)`;${p}--;`,()=>{t.let(g,(0,to._)`${n}[${p}]`),t.if(y,(0,to._)`continue`),l.length>1&&t.if((0,to._)`typeof ${g} == "string"`,(0,to._)`${g} += "_"`),t.if((0,to._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,to._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,to._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,_Vt.useFunc)(t,bVt.default),y=t.name("outer");t.label(y).for((0,to._)`;${p}--;`,()=>t.for((0,to._)`${m} = ${p}; ${m}--;`,()=>t.if((0,to._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};HJ.default=EVt;var qJ={};Object.defineProperty(qJ,"__esModule",{value:!0});const pH=Cn,xVt=Zn,SVt=BI,TVt={message:"must be equal to constant",params:({schemaCode:e})=>(0,pH._)`{allowedValue: ${e}}`},AVt={keyword:"const",$data:!0,error:TVt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,pH._)`!${(0,xVt.useFunc)(t,SVt.default)}(${n}, ${i})`):e.fail((0,pH._)`${s} !== ${n}`)}};qJ.default=AVt;var WJ={};Object.defineProperty(WJ,"__esModule",{value:!0});const iT=Cn,CVt=Zn,IVt=BI,OVt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,iT._)`{allowedValues: ${e}}`},PVt={keyword:"enum",schemaType:"array",$data:!0,error:OVt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,CVt.useFunc)(t,IVt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,iT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,iT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,iT._)`${l()}(${n}, ${h}[${p}])`:(0,iT._)`${n} === ${m}`}}};WJ.default=PVt;Object.defineProperty(DJ,"__esModule",{value:!0});const kVt=LJ,$Vt=MJ,RVt=FJ,NVt=jJ,DVt=zJ,LVt=UJ,MVt=VJ,FVt=HJ,BVt=qJ,jVt=WJ,zVt=[kVt.default,$Vt.default,RVt.default,NVt.default,DVt.default,LVt.default,MVt.default,FVt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},BVt.default,jVt.default];DJ.default=zVt;var GJ={},ix={};Object.defineProperty(ix,"__esModule",{value:!0});ix.validateAdditionalItems=void 0;const $y=Cn,mH=Zn,UVt={message:({params:{len:e}})=>(0,$y.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,$y._)`{limit: ${e}}`},VVt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:UVt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,mH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}r4e(e,r)}};function r4e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,$y._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,$y._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,mH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,$y._)`${a} <= ${t.length}`);n.if((0,$y.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:mH.Type.Num},l),o.allErrors||n.if((0,$y.not)(l),()=>n.break())})}}ix.validateAdditionalItems=r4e;ix.default=VVt;var YJ={},sx={};Object.defineProperty(sx,"__esModule",{value:!0});sx.validateTuple=void 0;const Cge=Cn,S$=Zn,HVt=Tn,qVt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return i4e(e,"additionalItems",t);n.items=!0,!(0,S$.alwaysValidSchema)(n,t)&&e.ok((0,HVt.validateArray)(e))}};function i4e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=S$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Cge._)`${s}.length`);n.forEach((f,d)=>{(0,S$.alwaysValidSchema)(a,f)||(r.if((0,Cge._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,S$.checkStrictMode)(a,g,d.strictTuples)}}}sx.validateTuple=i4e;sx.default=qVt;Object.defineProperty(YJ,"__esModule",{value:!0});const WVt=sx,GVt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,WVt.validateTuple)(e,"items")};YJ.default=GVt;var KJ={};Object.defineProperty(KJ,"__esModule",{value:!0});const Ige=Cn,YVt=Zn,KVt=Tn,XVt=ix,QVt={message:({params:{len:e}})=>(0,Ige.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ige._)`{limit: ${e}}`},JVt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:QVt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,YVt.alwaysValidSchema)(r,t)&&(i?(0,XVt.validateAdditionalItems)(e,i):e.ok((0,KVt.validateArray)(e)))}};KJ.default=JVt;var XJ={};Object.defineProperty(XJ,"__esModule",{value:!0});const Ol=Cn,WP=Zn,ZVt={message:({params:{min:e,max:t}})=>t===void 0?(0,Ol.str)`must contain at least ${e} valid item(s)`:(0,Ol.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ol._)`{minContains: ${e}}`:(0,Ol._)`{minContains: ${e}, maxContains: ${t}}`},eHt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ZVt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Ol._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,WP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,WP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,WP.alwaysValidSchema)(s,n)){let m=(0,Ol._)`${c} >= ${o}`;a!==void 0&&(m=(0,Ol._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Ol._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:WP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Ol._)`${m}++`),a===void 0?t.if((0,Ol._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Ol._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Ol._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};XJ.default=eHt;var s4e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Cn,n=Zn,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(s4e);var QJ={};Object.defineProperty(QJ,"__esModule",{value:!0});const o4e=Cn,tHt=Zn,nHt={message:"property name must be valid",params:({params:e})=>(0,o4e._)`{propertyName: ${e.propertyName}}`},rHt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:nHt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,tHt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,o4e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};QJ.default=rHt;var EF={};Object.defineProperty(EF,"__esModule",{value:!0});const GP=Tn,Oc=Cn,iHt=ch,YP=Zn,sHt={message:"must NOT have additional properties",params:({params:e})=>(0,Oc._)`{additionalProperty: ${e.additionalProperty}}`},oHt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:sHt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,YP.alwaysValidSchema)(o,n))return;const l=(0,GP.allSchemaProperties)(r.properties),c=(0,GP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Oc._)`${s} === ${iHt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,YP.schemaRefOrVal)(o,r.properties,"properties");y=(0,GP.isOwnProperty)(t,v,g)}else l.length?y=(0,Oc.or)(...l.map(v=>(0,Oc._)`${g} === ${v}`)):y=Oc.nil;return c.length&&(y=(0,Oc.or)(y,...c.map(v=>(0,Oc._)`${(0,GP.usePattern)(e,v)}.test(${g})`))),(0,Oc.not)(y)}function h(g){t.code((0,Oc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,YP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Oc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Oc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:YP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};EF.default=oHt;var JJ={};Object.defineProperty(JJ,"__esModule",{value:!0});const aHt=uf,Oge=Tn,wj=Zn,Pge=EF,uHt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Pge.default.code(new aHt.KeywordCxt(s,Pge.default,"additionalProperties"));const o=(0,Oge.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=wj.mergeEvaluated.props(t,(0,wj.toHash)(o),s.props));const a=o.filter(f=>!(0,wj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Oge.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};JJ.default=uHt;var ZJ={};Object.defineProperty(ZJ,"__esModule",{value:!0});const kge=Tn,KP=Cn,$ge=Zn,Rge=Zn,lHt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,kge.allSchemaProperties)(n),u=a.filter(m=>(0,$ge.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof KP.Name)&&(s.props=(0,Rge.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,$ge.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,KP._)`${(0,kge.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Rge.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,KP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,KP.not)(c),()=>t.break())})})}}};ZJ.default=lHt;var eZ={};Object.defineProperty(eZ,"__esModule",{value:!0});const cHt=Zn,fHt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,cHt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};eZ.default=fHt;var tZ={};Object.defineProperty(tZ,"__esModule",{value:!0});const dHt=Tn,hHt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:dHt.validateUnion,error:{message:"must match a schema in anyOf"}};tZ.default=hHt;var nZ={};Object.defineProperty(nZ,"__esModule",{value:!0});const T$=Cn,pHt=Zn,mHt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,T$._)`{passingSchemas: ${e.passing}}`},gHt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:mHt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,pHt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,T$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,T$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,T$.Name)})})}}};nZ.default=gHt;var rZ={};Object.defineProperty(rZ,"__esModule",{value:!0});const yHt=Zn,vHt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,yHt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};rZ.default=vHt;var iZ={};Object.defineProperty(iZ,"__esModule",{value:!0});const z3=Cn,a4e=Zn,_Ht={message:({params:e})=>(0,z3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,z3._)`{failingKeyword: ${e.ifClause}}`},bHt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:_Ht,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,a4e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Nge(r,"then"),s=Nge(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,z3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,z3._)`${c}`):e.setParams({ifClause:c})}}}};function Nge(e,t){const n=e.schema[t];return n!==void 0&&!(0,a4e.alwaysValidSchema)(e,n)}iZ.default=bHt;var sZ={};Object.defineProperty(sZ,"__esModule",{value:!0});const wHt=Zn,EHt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,wHt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};sZ.default=EHt;Object.defineProperty(GJ,"__esModule",{value:!0});const xHt=ix,SHt=YJ,THt=sx,AHt=KJ,CHt=XJ,IHt=s4e,OHt=QJ,PHt=EF,kHt=JJ,$Ht=ZJ,RHt=eZ,NHt=tZ,DHt=nZ,LHt=rZ,MHt=iZ,FHt=sZ;function BHt(e=!1){const t=[RHt.default,NHt.default,DHt.default,LHt.default,MHt.default,FHt.default,OHt.default,PHt.default,IHt.default,kHt.default,$Ht.default];return e?t.push(SHt.default,AHt.default):t.push(xHt.default,THt.default),t.push(CHt.default),t}GJ.default=BHt;var oZ={},aZ={};Object.defineProperty(aZ,"__esModule",{value:!0});const ji=Cn,jHt={message:({schemaCode:e})=>(0,ji.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ji._)`{format: ${e}}`},zHt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:jHt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ji._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ji._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ji._)`${m}.type || "string"`).assign(y,(0,ji._)`${m}.validate`),()=>n.assign(g,(0,ji._)`"string"`).assign(y,m)),e.fail$data((0,ji.or)(v(),_()));function v(){return u.strictSchema===!1?ji.nil:(0,ji._)`${o} && !${y}`}function _(){const b=c.$async?(0,ji._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ji._)`${y}(${r})`,E=(0,ji._)`(typeof ${y} == "function" ? ${b} : ${y}.test(${r}))`;return(0,ji._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(b());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const w=E instanceof RegExp?(0,ji.regexpCode)(E):u.code.formats?(0,ji._)`${u.code.formats}${(0,ji.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:w});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ji._)`${x}.validate`]:["string",E,x]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ji._)`await ${y}(${r})`}return typeof g=="function"?(0,ji._)`${y}(${r})`:(0,ji._)`${y}.test(${r})`}}}};aZ.default=zHt;Object.defineProperty(oZ,"__esModule",{value:!0});const UHt=aZ,VHt=[UHt.default];oZ.default=VHt;var qw={};Object.defineProperty(qw,"__esModule",{value:!0});qw.contentVocabulary=qw.metadataVocabulary=void 0;qw.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];qw.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty($J,"__esModule",{value:!0});const HHt=RJ,qHt=DJ,WHt=GJ,GHt=oZ,Dge=qw,YHt=[HHt.default,qHt.default,(0,WHt.default)(),GHt.default,Dge.metadataVocabulary,Dge.contentVocabulary];$J.default=YHt;var uZ={},u4e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(u4e);Object.defineProperty(uZ,"__esModule",{value:!0});const B_=Cn,gH=u4e,Lge=nu,KHt=Zn,XHt={message:({params:{discrError:e,tagName:t}})=>e===gH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,B_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},QHt={keyword:"discriminator",type:"object",schemaType:"object",error:XHt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,B_._)`${n}${(0,B_.getProperty)(a)}`);t.if((0,B_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:gH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,B_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:gH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,B_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let b=0;b<o.length;b++){let E=o[b];E!=null&&E.$ref&&!(0,KHt.schemaHasRulesButRef)(E,s.self.RULES)&&(E=Lge.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E==null?void 0:E.$ref),E instanceof Lge.SchemaEnv&&(E=E.schema));const w=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(w,b)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:b}){return Array.isArray(b)&&b.includes(a)}function v(b,E){if(b.const)_(b.const,E);else if(b.enum)for(const w of b.enum)_(w,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};uZ.default=QHt;const JHt="http://json-schema.org/draft-07/schema#",ZHt="http://json-schema.org/draft-07/schema#",eqt="Core schema meta-schema",tqt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},nqt=["object","boolean"],rqt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},iqt={$schema:JHt,$id:ZHt,title:eqt,definitions:tqt,type:nqt,properties:rqt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=O6e,r=$J,i=uZ,s=iqt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=uf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Cn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=MI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=FI;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(cH,cH.exports);var sqt=cH.exports;const l4e=pl(sqt),oqt="#/definitions/StudyConfig",aqt="http://json-schema.org/draft-07/schema#",uqt={Answer:{additionalProperties:!1,description:"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks.",properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"}]},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},OrderObject:{additionalProperties:!1,description:"The OrderObject interface is used to define the properties of an order object. This is used to define the order of components in a study. It supports random assignment of trials using a pure random assignment and a latin square.",properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/OrderObject"}]},type:"array"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"}},required:["order","components"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:"The QuestionnaireComponent interface is used to define the properties of a questionnaire component. A QuestionnaireComponent is used to render questions with different response types. The response types are also defined with these documentation. The main use case of this component type is to ask participants questions, without using markdown, websites, images, etc.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:"The StudyConfig interface is used to define the properties of a study configuration. These are the hjson files that live in the public folder. In our repo, one example of this would be public/cleveland/config-cleveland.json.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:"The components that are used in the study (baseComponents allow PartialComponents which allows for inheriting from them in components).",type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/OrderObject",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version.",properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. This might be useful for seeing which version of the study a participant saw.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses.",properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},lqt={$ref:oqt,$schema:aqt,definitions:uqt},cqt="#/definitions/GlobalConfig",fqt="http://json-schema.org/draft-07/schema#",dqt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"},adminUsers:{description:"A required property used to list emails of those who require admin access.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},hqt={$ref:cqt,$schema:fqt,definitions:dqt},c4e=new l4e;c4e.addSchema(hqt);const Mge=c4e.getSchema("#/definitions/GlobalConfig"),f4e=new l4e;f4e.addSchema(lqt);const Fge=f4e.getSchema("#/definitions/StudyConfig");function pqt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function xF(e){return e.baseComponent!==void 0}function mqt(e){const t=wY.parse(e),n=Mge(t),r=pqt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Mge.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function gqt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return xF(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function d4e(e,t){const n=wY.parse(e),r=Fge(n),i=gqt(n);if(r&&i[0])return n;throw console.error(`${t} parsing errors`,[...Fge.errors||[],...i[1]]),Error(`There was an issue validating your file ${t}`)}function h4e(){const e=dc(),{setAlertModal:t}=Xp(),n=Qp();A.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}function yqt(){const e=Y1(),{storageEngine:t}=uc(),{answers:n}=Ef(s=>s),[r,i]=A.useState(!1);return A.useEffect(()=>{const s=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(s))},1e3)},[]),h4e(),R.jsx(Ug,{style:{height:"100%"},children:R.jsx(Sd,{direction:"column",children:r?R.jsx(Ot,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?R.jsx(gu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):R.jsxs(R.Fragment,{children:[R.jsx(Ot,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),R.jsx(Q2,{h:"lg"}),R.jsx(Ug,{children:R.jsx(C0,{color:"blue"})})]})})})}function vqt(){var d;const e=Y1(),t=dc(),n=oh()[t],r=e.components[n],i=WK();h4e();const{storageEngine:s}=uc(),o=Qp(),{setAlertModal:a}=Xp();if(A.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return R.jsx(yqt,{});const u=xF(r)&&e.baseComponents?qK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return R.jsxs(R.Fragment,{children:[c==="aboveStimulus"&&R.jsx(gu,{text:l}),R.jsx(zD,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),R.jsxs(A.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&R.jsx(pzt,{currentConfig:u}),u.type==="website"&&R.jsx($Ot,{currentConfig:u}),u.type==="image"&&R.jsx(NOt,{currentConfig:u}),u.type==="react-component"&&R.jsx(hzt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&R.jsx(gu,{text:l}),R.jsx(zD,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function _qt(e){const[t]=bG();return R.jsx(_G,{...e,to:{pathname:e.to,search:t.toString()}})}const yH=["description","instruction","answer","correctAnswer","startTime","endTime","duration","taskOrder"],A$=["participantId","trialId","responseId"];function h2(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function bqt(e,t,n){return Object.entries(e.answers).map(([r,i])=>{const s=r.split("_")[0],o=r.split("_")[1],a=t.components[s],u=xF(a)&&a.baseComponent&&t.baseComponents?qK({},t.baseComponents[a.baseComponent],a):a,l=i.endTime-i.startTime;return Object.entries(i.answer).map(([f,d])=>{const h={participantId:e.participantId,trialId:s,responseId:f,startTime:new Date(i.startTime).toUTCString(),endTime:new Date(i.endTime).toUTCString(),duration:l};return n.includes("description")&&(h.description=u.description),n.includes("instruction")&&(h.instruction=u.instruction),n.includes("answer")&&(h.answer=d),n.includes("correctAnswer")&&(h.correctAnswer=u.correctAnswer),n.includes("taskOrder")&&(h.taskOrder=o),h}).flat()}).flat()}async function wqt(e,t,n,r,i=[...A$,...yH]){const o=(r||await t.getAllParticipantsData()).map(c=>bqt(c,n,i)).flat(),a=c=>c.replace(/"/g,'""'),u=o.map(c=>i.map(f=>c===null?"":typeof c[f]=="string"?`"${a(c[f])}"`:JSON.stringify(c[f])).join(",")),l=[i.join(","),...u].join(`
`);h2(l,e)}function p4e({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=YXe([...A$,...yH]),a=A.useCallback(c=>{A$.every(f=>c.includes(f))&&o(c)},[o]),u=A.useMemo(()=>[...A$,...yH],[]),{storageEngine:l}=uc();return l?R.jsxs(BC,{opened:e,size:"lg",onClose:t,title:R.jsx(Ot,{size:"xl",children:"Download Tidy CSV"}),centered:!0,radius:"md",padding:"xl",children:[R.jsx(At,{children:R.jsx(yAe,{searchable:!0,limit:30,nothingFound:"Property not found",data:u,value:s,onChange:a,label:R.jsx(Ot,{fw:"bold",size:"lg",children:"Select properties to include in tidy csv:"}),placeholder:"Select atleast one property"})}),R.jsxs(Sd,{mt:"xl",direction:{base:"column",sm:"row"},gap:{base:"sm",sm:"lg"},justify:{sm:"space-around"},children:[R.jsx(wa,{leftIcon:R.jsx(SJ,{}),onClick:()=>wqt(n,l,r,i,s),children:"Download"}),R.jsx(wa,{onClick:t,color:"red",children:"Close"})]})]}):null}function Eqt({studyConfig:e}){const{storageEngine:t}=uc(),[n,{open:r,close:i}]=LT(!1),[s,o]=A.useState(),[a,u]=A.useState(""),l=e.studyMetadata.title.replace(" ","_");A.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=A.useCallback(async()=>{h2(JSON.stringify(s,null,2),`${l}_${a}.json`)},[s]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=A.useState(Math.floor(d/1e3));return A.useEffect(()=>{const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)},[h]),R.jsxs(Qm,{children:[R.jsx(wa,{leftIcon:R.jsx(szt,{}),onClick:()=>h2(JSON.stringify(s,null,2),`${l}_${a}.json`),display:"block",children:"Download Current (JSON)"}),R.jsx(wa,{disabled:!(t!=null&&t.isConnected()),leftIcon:R.jsx(I6e,{}),onClick:async()=>{if(!t)return;const m=await t.getAllParticipantsData();h2(JSON.stringify(m,null,2),`${l}_all.json`)},display:"block",children:"Download All (JSON)"}),R.jsx(wa,{disabled:!(t!=null&&t.isConnected()),leftIcon:R.jsx(SJ,{}),onClick:r,display:"block",children:"Download All (Tidy)"}),f&&R.jsxs(Ot,{size:"lg",children:["Study results will be downloaded in"," ",h," ","seconds. If the download does not start automatically, click above to download."]}),R.jsx(p4e,{opened:n,close:i,filename:`${l}_${a}.csv`,studyConfig:e})]})}function m4e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=m4e(o,t,n,r),r.includes(o.orderPath))break}return i}function g4e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=g4e(s,r)}}),n}function xqt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Sqt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=n4(),a=bv(),u=dc(),l=Y1(),[c,{close:f,open:d}]=LT(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?m4e(n,e,r,s.orderPath):-1,m=u===p;return R.jsxs(Vi,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[R.jsx(Vi.Target,{children:R.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:R.jsx(FT,{active:m,style:{lineHeight:"32px",height:"32px"},label:R.jsxs("div",{children:[i&&R.jsx(nzt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?R.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&_v.createPortal(R.jsx(Vi.Dropdown,{onMouseLeave:f,children:R.jsx(Ot,{size:"sm",children:R.jsxs("div",{children:[h.description&&R.jsxs("div",{children:[R.jsx(Ot,{fw:900,display:"inline-block",mr:2,children:"Description:"}),R.jsx(Ot,{fw:400,component:"span",children:h.description})]}),h.meta&&R.jsxs(Ot,{children:[R.jsx(Ot,{fw:"900",component:"span",children:"Task Meta: "}),R.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function y4e({configSequence:e,fullSequence:t,participantSequence:n}){let r=h1(e.components);return n&&(r=xqt(h1(e.components),h1(n.components))),R.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return R.jsx(Sqt,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?Gg(o).length-g4e(i,o):0,u=Gg(i);return R.jsx(FT,{label:R.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",R.jsxs(xb,{ml:5,children:[a,"/",u.length]}),i.interruptions&&R.jsx(xb,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),R.jsx(Ot,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?R.jsx(tzt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:R.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:R.jsx(y4e,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function v4e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>v4e(n,`${t}-${r}`))}}function Tqt(){const{showAdmin:e,sequence:t}=Ef(o=>o),n=dc(),r=oh()[n],i=Y1(),s=A.useMemo(()=>{let o=h1(i.sequence);return o=v4e(o,"root"),o.components.push("end"),o},[i.sequence]);return e||r==="end"&&i.uiConfig.autoDownloadStudy?R.jsx(NG,{p:"0",width:{base:300},style:{zIndex:0},children:R.jsxs(OSe,{p:"0",children:[r==="end"&&R.jsxs("div",{style:{padding:10,paddingBottom:15,borderBottom:"1px solid #e9ecef"},children:[R.jsx(Ot,{size:"md",p:10,weight:"bold",children:"Download"}),R.jsx(Eqt,{studyConfig:i})]}),R.jsx(Ot,{size:"md",p:10,weight:"bold",children:"Study Sequence"}),R.jsx(y4e,{configSequence:s,participantSequence:t,fullSequence:t})]})}):null}function Aqt(){const{config:e}=Ef(v=>v),t=oh(),n=Qp(),{toggleShowHelpText:r,toggleShowAdmin:i}=Xp(),{storageEngine:s}=uc(),o=dc(),a=t.length-1,u=o/a*100,[l,c]=A.useState(!1),f=e==null?void 0:e.uiConfig.logoPath,d=e==null?void 0:e.uiConfig.withProgressBar,[h]=A.useState(new URLSearchParams(window.location.search)),p=h.get("admin")||"f",m=n4(),g=zGe(`/${m}`);function y(){s==null||s.nextParticipant(e).then(()=>{window.location.href=g}).catch(v=>{console.error(v)})}return R.jsx(RG,{height:"70",p:"md",children:R.jsxs(Gu,{mt:-7,align:"center",children:[R.jsx(Gu.Col,{span:4,children:R.jsxs(Sd,{align:"center",children:[R.jsx(Sv,{maw:40,src:`${cc}${f}`,alt:"Study Logo"}),R.jsx(Q2,{w:"md"}),R.jsx(jc,{order:4,children:e==null?void 0:e.studyMetadata.title})]})}),R.jsx(Gu.Col,{span:4,children:d&&R.jsx(jAe,{radius:"md",size:"lg",value:u})}),R.jsx(Gu.Col,{span:4,children:R.jsxs(Sd,{align:"center",justify:"flex-end",children:[(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&R.jsx(wa,{variant:"outline",onClick:()=>n(r()),children:"Help"}),R.jsx(Q2,{w:"md"}),p==="t"&&R.jsxs($l,{shadow:"md",width:200,zIndex:1,opened:l,onChange:c,children:[R.jsx($l.Target,{children:R.jsx(RR,{size:"lg",children:R.jsx(ozt,{})})}),R.jsxs($l.Dropdown,{children:[R.jsx($l.Item,{icon:R.jsx(gge,{size:14}),onClick:()=>n(i()),children:"Admin Mode"}),R.jsx($l.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:R.jsx(uzt,{size:14}),children:"Contact"}),R.jsx($l.Item,{icon:R.jsx(gge,{size:14}),onClick:()=>y(),children:"Next Participant"})]})]})]})})]})})}function Cqt(){var l;const e=(l=Y1())==null?void 0:l.uiConfig.sidebar,t=Y1(),n=dc(),r=oh()[n],i=t.components[r],s=A.useMemo(()=>{var c;return i?xF(i)&&t.baseComponents?qK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i]),o=WK(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?R.jsxs(u1,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&R.jsx(u1.Section,{bg:"gray.3",p:"xl",children:R.jsxs(Ot,{c:"gray.9",children:[R.jsx(Ot,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),R.jsx(gu,{text:a})]})}),R.jsx(u1.Section,{p:"xl",children:R.jsx(zD,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):R.jsx(zD,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function Iqt(){const{showHelpText:e,config:t}=Ef(o=>o),n=Qp(),{toggleShowHelpText:r}=Xp(),[i,s]=A.useState("");return A.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${cc}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),R.jsx(BC,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:R.jsx(gu,{text:i})})}function Oqt(){const{alertModal:e}=Ef(o=>o),{setAlertModal:t}=Xp(),n=Qp(),[r,i]=A.useState(e.show),s=A.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return A.useEffect(()=>i(e.show),[e.show]),R.jsx(BC,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:R.jsxs(zxe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:R.jsx(ezt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[R.jsx(Ot,{my:"md",children:e.message}),R.jsx(At,{style:{float:"right"},color:"red",children:R.jsx(wa,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function Pqt(){const e=A.useRef([]),n=Y1().uiConfig.windowEventDebounceTime??100;return A.useEffect(()=>{const r=jf(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=jf(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=jf(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=jf(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=jf(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=jf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=jf(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=jf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=jf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),R.jsx(Nke.Provider,{value:e,children:R.jsxs(DG,{navbar:R.jsx(Cqt,{}),aside:R.jsx(Tqt,{}),header:R.jsx(Aqt,{}),children:[R.jsx(Iqt,{}),R.jsx(Oqt,{}),R.jsx(ZGe,{})]})})}function kqt(e,t=!1){return typeof e=="number"?Bge(e,t):Bge(e.length,t).map(r=>r.map(i=>e[i]))}function Bge(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function _4e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_orderObj")?e.components[+i.slice(9)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=_4e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{orderPath:n,components:r.flat()}}function $qt(e,t){const n=h1(e);return _4e(n,t,"root")}function b4e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&b4e(s,t,i,o)})}function Rqt(e){const t=[];return b4e(e,t,"",0),t}function jge(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_orderObj${a}`);return kqt(i.sort(()=>.5-Math.random()),!0)}function Nqt(e){const n=Rqt(e.sequence).map(s=>({[s]:jge(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=$qt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=jge(e,o))})}),i}async function Dqt(e,t){const n=await(await fetch(`${cc}${e}`)).text();return d4e(n,t)}async function w4e(e,t){const n=t.configsList.find(r=>oY(r)===e);if(n){const r=t.configs[n];return await Dqt(`${r.path}`,n)}return null}function Lqt({globalConfig:e}){const t=n4();if(!t||!e.configsList.find(f=>oY(f)))throw new Error("Study id invalid");const[n,r]=A.useState(null);A.useEffect(()=>{w4e(t,e).then(f=>{r(f)})},[e,t]);const[i,s]=A.useState([]),[o,a]=A.useState(null),{storageEngine:u}=uc(),[l]=bG();A.useEffect(()=>{async function f(){if(!u||!n||!t)return;await u.initializeStudyDb(t,n),await u.getSequenceArray()||await u.setSequenceArray(await Nqt(n));const h=n.uiConfig.urlParticipantIdParam&&l.get(n.uiConfig.urlParticipantIdParam)||void 0,p=Object.fromEntries(l.entries()),m=await u.initializeParticipantSession(p,n,h),g=await cEt(t,n,m.sequence,m.answers);a(g),s([{element:R.jsx(Pqt,{}),children:[{path:"/",element:R.jsx(_qt,{to:"0",replace:!0})},{path:"/:index",element:R.jsx(vqt,{})}]}])}f()},[u,n,t,l]);const c=xEe(i);return!c||!o?R.jsx(At,{style:{height:"100vh"},children:R.jsx(Ug,{style:{height:"100%"},children:R.jsx(C0,{style:{height:"100%"},size:60})})}):R.jsx(Rke.Provider,{value:o,children:R.jsx(owt,{store:o.store,children:c})})}function Mqt(){return R.jsx(RG,{height:"70",p:"md",children:R.jsx(Gu,{mt:-7,align:"center",children:R.jsx(Gu.Col,{span:4,children:R.jsxs(Sd,{align:"center",children:[R.jsx(Sv,{maw:40,src:`${cc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsx(Q2,{w:"md"}),R.jsx(jc,{order:4,children:"ReVISit Analytics Platform"})]})})})})}function Fqt(){const e=bv(),{page:t}=VM();return R.jsx(u1,{width:{base:300},style:{zIndex:0},children:R.jsxs(u1.Section,{p:"xl",children:[R.jsx(FT,{active:t==="dashboard",onClick:()=>e("/analysis/dashboard"),label:R.jsx(Ot,{fz:"lg",children:"Dashboard"}),icon:R.jsx(azt,{color:"#4287f5"}),rightSection:R.jsx(gj,{size:"0.8rem",stroke:1.5})}),R.jsx(FT,{active:t==="browser",onClick:()=>e("/analysis/browser"),label:R.jsx(Ot,{fz:"lg",children:"Browser"}),icon:R.jsx(izt,{color:"#4287f5"}),rightSection:R.jsx(gj,{size:"0.8rem",stroke:1.5})}),R.jsx(FT,{active:t==="about",onClick:()=>e("/analysis/about"),label:R.jsx(Ot,{fz:"lg",children:"About"}),icon:R.jsx(lzt,{color:"#4287f5"}),rightSection:R.jsx(gj,{size:"0.8rem",stroke:1.5})})]})})}function Bqt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function E4e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function jqt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=Bqt(i,t),o=E4e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var x4e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(iu,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var D=["th","st","nd","rd"],B=$%100;return"["+$+(D[(B-20)%10]||D[B]||D[0])+"]"}},_=function($,D,B){var V=String($);return!V||V.length>=D?$:""+Array(D+1-V.length).join(B)+$},b={s:_,z:function($){var D=-$.utcOffset(),B=Math.abs(D),V=Math.floor(B/60),j=B%60;return(D<=0?"+":"-")+_(V,2,"0")+":"+_(j,2,"0")},m:function $(D,B){if(D.date()<B.date())return-$(B,D);var V=12*(B.year()-D.year())+(B.month()-D.month()),j=D.clone().add(V,f),G=B-j<0,U=D.clone().add(V+(G?-1:1),f);return+(-(V+(B-j)/(G?j-U:U-j))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",w={};w[E]=v;var x="$isDayjsObject",S=function($){return $ instanceof z||!(!$||!$[x])},I=function $(D,B,V){var j;if(!D)return E;if(typeof D=="string"){var G=D.toLowerCase();w[G]&&(j=G),B&&(w[G]=B,j=G);var U=D.split("-");if(!j&&U.length>1)return $(U[0])}else{var P=D.name;w[P]=D,j=P}return!V&&j&&(E=j),j||!V&&E},C=function($,D){if(S($))return $.clone();var B=typeof D=="object"?D:{};return B.date=$,B.args=arguments,new z(B)},O=b;O.l=I,O.i=S,O.w=function($,D){return C($,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var z=function(){function $(B){this.$L=I(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[x]=!0}var D=$.prototype;return D.parse=function(B){this.$d=function(V){var j=V.date,G=V.utc;if(j===null)return new Date(NaN);if(O.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var U=j.match(g);if(U){var P=U[2]-1||0,k=(U[7]||"0").substring(0,3);return G?new Date(Date.UTC(U[1],P,U[3]||1,U[4]||0,U[5]||0,U[6]||0,k)):new Date(U[1],P,U[3]||1,U[4]||0,U[5]||0,U[6]||0,k)}}return new Date(j)}(B),this.init()},D.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},D.$utils=function(){return O},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(B,V){var j=C(B);return this.startOf(V)<=j&&j<=this.endOf(V)},D.isAfter=function(B,V){return C(B)<this.startOf(V)},D.isBefore=function(B,V){return this.endOf(V)<C(B)},D.$g=function(B,V,j){return O.u(B)?this[V]:this.set(j,B)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(B,V){var j=this,G=!!O.u(V)||V,U=O.p(B),P=function(ce,le){var ge=O.w(j.$u?Date.UTC(j.$y,le,ce):new Date(j.$y,le,ce),j);return G?ge:ge.endOf(l)},k=function(ce,le){return O.w(j.toDate()[ce].apply(j.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(le)),j)},H=this.$W,M=this.$M,F=this.$D,J="set"+(this.$u?"UTC":"");switch(U){case h:return G?P(1,0):P(31,11);case f:return G?P(1,M):P(0,M+1);case c:var se=this.$locale().weekStart||0,ae=(H<se?H+7:H)-se;return P(G?F-ae:F+(6-ae),M);case l:case p:return k(J+"Hours",0);case u:return k(J+"Minutes",1);case a:return k(J+"Seconds",2);case o:return k(J+"Milliseconds",3);default:return this.clone()}},D.endOf=function(B){return this.startOf(B,!1)},D.$set=function(B,V){var j,G=O.p(B),U="set"+(this.$u?"UTC":""),P=(j={},j[l]=U+"Date",j[p]=U+"Date",j[f]=U+"Month",j[h]=U+"FullYear",j[u]=U+"Hours",j[a]=U+"Minutes",j[o]=U+"Seconds",j[s]=U+"Milliseconds",j)[G],k=G===l?this.$D+(V-this.$W):V;if(G===f||G===h){var H=this.clone().set(p,1);H.$d[P](k),H.init(),this.$d=H.set(p,Math.min(this.$D,H.daysInMonth())).$d}else P&&this.$d[P](k);return this.init(),this},D.set=function(B,V){return this.clone().$set(B,V)},D.get=function(B){return this[O.p(B)]()},D.add=function(B,V){var j,G=this;B=Number(B);var U=O.p(V),P=function(M){var F=C(G);return O.w(F.date(F.date()+Math.round(M*B)),G)};if(U===f)return this.set(f,this.$M+B);if(U===h)return this.set(h,this.$y+B);if(U===l)return P(1);if(U===c)return P(7);var k=(j={},j[a]=r,j[u]=i,j[o]=n,j)[U]||1,H=this.$d.getTime()+B*k;return O.w(H,this)},D.subtract=function(B,V){return this.add(-1*B,V)},D.format=function(B){var V=this,j=this.$locale();if(!this.isValid())return j.invalidDate||m;var G=B||"YYYY-MM-DDTHH:mm:ssZ",U=O.z(this),P=this.$H,k=this.$m,H=this.$M,M=j.weekdays,F=j.months,J=j.meridiem,se=function(le,ge,ue,Fe){return le&&(le[ge]||le(V,G))||ue[ge].slice(0,Fe)},ae=function(le){return O.s(P%12||12,le,"0")},ce=J||function(le,ge,ue){var Fe=le<12?"AM":"PM";return ue?Fe.toLowerCase():Fe};return G.replace(y,function(le,ge){return ge||function(ue){switch(ue){case"YY":return String(V.$y).slice(-2);case"YYYY":return O.s(V.$y,4,"0");case"M":return H+1;case"MM":return O.s(H+1,2,"0");case"MMM":return se(j.monthsShort,H,F,3);case"MMMM":return se(F,H);case"D":return V.$D;case"DD":return O.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return se(j.weekdaysMin,V.$W,M,2);case"ddd":return se(j.weekdaysShort,V.$W,M,3);case"dddd":return M[V.$W];case"H":return String(P);case"HH":return O.s(P,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return ce(P,k,!0);case"A":return ce(P,k,!1);case"m":return String(k);case"mm":return O.s(k,2,"0");case"s":return String(V.$s);case"ss":return O.s(V.$s,2,"0");case"SSS":return O.s(V.$ms,3,"0");case"Z":return U}return null}(le)||U.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(B,V,j){var G,U=this,P=O.p(V),k=C(B),H=(k.utcOffset()-this.utcOffset())*r,M=this-k,F=function(){return O.m(U,k)};switch(P){case h:G=F()/12;break;case f:G=F();break;case d:G=F()/3;break;case c:G=(M-H)/6048e5;break;case l:G=(M-H)/864e5;break;case u:G=M/i;break;case a:G=M/r;break;case o:G=M/n;break;default:G=M}return j?G:O.a(G)},D.daysInMonth=function(){return this.endOf(f).$D},D.$locale=function(){return w[this.$L]},D.locale=function(B,V){if(!B)return this.$L;var j=this.clone(),G=I(B,V,!0);return G&&(j.$L=G),j},D.clone=function(){return O.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},$}(),N=z.prototype;return C.prototype=N,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){N[$[1]]=function(D){return this.$g(D,$[0],$[1])}}),C.extend=function($,D){return $.$i||($(D,z,C),$.$i=!0),C},C.locale=I,C.isDayjs=S,C.unix=function($){return C(1e3*$)},C.en=w[E],C.Ls=w,C.p={},C})})(x4e);var zqt=x4e.exports;const xn=pl(zqt);function Uqt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(xn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function Vqt(e,t="monday",n="dd"){const r=[],i=E4e(new Date,t);for(let s=0;s<7;s+=1)r.push(xn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function S4e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Up(e,t){return S4e(e,t)&&e.getDate()===t.getDate()}function Hqt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var qqt=Object.defineProperty,Wqt=Object.defineProperties,Gqt=Object.getOwnPropertyDescriptors,U3=Object.getOwnPropertySymbols,T4e=Object.prototype.hasOwnProperty,A4e=Object.prototype.propertyIsEnumerable,zge=(e,t,n)=>t in e?qqt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uge=(e,t)=>{for(var n in t||(t={}))T4e.call(t,n)&&zge(e,n,t[n]);if(U3)for(var n of U3(t))A4e.call(t,n)&&zge(e,n,t[n]);return e},Yqt=(e,t)=>Wqt(e,Gqt(t)),Kqt=(e,t)=>{var n={};for(var r in e)T4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&U3)for(var r of U3(e))t.indexOf(r)<0&&A4e.call(e,r)&&(n[r]=e[r]);return n};function vH(e){var t=e,{direction:n,style:r}=t,i=Kqt(t,["direction","style"]);const s=as();return L.createElement("svg",Uge({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Yqt(Uge({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),L.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}vH.displayName="@mantine/dates/ArrowIcon";var Xqt=Object.defineProperty,Qqt=Object.defineProperties,Jqt=Object.getOwnPropertyDescriptors,Vge=Object.getOwnPropertySymbols,Zqt=Object.prototype.hasOwnProperty,eWt=Object.prototype.propertyIsEnumerable,Hge=(e,t,n)=>t in e?Xqt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tWt=(e,t)=>{for(var n in t||(t={}))Zqt.call(t,n)&&Hge(e,n,t[n]);if(Vge)for(var n of Vge(t))eWt.call(t,n)&&Hge(e,n,t[n]);return e},nWt=(e,t)=>Qqt(e,Jqt(t));const Ej={xs:32,sm:40,md:44,lg:50,xl:54};var rWt=ht((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:Ej}),height:e.fn.size({size:t,sizes:Ej}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:nWt(tWt({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:Ej}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),iWt=Object.defineProperty,V3=Object.getOwnPropertySymbols,C4e=Object.prototype.hasOwnProperty,I4e=Object.prototype.propertyIsEnumerable,qge=(e,t,n)=>t in e?iWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sWt=(e,t)=>{for(var n in t||(t={}))C4e.call(t,n)&&qge(e,n,t[n]);if(V3)for(var n of V3(t))I4e.call(t,n)&&qge(e,n,t[n]);return e},oWt=(e,t)=>{var n={};for(var r in e)C4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&V3)for(var r of V3(e))t.indexOf(r)<0&&I4e.call(e,r)&&(n[r]=e[r]);return n};const aWt={xs:12,sm:14,md:18,lg:22,xl:28};function SF(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,b=oWt(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:E,cx:w,theme:x}=rWt({size:c},{classNames:f,styles:d,unstyled:v,name:h}),S=x.fn.size({size:c,sizes:aWt});return L.createElement("div",sWt({className:w(E.calendarHeader,a)},b),L.createElement(RR,{className:E.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:I=>y&&I.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},L.createElement(vH,{direction:"left",width:S,height:S})),L.createElement(Bg,{unstyled:v,className:E.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:I=>y&&I.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&L.createElement(cAe,{error:!1,size:c,className:E.calendarHeaderLevelIcon})),L.createElement(RR,{className:E.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:I=>y&&I.preventDefault(),"data-mantine-stop-propagation":_||void 0},L.createElement(vH,{direction:"right",width:S,height:S})))}SF.displayName="@mantine/dates/CalendarHeader";function C$(e,t){return xn(new Date(e,1,1)).format(t)}var uWt=Object.defineProperty,lWt=Object.defineProperties,cWt=Object.getOwnPropertyDescriptors,Wge=Object.getOwnPropertySymbols,fWt=Object.prototype.hasOwnProperty,dWt=Object.prototype.propertyIsEnumerable,Gge=(e,t,n)=>t in e?uWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xj=(e,t)=>{for(var n in t||(t={}))fWt.call(t,n)&&Gge(e,n,t[n]);if(Wge)for(var n of Wge(t))dWt.call(t,n)&&Gge(e,n,t[n]);return e},hWt=(e,t)=>lWt(e,cWt(t));const pWt={xs:32,sm:40,md:46,lg:52,xl:56};var mWt=ht((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:hWt(xj({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:pWt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":xj({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:xj({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),gWt=Object.defineProperty,H3=Object.getOwnPropertySymbols,O4e=Object.prototype.hasOwnProperty,P4e=Object.prototype.propertyIsEnumerable,Yge=(e,t,n)=>t in e?gWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yWt=(e,t)=>{for(var n in t||(t={}))O4e.call(t,n)&&Yge(e,n,t[n]);if(H3)for(var n of H3(t))P4e.call(t,n)&&Yge(e,n,t[n]);return e},vWt=(e,t)=>{var n={};for(var r in e)O4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&H3)for(var r of H3(e))t.indexOf(r)<0&&P4e.call(e,r)&&(n[r]=e[r]);return n};function k4e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=vWt(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=mWt({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[b,E]=A.useState(s),w=Hqt(b),x=w.map(S=>L.createElement(Bg,{key:S,unstyled:p,onClick:()=>o(S),disabled:S<u||S>l,onMouseDown:I=>h&&I.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:S===s})},C$(S,m)));return L.createElement("div",yWt({className:_(v.yearPicker,n)},y),L.createElement(SF,{unstyled:p,label:`${C$(w[0],m)}  ${C$(w[w.length-1],m)}`,hasPrevious:typeof u=="number"?u<w[0]:!0,hasNext:typeof l=="number"?l>w[w.length-1]:!0,onNext:()=>E(S=>S+10),onPrevious:()=>E(S=>S-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),L.createElement("div",{className:v.yearPickerControls},x))}k4e.displayName="@mantine/dates/YearPicker";function _H({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=xn(e).endOf("month"),o=xn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var _Wt=Object.defineProperty,bWt=Object.defineProperties,wWt=Object.getOwnPropertyDescriptors,Kge=Object.getOwnPropertySymbols,EWt=Object.prototype.hasOwnProperty,xWt=Object.prototype.propertyIsEnumerable,Xge=(e,t,n)=>t in e?_Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sj=(e,t)=>{for(var n in t||(t={}))EWt.call(t,n)&&Xge(e,n,t[n]);if(Kge)for(var n of Kge(t))xWt.call(t,n)&&Xge(e,n,t[n]);return e},SWt=(e,t)=>bWt(e,wWt(t));const TWt={xs:32,sm:40,md:46,lg:52,xl:56};var AWt=ht((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:SWt(Sj({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:TWt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":Sj({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:Sj({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),CWt=Object.defineProperty,q3=Object.getOwnPropertySymbols,$4e=Object.prototype.hasOwnProperty,R4e=Object.prototype.propertyIsEnumerable,Qge=(e,t,n)=>t in e?CWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IWt=(e,t)=>{for(var n in t||(t={}))$4e.call(t,n)&&Qge(e,n,t[n]);if(q3)for(var n of q3(t))R4e.call(t,n)&&Qge(e,n,t[n]);return e},OWt=(e,t)=>{var n={};for(var r in e)$4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&q3)for(var r of q3(e))t.indexOf(r)<0&&R4e.call(e,r)&&(n[r]=e[r]);return n};function N4e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:b}=t,E=OWt(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:w,cx:x}=AWt({size:f},{classNames:i,styles:r,unstyled:v,name:p}),S=Uqt(a),I=d instanceof Date?d.getFullYear():void 0,C=h instanceof Date?h.getFullYear():void 0,O=S.map((z,N)=>L.createElement(Bg,{key:z,unstyled:v,onClick:()=>o(N),className:x(w.monthPickerControl,{[w.monthPickerControlActive]:N===s.month&&u===s.year}),disabled:!_H({date:new Date(u,N),minDate:d,maxDate:h}),onMouseDown:$=>y&&$.preventDefault(),"data-mantine-stop-propagation":b||void 0},z));return L.createElement("div",IWt({className:x(w.monthPicker,n)},E),L.createElement(SF,{label:C$(u,_),hasNext:typeof C=="number"?u<C:!0,hasPrevious:typeof I=="number"?u>I:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:b}),L.createElement("div",{className:w.monthPickerControls},O))}N4e.displayName="@mantine/dates/MonthPicker";function PWt({month:e,locale:t,format:n}){return Xm(xn(e).locale(t).format(n))}function kWt({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function $Wt({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var RWt=Object.defineProperty,NWt=Object.defineProperties,DWt=Object.getOwnPropertyDescriptors,Jge=Object.getOwnPropertySymbols,LWt=Object.prototype.hasOwnProperty,MWt=Object.prototype.propertyIsEnumerable,Zge=(e,t,n)=>t in e?RWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tj=(e,t)=>{for(var n in t||(t={}))LWt.call(t,n)&&Zge(e,n,t[n]);if(Jge)for(var n of Jge(t))MWt.call(t,n)&&Zge(e,n,t[n]);return e},e0e=(e,t)=>NWt(e,DWt(t));const I$={xs:34,sm:38,md:46,lg:58,xl:66};var FWt=ht((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:e0e(Tj(e0e(Tj(Tj({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:I$}),height:e.fn.size({size:t,sizes:I$}),lineHeight:`${e.fn.size({size:t,sizes:I$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),BWt=Object.defineProperty,jWt=Object.defineProperties,zWt=Object.getOwnPropertyDescriptors,W3=Object.getOwnPropertySymbols,D4e=Object.prototype.hasOwnProperty,L4e=Object.prototype.propertyIsEnumerable,t0e=(e,t,n)=>t in e?BWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UWt=(e,t)=>{for(var n in t||(t={}))D4e.call(t,n)&&t0e(e,n,t[n]);if(W3)for(var n of W3(t))L4e.call(t,n)&&t0e(e,n,t[n]);return e},VWt=(e,t)=>jWt(e,zWt(t)),HWt=(e,t)=>{var n={};for(var r in e)D4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&W3)for(var r of W3(e))t.indexOf(r)<0&&L4e.call(e,r)&&(n[r]=e[r]);return n};const M4e=A.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:b,renderDay:E,unstyled:w,disabled:x,stopPropagation:S}=n,I=HWt(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:C,cx:O}=FWt({size:g,fullWidth:y,hideOutsideDates:b},{classNames:l,styles:c,unstyled:w,name:p});return L.createElement("button",VWt(UWt({},I),{type:"button",ref:t,disabled:x,onMouseEnter:z=>u(i,z),tabIndex:kWt({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":$Wt({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":S||void 0,"data-outside":a&&!x||void 0,"data-weekend":o&&!x||void 0,"data-selected":s&&!x||void 0,"data-in-range":m&&!x||void 0,"data-first-in-range":d&&!x||void 0,"data-last-in-range":h&&!x||void 0,className:O(C.day,r)}),typeof E=="function"?E(i):i.getDate())});M4e.displayName="@mantine/core/Day";function qWt(e,t=[0,6]){return t.includes(e.getDay())}function WWt(e,t){return!S4e(e,t)}function GWt({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&xn(t).isBefore(i,"day"),a=e instanceof Date&&xn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function YWt(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[xn(t[0]).subtract(1,"day"),xn(t[1]).add(1,"day")],i=n&&Up(e,t[0]),s=n&&Up(e,t[1]),o=n&&xn(e).isAfter(r[0],"day")&&xn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function n0e({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=WWt(e,t),f=n&&(Array.isArray(s)?s.some(g=>Up(g,e)):Up(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=YWt(e,u);return{disabled:GWt({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:qWt(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var KWt=Object.defineProperty,XWt=Object.defineProperties,QWt=Object.getOwnPropertyDescriptors,r0e=Object.getOwnPropertySymbols,JWt=Object.prototype.hasOwnProperty,ZWt=Object.prototype.propertyIsEnumerable,i0e=(e,t,n)=>t in e?KWt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eGt=(e,t)=>{for(var n in t||(t={}))JWt.call(t,n)&&i0e(e,n,t[n]);if(r0e)for(var n of r0e(t))ZWt.call(t,n)&&i0e(e,n,t[n]);return e},tGt=(e,t)=>XWt(e,QWt(t)),nGt=ht((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:tGt(eGt({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),rGt=Object.defineProperty,G3=Object.getOwnPropertySymbols,F4e=Object.prototype.hasOwnProperty,B4e=Object.prototype.propertyIsEnumerable,s0e=(e,t,n)=>t in e?rGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iGt=(e,t)=>{for(var n in t||(t={}))F4e.call(t,n)&&s0e(e,n,t[n]);if(G3)for(var n of G3(t))B4e.call(t,n)&&s0e(e,n,t[n]);return e},sGt=(e,t)=>{var n={};for(var r in e)F4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&G3)for(var r of G3(e))t.indexOf(r)<0&&B4e.call(e,r)&&(n[r]=e[r]);return n};const XP=()=>!1,oGt={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},j4e=A.forwardRef((e,t)=>{const n=Ct("Month",oGt,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:b,fullWidth:E,preventFocus:w,focusable:x,firstDayOfWeek:S,onDayKeyDown:I,daysRefs:C,hideOutsideDates:O,isDateInRange:z=XP,isDateFirstInRange:N=XP,isDateLastInRange:$=XP,renderDay:D,weekdayLabelFormat:B,unstyled:V,weekendDays:j,__stopPropagation:G}=n,U=sGt(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:P,cx:k,theme:H}=nGt({fullWidth:E},{classNames:f,styles:d,unstyled:V,name:_}),M=u||H.datesLocale,F=jqt(i,S),J=Vqt(M,S,B).map(ge=>L.createElement("th",{className:P.weekdayCell,key:ge},L.createElement(Ot,{size:b,className:P.weekday},ge.length>=2?Xm(ge):ge))),se=Array.isArray(s)?s.every(ge=>ge instanceof Date):s instanceof Date,ae=s instanceof Date&&xn(s).isAfter(xn(i).startOf("month"))&&xn(s).isBefore(xn(i).endOf("month")),ce=A.useMemo(()=>F.flatMap(ge=>ge).find(ge=>{const ue=n0e({date:ge,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j});return!ue.disabled&&!ue.outside})||xn(i).startOf("month").toDate(),[]),le=F.map((ge,ue)=>{const Fe=ge.map((ke,Ge)=>{const Re=n0e({date:ke,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j}),Oe={rowIndex:ue,cellIndex:Ge,date:ke};return L.createElement("td",{className:P.cell,key:Ge},L.createElement(M4e,{unstyled:V,ref:Le=>{C&&(Array.isArray(C[ue])||(C[ue]=[]),C[ue][Ge]=Le)},onClick:()=>typeof o=="function"&&o(ke),onMouseDown:Le=>w&&Le.preventDefault(),value:ke,outside:Re.outside,weekend:Re.weekend,inRange:Re.inRange||z(ke,Re),firstInRange:Re.firstInRange||N(ke,Re),lastInRange:Re.lastInRange||$(ke,Re),firstInMonth:Up(ke,ce),selected:Re.selected||Re.selectedInRange,hasValue:ae,onKeyDown:Le=>typeof I=="function"&&I(Oe,Le),className:typeof l=="function"?l(ke,Re):null,style:typeof c=="function"?c(ke,Re):null,disabled:Re.disabled,onMouseEnter:typeof g=="function"?g:XP,size:b,fullWidth:E,focusable:x,hideOutsideDates:O,__staticSelector:_,styles:d,classNames:f,renderDay:D,stopPropagation:G}))});return L.createElement("tr",{key:ue},Fe)});return L.createElement(At,iGt({component:"table",className:k(P.month,r),ref:t},U),!v&&L.createElement("thead",null,L.createElement("tr",null,J)),L.createElement("tbody",null,le))});j4e.displayName="@mantine/dates/Month";var aGt=Object.defineProperty,Y3=Object.getOwnPropertySymbols,z4e=Object.prototype.hasOwnProperty,U4e=Object.prototype.propertyIsEnumerable,o0e=(e,t,n)=>t in e?aGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uGt=(e,t)=>{for(var n in t||(t={}))z4e.call(t,n)&&o0e(e,n,t[n]);if(Y3)for(var n of Y3(t))U4e.call(t,n)&&o0e(e,n,t[n]);return e},lGt=(e,t)=>{var n={};for(var r in e)z4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Y3)for(var r of Y3(e))t.indexOf(r)<0&&U4e.call(e,r)&&(n[r]=e[r]);return n};function V4e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:b,preventFocus:E,renderDay:w,unstyled:x,__stopPropagation:S}=t,I=lGt(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const C=xn(i).add(n,"months").toDate(),O=xn(i).subtract(1,"months").toDate(),z=Array(n).fill(0).map((N,$)=>{const D=xn(i).add($,"months").toDate();return L.createElement("div",{key:$},L.createElement(SF,{hasNext:$+1===n&&_H({date:C,minDate:o,maxDate:a}),hasPrevious:$===0&&_H({date:O,minDate:o,maxDate:a}),label:PWt({month:D,locale:s,format:_}),onNext:()=>f(xn(i).add(r,"months").toDate()),onPrevious:()=>f(xn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:$>0,preventFocus:E,unstyled:x,__stopPropagation:S}),L.createElement(j4e,uGt({month:D,daysRefs:c.current[$],onDayKeyDown:(...B)=>h($,...B),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:$===0,preventFocus:E,renderDay:w,weekdayLabelFormat:b,unstyled:x,__stopPropagation:S},I)))});return L.createElement(L.Fragment,null,z)}V4e.displayName="@mantine/dates/MonthsList";var cGt=ht((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:I$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),fGt=Object.defineProperty,K3=Object.getOwnPropertySymbols,H4e=Object.prototype.hasOwnProperty,q4e=Object.prototype.propertyIsEnumerable,a0e=(e,t,n)=>t in e?fGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dGt=(e,t)=>{for(var n in t||(t={}))H4e.call(t,n)&&a0e(e,n,t[n]);if(K3)for(var n of K3(t))q4e.call(t,n)&&a0e(e,n,t[n]);return e},hGt=(e,t)=>{var n={};for(var r in e)H4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&K3)for(var r of K3(e))t.indexOf(r)<0&&q4e.call(e,r)&&(n[r]=e[r]);return n};const lZ=A.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:I="monday",value:C,onChange:O,onDayMouseEnter:z,range:N,nextDecadeLabel:$,nextMonthLabel:D,nextYearLabel:B,previousDecadeLabel:V,previousMonthLabel:j,previousYearLabel:G,labelFormat:U="MMMM YYYY",weekdayLabelFormat:P,hideOutsideDates:k,isDateInRange:H,isDateFirstInRange:M,isDateLastInRange:F,renderDay:J,unstyled:se,weekendDays:ae,__stopPropagation:ce,yearLabelFormat:le="YYYY"}=n,ge=hGt(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ue,Fe]=A.useState(p),{classes:ke,cx:Ge,theme:Re}=cGt({size:d,fullWidth:x,amountOfMonths:ue==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:se}),Oe=l||Re.datesLocale,Le=A.useRef(Array(c).fill(0).map(()=>[])),[Ut,Qe]=Aa({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[je,bt]=A.useState(Ut.getFullYear()),et=m instanceof Date?m.getFullYear():100,ut=g instanceof Date?g.getFullYear():1e4,lt=6,jt=(he,_e,Pe,it=1)=>{var Ye;const at=["down","up"].includes(he),tt=at?Pe.rowIndex+(he==="down"?it:-it):Pe.rowIndex,vt=at?Pe.cellIndex:Pe.cellIndex+(he==="right"?it:-it),In=(Ye=Le.current[_e][tt])==null?void 0:Ye[vt];In&&(In.disabled?jt(he,_e,Pe,it+1):In.focus())},Dn=(he,_e,Pe)=>{var it;switch(Pe.key){case"ArrowDown":{Pe.preventDefault(),_e.rowIndex+1<Le.current[he].length&&jt("down",he,_e);break}case"ArrowUp":{Pe.preventDefault(),_e.rowIndex>0&&jt("up",he,_e);break}case"ArrowRight":{Pe.preventDefault(),_e.cellIndex!==lt?jt("right",he,_e):he+1<c&&Le.current[he+1][_e.rowIndex]&&((it=Le.current[he+1][_e.rowIndex][0])==null||it.focus());break}case"ArrowLeft":Pe.preventDefault(),_e.cellIndex!==0?jt("left",he,_e):he>0&&Le.current[he-1][_e.rowIndex]&&Le.current[he-1][_e.rowIndex][lt].focus()}};return L.createElement(At,dGt({className:Ge(ke.calendarBase,r),ref:t},ge),ue==="year"&&L.createElement(k4e,{size:d,value:je,minYear:et,maxYear:ut,onChange:he=>{bt(he),Fe("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextDecadeLabel:$,previousDecadeLabel:V,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="month"&&L.createElement(N4e,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:je,onYearChange:bt,onNextLevel:()=>Fe("year"),locale:Oe,minDate:m,maxDate:g,onChange:he=>{Qe(new Date(je,he,1)),Fe("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextYearLabel:B,previousYearLabel:G,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="date"&&L.createElement(V4e,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Oe,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Le,onMonthChange:Qe,onNextLevel:()=>Fe("month"),onDayKeyDown:Dn,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:I,value:C,range:N,onChange:O,nextMonthLabel:D,previousMonthLabel:j,labelFormat:U,weekdayLabelFormat:P,onDayMouseEnter:z,renderDay:J,hideOutsideDates:k,isDateInRange:H,isDateFirstInRange:M,isDateLastInRange:F,unstyled:se,weekendDays:ae,__stopPropagation:ce}))});lZ.displayName="@mantine/dates/CalendarBase";var pGt=Object.defineProperty,X3=Object.getOwnPropertySymbols,W4e=Object.prototype.hasOwnProperty,G4e=Object.prototype.propertyIsEnumerable,u0e=(e,t,n)=>t in e?pGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mGt=(e,t)=>{for(var n in t||(t={}))W4e.call(t,n)&&u0e(e,n,t[n]);if(X3)for(var n of X3(t))G4e.call(t,n)&&u0e(e,n,t[n]);return e},gGt=(e,t)=>{var n={};for(var r in e)W4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&X3)for(var r of X3(e))t.indexOf(r)<0&&G4e.call(e,r)&&(n[r]=e[r]);return n};const yGt={__staticSelector:"Calendar"};function Y4e(e){const t=Ct("Calendar",yGt,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=gGt(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Up(c,u));return s(l?i.filter(c=>!Up(c,u)):[...i,u])};return L.createElement(lZ,mGt({__staticSelector:n,onChange:a,value:i},o))}Y4e.displayName="@mantine/dates/Calendar";var vGt=Object.defineProperty,_Gt=Object.defineProperties,bGt=Object.getOwnPropertyDescriptors,l0e=Object.getOwnPropertySymbols,wGt=Object.prototype.hasOwnProperty,EGt=Object.prototype.propertyIsEnumerable,c0e=(e,t,n)=>t in e?vGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xGt=(e,t)=>{for(var n in t||(t={}))wGt.call(t,n)&&c0e(e,n,t[n]);if(l0e)for(var n of l0e(t))EGt.call(t,n)&&c0e(e,n,t[n]);return e},SGt=(e,t)=>_Gt(e,bGt(t)),TGt=ht(e=>({wrapper:SGt(xGt({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),AGt=Object.defineProperty,CGt=Object.defineProperties,IGt=Object.getOwnPropertyDescriptors,Q3=Object.getOwnPropertySymbols,K4e=Object.prototype.hasOwnProperty,X4e=Object.prototype.propertyIsEnumerable,f0e=(e,t,n)=>t in e?AGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pS=(e,t)=>{for(var n in t||(t={}))K4e.call(t,n)&&f0e(e,n,t[n]);if(Q3)for(var n of Q3(t))X4e.call(t,n)&&f0e(e,n,t[n]);return e},d0e=(e,t)=>CGt(e,IGt(t)),OGt=(e,t)=>{var n={};for(var r in e)K4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Q3)for(var r of Q3(e))t.indexOf(r)<0&&X4e.call(e,r)&&(n[r]=e[r]);return n};const PGt={xs:24,sm:30,md:34,lg:40,xl:44},kGt={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},cZ=A.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=kGt,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:b,inputLabel:E,__staticSelector:w="DatePickerBase",dropdownOpened:x,setDropdownOpened:S,dropdownType:I="popover",dropdownPosition:C="flip",clearable:O=!0,clearButtonLabel:z,onClear:N,positionDependencies:$=[],zIndex:D,withinPortal:B=!1,onBlur:V,onFocus:j,onChange:G,onKeyDown:U,name:P="date",sx:k,amountOfMonths:H=1,onDropdownClose:M,onDropdownOpen:F,clickOutsideEvents:J=["mousedown","touchstart"],modalZIndex:se,errorProps:ae,labelProps:ce,descriptionProps:le,clearButtonTabIndex:ge=0,unstyled:ue,inputContainer:Fe,inputWrapperOrder:ke,modalProps:Ge,withAsterisk:Re}=n,Oe=OGt(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Le,cx:Ut,theme:Qe}=TGt(null,{classNames:r,styles:o,unstyled:ue,name:w}),{systemStyles:je,rest:bt}=wf(Oe),et=vl(d),ut=A.useRef(),lt=()=>{S(!1),M==null||M()},jt=()=>{S(!0),F==null||F()},Dn=()=>{S(!x),x?M==null||M():F==null||F()},he=at=>{at.key==="Escape"&&(lt(),window.setTimeout(()=>{var tt;return(tt=ut.current)==null?void 0:tt.focus()},0))},_e=O?L.createElement(wv,{variant:"transparent","aria-label":z,onClick:N,size:_,tabIndex:ge,unstyled:ue}):null,Pe=at=>{typeof V=="function"&&V(at),l&&lt()},it=at=>{typeof j=="function"&&j(at),l&&jt()},Ye=at=>{typeof U=="function"&&U(at),(at.key==="Space"||at.key==="Enter")&&!l&&(at.preventDefault(),jt())};return L.createElement(is.Wrapper,pS(pS({required:u,id:et,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:w,sx:k,errorProps:ae,descriptionProps:le,labelProps:ce,inputContainer:Fe,inputWrapperOrder:ke,unstyled:ue,withAsterisk:Re},je),a),L.createElement(Vi,{__staticSelector:w,withinPortal:B,offset:10,opened:x,transitionDuration:y,transition:g,positionDependencies:$,middlewares:{flip:C==="flip",shift:!1},position:C==="flip"?"bottom-start":C,shadow:m,onClose:lt,trapFocus:!l,withRoles:!1,clickOutsideEvents:J,zIndex:D,classNames:r,styles:o,unstyled:ue},L.createElement(Vi.Target,null,L.createElement("div",{className:Le.wrapper},L.createElement(is,pS({classNames:d0e(pS({},r),{input:Ut(Le.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?jt():Dn(),onKeyDown:Ye,id:et,ref:Ts(t,ut),__staticSelector:w,size:_,name:P,placeholder:p,value:E,required:u,invalid:!!f,readOnly:!l,rightSection:_e,rightSectionWidth:Qe.fn.size({size:_,sizes:PGt}),onBlur:Pe,onFocus:it,onChange:G,autoComplete:"off",unstyled:ue},bt)))),I==="popover"?L.createElement(Vi.Dropdown,null,L.createElement("div",{"data-mantine-stop-propagation":x,onKeyDownCapture:he,"aria-hidden":l||void 0},b)):L.createElement(BC,d0e(pS({},Ge),{opened:x,onClose:lt,withCloseButton:!1,size:H*400,zIndex:se,unstyled:ue}),b)))});cZ.displayName="@mantine/dates/DatePickerBase";var $Gt=Object.defineProperty,J3=Object.getOwnPropertySymbols,Q4e=Object.prototype.hasOwnProperty,J4e=Object.prototype.propertyIsEnumerable,h0e=(e,t,n)=>t in e?$Gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RGt=(e,t)=>{for(var n in t||(t={}))Q4e.call(t,n)&&h0e(e,n,t[n]);if(J3)for(var n of J3(t))J4e.call(t,n)&&h0e(e,n,t[n]);return e},NGt=(e,t)=>{var n={};for(var r in e)Q4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&J3)for(var r of J3(e))t.indexOf(r)<0&&J4e.call(e,r)&&(n[r]=e[r]);return n};const DGt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},LGt=A.forwardRef((e,t)=>{const n=Ct("DatePicker",DGt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,name:I,size:C,dropdownType:O,dropdownPosition:z,clearable:N,disabled:$,clearButtonLabel:D,fixOnBlur:B,allowFreeInput:V,withinPortal:j,dateParser:G,firstDayOfWeek:U,onFocus:P,onBlur:k,amountOfMonths:H,allowLevelChange:M,initialLevel:F,onDropdownClose:J,onDropdownOpen:se,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,type:ge,openDropdownOnClear:ue,unstyled:Fe,weekendDays:ke,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Le,previousYearLabel:Ut}=n,Qe=NGt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),je=as(),bt=l||je.datesLocale,et=ge==="date"?"YYYY-MM-DD":c||je.dateFormat,[ut,lt]=A.useState(S),jt=C==="lg"||C==="xl"?"md":"sm",Dn=A.useRef(),[he,_e]=A.useState(s??null),[Pe,it]=Aa({value:r,defaultValue:s,finalValue:null,onChange:i}),[Ye,at]=A.useState(Pe||x||new Date),[tt,vt]=A.useState(!1),[In,Wt]=A.useState(Pe instanceof Date?Xm(xn(Pe).locale(bt).format(et)):""),Vt=()=>{lt(!1),J==null||J()},hr=()=>{lt(!0),se==null||se()};A.useEffect(()=>{r===null&&!tt&&Wt(""),r instanceof Date&&!tt&&Wt(Xm(xn(r).locale(bt).format(et)))},[r,tt]);const Yn=gt=>{it(gt),Wt(Xm(xn(gt).locale(bt).format(et))),m&&Vt(),window.setTimeout(()=>{var Fr;return(Fr=Dn.current)==null?void 0:Fr.focus()},0)},ku=()=>{var gt;it(null),_e(null),Wt(""),ue&&hr(),(gt=Dn.current)==null||gt.focus()},Mr=gt=>G?G(gt):xn(gt,et,bt).toDate(),us=()=>{let gt=typeof Pe=="string"?Mr(Pe):Pe;E&&xn(gt).isAfter(E)&&(gt=E),b&&xn(gt).isBefore(b)&&(gt=b),xn(gt).isValid()?(it(gt),_e(gt),Wt(Xm(xn(gt).locale(bt).format(et))),at(gt)):B&&it(he)},ti=gt=>{typeof k=="function"&&k(gt),vt(!1),V&&us()},Ei=gt=>{gt.key==="Enter"&&V&&(Vt(),us())},qr=gt=>{typeof P=="function"&&P(gt),vt(!0)},yr=gt=>{hr();const Fr=Mr(gt.target.value);xn(Fr).isValid()?(it(Fr),_e(Fr),Wt(gt.target.value),at(Fr)):Wt(gt.target.value)};return L.createElement(cZ,RGt({allowFreeInput:V,dropdownOpened:ut,setDropdownOpened:lt,shadow:u,transitionDuration:f,ref:Ts(t,Dn),size:C,styles:a,classNames:o,onChange:yr,onBlur:ti,onFocus:qr,onKeyDown:Ei,name:I,inputLabel:In,__staticSelector:"DatePicker",dropdownType:O,dropdownPosition:z,clearable:ge==="date"?!1:N&&!!Pe&&!$,clearButtonLabel:D,onClear:ku,disabled:$,withinPortal:j,amountOfMonths:H,onDropdownClose:J,onDropdownOpen:se,type:ge,unstyled:Fe},Qe),L.createElement(Y4e,{classNames:o,styles:a,locale:bt,nextMonthLabel:h,previousMonthLabel:p,month:V?Ye:void 0,initialMonth:x||(Pe instanceof Date?Pe:new Date),onMonthChange:at,value:Pe instanceof Date?Pe:xn(Pe).toDate(),onChange:Yn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DatePicker",fullWidth:O==="modal",__stopPropagation:O!=="modal",size:O==="modal"?"lg":jt,firstDayOfWeek:U,preventFocus:V,amountOfMonths:H,allowLevelChange:M,initialLevel:F,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,unstyled:Fe,weekendDays:ke,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Le,previousYearLabel:Ut}))});LGt.displayName="@mantine/dates/DatePicker";var MGt=Object.defineProperty,Z3=Object.getOwnPropertySymbols,Z4e=Object.prototype.hasOwnProperty,eFe=Object.prototype.propertyIsEnumerable,p0e=(e,t,n)=>t in e?MGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FGt=(e,t)=>{for(var n in t||(t={}))Z4e.call(t,n)&&p0e(e,n,t[n]);if(Z3)for(var n of Z3(t))eFe.call(t,n)&&p0e(e,n,t[n]);return e},BGt=(e,t)=>{var n={};for(var r in e)Z4e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Z3)for(var r of Z3(e))t.indexOf(r)<0&&eFe.call(e,r)&&(n[r]=e[r]);return n};const jGt={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},tFe=A.forwardRef((e,t)=>{const n=Ct("RangeCalendar",jGt,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=BGt(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=A.useState(null),[p,m]=A.useState(null),g=E=>{if(p instanceof Date){if(Up(E,p)&&!u)return m(null),h(null),null;const w=[E,p];return w.sort((x,S)=>x.getTime()-S.getTime()),i(w),m(null),null}return r[0]&&Up(E,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([E,null]),m(E),null)},y=E=>{typeof o=="function"&&o(E),h(null)},v=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),!w.selected&&xn(E).subtract(1,"day").isBefore(x[1])&&xn(E).add(1,"day").isAfter(x[0])}return!1},_=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),w.selected&&xn(E).isBefore(x[1])}return!1},b=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),w.selected&&xn(E).isAfter(x[0])}return!1};return L.createElement(lZ,FGt({dayStyle:s,onMouseLeave:y,onDayMouseEnter:E=>h(E),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:b},f))});tFe.displayName="@mantine/dates/RangeCalendar";var zGt=Object.defineProperty,eL=Object.getOwnPropertySymbols,nFe=Object.prototype.hasOwnProperty,rFe=Object.prototype.propertyIsEnumerable,m0e=(e,t,n)=>t in e?zGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UGt=(e,t)=>{for(var n in t||(t={}))nFe.call(t,n)&&m0e(e,n,t[n]);if(eL)for(var n of eL(t))rFe.call(t,n)&&m0e(e,n,t[n]);return e},VGt=(e,t)=>{var n={};for(var r in e)nFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eL)for(var r of eL(e))t.indexOf(r)<0&&rFe.call(e,r)&&(n[r]=e[r]);return n};const g0e=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),HGt=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,qGt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},iFe=A.forwardRef((e,t)=>{const n=Ct("DateRangePicker",qGt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,size:I,dropdownType:C,labelSeparator:O,clearable:z,clearButtonLabel:N,firstDayOfWeek:$,allowLevelChange:D,allowSingleDateInRange:B,amountOfMonths:V,withinPortal:j,initialLevel:G,onDropdownClose:U,onDropdownOpen:P,hideOutsideDates:k,hideWeekdays:H,renderDay:M,openDropdownOnClear:F,unstyled:J,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}=n,Fe=VGt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),ke=as(),Ge=l||ke.datesLocale,Re=c||ke.dateFormat,[Oe,Le]=A.useState(S),Ut=I==="lg"||I==="xl"?"md":"sm",Qe=A.useRef(),[je,bt]=Aa({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),et=Pe=>{bt(Pe),m&&g0e(Pe)&&(Le(!1),U==null||U(),window.setTimeout(()=>{var it;return(it=Qe.current)==null?void 0:it.focus()},0))},ut=g0e(je),lt=HGt(je),jt=je[0]?Xm(xn(je[0]).locale(Ge).format(Re)):"",Dn=je[1]?Xm(xn(je[1]).locale(Ge).format(Re)):"",he=()=>{var Pe;bt([null,null]),Le(!0),F&&(P==null||P()),(Pe=Qe.current)==null||Pe.focus()},_e=Pe=>{!Pe&&lt&&je[1]===null&&he(),Le(Pe)};return L.createElement(cZ,UGt({dropdownOpened:Oe,setDropdownOpened:_e,shadow:u,transitionDuration:f,ref:Ts(t,Qe),size:I,styles:a,classNames:o,inputLabel:lt?`${jt} ${O} ${Dn}`:"",__staticSelector:"DateRangePicker",dropdownType:C,clearable:z&&lt,clearButtonLabel:N,onClear:he,withinPortal:j,amountOfMonths:V,onDropdownClose:U,onDropdownOpen:P,unstyled:J},Fe),L.createElement(tFe,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ut?je[0]:x,value:je,onChange:et,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DateRangePicker",fullWidth:C==="modal",firstDayOfWeek:$,size:C==="modal"?"lg":Ut,allowLevelChange:D,allowSingleDateInRange:B,amountOfMonths:V,initialLevel:G,hideOutsideDates:k,hideWeekdays:H,renderDay:M,unstyled:J,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}))});iFe.displayName="@mantine/dates/DateRangePicker";function Pg(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var WGt=Object.defineProperty,GGt=Object.defineProperties,YGt=Object.getOwnPropertyDescriptors,y0e=Object.getOwnPropertySymbols,KGt=Object.prototype.hasOwnProperty,XGt=Object.prototype.propertyIsEnumerable,v0e=(e,t,n)=>t in e?WGt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QGt=(e,t)=>{for(var n in t||(t={}))KGt.call(t,n)&&v0e(e,n,t[n]);if(y0e)for(var n of y0e(t))XGt.call(t,n)&&v0e(e,n,t[n]);return e},JGt=(e,t)=>GGt(e,YGt(t));const ZGt={xs:20,sm:23,md:25,lg:27,xl:29};var sFe=ht((e,{size:t,hasValue:n})=>({timeInput:JGt(QGt({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:ZGt}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),eYt=Object.defineProperty,tL=Object.getOwnPropertySymbols,oFe=Object.prototype.hasOwnProperty,aFe=Object.prototype.propertyIsEnumerable,_0e=(e,t,n)=>t in e?eYt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tYt=(e,t)=>{for(var n in t||(t={}))oFe.call(t,n)&&_0e(e,n,t[n]);if(tL)for(var n of tL(t))aFe.call(t,n)&&_0e(e,n,t[n]);return e},nYt=(e,t)=>{var n={};for(var r in e)oFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tL)for(var r of tL(e))t.indexOf(r)<0&&aFe.call(e,r)&&(n[r]=e[r]);return n};const O$=A.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=nYt(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=A.useState(0),{classes:y,cx:v,theme:_}=sFe({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),b=A.useRef(),E=C=>{typeof i=="function"&&i(C),b.current.select(),g(0)},w=C=>{typeof s=="function"&&s(C),m===1&&typeof o=="function"&&o(C.currentTarget.value,!1)},x=C=>{C.stopPropagation(),b.current.select()},S=C=>{if(C.key==="ArrowUp"){C.preventDefault();const O=Pg(sf(parseInt(C.currentTarget.value,10)+1,f,c).toString());d!==O&&o(O,!1)}if(C.key==="ArrowDown"){C.preventDefault();const O=Pg(sf(parseInt(C.currentTarget.value,10)-1,f,c).toString());d!==O&&o(O,!1)}},I=C=>{g(m+1);const O=parseInt(C.currentTarget.value,10).toString();if(O==="0"&&m===0){a("00");return}o(O,!0,m>0)};return L.createElement(L.Fragment,null,L.createElement("input",tYt({type:"text",inputMode:"numeric",ref:Ts(b,t),onChange:I,onClick:x,onFocus:E,onBlur:w,onKeyDown:S,value:d,className:v(y.timeInput,r)},p)),u&&L.createElement(Ot,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});O$.displayName="@mantine/dates/TimeField";function Aj(e){return Math.floor(e/10)}function Cj({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>Aj(r)||a){const f=c%10;let d,h;c>r&&i&&f<=Aj(i)?(d=Pg(Aj(c).toString()),h=Pg(f.toString())):d=Pg(sf(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var rYt=ht((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:Mo})-2}})),iYt=Object.defineProperty,nL=Object.getOwnPropertySymbols,uFe=Object.prototype.hasOwnProperty,lFe=Object.prototype.propertyIsEnumerable,b0e=(e,t,n)=>t in e?iYt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sYt=(e,t)=>{for(var n in t||(t={}))uFe.call(t,n)&&b0e(e,n,t[n]);if(nL)for(var n of nL(t))lFe.call(t,n)&&b0e(e,n,t[n]);return e},oYt=(e,t)=>{var n={};for(var r in e)uFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nL)for(var r of nL(e))t.indexOf(r)<0&&lFe.call(e,r)&&(n[r]=e[r]);return n};const cFe=A.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=oYt(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=sFe({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=A.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const b=_.target.value.slice(-1).toLowerCase();if(b==="p"){_.preventDefault(),i(c,!0);return}if(b==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return L.createElement("input",sYt({type:"text",ref:Ts(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});cFe.displayName="@mantine/dates/AmPmInput";function aYt({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function uYt(e,t,n,r,i,s){const o=xn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function w0e(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:Pg(i.toString()),minutes:Pg(e.getMinutes().toString()),seconds:Pg(e.getSeconds().toString()),amPm:s?r:n}}var lYt=Object.defineProperty,cYt=Object.defineProperties,fYt=Object.getOwnPropertyDescriptors,rL=Object.getOwnPropertySymbols,fFe=Object.prototype.hasOwnProperty,dFe=Object.prototype.propertyIsEnumerable,E0e=(e,t,n)=>t in e?lYt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_m=(e,t)=>{for(var n in t||(t={}))fFe.call(t,n)&&E0e(e,n,t[n]);if(rL)for(var n of rL(t))dFe.call(t,n)&&E0e(e,n,t[n]);return e},Ij=(e,t)=>cYt(e,fYt(t)),dYt=(e,t)=>{var n={};for(var r in e)fFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rL)for(var r of rL(e))t.indexOf(r)<0&&dFe.call(e,r)&&(n[r]=e[r]);return n};const hYt={xs:24,sm:30,md:34,lg:40,xl:44},pYt={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},bH=A.forwardRef((e,t)=>{const n=Ct("TimeInput",pYt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,amLabel:E,pmLabel:w,name:x,hoursLabel:S,minutesLabel:I,secondsLabel:C,amPmLabel:O,timePlaceholder:z,amPmPlaceholder:N,disabled:$,sx:D,nextRef:B,labelProps:V,descriptionProps:j,errorProps:G,unstyled:U,withAsterisk:P}=n,k=dYt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:H,cx:M,theme:F}=rYt({size:l},{classNames:f,styles:d,unstyled:U,name:"TimeInput"}),{systemStyles:J,rest:se}=wf(k),ae=vl(h),ce=A.useRef(),le=A.useRef(),ge=A.useRef(),ue=A.useRef(),[Fe,ke]=A.useState(w0e(p||m,b,E,w)),[Ge,Re]=A.useState(p||m);_s(()=>{ke(w0e(Ge,b,E,w))},[Ge,b,E,w]),_s(()=>{(p==null?void 0:p.getTime())!==(Ge==null?void 0:Ge.getTime())&&Re(p)},[p]);const Oe=ut=>{const lt=_m(_m({},Fe),ut),jt=uYt(lt.hours,lt.minutes,lt.seconds,b,w,lt.amPm);Re(jt),typeof g=="function"&&g(jt)},Le=Cj({onChange:(ut,lt)=>{Oe({hours:ut,minutes:lt??Fe.minutes})},min:b==="12"?1:0,max:b==="12"?12:23,nextRef:le,nextMax:59}),Ut=Cj({onChange:(ut,lt)=>{Oe({minutes:ut,seconds:lt??Fe.seconds})},min:0,max:59,nextRef:y?ge:b==="12"?ue:B,nextMax:y?59:void 0}),Qe=Cj({onChange:ut=>{Oe({seconds:ut})},min:0,max:59,nextRef:b==="12"?ue:B}),je=aYt({amLabel:E,pmLabel:w,onChange:ut=>{Oe({amPm:ut})},nextRef:B}),bt=()=>{ke({hours:"",minutes:"",seconds:"",amPm:""}),Re(null),g==null||g(null),ce.current.focus()},et=v&&Ge&&!$?L.createElement(wv,{variant:"transparent","aria-label":_,onClick:bt,size:l,unstyled:U}):null;return L.createElement(is.Wrapper,_m(_m({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:ae,sx:D,errorProps:G,descriptionProps:j,labelProps:V,unstyled:U,withAsterisk:P},J),c),L.createElement(is,_m({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ce.current.focus(),size:l,className:M({[H.disabled]:$}),classNames:f,styles:d,disabled:$,rightSection:et,rightSectionWidth:F.fn.size({size:l,sizes:hYt}),unstyled:U},se),L.createElement("div",{className:H.controls},L.createElement(O$,{ref:Ts(ce,t),value:Fe.hours,onChange:Le,setValue:ut=>ke(lt=>Ij(_m({},lt),{hours:ut})),id:ae,className:H.timeInput,withSeparator:!0,size:l,max:b==="12"?12:23,placeholder:z,"aria-label":S,disabled:$,name:x,unstyled:U}),L.createElement(O$,{ref:le,value:Fe.minutes,onChange:Ut,setValue:ut=>ke(lt=>Ij(_m({},lt),{minutes:ut})),className:H.timeInput,withSeparator:y,size:l,max:59,placeholder:z,"aria-label":I,disabled:$,unstyled:U}),y&&L.createElement(O$,{ref:ge,value:Fe.seconds,onChange:Qe,setValue:ut=>ke(lt=>Ij(_m({},lt),{seconds:ut})),className:H.timeInput,size:l,max:59,placeholder:z,"aria-label":C,disabled:$,unstyled:U}),b==="12"&&L.createElement(cFe,{ref:ue,value:Fe.amPm,onChange:je,placeholder:N,amLabel:E,pmLabel:w,size:l,"aria-label":O,disabled:$,unstyled:U}))))});bH.displayName="@mantine/dates/TimeInput";var mYt=ht((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:Mo})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),gYt=Object.defineProperty,iL=Object.getOwnPropertySymbols,hFe=Object.prototype.hasOwnProperty,pFe=Object.prototype.propertyIsEnumerable,x0e=(e,t,n)=>t in e?gYt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mS=(e,t)=>{for(var n in t||(t={}))hFe.call(t,n)&&x0e(e,n,t[n]);if(iL)for(var n of iL(t))pFe.call(t,n)&&x0e(e,n,t[n]);return e},yYt=(e,t)=>{var n={};for(var r in e)hFe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iL)for(var r of iL(e))t.indexOf(r)<0&&pFe.call(e,r)&&(n[r]=e[r]);return n};const vYt={xs:24,sm:30,md:34,lg:40,xl:44},_Yt={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},bYt=A.forwardRef((e,t)=>{const n=Ct("TimeRangeInput",_Yt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,name:E,hoursLabel:w,minutesLabel:x,secondsLabel:S,amPmLabel:I,timePlaceholder:C,amPmPlaceholder:O,labelSeparator:z,disabled:N,sx:$,labelProps:D,descriptionProps:B,errorProps:V,unstyled:j,withAsterisk:G}=n,U=yYt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:P,cx:k,theme:H}=mYt({size:l},{classNames:f,styles:d,unstyled:j,name:"TimeRangeInput"}),{systemStyles:M,rest:F}=wf(U),J=vl(h),se=A.useRef(),ae=A.useRef(),[ce,le]=A.useState(p??m);_s(()=>{typeof g=="function"&&g(ce)},[ce]),_s(()=>{var ke,Ge,Re,Oe;(((ke=p[0])==null?void 0:ke.getTime())!==((Ge=ce[0])==null?void 0:Ge.getTime())||((Re=p[1])==null?void 0:Re.getTime())!==((Oe=ce[1])==null?void 0:Oe.getTime()))&&le(p)},[p]);const ge=()=>{var ke;le([null,null]),(ke=se.current)==null||ke.focus()},ue=v&&ce.filter(ke=>!!ke).length>0?L.createElement(wv,{variant:"transparent","aria-label":_,onClick:ge,size:l,unstyled:j}):null,Fe={amPmLabel:I,amPmPlaceholder:O,disabled:N,format:b,hoursLabel:w,minutesLabel:x,secondsLabel:S,size:l,timePlaceholder:C,withSeconds:y};return L.createElement(is.Wrapper,mS(mS({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:J,sx:$,errorProps:V,descriptionProps:B,labelProps:D,unstyled:j,withAsterisk:G},M),c),L.createElement(is,mS({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var ke;(ke=se.current)==null||ke.focus()},size:l,className:k({[P.disabled]:N}),classNames:f,styles:d,disabled:N,rightSection:ue,rightSectionWidth:H.fn.size({size:l,sizes:vYt}),unstyled:j},F),L.createElement("div",{className:P.inputWrapper},L.createElement(bH,mS({ref:Ts(se,t),variant:"unstyled",value:ce[0],onChange:ke=>le([ke,ce[1]]),name:E,nextRef:ae,id:J,unstyled:j},Fe)),L.createElement("span",{className:P.separator,style:{color:H.colorScheme==="dark"?H.colors.dark[2]:H.colors.gray[7]}},z),L.createElement(bH,mS({ref:ae,variant:"unstyled",value:ce[1],onChange:ke=>le([ce[0],ke]),unstyled:j},Fe)))))});bYt.displayName="@mantine/dates/TimeRangeInput";const S0e={};function wH(e,t){e===void 0&&(e=S0e),t===void 0&&(t=S0e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var wYt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EYt=Object.prototype.hasOwnProperty;function EH(e,t){return EYt.call(e,t)}function xH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)EH(e,i)&&r.push(i);return r}function Xu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function SH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ey(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function mFe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function TH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(TH(e[t]))return!0}else if(typeof e=="object"){for(var r=xH(e),i=r.length,s=0;s<i;s++)if(TH(e[r[s]]))return!0}}return!1}function T0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var gFe=function(e){wYt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,T0e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=T0e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ci=gFe,xYt=Xu,ub={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=sL(n,this.path);r&&(r=Xu(r));var i=v1(n,{op:"remove",path:this.from}).removed;return v1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=sL(n,this.from);return v1(n,{op:"add",path:this.path,value:Xu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:KA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},SYt={add:function(e,t,n){return SH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ub.move,copy:ub.copy,test:ub.test,_get:ub._get};function sL(e,t){if(t=="")return e;var n={op:"_get",path:t};return v1(e,n),n.value}function v1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):oL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=sL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=KA(e,t.value),o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ci("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Xu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=oL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=mFe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!SH(h))throw new Ci("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);SH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ci("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=SYt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ub[t.op].call(t,l,h,e);if(o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ci("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function TF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ci("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=v1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function TYt(e,t,n){var r=v1(e,t);if(r.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function oL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ci("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ub[e.op]){if(typeof e.path!="string")throw new Ci("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ci('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ci("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ci("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&TH(e.value))throw new Ci("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ci("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ci("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=yFe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ci("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ci("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function yFe(e,t,n){try{if(!Array.isArray(e))throw new Ci("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)TF(Xu(t),Xu(e),n||!0);else{n=n||oL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ci)return i;throw i}}function KA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!KA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!KA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const AYt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ci,_areEquals:KA,applyOperation:v1,applyPatch:TF,applyReducer:TYt,deepClone:xYt,getValueByPointer:sL,validate:yFe,validator:oL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var fZ=new WeakMap,CYt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),IYt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function OYt(e){return fZ.get(e)}function PYt(e,t){return e.observers.get(t)}function kYt(e,t){e.observers.delete(t.callback)}function $Yt(e,t){t.unobserve()}function RYt(e,t){var n=[],r,i=OYt(e);if(!i)i=new CYt(e),fZ.set(e,i);else{var s=PYt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Xu(e),t){r.callback=t,r.next=null;var o=function(){AH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){AH(r),clearTimeout(r.next),kYt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new IYt(t,r)),r}function AH(e,t){t===void 0&&(t=!1);var n=fZ.get(e.object);dZ(n.value,e.object,e.patches,"",t),e.patches.length&&TF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function dZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=xH(t),o=xH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(EH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?dZ(c,f,n,r+"/"+Ey(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ey(l),value:Xu(c)}),n.push({op:"replace",path:r+"/"+Ey(l),value:Xu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ey(l),value:Xu(c)}),n.push({op:"remove",path:r+"/"+Ey(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!EH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Ey(l),value:Xu(t[l])})}}}function NYt(e,t,n){n===void 0&&(n=!1);var r=[];return dZ(e,t,r,"",n),r}const DYt=Object.freeze(Object.defineProperty({__proto__:null,compare:NYt,generate:AH,observe:RYt,unobserve:$Yt},Symbol.toStringTag,{value:"Module"}));Object.assign({},AYt,DYt,{JsonPatchError:gFe,deepClone:Xu,escapePathComponent:Ey,unescapePathComponent:mFe});var LYt=/("(?:[^\\"]|\\.)*")|[:,]/g,MYt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,b,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),b=JSON.stringify(a,s),b===void 0)return b;if(g=i-u.length-l,b.length<=g&&(v=b.replace(LYt,function(w,x){return x||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(b),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return b}(t,"",0)};const Oj=pl(MYt);function Ou(e,t,n){return e.fields=t||[],e.fname=n,e}function Ni(e){return e==null?null:e.fname}function Yo(e){return e==null?null:e.fields}function vFe(e){return e.length===1?FYt(e[0]):BYt(e)}const FYt=e=>function(t){return t[e]},BYt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Te(e){throw Error(e)}function fh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Te("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Te("Access path missing closing bracket: "+e),r&&Te("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function tc(e,t,n){const r=fh(e);return e=r.length===1?r[0]:e,Ou((n&&n.get||vFe)(r),[e],t||e)}const jI=tc("id"),na=Ou(e=>e,[],"identity"),qm=Ou(()=>0,[],"zero"),ox=Ou(()=>1,[],"one"),nc=Ou(()=>!0,[],"true"),Sm=Ou(()=>!1,[],"false");function jYt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const _Fe=0,hZ=1,pZ=2,bFe=3,wFe=4;function mZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jYt,r=e||_Fe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=hZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=pZ&&n(t||"warn","WARN",arguments),this},info(){return r>=bFe&&n(t||"log","INFO",arguments),this},debug(){return r>=wFe&&n(t||"log","DEBUG",arguments),this}}}var Ie=Array.isArray;function st(e){return e===Object(e)}const A0e=e=>e!=="__proto__";function ax(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=zYt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;ux(r,s,i[s],o)}return r},{})}function ux(e,t,n,r){if(!A0e(t))return;let i,s;if(st(n)&&!Ie(n)){s=st(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?ux(s,i,n[i]):A0e(i)&&(s[i]=n[i])}else e[t]=n}function zYt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Un(e){return e[e.length-1]}function Vo(e){return e==null||e===""?null:+e}const EFe=e=>t=>e*Math.exp(t),xFe=e=>t=>Math.log(e*t),SFe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),TFe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,aL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function AF(e,t,n,r){const i=n(e[0]),s=n(Un(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function AFe(e,t){return AF(e,t,Vo,na)}function CFe(e,t){var n=Math.sign(e[0]);return AF(e,t,xFe(n),EFe(n))}function IFe(e,t,n){return AF(e,t,aL(n),aL(1/n))}function OFe(e,t,n){return AF(e,t,SFe(n),TFe(n))}function CF(e,t,n,r,i){const s=r(e[0]),o=r(Un(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function gZ(e,t,n){return CF(e,t,n,Vo,na)}function yZ(e,t,n){const r=Math.sign(e[0]);return CF(e,t,n,xFe(r),EFe(r))}function uL(e,t,n,r){return CF(e,t,n,aL(r),aL(1/r))}function vZ(e,t,n,r){return CF(e,t,n,SFe(r),TFe(r))}function PFe(e){return 1+~~(new Date(e).getMonth()/3)}function kFe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function nt(e){return e!=null?Ie(e)?e:[e]:[]}function $Fe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pn(e){return typeof e=="function"}const UYt="descending";function _Z(e,t,n){n=n||{},t=nt(t)||[];const r=[],i=[],s={},o=n.comparator||VYt;return nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===UYt?-1:1),i.push(a=pn(a)?a:tc(a,null,n)),(Yo(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ou(o(i,r),Object.keys(s))}const IF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),VYt=(e,t)=>e.length===1?HYt(e[0],t[0]):qYt(e,t,e.length),HYt=(e,t)=>function(n,r){return IF(e(n),e(r))*t},qYt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=IF(s(r),s(i));return o*t[a]});function ra(e){return pn(e)?e:()=>e}function bZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Jd(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function RFe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const WYt=Object.prototype.hasOwnProperty;function Nt(e,t){return WYt.call(e,t)}const QP={};function lx(e){let t={},n;function r(s){return Nt(t,s)&&t[s]!==QP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===QP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=QP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==QP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function NFe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Un(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function We(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hn(r,n)}function lb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function j0(e){return typeof e=="boolean"}function kg(e){return Object.prototype.toString.call(e)==="[object Date]"}function DFe(e){return e&&pn(e[Symbol.iterator])}function Jn(e){return typeof e=="number"}function LFe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function rt(e){return typeof e=="string"}function wZ(e,t,n){e&&(e=t?nt(e).map(a=>a.replace(/\\(.)/g,"$1")):nt(e));const r=e&&e.length,i=n&&n.get||vFe,s=a=>i(t?[a]:fh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ou(o,e,"key")}function MFe(e,t){const n=e[0],r=Un(e),i=+t;return i?i===1?r:n+i*(r-n):n}const GYt=1e4;function FFe(e){e=+e||GYt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Nt(t,o)||Nt(n,o),get:o=>Nt(t,o)?t[o]:Nt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Nt(t,o)?t[o]=a:s(o,a)}}function BFe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function sT(e,t){let n="";for(;--t>=0;)n+=e;return n}function jFe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?sT(i,o)+s:r==="center"?sT(i,~~(o/2))+s+sT(i,Math.ceil(o/2)):s+sT(i,o)}function zI(e){return e&&Un(e)-e[0]||0}function Xe(e){return Ie(e)?"["+e.map(Xe)+"]":st(e)||rt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function EZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const YYt=e=>Jn(e)||kg(e)?e:Date.parse(e);function xZ(e,t){return t=t||YYt,e==null||e===""?null:t(e)}function SZ(e){return e==null||e===""?null:e+""}function gf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function zFe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function $m(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function KYt(e){return e}function XYt(e){if(e==null)return KYt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function QYt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function JYt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return C0e(e,n)})}:C0e(e,t)}function C0e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=UFe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function UFe(e,t){var n=XYt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&QYt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function ZYt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function eKt(e){return UFe(e,tKt.apply(this,arguments))}function tKt(e,t,n){var r,i,s;if(arguments.length>1)r=nKt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:ZYt(e,r)}}function nKt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function $g(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rKt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function UI(e){let t,n,r;e.length!==2?(t=$g,n=(a,u)=>$g(e(a),u),r=(a,u)=>e(a)-u):(t=e===$g||e===rKt?e:iKt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function iKt(){return 0}function VFe(e){return e===null?NaN:+e}function*sKt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const HFe=UI($g),lL=HFe.right,oKt=HFe.left;UI(VFe).center;const aKt=lL;function uKt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function lKt(e,t){const n=uKt(e,t);return n&&Math.sqrt(n)}function cKt(e,t){return Array.from(t,n=>e[n])}function fKt(e=$g){if(e===$g)return qFe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qFe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dKt=Math.sqrt(50),hKt=Math.sqrt(10),pKt=Math.sqrt(2);function WFe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=dKt?10:s>=hKt?5:s>=pKt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?WFe(e,t,n*2):[a,u,l]}function I0e(e,t,n){return t=+t,e=+e,n=+n,WFe(e,t,n)[2]}function XA(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?I0e(t,e,n):I0e(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function _1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function CH(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function GFe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qFe:fKt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));GFe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(gS(e,n,t),i(e[r],s)>0&&gS(e,n,r);o<a;){for(gS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?gS(e,n,a):(++a,gS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function gS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function IH(e,t,n){if(e=Float64Array.from(sKt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return CH(e);if(t>=1)return _1(e);var r,i=(r-1)*t,s=Math.floor(i),o=_1(GFe(e,s).subarray(0,s+1)),a=CH(e.subarray(s+1));return o+(a-o)*(i-s)}}function mKt(e,t,n=VFe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function gKt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function YFe(e,t){return IH(e,.5,t)}function jv(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function KFe(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function yKt(e,...t){e=new UD(e),t=t.map(vKt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function vKt(e){return e instanceof UD?e:new UD(e)}function _Kt(...e){const t=new UD;for(const n of e)for(const r of n)t.add(r);return t}const vo="year",bu="quarter",Ko="month",ys="week",wu="date",Uo="day",Zd="dayofyear",ll="hours",cl="minutes",rc="seconds",yf="milliseconds",TZ=[vo,bu,Ko,ys,wu,Uo,Zd,ll,cl,rc,yf],Pj=TZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function AZ(e){const t=nt(e).slice(),n={};return t.length||Te("Missing time unit."),t.forEach(i=>{Nt(Pj,i)?n[i]=1:Te(`Invalid time unit: ${i}.`)}),(n[ys]||n[Uo]?1:0)+(n[bu]||n[Ko]||n[wu]?1:0)+(n[Zd]?1:0)>1&&Te(`Incompatible time units: ${e}`),t.sort((i,s)=>Pj[i]-Pj[s]),t}const bKt={[vo]:"%Y ",[bu]:"Q%q ",[Ko]:"%b ",[wu]:"%d ",[ys]:"W%U ",[Uo]:"%a ",[Zd]:"%j ",[ll]:"%H:00",[cl]:"00:%M",[rc]:":%S",[yf]:".%L",[`${vo}-${Ko}`]:"%Y-%m ",[`${vo}-${Ko}-${wu}`]:"%Y-%m-%d ",[`${ll}-${cl}`]:"%H:%M"};function XFe(e,t){const n=hn({},bKt,t),r=AZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Ry=new Date;function CZ(e){return Ry.setFullYear(e),Ry.setMonth(0),Ry.setDate(1),Ry.setHours(0,0,0,0),Ry}function QFe(e){return ZFe(new Date(e))}function JFe(e){return OH(new Date(e))}function ZFe(e){return hp.count(CZ(e.getFullYear())-1,e)}function OH(e){return qE.count(CZ(e.getFullYear())-1,e)}function PH(e){return CZ(e).getDay()}function wKt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function e5e(e){return n5e(new Date(e))}function t5e(e){return kH(new Date(e))}function n5e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ag.count(t-1,e)}function kH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return WE.count(t-1,e)}function $H(e){return Ry.setTime(Date.UTC(e,0,1)),Ry.getUTCDay()}function EKt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function r5e(e,t,n,r,i){const s=t||1,o=Un(e),a=(y,v,_)=>(_=_||y,xKt(n[_],r[_],y===o&&s,v)),u=new Date,l=gf(e),c=l[vo]?a(vo):ra(2012),f=l[Ko]?a(Ko):l[bu]?a(bu):qm,d=l[ys]&&l[Uo]?a(Uo,1,ys+Uo):l[ys]?a(ys,1):l[Uo]?a(Uo,1):l[wu]?a(wu,1):l[Zd]?a(Zd,1):ox,h=l[ll]?a(ll):qm,p=l[cl]?a(cl):qm,m=l[rc]?a(rc):qm,g=l[yf]?a(yf):qm;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function xKt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Ww(e,t,n){return t+e*7-(n+6)%7}const SKt={[vo]:e=>e.getFullYear(),[bu]:e=>Math.floor(e.getMonth()/3),[Ko]:e=>e.getMonth(),[wu]:e=>e.getDate(),[ll]:e=>e.getHours(),[cl]:e=>e.getMinutes(),[rc]:e=>e.getSeconds(),[yf]:e=>e.getMilliseconds(),[Zd]:e=>ZFe(e),[ys]:e=>OH(e),[ys+Uo]:(e,t)=>Ww(OH(e),e.getDay(),PH(t)),[Uo]:(e,t)=>Ww(1,e.getDay(),PH(t))},TKt={[bu]:e=>3*e,[ys]:(e,t)=>Ww(e,0,PH(t))};function i5e(e,t){return r5e(e,t||1,SKt,TKt,wKt)}const AKt={[vo]:e=>e.getUTCFullYear(),[bu]:e=>Math.floor(e.getUTCMonth()/3),[Ko]:e=>e.getUTCMonth(),[wu]:e=>e.getUTCDate(),[ll]:e=>e.getUTCHours(),[cl]:e=>e.getUTCMinutes(),[rc]:e=>e.getUTCSeconds(),[yf]:e=>e.getUTCMilliseconds(),[Zd]:e=>n5e(e),[ys]:e=>kH(e),[Uo]:(e,t)=>Ww(1,e.getUTCDay(),$H(t)),[ys+Uo]:(e,t)=>Ww(kH(e),e.getUTCDay(),$H(t))},CKt={[bu]:e=>3*e,[ys]:(e,t)=>Ww(e,0,$H(t))};function s5e(e,t){return r5e(e,t||1,AKt,CKt,EKt)}const IKt={[vo]:Hd,[bu]:NA.every(3),[Ko]:NA,[ys]:qE,[wu]:hp,[Uo]:hp,[Zd]:hp,[ll]:B4,[cl]:M4,[rc]:rp,[yf]:Aw},OKt={[vo]:qd,[bu]:DA.every(3),[Ko]:DA,[ys]:WE,[wu]:Ag,[Uo]:Ag,[Zd]:Ag,[ll]:j4,[cl]:F4,[rc]:rp,[yf]:Aw};function cx(e){return IKt[e]}function fx(e){return OKt[e]}function o5e(e,t,n){return e?e.offset(t,n):void 0}function a5e(e,t,n){return o5e(cx(e),t,n)}function u5e(e,t,n){return o5e(fx(e),t,n)}function l5e(e,t,n,r){return e?e.range(t,n,r):void 0}function c5e(e,t,n,r){return l5e(cx(e),t,n,r)}function f5e(e,t,n,r){return l5e(fx(e),t,n,r)}const oT=1e3,aT=oT*60,uT=aT*60,OF=uT*24,PKt=OF*7,O0e=OF*30,RH=OF*365,d5e=[vo,Ko,wu,ll,cl,rc,yf],lT=d5e.slice(0,-1),cT=lT.slice(0,-1),fT=cT.slice(0,-1),kKt=fT.slice(0,-1),$Kt=[vo,ys],P0e=[vo,Ko],h5e=[vo],yS=[[lT,1,oT],[lT,5,5*oT],[lT,15,15*oT],[lT,30,30*oT],[cT,1,aT],[cT,5,5*aT],[cT,15,15*aT],[cT,30,30*aT],[fT,1,uT],[fT,3,3*uT],[fT,6,6*uT],[fT,12,12*uT],[kKt,1,OF],[$Kt,1,PKt],[P0e,1,O0e],[P0e,3,3*O0e],[h5e,1,RH]];function p5e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(zI(t))/n;let i=UI(a=>a[2]).right(yS,r),s,o;return i===yS.length?(s=h5e,o=XA(t[0]/RH,t[1]/RH,n)):i?(i=yS[r/yS[i-1][2]<yS[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=d5e,o=Math.max(XA(t[0],t[1],n),1)),{units:s,step:o}}function dT(e){const t={};return n=>t[n]||(t[n]=e(n))}function RKt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=NKt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function NKt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function m5e(e){const t=dT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=H1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return RKt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=H1(o??",f");const a=XA(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=ENe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=xNe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=wNe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let NH;g5e();function g5e(){return NH=m5e({format:VE,formatPrefix:PX})}function y5e(e){return m5e(bNe(e))}function cL(e){return arguments.length?NH=y5e(e):NH}function k0e(e,t,n){n=n||{},st(n)||Te(`Invalid time multi-format specifier: ${n}`);const r=t(rc),i=t(cl),s=t(ll),o=t(wu),a=t(ys),u=t(Ko),l=t(bu),c=t(vo),f=e(n[yf]||".%L"),d=e(n[rc]||":%S"),h=e(n[cl]||"%I:%M"),p=e(n[ll]||"%I %p"),m=e(n[wu]||n[Uo]||"%a %d"),g=e(n[ys]||"%b %d"),y=e(n[Ko]||"%B"),v=e(n[bu]||"%B"),_=e(n[vo]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:s(b)<b?h:o(b)<b?p:u(b)<b?a(b)<b?m:g:c(b)<b?l(b)<b?y:v:_)(b)}function v5e(e){const t=dT(e.format),n=dT(e.utcFormat);return{timeFormat:r=>rt(r)?t(r):k0e(t,cx,r),utcFormat:r=>rt(r)?n(r):k0e(n,fx,r),timeParse:dT(e.parse),utcParse:dT(e.utcParse)}}let DH;_5e();function _5e(){return DH=v5e({format:LX,parse:JNe,utcFormat:z4,utcParse:ZNe})}function b5e(e){return v5e(GNe(e))}function QA(e){return arguments.length?DH=b5e(e):DH}const LH=(e,t)=>hn({},e,t);function w5e(e,t){const n=e?y5e(e):cL(),r=t?b5e(t):QA();return LH(n,r)}function IZ(e,t){const n=arguments.length;return n&&n!==2&&Te("defaultLocale expects either zero or two arguments."),n?LH(cL(e),QA(t)):LH(cL(),QA())}function DKt(){return g5e(),_5e(),IZ()}const LKt=/^(data:|([A-Za-z]+:)?\/\/)/,MKt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,FKt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$0e="file://";function BKt(e,t){return n=>({options:n||{},sanitize:zKt,load:jKt,fileAccess:!!t,file:UKt(t),http:HKt(e)})}async function jKt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function zKt(e,t){t=hn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=MKt.test(e.replace(FKt,""));(e==null||typeof e!="string"||!a)&&Te("Sanitize failure, invalid URI: "+Xe(e));const u=LKt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith($0e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice($0e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function UKt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):VKt}async function VKt(){Te("No file system access.")}function HKt(e){return e?async function(t,n){const r=hn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pn(s[i])?s[i]():s.text():Te(s.status+""+s.statusText)}:qKt}async function qKt(){Te("No HTTP fetch method available.")}const WKt=e=>e!=null&&e===e,GKt=e=>e==="true"||e==="false"||e===!0||e===!1,YKt=e=>!Number.isNaN(Date.parse(e)),E5e=e=>!Number.isNaN(+e)&&!(e instanceof Date),KKt=e=>E5e(e)&&Number.isInteger(+e),MH={boolean:EZ,integer:Vo,number:Vo,date:xZ,string:SZ,unknown:na},JP=[GKt,KKt,E5e,YKt],XKt=["boolean","integer","number","date"];function x5e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=JP.length,i=JP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&WKt(u)&&!JP[a](u)&&(i[a]=0,++o,o===JP.length))return"string";return XKt[i.reduce((s,o)=>s===0?o:s,0)-1]}function S5e(e,t){return t.reduce((n,r)=>(n[r]=x5e(e,r),n),{})}function R0e(e){const t=function(n,r){const i={delimiter:e};return OZ(n,r?hn(r,i):i)};return t.responseType="text",t}function OZ(e,t){return t.header&&(e=t.header.map(Xe).join(t.delimiter)+`
`+e),yNe(t.delimiter).parse(e+"")}OZ.responseType="text";function QKt(e){return typeof Buffer=="function"&&pn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function PZ(e,t){const n=t&&t.property?tc(t.property):na;return st(e)&&!QKt(e)?JKt(n(e),t):n(JSON.parse(e))}PZ.responseType="json";function JKt(e,t){return!Ie(e)&&DFe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const ZKt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function T5e(e,t){let n,r,i,s;return e=PZ(e,t),t&&t.feature?(n=JYt,i=t.feature):t&&t.mesh?(n=eKt,i=t.mesh,s=ZKt[t.filter]):Te("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Te("Invalid TopoJSON object: "+i),r&&r.features||[r]}T5e.responseType="json";const P$={dsv:OZ,csv:R0e(","),tsv:R0e("	"),json:PZ,topojson:T5e};function kZ(e,t){return arguments.length>1?(P$[e]=t,this):Nt(P$,e)?P$[e]:null}function A5e(e){const t=kZ(e);return t&&t.responseType||"text"}function C5e(e,t,n,r){t=t||{};const i=kZ(t.type||"json");return i||Te("Unknown data format type: "+t.type),e=i(e,t),t.parse&&eXt(e,t.parse,n,r),Nt(e,"columns")&&delete e.columns,e}function eXt(e,t,n,r){if(!e.length)return;const i=QA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=S5e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!MH[p])throw Error("Illegal format pattern: "+h+":"+p);return MH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const PF=BKt(typeof fetch<"u"&&fetch,null);function kF(e){const t=e||na,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function k$(e,t){try{await t(e)}catch(n){e.error(n)}}const I5e=Symbol("vega_id");let tXt=1;function $F(e){return!!(e&&$t(e))}function $t(e){return e[I5e]}function O5e(e,t){return e[I5e]=t,e}function dr(e){const t=e===Object(e)?e:{data:e};return $t(t)?t:O5e(t,tXt++)}function $Z(e){return RF(e,dr({}))}function RF(e,t){for(const n in e)t[n]=e[n];return t}function P5e(e,t){return O5e(t,$t(e))}function zv(e,t){return e?t?(n,r)=>e(n,r)||$t(t(n))-$t(t(r)):(n,r)=>e(n,r)||$t(n)-$t(r):null}function k5e(e){return e&&e.constructor===Uv}function Uv(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Uv,insert(a){const u=nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=pn(a)?r:t,l=nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ra(l)};return pn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return pn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[$t(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[$t(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[$t(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=$t(m),l[g]?l[g]=1:a.add.push(dr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[$t(m)]<0&&a.rem.push(m);function y(v,_,b){b?v[_]=b(v):a.encode=_,o||(c[$t(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[$t(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[$t(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[$t(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const $$="_:mod:_";function NF(){Object.defineProperty(this,$$,{writable:!0,value:{}})}NF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[$$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ie(n)?1+n.length:-1),i},modified(e,t){const n=this[$$];if(arguments.length){if(Ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[$$]={},this}};let nXt=0;const rXt="pulse",iXt=new NF,sXt=1,oXt=2;function Dr(e,t,n,r){this.id=++nXt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function N0e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=kF(jI))},set(e){return this.value!==e?(this.value=e,1):0},skip:N0e(sXt),modified:N0e(oXt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new NF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===rXt)nt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Te("Pulse parameters must be operator instances.")}),this.source=a;else if(Ie(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||iXt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function aXt(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:pn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function uXt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let lXt=0;function DF(e,t,n){this.id=++lXt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Tm(e,t,n){return new DF(e,t,n)}DF.prototype={_filter:nc,_apply:na,targets(){return this._targets||(this._targets=kF(jI))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Tm(e);return this.targets().add(t),t},apply(e){const t=Tm(null,e);return this.targets().add(t),t},merge(){const e=Tm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Tm();return this.targets().add(Tm(null,null,bZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Tm(null,null,()=>n=!0)),t.targets().add(Tm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=nc,this._targets=null}};function cXt(e,t,n,r){const i=this,s=Tm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function fXt(e,t){const n=this.locale();return C5e(e,t,n.timeParse,n.utcParse)}function dXt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function hXt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:A5e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function pXt(e,t,n){const r=this,i=r._pending||mXt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(nc).insert(s.data||[])),i.done(),s}function mXt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const gXt={skip:!0};function yXt(e,t,n,r,i){return(e instanceof Dr?_Xt:vXt)(this,e,t,n,r,i),this}function vXt(e,t,n,r,i,s){const o=hn({},s,gXt);let a,u;pn(n)||(n=ra(n)),r===void 0?a=l=>e.touch(n(l)):pn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;k5e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function _Xt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,bXt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function bXt(e,t){return t=pn(t)?t:ra(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function wXt(e){e.rank=++this._rank}function EXt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Te("Cycle detected in dataflow graph.")}const fL={},Xf=1,Rm=2,Rh=4,xXt=Xf|Rm,D0e=Xf|Rh,y_=Xf|Rm|Rh,L0e=8,vS=16,M0e=32,F0e=64;function Rg(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function kj(e,t){const n=[];return $m(e,t,r=>n.push(r)),n}function B0e(e,t){const n={};return e.visit(t,r=>{n[$t(r)]=1}),r=>n[$t(r)]?null:r}function ZP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Rg.prototype={StopPropagation:fL,ADD:Xf,REM:Rm,MOD:Rh,ADD_REM:xXt,ADD_MOD:D0e,ALL:y_,REFLOW:L0e,SOURCE:vS,NO_SOURCE:M0e,NO_FIELDS:F0e,fork(e){return new Rg(this.dataflow).init(this,e)},clone(){const e=this.fork(y_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(y_|vS)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Rg(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&F0e)&&(n.fields=e.fields),t&Xf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Rm?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Rh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&M0e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||y_;return t&Xf&&this.add.length||t&Rm&&this.rem.length||t&Rh&&this.mod.length},reflow(e){if(e)return this.fork(y_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Rh,B0e(this,Xf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Xf&&(n.addF=ZP(n.addF,t)),e&Rm&&(n.remF=ZP(n.remF,t)),e&Rh&&(n.modF=ZP(n.modF,t)),e&vS&&(n.srcF=ZP(n.srcF,t)),n},materialize(e){e=e||y_;const t=this;return e&Xf&&t.addF&&(t.add=kj(t.add,t.addF),t.addF=null),e&Rm&&t.remF&&(t.rem=kj(t.rem,t.remF),t.remF=null),e&Rh&&t.modF&&(t.mod=kj(t.mod,t.modF),t.modF=null),e&vS&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&vS)return $m(n.source,n.srcF,r),n;e&Xf&&$m(n.add,n.addF,r),e&Rm&&$m(n.rem,n.remF,r),e&Rh&&$m(n.mod,n.modF,r);const i=n.source;if(e&L0e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$m(i,B0e(n,D0e),r):$m(i,n.srcF,r))}return n}};function RZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}We(RZ,Rg,{fork(e){const t=new Rg(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ie(e)?e.some(r=>n[r]):n[e]:0},filter(){Te("MultiPulse does not support filtering.")},materialize(){Te("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function SXt(e,t,n){const r=this,i=[];if(r._pulse)return $5e(r);if(r._pending&&await r._pending,t&&await k$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Rg(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=kF(jI);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=fL),u!==fL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await k$(r,c[f].callback)}return n&&await k$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function TXt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function AXt(e,t,n){return this._pulse?$5e(this):(this.evaluate(e,t,n),this)}function CXt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function $5e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function IXt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function OXt(e,t){const n=e.source,r=this._clock;return n&&Ie(n)?new RZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||PXt(this._pulse,n&&n.pulse)}function PXt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==fL&&(e.source=t.source),e)}const NZ={skip:!1,force:!1};function kXt(e,t){const n=t||NZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function $Xt(e,t,n){const r=n||NZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function RXt(e,t,n){this.touch(e,n||NZ);const r=new Rg(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function NXt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),R5e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,DXt(t,0,e)):r=n,r}}}function R5e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function DXt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,R5e(e,r,t,n)}function Wb(){this.logger(mZ()),this.logLevel(hZ),this._clock=0,this._rank=0,this._locale=IZ();try{this._loader=PF()}catch{}this._touched=kF(jI),this._input={},this._pulse=null,this._heap=NXt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function _S(e){return function(){return this._log[e].apply(this,arguments)}}Wb.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:_S("error"),warn:_S("warn"),info:_S("info"),debug:_S("debug"),logLevel:_S("level"),cleanThreshold:1e4,add:aXt,connect:uXt,rank:wXt,rerank:EXt,pulse:RXt,touch:kXt,update:$Xt,changeset:Uv,ingest:dXt,parse:fXt,preload:pXt,request:hXt,events:cXt,on:yXt,evaluate:SXt,run:AXt,runAsync:TXt,runAfter:CXt,_enqueue:IXt,_getPulse:OXt};function Ee(e,t){Dr.call(this,e,null,t)}We(Ee,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Gw={};function N5e(e){const t=D5e(e);return t&&t.Definition||null}function D5e(e){return e=e&&e.toLowerCase(),Nt(Gw,e)?Gw[e]:null}function*L5e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function DZ(e,t,n){const r=Float64Array.from(L5e(e,n));return r.sort($g),t.map(i=>mKt(r,i))}function LZ(e,t){return DZ(e,[.25,.5,.75],t)}function MZ(e,t){const n=e.length,r=lKt(e,t),i=LZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function M5e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var ic=Math.random;function LXt(e){ic=e}function F5e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(L5e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(ic()*s)];c[l]=a/s}return c.sort($g),[IH(c,n/2),IH(c,1-n/2)]}function B5e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?MXt(s,t+t/4):s}function MXt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function FXt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function BXt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*ic())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const j5e=Math.sqrt(2*Math.PI),jXt=Math.SQRT2;let bS=NaN;function LF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(bS===bS)n=bS,bS=NaN;else{do n=ic()*2-1,r=ic()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,bS=r*s}return e+n*t}function FZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*j5e)}function MF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function FF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*jXt*zXt(2*e-1)}function zXt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function BZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>LF(n,r),pdf:s=>FZ(s,n,r),cdf:s=>MF(s,n,r),icdf:s=>FF(s,n,r)};return i.mean(e).stdev(t)}function jZ(e,t){const n=BZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=MZ(e)),i):t},sample(){return e[~~(ic()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function zZ(e,t){return e=e||0,t=t??1,Math.exp(e+LF()*t)}function UZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*j5e*e)}function VZ(e,t,n){return MF(Math.log(e),t,n)}function HZ(e,t,n){return Math.exp(FF(e,t,n))}function z5e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>zZ(n,r),pdf:s=>UZ(s,n,r),cdf:s=>VZ(s,n,r),icdf:s=>HZ(s,n,r)};return i.mean(e).stdev(t)}function U5e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=ic();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function qZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ic()}function WZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function GZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function YZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function V5e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>qZ(n,r),pdf:s=>WZ(s,n,r),cdf:s=>GZ(s,n,r),icdf:s=>YZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function KZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function VI(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function BF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function HI(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function dx(e,t,n,r,i){let s=0,o=0;return HI(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function XZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;HI(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=VI(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:dx(e,t,n,i,l)}}function H5e(e,t,n){let r=0,i=0,s=0,o=0,a=0;HI(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=VI(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:dx(e,t,n,i,l)}}function q5e(e,t,n){const[r,i,s,o]=BF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;HI(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=VI(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:dx(e,t,n,o,y)}}function W5e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;HI(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=VI(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:dx(e,t,n,a,c)}}function QZ(e,t,n){const[r,i,s,o]=BF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,b=(f*y-d*l)/v,E=-_*u,w=x=>(x=x-s,_*x*x+b*x+E+o);return{coef:[E-b*s+_*s*s+o,b-2*_*s,_],predict:w,rSquared:dx(e,t,n,o,w)}}function G5e(e,t,n,r){if(r===0)return KZ(e,t,n);if(r===1)return XZ(e,t,n);if(r===2)return QZ(e,t,n);const[i,s,o,a]=BF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=VXt(c),v=_=>{_-=o;let b=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)b+=y[d]*Math.pow(_,d);return b};return{coef:UXt(f,y,-o,a),predict:v,rSquared:dx(e,t,n,a,v)}}function UXt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function VXt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const j0e=2,z0e=1e-12;function Y5e(e,t,n,r){const[i,s,o,a]=BF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=j0e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],b=y-i[v]>i[_]-y?v:_;let E=0,w=0,x=0,S=0,I=0;const C=1/Math.abs(i[b]-y||1);for(let N=v;N<=_;++N){const $=i[N],D=s[N],B=HXt(Math.abs(y-$)*C)*d[N],V=$*B;E+=B,w+=V,x+=D*B,S+=D*V,I+=$*V}const[O,z]=VI(w/E,x/E,S/E,I/E);c[g]=O+z*y,f[g]=Math.abs(s[g]-c[g]),qXt(i,g+1,p)}if(h===j0e)break;const m=YFe(f);if(Math.abs(m)<z0e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?z0e:(v=1-y*y)*v}return WXt(i,c,o,a)}function HXt(e){return(e=1-e*e*e)*e*e}function qXt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function WXt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const GXt=.5*Math.PI/180;function jF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=YXt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&KXt(f,m,d,h,p)>GXt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function YXt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function KXt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function XXt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function FH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:XXt(e)}function K5e(e,t,n){return n||e+(t?"_"+t:"")}const $j=()=>{},QXt={init:$j,add:$j,rem:$j,idx:0},JA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},qI=Object.keys(JA).filter(e=>e!=="__count__");function JXt(e,t){return(n,r)=>hn({name:e,aggregate_param:r,out:n||e},QXt,t)}[...qI,"__count__"].forEach(e=>{JA[e]=JXt(e,JA[e])});function X5e(e,t,n){return JA[e](n,t)}function Q5e(e,t){return e.idx-t.idx}function ZXt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=JA[i]())})};return e.forEach(n),Object.values(t).sort(Q5e)}function eQt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function tQt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function nQt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function rQt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function J5e(e,t){const n=t||na,r=ZXt(e),i=e.slice().sort(Q5e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=eQt,s.prototype.add=tQt,s.prototype.rem=nQt,s.prototype.set=rQt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function JZ(e){this._key=e?tc(e):$t,this.reset()}const xo=JZ.prototype;xo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};xo.add=function(e){this._add.push(e)};xo.rem=function(e){this._rem.push(e)};xo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};xo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Nt(n,s)||(n[s]=1,++i);return i};xo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=RFe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};xo.argmin=function(e){return this.extent(e)[0]||{}};xo.argmax=function(e){return this.extent(e)[1]||{}};xo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};xo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};xo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=LZ(this.values(),e),this._get=e),this._q};xo.q1=function(e){return this.quartile(e)[0]};xo.q2=function(e){return this.quartile(e)[1]};xo.q3=function(e){return this.quartile(e)[2]};xo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=F5e(this.values(),1e3,.05,e),this._get=e),this._ci};xo.ci0=function(e){return this.ci(e)[0]};xo.ci1=function(e){return this.ci(e)[1]};function u0(e){Ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}u0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:qI},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};We(u0,Ee,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=nt(Yo(v)),b=_.length;let E=0,w;for(;E<b;++E)r[w=_[E]]||(r[w]=1,t.push(w))}this._dims=nt(e.groupby),this._dnames=this._dims.map(v=>{const _=Ni(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:FH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Te("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Te("Null aggregate field specified."),m=Ni(f),g=K5e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(X5e(d,h,g))}return this._measures=this._measures.map(v=>J5e(v,v.field)),Object.create(null)},cellkey:FH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new JZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?P5e(t.tuple,s):dr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const iQt=1e-14;function ZZ(e){Ee.call(this,null,e)}ZZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};We(ZZ,Ee,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Yo(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=M5e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Vo(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(iQt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ou(u,Yo(t),e.name||"bin_"+Ni(t))}});function Z5e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?BFe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function eee(e){Ee.call(this,[],e)}eee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};We(eee,Ee,{transform(e,t){const n=t.fork(t.ALL),r=Z5e($t,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(zv(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function e8e(e){Dr.call(this,null,sQt,e)}We(e8e,Dr);function sQt(e){return this.value&&!e.modified()?this.value:_Z(e.fields,e.orders)}function tee(e){Ee.call(this,null,e)}tee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function oQt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}We(tee,Ee,{transform(e,t){const n=f=>d=>{for(var h=oQt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=dr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function nee(e){Ee.call(this,null,e)}nee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};We(nee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=aQt(a,i,s,e.filter||nc)):n.mod=a,n.source=this.value,n.modifies(r)}});function aQt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(dr(s)),s={},s[t]=l);return i}const U0e={kde:jZ,mixture:U5e,normal:BZ,lognormal:z5e,uniform:V5e},uQt="distributions",V0e="function",lQt="field";function t8e(e,t){const n=e[V0e];Nt(U0e,n)||Te("Unknown distribution function: "+n);const r=U0e[n]();for(const i in e)i===lQt?r.data((e.from||t()).map(e[i])):i===uQt?r[i](e[i].map(s=>t8e(s,t))):typeof r[i]===V0e&&r[i](e[i]);return r}function ree(e){Ee.call(this,null,e)}const n8e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],cQt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:n8e},{name:"weights",type:"number",array:!0}]};ree.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:n8e.concat(cQt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(ree,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t8e(e.distribution,fQt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Te("Invalid density method: "+o),!e.extent&&!r.data&&Te("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Jd(r.data()),l=jF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],dr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function fQt(e){return()=>e.materialize(e.SOURCE).source}function r8e(e,t){return e?e.map((n,r)=>t[r]||Ni(n)):null}function iee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const i8e="bin";function see(e){Ee.call(this,null,e)}see.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:i8e}]};const dQt=(e,t)=>zI(Jd(e,t))/30;We(see,Ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=iee(t.source,e.groupby,na),i=e.smooth||!1,s=e.field,o=e.step||dQt(n,s),a=zv((p,m)=>s(p)-s(m)),u=e.as||i8e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of B5e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function s8e(e){Dr.call(this,null,hQt,e),this.modified(!0)}We(s8e,Dr);function hQt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ou(n=>t(n,e),Yo(t),Ni(t))}function oee(e){Ee.call(this,[void 0,void 0],e)}oee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};We(oee,Ee,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Vo(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ni(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function aee(e,t){Dr.call(this,e),this.parent=t,this.count=0}We(aee,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function zF(e){Ee.call(this,{},e),this._keys=lx();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}We(zF,Ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Nt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new aee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=$t(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set($t(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=$t(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get($t(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=$t(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function o8e(e){Dr.call(this,null,pQt,e)}We(o8e,Dr);function pQt(e){return this.value&&!e.modified()?this.value:Ie(e.name)?nt(e.name).map(t=>tc(t)):tc(e.name,e.as)}function uee(e){Ee.call(this,lx(),e)}uee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};We(uee,Ee,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=$t(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set($t(f),1)});function c(f){const d=$t(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function lee(e){Ee.call(this,[],e)}lee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};We(lee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r8e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=$Z(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function cee(e){Ee.call(this,[],e)}cee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};We(cee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ni),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=$Z(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function fee(e){Ee.call(this,null,e)}fee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};We(fee,Ee,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function a8e(e){Ee.call(this,[],e)}We(a8e,Ee,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=dr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const ek={value:"value",median:YFe,mean:gKt,min:CH,max:_1},mQt=[];function dee(e){Ee.call(this,[],e)}dee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function gQt(e){var t=e.method||ek.value,n;if(ek[t]==null)Te("Unrecognized imputation method: "+t);else return t===ek.value?(n=e.value!==void 0?e.value:0,()=>n):ek[t]}function yQt(e){const t=e.field;return n=>n?t(n):NaN}We(dee,Ee,{transform(e,t){var n=t.fork(t.ALL),r=gQt(e),i=yQt(e),s=Ni(e.field),o=Ni(e.key),a=(e.groupby||[]).map(Ni),u=vQt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,b,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,b=p.length;y<b;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(dr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function vQt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):mQt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function hee(e){u0.call(this,e)}hee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:qI},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};We(hee,u0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function pee(e){Ee.call(this,null,e)}pee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(pee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=iee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ni),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Te("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Jd(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=jZ(h,o)[a],m=e.counts?h.length:1,g=c||Jd(h);jF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(dr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function u8e(e){Dr.call(this,null,_Qt,e)}We(u8e,Dr);function _Qt(e){return this.value&&!e.modified()?this.value:wZ(e.fields,e.flat)}function l8e(e){Ee.call(this,[],e),this._pending=null}We(l8e,Ee,{transform(e,t){const n=t.dataflow;return this._pending?Rj(this,t,this._pending):bQt(e)?t.StopPropagation:e.values?Rj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Rj(this,t,nt(r.data)))}});function bQt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Rj(e,t,n){n.forEach(dr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function mee(e){Ee.call(this,{},e)}mee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};We(mee,Ee,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Te('The "as" parameter has too few output field names.'),c=c||i.map(Ni),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Te("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function c8e(e){Dr.call(this,null,wQt,e)}We(c8e,Dr);function wQt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function f8e(e){Dr.call(this,null,EQt,e)}We(f8e,Dr);function EQt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function d8e(e){Ee.call(this,null,e)}We(d8e,Ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function gee(e){u0.call(this,e)}gee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:qI,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};We(gee,u0,{_transform:u0.prototype.transform,transform(e,t){return this._transform(xQt(e,t),t)}});function xQt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Yo(n).concat(Yo(r)),o=TQt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>SQt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function SQt(e,t,n,r){return Ou(i=>t(i)===e?n(i):NaN,r,e+"")}function TQt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(IF),t?i.slice(0,t):i}function h8e(e){zF.call(this,e)}We(h8e,zF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow($t(s),n,t,s);return(e.modified("field")||r&&t.modified(Yo(r)))&&Te("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(dr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function yee(e){Ee.call(this,null,e)}yee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};We(yee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r8e(e.fields,e.as||[]),s=r?(a,u)=>AQt(a,u,r,i):RF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=$t(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,dr({}));o[$t(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[$t(a)]))}),n}});function AQt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function p8e(e){Ee.call(this,null,e)}We(p8e,Ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vee(e){Ee.call(this,null,e)}vee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const CQt=1e-14;We(vee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=iee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ni),a=[],u=e.step||.01,l=e.probs||jv(u/2,1-CQt,u),c=l.length;return s.forEach(f=>{const d=DZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(dr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function m8e(e){Ee.call(this,null,e)}We(m8e,Ee,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=$t(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=$Z(i);r[$t(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[$t(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function _ee(e){Ee.call(this,[],e),this.count=0}_ee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};We(_ee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[$t(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*ic()),d<o.length&&d>=u&&(f=o[d],s[$t(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=$t(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[$t(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[$t(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[$t(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[$t(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[$t(c)])),this.count=a,this.value=n.source=o,n}});function bee(e){Ee.call(this,null,e)}bee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};We(bee,Ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=jv(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,dr(s)}),n.add=t.add.concat(this.value),n}});function g8e(e){Ee.call(this,null,e),this.modified(!0)}We(g8e,Ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function wee(e){Ee.call(this,null,e)}const y8e=["unit0","unit1"];wee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:TZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:y8e}]};We(wee,Ee,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?fx:cx)(s.unit).offset,a=e.as||y8e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Yo(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:p5e({extent:e.extent||Jd(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=AZ(r),o=this.value||{},a=(n?s5e:i5e)(s,i);return a.unit=Un(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function v8e(e){Ee.call(this,lx(),e)}We(v8e,Ee,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function _8e(e){Ee.call(this,null,e)}We(_8e,Ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(zv(e.sort)):t.source).map(e.field))}});function IQt(e,t,n,r){const i=ZA[e](t,n);return{init:i.init||qm,update:function(s,o){o[r]=i.next(s)}}}const ZA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=ZA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Te("ntile num must be greater than zero.");const n=ZA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Te("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=OQt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function OQt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const PQt=Object.keys(ZA);function b8e(e){const t=nt(e.ops),n=nt(e.fields),r=nt(e.params),i=nt(e.aggregate_params),s=nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){nt(Yo(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ni(g),b=K5e(p,_,s[m]);if(h(g),o.push(b),Nt(ZA,p))a.push(IQt(p,g,y,b));else{if(g==null&&p!=="count"&&Te("Null aggregate field specified."),p==="count"){c.push(b);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(X5e(p,v,b))}}),(c.length||f.length)&&(this.cell=kQt(f,c,d)),this.inputs=Object.keys(u)}const w8e=b8e.prototype;w8e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};w8e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function kQt(e,t,n){e=e.map(u=>J5e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new JZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Eee(e){Ee.call(this,{},e),this._mlen=0,this._mods=[]}Eee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:PQt.concat(qI)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};We(Eee,Ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=zv(e.sort),i=FH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new b8e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)$Qt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Z5e($t),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function $Qt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?UI(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ra(-1)};t.init();for(let f=0;f<u;++f)RQt(c,o,f,u),s&&NQt(c,l),t.update(c,a[f])}function RQt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function NQt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const DQt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:u0,bin:ZZ,collect:eee,compare:e8e,countpattern:tee,cross:nee,density:ree,dotbin:see,expression:s8e,extent:oee,facet:zF,field:o8e,filter:uee,flatten:lee,fold:cee,formula:fee,generate:a8e,impute:dee,joinaggregate:hee,kde:pee,key:u8e,load:l8e,lookup:mee,multiextent:c8e,multivalues:f8e,params:d8e,pivot:gee,prefacet:h8e,project:yee,proxy:p8e,quantile:vee,relay:m8e,sample:_ee,sequence:bee,sieve:g8e,subflow:aee,timeunit:wee,tupleindex:v8e,values:_8e,window:Eee},Symbol.toStringTag,{value:"Module"}));function Ng(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const LQt=()=>typeof Image<"u"?Image:null;function xee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const MQt="identity",Yw="linear",Vp="log",WI="pow",GI="sqrt",UF="symlog",Q1="time",J1="utc",Ld="sequential",hx="diverging",Kw="quantile",VF="quantize",HF="threshold",See="ordinal",BH="point",E8e="band",Tee="bin-ordinal",Cs="continuous",YI="discrete",KI="discretizing",_c="interpolating",Aee="temporal";function FQt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function BQt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Cee(){const e=HE().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=xee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=jv(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,lL(h,m)-1),v=m===g?y:lL(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Cee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function x8e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return x8e(t())},e}function jQt(){return x8e(Cee().paddingInner(1))}var zQt=Array.prototype.map;function UQt(e){return zQt.call(e,Vo)}const VQt=Array.prototype.slice;function S8e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(aKt(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=UQt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=VQt.call(r),n):t.slice()},n.tickFormat=function(r,i){return LNe(e[0],Un(e),r??10,i)},n.copy=function(){return S8e().domain(n.domain()).range(n.range())},n}const dL=new Map,T8e=Symbol("vega_scale");function A8e(e){return e[T8e]=!0,e}function HQt(e){return e&&e[T8e]===!0}function qQt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?FQt(s):s.invertExtent?BQt(s):void 0),s.type=e,A8e(s)};return r.metadata=gf(nt(n)),r}function or(e,t,n){return arguments.length>1?(dL.set(e,qQt(e,t,n)),this):C8e(e)?dL.get(e):void 0}or(MQt,MNe);or(Yw,Np,Cs);or(Vp,BNe,[Cs,Vp]);or(WI,NX,Cs);or(GI,r3t,Cs);or(UF,jNe,Cs);or(Q1,eDe,[Cs,Aee]);or(J1,SLt,[Cs,Aee]);or(Ld,FX,[Cs,_c]);or(`${Ld}-${Yw}`,FX,[Cs,_c]);or(`${Ld}-${Vp}`,tDe,[Cs,_c,Vp]);or(`${Ld}-${WI}`,BX,[Cs,_c]);or(`${Ld}-${GI}`,TLt,[Cs,_c]);or(`${Ld}-${UF}`,nDe,[Cs,_c]);or(`${hx}-${Yw}`,rDe,[Cs,_c]);or(`${hx}-${Vp}`,iDe,[Cs,_c,Vp]);or(`${hx}-${WI}`,jX,[Cs,_c]);or(`${hx}-${GI}`,ALt,[Cs,_c]);or(`${hx}-${UF}`,sDe,[Cs,_c]);or(Kw,zNe,[KI,Kw]);or(VF,UNe,KI);or(HF,VNe,KI);or(Tee,S8e,[YI,KI]);or(See,HE,YI);or(E8e,Cee,YI);or(BH,jQt,YI);function C8e(e){return dL.has(e)}function Vv(e,t){const n=dL.get(e);return n&&n.metadata[t]}function Iee(e){return Vv(e,Cs)}function Xw(e){return Vv(e,YI)}function jH(e){return Vv(e,KI)}function I8e(e){return Vv(e,Vp)}function WQt(e){return Vv(e,Aee)}function O8e(e){return Vv(e,_c)}function P8e(e){return Vv(e,Kw)}const GQt=["clamp","base","constant","exponent"];function k8e(e,t){const n=t[0],r=Un(t)-n;return function(i){return e(n+i*r)}}function qF(e,t,n){return wX(Oee(t||"rgb",n),e)}function $8e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function R8e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ra(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=or(s)().domain([t,n]).range([0,1]),GQt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Oee(e,t){const n=n$t[YQt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function YQt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const KQt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},XQt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function N8e(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function D8e(e,t){for(const n in e)Pee(n,t(e[n]))}const H0e={};D8e(XQt,N8e);D8e(KQt,e=>qF(N8e(e)));function Pee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(H0e[e]=t,this):H0e[e]}const R$="symbol",QQt="discrete",JQt="gradient",ZQt=e=>Ie(e)?e.map(t=>String(t)):String(e),eJt=(e,t)=>e[1]-t[1],tJt=(e,t)=>t[1]-e[1];function kee(e,t,n){let r;return Jn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(zI(e.domain())/n||1)+1))),st(t)&&(r=t.step,t=t.interval),rt(t)&&(t=e.type===Q1?cx(t):e.type==J1?fx(t):Te("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function L8e(e,t,n){let r=e.range(),i=r[0],s=Un(r),o=eJt;if(i>s&&(r=s,s=i,i=r,o=tJt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Un(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function $ee(e,t){return e.bins?L8e(e,e.bins):e.ticks?e.ticks(t):e.domain()}function M8e(e,t,n,r,i,s){const o=t.type;let a=ZQt;if(o===Q1||i===Q1)a=e.timeFormat(r);else if(o===J1||i===J1)a=e.utcFormat(r);else if(I8e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=F8e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function F8e(e,t,n){const r=$ee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const zH={[Kw]:"quantiles",[VF]:"thresholds",[HF]:"domain"},B8e={[Kw]:"quantiles",[VF]:"domain"};function j8e(e,t){return e.bins?iJt(e.bins):e.type===Vp?F8e(e,t,!0):zH[e.type]?rJt(e[zH[e.type]]()):$ee(e,t)}function nJt(e,t,n){const r=t[B8e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function rJt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function iJt(e){const t=e.slice(0,-1);return t.max=Un(e),t}const sJt=e=>zH[e.type]||e.bins;function z8e(e,t,n,r,i,s,o){const a=B8e[t.type]&&s!==Q1&&s!==J1?nJt(e,t,i):M8e(e,t,n,i,s,o);return r===R$&&sJt(t)?oJt(a):r===QQt?aJt(a):uJt(a)}const oJt=e=>(t,n,r)=>{const i=q0e(r[n+1],q0e(r.max,1/0)),s=W0e(t,e),o=W0e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},q0e=(e,t)=>e??t,aJt=e=>(t,n)=>n?e(t):null,uJt=e=>t=>e(t),W0e=(e,t)=>Number.isFinite(e)?t(e):null;function lJt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Un(t),s=i-r;if(e.type===HF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function cJt(e,t,n,r){const i=r||t.type;return rt(n)&&WQt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Q1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===J1?e.utcFormat("%A, %d %B %Y, %X UTC"):z8e(e,t,5,null,n,r,!0)}function U8e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=cJt(e,t,n.format,n.formatType);if(jH(t.type)){const s=j8e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Xw(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Un(s))}`}}let V8e=0;function fJt(){V8e=0}const hL="p_";function Ree(e){return e&&e.gradient}function H8e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?hL:"";return i||(i=e.id="gradient_"+V8e++,r==="radial"?(e.x1=Ff(e.x1,.5),e.y1=Ff(e.y1,.5),e.r1=Ff(e.r1,0),e.x2=Ff(e.x2,.5),e.y2=Ff(e.y2,.5),e.r2=Ff(e.r2,.5),s=hL):(e.x1=Ff(e.x1,0),e.y1=Ff(e.y1,0),e.x2=Ff(e.x2,1),e.y2=Ff(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Ff(e,t){return e??t}function q8e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const G0e={basis:{curve:zLt},"basis-closed":{curve:ULt},"basis-open":{curve:VLt},bundle:{curve:HLt,tension:"beta",value:.85},cardinal:{curve:qLt,tension:"tension",value:0},"cardinal-open":{curve:GLt,tension:"tension",value:0},"cardinal-closed":{curve:WLt,tension:"tension",value:0},"catmull-rom":{curve:YLt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:KLt,tension:"alpha",value:.5},"catmull-rom-open":{curve:XLt,tension:"alpha",value:.5},linear:{curve:zX},"linear-closed":{curve:QLt},monotone:{horizontal:ZLt,vertical:JLt},natural:{curve:eMt},step:{curve:tMt},"step-after":{curve:rMt},"step-before":{curve:nMt}};function Nee(e,t,n){var r=Nt(G0e,e)&&G0e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const dJt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},hJt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,pJt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,mJt=/^((\s+,?\s*)|(,\s*))/,gJt=/^[01]/;function Qw(e){const t=[];return(e.match(hJt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=dJt[s],a=yJt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function yJt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?gJt:pJt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(mJt);u!==null&&(i+=u[0].length)}return r}const l0=Math.PI/180,vJt=1e-14,Ny=Math.PI/2,fd=Math.PI*2,v_=Math.sqrt(3)/2;var Nj={},Dj={},W8e=[].join;function _Jt(e,t,n,r,i,s,o,a,u){const l=W8e.call(arguments);if(Nj[l])return Nj[l];const c=o*l0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,b=g*a+y*u,E=v*a+_*u,w=g*e+y*t,x=v*e+_*t;let I=1/((w-b)*(w-b)+(x-E)*(x-E))-.25;I<0&&(I=0);let C=Math.sqrt(I);s==i&&(C=-C);const O=.5*(b+w)-C*(x-E),z=.5*(E+x)+C*(w-b),N=Math.atan2(E-z,b-O);let D=Math.atan2(x-z,w-O)-N;D<0&&s===1?D+=fd:D>0&&s===0&&(D-=fd);const B=Math.ceil(Math.abs(D/(Ny+.001))),V=[];for(let j=0;j<B;++j){const G=N+j*D/B,U=N+(j+1)*D/B;V[j]=[O,z,G,U,n,r,f,d]}return Nj[l]=V}function bJt(e){const t=W8e.call(e);if(Dj[t])return Dj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),b=8/3*_*_/Math.sin(v),E=n+p-b*m,w=r+m+b*p,x=n+g,S=r+y,I=x+b*y,C=S-b*g;return Dj[t]=[c*E+f*w,d*E+h*w,c*I+f*C,d*I+h*C,c*x+f*S,d*x+h*S]}const Tl=["l",0,0,0,0,0,0,0];function wJt(e,t,n){const r=Tl[0]=e[0];if(r==="a"||r==="A")Tl[1]=t*e[1],Tl[2]=n*e[2],Tl[3]=e[3],Tl[4]=e[4],Tl[5]=e[5],Tl[6]=t*e[6],Tl[7]=n*e[7];else if(r==="h"||r==="H")Tl[1]=t*e[1];else if(r==="v"||r==="V")Tl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Tl[i]=(i%2==1?t:n)*e[i];return Tl}function eC(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=wJt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Y0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Y0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Y0e(e,t,n,r){const i=_Jt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=bJt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const K0e=.5773502691896257,X0e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,fd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=v_*n,i=r-n*K0e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=v_*n,i=r-n*K0e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=v_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=v_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=v_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=v_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function G8e(e){return Nt(X0e,e)?X0e[e]:EJt(e)}var Lj={};function EJt(e){if(!Nt(Lj,e)){const t=Qw(e);Lj[e]={draw:function(n,r){eC(n,t,0,0,Math.sqrt(r)/2)}}}return Lj[e]}const bm=.448084975506;function xJt(e){return e.x}function SJt(e){return e.y}function TJt(e){return e.width}function AJt(e){return e.height}function Th(e){return typeof e=="function"?e:()=>+e}function tk(e,t,n){return Math.max(t,Math.min(e,n))}function Y8e(){var e=xJt,t=SJt,n=TJt,r=AJt,i=Th(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=tk(+i.call(this,c),0,v),b=tk(+s.call(this,c),0,v),E=tk(+o.call(this,c),0,v),w=tk(+a.call(this,c),0,v);if(u||(u=h=$4()),_<=0&&b<=0&&E<=0&&w<=0)u.rect(p,m,g,y);else{var x=p+g,S=m+y;u.moveTo(p+_,m),u.lineTo(x-b,m),u.bezierCurveTo(x-bm*b,m,x,m+bm*b,x,m+b),u.lineTo(x,S-w),u.bezierCurveTo(x,S-bm*w,x-bm*w,S,x-w,S),u.lineTo(p+E,S),u.bezierCurveTo(p+bm*E,S,p,S-bm*E,p,S-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+bm*_,p+bm*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Th(c),l):e},l.y=function(c){return arguments.length?(t=Th(c),l):t},l.width=function(c){return arguments.length?(n=Th(c),l):n},l.height=function(c){return arguments.length?(r=Th(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Th(c),s=f!=null?Th(f):i,a=d!=null?Th(d):i,o=h!=null?Th(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function K8e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,b=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(o+v,a+_),i.arc(o,a,u,b,b+Math.PI)}else i.arc(f,d,p,0,fd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=$4()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function XI(e,t){return e??t}const QI=e=>e.x||0,JI=e=>e.y||0,CJt=e=>e.width||0,IJt=e=>e.height||0,OJt=e=>(e.x||0)+(e.width||0),PJt=e=>(e.y||0)+(e.height||0),kJt=e=>e.startAngle||0,$Jt=e=>e.endAngle||0,RJt=e=>e.padAngle||0,NJt=e=>e.innerRadius||0,DJt=e=>e.outerRadius||0,LJt=e=>e.cornerRadius||0,MJt=e=>XI(e.cornerRadiusTopLeft,e.cornerRadius)||0,FJt=e=>XI(e.cornerRadiusTopRight,e.cornerRadius)||0,BJt=e=>XI(e.cornerRadiusBottomRight,e.cornerRadius)||0,jJt=e=>XI(e.cornerRadiusBottomLeft,e.cornerRadius)||0,zJt=e=>XI(e.size,64),UJt=e=>e.size||1,WF=e=>e.defined!==!1,VJt=e=>G8e(e.shape||"circle"),HJt=AV().startAngle(kJt).endAngle($Jt).padAngle(RJt).innerRadius(NJt).outerRadius(DJt).cornerRadius(LJt),qJt=fDe().x(QI).y1(JI).y0(PJt).defined(WF),WJt=fDe().y(JI).x1(QI).x0(OJt).defined(WF),GJt=cDe().x(QI).y(JI).defined(WF),YJt=Y8e().x(QI).y(JI).width(CJt).height(IJt).cornerRadius(MJt,FJt,BJt,jJt),KJt=jLt().type(VJt).size(zJt),XJt=K8e().x(QI).y(JI).defined(WF).size(UJt);function Dee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function QJt(e,t){return HJt.context(e)(t)}function JJt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?WJt:qJt).curve(Nee(r,n.orient,n.tension)).context(e)(t)}function ZJt(e,t){const n=t[0],r=n.interpolate||"linear";return GJt.curve(Nee(r,n.orient,n.tension)).context(e)(t)}function px(e,t,n,r){return YJt.context(e)(t,n,r)}function eZt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function tZt(e,t){return KJt.context(e)(t)}function nZt(e,t){return XJt.context(e)(t)}var X8e=1;function Q8e(){X8e=1}function Lee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+X8e++),o=i.clipping[s]||(i.clipping[s]={id:s});return pn(r)?o.path=r(null):Dee(n)?o.path=px(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function os(e){this.clear(),e&&this.union(e)}os.prototype={clone(){return new os(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function GF(e){this.mark=e,this.bounds=this.bounds||new os}function YF(e){GF.call(this,e),this.items=this.items||[]}We(YF,GF);function Mee(e){this._pending=0,this._loader=e||PF()}function Q0e(e){e._pending+=1}function wS(e){e._pending-=1}Mee.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Q0e(t),t._loader.sanitize(e,{context:"href"}).then(n=>(wS(t),n)).catch(()=>(wS(t),null))},loadImage(e){const t=this,n=LQt();return Q0e(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Nt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>wS(t),s.onerror=()=>wS(t),s.src=i,s}).catch(r=>(wS(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function rm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?rZt(t,r):0))}return e}function rZt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const iZt=fd-1e-8;let KF,N$,D$,r1,UH,L$,VH,HH;const ng=(e,t)=>KF.add(e,t),M$=(e,t)=>ng(N$=e,D$=t),J0e=e=>ng(e,KF.y1),Z0e=e=>ng(KF.x1,e),Dy=(e,t)=>UH*e+VH*t,Ly=(e,t)=>L$*e+HH*t,Mj=(e,t)=>ng(Dy(e,t),Ly(e,t)),Fj=(e,t)=>M$(Dy(e,t),Ly(e,t));function ZI(e,t){return KF=e,t?(r1=t*l0,UH=HH=Math.cos(r1),L$=Math.sin(r1),VH=-L$):(UH=HH=1,r1=L$=VH=0),sZt}const sZt={beginPath(){},closePath(){},moveTo:Fj,lineTo:Fj,rect(e,t,n,r){r1?(Mj(e+n,t),Mj(e+n,t+r),Mj(e,t+r),Fj(e,t)):(ng(e+n,t+r),M$(e,t))},quadraticCurveTo(e,t,n,r){const i=Dy(e,t),s=Ly(e,t),o=Dy(n,r),a=Ly(n,r);eye(N$,i,o,J0e),eye(D$,s,a,Z0e),M$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Dy(e,t),a=Ly(e,t),u=Dy(n,r),l=Ly(n,r),c=Dy(i,s),f=Ly(i,s);tye(N$,o,u,c,J0e),tye(D$,a,l,f,Z0e),M$(c,f)},arc(e,t,n,r,i,s){if(r+=r1,i+=r1,N$=n*Math.cos(i)+e,D$=n*Math.sin(i)+t,Math.abs(i-r)>iZt)ng(e-n,t-n),ng(e+n,t+n);else{const o=l=>ng(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%fd,r<0&&(r+=fd),i=i%fd,i<0&&(i+=fd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=fd,a=r-r%Ny,u=0;u<4&&a>i;++u,a-=Ny)o(a);else for(a=r-r%Ny+Ny,u=0;u<4&&a<i;++u,a=a+Ny)o(a)}}};function eye(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function tye(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>vJt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(nye(u,e,t,n,r)),0<l&&l<1&&i(nye(l,e,t,n,r))}function nye(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Dg=(Dg=Ng(1,1))?Dg.getContext("2d"):null;const qH=new os;function Fee(e){return function(t,n){if(!Dg)return!0;e(Dg,t),qH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=qH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Dg.isPointInPath(u,a))return!0;return!1}}function Bee(e,t){return t.contains(e.x||0,e.y||0)}function J8e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(qH.set(n,r,n+i,r+s))}function Z8e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return cb(t,n,r,i,s)}function cb(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Jw(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Pc(e,t){return e??t}function rye(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function oZt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Pc(t.x1,.5)*r,n.y1+Pc(t.y1,.5)*i,Math.max(r,i)*Pc(t.r1,0),n.x1+Pc(t.x2,.5)*r,n.y1+Pc(t.y2,.5)*i,Math.max(r,i)*Pc(t.r2,.5));else{const o=Pc(t.x1,0),a=Pc(t.y1,0),u=Pc(t.x2,1),l=Pc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Ng(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=rye(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return rye(s,t.stops)}function e9e(e,t,n){return Ree(n)?oZt(e,n,t.bounds):n}function pL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=e9e(e,t,t.fill),!0):!1}var aZt=[];function Zw(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=e9e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||aZt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function uZt(e,t){return e.zindex-t.zindex||e.index-t.index}function jee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(uZt)}function vf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=jee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function mL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=jee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function zee(e){return function(t,n,r){vf(n,i=>{(!r||r.intersects(i.bounds))&&t9e(e,t,i,i)})}}function lZt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&t9e(e,t,n.items[0],n.items)}}function t9e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Jw(t,n),n.fill&&pL(t,n,i)&&t.fill(),n.stroke&&Zw(t,n,i)&&t.stroke()))}function XF(e){return e=e||nc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,mL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function eO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Uee(e){return XF(eO(e))}function b1(e,t){return"translate("+e+","+t+")"}function Vee(e){return"rotate("+e+")"}function cZt(e,t){return"scale("+e+","+t+")"}function n9e(e){return b1(e.x||0,e.y||0)}function fZt(e){return b1(e.x||0,e.y||0)+(e.angle?" "+Vee(e.angle):"")}function dZt(e){return b1(e.x||0,e.y||0)+(e.angle?" "+Vee(e.angle):"")+(e.scaleX||e.scaleY?" "+cZt(e.scaleX||1,e.scaleY||1):"")}function Hee(e,t,n){function r(o,a){o("transform",fZt(a)),o("d",t(null,a))}function i(o,a){return t(ZI(o,a.angle),a),rm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=l0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:zee(s),pick:Uee(s),isect:n||Fee(s)}}var hZt=Hee("arc",QJt);function pZt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function mZt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function gZt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function qee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(ZI(u),c),rm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=eO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:lZt(s),pick:a,isect:Bee,tip:n}}var yZt=qee("area",JJt,pZt);function vZt(e,t){var n=t.clip;e.save(),pn(n)?(e.beginPath(),n(e),e.clip()):r9e(e,t.group)}function r9e(e,t){e.beginPath(),Dee(t)?px(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function i9e(e){const t=Pc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function _Zt(e,t){e("transform",n9e(t))}function s9e(e,t){const n=i9e(t);e("d",px(null,t,n,n))}function bZt(e,t){e("class","background"),e("aria-hidden",!0),s9e(e,t)}function wZt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?s9e(e,t):e("d","")}function EZt(e,t,n){const r=t.clip?Lee(n,t,t):null;e("clip-path",r)}function xZt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),rm(e,t),e.translate(t.x||0,t.y||0)}function tC(e,t,n,r){const i=i9e(t);e.beginPath(),px(e,t,(n||0)+i,(r||0)+i)}const SZt=eO(tC),TZt=eO(tC,!1),AZt=eO(tC,!0);function CZt(e,t,n,r){vf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(tC(e,i,s,o),Jw(e,i),i.fill&&pL(e,i,u)&&e.fill(),i.stroke&&!a&&Zw(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&r9e(e,i),n&&n.translate(-s,-o),vf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(tC(e,i,s,o),Jw(e,i),Zw(e,i,u)&&e.stroke())})}function IZt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return mL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Dee(u)&&!AZt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&TZt(e,u,o,a)?(e.restore(),u):(l=mL(u,v=>OZt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&SZt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function OZt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var PZt={type:"group",tag:"g",nested:!1,attr:_Zt,bound:xZt,draw:CZt,pick:IZt,isect:J8e,content:EZt,background:bZt,foreground:wZt},nC={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Wee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Gee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Yee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function QF(e,t){return e==="center"?t/2:e==="right"?t:0}function JF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function kZt(e,t,n){const r=Wee(t,n),i=Gee(t,r),s=Yee(t,r),o=(t.x||0)-QF(t.align,i),a=(t.y||0)-JF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,nC["xmlns:xlink"],"xlink:href"),e("transform",b1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function $Zt(e,t){const n=t.image,r=Gee(t,n),i=Yee(t,n),s=(t.x||0)-QF(t.align,r),o=(t.y||0)-JF(t.baseline,i);return e.set(s,o,s+r,o+i)}function RZt(e,t,n){vf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Wee(r,this);let s=Gee(r,i),o=Yee(r,i);if(s===0||o===0)return;let a=(r.x||0)-QF(r.align,s),u=(r.y||0)-JF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Jw(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var NZt={type:"image",tag:"image",nested:!1,attr:kZt,bound:$Zt,draw:RZt,pick:XF(),isect:nc,get:Wee,xOffset:QF,yOffset:JF},DZt=qee("line",ZJt,mZt);function LZt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",dZt(t)),e("d",t.path)}function F$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*l0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Qw(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),eC(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):eC(e,u,r,i,s,o)}function MZt(e,t){return F$(ZI(e,t.angle),t)?e.set(0,0,0,0):rm(e,t,!0)}var FZt={type:"path",tag:"path",nested:!1,attr:LZt,bound:MZt,draw:zee(F$),pick:Uee(F$),isect:Fee(F$)};function BZt(e,t){e("d",px(null,t))}function jZt(e,t){var n,r;return rm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function iye(e,t){e.beginPath(),px(e,t)}var zZt={type:"rect",tag:"path",nested:!1,attr:BZt,bound:jZt,draw:zee(iye),pick:Uee(iye),isect:J8e};function UZt(e,t){e("transform",n9e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function VZt(e,t){var n,r;return rm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function o9e(e,t,n){var r,i,s,o;return t.stroke&&Zw(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function HZt(e,t,n){vf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&o9e(e,r,i)&&(Jw(e,r),e.stroke())}})}function qZt(e,t,n,r){return e.isPointInStroke?o9e(e,t,1)&&e.isPointInStroke(n,r):!1}var WZt={type:"rule",tag:"line",nested:!1,attr:UZt,bound:VZt,draw:HZt,pick:XF(qZt),isect:Z8e},GZt=Hee("shape",eZt),YZt=Hee("symbol",tZt,Bee);const sye=FFe();var el={height:dh,measureWidth:Kee,estimateWidth:gL,width:gL,canvas:a9e};a9e(!0);function a9e(e){el.width=e&&Dg?Kee:gL}function gL(e,t){return u9e(f0(e,t),dh(e))}function u9e(e,t){return~~(.8*e.length*t)}function Kee(e,t){return dh(e)<=0||!(t=f0(e,t))?0:l9e(t,ZF(e))}function l9e(e,t){const n=`(${t}) ${e}`;let r=sye.get(n);return r===void 0&&(Dg.font=t,r=Dg.measureText(e).width,sye.set(n,r)),r}function dh(e){return e.fontSize!=null?+e.fontSize||0:11}function c0(e){return e.lineHeight!=null?e.lineHeight:dh(e)+2}function KZt(e){return Ie(e)?e.length>1?e:e[0]:e}function tO(e){return KZt(e.lineBreak&&e.text&&!Ie(e.text)?e.text.split(e.lineBreak):e.text)}function Xee(e){const t=tO(e);return(Ie(t)?t.length-1:0)*c0(e)}function f0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?QZt(e,n):n}function XZt(e){if(el.width===Kee){const t=ZF(e);return n=>l9e(n,t)}else if(el.width===gL){const t=dh(e);return n=>u9e(n,t)}else return t=>el.width(e,t)}function QZt(e,t){var n=+e.limit,r=XZt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function nO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function ZF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+dh(e)+"px "+nO(e,t)}function Qee(e){var t=e.baseline,n=dh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*c0(e):t==="line-bottom"?.29*n-.5*c0(e):0)}const JZt={left:"start",center:"middle",right:"end"},p2=new os;function e5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ny,t+=r*Math.cos(i),n+=r*Math.sin(i)),p2.x1=t,p2.y1=n,p2}function ZZt(e,t){var n=t.dx||0,r=(t.dy||0)+Qee(t),i=e5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",JZt[t.align]||"start"),a?(u=b1(s,o)+" "+Vee(a),(n||r)&&(u+=" "+b1(n,r))):u=b1(s+n,o+r),e("transform",u)}function Jee(e,t,n){var r=el.height(t),i=t.align,s=e5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Qee(t)-Math.round(.8*r),c=tO(t),f;if(Ie(c)?(r+=c0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,el.width(t,h)),0)):f=el.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*l0,o,a);else if(n===2)return e.rotatedPoints(t.angle*l0,o,a);return e}function een(e,t,n){vf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=ZF(r),e.textAlign=r.align||"left",s=e5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*l0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Qee(r),c=tO(r),Jw(e,r),Ie(c))for(l=c0(r),u=0;u<c.length;++u)f=f0(r,c[u]),r.fill&&pL(e,r,i)&&e.fillText(f,o,a),r.stroke&&Zw(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=f0(r,c),r.fill&&pL(e,r,i)&&e.fillText(f,o,a),r.stroke&&Zw(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function ten(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=e5(t),a=o.x1,u=o.y1,l=Jee(p2,t,1),c=-t.angle*l0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function nen(e,t){const n=Jee(p2,e,2);return cb(t,n[0],n[1],n[2],n[3])||cb(t,n[0],n[1],n[4],n[5])||cb(t,n[4],n[5],n[6],n[7])||cb(t,n[2],n[3],n[6],n[7])}var ren={type:"text",tag:"text",nested:!1,attr:ZZt,bound:Jee,draw:een,pick:XF(ten),isect:nen},ien=qee("trail",nZt,gZt),fl={arc:hZt,area:yZt,group:PZt,image:NZt,line:DZt,path:FZt,rect:zZt,rule:WZt,shape:GZt,symbol:YZt,text:ren,trail:ien};function WH(e,t,n){var r=fl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new os),e,n)}var oye={mark:null};function c9e(e,t,n){var r=fl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(oye.mark=e,l=oye),c=WH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new os,o)for(a=0,u=s.length;a<u;++a)t.union(WH(s[a],i,n));return e.bounds=t}const sen=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function f9e(e,t){return JSON.stringify(e,sen,t)}function d9e(e){const t=typeof e=="string"?JSON.parse(e):e;return h9e(t)}function h9e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&h9e(n[i]);return t&&c9e(e),e}function Zee(e){arguments.length?this.root=d9e(e):(this.root=p9e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new YF(this.root)])}Zee.prototype={toJSON(e){return f9e(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=p9e(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function p9e(e,t){const n={bounds:new os,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function rg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ete(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ms(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=rg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Ml(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function m9e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function t5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function oen(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=fl[i.marktype]).tip){for(o=t5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function d0(e,t){this._active=null,this._handlers={},this._loader=e||PF(),this._tooltip=t||aen}function aen(e,t,n,r){e.element().setAttribute("title",r||"")}d0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=rg(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=oen(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function bl(e){this._el=null,this._bgcolor=null,this._loader=new Mee(e)}bl.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const uen="keydown",len="keypress",cen="keyup",g9e="dragenter",B$="dragleave",y9e="dragover",GH="pointerdown",fen="pointerup",yL="pointermove",m2="pointerout",v9e="pointerover",YH="mousedown",den="mouseup",_9e="mousemove",KH="mouseout",b9e="mouseover",vL="click",hen="dblclick",pen="wheel",w9e="mousewheel",_L="touchstart",bL="touchmove",wL="touchend",men=[uen,len,cen,g9e,B$,y9e,GH,fen,yL,m2,v9e,YH,den,_9e,KH,b9e,vL,hen,pen,w9e,_L,bL,wL],XH=yL,rC=m2,QH=vL;function h0(e,t){d0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const gen=e=>e===_L||e===bL||e===wL?[_L,bL,wL]:[e];function aye(e,t){gen(t).forEach(n=>yen(e,n))}function yen(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function hT(e,t,n){t.forEach(r=>e.fire(r,n))}function uye(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?hT(this,e,r):((!i||!i.exit)&&hT(this,n,r),this._active=s,hT(this,t,r),hT(this,e,r))}}function lye(e){return function(t){hT(this,e,t),this._active=null}}We(h0,d0,{initialize(e,t,n){return this._canvas=e&&ete(e,"canvas"),[vL,YH,GH,yL,m2,B$].forEach(r=>aye(this,r)),d0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:men,DOMMouseScroll(e){this.fire(w9e,e)},pointermove:uye([yL,_9e],[v9e,b9e],[m2,KH]),dragover:uye([y9e],[g9e],[B$]),pointerout:lye([m2,KH]),dragleave:lye([B$]),pointerdown(e){this._down=this._active,this.fire(GH,e)},mousedown(e){this._down=this._active,this.fire(YH,e)},click(e){this._down===this._active&&(this.fire(vL,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(_L,e,!0)},touchmove(e){this.fire(bL,e,!0)},touchend(e){this.fire(wL,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===QH&&r&&r.href?this.handleHref(t,r,r.href):(e===XH||e===rC)&&this.handleTooltip(t,r,e!==rC),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(aye(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=t5(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return fl[e.marktype].pick.call(this,s,e,t,n,r,i)}});function ven(){return typeof window<"u"&&window.devicePixelRatio||1}function _en(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?ven():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function iC(e){bl.call(this,e),this._options={},this._redraw=!1,this._dirty=new os,this._tempb=new os}const cye=bl.prototype,ben=(e,t,n)=>new os().set(0,0,t,n).translate(-e[0],-e[1]);function wen(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}We(iC,bl,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Ng(1,1,this._options.type),e&&this._canvas&&(Ml(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),cye.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(cye.resize.call(this,e,t,n,r),this._canvas)_en(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Te("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=ben(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):wen(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=fl[t.marktype];t.clip&&vZt(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function tte(e,t){d0.call(this,e,t);const n=this;n._hrefHandler=JH(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=JH(n,(r,i)=>{n.handleTooltip(r,i,r.type!==rC)})}const JH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};We(tte,d0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(QH,this._hrefHandler),r.removeEventListener(XH,this._tooltipHandler),r.removeEventListener(rC,this._tooltipHandler)),this._svg=r=e&&ete(e,"svg"),r&&(r.addEventListener(QH,this._hrefHandler),r.addEventListener(XH,this._tooltipHandler),r.addEventListener(rC,this._tooltipHandler)),d0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:JH(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const E9e="aria-hidden",nte="aria-label",rte="role",ite="aria-roledescription",x9e="graphics-object",ste="graphics-symbol",S9e=(e,t,n)=>({[rte]:e,[ite]:t,[nte]:n||void 0}),Een=gf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),fye={axis:{desc:"axis",caption:Ten},legend:{desc:"legend",caption:Aen},"title-text":{desc:"title",caption:e=>`Title text '${hye(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${hye(e)}'`}},dye={ariaRole:rte,ariaRoleDescription:ite,description:nte};function T9e(e,t){const n=t.aria===!1;if(e(E9e,n||void 0),n||t.description==null)for(const r in dye)e(dye[r],void 0);else{const r=t.mark.marktype;e(nte,t.description),e(rte,t.ariaRole||(r==="group"?x9e:ste)),e(ite,t.ariaRoleDescription||`${r} mark`)}}function A9e(e){return e.aria===!1?{[E9e]:!0}:Een[e.role]?null:fye[e.role]?Sen(e,fye[e.role]):xen(e)}function xen(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return S9e(n?x9e:ste,`${t} mark container`,e.description)}function Sen(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return S9e(t.role||ste,t.desc,n.description||r(n))}catch{return null}}function hye(e){return nt(e.text).join(" ")}function Ten(e){const t=e.datum,n=e.orient,r=t.title?C9e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Xw(a)?"discrete":a} scale with ${U8e(o,s,e)}`}function Aen(e){const t=e.datum,n=t.title?C9e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Ien(r)+(n?` titled '${n}'`:"")+` for ${Cen(s)} with ${U8e(u,a,e)}`}function C9e(e){try{return nt(Un(e.items).items[0].text).join(" ")}catch{return null}}function Cen(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Un(e)}function Ien(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const I9e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Oen=e=>I9e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function ote(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Oen(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=I9e(u),a),toString:()=>e};return a}const O9e=e=>P9e(ote(),e)+"";function P9e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):P9e(e,r)}return e.close()}const EL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},xL={blend:"mix-blend-mode"},k9e={fill:"none","stroke-miterlimit":10},ES=0,pye="http://www.w3.org/2000/xmlns/",hs=nC.xmlns;function n5(e){bl.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const Bj=bl.prototype;We(n5,bl,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=ms(e,0,"svg",hs),this._svg.setAttributeNS(pye,"xmlns",hs),this._svg.setAttributeNS(pye,"xmlns:xlink",nC["xmlns:xlink"]),this._svg.setAttribute("version",nC.version),this._svg.setAttribute("class","marks"),Ml(e,1),this._root=ms(this._svg,ES,"g",hs),ig(this._root,k9e),Ml(this._svg,ES+1)),this.background(this._bgcolor),Bj.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Bj.background.apply(this,arguments)},resize(e,t,n,r){return Bj.resize.call(this,e,t,n,r),this._svg&&(ig(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=ms(e,ES,"rect",hs),ig(n,{width:this._width,height:this._height,fill:t}));const r=O9e(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Ml(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=fl[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,mye(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,mye(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=fl[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=gye(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Ml(l,0),t._svg;l.setAttribute("class",m9e(t));const c=A9e(t);for(const p in c)ca(l,p,c[p]);u||ca(l,"pointer-events",a),ca(l,"clip-path",t.clip?Lee(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=gye(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&$en(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):vf(t,h),Ml(l,d),l},_update(e,t,n){ip=t,Lo=t.__values__,T9e(g2,n),e.attr(g2,n,this);const r=Nen[e.type];r&&r.call(this,e,t,n),ip&&this.style(ip,n)},style(e,t){if(t!=null){for(const n in EL){let r=n==="font"?nO(t):t[n];if(r===Lo[n])continue;const i=EL[n];r==null?e.removeAttribute(i):(Ree(r)&&(r=H8e(r,this._defs.gradient,$9e())),e.setAttribute(i,r+"")),Lo[n]=r}for(const n in xL)j$(e,xL[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=ms(e,ES+1,"defs",hs)),r=Pen(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=ms(e,ES+1,"defs",hs)),r=ken(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ml(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function mye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Pen(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ms(e,n++,"pattern",hs);ig(o,{id:hL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ms(o,0,"rect",hs),ig(o,{width:1,height:1,fill:`url(${$9e()}#${t.id})`}),e=ms(e,n++,"radialGradient",hs),ig(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ms(e,n++,"linearGradient",hs),ig(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ms(e,r,"stop",hs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Ml(e,r),n}function ken(e,t,n){let r;return e=ms(e,n,"clipPath",hs),e.setAttribute("id",t.id),t.path?(r=ms(e,0,"path",hs),r.setAttribute("d",t.path)):(r=ms(e,0,"rect",hs),ig(r,{x:0,y:0,width:t.width,height:t.height})),Ml(e,1),n+1}function $en(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;vf(n,o=>{i=e.mark(t,o,i,r),++s}),Ml(t,1+s)}function gye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=rg(o,r,hs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=rg(o,"path",hs);s.appendChild(a),a.__data__=e;const u=rg(o,"g",hs);s.appendChild(u),u.__data__=e;const l=rg(o,"path",hs);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Ren(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Ren(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let ip=null,Lo=null;const Nen={group(e,t,n){const r=ip=t.childNodes[2];Lo=r.__values__,e.foreground(g2,n,this),Lo=t.__values__,ip=t.childNodes[1],e.content(g2,n,this);const i=ip=t.childNodes[0];e.background(g2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Lo.events&&(ca(r,"pointer-events",s),ca(i,"pointer-events",s),Lo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;ca(r,"display",null),this.style(i,n),ca(i,"stroke",null),o&&(n.fill=null),Lo=r.__values__,this.style(r,n),o&&(n.fill=o),ip=null}else ca(r,"display","none")},image(e,t,n){n.smooth===!1?(j$(t,"image-rendering","optimizeSpeed"),j$(t,"image-rendering","pixelated")):j$(t,"image-rendering",null)},text(e,t,n){const r=tO(n);let i,s,o,a;Ie(r)?(s=r.map(u=>f0(n,u)),i=s.join(`
`),i!==Lo.text&&(Ml(t,0),o=t.ownerDocument,a=c0(n),s.forEach((u,l)=>{const c=rg(o,"tspan",hs);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Lo.text=i)):(s=f0(n,r),s!==Lo.text&&(t.textContent=s,Lo.text=s)),ca(t,"font-family",nO(n)),ca(t,"font-size",dh(n)+"px"),ca(t,"font-style",n.fontStyle),ca(t,"font-variant",n.fontVariant),ca(t,"font-weight",n.fontWeight)}};function g2(e,t,n){t!==Lo[e]&&(n?Den(ip,e,t,n):ca(ip,e,t),Lo[e]=t)}function j$(e,t,n){n!==Lo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Lo[t]=n)}function ig(e,t){for(const n in t)ca(e,n,t[n])}function ca(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Den(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function $9e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function ate(e){bl.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}We(ate,bl,{svg(){return this._text},_render(e){const t=ote();t.open("svg",hn({},nC,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",k9e,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=fl[t.marktype],r=n.tag,i=[T9e,n.attr];e.open("g",{class:m9e(t),"clip-path":t.clip?Lee(this,t,t.group):null},A9e(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=tO(o);if(Ie(u)){const l={x:0,dy:c0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(f0(o,u[c])).close()}else e.text(f0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),vf(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):vf(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&Len(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:hL+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function Len(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=nO(t),e["font-size"]=dh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in EL){let a=t[o];const u=EL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Ree(a)&&(a=H8e(a,i.gradient,"")),e[u]=a)}for(const o in xL){const a=t[o];a!=null&&(s=s||[],s.push(`${xL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Mc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Men(e){Mc.svgMarkTypes=e.svgMarkTypes??["text"],Mc.svgOnTop=e.svgOnTop??!0,Mc.debug=e.debug??!1}function SL(e){bl.call(this,e),this._svgRenderer=new n5(e),this._canvasRenderer=new iC(e)}const yye=bl.prototype;We(SL,bl,{initialize(e,t,n,r,i){this._root_el=ms(e,0,"div");const s=ms(this._root_el,0,"div"),o=ms(this._root_el,1,"div");return this._root_el.style.position="relative",Mc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Mc.svgOnTop?o:s,this._canvasEl=Mc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),yye.initialize.call(this,e,t,n,r,i)},dirty(e){return Mc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Mc.svgMarkTypes.includes(i));this._svgRenderer.render(e,Mc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return yye.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Mc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function ute(e,t){h0.call(this,e,t)}We(ute,h0,{initialize(e,t,n){const r=ms(ms(e,0,"div"),Mc.svgOnTop?0:1,"div");return h0.prototype.initialize.call(this,r,t,n)}});const R9e="canvas",N9e="hybrid",D9e="png",L9e="svg",M9e="none",sg={Canvas:R9e,PNG:D9e,SVG:L9e,Hybrid:N9e,None:M9e},Z1={};Z1[R9e]=Z1[D9e]={renderer:iC,headless:iC,handler:h0};Z1[L9e]={renderer:n5,headless:ate,handler:tte};Z1[N9e]={renderer:SL,headless:SL,handler:ute};Z1[M9e]={};function r5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Z1[e]=t,this):Z1[e]}function F9e(e,t,n){const r=[],i=new os().union(t),s=e.marktype;return s?B9e(e,i,n,r):s==="group"?j9e(e,i,n,r):Te("Intersect scene must be mark node or group item.")}function B9e(e,t,n,r){if(Fen(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)j9e(i[a],t,n,r);else for(const u=fl[s].isect;a<o;++a){const l=i[a];z9e(l,t,u)&&r.push(l)}}return r}function Fen(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function j9e(e,t,n,r){n&&n(e.mark)&&z9e(e,t,fl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)B9e(i[u],t,n,r);t.translate(o,a)}return r}function z9e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const jj=new os;function U9e(e){const t=e.clip;if(pn(t))t(ZI(jj.clear()));else if(t)jj.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(jj)}const Ben=1e-9;function lte(e,t,n){return e===t?!0:n==="path"?V9e(e,t):e instanceof Date&&t instanceof Date?+e==+t:Jn(e)&&Jn(t)?Math.abs(e-t)<=Ben:!e||!t||!st(e)&&!st(t)?e==t:jen(e,t)}function V9e(e,t){return lte(Qw(e),Qw(t))}function jen(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!lte(e[i],t[i],i))return!1;return typeof e==typeof t}function zen(){Q8e(),fJt()}const eE="top",Gc="left",Qc="right",p0="bottom",Uen="top-left",Ven="top-right",Hen="bottom-left",qen="bottom-right",cte="start",ZH="middle",ha="end",Wen="x",Gen="y",i5="group",fte="axis",dte="title",Yen="frame",Ken="scope",hte="legend",H9e="row-header",q9e="row-footer",W9e="row-title",G9e="column-header",Y9e="column-footer",K9e="column-title",Xen="padding",Qen="symbol",X9e="fit",Q9e="fit-x",J9e="fit-y",Jen="pad",pte="none",nk="all",eq="each",mte="flush",og="column",ag="row";function Z9e(e){Ee.call(this,null,e)}We(Z9e,Ee,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=fl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=rk(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===i5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(rk(l,o))),r.role){case fte:case hte:case dte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(rk(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(rk(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return U9e(r),t.modifies("bounds")}});function rk(e,t,n){return t(e.bounds.clear(),e,n)}const vye=":vega_identifier:";function gte(e){Ee.call(this,0,e)}gte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};We(gte,Ee,{transform(e,t){const n=Zen(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Zen(e){return e._signals[vye]||(e._signals[vye]=e.add(0))}function eBe(e){Ee.call(this,null,e)}We(eBe,Ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,etn(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===i5?YF:GF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function etn(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function tBe(e){Ee.call(this,null,e)}const _ye={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!nBe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},nBe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),bye=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(nBe(i,s=e[n].bounds,t))return!0},ttn=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ntn=(e,t,n)=>{var r=e.range(),i=new os;return t===eE||t===p0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},wye=e=>(e.forEach(t=>t.opacity=1),e),Eye=(e,t)=>e.reflow(t.modified()).modifies("opacity");We(tBe,Ee,{transform(e,t){const n=_ye[e.method]||_ye.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(wye(i),t=Eye(t,e)),t;if(i=i.filter(ttn),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=wye(i),t=Eye(t,e),s.length>=3&&bye(s,r)){do s=n(s,r);while(s.length>=3&&bye(s,r));s.length<3&&!Un(i).opacity&&(s.length>1&&(Un(s).opacity=0),Un(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=ntn(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function rBe(e){Ee.call(this,null,e)}We(rBe,Ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const No=new os;function fb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function rtn(e){var t=e.items[0].orient;return t===Gc||t===Qc}function itn(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function stn(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=itn(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Xee(p),v=0,_=0,b,E;switch(No.clear().union(g),g.clear(),(b=u[0])>-1&&g.union(i.items[b].bounds),(b=u[1])>-1&&g.union(i.items[b].bounds),a){case eE:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&ik(e,p,E,m,y,0,-1,g);break;case Gc:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&ik(e,p,E,m,y,1,-1,g);break;case Qc:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&ik(e,p,E,m,y,1,1,g);break;case p0:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&ik(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return rm(g.translate(v,_),i),fb(i,"x",v+o)|fb(i,"y",_+o)&&(i.bounds=No,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function ik(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const xye=(e,t)=>Math.floor(Math.min(e,t)),Sye=(e,t)=>Math.ceil(Math.max(e,t));function otn(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===i5)switch(i.role){case fte:case hte:case dte:break;case H9e:o.rowheaders.push(...s);break;case q9e:o.rowfooters.push(...s);break;case G9e:o.colheaders.push(...s);break;case Y9e:o.colfooters.push(...s);break;case W9e:o.rowtitle=s[0];break;case K9e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function atn(e){return new os().set(0,0,e.width||0,e.height||0)}function utn(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ui(e,t,n){const r=st(e)?e[t]:e;return r??(n!==void 0?n:0)}function Tye(e){return e<0?Math.ceil(-e):0}function iBe(e,t,n){var r=!n.nodirty,i=n.bounds===mte?atn:utn,s=No.set(0,0,0,0),o=ui(n.align,og),a=ui(n.align,ag),u=ui(n.padding,og),l=ui(n.padding,ag),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),b=Array(d),E=Array(d),w,x,S,I,C,O,z,N,$,D,B;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)O=t[x],C=E[x]=i(O),O.x=O.x||0,_[x]=0,O.y=O.y||0,b[x]=0,S=x%c,I=~~(x/c),m=Math.max(m,z=Math.ceil(C.x2)),v=Math.max(v,N=Math.ceil(C.y2)),p[S]=Math.max(p[S],z),y[I]=Math.max(y[I],N),h[x]=u+Tye(C.x1),g[x]=l+Tye(C.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===eq)for(S=1;S<c;++S){for(B=0,x=S;x<d;x+=c)B<h[x]&&(B=h[x]);for(x=S;x<d;x+=c)h[x]=B+p[S-1]}else if(o===nk){for(B=0,x=0;x<d;++x)x%c&&B<h[x]&&(B=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=B+m)}else for(o=!1,S=1;S<c;++S)for(x=S;x<d;x+=c)h[x]+=p[S-1];if(a===eq)for(I=1;I<f;++I){for(B=0,x=I*c,w=x+c;x<w;++x)B<g[x]&&(B=g[x]);for(x=I*c;x<w;++x)g[x]=B+y[I-1]}else if(a===nk){for(B=0,x=c;x<d;++x)B<g[x]&&(B=g[x]);for(x=c;x<d;++x)g[x]=B+v}else for(a=!1,I=1;I<f;++I)for(x=I*c,w=x+c;x<w;++x)g[x]+=y[I-1];for($=0,x=0;x<d;++x)$=h[x]+(x%c?$:0),_[x]+=$-t[x].x;for(S=0;S<c;++S)for(D=0,x=S;x<d;x+=c)D+=g[x],b[x]+=D-t[x].y;if(o&&ui(n.center,og)&&f>1)for(x=0;x<d;++x)C=o===nk?m:p[x%c],$=C-E[x].x2-t[x].x-_[x],$>0&&(_[x]+=$/2);if(a&&ui(n.center,ag)&&c!==1)for(x=0;x<d;++x)C=a===nk?v:y[~~(x/c)],D=C-E[x].y2-t[x].y-b[x],D>0&&(b[x]+=D/2);for(x=0;x<d;++x)s.union(E[x].translate(_[x],b[x]));switch($=ui(n.anchor,Wen),D=ui(n.anchor,Gen),ui(n.anchor,og)){case ha:$-=s.width();break;case ZH:$-=s.width()/2}switch(ui(n.anchor,ag)){case ha:D-=s.height();break;case ZH:D-=s.height()/2}for($=Math.round($),D=Math.round(D),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)O=t[x],O.x+=_[x]+=$,O.y+=b[x]+=D,s.union(O.mark.bounds.union(O.bounds.translate(_[x],b[x]))),r&&e.dirty(O);return s}function ltn(e,t,n){var r=otn(t),i=r.marks,s=n.bounds===mte?ctn:ftn,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=iBe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=ui(n.headerBand,ag,null),c=sk(e,r.rowheaders,i,a,u,-ui(o,"rowHeader"),xye,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ui(n.headerBand,og,null),f=sk(e,r.colheaders,i,a,a,-ui(o,"columnHeader"),xye,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ui(n.footerBand,ag,null),d=sk(e,r.rowfooters,i,a,u,ui(o,"rowFooter"),Sye,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ui(n.footerBand,og,null),h=sk(e,r.colfooters,i,a,a,ui(o,"columnFooter"),Sye,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ui(n.titleAnchor,ag),g=ui(o,"rowTitle"),g=p===ha?d+g:c-g,m=ui(n.titleBand,ag,.5),Aye(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=ui(n.titleAnchor,og),g=ui(o,"columnTitle"),g=p===ha?h+g:f-g,m=ui(n.titleBand,og,.5),Aye(e,r.coltitle,g,1,y,m))}function ctn(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function ftn(e,t){return e.bounds[t]}function sk(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,b,E,w,x,S,I;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(w=t[v],E=w.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=d);a?(S=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),I=m):(S=m,I=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(w.bounds.translate(S-(w.x||0),I-(w.y||0))),w.x=S,w.y=I,e.dirty(w),g=o(g,E[l])}return g}function Aye(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function dtn(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function htn(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function ptn(e,t,n,r,i,s,o){const a=dtn(n,t),u=htn(e,a("offset",0)),l=a("anchor",cte),c=l===ha?1:l===ZH?.5:0,f={align:eq,bounds:a("bounds",mte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Gc:f.anchor={x:Math.floor(r.x1)-u,column:ha,y:c*(o||r.height()+2*r.y1),row:l};break;case Qc:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case eE:f.anchor={y:Math.floor(i.y1)-u,row:ha,x:c*(s||i.width()+2*i.x1),column:l};break;case p0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Uen:f.anchor={x:u,y:u};break;case Ven:f.anchor={x:s-u,y:u,column:ha};break;case Hen:f.anchor={x:u,y:o-u,row:ha};break;case qen:f.anchor={x:s-u,y:o-u,column:ha,row:ha};break}return f}function mtn(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),ytn(e,n,n.items[0].items[0]),s=gtn(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Qen&&vtn(n.items[0].items[0].items[0].items),i!==pte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,rm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function gtn(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function ytn(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&xS(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Gc:i+=Math.ceil(o.bounds.width())+u;break;case Qc:case p0:break;default:s+=o.bounds.height()+u}switch((i||s)&&xS(e,n,i,s),o.orient){case Gc:c+=__(t,n,o,a,1,1);break;case Qc:l+=__(t,n,o,ha,0,0)+u,c+=__(t,n,o,a,1,1);break;case p0:l+=__(t,n,o,a,0,0),c+=__(t,n,o,ha,-1,0,1)+u;break;default:l+=__(t,n,o,a,0,0)}(l||c)&&xS(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(xS(e,n,-l,0),xS(e,o,-l,0))}}function __(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Xee(n);return Math.round(r===cte?f:r===ha?d-h:.5*(c-h))}function xS(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function vtn(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function _tn(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Gc||a===Qc?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==i5?a===Gc?(p=i.y2,h=i.y1):a===Qc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Gc&&(p=r,h=0),_=u===cte?p:u===ha?h:(p+h)/2,d&&d.text){switch(a){case eE:case p0:v=f.bounds.height()+c;break;case Gc:y=f.bounds.width()+c;break;case Qc:y=-f.bounds.width()-c;break}No.clear().union(d.bounds),No.translate(y-(d.x||0),v-(d.y||0)),fb(d,"x",y)|fb(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(No),d.mark.bounds.clear().union(No),e.dirty(d)),No.clear().union(d.bounds)}else No.clear();switch(No.union(f.bounds),a){case eE:m=_,g=i.y1-No.height()-l;break;case Gc:m=i.x1-No.width()-l,g=_;break;case Qc:m=i.x2+No.width()+l,g=_;break;case p0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return fb(s,"x",m)|fb(s,"y",g)&&(No.translate(m,g),e.dirty(s),s.bounds.clear().union(No),t.bounds.clear().union(No),e.dirty(s)),s.bounds}function sBe(e){Ee.call(this,null,e)}We(sBe,Ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&ltn(n,r,e.layout),wtn(n,r,e)}),btn(e.mark.group)?t.reflow():t}});function btn(e){return e&&e.mark.role!=="legend-entry"}function wtn(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new os().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case fte:h=rtn(f)?a:u,h.union(stn(e,f,i,s));break;case dte:c=f;break;case hte:l.push(mtn(e,f));break;case Yen:case Ken:case H9e:case q9e:case W9e:case G9e:case Y9e:case K9e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Qc,d!==pte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];iBe(e,v,ptn(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===X9e||n.autosize.type===Q9e||n.autosize.type===J9e))switch(y.orient){case Gc:case Qc:o.add(v.x1,0).add(v.x2,0);break;case eE:case p0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(_tn(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Etn(e,t,o,n)}function Etn(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Xen){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===pte?(l=0,f=0,u=o,c=a):s===X9e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Q9e?(u=Math.max(0,o-l-d),a=c+f+h):s===J9e?(o=u+l+d,c=Math.max(0,a-f-h)):s===Jen&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const xtn=Object.freeze(Object.defineProperty({__proto__:null,bound:Z9e,identifier:gte,mark:eBe,overlap:tBe,render:rBe,viewlayout:sBe},Symbol.toStringTag,{value:"Module"}));function oBe(e){Ee.call(this,null,e)}We(oBe,Ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=kee(s,o,e.minstep),u=e.format||M8e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?L8e(s,e.values,a):$ee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>dr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(dr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aBe(e){Ee.call(this,null,e)}function Stn(){return dr({})}function Ttn(e){const t=lx().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}We(aBe,Ee,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Stn,s=e.key||$t,o=this.value;return Ie(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Te("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Ttn(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function uBe(e){Ee.call(this,null,e)}We(uBe,Ee,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ie(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Sm,u=i.enter||Sm,l=i.exit||Sm,c=(s&&!o?i[s]:a)||Sm;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Sm&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Sm&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Sm){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function lBe(e){Ee.call(this,[],e)}We(lBe,Ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||R$,o=e.scale,a=+e.limit,u=kee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===R$,c=e.format||z8e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||j8e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===R$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,pn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ra(m=p||8),i=i.map((y,v)=>dr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(dr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===JQt?(d=o.domain(),h=R8e(o,d[0],Un(d)),f.length<3&&!e.values&&d[0]!==Un(d)&&(f=[d[0],Un(d)]),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=lJt(o),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Atn=e=>e.source.x,Ctn=e=>e.source.y,Itn=e=>e.target.x,Otn=e=>e.target.y;function yte(e){Ee.call(this,{},e)}yte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};We(yte,Ee,{transform(e,t){var n=e.sourceX||Atn,r=e.sourceY||Ctn,i=e.targetX||Itn,s=e.targetY||Otn,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Cye.get(u+"-"+a)||Cye.get(u);return l||Te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const cBe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Ptn=(e,t,n,r)=>cBe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fBe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},ktn=(e,t,n,r)=>fBe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dBe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},$tn=(e,t,n,r)=>dBe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Rtn=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Ntn=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Dtn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Ltn=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Mtn=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Ftn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Cye=lx({line:cBe,"line-radial":Ptn,arc:fBe,"arc-radial":ktn,curve:dBe,"curve-radial":$tn,"orthogonal-horizontal":Rtn,"orthogonal-vertical":Ntn,"orthogonal-radial":Dtn,"diagonal-horizontal":Ltn,"diagonal-vertical":Mtn,"diagonal-radial":Ftn});function vte(e){Ee.call(this,null,e)}vte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};We(vte,Ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||ox,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/KFe(l),h=jv(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Btn=5;function jtn(e){const t=e.type;return!e.bins&&(t===Yw||t===WI||t===GI)}function hBe(e){return Iee(e)&&e!==Ld}const ztn=gf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pBe(e){Ee.call(this,null,e),this.modified(!0)}We(pBe,Ee,{transform(e,t){var n=t.dataflow,r=this.value,i=Utn(e);(!r||i!==r.type)&&(this.value=r=or(i)());for(i in e)if(!ztn[i]){if(i==="padding"&&hBe(r.type))continue;pn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Ytn(r,e,Gtn(r,e,Htn(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Utn(e){var t=e.type,n="",r;return t===Ld?Ld+"-"+Yw:(Vtn(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Ld+"-":r===3?hx+"-":""),(n+t||Yw).toLowerCase())}function Vtn(e){const t=e.type;return Iee(t)&&t!==Q1&&t!==J1&&(e.scheme||e.range&&e.range.length&&e.range.every(rt))}function Htn(e,t,n){const r=qtn(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&jtn(e),a,u;if(!i)return 0;if(hBe(s)&&t.padding&&i[0]!==Un(i)&&(i=Wtn(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(mBe(s,i,n)),s===See&&e.unknown(t.domainImplicit?xV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&kee(e,t.nice)||null),i.length}function qtn(e,t,n){return t?(e.domain(mBe(e.type,t,n)),t.length):-1}function Wtn(e,t,n,r,i,s){var o=Math.abs(Un(n)-n[0]),a=o/(o-2*r),u=e===Vp?yZ(t,null,a):e===GI?uL(t,null,a,.5):e===WI?uL(t,null,a,i||1):e===UF?vZ(t,null,a,s||1):gZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function mBe(e,t,n){if(I8e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Xe(t))}return t}function Gtn(e,t,n){let r=t.bins;if(r&&!Ie(r)){const i=e.domain(),s=i[0],o=Un(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Te("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=jv(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Tee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Ytn(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Ktn(r,t,n);else if(t.scheme&&(s=Xtn(r,t,n),pn(s))){if(e.interpolator)return e.interpolator(s);Te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&O8e(r))return e.interpolator(qF(tq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Oee(t.interpolate,t.interpolateGamma)):pn(e.round)?e.round(i):pn(e.rangeRound)&&e.interpolate(i?_I:Jp),s&&e.range(tq(s,t.reverse))}function Ktn(e,t,n){e!==E8e&&e!==BH&&Te("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===BH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*xee(n,i,r)]}function Xtn(e,t,n){var r=t.schemeExtent,i,s;return Ie(t.scheme)?s=qF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Pee(i),s||Te(`Unrecognized scheme name: ${t.scheme}`)),n=e===HF?n+1:e===Tee?n-1:e===Kw||e===VF?+t.schemeCount||Btn:n,O8e(e)?Iye(s,r,t.reverse):pn(s)?$8e(Iye(s,r),n):e===See?s:s.slice(0,n)}function Iye(e,t,n){return pn(e)&&(t||n)?k8e(e,tq(t||[0,1],n)):e}function tq(e,t){return t?e.slice().reverse():e}function gBe(e){Ee.call(this,null,e)}We(gBe,Ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(zv(e.sort)),this.modified(n),t}});const Oye="zero",yBe="center",vBe="normalize",_Be=["y0","y1"];function _te(e){Ee.call(this,null,e)}_te.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Oye,values:[Oye,yBe,vBe]},{name:"as",type:"string",array:!0,length:2,default:_Be}]};We(_te,Ee,{transform(e,t){var n=e.as||_Be,r=n[0],i=n[1],s=zv(e.sort),o=e.field||ox,a=e.offset===yBe?Qtn:e.offset===vBe?Jtn:Ztn,u,l,c,f;for(u=enn(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Qtn(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Jtn(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Ztn(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function enn(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const tnn=Object.freeze(Object.defineProperty({__proto__:null,axisticks:oBe,datajoin:aBe,encode:uBe,legendentries:lBe,linkpath:yte,pie:vte,scale:pBe,sortitems:gBe,stack:_te},Symbol.toStringTag,{value:"Module"}));class xa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*nnn(e){for(const t of e)yield*t}function bBe(e){return Array.from(nnn(e))}function db(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Dt=1e-6,TL=1e-12,An=Math.PI,Ri=An/2,AL=An/4,Pa=An*2,zi=180/An,Sn=An/180,zn=Math.abs,mx=Math.atan,sc=Math.atan2,Ft=Math.cos,ok=Math.ceil,wBe=Math.exp,nq=Math.hypot,CL=Math.log,zj=Math.pow,Rt=Math.sin,Vl=Math.sign||function(e){return e>0?1:e<0?-1:0},ka=Math.sqrt,bte=Math.tan;function EBe(e){return e>1?0:e<-1?An:Math.acos(e)}function Eu(e){return e>1?Ri:e<-1?-Ri:Math.asin(e)}function fo(){}function IL(e,t){e&&kye.hasOwnProperty(e.type)&&kye[e.type](e,t)}var Pye={Feature:function(e,t){IL(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)IL(n[r].geometry,t)}},kye={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){rq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rq(n[r],t,0)},Polygon:function(e,t){$ye(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$ye(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)IL(n[r],t)}};function rq(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function $ye(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)rq(e[n],t,1);t.polygonEnd()}function Wh(e,t){e&&Pye.hasOwnProperty(e.type)?Pye[e.type](e,t):IL(e,t)}var OL=new xa,PL=new xa,xBe,SBe,iq,sq,oq,eh={point:fo,lineStart:fo,lineEnd:fo,polygonStart:function(){OL=new xa,eh.lineStart=rnn,eh.lineEnd=inn},polygonEnd:function(){var e=+OL;PL.add(e<0?Pa+e:e),this.lineStart=this.lineEnd=this.point=fo},sphere:function(){PL.add(Pa)}};function rnn(){eh.point=snn}function inn(){TBe(xBe,SBe)}function snn(e,t){eh.point=TBe,xBe=e,SBe=t,e*=Sn,t*=Sn,iq=e,sq=Ft(t=t/2+AL),oq=Rt(t)}function TBe(e,t){e*=Sn,t*=Sn,t=t/2+AL;var n=e-iq,r=n>=0?1:-1,i=r*n,s=Ft(t),o=Rt(t),a=oq*o,u=sq*s+a*Ft(i),l=a*r*Rt(i);OL.add(sc(l,u)),iq=e,sq=s,oq=o}function onn(e){return PL=new xa,Wh(e,eh),PL*2}function kL(e){return[sc(e[1],e[0]),Eu(e[2])]}function ev(e){var t=e[0],n=e[1],r=Ft(n);return[r*Ft(t),r*Rt(t),Rt(n)]}function ak(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function tE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Uj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function uk(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function $L(e){var t=ka(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yi,Za,Ti,Vu,xy,ABe,CBe,Gb,y2,Nm,Hp,Mh={point:aq,lineStart:Rye,lineEnd:Nye,polygonStart:function(){Mh.point=OBe,Mh.lineStart=ann,Mh.lineEnd=unn,y2=new xa,eh.polygonStart()},polygonEnd:function(){eh.polygonEnd(),Mh.point=aq,Mh.lineStart=Rye,Mh.lineEnd=Nye,OL<0?(yi=-(Ti=180),Za=-(Vu=90)):y2>Dt?Vu=90:y2<-Dt&&(Za=-90),Hp[0]=yi,Hp[1]=Ti},sphere:function(){yi=-(Ti=180),Za=-(Vu=90)}};function aq(e,t){Nm.push(Hp=[yi=e,Ti=e]),t<Za&&(Za=t),t>Vu&&(Vu=t)}function IBe(e,t){var n=ev([e*Sn,t*Sn]);if(Gb){var r=tE(Gb,n),i=[r[1],-r[0],0],s=tE(i,r);$L(s),s=kL(s);var o=e-xy,a=o>0?1:-1,u=s[0]*zi*a,l,c=zn(o)>180;c^(a*xy<u&&u<a*e)?(l=s[1]*zi,l>Vu&&(Vu=l)):(u=(u+360)%360-180,c^(a*xy<u&&u<a*e)?(l=-s[1]*zi,l<Za&&(Za=l)):(t<Za&&(Za=t),t>Vu&&(Vu=t))),c?e<xy?Bu(yi,e)>Bu(yi,Ti)&&(Ti=e):Bu(e,Ti)>Bu(yi,Ti)&&(yi=e):Ti>=yi?(e<yi&&(yi=e),e>Ti&&(Ti=e)):e>xy?Bu(yi,e)>Bu(yi,Ti)&&(Ti=e):Bu(e,Ti)>Bu(yi,Ti)&&(yi=e)}else Nm.push(Hp=[yi=e,Ti=e]);t<Za&&(Za=t),t>Vu&&(Vu=t),Gb=n,xy=e}function Rye(){Mh.point=IBe}function Nye(){Hp[0]=yi,Hp[1]=Ti,Mh.point=aq,Gb=null}function OBe(e,t){if(Gb){var n=e-xy;y2.add(zn(n)>180?n+(n>0?360:-360):n)}else ABe=e,CBe=t;eh.point(e,t),IBe(e,t)}function ann(){eh.lineStart()}function unn(){OBe(ABe,CBe),eh.lineEnd(),zn(y2)>Dt&&(yi=-(Ti=180)),Hp[0]=yi,Hp[1]=Ti,Gb=null}function Bu(e,t){return(t-=e)<0?t+360:t}function lnn(e,t){return e[0]-t[0]}function Dye(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function cnn(e){var t,n,r,i,s,o,a;if(Vu=Ti=-(yi=Za=1/0),Nm=[],Wh(e,Mh),n=Nm.length){for(Nm.sort(lnn),t=1,r=Nm[0],s=[r];t<n;++t)i=Nm[t],Dye(r,i[0])||Dye(r,i[1])?(Bu(r[0],i[1])>Bu(r[0],r[1])&&(r[1]=i[1]),Bu(i[0],r[1])>Bu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Bu(r[1],i[0]))>o&&(o=a,yi=i[0],Ti=r[1])}return Nm=Hp=null,yi===1/0||Za===1/0?[[NaN,NaN],[NaN,NaN]]:[[yi,Za],[Ti,Vu]]}var pT,RL,NL,DL,LL,ML,FL,BL,uq,lq,cq,PBe,kBe,pa,ma,ga,Jc={sphere:fo,point:wte,lineStart:Lye,lineEnd:Mye,polygonStart:function(){Jc.lineStart=hnn,Jc.lineEnd=pnn},polygonEnd:function(){Jc.lineStart=Lye,Jc.lineEnd=Mye}};function wte(e,t){e*=Sn,t*=Sn;var n=Ft(t);rO(n*Ft(e),n*Rt(e),Rt(t))}function rO(e,t,n){++pT,NL+=(e-NL)/pT,DL+=(t-DL)/pT,LL+=(n-LL)/pT}function Lye(){Jc.point=fnn}function fnn(e,t){e*=Sn,t*=Sn;var n=Ft(t);pa=n*Ft(e),ma=n*Rt(e),ga=Rt(t),Jc.point=dnn,rO(pa,ma,ga)}function dnn(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*Rt(e),s=Rt(t),o=sc(ka((o=ma*s-ga*i)*o+(o=ga*r-pa*s)*o+(o=pa*i-ma*r)*o),pa*r+ma*i+ga*s);RL+=o,ML+=o*(pa+(pa=r)),FL+=o*(ma+(ma=i)),BL+=o*(ga+(ga=s)),rO(pa,ma,ga)}function Mye(){Jc.point=wte}function hnn(){Jc.point=mnn}function pnn(){$Be(PBe,kBe),Jc.point=wte}function mnn(e,t){PBe=e,kBe=t,e*=Sn,t*=Sn,Jc.point=$Be;var n=Ft(t);pa=n*Ft(e),ma=n*Rt(e),ga=Rt(t),rO(pa,ma,ga)}function $Be(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*Rt(e),s=Rt(t),o=ma*s-ga*i,a=ga*r-pa*s,u=pa*i-ma*r,l=nq(o,a,u),c=Eu(l),f=l&&-c/l;uq.add(f*o),lq.add(f*a),cq.add(f*u),RL+=c,ML+=c*(pa+(pa=r)),FL+=c*(ma+(ma=i)),BL+=c*(ga+(ga=s)),rO(pa,ma,ga)}function gnn(e){pT=RL=NL=DL=LL=ML=FL=BL=0,uq=new xa,lq=new xa,cq=new xa,Wh(e,Jc);var t=+uq,n=+lq,r=+cq,i=nq(t,n,r);return i<TL&&(t=ML,n=FL,r=BL,RL<Dt&&(t=NL,n=DL,r=LL),i=nq(t,n,r),i<TL)?[NaN,NaN]:[sc(n,t)*zi,Eu(r/i)*zi]}function fq(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function dq(e,t){return zn(e)>An&&(e-=Math.round(e/Pa)*Pa),[e,t]}dq.invert=dq;function RBe(e,t,n){return(e%=Pa)?t||n?fq(Bye(e),jye(t,n)):Bye(e):t||n?jye(t,n):dq}function Fye(e){return function(t,n){return t+=e,zn(t)>An&&(t-=Math.round(t/Pa)*Pa),[t,n]}}function Bye(e){var t=Fye(e);return t.invert=Fye(-e),t}function jye(e,t){var n=Ft(e),r=Rt(e),i=Ft(t),s=Rt(t);function o(a,u){var l=Ft(u),c=Ft(a)*l,f=Rt(a)*l,d=Rt(u),h=d*n+c*r;return[sc(f*i-h*s,c*n-d*r),Eu(h*i+f*s)]}return o.invert=function(a,u){var l=Ft(u),c=Ft(a)*l,f=Rt(a)*l,d=Rt(u),h=d*i-f*s;return[sc(f*i+d*s,c*n+h*r),Eu(h*n-c*r)]},o}function ynn(e){e=RBe(e[0]*Sn,e[1]*Sn,e.length>2?e[2]*Sn:0);function t(n){return n=e(n[0]*Sn,n[1]*Sn),n[0]*=zi,n[1]*=zi,n}return t.invert=function(n){return n=e.invert(n[0]*Sn,n[1]*Sn),n[0]*=zi,n[1]*=zi,n},t}function vnn(e,t,n,r,i,s){if(n){var o=Ft(t),a=Rt(t),u=r*n;i==null?(i=t+r*Pa,s=t-u/2):(i=zye(o,i),s=zye(o,s),(r>0?i<s:i>s)&&(i+=r*Pa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=kL([o,-a*Ft(c),-a*Rt(c)]),e.point(l[0],l[1])}}function zye(e,t){t=ev(t),t[0]-=e,$L(t);var n=EBe(-t[1]);return((-t[2]<0?-n:n)+Pa-Dt)%Pa}function NBe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:fo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function z$(e,t){return zn(e[0]-t[0])<Dt&&zn(e[1]-t[1])<Dt}function lk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function DBe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(z$(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Dt}s.push(v=new lk(g,p,null,!0)),o.push(v.o=new lk(g,null,v,!1)),s.push(v=new lk(y,p,null,!1)),o.push(v.o=new lk(y,null,v,!0))}}),!!s.length){for(o.sort(t),Uye(s),Uye(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Uye(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Vj(e){return zn(e[0])<=An?e[0]:Vl(e[0])*((zn(e[0])+An)%Pa-An)}function _nn(e,t){var n=Vj(t),r=t[1],i=Rt(r),s=[Rt(n),-Ft(n),0],o=0,a=0,u=new xa;i===1?r=Ri+Dt:i===-1&&(r=-Ri-Dt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Vj(h),m=h[1]/2+AL,g=Rt(m),y=Ft(m),v=0;v<d;++v,p=b,g=w,y=x,h=_){var _=f[v],b=Vj(_),E=_[1]/2+AL,w=Rt(E),x=Ft(E),S=b-p,I=S>=0?1:-1,C=I*S,O=C>An,z=g*w;if(u.add(sc(z*I*Rt(C),y*x+z*Ft(C))),o+=O?S+I*Pa:S,O^p>=n^b>=n){var N=tE(ev(h),ev(_));$L(N);var $=tE(s,N);$L($);var D=(O^S>=0?-1:1)*Eu($[2]);(r>D||r===D&&(N[0]||N[1]))&&(a+=O^S>=0?1:-1)}}return(o<-Dt||o<Dt&&u<-TL)^a&1}function LBe(e,t,n,r){return function(i){var s=t(i),o=NBe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=bBe(c);var b=_nn(l,r);c.length?(u||(i.polygonStart(),u=!0),DBe(c,wnn,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,E){e(b,E)&&i.point(b,E)}function p(b,E){s.point(b,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(b,E){f.push([b,E]),a.point(b,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),E=o.result(),w,x=E.length,S,I,C;if(f.pop(),l.push(f),f=null,!!x){if(b&1){if(I=E[0],(S=I.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<S;++w)i.point((C=I[w])[0],C[1]);i.lineEnd()}return}x>1&&b&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(bnn))}}return d}}function bnn(e){return e.length>1}function wnn(e,t){return((e=e.x)[0]<0?e[1]-Ri-Dt:Ri-e[1])-((t=t.x)[0]<0?t[1]-Ri-Dt:Ri-t[1])}const Vye=LBe(function(){return!0},Enn,Snn,[-An,-Ri]);function Enn(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?An:-An,u=zn(s-t);zn(u-An)<Dt?(e.point(t,n=(n+o)/2>0?Ri:-Ri),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=An&&(zn(t-r)<Dt&&(t-=r*Dt),zn(s-a)<Dt&&(s-=a*Dt),n=xnn(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function xnn(e,t,n,r){var i,s,o=Rt(e-n);return zn(o)>Dt?mx((Rt(t)*(s=Ft(r))*Rt(n)-Rt(r)*(i=Ft(t))*Rt(e))/(i*s*o)):(t+r)/2}function Snn(e,t,n,r){var i;if(e==null)i=n*Ri,r.point(-An,i),r.point(0,i),r.point(An,i),r.point(An,0),r.point(An,-i),r.point(0,-i),r.point(-An,-i),r.point(-An,0),r.point(-An,i);else if(zn(e[0]-t[0])>Dt){var s=e[0]<t[0]?An:-An;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Tnn(e){var t=Ft(e),n=2*Sn,r=t>0,i=zn(t)>Dt;function s(c,f,d,h){vnn(h,e,n,d,c,f)}function o(c,f){return Ft(c)*Ft(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,b=o(g,y),E=r?b?0:l(g,y):b?l(g+(g<0?An:-An),y):0;if(!f&&(p=h=b)&&c.lineStart(),b!==h&&(_=u(f,v),(!_||z$(f,_)||z$(v,_))&&(v[2]=1)),b!==h)m=0,b?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^b){var w;!(E&d)&&(w=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}b&&(!f||!z$(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=ev(c),p=ev(f),m=[1,0,0],g=tE(h,p),y=ak(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var b=t*y/_,E=-t*v/_,w=tE(m,g),x=uk(m,b),S=uk(g,E);Uj(x,S);var I=w,C=ak(x,I),O=ak(I,I),z=C*C-O*(ak(x,x)-1);if(!(z<0)){var N=ka(z),$=uk(I,(-C-N)/O);if(Uj($,x),$=kL($),!d)return $;var D=c[0],B=f[0],V=c[1],j=f[1],G;B<D&&(G=D,D=B,B=G);var U=B-D,P=zn(U-An)<Dt,k=P||U<Dt;if(!P&&j<V&&(G=V,V=j,j=G),k?P?V+j>0^$[1]<(zn($[0]-D)<Dt?V:j):V<=$[1]&&$[1]<=j:U>An^(D<=$[0]&&$[0]<=B)){var H=uk(I,(-C+N)/O);return Uj(H,x),[$,kL(H)]}}}function l(c,f){var d=r?e:An-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return LBe(o,a,s,r?[0,-e]:[-An,e-An])}function Ann(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var mT=1e9,ck=-mT;function MBe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return zn(l[0]-e)<Dt?c>0?0:3:zn(l[0]-n)<Dt?c>0?2:1:zn(l[1]-t)<Dt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=NBe(),d,h,p,m,g,y,v,_,b,E,w,x={point:S,lineStart:z,lineEnd:N,polygonStart:C,polygonEnd:O};function S(D,B){i(D,B)&&c.point(D,B)}function I(){for(var D=0,B=0,V=h.length;B<V;++B)for(var j=h[B],G=1,U=j.length,P=j[0],k,H,M=P[0],F=P[1];G<U;++G)k=M,H=F,P=j[G],M=P[0],F=P[1],H<=r?F>r&&(M-k)*(r-H)>(F-H)*(e-k)&&++D:F<=r&&(M-k)*(r-H)<(F-H)*(e-k)&&--D;return D}function C(){c=f,d=[],h=[],w=!0}function O(){var D=I(),B=w&&D,V=(d=bBe(d)).length;(B||V)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),V&&DBe(d,a,D,s,l),l.polygonEnd()),c=l,d=h=p=null}function z(){x.point=$,h&&h.push(p=[]),E=!0,b=!1,v=_=NaN}function N(){d&&($(m,g),y&&b&&f.rejoin(),d.push(f.result())),x.point=S,b&&c.lineEnd()}function $(D,B){var V=i(D,B);if(h&&p.push([D,B]),E)m=D,g=B,y=V,E=!1,V&&(c.lineStart(),c.point(D,B));else if(V&&b)c.point(D,B);else{var j=[v=Math.max(ck,Math.min(mT,v)),_=Math.max(ck,Math.min(mT,_))],G=[D=Math.max(ck,Math.min(mT,D)),B=Math.max(ck,Math.min(mT,B))];Ann(j,G,e,t,n,r)?(b||(c.lineStart(),c.point(j[0],j[1])),c.point(G[0],G[1]),V||c.lineEnd(),w=!1):V&&(c.lineStart(),c.point(D,B),w=!1)}v=D,_=B,b=V}return x}}function Hye(e,t,n){var r=db(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function qye(e,t,n){var r=db(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Cnn(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return db(ok(r/c)*c,n,c).map(p).concat(db(ok(a/f)*f,o,f).map(m)).concat(db(ok(t/u)*u,e,u).filter(function(_){return zn(_%c)>Dt}).map(d)).concat(db(ok(s/l)*l,i,l).filter(function(_){return zn(_%f)>Dt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=Hye(s,i,90),h=qye(t,e,g),p=Hye(a,o,90),m=qye(r,n,g),y):g},y.extentMajor([[-180,-90+Dt],[180,90-Dt]]).extentMinor([[-180,-80-Dt],[180,80+Dt]])}const sC=e=>e;var Hj=new xa,hq=new xa,FBe,BBe,pq,mq,Wm={point:fo,lineStart:fo,lineEnd:fo,polygonStart:function(){Wm.lineStart=Inn,Wm.lineEnd=Pnn},polygonEnd:function(){Wm.lineStart=Wm.lineEnd=Wm.point=fo,Hj.add(zn(hq)),hq=new xa},result:function(){var e=Hj/2;return Hj=new xa,e}};function Inn(){Wm.point=Onn}function Onn(e,t){Wm.point=jBe,FBe=pq=e,BBe=mq=t}function jBe(e,t){hq.add(mq*e-pq*t),pq=e,mq=t}function Pnn(){jBe(FBe,BBe)}const Wye=Wm;var nE=1/0,jL=nE,oC=-nE,zL=oC,knn={point:$nn,lineStart:fo,lineEnd:fo,polygonStart:fo,polygonEnd:fo,result:function(){var e=[[nE,jL],[oC,zL]];return oC=zL=-(jL=nE=1/0),e}};function $nn(e,t){e<nE&&(nE=e),e>oC&&(oC=e),t<jL&&(jL=t),t>zL&&(zL=t)}const UL=knn;var gq=0,yq=0,gT=0,VL=0,HL=0,hb=0,vq=0,_q=0,yT=0,zBe,UBe,dd,hd,Yc={point:tv,lineStart:Gye,lineEnd:Yye,polygonStart:function(){Yc.lineStart=Dnn,Yc.lineEnd=Lnn},polygonEnd:function(){Yc.point=tv,Yc.lineStart=Gye,Yc.lineEnd=Yye},result:function(){var e=yT?[vq/yT,_q/yT]:hb?[VL/hb,HL/hb]:gT?[gq/gT,yq/gT]:[NaN,NaN];return gq=yq=gT=VL=HL=hb=vq=_q=yT=0,e}};function tv(e,t){gq+=e,yq+=t,++gT}function Gye(){Yc.point=Rnn}function Rnn(e,t){Yc.point=Nnn,tv(dd=e,hd=t)}function Nnn(e,t){var n=e-dd,r=t-hd,i=ka(n*n+r*r);VL+=i*(dd+e)/2,HL+=i*(hd+t)/2,hb+=i,tv(dd=e,hd=t)}function Yye(){Yc.point=tv}function Dnn(){Yc.point=Mnn}function Lnn(){VBe(zBe,UBe)}function Mnn(e,t){Yc.point=VBe,tv(zBe=dd=e,UBe=hd=t)}function VBe(e,t){var n=e-dd,r=t-hd,i=ka(n*n+r*r);VL+=i*(dd+e)/2,HL+=i*(hd+t)/2,hb+=i,i=hd*e-dd*t,vq+=i*(dd+e),_q+=i*(hd+t),yT+=i*3,tv(dd=e,hd=t)}const Kye=Yc;function HBe(e){this._context=e}HBe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Pa);break}}},result:fo};var bq=new xa,qj,qBe,WBe,vT,_T,qL={point:fo,lineStart:function(){qL.point=Fnn},lineEnd:function(){qj&&GBe(qBe,WBe),qL.point=fo},polygonStart:function(){qj=!0},polygonEnd:function(){qj=null},result:function(){var e=+bq;return bq=new xa,e}};function Fnn(e,t){qL.point=GBe,qBe=vT=e,WBe=_T=t}function GBe(e,t){vT-=e,_T-=t,bq.add(ka(vT*vT+_T*_T)),vT=e,_T=t}const Xye=qL;let Qye,WL,Jye,Zye;class e1e{constructor(t){this._append=t==null?YBe:Bnn(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Jye||this._append!==WL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Jye=r,WL=this._append,Zye=this._,this._=i}this._+=Zye;break}}}result(){const t=this._;return this._="",t.length?t:null}}function YBe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Bnn(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return YBe;if(t!==Qye){const n=10**t;Qye=t,WL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return WL}function KBe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Wh(a,i(s))),s.result()}return o.area=function(a){return Wh(a,i(Wye)),Wye.result()},o.measure=function(a){return Wh(a,i(Xye)),Xye.result()},o.bounds=function(a){return Wh(a,i(UL)),UL.result()},o.centroid=function(a){return Wh(a,i(Kye)),Kye.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,sC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new e1e(n)):new HBe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new e1e(n)),o},o.projection(e).digits(n).context(t)}function s5(e){return function(t){var n=new wq;for(var r in e)n[r]=e[r];return n.stream=t,n}}function wq(){}wq.prototype={constructor:wq,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ete(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Wh(n,e.stream(UL)),t(UL.result()),r!=null&&e.clipExtent(r),e}function o5(e,t,n){return Ete(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function xte(e,t,n){return o5(e,[[0,0],t],n)}function Ste(e,t,n){return Ete(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function Tte(e,t,n){return Ete(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var t1e=16,jnn=Ft(30*Sn);function n1e(e,t){return+t?Unn(e,t):znn(e)}function znn(e){return s5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Unn(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var b=o+d,E=a+h,w=u+p,x=ka(b*b+E*E+w*w),S=Eu(w/=x),I=zn(zn(w)-1)<Dt||zn(s-f)<Dt?(s+f)/2:sc(E,b),C=e(I,S),O=C[0],z=C[1],N=O-r,$=z-i,D=v*N-y*$;(D*D/_>t||zn((y*N+v*$)/_-.5)>.3||o*d+a*h+u*p<jnn)&&(n(r,i,s,o,a,u,O,z,I,b/=x,E/=x,w,m,g),g.point(O,z),n(O,z,I,b,E,w,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,I){S=e(S,I),r.point(S[0],S[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(S,I){var C=ev([S,I]),O=e(S,I);n(f,d,c,h,p,m,f=O[0],d=O[1],c=S,h=C[0],p=C[1],m=C[2],t1e,r),r.point(f,d)}function b(){g.point=y,r.lineEnd()}function E(){v(),g.point=w,g.lineEnd=x}function w(S,I){_(i=S,I),s=f,o=d,a=h,u=p,l=m,g.point=_}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,t1e,r),g.lineEnd=b,b()}return g}}var Vnn=s5({point:function(e,t){this.stream.point(e*Sn,t*Sn)}});function Hnn(e){return s5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function qnn(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function r1e(e,t,n,r,i,s){if(!s)return qnn(e,t,n,r,i);var o=Ft(s),a=Rt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function hh(e){return XBe(function(){return e})()}function XBe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Vye,g=null,y,v,_,b=sC,E=.5,w,x,S,I,C;function O(D){return S(D[0]*Sn,D[1]*Sn)}function z(D){return D=S.invert(D[0],D[1]),D&&[D[0]*zi,D[1]*zi]}O.stream=function(D){return I&&C===D?I:I=Vnn(Hnn(c)(m(w(b(C=D)))))},O.preclip=function(D){return arguments.length?(m=D,p=void 0,$()):m},O.postclip=function(D){return arguments.length?(b=D,g=y=v=_=null,$()):b},O.clipAngle=function(D){return arguments.length?(m=+D?Tnn(p=D*Sn):(p=null,Vye),$()):p*zi},O.clipExtent=function(D){return arguments.length?(b=D==null?(g=y=v=_=null,sC):MBe(g=+D[0][0],y=+D[0][1],v=+D[1][0],_=+D[1][1]),$()):g==null?null:[[g,y],[v,_]]},O.scale=function(D){return arguments.length?(n=+D,N()):n},O.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],N()):[r,i]},O.center=function(D){return arguments.length?(s=D[0]%360*Sn,o=D[1]%360*Sn,N()):[s*zi,o*zi]},O.rotate=function(D){return arguments.length?(a=D[0]%360*Sn,u=D[1]%360*Sn,l=D.length>2?D[2]%360*Sn:0,N()):[a*zi,u*zi,l*zi]},O.angle=function(D){return arguments.length?(f=D%360*Sn,N()):f*zi},O.reflectX=function(D){return arguments.length?(d=D?-1:1,N()):d<0},O.reflectY=function(D){return arguments.length?(h=D?-1:1,N()):h<0},O.precision=function(D){return arguments.length?(w=n1e(x,E=D*D),$()):ka(E)},O.fitExtent=function(D,B){return o5(O,D,B)},O.fitSize=function(D,B){return xte(O,D,B)},O.fitWidth=function(D,B){return Ste(O,D,B)},O.fitHeight=function(D,B){return Tte(O,D,B)};function N(){var D=r1e(n,0,0,d,h,f).apply(null,t(s,o)),B=r1e(n,r-D[0],i-D[1],d,h,f);return c=RBe(a,u,l),x=fq(t,B),S=fq(c,x),w=n1e(x,E),$()}function $(){return I=C=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&z,N()}}function Ate(e){var t=0,n=An/3,r=XBe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sn,n=s[1]*Sn):[t*zi,n*zi]},i}function Wnn(e){var t=Ft(e);function n(r,i){return[r*t,Rt(i)/t]}return n.invert=function(r,i){return[r/t,Eu(i*t)]},n}function Gnn(e,t){var n=Rt(e),r=(n+Rt(t))/2;if(zn(r)<Dt)return Wnn(e);var i=1+n*(2*r-n),s=ka(i)/r;function o(a,u){var l=ka(i-2*r*Rt(u))/r;return[l*Rt(a*=r),s-l*Ft(a)]}return o.invert=function(a,u){var l=s-u,c=sc(a,zn(l))*Vl(l);return l*r<0&&(c-=An*Vl(a)*Vl(l)),[c/r,Eu((i-(a*a+l*l)*r*r)/(2*r))]},o}function GL(){return Ate(Gnn).scale(155.424).center([0,33.6442])}function QBe(){return GL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ynn(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Knn(){var e,t,n=QBe(),r,i=GL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=GL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Ynn([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Dt,m+.12*h+Dt],[p-.214*h-Dt,m+.234*h-Dt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Dt,m+.166*h+Dt],[p-.115*h-Dt,m+.234*h-Dt]]).stream(l),f()},c.fitExtent=function(d,h){return o5(c,d,h)},c.fitSize=function(d,h){return xte(c,d,h)},c.fitWidth=function(d,h){return Ste(c,d,h)},c.fitHeight=function(d,h){return Tte(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function JBe(e){return function(t,n){var r=Ft(t),i=Ft(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Rt(t),s*Rt(n)]}}function iO(e){return function(t,n){var r=ka(t*t+n*n),i=e(r),s=Rt(i),o=Ft(i);return[sc(t*s,r*o),Eu(r&&n*s/r)]}}var ZBe=JBe(function(e){return ka(2/(1+e))});ZBe.invert=iO(function(e){return 2*Eu(e/2)});function Xnn(){return hh(ZBe).scale(124.75).clipAngle(180-.001)}var eje=JBe(function(e){return(e=EBe(e))&&e/Rt(e)});eje.invert=iO(function(e){return e});function Qnn(){return hh(eje).scale(79.4188).clipAngle(180-.001)}function a5(e,t){return[e,CL(bte((Ri+t)/2))]}a5.invert=function(e,t){return[e,2*mx(wBe(t))-Ri]};function Jnn(){return tje(a5).scale(961/Pa)}function tje(e){var t=hh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=An*r(),d=t(ynn(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===a5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function fk(e){return bte((Ri+e)/2)}function Znn(e,t){var n=Ft(e),r=e===t?Rt(e):CL(n/Ft(t))/CL(fk(t)/fk(e)),i=n*zj(fk(e),r)/r;if(!r)return a5;function s(o,a){i>0?a<-Ri+Dt&&(a=-Ri+Dt):a>Ri-Dt&&(a=Ri-Dt);var u=i/zj(fk(a),r);return[u*Rt(r*o),i-u*Ft(r*o)]}return s.invert=function(o,a){var u=i-a,l=Vl(r)*ka(o*o+u*u),c=sc(o,zn(u))*Vl(u);return u*r<0&&(c-=An*Vl(o)*Vl(u)),[c/r,2*mx(zj(i/l,1/r))-Ri]},s}function ern(){return Ate(Znn).scale(109.5).parallels([30,30])}function YL(e,t){return[e,t]}YL.invert=YL;function trn(){return hh(YL).scale(152.63)}function nrn(e,t){var n=Ft(e),r=e===t?Rt(e):(n-Ft(t))/(t-e),i=n/r+e;if(zn(r)<Dt)return YL;function s(o,a){var u=i-a,l=r*o;return[u*Rt(l),i-u*Ft(l)]}return s.invert=function(o,a){var u=i-a,l=sc(o,zn(u))*Vl(u);return u*r<0&&(l-=An*Vl(o)*Vl(u)),[l/r,i-Vl(r)*ka(o*o+u*u)]},s}function rrn(){return Ate(nrn).scale(131.154).center([0,13.9389])}var v2=1.340264,_2=-.081106,b2=893e-6,w2=.003796,KL=ka(3)/2,irn=12;function nje(e,t){var n=Eu(KL*Rt(t)),r=n*n,i=r*r*r;return[e*Ft(n)/(KL*(v2+3*_2*r+i*(7*b2+9*w2*r))),n*(v2+_2*r+i*(b2+w2*r))]}nje.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<irn&&(a=n*(v2+_2*r+i*(b2+w2*r))-t,u=v2+3*_2*r+i*(7*b2+9*w2*r),n-=o=a/u,r=n*n,i=r*r*r,!(zn(o)<TL));++s);return[KL*e*(v2+3*_2*r+i*(7*b2+9*w2*r))/Ft(n),Eu(Rt(n)/KL)]};function srn(){return hh(nje).scale(177.158)}function rje(e,t){var n=Ft(t),r=Ft(e)*n;return[n*Rt(e)/r,Rt(t)/r]}rje.invert=iO(mx);function orn(){return hh(rje).scale(144.049).clipAngle(60)}function arn(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=s5({point:function(b,E){var w=_([b,E]);this.stream.point(w[0],w[1])}}),m=sC,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(b){var E=b[0]*d,w=b[1]*h;if(s){var x=w*o-E*a;E=E*o+w*a,w=x}return[E+t,w+n]}return _.invert=function(b){var E=b[0]-t,w=b[1]-n;if(s){var x=w*o+E*a;E=E*o-w*a,w=x}return[E/d,w/h]},_.stream=function(b){return g&&y===b?g:g=p(m(y=b))},_.postclip=function(b){return arguments.length?(m=b,u=l=c=f=null,v()):m},_.clipExtent=function(b){return arguments.length?(m=b==null?(u=l=c=f=null,sC):MBe(u=+b[0][0],l=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(b){return arguments.length?(e=+b,v()):e},_.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},_.angle=function(b){return arguments.length?(s=b%360*Sn,a=Rt(s),o=Ft(s),v()):s*zi},_.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},_.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},_.fitExtent=function(b,E){return o5(_,b,E)},_.fitSize=function(b,E){return xte(_,b,E)},_.fitWidth=function(b,E){return Ste(_,b,E)},_.fitHeight=function(b,E){return Tte(_,b,E)},_}function ije(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}ije.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(zn(i)>Dt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function urn(){return hh(ije).scale(175.295)}function sje(e,t){return[Ft(t)*Rt(e),Rt(t)]}sje.invert=iO(Eu);function lrn(){return hh(sje).scale(249.5).clipAngle(90+Dt)}function oje(e,t){var n=Ft(t),r=1+Ft(e)*n;return[n*Rt(e)/r,Rt(t)/r]}oje.invert=iO(function(e){return 2*mx(e)});function crn(){return hh(oje).scale(250).clipAngle(142)}function aje(e,t){return[CL(bte((Ri+t)/2)),-e]}aje.invert=function(e,t){return[-t,2*mx(wBe(e))-Ri]};function frn(){var e=tje(aje),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var drn=Math.abs,Eq=Math.cos,XL=Math.sin,hrn=1e-6,uje=Math.PI,xq=uje/2,i1e=prn(2);function s1e(e){return e>1?xq:e<-1?-xq:Math.asin(e)}function prn(e){return e>0?Math.sqrt(e):0}function mrn(e,t){var n=e*XL(t),r=30,i;do t-=i=(t+XL(t)-n)/(1+Eq(t));while(drn(i)>hrn&&--r>0);return t/2}function grn(e,t,n){function r(i,s){return[e*i*Eq(s=mrn(n,s)),t*XL(s)]}return r.invert=function(i,s){return s=s1e(s/t),[i/(e*Eq(s)),s1e((2*s+XL(2*s))/n)]},r}var yrn=grn(i1e/xq,i1e,uje);function vrn(){return hh(yrn).scale(169.529)}const _rn=KBe(),Sq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function brn(e,t){return function n(){const r=t();return r.type=e,r.path=KBe().projection(r),r.copy=r.copy||function(){const i=n();return Sq.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},A8e(r)}}function Cte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(QL[e]=brn(e,t),this):QL[e]||null}function lje(e){return e&&e.path||_rn}const QL={albers:QBe,albersusa:Knn,azimuthalequalarea:Xnn,azimuthalequidistant:Qnn,conicconformal:ern,conicequalarea:GL,conicequidistant:rrn,equalEarth:srn,equirectangular:trn,gnomonic:orn,identity:arn,mercator:Jnn,mollweide:vrn,naturalEarth1:urn,orthographic:lrn,stereographic:crn,transversemercator:frn};for(const e in QL)Cte(e,QL[e]);function wrn(){}const Ah=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function cje(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),Ern(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(xrn((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Ah[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,Ah[m|g<<1].forEach(_);for(Ah[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Ah[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Ah[m|g<<1|y<<2|v<<3].forEach(_);Ah[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,Ah[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Ah[y<<2|v<<3].forEach(_);Ah[y<<3].forEach(_);function _(b){var E=[b[0][0]+h,b[0][1]+p],w=[b[1][0]+h,b[1][1]+p],x=o(E),S=o(w),I,C;(I=d[x])?(C=f[S])?(delete d[I.end],delete f[C.start],I===C?(I.ring.push(w),c(I.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete d[I.end],I.ring.push(w),d[I.end=S]=I):(I=f[S])?(C=d[x])?(delete f[I.start],delete d[C.end],I===C?(I.ring.push(w),c(I.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete f[I.start],I.ring.unshift(E),f[I.start=x]=I):f[x]=d[S]={start:x,end:S,ring:[E,w]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Te("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:wrn,r):n===a},r}function Ern(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function xrn(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Srn(e,t[n]))return i;return 0}function Srn(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Trn(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Trn(e,t,n){var r;return Arn(e,t,n)&&Crn(e[r=+(e[0]===t[0])],n[r],t[r])}function Arn(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Crn(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function fje(e,t,n){return function(r){var i=Jd(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?XA(s,o,e):a/(e+1);return jv(s+u,o,u)}}function Ite(e){Ee.call(this,null,e)}Ite.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};We(Ite,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||na,s=cje().smooth(e.smooth!==!1),o=e.thresholds||Irn(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ie(o)?o:o(c.values));Orn(f,c,l,e),f.forEach(d=>{u.push(RF(l,dr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Irn(e,t,n){const r=fje(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>_1(t(i).values)))}function Orn(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pn(i)&&(i=i(n,r)),pn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Jn(i)?i:i[0])||1,a=(Jn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(dje(t,o,a,u,l))}function dje(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function o1e(e,t,n){const r=e>=0?e:MZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Wj(e){return pn(e)?e:ra(+e)}function hje(){var e=u=>u[0],t=u=>u[1],n=ox,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=o1e(r[0],u,e)>>o,f=o1e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(b=>{const E=d+(+e(b)>>o),w=h+(+t(b)>>o);E>=0&&E<p&&w>=0&&w<m&&(g[E+w*p]+=+n(b))}),c>0&&f>0?(b_(p,m,g,y,c),w_(p,m,y,g,f),b_(p,m,g,y,c),w_(p,m,y,g,f),b_(p,m,g,y,c),w_(p,m,y,g,f)):c>0?(b_(p,m,g,y,c),b_(p,m,y,g,c),b_(p,m,g,y,c),v=y):f>0&&(w_(p,m,g,y,f),w_(p,m,y,g,f),w_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/KFe(v);for(let b=0,E=p*m;b<E;++b)v[b]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Wj(u),a):e},a.y=function(u){return arguments.length?(t=Wj(u),a):t},a.weight=function(u){return arguments.length?(n=Wj(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Te("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Te("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Te("invalid bandwidth"),r=u,a):r},a}function b_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function w_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Ote(e){Ee.call(this,null,e)}Ote.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Prn=["x","y","weight","size","cellSize","bandwidth"];function pje(e,t){return Prn.forEach(n=>t[n]!=null?e[n](t[n]):0),e}We(Ote,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=krn(r,e.groupby),s=(e.groupby||[]).map(Ni),o=pje(hje(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>dr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function krn(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Pte(e){Ee.call(this,null,e)}Pte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};We(Pte,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=cje().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||fje(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=pje(hje(),e)(i,!0),u=dje(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ie(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(dr),n}});const Tq="Feature",kte="FeatureCollection",$rn="MultiPoint";function $te(e){Ee.call(this,null,e)}$te.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};We($te,Ee,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&na,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Yo(a))||s&&t.modified(Yo(s))||o&&t.modified(Yo(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Tq,geometry:{type:$rn,coordinates:r}})),this.value={type:kte,features:n}}});function Rte(e){Ee.call(this,null,e)}Rte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};We(Rte,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||na,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=lje(e.projection),n.materialize().reflow()):o=i===na||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Rrn(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Rrn(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Nte(e){Ee.call(this,null,e)}Nte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};We(Nte,Ee,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Dte(e){Ee.call(this,null,e)}Dte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};We(Dte,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Nrn(lje(e.projection),e.field||tc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Nrn(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Lte(e){Ee.call(this,[],e),this.generator=Cnn()}Lte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};We(Lte,Ee,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(P5e(n[0],i)):t.add.push(dr(i)),n[0]=i,t}});function Mte(e){Ee.call(this,null,e)}Mte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};We(Mte,Ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||na,s=Lrn(e.opacity,e),o=Drn(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?_1(n.map(l=>_1(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=hn({},l,u);r||(f.$max=_1(c.values||[])),l[a]=Mrn(c,f,o.dep?o:ra(o(f)),s.dep?s:ra(s(f)))}),t.reflow(!0).modifies(a)}});function Drn(e,t){let n;return pn(e)?(n=r=>Xg(e(r,t)),n.dep=mje(e)):n=ra(Xg(e||"#888")),n}function Lrn(e,t){let n;return pn(e)?(n=r=>e(r,t),n.dep=mje(e)):e?n=ra(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function mje(e){if(!pn(e))return!1;const t=gf(Yo(e));return t.$x||t.$y||t.$value||t.$max}function Mrn(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:qm,d=Ng(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const b=n(t);m[y+0]=b.r,m[y+1]=b.g,m[y+2]=b.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function gje(e){Ee.call(this,null,e),this.modified(!0)}We(gje,Ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Brn(e.type),Sq.forEach(r=>{e[r]!=null&&a1e(n,r,e[r])})):Sq.forEach(r=>{e.modified(r)&&a1e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Frn(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Frn(e,t){const n=jrn(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Brn(e){const t=Cte((e||"mercator").toLowerCase());return t||Te("Unrecognized projection type: "+e),t()}function a1e(e,t,n){pn(e[t])&&e[t](n)}function jrn(e){return e=nt(e),e.length===1?e[0]:{type:kte,features:e.reduce((t,n)=>t.concat(zrn(n)),[])}}function zrn(e){return e.type===kte?e.features:nt(e).filter(t=>t!=null).map(t=>t.type===Tq?t:{type:Tq,geometry:t})}const Urn=Object.freeze(Object.defineProperty({__proto__:null,contour:Pte,geojson:$te,geopath:Rte,geopoint:Nte,geoshape:Dte,graticule:Lte,heatmap:Mte,isocontour:Ite,kde2d:Ote,projection:gje},Symbol.toStringTag,{value:"Module"})),u1e={center:QRt,collide:gNt,nbody:CNt,link:vNt,x:INt,y:ONt},bT="forces",Aq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Vrn=["static","iterations"],yje=["x","y","vx","vy"];function Fte(e){Ee.call(this,null,e)}Fte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:yje}]};We(Fte,Ee,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Aq),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&vje(n,e,0,t)):(this.value=n=qrn(t.source,e),n.on("tick",Hrn(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Vrn)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==bT||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(yje)}});function Hrn(e,t){return()=>e.touch(t).run()}function qrn(e,t){const n=ANt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),vje(n,t,!0).on("end",()=>s=!0)}function vje(e,t,n,r){var i=nt(t.forces),s,o,a,u;for(s=0,o=Aq.length;s<o;++s)a=Aq[s],a!==bT&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=bT+s,a=n||t.modified(bT,s)?Grn(i[s]):r&&Wrn(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(bT+s,null);return e.numForces=i.length,e}function Wrn(e,t){var n,r;for(n in e)if(pn(r=e[n])&&t.modified(Yo(r)))return 1;return 0}function Grn(e){var t,n;Nt(u1e,e.force)||Te("Unrecognized force: "+e.force),t=u1e[e.force]();for(n in e)pn(t[n])&&Yrn(t[n],e[n],e);return t}function Yrn(e,t,n){e(pn(t)?r=>t(r,n):t)}const Krn=Object.freeze(Object.defineProperty({__proto__:null,force:Fte},Symbol.toStringTag,{value:"Module"}));function Cq(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Bte(e){Ee.call(this,null,e)}Bte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Xrn=e=>e.values;We(Bte,Ee,{transform(e,t){t.source||Te("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&$F(o.data)&&i.rem.push(o.data)}),this.value=s=R4({values:nt(e.keys).reduce((o,a)=>(o.key(a),o),Qrn()).entries(i.source)},Xrn),n&&s.each(o=>{o.children&&(o=dr(o.data),i.add.push(o),i.source.push(o))}),Cq(s,$t,$t)),i.source.root=s,i}});function Qrn(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function im(e){Ee.call(this,null,e)}const Jrn=(e,t)=>e.parent===t.parent?1:2;We(im,Ee,{transform(e,t){(!t.source||!t.source.root)&&Te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(zv(e.sort,o=>o.data)),Zrn(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Jrn:ox);try{this.value=n(i)}catch(o){Te(o)}return i.each(o=>ein(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Zrn(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function ein(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const Iq=["x","y","r","depth","children"];function jte(e){im.call(this,e)}jte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Iq.length,default:Iq}]};We(jte,im,{layout:INe,params:["radius","size","padding"],fields:Iq});const Oq=["x0","y0","x1","y1","depth","children"];function zte(e){im.call(this,e)}zte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Oq.length,default:Oq}]};We(zte,im,{layout:wDt,params:["size","round","padding"],fields:Oq});function Ute(e){Ee.call(this,null,e)}Ute.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};We(Ute,Ee,{transform(e,t){t.source||Te("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Cq(Ipe().id(e.key).parentId(e.parentKey)(i.source),e.key,nc):Cq(Ipe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const l1e={tidy:kDt,cluster:HNt},Pq=["x","y","depth","children"];function Vte(e){im.call(this,e)}Vte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Pq.length,default:Pq}]};We(Vte,im,{layout(e){const t=e||"tidy";if(Nt(l1e,t))return l1e[t]();Te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Pq});function Hte(e){Ee.call(this,[],e)}Hte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};We(Hte,Ee,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[$t(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[$t(a)]&&s[$t(u)]&&i.add.push(dr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[$t(o)]=1),n.forEach(o=>{(s[$t(o.source)]||s[$t(o.target)])&&i.mod.push(o)})),i}});const c1e={binary:RDt,dice:wI,slice:N4,slicedice:NDt,squarify:$Ne,resquarify:DDt},kq=["x0","y0","x1","y1","depth","children"];function qte(e){im.call(this,e)}qte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kq.length,default:kq}]};We(qte,im,{layout(){const e=$Dt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Nt(c1e,t)?e.tile(c1e[t]):Te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:kq});const tin=Object.freeze(Object.defineProperty({__proto__:null,nest:Bte,pack:jte,partition:zte,stratify:Ute,tree:Vte,treelinks:Hte,treemap:qte},Symbol.toStringTag,{value:"Module"})),Gj=4278190080;function nin(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function rin(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Ng(s,o).getContext("2d"),l=Ng(s,o).getContext("2d"),c=a&&Ng(s,o).getContext("2d");n.forEach(S=>U$(u,S,!1)),U$(l,t,!1),a&&U$(c,t,!0);const f=Yj(u,s,o),d=Yj(l,s,o),h=a&&Yj(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,b,E,w,x;for(y=0;y<o;++y)for(g=0;g<s;++g)b=y*s+g,E=f[b]&Gj,x=d[b]&Gj,w=a&&h[b]&Gj,(E||w||x)&&(v=e(g),_=e(y),!i&&(E||x)&&p.set(v,_),a&&(E||w)&&m.set(v,_));return[p,m]}function Yj(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function U$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>U$(e,s.items,n))}):fl[r].draw(e,{items:n?t.map(iin):t})}function iin(e){const t=RF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ch=5,la=31,aC=32,Dm=new Uint32Array(aC+1),Uc=new Uint32Array(aC+1);Uc[0]=0;Dm[0]=~Uc[0];for(let e=1;e<=aC;++e)Uc[e]=Uc[e-1]<<1|1,Dm[e]=~Uc[e];function sin(e,t){const n=new Uint32Array(~~((e*t+aC)/aC));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ch]&1<<(a&la)},set:(s,o)=>{const a=o*e+s;r(a>>>Ch,1<<(a&la))},clear:(s,o)=>{const a=o*e+s;i(a>>>Ch,~(1<<(a&la)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ch,h=f>>>Ch,d===h){if(n[d]&Dm[c&la]&Uc[(f&la)+1])return!0}else{if(n[d]&Dm[c&la]||n[h]&Uc[(f&la)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ch,d=c>>>Ch,f===d)r(f,Dm[l&la]&Uc[(c&la)+1]);else for(r(f,Dm[l&la]),r(d,Uc[(c&la)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ch,d=c>>>Ch,f===d)i(f,Uc[l&la]|Dm[(c&la)+1]);else for(i(f,Uc[l&la]),i(d,Dm[(c&la)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function oin(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>sin(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function ain(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=el.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function JL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function ug(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function uin(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!JL(p,m,d,h,i,s)&&!ug(e,p,m,h,d,g,o,a)&&!ug(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,ug(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=el.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,b,E,w,x,S,I,C,O,z,N,$,D,B,V,j;for(let G=0;G<f;++G){for(v=c[G].x,b=c[G].y,_=c[G].x2===void 0?v:c[G].x2,E=c[G].y2===void 0?b:c[G].y2,v>_&&(j=v,v=_,_=j),b>E&&(j=b,b=E,E=j),C=e(v),z=e(_),O=~~((C+z)/2),N=e(b),D=e(E),$=~~((N+D)/2),S=O;S>=C;--S)for(I=$;I>=N;--I)V=u(S,I,p,h,d),V&&([l.x,l.y,p,m]=V);for(S=O;S<=z;++S)for(I=$;I<=D;++I)V=u(S,I,p,h,d),V&&([l.x,l.y,p,m]=V);!m&&!n&&(B=Math.abs(_-v+E-b),w=(v+_)/2,x=(b+E)/2,B>=y&&!JL(w,x,h,d,i,s)&&!ug(e,w,x,d,h,d,o,null)&&(y=B,l.x=w,l.y=x,g=!0))}return m||g?(w=h/2,x=d/2,o.setRange(e(l.x-w),e(l.y-x),e(l.x+w),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const lin=[-1,-1,1,1],cin=[-1,1,-1,1];function fin(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=el.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,b,E,w,x,S,I,C,O,z,N,$;for(let D=0;D<f;++D){for(_=c[D].x,E=c[D].y,b=c[D].x2===void 0?_:c[D].x2,w=c[D].y2===void 0?E:c[D].y2,p.push([e((_+b)/2),e((E+w)/2)]);p.length;)if([I,C]=p.pop(),!(o.get(I,C)||a.get(I,C)||u.get(I,C))){u.set(I,C);for(let B=0;B<4;++B)x=I+lin[B],S=C+cin[B],u.outOfBounds(x,S,x,S)||p.push([x,S]);if(x=e.invert(I),S=e.invert(C),O=m,z=s,!JL(x,S,h,d,i,s)&&!ug(e,x,S,d,h,O,o,a)&&!ug(e,x,S,d,h,d,o,null)){for(;z-O>=1;)N=(O+z)/2,ug(e,x,S,d,h,N,o,a)?z=N:O=N;O>m&&(l.x=x,l.y=S,m=O,g=!0)}}!g&&!n&&($=Math.abs(b-_+w-E),x=(_+b)/2,S=(E+w)/2,$>=v&&!JL(x,S,h,d,i,s)&&!ug(e,x,S,d,h,d,o,null)&&(v=$,l.x=x,l.y=S,y=!0))}return g||y?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const din=["right","center","left"],hin=["bottom","middle","top"];function pin(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,b,E,w,x,S,I,C,O;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,m=h===0&&p===0||r[z]<0,g=h&&p?Math.SQRT1_2:1,y=r[z]<0?-1:1,v=c[1+h]+r[z]*h*g,x=c[4+p]+y*f*p/2+r[z]*p*g,b=x-f/2,E=x+f/2,S=e(v),C=e(b),O=e(E),!d)if(f1e(S,S,C,O,o,a,v,v,b,E,c,m))d=el.width(l.datum,l.datum.text);else continue;if(w=v+y*d*h/2,v=w-d/2,_=w+d/2,S=e(v),I=e(_),f1e(S,I,C,O,o,a,v,_,b,E,c,m))return l.x=h?h*y<0?_:v:w,l.y=p?p*y<0?E:b:x,l.align=din[h*y+1],l.baseline=hin[p*y+1],o.setRange(S,C,I,O),!0}return!1}}function f1e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const Kj=0,Xj=4,Qj=8,Jj=0,Zj=1,e7=2,min={"top-left":Kj+Jj,top:Kj+Zj,"top-right":Kj+e7,left:Xj+Jj,middle:Xj+Zj,right:Xj+e7,"bottom-left":Qj+Jj,bottom:Qj+Zj,"bottom-right":Qj+e7},gin={naive:ain,"reduced-search":uin,floodfill:fin};function yin(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=vin(r,f),h=_in(i,f),p=bin(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=win(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let b=-1,E=-1;const w=e.map(C=>{const O=v?el.width(C,C.text):void 0;return b=Math.max(b,O),E=Math.max(E,C.fontSize),{datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(C),textWidth:O}});l=l===null||l===1/0?Math.max(b,E)+Math.max(...r):l;const x=oin(t[0],t[1],l);let S;if(!_){n&&w.sort((z,N)=>n(z.datum,N.datum));let C=!1;for(let z=0;z<h.length&&!C;++z)C=h[z]===5||d[z]<0;const O=(p&&o||g)&&e.map(z=>z.datum);S=s.length||O?rin(x,O||[],s,C,g):nin(x,o&&w)}const I=g?gin[c](x,S,o,u):pin(x,S,h,d);return w.forEach(C=>C.opacity=+I(C)),w}function vin(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function _in(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=min[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function bin(e){return e&&e.mark&&e.mark.marktype}function win(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const $q=["x","y","opacity","align","baseline"],_je=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Wte(e){Ee.call(this,null,e)}Wte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:_je},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:$q.length,default:$q}]};We(Wte,Ee,{transform(e,t){function n(s){const o=e[s];return pn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Te("Size parameter should be specified as a [width, height] array.");const i=e.as||$q;return yin(t.materialize(t.SOURCE).source||[],e.size,e.sort,nt(e.offset==null?1:e.offset),nt(e.anchor||_je),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Ein=Object.freeze(Object.defineProperty({__proto__:null,label:Wte},Symbol.toStringTag,{value:"Module"}));function bje(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Gte(e){Ee.call(this,null,e)}Gte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};We(Gte,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=bje(r,e.groupby),s=(e.groupby||[]).map(Ni),o=s.length,a=e.as||[Ni(e.x),Ni(e.y)],u=[];i.forEach(l=>{Y5e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(dr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Rq={constant:KZ,linear:XZ,log:H5e,exp:q5e,pow:W5e,quad:QZ,poly:G5e},xin=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Yte(e){Ee.call(this,null,e)}Yte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Rq)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};We(Yte,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=bje(r,e.groupby),s=(e.groupby||[]).map(Ni),o=e.method||"linear",a=e.order==null?3:e.order,u=xin(o,a),l=e.as||[Ni(e.x),Ni(e.y)],c=Rq[o],f=[];let d=e.extent;Nt(Rq,o)||Te("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(dr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Jd(h,e.x),y=v=>{const _={};for(let b=0;b<s.length;++b)_[s[b]]=h.dims[b];_[l[0]]=v[0],_[l[1]]=v[1],f.push(dr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):jF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Sin=Object.freeze(Object.defineProperty({__proto__:null,loess:Gte,regression:Yte},Symbol.toStringTag,{value:"Module"})),d1e=1e-6;class i1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>d1e||Math.abs(this._y1-s)>d1e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Nq{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Tin=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const b=r[m]*2,E=r[m+1]*2,w=r[m+2]*2,x=t[b],S=t[b+1],I=t[E],C=t[E+1],O=t[w],z=t[w+1],N=I-x,$=C-S,D=O-x,B=z-S,V=(N*B-$*D)*2;if(Math.abs(V)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const j=1e9*Math.sign((s-x)*B-(o-S)*D);v=(x+O)/2-j*B,_=(S+z)/2+j*D}else{const j=1/V,G=N*N+$*$,U=D*D+B*B;v=x+(B*G-$*U)*j,_=S+(N*U-D*G)*j}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new i1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new i1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new i1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Nq;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Ain=2*Math.PI,E_=Math.pow;function Cin(e){return e[0]}function Iin(e){return e[1]}function Oin(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Pin(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Kte{static from(t,n=Cin,r=Iin,i){return new Kte("length"in t?kin(t,n,r,i):Float64Array.from($in(t,n,r,i)))}constructor(t){this._delaunator=new QD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Oin(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Pin(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new QD(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Tin(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=E_(n-l[t*2],2)+E_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=E_(n-l[p*2],2)+E_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&E_(n-l[h*2],2)+E_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new i1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new i1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Ain)}return r&&r.value()}renderHull(t){const n=t==null?t=new i1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Nq;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new i1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Nq;return this.renderTriangle(t,n),n.value()}}function kin(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*$in(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Xte(e){Ee.call(this,null,e)}Xte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Rin=[-1e5,-1e5,1e5,1e5];We(Xte,Ee,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Rin;const s=this.value=Kte.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Din(u)?Nin(u):null}return t.reflow(e.modified()).modifies(n)}});function Nin(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Din(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Lin=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Xte},Symbol.toStringTag,{value:"Module"}));var t7=Math.PI/180,wT=64,V$=2048;function Min(){var e=[256,256],t,n,r,i,s,o,a,u=wje,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Ng()),m=Vin((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],b=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,x)=>x.size-w.size);++v<y;){var E=b[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,Fin(p,E,b,v),E.hasText&&h(m,E,g)&&(_.push(E),g?jin(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(wT<<5)/m,p.height=V$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=u(e),E=c()<.5?1:-1,w=-E,x,S,I;(x=b(w+=E))&&(S=~~x[0],I=~~x[1],!(Math.min(Math.abs(S),Math.abs(I))>=_));)if(m.x=y+S,m.y=v+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Bin(m,p,e[0]))&&(!g||zin(m,g))){for(var C=m.sprite,O=m.width>>5,z=e[0]>>5,N=m.x-(O<<4),$=N&127,D=32-$,B=m.y1-m.y0,V=(m.y+m.y0)*z+(N>>5),j,G=0;G<B;G++){j=0;for(var U=0;U<=O;U++)p[V+U]|=j<<D|(U<O?(j=C[G*O+U])>>>$:0);V+=z}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=ny(p),f):n},f.fontStyle=function(p){return arguments.length?(i=ny(p),f):i},f.fontWeight=function(p){return arguments.length?(s=ny(p),f):s},f.rotate=function(p){return arguments.length?(o=ny(p),f):o},f.text=function(p){return arguments.length?(t=ny(p),f):t},f.spiral=function(p){return arguments.length?(u=Hin[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=ny(p),f):r},f.padding=function(p){return arguments.length?(a=ny(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Fin(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(wT<<5)/s,V$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*t7),g=Math.cos(t.rotate*t7),y=c*g,v=c*m,_=d*g,b=d*m;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=wT<<5&&(o=0,a+=u,u=0),a+d>=V$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*t7),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(wT<<5)/s,V$/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var I=f*p+(h>>5),C=E[(a+p)*(wT<<5)+(o+h)<<2]?1<<31-h%32:0;w[I]|=C,x|=C}x?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function Bin(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function jin(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function zin(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function wje(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Uin(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Vin(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function ny(e){return typeof e=="function"?e:function(){return e}}var Hin={archimedean:wje,rectangular:Uin};const Eje=["x","y","font","fontSize","fontStyle","fontWeight","angle"],qin=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Qte(e){Ee.call(this,Min(),e)}Qte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Eje}]};We(Qte,Ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Te("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return pn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||qin.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||Eje;let a=e.fontSize||14,u;if(pn(a)?u=e.fontSizeRange:a=ra(a),u){const p=a,m=or("sqrt")().domain(Jd(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ic).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Win=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Qte},Symbol.toStringTag,{value:"Module"})),Gin=e=>new Uint8Array(e),Yin=e=>new Uint16Array(e),E2=e=>new Uint32Array(e);function Kin(){let e=8,t=[],n=E2(0),r=dk(0,e),i=dk(0,e);return{data:()=>t,seen:()=>n=Xin(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=dk(s,e,r),i=dk(s,e))}}}function Xin(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function dk(e,t,n){const r=(t<257?Gin:t<65537?Yin:E2)(e);return n&&r.set(n),r}function h1e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function p1e(){let e=E2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=E2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Qin(h,d),c)p=t,m=e,t=Array(c+f),e=E2(c+f),Jin(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[oKt(u,a[0],0,l),lL(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Qin(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),cKt(e,t)}function Jin(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Jte(e){Ee.call(this,Kin(),e),this._indices=null,this._dims=null}Jte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};We(Jte,Ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=p1e()),s.push(h1e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,b,E,w,x;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,E=0,w=v.length;E<w;++E)b[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=p1e(),p[y]=m=g.insert(x,t.source,0)),o[E]=h1e(g,E,i[E]).onAdd(m,u));for(E=0,w=a.data().length;E<w;++E)_[E]||(l[E]!==u[E]?f.push(E):b[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Zte(e){Ee.call(this,null,e)}Zte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};We(Zte,Ee,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Zin=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Jte,resolvefilter:Zte},Symbol.toStringTag,{value:"Module"})),esn="RawCode",nv="Literal",tsn="Property",nsn="Identifier",rsn="ArrayExpression",isn="BinaryExpression",xje="CallExpression",ssn="ConditionalExpression",osn="LogicalExpression",asn="MemberExpression",usn="ObjectExpression",lsn="UnaryExpression";function Cf(e){this.type=e}Cf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=csn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function csn(e){switch(e.type){case rsn:return e.elements;case isn:case osn:return[e.left,e.right];case xje:return[e.callee].concat(e.arguments);case ssn:return[e.test,e.consequent,e.alternate];case asn:return[e.object,e.property];case usn:return e.properties;case tsn:return[e.key,e.value];case lsn:return[e.argument];case nsn:case nv:case esn:default:return[]}}var ph,xt,xe,Xo,_r,u5=1,sO=2,rv=3,z0=4,l5=5,Hv=6,Xa=7,oO=8,fsn=9;ph={};ph[u5]="Boolean";ph[sO]="<end>";ph[rv]="Identifier";ph[z0]="Keyword";ph[l5]="Null";ph[Hv]="Numeric";ph[Xa]="Punctuator";ph[oO]="String";ph[fsn]="RegularExpression";var dsn="ArrayExpression",hsn="BinaryExpression",psn="CallExpression",msn="ConditionalExpression",Sje="Identifier",gsn="Literal",ysn="LogicalExpression",vsn="MemberExpression",_sn="ObjectExpression",bsn="Property",wsn="UnaryExpression",js="Unexpected token %0",Esn="Unexpected number",xsn="Unexpected string",Ssn="Unexpected identifier",Tsn="Unexpected reserved word",Asn="Unexpected end of input",Dq="Invalid regular expression",n7="Invalid regular expression: missing /",Tje="Octal literals are not allowed in strict mode.",Csn="Duplicate data property in object literal not allowed in strict mode",ho="ILLEGAL",uC="Disabled.",Isn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Osn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function c5(e,t){if(!e)throw new Error("ASSERT: "+t)}function Fh(e){return e>=48&&e<=57}function ene(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function x2(e){return"01234567".indexOf(e)>=0}function Psn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function lC(e){return e===10||e===13||e===8232||e===8233}function aO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Isn.test(String.fromCharCode(e))}function ZL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Osn.test(String.fromCharCode(e))}const ksn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Aje(){for(;xe<Xo;){const e=xt.charCodeAt(xe);if(Psn(e)||lC(e))++xe;else break}}function Lq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)xe<Xo&&ene(xt[xe])?(r=xt[xe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ir({},js,ho);return String.fromCharCode(i)}function $sn(){var e,t,n,r;for(e=xt[xe],t=0,e==="}"&&ir({},js,ho);xe<Xo&&(e=xt[xe++],!!ene(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ir({},js,ho),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Cje(){var e,t;for(e=xt.charCodeAt(xe++),t=String.fromCharCode(e),e===92&&(xt.charCodeAt(xe)!==117&&ir({},js,ho),++xe,e=Lq("u"),(!e||e==="\\"||!aO(e.charCodeAt(0)))&&ir({},js,ho),t=e);xe<Xo&&(e=xt.charCodeAt(xe),!!ZL(e));)++xe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),xt.charCodeAt(xe)!==117&&ir({},js,ho),++xe,e=Lq("u"),(!e||e==="\\"||!ZL(e.charCodeAt(0)))&&ir({},js,ho),t+=e);return t}function Rsn(){var e,t;for(e=xe++;xe<Xo;){if(t=xt.charCodeAt(xe),t===92)return xe=e,Cje();if(ZL(t))++xe;else break}return xt.slice(e,xe)}function Nsn(){var e,t,n;return e=xe,t=xt.charCodeAt(xe)===92?Cje():Rsn(),t.length===1?n=rv:ksn.hasOwnProperty(t)?n=z0:t==="null"?n=l5:t==="true"||t==="false"?n=u5:n=rv,{type:n,value:t,start:e,end:xe}}function r7(){var e=xe,t=xt.charCodeAt(xe),n,r=xt[xe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xe,{type:Xa,value:String.fromCharCode(t),start:e,end:xe};default:if(n=xt.charCodeAt(xe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xe+=2,{type:Xa,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:xe};case 33:case 61:return xe+=2,xt.charCodeAt(xe)===61&&++xe,{type:Xa,value:xt.slice(e,xe),start:e,end:xe}}}if(o=xt.substr(xe,4),o===">>>=")return xe+=4,{type:Xa,value:o,start:e,end:xe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return xe+=3,{type:Xa,value:s,start:e,end:xe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return xe+=2,{type:Xa,value:i,start:e,end:xe};if(i==="//"&&ir({},js,ho),"<>=!+-*%&|^/".indexOf(r)>=0)return++xe,{type:Xa,value:r,start:e,end:xe};ir({},js,ho)}function Dsn(e){let t="";for(;xe<Xo&&ene(xt[xe]);)t+=xt[xe++];return t.length===0&&ir({},js,ho),aO(xt.charCodeAt(xe))&&ir({},js,ho),{type:Hv,value:parseInt("0x"+t,16),start:e,end:xe}}function Lsn(e){let t="0"+xt[xe++];for(;xe<Xo&&x2(xt[xe]);)t+=xt[xe++];return(aO(xt.charCodeAt(xe))||Fh(xt.charCodeAt(xe)))&&ir({},js,ho),{type:Hv,value:parseInt(t,8),octal:!0,start:e,end:xe}}function m1e(){var e,t,n;if(n=xt[xe],c5(Fh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=xe,e="",n!=="."){if(e=xt[xe++],n=xt[xe],e==="0"){if(n==="x"||n==="X")return++xe,Dsn(t);if(x2(n))return Lsn(t);n&&Fh(n.charCodeAt(0))&&ir({},js,ho)}for(;Fh(xt.charCodeAt(xe));)e+=xt[xe++];n=xt[xe]}if(n==="."){for(e+=xt[xe++];Fh(xt.charCodeAt(xe));)e+=xt[xe++];n=xt[xe]}if(n==="e"||n==="E")if(e+=xt[xe++],n=xt[xe],(n==="+"||n==="-")&&(e+=xt[xe++]),Fh(xt.charCodeAt(xe)))for(;Fh(xt.charCodeAt(xe));)e+=xt[xe++];else ir({},js,ho);return aO(xt.charCodeAt(xe))&&ir({},js,ho),{type:Hv,value:parseFloat(e),start:t,end:xe}}function Msn(){var e="",t,n,r,i,s=!1;for(t=xt[xe],c5(t==="'"||t==='"',"String literal must starts with a quote"),n=xe,++xe;xe<Xo;)if(r=xt[xe++],r===t){t="";break}else if(r==="\\")if(r=xt[xe++],!r||!lC(r.charCodeAt(0)))switch(r){case"u":case"x":xt[xe]==="{"?(++xe,e+=$sn()):e+=Lq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:x2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),xe<Xo&&x2(xt[xe])&&(s=!0,i=i*8+"01234567".indexOf(xt[xe++]),"0123".indexOf(r)>=0&&xe<Xo&&x2(xt[xe])&&(i=i*8+"01234567".indexOf(xt[xe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&xt[xe]===`
`&&++xe;else{if(lC(r.charCodeAt(0)))break;e+=r}return t!==""&&ir({},js,ho),{type:oO,value:e,octal:s,start:n,end:xe}}function Fsn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ir({},Dq)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ir({},Dq)}try{return new RegExp(e,t)}catch{return null}}function Bsn(){var e,t,n,r,i;for(e=xt[xe],c5(e==="/","Regular expression literal must start with a slash"),t=xt[xe++],n=!1,r=!1;xe<Xo;)if(e=xt[xe++],t+=e,e==="\\")e=xt[xe++],lC(e.charCodeAt(0))&&ir({},n7),t+=e;else if(lC(e.charCodeAt(0)))ir({},n7);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ir({},n7),i=t.substr(1,t.length-2),{value:i,literal:t}}function jsn(){var e,t,n;for(t="",n="";xe<Xo&&(e=xt[xe],!!ZL(e.charCodeAt(0)));)++xe,e==="\\"&&xe<Xo?ir({},js,ho):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ir({},Dq,n),{value:n,literal:t}}function zsn(){var e,t,n,r;return _r=null,Aje(),e=xe,t=Bsn(),n=jsn(),r=Fsn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xe}}function Usn(e){return e.type===rv||e.type===z0||e.type===u5||e.type===l5}function Ije(){if(Aje(),xe>=Xo)return{type:sO,start:xe,end:xe};const e=xt.charCodeAt(xe);return aO(e)?Nsn():e===40||e===41||e===59?r7():e===39||e===34?Msn():e===46?Fh(xt.charCodeAt(xe+1))?m1e():r7():Fh(e)?m1e():r7()}function ru(){const e=_r;return xe=e.end,_r=Ije(),xe=e.end,e}function Oje(){const e=xe;_r=Ije(),xe=e}function Vsn(e){const t=new Cf(dsn);return t.elements=e,t}function g1e(e,t,n){const r=new Cf(e==="||"||e==="&&"?ysn:hsn);return r.operator=e,r.left=t,r.right=n,r}function Hsn(e,t){const n=new Cf(psn);return n.callee=e,n.arguments=t,n}function qsn(e,t,n){const r=new Cf(msn);return r.test=e,r.consequent=t,r.alternate=n,r}function tne(e){const t=new Cf(Sje);return t.name=e,t}function ET(e){const t=new Cf(gsn);return t.value=e.value,t.raw=xt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function y1e(e,t,n){const r=new Cf(vsn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Wsn(e){const t=new Cf(_sn);return t.properties=e,t}function v1e(e,t,n){const r=new Cf(bsn);return r.key=t,r.value=n,r.kind=e,r}function Gsn(e,t){const n=new Cf(wsn);return n.operator=e,n.argument=t,n.prefix=!0,n}function ir(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(c5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=xe,n.description=i,n}function f5(e){e.type===sO&&ir(e,Asn),e.type===Hv&&ir(e,Esn),e.type===oO&&ir(e,xsn),e.type===rv&&ir(e,Ssn),e.type===z0&&ir(e,Tsn),ir(e,js,e.value)}function Qo(e){const t=ru();(t.type!==Xa||t.value!==e)&&f5(t)}function Qr(e){return _r.type===Xa&&_r.value===e}function i7(e){return _r.type===z0&&_r.value===e}function Ysn(){const e=[];for(xe=_r.start,Qo("[");!Qr("]");)Qr(",")?(ru(),e.push(null)):(e.push(iv()),Qr("]")||Qo(","));return ru(),Vsn(e)}function _1e(){xe=_r.start;const e=ru();return e.type===oO||e.type===Hv?(e.octal&&ir(e,Tje),ET(e)):tne(e.value)}function Ksn(){var e,t,n,r;if(xe=_r.start,e=_r,e.type===rv)return n=_1e(),Qo(":"),r=iv(),v1e("init",n,r);if(e.type===sO||e.type===Xa)f5(e);else return t=_1e(),Qo(":"),r=iv(),v1e("init",t,r)}function Xsn(){var e=[],t,n,r,i={},s=String;for(xe=_r.start,Qo("{");!Qr("}");)t=Ksn(),t.key.type===Sje?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ir({},Csn):i[r]=!0,e.push(t),Qr("}")||Qo(",");return Qo("}"),Wsn(e)}function Qsn(){Qo("(");const e=nne();return Qo(")"),e}const Jsn={if:1};function Zsn(){var e,t,n;if(Qr("("))return Qsn();if(Qr("["))return Ysn();if(Qr("{"))return Xsn();if(e=_r.type,xe=_r.start,e===rv||Jsn[_r.value])n=tne(ru().value);else if(e===oO||e===Hv)_r.octal&&ir(_r,Tje),n=ET(ru());else{if(e===z0)throw new Error(uC);e===u5?(t=ru(),t.value=t.value==="true",n=ET(t)):e===l5?(t=ru(),t.value=null,n=ET(t)):Qr("/")||Qr("/=")?(n=ET(zsn()),Oje()):f5(ru())}return n}function eon(){const e=[];if(Qo("("),!Qr(")"))for(;xe<Xo&&(e.push(iv()),!Qr(")"));)Qo(",");return Qo(")"),e}function ton(){xe=_r.start;const e=ru();return Usn(e)||f5(e),tne(e.value)}function non(){return Qo("."),ton()}function ron(){Qo("[");const e=nne();return Qo("]"),e}function ion(){var e,t,n;for(e=Zsn();;)if(Qr("."))n=non(),e=y1e(".",e,n);else if(Qr("("))t=eon(),e=Hsn(e,t);else if(Qr("["))n=ron(),e=y1e("[",e,n);else break;return e}function b1e(){const e=ion();if(_r.type===Xa&&(Qr("++")||Qr("--")))throw new Error(uC);return e}function H$(){var e,t;if(_r.type!==Xa&&_r.type!==z0)t=b1e();else{if(Qr("++")||Qr("--"))throw new Error(uC);if(Qr("+")||Qr("-")||Qr("~")||Qr("!"))e=ru(),t=H$(),t=Gsn(e.value,t);else{if(i7("delete")||i7("void")||i7("typeof"))throw new Error(uC);t=b1e()}}return t}function w1e(e){let t=0;if(e.type!==Xa&&e.type!==z0)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function son(){var e,t,n,r,i,s,o,a,u,l;if(e=_r,u=H$(),r=_r,i=w1e(r),i===0)return u;for(r.prec=i,ru(),t=[e,_r],o=H$(),s=[u,r,o];(i=w1e(_r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=g1e(a,u,o),s.push(n);r=ru(),r.prec=i,s.push(r),t.push(_r),n=H$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=g1e(s[l-1].value,s[l-2],n),l-=2;return n}function iv(){var e,t,n;return e=son(),Qr("?")&&(ru(),t=iv(),Qo(":"),n=iv(),e=qsn(e,t,n)),e}function nne(){const e=iv();if(Qr(","))throw new Error(uC);return e}function rne(e){xt=e,xe=0,Xo=xt.length,_r=null,Oje();const t=nne();if(_r.type!==sO)throw new Error("Unexpect token after expression.");return t}var Pje={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function kje(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Te("Missing arguments to clamp function."),o.length>3&&Te("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Te("Missing arguments to if function."),o.length>3&&Te("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function oon(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function $je(e){e=e||{};const t=e.allowed?gf(e.allowed):{},n=e.forbidden?gf(e.forbidden):{},r=e.constants||Pje,i=(e.functions||kje)(f),s=e.globalvar,o=e.fieldvar,a=pn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(rt(p))return p;const m=d[p.type];return m==null&&Te("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Nt(n,m)?Te("Illegal identifier: "+m):Nt(r,m)?r[m]:Nt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[oon(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Te("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Nt(i,m)&&i[m];return y||Te("Unrecognized function: "+m),pn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const E1e=Symbol("vega_selection_getter");function Rje(e){return(!e.getter||!e.getter[E1e])&&(e.getter=tc(e.field),e.getter[E1e]=!0),e.getter}const ine="intersect",x1e="union",aon="vlMulti",uon="vlPoint",S1e="or",lon="and",ed="_vgsid_",cC=tc(ed),con="E",fon="R",don="R-E",hon="R-LE",pon="R-RE",eM="index:unit";function T1e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=Rje(a)(e),kg(o)&&(o=Vo(o)),kg(r[s])&&(r[s]=Vo(r[s])),Ie(r[s])&&kg(r[s][0])&&(r[s]=r[s].map(Vo)),a.type===con){if(Ie(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===fon){if(!lb(o,r[s]))return!1}else if(a.type===pon){if(!lb(o,r[s],!0,!1))return!1}else if(a.type===don){if(!lb(o,r[s],!1,!1))return!1}else if(a.type===hon&&!lb(o,r[s],!1,!0))return!1;return!0}function mon(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[eM]&&r[eM].value:void 0,o=n===ine,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=T1e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=T1e(t,l),o^h)return h;return a&&o}const Nje=UI(cC),gon=Nje.left,yon=Nje.right;function von(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[eM]&&r[eM].value:void 0,o=n===ine,a=cC(t),u=gon(i,a);if(u===i.length||cC(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(yon(i,a)-u<s.size)return!1}return!0}function _on(e,t){return e.map(n=>hn(t.fields?{values:t.fields.map(r=>Rje(r)(n.datum))}:{[ed]:cC(n.datum)},t))}function bon(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,b=0,E,w;b<_;++b)if(l=s[b],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,w=c.length;E<w;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=s7[`${y}_union`],m[d]=v(g,nt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(nt(f).reduce((x,S,I)=>(x[c[I].field]=S,x),{})))}else h=ed,p=cC(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[ed]:p}));if(t=t||x1e,o[ed]?o[ed]=s7[`${ed}_${t}`](...Object.values(o[ed])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(S=>o[x][S]).reduce((S,I)=>S===void 0?I:s7[`${u[x]}_${t}`](S,I))}),s=Object.keys(a),n&&s.length){const x=r?uon:aon;o[x]=t===x1e?{[S1e]:s.reduce((S,I)=>(S.push(...a[I]),S),[])}:{[lon]:s.map(S=>({[S1e]:a[S]}))}}return o}var s7={[`${ed}_union`]:_Kt,[`${ed}_intersect`]:yKt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Vo(t[0]),r=Vo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Vo(t[0]),r=Vo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const won=":",Eon="@";function sne(e,t,n,r){t[0].type!==nv&&Te("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Un(t).value,o="unit",a=Eon+o,u=won+i;s===ine&&!Nt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Nt(r,u)||(r[u]=n.getData(i).tuplesRef())}function Dje(e){const t=this.context.data[e];return t?t.values.value:[]}function xon(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Son(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(nc).insert(t)),1}function Ton(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const uO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Aon=uO("format"),Lje=uO("timeFormat"),Con=uO("utcFormat"),Ion=uO("timeParse"),Oon=uO("utcParse"),hk=new Date(2e3,0,1);function d5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(hk.setYear(2e3),hk.setMonth(e),hk.setDate(t),Lje.call(this,hk,n))}function Pon(e){return d5.call(this,e,1,"%B")}function kon(e){return d5.call(this,e,1,"%b")}function $on(e){return d5.call(this,0,2+e,"%A")}function Ron(e){return d5.call(this,0,2+e,"%a")}const Non=":",Don="@",Mq="%",Mje="$";function one(e,t,n,r){t[0].type!==nv&&Te("First argument to data functions must be a string literal.");const i=t[0].value,s=Non+i;if(!Nt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Lon(e,t,n,r){t[0].type!==nv&&Te("First argument to indata must be a string literal."),t[1].type!==nv&&Te("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Don+s;Nt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Sa(e,t,n,r){if(t[0].type===nv)A1e(n,r,t[0].value);else for(e in n.scales)A1e(n,r,e)}function A1e(e,t,n){const r=Mq+n;if(!Nt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function mh(e,t){if(pn(e))return e;if(rt(e)){const n=t.scales[e];return n&&HQt(n.value)?n.value:void 0}}function Mon(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Sa,n._range=Sa,n._scale=Sa;const r=i=>"_["+(i.type===nv?Xe(Mq+i.value):Xe(Mq)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function ane(e,t){return function(n,r,i){if(n){const s=mh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Fon=ane("area",onn),Bon=ane("bounds",cnn),jon=ane("centroid",gnn);function zon(e,t){const n=mh(e,(t||this).context);return n&&n.scale()}function Uon(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function une(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Von(){return une(this.context.dataflow,"warn",arguments)}function Hon(){return une(this.context.dataflow,"info",arguments)}function qon(){return une(this.context.dataflow,"debug",arguments)}function o7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fq(e){const t=Xg(e),n=o7(t.r),r=o7(t.g),i=o7(t.b);return .2126*n+.7152*r+.0722*i}function Won(e,t){const n=Fq(e),r=Fq(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Gon(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function Fje(e,t){return e===t||e!==e&&t!==t?!0:Ie(e)?Ie(t)&&e.length===t.length?Yon(e,t):!1:st(e)&&st(t)?Bje(e,t):!1}function Yon(e,t){for(let n=0,r=e.length;n<r;++n)if(!Fje(e[n],t[n]))return!1;return!0}function Bje(e,t){for(const n in e)if(!Fje(e[n],t[n]))return!1;return!0}function C1e(e){return t=>Bje(e,t)}function Kon(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?nc:Ie(n)||$F(n)?n:C1e(n),c.remove(f)),t&&c.insert(t),r&&(f=C1e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Xon(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Qon(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const I1e={};function Jon(e,t){const n=I1e[t]||(I1e[t]=tc(t));return Ie(e)?e.map(n):n(e)}function lne(e){return Ie(e)||ArrayBuffer.isView(e)?e:null}function cne(e){return lne(e)||(rt(e)?e:null)}function Zon(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lne(e).join(...n)}function ean(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cne(e).indexOf(...n)}function tan(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cne(e).lastIndexOf(...n)}function nan(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cne(e).slice(...n)}function ran(e,t,n){return pn(n)&&Te("Function argument passed to replace."),String(e).replace(t,n)}function ian(e){return lne(e).slice().reverse()}function san(e,t,n){return xee(e||0,t||0,n||0)}function oan(e,t){const n=mh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function aan(e,t){const n=mh(e,(t||this).context);return n?n.copy():void 0}function uan(e,t){const n=mh(e,(t||this).context);return n?n.domain():[]}function lan(e,t,n){const r=mh(e,(n||this).context);return r?Ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function can(e,t){const n=mh(e,(t||this).context);return n&&n.range?n.range():[]}function fan(e,t,n){const r=mh(e,(n||this).context);return r?r(t):void 0}function dan(e,t,n,r,i){e=mh(e,(i||this).context);const s=q8e(t,n);let o=e.domain(),a=o[0],u=Un(o),l=na;return u-a?l=R8e(e,a,u):e=(e.interpolator?or("sequential")().interpolator(e.interpolator()):or("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Un(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function han(e,t,n){const r=mh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function pan(e){let t=null;return function(n){return n?eC(n,t=t||Qw(e)):e}}const jje=e=>e.data;function zje(e,t){const n=Dje.call(t,e);return n.root&&n.root.lookup||{}}function man(e,t,n){const r=zje(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(jje):void 0}function gan(e,t){const n=zje(e,this)[t];return n?n.ancestors().map(jje):void 0}const Uje=()=>typeof window<"u"&&window||null;function yan(){const e=Uje();return e?e.screen:{}}function van(){const e=Uje();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function _an(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Vje(e,t,n){if(!e)return[];const[r,i]=e,s=new os().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return F9e(o,s,ban(t))}function ban(e){let t=null;if(e){const n=nt(e.marktype),r=nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function wan(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Ean(e){return nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function xan(e,t,n){const{x:r,y:i,mark:s}=n,o=new os().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),Vje([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>San(u.x,u.y,t))}function San(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const fC={random(){return ic()},cumulativeNormal:MF,cumulativeLogNormal:VZ,cumulativeUniform:GZ,densityNormal:FZ,densityLogNormal:UZ,densityUniform:WZ,quantileNormal:FF,quantileLogNormal:HZ,quantileUniform:YZ,sampleNormal:LF,sampleLogNormal:zZ,sampleUniform:qZ,isArray:Ie,isBoolean:j0,isDate:kg,isDefined(e){return e!==void 0},isNumber:Jn,isObject:st,isRegExp:LFe,isString:rt,isTuple:$F,isValid(e){return e!=null&&e===e},toBoolean:EZ,toDate(e){return xZ(e)},toNumber:Vo,toString:SZ,indexof:ean,join:Zon,lastindexof:tan,replace:ran,reverse:ian,slice:nan,flush:NFe,lerp:MFe,merge:Gon,pad:jFe,peek:Un,pluck:Jon,span:zI,inrange:lb,truncate:zFe,rgb:Xg,lab:GD,hcl:YD,hsl:qD,luminance:Fq,contrast:Won,sequence:jv,format:Aon,utcFormat:Con,utcParse:Oon,utcOffset:u5e,utcSequence:f5e,timeFormat:Lje,timeParse:Ion,timeOffset:a5e,timeSequence:c5e,timeUnitSpecifier:XFe,monthFormat:Pon,monthAbbrevFormat:kon,dayFormat:$on,dayAbbrevFormat:Ron,quarter:PFe,utcquarter:kFe,week:JFe,utcweek:t5e,dayofyear:QFe,utcdayofyear:e5e,warn:Von,info:Hon,debug:qon,extent(e){return Jd(e)},inScope:Uon,intersect:Vje,clampRange:$Fe,pinchDistance:Xon,pinchAngle:Qon,screen:yan,containerSize:_an,windowSize:van,bandspace:san,setdata:Son,pathShape:pan,panLinear:AFe,panLog:CFe,panPow:IFe,panSymlog:OFe,zoomLinear:gZ,zoomLog:yZ,zoomPow:uL,zoomSymlog:vZ,encode:Ton,modify:Kon,lassoAppend:wan,lassoPath:Ean,intersectLasso:xan},Tan=["view","item","group","xy","x","y"],Aan="event.vega.",Hje="this.",fne={},qje={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Xe(Mje+e)}]`,functions:Can,constants:Pje,visitors:fne},Bq=$je(qje);function Can(e){const t=kje(e);Tan.forEach(n=>t[n]=Aan+n);for(const n in fC)t[n]=Hje+n;return hn(t,Mon(e,fC,fne)),t}function Gi(e,t,n){return arguments.length===1?fC[e]:(fC[e]=t,n&&(fne[e]=n),Bq&&(Bq.functions[e]=Hje+e),this)}Gi("bandwidth",oan,Sa);Gi("copy",aan,Sa);Gi("domain",uan,Sa);Gi("range",can,Sa);Gi("invert",lan,Sa);Gi("scale",fan,Sa);Gi("gradient",dan,Sa);Gi("geoArea",Fon,Sa);Gi("geoBounds",Bon,Sa);Gi("geoCentroid",jon,Sa);Gi("geoShape",han,Sa);Gi("geoScale",zon,Sa);Gi("indata",xon,Lon);Gi("data",Dje,one);Gi("treePath",man,one);Gi("treeAncestors",gan,one);Gi("vlSelectionTest",mon,sne);Gi("vlSelectionIdTest",von,sne);Gi("vlSelectionResolve",bon,sne);Gi("vlSelectionTuples",_on);function th(e,t){const n={};let r;try{e=rt(e)?e:Xe(e)+"",r=rne(e)}catch{Te("Expression parse error: "+e)}r.visit(s=>{if(s.type!==xje)return;const o=s.callee.name,a=qje.visitors[o];a&&a(o,s.arguments,t,n)});const i=Bq(r);return i.globals.forEach(s=>{const o=Mje+s;!Nt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Ian(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Oan=gf(["rule"]),O1e=gf(["group","image","rect"]);function Pan(e,t){let n="";return Oan[t]||(e.x2&&(e.x?(O1e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(O1e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function dne(e){return(e+"").toLowerCase()}function kan(e){return dne(e)==="operator"}function $an(e){return dne(e)==="collect"}function SS(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Ran(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Nan={operator:(e,t)=>SS(e,["_"],t.code),parameter:(e,t)=>SS(e,["datum","_"],t.code),event:(e,t)=>SS(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return SS(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Xe(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Pan(r,n),i+="return m;",SS(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Xe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Ran(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Dan(e){const t=this;kan(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Lan(e){const t=this;if(e.params){const n=t.get(e.id);n||Te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Man(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ie(i)?i.map(s=>P1e(s,n,t)):P1e(i,n,t)}return t}function P1e(e,t,n){if(!e||!st(e))return e;for(let r=0,i=k1e.length,s;r<i;++r)if(s=k1e[r],Nt(e,s.key))return s.parse(e,t,n);return e}var k1e=[{key:"$ref",parse:Fan},{key:"$key",parse:jan},{key:"$expr",parse:Ban},{key:"$field",parse:zan},{key:"$encode",parse:Van},{key:"$compare",parse:Uan},{key:"$context",parse:Han},{key:"$subflow",parse:qan},{key:"$tupleid",parse:Wan}];function Fan(e,t){return t.get(e.$ref)||Te("Operator not defined: "+e.$ref)}function Ban(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ou(t.parameterExpression(e.$expr),e.$fields))}function jan(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=wZ(e.$key,e.$flat,t.expr.codegen))}function zan(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=tc(e.$field,e.$name,t.expr.codegen))}function Uan(e,t){const n="c:"+e.$compare+"_"+e.$order,r=nt(e.$compare).map(i=>i&&i.$tupleid?$t:i);return t.fn[n]||(t.fn[n]=_Z(r,e.$order,t.expr.codegen))}function Van(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ou(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Han(e,t){return t}function qan(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Wan(){return $t}function Gan(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Yan(e){var t=this,n=st(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Te("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Kan={skip:!0};function Xan(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Qan(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Kan)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(nc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function Wje(e,t,n,r){return new Gje(e,t,n,r)}function Gje(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Nan,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function $1e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Gje.prototype=$1e.prototype={fork(){const e=new $1e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),$an(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[dne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Ian,parseOperator:Dan,parseOperatorParameters:Lan,parseParameters:Man,parseStream:Gan,parseUpdate:Yan,getState:Xan,setState:Qan};function Jan(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Yje(t,e.description()))}function Yje(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Zan(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const a7="default";function eun(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:a7,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?rt(i)?i:i.user:a7,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return rt(r)||(i=r.item,r=r.user),jq(e,r&&r!==a7?r:i||r),i},{cursor:t})}function jq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function tM(e,t){var n=e._runtime.data;return Nt(n,t)||Te("Unrecognized data set: "+t),n[t]}function tun(e,t){return arguments.length<2?tM(this,e).values.value:h5.call(this,e,Uv().remove(nc).insert(t))}function h5(e,t){k5e(t)||Te("Second argument to changes must be a changeset.");const n=tM(this,e);return n.modified=!0,this.pulse(n.input,t)}function nun(e,t){return h5.call(this,e,Uv().insert(t))}function run(e,t){return h5.call(this,e,Uv().remove(t))}function Kje(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Xje(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function p5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function iun(e){var t=p5(e),n=Kje(e),r=Xje(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function sun(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=p5(e),o=t.changedTouches?t.changedTouches[0]:t,s=t5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=oun(e,n,s),t}function oun(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;rt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ra(e),item:ra(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const R1e="view",aun="timer",uun="window",lun={trap:!1};function cun(e){const t=hn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ie(r[s])&&(r[s]=gf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Qje(e,t,n,r){e._eventListeners.push({type:n,sources:nt(t),handler:r})}function fun(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function pk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||st(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function dun(e,t,n){var r=this,i=new DF(n),s=function(l,c){r.runAsync(null,()=>{e===R1e&&fun(r,t)&&l.preventDefault(),i.receive(sun(r,l,c))})},o;if(e===aun)pk(r,"timer",t)&&r.timer(s,t);else if(e===R1e)pk(r,"view",t)&&r.addEventListener(t,s,lun);else if(e===uun?pk(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&pk(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);Qje(r,o,t,s)}return i}function N1e(e){return e.item}function D1e(e){return e.item.mark.source}function L1e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function hun(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",N1e),D1e,L1e(e)),this.on(this.events("view","pointerout",N1e),D1e,L1e(t)),this}function pun(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function tl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const mun="vega-bind",gun="vega-bind-name",yun="vega-bind-radio";function vun(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=bZ(r.debounce,i.update))),(r.input==null&&r.element?_un:wun)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function _un(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),Qje(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(bun(i))}}function bun(e){return typeof Event<"u"?new Event(e):{type:e}}function wun(e,t,n,r){const i=r.signal(n.signal),s=tl("div",{class:mun}),o=n.input==="radio"?s:s.appendChild(tl("label"));o.appendChild(tl("span",{class:gun},n.name||n.signal)),t.appendChild(s);let a=Eun;switch(n.input){case"checkbox":a=xun;break;case"select":a=Sun;break;case"radio":a=Tun;break;case"range":a=Aun;break}a(e,o,n,i)}function Eun(e,t,n,r){const i=tl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function xun(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=tl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Sun(e,t,n,r){const i=tl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};nM(o,r)&&(u.selected=!0),i.appendChild(tl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(nM(n.options[a],o)){i.selectedIndex=a;return}}}function Tun(e,t,n,r){const i=tl("span",{class:yun}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};nM(o,r)&&(u.checked=!0);const l=tl("input",u);l.addEventListener("change",()=>e.update(o));const c=tl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)nM(a[l].value,o)&&(a[l].checked=!0)}}function Aun(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||XA(s,i,100),a=tl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=tl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function nM(e,t){return e===t||e+""==t+""}function Jje(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Kje(e),Xje(e),p5(e),i,s).background(e.background())}function hne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Cun(e,t,n,r){const i=new r(e.loader(),hne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,p5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Iun(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=r5(r);e=n._el=e?u7(n,e,!0):null,Jan(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||h0,a=e?s.renderer:s.headless;return n._renderer=a?Jje(n,n._renderer,e,a):null,n._handler=Cun(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=u7(n,t,!0):e.appendChild(tl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=u7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{vun(n,u.element||t,u)})),n}function u7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const TS=e=>+e||0,Oun=e=>({top:e,bottom:e,left:e,right:e});function M1e(e){return st(e)?{top:TS(e.top),bottom:TS(e.bottom),left:TS(e.left),right:TS(e.right)}:Oun(TS(e))}async function pne(e,t,n,r){const i=r5(t),s=i&&i.headless;return s||Te("Unrecognized renderer type: "+t),await e.runAsync(),Jje(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Pun(e,t){e!==sg.Canvas&&e!==sg.SVG&&e!==sg.PNG&&Te("Unrecognized image type: "+e);const n=await pne(this,e,t);return e===sg.SVG?kun(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function kun(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function $un(e,t){return(await pne(this,sg.Canvas,e,t)).canvas()}async function Run(e){return(await pne(this,sg.SVG,e)).svg()}function Nun(e,t,n){return Wje(e,Gw,fC,n).parse(t)}function Dun(e){var t=this._runtime.scales;return Nt(t,e)||Te("Unrecognized scale or projection: "+e),t[e].value}var Zje="width",e7e="height",mne="padding",F1e={skip:!0};function t7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===mne?r.left+r.right:0)}function n7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===mne?r.top+r.bottom:0)}function Lun(e){var t=e._signals,n=t[Zje],r=t[e7e],i=t[mne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=t7e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=n7e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Mun(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Zje,n,F1e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(e7e,r,F1e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Fun(e){return this._runtime.getState(e||{data:Bun,signals:jun,recurse:!0})}function Bun(e,t){return t.modified&&Ie(t.input.value)&&!e.startsWith("_:vega:_")}function jun(e,t){return!(e==="parent"||t instanceof Gw.proxy)}function zun(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Uun(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(a$t(n,t))}function Vun(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Hun(r))}function Hun(e){return e==null?"":Ie(e)?r7e(e):st(e)&&!kg(e)?qun(e):e+""}function qun(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ie(n)?r7e(n):i7e(n))}).join(`
`)}function r7e(e){return"["+e.map(i7e).join(", ")+"]"}function i7e(e){return Ie(e)?"[]":st(e)&&!kg(e)?"{}":e}function Wun(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function s7e(e,t){const n=this;if(t=t||{},Wb.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hn({},e.locale,t.locale);n.locale(w5e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||sg.Canvas,n._scenegraph=new Zee;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Vun,n._redraw=!0,n._handler=new h0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=cun(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Nun(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=t7e(n,n._width),n._viewHeight=n7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Lun(n),Zan(n),eun(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function mk(e,t){return Nt(e._signals,t)?e._signals[t]:Te("Unrecognized signal name: "+Xe(t))}function o7e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function B1e(e,t,n,r){let i=o7e(n,r);return i||(i=hne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function j1e(e,t,n){const r=o7e(t,n);return r&&t._targets.remove(r),e}We(s7e,Wb,{async evaluate(e,t,n){if(await Wb.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,iun(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&k$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Yje(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=mk(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",M1e(e)):M1e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(r5(e)||Te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Wb.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(mk(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Mun,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=hne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return B1e(this,e,mk(this,e),t)},removeSignalListener(e,t){return j1e(this,mk(this,e),t)},addDataListener(e,t){return B1e(this,e,tM(this,e).values,t)},removeDataListener(e,t){return j1e(this,tM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=jq(this,null);this._globalCursor=!!e,t&&jq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Uun,events:dun,finalize:pun,hover:hun,data:tun,change:h5,insert:nun,remove:run,scale:Dun,initialize:Iun,toImageURL:Pun,toCanvas:$un,toSVG:Run,getState:Fun,setState:zun,_watchPixelRatio:Wun});const Gun="view",rM="[",iM="]",a7e="{",u7e="}",Yun=":",l7e=",",Kun="@",Xun=">",Qun=/[[\]{}]/,Jun={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let c7e,f7e;function U0(e,t,n){return c7e=t||Gun,f7e=n||Jun,d7e(e.trim()).map(zq)}function Zun(e){return f7e[e]}function S2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function d7e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=S2(e,i,l7e,rM+a7e,iM+u7e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function zq(e){return e[0]==="["?eln(e):tln(e)}function eln(e){const t=e.length;let n=1,r;if(n=S2(e,n,iM,rM,iM),n===t)throw"Empty between selector: "+e;if(r=d7e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Xun)throw"Expected '>' after between selector: "+e;r=r.map(zq);const i=zq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function tln(e){const t={source:c7e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===u7e){if(a=e.lastIndexOf(a7e),a>=0){try{r=nln(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Kun&&(i=++a),u=S2(e,a,Yun),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=S2(e,a,rM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=S2(e,a,iM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==rM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Qun.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Zun(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function nln(e){const t=e.split(l7e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function rln(e){return st(e)?e:{type:e||"pad"}}const AS=e=>+e||0,iln=e=>({top:e,bottom:e,left:e,right:e});function sln(e){return st(e)?e.signal?e:{top:AS(e.top),bottom:AS(e.bottom),left:AS(e.left),right:AS(e.right)}:iln(AS(e))}const zs=e=>st(e)&&!Ie(e)?hn({},e):{value:e};function z1e(e,t,n,r){return n!=null?(st(n)&&!Ie(n)||Ie(n)&&n.length&&st(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function wo(e,t,n){for(const r in t)z1e(e,r,t[r]);for(const r in n)z1e(e,r,n[r],"update")}function gx(e,t,n){for(const r in t)n&&Nt(n,r)||(e[r]=hn(e[r]||{},t[r]));return e}function j_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const gne="mark",yne="frame",vne="scope",oln="axis",aln="axis-domain",uln="axis-grid",lln="axis-label",cln="axis-tick",fln="axis-title",dln="legend",hln="legend-band",pln="legend-entry",mln="legend-gradient",h7e="legend-label",gln="legend-symbol",yln="legend-title",vln="title",_ln="title-text",bln="title-subtitle";function wln(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!j_(u,e)&&l7(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===yne?i.group:n===gne?hn({},i.mark,i[t]):null;for(u in c)l=j_(u,e)||(u==="fill"||u==="stroke")&&(j_("fill",e)||j_("stroke",e)),l||l7(s,u,c[u]);nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)j_(h,e)||l7(s,h,d[h])}),e=hn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=hn(o,e.enter),a&&(e.update=hn(a,e.update)),e}function l7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const p7e=e=>rt(e)?Xe(e):e.signal?`(${e.signal})`:m7e(e);function m5(e){if(e.gradient!=null)return xln(e);let t=e.signal?`(${e.signal})`:e.color?Eln(e.color):e.field!=null?m7e(e.field):e.value!==void 0?Xe(e.value):void 0;return e.scale!=null&&(t=Sln(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${q$(e.exponent)})`),e.mult!=null&&(t+=`*${q$(e.mult)}`),e.offset!=null&&(t+=`+${q$(e.offset)}`),e.round&&(t=`round(${t})`),t}const gk=(e,t,n,r)=>`(${e}(${[t,n,r].map(m5).join(",")})+'')`;function Eln(e){return e.c?gk("hcl",e.h,e.c,e.l):e.h||e.s?gk("hsl",e.h,e.s,e.l):e.l||e.a?gk("lab",e.l,e.a,e.b):e.r||e.g||e.b?gk("rgb",e.r,e.g,e.b):null}function xln(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Xe(n));for(;t.length&&Un(t)==null;)t.pop();return t.unshift(p7e(e.gradient)),`gradient(${t.join(",")})`}function q$(e){return st(e)?"("+m5(e)+")":e}function m7e(e){return g7e(st(e)?e:{datum:e})}function g7e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Te("Invalid field reference: "+Xe(e));return e.signal||(r=rt(r)?fh(r).map(Xe).join("]["):g7e(r)),t+"["+r+"]"}function Sln(e,t){const n=p7e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+q$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Tln(e){let t="";return e.forEach(n=>{const r=m5(n);t+=n.test?`(${n.test})?${r}:`:r}),Un(t)===":"&&(t+="null"),t}function y7e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=wln(e,t,n,r,i.config);for(const a in e)o[a]=Aln(e[a],t,s,i);return s}function Aln(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Iln(Cln(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Cln(e){return Ie(e)?Tln(e):m5(e)}function Iln(e,t,n,r){const i=th(e,t);return i.$fields.forEach(s=>r[s]=1),hn(n,i.$params),i.$expr}const Oln="outer",Pln=["value","update","init","react","bind"];function U1e(e,t){Te(e+' for "outer" push: '+Xe(t))}function v7e(e,t){const n=e.name;if(e.push===Oln)t.signals[n]||U1e("No prior signal definition",n),Pln.forEach(r=>{e[r]!==void 0&&U1e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Uq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function g5(e,t,n,r){return new Uq(e,t,n,r)}function sM(e,t){return g5("operator",e,t)}function kt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function dC(e,t){return t?{$field:e,$name:t}:{$field:e}}const Vq=dC("key");function V1e(e,t){return{$compare:e,$order:t}}function kln(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const $ln="ascending",Rln="descending";function Nln(e){return st(e)?(e.order===Rln?"-":"+")+y5(e.op,e.field):""}function y5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const _ne="scope",Hq="view";function Es(e){return e&&e.signal}function Dln(e){return e&&e.expr}function W$(e){if(Es(e))return!0;if(st(e)){for(const t in e)if(W$(e[t]))return!0}return!1}function Fc(e,t){return e??t}function w1(e){return e&&e.signal||e}const H1e="timer";function hC(e,t){return(e.merge?Mln:e.stream?Fln:e.type?Bln:Te("Invalid stream specification: "+Xe(e)))(e,t)}function Lln(e){return e===_ne?Hq:e||Hq}function Mln(e,t){const n=e.merge.map(i=>hC(i,t)),r=bne({merge:n},e,t);return t.addStream(r).id}function Fln(e,t){const n=hC(e.stream,t),r=bne({stream:n},e,t);return t.addStream(r).id}function Bln(e,t){let n;e.type===H1e?(n=t.event(H1e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Lln(e.source),e.type);const r=bne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function bne(e,t,n){let r=t.between;return r&&(r.length!==2&&Te('Stream "between" parameter must have 2 entries: '+Xe(t)),e.between=[hC(r[0],n),hC(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(jln(t.marktype,t.markname,t.markrole)),t.source===_ne&&r.push("inScope(event.item)"),r.length&&(e.filter=th("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function jln(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const zln={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Uln(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Te("Signal update missing events specification."),rt(s)&&(s=U0(s,t.isSubscope()?_ne:Hq)),s=nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Hln(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Te("Signal encode and update are mutually exclusive."),o="encode(item(),"+Xe(r)+")"),i.update=rt(o)?th(o,t):o.expr!=null?th(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:zln,$params:{$value:t.signalRef(o.signal)}}:Te("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(hn(Vln(u,t),i)))}function Vln(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):hC(e,t)}}function Hln(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function qln(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Te("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=th(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Uln(i,t,n.id))}const $r=e=>(t,n,r)=>g5(e,n,t||void 0,r),_7e=$r("aggregate"),Wln=$r("axisticks"),b7e=$r("bound"),If=$r("collect"),q1e=$r("compare"),Gln=$r("datajoin"),w7e=$r("encode"),Yln=$r("expression"),Kln=$r("facet"),Xln=$r("field"),Qln=$r("key"),Jln=$r("legendentries"),Zln=$r("load"),ecn=$r("mark"),tcn=$r("multiextent"),ncn=$r("multivalues"),rcn=$r("overlap"),icn=$r("params"),E7e=$r("prefacet"),scn=$r("projection"),ocn=$r("proxy"),acn=$r("relay"),x7e=$r("render"),ucn=$r("scale"),qv=$r("sieve"),lcn=$r("sortitems"),S7e=$r("viewlayout"),ccn=$r("values");let fcn=0;const T7e={min:"min",max:"max",count:"sum"};function dcn(e,t){const n=e.type||"linear";C8e(n)||Te("Unrecognized scale type: "+Xe(n)),t.addScale(e.name,{type:n,domain:void 0})}function hcn(e,t){const n=t.getScale(e.name).params;let r;n.domain=A7e(e.domain,e,t),e.range!=null&&(n.range=I7e(e,t,n)),e.interpolate!=null&&xcn(e.interpolate,n),e.nice!=null&&(n.nice=Ecn(e.nice,t)),e.bins!=null&&(n.bins=wcn(e.bins,t));for(r in e)Nt(n,r)||r==="name"||(n[r]=Hl(e[r],t))}function Hl(e,t){return st(e)?e.signal?t.signalRef(e.signal):Te("Unsupported object: "+Xe(e)):e}function G$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Hl(n,t))}function v5(e){Te("Can not find data set: "+Xe(e))}function A7e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ie(e)?pcn:e.fields?gcn:mcn)(e,t,n)}function pcn(e,t,n){return e.map(r=>Hl(r,n))}function mcn(e,t,n){const r=n.getData(e.data);return r||v5(e.data),Xw(t.type)?r.valuesRef(n,e.field,C7e(e.sort,!1)):P8e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function gcn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=rt(o)?{data:r,field:o}:Ie(o)||o.signal?ycn(o,n):o,s.push(o),s),[]);return(Xw(t.type)?vcn:P8e(t.type)?_cn:bcn)(e,n,i)}function ycn(e,t){const n="_:vega:_"+fcn++,r=If({});if(Ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Xe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,qv({})]),{data:n,field:"data"}}function vcn(e,t,n){const r=C7e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||v5(l.data),c.countsRef(t,l.field,r)}),a={groupby:Vq,pulse:o};r&&(i=r.op||"count",s=r.field?y5(i,r.field):"count",a.ops=[T7e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(_7e(a));const u=t.add(If({pulse:kt(i)}));return s=t.add(ccn({field:Vq,sort:t.sortRef(r),pulse:kt(u)})),kt(s)}function C7e(e,t){return e&&(!e.field&&!e.op?st(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!T7e[e.op]&&Te("Multiple domain scales can not be sorted using "+e.op)),e}function _cn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||v5(i.data),s.domainRef(t,i.field)});return kt(t.add(ncn({values:r})))}function bcn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||v5(i.data),s.extentRef(t,i.field)});return kt(t.add(tcn({extents:r})))}function wcn(e,t){return e.signal||Ie(e)?G$(e,t):t.objectProperty(e)}function Ecn(e,t){return e.signal?t.signalRef(e.signal):st(e)?{interval:Hl(e.interval),step:Hl(e.step)}:Hl(e)}function xcn(e,t){t.interpolate=Hl(e.type||e),e.gamma!=null&&(t.interpolateGamma=Hl(e.gamma))}function I7e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(rt(i)){if(r&&Nt(r,i))return e=hn({},e,{range:r[i]}),I7e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Xw(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Te("Unrecognized scale range value: "+Xe(i))}else if(i.scheme){n.scheme=Ie(i.scheme)?G$(i.scheme,t):Hl(i.scheme,t),i.extent&&(n.schemeExtent=G$(i.extent,t)),i.count&&(n.schemeCount=Hl(i.count,t));return}else if(i.step){n.rangeStep=Hl(i.step,t);return}else{if(Xw(e.type)&&!Ie(i))return A7e(i,e,t);Ie(i)||Te("Unsupported range type: "+Xe(i))}return i.map(s=>(Ie(s)?G$:Hl)(s,t))}function Scn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=qq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=qq(n[i],i,t));t.addProjection(e.name,r)}function qq(e,t,n){return Ie(e)?e.map(r=>qq(r,t,n)):st(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Te("Unsupported parameter object: "+Xe(e)):e}const Of="top",yx="left",vx="right",m0="bottom",O7e="center",Tcn="vertical",Acn="start",Ccn="middle",Icn="end",Wq="index",wne="label",Ocn="offset",rE="perc",Pcn="perc2",Yl="value",lO="guide-label",Ene="guide-title",kcn="group-title",$cn="group-subtitle",W1e="symbol",Y$="gradient",Gq="discrete",Yq="size",Rcn="shape",Ncn="fill",Dcn="stroke",Lcn="strokeWidth",Mcn="strokeDash",Fcn="opacity",xne=[Yq,Rcn,Ncn,Dcn,Lcn,Mcn,Fcn],cO={name:1,style:1,interactive:1},Gn={value:0},Kl={value:1},_5="group",P7e="rect",Sne="rule",Bcn="symbol",Wv="text";function pC(e){return e.type=_5,e.interactive=e.interactive||!1,e}function Pu(e,t){const n=(r,i)=>Fc(e[r],Fc(t[r],i));return n.isVertical=r=>Tcn===Fc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Fc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Fc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Fc(e.columns,Fc(t.columns,+n.isVertical(!0))),n}function k7e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function jcn(e,t,n){const r=t.config.style[n];return r&&r[e]}function b5(e,t,n){return`item.anchor === '${Acn}' ? ${e} : item.anchor === '${Icn}' ? ${t} : ${n}`}const Tne=b5(Xe(yx),Xe(vx),Xe(O7e));function zcn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},st(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function $7e(e,t){return t?e?st(e)?Object.assign({},e,{offset:$7e(e.offset,t)}):{value:e,offset:t}:t:e}function dl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=gx(e.encode,t,cO)):e.interactive=!1,e}function Ucn(e,t,n,r){const i=Pu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Gn,x:Gn,y:Gn,width:zs(f),height:zs(d)},update:hn({},u,{opacity:Kl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Gn}};return wo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),dl({type:P7e,role:mln,encode:h},r)}function Vcn(e,t,n,r,i){const s=Pu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Gn,fill:{scale:t,field:Yl}};p[l]={signal:h+"datum."+rE,mult:u},p[c]=Gn,p[f]={signal:h+"datum."+Pcn,mult:u},p[d]=zs(a);const m={enter:p,update:hn({},p,{opacity:Kl}),exit:{opacity:Gn}};return wo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),dl({type:P7e,role:hln,key:Yl,from:i,encode:m},r)}const Hcn=`datum.${rE}<=0?"${yx}":datum.${rE}>=1?"${vx}":"${O7e}"`,qcn=`datum.${rE}<=0?"${m0}":datum.${rE}>=1?"${Of}":"${Ccn}"`;function G1e(e,t,n,r){const i=Pu(e,t),s=i.isVertical(),o=zs(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Gn},update:c={opacity:Kl,text:{field:wne}},exit:{opacity:Gn}};return wo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Fc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:qcn},f="y",d="x",h="1-"):(l.align=c.align={signal:Hcn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+rE,mult:a},l[d]=c[d]=o,o.offset=Fc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+Wq}:void 0,dl({type:Wv,role:h7e,style:lO,key:Yl,from:r,encode:p,overlap:u},n)}function Wcn(e,t,n,r,i){const s=Pu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Ocn} : datum.${Yq}`,h=l?zs(l):{field:Yq},p=`datum.${Wq}`,m=`max(1, ${i})`;let g,y,v,_,b;h.mult=.5,g={enter:y={opacity:Gn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Kl,x:y.x,y:y.y},exit:{opacity:Gn}};let E=null,w=null;e.fill||(E=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),wo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),xne.forEach(C=>{e[C]&&(v[C]=y[C]={scale:e[C],field:Yl})});const x=dl({type:Bcn,role:gln,key:Yl,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=zs(c);S.offset=s("labelOffset"),g={enter:y={opacity:Gn,x:{signal:d,offset:S},y:h},update:v={opacity:Kl,text:{field:wne},x:y.x,y:y.y},exit:{opacity:Gn}},wo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=dl({type:Wv,role:h7e,style:lO,key:Yl,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Gn,height:l?zs(l):Gn,opacity:Gn},exit:{opacity:Gn},update:v={opacity:Kl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,b={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,b={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:Wq}},pC({role:vne,from:r,encode:gx(g,o,cO),marks:[x,I],name:u,interactive:a,sort:b})}function Gcn(e,t){const n=Pu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Ane='item.orient === "left"',Cne='item.orient === "right"',w5=`(${Ane} || ${Cne})`,Ycn=`datum.vgrad && ${w5}`,Kcn=b5('"top"','"bottom"','"middle"'),Xcn=b5('"right"','"left"','"center"'),Qcn=`datum.vgrad && ${Cne} ? (${Xcn}) : (${w5} && !(datum.vgrad && ${Ane})) ? "left" : ${Tne}`,Jcn=`item._anchor || (${w5} ? "middle" : "start")`,Zcn=`${Ycn} ? (${Ane} ? -90 : 90) : 0`,efn=`${w5} ? (datum.vgrad ? (${Cne} ? "bottom" : "top") : ${Kcn}) : "top"`;function tfn(e,t,n,r){const i=Pu(e,t),s={enter:{opacity:Gn},update:{opacity:Kl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Gn}};return wo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Jcn},angle:{signal:Zcn},align:{signal:Qcn},baseline:{signal:efn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),dl({type:Wv,role:yln,style:Ene,from:r,encode:s},n)}function nfn(e,t){let n;return st(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Y1e(e.path)+")":e.sphere&&(n="geoShape("+Y1e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Y1e(e){return st(e)&&e.signal?e.signal:Xe(e)}function R7e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===_5?vne:t||gne}function rfn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||R7e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ifn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Ine(e,t){const n=N5e(e.type);n||Te("Unrecognized transform type: "+Xe(e.type));const r=g5(n.type.toLowerCase(),null,N7e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function N7e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=sfn(o,t,n)}return r}function sfn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return ofn(e,t,n);if(i===void 0){e.required&&Te("Missing required "+Xe(t.type)+" parameter: "+Xe(e.name));return}else{if(r==="param")return afn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Es(i)?i.map(s=>K1e(e,s,n)):K1e(e,i,n)}function K1e(e,t,n){const r=e.type;if(Es(t))return Q1e(r)?Te("Expression references can not be signals."):c7(r)?n.fieldRef(t):J1e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||c7(r);return i&&ufn(t)?n.exprRef(t.expr,t.as):i&&lfn(t)?dC(t.field,t.as):Q1e(r)?th(t,n):cfn(r)?kt(n.getData(t).values):c7(r)?dC(t):J1e(r)?n.compareRef(t):t}}function ofn(e,t,n){return rt(t.from)||Te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function afn(e,t,n){const r=t[e.name];return e.array?(Ie(r)||Te("Expected an array of sub-parameters. Instead: "+Xe(r)),r.map(i=>X1e(e,i,n))):X1e(e,r,n)}function X1e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Te("Unsupported parameter: "+Xe(t));const s=hn(N7e(i,t,n),i.key);return kt(n.add(icn(s)))}const ufn=e=>e&&e.expr,lfn=e=>e&&e.field,cfn=e=>e==="data",Q1e=e=>e==="expr",c7=e=>e==="field",J1e=e=>e==="compare";function ffn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Te("Only group marks can be faceted."),r.field!=null?o=a=K$(r,n):(e.data?a=kt(n.getData(e.data).aggregate):(s=Ine(hn({type:"aggregate",groupby:nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=K$(r,n),o=a=kt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=kt(n.add(If(null,[{}]))),o||(o=K$(e,n)),{key:i,pulse:o,parent:a}}function K$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:kt(t.getData(e.data).output)}function sv(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}sv.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=kt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new sv(e,s,i,r,o)};function D7e(e){return rt(e)?e:null}function Z1e(e,t,n){const r=y5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function CS(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Nln(s);let l=D7e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:Vq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:kt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(g5(r,void 0,d)),o&&(t.index[i]=f),c=kt(f),l!=null&&(a[l]=c)}return c}sv.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=D7e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Z1e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:kt(r.output)},n&&n.field&&Z1e(e,u,n),a=e.add(_7e(u)),o=e.add(If({pulse:kt(a)})),o={agg:a,ref:kt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return kt(this.values)},extentRef(e,t){return CS(e,this,"extent","extent",t,!1)},domainRef(e,t){return CS(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return CS(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return CS(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return CS(e,this,"indata","tupleindex",t,!0,!0)}};function dfn(e,t,n){const r=e.from.facet,i=r.name,s=K$(r,t);let o;r.name||Te("Facet must have a name: "+Xe(r)),r.data||Te("Facet must reference a data set: "+Xe(r)),r.field?o=t.add(E7e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Kln({key:t.keyRef(r.groupby),group:kt(t.proxy(n.parent)),pulse:s})):Te("Facet must specify groupby or field: "+Xe(r));const a=t.fork(),u=a.add(If()),l=a.add(qv({pulse:kt(u)}));a.addData(i,new sv(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function hfn(e,t,n){const r=t.add(E7e({pulse:n.pulse})),i=t.fork();i.add(qv()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function L7e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(sM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=th(l,t);u.update=c.$expr,u.params=c.$params}function E5(e,t){const n=R7e(e),r=e.type===_5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===vne||n===yne,a,u,l,c,f,d,h;const p=n===gne||o||i,m=ffn(e.from,r,t);u=t.add(Gln({key:m.key||(e.key?dC(e.key):void 0),pulse:m.pulse,clean:!r}));const g=kt(u);u=l=t.add(If({pulse:g})),u=t.add(ecn({markdef:rfn(e),interactive:ifn(e.interactive,t),clip:nfn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:kt(u)}));const y=kt(u);u=c=t.add(w7e(y7e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const x=Ine(w,t),S=x.metadata;(S.generates||S.changes)&&Te("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),x.params.pulse=kt(u),t.add(u=x)}),e.sort&&(u=t.add(lcn({sort:t.compareRef(e.sort),pulse:kt(u)})));const v=kt(u);(i||o)&&(o=t.add(S7e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=kt(o));const _=t.add(b7e({mark:y,pulse:d||v}));h=kt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?dfn(e,t,m):p?hfn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=pfn(s,h,t));const b=t.add(x7e({pulse:h})),E=t.add(qv({pulse:kt(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new sv(t,l,b,E)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Te("Marks only support modify triggers."),L7e(w,t,f)}))}function pfn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Es(s)?n.signalRef(s.signal):s,method:Es(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Es(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return kt(n.add(rcn(o)))}function mfn(e,t){const n=t.config.legend,r=e.encode||{},i=Pu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;xne.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Te("Missing valid scale for legend.");const p=gfn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=kt(t.add(If(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=kt(t.add(Jln(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===Y$?(h=[Ucn(e,c,n,r.gradient),G1e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${w1(i.gradientLength())})/100))`)):p===Gq?h=[Vcn(e,c,n,r.gradient,v),G1e(e,n,r.labels,v)]:(f=Gcn(e,n),h=[Wcn(e,n,r,v,w1(f.columns))],d.size=_fn(e,t,h[0].marks)),h=[pC({role:pln,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(tfn(e,n,r.title,g)),E5(pC({role:dln,from:g,encode:gx(vfn(i,e,n),s,cO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function gfn(e,t){let n=e.type||W1e;return!e.type&&yfn(e)===1&&(e.fill||e.stroke)&&(n=Iee(t)?Y$:jH(t)?Gq:W1e),n!==Y$?n:jH(t)?Gq:Y$}function yfn(e){return xne.reduce((t,n)=>t+(e[n]?1:0),0)}function vfn(e,t,n){const r={enter:{},update:{}};return wo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function _fn(e,t,n){const r=w1(eve("size",e,n)),i=w1(eve("strokeWidth",e,n)),s=w1(bfn(n[1].encode,t,lO));return th(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function eve(e,t,n){return t[e]?`scale("${t[e]}",datum)`:k7e(e,n[0].encode)}function bfn(e,t,n){return k7e("fontSize",e)||jcn("fontSize",t,n)}const wfn=`item.orient==="${yx}"?-90:item.orient==="${vx}"?90:0`;function Efn(e,t){e=rt(e)?{text:e}:e;const n=Pu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=kt(t.add(If(null,[l])));return u.push(Tfn(e,n,xfn(e),c)),e.subtitle&&u.push(Afn(e,n,r.subtitle,c)),E5(pC({role:vln,from:c,encode:Sfn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function xfn(e){const t=e.encode;return t&&t.title||hn({name:e.name,interactive:e.interactive,style:e.style},t)}function Sfn(e,t){const n={enter:{},update:{}};return wo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Tne},angle:{signal:wfn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),gx(n,t,cO)}function Tfn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return wo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),dl({type:Wv,role:_ln,style:kcn,from:r,encode:o},n)}function Afn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return wo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),dl({type:Wv,role:bln,style:$cn,from:r,encode:o},n)}function Cfn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Ine(r,t))}),e.on&&e.on.forEach(r=>{L7e(r,t,e.name)}),t.addDataPipeline(e.name,Ifn(e,t,n))}function Ifn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Es(e.values)||W$(e.format)?(r.push(tve(t,e)),r.push(i=ry())):r.push(i=ry({$ingest:e.values,$format:e.format})):e.url?W$(e.url)||W$(e.format)?(r.push(tve(t,e)),r.push(i=ry())):r.push(i=ry({$request:e.url,$format:e.format})):e.source&&(i=a=nt(e.source).map(d=>kt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=ry()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=acn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,ry())),i||r.push(ry()),r.push(qv({})),r}function ry(e){const t=If({},e);return t.metadata={source:!0},t}function tve(e,t){return Zln({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const M7e=e=>e===m0||e===Of,x5=(e,t,n)=>Es(e)?$fn(e.signal,t,n):e===yx||e===Of?t:n,Us=(e,t,n)=>Es(e)?Pfn(e.signal,t,n):M7e(e)?t:n,lf=(e,t,n)=>Es(e)?kfn(e.signal,t,n):M7e(e)?n:t,F7e=(e,t,n)=>Es(e)?Rfn(e.signal,t,n):e===Of?{value:t}:{value:n},Ofn=(e,t,n)=>Es(e)?Nfn(e.signal,t,n):e===vx?{value:t}:{value:n},Pfn=(e,t,n)=>B7e(`${e} === '${Of}' || ${e} === '${m0}'`,t,n),kfn=(e,t,n)=>B7e(`${e} !== '${Of}' && ${e} !== '${m0}'`,t,n),$fn=(e,t,n)=>One(`${e} === '${yx}' || ${e} === '${Of}'`,t,n),Rfn=(e,t,n)=>One(`${e} === '${Of}'`,t,n),Nfn=(e,t,n)=>One(`${e} === '${vx}'`,t,n),B7e=(e,t,n)=>(t=t!=null?zs(t):t,n=n!=null?zs(n):n,nve(t)&&nve(n)?(t=t?t.signal||Xe(t.value):null,n=n?n.signal||Xe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hn({test:e},t)].concat(n||[])),nve=e=>e==null||Object.keys(e).length===1,One=(e,t,n)=>({signal:`${e} ? (${pb(t)}) : (${pb(n)})`}),Dfn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${yx}' ? (${pb(r)}) : `:"")+(n!=null?`${e} === '${m0}' ? (${pb(n)}) : `:"")+(i!=null?`${e} === '${vx}' ? (${pb(i)}) : `:"")+(t!=null?`${e} === '${Of}' ? (${pb(t)}) : `:"")+"(null)"}),pb=e=>Es(e)?e.signal:e==null?null:Xe(e),Lfn=(e,t)=>t===0?0:Es(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Yb=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function x_(e,t,n,r){let i;if(t&&Nt(t,e))return t[e];if(Nt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Ene][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[lO][i]}return null}function rve(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Mfn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Es(o)){const f=rve([n.axisX,n.axisY]),d=rve([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Us(o,x_(l,n.axisX,i,r),x_(l,n.axisY,i,r));u={};for(l of d)u[l]=Dfn(o.signal,x_(l,n.axisTop,i,r),x_(l,n.axisBottom,i,r),x_(l,n.axisLeft,i,r),x_(l,n.axisRight,i,r))}else a=o===Of||o===m0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?hn({},i,a,u,s):i}function Ffn(e,t,n,r){const i=Pu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Gn},update:a={opacity:Kl},exit:{opacity:Gn}};wo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=ive(e,0),c=ive(e,1);return o.x=a.x=Us(s,l,Gn),o.x2=a.x2=Us(s,c),o.y=a.y=lf(s,l,Gn),o.y2=a.y2=lf(s,c),dl({type:Sne,role:aln,from:r,encode:u},n)}function ive(e,t){return{scale:e.scale,range:t}}function Bfn(e,t,n,r,i){const s=Pu(e,t),o=e.orient,a=e.gridScale,u=x5(o,1,-1),l=jfn(e.offset,u);let c,f,d;const h={enter:c={opacity:Gn},update:d={opacity:Kl},exit:f={opacity:Gn}};wo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Yl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Us(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:hn(m,{mult:u,offset:l});return c.x=d.x=Us(o,p,g),c.y=d.y=lf(o,p,g),c.x2=d.x2=lf(o,y),c.y2=d.y2=Us(o,y),f.x=Us(o,p),f.y=lf(o,p),dl({type:Sne,role:uln,key:Yl,from:r,encode:h},n)}function jfn(e,t){if(t!==1)if(!st(e))e=Es(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hn({},e);for(;n.mult!=null;)if(st(n.mult))n=n.mult=hn({},n.mult);else return n.mult=Es(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function zfn(e,t,n,r,i,s){const o=Pu(e,t),a=e.orient,u=x5(a,-1,1);let l,c,f;const d={enter:l={opacity:Gn},update:f={opacity:Kl},exit:c={opacity:Gn}};wo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=zs(i);h.mult=u;const p={scale:e.scale,field:Yl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Us(a,Gn,p),f.y2=l.y2=Us(a,h),c.x=Us(a,p),f.x=l.x=lf(a,Gn,p),f.x2=l.x2=lf(a,h),c.y=lf(a,p),dl({type:Sne,role:cln,key:Yl,from:r,encode:d},n)}function f7(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Ufn(e,t,n,r,i,s){const o=Pu(e,t),a=e.orient,u=e.scale,l=x5(a,-1,1),c=w1(o("labelFlush")),f=w1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=zs(i);g.mult=l,g.offset=zs(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Yl,band:.5,offset:$7e(s.offset,o("labelOffset"))},v=Us(a,p?f7(u,c,'"left"','"right"','"center"'):{value:"center"},Ofn(a,"left","right")),_=Us(a,F7e(a,"bottom","top"),p?f7(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=f7(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Gn,x:Us(a,y,g),y:lf(a,y,g)},w={enter:E,update:m={opacity:Kl,text:{field:wne},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:Gn,x:E.x,y:E.y}};wo(w,{dx:!d&&p?Us(a,b):null,dy:!h&&p?lf(a,b):null}),wo(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let S=o("labelOverlap");return S=S||x?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=Yb(m.align,v)),m.baseline!==_&&(m.baseline=Yb(m.baseline,_)),dl({type:Wv,role:lln,style:lO,key:Yl,from:r,encode:w,overlap:S},n)}function Vfn(e,t,n,r){const i=Pu(e,t),s=e.orient,o=x5(s,-1,1);let a,u;const l={enter:a={opacity:Gn,anchor:zs(i("titleAnchor",null)),align:{signal:Tne}},update:u=hn({},a,{opacity:Kl,text:zs(e.title)}),exit:{opacity:Gn}},c={signal:`lerp(range("${e.scale}"), ${b5(0,1,.5)})`};return u.x=Us(s,c),u.y=lf(s,c),a.angle=Us(s,Gn,Lfn(o,90)),a.baseline=Us(s,F7e(s,m0,Of),{value:m0}),u.angle=a.angle,u.baseline=a.baseline,wo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Hfn(i,s,l,n),l.update.align=Yb(l.update.align,a.align),l.update.angle=Yb(l.update.angle,a.angle),l.update.baseline=Yb(l.update.baseline,a.baseline),dl({type:Wv,role:fln,style:Ene,from:r,encode:l},n)}function Hfn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Yb(zs(a),n.update[u]),!1):!j_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?zs(o):Us(t,zs(o),zs(s))}function qfn(e,t){const n=Mfn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Pu(e,n),l=zcn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=kt(t.add(If({},[c]))),d=kt(t.add(Wln({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Bfn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(zfn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Ufn(e,n,r.labels,d,p,l))),c.domain&&h.push(Ffn(e,n,r.domain,f)),c.title&&h.push(Vfn(e,n,r.title,f)),E5(pC({role:oln,from:f,encode:gx(Wfn(u,e),i,cO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Wfn(e,t){const n={enter:{},update:{}};return wo(n,{orient:e("orient"),offset:e("offset")||0,position:Fc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function j7e(e,t,n){const r=nt(e.signals),i=nt(e.scales);return n||r.forEach(s=>v7e(s,t)),nt(e.projections).forEach(s=>Scn(s,t)),i.forEach(s=>dcn(s,t)),nt(e.data).forEach(s=>Cfn(s,t)),i.forEach(s=>hcn(s,t)),(n||r).forEach(s=>qln(s,t)),nt(e.axes).forEach(s=>qfn(s,t)),nt(e.marks).forEach(s=>E5(s,t)),nt(e.legends).forEach(s=>mfn(s,t)),e.title&&Efn(e.title,t),t.parseLambdas(),t}const Gfn=e=>gx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Yfn(e,t){const n=t.config,r=kt(t.root=t.add(sM())),i=Kfn(e,n);i.forEach(l=>v7e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(If()),o=t.add(w7e(y7e(Gfn(e.encode),_5,yne,e.style,t,{pulse:kt(s)}))),a=t.add(S7e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:kt(o)}));t.operators.pop(),t.pushState(kt(o),kt(a),null),j7e(e,t,i),t.operators.push(a);let u=t.add(b7e({mark:r,pulse:kt(a)}));return u=t.add(x7e({pulse:kt(u)})),u=t.add(qv({pulse:kt(u)})),t.addData("root",new sv(t,s,s,u)),t}function IS(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Kfn(e,t){const n=o=>Fc(e[o],t[o]),r=[IS("background",n("background")),IS("autosize",rln(n("autosize"))),IS("padding",sln(n("padding"))),IS("width",n("width")||0),IS("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return nt(e.signals).forEach(o=>{Nt(i,o.name)?o=hn(i[o.name],o):r.push(o),s[o.name]=o}),nt(t.signals).forEach(o=>{!Nt(s,o.name)&&!Nt(i,o.name)&&r.push(o)}),r}function z7e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function sve(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}z7e.prototype=sve.prototype={parse(e){return j7e(e,this)},fork(){return new sve(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Uq?kt(e):e;return this.add(ocn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(kt(this.add(qv({pulse:e})))),this._parent.push(t),this._lookup.push(n?kt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(rt(e))return dC(e,t);e.signal||Te("Unsupported field reference: "+Xe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=kt(this.add(Xln(i)))}return r},compareRef(e){let t=!1;const n=s=>Es(s)?(t=!0,this.signalRef(s.signal)):Dln(s)?(t=!0,this.exprRef(s.expr)):s,r=nt(e.field).map(n),i=nt(e.order).map(n);return t?kt(this.add(q1e({fields:r,orders:i}))):V1e(r,i)},keyRef(e,t){let n=!1;const r=s=>Es(s)?(n=!0,kt(i[s.signal])):s,i=this.signals;return e=nt(e).map(r),n?kt(this.add(Qln({fields:e,flat:t}))):kln(e,t)},sortRef(e){if(!e)return e;const t=y5(e.op,e.field),n=e.order||$ln;return n.signal?kt(this.add(q1e({fields:t,orders:this.signalRef(n.signal)}))):V1e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Nt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Te("Duplicate signal name: "+Xe(e));const n=t instanceof Uq?t:this.add(sM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Te("Unrecognized signal name: "+Xe(e)),this.signals[e]},signalRef(e){return this.signals[e]?kt(this.signals[e]):(Nt(this.lambdas,e)||(this.lambdas[e]=this.add(sM(null))),kt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=th(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!st(e)?e:this.signalRef(e.signal||Pne(e))},exprRef(e,t){const n={expr:th(e,this)};return t&&(n.expr.$name=t),kt(this.add(Yln(n)))},addBinding(e,t){this.bindings||Te("Nested signals do not support binding: "+Xe(e)),this.bindings.push(hn({signal:e},t))},addScaleProj(e,t){Nt(this.scales,e)&&Te("Duplicate scale or projection name: "+Xe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,ucn(t))},addProjection(e,t){this.addScaleProj(e,scn(t))},getScale(e){return this.scales[e]||Te("Unrecognized scale name: "+Xe(e)),this.scales[e]},scaleRef(e){return kt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.data[e]=t},getData(e){return this.data[e]||Te("Undefined data set name: "+Xe(e)),this.data[e]},addDataPipeline(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.addData(e,sv.fromEntries(this,t))}};function Pne(e){return(Ie(e)?Xfn:Qfn)(e)}function Xfn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(st(i)?i.signal||Pne(i):Xe(i))}return n+"]"}function Qfn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Xe(r)+":"+(st(i)?i.signal||Pne(i):Xe(i));return t+"}"}function Jfn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Zfn(e,t,n){return st(e)||Te("Input Vega specification must be an object."),t=ax(Jfn(),t,e.config),Yfn(e,new z7e(t,n)).toRuntime()}var edn="5.28.0";hn(Gw,DQt,xtn,tnn,Urn,Krn,Ein,tin,Sin,Lin,Win,Zin);const tdn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:os,CanvasHandler:h0,CanvasRenderer:iC,DATE:wu,DAY:Uo,DAYOFYEAR:Zd,Dataflow:Wb,Debug:wFe,Error:hZ,EventStream:DF,Gradient:q8e,GroupItem:YF,HOURS:ll,Handler:d0,HybridHandler:ute,HybridRenderer:SL,Info:bFe,Item:GF,MILLISECONDS:yf,MINUTES:cl,MONTH:Ko,Marks:fl,MultiPulse:RZ,None:_Fe,Operator:Dr,Parameters:NF,Pulse:Rg,QUARTER:bu,RenderType:sg,Renderer:bl,ResourceLoader:Mee,SECONDS:rc,SVGHandler:tte,SVGRenderer:n5,SVGStringRenderer:ate,Scenegraph:Zee,TIME_UNITS:TZ,Transform:Ee,View:s7e,WEEK:ys,Warn:pZ,YEAR:vo,accessor:Ou,accessorFields:Yo,accessorName:Ni,array:nt,ascending:IF,bandwidthNRD:MZ,bin:M5e,bootstrapCI:F5e,boundClip:U9e,boundContext:ZI,boundItem:WH,boundMark:c9e,boundStroke:rm,changeset:Uv,clampRange:$Fe,codegenExpression:$je,compare:_Z,constant:ra,cumulativeLogNormal:VZ,cumulativeNormal:MF,cumulativeUniform:GZ,dayofyear:QFe,debounce:bZ,defaultLocale:IZ,definition:N5e,densityLogNormal:UZ,densityNormal:FZ,densityUniform:WZ,domChild:ms,domClear:Ml,domCreate:rg,domFind:ete,dotbin:B5e,error:Te,expressionFunction:Gi,extend:hn,extent:Jd,extentIndex:RFe,falsy:Sm,fastmap:lx,field:tc,flush:NFe,font:ZF,fontFamily:nO,fontSize:dh,format:P$,formatLocale:cL,formats:kZ,hasOwnProperty:Nt,id:jI,identity:na,inferType:x5e,inferTypes:S5e,ingest:dr,inherits:We,inrange:lb,interpolate:Oee,interpolateColors:qF,interpolateRange:k8e,intersect:F9e,intersectBoxLine:cb,intersectPath:Fee,intersectPoint:Bee,intersectRule:Z8e,isArray:Ie,isBoolean:j0,isDate:kg,isFunction:pn,isIterable:DFe,isNumber:Jn,isObject:st,isRegExp:LFe,isString:rt,isTuple:$F,key:wZ,lerp:MFe,lineHeight:c0,loader:PF,locale:w5e,logger:mZ,lruCache:FFe,markup:ote,merge:BFe,mergeConfig:ax,multiLineOffset:Xee,one:ox,pad:jFe,panLinear:AFe,panLog:CFe,panPow:IFe,panSymlog:OFe,parse:Zfn,parseExpression:rne,parseSelector:U0,path:$4,pathCurves:Nee,pathEqual:V9e,pathParse:Qw,pathRectangle:Y8e,pathRender:eC,pathSymbols:G8e,pathTrail:K8e,peek:Un,point:t5,projection:Cte,quantileLogNormal:HZ,quantileNormal:FF,quantileUniform:YZ,quantiles:DZ,quantizeInterpolator:$8e,quarter:PFe,quartiles:LZ,get random(){return ic},randomInteger:BXt,randomKDE:jZ,randomLCG:FXt,randomLogNormal:z5e,randomMixture:U5e,randomNormal:BZ,randomUniform:V5e,read:C5e,regressionConstant:KZ,regressionExp:q5e,regressionLinear:XZ,regressionLoess:Y5e,regressionLog:H5e,regressionPoly:G5e,regressionPow:W5e,regressionQuad:QZ,renderModule:r5,repeat:sT,resetDefaultLocale:DKt,resetSVGClipId:Q8e,resetSVGDefIds:zen,responseType:A5e,runtimeContext:Wje,sampleCurve:jF,sampleLogNormal:zZ,sampleNormal:LF,sampleUniform:qZ,scale:or,sceneEqual:lte,sceneFromJSON:d9e,scenePickVisit:mL,sceneToJSON:f9e,sceneVisit:vf,sceneZOrder:jee,scheme:Pee,serializeXML:O9e,setHybridRendererOptions:Men,setRandom:LXt,span:zI,splitAccessPath:fh,stringValue:Xe,textMetrics:el,timeBin:p5e,timeFloor:i5e,timeFormatLocale:QA,timeInterval:cx,timeOffset:a5e,timeSequence:c5e,timeUnitSpecifier:XFe,timeUnits:AZ,toBoolean:EZ,toDate:xZ,toNumber:Vo,toSet:gf,toString:SZ,transform:D5e,transforms:Gw,truncate:zFe,truthy:nc,tupleid:$t,typeParsers:MH,utcFloor:s5e,utcInterval:fx,utcOffset:u5e,utcSequence:f5e,utcdayofyear:e5e,utcquarter:kFe,utcweek:t5e,version:edn,visitArray:$m,week:JFe,writeConfig:ux,zero:qm,zoomLinear:gZ,zoomLog:yZ,zoomPow:uL,zoomSymlog:vZ},Symbol.toStringTag,{value:"Module"}));function ndn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var rdn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},idn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},sdn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const odn=Array.prototype.slice,iy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,odn.call(t,1))},adn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var udn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:adn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return iy("join",arguments)},indexof:function(){return iy("indexOf",arguments)},lastindexof:function(){return iy("lastIndexOf",arguments)},slice:function(){return iy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return iy("substring",arguments,String)},split:function(){return iy("split",arguments,String)},replace:function(){return iy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const ldn=["view","item","group","xy","x","y"],Kq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Kq.add(setImmediate);const cdn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:rdn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),Kq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||udn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>idn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>sdn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,Kq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function OS(e,t,n,r,i,s){const o=a=>cdn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,ldn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var fdn={operator(e,t){const n=t.ast,r=e.functions;return i=>OS(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>OS(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>OS(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return OS(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=OS(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&ndn(o,r,s),l}}};const ddn="vega-lite",hdn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',pdn="5.17.0",mdn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],gdn="https://vega.github.io/vega-lite/",ydn="Vega-Lite is a concise high-level language for interactive visualization.",vdn=["vega","chart","visualization"],_dn="build/vega-lite.js",bdn="build/vega-lite.min.js",wdn="build/vega-lite.min.js",Edn="build/src/index",xdn="build/src/index.d.ts",Sdn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Tdn=["bin","build","src","vega-lite*","tsconfig.json"],Adn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Cdn={type:"git",url:"https://github.com/vega/vega-lite.git"},Idn="BSD-3-Clause",Odn={url:"https://github.com/vega/vega-lite/issues"},Pdn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},kdn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},$dn={vega:"^5.24.0"},Rdn={node:">=18"},Ndn={name:ddn,author:hdn,version:pdn,collaborators:mdn,homepage:gdn,description:ydn,keywords:vdn,main:_dn,unpkg:bdn,jsdelivr:wdn,module:Edn,types:xdn,bin:Sdn,files:Tdn,scripts:Adn,repository:Cdn,license:Idn,bugs:Odn,devDependencies:Pdn,dependencies:kdn,peerDependencies:$dn,engines:Rdn};function kne(e){return!!e.or}function $ne(e){return!!e.and}function Rne(e){return!!e.not}function X$(e,t){if(Rne(e))X$(e.not,t);else if($ne(e))for(const n of e.and)X$(n,t);else if(kne(e))for(const n of e.or)X$(n,t);else t(e)}function Kb(e,t){return Rne(e)?{not:Kb(e.not,t)}:$ne(e)?{and:e.and.map(n=>Kb(n,t))}:kne(e)?{or:e.or.map(n=>Kb(n,t))}:t(e)}const qt=structuredClone;function U7e(e){throw new Error(e)}function iE(e,t){const n={};for(const r of t)Nt(e,r)&&(n[r]=e[r]);return n}function hu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Pr(e)).join(",")})`};function kn(e){if(Jn(e))return e;const t=rt(e)?e:Pr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function Xq(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function ov(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Nne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function V7e(e,...t){for(const n of t)Ddn(e,n??{});return e}function Ddn(e,t){for(const n of Ne(t))ux(e,n,t[n],!0)}function bd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Ldn(e,t){const n=Ne(e),r=Ne(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function H7e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Dne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Qq(e){const t=new Set;for(const n of e){const i=fh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Lne(e,t){return e===void 0||t===void 0?!0:Dne(Qq(e),Qq(t))}function Or(e){return Ne(e).length===0}const Ne=Object.keys,_o=Object.values,g0=Object.entries;function mC(e){return e===!0||e===!1}function hi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function T2(e,t){return Rne(e)?`!(${T2(e.not,t)})`:$ne(e)?`(${e.and.map(n=>T2(n,t)).join(") && (")})`:kne(e)?`(${e.or.map(n=>T2(n,t)).join(") || (")})`:t(e)}function oM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&oM(e[n],t)&&delete e[n],Or(e)}function fO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Mne(e,t="datum"){const n=fh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Xe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function q7e(e,t="datum"){return`${t}[${Xe(fh(e).join("."))}]`}function Mdn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function oc(e){return`${fh(e).map(Mdn).join("\\.")}`}function av(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Fne(e){return`${fh(e).join(".")}`}function sE(e){return e?fh(e).length:0}function qi(...e){for(const t of e)if(t!==void 0)return t}let W7e=42;function G7e(e){const t=++W7e;return e?String(e)+t:t}function Fdn(){W7e=42}function Y7e(e){return K7e(e)?e:`__${e}`}function K7e(e){return e.startsWith("__")}function gC(e){if(e!==void 0)return(e%360+360)%360}function S5(e){return Jn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const ove=Object.getPrototypeOf(structuredClone({}));function Qu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Qu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Qu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==ove.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==ove.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Qu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const yp="row",vp="column",T5="facet",pi="x",Xs="y",Pf="x2",gh="y2",V0="xOffset",_x="yOffset",kf="radius",sm="radius2",bc="theta",om="theta2",$f="latitude",Rf="longitude",Nf="latitude2",ac="longitude2",xu="color",yh="fill",vh="stroke",Su="shape",am="size",Gv="angle",um="opacity",H0="fillOpacity",q0="strokeOpacity",W0="strokeWidth",G0="strokeDash",dO="text",oE="order",hO="detail",A5="key",uv="tooltip",C5="href",I5="url",O5="description",Bdn={x:1,y:1,x2:1,y2:1},X7e={theta:1,theta2:1,radius:1,radius2:1};function Q7e(e){return e in X7e}const Bne={longitude:1,longitude2:1,latitude:1,latitude2:1};function J7e(e){switch(e){case $f:return"y";case Nf:return"y2";case Rf:return"x";case ac:return"x2"}}function Z7e(e){return e in Bne}const jdn=Ne(Bne),jne={...Bdn,...X7e,...Bne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Xb(e){return e===xu||e===yh||e===vh}const eze={row:1,column:1,facet:1},ql=Ne(eze),zne={...jne,...eze},zdn=Ne(zne),{order:IEn,detail:OEn,tooltip:PEn,...Udn}=zne,{row:kEn,column:$En,facet:REn,...Vdn}=Udn;function Hdn(e){return!!Vdn[e]}function tze(e){return!!zne[e]}const qdn=[Pf,gh,Nf,ac,om,sm];function nze(e){return Yv(e)!==e}function Yv(e){switch(e){case Pf:return pi;case gh:return Xs;case Nf:return $f;case ac:return Rf;case om:return bc;case sm:return kf}return e}function y0(e){if(Q7e(e))switch(e){case bc:return"startAngle";case om:return"endAngle";case kf:return"outerRadius";case sm:return"innerRadius"}return e}function _h(e){switch(e){case pi:return Pf;case Xs:return gh;case $f:return Nf;case Rf:return ac;case bc:return om;case kf:return sm}}function Tu(e){switch(e){case pi:case Pf:return"width";case Xs:case gh:return"height"}}function rze(e){switch(e){case pi:return"xOffset";case Xs:return"yOffset";case Pf:return"x2Offset";case gh:return"y2Offset";case bc:return"thetaOffset";case kf:return"radiusOffset";case om:return"theta2Offset";case sm:return"radius2Offset"}}function Une(e){switch(e){case pi:return"xOffset";case Xs:return"yOffset"}}function Wdn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Gdn=Ne(jne),{x:NEn,y:DEn,x2:LEn,y2:MEn,xOffset:FEn,yOffset:BEn,latitude:jEn,longitude:zEn,latitude2:UEn,longitude2:VEn,theta:HEn,theta2:qEn,radius:WEn,radius2:GEn,...Vne}=jne,Ydn=Ne(Vne),Hne={x:1,y:1},bh=Ne(Hne);function Wi(e){return e in Hne}const qne={theta:1,radius:1},Kdn=Ne(qne);function P5(e){return e==="width"?pi:Xs}const ize={xOffset:1,yOffset:1};function pO(e){return e in ize}const{text:YEn,tooltip:KEn,href:XEn,url:QEn,description:JEn,detail:ZEn,key:exn,order:txn,...sze}=Vne,Xdn=Ne(sze);function Qdn(e){return!!Vne[e]}function Jdn(e){switch(e){case xu:case yh:case vh:case am:case Su:case um:case W0:case G0:return!0;case H0:case q0:case Gv:return!1}}const oze={...Hne,...qne,...ize,...sze},k5=Ne(oze);function lm(e){return!!oze[e]}function Zdn(e,t){return thn(e)[t]}const aze={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:nxn,...ehn}=aze;function thn(e){switch(e){case xu:case yh:case vh:case O5:case hO:case A5:case uv:case C5:case oE:case um:case H0:case q0:case W0:case T5:case yp:case vp:return aze;case pi:case Xs:case V0:case _x:case $f:case Rf:return ehn;case Pf:case gh:case Nf:case ac:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case am:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case G0:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Su:return{point:"always",geoshape:"always"};case dO:return{text:"always"};case Gv:return{point:"always",square:"always",text:"always"};case I5:return{image:"always"};case bc:return{text:"always",arc:"always"};case kf:return{text:"always",arc:"always"};case om:case sm:return{arc:"always"}}}function d7(e){switch(e){case pi:case Xs:case bc:case kf:case V0:case _x:case am:case Gv:case W0:case um:case H0:case q0:case Pf:case gh:case om:case sm:return;case T5:case yp:case vp:case Su:case G0:case dO:case uv:case C5:case I5:case O5:return"discrete";case xu:case yh:case vh:return"flexible";case $f:case Rf:case Nf:case ac:case hO:case A5:case oE:return}}const nhn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},rhn={count:1,min:1,max:1};function qp(e){return!!e&&!!e.argmin}function Y0(e){return!!e&&!!e.argmax}function Wne(e){return rt(e)&&!!nhn[e]}const ihn=new Set(["count","valid","missing","distinct"]);function uze(e){return rt(e)&&ihn.has(e)}function shn(e){return rt(e)&&$n(["min","max"],e)}const ohn=new Set(["count","sum","distinct","valid","missing"]),ahn=new Set(["mean","average","median","q1","q3","min","max"]);function lze(e){return j0(e)&&(e=V5(e,void 0)),"bin"+Ne(e).map(t=>$5(e[t])?hi(`_${t}_${g0(e[t])}`):hi(`_${t}_${e[t]}`)).join("")}function Hr(e){return e===!0||Kv(e)&&!e.binned}function oo(e){return e==="binned"||Kv(e)&&e.binned===!0}function Kv(e){return st(e)}function $5(e){return e==null?void 0:e.param}function ave(e){switch(e){case yp:case vp:case am:case xu:case yh:case vh:case W0:case um:case H0:case q0:case Su:return 6;case G0:return 4;default:return 10}}function mO(e){return!!(e!=null&&e.expr)}function eu(e){const t=Ne(e||{}),n={};for(const r of t)n[r]=qu(e[r]);return n}function cze(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=iE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function Lm(e){return rt(e)||Ie(e)&&rt(e[0])}function Tt(e){return!!(e!=null&&e.signal)}function K0(e){return!!e.step}function uhn(e){return Ie(e)?!1:"fields"in e&&!("data"in e)}function lhn(e){return Ie(e)?!1:"fields"in e&&"data"in e}function sp(e){return Ie(e)?!1:"field"in e&&"data"in e}const chn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},fhn=Ne(chn),dhn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Jq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function fze(e){const t=Ie(e.condition)?e.condition.map(uve):uve(e.condition);return{...qu(e),condition:t}}function qu(e){if(mO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function uve(e){if(mO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Jr(e){if(mO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Tt(e)?e:e!==void 0?{value:e}:void 0}function hhn(e){return Tt(e)?e.signal:Xe(e)}function lve(e){return Tt(e)?e.signal:Xe(e.value)}function Zc(e){return Tt(e)?e.signal:e==null?null:Xe(e)}function phn(e,t,n){for(const r of n){const i=Wp(r,t.markDef,t.config);i!==void 0&&(e[r]=Jr(i))}return e}function dze(e){return[].concat(e.type,e.style??[])}function fr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Wp(e,t,n,r)}function Wp(e,t,n,{vgChannel:r}={}){return qi(r?aM(e,t,n.style):void 0,aM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function aM(e,t,n){return hze(e,dze(t),n)}function hze(e,t,n){t=nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function pze(e,t){return nt(e).reduce((n,r)=>(n.field.push(Je(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function mze(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Qu(i,r))return;n.push(r)}),n}function gze(e,t){return Qu(e,t)||!t?e:e?[...nt(e),...nt(t)].join(", "):t}function yze(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Lm(n)||Tt(n))&&(Lm(r)||Tt(r)))return{explicit:e.explicit,value:gze(n,r)};if(Lm(n)||Tt(n))return{explicit:e.explicit,value:n};if(Lm(r)||Tt(r))return{explicit:e.explicit,value:r};if(!Lm(n)&&!Tt(n)&&!Lm(r)&&!Tt(r))return{explicit:e.explicit,value:mze(n,r)};throw new Error("It should never reach here")}function Gne(e){return`Invalid specification ${Pr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const mhn='Autosize "fit" only works for single views and layered views.';function cve(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function fve(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function dve(e){return e?`Dropping "fit-${e}" because spec has discrete ${Tu(e)}.`:'Dropping "fit" because spec has discrete size.'}function Yne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function hve(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ghn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function yhn(e){return`The "nearest" transform is not supported for ${e} marks.`}function vze(e){return`Selection not supported for ${e} yet.`}function vhn(e){return`Cannot find a selection named "${e}".`}const _hn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",bhn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",whn="Legend bindings are only supported for selections over an individual field or encoding channel.";function Ehn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function xhn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Shn="The same selection must be used to override scale domains in a layered view.",Thn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Ahn(e){return`Unknown repeated value "${e}".`}function pve(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Chn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Ihn(e){return`Unrecognized parse "${e}".`}function mve(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Ohn="Attempt to add the same child twice.";function Phn(e){return`Ignoring an invalid transform: ${Pr(e)}.`}const khn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function gve(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function $hn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Pr(t)} is overridden by a child projection ${Pr(n)}.`}const Rhn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Nhn(e){return`${e}Offset dropped because ${e} is continuous`}function Dhn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Pr(n)}}.`}function _ze(e){return`Invalid field type "${e}".`}function Lhn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Mhn(e){return`Invalid aggregation operator "${e}".`}function bze(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Fhn(e){return`Position range does not support relative band size for ${e}.`}function Zq(e,t){return`Dropping ${Pr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Bhn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function R5(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function jhn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function zhn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Uhn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Vhn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function h7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Hhn(e){return`The ${e} for range marks cannot be an expression`}function qhn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Whn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Ghn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Yhn(e){return`Cannot use the relative band size with ${e} scale.`}function Khn(e){return`Using unaggregated domain with raw field has no effect (${Pr(e)}).`}function Xhn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Qhn(e){return`Unaggregated domain is currently unsupported for log scale (${Pr(e)}).`}function Jhn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Zhn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function epn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function wze(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Eze(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function tpn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using ${Pr(n)}.`}function npn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using the union of the two domains.`}function rpn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ipn(e){return`Dropping sort property ${Pr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const yve="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",spn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",opn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",apn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function upn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function lpn(e){return`Cannot stack non-linear scale (${e}).`}function cpn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function uM(e,t){return`Invalid ${e}: ${Pr(t)}.`}function fpn(e){return`Dropping day from datetime ${Pr(e)} as day cannot be combined with other units.`}function dpn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function hpn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function ppn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function vve(e){return`1D error band does not support ${e}.`}function xze(e){return`Channel ${e} is required for "binned" bin.`}function mpn(e){return`Channel ${e} should not be used with "binned" bin.`}function gpn(e){return`Domain for ${e} is required for threshold scale.`}const Sze=mZ(pZ);let aE=Sze;function ypn(e){return aE=e,aE}function vpn(){return aE=Sze,aE}function Ue(...e){aE.warn(...e)}function _pn(...e){aE.debug(...e)}function Xv(e){if(e&&st(e)){for(const t of Xne)if(t in e)return!0}return!1}const Tze=["january","february","march","april","may","june","july","august","september","october","november","december"],bpn=Tze.map(e=>e.substr(0,3)),Aze=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],wpn=Aze.map(e=>e.substr(0,3));function Epn(e){if(S5(e)&&(e=+e),Jn(e))return e>4&&Ue(uM("quarter",e)),e-1;throw new Error(uM("quarter",e))}function xpn(e){if(S5(e)&&(e=+e),Jn(e))return e-1;{const t=e.toLowerCase(),n=Tze.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=bpn.indexOf(r);if(i!==-1)return i;throw new Error(uM("month",e))}}function Spn(e){if(S5(e)&&(e=+e),Jn(e))return e%7;{const t=e.toLowerCase(),n=Aze.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=wpn.indexOf(r);if(i!==-1)return i;throw new Error(uM("day",e))}}function Kne(e,t){const n=[];if(t&&e.day!==void 0&&Ne(e).length>1&&(Ue(fpn(e)),e=qt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?xpn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Epn(e.quarter):e.quarter;n.push(Jn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Spn(e.day):e.day;n.push(Jn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function lv(e){const n=Kne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Tpn(e){const n=Kne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Apn(e){const t=Kne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Cze={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Xne=Ne(Cze);function Cpn(e){return!!Cze[e]}function Qv(e){return st(e)?e.binned:Ize(e)}function Ize(e){return e&&e.startsWith("binned")}function Qne(e){return e.startsWith("utc")}function Ipn(e){return e.substring(3)}const Opn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function N5(e){return Xne.filter(t=>Pze(e,t))}function Oze(e){const t=N5(e);return t[t.length-1]}function Pze(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Ppn(e,t,{end:n}={end:!1}){const r=Mne(t),i=Qne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Xne)Pze(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Tpn(a)}function kze(e){if(!e)return;const t=N5(e);return`timeUnitSpecifier(${Pr(t)}, ${Pr(Opn)})`}function kpn(e,t,n){if(!e)return;const r=kze(e);return`${n||Qne(e)?"utc":"time"}Format(${t}, ${r})`}function Hs(e){if(!e)return;let t;return rt(e)?Ize(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:st(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Qne(t.unit)&&(t.utc=!0,t.unit=Ipn(t.unit)),t}function $pn(e){const{utc:t,...n}=Hs(e);return n.unit?(t?"utc":"")+Ne(n).map(r=>hi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ne(n).map(r=>hi(`_${r}_${n[r]}`)).join("")}function $ze(e,t=n=>n){const n=Hs(e),r=Oze(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=Rze(r,n.step),a={...i,[o]:+i[o]+s};return`${t(lv(a))} - ${t(lv(i))}`}}const Rpn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Npn(e){return!!Rpn[e]}function Rze(e,t=1){if(Npn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Dpn(e){return e==null?void 0:e.param}function Jne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Zne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function ere(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function tre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function nre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function rre(e){if(e!=null&&e.field){if(Ie(e.range)&&e.range.length===2)return!0;if(Tt(e.range))return!0}return!1}function ire(e){return!!(e!=null&&e.field)&&(Ie(e.oneOf)||Ie(e.in))}function Lpn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Nze(e){return ire(e)||Jne(e)||rre(e)||Zne(e)||tre(e)||ere(e)||nre(e)}function zf(e,t){return H5(e,{timeUnit:t,wrapTime:!0})}function Mpn(e,t){return e.map(n=>zf(n,t))}function Dze(e,t=!0){const{field:n}=e,r=Hs(e.timeUnit),{unit:i,binned:s}=r||{},o=Je(e,{expr:"datum"}),a=i?`time(${s?o:Ppn(i,n)})`:o;if(Jne(e))return`${a}===${zf(e.equal,i)}`;if(Zne(e)){const u=e.lt;return`${a}<${zf(u,i)}`}else if(tre(e)){const u=e.gt;return`${a}>${zf(u,i)}`}else if(ere(e)){const u=e.lte;return`${a}<=${zf(u,i)}`}else if(nre(e)){const u=e.gte;return`${a}>=${zf(u,i)}`}else{if(ire(e))return`indexof([${Mpn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Lpn(e))return sre(a,e.valid);if(rre(e)){const{range:u}=e,l=Tt(u)?{signal:`${u.signal}[0]`}:u[0],c=Tt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+zf(l,i)+", "+zf(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${zf(l,i)}`),c!==null&&f.push(`${a} <= ${zf(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Pr(e)}`)}function sre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Fpn(e){return Nze(e)&&e.timeUnit?{...e,timeUnit:Hs(e.timeUnit)}:e}const gO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Bpn(e){return e==="quantitative"||e==="temporal"}function Lze(e){return e==="ordinal"||e==="nominal"}const cv=gO.quantitative,ore=gO.ordinal,uE=gO.temporal,are=gO.nominal,bx=gO.geojson;function jpn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case cv:return"quantitative";case"t":case uE:return"temporal";case"o":case ore:return"ordinal";case"n":case are:return"nominal";case bx:return"geojson"}}const pu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},eW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function zpn(e,t){const n=eW[e],r=eW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Upn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function _ve(e){return Upn[e]}const Mze=new Set(["linear","log","pow","sqrt","symlog"]),Fze=new Set([...Mze,"time","utc"]);function Bze(e){return Mze.has(e)}const jze=new Set(["quantile","quantize","threshold"]),Vpn=new Set([...Fze,...jze,"sequential","identity"]),Hpn=new Set(["ordinal","bin-ordinal","point","band"]);function Ws(e){return Hpn.has(e)}function hl(e){return Vpn.has(e)}function ef(e){return Fze.has(e)}function lE(e){return jze.has(e)}const qpn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Wpn(e){return!rt(e)&&!!e.name}function zze(e){return e==null?void 0:e.param}function Gpn(e){return e==null?void 0:e.unionWith}function Ypn(e){return st(e)&&"field"in e}const Kpn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:rxn,domain:ixn,range:sxn,rangeMax:oxn,rangeMin:axn,scheme:uxn,...Xpn}=Kpn,Qpn=Ne(Xpn);function tW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ef(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ef(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ef(e);case"nice":return ef(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return hl(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function Uze(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Xb(e)?void 0:Ghn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Jpn(e,t){return $n([ore,are],t)?e===void 0||Ws(e):t===uE?$n([pu.TIME,pu.UTC,void 0],e):t===cv?Bze(e)||lE(e)||e===void 0:!0}function Zpn(e,t,n=!1){if(!lm(e))return!1;switch(e){case pi:case Xs:case V0:case _x:case bc:case kf:return ef(t)||t==="band"?!0:t==="point"?!n:!1;case am:case W0:case um:case H0:case q0:case Gv:return ef(t)||lE(t)||$n(["band","point","ordinal"],t);case xu:case yh:case vh:return t!=="band";case G0:case Su:return t==="ordinal"||lE(t)}}const Fa={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Vze=Fa.arc,D5=Fa.area,L5=Fa.bar,emn=Fa.image,M5=Fa.line,F5=Fa.point,tmn=Fa.rect,lM=Fa.rule,Hze=Fa.text,ure=Fa.tick,nmn=Fa.trail,lre=Fa.circle,cre=Fa.square,qze=Fa.geoshape;function X0(e){return["line","area","trail"].includes(e)}function yC(e){return["rect","bar","image","arc"].includes(e)}const rmn=new Set(Ne(Fa));function nh(e){return e.type}const imn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],smn=["fill","fillOpacity"],omn=[...imn,...smn],amn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},bve=Ne(amn),umn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},lmn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},cmn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Wze=Ne(cmn);function fv(e){return e&&e.band!=null}const fmn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Gze=5,dmn={binSpacing:1,continuousBandSize:Gze,minBandSize:.25,timeUnitBandPosition:.5},hmn={binSpacing:0,continuousBandSize:Gze,minBandSize:.25,timeUnitBandPosition:.5},pmn={thickness:1};function mmn(e){return nh(e)?e.type:e}function fre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=hre(e);return Ve(n)&&!uze(n.aggregate)&&i&&ef(i.get("type"))?gmn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function gmn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return X0(n.type)?r:fr("invalid",n,i)===null?[ymn(e,t),r]:r}function ymn(e,t){const n=dre(e,!0),i=Yv(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function dre(e,t=!0){return sre(rt(e)?e:Je(e,{expr:"datum"}),!t)}function vmn(e){const{datum:t}=e;return Xv(t)?lv(t):`${Pr(t)}`}function E1(e,t,n,r){const i={};if(t&&(i.scale=t),wh(e)){const{datum:s}=e;Xv(s)?i.signal=lv(s):Tt(s)?i.signal=s.signal:mO(s)?i.signal=s.expr:i.value=s}else i.field=Je(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function cM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Tt(o)&&0<o&&o<1?"datum":void 0,u=Je(t,{expr:a,suffix:i}),l=n!==void 0?Je(n,{expr:a}):Je(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Tt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function _mn({scaleName:e,fieldDef:t}){const n=Je(t,{expr:"datum"}),r=Je(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function hre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qt(t)){const f=o==null?void 0:o.get("type");if($a(t)){c??(c=v0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Hr(d)||c&&h&&p===uE)return a!=null&&a.impute?E1(t,s,{binSuffix:"mid"},{offset:u}):c&&!Ws(f)?cM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):E1(t,s,bO(t,e)?{binSuffix:"range"}:{},{offset:u});if(oo(d)){if(Ve(n))return cM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ue(xze(e===pi?Pf:gh))}}return E1(t,s,Ws(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(_f(t)){const f=t.value,d=u?{offset:u}:{};return{...A2(e,f),...d}}}return pn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function A2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Jr(t)}function dv(e){return e&&e!=="number"&&e!=="time"}function Yze(e,t,n){return`${e}(${t}${n?`, ${Pr(n)}`:""})`}const bmn="  ";function pre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(dv(n))return tf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=Kze(e,r,i),a=cE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return tf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return tf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ve(e)&&e.timeUnit===void 0)return tf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(dE(e)){const c=Emn({field:o,timeUnit:Ve(e)?(u=Hs(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Jv(e)&&((l=e.scale)==null?void 0:l.type)===pu.UTC});return c?{signal:c}:void 0}if(t=nW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ve(e)&&Hr(e.bin)){const c=Je(e,{expr:r,binSuffix:"end"});return{signal:yO(o,c,t,n,s)}}else return t||cE(e)==="quantitative"?{signal:`${Jze(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Kze(e,t,n){return Ve(e)?n?`${Je(e,{expr:t,suffix:"end"})}-${Je(e,{expr:t,suffix:"start"})}`:Je(e,{expr:t}):vmn(e)}function tf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=Kze(e,r,i)),o!=="datum.value"&&Ve(e)&&Hr(e.bin)){const a=Je(e,{expr:r,binSuffix:"end"});return{signal:yO(o,a,t,n,s)}}return{signal:Yze(n,o,t)}}function Xze(e,t,n,r,i,s){var o;if(!(rt(r)&&dv(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&cE(e)==="quantitative"&&(i.normalizedNumberFormatType&&fE(e)&&e.stack==="normalize"||i.numberFormatType))){if(fE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return nW({type:"quantitative",config:i,normalizeStack:!0});if(dE(e)){const a=Ve(e)?(o=Hs(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:wmn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return nW({type:t,specifiedFormat:n,config:i})}}function Qze(e,t,n){var r;if(e&&(Tt(e)||e==="number"||e==="time"))return e;if(dE(t)&&n!=="time"&&n!=="utc")return Ve(t)&&((r=Hs(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function nW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(rt(t))return t;if(e===cv)return r?n.normalizedNumberFormat:n.numberFormat}function wmn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:kze(t)}:r?void 0:n.timeFormat)}function Jze(e,t){return`format(${e}, "${t||""}")`}function wve(e,t,n,r){return dv(n)?Yze(n,e,t):Jze(e,(rt(t)?t:void 0)??r.numberFormat)}function yO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return yO(e,t,i.numberFormat,i.numberFormatType,i);const s=wve(e,n,r,i),o=wve(t,n,r,i);return`${sre(e,!1)} ? "null" : ${s} + "${bmn}" + ${o}`}function Emn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=rt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):kpn(t,e,s)}const B5="min",xmn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Eve(e){return e in xmn}function Zze(e){return!!(e!=null&&e.encoding)}function Md(e){return e&&(e.op==="count"||!!e.field)}function eUe(e){return e&&Ie(e)}function vO(e){return"row"in e||"column"in e}function mre(e){return!!e&&"header"in e}function j5(e){return"facet"in e}function Smn(e){return e.param}function Tmn(e){return e&&!rt(e)&&"repeat"in e}function xve(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function gre(e){return"sort"in e}function v0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ve(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Wp("timeUnitBandPosition",n,r);if(Hr(s))return .5}}function tUe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Tu(e),u=fr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ve(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Wp("timeUnitBandSize",r,i)};if(Hr(h)&&!Ws(s))return{band:1}}if(yC(r.type))return s?Ws(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function nUe(e,t,n,r){return Hr(e.bin)||e.timeUnit&&$a(e)&&e.type==="temporal"?v0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function rUe(e){return e&&!!e.sort&&!e.field}function z5(e){return e&&"condition"in e}function U5(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Ve(t)}function _O(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Qt(t)}function Amn(e){const t=e==null?void 0:e.condition;return!!t&&(Ie(t)||_f(t))}function Ve(e){return e&&(!!e.field||e.aggregate==="count")}function cE(e){return e==null?void 0:e.type}function wh(e){return e&&"datum"in e}function lg(e){return $a(e)&&!dM(e)||fM(e)}function Sve(e){return $a(e)&&e.type==="quantitative"&&!e.bin||fM(e)}function fM(e){return wh(e)&&Jn(e.datum)}function Qt(e){return Ve(e)||wh(e)}function $a(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function _f(e){return e&&"value"in e&&"value"in e}function Jv(e){return e&&("scale"in e||"sort"in e)}function fE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function iUe(e){return e&&"legend"in e}function sUe(e){return e&&("format"in e||"formatType"in e)}function Cmn(e){return hu(e,["legend","axis","header","scale"])}function Imn(e){return"op"in e}function Je(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Pmn(e))n=Y7e("count");else{let o;if(!t.nofn)if(Imn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Hr(a)?(o=lze(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Y0(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):qp(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Qv(l)&&(o=$pn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Fne(n):t.expr?q7e(n,t.expr)+s:oc(n)+s}function dM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ve(e)&&!!e.bin;case"temporal":return!1}throw new Error(_ze(e.type))}function Omn(e){var t;return Jv(e)&&lE((t=e.scale)==null?void 0:t.type)}function Pmn(e){return e.aggregate==="count"}function kmn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Hr(r))return`${n} (binned)`;if(i&&!Qv(i)){const a=(o=Hs(i))==null?void 0:o.unit;if(a)return`${n} (${N5(a).join("-")})`}else if(s)return Y0(s)?`${n} for max ${s.argmax}`:qp(s)?`${n} for min ${s.argmin}`:`${fO(s)} of ${n}`;return n}function $mn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Y0(t))return`${i} for argmax(${t.argmax})`;if(qp(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Qv(r)?Hs(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Hr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const oUe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return $mn(e);default:return kmn(e,t)}};let aUe=oUe;function uUe(e){aUe=e}function Rmn(){uUe(oUe)}function Qb(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=yre(e))==null?void 0:a.title;if(!Ve(e))return i??e.title;const s=e,o=r?vre(s,t):void 0;return n?qi(i,s.title,o):i??s.title??o}function yre(e){if(fE(e)&&e.axis)return e.axis;if(iUe(e)&&e.legend)return e.legend;if(mre(e)&&e.header)return e.header}function vre(e,t){return aUe(e,t)}function hM(e){if(sUe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=yre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Nmn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(gre(e)&&Ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Y0(n)&&!qp(n))return"quantitative";if(Jv(e)&&((s=e.scale)!=null&&s.type))switch(eW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function rh(e){if(Ve(e))return e;if(U5(e))return e.condition}function vs(e){if(Qt(e))return e;if(_O(e))return e.condition}function lUe(e,t,n,r={}){if(rt(e)||Jn(e)||j0(e)){const i=rt(e)?"string":Jn(e)?"number":"boolean";return Ue(Dhn(t,i,e)),{value:e}}return Qt(e)?pM(e,t,n,r):_O(e)?{...e,condition:pM(e.condition,t,n,r)}:e}function pM(e,t,n,r){if(sUe(e)){const{format:i,formatType:s,...o}=e;if(dv(s)&&!n.customFormatTypes)return Ue(gve(t)),pM(o,t,n,r)}else{const i=fE(e)?"axis":iUe(e)?"legend":mre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(dv(o)&&!n.customFormatTypes)return Ue(gve(t)),pM({...e,[i]:a},t,n,r)}}return Ve(e)?_re(e,t,r):Dmn(e)}function Dmn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Jn(n)?"quantitative":rt(n)?"nominal":Xv(n)?"temporal":void 0,{...e,type:t}}function _re(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Wne(r)&&!Y0(r)&&!qp(r)&&(Ue(Mhn(r)),delete a.aggregate),i&&(a.timeUnit=Hs(i)),o&&(a.field=`${o}`),Hr(s)&&(a.bin=V5(s,t)),oo(s)&&!Wi(t)&&Ue(mpn(t)),$a(a)){const{type:u}=a,l=jpn(u);u!==l&&(a.type=l),u!=="quantitative"&&uze(r)&&(Ue(Lhn(u,r)),a.type="quantitative")}else if(!nze(t)){const u=Nmn(a,t);a.type=u}if($a(a)){const{compatible:u,warning:l}=Lmn(a,t)||{};u===!1&&Ue(l)}if(gre(a)&&rt(a.sort)){const{sort:u}=a;if(Eve(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Eve(l))return{...a,sort:{encoding:l,order:"descending"}}}if(mre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function V5(e,t){return j0(e)?{maxbins:ave(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:ave(t)}:e}const S_={compatible:!0};function Lmn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case yp:case vp:case T5:return dM(e)?S_:{compatible:!1,warning:zhn(t)};case pi:case Xs:case V0:case _x:case xu:case yh:case vh:case dO:case hO:case A5:case uv:case C5:case I5:case Gv:case bc:case kf:case O5:return S_;case Rf:case ac:case $f:case Nf:return n!==cv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:S_;case um:case H0:case q0:case W0:case am:case om:case sm:case Pf:case gh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:S_;case Su:case G0:return!dM(e)&&!Omn(e)?{compatible:!1,warning:Uhn(t)}:S_;case oE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:S_}}function dE(e){const{formatType:t}=hM(e);return t==="time"||!t&&Mmn(e)}function Mmn(e){return e&&(e.type==="temporal"||Ve(e)&&!!e.timeUnit)}function H5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Hs(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return mO(e)?a=e.expr:Tt(e)?a=e.signal:Xv(e)?(o=!0,a=lv(e)):(rt(e)||Jn(e))&&o&&(a=`datetime(${Pr(e)})`,Cpn(s)&&(Jn(e)&&e<1e4||rt(e)&&isNaN(Date.parse(e)))&&(a=lv({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Pr(e)}function cUe(e,t){const{type:n}=e;return t.map(r=>{const i=Ve(e)&&!Qv(e.timeUnit)?e.timeUnit:void 0,s=H5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function bO(e,t){return Hr(e.bin)?lm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Tve={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function wO(e){return e==null?void 0:e.condition}const fUe=["domain","grid","labels","ticks","title"],Fmn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},dUe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Bmn={...dUe,style:1,labelExpr:1,encoding:1};function Ave(e){return!!Bmn[e]}const jmn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},hUe=Ne(jmn);function cm(e){return"mark"in e}class q5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return cm(t)?mmn(t.mark)===this.name:!1}}function x1(e,t){const n=e&&e[t];return n?Ie(n)?ov(n,r=>!!r.field):Ve(n)||U5(n):!1}function pUe(e,t){const n=e&&e[t];return n?Ie(n)?ov(n,r=>!!r.field):Ve(n)||wh(n)||_O(n):!1}function mUe(e,t){if(Wi(t)){const n=e[t];if((Ve(n)||wh(n))&&(Lze(n.type)||Ve(n)&&n.timeUnit)){const r=Une(t);return pUe(e,r)}}return!1}function bre(e){return ov(zdn,t=>{if(x1(e,t)){const n=e[t];if(Ie(n))return ov(n,r=>!!r.aggregate);{const r=rh(n);return r&&!!r.aggregate}}return!1})}function gUe(e,t){const n=[],r=[],i=[],s=[],o={};return wre(e,(a,u)=>{if(Ve(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=yre(a),m=p==null?void 0:p.title;let g=Je(a,{forAs:!0});const y={...m?[]:{title:Qb(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Y0(c)?(v="argmax",g=Je({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):qp(c)?(v="argmin",g=Je({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),$a(a)&&Hr(f)){if(r.push({bin:f,field:l,as:g}),n.push(Je(a,{binSuffix:"end"})),bO(a,u)&&n.push(Je(a,{binSuffix:"range"})),Wi(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",nze(u)||(y.type=cv)}else if(d&&!Qv(d)){i.push({timeUnit:d,field:l,as:g});const v=$a(a)&&a.type!==uE&&"time";v&&(u===dO||u===uv?y.formatType=v:Qdn(u)?y.legend={formatType:v,...y.legend}:Wi(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function zmn(e,t,n){const r=Zdn(t,n);if(r){if(r==="binned"){const i=e[t===Pf?pi:Xs];return!!(Ve(i)&&Ve(e[t])&&oo(i.bin))}}else return!1;return!0}function Umn(e,t,n,r){const i={};for(const s of Ne(e))tze(s)||Ue(jhn(s));for(let s of Gdn){if(!e[s])continue;const o=e[s];if(pO(s)){const a=Wdn(s),u=i[a];if(Ve(u)&&Bpn(u.type)&&Ve(o)&&!u.timeUnit){Ue(Nhn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ue(Rhn),s=bc),!zmn(e,s,t)){Ue(R5(s,t));continue}if(s===am&&t==="line"){const a=rh(e[s]);if(a!=null&&a.aggregate){Ue(Bhn);continue}}if(s===xu&&(n?"fill"in e:"stroke"in e)){Ue(bze("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===hO||s===oE&&!Ie(o)&&!_f(o)||s===uv&&Ie(o)){if(o){if(s===oE){const a=e[s];if(rUe(a)){i[s]=a;continue}}i[s]=nt(o).reduce((a,u)=>(Ve(u)?a.push(_re(u,s)):Ue(Zq(u,s)),a),[])}}else{if(s===uv&&o===null)i[s]=null;else if(!Ve(o)&&!wh(o)&&!_f(o)&&!z5(o)&&!Tt(o)){Ue(Zq(o,s));continue}i[s]=lUe(o,s,r)}}return i}function W5(e,t){const n={};for(const r of Ne(e)){const i=lUe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Vmn(e){const t=[];for(const n of Ne(e))if(x1(e,n)){const r=e[n],i=nt(r);for(const s of i)Ve(s)?t.push(s):U5(s)&&t.push(s.condition)}return t}function wre(e,t,n){if(e)for(const r of Ne(e)){const i=e[r];if(Ie(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Hmn(e,t,n,r){return e?Ne(e).reduce((i,s)=>{const o=e[s];return Ie(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function yUe(e,t){return Ne(t).reduce((n,r)=>{switch(r){case pi:case Xs:case C5:case O5:case I5:case Pf:case gh:case V0:case _x:case bc:case om:case kf:case sm:case $f:case Rf:case Nf:case ac:case dO:case Su:case Gv:case uv:return n;case oE:if(e==="line"||e==="trail")return n;case hO:case A5:{const i=t[r];if(Ie(i)||Ve(i))for(const s of nt(i))s.aggregate||n.push(Je(s,{}));return n}case am:if(e==="trail")return n;case xu:case yh:case vh:case um:case H0:case q0:case G0:case W0:{const i=rh(t[r]);return i&&!i.aggregate&&n.push(Je(i,{})),n}}},[])}function qmn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ie(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function rW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Ere(t)}`:"";return{field:o+t.field,type:t.type,title:Tt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Vmn(n).map(Cmn);return{tooltip:[...i,...bd(s,kn)]}}function Ere(e){const{title:t,field:n}=e;return qi(t,n)}function xre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Ere(n);return vUe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...rt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function vUe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...nh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...j0(e[t])?{}:e[t]}}]:[]}function _Ue(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:yk(s,n),continuousAxisChannelDef2:yk(o,n),continuousAxisChannelDefError:yk(a,n),continuousAxisChannelDefError2:yk(u,n),continuousAxis:i}}function yk(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ue(ppn(n,t)),r}else return e}function bUe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(nh(n)&&n.orient)return n.orient;if(lg(i)){if(lg(s)){const o=Ve(i)&&i.aggregate,a=Ve(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return dE(s)&&!dE(i)?"horizontal":"vertical"}return"horizontal"}else{if(lg(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const mM="boxplot",Wmn=["box","median","outliers","rule","ticks"],Gmn=new q5(mM,EUe);function wUe(e){return Jn(e)?"tukey":e}function EUe(e,{config:t}){e={...e,encoding:W5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=nh(n)?n:{type:n};i&&Ue(vze("boxplot"));const u=a.extent??t.boxplot.extent,l=fr("size",a,t),c=a.invalid,f=wUe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:b,boxOrient:E,customTooltipWithoutAggregatedField:w}=Ymn(e,u,t),{color:x,size:S,...I}=_,C=Re=>xre(a,g,m,Re,t.boxplot),O=C(I),z=C(_),N=C({...I,...S?{size:S}:{}}),$=rW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),D={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},B=f==="min-max"?$:rW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:B}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:B}),...O({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:B}),...O({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:B})],j=[...f!=="tukey"?V:[],...z({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:$}),...N({partName:"median",mark:{type:"tick",invalid:c,...st(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:$})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:j};const G=`datum["lower_box_${m.field}"]`,U=`datum["upper_box_${m.field}"]`,P=`(${U} - ${G})`,k=`${G} - ${u} * ${P}`,H=`${U} + ${u} * ${P}`,M=`datum["${m.field}"]`,F={joinaggregate:xUe(m.field),groupby:y},J={transform:[{filter:`(${k} <= ${M}) && (${M} <= ${H})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:V},{tooltip:se,...ae}=I,{scale:ce,axis:le}=m,ge=Ere(m),ue=hu(le,["title"]),Fe=vUe(a,"outliers",t.boxplot,{transform:[{filter:`(${M} < ${k}) || (${M} > ${H})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ge!==void 0?{title:ge}:{},...ce!==void 0?{scale:ce}:{},...Or(ue)?{}:{axis:ue}},...ae,...x?{color:x}:{},...w?{tooltip:w}:{}}})[0];let ke;const Ge=[...d,...h,F];return Fe?ke={transform:Ge,layer:[Fe,J]}:(ke=J,ke.transform.unshift(...Ge)),{...o,layer:[ke,{transform:p,layer:j}]}}function xUe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function Ymn(e,t,n){const r=bUe(e,mM),{continuousAxisChannelDef:i,continuousAxis:s}=_Ue(e,r,mM),o=i.field,a=wUe(t),u=[...xUe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=qmn(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=gUe(h,n),_=r==="vertical"?"horizontal":"vertical",b=r,E=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:E,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const Sre="errorbar",Kmn=["ticks","rule"],Xmn=new q5(Sre,SUe);function SUe(e,{config:t}){e={...e,encoding:W5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=TUe(e,Sre,t);delete s.size;const c=xre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Qmn(e,t){const{encoding:n}=e;if(Jmn(n))return{orient:bUe(e,t),inputType:"raw"};const r=Zmn(n),i=egn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qt(a)&&Qt(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qt(a)){if(lg(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qt(u)){if(lg(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qt(u)&&!Qt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qt(c)&&!Qt(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qt(a)&&Qt(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qt(a)){if(lg(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qt(l)){if(lg(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Jmn(e){return(Qt(e.x)||Qt(e.y))&&!Qt(e.x2)&&!Qt(e.y2)&&!Qt(e.xError)&&!Qt(e.xError2)&&!Qt(e.yError)&&!Qt(e.yError2)}function Zmn(e){return Qt(e.x2)||Qt(e.y2)}function egn(e){return Qt(e.xError)||Qt(e.xError2)||Qt(e.yError)||Qt(e.yError2)}function TUe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=nh(r)?r:{type:r};s&&Ue(vze(t));const{orient:l,inputType:c}=Qmn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=_Ue(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=tgn(u,f,d,h,p,c,t,n),{[m]:b,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:x,...S}=i,{bins:I,timeUnits:C,aggregate:O,groupby:z,encoding:N}=gUe(S,n),$=[...O,...g],D=c!=="raw"?[]:z,B=rW(v,f,N,_);return{transform:[...a.transform??[],...I,...C,...$.length===0?[]:[{aggregate:$,groupby:D}],...y],groupby:D,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:N,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function tgn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ue(hpn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:fO(h)},{fieldPrefix:"upper_",titlePrefix:Cve(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Cve(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Qb({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Qb({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Qb({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ue(dpn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:av(av(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Cve(e,t,n){return`${fO(e)} ${n} ${t}`}const Tre="errorband",ngn=["band","borders"],rgn=new q5(Tre,AUe);function AUe(e,{config:t}){e={...e,encoding:W5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=TUe(e,Tre,t),l=o,c=xre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ue(vve("interpolate")):l.tension&&Ue(vve("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const CUe={};function Are(e,t,n){const r=new q5(e,t);CUe[e]={normalizer:r,parts:n}}function ign(){return Ne(CUe)}Are(mM,EUe,Wmn);Are(Sre,SUe,Kmn);Are(Tre,AUe,ngn);const sgn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],IUe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},OUe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},ogn=Ne(IUe),agn=Ne(OUe),ugn={header:1,headerRow:1,headerColumn:1,headerFacet:1},PUe=Ne(ugn),kUe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],lgn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},cgn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},bf="_vgsid_",fgn={point:{on:"click",fields:[bf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Cre(e){return e==="legend"||!!(e!=null&&e.legend)}function p7(e){return Cre(e)&&st(e)}function Ire(e){return!!(e!=null&&e.select)}function $Ue(e){const t=[];for(const n of e||[]){if(Ire(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function dgn(e){return G5(e)||Pre(e)||Ore(e)}function Ore(e){return"concat"in e}function G5(e){return"vconcat"in e}function Pre(e){return"hconcat"in e}function RUe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ih(e){return st(e)&&e.step!==void 0}function Ive(e){return e.view||e.width||e.height}const Ove=20,hgn={align:1,bounds:1,center:1,columns:1,spacing:1},pgn=Ne(hgn);function mgn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(j5(e)&&!vO(e.facet)||Ore(e))&&(i.columns=o),G5(e)&&(i.columns=1);for(const a of pgn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Jn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function iW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function gM(e,t){const n=yM(e,t);return ih(n)?n.step:NUe}function yM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return qi(n,{step:e.step})}const NUe=20,ggn={continuousWidth:200,continuousHeight:200,step:NUe},ygn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:ggn,mark:lmn,arc:{},area:{},bar:dmn,circle:{},geoshape:{},image:{},line:{},point:{},rect:hmn,rule:{color:"black"},square:{},text:{color:"black"},tick:pmn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:qpn,projection:{},legend:lgn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:fgn,style:{},title:{},facet:{spacing:Ove},concat:{spacing:Ove},normalizedNumberFormat:".0%"},Ih=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Pve={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},kve={blue:Ih[0],orange:Ih[1],red:Ih[2],teal:Ih[3],green:Ih[4],yellow:Ih[5],purple:Ih[6],pink:Ih[7],brown:Ih[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function vgn(e={}){return{signals:[{name:"color",value:st(e)?{...kve,...e}:kve}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function _gn(e){return{signals:[{name:"fontSize",value:st(e)?{...Pve,...e}:Pve}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function bgn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function DUe(e){const t=Ne(e||{}),n={};for(const r of t){const i=e[r];n[r]=wO(i)?fze(i):qu(i)}return n}function wgn(e){const t=Ne(e),n={};for(const r of t)n[r]=DUe(e[r]);return n}const Egn=[...Wze,...hUe,...PUe,"background","padding","legend","lineBreak","scale","style","title","view"];function LUe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=ax({},qt(ygn),n?bgn(n):{},t?vgn(t):{},r?_gn(r):{},s||{});i&&ux(o,"selection",i,!0);const a=hu(o,Egn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qu(o[u]));for(const u of Wze)o[u]&&(a[u]=eu(o[u]));for(const u of hUe)o[u]&&(a[u]=DUe(o[u]));for(const u of PUe)o[u]&&(a[u]=eu(o[u]));return o.legend&&(a.legend=eu(o.legend)),o.scale&&(a.scale=eu(o.scale)),o.style&&(a.style=wgn(o.style)),o.title&&(a.title=eu(o.title)),o.view&&(a.view=eu(o.view)),a}const xgn=new Set(["view",...rmn]),Sgn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Tgn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...umn};function Agn(e){e=qt(e);for(const t of Sgn)delete e[t];if(e.axis)for(const t in e.axis)wO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of sgn)delete e.legend[t];if(e.mark){for(const t of bve)delete e.mark[t];e.mark.tooltip&&st(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat($Ue(e.params)),delete e.params);for(const t of xgn){for(const r of bve)delete e[t][r];const n=Tgn[t];if(n)for(const r of n)delete e[t][r];Ign(e,t)}for(const t of ign())delete e[t];Cgn(e);for(const t in e)st(e[t])&&Or(e[t])&&delete e[t];return Or(e)?void 0:e}function Cgn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=cze(e.title);Or(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Or(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Or(r)?delete e.title:e.title=r}function Ign(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Or(s)||(e.style[n??t]=s),r||delete e[t]}function Y5(e){return"layer"in e}function Ogn(e){return"repeat"in e}function Pgn(e){return!Ie(e.repeat)&&e.repeat.layer}class kre{map(t,n){return j5(t)?this.mapFacet(t,n):Ogn(t)?this.mapRepeat(t,n):Pre(t)?this.mapHConcat(t,n):G5(t)?this.mapVConcat(t,n):Ore(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Y5(t))return this.mapLayer(t,n);if(cm(t))return this.mapUnit(t,n);throw new Error(Gne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const kgn={zero:1,center:1,normalize:1};function $gn(e){return e in kgn}const Rgn=new Set([Vze,L5,D5,lM,F5,lre,cre,M5,Hze,ure]),Ngn=new Set([L5,D5,Vze]);function T_(e){return Ve(e)&&cE(e)==="quantitative"&&!e.bin}function $ve(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ve(o)&&Ve(a))if(T_(o)&&T_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ve(o)&&!!o.aggregate,l=Ve(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(T_(o))return t;if(T_(a))return i}else{if(T_(o))return s&&n==="vertical"?void 0:t;if(T_(a))return s&&n==="horizontal"?void 0:i}}function Dgn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function MUe(e,t){var m,g;const n=nh(e)?e:{type:e},r=n.type;if(!Rgn.has(r))return null;const i=$ve(t,"x",n)||$ve(t,"theta",n);if(!i)return null;const s=t[i],o=Ve(s)?Je(s,{}):void 0,a=Dgn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ve(y)?Je(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ve(f)?Je(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Ydn.reduce((y,v)=>{if(v!=="tooltip"&&x1(t,v)){const _=t[v];for(const b of nt(_)){const E=rh(b);if(E.aggregate)continue;const w=Je(E,{});(!w||!l.has(w))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?j0(s.stack)?p=s.stack?"zero":null:p=s.stack:Ngn.has(r)&&(p="zero"),!p||!$gn(p)||bre(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==pu.LINEAR?(s!=null&&s.stack&&Ue(lpn(s.scale.type)),null):Qt(t[_h(i)])?(s.stack!==void 0&&Ue(upn(i)),null):(Ve(s)&&s.aggregate&&!ohn.has(s.aggregate)&&Ue(cpn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:X0(r),stackBy:h,offset:p})}function FUe(e,t,n){const r=eu(e),i=fr("orient",r,n);if(r.orient=Bgn(r.type,t,i),i!==void 0&&i!==r.orient&&Ue(Whn(r.orient,i)),r.type==="bar"&&r.orient){const u=fr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:fmn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fr("opacity",r,n),o=fr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Mgn(r.type,t)),fr("cursor",r,n)===void 0&&(r.cursor=Lgn(r,t,n)),r}function Lgn(e,t,n){return t.href||e.href||fr("href",e,n)?"pointer":e.cursor}function Mgn(e,t){if($n([F5,ure,lre,cre],e)&&!bre(t))return .7}function Fgn(e,t,{graticule:n}){if(n)return!1;const r=Wp("filled",e,t),i=e.type;return qi(r,i!==F5&&i!==M5&&i!==lM)}function Bgn(e,t,n){switch(e){case F5:case lre:case cre:case Hze:case tmn:case emn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case L5:if(Ve(r)&&(oo(r.bin)||Ve(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ve(i)&&(oo(i.bin)||Ve(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ve(r)&&r.type===cv&&!Hr(r.bin)||fM(r))&&Ve(i)&&oo(i.bin)?"horizontal":"vertical";if(!o)return(Ve(i)&&i.type===cv&&!Hr(i.bin)||fM(i))&&Ve(r)&&oo(r.bin)?"vertical":"horizontal"}case lM:if(s&&!(Ve(r)&&oo(r.bin))&&o&&!(Ve(i)&&oo(i.bin)))return;case D5:if(o)return Ve(i)&&oo(i.bin)?"horizontal":"vertical";if(s)return Ve(r)&&oo(r.bin)?"vertical":"horizontal";if(e===lM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case M5:case ure:{const a=Sve(r),u=Sve(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=$a(r)&&r.type===uE,c=$a(i)&&i.type===uE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function jgn(e){const{point:t,line:n,...r}=e;return Ne(r).length>1?r:r.type}function zgn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:hu(e[t],["point","line"])});return e}function m7(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?st(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?st(t.point)?t.point:{}:void 0}function Rve(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Ugn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(cm(t)){const{mark:r,encoding:i}=t,s=nh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!m7(s,n[s.type],i);case"area":return!!m7(s,n[s.type],i)||!!Rve(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=W5(l,i),d=nh(a)?a:{type:a},h=m7(d,i[d.type],f),p=d.type==="area"&&Rve(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:jgn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:hu(f,["shape"])}],g=MUe(FUe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=hu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...iE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...iE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:zgn(i)})}}function Vgn(e,t){return t?vO(e)?jUe(e,t):BUe(e,t):e}function g7(e,t){return t?jUe(e,t):e}function sW(e,t,n){const r=t[e];if(Tmn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ue(Ahn(r.repeat));return}return t}function BUe(e,t){if(e=sW("field",e,t),e!==void 0){if(e===null)return null;if(gre(e)&&Md(e.sort)){const n=sW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Nve(e,t){if(Ve(e))return BUe(e,t);{const n=sW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Dve(e,t){if(Qt(e)){const n=Nve(e,t);if(n)return n;if(z5(e))return{condition:e.condition}}else{if(_O(e)){const n=Nve(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function jUe(e,t){const n={};for(const r in e)if(Nt(e,r)){const i=e[r];if(Ie(i))n[r]=i.map(s=>Dve(s,t)).filter(s=>s);else{const s=Dve(i,t);s!==void 0&&(n[r]=s)}}return n}class Hgn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(cm(t)){const{encoding:n,mark:r}=t;if(r==="line"||nh(r)&&r.type==="line")for(const i of qdn){const s=Yv(i),o=n[s];if(n[i]&&(Ve(o)&&!oo(o.bin)||wh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ue(qhn(!!i.x2,!!i.y2)),r({...t,mark:st(s)?{...s,type:"rule"}:"rule"},n)}}class qgn extends kre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Gmn,Xmn,rgn,new Ugn,new Hgn]}map(t,n){if(cm(t)){const r=x1(t.encoding,yp),i=x1(t.encoding,vp),s=x1(t.encoding,T5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=g7(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Pgn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${hi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ie(r)&&t.columns&&(t=hu(t,["columns"]),Ue(pve("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ie(r)&&r.row||[u?u.row:null],f=!Ie(r)&&r.column||[u?u.column:null],d=Ie(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ie(r)?`${hi(p)}`:(r.row?`row_${hi(m)}`:"")+(r.column?`column_${hi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(hu(_,["data"]))}const h=Ie(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return vO(r)&&t.columns&&(t=hu(t,["columns"]),Ue(pve("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Mve({parentProjection:o,projection:i}),l=Lve({parentEncoding:s,encoding:g7(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=g7(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ue(Vhn([...r?[yp]:[],...i?[vp]:[]]));const o={},a={};for(const u of[yp,vp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Vgn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Lve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Mve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Lve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ne(e),...Ne(t)]);for(const s of i){const o=t[s],a=e[s];if(Qt(o)){const u={...a,...o};r[s]=u}else _O(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||_f(a)||Tt(a)||Qt(a)||Ie(a))&&(r[s]=a)}}else r=t;return!r||Or(r)?void 0:r}function Mve(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ue($hn({parentProjection:t,projection:n})),n??t}function $re(e){return"filter"in e}function Wgn(e){return(e==null?void 0:e.stop)!==void 0}function zUe(e){return"lookup"in e}function Ggn(e){return"data"in e}function Ygn(e){return"param"in e}function Kgn(e){return"pivot"in e}function Xgn(e){return"density"in e}function Qgn(e){return"quantile"in e}function Jgn(e){return"regression"in e}function Zgn(e){return"loess"in e}function e0n(e){return"sample"in e}function t0n(e){return"window"in e}function n0n(e){return"joinaggregate"in e}function r0n(e){return"flatten"in e}function i0n(e){return"calculate"in e}function UUe(e){return"bin"in e}function s0n(e){return"impute"in e}function o0n(e){return"timeUnit"in e}function a0n(e){return"aggregate"in e}function u0n(e){return"stack"in e}function l0n(e){return"fold"in e}function c0n(e){return"extent"in e&&!("density"in e)}function f0n(e){return e.map(t=>$re(t)?{filter:Kb(t.filter,Fpn)}:t)}class d0n extends kre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Fve(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Fve(t,n),t.encoding){const r={};for(const[i,s]of g0(t.encoding))r[i]=VUe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:g0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of _o(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Fve(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if($re(s))return{filter:oW(s,t)};if(UUe(s)&&Kv(s.bin))return{...s,bin:HUe(s.bin)};if(zUe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function VUe(e,t){var r,i;const n=qt(e);if(Ve(n)&&Kv(n.bin)&&(n.bin=HUe(n.bin)),Jv(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(z5(n))if(Ie(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:oW(s,t)}});else{const{selection:s,param:o,test:a,...u}=VUe(n.condition,t);n.condition=o?n.condition:{...u,test:oW(n.condition,t)}}return n}function HUe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function oW(e,t){const n=r=>Kb(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Kb(e.test||e.filter,r=>r.selection?n(r.selection):r)}class aW extends kre{map(t,n){const r=n.selections??[];if(t.params&&!cm(t)){const i=[];for(const s of t.params)Ire(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(rt(a)&&(a===t.name||i.includes(a))||Ie(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=aW.prototype[e];aW.prototype[e]=function(n,r){return t.call(this,n,h0n(n,r))}}function h0n(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function qUe(e,t){t===void 0&&(t=LUe(e.config));const n=y0n(e,t),{width:r,height:i}=e,s=v0n(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const p0n=new qgn,m0n=new d0n,g0n=new aW;function y0n(e,t={}){const n={config:t};return g0n.map(p0n.map(m0n.map(e,n),n),n)}function Bve(e){return rt(e)?{type:e}:e??{}}function v0n(e,t,n){let{width:r,height:i}=t;const s=cm(e)||Y5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ue(cve("width")),r=void 0),i=="container"&&(Ue(cve("height")),i=void 0));const a={type:"pad",...o,...n?Bve(n.autosize):{},...Bve(e.autosize)};if(a.type==="fit"&&!s&&(Ue(mhn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ue(fve("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ue(fve("height")),!Qu(a,{type:"pad"}))return a}function _0n(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function b0n(e){return e?`fit-${P5(e)}`:"fit"}const w0n=["background","padding"];function jve(e,t){const n={};for(const r of w0n)e&&e[r]!==void 0&&(n[r]=qu(e[r]));return t&&(n.params=e.params),n}class fm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new fm(qt(this.explicit),qt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return qi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ne(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Qf(e){return{explicit:!0,value:e}}function Lu(e){return{explicit:!1,value:e}}function WUe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:K5(t,n,r,i)}}function K5(e,t,n,r){return e.explicit&&t.explicit&&Ue(tpn(n,r,e.value,t.value)),e}function _0(e,t,n,r,i=K5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Qu(e.value,t.value)?e:i(e,t,n,r)}class E0n extends fm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function hE(e){return"url"in e}function vC(e){return"values"in e}function GUe(e){return"name"in e&&!hE(e)&&!vC(e)&&!Lg(e)}function Lg(e){return e&&(YUe(e)||KUe(e)||Rre(e))}function YUe(e){return"sequence"in e}function KUe(e){return"sphere"in e}function Rre(e){return"graticule"in e}var zr;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(zr||(zr={}));function XUe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=oc(i.field),i}function hv(e,t=!0,n=na){if(Ie(e)){const r=e.map(i=>hv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Xv(e))return n(t?lv(e):Apn(e));return t?n(Pr(e)):e}function x0n(e,t){for(const n of _o(e.component.selection??{})){const r=n.name;let i=`${r}${w0}, ${n.resolve==="global"?"true":`{unit: ${S1(e)}}`}`;for(const s of Z5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+tyn,on:[{events:{signal:n.name+w0},update:`modify(${Xe(n.name+pv)}, ${i})`}]})}return Nre(t)}function S0n(e,t){if(e.component.selection&&Ne(e.component.selection).length){const n=Xe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:U0("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Nre(t)}function T0n(e,t){let n=!1;for(const r of _o(e.component.selection??{})){const i=r.name,s=Xe(i+pv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${pVe}(${s}, ${Xe(a)}${u}`})}n=!0;for(const a of Z5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Nre(t)}function A0n(e,t){const n=[...t],r=S1(e,{escape:!1});for(const i of _o(e.component.selection??{})){const s={name:i.name+pv};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:bf}}]),i.init){const a=i.project.items.map(XUe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[bf]:hv(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:hv(u,!1)}))}n.filter(a=>a.name===i.name+pv).length||n.push(s)}return n}function QUe(e,t){for(const n of _o(e.component.selection??{}))for(const r of Z5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function C0n(e,t){for(const n of e.children)$i(n)&&(t=QUe(n,t));return t}function I0n(e,t,n,r){const i=_Ve(e,t.param,t);return{signal:hl(n.get("type"))&&Ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Nre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Sr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ue(Ohn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ta extends Sr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${G7e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function y7(e){return e.as!==void 0}function zve(e){return`${e}_end`}class Fd extends Sr{clone(){return new Fd(null,qt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Qv(u)){if($i(n)){const{mark:c,markDef:f,config:d}=n,h=v0({fieldDef:s,markDef:f,config:d});(yC(c)||h)&&(l={timeUnit:Hs(u),field:a})}}else l={as:Je(s,{forAs:!0}),field:a,timeUnit:u};if($i(n)){const{mark:c,markDef:f,config:d}=n,h=v0({fieldDef:s,markDef:f,config:d});yC(c)&&Wi(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[kn(l)]=l)}return i},{});return Or(r)?null:new Fd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Hs(r),o={...i,timeUnit:s};return new Fd(t,{[kn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of g0(this.timeUnits)){const s=y7(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(_o(this.timeUnits).map(t=>y7(t)?t.as:zve(t.field)))}dependentFields(){return new Set(_o(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${kn(this.timeUnits)}`}assemble(){const t=[];for(const n of _o(this.timeUnits)){const{rectBandPosition:r}=n,i=Hs(n.timeUnit);if(y7(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:oc(s),type:"timeunit",...a?{units:N5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Uve(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=JUe({timeUnit:i,field:o}),u=zve(o);t.push({type:"formula",expr:a,as:u}),t.push(...Uve([o,u],r,i))}}return t}}const X5="offsetted_rect_start",Q5="offsetted_rect_end";function JUe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Oze(r),{part:o,step:a}=Rze(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Uve([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Vve([JUe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${X5}`},{type:"formula",expr:Vve([i,s],n+.5),as:`${e}_${Q5}`}]}return[]}function Vve([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const EO="_tuple_fields";class O0n{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const P0n={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new O0n),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=hi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=hi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?nt(n.value):null;let{fields:d,encodings:h}=st(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(st(p))for(const m of Ne(p))Hdn(m)?(h||(h=[])).push(m):l==="interval"?(Ue(Thn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ue(ghn(p,m.aggregate));continue}else if(!g){Ue(hve(p));continue}if(m.timeUnit&&!Qv(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[kn(y)]=y}if(!s[g]){const y=l==="interval"&&lm(p)&&hl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===bf,Z7e(p)?(v.geoChannel=p,v.channel=J7e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ue(hve(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===bf}f&&(t.init=f.map(p=>i.items.map(m=>st(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Or(o)||(i.timeUnit=new Fd(null,o))},signals:(e,t,n)=>{const r=t.name+EO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(XUe)})}},_p={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!lm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ue(bhn),!s||!hl(o)){Ue(_hn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Hve(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(pVe)>=0)i.update=`{${r.map(o=>`${Xe(oc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Xe(oc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Hve(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function uW(e,t){return`domain(${Xe(e.scaleName(t))})`}function Hve(e){return e.parent&&Tx(e.parent)&&!e.parent.parent}const Jb="_brush",ZUe="_scale_trigger",PS="geo_interval_init_tick",eVe="_init",k0n="_center",$0n={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...st(n.select)?n.select:{}};i.fields=[bf],i.encodings||(i.encodings=n.value?Ne(n.value):[Rf,$f]),n.select={type:"interval",...i}}if(t.translate&&!_p.defined(t)){const i=`!event.item || event.item.mark.name !== ${Xe(t.name+Jb)}`;for(const s of t.events){if(!s.between){Ue(`${s} is not an ordered event stream for interval selections.`);continue}const o=nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+w0,s=_o(t.project.hasChannel).filter(a=>a.channel===pi||a.channel===Xs),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(R0n(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Xe(e.projectionName()),u=e.projectionName()+k0n,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+eVe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(w=>w.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Xe(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${S1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,b=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...o?[{signal:PS}]:[]],update:_}]})}else{if(!_p.defined(t)){const l=r+ZUe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Xe(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=hl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${S1(e)}, fields: ${r+EO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${hv(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>($i(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===PS).length||n.unshift({name:PS,value:null,on:[{events:"timer{1}",update:`${PS} === null ? {} : ${PS}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Xe(t.name+pv)})`;if(_p.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ne(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${S1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ne(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Jb}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Jb,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function R0n(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Xe(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===pi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=_p.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:hv(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+ZUe},update:hl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:hv(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===pi?0:1,h=t.name+eVe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const N0n={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+EO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=_o(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Jb):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${S1(e)}, `;if(t.project.hasSelectionId)l+=`${bf}: ${o}[${Xe(bf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Xe(e.vgField(d.channel,{}))}], ${o}[${Xe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Xe(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+w0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function wx(e,t,n,r){const i=z5(t)&&t.condition,s=r(t);if(i){const a=nt(i).map(u=>{const l=r(u);if(Smn(u)){const{param:c,empty:f}=u;return{test:vVe(e,{param:c,empty:f}),...l}}else return{test:bM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Dre(e,t="text"){const n=e.encoding[t];return wx(e,n,t,r=>J5(r,e.config))}function J5(e,t,n="datum"){if(e){if(_f(e))return Jr(e.value);if(Qt(e)){const{format:r,formatType:i}=hM(e);return pre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function tVe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ie(o))return{tooltip:qve({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return wx(e,o,"tooltip",u=>{const l=J5(u,i,a);if(l)return l;if(u===null)return;let c=fr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),rt(c))return{value:c};if(st(c))return Tt(c)?c:c.content==="encoding"?qve(n,s,i,t):{signal:a}})}}function nVe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Yv(f),h=$a(c)?c:{...c,type:e[d].type},p=h.title||vre(h,i),m=nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Wi(f)){const y=f==="x"?"x2":"y2",v=rh(e[y]);if(oo(h.bin)&&v){const _=Je(h,{expr:o}),b=Je(v,{expr:o}),{format:E,formatType:w}=hM(h);g=yO(_,b,E,w,i),s[y]=!0}}if((Wi(f)||f===bc||f===kf)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=hM(h);g=pre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=J5(h,i,o).signal),a.push({channel:f,key:m,value:g})}wre(e,(c,f)=>{Ve(c)?u(c,f):U5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function qve(e,t,n,{reactiveGeom:r}={}){const i=nVe(e,t,n,{reactiveGeom:r}),s=g0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function D0n(e){const{markDef:t,config:n}=e,r=fr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...L0n(e),...M0n(e)}}function L0n(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in dhn?{}:{ariaRoleDescription:{value:t}}}function M0n(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return wx(e,s,"description",u=>J5(u,e.config));const o=fr("description",n,r);if(o!=null)return{description:Jr(o)};if(r.aria===!1)return{};const a=nVe(t,i,r);if(!Or(a))return{description:{signal:g0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ms(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=fr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Jr(u)));const l=i[e];return wx(t,l,o??e,c=>hre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function rVe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fr("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Jr(u)}:{},...l?{stroke:Jr(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ue(bze("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ms("color",e,{vgChannel:c,defaultValue:o?u:l}),...Ms("fill",e,{defaultValue:r.fill?u:void 0}),...Ms("stroke",e,{defaultValue:r.stroke?l:void 0})}}function F0n(e){const{encoding:t,mark:n}=e,r=t.order;return!X0(n)&&_f(r)?wx(e,r,"zindex",i=>Jr(i.value)):{}}function pE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:hre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Jr(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Ho(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[_h(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=pE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Lre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Wi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:B0n({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function B0n(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qt(n)&&i&&t===i.fieldChannel){if(Ve(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return cM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return E1(n,r,{suffix:"end"},{offset:s})}return fre(e)}function Lre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Yv(n),u=y0(n),l=fr(n,s,o,{vgChannel:u});if(l!==void 0)return A2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!$n([pu.LOG,pu.TIME,pu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Tu(n)],mult:.5}}}}const j0n={left:"x",center:"xc",right:"x2"},z0n={top:"y",middle:"yc",bottom:"y2"};function iVe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return y0(e);const i=e==="x"?"align":"baseline",s=fr(i,t,n);let o;return Tt(s)?(Ue(Hhn(i)),o=void 0):o=s,e==="x"?j0n[o||(r==="top"?"left":"center")]:z0n[o||r]}function vM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?sVe(e,t,{defaultPos:n,defaultPos2:r}):Ho(e,t,{defaultPos:n})}function sVe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=_h(e),a=Tu(e),u=U0n(t,r,o),l=u[a]?iVe(e,i,s):y0(e);return{...Ho(e,t,{defaultPos:n,vgChannel:l}),...u}}function U0n(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Yv(n),l=Tu(n),c=y0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?pE({channel:n,markDef:s,encoding:r,model:e}):pE({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Tu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=V0n({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:vk(n,s)||vk(n,{[n]:aM(n,s,a.style),[l]:aM(l,s,a.style)})||vk(n,a[i])||vk(n,a.mark)||{[c]:Lre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function V0n({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?E1(t,s,{suffix:"start"},{offset:u}):fre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function vk(e,t){const n=Tu(e),r=y0(e);if(t[r]!==void 0)return{[r]:A2(e,t[r])};if(t[e]!==void 0)return{[r]:A2(e,t[e])};if(t[n]){const i=t[n];if(fv(i))Ue(Fhn(n));else return{[n]:A2(e,i)}}}function b0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=_h(t),a=Tu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fr("size",i,n,{vgChannel:a}),p=rze(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ve(u)&&(Hr(u.bin)||oo(u.bin)||u.timeUnit&&!l)&&!(h&&!fv(h))&&!r[p]&&!Ws(f)?W0n({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qt(u)&&Ws(f)||m)&&!l?q0n(u,t,e):sVe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function H0n(e,t,n,r,i,s,o){if(fv(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Wp("minBandSize",{type:o},r);return{signal:c?`max(${Zc(c)}, ${l})`:l}}else i.band!==1&&(Ue(Yhn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Tt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(K0(u)&&Jn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=qi(u,o==="bar"?l:c);if(Tt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Jn(f))return{signal:`${1-f} * ${e}`}}return{value:gM(r.view,e)-2}}function q0n(e,t,n){var I,C;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Tu(t),f=_h(t),d=rze(t),h=n.scaleName(d),p=n.getScaleComponent(Une(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Ms("size",n,{vgChannel:c,defaultRef:Jr(r.size)}):Ue(Jhn(r.type)));const y=!!g,v=tUe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=l||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:H0n(c,h||u,p||l,s,v,!!e,r.type)};const _=((C=l||p)==null?void 0:C.get("type"))==="band"&&fv(v)&&!y?"top":"middle",b=iVe(t,r,s,_),E=b==="xc"||b==="yc",{offset:w,offsetType:x}=pE({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),S=fre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:w,defaultRef:Lre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?x==="encoding"?0:.5:Tt(v)?{signal:`(1-${v})/2`}:fv(v)?(1-v.band)/2:0});if(c)return{[b]:S,...g};{const O=y0(f),z=g[c],N=w?{...z,offset:w}:z;return{[b]:S,[O]:Ie(S)?[S[0],{...S[1],offset:N}]:{...S,offset:N}}}}function Wve(e,t,n,r,i,s,o){if(Q7e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Tt(n)||Tt(i)||Tt(r)||s){const l=Zc(n),c=Zc(i),f=Zc(r),d=Zc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function W0n({fieldDef:e,fieldDef2:t,channel:n,model:r}){var C;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=tUe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(C=r.component.axes[n])==null?void 0:C[0],h=(d==null?void 0:d.get("translate"))??.5,p=Wi(n)?fr("binSpacing",s,i)??0:0,m=_h(n),g=y0(n),y=y0(m),v=Wp("minBandSize",s,i),{offset:_}=pE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:b}=pE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=_mn({fieldDef:e,scaleName:u}),w=Wve(n,p,c,h,_,v,E),x=Wve(m,p,c,h,b??_,v,E),S=Tt(f)?{signal:`(1-${f.signal})/2`}:fv(f)?(1-f.band)/2:.5,I=v0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Hr(e.bin)||e.timeUnit){const O=e.timeUnit&&I!==.5;return{[y]:Gve({fieldDef:e,scaleName:u,bandPosition:S,offset:x,useRectOffsetField:O}),[g]:Gve({fieldDef:e,scaleName:u,bandPosition:Tt(S)?{signal:`1-${S.signal}`}:1-S,offset:w,useRectOffsetField:O})}}else if(oo(e.bin)){const O=E1(e,u,{},{offset:x});if(Ve(t))return{[y]:O,[g]:E1(t,u,{},{offset:w})};if(Kv(e.bin)&&e.bin.step)return{[y]:O,[g]:{signal:`scale("${u}", ${Je(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}Ue(xze(m))}function Gve({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return cM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:X5,endSuffix:Q5}:{}})}const G0n=new Set(["aria","width","height"]);function wc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?rVe(e):{};return{...Y0n(e.markDef,t),...Yve(e,"fill",n),...Yve(e,"stroke",r),...Ms("opacity",e),...Ms("fillOpacity",e),...Ms("strokeOpacity",e),...Ms("strokeWidth",e),...Ms("strokeDash",e),...F0n(e),...tVe(e),...Dre(e,"href"),...D0n(e)}}function Yve(e,t,n){const{config:r,mark:i,markDef:s}=e;if(fr("invalid",s,r)==="hide"&&n&&!X0(i)){const a=K0n(e,{invalid:!0,channels:k5});if(a)return{[t]:[{test:a,value:null},...nt(n)]}}return n?{[t]:n}:{}}function Y0n(e,t){return fhn.reduce((n,r)=>(!G0n.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Jr(e[r])),n),{})}function K0n(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&hl(u)&&(s[l]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>dre(o,t)).join(` ${s} `)}}function Mre(e){const{config:t,markDef:n}=e;if(fr("invalid",n,t)){const i=X0n(e,{channels:bh});if(i)return{defined:{signal:i}}}return{}}function X0n(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&hl(l)&&(s[c]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>dre(o,t)).join(` ${s} `)}}function Kve(e,t){if(t!==void 0)return{[e]:Jr(t)}}const v7="voronoi",oVe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(v7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(X0(s))return Ue(yhn(s)),n;const o={name:e.getName(v7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...tVe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(v7)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},aVe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Cre(e.bind),parse:(e,t,n)=>mVe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=oVe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=hi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:hv(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Xe(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+w0)[0],o=r+EO,a=i.items.map(l=>hi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},_M="_toggle",uVe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+_M,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+w0,r=t.name+_M;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${S1(e)}}, `)+`${r} ? ${n} : null`}},Q0n={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=rt(t.clear)?U0(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(aVe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===hi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+w0);r(i,"null"),uVe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+_M),r(i,"false"))}return n}},lVe={defined:e=>{const t=e.resolve==="global"&&e.bind&&Cre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==bf;return t&&!n&&Ue(whn),t&&n},parse:(e,t,n)=>{const r=qt(n);if(r.select=rt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},mVe(t,r),st(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=p7(t.bind)?t.bind.legend:"click",s=rt(i)?U0(i,"view"):nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=p7(t.bind)&&t.bind.legend,s=o=>a=>{const u=qt(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${hi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+w0),o=r+EO,a=i.items.filter(d=>d.hasLegend).map(d=>hi(`${r}_${hi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+_M),f=p7(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function J0n(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of _o(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&lVe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const cVe="_translate_anchor",fVe="_translate_delta",Z0n={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=_p.defined(t),s=r+cVe,{x:o,y:a}=t.project.hasChannel;let u=U0(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Jb,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?uW(e,pi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?uW(e,Xs):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+fVe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Xve(e,t,o,"width",n),a!==void 0&&Xve(e,t,a,"height",n),n}};function Xve(e,t,n,r,i){const s=t.name,o=s+cVe,a=s+fVe,u=n.channel,l=_p.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===pi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?b:`clampRange(${b}, 0, ${f})`})}const dVe="_zoom_anchor",hVe="_zoom_delta",eyn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=_p.defined(t),s=r+hVe,{x:o,y:a}=t.project.hasChannel,u=Xe(e.scaleName(pi)),l=Xe(e.scaleName(Xs));let c=U0(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Jb,f))),n.push({name:r+dVe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Qve(e,t,o,"width",n),a!==void 0&&Qve(e,t,a,"height",n),n}};function Qve(e,t,n,r,i){const s=t.name,o=n.channel,a=_p.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?uW(e,o):u.name,h=s+hVe,p=`${s}${dVe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const pv="_store",w0="_tuple",tyn="_modify",pVe="vlSelectionResolve",Z5=[N0n,$0n,P0n,uVe,aVe,_p,lVe,Q0n,Z0n,eyn,oVe];function nyn(e){let t=e.parent;for(;t&&!nl(t);)t=t.parent;return t}function S1(e,{escape:t}={escape:!0}){let n=t?Xe(e.name):e.name;const r=nyn(e);if(r){const{facet:i}=r;for(const s of ql)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Xe(r.vgField(s))}])`)}return n}function Fre(e){return _o(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function mVe(e,t){(rt(t.select)||!t.select.on)&&delete e.events,(rt(t.select)||!t.select.clear)&&delete e.clear,(rt(t.select)||!t.select.toggle)&&delete e.toggle}function lW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...lW(e.object)),t.push(...lW(e.property))),t)}function gVe(e){return e.object.type==="MemberExpression"?gVe(e.object):e.object.name==="datum"}function yVe(e){const t=rne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&gVe(r)&&n.add(lW(r).slice(1).join("."))}),n}class Ex extends Sr{clone(){return new Ex(null,this.model,qt(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=bM(this.model,this.filter,this),this._dependentFields=yVe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ryn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=hi(i.name),o=i.select,a=rt(o)?o:o.type,u=st(o)?qt(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=qt(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:rt(u.on)?U0(u.on,"scope"):nt(qt(u.on))},f=qt(i);for(const d of Z5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function vVe(e,t,n,r="datum"){const i=rt(t)?t:t.param,s=hi(i),o=Xe(s+pv);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Xe(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function _Ve(e,t,n){const r=hi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ue(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Xe(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ue((a.length?"Multiple ":"No ")+`matching ${Xe(i)} encoding found for selection ${Xe(n.param)}. Using "field": ${Xe(s)}.`)):s=a[0].field}return`${o.name}[${Xe(oc(s))}]`}function iyn(e,t){for(const[n,r]of g0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ta(new Ex(t,e,{param:n}),i,zr.Lookup,e.component.data.outputNodeRefCounts)}}function bM(e,t,n){return T2(t,r=>rt(r)?r:Dpn(r)?vVe(e,r,n):Dze(r))}function syn(e,t){if(e)return Ie(e)&&!Lm(e)?e.map(n=>vre(n,t)).join(", "):e}function _7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function xT(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Fmn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(wO(m)){const{condition:g,...y}=m,v=nt(g),_=Tve[h];if(_){const{vgProp:b,part:E}=_,w=[...v.map(x=>{const{test:S,...I}=x;return{test:bM(null,S),...I}}),y];_7(c,E,b,w),delete c[h]}else if(_===null){const b={signal:v.map(E=>{const{test:w,...x}=E;return`${bM(null,w)} ? ${lve(x)} : `}).join("")+lve(y)};c[h]=b}}else if(Tt(m)){const g=Tve[h];if(g){const{vgProp:y,part:v}=g;_7(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Or(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:qi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Tt(c.encode.labels.update.text)&&(p=av(a,"datum.label",c.encode.labels.update.text.signal)),_7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of fUe)e.hasAxisPart(p)||delete c.encode[p];Or(c.encode)&&delete c.encode}const h=syn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:qi(l,0)}}}}function bVe(e){const{axes:t}=e.component,n=[];for(const r of bh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function oyn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>xT(i,"grid",t)),...r.map(i=>xT(i,"grid",t)),...n.map(i=>xT(i,"main",t)),...r.map(i=>xT(i,"main",t))].filter(i=>i)}function Jve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ne(o),...Ne(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Zc(o[c])} : ${Zc(a[c])}`};return l}return t[i]})])}function ayn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Bze(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Tt(n)?"axisOrient":`axis${fO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Jve(a,r,e,n),vgAxisConfig:Jve(u,r,e,n),axisConfigStyle:uyn([...u,...a],r)}}function uyn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function cW(e,t,n,r={}){var s;const i=hze(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Zve={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??lyn(n,e),gridScale:({model:e,channel:t})=>cyn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||EVe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||wVe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??dyn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??hyn(t.type,n,Ve(t)&&!!t.timeUnit,Ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??myn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:gyn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=xVe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return mze(i?[xve(i)]:[],Ve(o)?[xve(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>yyn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??vyn(n,t)};function lyn(e,t){return!Ws(e)&&Ve(t)&&!Hr(t==null?void 0:t.bin)&&!oo(t==null?void 0:t.bin)}function cyn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function fyn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Tt(s)?s:gC(s);{const{configValue:o}=cW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?gC(o):n===pi&&$n([are,ore],e.type)&&!(Ve(e)&&e.timeUnit)?270:void 0}}function fW(e){return`(((${e.signal} % 360) + 360) % 360)`}function wVe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Tt(e)){const i=fW(e),s=Tt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Tt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Tt(e)){const i=fW(e),s=Tt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Tt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function EVe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Tt(e)){const o=fW(e),a=Tt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Tt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function dyn(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function hyn(e,t,n,r){if(n&&!st(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function pyn(e){return e==="x"?"bottom":"left"}function myn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ws(t)&&t!=="log"){if(Ve(e)){if(Hr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=Hs(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function gyn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ve(t)){const{timeUnit:n}=t;if(n){const r=$ze(n);if(r)return{signal:r}}}}function xVe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return gze(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function yyn(e,t){const n=e.values;if(Ie(n))return cUe(t,n);if(Tt(n))return n}function vyn(e,t){return e==="rect"&&dM(t)?1:0}class mE extends Sr{clone(){return new mE(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=yVe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Jv(r)&&eUe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${Dze({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new mE(t,{calculate:u,as:gE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${kn(this.transform)}`}}function gE(e,t,n){return Je(e,{prefix:t,suffix:"sort_index",...n})}function e8(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function yE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return qi((t||{})[e],i[e],n.header[e])}function t8(e,t,n,r){const i={};for(const s of e){const o=yE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Bre=["row","column"],jre=["header","footer"];function _yn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=t8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=e8(t,a),l=gC(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...TVe(l,u),...SVe(u,l,s),...AVe(r,i,t,ogn,IUe)}}}function SVe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=EVe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function TVe(e,t){const n=wVe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function byn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of jre)if(n[i])for(const s of n[i]){const o=Eyn(e,t,i,n,s);o!=null&&r.push(o)}return r}function wyn(e,t){const{sort:n}=e;return Md(n)?{field:Je(n,{expr:"datum"}),order:n.order??"ascending"}:Ie(n)?{field:gE(e,t,{expr:"datum"}),order:"ascending"}:{field:Je(e,{expr:"datum"}),order:n??"ascending"}}function dW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=t8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=pre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=e8(t,a);return{text:{signal:u?av(av(u,"datum.label",l),"datum.value",Je(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...TVe(s,c),...SVe(c,s,o),...AVe(n,e,t,agn,OUe)}}function Eyn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=t8(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=dW(o,t,a))}const u=nl(e)&&!vO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:wyn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const xyn={column:{start:0,end:1},row:{start:1,end:0}};function Syn(e,t){return xyn[t][e]}function Tyn(e,t){const n={};for(const r of ql){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=t8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=e8(r,o),u=Syn(s,a);u!==void 0&&(n[a]=u)}}return Or(n)?void 0:n}function AVe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=yE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function zre(e){return[..._k(e,"width"),..._k(e,"height"),..._k(e,"childWidth"),..._k(e,"childHeight")]}function _k(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ws(o)&&K0(a)){const u=e.scaleName(n);return nl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[e_e(u,a)]:[e_e(u,a),{name:i,update:CVe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=iW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function e_e(e,t){const n=`${e}_step`;return Tt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function CVe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=qi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Zc(o)}, ${Zc(s)}) * ${e}_step`}function IVe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function OVe(e,t){return Ne(e).reduce((n,r)=>{const i=e[r];return{...n,...wx(t,i,r,s=>Jr(s.value))}},{})}function PVe(e,t){if(nl(t))return e==="theta"?"independent":"shared";if(Tx(t))return"shared";if(Yre(t))return Wi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Ure(e,t){const n=e.scale[t],r=Wi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ue(rpn(t)),"independent"):e[r][t]||"shared"}const Ayn={...cgn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},kVe=Ne(Ayn);class Cyn extends fm{}const t_e={symbols:Iyn,gradient:Oyn,labels:Pyn,entries:kyn};function Iyn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...phn({},n,omn),...rVe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?$Ve(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===xu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Jr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Jr(m??1));else if(Ie(f.fill)){const g=hW(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Jr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===xu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ie(f.stroke)){const g=qi(hW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==um){const g=Ve(t)&&NVe(n,i,t);g?f.opacity=[{test:g,...Jr(m??1)},Jr(u.legend.unselectedOpacity)]:m&&(f.opacity=Jr(m))}return f={...f,...e},Or(f)?void 0:f}function Oyn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?$Ve(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Jr(l)),a={...a,...e},Or(a)?void 0:a}function Pyn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ve(t)?NVe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;dv(c)?f=tf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=tf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ve(t)&&t.timeUnit===void 0&&(f=tf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Or(d)?void 0:d}function kyn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function $Ve(e){return RVe(e,(t,n)=>Math.max(t,n.value))}function hW(e){return RVe(e,(t,n)=>qi(t,n.value))}function RVe(e,t){if(Amn(e))return nt(e.condition).reduce(t,e.value);if(_f(e))return e.value}function NVe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Xe(n.field);return r.map(s=>`(!length(data(${Xe(hi(s)+pv)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const n_e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Xze(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Qze(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Fyn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Byn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Ryn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Qb(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Xb(n)&&ef(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>$yn(t,e)};function $yn(e,t){const n=e.values;if(Ie(n))return cUe(t,n);if(Tt(n))return n}function Ryn(e,t,n,r){if(t!=="shape"){const i=hW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Nyn(e){const{legend:t}=e;return qi(t.type,Dyn(e))}function Dyn({channel:e,timeUnit:t,scaleType:n}){if(Xb(e)){if($n(["quarter","month","day"],t))return"symbol";if(ef(n))return"gradient"}return"symbol"}function Lyn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Myn(n,t)}function Myn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Fyn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(ef(i))return n==="horizontal"?r==="top"||r==="bottom"?r_e(t,"width",o,s):o:r_e(t,"height",u,a)}function r_e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Byn(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function DVe(e){const t=$i(e)?jyn(e):Hyn(e);return e.component.legends=t,t}function jyn(e){const{encoding:t}=e,n={};for(const r of[xu,...kUe]){const i=vs(t[r]);!i||!e.getScaleComponent(r)||r===Su&&Ve(i)&&i.type===bx||(n[r]=Vyn(e,r))}return n}function zyn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Uyn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Vyn(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Cyn({},zyn(e,t));J0n(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=vs(i[t]),f=Ve(c)?(b=Hs(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||s.legend.orient||"right",h=Nyn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Lyn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of kVe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const w=E in n_e?n_e[E](m):n[E];if(w!==void 0){const x=Uyn(w,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,w,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const w=OVe(g[E]??{},e),x=E in t_e?t_e[E](w,_):w;x!==void 0&&!Or(x)&&(v[E]={...y!=null&&y.length&&Ve(c)?{name:`${hi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Or(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Hyn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){DVe(r);for(const i of Ne(r.component.legends))n.legend[i]=Ure(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=LVe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ne(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function LVe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of kVe){const c=_0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return qyn(f,d);case"title":return yze(f,d);case"type":return i=!0,Lu("symbol")}return K5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&oM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&oM(e.explicit,["encode","gradient"])),e}function qyn(e,t){return t.value==="circle"?t:e}function Wyn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function MVe(e){const t=e.component.legends,n={};for(const i of Ne(t)){const s=e.getScaleComponent(i),o=Pr(s.get("domains"));if(n[o])for(const a of n[o])LVe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return _o(n).flat().map(i=>Gyn(i,e.config)).filter(i=>i!==void 0)}function Gyn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of kUe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Tt(s.encode.labels.update.text)&&(l=av(r,"datum.label",s.encode.labels.update.text.signal)),Wyn(s,"labels","text",{signal:l})}return s}}function Yyn(e){return Tx(e)||Yre(e)?Kyn(e):FVe(e)}function Kyn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),FVe(e))}function FVe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Tt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Xyn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class BVe extends fm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function jVe(e){e.component.projection=$i(e)?Qyn(e):e1n(e)}function Qyn(e){if(e.hasProjection){const t=eu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Jyn(e):void 0,s=new BVe(e.projectionName(!0),{...eu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Jyn(e){const t=[],{encoding:n}=e;for(const r of[[Rf,$f],[ac,Nf]])(vs(n[r[0]])||vs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Su)&&e.typedFieldDef(Su).type===bx&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zr.Main)),t}function Zyn(e,t){const n=Nne(Xyn,i=>!!(!Nt(e.explicit,i)&&!Nt(t.explicit,i)||Nt(e.explicit,i)&&Nt(t.explicit,i)&&Qu(e.get(i),t.get(i))));if(Qu(e.size,t.size)){if(n)return e;if(Qu(e.explicit,{}))return t;if(Qu(t.explicit,{}))return e}return null}function e1n(e){if(e.children.length===0)return;let t;for(const r of e.children)jVe(r);const n=Nne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Zyn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new BVe(r,t.specifiedProjection,t.size,qt(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function t1n(e,t,n,r){if(bO(t,n)){const i=$i(e)?e.axis(n)??e.legend(n)??{}:{},s=Je(t,{expr:"datum"}),o=Je(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Je(t,{binSuffix:"range",forAs:!0}),formula:yO(s,o,i.format,i.formatType,r)}}return{}}function zVe(e,t){return`${lze(e)}_${t}`}function n1n(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Vre(e,t,n){const r=V5(n,void 0)??{},i=zVe(r,t);return e.getName(`${i}_bins`)}function r1n(e){return"as"in e}function i_e(e,t,n){let r,i;r1n(e)?r=rt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Je(e,{forAs:!0}),Je(e,{binSuffix:"end",forAs:!0})];const s={...V5(t,void 0)},o=zVe(s,e.field),{signal:a,extentSignal:u}=n1n(n,o);if($5(s.extent)){const c=s.extent;i=_Ve(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Bd extends Sr{clone(){return new Bd(null,qt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if($a(s)&&Hr(s.bin)){const{key:a,binComponent:u}=i_e(s,s.bin,n);i[a]={...u,...i[a],...t1n(n,s,o,n.config)}}return i},{});return Or(r)?null:new Bd(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=i_e(n,n.bin,r);return new Bd(t,{[i]:s})}merge(t,n){for(const r of Ne(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=bd([...this.bins[r].as,...t.bins[r].as],kn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(_o(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(_o(this.bins).map(t=>t.field))}hash(){return`Bin ${kn(this.bins)}`}assemble(){return _o(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:oc(t.field),as:r,signal:t.signal,...$5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:oc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Je({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function i1n(e,t,n,r){var s;const i=$i(r)?r.encoding[_h(t)]:void 0;if($a(n)&&$i(r)&&nUe(n,i,r.markDef,r.config)){e.add(Je(n,{})),e.add(Je(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=v0({fieldDef:n,markDef:a,config:u});yC(o)&&l!==.5&&Wi(t)&&(e.add(Je(n,{suffix:X5})),e.add(Je(n,{suffix:Q5}))),n.bin&&bO(n,t)&&e.add(Je(n,{binSuffix:"range"}))}else if(Z7e(t)){const o=J7e(t);e.add(r.getName(o))}else e.add(Je(n));return Jv(n)&&Ypn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function s1n(e,t){for(const n of Ne(t)){const r=t[n];for(const i of Ne(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class cf extends Sr{clone(){return new cf(null,new Set(this.dimensions),qt(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Je(o,{forAs:!0})]);else{if(qp(u)||Y0(u)){const c=qp(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Je({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Je(o,{forAs:!0})]);lm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Je({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Je({field:l,aggregate:"max"},{forAs:!0})]))}else i1n(s,a,o,n)}),s.size+Ne(i).length===0)?null:new cf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Je(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Je(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ne(i).length===0?null:new cf(t,r,i)}merge(t){return H7e(this.dimensions,t.dimensions)?(s1n(this.measures,t.measures),!0):(_pn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ne(this.measures)])}producedFields(){const t=new Set;for(const n of Ne(this.measures))for(const r of Ne(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${kn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ne(this.measures))for(const o of Ne(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:oc(s));return{type:"aggregate",groupby:[...this.dimensions].map(oc),ops:t,fields:n,as:r}}}class xx extends Sr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of ql){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Je(o),...Hr(a)?[Je(o,{binSuffix:"end"})]:[]],...Md(u)?{sortField:u}:Ie(u)?{sortIndexField:gE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ql)this[n]&&(t+=` ${n.charAt(0)}:${kn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ql)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ql)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of bh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ws(i)&&K0(s)){const o=n8(this.childModel,n),a=Gre(o);a?t[n]=a:Ue(Yne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=B5,field:f}=u;s.push(f),o.push(c),a.push(Je(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Bre){for(const c of jre){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[vp,yp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function s_e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function o1n(e,t){const n=Mne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=s_e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=s_e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ue(Ihn(t)),null}function a1n(e){const t={};return X$(e.filter,n=>{if(Nze(n)){let r=null;Jne(n)?r=qu(n.equal):ere(n)?r=qu(n.lte):Zne(n)?r=qu(n.lt):tre(n)?r=qu(n.gt):nre(n)?r=qu(n.gte):rre(n)?r=n.range[0]:ire(n)&&(r=(n.oneOf??n.in)[0]),r&&(Xv(r)?t[n.field]="date":Jn(r)?t[n.field]="number":rt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function u1n(e){const t={};function n(r){dE(r)?t[r.field]="date":r.type==="quantitative"&&shn(r.aggregate)?t[r.field]="number":sE(r.field)>1?r.field in t||(t[r.field]="flatten"):Jv(r)&&Md(r.sort)&&sE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if(($i(e)||nl(e))&&e.forEachFieldDef((r,i)=>{if($a(r))n(r);else{const s=Yv(i),o=e.fieldDef(s);n({...r,type:o.type})}}),$i(e)){const{mark:r,markDef:i,encoding:s}=e;if(X0(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ve(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function l1n(e){const t={};if($i(e)&&e.component.selection)for(const n of Ne(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&sE(i.field)>1&&(t[i.field]="flatten")}return t}class qo extends Sr{clone(){return new qo(null,qt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${kn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Lg(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ne(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ue(mve(a,r[a],u.value)))}for(const a of Ne(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ue(mve(a,n[a],u)))}const s=new fm(n,r);i.copyAll(s);const o={};for(const a of Ne(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ne(o).length===0||i.parseNothing?null:new qo(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ne(this._parse)){const r=this._parse[n];sE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ne(this._parse))}dependentFields(){return new Set(Ne(this._parse))}assembleTransforms(t=!1){return Ne(this._parse).filter(n=>t?sE(n)>1:!0).map(n=>{const r=o1n(n,this._parse[n]);return r?{type:"formula",expr:r,as:Fne(n)}:null}).filter(n=>n!==null)}}class E0 extends Sr{clone(){return new E0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([bf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:bf}}}class xO extends Sr{clone(){return new xO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${kn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class SO extends Sr{clone(){return new SO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${kn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class mv extends Sr{constructor(t){super(null),t??(t={name:"source"});let n;if(Lg(t)||(n=t.format?{...hu(t.format,["parse"])}:{}),vC(t))this._data={values:t.values};else if(hE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else KUe(t)?this._data={values:[{type:"Sphere"}]}:(GUe(t)||Lg(t))&&(this._data={});this._generator=Lg(t),t.name&&(this._name=t.name),n&&!Or(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var o_e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},c1n=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},ST;function Hre(e){return e instanceof mv||e instanceof xO||e instanceof SO}class qre{constructor(){ST.set(this,void 0),o_e(this,ST,!1,"f")}setModified(){o_e(this,ST,!0,"f")}get modifiedFlag(){return c1n(this,ST,"f")}}ST=new WeakMap;class Zv extends qre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Wre extends qre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class f1n extends Wre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ne(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class d1n extends Wre{constructor(t){super(),this.requiresSelectionId=t&&Fre(t)}run(t){t instanceof E0&&(this.requiresSelectionId&&(Hre(t.parent)||t.parent instanceof cf||t.parent instanceof qo)||(this.setModified(),t.remove()))}}class h1n extends qre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Fd&&(r=t.producedFields(),Dne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class p1n extends Wre{constructor(){super()}run(t){t instanceof Ta&&!t.isRequired()&&(this.setModified(),t.remove())}}class m1n extends Zv{run(t){if(!Hre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof qo)if(t instanceof qo)this.setModified(),t.merge(n);else{if(Lne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class g1n extends Zv{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof qo);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ne(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Or(i)){this.setModified();const o=new qo(t,i);for(const a of n){if(a instanceof qo)for(const u of Ne(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof qo&&Ne(a.parse).length===0&&a.remove()}}}}}class y1n extends Zv{run(t){t instanceof Ta||t.numChildren()>0||t instanceof xx||t instanceof mv||(this.setModified(),t.remove())}}class v1n extends Zv{run(t){const n=t.children.filter(i=>i instanceof Fd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class _1n extends Zv{run(t){const n=t.children.filter(i=>i instanceof cf),r={};for(const i of n){const s=kn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ne(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class b1n extends Zv{constructor(t){super(),this.model=t}run(t){const n=!(Hre(t)||t instanceof Ex||t instanceof qo||t instanceof E0),r=[],i=[];for(const s of t.children)s instanceof Bd&&(n&&!Lne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Bd?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class w1n extends Zv{run(t){const n=[...t.children];if(!ov(n,o=>o instanceof Ta)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ta){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ta)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class e_ extends Sr{clone(){return new e_(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=bd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`JoinAggregateTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function E1n(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Je(r);return i&&t.push(i),t},[])}function x1n(e){return Ie(e)&&e.every(t=>rt(t))&&e.length>1}class bp extends Sr{clone(){return new bp(null,qt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(qi(f.order,"ascending"));const l={field:a,order:u};let c;return x1n(s)?c=s:rt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new bp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return rh(p)}).filter(h=>!!h),c=E1n(n),f=n.encoding.order;let d;if(Ie(f)||Ve(f))d=pze(f);else{const h=rUe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new bp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${kn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Je(i,{binSuffix:"mid"})]:[Je(i,{}),Je(i,{binSuffix:"end"})]:[Je(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Je(c,{expr:"datum"}),p=Je(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Je(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Je(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class Sx extends Sr{clone(){return new Sx(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=bd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`WindowTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Wne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function S1n(e){function t(n){if(!(n instanceof xx)){const r=n.clone();if(r instanceof Ta){const i=mW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof cf||r instanceof bp||r instanceof Sx||r instanceof e_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function pW(e){if(e instanceof xx)if(e.numChildren()===1&&!(e.children[0]instanceof Ta)){const t=e.children[0];(t instanceof cf||t instanceof bp||t instanceof Sx||t instanceof e_)&&t.addDimensions(e.fields),t.swapWithParent(),pW(e)}else{const t=e.model.component.data.main;UVe(t);const n=S1n(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(pW)}function UVe(e){if(e instanceof Ta&&e.type===zr.Main&&e.numChildren()===1){const t=e.children[0];t instanceof xx||(t.swapWithParent(),UVe(e))}}const mW="scale_",bk=5;function gW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!gW(t.children))return!1}return!0}function Ac(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function a_e(e,t,n){let r=e.sources,i=!1;return i=Ac(new p1n,r)||i,i=Ac(new d1n(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Ac(new y1n,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Ac(new m1n,r)||i,i=Ac(new b1n(t),r)||i,i=Ac(new h1n,r)||i,i=Ac(new g1n,r)||i,i=Ac(new _1n,r)||i,i=Ac(new v1n,r)||i,i=Ac(new f1n,r)||i,i=Ac(new w1n,r)||i),e.sources=r,i}function T1n(e,t){gW(e.sources);let n=0,r=0;for(let i=0;i<bk&&a_e(e,t,!0);i++)n++;e.sources.map(pW);for(let i=0;i<bk&&a_e(e,t,!1);i++)r++;gW(e.sources),Math.max(n,r)===bk&&Ue(`Maximum optimization runs(${bk}) reached.`)}class Ds{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ds(()=>t(n))}}function VVe(e){$i(e)?A1n(e):C1n(e)}function A1n(e){const t=e.component.scales;for(const n of Ne(t)){const r=O1n(e,n);if(t[n].setWithExplicit("domains",r),k1n(e,n),e.component.data.isFaceted){let s=e;for(;!nl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)sp(a)&&(a.data=mW+a.data.replace(mW,""))}}}function C1n(e){for(const n of e.children)VVe(n);const t=e.component.scales;for(const n of Ne(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=_0(r,o.getWithExplicit("domains"),"domains","scale",yW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ue(Shn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function I1n(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=u_e(t,n);if(!i){Ue(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=u_e(t,n);if(i)return"unaggregated"}return e}function O1n(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=I1n(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&vs(r.x2)?vs(r.x)?_0(Am(n,i,e,"x"),Am(n,i,e,"x2"),"domain","scale",yW):Am(n,i,e,"x2"):t==="y"&&vs(r.y2)?vs(r.y)?_0(Am(n,i,e,"y"),Am(n,i,e,"y2"),"domain","scale",yW):Am(n,i,e,"y2"):Am(n,i,e,t)}function P1n(e,t,n){return e.map(r=>({signal:`{data: ${H5(r,{timeUnit:n,type:t})}}`}))}function b7(e,t,n){var i;const r=(i=Hs(n))==null?void 0:i.unit;return t==="temporal"||r?P1n(e,t,r):[e]}function Am(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=vs(i[r]),{type:c}=l,f=l.timeUnit;if(Gpn(t)){const p=Am(e,void 0,n,r),m=b7(t.unionWith,c,f);return Qf([...m,...p.value])}else{if(Tt(t))return Qf([t]);if(t&&t!=="unaggregated"&&!zze(t))return Qf(b7(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Lu([[0,1]]);const p=n.requestDataName(zr.Main);return Lu([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=lm(r)&&Ve(l)?$1n(n,r,e):void 0;if(wh(l)){const p=b7([l.datum],c,f);return Lu(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(zr.Main),{field:m}=l;return Lu([{data:p,field:Je({field:m,aggregate:"min"})},{data:p,field:Je({field:m,aggregate:"max"})}])}else if(Hr(h.bin)){if(Ws(e))return Lu(e==="bin-ordinal"?[]:[{data:mC(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r,bO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!st(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Hr(p)){const m=Vre(n,h.field,p);return Lu([new Ds(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Lu([{data:n.requestDataName(zr.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&$n(["time","utc"],e)){const p=i[_h(r)];if(nUe(h,p,s,a)){const m=n.requestDataName(zr.Main),g=v0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=yC(o)&&g!==.5&&Wi(r);return Lu([{data:m,field:n.vgField(r,y?{suffix:X5}:{})},{data:m,field:n.vgField(r,{suffix:y?Q5:"end"})}])}}return Lu(d?[{data:mC(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(zr.Main),field:n.vgField(r)}])}function w7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":B5),...r?{field:oc(r)}:{},...i?{order:i}:{}}}function k1n(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=zze(r)&&r,o=Kv(i)&&$5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function $1n(e,t,n){if(!Ws(n))return;const r=e.fieldDef(t),i=r.sort;if(eUe(i))return{op:"min",field:gE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Md(i)){const a=s&&!o.has(i.field);return w7(i,a)}else if(Zze(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(qp(c)||Y0(c))return w7({field:Je(l),order:u},d);if(Wne(c)||!c)return w7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function u_e(e,t){const{aggregate:n,type:r}=e;return n?rt(n)&&!ahn.has(n)?{valid:!1,reason:Xhn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Qhn(e)}:{valid:!0}:{valid:!1,reason:Khn(e)}}function yW(e,t,n,r){return e.explicit&&t.explicit&&Ue(npn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function R1n(e){const t=bd(e.map(o=>{if(sp(o)){const{sort:a,...u}=o;return u}return o}),kn),n=bd(e.map(o=>{if(sp(o)){const a=o.sort;return a!==void 0&&!mC(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),kn);if(t.length===0)return;if(t.length===1){const o=e[0];if(sp(o)&&n.length>0){let a=n[0];if(n.length>1){Ue(yve);const u=n.filter(l=>st(l)&&"op"in l&&l.op!=="min");n.every(l=>st(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(st(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=bd(n.map(o=>mC(o)||!("op"in o)||rt(o.op)&&o.op in rhn?o:(Ue(ipn(o)),!0)),kn);let i;r.length===1?i=r[0]:r.length>1&&(Ue(yve),i=!0);const s=bd(e.map(o=>sp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Gre(e){if(sp(e)&&rt(e.field))return e.field;if(uhn(e)){let t;for(const n of e.fields)if(sp(n)&&rt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ue(spn),t}return Ue(opn),t}else if(lhn(e)){Ue(apn);const t=e.fields[0];return rt(t)?t:void 0}}function n8(e,t){const r=e.component.scales[t].get("domains").map(i=>(sp(i)&&(i.data=e.lookupDataSource(i.data)),i));return R1n(r)}function HVe(e){return Tx(e)||Yre(e)?e.children.reduce((t,n)=>t.concat(HVe(n)),l_e(e)):l_e(e)}function l_e(e){return Ne(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=N1n(i.range,s,n,e),h=n8(e,n),p=a?I0n(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function N1n(e,t,n,r){if(Wi(n)){if(K0(e))return{step:{signal:`${t}_step`}}}else if(st(e)&&sp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class qVe extends fm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ov(this.get("domains"),t=>Ie(t)&&t.length===2&&Jn(t[0])&&t[0]<=0&&Jn(t[1])&&t[1]>=0)}}const D1n=["range","scheme"];function L1n(e){const t=e.component.scales;for(const n of k5){const r=t[n];if(!r)continue;const i=M1n(n,e);r.setWithExplicit("range",i)}}function c_e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Tu(t),o=e.getName(s);if(st(r)&&r.binned&&r.step!==void 0)return new Ds(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Hr(r)){const a=Vre(e,i,r);return new Ds(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function M1n(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of D1n)if(n[f]!==void 0){const d=tW(s,f),h=Uze(e,f);if(!d)Ue(wze(s,f,e));else if(h)Ue(h);else switch(f){case"range":{const p=n.range;if(Ie(p)){if(Wi(e))return Qf(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ds.fromName(y,g)}return m}))}else if(st(p))return Qf({data:t.requestDataName(zr.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Qf(p)}case"scheme":return Qf(F1n(n[f]))}}const o=e===pi||e==="xOffset"?"width":"height",a=r[o];if(ih(a)){if(Wi(e))if(Ws(s)){const f=GVe(a,t,e);if(f)return Qf({step:f})}else Ue(Eze(o));else if(pO(e)){const f=e===V0?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=YVe(a,s);if(p)return Qf(p)}}}const{rangeMin:u,rangeMax:l}=n,c=B1n(e,t);return(u!==void 0||l!==void 0)&&tW(s,"rangeMin")&&Ie(c)&&c.length===2?Qf([u??c[0],l??c[1]]):Lu(c)}function F1n(e){return Wpn(e)?{scheme:e.name,...hu(e,["name"])}:{scheme:e}}function WVe(e,t,n,{center:r}={}){const i=Tu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Xs&&hl(n)?r?[Ds.fromName(a=>`${o(a)}/2`,s),Ds.fromName(a=>`-${o(a)}/2`,s)]:[Ds.fromName(o,s),0]:r?[Ds.fromName(a=>`-${o(a)}/2`,s),Ds.fromName(a=>`${o(a)}/2`,s)]:[0,Ds.fromName(o,s)]}function B1n(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=vs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case pi:case Xs:{if($n(["point","band"],u)){const f=KVe(e,n,r.view);if(ih(f))return{step:GVe(f,t,e)}}return WVe(e,t,u)}case V0:case _x:return j1n(e,t,u);case am:{const f=t.component.scales[e].get("zero"),d=XVe(i,f,r),h=V1n(i,n,t,r);return lE(u)?U1n(d,h,z1n(u,r,l,e)):[d,h]}case bc:return[0,Math.PI*2];case Gv:return[0,360];case kf:return[0,new Ds(()=>{const f=t.getSignalName(nl(t.parent)?"child_width":"width"),d=t.getSignalName(nl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case W0:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case G0:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Su:return"symbol";case xu:case yh:case vh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case um:case H0:case q0:return[r.scale.minOpacity,r.scale.maxOpacity]}}function GVe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Une(n),o=r[s];if(RUe({step:e,offsetIsDiscrete:Qt(o)&&Lze(o.type)})==="offset"&&pUe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${hhn(f)})`}}else return e.step}function YVe(e,t){if(RUe({step:e,offsetIsDiscrete:Ws(t)})==="offset")return{step:e.step}}function j1n(e,t,n){const r=e===V0?"x":"y",i=t.getScaleComponent(r);if(!i)return WVe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=KVe(r,t.size,t.config.view);if(ih(l)){const c=YVe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ve(l)&&l.timeUnit){const c=$ze(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=v0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Tt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Tt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return U7e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function KVe(e,t,n){const r=e===pi?"width":"height",i=t[r];return i||yM(n,r)}function z1n(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ie(n)?n.length+1:(Ue(gpn(r)),3)}}function U1n(e,t,n){const r=()=>{const i=Zc(t),s=Zc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Tt(t)?new Ds(r):{signal:r()}}function XVe(e,t,n){if(t)return Tt(t)?{signal:`${t.signal} ? 0 : ${XVe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(R5("size",e))}const f_e=.95;function V1n(e,t,n,r){const i={x:c_e(n,"x"),y:c_e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=d_e(t,i,r.view);return Jn(s)?s-1:new Ds(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=d_e(t,i,r.view);return Jn(s)?Math.pow(f_e*s,2):new Ds(()=>`pow(${f_e} * ${s.signal}, 2)`)}}throw new Error(R5("size",e))}function d_e(e,t,n){const r=ih(e.width)?e.width.step:gM(n,"width"),i=ih(e.height)?e.height.step:gM(n,"height");return t.x||t.y?new Ds(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function QVe(e,t){$i(e)?H1n(e,t):ZVe(e,t)}function H1n(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ne(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=vs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=tW(h,t),y=Uze(a,t);if(d!==void 0&&(g?y&&Ue(y):Ue(wze(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":Xv(u[t])||_==="temporal"||v?l.set(t,{signal:H5(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in h_e?h_e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:mUe(i,a),hasSecondaryRangeChannel:!!i[_h(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const h_e={bins:({model:e,fieldOrDatumDef:t})=>Ve(t)?q1n(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>W1n(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>G1n(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Y1n(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>K1n(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>X1n(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ve(e)?e.sort:void 0;return Q1n(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>J1n(e,t,n,r,i,s.scale,o)};function JVe(e){$i(e)?L1n(e):ZVe(e,"range")}function ZVe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?JVe(r):QVe(r,t);for(const r of Ne(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=_0(i,a,t,"scale",WUe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function q1n(e,t){const n=t.bin;if(Hr(n)){const r=Vre(e,t.field,n);return new Ds(()=>e.getSignalName(r))}else if(oo(n)&&Kv(n)&&n.step!==void 0)return{step:n.step}}function W1n(e,t){if($n([xu,yh,vh],e)&&t!=="nominal")return"hcl"}function G1n(e,t,n,r,i,s){var o;if(!((o=rh(s))!=null&&o.bin||Ie(n)||i!=null||r!=null||$n([pu.TIME,pu.UTC],e)))return Wi(t)?!0:void 0}function Y1n(e,t,n,r,i,s){if(Wi(e)){if(ef(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ve(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===pu.POINT)return n.pointPadding}}function K1n(e,t,n,r,i,s=!1){if(e===void 0){if(Wi(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:qi(o,n==="bar"?a:u)}else if(pO(t)&&r===pu.BAND)return i.offsetBandPaddingInner}}function X1n(e,t,n,r,i,s=!1){if(e===void 0){if(Wi(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===pu.BAND)return qi(o,Tt(r)?{signal:`${r.signal}/2`}:r/2)}else if(pO(t)){if(n===pu.POINT)return .5;if(n===pu.BAND)return i.offsetBandPaddingOuter}}}function Q1n(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return hl(e)&&t==="descending"?Tt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(hl(e)&&t==="descending")return!0}function J1n(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&hl(i)){if(Ie(n)){const u=n[0],l=n[n.length-1];if(Jn(u)&&u<=0&&Jn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!lE(i))return!0;if(!(Ve(t)&&t.bin)&&$n([...bh,...Kdn],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Z1n(e,t,n,r,i=!1){const s=evn(t,n,r,i),{type:o}=e;return lm(t)?o!==void 0?Zpn(t,o)?Ve(n)&&!Jpn(o,n.type)?(Ue(epn(o,s)),s):o:(Ue(Zhn(t,o,s)),s):s:null}function evn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Xb(e)||d7(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ue(h7(e,"ordinal")),"ordinal";if(Wi(e)||pO(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in qne)return"band";const s=n[Tu(e)];return fv(s)||fE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Xb(e)?"time":d7(e)==="discrete"?(Ue(h7(e,"temporal")),"ordinal"):Ve(t)&&t.timeUnit&&Hs(t.timeUnit).utc?"utc":"time";case"quantitative":return Xb(e)?Ve(t)&&Hr(t.bin)?"bin-ordinal":"linear":d7(e)==="discrete"?(Ue(h7(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(_ze(t.type))}function tvn(e,{ignoreRange:t}={}){eHe(e),VVe(e);for(const n of Qpn)QVe(e,n);t||JVe(e)}function eHe(e){$i(e)?e.component.scales=nvn(e):e.component.scales=ivn(e)}function nvn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of k5){const o=vs(t[s]);if(o&&n===qze&&s===Su&&o.type===bx)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=mUe(t,s),l=Z1n(a,s,o,r,u);i[s]=new qVe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const rvn=WUe((e,t)=>_ve(e)-_ve(t));function ivn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){eHe(s);for(const o of Ne(s.component.scales))if((t=i.scale)[o]??(t[o]=PVe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?zpn(a.value,u.value)?r[o]=_0(a,u,"type","scale",rvn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ne(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new qVe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class E7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $i(e){return(e==null?void 0:e.type)==="unit"}function nl(e){return(e==null?void 0:e.type)==="facet"}function Yre(e){return(e==null?void 0:e.type)==="concat"}function Tx(e){return(e==null?void 0:e.type)==="layer"}class Kre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=eu(a),this.name=t.name??i,this.title=Lm(t.title)?{text:t.title}:t.title?eu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new E7,this.projectionNameMap=r?r.projectionNameMap:new E7,this.signalNameMap=r?r.signalNameMap:new E7,this.data=t.data,this.description=t.description,this.transforms=f0n(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:mgn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:j5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new fm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qt(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){tvn(this)}parseProjection(){jVe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){DVe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ne(r)){const o=r[s];o!==void 0&&(i[s]=Jr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Jr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Or(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Tyn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ql)t[r].title&&n.push(_yn(this,r));for(const r of Bre)n=n.concat(byn(this,r));return n}assembleAxes(){return oyn(this.component.axes,this.config)}assembleLegends(){return MVe(this)}assembleProjections(){return Yyn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...cze(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Or(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||nl(this.parent)?HVe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return hi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zr[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(nl(this.parent)){const n=IVe(t),r=P5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ws(s)&&K0(o)){const a=i.get("name"),u=n8(this,r),l=Gre(u);if(l){const c=Je({aggregate:"distinct",field:l},{expr:"datum"});return{signal:CVe(a,i,c)}}else return Ue(Yne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(tze(t)&&lm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(vhn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class tHe extends Kre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Je(r,n)}reduceFieldDef(t,n){return Hmn(this.getMapping(),(r,i,s)=>{const o=rh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){wre(this.getMapping(),(r,i)=>{const s=rh(r);s&&t(s,i)},n)}}class r8 extends Sr{clone(){return new r8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${kn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class i8 extends Sr{clone(){return new i8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${kn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class _C extends Sr{clone(){return new _C(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(fr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=lm(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");hl(d)&&l.aggregate!=="count"&&!X0(i)&&(u[l.field]=l)}return u},{});return Ne(a).length?new _C(t,a):null}dependentFields(){return new Set(Ne(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${kn(this.filter)}`}assemble(){const t=Ne(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Je(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class s8 extends Sr{clone(){return new s8(this.parent,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${kn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class o8 extends Sr{clone(){return new o8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${kn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Zb extends Sr{clone(){return new Zb(null,qt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Rf,$f],[ac,Nf]]){const s=i.map(o=>{const a=vs(n.encoding[o]);return Ve(a)?a.field:wh(a)?{expr:`${a.datum}`}:_f(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Zb(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Su)){const i=n.typedFieldDef(Su);i.type===bx&&(t=new Zb(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(rt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${kn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class bC extends Sr{clone(){return new bC(null,this.projection,qt(this.fields),qt(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Rf,$f],[ac,Nf]]){const i=r.map(o=>{const a=vs(n.encoding[o]);return Ve(a)?a.field:wh(a)?{expr:`${a.datum}`}:_f(a)?{expr:`${a.value}`}:void 0}),s=r[0]===ac?"2":"";(i[0]||i[1])&&(t=new bC(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(rt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${kn(this.fields)} ${kn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class T1 extends Sr{clone(){return new T1(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new T1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ve(i)&&Ve(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=yUe(n.mark,r);return new T1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${kn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Wgn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class a8 extends Sr{clone(){return new a8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${kn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class wC extends Sr{clone(){return new wC(null,qt(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Ggn(o)){let u=iHe(o.data,s);u||(u=new mv(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ta(u,l,zr.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Ygn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(hi(u),u)}catch{throw new Error(Ehn(u))}if(a=l.materialized,!a)throw new Error(xhn(u))}return new wC(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${kn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:nt(this.transform.as)}:{}};else{let n=this.transform.as;rt(n)||(Ue(khn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class u8 extends Sr{clone(){return new u8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${kn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class l8 extends Sr{clone(){return new l8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${kn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class c8 extends Sr{clone(){return new c8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=bd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${kn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class f8 extends Sr{clone(){return new f8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${kn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function nHe(e){let t=0;function n(r,i){if(r instanceof mv&&!r.isGenerator&&!hE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof qo&&(r.parent instanceof mv&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof xx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof xO||r instanceof SO||r instanceof _C||r instanceof Ex||r instanceof mE||r instanceof bC||r instanceof cf||r instanceof wC||r instanceof Sx||r instanceof e_||r instanceof o8||r instanceof s8||r instanceof r8||r instanceof a8||r instanceof u8||r instanceof l8||r instanceof E0||r instanceof f8||r instanceof c8||r instanceof i8)&&i.transform.push(r.assemble()),(r instanceof Bd||r instanceof Fd||r instanceof T1||r instanceof bp||r instanceof Zb)&&i.transform.push(...r.assemble()),r instanceof Ta&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ta?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ta&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function svn(e){const t=[],n=nHe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ovn(e,t){const n=[],r=nHe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function avn(e){return e==="top"||e==="left"||Tt(e)?"header":"footer"}function uvn(e){for(const t of ql)lvn(e,t);p_e(e,"x"),p_e(e,"y")}function lvn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=yE("title",null,r,t);let l=Qb(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ie(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=yE("labelOrient",a.header,r,t),f=a.header!==null?qi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[rHe(e,t,f)]}}}function rHe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function p_e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Ure(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=avn(a.get("orient"));o[u]??(o[u]=[rHe(e,s,!1)]);const l=xT(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function cvn(e){Xre(e),wM(e,"width"),wM(e,"height")}function fvn(e){Xre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";wM(e,t),wM(e,n)}function Xre(e){for(const t of e.children)t.parseLayoutSize()}function wM(e,t){const n=IVe(t),r=P5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??PVe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=_0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function dvn(e){const{size:t,component:n}=e;for(const r of bh){const i=Tu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,ih(s)?"step":s,!0)}else{const s=hvn(e,i);n.layoutSize.set(i,s,!1)}}}function hvn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ws(s)){const a=yM(r.view,t);return K0(o)||ih(a)?"step":a}else return iW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return iW(r.view,t);{const s=yM(r.view,t);return ih(s)?s.step:s}}}function vW(e,t,n){return Je(t,{suffix:`by_${Je(e)}`,...n})}class C2 extends tHe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=tie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!vO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ne(t),r={};for(const i of n){if(![yp,vp].includes(i)){Ue(R5(i,"facet"));break}const s=t[i];if(s.field===void 0){Ue(Zq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=_re(t,n);return r.header?r.header=eu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=d8(this),this.child.parseData()}parseLayoutSize(){Xre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),uvn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ql)for(const r of jre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=yE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=e8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof C2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof C2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Je(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof C2){if(this.child.channelHasField("column")){const i=Je(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of bh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ws(o)&&K0(a)){const u=n8(this.child,i),l=Gre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ue(Yne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of ql){const f=this.facet[c];if(f){u.push(Je(f));const{bin:d,sort:h}=f;if(Hr(d)&&u.push(Je(f,{binSuffix:"end"})),Md(h)){const{field:p,op:m=B5}=h,g=vW(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ie(h)){const p=gE(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Md(r.sort)?[vW(r,r.sort,{expr:"datum"})]:Ie(r.sort)?[gE(r,t,{expr:"datum"})]:[Je(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Md(i)?i.order:!Ie(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return dW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Bre)if(t[s]){const o=yE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return dW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=svn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:ql.map(u=>this.facetSortFields(u)).flat(),order:ql.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(S0n(this,[]))}]}getMapping(){return this.facet}}function pvn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Md(s.sort)){const{field:o,op:a=B5}=s.sort;e=i=new e_(e,{joinaggregate:[{op:a,field:o,as:vW(s,s.sort,{forAs:!0})}],groupby:[Je(s)]})}return i}return null}function iHe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(vC(e)&&vC(a)){if(Qu(e.values,a.values))return o}else if(hE(e)&&hE(a)){if(e.url===a.url)return o}else if(GUe(e)&&e.name===o.dataName)return o}}return null}function mvn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new mv({values:[]});return t.push(r),r}const n=iHe(e.data,t);if(n)return Lg(e.data)||(n.data.format=V7e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new mv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function gvn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(i0n(i))o=e=new mE(e,i),s="derived";else if($re(i)){const a=a1n(i);o=e=qo.makeWithAncestors(e,{},a,n)??e,e=new Ex(e,t,i.filter)}else if(UUe(i))o=e=Bd.makeFromTransform(e,i,t),s="number";else if(o0n(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new qo(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Fd.makeFromTransform(e,i);else if(a0n(i))o=e=cf.makeFromTransform(e,i),s="number",Fre(t)&&(e=new E0(e));else if(zUe(i))o=e=wC.make(e,t,i,r++),s="derived";else if(t0n(i))o=e=new Sx(e,i),s="number";else if(n0n(i))o=e=new e_(e,i),s="number";else if(u0n(i))o=e=bp.makeFromTransform(e,i),s="derived";else if(l0n(i))o=e=new o8(e,i),s="derived";else if(c0n(i))o=e=new i8(e,i),s="derived";else if(r0n(i))o=e=new s8(e,i),s="derived";else if(Kgn(i))o=e=new c8(e,i),s="derived";else if(e0n(i))e=new f8(e,i);else if(s0n(i))o=e=T1.makeFromTransform(e,i),s="derived";else if(Xgn(i))o=e=new r8(e,i),s="derived";else if(Qgn(i))o=e=new u8(e,i),s="derived";else if(Jgn(i))o=e=new l8(e,i),s="derived";else if(Zgn(i))o=e=new a8(e,i),s="derived";else{Ue(Phn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function d8(e){var m;let t=mvn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Lg(i)||hE(i)||vC(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new E0n;Lg(i)?(YUe(i)?t=new SO(t,i.sequence):Rre(i)&&(t=new xO(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=qo.makeExplicit(t,e,o)??t,t=new E0(t);const a=e.parent&&Tx(e.parent);($i(e)||nl(e))&&a&&(t=Bd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=gvn(t,e,o));const u=l1n(e),l=u1n(e);t=qo.makeWithAncestors(t,{},{...u,...l},o)??t,$i(e)&&(t=Zb.parseAll(t,e),t=bC.parseAll(t,e)),($i(e)||nl(e))&&(a||(t=Bd.makeFromEncoding(t,e)??t),t=Fd.makeFromEncoding(t,e)??t,t=mE.parseAllForSortIndex(t,e));const c=e.getDataName(zr.Raw),f=new Ta(t,c,zr.Raw,r);if(n[c]=f,t=f,$i(e)){const g=cf.makeFromEncoding(t,e);g&&(t=g,Fre(e)&&(t=new E0(t))),t=T1.makeFromEncoding(t,e)??t,t=bp.makeFromEncoding(t,e)??t}$i(e)&&(t=_C.make(t,e)??t);const d=e.getDataName(zr.Main),h=new Ta(t,d,zr.Main,r);n[d]=h,t=h,$i(e)&&iyn(e,h);let p=null;if(nl(e)){const g=e.getName("facet");t=pvn(t,e.facet)??t,p=new xx(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class yvn extends Kre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ue(Chn),this.children=this.getChildren(t).map((l,c)=>tie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=d8(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return G5(t)?t.vconcat:Pre(t)?t.hconcat:t.concat}parseLayoutSize(){fvn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=zre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function vvn(e){return e===!1||e===null}const _vn={disable:1,gridScale:1,scale:1,...dUe,labelExpr:1,encode:1},sHe=Ne(_vn);class Qre extends fm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Qre(qt(this.explicit),qt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!vvn(this.get(t))}hasOrientSignalRef(){return Tt(this.explicit.orient)}}function bvn(e,t,n){const{encoding:r,config:i}=e,s=vs(r[t])??vs(r[_h(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(dv(u))return{text:tf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(cE(s)==="quantitative"){if(fE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:tf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:tf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(cE(s)==="temporal"&&i.timeFormatType&&Ve(s)&&!s.timeUnit)return{text:tf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function wvn(e){return bh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Ivn(n,e)]),t),{})}const Evn={bottom:"top",top:"bottom",left:"right",right:"left"};function xvn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ne(i.component.axes))n.axis[s]=Ure(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Svn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of bh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Tt(a)){if(r[a]>0&&!u){const l=Evn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Svn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Tvn(i,s)}}}else return t.map(n=>n.clone());return e}function Tvn(e,t){for(const n of sHe){const r=_0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return yze(i,s);case"gridScale":return{explicit:i.explicit,value:qi(i.value,s.value)}}return K5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Avn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Tt(n.labelAngle)?n.labelAngle:gC(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===xVe(r,i))return!0}return e===n[t]}const Cvn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Ivn(e,t){var y,v;let n=t.axis(e);const r=new Qre,i=vs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||pyn(e),u=t.getScaleComponent(e).get("type"),l=ayn(e,u,a,t.config),c=n!==void 0?!n:cW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=fyn(i,n,e,o.style,l),d=Qze(n.formatType,i,u),h=Xze(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of sHe){const b=_ in Zve?Zve[_](p):Ave(_)?n[_]:void 0,E=b!==void 0,w=Avn(b,_,n,t,e);if(E&&w)r.set(_,b,w);else{const{configValue:x=void 0,configFrom:S=void 0}=Ave(_)&&_!=="values"?cW(_,o.style,n.style,l):{},I=x!==void 0;E&&!I?r.set(_,b,w):(S!=="vgAxisConfig"||Cvn.has(_)&&I||wO(x)||Tt(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=fUe.reduce((_,b)=>{if(!r.hasAxisPart(b))return _;const E=OVe(m[b]??{},t),w=b==="labels"?bvn(t,e,E):E;return w!==void 0&&!Or(w)&&(_[b]={update:w}),_},{});return Or(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Ovn({encoding:e,size:t}){for(const n of bh){const r=Tu(n);ih(t[r])&&lg(e[n])&&(delete t[r],Ue(Eze(r)))}return t}const Pvn={vgMark:"arc",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ho("x",e,{defaultPos:"mid"}),...Ho("y",e,{defaultPos:"mid"}),...b0(e,"radius"),...b0(e,"theta")})},kvn={vgMark:"area",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...vM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...vM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Mre(e)})},$vn={vgMark:"rect",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...b0(e,"x"),...b0(e,"y")})},Rvn={vgMark:"shape",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ve(n)&&n.type===bx?{field:Je(n,{expr:"datum"})}:{}}]}},Nvn={vgMark:"image",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...b0(e,"x"),...b0(e,"y"),...Dre(e,"url")})},Dvn={vgMark:"line",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ho("x",e,{defaultPos:"mid"}),...Ho("y",e,{defaultPos:"mid"}),...Ms("size",e,{vgChannel:"strokeWidth"}),...Mre(e)})},Lvn={vgMark:"trail",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ho("x",e,{defaultPos:"mid"}),...Ho("y",e,{defaultPos:"mid"}),...Ms("size",e),...Mre(e)})};function Jre(e,t){const{config:n}=e;return{...wc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ho("x",e,{defaultPos:"mid"}),...Ho("y",e,{defaultPos:"mid"}),...Ms("size",e),...Ms("angle",e),...Mvn(e,n,t)}}function Mvn(e,t,n){return n?{shape:{value:n}}:Ms("shape",e)}const Fvn={vgMark:"symbol",encodeEntry:e=>Jre(e)},Bvn={vgMark:"symbol",encodeEntry:e=>Jre(e,"circle")},jvn={vgMark:"symbol",encodeEntry:e=>Jre(e,"square")},zvn={vgMark:"rect",encodeEntry:e=>({...wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...b0(e,"x"),...b0(e,"y")})},Uvn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...vM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...vM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ms("size",e,{vgChannel:"strokeWidth"})}}},Vvn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...wc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ho("x",e,{defaultPos:"mid"}),...Ho("y",e,{defaultPos:"mid"}),...Dre(e),...Ms("size",e,{vgChannel:"fontSize"}),...Ms("angle",e),...Kve("align",Hvn(e.markDef,n,t)),...Kve("baseline",qvn(e.markDef,n,t)),...Ho("radius",e,{defaultPos:null}),...Ho("theta",e,{defaultPos:null})}}};function Hvn(e,t,n){if(fr("align",e,n)===void 0)return"center"}function qvn(e,t,n){if(fr("baseline",e,n)===void 0)return"middle"}const Wvn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...wc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ho("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Ho("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Ms("size",e,{defaultValue:Gvn(e),vgChannel:i}),[s]:Jr(fr("thickness",n,t))}}};function Gvn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=fr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&K0(a)&&Jn(a.step)?a.step*3/4:gM(t.view,i)*3/4}}const wk={arc:Pvn,area:kvn,bar:$vn,circle:Bvn,geoshape:Rvn,image:Nvn,line:Dvn,point:Fvn,rect:zvn,rule:Uvn,square:jvn,text:Vvn,tick:Wvn,trail:Lvn};function Yvn(e){if($n([M5,D5,nmn],e.mark)){const t=yUe(e.mark,e.encoding);if(t.length>0)return Kvn(e,t)}else if(e.mark===L5){const t=Jq.some(n=>fr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Xvn(e)}return Zre(e)}const m_e="faceted_path_";function Kvn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:m_e+e.requestDataName(zr.Main),data:e.requestDataName(zr.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Zre(e,{fromPrefix:m_e})}]}const g_e="stack_group_";function Xvn(e){var l;const[t]=Zre(e,{fromPrefix:g_e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...iE(t.encode.update,["y","yc","y2","height",...Jq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...hu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...iE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...hu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of Jq){const f=Wp(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Jr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Je(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Je(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Wp(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Jr(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zr.Main),name:g_e+e.requestDataName(zr.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Qvn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ie(o)&&_f(o)&&Xq(o.value)||!o&&Xq(fr("order",i,s)))){if((Ie(o)||Ve(o))&&!n)return pze(o,{expr:"datum"});if(X0(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ve(l)){const c=l.sort;if(Ie(c))return{field:Je(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Md(c))return{field:Je({aggregate:bre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Zze(c)){const f=e.fieldDef(c.encoding);return{field:Je(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Je(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Zre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=qi(r.clip,Jvn(e),Zvn(e)),a=dze(r),u=i.key,l=Qvn(e),c=e_n(e),f=fr("aria",r,s),d=wk[n].postEncodingTransform?wk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:wk[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(zr.Main)},encode:{update:wk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Jvn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Zvn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function e_n(e){if(!e.component.selection)return null;const t=Ne(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ne(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class oHe extends tHe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Ive(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=nh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Fgn(o,s,{graticule:t.data&&Rre(t.data)}));const u=this.encoding=Umn(t.encoding||{},a,o.filled,s);this.markDef=FUe(o,u,s),this.size=Ovn({encoding:u,size:Ive(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=MUe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Ire(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===qze,r=t&&jdn.some(i=>Qt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return k5.reduce((r,i)=>{const s=vs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=eu(t);return Ie(n)&&(i.domain=n.map(qu)),Ie(r)&&(i.range=r.map(qu)),i}initAxes(t){return bh.reduce((n,r)=>{const i=t[r];if(Qt(i)||r===pi&&Qt(t.x2)||r===Xs&&Qt(t.y2)){const s=Qt(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ne(t),r={};for(const i of n){const s=t[i];r[i]=wO(s)?fze(s):qu(s)}return r}initLegends(t){return Xdn.reduce((n,r)=>{const i=vs(t[r]);if(i&&Jdn(r)){const s=i.legend;n[r]=s&&eu(s)}return n},{})}parseData(){this.component.data=d8(this)}parseLayoutSize(){dvn(this)}parseSelections(){this.component.selection=ryn(this,this.selection)}parseMarkGroup(){this.component.mark=Yvn(this)}parseAxesAndHeaders(){this.component.axes=wvn(this)}assembleSelectionTopLevelSignals(t){return T0n(this,t)}assembleSignals(){return[...bVe(this),...x0n(this,[])]}assembleSelectionData(t){return A0n(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return zre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Tx(this.parent))&&(t=QUe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return x1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return rh(n)}typedFieldDef(t){const n=this.fieldDef(t);return $a(n)?n:null}}class eie extends Kre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(Y5(a))return new eie(a,this,this.getName(`layer_${u}`),o,s);if(cm(a))return new oHe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Gne(a))})}parseData(){this.component.data=d8(this);for(const t of this.children)t.parseData()}parseLayoutSize(){cvn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){xvn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),bVe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),zre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return C0n(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),MVe(this))}}function tie(e,t,n,r,i){if(j5(e))return new C2(e,t,n,i);if(Y5(e))return new eie(e,t,n,r,i);if(cm(e))return new oHe(e,t,n,r,i);if(dgn(e))return new yvn(e,t,n,i);throw new Error(Gne(e))}function t_n(e,t={}){t.logger&&ypn(t.logger),t.fieldTitle&&uUe(t.fieldTitle);try{const n=LUe(ax(t.config,e.config)),r=qUe(e,n),i=tie(r,null,"",void 0,n);return i.parse(),T1n(i.component.data,i),{spec:r_n(i,n_n(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&vpn(),t.fieldTitle&&Rmn()}}function n_n(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):rt(t)&&(t={type:t}),i&&s&&_0n(t.type)){if(i==="step"&&s==="step")Ue(dve()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ue(dve(P5(o)));const a=o==="width"?"height":"width";t.type=b0n(a)}}return{...Ne(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...jve(n,!1),...jve(e,!0)}}function r_n(e,t,n={},r){const i=e.config?Agn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),ovn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...$Ue(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const i_n=Ndn.version,s_n=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:sE,accessPathWithDatum:Mne,compile:t_n,contains:$n,deepEqual:Qu,deleteNestedProperty:oM,duplicate:qt,entries:g0,every:Nne,fieldIntersection:Lne,flatAccessWithDatum:q7e,getFirstDefined:qi,hasIntersection:Dne,hash:kn,internalField:Y7e,isBoolean:mC,isEmpty:Or,isEqual:Ldn,isInternalField:K7e,isNullOrFalse:Xq,isNumeric:S5,keys:Ne,logicalExpr:T2,mergeDeep:V7e,never:U7e,normalize:qUe,normalizeAngle:gC,omit:hu,pick:iE,prefixGenerator:Qq,removePathFromField:Fne,replaceAll:av,replacePathInField:oc,resetIdCounter:Fdn,setEqual:H7e,some:ov,stringify:Pr,titleCase:fO,unique:bd,uniqueId:G7e,vals:_o,varName:hi,version:i_n},Symbol.toStringTag,{value:"Module"}));function aHe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var o_n="vega-themes",a_n="2.14.0",u_n="Themes for stylized Vega and Vega-Lite visualizations.",l_n=["vega","vega-lite","themes","style"],c_n="BSD-3-Clause",f_n={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},d_n=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],h_n="build/vega-themes.js",nie="build/vega-themes.module.js",p_n="build/vega-themes.min.js",m_n="build/vega-themes.min.js",g_n="build/vega-themes.module.d.ts",y_n={type:"git",url:"https://github.com/vega/vega-themes.git"},v_n=["src","build"],__n={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},b_n={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},w_n={vega:"*","vega-lite":"*"},E_n={},x_n={name:o_n,version:a_n,description:u_n,keywords:l_n,license:c_n,author:f_n,contributors:d_n,main:h_n,module:nie,unpkg:p_n,jsdelivr:m_n,types:g_n,repository:y_n,files:v_n,scripts:__n,devDependencies:b_n,peerDependencies:w_n,dependencies:E_n};const A_="#fff",y_e="#888",S_n={background:"#333",view:{stroke:y_e},title:{color:A_,subtitleColor:A_},style:{"guide-label":{fill:A_},"guide-title":{fill:A_}},axis:{domainColor:A_,gridColor:y_e,tickColor:A_}},sy="#4572a7",T_n={background:"#fff",arc:{fill:sy},area:{fill:sy},line:{stroke:sy,strokeWidth:2},path:{stroke:sy},rect:{fill:sy},shape:{stroke:sy},symbol:{fill:sy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},oy="#30a2da",x7="#cbcbcb",A_n="#999",C_n="#333",v_e="#f0f0f0",__e="#333",I_n={arc:{fill:oy},area:{fill:oy},axis:{domainColor:x7,grid:!0,gridColor:x7,gridWidth:1,labelColor:A_n,labelFontSize:10,titleColor:C_n,tickColor:x7,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:v_e,group:{fill:v_e},legend:{labelColor:__e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:__e,titleFontSize:14,titlePadding:10},line:{stroke:oy,strokeWidth:2},path:{stroke:oy,strokeWidth:.5},rect:{fill:oy},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:oy},bar:{binSpacing:2,fill:oy,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ay="#000",O_n={group:{fill:"#e5e5e5"},arc:{fill:ay},area:{fill:ay},line:{stroke:ay},path:{stroke:ay},rect:{fill:ay},shape:{stroke:ay},symbol:{fill:ay,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},P_n=22,k_n="normal",b_e="Benton Gothic, sans-serif",w_e=11.5,$_n="normal",uy="#82c6df",S7="Benton Gothic Bold, sans-serif",E_e="normal",x_e=13,kS={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},R_n={background:"#ffffff",title:{anchor:"start",color:"#000000",font:S7,fontSize:P_n,fontWeight:k_n},arc:{fill:uy},area:{fill:uy},line:{stroke:uy,strokeWidth:2},path:{stroke:uy},rect:{fill:uy},shape:{stroke:uy},symbol:{fill:uy,size:30},axis:{labelFont:b_e,labelFontSize:w_e,labelFontWeight:$_n,titleFont:S7,titleFontSize:x_e,titleFontWeight:E_e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:b_e,labelFontSize:w_e,symbolType:"square",titleFont:S7,titleFontSize:x_e,titleFontWeight:E_e},range:{category:kS["category-6"],diverging:kS["fireandice-6"],heatmap:kS["fire-7"],ordinal:kS["fire-7"],ramp:kS["fire-7"]}},ly="#ab5787",Ek="#979797",N_n={background:"#f9f9f9",arc:{fill:ly},area:{fill:ly},line:{stroke:ly},path:{stroke:ly},rect:{fill:ly},shape:{stroke:ly},symbol:{fill:ly,size:30},axis:{domainColor:Ek,domainWidth:.5,gridWidth:.2,labelColor:Ek,tickColor:Ek,tickWidth:.2,titleColor:Ek},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},cy="#3e5c69",D_n={background:"#fff",arc:{fill:cy},area:{fill:cy},line:{stroke:cy},path:{stroke:cy},rect:{fill:cy},shape:{stroke:cy},symbol:{fill:cy},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Al="#1696d2",S_e="#000000",L_n="#FFFFFF",xk="Lato",T7="Lato",M_n="Lato",F_n="#DEDDDD",B_n=18,$S={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},j_n={background:L_n,title:{anchor:"start",fontSize:B_n,font:xk},axisX:{domain:!0,domainColor:S_e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:T7,labelAngle:0,tickColor:S_e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:xk},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:F_n,gridWidth:1,labelFontSize:12,labelFont:T7,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:xk,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:T7,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:xk,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$S["six-groups-cat-1"],diverging:$S["diverging-colors"],heatmap:$S["diverging-colors"],ordinal:$S["six-groups-seq"],ramp:$S["shades-blue"]},area:{fill:Al},rect:{fill:Al},line:{color:Al,stroke:Al,strokeWidth:5},trail:{color:Al,stroke:Al,strokeWidth:0,size:1},path:{stroke:Al,strokeWidth:.5},point:{filled:!0},text:{font:M_n,color:Al,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Al,stroke:null}},arc:{fill:Al},shape:{stroke:Al},symbol:{fill:Al,size:30}},fy="#3366CC",T_e="#ccc",Sk="Arial, sans-serif",z_n={arc:{fill:fy},area:{fill:fy},path:{stroke:fy},rect:{fill:fy},shape:{stroke:fy},symbol:{stroke:fy},circle:{fill:fy},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Sk,fontSize:12},"guide-title":{font:Sk,fontSize:12},"group-title":{font:Sk,fontSize:12}},title:{font:Sk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:T_e,tickColor:T_e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},rie=e=>e*(1/3+1),A_e=rie(9),C_e=rie(10),I_e=rie(12),RS="Segoe UI",O_e="wf_standard-font, helvetica, arial, sans-serif",P_e="#252423",NS="#605E5C",k_e="transparent",U_n="#C8C6C4",kc="#118DFF",V_n="#12239E",H_n="#E66C37",q_n="#6B007B",W_n="#E044A7",G_n="#744EC2",Y_n="#D9B300",K_n="#D64550",uHe=kc,lHe="#DEEFFF",$_e=[lHe,uHe],X_n=[lHe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",uHe],Q_n={view:{stroke:k_e},background:k_e,font:RS,header:{titleFont:O_e,titleFontSize:I_e,titleColor:P_e,labelFont:RS,labelFontSize:C_e,labelColor:NS},axis:{ticks:!1,grid:!1,domain:!1,labelColor:NS,labelFontSize:A_e,titleFont:O_e,titleColor:P_e,titleFontSize:I_e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:U_n,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:kc},line:{stroke:kc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:RS,fontSize:A_e,fill:NS},arc:{fill:kc},area:{fill:kc,line:!0,opacity:.6},path:{stroke:kc},rect:{fill:kc},point:{fill:kc,filled:!0,size:75},shape:{stroke:kc},symbol:{fill:kc,strokeWidth:1.5,size:50},legend:{titleFont:RS,titleFontWeight:"bold",titleColor:NS,labelFont:RS,labelFontSize:C_e,labelColor:NS,symbolType:"circle",symbolSize:75},range:{category:[kc,V_n,H_n,q_n,W_n,G_n,Y_n,K_n],diverging:$_e,heatmap:$_e,ordinal:X_n}},A7='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',R_e=400,J_n=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Z_n=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function h8({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?J_n:Z_n,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:A7,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:A7,fill:r,fontWeight:R_e},"guide-title":{font:A7,fill:r,fontWeight:R_e}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const ebn=h8({type:"light",background:"#ffffff"}),tbn=h8({type:"light",background:"#f4f4f4"}),nbn=h8({type:"dark",background:"#262626"}),rbn=h8({type:"dark",background:"#161616"}),ibn=x_n.version,sbn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:tbn,carbong100:rbn,carbong90:nbn,carbonwhite:ebn,dark:S_n,excel:T_n,fivethirtyeight:I_n,ggplot2:O_n,googlecharts:z_n,latimes:R_n,powerbi:Q_n,quartz:N_n,urbaninstitute:j_n,version:ibn,vox:D_n},Symbol.toStringTag,{value:"Module"}));function obn(e,t,n,r){if(Ie(e))return`[${e.map(i=>t(rt(i)?i:N_e(i,n))).join(", ")}]`;if(st(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(st(c)&&(c=N_e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function abn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function N_e(e,t){return JSON.stringify(e,abn(t))}var ubn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const cHe="vg-tooltip-element",lbn={offsetX:10,offsetY:10,id:cHe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:cbn,maxDepth:2,formatTooltip:obn,baseURL:""};function cbn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function fbn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return ubn.toString().replace(cHe,e)}function dbn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class hbn{constructor(t){this.options={...lbn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=fbn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=dbn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var C7={};function pbn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I7,D_e;function mbn(){return D_e||(D_e=1,I7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),I7}var gbn=ar;ar.Node=gv;ar.create=ar;function ar(e){var t=this;if(t instanceof ar||(t=new ar),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ar.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ar.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ar.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ar.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)vbn(this,arguments[e]);return this.length};ar.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)_bn(this,arguments[e]);return this.length};ar.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ar.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ar.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ar.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ar.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ar.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ar.prototype.map=function(e,t){t=t||this;for(var n=new ar,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ar.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ar,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ar.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ar.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ar.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ar.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ar.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ar.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ar.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=ybn(this,i,n[r]);return s};ar.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function ybn(e,t,n){var r=t===e.head?new gv(n,null,t,e):new gv(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function vbn(e,t){e.tail=new gv(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _bn(e,t){e.head=new gv(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function gv(e,t,n,r){if(!(this instanceof gv))return new gv(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{mbn()(ar)}catch{}const bbn=gbn,My=Symbol("max"),Bh=Symbol("length"),C_=Symbol("lengthCalculator"),I2=Symbol("allowStale"),s1=Symbol("maxAge"),Nh=Symbol("dispose"),L_e=Symbol("noDisposeOnSet"),ks=Symbol("lruList"),$c=Symbol("cache"),fHe=Symbol("updateAgeOnGet"),O7=()=>1;class wbn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[My]=t.max||1/0;const n=t.length||O7;if(this[C_]=typeof n!="function"?O7:n,this[I2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[s1]=t.maxAge||0,this[Nh]=t.dispose,this[L_e]=t.noDisposeOnSet||!1,this[fHe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[My]=t||1/0,DS(this)}get max(){return this[My]}set allowStale(t){this[I2]=!!t}get allowStale(){return this[I2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[s1]=t,DS(this)}get maxAge(){return this[s1]}set lengthCalculator(t){typeof t!="function"&&(t=O7),t!==this[C_]&&(this[C_]=t,this[Bh]=0,this[ks].forEach(n=>{n.length=this[C_](n.value,n.key),this[Bh]+=n.length})),DS(this)}get lengthCalculator(){return this[C_]}get length(){return this[Bh]}get itemCount(){return this[ks].length}rforEach(t,n){n=n||this;for(let r=this[ks].tail;r!==null;){const i=r.prev;M_e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[ks].head;r!==null;){const i=r.next;M_e(this,t,r,n),r=i}}keys(){return this[ks].toArray().map(t=>t.key)}values(){return this[ks].toArray().map(t=>t.value)}reset(){this[Nh]&&this[ks]&&this[ks].length&&this[ks].forEach(t=>this[Nh](t.key,t.value)),this[$c]=new Map,this[ks]=new bbn,this[Bh]=0}dump(){return this[ks].map(t=>EM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ks]}set(t,n,r){if(r=r||this[s1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[C_](n,t);if(this[$c].has(t)){if(s>this[My])return ew(this,this[$c].get(t)),!1;const u=this[$c].get(t).value;return this[Nh]&&(this[L_e]||this[Nh](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Bh]+=s-u.length,u.length=s,this.get(t),DS(this),!0}const o=new Ebn(t,n,s,i,r);return o.length>this[My]?(this[Nh]&&this[Nh](t,n),!1):(this[Bh]+=o.length,this[ks].unshift(o),this[$c].set(t,this[ks].head),DS(this),!0)}has(t){if(!this[$c].has(t))return!1;const n=this[$c].get(t).value;return!EM(this,n)}get(t){return P7(this,t,!0)}peek(t){return P7(this,t,!1)}pop(){const t=this[ks].tail;return t?(ew(this,t),t.value):null}del(t){ew(this,this[$c].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[$c].forEach((t,n)=>P7(this,n,!1))}}const P7=(e,t,n)=>{const r=e[$c].get(t);if(r){const i=r.value;if(EM(e,i)){if(ew(e,r),!e[I2])return}else n&&(e[fHe]&&(r.value.now=Date.now()),e[ks].unshiftNode(r));return i.value}},EM=(e,t)=>{if(!t||!t.maxAge&&!e[s1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[s1]&&n>e[s1]},DS=e=>{if(e[Bh]>e[My])for(let t=e[ks].tail;e[Bh]>e[My]&&t!==null;){const n=t.prev;ew(e,t),t=n}},ew=(e,t)=>{if(t){const n=t.value;e[Nh]&&e[Nh](n.key,n.value),e[Bh]-=n.length,e[$c].delete(n.key),e[ks].removeNode(t)}};class Ebn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const M_e=(e,t,n,r)=>{let i=n.value;EM(e,i)&&(ew(e,n),e[I2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var xbn=wbn;const Sbn=Object.freeze({loose:!0}),Tbn=Object.freeze({}),Abn=e=>e?typeof e!="object"?Sbn:e:Tbn;var iie=Abn,_W={exports:{}};const Cbn="2.0.0",dHe=256,Ibn=Number.MAX_SAFE_INTEGER||9007199254740991,Obn=16,Pbn=dHe-6,kbn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var sie={MAX_LENGTH:dHe,MAX_SAFE_COMPONENT_LENGTH:Obn,MAX_SAFE_BUILD_LENGTH:Pbn,MAX_SAFE_INTEGER:Ibn,RELEASE_TYPES:kbn,SEMVER_SPEC_VERSION:Cbn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const $bn=typeof process=="object"&&C7&&C7.NODE_DEBUG&&/\bsemver\b/i.test(C7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var p8=$bn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=sie,s=p8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_W,_W.exports);var oie=_W.exports;const F_e=/^[0-9]+$/,hHe=(e,t)=>{const n=F_e.test(e),r=F_e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Rbn=(e,t)=>hHe(t,e);var Nbn={compareIdentifiers:hHe,rcompareIdentifiers:Rbn};const Tk=p8,{MAX_LENGTH:B_e,MAX_SAFE_INTEGER:Ak}=sie,{safeRe:j_e,t:z_e}=oie,Dbn=iie,{compareIdentifiers:I_}=Nbn;let Lbn=class Uf{constructor(t,n){if(n=Dbn(n),t instanceof Uf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>B_e)throw new TypeError(`version is longer than ${B_e} characters`);Tk("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?j_e[z_e.LOOSE]:j_e[z_e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ak||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ak||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ak||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<Ak)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Tk("SemVer.compare",this.version,this.options,t),!(t instanceof Uf)){if(typeof t=="string"&&t===this.version)return 0;t=new Uf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Uf||(t=new Uf(t,this.options)),I_(this.major,t.major)||I_(this.minor,t.minor)||I_(this.patch,t.patch)}comparePre(t){if(t instanceof Uf||(t=new Uf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Tk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return I_(r,i)}while(++n)}compareBuild(t){t instanceof Uf||(t=new Uf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Tk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return I_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),I_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var aie=Lbn;const U_e=aie,Mbn=(e,t,n)=>new U_e(e,n).compare(new U_e(t,n));var Ax=Mbn;const Fbn=Ax,Bbn=(e,t,n)=>Fbn(e,t,n)===0;var jbn=Bbn;const zbn=Ax,Ubn=(e,t,n)=>zbn(e,t,n)!==0;var Vbn=Ubn;const Hbn=Ax,qbn=(e,t,n)=>Hbn(e,t,n)>0;var Wbn=qbn;const Gbn=Ax,Ybn=(e,t,n)=>Gbn(e,t,n)>=0;var Kbn=Ybn;const Xbn=Ax,Qbn=(e,t,n)=>Xbn(e,t,n)<0;var Jbn=Qbn;const Zbn=Ax,ewn=(e,t,n)=>Zbn(e,t,n)<=0;var twn=ewn;const nwn=jbn,rwn=Vbn,iwn=Wbn,swn=Kbn,own=Jbn,awn=twn,uwn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return nwn(e,n,r);case"!=":return rwn(e,n,r);case">":return iwn(e,n,r);case">=":return swn(e,n,r);case"<":return own(e,n,r);case"<=":return awn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var lwn=uwn,k7,V_e;function cwn(){if(V_e)return k7;V_e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}k7=t;const n=iie,{safeRe:r,t:i}=oie,s=lwn,o=p8,a=aie,u=pHe();return k7}var $7,H_e;function pHe(){if(H_e)return $7;H_e=1;class e{constructor($,D){if(D=r(D),$ instanceof e)return $.loose===!!D.loose&&$.includePrerelease===!!D.includePrerelease?$:new e($.raw,D);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(V=>!p(V[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&m(V[0])){this.set=[V];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,V=n.get(B);if(V)return V;const j=this.options.loose,G=j?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(G,O(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let U=$.split(" ").map(M=>y(M,this.options)).join(" ").split(/\s+/).map(M=>C(M,this.options));j&&(U=U.filter(M=>(s("loose invalid filter",M,this.options),!!M.match(a[u.COMPARATORLOOSE])))),s("range list",U);const P=new Map,k=U.map(M=>new i(M,this.options));for(const M of k){if(p(M))return[M];P.set(M.value,M)}P.size>1&&P.has("")&&P.delete("");const H=[...P.values()];return n.set(B,H),H}intersects($,D){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>g(B,D)&&$.set.some(V=>g(V,D)&&B.every(j=>V.every(G=>j.intersects(G,D)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(z(this.set[D],$,this.options))return!0;return!1}}$7=e;const t=xbn,n=new t({max:1e3}),r=iie,i=cwn(),s=p8,o=aie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=oie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=sie,p=N=>N.value==="<0.0.0-0",m=N=>N.value==="",g=(N,$)=>{let D=!0;const B=N.slice();let V=B.pop();for(;D&&B.length;)D=B.every(j=>V.intersects(j,$)),V=B.pop();return D},y=(N,$)=>(s("comp",N,$),N=E(N,$),s("caret",N),N=_(N,$),s("tildes",N),N=x(N,$),s("xrange",N),N=I(N,$),s("stars",N),N),v=N=>!N||N.toLowerCase()==="x"||N==="*",_=(N,$)=>N.trim().split(/\s+/).map(D=>b(D,$)).join(" "),b=(N,$)=>{const D=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return N.replace(D,(B,V,j,G,U)=>{s("tilde",N,B,V,j,G,U);let P;return v(V)?P="":v(j)?P=`>=${V}.0.0 <${+V+1}.0.0-0`:v(G)?P=`>=${V}.${j}.0 <${V}.${+j+1}.0-0`:U?(s("replaceTilde pr",U),P=`>=${V}.${j}.${G}-${U} <${V}.${+j+1}.0-0`):P=`>=${V}.${j}.${G} <${V}.${+j+1}.0-0`,s("tilde return",P),P})},E=(N,$)=>N.trim().split(/\s+/).map(D=>w(D,$)).join(" "),w=(N,$)=>{s("caret",N,$);const D=$.loose?a[u.CARETLOOSE]:a[u.CARET],B=$.includePrerelease?"-0":"";return N.replace(D,(V,j,G,U,P)=>{s("caret",N,V,j,G,U,P);let k;return v(j)?k="":v(G)?k=`>=${j}.0.0${B} <${+j+1}.0.0-0`:v(U)?j==="0"?k=`>=${j}.${G}.0${B} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.0${B} <${+j+1}.0.0-0`:P?(s("replaceCaret pr",P),j==="0"?G==="0"?k=`>=${j}.${G}.${U}-${P} <${j}.${G}.${+U+1}-0`:k=`>=${j}.${G}.${U}-${P} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.${U}-${P} <${+j+1}.0.0-0`):(s("no pr"),j==="0"?G==="0"?k=`>=${j}.${G}.${U}${B} <${j}.${G}.${+U+1}-0`:k=`>=${j}.${G}.${U}${B} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.${U} <${+j+1}.0.0-0`),s("caret return",k),k})},x=(N,$)=>(s("replaceXRanges",N,$),N.split(/\s+/).map(D=>S(D,$)).join(" ")),S=(N,$)=>{N=N.trim();const D=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return N.replace(D,(B,V,j,G,U,P)=>{s("xRange",N,B,V,j,G,U,P);const k=v(j),H=k||v(G),M=H||v(U),F=M;return V==="="&&F&&(V=""),P=$.includePrerelease?"-0":"",k?V===">"||V==="<"?B="<0.0.0-0":B="*":V&&F?(H&&(G=0),U=0,V===">"?(V=">=",H?(j=+j+1,G=0,U=0):(G=+G+1,U=0)):V==="<="&&(V="<",H?j=+j+1:G=+G+1),V==="<"&&(P="-0"),B=`${V+j}.${G}.${U}${P}`):H?B=`>=${j}.0.0${P} <${+j+1}.0.0-0`:M&&(B=`>=${j}.${G}.0${P} <${j}.${+G+1}.0-0`),s("xRange return",B),B})},I=(N,$)=>(s("replaceStars",N,$),N.trim().replace(a[u.STAR],"")),C=(N,$)=>(s("replaceGTE0",N,$),N.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=N=>($,D,B,V,j,G,U,P,k,H,M,F,J)=>(v(B)?D="":v(V)?D=`>=${B}.0.0${N?"-0":""}`:v(j)?D=`>=${B}.${V}.0${N?"-0":""}`:G?D=`>=${D}`:D=`>=${D}${N?"-0":""}`,v(k)?P="":v(H)?P=`<${+k+1}.0.0-0`:v(M)?P=`<${k}.${+H+1}.0-0`:F?P=`<=${k}.${H}.${M}-${F}`:N?P=`<${k}.${H}.${+M+1}-0`:P=`<=${P}`,`${D} ${P}`.trim()),z=(N,$,D)=>{for(let B=0;B<N.length;B++)if(!N[B].test($))return!1;if($.prerelease.length&&!D.includePrerelease){for(let B=0;B<N.length;B++)if(s(N[B].semver),N[B].semver!==i.ANY&&N[B].semver.prerelease.length>0){const V=N[B].semver;if(V.major===$.major&&V.minor===$.minor&&V.patch===$.patch)return!0}return!1}return!0};return $7}const fwn=pHe(),dwn=(e,t,n)=>{try{t=new fwn(t,n)}catch{return!1}return t.test(e)};var hwn=dwn,mHe=pbn(hwn);function pwn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var mwn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function gHe(e,...t){for(const n of t)gwn(e,n);return e}function gwn(e,t){for(const n of Object.keys(t))ux(e,n,t[n],!0)}const Nc=tdn;let EC=s_n;const Ck=typeof window<"u"?window:void 0;var Z_e;EC===void 0&&((Z_e=Ck==null?void 0:Ck.vl)!=null&&Z_e.compile)&&(EC=Ck.vl);const ywn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},vwn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},TT={vega:"Vega","vega-lite":"Vega-Lite"},xM={vega:Nc.version,"vega-lite":EC?EC.version:"not available"},_wn={vega:e=>e,"vega-lite":(e,t)=>EC.compile(e,{config:t}).spec},bwn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,wwn="chart-wrapper";function Ewn(e){return typeof e=="function"}function q_e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${TT[r]} JSON Source`}function xwn(e,t){if(e.$schema){const n=aHe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${TT[n.library]}, but mode argument sets ${TT[t]??t}.`);const r=n.library;return mHe(xM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${TT[r]} ${n.version}, but the current version of ${TT[r]} is v${xM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function yHe(e){return!!(e&&"load"in e)}function W_e(e){return yHe(e)?e:Nc.loader(e)}function Swn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return rt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Twn(e,t,n={}){let r,i;rt(t)?(i=W_e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Swn(r),o=s.loader;(!i||o)&&(i=W_e(n.loader??o));const a=await G_e(s,i),u=await G_e(n,i),l={...gHe(u,a),config:ax(u.config??{},a.config??{})};return await Cwn(e,r,l,i)}async function G_e(e,t){const n=rt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=rt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Awn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Cwn(e,t,n={},r){const i=n.theme?ax(sbn[n.theme],n.config??{}):n.config,s=j0(n.actions)?n.actions:gHe({},ywn,n.actions??{}),o={...vwn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Nc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:w,rootContainer:x}=Awn(c);if(!w.getElementById(E)){const S=document.createElement("style");S.id=E,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?mwn.toString():n.defaultStyle,x.appendChild(S)}}const f=xwn(t,n.mode);let d=_wn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=aHe(d.$schema);mHe(xM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${xM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(wwn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):TF(d,p,!0,!1).newDocument),n.formatLocale&&Nc.formatLocale(n.formatLocale),n.timeFormatLocale&&Nc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const w=n.expressionFunctions[E];"fn"in w?Nc.expressionFunction(E,w.fn,w.visitor):w instanceof Function&&Nc.expressionFunction(E,w)}const{ast:m}=n,g=Nc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Nc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Nc.expressionInterpreter??n.expr??fdn}:{}});if(y.addSignalListener("autosize",(E,w)=>{const{type:x}=w;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:w}=n,x=E&&!yHe(E)?E==null?void 0:E.baseURL:void 0,S=Ewn(w)?w:new hbn({baseURL:x,...w===!0?{}:w}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:w}=typeof v=="boolean"?{}:v;y.hover(E,w)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const S=document.createElement("summary");S.innerHTML=bwn,x.append(S),_=I=>{x.contains(I.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const w=document.createElement("div");if(E.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const S=o[`${x.toUpperCase()}_ACTION`],I=document.createElement("a"),C=st(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;I.text=S,I.href="#",I.target="_blank",I.download=`${l}.${x}`,I.addEventListener("mousedown",async function(O){O.preventDefault();const z=await y.toImageURL(x,C);this.href=z}),w.append(I)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(S){q_e(Oj(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),w.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(S){q_e(Oj(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),w.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(I){pwn(window,x,{config:i,mode:f,renderer:a,spec:Oj(t)}),I.preventDefault()}),w.append(S)}}function b(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}function Iwn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Own(e,t,n){n&&(Iwn(n)?n(e.data(t)):e.change(t,Nc.changeset().remove(()=>!0).insert(n)))}function Pwn(e,t){Object.keys(t).forEach(n=>{Own(e,n,t[n])})}function vHe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const _He=()=>{};function R7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function kwn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=vHe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!BU(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Y_e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function N7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function AT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class bHe extends L.PureComponent{constructor(){super(...arguments),AT(this,"containerRef",L.createRef()),AT(this,"resultPromise",void 0),AT(this,"handleError",t=>{const{onError:n=_He}=this.props;n(t,this.containerRef.current),console.warn(t)}),AT(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=vHe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=kwn(N7(this.props),N7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!wH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Y_e(a,s),i&&R7(a,i)),a.run()})}else wH(i,s)||this.modifyView(o=>{s&&Y_e(o,s),i&&R7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=N7(this.props);this.resultPromise=Twn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;R7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return L.createElement("div",{ref:this.containerRef,className:t,style:n})}}AT(bHe,"propTypes",{className:Mt.string,onError:Mt.func});function bW(){return bW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bW.apply(this,arguments)}function wW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $wn={};class wHe extends L.PureComponent{constructor(){super(...arguments),wW(this,"vegaEmbed",L.createRef()),wW(this,"handleNewView",t=>{this.update();const{onNewView:n=_He}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){wH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Pwn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return L.createElement(bHe,bW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}wW(wHe,"defaultProps",{data:$wn});function EW(){return EW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EW.apply(this,arguments)}function Rwn(e){return L.createElement(wHe,EW({},e,{mode:"vega-lite"}))}const K_e=e=>Gg(e.sequence).every((t,n)=>t==="end"?!0:e.answers[`${t}_${n}`]!==void 0),Nwn=(e,t)=>{const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()};function Dwn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=LT(!1),[a,u]=Eb(),l=n.filter(S=>K_e(S)).map(S=>Math.max(...Object.values(S.answers).map(I=>I.endTime))),[c,f]=A.useState([new Date(new Date(Math.min(...l.length>0?l:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...l.length>0?l:[new Date().getTime()])).setHours(24,0,0,0))]),[d,h]=A.useState([]),[p,m]=A.useState([]);A.useEffect(()=>{if(n.length>0&&n[0].sequence.components){const S=n.filter(O=>Nwn(O.answers,c)),I=[],C=[];S.forEach(O=>{K_e(O)?I.push(O):C.push(O)}),h(I),m(C)}},[n,c]);const g=A.useMemo(()=>{var S,I;return d.length>0?[{Date:(S=c[0])==null?void 0:S.getTime(),Participants:0},...d.map(C=>Math.max(...Object.values(C.answers).map(O=>O.endTime).flat())).sort((C,O)=>C-O).map((C,O)=>({Date:C,Participants:O})),{Date:(I=c[1])==null?void 0:I.getTime(),Participants:d.length}]:[]},[d,c]),y=A.useMemo(()=>{var S,I;return{width:u.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(S=c[0])==null?void 0:S.getTime(),(I=c[1])==null?void 0:I.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:g}}},[u,g]),[v,{close:_,open:b}]=LT(!1),[E,{close:w,open:x}]=LT(!1);return R.jsxs(MC,{children:[R.jsxs(JG,{ref:a,p:"lg",shadow:"md",withBorder:!0,children:[R.jsxs(Sd,{align:"center",mb:16,justify:"space-between",children:[R.jsxs(Sd,{direction:"column",children:[R.jsx(jc,{order:5,mb:4,children:t}),R.jsxs(Sd,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[R.jsxs(xb,{size:"sm",color:"orange",children:["Total:",p.length+d.length]}),R.jsxs(xb,{size:"sm",color:"green",children:["Completed:",d.length]}),R.jsxs(xb,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),R.jsxs(Jl,{children:[R.jsxs(Vi,{opened:v,children:[R.jsx(Vi.Target,{children:R.jsx(wa,{disabled:n.length===0,onClick:()=>{h2(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:b,onMouseLeave:_,px:4,children:R.jsx(I6e,{})})}),R.jsx(Vi.Dropdown,{children:R.jsx(Ot,{children:"Download all participants data as JSON"})})]}),R.jsxs(Vi,{opened:E,children:[R.jsx(Vi.Target,{children:R.jsx(wa,{disabled:n.length===0,onClick:s,onMouseEnter:x,onMouseLeave:w,px:4,children:R.jsx(SJ,{})})}),R.jsx(Vi.Dropdown,{children:R.jsx(Ot,{children:"Download all participants data as a tidy CSV"})})]})]})]}),R.jsx(iFe,{label:R.jsx(Ot,{children:"Time Filter:"}),placeholder:"Pick dates range",value:c,onChange:f}),g.length>0?R.jsxs(R.Fragment,{children:[R.jsx(Ot,{mt:16,children:"Finished Participants"}),R.jsx(Rwn,{spec:y,actions:!1})]}):R.jsx(At,{h:293.4,children:R.jsx(Ug,{style:{height:"100%"},children:R.jsx(Ot,{children:"Not enough participants for chart"})})})]}),R.jsx(p4e,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}let Ik;const Lwn=new Uint8Array(16);function Mwn(){if(!Ik&&(Ik=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ik))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ik(Lwn)}const eo=[];for(let e=0;e<256;++e)eo.push((e+256).toString(16).slice(1));function Fwn(e,t=0){return eo[e[t+0]]+eo[e[t+1]]+eo[e[t+2]]+eo[e[t+3]]+"-"+eo[e[t+4]]+eo[e[t+5]]+"-"+eo[e[t+6]]+eo[e[t+7]]+"-"+eo[e[t+8]]+eo[e[t+9]]+"-"+eo[e[t+10]]+eo[e[t+11]]+eo[e[t+12]]+eo[e[t+13]]+eo[e[t+14]]+eo[e[t+15]]}const Bwn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X_e={randomUUID:Bwn};function Q_e(e,t,n){if(X_e.randomUUID&&!t&&!e)return X_e.randomUUID();e=e||{};const r=e.random||(e.rng||Mwn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return Fwn(r)}class jwn extends tke{constructor(){super("localStorage");Ru(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await eke.createInstance({name:n});const i=await Pb(JSON.stringify(r)),s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[i]:r})}async initializeParticipantSession(n,r,i){var u;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=await this.studyDatabase.getItem(this.currentParticipantId);if(s)return s;const o=await Pb(JSON.stringify(r)),a={participantId:this.currentParticipantId,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:n};return await((u=this.studyDatabase)==null?void 0:u.setItem(this.currentParticipantId,a)),a}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=Q_e();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&n.push(r)}),n}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=Q_e();this.studyDatabase.setItem("currentParticipant",r),this.currentParticipantId=r;let i=await this.studyDatabase.getItem(r);if(!i){const s=await Pb(JSON.stringify(n)),o={participantId:r,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{}};await this.studyDatabase.setItem(r,o),i=o}return i}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return Gg(n.sequence).every((i,s)=>i==="end"?!0:n.answers[`${i}_${s}`]!==void 0)}_verifyStudyDatabase(n){return n!==void 0}}async function EHe(){let e,t=!1;{const n=new OD;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new jwn;await n.connect(),e=n}return e}function zwn(e){const{globalConfig:t}=e,[n,r]=A.useState(!1),[i,s]=A.useState({}),[o,a]=A.useState({});return A.useEffect(()=>{(async()=>{r(!0);const l={},c={},f=async h=>{const p=await EHe(),m=await w4e(h,t);m!==null&&(await p.initializeStudyDb(h,m),l[h]=await p.getAllParticipantsData(),c[h]=m)};await(async()=>{const h=t.configsList.map(p=>f(p));try{await Promise.all(h),s(l),a(c)}catch(p){console.error("Error fetching data:",p)}finally{r(!1)}})()})()},[]),R.jsxs(At,{children:[R.jsx(jc,{mb:20,order:4,children:"Your Studies:"}),R.jsxs(Gu,{children:[t.configsList.map(u=>i[u]&&R.jsx(Gu.Col,{md:12,xl:6,children:R.jsx(Dwn,{studyId:u,allParticipants:i[u],config:o[u]})},`${u}-panel`)),R.jsx(FC,{visible:n,zIndex:1e3,overlayBlur:2})]})]})}function Uwn(e){const{page:t}=VM();return R.jsxs(DG,{children:[R.jsx(Mqt,{}),R.jsx(Fqt,{}),t==="dashboard"&&R.jsx(MC,{fluid:!0,children:R.jsx(zwn,{globalConfig:e.globalConfig})})]})}function J_e({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=NK(),{storageEngine:i}=uc();return A.useEffect(()=>{(async()=>{try{t&&await n(t==null?void 0:t.user)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?R.jsx(FC,{overlayOpacity:0,visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?R.jsx(_G,{to:"/login"}):R.jsx(R.Fragment,{children:e})}function Vwn(){const{user:e}=NK(),[t,n]=A.useState(null),[r,i]=A.useState(!1),{storageEngine:s}=uc(),o=async()=>{if(s instanceof OD){i(!0);const a=new zh,u=mD();try{await tmt(u,a)}catch(l){n(l.message)}finally{i(!1)}}};return A.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?R.jsx(_G,{to:"/"}):R.jsx(MC,{children:R.jsx(JG,{p:"lg",children:R.jsxs(Sd,{align:"center",direction:"column",justify:"center",children:[R.jsx(Sv,{maw:200,mt:50,mb:100,src:`${cc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsxs(R.Fragment,{children:[R.jsx(Ot,{mb:20,children:"To access admin settings, please sign in using your Google account."}),R.jsx(wa,{onClick:o,leftIcon:R.jsx(rzt,{}),variant:"filled",children:"Sign In With Google"})]}),t?R.jsx(xb,{size:"lg",color:"red",mt:30,children:t}):null,R.jsx(FC,{visible:r,zIndex:1e3,overlayBlur:2})]})})})}async function Hwn(){const t=await(await fetch(`${cc}global.json`)).text();return mqt(t)}async function qwn(e){const t={},n=e.configsList.map(i=>`${cc}${e.configs[i].path}`),r=await Promise.all(n.map(i=>fetch(i))).then(i=>Promise.all(i.map(s=>s.text()))).then(i=>Promise.all(i.map((s,o)=>d4e(s,e.configsList[o]))));return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Wwn(){const[e,t]=A.useState(null),[n,r]=A.useState({});return A.useEffect(()=>{async function i(){e&&r(await qwn(e))}i()},[e]),A.useEffect(()=>{e||Hwn().then(i=>{t(i)})},[e]),e?R.jsx(rYe,{basename:cc,children:R.jsx(Sbt,{globalConfig:e,children:R.jsxs(tYe,{children:[R.jsx(jS,{path:"/",element:R.jsx(J_e,{children:R.jsx(Abt,{globalConfig:e,studyConfigs:n})})}),R.jsx(jS,{path:"/:studyId/*",element:R.jsx(Lqt,{globalConfig:e})}),R.jsx(jS,{path:"/analysis/:page",element:R.jsx(J_e,{children:R.jsx(Uwn,{globalConfig:e})})}),R.jsx(jS,{path:"/login",element:R.jsx(Vwn,{})})]})})}):null}function Gwn(){const{storageEngine:e,setStorageEngine:t}=uc();return A.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await EHe();t(r)}n()},[t,e]),R.jsx(Wwn,{})}D7.createRoot(document.getElementById("root")).render(R.jsx(L.StrictMode,{children:R.jsx(iGe,{children:R.jsx(Gwn,{})})}))});export default Ywn();
