var lWe=Object.defineProperty;var cWe=(e,t,n)=>t in e?lWe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fWe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var zu=(e,t,n)=>(cWe(e,typeof t!="symbol"?t+"":t,n),n);var UTn=fWe((rCn,Hie)=>{function dWe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function El(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hWe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var pwe={exports:{}},qL={},mwe={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VA=Symbol.for("react.element"),pWe=Symbol.for("react.portal"),mWe=Symbol.for("react.fragment"),gWe=Symbol.for("react.strict_mode"),yWe=Symbol.for("react.profiler"),vWe=Symbol.for("react.provider"),_We=Symbol.for("react.context"),bWe=Symbol.for("react.forward_ref"),wWe=Symbol.for("react.suspense"),EWe=Symbol.for("react.memo"),xWe=Symbol.for("react.lazy"),rse=Symbol.iterator;function SWe(e){return e===null||typeof e!="object"?null:(e=rse&&e[rse]||e["@@iterator"],typeof e=="function"?e:null)}var gwe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ywe=Object.assign,vwe={};function DE(e,t,n){this.props=e,this.context=t,this.refs=vwe,this.updater=n||gwe}DE.prototype.isReactComponent={};DE.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};DE.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _we(){}_we.prototype=DE.prototype;function nG(e,t,n){this.props=e,this.context=t,this.refs=vwe,this.updater=n||gwe}var rG=nG.prototype=new _we;rG.constructor=nG;ywe(rG,DE.prototype);rG.isPureReactComponent=!0;var ise=Array.isArray,bwe=Object.prototype.hasOwnProperty,iG={current:null},wwe={key:!0,ref:!0,__self:!0,__source:!0};function Ewe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)bwe.call(t,r)&&!wwe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:VA,type:e,key:s,ref:o,props:i,_owner:iG.current}}function TWe(e,t){return{$$typeof:VA,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sG(e){return typeof e=="object"&&e!==null&&e.$$typeof===VA}function CWe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var sse=/\/+/g;function X8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?CWe(""+e.key):t.toString(36)}function Vk(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case VA:case pWe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+X8(o,0):r,ise(i)?(n="",e!=null&&(n=e.replace(sse,"$&/")+"/"),Vk(i,t,n,"",function(l){return l})):i!=null&&(sG(i)&&(i=TWe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sse,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",ise(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+X8(s,a);o+=Vk(s,t,n,u,i)}else if(u=SWe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+X8(s,a++),o+=Vk(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function zO(e,t,n){if(e==null)return e;var r=[],i=0;return Vk(e,r,"","",function(s){return t.call(n,s,i++)}),r}function AWe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var za={current:null},Hk={transition:null},IWe={ReactCurrentDispatcher:za,ReactCurrentBatchConfig:Hk,ReactCurrentOwner:iG};Rn.Children={map:zO,forEach:function(e,t,n){zO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return zO(e,function(){t++}),t},toArray:function(e){return zO(e,function(t){return t})||[]},only:function(e){if(!sG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rn.Component=DE;Rn.Fragment=mWe;Rn.Profiler=yWe;Rn.PureComponent=nG;Rn.StrictMode=gWe;Rn.Suspense=wWe;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IWe;Rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ywe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=iG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)bwe.call(t,u)&&!wwe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:VA,type:e.type,key:i,ref:s,props:r,_owner:o}};Rn.createContext=function(e){return e={$$typeof:_We,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vWe,_context:e},e.Consumer=e};Rn.createElement=Ewe;Rn.createFactory=function(e){var t=Ewe.bind(null,e);return t.type=e,t};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(e){return{$$typeof:bWe,render:e}};Rn.isValidElement=sG;Rn.lazy=function(e){return{$$typeof:xWe,_payload:{_status:-1,_result:e},_init:AWe}};Rn.memo=function(e,t){return{$$typeof:EWe,type:e,compare:t===void 0?null:t}};Rn.startTransition=function(e){var t=Hk.transition;Hk.transition={};try{e()}finally{Hk.transition=t}};Rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rn.useCallback=function(e,t){return za.current.useCallback(e,t)};Rn.useContext=function(e){return za.current.useContext(e)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(e){return za.current.useDeferredValue(e)};Rn.useEffect=function(e,t){return za.current.useEffect(e,t)};Rn.useId=function(){return za.current.useId()};Rn.useImperativeHandle=function(e,t,n){return za.current.useImperativeHandle(e,t,n)};Rn.useInsertionEffect=function(e,t){return za.current.useInsertionEffect(e,t)};Rn.useLayoutEffect=function(e,t){return za.current.useLayoutEffect(e,t)};Rn.useMemo=function(e,t){return za.current.useMemo(e,t)};Rn.useReducer=function(e,t,n){return za.current.useReducer(e,t,n)};Rn.useRef=function(e){return za.current.useRef(e)};Rn.useState=function(e){return za.current.useState(e)};Rn.useSyncExternalStore=function(e,t,n){return za.current.useSyncExternalStore(e,t,n)};Rn.useTransition=function(){return za.current.useTransition()};Rn.version="18.2.0";mwe.exports=Rn;var C=mwe.exports;const N=El(C),q1=dWe({__proto__:null,default:N},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OWe=C,PWe=Symbol.for("react.element"),kWe=Symbol.for("react.fragment"),$We=Object.prototype.hasOwnProperty,RWe=OWe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NWe={key:!0,ref:!0,__self:!0,__source:!0};function xwe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$We.call(t,r)&&!NWe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:PWe,type:e,key:s,ref:o,props:i,_owner:RWe.current}}qL.Fragment=kWe;qL.jsx=xwe;qL.jsxs=xwe;pwe.exports=qL;var I=pwe.exports,dz={},Swe={exports:{}},xl={},Twe={exports:{}},Cwe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,H){var U=B.length;B.push(H);e:for(;0<U;){var k=U-1>>>1,$=B[k];if(0<i($,H))B[k]=H,B[U]=$,U=k;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],U=B.pop();if(U!==H){B[0]=U;e:for(var k=0,$=B.length,q=$>>>1;k<q;){var F=2*(k+1)-1,j=B[F],Q=F+1,se=B[Q];if(0>i(j,U))Q<$&&0>i(se,j)?(B[k]=se,B[Q]=U,k=Q):(B[k]=j,B[F]=U,k=F);else if(Q<$&&0>i(se,U))B[k]=se,B[Q]=U,k=Q;else break e}}return H}function i(B,H){var U=B.sortIndex-H.sortIndex;return U!==0?U:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=B)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function b(B){if(m=!1,_(B),!p)if(n(u)!==null)p=!0,L(E);else{var H=n(l);H!==null&&V(b,H.startTime-B)}}function E(B,H){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var U=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||B&&!O());){var k=f.callback;if(typeof k=="function"){f.callback=null,d=f.priorityLevel;var $=k(f.expirationTime<=H);H=e.unstable_now(),typeof $=="function"?f.callback=$:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var F=n(l);F!==null&&V(b,F.startTime-H),q=!1}return q}finally{f=null,d=U,h=!1}}var w=!1,x=null,S=-1,P=5,A=-1;function O(){return!(e.unstable_now()-A<P)}function z(){if(x!==null){var B=e.unstable_now();A=B;var H=!0;try{H=x(!0,B)}finally{H?M():(w=!1,x=null)}}else w=!1}var M;if(typeof v=="function")M=function(){v(z)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,D=R.port2;R.port1.onmessage=z,M=function(){D.postMessage(null)}}else M=function(){g(z,0)};function L(B){x=B,w||(w=!0,M())}function V(B,H){S=g(function(){B(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(B){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var U=d;d=H;try{return B()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var U=d;d=B;try{return H()}finally{d=U}},e.unstable_scheduleCallback=function(B,H,U){var k=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?k+U:k):U=k,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=U+$,B={id:c++,callback:H,priorityLevel:B,startTime:U,expirationTime:$,sortIndex:-1},U>k?(B.sortIndex=U,t(l,B),n(u)===null&&B===n(l)&&(m?(y(S),S=-1):m=!0,V(b,U-k))):(B.sortIndex=$,t(u,B),p||h||(p=!0,L(E))),B},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(B){var H=d;return function(){var U=d;d=H;try{return B.apply(this,arguments)}finally{d=U}}}})(Cwe);Twe.exports=Cwe;var DWe=Twe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Awe=C,fl=DWe;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iwe=new Set,X2={};function Rv(e,t){gw(e,t),gw(e+"Capture",t)}function gw(e,t){for(X2[e]=t,e=0;e<t.length;e++)Iwe.add(t[e])}var Op=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hz=Object.prototype.hasOwnProperty,MWe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ose={},ase={};function LWe(e){return hz.call(ase,e)?!0:hz.call(ose,e)?!1:MWe.test(e)?ase[e]=!0:(ose[e]=!0,!1)}function FWe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jWe(e,t,n,r){if(t===null||typeof t>"u"||FWe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ua(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var To={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){To[e]=new Ua(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];To[t]=new Ua(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){To[e]=new Ua(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){To[e]=new Ua(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){To[e]=new Ua(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){To[e]=new Ua(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){To[e]=new Ua(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){To[e]=new Ua(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){To[e]=new Ua(e,5,!1,e.toLowerCase(),null,!1,!1)});var oG=/[\-:]([a-z])/g;function aG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oG,aG);To[t]=new Ua(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oG,aG);To[t]=new Ua(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oG,aG);To[t]=new Ua(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){To[e]=new Ua(e,1,!1,e.toLowerCase(),null,!1,!1)});To.xlinkHref=new Ua("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){To[e]=new Ua(e,1,!1,e.toLowerCase(),null,!0,!0)});function uG(e,t,n,r){var i=To.hasOwnProperty(t)?To[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jWe(t,n,i,r)&&(n=null),r||i===null?LWe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rm=Awe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,UO=Symbol.for("react.element"),rb=Symbol.for("react.portal"),ib=Symbol.for("react.fragment"),lG=Symbol.for("react.strict_mode"),pz=Symbol.for("react.profiler"),Owe=Symbol.for("react.provider"),Pwe=Symbol.for("react.context"),cG=Symbol.for("react.forward_ref"),mz=Symbol.for("react.suspense"),gz=Symbol.for("react.suspense_list"),fG=Symbol.for("react.memo"),Bm=Symbol.for("react.lazy"),kwe=Symbol.for("react.offscreen"),use=Symbol.iterator;function Xx(e){return e===null||typeof e!="object"?null:(e=use&&e[use]||e["@@iterator"],typeof e=="function"?e:null)}var Si=Object.assign,Q8;function rT(e){if(Q8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Q8=t&&t[1]||""}return`
`+Q8+e}var J8=!1;function Z8(e,t){if(!e||J8)return"";J8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{J8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rT(e):""}function BWe(e){switch(e.tag){case 5:return rT(e.type);case 16:return rT("Lazy");case 13:return rT("Suspense");case 19:return rT("SuspenseList");case 0:case 2:case 15:return e=Z8(e.type,!1),e;case 11:return e=Z8(e.type.render,!1),e;case 1:return e=Z8(e.type,!0),e;default:return""}}function yz(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ib:return"Fragment";case rb:return"Portal";case pz:return"Profiler";case lG:return"StrictMode";case mz:return"Suspense";case gz:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pwe:return(e.displayName||"Context")+".Consumer";case Owe:return(e._context.displayName||"Context")+".Provider";case cG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fG:return t=e.displayName||null,t!==null?t:yz(e.type)||"Memo";case Bm:t=e._payload,e=e._init;try{return yz(e(t))}catch{}}return null}function zWe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yz(t);case 8:return t===lG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $we(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UWe(e){var t=$we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function VO(e){e._valueTracker||(e._valueTracker=UWe(e))}function Rwe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$we(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fR(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vz(e,t){var n=t.checked;return Si({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function lse(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Kg(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nwe(e,t){t=t.checked,t!=null&&uG(e,"checked",t,!1)}function _z(e,t){Nwe(e,t);var n=Kg(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bz(e,t.type,n):t.hasOwnProperty("defaultValue")&&bz(e,t.type,Kg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cse(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bz(e,t,n){(t!=="number"||fR(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var iT=Array.isArray;function $b(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kg(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function wz(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return Si({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fse(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(iT(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Kg(n)}}function Dwe(e,t){var n=Kg(t.value),r=Kg(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dse(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mwe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ez(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mwe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var HO,Lwe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(HO=HO||document.createElement("div"),HO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=HO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Q2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var KT={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VWe=["Webkit","ms","Moz","O"];Object.keys(KT).forEach(function(e){VWe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),KT[t]=KT[e]})});function Fwe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||KT.hasOwnProperty(e)&&KT[e]?(""+t).trim():t+"px"}function jwe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Fwe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var HWe=Si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xz(e,t){if(t){if(HWe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function Sz(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tz=null;function dG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cz=null,Rb=null,Nb=null;function hse(e){if(e=WA(e)){if(typeof Cz!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=XL(t),Cz(e.stateNode,e.type,t))}}function Bwe(e){Rb?Nb?Nb.push(e):Nb=[e]:Rb=e}function zwe(){if(Rb){var e=Rb,t=Nb;if(Nb=Rb=null,hse(e),t)for(e=0;e<t.length;e++)hse(t[e])}}function Uwe(e,t){return e(t)}function Vwe(){}var e9=!1;function Hwe(e,t,n){if(e9)return e(t,n);e9=!0;try{return Uwe(e,t,n)}finally{e9=!1,(Rb!==null||Nb!==null)&&(Vwe(),zwe())}}function J2(e,t){var n=e.stateNode;if(n===null)return null;var r=XL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var Az=!1;if(Op)try{var Qx={};Object.defineProperty(Qx,"passive",{get:function(){Az=!0}}),window.addEventListener("test",Qx,Qx),window.removeEventListener("test",Qx,Qx)}catch{Az=!1}function qWe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var XT=!1,dR=null,hR=!1,Iz=null,WWe={onError:function(e){XT=!0,dR=e}};function GWe(e,t,n,r,i,s,o,a,u){XT=!1,dR=null,qWe.apply(WWe,arguments)}function YWe(e,t,n,r,i,s,o,a,u){if(GWe.apply(this,arguments),XT){if(XT){var l=dR;XT=!1,dR=null}else throw Error(qe(198));hR||(hR=!0,Iz=l)}}function Nv(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qwe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pse(e){if(Nv(e)!==e)throw Error(qe(188))}function KWe(e){var t=e.alternate;if(!t){if(t=Nv(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return pse(i),e;if(s===r)return pse(i),t;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function Wwe(e){return e=KWe(e),e!==null?Gwe(e):null}function Gwe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gwe(e);if(t!==null)return t;e=e.sibling}return null}var Ywe=fl.unstable_scheduleCallback,mse=fl.unstable_cancelCallback,XWe=fl.unstable_shouldYield,QWe=fl.unstable_requestPaint,Gi=fl.unstable_now,JWe=fl.unstable_getCurrentPriorityLevel,hG=fl.unstable_ImmediatePriority,Kwe=fl.unstable_UserBlockingPriority,pR=fl.unstable_NormalPriority,ZWe=fl.unstable_LowPriority,Xwe=fl.unstable_IdlePriority,WL=null,Sd=null;function eGe(e){if(Sd&&typeof Sd.onCommitFiberRoot=="function")try{Sd.onCommitFiberRoot(WL,e,void 0,(e.current.flags&128)===128)}catch{}}var sf=Math.clz32?Math.clz32:rGe,tGe=Math.log,nGe=Math.LN2;function rGe(e){return e>>>=0,e===0?32:31-(tGe(e)/nGe|0)|0}var qO=64,WO=4194304;function sT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mR(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=sT(a):(s&=o,s!==0&&(r=sT(s)))}else o=n&~i,o!==0?r=sT(o):s!==0&&(r=sT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sf(t),i=1<<n,r|=e[n],t&=~i;return r}function iGe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sGe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-sf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=iGe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function Oz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qwe(){var e=qO;return qO<<=1,!(qO&4194240)&&(qO=64),e}function t9(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function HA(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sf(t),e[t]=n}function oGe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-sf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function pG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var br=0;function Jwe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zwe,mG,eEe,tEe,nEe,Pz=!1,GO=[],Eg=null,xg=null,Sg=null,Z2=new Map,eC=new Map,Xm=[],aGe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gse(e,t){switch(e){case"focusin":case"focusout":Eg=null;break;case"dragenter":case"dragleave":xg=null;break;case"mouseover":case"mouseout":Sg=null;break;case"pointerover":case"pointerout":Z2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eC.delete(t.pointerId)}}function Jx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=WA(t),t!==null&&mG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function uGe(e,t,n,r,i){switch(t){case"focusin":return Eg=Jx(Eg,e,t,n,r,i),!0;case"dragenter":return xg=Jx(xg,e,t,n,r,i),!0;case"mouseover":return Sg=Jx(Sg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Z2.set(s,Jx(Z2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,eC.set(s,Jx(eC.get(s)||null,e,t,n,r,i)),!0}return!1}function rEe(e){var t=Zy(e.target);if(t!==null){var n=Nv(t);if(n!==null){if(t=n.tag,t===13){if(t=qwe(n),t!==null){e.blockedOn=t,nEe(e.priority,function(){eEe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qk(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=kz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tz=r,n.target.dispatchEvent(r),Tz=null}else return t=WA(n),t!==null&&mG(t),e.blockedOn=n,!1;t.shift()}return!0}function yse(e,t,n){qk(e)&&n.delete(t)}function lGe(){Pz=!1,Eg!==null&&qk(Eg)&&(Eg=null),xg!==null&&qk(xg)&&(xg=null),Sg!==null&&qk(Sg)&&(Sg=null),Z2.forEach(yse),eC.forEach(yse)}function Zx(e,t){e.blockedOn===t&&(e.blockedOn=null,Pz||(Pz=!0,fl.unstable_scheduleCallback(fl.unstable_NormalPriority,lGe)))}function tC(e){function t(i){return Zx(i,e)}if(0<GO.length){Zx(GO[0],e);for(var n=1;n<GO.length;n++){var r=GO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Eg!==null&&Zx(Eg,e),xg!==null&&Zx(xg,e),Sg!==null&&Zx(Sg,e),Z2.forEach(t),eC.forEach(t),n=0;n<Xm.length;n++)r=Xm[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xm.length&&(n=Xm[0],n.blockedOn===null);)rEe(n),n.blockedOn===null&&Xm.shift()}var Db=rm.ReactCurrentBatchConfig,gR=!0;function cGe(e,t,n,r){var i=br,s=Db.transition;Db.transition=null;try{br=1,gG(e,t,n,r)}finally{br=i,Db.transition=s}}function fGe(e,t,n,r){var i=br,s=Db.transition;Db.transition=null;try{br=4,gG(e,t,n,r)}finally{br=i,Db.transition=s}}function gG(e,t,n,r){if(gR){var i=kz(e,t,n,r);if(i===null)f9(e,t,r,yR,n),gse(e,r);else if(uGe(i,e,t,n,r))r.stopPropagation();else if(gse(e,r),t&4&&-1<aGe.indexOf(e)){for(;i!==null;){var s=WA(i);if(s!==null&&Zwe(s),s=kz(e,t,n,r),s===null&&f9(e,t,r,yR,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else f9(e,t,r,null,n)}}var yR=null;function kz(e,t,n,r){if(yR=null,e=dG(r),e=Zy(e),e!==null)if(t=Nv(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qwe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yR=e,null}function iEe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JWe()){case hG:return 1;case Kwe:return 4;case pR:case ZWe:return 16;case Xwe:return 536870912;default:return 16}default:return 16}}var og=null,yG=null,Wk=null;function sEe(){if(Wk)return Wk;var e,t=yG,n=t.length,r,i="value"in og?og.value:og.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Wk=i.slice(e,1<r?1-r:void 0)}function Gk(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function YO(){return!0}function vse(){return!1}function Sl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?YO:vse,this.isPropagationStopped=vse,this}return Si(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=YO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=YO)},persist:function(){},isPersistent:YO}),t}var ME={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vG=Sl(ME),qA=Si({},ME,{view:0,detail:0}),dGe=Sl(qA),n9,r9,eS,GL=Si({},qA,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_G,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eS&&(eS&&e.type==="mousemove"?(n9=e.screenX-eS.screenX,r9=e.screenY-eS.screenY):r9=n9=0,eS=e),n9)},movementY:function(e){return"movementY"in e?e.movementY:r9}}),_se=Sl(GL),hGe=Si({},GL,{dataTransfer:0}),pGe=Sl(hGe),mGe=Si({},qA,{relatedTarget:0}),i9=Sl(mGe),gGe=Si({},ME,{animationName:0,elapsedTime:0,pseudoElement:0}),yGe=Sl(gGe),vGe=Si({},ME,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_Ge=Sl(vGe),bGe=Si({},ME,{data:0}),bse=Sl(bGe),wGe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EGe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xGe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SGe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xGe[e])?!!t[e]:!1}function _G(){return SGe}var TGe=Si({},qA,{key:function(e){if(e.key){var t=wGe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gk(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?EGe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_G,charCode:function(e){return e.type==="keypress"?Gk(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gk(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CGe=Sl(TGe),AGe=Si({},GL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wse=Sl(AGe),IGe=Si({},qA,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_G}),OGe=Sl(IGe),PGe=Si({},ME,{propertyName:0,elapsedTime:0,pseudoElement:0}),kGe=Sl(PGe),$Ge=Si({},GL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),RGe=Sl($Ge),NGe=[9,13,27,32],bG=Op&&"CompositionEvent"in window,QT=null;Op&&"documentMode"in document&&(QT=document.documentMode);var DGe=Op&&"TextEvent"in window&&!QT,oEe=Op&&(!bG||QT&&8<QT&&11>=QT),Ese=" ",xse=!1;function aEe(e,t){switch(e){case"keyup":return NGe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uEe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sb=!1;function MGe(e,t){switch(e){case"compositionend":return uEe(t);case"keypress":return t.which!==32?null:(xse=!0,Ese);case"textInput":return e=t.data,e===Ese&&xse?null:e;default:return null}}function LGe(e,t){if(sb)return e==="compositionend"||!bG&&aEe(e,t)?(e=sEe(),Wk=yG=og=null,sb=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oEe&&t.locale!=="ko"?null:t.data;default:return null}}var FGe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FGe[e.type]:t==="textarea"}function lEe(e,t,n,r){Bwe(r),t=vR(t,"onChange"),0<t.length&&(n=new vG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var JT=null,nC=null;function jGe(e){bEe(e,0)}function YL(e){var t=ub(e);if(Rwe(t))return e}function BGe(e,t){if(e==="change")return t}var cEe=!1;if(Op){var s9;if(Op){var o9="oninput"in document;if(!o9){var Tse=document.createElement("div");Tse.setAttribute("oninput","return;"),o9=typeof Tse.oninput=="function"}s9=o9}else s9=!1;cEe=s9&&(!document.documentMode||9<document.documentMode)}function Cse(){JT&&(JT.detachEvent("onpropertychange",fEe),nC=JT=null)}function fEe(e){if(e.propertyName==="value"&&YL(nC)){var t=[];lEe(t,nC,e,dG(e)),Hwe(jGe,t)}}function zGe(e,t,n){e==="focusin"?(Cse(),JT=t,nC=n,JT.attachEvent("onpropertychange",fEe)):e==="focusout"&&Cse()}function UGe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return YL(nC)}function VGe(e,t){if(e==="click")return YL(t)}function HGe(e,t){if(e==="input"||e==="change")return YL(t)}function qGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pf=typeof Object.is=="function"?Object.is:qGe;function rC(e,t){if(pf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hz.call(t,i)||!pf(e[i],t[i]))return!1}return!0}function Ase(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ise(e,t){var n=Ase(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ase(n)}}function dEe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dEe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hEe(){for(var e=window,t=fR();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fR(e.document)}return t}function wG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WGe(e){var t=hEe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dEe(n.ownerDocument.documentElement,n)){if(r!==null&&wG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Ise(n,s);var o=Ise(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GGe=Op&&"documentMode"in document&&11>=document.documentMode,ob=null,$z=null,ZT=null,Rz=!1;function Ose(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rz||ob==null||ob!==fR(r)||(r=ob,"selectionStart"in r&&wG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ZT&&rC(ZT,r)||(ZT=r,r=vR($z,"onSelect"),0<r.length&&(t=new vG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ob)))}function KO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ab={animationend:KO("Animation","AnimationEnd"),animationiteration:KO("Animation","AnimationIteration"),animationstart:KO("Animation","AnimationStart"),transitionend:KO("Transition","TransitionEnd")},a9={},pEe={};Op&&(pEe=document.createElement("div").style,"AnimationEvent"in window||(delete ab.animationend.animation,delete ab.animationiteration.animation,delete ab.animationstart.animation),"TransitionEvent"in window||delete ab.transitionend.transition);function KL(e){if(a9[e])return a9[e];if(!ab[e])return e;var t=ab[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in pEe)return a9[e]=t[n];return e}var mEe=KL("animationend"),gEe=KL("animationiteration"),yEe=KL("animationstart"),vEe=KL("transitionend"),_Ee=new Map,Pse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function N0(e,t){_Ee.set(e,t),Rv(t,[e])}for(var u9=0;u9<Pse.length;u9++){var l9=Pse[u9],YGe=l9.toLowerCase(),KGe=l9[0].toUpperCase()+l9.slice(1);N0(YGe,"on"+KGe)}N0(mEe,"onAnimationEnd");N0(gEe,"onAnimationIteration");N0(yEe,"onAnimationStart");N0("dblclick","onDoubleClick");N0("focusin","onFocus");N0("focusout","onBlur");N0(vEe,"onTransitionEnd");gw("onMouseEnter",["mouseout","mouseover"]);gw("onMouseLeave",["mouseout","mouseover"]);gw("onPointerEnter",["pointerout","pointerover"]);gw("onPointerLeave",["pointerout","pointerover"]);Rv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XGe=new Set("cancel close invalid load scroll toggle".split(" ").concat(oT));function kse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,YWe(r,t,void 0,e),e.currentTarget=null}function bEe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;kse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;kse(i,a,l),s=u}}}if(hR)throw e=Iz,hR=!1,Iz=null,e}function Yr(e,t){var n=t[Fz];n===void 0&&(n=t[Fz]=new Set);var r=e+"__bubble";n.has(r)||(wEe(t,e,2,!1),n.add(r))}function c9(e,t,n){var r=0;t&&(r|=4),wEe(n,e,r,t)}var XO="_reactListening"+Math.random().toString(36).slice(2);function iC(e){if(!e[XO]){e[XO]=!0,Iwe.forEach(function(n){n!=="selectionchange"&&(XGe.has(n)||c9(n,!1,e),c9(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[XO]||(t[XO]=!0,c9("selectionchange",!1,t))}}function wEe(e,t,n,r){switch(iEe(t)){case 1:var i=cGe;break;case 4:i=fGe;break;default:i=gG}n=i.bind(null,t,n,e),i=void 0,!Az||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function f9(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zy(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Hwe(function(){var l=s,c=dG(n),f=[];e:{var d=_Ee.get(e);if(d!==void 0){var h=vG,p=e;switch(e){case"keypress":if(Gk(n)===0)break e;case"keydown":case"keyup":h=CGe;break;case"focusin":p="focus",h=i9;break;case"focusout":p="blur",h=i9;break;case"beforeblur":case"afterblur":h=i9;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=_se;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=pGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=OGe;break;case mEe:case gEe:case yEe:h=yGe;break;case vEe:h=kGe;break;case"scroll":h=dGe;break;case"wheel":h=RGe;break;case"copy":case"cut":case"paste":h=_Ge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=wse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=J2(v,y),b!=null&&m.push(sC(v,b,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Tz&&(p=n.relatedTarget||n.fromElement)&&(Zy(p)||p[Pp]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Zy(p):null,p!==null&&(g=Nv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=_se,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=wse,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:ub(h),_=p==null?d:ub(p),d=new m(b,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,b=null,Zy(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=b_(_))v++;for(_=0,b=y;b;b=b_(b))_++;for(;0<v-_;)m=b_(m),v--;for(;0<_-v;)y=b_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=b_(m),y=b_(y)}m=null}else m=null;h!==null&&$se(f,d,h,m,!1),p!==null&&g!==null&&$se(f,g,p,m,!0)}}e:{if(d=l?ub(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=BGe;else if(Sse(d))if(cEe)E=HGe;else{E=UGe;var w=zGe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=VGe);if(E&&(E=E(e,l))){lEe(f,E,n,c);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&bz(d,"number",d.value)}switch(w=l?ub(l):window,e){case"focusin":(Sse(w)||w.contentEditable==="true")&&(ob=w,$z=l,ZT=null);break;case"focusout":ZT=$z=ob=null;break;case"mousedown":Rz=!0;break;case"contextmenu":case"mouseup":case"dragend":Rz=!1,Ose(f,n,c);break;case"selectionchange":if(GGe)break;case"keydown":case"keyup":Ose(f,n,c)}var x;if(bG)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else sb?aEe(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(oEe&&n.locale!=="ko"&&(sb||S!=="onCompositionStart"?S==="onCompositionEnd"&&sb&&(x=sEe()):(og=c,yG="value"in og?og.value:og.textContent,sb=!0)),w=vR(l,S),0<w.length&&(S=new bse(S,e,null,n,c),f.push({event:S,listeners:w}),x?S.data=x:(x=uEe(n),x!==null&&(S.data=x)))),(x=DGe?MGe(e,n):LGe(e,n))&&(l=vR(l,"onBeforeInput"),0<l.length&&(c=new bse("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}bEe(f,t)})}function sC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=J2(e,n),s!=null&&r.unshift(sC(e,s,i)),s=J2(e,t),s!=null&&r.push(sC(e,s,i))),e=e.return}return r}function b_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $se(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=J2(n,s),u!=null&&o.unshift(sC(n,u,a))):i||(u=J2(n,s),u!=null&&o.push(sC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var QGe=/\r\n?/g,JGe=/\u0000|\uFFFD/g;function Rse(e){return(typeof e=="string"?e:""+e).replace(QGe,`
`).replace(JGe,"")}function QO(e,t,n){if(t=Rse(t),Rse(e)!==t&&n)throw Error(qe(425))}function _R(){}var Nz=null,Dz=null;function Mz(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Lz=typeof setTimeout=="function"?setTimeout:void 0,ZGe=typeof clearTimeout=="function"?clearTimeout:void 0,Nse=typeof Promise=="function"?Promise:void 0,eYe=typeof queueMicrotask=="function"?queueMicrotask:typeof Nse<"u"?function(e){return Nse.resolve(null).then(e).catch(tYe)}:Lz;function tYe(e){setTimeout(function(){throw e})}function d9(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),tC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);tC(t)}function Tg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var LE=Math.random().toString(36).slice(2),id="__reactFiber$"+LE,oC="__reactProps$"+LE,Pp="__reactContainer$"+LE,Fz="__reactEvents$"+LE,nYe="__reactListeners$"+LE,rYe="__reactHandles$"+LE;function Zy(e){var t=e[id];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pp]||n[id]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Dse(e);e!==null;){if(n=e[id])return n;e=Dse(e)}return t}e=n,n=e.parentNode}return null}function WA(e){return e=e[id]||e[Pp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ub(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function XL(e){return e[oC]||null}var jz=[],lb=-1;function D0(e){return{current:e}}function ni(e){0>lb||(e.current=jz[lb],jz[lb]=null,lb--)}function Vr(e,t){lb++,jz[lb]=e.current,e.current=t}var Xg={},sa=D0(Xg),vu=D0(!1),W1=Xg;function yw(e,t){var n=e.type.contextTypes;if(!n)return Xg;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function _u(e){return e=e.childContextTypes,e!=null}function bR(){ni(vu),ni(sa)}function Mse(e,t,n){if(sa.current!==Xg)throw Error(qe(168));Vr(sa,t),Vr(vu,n)}function EEe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(qe(108,zWe(e)||"Unknown",i));return Si({},n,r)}function wR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xg,W1=sa.current,Vr(sa,e),Vr(vu,vu.current),!0}function Lse(e,t,n){var r=e.stateNode;if(!r)throw Error(qe(169));n?(e=EEe(e,t,W1),r.__reactInternalMemoizedMergedChildContext=e,ni(vu),ni(sa),Vr(sa,e)):ni(vu),Vr(vu,n)}var zh=null,QL=!1,h9=!1;function xEe(e){zh===null?zh=[e]:zh.push(e)}function iYe(e){QL=!0,xEe(e)}function M0(){if(!h9&&zh!==null){h9=!0;var e=0,t=br;try{var n=zh;for(br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zh=null,QL=!1}catch(i){throw zh!==null&&(zh=zh.slice(e+1)),Ywe(hG,M0),i}finally{br=t,h9=!1}}return null}var cb=[],fb=0,ER=null,xR=0,jl=[],Bl=0,G1=null,ep=1,tp="";function Ty(e,t){cb[fb++]=xR,cb[fb++]=ER,ER=e,xR=t}function SEe(e,t,n){jl[Bl++]=ep,jl[Bl++]=tp,jl[Bl++]=G1,G1=e;var r=ep;e=tp;var i=32-sf(r)-1;r&=~(1<<i),n+=1;var s=32-sf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ep=1<<32-sf(t)+i|n<<i|r,tp=s+e}else ep=1<<s|n<<i|r,tp=e}function EG(e){e.return!==null&&(Ty(e,1),SEe(e,1,0))}function xG(e){for(;e===ER;)ER=cb[--fb],cb[fb]=null,xR=cb[--fb],cb[fb]=null;for(;e===G1;)G1=jl[--Bl],jl[Bl]=null,tp=jl[--Bl],jl[Bl]=null,ep=jl[--Bl],jl[Bl]=null}var ol=null,el=null,pi=!1,Vc=null;function TEe(e,t){var n=Yl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ol=e,el=Tg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ol=e,el=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=G1!==null?{id:ep,overflow:tp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ol=e,el=null,!0):!1;default:return!1}}function Bz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zz(e){if(pi){var t=el;if(t){var n=t;if(!Fse(e,t)){if(Bz(e))throw Error(qe(418));t=Tg(n.nextSibling);var r=ol;t&&Fse(e,t)?TEe(r,n):(e.flags=e.flags&-4097|2,pi=!1,ol=e)}}else{if(Bz(e))throw Error(qe(418));e.flags=e.flags&-4097|2,pi=!1,ol=e}}}function jse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ol=e}function JO(e){if(e!==ol)return!1;if(!pi)return jse(e),pi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mz(e.type,e.memoizedProps)),t&&(t=el)){if(Bz(e))throw CEe(),Error(qe(418));for(;t;)TEe(e,t),t=Tg(t.nextSibling)}if(jse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){el=Tg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}el=null}}else el=ol?Tg(e.stateNode.nextSibling):null;return!0}function CEe(){for(var e=el;e;)e=Tg(e.nextSibling)}function vw(){el=ol=null,pi=!1}function SG(e){Vc===null?Vc=[e]:Vc.push(e)}var sYe=rm.ReactCurrentBatchConfig;function Lc(e,t){if(e&&e.defaultProps){t=Si({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var SR=D0(null),TR=null,db=null,TG=null;function CG(){TG=db=TR=null}function AG(e){var t=SR.current;ni(SR),e._currentValue=t}function Uz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Mb(e,t){TR=e,TG=db=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hu=!0),e.firstContext=null)}function rc(e){var t=e._currentValue;if(TG!==e)if(e={context:e,memoizedValue:t,next:null},db===null){if(TR===null)throw Error(qe(308));db=e,TR.dependencies={lanes:0,firstContext:e}}else db=db.next=e;return t}var e1=null;function IG(e){e1===null?e1=[e]:e1.push(e)}function AEe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,IG(t)):(n.next=i.next,i.next=n),t.interleaved=n,kp(e,r)}function kp(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zm=!1;function OG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IEe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,kp(e,n)}return i=r.interleaved,i===null?(t.next=t,IG(r)):(t.next=i.next,i.next=t),r.interleaved=t,kp(e,n)}function Yk(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pG(e,n)}}function Bse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function CR(e,t,n,r){var i=e.updateQueue;zm=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Si({},f,d);break e;case 2:zm=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);K1|=o,e.lanes=o,e.memoizedState=f}}function zse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var OEe=new Awe.Component().refs;function Vz(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Si({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var JL={isMounted:function(e){return(e=e._reactInternals)?Nv(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oa(),i=Ig(e),s=pp(r,i);s.payload=t,n!=null&&(s.callback=n),t=Cg(e,s,i),t!==null&&(of(t,e,i,r),Yk(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oa(),i=Ig(e),s=pp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Cg(e,s,i),t!==null&&(of(t,e,i,r),Yk(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oa(),r=Ig(e),i=pp(n,r);i.tag=2,t!=null&&(i.callback=t),t=Cg(e,i,r),t!==null&&(of(t,e,r,n),Yk(t,e,r))}};function Use(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!rC(n,r)||!rC(i,s):!0}function PEe(e,t,n){var r=!1,i=Xg,s=t.contextType;return typeof s=="object"&&s!==null?s=rc(s):(i=_u(t)?W1:sa.current,r=t.contextTypes,s=(r=r!=null)?yw(e,i):Xg),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=JL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Vse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&JL.enqueueReplaceState(t,t.state,null)}function Hz(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=OEe,OG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=rc(s):(s=_u(t)?W1:sa.current,i.context=yw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Vz(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&JL.enqueueReplaceState(i,i.state,null),CR(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===OEe&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function ZO(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hse(e){var t=e._init;return t(e._payload)}function kEe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Og(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,b){return v===null||v.tag!==6?(v=b9(_,y.mode,b),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,b){var E=_.type;return E===ib?c(y,v,_.props.children,b,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Bm&&Hse(E)===v.type)?(b=i(v,_.props),b.ref=tS(y,v,_),b.return=y,b):(b=e$(_.type,_.key,_.props,null,y.mode,b),b.ref=tS(y,v,_),b.return=y,b)}function l(y,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=w9(_,y.mode,b),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,b,E){return v===null||v.tag!==7?(v=E1(_,y.mode,b,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=b9(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case UO:return _=e$(v.type,v.key,v.props,null,y.mode,_),_.ref=tS(y,null,v),_.return=y,_;case rb:return v=w9(v,y.mode,_),v.return=y,v;case Bm:var b=v._init;return f(y,b(v._payload),_)}if(iT(v)||Xx(v))return v=E1(v,y.mode,_,null),v.return=y,v;ZO(y,v)}return null}function d(y,v,_,b){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case UO:return _.key===E?u(y,v,_,b):null;case rb:return _.key===E?l(y,v,_,b):null;case Bm:return E=_._init,d(y,v,E(_._payload),b)}if(iT(_)||Xx(_))return E!==null?null:c(y,v,_,b,null);ZO(y,_)}return null}function h(y,v,_,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,a(v,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case UO:return y=y.get(b.key===null?_:b.key)||null,u(v,y,b,E);case rb:return y=y.get(b.key===null?_:b.key)||null,l(v,y,b,E);case Bm:var w=b._init;return h(y,v,_,w(b._payload),E)}if(iT(b)||Xx(b))return y=y.get(_)||null,c(v,y,b,E,null);ZO(v,b)}return null}function p(y,v,_,b){for(var E=null,w=null,x=v,S=v=0,P=null;x!==null&&S<_.length;S++){x.index>S?(P=x,x=null):P=x.sibling;var A=d(y,x,_[S],b);if(A===null){x===null&&(x=P);break}e&&x&&A.alternate===null&&t(y,x),v=s(A,v,S),w===null?E=A:w.sibling=A,w=A,x=P}if(S===_.length)return n(y,x),pi&&Ty(y,S),E;if(x===null){for(;S<_.length;S++)x=f(y,_[S],b),x!==null&&(v=s(x,v,S),w===null?E=x:w.sibling=x,w=x);return pi&&Ty(y,S),E}for(x=r(y,x);S<_.length;S++)P=h(x,y,S,_[S],b),P!==null&&(e&&P.alternate!==null&&x.delete(P.key===null?S:P.key),v=s(P,v,S),w===null?E=P:w.sibling=P,w=P);return e&&x.forEach(function(O){return t(y,O)}),pi&&Ty(y,S),E}function m(y,v,_,b){var E=Xx(_);if(typeof E!="function")throw Error(qe(150));if(_=E.call(_),_==null)throw Error(qe(151));for(var w=E=null,x=v,S=v=0,P=null,A=_.next();x!==null&&!A.done;S++,A=_.next()){x.index>S?(P=x,x=null):P=x.sibling;var O=d(y,x,A.value,b);if(O===null){x===null&&(x=P);break}e&&x&&O.alternate===null&&t(y,x),v=s(O,v,S),w===null?E=O:w.sibling=O,w=O,x=P}if(A.done)return n(y,x),pi&&Ty(y,S),E;if(x===null){for(;!A.done;S++,A=_.next())A=f(y,A.value,b),A!==null&&(v=s(A,v,S),w===null?E=A:w.sibling=A,w=A);return pi&&Ty(y,S),E}for(x=r(y,x);!A.done;S++,A=_.next())A=h(x,y,S,A.value,b),A!==null&&(e&&A.alternate!==null&&x.delete(A.key===null?S:A.key),v=s(A,v,S),w===null?E=A:w.sibling=A,w=A);return e&&x.forEach(function(z){return t(y,z)}),pi&&Ty(y,S),E}function g(y,v,_,b){if(typeof _=="object"&&_!==null&&_.type===ib&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case UO:e:{for(var E=_.key,w=v;w!==null;){if(w.key===E){if(E=_.type,E===ib){if(w.tag===7){n(y,w.sibling),v=i(w,_.props.children),v.return=y,y=v;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Bm&&Hse(E)===w.type){n(y,w.sibling),v=i(w,_.props),v.ref=tS(y,w,_),v.return=y,y=v;break e}n(y,w);break}else t(y,w);w=w.sibling}_.type===ib?(v=E1(_.props.children,y.mode,b,_.key),v.return=y,y=v):(b=e$(_.type,_.key,_.props,null,y.mode,b),b.ref=tS(y,v,_),b.return=y,y=b)}return o(y);case rb:e:{for(w=_.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=w9(_,y.mode,b),v.return=y,y=v}return o(y);case Bm:return w=_._init,g(y,v,w(_._payload),b)}if(iT(_))return p(y,v,_,b);if(Xx(_))return m(y,v,_,b);ZO(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=b9(_,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var _w=kEe(!0),$Ee=kEe(!1),GA={},Td=D0(GA),aC=D0(GA),uC=D0(GA);function t1(e){if(e===GA)throw Error(qe(174));return e}function PG(e,t){switch(Vr(uC,t),Vr(aC,e),Vr(Td,GA),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ez(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ez(t,e)}ni(Td),Vr(Td,t)}function bw(){ni(Td),ni(aC),ni(uC)}function REe(e){t1(uC.current);var t=t1(Td.current),n=Ez(t,e.type);t!==n&&(Vr(aC,e),Vr(Td,n))}function kG(e){aC.current===e&&(ni(Td),ni(aC))}var Ei=D0(0);function AR(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var p9=[];function $G(){for(var e=0;e<p9.length;e++)p9[e]._workInProgressVersionPrimary=null;p9.length=0}var Kk=rm.ReactCurrentDispatcher,m9=rm.ReactCurrentBatchConfig,Y1=0,xi=null,gs=null,Fs=null,IR=!1,e2=!1,lC=0,oYe=0;function Po(){throw Error(qe(321))}function RG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pf(e[n],t[n]))return!1;return!0}function NG(e,t,n,r,i,s){if(Y1=s,xi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kk.current=e===null||e.memoizedState===null?cYe:fYe,e=n(r,i),e2){s=0;do{if(e2=!1,lC=0,25<=s)throw Error(qe(301));s+=1,Fs=gs=null,t.updateQueue=null,Kk.current=dYe,e=n(r,i)}while(e2)}if(Kk.current=OR,t=gs!==null&&gs.next!==null,Y1=0,Fs=gs=xi=null,IR=!1,t)throw Error(qe(300));return e}function DG(){var e=lC!==0;return lC=0,e}function Wf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fs===null?xi.memoizedState=Fs=e:Fs=Fs.next=e,Fs}function ic(){if(gs===null){var e=xi.alternate;e=e!==null?e.memoizedState:null}else e=gs.next;var t=Fs===null?xi.memoizedState:Fs.next;if(t!==null)Fs=t,gs=e;else{if(e===null)throw Error(qe(310));gs=e,e={memoizedState:gs.memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},Fs===null?xi.memoizedState=Fs=e:Fs=Fs.next=e}return Fs}function cC(e,t){return typeof t=="function"?t(e):t}function g9(e){var t=ic(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Y1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,xi.lanes|=c,K1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,pf(r,t.memoizedState)||(hu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,xi.lanes|=s,K1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function y9(e){var t=ic(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);pf(s,t.memoizedState)||(hu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function NEe(){}function DEe(e,t){var n=xi,r=ic(),i=t(),s=!pf(r.memoizedState,i);if(s&&(r.memoizedState=i,hu=!0),r=r.queue,MG(FEe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Fs!==null&&Fs.memoizedState.tag&1){if(n.flags|=2048,fC(9,LEe.bind(null,n,r,i,t),void 0,null),Ys===null)throw Error(qe(349));Y1&30||MEe(n,t,i)}return i}function MEe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xi.updateQueue,t===null?(t={lastEffect:null,stores:null},xi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function LEe(e,t,n,r){t.value=n,t.getSnapshot=r,jEe(t)&&BEe(e)}function FEe(e,t,n){return n(function(){jEe(t)&&BEe(e)})}function jEe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pf(e,n)}catch{return!0}}function BEe(e){var t=kp(e,1);t!==null&&of(t,e,1,-1)}function qse(e){var t=Wf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cC,lastRenderedState:e},t.queue=e,e=e.dispatch=lYe.bind(null,xi,e),[t.memoizedState,e]}function fC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xi.updateQueue,t===null?(t={lastEffect:null,stores:null},xi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function zEe(){return ic().memoizedState}function Xk(e,t,n,r){var i=Wf();xi.flags|=e,i.memoizedState=fC(1|t,n,void 0,r===void 0?null:r)}function ZL(e,t,n,r){var i=ic();r=r===void 0?null:r;var s=void 0;if(gs!==null){var o=gs.memoizedState;if(s=o.destroy,r!==null&&RG(r,o.deps)){i.memoizedState=fC(t,n,s,r);return}}xi.flags|=e,i.memoizedState=fC(1|t,n,s,r)}function Wse(e,t){return Xk(8390656,8,e,t)}function MG(e,t){return ZL(2048,8,e,t)}function UEe(e,t){return ZL(4,2,e,t)}function VEe(e,t){return ZL(4,4,e,t)}function HEe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qEe(e,t,n){return n=n!=null?n.concat([e]):null,ZL(4,4,HEe.bind(null,t,e),n)}function LG(){}function WEe(e,t){var n=ic();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&RG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function GEe(e,t){var n=ic();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&RG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function YEe(e,t,n){return Y1&21?(pf(n,t)||(n=Qwe(),xi.lanes|=n,K1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hu=!0),e.memoizedState=n)}function aYe(e,t){var n=br;br=n!==0&&4>n?n:4,e(!0);var r=m9.transition;m9.transition={};try{e(!1),t()}finally{br=n,m9.transition=r}}function KEe(){return ic().memoizedState}function uYe(e,t,n){var r=Ig(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XEe(e))QEe(t,n);else if(n=AEe(e,t,n,r),n!==null){var i=Oa();of(n,e,r,i),JEe(n,t,r)}}function lYe(e,t,n){var r=Ig(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XEe(e))QEe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,pf(a,o)){var u=t.interleaved;u===null?(i.next=i,IG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=AEe(e,t,i,r),n!==null&&(i=Oa(),of(n,e,r,i),JEe(n,t,r))}}function XEe(e){var t=e.alternate;return e===xi||t!==null&&t===xi}function QEe(e,t){e2=IR=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function JEe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pG(e,n)}}var OR={readContext:rc,useCallback:Po,useContext:Po,useEffect:Po,useImperativeHandle:Po,useInsertionEffect:Po,useLayoutEffect:Po,useMemo:Po,useReducer:Po,useRef:Po,useState:Po,useDebugValue:Po,useDeferredValue:Po,useTransition:Po,useMutableSource:Po,useSyncExternalStore:Po,useId:Po,unstable_isNewReconciler:!1},cYe={readContext:rc,useCallback:function(e,t){return Wf().memoizedState=[e,t===void 0?null:t],e},useContext:rc,useEffect:Wse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xk(4194308,4,HEe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xk(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xk(4,2,e,t)},useMemo:function(e,t){var n=Wf();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wf();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uYe.bind(null,xi,e),[r.memoizedState,e]},useRef:function(e){var t=Wf();return e={current:e},t.memoizedState=e},useState:qse,useDebugValue:LG,useDeferredValue:function(e){return Wf().memoizedState=e},useTransition:function(){var e=qse(!1),t=e[0];return e=aYe.bind(null,e[1]),Wf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xi,i=Wf();if(pi){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),Ys===null)throw Error(qe(349));Y1&30||MEe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Wse(FEe.bind(null,r,s,e),[e]),r.flags|=2048,fC(9,LEe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Wf(),t=Ys.identifierPrefix;if(pi){var n=tp,r=ep;n=(r&~(1<<32-sf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=lC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oYe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fYe={readContext:rc,useCallback:WEe,useContext:rc,useEffect:MG,useImperativeHandle:qEe,useInsertionEffect:UEe,useLayoutEffect:VEe,useMemo:GEe,useReducer:g9,useRef:zEe,useState:function(){return g9(cC)},useDebugValue:LG,useDeferredValue:function(e){var t=ic();return YEe(t,gs.memoizedState,e)},useTransition:function(){var e=g9(cC)[0],t=ic().memoizedState;return[e,t]},useMutableSource:NEe,useSyncExternalStore:DEe,useId:KEe,unstable_isNewReconciler:!1},dYe={readContext:rc,useCallback:WEe,useContext:rc,useEffect:MG,useImperativeHandle:qEe,useInsertionEffect:UEe,useLayoutEffect:VEe,useMemo:GEe,useReducer:y9,useRef:zEe,useState:function(){return y9(cC)},useDebugValue:LG,useDeferredValue:function(e){var t=ic();return gs===null?t.memoizedState=e:YEe(t,gs.memoizedState,e)},useTransition:function(){var e=y9(cC)[0],t=ic().memoizedState;return[e,t]},useMutableSource:NEe,useSyncExternalStore:DEe,useId:KEe,unstable_isNewReconciler:!1};function ww(e,t){try{var n="",r=t;do n+=BWe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function v9(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hYe=typeof WeakMap=="function"?WeakMap:Map;function ZEe(e,t,n){n=pp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){kR||(kR=!0,tU=r),qz(e,t)},n}function exe(e,t,n){n=pp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){qz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qz(e,t),typeof r!="function"&&(Ag===null?Ag=new Set([this]):Ag.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Gse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hYe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=AYe.bind(null,e,t,n),t.then(e,e))}function Yse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pp(-1,1),t.tag=2,Cg(n,t,1))),n.lanes|=1),e)}var pYe=rm.ReactCurrentOwner,hu=!1;function ba(e,t,n,r){t.child=e===null?$Ee(t,null,n,r):_w(t,e.child,n,r)}function Xse(e,t,n,r,i){n=n.render;var s=t.ref;return Mb(t,i),r=NG(e,t,n,r,s,i),n=DG(),e!==null&&!hu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$p(e,t,i)):(pi&&n&&EG(t),t.flags|=1,ba(e,t,r,i),t.child)}function Qse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!qG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,txe(e,t,s,r,i)):(e=e$(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:rC,n(o,r)&&e.ref===t.ref)return $p(e,t,i)}return t.flags|=1,e=Og(s,r),e.ref=t.ref,e.return=t,t.child=e}function txe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(rC(s,r)&&e.ref===t.ref)if(hu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(hu=!0);else return t.lanes=e.lanes,$p(e,t,i)}return Wz(e,t,n,r,i)}function nxe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vr(pb,Wu),Wu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vr(pb,Wu),Wu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Vr(pb,Wu),Wu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Vr(pb,Wu),Wu|=r;return ba(e,t,i,n),t.child}function rxe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wz(e,t,n,r,i){var s=_u(n)?W1:sa.current;return s=yw(t,s),Mb(t,i),n=NG(e,t,n,r,s,i),r=DG(),e!==null&&!hu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$p(e,t,i)):(pi&&r&&EG(t),t.flags|=1,ba(e,t,n,i),t.child)}function Jse(e,t,n,r,i){if(_u(n)){var s=!0;wR(t)}else s=!1;if(Mb(t,i),t.stateNode===null)Qk(e,t),PEe(t,n,r),Hz(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=rc(l):(l=_u(n)?W1:sa.current,l=yw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Vse(t,o,r,l),zm=!1;var d=t.memoizedState;o.state=d,CR(t,r,o,i),u=t.memoizedState,a!==r||d!==u||vu.current||zm?(typeof c=="function"&&(Vz(t,n,c,r),u=t.memoizedState),(a=zm||Use(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,IEe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Lc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rc(u):(u=_u(n)?W1:sa.current,u=yw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Vse(t,o,r,u),zm=!1,d=t.memoizedState,o.state=d,CR(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||vu.current||zm?(typeof h=="function"&&(Vz(t,n,h,r),p=t.memoizedState),(l=zm||Use(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Gz(e,t,n,r,s,i)}function Gz(e,t,n,r,i,s){rxe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Lse(t,n,!1),$p(e,t,s);r=t.stateNode,pYe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=_w(t,e.child,null,s),t.child=_w(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Lse(t,n,!0),t.child}function ixe(e){var t=e.stateNode;t.pendingContext?Mse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mse(e,t.context,!1),PG(e,t.containerInfo)}function Zse(e,t,n,r,i){return vw(),SG(i),t.flags|=256,ba(e,t,n,r),t.child}var Yz={dehydrated:null,treeContext:null,retryLane:0};function Kz(e){return{baseLanes:e,cachePool:null,transitions:null}}function sxe(e,t,n){var r=t.pendingProps,i=Ei.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Vr(Ei,i&1),e===null)return zz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=n6(o,r,0,null),e=E1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Kz(n),t.memoizedState=Yz,e):FG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mYe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Og(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Og(a,s):(s=E1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Kz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Yz,r}return s=e.child,e=s.sibling,r=Og(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function FG(e,t){return t=n6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function eP(e,t,n,r){return r!==null&&SG(r),_w(t,e.child,null,n),e=FG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mYe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=v9(Error(qe(422))),eP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=n6({mode:"visible",children:r.children},i,0,null),s=E1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&_w(t,e.child,null,o),t.child.memoizedState=Kz(o),t.memoizedState=Yz,s);if(!(t.mode&1))return eP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=v9(s,r,void 0),eP(e,t,o,r)}if(a=(o&e.childLanes)!==0,hu||a){if(r=Ys,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kp(e,i),of(r,e,i,-1))}return HG(),r=v9(Error(qe(421))),eP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=IYe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,el=Tg(i.nextSibling),ol=t,pi=!0,Vc=null,e!==null&&(jl[Bl++]=ep,jl[Bl++]=tp,jl[Bl++]=G1,ep=e.id,tp=e.overflow,G1=t),t=FG(t,r.children),t.flags|=4096,t)}function eoe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Uz(e.return,t,n)}function _9(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function oxe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),r=Ei.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eoe(e,n,t);else if(e.tag===19)eoe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Vr(Ei,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&AR(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),_9(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&AR(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}_9(t,!0,n,null,s);break;case"together":_9(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $p(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),K1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=Og(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Og(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gYe(e,t,n){switch(t.tag){case 3:ixe(t),vw();break;case 5:REe(t);break;case 1:_u(t.type)&&wR(t);break;case 4:PG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Vr(SR,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Vr(Ei,Ei.current&1),t.flags|=128,null):n&t.child.childLanes?sxe(e,t,n):(Vr(Ei,Ei.current&1),e=$p(e,t,n),e!==null?e.sibling:null);Vr(Ei,Ei.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return oxe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vr(Ei,Ei.current),r)break;return null;case 22:case 23:return t.lanes=0,nxe(e,t,n)}return $p(e,t,n)}var axe,Xz,uxe,lxe;axe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xz=function(){};uxe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,t1(Td.current);var s=null;switch(n){case"input":i=vz(e,i),r=vz(e,r),s=[];break;case"select":i=Si({},i,{value:void 0}),r=Si({},r,{value:void 0}),s=[];break;case"textarea":i=wz(e,i),r=wz(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_R)}xz(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(X2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(X2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Yr("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};lxe=function(e,t,n,r){n!==r&&(t.flags|=4)};function nS(e,t){if(!pi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ko(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yYe(e,t,n){var r=t.pendingProps;switch(xG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ko(t),null;case 1:return _u(t.type)&&bR(),ko(t),null;case 3:return r=t.stateNode,bw(),ni(vu),ni(sa),$G(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(JO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vc!==null&&(iU(Vc),Vc=null))),Xz(e,t),ko(t),null;case 5:kG(t);var i=t1(uC.current);if(n=t.type,e!==null&&t.stateNode!=null)uxe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qe(166));return ko(t),null}if(e=t1(Td.current),JO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[id]=t,r[oC]=s,e=(t.mode&1)!==0,n){case"dialog":Yr("cancel",r),Yr("close",r);break;case"iframe":case"object":case"embed":Yr("load",r);break;case"video":case"audio":for(i=0;i<oT.length;i++)Yr(oT[i],r);break;case"source":Yr("error",r);break;case"img":case"image":case"link":Yr("error",r),Yr("load",r);break;case"details":Yr("toggle",r);break;case"input":lse(r,s),Yr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Yr("invalid",r);break;case"textarea":fse(r,s),Yr("invalid",r)}xz(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&QO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&QO(r.textContent,a,e),i=["children",""+a]):X2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Yr("scroll",r)}switch(n){case"input":VO(r),cse(r,s,!0);break;case"textarea":VO(r),dse(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=_R)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mwe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[id]=t,e[oC]=r,axe(e,t,!1,!1),t.stateNode=e;e:{switch(o=Sz(n,r),n){case"dialog":Yr("cancel",e),Yr("close",e),i=r;break;case"iframe":case"object":case"embed":Yr("load",e),i=r;break;case"video":case"audio":for(i=0;i<oT.length;i++)Yr(oT[i],e);i=r;break;case"source":Yr("error",e),i=r;break;case"img":case"image":case"link":Yr("error",e),Yr("load",e),i=r;break;case"details":Yr("toggle",e),i=r;break;case"input":lse(e,r),i=vz(e,r),Yr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Si({},r,{value:void 0}),Yr("invalid",e);break;case"textarea":fse(e,r),i=wz(e,r),Yr("invalid",e);break;default:i=r}xz(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?jwe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lwe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Q2(e,u):typeof u=="number"&&Q2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(X2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Yr("scroll",e):u!=null&&uG(e,s,u,o))}switch(n){case"input":VO(e),cse(e,r,!1);break;case"textarea":VO(e),dse(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Kg(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?$b(e,!!r.multiple,s,!1):r.defaultValue!=null&&$b(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=_R)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ko(t),null;case 6:if(e&&t.stateNode!=null)lxe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qe(166));if(n=t1(uC.current),t1(Td.current),JO(t)){if(r=t.stateNode,n=t.memoizedProps,r[id]=t,(s=r.nodeValue!==n)&&(e=ol,e!==null))switch(e.tag){case 3:QO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&QO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[id]=t,t.stateNode=r}return ko(t),null;case 13:if(ni(Ei),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pi&&el!==null&&t.mode&1&&!(t.flags&128))CEe(),vw(),t.flags|=98560,s=!1;else if(s=JO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(qe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[id]=t}else vw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ko(t),s=!1}else Vc!==null&&(iU(Vc),Vc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ei.current&1?ws===0&&(ws=3):HG())),t.updateQueue!==null&&(t.flags|=4),ko(t),null);case 4:return bw(),Xz(e,t),e===null&&iC(t.stateNode.containerInfo),ko(t),null;case 10:return AG(t.type._context),ko(t),null;case 17:return _u(t.type)&&bR(),ko(t),null;case 19:if(ni(Ei),s=t.memoizedState,s===null)return ko(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)nS(s,!1);else{if(ws!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=AR(e),o!==null){for(t.flags|=128,nS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vr(Ei,Ei.current&1|2),t.child}e=e.sibling}s.tail!==null&&Gi()>Ew&&(t.flags|=128,r=!0,nS(s,!1),t.lanes=4194304)}else{if(!r)if(e=AR(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),nS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pi)return ko(t),null}else 2*Gi()-s.renderingStartTime>Ew&&n!==1073741824&&(t.flags|=128,r=!0,nS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Gi(),t.sibling=null,n=Ei.current,Vr(Ei,r?n&1|2:n&1),t):(ko(t),null);case 22:case 23:return VG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wu&1073741824&&(ko(t),t.subtreeFlags&6&&(t.flags|=8192)):ko(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function vYe(e,t){switch(xG(t),t.tag){case 1:return _u(t.type)&&bR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bw(),ni(vu),ni(sa),$G(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kG(t),null;case 13:if(ni(Ei),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));vw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ni(Ei),null;case 4:return bw(),null;case 10:return AG(t.type._context),null;case 22:case 23:return VG(),null;case 24:return null;default:return null}}var tP=!1,qo=!1,_Ye=typeof WeakSet=="function"?WeakSet:Set,mt=null;function hb(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ri(e,t,r)}else n.current=null}function Qz(e,t,n){try{n()}catch(r){Ri(e,t,r)}}var toe=!1;function bYe(e,t){if(Nz=gR,e=hEe(),wG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dz={focusedElem:e,selectionRange:n},gR=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Lc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(b){Ri(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return p=toe,toe=!1,p}function t2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qz(t,n,s)}i=i.next}while(i!==r)}}function e6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Jz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cxe(e){var t=e.alternate;t!==null&&(e.alternate=null,cxe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[id],delete t[oC],delete t[Fz],delete t[nYe],delete t[rYe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fxe(e){return e.tag===5||e.tag===3||e.tag===4}function noe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fxe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_R));else if(r!==4&&(e=e.child,e!==null))for(Zz(e,t,n),e=e.sibling;e!==null;)Zz(e,t,n),e=e.sibling}function eU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(eU(e,t,n),e=e.sibling;e!==null;)eU(e,t,n),e=e.sibling}var ao=null,jc=!1;function Tm(e,t,n){for(n=n.child;n!==null;)dxe(e,t,n),n=n.sibling}function dxe(e,t,n){if(Sd&&typeof Sd.onCommitFiberUnmount=="function")try{Sd.onCommitFiberUnmount(WL,n)}catch{}switch(n.tag){case 5:qo||hb(n,t);case 6:var r=ao,i=jc;ao=null,Tm(e,t,n),ao=r,jc=i,ao!==null&&(jc?(e=ao,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ao.removeChild(n.stateNode));break;case 18:ao!==null&&(jc?(e=ao,n=n.stateNode,e.nodeType===8?d9(e.parentNode,n):e.nodeType===1&&d9(e,n),tC(e)):d9(ao,n.stateNode));break;case 4:r=ao,i=jc,ao=n.stateNode.containerInfo,jc=!0,Tm(e,t,n),ao=r,jc=i;break;case 0:case 11:case 14:case 15:if(!qo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qz(n,t,o),i=i.next}while(i!==r)}Tm(e,t,n);break;case 1:if(!qo&&(hb(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ri(n,t,a)}Tm(e,t,n);break;case 21:Tm(e,t,n);break;case 22:n.mode&1?(qo=(r=qo)||n.memoizedState!==null,Tm(e,t,n),qo=r):Tm(e,t,n);break;default:Tm(e,t,n)}}function roe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _Ye),t.forEach(function(r){var i=OYe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ac(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ao=a.stateNode,jc=!1;break e;case 3:ao=a.stateNode.containerInfo,jc=!0;break e;case 4:ao=a.stateNode.containerInfo,jc=!0;break e}a=a.return}if(ao===null)throw Error(qe(160));dxe(s,o,i),ao=null,jc=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ri(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hxe(t,e),t=t.sibling}function hxe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ac(t,e),Ff(e),r&4){try{t2(3,e,e.return),e6(3,e)}catch(m){Ri(e,e.return,m)}try{t2(5,e,e.return)}catch(m){Ri(e,e.return,m)}}break;case 1:Ac(t,e),Ff(e),r&512&&n!==null&&hb(n,n.return);break;case 5:if(Ac(t,e),Ff(e),r&512&&n!==null&&hb(n,n.return),e.flags&32){var i=e.stateNode;try{Q2(i,"")}catch(m){Ri(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Nwe(i,s),Sz(a,o);var l=Sz(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?jwe(i,f):c==="dangerouslySetInnerHTML"?Lwe(i,f):c==="children"?Q2(i,f):uG(i,c,f,l)}switch(a){case"input":_z(i,s);break;case"textarea":Dwe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?$b(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?$b(i,!!s.multiple,s.defaultValue,!0):$b(i,!!s.multiple,s.multiple?[]:"",!1))}i[oC]=s}catch(m){Ri(e,e.return,m)}}break;case 6:if(Ac(t,e),Ff(e),r&4){if(e.stateNode===null)throw Error(qe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ri(e,e.return,m)}}break;case 3:if(Ac(t,e),Ff(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tC(t.containerInfo)}catch(m){Ri(e,e.return,m)}break;case 4:Ac(t,e),Ff(e);break;case 13:Ac(t,e),Ff(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zG=Gi())),r&4&&roe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(qo=(l=qo)||c,Ac(t,e),qo=l):Ac(t,e),Ff(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(mt=e,c=e.child;c!==null;){for(f=mt=c;mt!==null;){switch(d=mt,h=d.child,d.tag){case 0:case 11:case 14:case 15:t2(4,d,d.return);break;case 1:hb(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ri(r,n,m)}}break;case 5:hb(d,d.return);break;case 22:if(d.memoizedState!==null){soe(f);continue}}h!==null?(h.return=d,mt=h):soe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Fwe("display",o))}catch(m){Ri(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ri(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ac(t,e),Ff(e),r&4&&roe(e);break;case 21:break;default:Ac(t,e),Ff(e)}}function Ff(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fxe(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Q2(i,""),r.flags&=-33);var s=noe(e);eU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=noe(e);Zz(e,a,o);break;default:throw Error(qe(161))}}catch(u){Ri(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wYe(e,t,n){mt=e,pxe(e)}function pxe(e,t,n){for(var r=(e.mode&1)!==0;mt!==null;){var i=mt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tP;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||qo;a=tP;var l=qo;if(tP=o,(qo=u)&&!l)for(mt=i;mt!==null;)o=mt,u=o.child,o.tag===22&&o.memoizedState!==null?ooe(i):u!==null?(u.return=o,mt=u):ooe(i);for(;s!==null;)mt=s,pxe(s),s=s.sibling;mt=i,tP=a,qo=l}ioe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,mt=s):ioe(e)}}function ioe(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qo||e6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qo)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Lc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&zse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&tC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}qo||t.flags&512&&Jz(t)}catch(d){Ri(t,t.return,d)}}if(t===e){mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,mt=n;break}mt=t.return}}function soe(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,mt=n;break}mt=t.return}}function ooe(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{e6(4,t)}catch(u){Ri(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ri(t,i,u)}}var s=t.return;try{Jz(t)}catch(u){Ri(t,s,u)}break;case 5:var o=t.return;try{Jz(t)}catch(u){Ri(t,o,u)}}}catch(u){Ri(t,t.return,u)}if(t===e){mt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,mt=a;break}mt=t.return}}var EYe=Math.ceil,PR=rm.ReactCurrentDispatcher,jG=rm.ReactCurrentOwner,Zl=rm.ReactCurrentBatchConfig,Qn=0,Ys=null,ss=null,_o=0,Wu=0,pb=D0(0),ws=0,dC=null,K1=0,t6=0,BG=0,n2=null,iu=null,zG=0,Ew=1/0,Mh=null,kR=!1,tU=null,Ag=null,nP=!1,ag=null,$R=0,r2=0,nU=null,Jk=-1,Zk=0;function Oa(){return Qn&6?Gi():Jk!==-1?Jk:Jk=Gi()}function Ig(e){return e.mode&1?Qn&2&&_o!==0?_o&-_o:sYe.transition!==null?(Zk===0&&(Zk=Qwe()),Zk):(e=br,e!==0||(e=window.event,e=e===void 0?16:iEe(e.type)),e):1}function of(e,t,n,r){if(50<r2)throw r2=0,nU=null,Error(qe(185));HA(e,n,r),(!(Qn&2)||e!==Ys)&&(e===Ys&&(!(Qn&2)&&(t6|=n),ws===4&&Qm(e,_o)),bu(e,r),n===1&&Qn===0&&!(t.mode&1)&&(Ew=Gi()+500,QL&&M0()))}function bu(e,t){var n=e.callbackNode;sGe(e,t);var r=mR(e,e===Ys?_o:0);if(r===0)n!==null&&mse(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mse(n),t===1)e.tag===0?iYe(aoe.bind(null,e)):xEe(aoe.bind(null,e)),eYe(function(){!(Qn&6)&&M0()}),n=null;else{switch(Jwe(r)){case 1:n=hG;break;case 4:n=Kwe;break;case 16:n=pR;break;case 536870912:n=Xwe;break;default:n=pR}n=Exe(n,mxe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function mxe(e,t){if(Jk=-1,Zk=0,Qn&6)throw Error(qe(327));var n=e.callbackNode;if(Lb()&&e.callbackNode!==n)return null;var r=mR(e,e===Ys?_o:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=RR(e,r);else{t=r;var i=Qn;Qn|=2;var s=yxe();(Ys!==e||_o!==t)&&(Mh=null,Ew=Gi()+500,w1(e,t));do try{TYe();break}catch(a){gxe(e,a)}while(!0);CG(),PR.current=s,Qn=i,ss!==null?t=0:(Ys=null,_o=0,t=ws)}if(t!==0){if(t===2&&(i=Oz(e),i!==0&&(r=i,t=rU(e,i))),t===1)throw n=dC,w1(e,0),Qm(e,r),bu(e,Gi()),n;if(t===6)Qm(e,r);else{if(i=e.current.alternate,!(r&30)&&!xYe(i)&&(t=RR(e,r),t===2&&(s=Oz(e),s!==0&&(r=s,t=rU(e,s))),t===1))throw n=dC,w1(e,0),Qm(e,r),bu(e,Gi()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(qe(345));case 2:Cy(e,iu,Mh);break;case 3:if(Qm(e,r),(r&130023424)===r&&(t=zG+500-Gi(),10<t)){if(mR(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Oa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Lz(Cy.bind(null,e,iu,Mh),t);break}Cy(e,iu,Mh);break;case 4:if(Qm(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-sf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Gi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EYe(r/1960))-r,10<r){e.timeoutHandle=Lz(Cy.bind(null,e,iu,Mh),r);break}Cy(e,iu,Mh);break;case 5:Cy(e,iu,Mh);break;default:throw Error(qe(329))}}}return bu(e,Gi()),e.callbackNode===n?mxe.bind(null,e):null}function rU(e,t){var n=n2;return e.current.memoizedState.isDehydrated&&(w1(e,t).flags|=256),e=RR(e,t),e!==2&&(t=iu,iu=n,t!==null&&iU(t)),e}function iU(e){iu===null?iu=e:iu.push.apply(iu,e)}function xYe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qm(e,t){for(t&=~BG,t&=~t6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sf(t),r=1<<n;e[n]=-1,t&=~r}}function aoe(e){if(Qn&6)throw Error(qe(327));Lb();var t=mR(e,0);if(!(t&1))return bu(e,Gi()),null;var n=RR(e,t);if(e.tag!==0&&n===2){var r=Oz(e);r!==0&&(t=r,n=rU(e,r))}if(n===1)throw n=dC,w1(e,0),Qm(e,t),bu(e,Gi()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cy(e,iu,Mh),bu(e,Gi()),null}function UG(e,t){var n=Qn;Qn|=1;try{return e(t)}finally{Qn=n,Qn===0&&(Ew=Gi()+500,QL&&M0())}}function X1(e){ag!==null&&ag.tag===0&&!(Qn&6)&&Lb();var t=Qn;Qn|=1;var n=Zl.transition,r=br;try{if(Zl.transition=null,br=1,e)return e()}finally{br=r,Zl.transition=n,Qn=t,!(Qn&6)&&M0()}}function VG(){Wu=pb.current,ni(pb)}function w1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ZGe(n)),ss!==null)for(n=ss.return;n!==null;){var r=n;switch(xG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bR();break;case 3:bw(),ni(vu),ni(sa),$G();break;case 5:kG(r);break;case 4:bw();break;case 13:ni(Ei);break;case 19:ni(Ei);break;case 10:AG(r.type._context);break;case 22:case 23:VG()}n=n.return}if(Ys=e,ss=e=Og(e.current,null),_o=Wu=t,ws=0,dC=null,BG=t6=K1=0,iu=n2=null,e1!==null){for(t=0;t<e1.length;t++)if(n=e1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}e1=null}return e}function gxe(e,t){do{var n=ss;try{if(CG(),Kk.current=OR,IR){for(var r=xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}IR=!1}if(Y1=0,Fs=gs=xi=null,e2=!1,lC=0,jG.current=null,n===null||n.return===null){ws=1,dC=t,ss=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=_o,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Yse(o);if(h!==null){h.flags&=-257,Kse(h,o,a,s,t),h.mode&1&&Gse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Gse(s,l,t),HG();break e}u=Error(qe(426))}}else if(pi&&a.mode&1){var g=Yse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Kse(g,o,a,s,t),SG(ww(u,a));break e}}s=u=ww(u,a),ws!==4&&(ws=2),n2===null?n2=[s]:n2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=ZEe(s,u,t);Bse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ag===null||!Ag.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=exe(s,a,t);Bse(s,b);break e}}s=s.return}while(s!==null)}_xe(n)}catch(E){t=E,ss===n&&n!==null&&(ss=n=n.return);continue}break}while(!0)}function yxe(){var e=PR.current;return PR.current=OR,e===null?OR:e}function HG(){(ws===0||ws===3||ws===2)&&(ws=4),Ys===null||!(K1&268435455)&&!(t6&268435455)||Qm(Ys,_o)}function RR(e,t){var n=Qn;Qn|=2;var r=yxe();(Ys!==e||_o!==t)&&(Mh=null,w1(e,t));do try{SYe();break}catch(i){gxe(e,i)}while(!0);if(CG(),Qn=n,PR.current=r,ss!==null)throw Error(qe(261));return Ys=null,_o=0,ws}function SYe(){for(;ss!==null;)vxe(ss)}function TYe(){for(;ss!==null&&!XWe();)vxe(ss)}function vxe(e){var t=wxe(e.alternate,e,Wu);e.memoizedProps=e.pendingProps,t===null?_xe(e):ss=t,jG.current=null}function _xe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vYe(n,t),n!==null){n.flags&=32767,ss=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ws=6,ss=null;return}}else if(n=yYe(n,t,Wu),n!==null){ss=n;return}if(t=t.sibling,t!==null){ss=t;return}ss=t=e}while(t!==null);ws===0&&(ws=5)}function Cy(e,t,n){var r=br,i=Zl.transition;try{Zl.transition=null,br=1,CYe(e,t,n,r)}finally{Zl.transition=i,br=r}return null}function CYe(e,t,n,r){do Lb();while(ag!==null);if(Qn&6)throw Error(qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(oGe(e,s),e===Ys&&(ss=Ys=null,_o=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nP||(nP=!0,Exe(pR,function(){return Lb(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zl.transition,Zl.transition=null;var o=br;br=1;var a=Qn;Qn|=4,jG.current=null,bYe(e,n),hxe(n,e),WGe(Dz),gR=!!Nz,Dz=Nz=null,e.current=n,wYe(n),QWe(),Qn=a,br=o,Zl.transition=s}else e.current=n;if(nP&&(nP=!1,ag=e,$R=i),s=e.pendingLanes,s===0&&(Ag=null),eGe(n.stateNode),bu(e,Gi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kR)throw kR=!1,e=tU,tU=null,e;return $R&1&&e.tag!==0&&Lb(),s=e.pendingLanes,s&1?e===nU?r2++:(r2=0,nU=e):r2=0,M0(),null}function Lb(){if(ag!==null){var e=Jwe($R),t=Zl.transition,n=br;try{if(Zl.transition=null,br=16>e?16:e,ag===null)var r=!1;else{if(e=ag,ag=null,$R=0,Qn&6)throw Error(qe(331));var i=Qn;for(Qn|=4,mt=e.current;mt!==null;){var s=mt,o=s.child;if(mt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(mt=l;mt!==null;){var c=mt;switch(c.tag){case 0:case 11:case 15:t2(8,c,s)}var f=c.child;if(f!==null)f.return=c,mt=f;else for(;mt!==null;){c=mt;var d=c.sibling,h=c.return;if(cxe(c),c===l){mt=null;break}if(d!==null){d.return=h,mt=d;break}mt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}mt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,mt=o;else e:for(;mt!==null;){if(s=mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:t2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,mt=y;break e}mt=s.return}}var v=e.current;for(mt=v;mt!==null;){o=mt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,mt=_;else e:for(o=v;mt!==null;){if(a=mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:e6(9,a)}}catch(E){Ri(a,a.return,E)}if(a===o){mt=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,mt=b;break e}mt=a.return}}if(Qn=i,M0(),Sd&&typeof Sd.onPostCommitFiberRoot=="function")try{Sd.onPostCommitFiberRoot(WL,e)}catch{}r=!0}return r}finally{br=n,Zl.transition=t}}return!1}function uoe(e,t,n){t=ww(n,t),t=ZEe(e,t,1),e=Cg(e,t,1),t=Oa(),e!==null&&(HA(e,1,t),bu(e,t))}function Ri(e,t,n){if(e.tag===3)uoe(e,e,n);else for(;t!==null;){if(t.tag===3){uoe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ag===null||!Ag.has(r))){e=ww(n,e),e=exe(t,e,1),t=Cg(t,e,1),e=Oa(),t!==null&&(HA(t,1,e),bu(t,e));break}}t=t.return}}function AYe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Oa(),e.pingedLanes|=e.suspendedLanes&n,Ys===e&&(_o&n)===n&&(ws===4||ws===3&&(_o&130023424)===_o&&500>Gi()-zG?w1(e,0):BG|=n),bu(e,t)}function bxe(e,t){t===0&&(e.mode&1?(t=WO,WO<<=1,!(WO&130023424)&&(WO=4194304)):t=1);var n=Oa();e=kp(e,t),e!==null&&(HA(e,t,n),bu(e,n))}function IYe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bxe(e,n)}function OYe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(t),bxe(e,n)}var wxe;wxe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vu.current)hu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return hu=!1,gYe(e,t,n);hu=!!(e.flags&131072)}else hu=!1,pi&&t.flags&1048576&&SEe(t,xR,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qk(e,t),e=t.pendingProps;var i=yw(t,sa.current);Mb(t,n),i=NG(null,t,r,e,i,n);var s=DG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_u(r)?(s=!0,wR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,OG(t),i.updater=JL,t.stateNode=i,i._reactInternals=t,Hz(t,r,e,n),t=Gz(null,t,r,!0,s,n)):(t.tag=0,pi&&s&&EG(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=kYe(r),e=Lc(r,e),i){case 0:t=Wz(null,t,r,e,n);break e;case 1:t=Jse(null,t,r,e,n);break e;case 11:t=Xse(null,t,r,e,n);break e;case 14:t=Qse(null,t,r,Lc(r.type,e),n);break e}throw Error(qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Lc(r,i),Wz(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Lc(r,i),Jse(e,t,r,i,n);case 3:e:{if(ixe(t),e===null)throw Error(qe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,IEe(e,t),CR(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ww(Error(qe(423)),t),t=Zse(e,t,r,n,i);break e}else if(r!==i){i=ww(Error(qe(424)),t),t=Zse(e,t,r,n,i);break e}else for(el=Tg(t.stateNode.containerInfo.firstChild),ol=t,pi=!0,Vc=null,n=$Ee(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vw(),r===i){t=$p(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return REe(t),e===null&&zz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Mz(r,i)?o=null:s!==null&&Mz(r,s)&&(t.flags|=32),rxe(e,t),ba(e,t,o,n),t.child;case 6:return e===null&&zz(t),null;case 13:return sxe(e,t,n);case 4:return PG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_w(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Lc(r,i),Xse(e,t,r,i,n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:return ba(e,t,t.pendingProps.children,n),t.child;case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Vr(SR,r._currentValue),r._currentValue=o,s!==null)if(pf(s.value,o)){if(s.children===i.children&&!vu.current){t=$p(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=pp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Uz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Mb(t,n),i=rc(i),r=r(i),t.flags|=1,ba(e,t,r,n),t.child;case 14:return r=t.type,i=Lc(r,t.pendingProps),i=Lc(r.type,i),Qse(e,t,r,i,n);case 15:return txe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Lc(r,i),Qk(e,t),t.tag=1,_u(r)?(e=!0,wR(t)):e=!1,Mb(t,n),PEe(t,r,i),Hz(t,r,i,n),Gz(null,t,r,!0,e,n);case 19:return oxe(e,t,n);case 22:return nxe(e,t,n)}throw Error(qe(156,t.tag))};function Exe(e,t){return Ywe(e,t)}function PYe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yl(e,t,n,r){return new PYe(e,t,n,r)}function qG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kYe(e){if(typeof e=="function")return qG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cG)return 11;if(e===fG)return 14}return 2}function Og(e,t){var n=e.alternate;return n===null?(n=Yl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function e$(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")qG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ib:return E1(n.children,i,s,t);case lG:o=8,i|=8;break;case pz:return e=Yl(12,n,t,i|2),e.elementType=pz,e.lanes=s,e;case mz:return e=Yl(13,n,t,i),e.elementType=mz,e.lanes=s,e;case gz:return e=Yl(19,n,t,i),e.elementType=gz,e.lanes=s,e;case kwe:return n6(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Owe:o=10;break e;case Pwe:o=9;break e;case cG:o=11;break e;case fG:o=14;break e;case Bm:o=16,r=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=Yl(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function E1(e,t,n,r){return e=Yl(7,e,r,t),e.lanes=n,e}function n6(e,t,n,r){return e=Yl(22,e,r,t),e.elementType=kwe,e.lanes=n,e.stateNode={isHidden:!1},e}function b9(e,t,n){return e=Yl(6,e,null,t),e.lanes=n,e}function w9(e,t,n){return t=Yl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $Ye(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=t9(0),this.expirationTimes=t9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=t9(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function WG(e,t,n,r,i,s,o,a,u){return e=new $Ye(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Yl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},OG(s),e}function RYe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rb,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xxe(e){if(!e)return Xg;e=e._reactInternals;e:{if(Nv(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_u(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(_u(n))return EEe(e,n,t)}return t}function Sxe(e,t,n,r,i,s,o,a,u){return e=WG(n,r,!0,e,i,s,o,a,u),e.context=xxe(null),n=e.current,r=Oa(),i=Ig(n),s=pp(r,i),s.callback=t??null,Cg(n,s,i),e.current.lanes=i,HA(e,i,r),bu(e,r),e}function r6(e,t,n,r){var i=t.current,s=Oa(),o=Ig(i);return n=xxe(n),t.context===null?t.context=n:t.pendingContext=n,t=pp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Cg(i,t,o),e!==null&&(of(e,i,o,s),Yk(e,i,o)),o}function NR(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function loe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function GG(e,t){loe(e,t),(e=e.alternate)&&loe(e,t)}function NYe(){return null}var Txe=typeof reportError=="function"?reportError:function(e){console.error(e)};function YG(e){this._internalRoot=e}i6.prototype.render=YG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));r6(e,t,null,null)};i6.prototype.unmount=YG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;X1(function(){r6(null,e,null,null)}),t[Pp]=null}};function i6(e){this._internalRoot=e}i6.prototype.unstable_scheduleHydration=function(e){if(e){var t=tEe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xm.length&&t!==0&&t<Xm[n].priority;n++);Xm.splice(n,0,e),n===0&&rEe(e)}};function KG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function s6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function coe(){}function DYe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=NR(o);s.call(l)}}var o=Sxe(t,r,e,0,null,!1,!1,"",coe);return e._reactRootContainer=o,e[Pp]=o.current,iC(e.nodeType===8?e.parentNode:e),X1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=NR(u);a.call(l)}}var u=WG(e,0,!1,null,null,!1,!1,"",coe);return e._reactRootContainer=u,e[Pp]=u.current,iC(e.nodeType===8?e.parentNode:e),X1(function(){r6(t,u,n,r)}),u}function o6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=NR(o);a.call(u)}}r6(t,o,e,i)}else o=DYe(n,t,e,i,r);return NR(o)}Zwe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=sT(t.pendingLanes);n!==0&&(pG(t,n|1),bu(t,Gi()),!(Qn&6)&&(Ew=Gi()+500,M0()))}break;case 13:X1(function(){var r=kp(e,1);if(r!==null){var i=Oa();of(r,e,1,i)}}),GG(e,1)}};mG=function(e){if(e.tag===13){var t=kp(e,134217728);if(t!==null){var n=Oa();of(t,e,134217728,n)}GG(e,134217728)}};eEe=function(e){if(e.tag===13){var t=Ig(e),n=kp(e,t);if(n!==null){var r=Oa();of(n,e,t,r)}GG(e,t)}};tEe=function(){return br};nEe=function(e,t){var n=br;try{return br=e,t()}finally{br=n}};Cz=function(e,t,n){switch(t){case"input":if(_z(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=XL(r);if(!i)throw Error(qe(90));Rwe(r),_z(r,i)}}}break;case"textarea":Dwe(e,n);break;case"select":t=n.value,t!=null&&$b(e,!!n.multiple,t,!1)}};Uwe=UG;Vwe=X1;var MYe={usingClientEntryPoint:!1,Events:[WA,ub,XL,Bwe,zwe,UG]},rS={findFiberByHostInstance:Zy,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},LYe={bundleType:rS.bundleType,version:rS.version,rendererPackageName:rS.rendererPackageName,rendererConfig:rS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wwe(e),e===null?null:e.stateNode},findFiberByHostInstance:rS.findFiberByHostInstance||NYe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rP.isDisabled&&rP.supportsFiber)try{WL=rP.inject(LYe),Sd=rP}catch{}}xl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MYe;xl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KG(t))throw Error(qe(200));return RYe(e,t,null,n)};xl.createRoot=function(e,t){if(!KG(e))throw Error(qe(299));var n=!1,r="",i=Txe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=WG(e,1,!1,null,null,n,!1,r,i),e[Pp]=t.current,iC(e.nodeType===8?e.parentNode:e),new YG(t)};xl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=Wwe(t),e=e===null?null:e.stateNode,e};xl.flushSync=function(e){return X1(e)};xl.hydrate=function(e,t,n){if(!s6(t))throw Error(qe(200));return o6(null,e,t,!0,n)};xl.hydrateRoot=function(e,t,n){if(!KG(e))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Txe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Sxe(t,null,e,1,n??null,i,!1,s,o),e[Pp]=t.current,iC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new i6(t)};xl.render=function(e,t,n){if(!s6(t))throw Error(qe(200));return o6(null,e,t,!1,n)};xl.unmountComponentAtNode=function(e){if(!s6(e))throw Error(qe(40));return e._reactRootContainer?(X1(function(){o6(null,null,e,!1,function(){e._reactRootContainer=null,e[Pp]=null})}),!0):!1};xl.unstable_batchedUpdates=UG;xl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!s6(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return o6(e,t,n,!1,r)};xl.version="18.2.0-next-9e3b772b8-20220608";function Cxe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cxe)}catch(e){console.error(e)}}Cxe(),Swe.exports=xl;var Dv=Swe.exports,foe=Dv;dz.createRoot=foe.createRoot,dz.hydrateRoot=foe.hydrateRoot;const Axe=C.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Ru=()=>C.useContext(Axe);function FYe({children:e}){const[t,n]=N.useState(void 0),r=N.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return I.jsx(Axe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hC(){return hC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hC.apply(this,arguments)}var ug;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ug||(ug={}));const doe="popstate";function jYe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return sU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ixe(i)}return zYe(t,n,null,e)}function as(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function XG(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BYe(){return Math.random().toString(36).substr(2,8)}function hoe(e,t){return{usr:e.state,key:e.key,idx:t}}function sU(e,t,n,r){return n===void 0&&(n=null),hC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?FE(t):t,{state:n,key:t&&t.key||r||BYe()})}function Ixe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function FE(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zYe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ug.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(hC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=ug.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=ug.Push;let v=sU(m.location,g,y);n&&n(v,g),l=c()+1;let _=hoe(v,l),b=m.createHref(v);try{o.pushState(_,"",b)}catch{i.location.assign(b)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=ug.Replace;let v=sU(m.location,g,y);n&&n(v,g),l=c();let _=hoe(v,l),b=m.createHref(v);o.replaceState(_,"",b),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:Ixe(g);return as(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(doe,f),u=g,()=>{i.removeEventListener(doe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var poe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(poe||(poe={}));function UYe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?FE(t):t,i=kxe(r.pathname||"/",n);if(i==null)return null;let s=Oxe(e);VYe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=JYe(s[a],tKe(i));return o}function Oxe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(as(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Pg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(as(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Oxe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:XYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Pxe(s.path))i(s,o,u)}),t}function Pxe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Pxe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function VYe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:QYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const HYe=/^:\w+$/,qYe=3,WYe=2,GYe=1,YYe=10,KYe=-2,moe=e=>e==="*";function XYe(e,t){let n=e.split("/"),r=n.length;return n.some(moe)&&(r+=KYe),t&&(r+=WYe),n.filter(i=>!moe(i)).reduce((i,s)=>i+(HYe.test(s)?qYe:s===""?GYe:YYe),r)}function QYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function JYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=ZYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Pg([i,c.pathname]),pathnameBase:sKe(Pg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Pg([i,c.pathnameBase]))}return s}function ZYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=eKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=nKe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function eKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),XG(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function tKe(e){try{return decodeURI(e)}catch(t){return XG(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function nKe(e,t){try{return decodeURIComponent(e)}catch(n){return XG(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function kxe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function rKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?FE(e):e;return{pathname:n?n.startsWith("/")?n:iKe(n,t):t,search:oKe(r),hash:aKe(i)}}function iKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function E9(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $xe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Rxe(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=FE(e):(i=hC({},e),as(!i.pathname||!i.pathname.includes("?"),E9("?","pathname","search",i)),as(!i.pathname||!i.pathname.includes("#"),E9("#","pathname","hash",i)),as(!i.search||!i.search.includes("#"),E9("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=rKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Pg=e=>e.join("/").replace(/\/\/+/g,"/"),sKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,aKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Nxe=["post","put","patch","delete"];new Set(Nxe);const lKe=["get",...Nxe];new Set(lKe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cKe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const fKe=typeof Object.is=="function"?Object.is:cKe,{useState:dKe,useEffect:hKe,useLayoutEffect:pKe,useDebugValue:mKe}=q1;function gKe(e,t,n){const r=t(),[{inst:i},s]=dKe({inst:{value:r,getSnapshot:t}});return pKe(()=>{i.value=r,i.getSnapshot=t,x9(i)&&s({inst:i})},[e,r,t]),hKe(()=>(x9(i)&&s({inst:i}),e(()=>{x9(i)&&s({inst:i})})),[e]),mKe(r),r}function x9(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!fKe(n,r)}catch{return!0}}function yKe(e,t,n){return t()}const vKe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_Ke=!vKe,bKe=_Ke?yKe:gKe;"useSyncExternalStore"in q1&&(e=>e.useSyncExternalStore)(q1);const Dxe=C.createContext(null),QG=C.createContext(null),a6=C.createContext(null),u6=C.createContext(null),L0=C.createContext({outlet:null,matches:[]}),Mxe=C.createContext(null);function oU(){return oU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oU.apply(this,arguments)}function wKe(e,t){let{relative:n}=t===void 0?{}:t;jE()||as(!1);let{basename:r,navigator:i}=C.useContext(a6),{hash:s,pathname:o,search:a}=SKe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Pg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function jE(){return C.useContext(u6)!=null}function YA(){return jE()||as(!1),C.useContext(u6).location}function im(){jE()||as(!1);let{basename:e,navigator:t}=C.useContext(a6),{matches:n}=C.useContext(L0),{pathname:r}=YA(),i=JSON.stringify($xe(n).map(a=>a.pathnameBase)),s=C.useRef(!1);return C.useEffect(()=>{s.current=!0}),C.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=Rxe(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:Pg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const EKe=C.createContext(null);function xKe(e){let t=C.useContext(L0).outlet;return t&&C.createElement(EKe.Provider,{value:e},t)}function xw(){let{matches:e}=C.useContext(L0),t=e[e.length-1];return t?t.params:{}}function SKe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=C.useContext(L0),{pathname:i}=YA(),s=JSON.stringify($xe(r).map(o=>o.pathnameBase));return C.useMemo(()=>Rxe(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function Lxe(e,t){jE()||as(!1);let{navigator:n}=C.useContext(a6),r=C.useContext(QG),{matches:i}=C.useContext(L0),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=YA(),l;if(t){var c;let m=typeof t=="string"?FE(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||as(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=UYe(e,{pathname:d}),p=IKe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Pg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Pg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?C.createElement(u6.Provider,{value:{location:oU({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:ug.Pop}},p):p}function TKe(){let e=$Ke(),t=uKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,s)}class CKe extends C.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?C.createElement(L0.Provider,{value:this.props.routeContext},C.createElement(Mxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AKe(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(Dxe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(L0.Provider,{value:t},r)}function IKe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||as(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=C.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=C.createElement(TKe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=C.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),C.createElement(AKe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?C.createElement(CKe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var goe;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(goe||(goe={}));var DR;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(DR||(DR={}));function OKe(e){let t=C.useContext(QG);return t||as(!1),t}function PKe(e){let t=C.useContext(L0);return t||as(!1),t}function kKe(e){let t=PKe(),n=t.matches[t.matches.length-1];return n.route.id||as(!1),n.route.id}function $Ke(){var e;let t=C.useContext(Mxe),n=OKe(DR.UseRouteError),r=kKe(DR.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function JG(e){let{to:t,replace:n,state:r,relative:i}=e;jE()||as(!1);let s=C.useContext(QG),o=im();return C.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function RKe(e){return xKe(e.context)}function Nh(e){as(!1)}function NKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=ug.Pop,navigator:s,static:o=!1}=e;jE()&&as(!1);let a=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=FE(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=C.useMemo(()=>{let m=kxe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:C.createElement(a6.Provider,{value:u},C.createElement(u6.Provider,{children:n,value:p}))}function DKe(e){let{children:t,location:n}=e,r=C.useContext(Dxe),i=r&&!t?r.router.routes:aU(t);return Lxe(i,n)}var yoe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(yoe||(yoe={}));new Promise(()=>{});function aU(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,aU(r.props.children,s));return}r.type!==Nh&&as(!1),!r.props.index||!r.props.children||as(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=aU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function MKe(e,t){let n=uU(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function LKe(e){let{basename:t,children:n,window:r}=e,i=C.useRef();i.current==null&&(i.current=jYe({window:r,v5Compat:!0}));let s=i.current,[o,a]=C.useState({action:s.action,location:s.location});return C.useLayoutEffect(()=>s.listen(a),[s]),C.createElement(NKe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var voe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(voe||(voe={}));var _oe;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_oe||(_oe={}));function ZG(e){let t=C.useRef(uU(e)),n=C.useRef(!1),r=YA(),i=C.useMemo(()=>MKe(r.search,n.current?null:t.current),[r.search]),s=im(),o=C.useCallback((a,u)=>{const l=uU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function MR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function FKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function jKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function BKe(e,t,n){return MR(e,n)===MR(t,n)}function Fxe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=MR(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>BKe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=jKe(c,l,r),d=FKe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function zKe(e,t,n){var r;return n?Array.from(((r=MR(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function eY(e){const t=C.createContext(null);return[({children:i,value:s})=>N.createElement(t.Provider,{value:s},i),()=>{const i=C.useContext(t);if(i===null)throw new Error(e);return i}]}function Qg(e){return Array.isArray(e)?e:[e]}function boe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const UKe=()=>{};function VKe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||UKe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function np(e,t){return n=>{e==null||e(n),t==null||t(n)}}function HKe(){const[e,t]=C.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function jxe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function KA(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function Bxe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Bxe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function zxe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=Bxe(t))&&(r&&(r+=" "),r+=n);return r}const qKe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function WKe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var GKe=Object.defineProperty,woe=Object.getOwnPropertySymbols,YKe=Object.prototype.hasOwnProperty,KKe=Object.prototype.propertyIsEnumerable,Eoe=(e,t,n)=>t in e?GKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xoe=(e,t)=>{for(var n in t||(t={}))YKe.call(t,n)&&Eoe(e,n,t[n]);if(woe)for(var n of woe(t))KKe.call(t,n)&&Eoe(e,n,t[n]);return e};function XKe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:xoe({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:xoe({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function XA(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function tY(e){const t=XA(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function Uxe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function QKe(e,...t){return`linear-gradient(${e}deg, ${Uxe(t)})`}function JKe(...e){return`radial-gradient(circle, ${Uxe(e)})`}function Vxe(e){const t=tY(e),n=XA(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function nY(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function ZKe(e){return t=>`@media (min-width: ${nY({size:t,sizes:e.breakpoints})}px)`}function eXe(e){return t=>`@media (max-width: ${nY({size:t,sizes:e.breakpoints})-1}px)`}function tXe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function nXe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function rXe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function rY(e){return tXe(e)?nXe(e):e.startsWith("rgb")?rXe(e):{r:0,g:0,b:0,a:1}}function q_(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=rY(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function iXe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function sXe(e,t){const{r:n,g:r,b:i,a:s}=rY(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function oXe(e,t){const{r:n,g:r,b:i,a:s}=rY(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function aXe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function uXe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function lXe(e){const t=tY(e),n=XA(e),r=Vxe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=uXe(s,e);switch(i){case"light":return{border:"transparent",background:q_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:q_(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:q_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?q_(t(s,5,a,!1),.05):q_(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function cXe(e){return t=>{const n=XA(e)(t);return e.colors[e.primaryColor][n]}}function fXe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Ns={fontStyles:WKe,themeColor:tY,focusStyles:XKe,linearGradient:QKe,radialGradient:JKe,smallerThan:eXe,largerThan:ZKe,rgba:q_,size:nY,cover:iXe,darken:sXe,lighten:oXe,radius:aXe,variant:lXe,primaryShade:XA,hover:fXe,gradient:Vxe,primaryColor:cXe};var dXe=Object.defineProperty,hXe=Object.defineProperties,pXe=Object.getOwnPropertyDescriptors,Soe=Object.getOwnPropertySymbols,mXe=Object.prototype.hasOwnProperty,gXe=Object.prototype.propertyIsEnumerable,Toe=(e,t,n)=>t in e?dXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yXe=(e,t)=>{for(var n in t||(t={}))mXe.call(t,n)&&Toe(e,n,t[n]);if(Soe)for(var n of Soe(t))gXe.call(t,n)&&Toe(e,n,t[n]);return e},vXe=(e,t)=>hXe(e,pXe(t));function _Xe(e){return vXe(yXe({},e),{fn:{fontStyles:Ns.fontStyles(e),themeColor:Ns.themeColor(e),focusStyles:Ns.focusStyles(e),largerThan:Ns.largerThan(e),smallerThan:Ns.smallerThan(e),radialGradient:Ns.radialGradient,linearGradient:Ns.linearGradient,gradient:Ns.gradient(e),rgba:Ns.rgba,size:Ns.size,cover:Ns.cover,lighten:Ns.lighten,darken:Ns.darken,primaryShade:Ns.primaryShade(e),radius:Ns.radius(e),variant:Ns.variant(e),hover:Ns.hover,primaryColor:Ns.primaryColor(e)}})}const bXe=["xs","sm","md","lg","xl"],wXe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:qKe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},Hxe=_Xe(wXe);function EXe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function xXe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var SXe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(xXe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=EXe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Fo="-ms-",LR="-moz-",lr="-webkit-",qxe="comm",iY="rule",sY="decl",TXe="@import",Wxe="@keyframes",CXe=Math.abs,l6=String.fromCharCode,AXe=Object.assign;function IXe(e,t){return ho(e,0)^45?(((t<<2^ho(e,0))<<2^ho(e,1))<<2^ho(e,2))<<2^ho(e,3):0}function Gxe(e){return e.trim()}function OXe(e,t){return(e=t.exec(e))?e[0]:e}function mr(e,t,n){return e.replace(t,n)}function lU(e,t){return e.indexOf(t)}function ho(e,t){return e.charCodeAt(t)|0}function pC(e,t,n){return e.slice(t,n)}function td(e){return e.length}function oY(e){return e.length}function iP(e,t){return t.push(e),e}function PXe(e,t){return e.map(t).join("")}var c6=1,Sw=1,Yxe=0,xu=0,rs=0,BE="";function f6(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:c6,column:Sw,length:o,return:""}}function iS(e,t){return AXe(f6("",null,null,"",null,null,0),e,{length:-e.length},t)}function kXe(){return rs}function $Xe(){return rs=xu>0?ho(BE,--xu):0,Sw--,rs===10&&(Sw=1,c6--),rs}function al(){return rs=xu<Yxe?ho(BE,xu++):0,Sw++,rs===10&&(Sw=1,c6++),rs}function Cd(){return ho(BE,xu)}function t$(){return xu}function QA(e,t){return pC(BE,e,t)}function mC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Kxe(e){return c6=Sw=1,Yxe=td(BE=e),xu=0,[]}function Xxe(e){return BE="",e}function n$(e){return Gxe(QA(xu-1,cU(e===91?e+2:e===40?e+1:e)))}function RXe(e){for(;(rs=Cd())&&rs<33;)al();return mC(e)>2||mC(rs)>3?"":" "}function NXe(e,t){for(;--t&&al()&&!(rs<48||rs>102||rs>57&&rs<65||rs>70&&rs<97););return QA(e,t$()+(t<6&&Cd()==32&&al()==32))}function cU(e){for(;al();)switch(rs){case e:return xu;case 34:case 39:e!==34&&e!==39&&cU(rs);break;case 40:e===41&&cU(e);break;case 92:al();break}return xu}function DXe(e,t){for(;al()&&e+rs!==57;)if(e+rs===84&&Cd()===47)break;return"/*"+QA(t,xu-1)+"*"+l6(e===47?e:al())}function MXe(e){for(;!mC(Cd());)al();return QA(e,xu)}function LXe(e){return Xxe(r$("",null,null,null,[""],e=Kxe(e),0,[0],e))}function r$(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,E=s,w=r,x=_;g;)switch(p=v,v=al()){case 40:if(p!=108&&ho(x,f-1)==58){lU(x+=mr(n$(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:x+=n$(v);break;case 9:case 10:case 13:case 32:x+=RXe(p);break;case 92:x+=NXe(t$()-1,7);continue;case 47:switch(Cd()){case 42:case 47:iP(FXe(DXe(al(),t$()),t,n),u);break;default:x+="/"}break;case 123*m:a[l++]=td(x)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&td(x)-f&&iP(h>32?Aoe(x+";",r,n,f-1):Aoe(mr(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(iP(w=Coe(x,t,n,l,c,i,a,_,b=[],E=[],f),s),v===123)if(c===0)r$(x,t,w,w,b,s,f,a,E);else switch(d===99&&ho(x,3)===110?100:d){case 100:case 109:case 115:r$(e,w,w,r&&iP(Coe(e,w,w,0,0,i,a,_,i,b=[],f),E),i,E,f,a,r?b:E);break;default:r$(x,w,w,w,[""],E,0,a,E)}}l=c=h=0,m=y=1,_=x="",f=o;break;case 58:f=1+td(x),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&$Xe()==125)continue}switch(x+=l6(v),v*m){case 38:y=c>0?1:(x+="\f",-1);break;case 44:a[l++]=(td(x)-1)*y,y=1;break;case 64:Cd()===45&&(x+=n$(al())),d=Cd(),c=f=td(_=x+=MXe(t$())),v++;break;case 45:p===45&&td(x)==2&&(m=0)}}return s}function Coe(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=oY(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=pC(e,f+1,f=CXe(m=o[p])),_=e;y<h;++y)(_=Gxe(m>0?d[y]+" "+v:mr(v,/&\f/g,d[y])))&&(u[g++]=_);return f6(e,t,n,i===0?iY:a,u,l,c)}function FXe(e,t,n){return f6(e,t,n,qxe,l6(kXe()),pC(e,2,-2),0)}function Aoe(e,t,n,r){return f6(e,t,n,sY,pC(e,0,r),pC(e,r+1,-1),r)}function Fb(e,t){for(var n="",r=oY(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function jXe(e,t,n,r){switch(e.type){case TXe:case sY:return e.return=e.return||e.value;case qxe:return"";case Wxe:return e.return=e.value+"{"+Fb(e.children,r)+"}";case iY:e.value=e.props.join(",")}return td(n=Fb(e.children,r))?e.return=e.value+"{"+n+"}":""}function BXe(e){var t=oY(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function zXe(e){return function(t){t.root||(t=t.return)&&e(t)}}function UXe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var VXe=function(t,n,r){for(var i=0,s=0;i=s,s=Cd(),i===38&&s===12&&(n[r]=1),!mC(s);)al();return QA(t,xu)},HXe=function(t,n){var r=-1,i=44;do switch(mC(i)){case 0:i===38&&Cd()===12&&(n[r]=1),t[r]+=VXe(xu-1,n,r);break;case 2:t[r]+=n$(i);break;case 4:if(i===44){t[++r]=Cd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=l6(i)}while(i=al());return t},qXe=function(t,n){return Xxe(HXe(Kxe(t),n))},Ioe=new WeakMap,WXe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Ioe.get(r))&&!i){Ioe.set(t,!0);for(var s=[],o=qXe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},GXe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Qxe(e,t){switch(IXe(e,t)){case 5103:return lr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lr+e+LR+e+Fo+e+e;case 6828:case 4268:return lr+e+Fo+e+e;case 6165:return lr+e+Fo+"flex-"+e+e;case 5187:return lr+e+mr(e,/(\w+).+(:[^]+)/,lr+"box-$1$2"+Fo+"flex-$1$2")+e;case 5443:return lr+e+Fo+"flex-item-"+mr(e,/flex-|-self/,"")+e;case 4675:return lr+e+Fo+"flex-line-pack"+mr(e,/align-content|flex-|-self/,"")+e;case 5548:return lr+e+Fo+mr(e,"shrink","negative")+e;case 5292:return lr+e+Fo+mr(e,"basis","preferred-size")+e;case 6060:return lr+"box-"+mr(e,"-grow","")+lr+e+Fo+mr(e,"grow","positive")+e;case 4554:return lr+mr(e,/([^-])(transform)/g,"$1"+lr+"$2")+e;case 6187:return mr(mr(mr(e,/(zoom-|grab)/,lr+"$1"),/(image-set)/,lr+"$1"),e,"")+e;case 5495:case 3959:return mr(e,/(image-set\([^]*)/,lr+"$1$`$1");case 4968:return mr(mr(e,/(.+:)(flex-)?(.*)/,lr+"box-pack:$3"+Fo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lr+e+e;case 4095:case 3583:case 4068:case 2532:return mr(e,/(.+)-inline(.+)/,lr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(td(e)-1-t>6)switch(ho(e,t+1)){case 109:if(ho(e,t+4)!==45)break;case 102:return mr(e,/(.+:)(.+)-([^]+)/,"$1"+lr+"$2-$3$1"+LR+(ho(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~lU(e,"stretch")?Qxe(mr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ho(e,t+1)!==115)break;case 6444:switch(ho(e,td(e)-3-(~lU(e,"!important")&&10))){case 107:return mr(e,":",":"+lr)+e;case 101:return mr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+lr+(ho(e,14)===45?"inline-":"")+"box$3$1"+lr+"$2$3$1"+Fo+"$2box$3")+e}break;case 5936:switch(ho(e,t+11)){case 114:return lr+e+Fo+mr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lr+e+Fo+mr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lr+e+Fo+mr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return lr+e+Fo+e+e}return e}var YXe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case sY:t.return=Qxe(t.value,t.length);break;case Wxe:return Fb([iS(t,{value:mr(t.value,"@","@"+lr)})],i);case iY:if(t.length)return PXe(t.props,function(s){switch(OXe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Fb([iS(t,{props:[mr(s,/:(read-\w+)/,":"+LR+"$1")]})],i);case"::placeholder":return Fb([iS(t,{props:[mr(s,/:(plac\w+)/,":"+lr+"input-$1")]}),iS(t,{props:[mr(s,/:(plac\w+)/,":"+LR+"$1")]}),iS(t,{props:[mr(s,/:(plac\w+)/,Fo+"input-$1")]})],i)}return""})}},KXe=[YXe],XXe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||KXe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[WXe,GXe];{var c,f=[jXe,zXe(function(m){c.insert(m)})],d=BXe(l.concat(i,f)),h=function(g){return Fb(LXe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new SXe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};const Jxe=XXe;function gi(){return gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gi.apply(this,arguments)}var Zxe={exports:{}},Er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Js=typeof Symbol=="function"&&Symbol.for,aY=Js?Symbol.for("react.element"):60103,uY=Js?Symbol.for("react.portal"):60106,d6=Js?Symbol.for("react.fragment"):60107,h6=Js?Symbol.for("react.strict_mode"):60108,p6=Js?Symbol.for("react.profiler"):60114,m6=Js?Symbol.for("react.provider"):60109,g6=Js?Symbol.for("react.context"):60110,lY=Js?Symbol.for("react.async_mode"):60111,y6=Js?Symbol.for("react.concurrent_mode"):60111,v6=Js?Symbol.for("react.forward_ref"):60112,_6=Js?Symbol.for("react.suspense"):60113,QXe=Js?Symbol.for("react.suspense_list"):60120,b6=Js?Symbol.for("react.memo"):60115,w6=Js?Symbol.for("react.lazy"):60116,JXe=Js?Symbol.for("react.block"):60121,ZXe=Js?Symbol.for("react.fundamental"):60117,eQe=Js?Symbol.for("react.responder"):60118,tQe=Js?Symbol.for("react.scope"):60119;function Tl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aY:switch(e=e.type,e){case lY:case y6:case d6:case p6:case h6:case _6:return e;default:switch(e=e&&e.$$typeof,e){case g6:case v6:case w6:case b6:case m6:return e;default:return t}}case uY:return t}}}function eSe(e){return Tl(e)===y6}Er.AsyncMode=lY;Er.ConcurrentMode=y6;Er.ContextConsumer=g6;Er.ContextProvider=m6;Er.Element=aY;Er.ForwardRef=v6;Er.Fragment=d6;Er.Lazy=w6;Er.Memo=b6;Er.Portal=uY;Er.Profiler=p6;Er.StrictMode=h6;Er.Suspense=_6;Er.isAsyncMode=function(e){return eSe(e)||Tl(e)===lY};Er.isConcurrentMode=eSe;Er.isContextConsumer=function(e){return Tl(e)===g6};Er.isContextProvider=function(e){return Tl(e)===m6};Er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aY};Er.isForwardRef=function(e){return Tl(e)===v6};Er.isFragment=function(e){return Tl(e)===d6};Er.isLazy=function(e){return Tl(e)===w6};Er.isMemo=function(e){return Tl(e)===b6};Er.isPortal=function(e){return Tl(e)===uY};Er.isProfiler=function(e){return Tl(e)===p6};Er.isStrictMode=function(e){return Tl(e)===h6};Er.isSuspense=function(e){return Tl(e)===_6};Er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===d6||e===y6||e===p6||e===h6||e===_6||e===QXe||typeof e=="object"&&e!==null&&(e.$$typeof===w6||e.$$typeof===b6||e.$$typeof===m6||e.$$typeof===g6||e.$$typeof===v6||e.$$typeof===ZXe||e.$$typeof===eQe||e.$$typeof===tQe||e.$$typeof===JXe)};Er.typeOf=Tl;Zxe.exports=Er;var nQe=Zxe.exports,tSe=nQe,rQe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},iQe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nSe={};nSe[tSe.ForwardRef]=rQe;nSe[tSe.Memo]=iQe;var sQe=!0;function oQe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var aQe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||sQe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},rSe=function(t,n,r){aQe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function uQe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var lQe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},cQe=/[A-Z]|^ms/g,fQe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,iSe=function(t){return t.charCodeAt(1)===45},Ooe=function(t){return t!=null&&typeof t!="boolean"},S9=UXe(function(e){return iSe(e)?e:e.replace(cQe,"-$&").toLowerCase()}),Poe=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(fQe,function(r,i,s){return nd={name:i,styles:s,next:nd},i})}return lQe[t]!==1&&!iSe(t)&&typeof n=="number"&&n!==0?n+"px":n};function gC(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return nd={name:n.name,styles:n.styles,next:nd},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)nd={name:r.name,styles:r.styles,next:nd},r=r.next;var i=n.styles+";";return i}return dQe(e,t,n)}case"function":{if(e!==void 0){var s=nd,o=n(e);return nd=s,gC(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function dQe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=gC(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":Ooe(o)&&(r+=S9(s)+":"+Poe(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)Ooe(o[a])&&(r+=S9(s)+":"+Poe(s,o[a])+";");else{var u=gC(e,t,o);switch(s){case"animation":case"animationName":{r+=S9(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var koe=/label:\s*([^\s;\n{]+)\s*(;|$)/g,nd,cY=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";nd=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=gC(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=gC(r,n,t[a]),i&&(s+=o[a]);koe.lastIndex=0;for(var u="",l;(l=koe.exec(s))!==null;)u+="-"+l[1];var c=uQe(s)+u;return{name:c,styles:s,next:nd}},hQe=q1.useInsertionEffect?q1.useInsertionEffect:!1,$oe=hQe||C.useLayoutEffect,sSe=C.createContext(typeof HTMLElement<"u"?Jxe({key:"css"}):null);sSe.Provider;var pQe=function(t){return C.forwardRef(function(n,r){var i=C.useContext(sSe);return t(n,i,r)})},mQe=C.createContext({}),gQe=pQe(function(e,t){var n=e.styles,r=cY([n],void 0,C.useContext(mQe)),i=C.useRef();return $oe(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),$oe(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&rSe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function oSe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cY(t)}var yQe=function(){var t=oSe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function aSe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var vQe=Object.defineProperty,Roe=Object.getOwnPropertySymbols,_Qe=Object.prototype.hasOwnProperty,bQe=Object.prototype.propertyIsEnumerable,Noe=(e,t,n)=>t in e?vQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T9=(e,t)=>{for(var n in t||(t={}))_Qe.call(t,n)&&Noe(e,n,t[n]);if(Roe)for(var n of Roe(t))bQe.call(t,n)&&Noe(e,n,t[n]);return e};const uSe=C.createContext({theme:Hxe});function fs(){var e;return((e=C.useContext(uSe))==null?void 0:e.theme)||Hxe}function wQe(e){const t=fs(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function lSe(){var e;return(e=C.useContext(uSe))==null?void 0:e.emotionCache}function gt(e,t,n){var r;const s=(r=fs().components[e])==null?void 0:r.defaultProps;return T9(T9(T9({},t),s),aSe(n))}const cSe=C.createContext({classNames:{},styles:{},unstyled:!1});function fY({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return N.createElement(cSe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function F0(){return C.useContext(cSe)}const EQe={app:100,modal:200,popover:300,overlay:400,max:9999};function da(e){return EQe[e]}function xQe(e,t){const n=C.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const SQe=Jxe({key:"mantine",prepend:!0});function TQe(){return lSe()||SQe}var CQe=Object.defineProperty,Doe=Object.getOwnPropertySymbols,AQe=Object.prototype.hasOwnProperty,IQe=Object.prototype.propertyIsEnumerable,Moe=(e,t,n)=>t in e?CQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,OQe=(e,t)=>{for(var n in t||(t={}))AQe.call(t,n)&&Moe(e,n,t[n]);if(Doe)for(var n of Doe(t))IQe.call(t,n)&&Moe(e,n,t[n]);return e};const C9="ref";function PQe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(C9 in n))return{args:e,ref:t};t=n[C9];const r=OQe({},n);return delete r[C9],{args:[r],ref:t}}const{cssFactory:kQe}=(()=>{function e(n,r,i){const s=[],o=oQe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=PQe(o),l=cY(u,r.registered);return rSe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,zxe(o))}}return{cssFactory:t}})();function fSe(){const e=TQe();return xQe(()=>kQe({cache:e}),[e])}function $Qe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var RQe=Object.defineProperty,Loe=Object.getOwnPropertySymbols,NQe=Object.prototype.hasOwnProperty,DQe=Object.prototype.propertyIsEnumerable,Foe=(e,t,n)=>t in e?RQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A9=(e,t)=>{for(var n in t||(t={}))NQe.call(t,n)&&Foe(e,n,t[n]);if(Loe)for(var n of Loe(t))DQe.call(t,n)&&Foe(e,n,t[n]);return e};function MQe(e){return`__mantine-ref-${e||""}`}function joe(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=A9(A9({},i[o]),s[o]):i[o]=A9({},s[o])}),i),{}):r(e)}function lt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=fs(),o=wQe(i==null?void 0:i.name),a=lSe(),{css:u,cx:l}=fSe(),c=t(s,r,MQe),f=joe(i==null?void 0:i.styles,s,r),d=joe(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:$Qe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function dSe({styles:e}){const t=fs();return N.createElement(gQe,{styles:oSe(typeof e=="function"?e(t):e)})}var LQe=Object.defineProperty,FQe=Object.defineProperties,jQe=Object.getOwnPropertyDescriptors,Boe=Object.getOwnPropertySymbols,BQe=Object.prototype.hasOwnProperty,zQe=Object.prototype.propertyIsEnumerable,zoe=(e,t,n)=>t in e?LQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sS=(e,t)=>{for(var n in t||(t={}))BQe.call(t,n)&&zoe(e,n,t[n]);if(Boe)for(var n of Boe(t))zQe.call(t,n)&&zoe(e,n,t[n]);return e},oS=(e,t)=>FQe(e,jQe(t));const aS={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},sP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:oS(sS({},aS),{common:{transformOrigin:"center center"}}),"pop-bottom-left":oS(sS({},aS),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":oS(sS({},aS),{common:{transformOrigin:"bottom right"}}),"pop-top-left":oS(sS({},aS),{common:{transformOrigin:"top left"}}),"pop-top-right":oS(sS({},aS),{common:{transformOrigin:"top right"}})},Uoe=["mousedown","touchstart"];function UQe(e,t,n){const r=C.useRef();return C.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Uoe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Uoe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function VQe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function HQe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function qQe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=C.useState(n?!1:HQe(e,t)),s=C.useRef();return C.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),VQe(s.current,o=>i(o.matches))},[e]),r}function af(e,t,n){return Math.min(Math.max(e,t),n)}const dY=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Ss(e,t){const n=C.useRef(!1);C.useEffect(()=>()=>{n.current=!1},[]),C.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function hY({opened:e,shouldReturnFocus:t=!0}){const n=C.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Ss(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const WQe=/input|select|textarea|button|object/,hSe="a, input, select, textarea, button, object, [tabindex]";function GQe(e){return e.style.display==="none"}function YQe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(GQe(n))return!1;n=n.parentNode}return!0}function pSe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function fU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(pSe(e));return(WQe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&YQe(e)}function mSe(e){const t=pSe(e);return(Number.isNaN(t)||t>=0)&&fU(e)}function KQe(e){return Array.from(e.querySelectorAll(hSe)).filter(mSe)}function XQe(e,t){const n=KQe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function QQe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function pY(e=!0){const t=C.useRef(),n=C.useRef(null),r=C.useCallback(i=>{if(e&&i!==null&&(n.current=QQe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(hSe));o=a.find(mSe)||a.find(fU)||null,!o&&fU(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return C.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&XQe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const JQe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,ZQe=N.useId||(()=>{});function eJe(){const[e,t]=C.useState("");return dY(()=>{t(JQe())},[]),e}function tJe(){const e=ZQe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Nu(e){return typeof e=="string"?e:tJe()||eJe()}function dU(e,t,n){C.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function gSe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function ySe(...e){return t=>{e.forEach(n=>gSe(n,t))}}function Ps(...e){return C.useCallback(ySe(...e),e)}function vSe(e,t,n="ltr"){const r=C.useRef(),i=C.useRef(!1),s=C.useRef(!1),o=C.useRef(0),[a,u]=C.useState(!1);return C.useEffect(()=>{i.current=!0},[]),C.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const b=r.current.getBoundingClientRect();if(b.width&&b.height){const E=af((v-b.left)/b.width,0,1);e({x:n==="ltr"?E:1-E,y:af((_-b.top)/b.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function oa({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=C.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function E6(e,t){return qQe("(prefers-reduced-motion: reduce)",e,t)}const nJe=e=>e<.5?2*e*e:-1+(4-2*e)*e,rJe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},iJe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},sJe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function _Se({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=nJe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=C.useRef(0),u=C.useRef(0),l=C.useRef(!1),c=C.useRef(null),f=C.useRef(null),d=E6(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=C.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=iJe({parent:c.current,axis:t}))!=null?y:0,_=rJe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function b(){u.current===0&&(u.current=performance.now());const w=performance.now()-u.current,x=d||e===0?1:w/e,S=v+_*r(x);sJe({parent:c.current,axis:t,distance:S}),!l.current&&x<1?a.current=requestAnimationFrame(b):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}b()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return dU("wheel",m,{passive:!0}),dU("touchmove",m,{passive:!0}),C.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const oJe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function x1(){const e=C.useRef(0),t=C.useRef(null),[n,r]=C.useState(oJe),i=C.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return C.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function aJe(){const[e,{width:t,height:n}]=x1();return{ref:e,width:t,height:n}}function uJe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const lJe=({disableBodyPadding:e})=>{const t=e?null:uJe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function cJe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function fJe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function dJe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function bSe(e,t={disableBodyPadding:!1}){const[n,r]=C.useState(e||!1),i=C.useRef(0),{disableBodyPadding:s}=t,o=C.useRef(null),a=()=>{i.current=window.scrollY;const l=lJe({disableBodyPadding:s}),c=dJe();cJe(c,l),fJe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return C.useEffect(()=>(n?a():u(),u),[n]),C.useEffect(()=>{e!==void 0&&r(e)},[e]),C.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var hJe=Object.defineProperty,pJe=Object.defineProperties,mJe=Object.getOwnPropertyDescriptors,Voe=Object.getOwnPropertySymbols,gJe=Object.prototype.hasOwnProperty,yJe=Object.prototype.propertyIsEnumerable,Hoe=(e,t,n)=>t in e?hJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vJe=(e,t)=>{for(var n in t||(t={}))gJe.call(t,n)&&Hoe(e,n,t[n]);if(Voe)for(var n of Voe(t))yJe.call(t,n)&&Hoe(e,n,t[n]);return e},_Je=(e,t)=>pJe(e,mJe(t));function bJe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return _Je(vJe({},n),{key:i})}function wJe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function EJe(e){return t=>wJe(bJe(e),t)}function xJe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{EJe(r)(n)&&(t.preventDefault(),i(n))})}}function SJe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function TJe(){return typeof window<"u"?SJe():"undetermined"}function aT(e,t){const[n,r]=C.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function i$(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function lg(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var qoe=Object.getOwnPropertySymbols,CJe=Object.prototype.hasOwnProperty,AJe=Object.prototype.propertyIsEnumerable,IJe=(e,t)=>{var n={};for(var r in e)CJe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qoe)for(var r of qoe(e))t.indexOf(r)<0&&AJe.call(e,r)&&(n[r]=e[r]);return n};function Sf(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:P,tt:A,td:O,w:z,miw:M,maw:R,h:D,mih:L,mah:V,bgsz:B,bgp:H,bgr:U,bga:k,pos:$,top:q,left:F,bottom:j,right:Q,inset:se,display:ae}=t,ce=IJe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:aSe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:P,tt:A,td:O,w:z,miw:M,maw:R,h:D,mih:L,mah:V,bgsz:B,bgp:H,bgr:U,bga:k,pos:$,top:q,left:F,bottom:j,right:Q,inset:se,display:ae}),rest:ce}}function OJe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function PJe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return OJe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function kJe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function $Je(e){return e}function RJe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const NJe=["-xs","-sm","-md","-lg","-xl"];function DJe(e,t){return NJe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const MJe={color:kJe,default:$Je,fontSize:RJe,spacing:DJe},LJe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var FJe=Object.defineProperty,Woe=Object.getOwnPropertySymbols,jJe=Object.prototype.hasOwnProperty,BJe=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?FJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yoe=(e,t)=>{for(var n in t||(t={}))jJe.call(t,n)&&Goe(e,n,t[n]);if(Woe)for(var n of Woe(t))BJe.call(t,n)&&Goe(e,n,t[n]);return e};function hU(e,t,n=LJe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(PJe({value:e[s],getValue:MJe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=Yoe(Yoe({},i[o]),s[o]):i[o]=s[o]}),i),{})}function Koe(e,t){return typeof e=="function"?e(t):e}function zJe(e,t,n){const r=fs(),{css:i,cx:s}=fSe();return Array.isArray(e)?s(n,i(hU(t,r)),e.map(o=>i(Koe(o,r)))):s(n,i(Koe(e,r)),i(hU(t,r)))}var UJe=Object.defineProperty,FR=Object.getOwnPropertySymbols,wSe=Object.prototype.hasOwnProperty,ESe=Object.prototype.propertyIsEnumerable,Xoe=(e,t,n)=>t in e?UJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VJe=(e,t)=>{for(var n in t||(t={}))wSe.call(t,n)&&Xoe(e,n,t[n]);if(FR)for(var n of FR(t))ESe.call(t,n)&&Xoe(e,n,t[n]);return e},HJe=(e,t)=>{var n={};for(var r in e)wSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FR)for(var r of FR(e))t.indexOf(r)<0&&ESe.call(e,r)&&(n[r]=e[r]);return n};const xSe=C.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=HJe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=Sf(a),c=i||"div";return N.createElement(c,VJe({ref:t,className:zJe(o,u,r),style:s},l))});xSe.displayName="@mantine/core/Box";const st=xSe;var qJe=Object.defineProperty,WJe=Object.defineProperties,GJe=Object.getOwnPropertyDescriptors,Qoe=Object.getOwnPropertySymbols,YJe=Object.prototype.hasOwnProperty,KJe=Object.prototype.propertyIsEnumerable,Joe=(e,t,n)=>t in e?qJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zoe=(e,t)=>{for(var n in t||(t={}))YJe.call(t,n)&&Joe(e,n,t[n]);if(Qoe)for(var n of Qoe(t))KJe.call(t,n)&&Joe(e,n,t[n]);return e},XJe=(e,t)=>WJe(e,GJe(t)),QJe=lt(e=>({root:XJe(Zoe(Zoe({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const JJe=QJe;var ZJe=Object.defineProperty,jR=Object.getOwnPropertySymbols,SSe=Object.prototype.hasOwnProperty,TSe=Object.prototype.propertyIsEnumerable,eae=(e,t,n)=>t in e?ZJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eZe=(e,t)=>{for(var n in t||(t={}))SSe.call(t,n)&&eae(e,n,t[n]);if(jR)for(var n of jR(t))TSe.call(t,n)&&eae(e,n,t[n]);return e},tZe=(e,t)=>{var n={};for(var r in e)SSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jR)for(var r of jR(e))t.indexOf(r)<0&&TSe.call(e,r)&&(n[r]=e[r]);return n};const CSe=C.forwardRef((e,t)=>{const n=gt("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=tZe(n,["className","component","unstyled"]),{classes:a,cx:u}=JJe(null,{name:"UnstyledButton",unstyled:s});return N.createElement(st,eZe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});CSe.displayName="@mantine/core/UnstyledButton";const sm=CSe;var nZe=Object.defineProperty,rZe=Object.defineProperties,iZe=Object.getOwnPropertyDescriptors,BR=Object.getOwnPropertySymbols,ASe=Object.prototype.hasOwnProperty,ISe=Object.prototype.propertyIsEnumerable,tae=(e,t,n)=>t in e?nZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ic=(e,t)=>{for(var n in t||(t={}))ASe.call(t,n)&&tae(e,n,t[n]);if(BR)for(var n of BR(t))ISe.call(t,n)&&tae(e,n,t[n]);return e},uS=(e,t)=>rZe(e,iZe(t)),sZe=(e,t)=>{var n={};for(var r in e)ASe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BR)for(var r of BR(e))t.indexOf(r)<0&&ISe.call(e,r)&&(n[r]=e[r]);return n};function oZe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function I9(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function aZe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const Ah=typeof window<"u"&&window.requestAnimationFrame;function uZe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=C.useRef(null),o="0px",[a,u]=C.useState({}),l=g=>{Dv.flushSync(()=>u(g))},c=g=>{l(y=>Ic(Ic({},y),g))};function f(g){const y=e||oZe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:aZe(s),height:I9(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};C.useEffect(()=>{Ah(()=>{const{x:g,y}=h();i==="x"&&!r?l(Ic({},g)):i==="y"&&!r&&l(Ic({},y))})},[]),Ss(()=>{i!=="x"&&Ah(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Ah(()=>{const g=I9(s);c(uS(Ic({},f(g)),{height:g}))})}:()=>{const g=I9(s);c(uS(Ic({},f(g)),{willChange:"height",height:g})),Ah(()=>c({height:o,overflow:"hidden"}))})},[r]),Ss(()=>{i!=="y"&&Ah(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),Ah(()=>{c(uS(Ic({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(uS(Ic({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),Ah(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,b=sZe(y,["style","refKey"]);const E=b[_];return uS(Ic({"aria-hidden":!r},b),{[_]:ySe(s,E),onTransitionEnd:p,style:Ic(Ic({boxSizing:"border-box"},v),a)})}return m}var lZe=Object.defineProperty,zR=Object.getOwnPropertySymbols,OSe=Object.prototype.hasOwnProperty,PSe=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?lZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oP=(e,t)=>{for(var n in t||(t={}))OSe.call(t,n)&&nae(e,n,t[n]);if(zR)for(var n of zR(t))PSe.call(t,n)&&nae(e,n,t[n]);return e},cZe=(e,t)=>{var n={};for(var r in e)OSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zR)for(var r of zR(e))t.indexOf(r)<0&&PSe.call(e,r)&&(n[r]=e[r]);return n};const fZe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},kSe=C.forwardRef((e,t)=>{const n=gt("Collapse",fZe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=cZe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=fs(),h=E6(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=Sf(f),v=uZe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?N.createElement(st,oP({},y),r):null:N.createElement(st,oP({},v(oP(oP({style:a,ref:t},y),g))),N.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});kSe.displayName="@mantine/core/Collapse";var dZe=Object.defineProperty,rae=Object.getOwnPropertySymbols,hZe=Object.prototype.hasOwnProperty,pZe=Object.prototype.propertyIsEnumerable,iae=(e,t,n)=>t in e?dZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mZe=(e,t)=>{for(var n in t||(t={}))hZe.call(t,n)&&iae(e,n,t[n]);if(rae)for(var n of rae(t))pZe.call(t,n)&&iae(e,n,t[n]);return e};function gZe(e){return N.createElement("svg",mZe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),N.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var yZe=Object.defineProperty,vZe=Object.defineProperties,_Ze=Object.getOwnPropertyDescriptors,sae=Object.getOwnPropertySymbols,bZe=Object.prototype.hasOwnProperty,wZe=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?yZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$Se=(e,t)=>{for(var n in t||(t={}))bZe.call(t,n)&&oae(e,n,t[n]);if(sae)for(var n of sae(t))wZe.call(t,n)&&oae(e,n,t[n]);return e},EZe=(e,t)=>vZe(e,_Ze(t));const uT={xs:18,sm:22,md:28,lg:34,xl:44};function xZe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:$Se({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var SZe=lt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:EZe($Se({},xZe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:uT}),minHeight:e.fn.size({size:n,sizes:uT}),width:e.fn.size({size:n,sizes:uT}),minWidth:e.fn.size({size:n,sizes:uT}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})}));const TZe=SZe;var CZe=Object.defineProperty,UR=Object.getOwnPropertySymbols,RSe=Object.prototype.hasOwnProperty,NSe=Object.prototype.propertyIsEnumerable,aae=(e,t,n)=>t in e?CZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AZe=(e,t)=>{for(var n in t||(t={}))RSe.call(t,n)&&aae(e,n,t[n]);if(UR)for(var n of UR(t))NSe.call(t,n)&&aae(e,n,t[n]);return e},IZe=(e,t)=>{var n={};for(var r in e)RSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UR)for(var r of UR(e))t.indexOf(r)<0&&NSe.call(e,r)&&(n[r]=e[r]);return n};function OZe(e){var t=e,{size:n,color:r}=t,i=IZe(t,["size","color"]);return N.createElement("svg",AZe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),N.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},N.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),N.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},N.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),N.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},N.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),N.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},N.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),N.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},N.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var PZe=Object.defineProperty,VR=Object.getOwnPropertySymbols,DSe=Object.prototype.hasOwnProperty,MSe=Object.prototype.propertyIsEnumerable,uae=(e,t,n)=>t in e?PZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kZe=(e,t)=>{for(var n in t||(t={}))DSe.call(t,n)&&uae(e,n,t[n]);if(VR)for(var n of VR(t))MSe.call(t,n)&&uae(e,n,t[n]);return e},$Ze=(e,t)=>{var n={};for(var r in e)DSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VR)for(var r of VR(e))t.indexOf(r)<0&&MSe.call(e,r)&&(n[r]=e[r]);return n};function RZe(e){var t=e,{size:n,color:r}=t,i=$Ze(t,["size","color"]);return N.createElement("svg",kZe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),N.createElement("g",{fill:"none",fillRule:"evenodd"},N.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},N.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),N.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},N.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var NZe=Object.defineProperty,HR=Object.getOwnPropertySymbols,LSe=Object.prototype.hasOwnProperty,FSe=Object.prototype.propertyIsEnumerable,lae=(e,t,n)=>t in e?NZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DZe=(e,t)=>{for(var n in t||(t={}))LSe.call(t,n)&&lae(e,n,t[n]);if(HR)for(var n of HR(t))FSe.call(t,n)&&lae(e,n,t[n]);return e},MZe=(e,t)=>{var n={};for(var r in e)LSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HR)for(var r of HR(e))t.indexOf(r)<0&&FSe.call(e,r)&&(n[r]=e[r]);return n};function LZe(e){var t=e,{size:n,color:r}=t,i=MZe(t,["size","color"]);return N.createElement("svg",DZe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),N.createElement("circle",{cx:"15",cy:"15",r:"15"},N.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),N.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},N.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),N.createElement("circle",{cx:"105",cy:"15",r:"15"},N.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),N.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var FZe=Object.defineProperty,qR=Object.getOwnPropertySymbols,jSe=Object.prototype.hasOwnProperty,BSe=Object.prototype.propertyIsEnumerable,cae=(e,t,n)=>t in e?FZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jZe=(e,t)=>{for(var n in t||(t={}))jSe.call(t,n)&&cae(e,n,t[n]);if(qR)for(var n of qR(t))BSe.call(t,n)&&cae(e,n,t[n]);return e},BZe=(e,t)=>{var n={};for(var r in e)jSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qR)for(var r of qR(e))t.indexOf(r)<0&&BSe.call(e,r)&&(n[r]=e[r]);return n};const O9={bars:OZe,oval:RZe,dots:LZe},zZe={xs:18,sm:22,md:36,lg:44,xl:58},UZe={size:"md"};function Mv(e){const t=gt("Loader",UZe,e),{size:n,color:r,variant:i}=t,s=BZe(t,["size","color","variant"]),o=fs(),a=i in O9?i:o.loader;return N.createElement(st,jZe({role:"presentation",component:O9[a]||O9.bars,size:o.fn.size({size:n,sizes:zZe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}Mv.displayName="@mantine/core/Loader";var VZe=Object.defineProperty,WR=Object.getOwnPropertySymbols,zSe=Object.prototype.hasOwnProperty,USe=Object.prototype.propertyIsEnumerable,fae=(e,t,n)=>t in e?VZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dae=(e,t)=>{for(var n in t||(t={}))zSe.call(t,n)&&fae(e,n,t[n]);if(WR)for(var n of WR(t))USe.call(t,n)&&fae(e,n,t[n]);return e},HZe=(e,t)=>{var n={};for(var r in e)zSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WR)for(var r of WR(e))t.indexOf(r)<0&&USe.call(e,r)&&(n[r]=e[r]);return n};const qZe={color:"gray",size:"md",variant:"subtle",loading:!1},VSe=C.forwardRef((e,t)=>{const n=gt("ActionIcon",qZe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=HZe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=TZe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=N.createElement(Mv,dae({color:v.color,size:y.fn.size({size:a,sizes:uT})-12},f));return N.createElement(sm,dae({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});VSe.displayName="@mantine/core/ActionIcon";const Tw=VSe;function HSe(e){const{children:t,target:n,className:r}=gt("Portal",{},e),i=fs(),[s,o]=C.useState(!1),a=C.useRef();return dY(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?Dv.createPortal(N.createElement("div",{className:r,dir:i.dir},t),a.current):null}HSe.displayName="@mantine/core/Portal";var WZe=Object.defineProperty,GR=Object.getOwnPropertySymbols,qSe=Object.prototype.hasOwnProperty,WSe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?WZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GZe=(e,t)=>{for(var n in t||(t={}))qSe.call(t,n)&&hae(e,n,t[n]);if(GR)for(var n of GR(t))WSe.call(t,n)&&hae(e,n,t[n]);return e},YZe=(e,t)=>{var n={};for(var r in e)qSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GR)for(var r of GR(e))t.indexOf(r)<0&&WSe.call(e,r)&&(n[r]=e[r]);return n};function zE(e){var t=e,{withinPortal:n=!0,children:r}=t,i=YZe(t,["withinPortal","children"]);return n?N.createElement(HSe,GZe({},i),r):N.createElement(N.Fragment,null,r)}zE.displayName="@mantine/core/OptionalPortal";var KZe=Object.defineProperty,XZe=Object.defineProperties,QZe=Object.getOwnPropertyDescriptors,pae=Object.getOwnPropertySymbols,JZe=Object.prototype.hasOwnProperty,ZZe=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?KZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P9=(e,t)=>{for(var n in t||(t={}))JZe.call(t,n)&&mae(e,n,t[n]);if(pae)for(var n of pae(t))ZZe.call(t,n)&&mae(e,n,t[n]);return e},gae=(e,t)=>XZe(e,QZe(t));function eet({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var tet=lt((e,{color:t,radius:n,variant:r})=>({root:P9(gae(P9({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),eet({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:gae(P9({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}}));const net=tet;var ret=Object.defineProperty,yae=Object.getOwnPropertySymbols,iet=Object.prototype.hasOwnProperty,set=Object.prototype.propertyIsEnumerable,vae=(e,t,n)=>t in e?ret(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oet=(e,t)=>{for(var n in t||(t={}))iet.call(t,n)&&vae(e,n,t[n]);if(yae)for(var n of yae(t))set.call(t,n)&&vae(e,n,t[n]);return e};function GSe(e){return N.createElement("svg",oet({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),N.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}GSe.displayName="@mantine/core/CloseIcon";var aet=Object.defineProperty,YR=Object.getOwnPropertySymbols,YSe=Object.prototype.hasOwnProperty,KSe=Object.prototype.propertyIsEnumerable,_ae=(e,t,n)=>t in e?aet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uet=(e,t)=>{for(var n in t||(t={}))YSe.call(t,n)&&_ae(e,n,t[n]);if(YR)for(var n of YR(t))KSe.call(t,n)&&_ae(e,n,t[n]);return e},cet=(e,t)=>{var n={};for(var r in e)YSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YR)for(var r of YR(e))t.indexOf(r)<0&&KSe.call(e,r)&&(n[r]=e[r]);return n};const fet={xs:12,sm:14,md:16,lg:20,xl:24},det={size:"md"},XSe=C.forwardRef((e,t)=>{const n=gt("CloseButton",det,e),{iconSize:r,size:i="md"}=n,s=cet(n,["iconSize","size"]),o=fs(),a=r||o.fn.size({size:i,sizes:fet});return N.createElement(Tw,uet({size:i,ref:t},s),N.createElement(GSe,{width:a,height:a}))});XSe.displayName="@mantine/core/CloseButton";const om=XSe;var het=Object.defineProperty,KR=Object.getOwnPropertySymbols,QSe=Object.prototype.hasOwnProperty,JSe=Object.prototype.propertyIsEnumerable,bae=(e,t,n)=>t in e?het(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pet=(e,t)=>{for(var n in t||(t={}))QSe.call(t,n)&&bae(e,n,t[n]);if(KR)for(var n of KR(t))JSe.call(t,n)&&bae(e,n,t[n]);return e},met=(e,t)=>{var n={};for(var r in e)QSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KR)for(var r of KR(e))t.indexOf(r)<0&&JSe.call(e,r)&&(n[r]=e[r]);return n};const get={variant:"light"},ZSe=C.forwardRef((e,t)=>{const n=gt("Alert",get,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=met(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=net({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),b=Nu(r),E=s&&`${b}-title`,w=`${b}-body`;return N.createElement(st,pet({id:b,role:"alert","aria-labelledby":E,"aria-describedby":w,className:_(v.root,v[o],i),ref:t},y),N.createElement("div",{className:v.wrapper},c&&N.createElement("div",{className:v.icon},c),N.createElement("div",{className:v.body},s&&N.createElement("div",{className:v.title,"data-with-close-button":p||void 0},N.createElement("span",{id:E,className:v.label},s)),p&&N.createElement(om,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),N.createElement("div",{id:w,className:v.message},a))))});ZSe.displayName="@mantine/core/Alert";var yet=Object.defineProperty,vet=Object.defineProperties,_et=Object.getOwnPropertyDescriptors,wae=Object.getOwnPropertySymbols,bet=Object.prototype.hasOwnProperty,wet=Object.prototype.propertyIsEnumerable,Eae=(e,t,n)=>t in e?yet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aP=(e,t)=>{for(var n in t||(t={}))bet.call(t,n)&&Eae(e,n,t[n]);if(wae)for(var n of wae(t))wet.call(t,n)&&Eae(e,n,t[n]);return e},Eet=(e,t)=>vet(e,_et(t));function xet({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function Tet({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function Cet(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var Aet=lt((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:aP(Eet(aP(aP(aP({},e.fn.fontStyles()),e.fn.focusStyles()),Cet(i)),{color:Tet({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:xet({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const Iet=Aet;var Oet=Object.defineProperty,XR=Object.getOwnPropertySymbols,eTe=Object.prototype.hasOwnProperty,tTe=Object.prototype.propertyIsEnumerable,xae=(e,t,n)=>t in e?Oet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pet=(e,t)=>{for(var n in t||(t={}))eTe.call(t,n)&&xae(e,n,t[n]);if(XR)for(var n of XR(t))tTe.call(t,n)&&xae(e,n,t[n]);return e},ket=(e,t)=>{var n={};for(var r in e)eTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XR)for(var r of XR(e))t.indexOf(r)<0&&tTe.call(e,r)&&(n[r]=e[r]);return n};const $et={variant:"text"},nTe=C.forwardRef((e,t)=>{const n=gt("Text",$et,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:b}=n,E=ket(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:w,cx:x}=Iet({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return N.createElement(st,Pet({ref:t,className:x(w.root,{[w.gradient]:l==="gradient"},r),component:b?"span":"div"},E))});nTe.displayName="@mantine/core/Text";const ct=nTe;var Ret=lt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}}));const Net=Ret;var Det=Object.defineProperty,QR=Object.getOwnPropertySymbols,rTe=Object.prototype.hasOwnProperty,iTe=Object.prototype.propertyIsEnumerable,Sae=(e,t,n)=>t in e?Det(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tae=(e,t)=>{for(var n in t||(t={}))rTe.call(t,n)&&Sae(e,n,t[n]);if(QR)for(var n of QR(t))iTe.call(t,n)&&Sae(e,n,t[n]);return e},Met=(e,t)=>{var n={};for(var r in e)rTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QR)for(var r of QR(e))t.indexOf(r)<0&&iTe.call(e,r)&&(n[r]=e[r]);return n};const Let={},sTe=C.forwardRef((e,t)=>{const n=gt("Anchor",Let,e),{component:r,className:i,unstyled:s}=n,o=Met(n,["component","className","unstyled"]),{classes:a,cx:u}=Net(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return N.createElement(ct,Tae(Tae({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});sTe.displayName="@mantine/core/Anchor";const x6=sTe,oTe=C.createContext({}),Fet=oTe.Provider;function aTe(){return C.useContext(oTe)}function S6(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var jet=Object.defineProperty,Bet=Object.defineProperties,zet=Object.getOwnPropertyDescriptors,Cae=Object.getOwnPropertySymbols,Uet=Object.prototype.hasOwnProperty,Vet=Object.prototype.propertyIsEnumerable,Aae=(e,t,n)=>t in e?jet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uP=(e,t)=>{for(var n in t||(t={}))Uet.call(t,n)&&Aae(e,n,t[n]);if(Cae)for(var n of Cae(t))Vet.call(t,n)&&Aae(e,n,t[n]);return e},Iae=(e,t)=>Bet(e,zet(t)),Het=lt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?S6(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:Iae(uP(uP(Iae(uP(uP({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const qet=Het;var Wet=Object.defineProperty,JR=Object.getOwnPropertySymbols,uTe=Object.prototype.hasOwnProperty,lTe=Object.prototype.propertyIsEnumerable,Oae=(e,t,n)=>t in e?Wet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pae=(e,t)=>{for(var n in t||(t={}))uTe.call(t,n)&&Oae(e,n,t[n]);if(JR)for(var n of JR(t))lTe.call(t,n)&&Oae(e,n,t[n]);return e},Get=(e,t)=>{var n={};for(var r in e)uTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JR)for(var r of JR(e))t.indexOf(r)<0&&lTe.call(e,r)&&(n[r]=e[r]);return n};const mY=C.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=da("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=Get(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=aTe(),{classes:b,cx:E,theme:w}=qet({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),x=S6(r,w).reduce((S,[P,A])=>(S[`@media (min-width: ${P}px)`]={[`--mantine-${m}-width`]:`${A}px`},S),{});return N.createElement(st,Pae({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:E(b.root,f)},v),p,N.createElement(dSe,{styles:()=>({":root":Pae({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},x)})}))});mY.displayName="@mantine/core/HorizontalSection";var Yet=Object.defineProperty,ZR=Object.getOwnPropertySymbols,cTe=Object.prototype.hasOwnProperty,fTe=Object.prototype.propertyIsEnumerable,kae=(e,t,n)=>t in e?Yet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ket=(e,t)=>{for(var n in t||(t={}))cTe.call(t,n)&&kae(e,n,t[n]);if(ZR)for(var n of ZR(t))fTe.call(t,n)&&kae(e,n,t[n]);return e},Xet=(e,t)=>{var n={};for(var r in e)cTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZR)for(var r of ZR(e))t.indexOf(r)<0&&fTe.call(e,r)&&(n[r]=e[r]);return n};const dTe=C.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=Xet(n,["children","grow","sx"]);return N.createElement(st,Ket({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...Qg(s)]},o),r)});dTe.displayName="@mantine/core/Section";const hTe=dTe;var Qet=Object.defineProperty,$ae=Object.getOwnPropertySymbols,Jet=Object.prototype.hasOwnProperty,Zet=Object.prototype.propertyIsEnumerable,Rae=(e,t,n)=>t in e?Qet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ett=(e,t)=>{for(var n in t||(t={}))Jet.call(t,n)&&Rae(e,n,t[n]);if($ae)for(var n of $ae(t))Zet.call(t,n)&&Rae(e,n,t[n]);return e};const ttt={fixed:!1,position:{top:0,left:0},zIndex:da("app"),hiddenBreakpoint:"md",hidden:!1},i2=C.forwardRef((e,t)=>{const n=gt("Navbar",ttt,e);return N.createElement(mY,ett({section:"navbar",__staticSelector:"Navbar",ref:t},n))});i2.Section=hTe;i2.displayName="@mantine/core/Navbar";var ntt=Object.defineProperty,rtt=Object.defineProperties,itt=Object.getOwnPropertyDescriptors,Nae=Object.getOwnPropertySymbols,stt=Object.prototype.hasOwnProperty,ott=Object.prototype.propertyIsEnumerable,Dae=(e,t,n)=>t in e?ntt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k9=(e,t)=>{for(var n in t||(t={}))stt.call(t,n)&&Dae(e,n,t[n]);if(Nae)for(var n of Nae(t))ott.call(t,n)&&Dae(e,n,t[n]);return e},Mae=(e,t)=>rtt(e,itt(t)),att=lt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?S6(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:Mae(k9(Mae(k9(k9({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const utt=att;var ltt=Object.defineProperty,eN=Object.getOwnPropertySymbols,pTe=Object.prototype.hasOwnProperty,mTe=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?ltt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fae=(e,t)=>{for(var n in t||(t={}))pTe.call(t,n)&&Lae(e,n,t[n]);if(eN)for(var n of eN(t))mTe.call(t,n)&&Lae(e,n,t[n]);return e},ctt=(e,t)=>{var n={};for(var r in e)pTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eN)for(var r of eN(e))t.indexOf(r)<0&&mTe.call(e,r)&&(n[r]=e[r]);return n};const gTe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=da("app"),section:d,unstyled:h,__staticSelector:p}=n,m=ctt(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=aTe(),{classes:y,cx:v,theme:_}=utt({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),b=typeof a=="object"&&a!==null?S6(a,_).reduce((E,[w,x])=>(E[`@media (min-width: ${w}px)`]={[`--mantine-${d}-height`]:`${x}px`},E),{}):null;return N.createElement(st,Fae({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,N.createElement(dSe,{styles:()=>({":root":Fae({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},b)})}))});gTe.displayName="@mantine/core/VerticalSection";var ftt=Object.defineProperty,dtt=Object.defineProperties,htt=Object.getOwnPropertyDescriptors,jae=Object.getOwnPropertySymbols,ptt=Object.prototype.hasOwnProperty,mtt=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?ftt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gtt=(e,t)=>{for(var n in t||(t={}))ptt.call(t,n)&&Bae(e,n,t[n]);if(jae)for(var n of jae(t))mtt.call(t,n)&&Bae(e,n,t[n]);return e},ytt=(e,t)=>dtt(e,htt(t));const vtt={fixed:!1,position:{top:0,left:0,right:0},zIndex:da("app")},gY=C.forwardRef((e,t)=>{const n=gt("Header",vtt,e);return N.createElement(gTe,ytt(gtt({section:"header",__staticSelector:"Header"},n),{ref:t}))});gY.displayName="@mantine/core/Header";var _tt=Object.defineProperty,zae=Object.getOwnPropertySymbols,btt=Object.prototype.hasOwnProperty,wtt=Object.prototype.propertyIsEnumerable,Uae=(e,t,n)=>t in e?_tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ett=(e,t)=>{for(var n in t||(t={}))btt.call(t,n)&&Uae(e,n,t[n]);if(zae)for(var n of zae(t))wtt.call(t,n)&&Uae(e,n,t[n]);return e};const xtt={fixed:!1,position:{top:0,right:0},zIndex:da("app"),hiddenBreakpoint:"md",hidden:!1},yY=C.forwardRef((e,t)=>{const n=gt("Aside",xtt,e);return N.createElement(mY,Ett({section:"aside",__staticSelector:"Aside",ref:t},n))});yY.Section=hTe;yY.displayName="@mantine/core/Aside";var Stt=Object.defineProperty,Vae=Object.getOwnPropertySymbols,Ttt=Object.prototype.hasOwnProperty,Ctt=Object.prototype.propertyIsEnumerable,Hae=(e,t,n)=>t in e?Stt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Att=(e,t)=>{for(var n in t||(t={}))Ttt.call(t,n)&&Hae(e,n,t[n]);if(Vae)for(var n of Vae(t))Ctt.call(t,n)&&Hae(e,n,t[n]);return e};function Itt(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var Ott=lt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:Att({flex:1,width:"100vw",boxSizing:"border-box"},Itt(t,e))}));const Ptt=Ott;var ktt=Object.defineProperty,tN=Object.getOwnPropertySymbols,yTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,qae=(e,t,n)=>t in e?ktt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$tt=(e,t)=>{for(var n in t||(t={}))yTe.call(t,n)&&qae(e,n,t[n]);if(tN)for(var n of tN(t))vTe.call(t,n)&&qae(e,n,t[n]);return e},Rtt=(e,t)=>{var n={};for(var r in e)yTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tN)for(var r of tN(e))t.indexOf(r)<0&&vTe.call(e,r)&&(n[r]=e[r]);return n};const Ntt={fixed:!0,zIndex:da("app"),padding:"md"},JA=C.forwardRef((e,t)=>{const n=gt("AppShell",Ntt,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=Rtt(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:b}=Ptt({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?N.createElement(N.Fragment,null,r):N.createElement(Fet,{value:{fixed:u,zIndex:l}},N.createElement(st,$tt({className:b(_.root,h),ref:t},v),s,N.createElement("div",{className:_.body},i,N.createElement("main",{className:_.main},r),a),o))});JA.displayName="@mantine/core/AppShell";const lP={xs:1,sm:2,md:3,lg:4,xl:5};function cP(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var Dtt=lt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:lP})}px ${n} ${cP(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:lP})}px ${n} ${cP(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:lP}),borderTopColor:cP(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:lP}),borderLeftColor:cP(e,r),borderLeftStyle:n}}));const Mtt=Dtt;var Ltt=Object.defineProperty,Ftt=Object.defineProperties,jtt=Object.getOwnPropertyDescriptors,nN=Object.getOwnPropertySymbols,_Te=Object.prototype.hasOwnProperty,bTe=Object.prototype.propertyIsEnumerable,Wae=(e,t,n)=>t in e?Ltt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gae=(e,t)=>{for(var n in t||(t={}))_Te.call(t,n)&&Wae(e,n,t[n]);if(nN)for(var n of nN(t))bTe.call(t,n)&&Wae(e,n,t[n]);return e},Btt=(e,t)=>Ftt(e,jtt(t)),ztt=(e,t)=>{var n={};for(var r in e)_Te.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nN)for(var r of nN(e))t.indexOf(r)<0&&bTe.call(e,r)&&(n[r]=e[r]);return n};const Utt={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},rN=C.forwardRef((e,t)=>{const n=gt("Divider",Utt,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=ztt(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=Mtt({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,b=!(l!=null&&l.color);return N.createElement(st,Gae({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&N.createElement(ct,Btt(Gae({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:b})}),a))});rN.displayName="@mantine/core/Divider";var Vtt=Object.defineProperty,Htt=Object.defineProperties,qtt=Object.getOwnPropertyDescriptors,Yae=Object.getOwnPropertySymbols,Wtt=Object.prototype.hasOwnProperty,Gtt=Object.prototype.propertyIsEnumerable,Kae=(e,t,n)=>t in e?Vtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xae=(e,t)=>{for(var n in t||(t={}))Wtt.call(t,n)&&Kae(e,n,t[n]);if(Yae)for(var n of Yae(t))Gtt.call(t,n)&&Kae(e,n,t[n]);return e},Ytt=(e,t)=>Htt(e,qtt(t)),Ktt=lt((e,{size:t})=>({item:Ytt(Xae({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":Xae({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const Xtt=Ktt;var Qtt=Object.defineProperty,Qae=Object.getOwnPropertySymbols,Jtt=Object.prototype.hasOwnProperty,Ztt=Object.prototype.propertyIsEnumerable,Jae=(e,t,n)=>t in e?Qtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ent=(e,t)=>{for(var n in t||(t={}))Jtt.call(t,n)&&Jae(e,n,t[n]);if(Qae)for(var n of Qae(t))Ztt.call(t,n)&&Jae(e,n,t[n]);return e};function vY({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=Xtt({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const b=(w,x)=>{const S=typeof i=="function"?i(w.value):!1;return N.createElement(c,ent({key:w.value,className:g.item,"data-disabled":w.disabled||void 0,"data-hovered":!w.disabled&&t===x||void 0,"data-selected":!w.disabled&&S||void 0,onMouseEnter:()=>a(x),id:`${s}-${x}`,role:"option",tabIndex:-1,"aria-selected":t===x,ref:P=>{l&&l.current&&(l.current[w.value]=P)},onMouseDown:w.disabled?null:P=>{P.preventDefault(),u(w)},disabled:w.disabled},w))};let E=null;if(e.forEach((w,x)=>{w.creatable?_=x:w.group?(E!==w.group&&(E=w.group,v.push(N.createElement("div",{className:g.separator,key:`__mantine-divider-${x}`},N.createElement(rN,{classNames:{label:g.separatorLabel},label:w.group})))),v.push(b(w,x))):y.push(b(w,x))}),h){const w=e[_];y.push(N.createElement("div",{key:i$(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:x=>{x.preventDefault(),u(w)},tabIndex:-1,ref:x=>{l&&l.current&&(l.current[w.value]=x)}},p))}return v.length>0&&y.length>0&&y.unshift(N.createElement("div",{className:g.separator,key:"empty-group-separator"},N.createElement(rN,null))),v.length>0||y.length>0?N.createElement(N.Fragment,null,v,y):N.createElement(ct,{size:f,unstyled:m,className:g.nothingFound},d)}vY.displayName="@mantine/core/SelectItems";var tnt=Object.defineProperty,iN=Object.getOwnPropertySymbols,wTe=Object.prototype.hasOwnProperty,ETe=Object.prototype.propertyIsEnumerable,Zae=(e,t,n)=>t in e?tnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nnt=(e,t)=>{for(var n in t||(t={}))wTe.call(t,n)&&Zae(e,n,t[n]);if(iN)for(var n of iN(t))ETe.call(t,n)&&Zae(e,n,t[n]);return e},rnt=(e,t)=>{var n={};for(var r in e)wTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iN)for(var r of iN(e))t.indexOf(r)<0&&ETe.call(e,r)&&(n[r]=e[r]);return n};const _Y=C.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=rnt(n,["label","value"]);return N.createElement("div",nnt({ref:t},s),r||i)});_Y.displayName="@mantine/core/DefaultItem";function int(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function xTe(...e){return t=>e.forEach(n=>int(n,t))}function Lv(...e){return C.useCallback(xTe(...e),e)}const STe=C.forwardRef((e,t)=>{const{children:n,...r}=e,i=C.Children.toArray(n),s=i.find(ont);if(s){const o=s.props.children,a=i.map(u=>u===s?C.Children.count(o)>1?C.Children.only(null):C.isValidElement(o)?o.props.children:null:u);return C.createElement(pU,gi({},r,{ref:t}),C.isValidElement(o)?C.cloneElement(o,void 0,a):null)}return C.createElement(pU,gi({},r,{ref:t}),n)});STe.displayName="Slot";const pU=C.forwardRef((e,t)=>{const{children:n,...r}=e;return C.isValidElement(n)?C.cloneElement(n,{...ant(r,n.props),ref:xTe(t,n.ref)}):C.Children.count(n)>1?C.Children.only(null):null});pU.displayName="SlotClone";const snt=({children:e})=>C.createElement(C.Fragment,null,e);function ont(e){return C.isValidElement(e)&&e.type===snt}function ant(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const unt=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],ZA=unt.reduce((e,t)=>{const n=C.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?STe:t;return C.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),C.createElement(a,gi({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),mU=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{};function lnt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const eI=e=>{const{present:t,children:n}=e,r=cnt(t),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),s=Lv(r.ref,i.ref);return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};eI.displayName="Presence";function cnt(e){const[t,n]=C.useState(),r=C.useRef({}),i=C.useRef(e),s=C.useRef("none"),o=e?"mounted":"unmounted",[a,u]=lnt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const l=fP(r.current);s.current=a==="mounted"?l:"none"},[a]),mU(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=fP(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),mU(()=>{if(t){const l=f=>{const h=fP(r.current).includes(f.animationName);f.target===t&&h&&Dv.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=fP(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function fP(e){return(e==null?void 0:e.animationName)||"none"}function fnt(e,t=[]){let n=[];function r(s,o){const a=C.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=C.useMemo(()=>p,Object.values(p));return C.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=C.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>C.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,dnt(i,...t)]}function dnt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function jy(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const hnt=C.createContext(void 0);function pnt(e){const t=C.useContext(hnt);return e||t||"ltr"}function mnt(e,[t,n]){return Math.min(n,Math.max(t,e))}function S1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function gnt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const TTe="ScrollArea",[CTe,HTn]=fnt(TTe),[ynt,pc]=CTe(TTe),vnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=C.useState(null),[l,c]=C.useState(null),[f,d]=C.useState(null),[h,p]=C.useState(null),[m,g]=C.useState(null),[y,v]=C.useState(0),[_,b]=C.useState(0),[E,w]=C.useState(!1),[x,S]=C.useState(!1),P=Lv(t,O=>u(O)),A=pnt(i);return C.createElement(ynt,{scope:n,type:r,dir:A,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:w,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:b},C.createElement(ZA.div,gi({dir:A},o,{ref:P,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),_nt="ScrollAreaViewport",bnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=pc(_nt,n),o=C.useRef(null),a=Lv(t,o,s.onViewportChange);return C.createElement(C.Fragment,null,C.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),C.createElement(ZA.div,gi({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),C.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),am="ScrollAreaScrollbar",wnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pc(am,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return C.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?C.createElement(Ent,gi({},r,{ref:t,forceMount:n})):i.type==="scroll"?C.createElement(xnt,gi({},r,{ref:t,forceMount:n})):i.type==="auto"?C.createElement(ATe,gi({},r,{ref:t,forceMount:n})):i.type==="always"?C.createElement(bY,gi({},r,{ref:t})):null}),Ent=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pc(am,e.__scopeScrollArea),[s,o]=C.useState(!1);return C.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),C.createElement(eI,{present:n||s},C.createElement(ATe,gi({"data-state":s?"visible":"hidden"},r,{ref:t})))}),xnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pc(am,e.__scopeScrollArea),s=e.orientation==="horizontal",o=C6(()=>u("SCROLL_END"),100),[a,u]=gnt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),C.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),C.createElement(eI,{present:n||a!=="hidden"},C.createElement(bY,gi({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:S1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:S1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),ATe=C.forwardRef((e,t)=>{const n=pc(am,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=C.useState(!1),a=e.orientation==="horizontal",u=C6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return Cw(n.viewport,u),Cw(n.content,u),C.createElement(eI,{present:r||s},C.createElement(bY,gi({"data-state":s?"visible":"hidden"},i,{ref:t})))}),bY=C.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=pc(am,e.__scopeScrollArea),s=C.useRef(null),o=C.useRef(0),[a,u]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=kTe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return knt(d,o.current,a,h)}return n==="horizontal"?C.createElement(Snt,gi({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=eue(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?C.createElement(Tnt,gi({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=eue(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),Snt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=pc(am,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=Lv(t,u,s.onScrollbarXChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(OTe,gi({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":T6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),RTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:sN(o.paddingLeft),paddingEnd:sN(o.paddingRight)}})}}))}),Tnt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=pc(am,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=Lv(t,u,s.onScrollbarYChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(OTe,gi({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":T6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),RTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:sN(o.paddingTop),paddingEnd:sN(o.paddingBottom)}})}}))}),[Cnt,ITe]=CTe(am),OTe=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=pc(am,n),[p,m]=C.useState(null),g=Lv(t,P=>m(P)),y=C.useRef(null),v=C.useRef(""),_=h.viewport,b=r.content-r.viewport,E=jy(c),w=jy(u),x=C6(f,10);function S(P){if(y.current){const A=P.clientX-y.current.left,O=P.clientY-y.current.top;l({x:A,y:O})}}return C.useEffect(()=>{const P=A=>{const O=A.target;(p==null?void 0:p.contains(O))&&E(A,b)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[_,p,b,E]),C.useEffect(w,[r,w]),Cw(p,x),Cw(h.content,x),C.createElement(Cnt,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:jy(s),onThumbPointerUp:jy(o),onThumbPositionChange:w,onThumbPointerDown:jy(a)},C.createElement(ZA.div,gi({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:S1(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(P))}),onPointerMove:S1(e.onPointerMove,S),onPointerUp:S1(e.onPointerUp,P=>{P.target.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),gU="ScrollAreaThumb",Ant=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ITe(gU,e.__scopeScrollArea);return C.createElement(eI,{present:n||i.hasThumb},C.createElement(Int,gi({ref:t},r)))}),Int=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=pc(gU,n),o=ITe(gU,n),{onThumbPositionChange:a}=o,u=Lv(t,f=>o.onThumbChange(f)),l=C.useRef(),c=C6(()=>{l.current&&(l.current(),l.current=void 0)},100);return C.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=$nt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),C.createElement(ZA.div,gi({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:S1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:S1(e.onPointerUp,o.onThumbPointerUp)}))}),PTe="ScrollAreaCorner",Ont=C.forwardRef((e,t)=>{const n=pc(PTe,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?C.createElement(Pnt,gi({},e,{ref:t})):null}),Pnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=pc(PTe,n),[s,o]=C.useState(0),[a,u]=C.useState(0),l=!!(s&&a);return Cw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Cw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?C.createElement(ZA.div,gi({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function sN(e){return e?parseInt(e,10):0}function kTe(e,t){const n=e/t;return isNaN(n)?0:n}function T6(e){const t=kTe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function knt(e,t,n,r="ltr"){const i=T6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return $Te([u,l],f)(e)}function eue(e,t,n="ltr"){const r=T6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=mnt(e,u);return $Te([0,o],[0,a])(l)}function $Te(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function RTe(e,t){return e>0&&e<t}const $nt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function C6(e,t){const n=jy(e),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Cw(e,t){const n=jy(t);mU(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Rnt=vnt,Nnt=bnt,tue=wnt,nue=Ant,Dnt=Ont;var Mnt=lt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const Lnt=Mnt;var Fnt=Object.defineProperty,jnt=Object.defineProperties,Bnt=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,NTe=Object.prototype.hasOwnProperty,DTe=Object.prototype.propertyIsEnumerable,rue=(e,t,n)=>t in e?Fnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MTe=(e,t)=>{for(var n in t||(t={}))NTe.call(t,n)&&rue(e,n,t[n]);if(oN)for(var n of oN(t))DTe.call(t,n)&&rue(e,n,t[n]);return e},znt=(e,t)=>jnt(e,Bnt(t)),LTe=(e,t)=>{var n={};for(var r in e)NTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oN)for(var r of oN(e))t.indexOf(r)<0&&DTe.call(e,r)&&(n[r]=e[r]);return n};const FTe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},A6=C.forwardRef((e,t)=>{const n=gt("ScrollArea",FTe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=LTe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=C.useState(!1),v=fs(),{classes:_,cx:b}=Lnt({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return N.createElement(Rnt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},N.createElement(st,MTe({className:b(_.root,i)},m),N.createElement(Nnt,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:E})=>h({x:E.scrollLeft,y:E.scrollTop}):void 0},r),N.createElement(tue,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},N.createElement(nue,{className:_.thumb})),N.createElement(tue,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},N.createElement(nue,{className:_.thumb})),N.createElement(Dnt,{className:_.corner})))}),jTe=C.forwardRef((e,t)=>{const n=gt("ScrollAreaAutosize",FTe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=LTe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return N.createElement(st,znt(MTe({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...Qg(m)]}),N.createElement(st,{sx:{display:"flex",flexDirection:"column",flex:1}},N.createElement(A6,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});jTe.displayName="@mantine/core/ScrollAreaAutosize";A6.displayName="@mantine/core/ScrollArea";A6.Autosize=jTe;const BTe=A6;var Unt=Object.defineProperty,Vnt=Object.defineProperties,Hnt=Object.getOwnPropertyDescriptors,aN=Object.getOwnPropertySymbols,zTe=Object.prototype.hasOwnProperty,UTe=Object.prototype.propertyIsEnumerable,iue=(e,t,n)=>t in e?Unt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sue=(e,t)=>{for(var n in t||(t={}))zTe.call(t,n)&&iue(e,n,t[n]);if(aN)for(var n of aN(t))UTe.call(t,n)&&iue(e,n,t[n]);return e},qnt=(e,t)=>Vnt(e,Hnt(t)),Wnt=(e,t)=>{var n={};for(var r in e)zTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aN)for(var r of aN(e))t.indexOf(r)<0&&UTe.call(e,r)&&(n[r]=e[r]);return n};const I6=C.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Wnt(n,["style"]);return N.createElement(BTe,qnt(sue({},i),{style:sue({width:"100%"},r),viewportRef:t}),i.children)});I6.displayName="@mantine/core/SelectScrollArea";var Gnt=lt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const Ynt=Gnt;function Rp(e){return e.split("-")[0]}function tI(e){return e.split("-")[1]}function Fv(e){return["top","bottom"].includes(Rp(e))?"x":"y"}function wY(e){return e==="y"?"height":"width"}function oue(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=Fv(t),u=wY(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(Rp(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(tI(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const Knt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=oue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:b,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=oue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function EY(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function yC(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function xY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=EY(h),m=a[d?f==="floating"?"reference":"floating":f],g=yC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=yC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const VTe=Math.min,Um=Math.max;function yU(e,t,n){return Um(e,VTe(t,n))}const aue=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=EY(r),c={x:i,y:s},f=Fv(o),d=tI(o),h=wY(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let b=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;b===0&&(b=a.floating[h]);const E=y/2-v/2,w=l[m],x=b-p[h]-l[g],S=b/2-p[h]/2+E,P=yU(w,S,x),A=(d==="start"?l[m]:l[g])>0&&S!==P&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(A?S<w?w-S:x-S:0),data:{[f]:P,centerOffset:S-P}}}}),Xnt={left:"right",right:"left",bottom:"top",top:"bottom"};function uN(e){return e.replace(/left|right|bottom|top/g,t=>Xnt[t])}function Qnt(e,t,n){n===void 0&&(n=!1);const r=tI(e),i=Fv(e),s=wY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=uN(o)),{main:o,cross:uN(o)}}const Jnt={start:"end",end:"start"};function uue(e){return e.replace(/start|end/g,t=>Jnt[t])}const Znt=["top","right","bottom","left"];Znt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const HTe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=Rp(r),g=f||(m===o||!h?[uN(o)]:function(S){const P=uN(S);return[uue(S),P,uue(P)]}(o)),y=[o,...g],v=await xY(t,p),_=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:S,cross:P}=Qnt(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[S],v[P])}if(b=[...b,{placement:r,overflows:_}],!_.every(S=>S<=0)){var E,w;const S=((E=(w=i.flip)==null?void 0:w.index)!=null?E:0)+1,P=y[S];if(P)return{data:{index:S,overflows:b},reset:{placement:P}};let A="bottom";switch(d){case"bestFit":{var x;const O=(x=b.map(z=>[z,z.overflows.filter(M=>M>0).reduce((M,R)=>M+R,0)]).sort((z,M)=>z[1]-M[1])[0])==null?void 0:x[0].placement;O&&(A=O);break}case"initialPlacement":A=o}if(r!==A)return{reset:{placement:A}}}return{}}}},qTe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=Rp(a),d=tI(a),h=Fv(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function WTe(e){return e==="x"?"y":"x"}const SY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await xY(t,u),f=Fv(Rp(i)),d=WTe(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=yU(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=yU(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},ert=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=Fv(i),d=WTe(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const E=f==="y"?"height":"width",w=s.reference[f]-s.floating[E]+g.mainAxis,x=s.reference[f]+s.reference[E]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v,_,b;const E=f==="y"?"width":"height",w=["top","left"].includes(Rp(i)),x=s.reference[d]-s.floating[E]+(w&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[E]+(w?0:(_=(b=o.offset)==null?void 0:b[d])!=null?_:0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[f]:h,[d]:p}}}},trt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await xY(t,a),l=Rp(n),c=tI(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=Um(u.left,0),p=Um(u.right,0),m=Um(u.top,0),g=Um(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:Um(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:Um(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},GTe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=yC(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=EY(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(Fv(r)==="x"){const w=d[0],x=d[d.length-1],S=Rp(r)==="top",P=w.top,A=x.bottom,O=S?w.left:x.left,z=S?w.right:x.right;return{top:P,bottom:A,left:O,right:z,width:z-O,height:A-P,x:O,y:P}}const g=Rp(r)==="left",y=Um(...d.map(w=>w.right)),v=VTe(...d.map(w=>w.left)),_=d.filter(w=>g?w.left===v:w.right===y),b=_[0].top,E=_[_.length-1].bottom;return{top:b,bottom:E,left:v,right:y,width:y-v,height:E-b,x:v,y:b}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function YTe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function um(e){if(e==null)return window;if(!YTe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Jg(e){return um(e).getComputedStyle(e)}function Zg(e){return YTe(e)?"":e?(e.nodeName||"").toLowerCase():""}function KTe(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Np(e){return e instanceof um(e).HTMLElement}function mp(e){return e instanceof um(e).Element}function lue(e){return typeof ShadowRoot>"u"?!1:e instanceof um(e).ShadowRoot||e instanceof ShadowRoot}function O6(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Jg(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function nrt(e){return["table","td","th"].includes(Zg(e))}function vU(e){const t=/firefox/i.test(KTe()),n=Jg(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function XTe(){return!/^((?!chrome|android).)*safari/i.test(KTe())}function TY(e){return["html","body","#document"].includes(Zg(e))}const cue=Math.min,s2=Math.max,lN=Math.round;function gp(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&Np(e)&&(u=e.offsetWidth>0&&lN(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&lN(a.height)/e.offsetHeight||1);const c=mp(e)?um(e):window,f=!XTe()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function kg(e){return(t=e,(t instanceof um(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function P6(e){return mp(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function QTe(e){return gp(kg(e)).left+P6(e).scrollLeft}function rrt(e,t,n){const r=Np(t),i=kg(t),s=gp(e,r&&function(u){const l=gp(u);return lN(l.width)!==u.offsetWidth||lN(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((Zg(t)!=="body"||O6(i))&&(o=P6(t)),Np(t)){const u=gp(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=QTe(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function cN(e){if(Zg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(lue(e)?e.host:null)||kg(e);return lue(t)?t.host:t}function fue(e){return Np(e)&&Jg(e).position!=="fixed"?e.offsetParent:null}function due(e){const t=um(e);let n=fue(e);for(;n&&nrt(n)&&Jg(n).position==="static";)n=fue(n);return n&&(Zg(n)==="html"||Zg(n)==="body"&&Jg(n).position==="static"&&!vU(n))?t:n||function(r){let i=cN(r);for(;Np(i)&&!TY(i);){if(vU(i))return i;i=cN(i)}return null}(e)||t}function hue(e){if(Np(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=gp(e);return{width:t.width,height:t.height}}function JTe(e){const t=cN(e);return TY(t)?e.ownerDocument.body:Np(t)&&O6(t)?t:JTe(t)}function yp(e,t){var n;t===void 0&&(t=[]);const r=JTe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=um(r),o=i?[s].concat(s.visualViewport||[],O6(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(yp(o))}function pue(e,t,n){return t==="viewport"?yC(function(r,i){const s=um(r),o=kg(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=XTe();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):mp(t)?function(r,i){const s=gp(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):yC(function(r){var i;const s=kg(r),o=P6(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=s2(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=s2(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+QTe(r);const f=-o.scrollTop;return Jg(a||s).direction==="rtl"&&(c+=s2(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(kg(e)))}const irt={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=yp(l).filter(h=>mp(h)&&Zg(h)!=="body"),f=l,d=null;for(;mp(f)&&!TY(f);){const h=Jg(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!vU(f)?c=c.filter(p=>p!==f):d=h,f=cN(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=pue(t,c,i);return l.top=s2(f.top,l.top),l.right=cue(f.right,l.right),l.bottom=cue(f.bottom,l.bottom),l.left=s2(f.left,l.left),l},pue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Np(n),s=kg(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((Zg(n)!=="body"||O6(s))&&(o=P6(n)),Np(n))){const u=gp(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:mp,getDimensions:hue,getOffsetParent:due,getDocumentElement:kg,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:rrt(t,due(n),r),floating:{...hue(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Jg(e).direction==="rtl"};function srt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...mp(e)?yp(e):e.contextElement?yp(e.contextElement):[],...yp(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),mp(e)&&!a&&f.observe(e),mp(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?gp(e):null;return a&&function h(){const p=gp(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const ort=(e,t,n)=>Knt(e,t,{platform:irt,...n});var _U=typeof document<"u"?C.useLayoutEffect:C.useEffect;function fN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!fN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!fN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function art(e){const t=C.useRef(e);return _U(()=>{t.current=e}),t}function urt(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=C.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=C.useState(t);fN(a,t)||u(t);const l=C.useRef(null),c=C.useRef(null),f=C.useRef(null),d=C.useRef(s),h=art(i),p=C.useCallback(()=>{!l.current||!c.current||ort(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(b=>{m.current&&!fN(d.current,b)&&(d.current=b,Dv.flushSync(()=>{o(b)}))})},[a,n,r]);_U(()=>{m.current&&p()},[p]);const m=C.useRef(!1);_U(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=C.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const b=h.current(l.current,c.current,p);f.current=b}else p()},[p,h]),y=C.useCallback(b=>{l.current=b,g()},[g]),v=C.useCallback(b=>{c.current=b,g()},[g]),_=C.useMemo(()=>({reference:l,floating:c}),[]);return C.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const ZTe=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?aue({element:t.current,padding:n}).fn(i):{}:t?aue({element:t,padding:n}).fn(i):{}}}};var Aw=typeof document<"u"?C.useLayoutEffect:C.useEffect;function lrt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let $9=!1,crt=0;const mue=()=>"floating-ui-"+crt++;function frt(){const[e,t]=C.useState(()=>$9?mue():void 0);return Aw(()=>{e==null&&t(mue())},[]),C.useEffect(()=>{$9||($9=!0)},[]),e}const gue=q1.useId,yue=gue??frt,drt=C.createContext(null),hrt=C.createContext(null),e2e=()=>{var e,t;return(e=(t=C.useContext(drt))==null?void 0:t.id)!=null?e:null},CY=()=>C.useContext(hrt);function Jm(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function t2e(e){var t;return(t=Jm(e).defaultView)!=null?t:window}function n1(e){return e?e instanceof t2e(e).Element:!1}function prt(e){return e?e instanceof t2e(e).HTMLElement:!1}const vue=q1.useInsertionEffect;function mrt(e){const t=C.useRef(()=>{});return vue?vue(()=>{t.current=e}):t.current=e,C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function AY(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=C.useState(null),c=CY(),f=C.useRef(null),d=C.useRef({}),h=C.useState(()=>lrt())[0],p=urt({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=mrt(n),g=C.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=C.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);Aw(()=>{const b=c==null?void 0:c.nodesRef.current.find(E=>E.id===a);b&&(b.context=y)});const{reference:v}=p,_=C.useCallback(b=>{(n1(b)||b===null)&&(y.refs.domReference.current=b,l(b)),v(b)},[v,y.refs]);return C.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function R9(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const grt=function(e){e===void 0&&(e=[]);const t=e,n=C.useCallback(s=>R9(s,e,"reference"),t),r=C.useCallback(s=>R9(s,e,"floating"),t),i=C.useCallback(s=>R9(s,e,"item"),t);return C.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function N9(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function yrt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function _ue(e){const t=C.useRef(e);return Aw(()=>{t.current=e}),t}function vrt(e){const t=C.useRef();return Aw(()=>{t.current=e},[e]),t.current}function s$(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const _rt=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=CY(),m=e2e(),g=_ue(i),y=_ue(r),v=vrt(u),_=C.useRef(),b=C.useRef(),E=C.useRef(),w=C.useRef(),x=C.useRef(!0),S=C.useRef(!1),P=C.useCallback(()=>{var M;const R=(M=c.current.openEvent)==null?void 0:M.type;return(R==null?void 0:R.includes("mouse"))&&R!=="mousedown"},[c]);C.useEffect(()=>{if(!n)return;function M(){clearTimeout(b.current),clearTimeout(w.current),x.current=!0}return f.on("dismiss",M),()=>{f.off("dismiss",M)}},[n,f,d]),C.useEffect(()=>{if(!n||!g.current)return;function M(){P()&&l(!1)}const R=Jm(d.floating.current).documentElement;return R.addEventListener("mouseleave",M),()=>{R.removeEventListener("mouseleave",M)}},[d,l,n,g,c,P]);const A=C.useCallback(function(M){M===void 0&&(M=!0);const R=s$(y.current,"close",_.current);R&&!E.current?(clearTimeout(b.current),b.current=setTimeout(()=>l(!1),R)):M&&(clearTimeout(b.current),l(!1))},[y,l]),O=C.useCallback(()=>{E.current&&(Jm(d.floating.current).removeEventListener("pointermove",E.current),E.current=void 0)},[d]),z=C.useCallback(()=>{Jm(d.floating.current).body.style.pointerEvents="",S.current=!1},[d]);return C.useEffect(()=>{if(!n)return;function M(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function R(H){if(clearTimeout(b.current),x.current=!1,s&&_.current!=="mouse"||o>0&&s$(y.current,"open")===0)return;c.current.openEvent=H;const U=s$(y.current,"open",_.current);U?b.current=setTimeout(()=>{l(!0)},U):l(!0)}function D(H){if(M())return;const U=Jm(d.floating.current);if(clearTimeout(w.current),g.current){clearTimeout(b.current),E.current&&U.removeEventListener("pointermove",E.current),E.current=g.current({...e,tree:p,x:H.clientX,y:H.clientY,onClose(){z(),O(),A()}}),U.addEventListener("pointermove",E.current);return}A()}function L(H){M()||g.current==null||g.current({...e,tree:p,x:H.clientX,y:H.clientY,leave:!0,onClose(){z(),O(),A()}})(H)}const V=d.floating.current,B=d.domReference.current;if(n1(B))return u&&B.addEventListener("mouseleave",L),V==null||V.addEventListener("mouseleave",L),a&&B.addEventListener("mousemove",R,{once:!0}),B.addEventListener("mouseenter",R),B.addEventListener("mouseleave",D),()=>{u&&B.removeEventListener("mouseleave",L),V==null||V.removeEventListener("mouseleave",L),a&&B.removeEventListener("mousemove",R),B.removeEventListener("mouseenter",R),B.removeEventListener("mouseleave",D)}},[h.domReference,n,e,s,o,a,A,O,z,l,u,p,d,y,g,c]),Aw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&P()){Jm(d.floating.current).body.style.pointerEvents="none",S.current=!0;const D=d.domReference.current,L=d.floating.current;if(n1(D)&&L){var M,R;const V=p==null||(M=p.nodesRef.current.find(B=>B.id===m))==null||(R=M.context)==null?void 0:R.refs.floating.current;return V&&(V.style.pointerEvents=""),D.style.pointerEvents="auto",L.style.pointerEvents="auto",()=>{D.style.pointerEvents="",L.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,P]),Aw(()=>{v&&!u&&(_.current=void 0,O(),z())}),C.useEffect(()=>()=>{O(),clearTimeout(b.current),clearTimeout(w.current),S.current&&z()},[n,O,z]),C.useMemo(()=>{if(!n)return{};function M(R){_.current=R.pointerType}return{reference:{onPointerDown:M,onPointerEnter:M,onMouseMove(){u||o===0||(clearTimeout(w.current),w.current=setTimeout(()=>{x.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(){A(!1)}}}},[n,o,u,l,A])},n2e=C.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),r2e=()=>C.useContext(n2e),brt=e=>{let{children:t,delay:n}=e;const[r,i]=C.useState({delay:n,initialDelay:n,currentId:null}),s=C.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return C.createElement(n2e.Provider,{value:C.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},wrt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=r2e();C.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:s$(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),C.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},Ert=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=yue(),o=yue();return C.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function D9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const xrt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Srt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Trt=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=CY(),g=e2e()!=null,y=C.useRef(!1);return C.useEffect(()=>{if(!n||!a)return;function v(x){if(x.key==="Escape"){if(!p&&m&&N9(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(x){const S=y.current;if(y.current=!1,S)return;const P=yrt(x);if(n1(P)&&i.floating.current){var A;const z=(A=i.floating.current.ownerDocument.defaultView)!=null?A:window,M=P.scrollWidth>P.clientWidth,R=P.scrollHeight>P.clientHeight;let D=R&&x.offsetX>P.clientWidth;if(R&&z.getComputedStyle(P).direction==="rtl"&&(D=x.offsetX<=P.offsetWidth-P.clientWidth),D||M&&x.offsetY>P.clientHeight)return}const O=m&&N9(m.nodesRef.current,o).some(z=>{var M;return D9(x,(M=z.context)==null?void 0:M.refs.floating.current)});D9(x,i.floating.current)||D9(x,i.domReference.current)||O||!p&&m&&N9(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function b(){r(!1)}const E=Jm(i.floating.current);u&&E.addEventListener("keydown",v),l&&E.addEventListener(c,_);let w=[];return h&&(n1(i.domReference.current)&&(w=yp(i.domReference.current)),n1(i.floating.current)&&(w=w.concat(yp(i.floating.current))),!n1(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(w=w.concat(yp(i.reference.current.contextElement)))),w=w.filter(x=>{var S;return x!==((S=E.defaultView)==null?void 0:S.visualViewport)}),w.forEach(x=>{x.addEventListener("scroll",b,{passive:!0})}),()=>{u&&E.removeEventListener("keydown",v),l&&E.removeEventListener(c,_),w.forEach(x=>{x.removeEventListener("scroll",b)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),C.useEffect(()=>{y.current=!1},[l,c]),C.useMemo(()=>a?{reference:{[xrt[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[Srt[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},Crt=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=C.useRef(""),c=C.useRef(!1),f=C.useRef();return C.useEffect(()=>{var d;if(!a)return;const p=(d=Jm(s.floating.current).defaultView)!=null?d:window;function m(){!n&&prt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),C.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),C.useEffect(()=>()=>{clearTimeout(f.current)},[]),C.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function i2e({opened:e,floating:t,positionDependencies:n}){const[r,i]=C.useState(0);C.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return srt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),Ss(()=>{t.update()},n),Ss(()=>{i(s=>s+1)},[e])}function Art(e){const t=[qTe(e.offset)];return e.middlewares.shift&&t.push(SY({limiter:ert()})),e.middlewares.flip&&t.push(HTe()),e.middlewares.inline&&t.push(GTe()),t.push(ZTe({element:e.arrowRef})),t}function Irt(e){const[t,n]=oa({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=AY({placement:e.position,middleware:[...Art(e),...e.width==="target"?[trt({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return i2e({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),Ss(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const s2e={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Ort,o2e]=eY(s2e.context);var Prt=Object.defineProperty,krt=Object.defineProperties,$rt=Object.getOwnPropertyDescriptors,dN=Object.getOwnPropertySymbols,a2e=Object.prototype.hasOwnProperty,u2e=Object.prototype.propertyIsEnumerable,bue=(e,t,n)=>t in e?Prt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dP=(e,t)=>{for(var n in t||(t={}))a2e.call(t,n)&&bue(e,n,t[n]);if(dN)for(var n of dN(t))u2e.call(t,n)&&bue(e,n,t[n]);return e},Rrt=(e,t)=>krt(e,$rt(t)),Nrt=(e,t)=>{var n={};for(var r in e)a2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dN)for(var r of dN(e))t.indexOf(r)<0&&u2e.call(e,r)&&(n[r]=e[r]);return n};const l2e=C.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=Nrt(n,["children","refProp","popupType"]);if(!KA(r))throw new Error(s2e.children);const a=o,u=o2e(),l=Ps(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return C.cloneElement(r,dP(Rrt(dP(dP(dP({},a),c),u.targetProps),{className:zxe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});l2e.displayName="@mantine/core/PopoverTarget";var Drt=lt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const Mrt=Drt;var Lrt=Object.defineProperty,wue=Object.getOwnPropertySymbols,Frt=Object.prototype.hasOwnProperty,jrt=Object.prototype.propertyIsEnumerable,Eue=(e,t,n)=>t in e?Lrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w_=(e,t)=>{for(var n in t||(t={}))Frt.call(t,n)&&Eue(e,n,t[n]);if(wue)for(var n of wue(t))jrt.call(t,n)&&Eue(e,n,t[n]);return e};const xue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function c2e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in sP?w_(w_(w_({transitionProperty:sP[e].transitionProperty},i),sP[e].common),sP[e][xue[t]]):null:w_(w_(w_({transitionProperty:e.transitionProperty},i),e.common),e[xue[t]])}function f2e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=fs(),l=E6(),c=u.respectReducedMotion?l:!1,[f,d]=C.useState(r?"entered":"exited");let h=c?0:e;const p=C.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return Ss(()=>{m(r)},[r]),C.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function nI({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=f2e({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?N.createElement(N.Fragment,null,i({})):null:f==="exited"?null:N.createElement(N.Fragment,null,i(c2e({transition:e,duration:c,state:f,timingFunction:d})))}nI.displayName="@mantine/core/Transition";function d2e({children:e,active:t=!0,refProp:n="ref"}){const r=pY(t),i=Ps(r,e==null?void 0:e.ref);return KA(e)?C.cloneElement(e,{[n]:i}):e}d2e.displayName="@mantine/core/FocusTrap";var Brt=Object.defineProperty,zrt=Object.defineProperties,Urt=Object.getOwnPropertyDescriptors,Sue=Object.getOwnPropertySymbols,Vrt=Object.prototype.hasOwnProperty,Hrt=Object.prototype.propertyIsEnumerable,Tue=(e,t,n)=>t in e?Brt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cm=(e,t)=>{for(var n in t||(t={}))Vrt.call(t,n)&&Tue(e,n,t[n]);if(Sue)for(var n of Sue(t))Hrt.call(t,n)&&Tue(e,n,t[n]);return e},hP=(e,t)=>zrt(e,Urt(t));function Cue(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Aue(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const qrt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Wrt({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[qrt[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?hP(Cm(Cm({},c),Cue(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?hP(Cm(Cm({},c),Cue(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?hP(Cm(Cm({},c),Aue(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?hP(Cm(Cm({},c),Aue(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var Grt=Object.defineProperty,Yrt=Object.defineProperties,Krt=Object.getOwnPropertyDescriptors,hN=Object.getOwnPropertySymbols,h2e=Object.prototype.hasOwnProperty,p2e=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?Grt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xrt=(e,t)=>{for(var n in t||(t={}))h2e.call(t,n)&&Iue(e,n,t[n]);if(hN)for(var n of hN(t))p2e.call(t,n)&&Iue(e,n,t[n]);return e},Qrt=(e,t)=>Yrt(e,Krt(t)),Jrt=(e,t)=>{var n={};for(var r in e)h2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hN)for(var r of hN(e))t.indexOf(r)<0&&p2e.call(e,r)&&(n[r]=e[r]);return n};const IY=C.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=Jrt(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=fs();return u?N.createElement("div",Qrt(Xrt({},f),{ref:t,style:Wrt({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});IY.displayName="@mantine/core/FloatingArrow";var Zrt=Object.defineProperty,eit=Object.defineProperties,tit=Object.getOwnPropertyDescriptors,pN=Object.getOwnPropertySymbols,m2e=Object.prototype.hasOwnProperty,g2e=Object.prototype.propertyIsEnumerable,Oue=(e,t,n)=>t in e?Zrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pP=(e,t)=>{for(var n in t||(t={}))m2e.call(t,n)&&Oue(e,n,t[n]);if(pN)for(var n of pN(t))g2e.call(t,n)&&Oue(e,n,t[n]);return e},Pue=(e,t)=>eit(e,tit(t)),nit=(e,t)=>{var n={};for(var r in e)m2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&g2e.call(e,r)&&(n[r]=e[r]);return n};function y2e(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=nit(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=F0(),f=o2e(),{classes:d,cx:h}=Mrt({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=hY({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:N.createElement(zE,{withinPortal:f.withinPortal},N.createElement(nI,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return N.createElement(d2e,{active:f.trapFocus},N.createElement(st,pP(Pue(pP({},m),{tabIndex:-1,ref:f.floating,style:Pue(pP(pP({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:VKe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,N.createElement(IY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}y2e.displayName="@mantine/core/PopoverDropdown";function v2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var kue=Object.getOwnPropertySymbols,rit=Object.prototype.hasOwnProperty,iit=Object.prototype.propertyIsEnumerable,sit=(e,t)=>{var n={};for(var r in e)rit.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kue)for(var r of kue(e))t.indexOf(r)<0&&iit.call(e,r)&&(n[r]=e[r]);return n};const oit={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:da("popover"),__staticSelector:"Popover",width:"max-content"};function hi(e){var t,n,r,i,s,o;const a=C.useRef(null),u=gt("Popover",oit,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,unstyled:x,classNames:S,styles:P,closeOnClickOutside:A,withinPortal:O,closeOnEscape:z,clickOutsideEvents:M,trapFocus:R,onClose:D,onOpen:L,onChange:V,zIndex:B,radius:H,shadow:U,id:k,defaultOpened:$,exitTransitionDuration:q,__staticSelector:F,withRoles:j,disabled:Q,returnFocus:se}=u,ae=sit(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ce,le]=C.useState(null),[ge,ue]=C.useState(null),Fe=Nu(k),$e=fs(),Ge=Irt({middlewares:v,width:y,position:v2e($e.dir,c),offset:f+(_?b/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:$,onChange:V,onOpen:L,onClose:D});UQe(()=>A&&Ge.onClose(),M,[ce,ge]);const Re=C.useCallback(Me=>{le(Me),Ge.floating.reference(Me)},[Ge.floating.reference]),Oe=C.useCallback(Me=>{ue(Me),Ge.floating.floating(Me)},[Ge.floating.floating]);return N.createElement(fY,{classNames:S,styles:P,unstyled:x,staticSelector:F},N.createElement(Ort,{value:{returnFocus:se,disabled:Q,controlled:Ge.controlled,reference:Re,floating:Oe,x:Ge.floating.x,y:Ge.floating.y,arrowX:(r=(n=(t=Ge.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ge.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ge.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:q,width:y,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,placement:Ge.floating.placement,trapFocus:R,withinPortal:O,zIndex:B,radius:H,shadow:U,closeOnEscape:z,onClose:Ge.onClose,onToggle:Ge.onToggle,getTargetId:()=>`${Fe}-target`,getDropdownId:()=>`${Fe}-dropdown`,withRoles:j,targetProps:ae}},l))}hi.Target=l2e;hi.Dropdown=y2e;hi.displayName="@mantine/core/Popover";var ait=Object.defineProperty,mN=Object.getOwnPropertySymbols,_2e=Object.prototype.hasOwnProperty,b2e=Object.prototype.propertyIsEnumerable,$ue=(e,t,n)=>t in e?ait(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uit=(e,t)=>{for(var n in t||(t={}))_2e.call(t,n)&&$ue(e,n,t[n]);if(mN)for(var n of mN(t))b2e.call(t,n)&&$ue(e,n,t[n]);return e},lit=(e,t)=>{var n={};for(var r in e)_2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&b2e.call(e,r)&&(n[r]=e[r]);return n};function cit(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=lit(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Ynt(null,{name:u,styles:l,classNames:c,unstyled:f});return N.createElement(hi.Dropdown,uit({p:0,onMouseDown:p=>p.preventDefault()},d),N.createElement("div",{style:{maxHeight:i,display:"flex"}},N.createElement(st,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==I6?"auto":void 0},"data-combobox-popover":!0,ref:a},N.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function $g({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return N.createElement(hi,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}$g.Target=hi.Target;$g.Dropdown=cit;var fit=Object.defineProperty,dit=Object.defineProperties,hit=Object.getOwnPropertyDescriptors,gN=Object.getOwnPropertySymbols,w2e=Object.prototype.hasOwnProperty,E2e=Object.prototype.propertyIsEnumerable,Rue=(e,t,n)=>t in e?fit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M9=(e,t)=>{for(var n in t||(t={}))w2e.call(t,n)&&Rue(e,n,t[n]);if(gN)for(var n of gN(t))E2e.call(t,n)&&Rue(e,n,t[n]);return e},pit=(e,t)=>dit(e,hit(t)),mit=(e,t)=>{var n={};for(var r in e)w2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&E2e.call(e,r)&&(n[r]=e[r]);return n};function x2e(e,t,n){const r=gt(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x}=r,S=mit(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),P=Nu(v),{systemStyles:A,rest:O}=Sf(S);return pit(M9({},O),{classNames:u,styles:l,unstyled:f,wrapperProps:M9(M9({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:P,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x},y),A),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:P,size:_,__staticSelector:d,invalid:!!o}})}var git=lt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const yit=git;var vit=Object.defineProperty,yN=Object.getOwnPropertySymbols,S2e=Object.prototype.hasOwnProperty,T2e=Object.prototype.propertyIsEnumerable,Nue=(e,t,n)=>t in e?vit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_it=(e,t)=>{for(var n in t||(t={}))S2e.call(t,n)&&Nue(e,n,t[n]);if(yN)for(var n of yN(t))T2e.call(t,n)&&Nue(e,n,t[n]);return e},bit=(e,t)=>{var n={};for(var r in e)S2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&T2e.call(e,r)&&(n[r]=e[r]);return n};const OY=C.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=bit(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=yit({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return N.createElement(st,_it({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&N.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});OY.displayName="@mantine/core/InputLabel";var wit=lt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const Eit=wit;var xit=Object.defineProperty,vN=Object.getOwnPropertySymbols,C2e=Object.prototype.hasOwnProperty,A2e=Object.prototype.propertyIsEnumerable,Due=(e,t,n)=>t in e?xit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sit=(e,t)=>{for(var n in t||(t={}))C2e.call(t,n)&&Due(e,n,t[n]);if(vN)for(var n of vN(t))A2e.call(t,n)&&Due(e,n,t[n]);return e},Tit=(e,t)=>{var n={};for(var r in e)C2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&A2e.call(e,r)&&(n[r]=e[r]);return n};const PY=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=Tit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=Eit({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return N.createElement(ct,Sit({className:d(f.error,i),ref:t,role:"alert"},c),r)});PY.displayName="@mantine/core/InputError";var Cit=lt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const Ait=Cit;var Iit=Object.defineProperty,_N=Object.getOwnPropertySymbols,I2e=Object.prototype.hasOwnProperty,O2e=Object.prototype.propertyIsEnumerable,Mue=(e,t,n)=>t in e?Iit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oit=(e,t)=>{for(var n in t||(t={}))I2e.call(t,n)&&Mue(e,n,t[n]);if(_N)for(var n of _N(t))O2e.call(t,n)&&Mue(e,n,t[n]);return e},Pit=(e,t)=>{var n={};for(var r in e)I2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&O2e.call(e,r)&&(n[r]=e[r]);return n};const kY=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=Pit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=Ait({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return N.createElement(ct,Oit({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});kY.displayName="@mantine/core/InputDescription";const P2e=C.createContext({offsetBottom:!1,offsetTop:!1}),kit=P2e.Provider,$it=()=>C.useContext(P2e);function Rit(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var Nit=Object.defineProperty,Dit=Object.defineProperties,Mit=Object.getOwnPropertyDescriptors,Lue=Object.getOwnPropertySymbols,Lit=Object.prototype.hasOwnProperty,Fit=Object.prototype.propertyIsEnumerable,Fue=(e,t,n)=>t in e?Nit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jit=(e,t)=>{for(var n in t||(t={}))Lit.call(t,n)&&Fue(e,n,t[n]);if(Lue)for(var n of Lue(t))Fit.call(t,n)&&Fue(e,n,t[n]);return e},Bit=(e,t)=>Dit(e,Mit(t)),zit=lt(e=>({root:Bit(jit({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const Uit=zit;var Vit=Object.defineProperty,Hit=Object.defineProperties,qit=Object.getOwnPropertyDescriptors,bN=Object.getOwnPropertySymbols,k2e=Object.prototype.hasOwnProperty,$2e=Object.prototype.propertyIsEnumerable,jue=(e,t,n)=>t in e?Vit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fy=(e,t)=>{for(var n in t||(t={}))k2e.call(t,n)&&jue(e,n,t[n]);if(bN)for(var n of bN(t))$2e.call(t,n)&&jue(e,n,t[n]);return e},Bue=(e,t)=>Hit(e,qit(t)),Wit=(e,t)=>{var n={};for(var r in e)k2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&$2e.call(e,r)&&(n[r]=e[r]);return n};const Git={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},R2e=C.forwardRef((e,t)=>{const n=gt("InputWrapper",Git,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:b,withAsterisk:E}=n,w=Wit(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:x,cx:S}=Uit(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),P={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},A=typeof E=="boolean"?E:o,O=i&&N.createElement(OY,fy(fy({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:A},P),f),i),z=l&&N.createElement(kY,Bue(fy(fy({key:"description"},d),P),{size:(d==null?void 0:d.size)||P.size}),l),M=N.createElement(C.Fragment,{key:"input"},y(s)),R=typeof u!="boolean"&&u&&N.createElement(PY,Bue(fy(fy({},h),P),{size:(h==null?void 0:h.size)||P.size,key:"error"}),u),D=b.map(L=>{switch(L){case"label":return O;case"input":return M;case"description":return z;case"error":return R;default:return null}});return N.createElement(kit,{value:Rit(b,{hasDescription:!!z,hasError:!!R})},N.createElement(st,fy({className:S(x.root,r),ref:t},w),D))});R2e.displayName="@mantine/core/InputWrapper";var Yit=Object.defineProperty,Kit=Object.defineProperties,Xit=Object.getOwnPropertyDescriptors,zue=Object.getOwnPropertySymbols,Qit=Object.prototype.hasOwnProperty,Jit=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?Yit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L9=(e,t)=>{for(var n in t||(t={}))Qit.call(t,n)&&Uue(e,n,t[n]);if(zue)for(var n of zue(t))Jit.call(t,n)&&Uue(e,n,t[n]);return e},Vue=(e,t)=>Kit(e,Xit(t));const Vo={xs:30,sm:36,md:42,lg:50,xl:60};function Zit({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var est=lt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:Vo}),paddingLeft:e.fn.size({size:t,sizes:Vo})/3,paddingRight:a?o:e.fn.size({size:t,sizes:Vo})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:L9(Vue(L9(Vue(L9({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:Vo}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:Vo})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Zit({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:Vo})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:Vo}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}});const tst=est;var nst=Object.defineProperty,rst=Object.defineProperties,ist=Object.getOwnPropertyDescriptors,wN=Object.getOwnPropertySymbols,N2e=Object.prototype.hasOwnProperty,D2e=Object.prototype.propertyIsEnumerable,Hue=(e,t,n)=>t in e?nst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mP=(e,t)=>{for(var n in t||(t={}))N2e.call(t,n)&&Hue(e,n,t[n]);if(wN)for(var n of wN(t))D2e.call(t,n)&&Hue(e,n,t[n]);return e},que=(e,t)=>rst(e,ist(t)),sst=(e,t)=>{var n={};for(var r in e)N2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&D2e.call(e,r)&&(n[r]=e[r]);return n};const ost={rightSectionWidth:36,size:"sm",variant:"default"},UE=C.forwardRef((e,t)=>{const n=gt("Input",ost,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:b,sx:E,unstyled:w,pointer:x}=n,S=sst(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:P,offsetTop:A}=$it(),{classes:O,cx:z}=tst({radius:p,size:m,multiline:b,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:P,offsetTop:A,pointer:x},{classNames:y,styles:v,name:["Input",_],unstyled:w}),{systemStyles:M,rest:R}=Sf(S);return N.createElement(st,mP(mP({className:z(O.wrapper,r),sx:E,style:l},M),g),u&&N.createElement("div",{className:O.icon},u),N.createElement(st,que(mP({component:"input"},R),{ref:t,required:s,"aria-invalid":i,disabled:o,className:z(O[`${a}Variant`],O.input,{[O.withIcon]:u,[O.invalid]:i,[O.disabled]:o})})),d&&N.createElement("div",que(mP({},h),{className:O.rightSection}),d))});UE.displayName="@mantine/core/Input";UE.Wrapper=R2e;UE.Label=OY;UE.Description=kY;UE.Error=PY;const us=UE;var ast=Object.defineProperty,ust=Object.defineProperties,lst=Object.getOwnPropertyDescriptors,Wue=Object.getOwnPropertySymbols,cst=Object.prototype.hasOwnProperty,fst=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?ast(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F9=(e,t)=>{for(var n in t||(t={}))cst.call(t,n)&&Gue(e,n,t[n]);if(Wue)for(var n of Wue(t))fst.call(t,n)&&Gue(e,n,t[n]);return e},dst=(e,t)=>ust(e,lst(t));const j9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},hst={xs:4,sm:4,md:6,lg:8,xl:10};function pst({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:hst});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var mst=lt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in j9?j9[n]:j9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:F9(dst(F9(F9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),pst({theme:e,variant:o,color:t,size:n,gradient:i}))}});const gst=mst;var yst=Object.defineProperty,EN=Object.getOwnPropertySymbols,M2e=Object.prototype.hasOwnProperty,L2e=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?yst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vst=(e,t)=>{for(var n in t||(t={}))M2e.call(t,n)&&Yue(e,n,t[n]);if(EN)for(var n of EN(t))L2e.call(t,n)&&Yue(e,n,t[n]);return e},_st=(e,t)=>{var n={};for(var r in e)M2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&L2e.call(e,r)&&(n[r]=e[r]);return n};const bst={variant:"light",size:"md",radius:"xl"},F2e=C.forwardRef((e,t)=>{const n=gt("Badge",bst,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=_st(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=gst({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return N.createElement(st,vst({className:v(y.root,r),ref:t},g),l&&N.createElement("span",{className:y.leftSection},l),N.createElement("span",{className:y.inner},a),c&&N.createElement("span",{className:y.rightSection},c))});F2e.displayName="@mantine/core/Badge";const T1=F2e,wst={xs:12,sm:18,md:24,lg:34,xl:42};var Est=lt((e,{size:t,color:n,transitionDuration:r})=>{const i=e.fn.size({size:t,sizes:wst}),s=n||(e.colorScheme==="dark"?e.white:e.black);return{root:{borderRadius:e.radius.sm,width:`calc(${i}px + ${e.spacing.xs}px)`,height:`calc(${i}px + ${e.spacing.xs}px)`,padding:`calc(${e.spacing.xs}px / 2)`,cursor:"pointer"},burger:{position:"relative",userSelect:"none",boxSizing:"border-box","&, &::before, &::after":{display:"block",width:i,height:Math.ceil(i/12),backgroundColor:s,outline:"1px solid transparent",transitionProperty:"background-color, transform",transitionDuration:`${r}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},"&::before, &::after":{position:"absolute",content:'""',left:0},"&::before":{top:i/3*-1},"&::after":{top:i/3},"&[data-opened]":{backgroundColor:"transparent","&::before":{transform:`translateY(${i/3}px) rotate(45deg)`},"&::after":{transform:`translateY(-${i/3}px) rotate(-45deg)`}}}}});const xst=Est;var Sst=Object.defineProperty,xN=Object.getOwnPropertySymbols,j2e=Object.prototype.hasOwnProperty,B2e=Object.prototype.propertyIsEnumerable,Kue=(e,t,n)=>t in e?Sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tst=(e,t)=>{for(var n in t||(t={}))j2e.call(t,n)&&Kue(e,n,t[n]);if(xN)for(var n of xN(t))B2e.call(t,n)&&Kue(e,n,t[n]);return e},Cst=(e,t)=>{var n={};for(var r in e)j2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&B2e.call(e,r)&&(n[r]=e[r]);return n};const Ast={size:"md",transitionDuration:300},z2e=C.forwardRef((e,t)=>{const n=gt("Burger",Ast,e),{className:r,opened:i,color:s,size:o,classNames:a,styles:u,transitionDuration:l}=n,c=Cst(n,["className","opened","color","size","classNames","styles","transitionDuration"]),{classes:f,cx:d}=xst({color:s,size:o,transitionDuration:l},{classNames:a,styles:u,name:"Burger"});return N.createElement(sm,Tst({className:d(f.root,r),ref:t},c),N.createElement("div",{"data-opened":i||void 0,className:f.burger}))});z2e.displayName="@mantine/core/Burger";var Ist=lt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const Ost=Ist;var Pst=Object.defineProperty,SN=Object.getOwnPropertySymbols,U2e=Object.prototype.hasOwnProperty,V2e=Object.prototype.propertyIsEnumerable,Xue=(e,t,n)=>t in e?Pst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kst=(e,t)=>{for(var n in t||(t={}))U2e.call(t,n)&&Xue(e,n,t[n]);if(SN)for(var n of SN(t))V2e.call(t,n)&&Xue(e,n,t[n]);return e},$st=(e,t)=>{var n={};for(var r in e)U2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&V2e.call(e,r)&&(n[r]=e[r]);return n};const Rst={orientation:"horizontal",buttonBorderWidth:1},H2e=C.forwardRef((e,t)=>{const n=gt("ButtonGroup",Rst,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=$st(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=Ost({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return N.createElement(st,kst({className:l(u.root,r),ref:t},a))});H2e.displayName="@mantine/core/ButtonGroup";var Nst=Object.defineProperty,Dst=Object.defineProperties,Mst=Object.getOwnPropertyDescriptors,Que=Object.getOwnPropertySymbols,Lst=Object.prototype.hasOwnProperty,Fst=Object.prototype.propertyIsEnumerable,Jue=(e,t,n)=>t in e?Nst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,By=(e,t)=>{for(var n in t||(t={}))Lst.call(t,n)&&Jue(e,n,t[n]);if(Que)for(var n of Que(t))Fst.call(t,n)&&Jue(e,n,t[n]);return e},bU=(e,t)=>Dst(e,Mst(t));const wU={xs:{height:Vo.xs,paddingLeft:14,paddingRight:14},sm:{height:Vo.sm,paddingLeft:18,paddingRight:18},md:{height:Vo.md,paddingLeft:22,paddingRight:22},lg:{height:Vo.lg,paddingLeft:26,paddingRight:26},xl:{height:Vo.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function jst({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return wU[`compact-${t}`];const i=wU[t];return bU(By({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const Bst=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function zst({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:By({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var Ust=lt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:bU(By(bU(By(By(By(By({},jst({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),Bst(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),zst({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const Vst=Ust;var Hst=Object.defineProperty,TN=Object.getOwnPropertySymbols,q2e=Object.prototype.hasOwnProperty,W2e=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?Hst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ele=(e,t)=>{for(var n in t||(t={}))q2e.call(t,n)&&Zue(e,n,t[n]);if(TN)for(var n of TN(t))W2e.call(t,n)&&Zue(e,n,t[n]);return e},qst=(e,t)=>{var n={};for(var r in e)q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&W2e.call(e,r)&&(n[r]=e[r]);return n};const Wst={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},$Y=C.forwardRef((e,t)=>{const n=gt("Button",Wst,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:b,styles:E,unstyled:w}=n,x=qst(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:S,cx:P,theme:A}=Vst({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:w,classNames:b,styles:E}),O=A.fn.variant({color:s,variant:d}),z=N.createElement(Mv,ele({color:O.color,size:A.fn.size({size:i,sizes:wU}).height/2},v));return N.createElement(sm,ele({className:P(S.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:w},x),N.createElement("div",{className:S.inner},(l||g&&y==="left")&&N.createElement("span",{className:P(S.icon,S.leftIcon)},g&&y==="left"?z:l),g&&y==="center"&&N.createElement("span",{className:S.centerLoader},z),N.createElement("span",{className:S.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&N.createElement("span",{className:P(S.icon,S.rightIcon)},g&&y==="right"?z:c)))});$Y.displayName="@mantine/core/Button";$Y.Group=H2e;const Xr=$Y;var Gst=lt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}}));const Yst=Gst;var Kst=Object.defineProperty,CN=Object.getOwnPropertySymbols,G2e=Object.prototype.hasOwnProperty,Y2e=Object.prototype.propertyIsEnumerable,tle=(e,t,n)=>t in e?Kst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xst=(e,t)=>{for(var n in t||(t={}))G2e.call(t,n)&&tle(e,n,t[n]);if(CN)for(var n of CN(t))Y2e.call(t,n)&&tle(e,n,t[n]);return e},Qst=(e,t)=>{var n={};for(var r in e)G2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&Y2e.call(e,r)&&(n[r]=e[r]);return n};const Jst={},K2e=C.forwardRef((e,t)=>{const n=gt("Paper",Jst,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=Qst(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=Yst({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return N.createElement(st,Xst({className:f(c.root,r),ref:t},l),i)});K2e.displayName="@mantine/core/Paper";const RY=K2e,X2e=C.createContext({padding:0}),Zst=X2e.Provider,eot=()=>C.useContext(X2e).padding;var tot=lt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const not=tot;var rot=Object.defineProperty,AN=Object.getOwnPropertySymbols,Q2e=Object.prototype.hasOwnProperty,J2e=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?rot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iot=(e,t)=>{for(var n in t||(t={}))Q2e.call(t,n)&&nle(e,n,t[n]);if(AN)for(var n of AN(t))J2e.call(t,n)&&nle(e,n,t[n]);return e},sot=(e,t)=>{var n={};for(var r in e)Q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&J2e.call(e,r)&&(n[r]=e[r]);return n};const Z2e=C.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=sot(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=not({padding:eot(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return N.createElement(st,iot({className:l(u.cardSection,r),ref:t},a))});Z2e.displayName="@mantine/core/CardSection";const eCe=Z2e;var oot=lt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}}));const aot=oot;var uot=Object.defineProperty,IN=Object.getOwnPropertySymbols,tCe=Object.prototype.hasOwnProperty,nCe=Object.prototype.propertyIsEnumerable,rle=(e,t,n)=>t in e?uot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lot=(e,t)=>{for(var n in t||(t={}))tCe.call(t,n)&&rle(e,n,t[n]);if(IN)for(var n of IN(t))nCe.call(t,n)&&rle(e,n,t[n]);return e},cot=(e,t)=>{var n={};for(var r in e)tCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&nCe.call(e,r)&&(n[r]=e[r]);return n};const fot={p:"md"},NY=C.forwardRef((e,t)=>{const n=gt("Card",fot,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=cot(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=aot(null,{name:"Card",unstyled:a}),f=C.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===eCe?C.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return N.createElement(Zst,{value:{padding:i}},N.createElement(RY,lot({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});NY.Section=eCe;NY.displayName="@mantine/core/Card";const k6=NY;var dot=Object.defineProperty,ON=Object.getOwnPropertySymbols,rCe=Object.prototype.hasOwnProperty,iCe=Object.prototype.propertyIsEnumerable,ile=(e,t,n)=>t in e?dot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hot=(e,t)=>{for(var n in t||(t={}))rCe.call(t,n)&&ile(e,n,t[n]);if(ON)for(var n of ON(t))iCe.call(t,n)&&ile(e,n,t[n]);return e},pot=(e,t)=>{var n={};for(var r in e)rCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&iCe.call(e,r)&&(n[r]=e[r]);return n};const sCe=C.forwardRef((e,t)=>{const n=gt("Center",{},e),{inline:r,sx:i}=n,s=pot(n,["inline","sx"]);return N.createElement(st,hot({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...Qg(i)]},s))});sCe.displayName="@mantine/core/Center";const Dp=sCe,oCe=C.createContext(null),mot=oCe.Provider,got=()=>C.useContext(oCe);function yot(e){return C.Children.toArray(e).filter(Boolean)}const aCe={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var vot=lt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:aCe[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const _ot=vot;var bot=Object.defineProperty,PN=Object.getOwnPropertySymbols,uCe=Object.prototype.hasOwnProperty,lCe=Object.prototype.propertyIsEnumerable,sle=(e,t,n)=>t in e?bot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wot=(e,t)=>{for(var n in t||(t={}))uCe.call(t,n)&&sle(e,n,t[n]);if(PN)for(var n of PN(t))lCe.call(t,n)&&sle(e,n,t[n]);return e},Eot=(e,t)=>{var n={};for(var r in e)uCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&lCe.call(e,r)&&(n[r]=e[r]);return n};const xot={position:"left",spacing:"md"},Co=C.forwardRef((e,t)=>{const n=gt("Group",xot,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=Eot(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=yot(o),{classes:h,cx:p}=_ot({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return N.createElement(st,wot({className:p(h.root,r),ref:t},f),d)});Co.displayName="@mantine/core/Group";var Sot=lt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}}));const Tot=Sot;var Cot=Object.defineProperty,kN=Object.getOwnPropertySymbols,cCe=Object.prototype.hasOwnProperty,fCe=Object.prototype.propertyIsEnumerable,ole=(e,t,n)=>t in e?Cot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aot=(e,t)=>{for(var n in t||(t={}))cCe.call(t,n)&&ole(e,n,t[n]);if(kN)for(var n of kN(t))fCe.call(t,n)&&ole(e,n,t[n]);return e},Iot=(e,t)=>{var n={};for(var r in e)cCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&fCe.call(e,r)&&(n[r]=e[r]);return n};const Oot={spacing:"md",align:"stretch",justify:"top"},rp=C.forwardRef((e,t)=>{const n=gt("Stack",Oot,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=Iot(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=Tot({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return N.createElement(st,Aot({className:c(l.root,i),ref:t},u))});rp.displayName="@mantine/core/Stack";function dCe({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?N.createElement(Co,{pt:t,spacing:e,role:i,unstyled:s},r):N.createElement(rp,{pt:t,spacing:e,role:i,unstyled:s},r)}var Pot=Object.defineProperty,$N=Object.getOwnPropertySymbols,hCe=Object.prototype.hasOwnProperty,pCe=Object.prototype.propertyIsEnumerable,ale=(e,t,n)=>t in e?Pot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ule=(e,t)=>{for(var n in t||(t={}))hCe.call(t,n)&&ale(e,n,t[n]);if($N)for(var n of $N(t))pCe.call(t,n)&&ale(e,n,t[n]);return e},kot=(e,t)=>{var n={};for(var r in e)hCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&pCe.call(e,r)&&(n[r]=e[r]);return n};const $ot={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},mCe=C.forwardRef((e,t)=>{const n=gt("CheckboxGroup",$ot,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=kot(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=oa({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return N.createElement(mot,{value:{value:h,onChange:m,size:l}},N.createElement(us.Wrapper,ule(ule({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),N.createElement(dCe,{spacing:u,orientation:a,offset:f},r)))});mCe.displayName="@mantine/core/CheckboxGroup";var Rot=Object.defineProperty,RN=Object.getOwnPropertySymbols,gCe=Object.prototype.hasOwnProperty,yCe=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?Rot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EU=(e,t)=>{for(var n in t||(t={}))gCe.call(t,n)&&lle(e,n,t[n]);if(RN)for(var n of RN(t))yCe.call(t,n)&&lle(e,n,t[n]);return e},Not=(e,t)=>{var n={};for(var r in e)gCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&yCe.call(e,r)&&(n[r]=e[r]);return n};function Dot(e){return N.createElement("svg",EU({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),N.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Mot(e){var t=e,{indeterminate:n}=t,r=Not(t,["indeterminate"]);return n?N.createElement("svg",EU({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),N.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):N.createElement(Dot,EU({},r))}var Lot=Object.defineProperty,Fot=Object.defineProperties,jot=Object.getOwnPropertyDescriptors,cle=Object.getOwnPropertySymbols,Bot=Object.prototype.hasOwnProperty,zot=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?Lot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uot=(e,t)=>{for(var n in t||(t={}))Bot.call(t,n)&&fle(e,n,t[n]);if(cle)for(var n of cle(t))zot.call(t,n)&&fle(e,n,t[n]);return e},Vot=(e,t)=>Fot(e,jot(t));const Hot={xs:16,sm:20,md:24,lg:30,xl:36},qot={xs:8,sm:10,md:14,lg:16,xl:20};var Wot=lt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:Hot}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:qot}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:Vot(Uot({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const Got=Wot;var Yot=Object.defineProperty,Kot=Object.defineProperties,Xot=Object.getOwnPropertyDescriptors,dle=Object.getOwnPropertySymbols,Qot=Object.prototype.hasOwnProperty,Jot=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?Yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zot=(e,t)=>{for(var n in t||(t={}))Qot.call(t,n)&&hle(e,n,t[n]);if(dle)for(var n of dle(t))Jot.call(t,n)&&hle(e,n,t[n]);return e},eat=(e,t)=>Kot(e,Xot(t));const tat={xs:16,sm:20,md:24,lg:30,xl:36};var nat=lt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:eat(Zot({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:tat})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const rat=nat;var iat=Object.defineProperty,NN=Object.getOwnPropertySymbols,vCe=Object.prototype.hasOwnProperty,_Ce=Object.prototype.propertyIsEnumerable,ple=(e,t,n)=>t in e?iat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sat=(e,t)=>{for(var n in t||(t={}))vCe.call(t,n)&&ple(e,n,t[n]);if(NN)for(var n of NN(t))_Ce.call(t,n)&&ple(e,n,t[n]);return e},oat=(e,t)=>{var n={};for(var r in e)vCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&_Ce.call(e,r)&&(n[r]=e[r]);return n};function DY(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=oat(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=rat({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return N.createElement(st,sat({className:y(g.root,r)},m),N.createElement("div",{className:y(g.body)},a,N.createElement("div",{className:g.labelWrapper},u&&N.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&N.createElement(us.Description,{className:g.description},l),d&&d!=="boolean"&&N.createElement(us.Error,{className:g.error},d))))}DY.displayName="@mantine/core/InlineInput";var aat=Object.defineProperty,DN=Object.getOwnPropertySymbols,bCe=Object.prototype.hasOwnProperty,wCe=Object.prototype.propertyIsEnumerable,mle=(e,t,n)=>t in e?aat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gP=(e,t)=>{for(var n in t||(t={}))bCe.call(t,n)&&mle(e,n,t[n]);if(DN)for(var n of DN(t))wCe.call(t,n)&&mle(e,n,t[n]);return e},uat=(e,t)=>{var n={};for(var r in e)bCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&wCe.call(e,r)&&(n[r]=e[r]);return n};const lat={size:"sm",transitionDuration:100,icon:Mot,labelPosition:"right"},Iw=C.forwardRef((e,t)=>{const n=gt("Checkbox",lat,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:b,labelPosition:E,description:w,error:x}=n,S=uat(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),P=got(),A=Nu(f),{systemStyles:O,rest:z}=Sf(S),{classes:M}=Got({size:(P==null?void 0:P.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:E,error:!!x,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:b}),R=P?{checked:P.value.includes(z.value),onChange:P.onChange}:{};return N.createElement(DY,gP(gP({className:r,sx:s,style:i,id:A,size:(P==null?void 0:P.size)||d,labelPosition:E,label:l,description:w,error:x,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:b,"data-checked":R.checked||void 0},O),p),N.createElement("div",{className:M.inner},N.createElement("input",gP(gP({id:A,ref:t,type:"checkbox",className:M.input,checked:o,disabled:a},z),R)),N.createElement(_,{indeterminate:c,className:M.icon})))});Iw.displayName="@mantine/core/Checkbox";Iw.Group=mCe;var cat=lt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}}));const fat=cat;var dat=Object.defineProperty,MN=Object.getOwnPropertySymbols,ECe=Object.prototype.hasOwnProperty,xCe=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?dat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hat=(e,t)=>{for(var n in t||(t={}))ECe.call(t,n)&&gle(e,n,t[n]);if(MN)for(var n of MN(t))xCe.call(t,n)&&gle(e,n,t[n]);return e},pat=(e,t)=>{var n={};for(var r in e)ECe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&xCe.call(e,r)&&(n[r]=e[r]);return n};const mat={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},lm=C.forwardRef((e,t)=>{const n=gt("Container",mat,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=pat(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=fat({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return N.createElement(st,hat({className:c(l.root,r),ref:t},u))});lm.displayName="@mantine/core/Container";var gat=Object.defineProperty,yat=Object.defineProperties,vat=Object.getOwnPropertyDescriptors,yle=Object.getOwnPropertySymbols,_at=Object.prototype.hasOwnProperty,bat=Object.prototype.propertyIsEnumerable,vle=(e,t,n)=>t in e?gat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wat=(e,t)=>{for(var n in t||(t={}))_at.call(t,n)&&vle(e,n,t[n]);if(yle)for(var n of yle(t))bat.call(t,n)&&vle(e,n,t[n]);return e},Eat=(e,t)=>yat(e,vat(t));const yP={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function xat({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:yP})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:yP})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:yP})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:yP})};default:return null}}var Sat=lt((e,{position:t,size:n,zIndex:r,withOverlay:i})=>({closeButton:{},overlay:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:i===!1?"none":void 0},drawer:Eat(wat({},xat({position:t,size:n,theme:e})),{maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:i===!1?"auto":void 0}),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}}));const Tat=Sat;function MY({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=f2e({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?N.createElement(N.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=c2e({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return N.createElement(N.Fragment,null,i(h))}MY.displayName="@mantine/core/GroupedTransition";var Cat=lt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}}));const Aat=Cat;var Iat=Object.defineProperty,Oat=Object.defineProperties,Pat=Object.getOwnPropertyDescriptors,LN=Object.getOwnPropertySymbols,SCe=Object.prototype.hasOwnProperty,TCe=Object.prototype.propertyIsEnumerable,_le=(e,t,n)=>t in e?Iat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B9=(e,t)=>{for(var n in t||(t={}))SCe.call(t,n)&&_le(e,n,t[n]);if(LN)for(var n of LN(t))TCe.call(t,n)&&_le(e,n,t[n]);return e},kat=(e,t)=>Oat(e,Pat(t)),$at=(e,t)=>{var n={};for(var r in e)SCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&TCe.call(e,r)&&(n[r]=e[r]);return n};const Rat={opacity:.6,color:"#fff",zIndex:da("modal"),radius:0,blur:0},CCe=C.forwardRef((e,t)=>{const n=gt("Overlay",Rat,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=$at(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=Aat({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>N.createElement(st,B9({ref:t,className:p(h.root,f),sx:[v=>kat(B9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...Qg(l)]},y));return i?N.createElement(st,B9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...Qg(l)]},d),g()):g(d)});CCe.displayName="@mantine/core/Overlay";const LY=CCe;var Nat=Object.defineProperty,FN=Object.getOwnPropertySymbols,ACe=Object.prototype.hasOwnProperty,ICe=Object.prototype.propertyIsEnumerable,ble=(e,t,n)=>t in e?Nat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dat=(e,t)=>{for(var n in t||(t={}))ACe.call(t,n)&&ble(e,n,t[n]);if(FN)for(var n of FN(t))ICe.call(t,n)&&ble(e,n,t[n]);return e},Mat=(e,t)=>{var n={};for(var r in e)ACe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&ICe.call(e,r)&&(n[r]=e[r]);return n};const Lat={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},Fat={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},jat={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:da("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function OCe(e){const t=gt("Drawer",jat,e),{className:n,opened:r,onClose:i,position:s,size:o,trapFocus:a,lockScroll:u,closeOnClickOutside:l,closeOnEscape:c,transition:f,transitionDuration:d,transitionTimingFunction:h,zIndex:p,overlayColor:m,overlayOpacity:g,children:y,withOverlay:v,shadow:_,padding:b,title:E,withCloseButton:w,closeButtonLabel:x,classNames:S,styles:P,target:A,withinPortal:O,overlayBlur:z,unstyled:M,withFocusReturn:R}=t,D=Mat(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),{classes:L,cx:V,theme:B}=Tat({size:o,position:s,zIndex:p,withOverlay:v},{classNames:S,styles:P,unstyled:M,name:"Drawer"}),H=pY(a&&r),[,U]=bSe(),k=f||(B.dir==="rtl"?Fat:Lat)[s],$=typeof g=="number"?g:B.colorScheme==="dark"?.85:.75,q=F=>{F.key==="Escape"&&c&&i()};return C.useEffect(()=>{if(!a)return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[a]),hY({opened:r,shouldReturnFocus:a&&R}),N.createElement(zE,{withinPortal:O,target:A},N.createElement(MY,{onExited:()=>U(!1),onEntered:()=>U(u&&!0),mounted:r,duration:d,timingFunction:h,transitions:{overlay:{duration:d/2,transition:"fade",timingFunction:"ease"},drawer:{duration:d,transition:k,timingFunction:h}}},F=>N.createElement(st,Dat({className:V(L.root,n),role:"dialog","aria-modal":!0},D),N.createElement(RY,{className:V(L.drawer,n),ref:H,style:F.drawer,radius:0,tabIndex:-1,onKeyDownCapture:j=>{var Q;((Q=j.target)==null?void 0:Q.getAttribute("data-mantine-stop-propagation"))!=="true"&&j.key==="Escape"&&c&&i()},shadow:_,p:b,unstyled:M},(E||w)&&N.createElement("div",{className:L.header},N.createElement(ct,{className:L.title,unstyled:M},E),w&&N.createElement(om,{iconSize:16,onClick:i,"aria-label":x,className:L.closeButton,unstyled:M})),y),v&&N.createElement("div",{style:F.overlay},N.createElement(LY,{unstyled:M,blur:z,onMouseDown:()=>l&&i(),className:L.overlay,opacity:$,zIndex:0,color:m||(B.colorScheme==="dark"?B.colors.dark[9]:B.black)})))))}OCe.displayName="@mantine/core/Drawer";const Bat={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var zat=Object.defineProperty,Uat=Object.defineProperties,Vat=Object.getOwnPropertyDescriptors,jN=Object.getOwnPropertySymbols,PCe=Object.prototype.hasOwnProperty,kCe=Object.prototype.propertyIsEnumerable,wle=(e,t,n)=>t in e?zat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hat=(e,t)=>{for(var n in t||(t={}))PCe.call(t,n)&&wle(e,n,t[n]);if(jN)for(var n of jN(t))kCe.call(t,n)&&wle(e,n,t[n]);return e},qat=(e,t)=>Uat(e,Vat(t)),Wat=(e,t)=>{var n={};for(var r in e)PCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&kCe.call(e,r)&&(n[r]=e[r]);return n};const Gat={},Ur=C.forwardRef((e,t)=>{const n=gt("Flex",Gat,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=Wat(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return N.createElement(st,qat(Hat({},f),{sx:[{display:"flex"},d=>hU({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,Bat),...Qg(c)],ref:t}))});Ur.displayName="@mantine/core/Flex";const $Ce=C.createContext(null),Yat=$Ce.Provider,Kat=()=>C.useContext($Ce);var Xat=Object.defineProperty,Ele=Object.getOwnPropertySymbols,Qat=Object.prototype.hasOwnProperty,Jat=Object.prototype.propertyIsEnumerable,xle=(e,t,n)=>t in e?Xat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zat=(e,t)=>{for(var n in t||(t={}))Qat.call(t,n)&&xle(e,n,t[n]);if(Ele)for(var n of Ele(t))Jat.call(t,n)&&xle(e,n,t[n]);return e};const FY=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,RCe=(e,t,n)=>n||e==="auto"||e==="content"?"unset":FY(e,t),NCe=(e,t)=>{if(e)return e==="auto"||t?1:0},DCe=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function eut({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return bXe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:FY(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:RCe(e[a],i,s),marginLeft:DCe(t[a],i),flexGrow:NCe(e[a],s)},o),{})}var tut=lt((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E})=>({root:Zat({boxSizing:"border-box",flexGrow:NCe(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:DCe(r,l),flexBasis:FY(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:RCe(c,l,n)},eut({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:b,xl:E},theme:e,columns:l,grow:n}))}));const nut=tut;var rut=Object.defineProperty,BN=Object.getOwnPropertySymbols,MCe=Object.prototype.hasOwnProperty,LCe=Object.prototype.propertyIsEnumerable,Sle=(e,t,n)=>t in e?rut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iut=(e,t)=>{for(var n in t||(t={}))MCe.call(t,n)&&Sle(e,n,t[n]);if(BN)for(var n of BN(t))LCe.call(t,n)&&Sle(e,n,t[n]);return e},sut=(e,t)=>{var n={};for(var r in e)MCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&LCe.call(e,r)&&(n[r]=e[r]);return n};const out={};function aut(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const FCe=C.forwardRef((e,t)=>{const n=gt("Grid.Col",out,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,className:w,id:x,unstyled:S}=n,P=sut(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),A=Kat();if(!A)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const O=i||A.columns,{classes:z,cx:M}=nut({gutter:A.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,grow:A.grow,columns:A.columns,span:O},{unstyled:S,name:"Col"});return!aut(O)||O>A.columns?null:N.createElement(st,iut({className:M(z.root,w),ref:t},P),r)});FCe.displayName="@mantine/core/Col";var uut=lt((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}}));const lut=uut;var cut=Object.defineProperty,zN=Object.getOwnPropertySymbols,jCe=Object.prototype.hasOwnProperty,BCe=Object.prototype.propertyIsEnumerable,Tle=(e,t,n)=>t in e?cut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fut=(e,t)=>{for(var n in t||(t={}))jCe.call(t,n)&&Tle(e,n,t[n]);if(zN)for(var n of zN(t))BCe.call(t,n)&&Tle(e,n,t[n]);return e},dut=(e,t)=>{var n={};for(var r in e)jCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&BCe.call(e,r)&&(n[r]=e[r]);return n};const hut={gutter:"md",justify:"flex-start",align:"stretch",columns:12},pu=C.forwardRef((e,t)=>{const n=gt("Grid",hut,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=dut(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=lut({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return N.createElement(Yat,{value:{gutter:r,grow:s,columns:u}},N.createElement(st,fut({className:p(h.root,l),ref:t},d),i))});pu.Col=FCe;pu.displayName="@mantine/core/Grid";function put({open:e,close:t,openDelay:n,closeDelay:r}){const i=C.useRef(-1),s=C.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return C.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var mut=Object.defineProperty,Cle=Object.getOwnPropertySymbols,gut=Object.prototype.hasOwnProperty,yut=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?mut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vut=(e,t)=>{for(var n in t||(t={}))gut.call(t,n)&&Ale(e,n,t[n]);if(Cle)for(var n of Cle(t))yut.call(t,n)&&Ale(e,n,t[n]);return e};function _ut(e){return N.createElement("svg",vut({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),N.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var but=Object.defineProperty,wut=Object.defineProperties,Eut=Object.getOwnPropertyDescriptors,Ile=Object.getOwnPropertySymbols,xut=Object.prototype.hasOwnProperty,Sut=Object.prototype.propertyIsEnumerable,Ole=(e,t,n)=>t in e?but(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ple=(e,t)=>{for(var n in t||(t={}))xut.call(t,n)&&Ole(e,n,t[n]);if(Ile)for(var n of Ile(t))Sut.call(t,n)&&Ole(e,n,t[n]);return e},kle=(e,t)=>wut(e,Eut(t)),Tut=lt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:kle(Ple({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:kle(Ple({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})}));const Cut=Tut;var Aut=Object.defineProperty,UN=Object.getOwnPropertySymbols,zCe=Object.prototype.hasOwnProperty,UCe=Object.prototype.propertyIsEnumerable,$le=(e,t,n)=>t in e?Aut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z9=(e,t)=>{for(var n in t||(t={}))zCe.call(t,n)&&$le(e,n,t[n]);if(UN)for(var n of UN(t))UCe.call(t,n)&&$le(e,n,t[n]);return e},Iut=(e,t)=>{var n={};for(var r in e)zCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&UCe.call(e,r)&&(n[r]=e[r]);return n};const Out={fit:"cover",width:"100%",height:"auto",radius:0},jv=C.forwardRef((e,t)=>{const n=gt("Image",Out,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=Iut(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:b,cx:E}=Cut({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[w,x]=C.useState(!s),S=f&&w;return Ss(()=>{x(!1)},[s]),N.createElement(st,z9({className:E(b.root,r),ref:t,style:z9({width:a},v)},_),N.createElement("figure",{className:b.figure},N.createElement("div",{className:b.imageWrapper},N.createElement("img",z9({className:b.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:P=>{x(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(P)}},c)),S&&N.createElement("div",{className:b.placeholder,title:i},d||N.createElement("div",null,N.createElement(_ut,{style:{width:40,height:40}})))),!!g&&N.createElement(ct,{component:"figcaption",size:"sm",align:"center",className:b.caption},g)))});jv.displayName="@mantine/core/Image";function Put(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var kut=C.useLayoutEffect,$ut=function(t){var n=C.useRef(t);return kut(function(){n.current=t}),n},Rle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Rut=function(t,n){var r=C.useRef();return C.useCallback(function(i){t.current=i,r.current&&Rle(r.current,null),r.current=n,n&&Rle(n,i)},[n])},Nle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Dle=function(t){Object.keys(Nle).forEach(function(n){t.style.setProperty(n,Nle[n],"important")})},Uu=null,Nut=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Dut(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Uu||(Uu=document.createElement("textarea"),Uu.setAttribute("tabindex","-1"),Uu.setAttribute("aria-hidden","true"),Dle(Uu)),Uu.parentNode===null&&document.body.appendChild(Uu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Uu.style[h]=o[h]}),Dle(Uu),Uu.value=t;var u=Nut(Uu,e);Uu.value="x";var l=Uu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Mle=function(){},Mut=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Lut=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Fut=!!document.documentElement.currentStyle,jut=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Mut(Lut,n),i=r.boxSizing;if(i==="")return null;Fut&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},But=function(t){var n=$ut(t);C.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},zut=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Mle:o,u=t.onHeightChange,l=u===void 0?Mle:u,c=Put(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=C.useRef(null),h=Rut(d,n),p=C.useRef(0),m=C.useRef(),g=function(){var _=d.current,b=r&&m.current?m.current:jut(_);if(b){m.current=b;var E=Dut(b,_.value||_.placeholder||"x",s,i),w=E[0],x=E[1];p.current!==w&&(p.current=w,_.style.setProperty("height",w+"px","important"),l(w,{rowHeight:x}))}},y=function(_){f||g(),a(_)};return C.useLayoutEffect(g),But(g),C.createElement("textarea",gi({},c,{onChange:y,ref:h}))},Uut=C.forwardRef(zut);const Vut=Uut;var Hut=lt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const qut=Hut;var Wut=Object.defineProperty,Gut=Object.defineProperties,Yut=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertySymbols,VCe=Object.prototype.hasOwnProperty,HCe=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?Wut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E_=(e,t)=>{for(var n in t||(t={}))VCe.call(t,n)&&Lle(e,n,t[n]);if(VN)for(var n of VN(t))HCe.call(t,n)&&Lle(e,n,t[n]);return e},U9=(e,t)=>Gut(e,Yut(t)),Kut=(e,t)=>{var n={};for(var r in e)VCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&HCe.call(e,r)&&(n[r]=e[r]);return n};const Xut={autosize:!1,size:"sm",__staticSelector:"Textarea"},qCe=C.forwardRef((e,t)=>{const n=gt("Textarea",Xut,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:b,labelProps:E,inputWrapperOrder:w,inputContainer:x,unstyled:S,withAsterisk:P}=n,A=Kut(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),O=Nu(l),{classes:z,cx:M}=qut(),{systemStyles:R,rest:D}=Sf(A),L=E_({required:f,ref:t,invalid:!!a,id:O,classNames:U9(E_({},p),{input:M(z.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:S},D);return N.createElement(us.Wrapper,E_(E_({label:o,error:a,id:O,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:E,descriptionProps:b,inputContainer:x,inputWrapperOrder:w,unstyled:S,withAsterisk:P},R),h),r?N.createElement(us,U9(E_({},L),{component:Vut,maxRows:i,minRows:s})):N.createElement(us,U9(E_({},L),{component:"textarea",rows:s})))});qCe.displayName="@mantine/core/Textarea";const WCe=C.createContext(null);function Qut(){return C.useContext(WCe)||{}}var Jut=lt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}}));const Zut=Jut;var elt=Object.defineProperty,HN=Object.getOwnPropertySymbols,GCe=Object.prototype.hasOwnProperty,YCe=Object.prototype.propertyIsEnumerable,Fle=(e,t,n)=>t in e?elt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tlt=(e,t)=>{for(var n in t||(t={}))GCe.call(t,n)&&Fle(e,n,t[n]);if(HN)for(var n of HN(t))YCe.call(t,n)&&Fle(e,n,t[n]);return e},nlt=(e,t)=>{var n={};for(var r in e)GCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&YCe.call(e,r)&&(n[r]=e[r]);return n};function KCe(e){var t=e,{className:n,children:r,icon:i}=t,s=nlt(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=Qut(),{classNames:d,styles:h,unstyled:p}=F0(),m=i||o,{classes:g,cx:y}=Zut({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return N.createElement(st,tlt({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),N.createElement("div",{className:g.itemWrapper},m&&N.createElement("span",{className:g.itemIcon},m),N.createElement("span",null,r)))}KCe.displayName="@mantine/core/ListItem";var rlt=Object.defineProperty,ilt=Object.defineProperties,slt=Object.getOwnPropertyDescriptors,jle=Object.getOwnPropertySymbols,olt=Object.prototype.hasOwnProperty,alt=Object.prototype.propertyIsEnumerable,Ble=(e,t,n)=>t in e?rlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ult=(e,t)=>{for(var n in t||(t={}))olt.call(t,n)&&Ble(e,n,t[n]);if(jle)for(var n of jle(t))alt.call(t,n)&&Ble(e,n,t[n]);return e},llt=(e,t)=>ilt(e,slt(t)),clt=lt((e,{withPadding:t,size:n,listStyleType:r})=>({root:llt(ult({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})}));const flt=clt;var dlt=Object.defineProperty,qN=Object.getOwnPropertySymbols,XCe=Object.prototype.hasOwnProperty,QCe=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?dlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hlt=(e,t)=>{for(var n in t||(t={}))XCe.call(t,n)&&zle(e,n,t[n]);if(qN)for(var n of qN(t))QCe.call(t,n)&&zle(e,n,t[n]);return e},plt=(e,t)=>{var n={};for(var r in e)XCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&QCe.call(e,r)&&(n[r]=e[r]);return n};const mlt={type:"unordered",size:"md",spacing:0},C1=C.forwardRef((e,t)=>{const n=gt("List",mlt,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=plt(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=flt({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return N.createElement(fY,{classNames:h,styles:d,unstyled:p},N.createElement(WCe.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},N.createElement(st,hlt({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});C1.Item=KCe;C1.displayName="@mantine/core/List";var glt=lt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}});const ylt=glt;var vlt=Object.defineProperty,_lt=Object.defineProperties,blt=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,JCe=Object.prototype.hasOwnProperty,ZCe=Object.prototype.propertyIsEnumerable,Ule=(e,t,n)=>t in e?vlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vP=(e,t)=>{for(var n in t||(t={}))JCe.call(t,n)&&Ule(e,n,t[n]);if(WN)for(var n of WN(t))ZCe.call(t,n)&&Ule(e,n,t[n]);return e},wlt=(e,t)=>_lt(e,blt(t)),Elt=(e,t)=>{var n={};for(var r in e)JCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&ZCe.call(e,r)&&(n[r]=e[r]);return n};const xlt={overlayOpacity:.75,transitionDuration:0,zIndex:da("overlay")},cm=C.forwardRef((e,t)=>{const n=gt("LoadingOverlay",xlt,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=Elt(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=ylt(null,{name:"LoadingOverlay",unstyled:m}),b=`calc(${c} + 1)`;return N.createElement(nI,{duration:u,exitDuration:l,mounted:i,transition:"fade"},E=>N.createElement(st,vP({className:v(y.root,r),style:wlt(vP(vP({},E),f),{zIndex:c}),ref:t},g),d?N.createElement("div",{style:{zIndex:b}},d):N.createElement(Mv,vP({style:{zIndex:b}},s)),N.createElement(LY,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});cm.displayName="@mantine/core/LoadingOverlay";var Slt=lt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}}));const Tlt=Slt;var Clt=Object.defineProperty,GN=Object.getOwnPropertySymbols,eAe=Object.prototype.hasOwnProperty,tAe=Object.prototype.propertyIsEnumerable,Vle=(e,t,n)=>t in e?Clt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Alt=(e,t)=>{for(var n in t||(t={}))eAe.call(t,n)&&Vle(e,n,t[n]);if(GN)for(var n of GN(t))tAe.call(t,n)&&Vle(e,n,t[n]);return e},Ilt=(e,t)=>{var n={};for(var r in e)eAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&tAe.call(e,r)&&(n[r]=e[r]);return n};function nAe(e){var t=e,{children:n,className:r}=t,i=Ilt(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=F0(),{classes:u,cx:l}=Tlt(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return N.createElement(st,Alt({className:l(u.divider,r)},i))}nAe.displayName="@mantine/core/MenuDivider";const rAe={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Olt,jY]=eY(rAe.context);var Plt=Object.defineProperty,YN=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?Plt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,klt=(e,t)=>{for(var n in t||(t={}))iAe.call(t,n)&&Hle(e,n,t[n]);if(YN)for(var n of YN(t))sAe.call(t,n)&&Hle(e,n,t[n]);return e},$lt=(e,t)=>{var n={};for(var r in e)iAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&sAe.call(e,r)&&(n[r]=e[r]);return n};function oAe(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=$lt(t,["children","onMouseEnter","onMouseLeave"]);const o=C.useRef(),a=jY(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=np(r,()=>a.trigger==="hover"&&a.openDropdown()),c=np(i,()=>a.trigger==="hover"&&a.closeDropdown());return N.createElement(hi.Dropdown,klt({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),N.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}oAe.displayName="@mantine/core/MenuDropdown";var Rlt=Object.defineProperty,Nlt=Object.defineProperties,Dlt=Object.getOwnPropertyDescriptors,qle=Object.getOwnPropertySymbols,Mlt=Object.prototype.hasOwnProperty,Llt=Object.prototype.propertyIsEnumerable,Wle=(e,t,n)=>t in e?Rlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Flt=(e,t)=>{for(var n in t||(t={}))Mlt.call(t,n)&&Wle(e,n,t[n]);if(qle)for(var n of qle(t))Llt.call(t,n)&&Wle(e,n,t[n]);return e},jlt=(e,t)=>Nlt(e,Dlt(t)),Blt=lt((e,{color:t,radius:n})=>({item:jlt(Flt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const zlt=Blt;var Ult=Object.defineProperty,Vlt=Object.defineProperties,Hlt=Object.getOwnPropertyDescriptors,KN=Object.getOwnPropertySymbols,aAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?Ult(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qlt=(e,t)=>{for(var n in t||(t={}))aAe.call(t,n)&&Gle(e,n,t[n]);if(KN)for(var n of KN(t))uAe.call(t,n)&&Gle(e,n,t[n]);return e},Wlt=(e,t)=>Vlt(e,Hlt(t)),Glt=(e,t)=>{var n={};for(var r in e)aAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&uAe.call(e,r)&&(n[r]=e[r]);return n};const lAe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=Glt(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=jY(),{classNames:f,styles:d,unstyled:h}=F0(),{classes:p,cx:m,theme:g}=zlt({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=C.useRef(),v=c.getItemIndex(y.current),_=l,b=np(_.onMouseLeave,()=>c.setHovered(-1)),E=np(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),w=np(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),x=np(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return N.createElement(st,Wlt(qlt({component:"button",type:"button"},l),{tabIndex:-1,onFocus:x,className:m(p.item,i),ref:Ps(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:b,onClick:w,onKeyDown:Fxe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&N.createElement("div",{className:p.itemIcon},a),r&&N.createElement("div",{className:p.itemLabel},r),u&&N.createElement("div",{className:p.itemRightSection},u))});lAe.displayName="@mantine/core/MenuItem";const Ylt=lAe;var Klt=lt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}}));const Xlt=Klt;var Qlt=Object.defineProperty,XN=Object.getOwnPropertySymbols,cAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,Yle=(e,t,n)=>t in e?Qlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jlt=(e,t)=>{for(var n in t||(t={}))cAe.call(t,n)&&Yle(e,n,t[n]);if(XN)for(var n of XN(t))fAe.call(t,n)&&Yle(e,n,t[n]);return e},Zlt=(e,t)=>{var n={};for(var r in e)cAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&fAe.call(e,r)&&(n[r]=e[r]);return n};function dAe(e){var t=e,{children:n,className:r}=t,i=Zlt(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=F0(),{classes:u,cx:l}=Xlt(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return N.createElement(ct,Jlt({className:l(u.label,r)},i),n)}dAe.displayName="@mantine/core/MenuLabel";var ect=Object.defineProperty,QN=Object.getOwnPropertySymbols,hAe=Object.prototype.hasOwnProperty,pAe=Object.prototype.propertyIsEnumerable,Kle=(e,t,n)=>t in e?ect(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tct=(e,t)=>{for(var n in t||(t={}))hAe.call(t,n)&&Kle(e,n,t[n]);if(QN)for(var n of QN(t))pAe.call(t,n)&&Kle(e,n,t[n]);return e},nct=(e,t)=>{var n={};for(var r in e)hAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&pAe.call(e,r)&&(n[r]=e[r]);return n};const mAe=C.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=nct(n,["children","refProp"]);if(!KA(r))throw new Error(rAe.children);const o=jY(),a=np(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=np(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=np(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return N.createElement(hi.Target,tct({refProp:i,popupType:"menu",ref:t},s),C.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});mAe.displayName="@mantine/core/MenuTarget";var rct=lt({dropdown:{padding:4}});const ict=rct;var sct=Object.defineProperty,oct=Object.defineProperties,act=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,gAe=Object.prototype.hasOwnProperty,yAe=Object.prototype.propertyIsEnumerable,Xle=(e,t,n)=>t in e?sct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qle=(e,t)=>{for(var n in t||(t={}))gAe.call(t,n)&&Xle(e,n,t[n]);if(JN)for(var n of JN(t))yAe.call(t,n)&&Xle(e,n,t[n]);return e},Jle=(e,t)=>oct(e,act(t)),uct=(e,t)=>{var n={};for(var r in e)gAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&yAe.call(e,r)&&(n[r]=e[r]);return n};const lct={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function zl(e){const t=gt("Menu",lct,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=uct(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:b}=ict(),[E,{setHovered:w,resetHovered:x}]=HKe(),[S,P]=oa({value:s,defaultValue:o,finalValue:!1,onChange:a}),A=()=>{P(!1),S&&(i==null||i())},O=()=>{P(!0),!S&&(r==null||r())},z=()=>S?A():O(),{openDropdown:M,closeDropdown:R}=put({open:O,close:A,closeDelay:h,openDelay:d}),D=L=>zKe("[data-menu-item]","[data-menu-dropdown]",L);return Ss(()=>{x()},[S]),N.createElement(Olt,{value:{opened:S,toggleDropdown:z,getItemIndex:D,hovered:E,setHovered:w,closeOnItemClick:u,closeDropdown:f==="click"?A:R,openDropdown:f==="click"?O:M,closeDropdownImmediately:A,loop:l,trigger:f,radius:y}},N.createElement(hi,Jle(Qle({},v),{radius:y,opened:S,onChange:P,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:Jle(Qle({},p),{dropdown:b(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:A,onOpen:O}),n))}zl.displayName="@mantine/core/Menu";zl.Item=Ylt;zl.Label=dAe;zl.Dropdown=oAe;zl.Target=mAe;zl.Divider=nAe;var cct=Object.defineProperty,Zle=Object.getOwnPropertySymbols,fct=Object.prototype.hasOwnProperty,dct=Object.prototype.propertyIsEnumerable,ece=(e,t,n)=>t in e?cct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hct=(e,t)=>{for(var n in t||(t={}))fct.call(t,n)&&ece(e,n,t[n]);if(Zle)for(var n of Zle(t))dct.call(t,n)&&ece(e,n,t[n]);return e};const pct={xs:320,sm:380,md:440,lg:620,xl:780};function mct(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var gct=lt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:hct({position:"relative",width:s?"100vw":e.fn.size({sizes:pct,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},mct(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}}));const yct=gct;var vct=Object.defineProperty,ZN=Object.getOwnPropertySymbols,vAe=Object.prototype.hasOwnProperty,_Ae=Object.prototype.propertyIsEnumerable,tce=(e,t,n)=>t in e?vct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_ct=(e,t)=>{for(var n in t||(t={}))vAe.call(t,n)&&tce(e,n,t[n]);if(ZN)for(var n of ZN(t))_Ae.call(t,n)&&tce(e,n,t[n]);return e},bct=(e,t)=>{var n={};for(var r in e)vAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&_Ae.call(e,r)&&(n[r]=e[r]);return n};const wct={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:da("modal"),exitTransitionDuration:0};function vp(e){const t=gt("Modal",wct,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:b,styles:E,closeOnClickOutside:w,trapFocus:x,closeOnEscape:S,centered:P,target:A,withinPortal:O,zIndex:z,overlayBlur:M,transitionTimingFunction:R,fullScreen:D,unstyled:L,lockScroll:V,withFocusReturn:B}=t,H=bct(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),U=Nu(_),k=`${U}-title`,$=`${U}-body`,{classes:q,cx:F,theme:j}=yct({size:l,overflow:p,centered:P,zIndex:z,fullScreen:D},{unstyled:L,classNames:b,styles:E,name:"Modal"}),Q=pY(x&&r),se=C.useRef(null),ae=Ps(Q,se),ce=typeof u=="number"?u:j.colorScheme==="dark"?.85:.75;bSe(V&&r);const le=Fe=>{!x&&Fe.key==="Escape"&&S&&s()};C.useEffect(()=>{if(!x)return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[x]),hY({opened:r,shouldReturnFocus:x&&B});const ge=C.useRef(null);dU("mousedown",Fe=>{ge.current=Fe.target});const ue=()=>{ge.current===se.current&&w&&s()};return N.createElement(zE,{withinPortal:O,target:A},N.createElement(MY,{mounted:r,duration:c,exitDuration:f,timingFunction:R,transitions:{modal:{duration:c,transition:m||(D?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Fe=>N.createElement(N.Fragment,null,N.createElement(st,_ct({id:U,className:F(q.root,n)},H),N.createElement("div",{style:Fe.overlay},N.createElement(LY,{className:q.overlay,sx:{position:"fixed"},zIndex:0,blur:M,color:h||(j.colorScheme==="dark"?j.colors.dark[9]:j.black),opacity:ce,unstyled:L})),N.createElement("div",{role:"presentation",className:q.inner,onClick:ue,onKeyDown:$e=>{var Ge;((Ge=$e.target)==null?void 0:Ge.getAttribute("data-mantine-stop-propagation"))!=="true"&&$e.key==="Escape"&&S&&s()},ref:ae},N.createElement(RY,{className:q.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":k,"aria-describedby":$,"aria-modal":!0,tabIndex:-1,style:Fe.modal,unstyled:L,onClick:$e=>$e.stopPropagation()},(i||a)&&N.createElement("div",{className:q.header},N.createElement(ct,{id:k,className:q.title},i),a&&N.createElement(om,{iconSize:16,onClick:s,"aria-label":d,className:q.close})),N.createElement("div",{id:$,className:q.body},o)))))))}vp.displayName="@mantine/core/Modal";const Ect={xs:16,sm:22,md:26,lg:30,xl:36},xct={xs:10,sm:12,md:14,lg:16,xl:18};var Sct=lt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:Ect}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:xct}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const Tct=Sct;var Cct=Object.defineProperty,eD=Object.getOwnPropertySymbols,bAe=Object.prototype.hasOwnProperty,wAe=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?Cct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Act=(e,t)=>{for(var n in t||(t={}))bAe.call(t,n)&&nce(e,n,t[n]);if(eD)for(var n of eD(t))wAe.call(t,n)&&nce(e,n,t[n]);return e},Ict=(e,t)=>{var n={};for(var r in e)bAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&wAe.call(e,r)&&(n[r]=e[r]);return n};const rce={xs:16,sm:22,md:24,lg:26,xl:30};function EAe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=Ict(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=Tct({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return N.createElement("div",Act({className:p(h.defaultValue,s)},d),N.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&N.createElement(om,{"aria-hidden":!0,onMouseDown:o,size:rce[l],radius:2,color:"blue",variant:"transparent",iconSize:rce[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}EAe.displayName="@mantine/core/MultiSelect/DefaultValue";function Oct({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var Pct=Object.defineProperty,tD=Object.getOwnPropertySymbols,xAe=Object.prototype.hasOwnProperty,SAe=Object.prototype.propertyIsEnumerable,ice=(e,t,n)=>t in e?Pct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sce=(e,t)=>{for(var n in t||(t={}))xAe.call(t,n)&&ice(e,n,t[n]);if(tD)for(var n of tD(t))SAe.call(t,n)&&ice(e,n,t[n]);return e},kct=(e,t)=>{var n={};for(var r in e)xAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&SAe.call(e,r)&&(n[r]=e[r]);return n};const $ct={xs:14,sm:18,md:20,lg:24,xl:28};function TAe(e){var t=e,{size:n,error:r,style:i}=t,s=kct(t,["size","error","style"]);const o=fs(),a=o.fn.size({size:n,sizes:$ct});return N.createElement("svg",sce({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:sce({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),N.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function CAe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?N.createElement(om,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):N.createElement(TAe,{error:i,size:r})}CAe.displayName="@mantine/core/SelectRightSection";var Rct=Object.defineProperty,Nct=Object.defineProperties,Dct=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,AAe=Object.prototype.hasOwnProperty,IAe=Object.prototype.propertyIsEnumerable,oce=(e,t,n)=>t in e?Rct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V9=(e,t)=>{for(var n in t||(t={}))AAe.call(t,n)&&oce(e,n,t[n]);if(nD)for(var n of nD(t))IAe.call(t,n)&&oce(e,n,t[n]);return e},ace=(e,t)=>Nct(e,Dct(t)),Mct=(e,t)=>{var n={};for(var r in e)AAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&IAe.call(e,r)&&(n[r]=e[r]);return n};const Lct={xs:24,sm:30,md:34,lg:44,xl:54};function OAe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=Mct(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:Lct}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&N.createElement(CAe,V9({},o)),styles:ace(V9({},a),{rightSection:ace(V9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var Fct=Object.defineProperty,jct=Object.defineProperties,Bct=Object.getOwnPropertyDescriptors,uce=Object.getOwnPropertySymbols,zct=Object.prototype.hasOwnProperty,Uct=Object.prototype.propertyIsEnumerable,lce=(e,t,n)=>t in e?Fct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vct=(e,t)=>{for(var n in t||(t={}))zct.call(t,n)&&lce(e,n,t[n]);if(uce)for(var n of uce(t))Uct.call(t,n)&&lce(e,n,t[n]);return e},Hct=(e,t)=>jct(e,Bct(t)),qct=lt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:Vo})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:Hct(Vct({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:Vo})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const Wct=qct;var Gct=Object.defineProperty,Yct=Object.defineProperties,Kct=Object.getOwnPropertyDescriptors,rD=Object.getOwnPropertySymbols,PAe=Object.prototype.hasOwnProperty,kAe=Object.prototype.propertyIsEnumerable,cce=(e,t,n)=>t in e?Gct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x_=(e,t)=>{for(var n in t||(t={}))PAe.call(t,n)&&cce(e,n,t[n]);if(rD)for(var n of rD(t))kAe.call(t,n)&&cce(e,n,t[n]);return e},fce=(e,t)=>Yct(e,Kct(t)),Xct=(e,t)=>{var n={};for(var r in e)PAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&kAe.call(e,r)&&(n[r]=e[r]);return n};function Qct(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Jct(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function dce(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const Zct={size:"sm",valueComponent:EAe,itemComponent:_Y,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:Qct,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:Jct,switchDirectionOnFlip:!1,zIndex:da("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},$Ae=C.forwardRef((e,t)=>{const n=gt("MultiSelect",Zct,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:b,transitionDuration:E,transitionTimingFunction:w,maxDropdownHeight:x,shadow:S,nothingFound:P,onFocus:A,onBlur:O,searchable:z,placeholder:M,filter:R,limit:D,clearSearchOnChange:L,clearable:V,clearSearchOnBlur:B,clearButtonLabel:H,variant:U,onSearchChange:k,searchValue:$,disabled:q,initiallyOpened:F,radius:j,icon:Q,rightSection:se,rightSectionWidth:ae,creatable:ce,getCreateLabel:le,shouldCreate:ge,onCreate:ue,sx:Fe,dropdownComponent:$e,onDropdownClose:Ge,onDropdownOpen:Re,maxSelectedValues:Oe,withinPortal:Me,switchDirectionOnFlip:Ut,zIndex:Qe,selectOnBlur:Be,name:xt,dropdownPosition:et,errorProps:ft,labelProps:dt,descriptionProps:Bt,clearButtonTabIndex:Dn,form:he,positionDependencies:_e,onKeyDown:Pe,unstyled:it,inputContainer:Ye,inputWrapperOrder:ut,readOnly:tt,withAsterisk:wt}=n,In=Xct(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Wt,cx:Vt,theme:hr}=Wct({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:it,name:"MultiSelect"}),{systemStyles:Yn,rest:ju}=Sf(In),Lr=C.useRef(),ds=C.useRef(),ii=C.useRef({}),Ai=Nu(_),[Gr,yr]=C.useState(F),[_t,Fr]=C.useState(-1),[Ii,Ji]=C.useState("column"),[no,Wa]=oa({value:$,defaultValue:"",finalValue:void 0,onChange:k}),[ne,J]=C.useState(!1),{scrollIntoView:ie,targetRef:ve,scrollableRef:ye}=_Se({duration:0,offset:5,cancelable:!1,isList:!0}),yt=ce&&typeof le=="function";let Ae=null;const pt=m.map(bt=>typeof bt=="string"?{label:bt,value:bt}:bt),jt=jxe({data:pt}),[At,Ht]=oa({value:dce(h,m),defaultValue:dce(p,m),finalValue:[],onChange:g}),fn=C.useRef(!!Oe&&Oe<At.length),Tr=bt=>{if(!tt){const wn=At.filter(jr=>jr!==bt);Ht(wn),Oe&&wn.length<Oe&&(fn.current=!1)}},zt=bt=>{Wa(bt.currentTarget.value),!q&&!fn.current&&z&&yr(!0)},pr=bt=>{typeof A=="function"&&A(bt),!q&&!fn.current&&z&&yr(!0)},Xt=Oct({data:jt,searchable:z,searchValue:no,limit:D,filter:R,value:At}),er=(bt,wn,jr)=>{let Rs=bt;for(;jr(Rs);)if(Rs=wn(Rs),!Xt[Rs].disabled)return Rs;return bt};Ss(()=>{Fr(-1)},[no]),Ss(()=>{!q&&At.length>m.length&&yr(!1),Oe&&At.length<Oe&&(fn.current=!1),Oe&&At.length>=Oe&&(fn.current=!0,yr(!1))},[At]);const si=bt=>{if(!tt)if(L&&Wa(""),At.includes(bt.value))Tr(bt.value);else{if(bt.creatable&&typeof ue=="function"){const wn=ue(bt.value);typeof wn<"u"&&wn!==null&&Ht(typeof wn=="string"?[...At,wn]:[...At,wn.value])}else Ht([...At,bt.value]);At.length===Oe-1&&(fn.current=!0,yr(!1)),_t===Xt.length-1&&Fr(Xt.length-2),Xt.length===1&&yr(!1)}},hs=bt=>{typeof O=="function"&&O(bt),Be&&Xt[_t]&&Gr&&si(Xt[_t]),B&&Wa(""),yr(!1)},Vi=bt=>{if(ne||(Pe==null||Pe(bt),tt)||bt.key!=="Backspace"&&Oe&&fn.current)return;const wn=Ii==="column",jr=()=>{Fr(Ga=>{var W;const te=er(Ga,K=>K+1,K=>K<Xt.length-1);return Gr&&(ve.current=ii.current[(W=Xt[te])==null?void 0:W.value],ie({alignment:wn?"end":"start"})),te})},Rs=()=>{Fr(Ga=>{var W;const te=er(Ga,K=>K-1,K=>K>0);return Gr&&(ve.current=ii.current[(W=Xt[te])==null?void 0:W.value],ie({alignment:wn?"start":"end"})),te})};switch(bt.key){case"ArrowUp":{bt.preventDefault(),yr(!0),wn?Rs():jr();break}case"ArrowDown":{bt.preventDefault(),yr(!0),wn?jr():Rs();break}case"Enter":{bt.preventDefault(),Xt[_t]&&Gr?si(Xt[_t]):yr(!0);break}case" ":{z||(bt.preventDefault(),Xt[_t]&&Gr?si(Xt[_t]):yr(!0));break}case"Backspace":{At.length>0&&no.length===0&&(Ht(At.slice(0,-1)),yr(!0),Oe&&(fn.current=!1));break}case"Home":{if(!z){bt.preventDefault(),Gr||yr(!0);const Ga=Xt.findIndex(W=>!W.disabled);Fr(Ga),ie({alignment:wn?"end":"start"})}break}case"End":{if(!z){bt.preventDefault(),Gr||yr(!0);const Ga=Xt.map(W=>!!W.disabled).lastIndexOf(!1);Fr(Ga),ie({alignment:wn?"end":"start"})}break}case"Escape":yr(!1)}},ma=At.map(bt=>{let wn=jt.find(jr=>jr.value===bt&&!jr.disabled);return!wn&&yt&&(wn={value:bt,label:bt}),wn}).filter(bt=>!!bt).map(bt=>N.createElement(y,fce(x_({},bt),{variant:U,disabled:q,className:Wt.value,readOnly:tt,onRemove:wn=>{wn.preventDefault(),wn.stopPropagation(),Tr(bt.value)},key:bt.value,size:u,styles:f,classNames:c,radius:j}))),ro=()=>{var bt;Wa(""),Ht([]),(bt=Lr.current)==null||bt.focus(),Oe&&(fn.current=!1)};yt&&ge(no,jt)&&(Ae=le(no),Xt.push({label:no,value:no,creatable:!0}));const _i=!tt&&(Xt.length>0?Gr:Gr&&!!P);return Ss(()=>{const bt=_i?Re:Ge;typeof bt=="function"&&bt()},[_i]),N.createElement(us.Wrapper,x_(x_({required:s,id:Ai,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Fe,errorProps:ft,descriptionProps:Bt,labelProps:dt,inputContainer:Ye,inputWrapperOrder:ut,unstyled:it,withAsterisk:wt},Yn),d),N.createElement($g,{opened:_i,transition:b,transitionDuration:E,shadow:"sm",withinPortal:Me,__staticSelector:"MultiSelect",onDirectionChange:Ji,switchDirectionOnFlip:Ut,zIndex:Qe,dropdownPosition:et,positionDependencies:_e,classNames:c,styles:f,unstyled:it},N.createElement($g.Target,null,N.createElement("div",{className:Wt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":Gr&&_i?`${Ai}-items`:null,"aria-controls":Ai,"aria-expanded":Gr,onMouseLeave:()=>Fr(-1),tabIndex:-1,ref:ds},N.createElement("input",{type:"hidden",name:xt,value:At.join(","),form:he,disabled:q}),N.createElement(us,x_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:U,disabled:q,invalid:!!l,required:s,radius:j,icon:Q,unstyled:it,onMouseDown:bt=>{var wn;bt.preventDefault(),!q&&!fn.current&&yr(!Gr),(wn=Lr.current)==null||wn.focus()},classNames:fce(x_({},c),{input:Vt({[Wt.input]:!z},c==null?void 0:c.input)})},OAe({theme:hr,rightSection:se,rightSectionWidth:ae,styles:f,size:u,shouldClear:V&&At.length>0,clearButtonLabel:H,onClear:ro,error:l,disabled:q,clearButtonTabIndex:Dn,readOnly:tt})),N.createElement("div",{className:Wt.values},ma,N.createElement("input",x_({ref:Ps(t,Lr),type:"search",id:Ai,className:Vt(Wt.searchInput,{[Wt.searchInputPointer]:!z,[Wt.searchInputInputHidden]:!Gr&&At.length>0||!z&&At.length>0,[Wt.searchInputEmpty]:At.length===0}),onKeyDown:Vi,value:no,onChange:zt,onFocus:pr,onBlur:hs,readOnly:!z||fn.current||tt,placeholder:At.length===0?M:void 0,disabled:q,"data-mantine-stop-propagation":Gr,autoComplete:"off",onCompositionStart:()=>J(!0),onCompositionEnd:()=>J(!1)},ju)))))),N.createElement($g.Dropdown,{component:$e||I6,maxHeight:x,direction:Ii,id:Ai,innerRef:ye,__staticSelector:"MultiSelect",classNames:c,styles:f},N.createElement(vY,{data:Xt,hovered:_t,classNames:c,styles:f,uuid:Ai,__staticSelector:"MultiSelect",onItemHover:Fr,onItemSelect:si,itemsRefs:ii,itemComponent:v,size:u,nothingFound:P,creatable:ce&&!!Ae,createLabel:Ae,unstyled:it}))))});$Ae.displayName="@mantine/core/MultiSelect";var eft=Object.defineProperty,tft=Object.defineProperties,nft=Object.getOwnPropertyDescriptors,hce=Object.getOwnPropertySymbols,rft=Object.prototype.hasOwnProperty,ift=Object.prototype.propertyIsEnumerable,pce=(e,t,n)=>t in e?eft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mce=(e,t)=>{for(var n in t||(t={}))rft.call(t,n)&&pce(e,n,t[n]);if(hce)for(var n of hce(t))ift.call(t,n)&&pce(e,n,t[n]);return e},sft=(e,t)=>tft(e,nft(t)),oft=lt((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:sft(mce({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":mce({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}});const aft=oft;var uft=Object.defineProperty,iD=Object.getOwnPropertySymbols,RAe=Object.prototype.hasOwnProperty,NAe=Object.prototype.propertyIsEnumerable,gce=(e,t,n)=>t in e?uft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lft=(e,t)=>{for(var n in t||(t={}))RAe.call(t,n)&&gce(e,n,t[n]);if(iD)for(var n of iD(t))NAe.call(t,n)&&gce(e,n,t[n]);return e},cft=(e,t)=>{var n={};for(var r in e)RAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&NAe.call(e,r)&&(n[r]=e[r]);return n};const fft={variant:"light",childrenOffset:"lg"},DAe=C.forwardRef((e,t)=>{const n=gt("NavLink",fft,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:b,disabled:E,onClick:w}=n,x=cft(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:S,cx:P}=aft({color:d,variant:h,noWrap:p,childrenOffset:b,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[A,O]=oa({value:g,defaultValue:y,finalValue:!1,onChange:v}),z=!!m,M=R=>{z?(R.preventDefault(),w==null||w(R),O(!A)):w==null||w(R)};return N.createElement(N.Fragment,null,N.createElement(sm,lft({ref:t,className:P(S.root,a),"data-active":f||void 0,onClick:M,unstyled:c,"data-expanded":A||void 0,"data-disabled":E||void 0,disabled:E},x),s&&N.createElement("span",{className:S.icon},s),N.createElement("span",{className:S.body},N.createElement(ct,{component:"span",size:"sm",className:S.label},r),N.createElement(ct,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:S.description},i)),(z||o)&&N.createElement("span",{className:S.rightSection,"data-rotate":A&&!_||void 0},z?o||N.createElement(gZe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),N.createElement(kSe,{in:A},N.createElement("div",{className:S.children},m)))});DAe.displayName="@mantine/core/NavLink";const MAe=DAe,dft=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function yce({direction:e,size:t}){return N.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const LAe={xs:20,sm:24,md:30,lg:34,xl:36};var hft=lt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:LAe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const pft=hft;var mft=Object.defineProperty,gft=Object.defineProperties,yft=Object.getOwnPropertyDescriptors,sD=Object.getOwnPropertySymbols,FAe=Object.prototype.hasOwnProperty,jAe=Object.prototype.propertyIsEnumerable,vce=(e,t,n)=>t in e?mft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H9=(e,t)=>{for(var n in t||(t={}))FAe.call(t,n)&&vce(e,n,t[n]);if(sD)for(var n of sD(t))jAe.call(t,n)&&vce(e,n,t[n]);return e},vft=(e,t)=>gft(e,yft(t)),_ft=(e,t)=>{var n={};for(var r in e)FAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&jAe.call(e,r)&&(n[r]=e[r]);return n};const bft={type:"text",size:"sm",__staticSelector:"TextInput"},$6=C.forwardRef((e,t)=>{const n=x2e("TextInput",bft,e),{inputProps:r,wrapperProps:i}=n,s=_ft(n,["inputProps","wrapperProps"]);return N.createElement(us.Wrapper,H9({},i),N.createElement(us,vft(H9(H9({},r),s),{ref:t})))});$6.displayName="@mantine/core/TextInput";var wft=Object.defineProperty,Eft=Object.defineProperties,xft=Object.getOwnPropertyDescriptors,oD=Object.getOwnPropertySymbols,BAe=Object.prototype.hasOwnProperty,zAe=Object.prototype.propertyIsEnumerable,_ce=(e,t,n)=>t in e?wft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sft=(e,t)=>{for(var n in t||(t={}))BAe.call(t,n)&&_ce(e,n,t[n]);if(oD)for(var n of oD(t))zAe.call(t,n)&&_ce(e,n,t[n]);return e},Tft=(e,t)=>Eft(e,xft(t)),Cft=(e,t)=>{var n={};for(var r in e)BAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&zAe.call(e,r)&&(n[r]=e[r]);return n};const Aft=e=>e||"",Ift=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},bce={xs:10,sm:14,md:16,lg:18,xl:20},Oft={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:Aft,parser:Ift,type:"text"},UAe=C.forwardRef((e,t)=>{const n=gt("NumberInput",Oft,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:b,removeTrailingZeros:E,defaultValue:w,noClampOnBlur:x,handlersRef:S,classNames:P,styles:A,size:O,rightSection:z,rightSectionWidth:M,formatter:R,parser:D,inputMode:L,unstyled:V,type:B}=n,H=Cft(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:U,cx:k,theme:$}=pft({radius:v,size:O},{classNames:P,styles:A,unstyled:V,name:"NumberInput"}),q=Ye=>{if(Ye===void 0)return;let ut=Ye.toFixed(b);return E&&b>0&&(ut=ut.replace(new RegExp(`[0]{0,${b}}$`),""),(ut.endsWith(".")||ut.endsWith(o))&&(ut=ut.slice(0,-1))),ut},[F,j]=C.useState(!1),[Q,se]=C.useState(typeof i=="number"?i:typeof w=="number"?w:void 0),ae=typeof i=="number"?i:Q,[ce,le]=C.useState(typeof ae=="number"?q(ae):""),ge=C.useRef(),ue=Ye=>{Ye!==Q&&!Number.isNaN(Ye)&&(typeof s=="function"&&s(Ye),se(Ye))},Fe=(Ye="")=>{let ut=typeof Ye=="number"?String(Ye):Ye;return o&&(ut=ut.replace(/\./g,o)),R(ut)},$e=Ye=>{let ut=Ye;return o&&(ut=ut.replace(new RegExp(`\\${o}`,"g"),".")),D(ut)},Ge=typeof a=="number"?a:-1/0,Re=typeof u=="number"?u:1/0,Oe=C.useRef();Oe.current=()=>{var Ye,ut,tt;if(Q===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(ut=q(l))!=null?ut:q(a))!=null?tt:"0");else{const wt=q(af(Q+c,Ge,Re));ue(parseFloat(wt)),le(wt)}};const Me=C.useRef();Me.current=()=>{var Ye,ut,tt;if(Q===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(ut=q(l))!=null?ut:q(a))!=null?tt:"0");else{const wt=q(af(Q-c,Ge,Re));ue(parseFloat(wt)),le(wt)}},gSe(S,{increment:Oe.current,decrement:Me.current}),C.useEffect(()=>{typeof i=="number"&&!F&&(se(i),le(q(i))),w===void 0&&i===void 0&&!F&&(se(i),le(""))},[i]);const Ut=d!==void 0&&f!==void 0,Qe=C.useRef(null),Be=C.useRef(0),xt=()=>{Qe.current&&window.clearTimeout(Qe.current),Qe.current=null,Be.current=0},et=Ye=>{Ye?Oe.current():Me.current(),Be.current+=1},ft=Ye=>{if(et(Ye),Ut){const ut=typeof f=="number"?f:f(Be.current);Qe.current=window.setTimeout(()=>ft(Ye),ut)}},dt=(Ye,ut)=>{Ye.preventDefault(),ge.current.focus(),et(ut),Ut&&(Qe.current=window.setTimeout(()=>ft(ut),d))};C.useEffect(()=>(xt(),xt),[]);const Bt=N.createElement("div",{className:U.rightSection},N.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae>=u,className:k(U.control,U.controlUp),onPointerDown:Ye=>{dt(Ye,!0)},onPointerUp:xt,onPointerLeave:xt},N.createElement(yce,{size:$.fn.size({size:O,sizes:bce}),direction:"up"})),N.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae<=a,className:k(U.control,U.controlDown),onPointerDown:Ye=>{dt(Ye,!1)},onPointerUp:xt,onPointerLeave:xt},N.createElement(yce,{size:$.fn.size({size:O,sizes:bce}),direction:"down"}))),Dn=Ye=>{if(Ye.nativeEvent.isComposing)return;const tt=Ye.target.value,wt=$e(tt);le(wt),tt===""||tt==="-"?ue(void 0):tt.trim()!==""&&!Number.isNaN(wt)&&ue(parseFloat(wt))},he=Ye=>{var ut;if(Ye.target.value==="")le(""),ue(void 0);else{let tt=Ye.target.value;(tt[0]===`${o}`||tt[0]===".")&&(tt=`0${tt}`);const wt=$e(tt),In=af(parseFloat(wt),Ge,Re);Number.isNaN(In)?le((ut=q(ae))!=null?ut:""):x||(le(q(In)),ue(parseFloat(q(In))))}j(!1),typeof h=="function"&&h(Ye)},_e=Ye=>{j(!0),typeof p=="function"&&p(Ye)},Pe=Ye=>{if(typeof m=="function"&&m(Ye),Ye.repeat&&Ut&&(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")){Ye.preventDefault();return}Ye.key==="ArrowUp"?dt(Ye,!0):Ye.key==="ArrowDown"&&dt(Ye,!1)},it=Ye=>{typeof g=="function"&&g(Ye),(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")&&xt()};return N.createElement($6,Tft(Sft({},H),{type:B,variant:_,value:Fe(ce),disabled:r,ref:Ps(ge,t),onChange:Dn,onBlur:he,onFocus:_e,onKeyDown:Pe,onKeyUp:it,rightSection:z||(r||y||_==="unstyled"?null:Bt),rightSectionWidth:M||$.fn.size({size:O,sizes:LAe})+1,radius:v,max:u,min:a,step:c,size:O,styles:A,classNames:P,inputMode:L||dft(c,b,TJe()),__staticSelector:"NumberInput",unstyled:V}))});UAe.displayName="@mantine/core/NumberInput";const wce={xs:3,sm:5,md:8,lg:12,xl:16},Pft=yQe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var kft=lt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:wce}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${Pft} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:wce})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const $ft=kft,VAe=C.createContext(!1),Rft=VAe.Provider,Nft=()=>C.useContext(VAe);function HAe({children:e,openDelay:t=0,closeDelay:n=0}){return N.createElement(Rft,{value:!0},N.createElement(brt,{delay:{open:t,close:n}},e))}HAe.displayName="@mantine/core/TooltipGroup";var Dft=Object.defineProperty,Mft=Object.defineProperties,Lft=Object.getOwnPropertyDescriptors,Ece=Object.getOwnPropertySymbols,Fft=Object.prototype.hasOwnProperty,jft=Object.prototype.propertyIsEnumerable,xce=(e,t,n)=>t in e?Dft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sce=(e,t)=>{for(var n in t||(t={}))Fft.call(t,n)&&xce(e,n,t[n]);if(Ece)for(var n of Ece(t))jft.call(t,n)&&xce(e,n,t[n]);return e},Bft=(e,t)=>Mft(e,Lft(t));function zft(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var Uft=lt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:Bft(Sce(Sce({},e.fn.fontStyles()),zft(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const qAe=Uft,WAe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function Vft({offset:e,position:t}){const[n,r]=C.useState(!1),i=C.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=AY({placement:t,middleware:[SY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=C.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return C.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=yp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var Hft=Object.defineProperty,qft=Object.defineProperties,Wft=Object.getOwnPropertyDescriptors,aD=Object.getOwnPropertySymbols,GAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,Tce=(e,t,n)=>t in e?Hft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q9=(e,t)=>{for(var n in t||(t={}))GAe.call(t,n)&&Tce(e,n,t[n]);if(aD)for(var n of aD(t))YAe.call(t,n)&&Tce(e,n,t[n]);return e},W9=(e,t)=>qft(e,Wft(t)),Gft=(e,t)=>{var n={};for(var r in e)GAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aD)for(var r of aD(e))t.indexOf(r)<0&&YAe.call(e,r)&&(n[r]=e[r]);return n};const Yft={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:da("popover")};function KAe(e){var t;const n=gt("TooltipFloating",Yft,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,b=Gft(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:E,x:w,y:x,opened:S,boundaryRef:P,floating:A,setOpened:O}=Vft({offset:p,position:m}),{classes:z,cx:M}=qAe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!KA(r))throw new Error(WAe.children);const R=Ps(P,r.ref),D=V=>{var B,H;(H=(B=r.props).onMouseEnter)==null||H.call(B,V),E(V),O(!0)},L=V=>{var B,H;(H=(B=r.props).onMouseLeave)==null||H.call(B,V),O(!1)};return _?N.createElement(N.Fragment,null,r):N.createElement(N.Fragment,null,N.createElement(zE,{withinPortal:s},N.createElement(st,W9(q9({},b),{ref:A,className:M(z.tooltip,a),style:W9(q9({},o),{zIndex:v,display:S?"block":"none",top:x??"",left:(t=Math.round(w))!=null?t:""})}),h)),C.cloneElement(r,W9(q9({},r.props),{[i]:R,onMouseEnter:D,onMouseLeave:L})))}KAe.displayName="@mantine/core/TooltipFloating";function Kft(e){const[t,n]=C.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Nft(),o=Nu(),{delay:a,currentId:u,setCurrentId:l}=r2e(),c=C.useCallback(S=>{n(S),S&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:b}={}}}=AY({placement:e.position,open:i,onOpenChange:c,middleware:[qTe(e.offset),SY({padding:8}),HTe(),ZTe({element:e.arrowRef}),...e.inline?[GTe()]:[]]}),{getReferenceProps:E,getFloatingProps:w}=grt([_rt(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),Crt(m,{enabled:e.events.focus,keyboardOnly:!0}),Ert(m,{role:"tooltip"}),Trt(m,{enabled:typeof e.opened===void 0}),wrt(m,{id:o})]);return i2e({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),Ss(()=>{var S;(S=e.onPositionChange)==null||S.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:b,reference:h,floating:p,getFloatingProps:w,getReferenceProps:E,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var Xft=Object.defineProperty,Qft=Object.defineProperties,Jft=Object.getOwnPropertyDescriptors,uD=Object.getOwnPropertySymbols,XAe=Object.prototype.hasOwnProperty,QAe=Object.prototype.propertyIsEnumerable,Cce=(e,t,n)=>t in e?Xft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lS=(e,t)=>{for(var n in t||(t={}))XAe.call(t,n)&&Cce(e,n,t[n]);if(uD)for(var n of uD(t))QAe.call(t,n)&&Cce(e,n,t[n]);return e},Zft=(e,t)=>Qft(e,Jft(t)),edt=(e,t)=>{var n={};for(var r in e)XAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uD)for(var r of uD(e))t.indexOf(r)<0&&QAe.call(e,r)&&(n[r]=e[r]);return n};const tdt={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:da("popover"),positionDependencies:[]},R6=C.forwardRef((e,t)=>{const n=C.useRef(null),r=gt("Tooltip",tdt,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:b,arrowSize:E,arrowOffset:w,arrowRadius:x,offset:S,transition:P,transitionDuration:A,multiline:O,width:z,events:M,zIndex:R,disabled:D,positionDependencies:L,onClick:V,onMouseEnter:B,onMouseLeave:H,inline:U}=r,k=edt(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:$,cx:q,theme:F}=qAe({radius:h,color:p,width:z,multiline:O},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),j=Kft({position:v2e(F.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:M,arrowRef:n,offset:S+(b?E/2:0),positionDependencies:[...L,i],inline:U});if(!KA(i))throw new Error(WAe.children);const Q=Ps(j.reference,i.ref,t);return N.createElement(N.Fragment,null,N.createElement(zE,{withinPortal:d},N.createElement(nI,{mounted:!D&&j.opened,transition:P,duration:j.isGroupPhase?10:A},se=>{var ae,ce;return N.createElement(st,lS(lS({},k),j.getFloatingProps({ref:j.floating,className:$.tooltip,style:Zft(lS(lS({},v),se),{zIndex:R,top:(ae=j.y)!=null?ae:0,left:(ce=j.x)!=null?ce:0})})),a,N.createElement(IY,{ref:n,arrowX:j.arrowX,arrowY:j.arrowY,visible:b,withBorder:!1,position:j.placement,arrowSize:E,arrowOffset:w,arrowRadius:x,className:$.arrow}))})),C.cloneElement(i,j.getReferenceProps(lS({onClick:V,onMouseEnter:B,onMouseLeave:H,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:Q,className:q(_,i.props.className)},i.props))))});R6.Group=HAe;R6.Floating=KAe;R6.displayName="@mantine/core/Tooltip";const A1=R6;var ndt=Object.defineProperty,rdt=Object.defineProperties,idt=Object.getOwnPropertyDescriptors,lD=Object.getOwnPropertySymbols,JAe=Object.prototype.hasOwnProperty,ZAe=Object.prototype.propertyIsEnumerable,Ace=(e,t,n)=>t in e?ndt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xU=(e,t)=>{for(var n in t||(t={}))JAe.call(t,n)&&Ace(e,n,t[n]);if(lD)for(var n of lD(t))ZAe.call(t,n)&&Ace(e,n,t[n]);return e},eIe=(e,t)=>rdt(e,idt(t)),Ice=(e,t)=>{var n={};for(var r in e)JAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lD)for(var r of lD(e))t.indexOf(r)<0&&ZAe.call(e,r)&&(n[r]=e[r]);return n};function sdt(e){return e.reduce((t,n)=>(t.sections.push(eIe(xU({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const odt={size:"md",radius:"sm",striped:!1,animate:!1,label:""},tIe=C.forwardRef((e,t)=>{const n=gt("Progress",odt,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=Ice(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=$ft({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),b=Array.isArray(p)?sdt(p).map((E,w)=>{var x=E,{tooltip:S,accumulated:P,value:A,label:O,color:z}=x,M=Ice(x,["tooltip","accumulated","value","label","color"]);return N.createElement(A1.Floating,{label:S,disabled:!S,key:w},N.createElement(st,eIe(xU({},M),{className:v(y.bar,M.className),sx:{width:`${A}%`,left:`${P}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:z||_.primaryColor}).background}}),O&&N.createElement(ct,{className:y.label},O)))}):null;return N.createElement(st,xU({className:v(y.root,r),ref:t},g),b||N.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?N.createElement(ct,{className:y.label},c):""))});tIe.displayName="@mantine/core/Progress";var adt=Object.defineProperty,Oce=Object.getOwnPropertySymbols,udt=Object.prototype.hasOwnProperty,ldt=Object.prototype.propertyIsEnumerable,Pce=(e,t,n)=>t in e?adt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cdt=(e,t)=>{for(var n in t||(t={}))udt.call(t,n)&&Pce(e,n,t[n]);if(Oce)for(var n of Oce(t))ldt.call(t,n)&&Pce(e,n,t[n]);return e};function fdt(e){return N.createElement("svg",cdt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),N.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const nIe=C.createContext(null),ddt=nIe.Provider,hdt=()=>C.useContext(nIe);var pdt=Object.defineProperty,cD=Object.getOwnPropertySymbols,rIe=Object.prototype.hasOwnProperty,iIe=Object.prototype.propertyIsEnumerable,kce=(e,t,n)=>t in e?pdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$ce=(e,t)=>{for(var n in t||(t={}))rIe.call(t,n)&&kce(e,n,t[n]);if(cD)for(var n of cD(t))iIe.call(t,n)&&kce(e,n,t[n]);return e},mdt=(e,t)=>{var n={};for(var r in e)rIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cD)for(var r of cD(e))t.indexOf(r)<0&&iIe.call(e,r)&&(n[r]=e[r]);return n};const gdt={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},sIe=C.forwardRef((e,t)=>{const n=gt("RadioGroup",gdt,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=mdt(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=oa({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return N.createElement(ddt,{value:{value:m,onChange:y,size:l,name:h}},N.createElement(us.Wrapper,$ce($ce({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),N.createElement(dCe,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});sIe.displayName="@mantine/core/RadioGroup";var ydt=Object.defineProperty,vdt=Object.defineProperties,_dt=Object.getOwnPropertyDescriptors,Rce=Object.getOwnPropertySymbols,bdt=Object.prototype.hasOwnProperty,wdt=Object.prototype.propertyIsEnumerable,Nce=(e,t,n)=>t in e?ydt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Edt=(e,t)=>{for(var n in t||(t={}))bdt.call(t,n)&&Nce(e,n,t[n]);if(Rce)for(var n of Rce(t))wdt.call(t,n)&&Nce(e,n,t[n]);return e},xdt=(e,t)=>vdt(e,_dt(t));const G9={xs:16,sm:20,md:24,lg:30,xl:36},_P={xs:6,sm:8,md:10,lg:14,xl:16};var Sdt=lt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:_P,size:t}),height:e.fn.size({sizes:_P,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:_P,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:_P,size:t})/2}px)`},radio:xdt(Edt({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:G9,size:t}),height:e.fn.size({sizes:G9,size:t}),borderRadius:e.fn.size({sizes:G9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}});const Tdt=Sdt;var Cdt=Object.defineProperty,fD=Object.getOwnPropertySymbols,oIe=Object.prototype.hasOwnProperty,aIe=Object.prototype.propertyIsEnumerable,Dce=(e,t,n)=>t in e?Cdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bP=(e,t)=>{for(var n in t||(t={}))oIe.call(t,n)&&Dce(e,n,t[n]);if(fD)for(var n of fD(t))aIe.call(t,n)&&Dce(e,n,t[n]);return e},Adt=(e,t)=>{var n={};for(var r in e)oIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fD)for(var r of fD(e))t.indexOf(r)<0&&aIe.call(e,r)&&(n[r]=e[r]);return n};const Idt={icon:fdt,transitionDuration:100,size:"sm",labelPosition:"right"},dD=C.forwardRef((e,t)=>{var n,r;const i=gt("Radio",Idt,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:b,description:E,error:w}=i,x=Adt(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),S=hdt(),P=(n=S==null?void 0:S.size)!=null?n:l,A=e.size?l:P,{classes:O}=Tdt({color:d,size:A,transitionDuration:y,labelPosition:b,error:!!w},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:z,rest:M}=Sf(x),R=Nu(a),D=S?{checked:S.value===M.value,name:(r=M.name)!=null?r:S.name,onChange:S.onChange}:{};return N.createElement(DY,bP(bP({className:s,sx:m,style:o,id:R,size:A,labelPosition:b,label:u,description:E,error:w,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":D.checked||void 0},z),v),N.createElement("div",{className:O.inner},N.createElement("input",bP(bP({ref:t,className:O.radio,type:"radio",id:R,disabled:f},M),D)),N.createElement(g,{className:O.icon,"aria-hidden":!0})))});dD.displayName="@mantine/core/Radio";dD.Group=sIe;var Odt=Object.defineProperty,Pdt=Object.defineProperties,kdt=Object.getOwnPropertyDescriptors,Mce=Object.getOwnPropertySymbols,$dt=Object.prototype.hasOwnProperty,Rdt=Object.prototype.propertyIsEnumerable,Lce=(e,t,n)=>t in e?Odt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wP=(e,t)=>{for(var n in t||(t={}))$dt.call(t,n)&&Lce(e,n,t[n]);if(Mce)for(var n of Mce(t))Rdt.call(t,n)&&Lce(e,n,t[n]);return e},Ndt=(e,t)=>Pdt(e,kdt(t));const o$=4,Fce={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var Ddt=lt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:Ndt(wP(wP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Fce[a in Fce?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:wP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:wP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:o$},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const Mdt=Ddt;var Ldt=Object.defineProperty,hD=Object.getOwnPropertySymbols,uIe=Object.prototype.hasOwnProperty,lIe=Object.prototype.propertyIsEnumerable,jce=(e,t,n)=>t in e?Ldt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fdt=(e,t)=>{for(var n in t||(t={}))uIe.call(t,n)&&jce(e,n,t[n]);if(hD)for(var n of hD(t))lIe.call(t,n)&&jce(e,n,t[n]);return e},jdt=(e,t)=>{var n={};for(var r in e)uIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hD)for(var r of hD(e))t.indexOf(r)<0&&lIe.call(e,r)&&(n[r]=e[r]);return n};const Bdt={disabled:!1,size:"sm",transitionDuration:200},cIe=C.forwardRef((e,t)=>{var n,r,i,s;const o=gt("SegmentedControl",Bdt,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:b,defaultValue:E,orientation:w,unstyled:x}=o,S=jdt(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),P=fs(),A=E6(),O=P.respectReducedMotion?A:!1,z=l.map(ae=>typeof ae=="string"?{label:ae,value:ae}:ae),M=C.useRef(),[R,D]=C.useState(!1),[L,V]=oa({value:f,defaultValue:E,finalValue:Array.isArray(z)&&(s=(i=(n=z.find(ae=>!ae.disabled))==null?void 0:n.value)!=null?i:(r=z[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:B,cx:H}=Mdt({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:O||!R,transitionDuration:y,transitionTimingFunction:v,orientation:w},{classNames:_,styles:b,unstyled:x,name:"SegmentedControl"}),[U,k]=C.useState({width:0,height:0,translate:[0,0]}),$=Nu(c),q=C.useRef({}),[F,j]=x1();dY(()=>{M.current?D(!0):(M.current=!0,D(!1))}),C.useEffect(()=>{if(L in q.current&&F.current){const ae=q.current[L],ce=ae.getBoundingClientRect(),le=ae.offsetWidth/ce.width,ge=ce.width*le||0,ue=ce.height*le||0,Fe=j.width-ae.parentElement.offsetLeft+o$-ge,$e=ae.parentElement.offsetLeft-o$;k({width:ge,height:ue,translate:[P.dir==="rtl"?Fe:$e,ae.parentElement.offsetTop-o$]})}},[L,j]);const Q=z.map(ae=>N.createElement("div",{className:H(B.control,{[B.controlActive]:L===ae.value}),key:ae.value},N.createElement("input",{className:B.input,disabled:u||ae.disabled,type:"radio",name:$,value:ae.value,id:`${$}-${ae.value}`,checked:L===ae.value,onChange:()=>V(ae.value)}),N.createElement("label",{className:H(B.label,{[B.labelActive]:L===ae.value,[B.disabled]:u||ae.disabled}),htmlFor:`${$}-${ae.value}`,ref:ce=>{q.current[ae.value]=ce}},ae.label))),se=Ps(F,t);return z.length===0?null:N.createElement(st,Fdt({className:H(B.root,a),ref:se},S),typeof L=="string"&&R&&N.createElement(st,{component:"span",className:B.active,sx:{width:U.width,height:U.height,transform:`translate(${U.translate[0]}px, ${U.translate[1]}px )`}}),Q)});cIe.displayName="@mantine/core/SegmentedControl";function zdt({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var Udt=lt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const Vdt=Udt;var Hdt=Object.defineProperty,qdt=Object.defineProperties,Wdt=Object.getOwnPropertyDescriptors,pD=Object.getOwnPropertySymbols,fIe=Object.prototype.hasOwnProperty,dIe=Object.prototype.propertyIsEnumerable,Bce=(e,t,n)=>t in e?Hdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cS=(e,t)=>{for(var n in t||(t={}))fIe.call(t,n)&&Bce(e,n,t[n]);if(pD)for(var n of pD(t))dIe.call(t,n)&&Bce(e,n,t[n]);return e},Y9=(e,t)=>qdt(e,Wdt(t)),Gdt=(e,t)=>{var n={};for(var r in e)fIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pD)for(var r of pD(e))t.indexOf(r)<0&&dIe.call(e,r)&&(n[r]=e[r]);return n};function Ydt(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Kdt(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const Xdt={required:!1,size:"sm",shadow:"sm",itemComponent:_Y,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:Ydt,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:Kdt,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:da("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},N6=C.forwardRef((e,t)=>{const n=x2e("Select",Xdt,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:b,filter:E,maxDropdownHeight:w,searchable:x,clearable:S,nothingFound:P,clearButtonLabel:A,limit:O,disabled:z,onSearchChange:M,searchValue:R,rightSection:D,rightSectionWidth:L,creatable:V,getCreateLabel:B,shouldCreate:H,selectOnBlur:U,onCreate:k,dropdownComponent:$,onDropdownClose:q,onDropdownOpen:F,withinPortal:j,switchDirectionOnFlip:Q,zIndex:se,name:ae,dropdownPosition:ce,allowDeselect:le,placeholder:ge,filterDataOnExactSearchMatch:ue,clearButtonTabIndex:Fe,form:$e,positionDependencies:Ge,readOnly:Re}=n,Oe=Gdt(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:Me,cx:Ut,theme:Qe}=Vdt(),[Be,xt]=C.useState(g),[et,ft]=C.useState(-1),dt=C.useRef(),Bt=C.useRef({}),[Dn,he]=C.useState("column"),_e=Dn==="column",{scrollIntoView:Pe,targetRef:it,scrollableRef:Ye}=_Se({duration:0,offset:5,cancelable:!1,isList:!0}),ut=le===void 0?S:le,tt=Ae=>{if(Be!==Ae){xt(Ae);const pt=Ae?F:q;typeof pt=="function"&&pt()}},wt=V&&typeof B=="function";let In=null;const Wt=o.map(Ae=>typeof Ae=="string"?{label:Ae,value:Ae}:Ae),Vt=jxe({data:Wt}),[hr,Yn,ju]=oa({value:a,defaultValue:u,finalValue:null,onChange:l}),Lr=Vt.find(Ae=>Ae.value===hr),[ds,ii]=oa({value:R,defaultValue:(Lr==null?void 0:Lr.label)||"",finalValue:void 0,onChange:M}),Ai=Ae=>{ii(Ae),x&&typeof M=="function"&&M(Ae)},Gr=()=>{var Ae;Re||(Yn(null),ju||Ai(""),(Ae=dt.current)==null||Ae.focus())};C.useEffect(()=>{const Ae=Vt.find(pt=>pt.value===hr);Ae?Ai(Ae.label):(!wt||!hr)&&Ai("")},[hr]),C.useEffect(()=>{Lr&&(!x||!Be)&&Ai(Lr.label)},[Lr==null?void 0:Lr.label]);const yr=Ae=>{if(!Re)if(ut&&(Lr==null?void 0:Lr.value)===Ae.value)Yn(null),tt(!1);else{if(Ae.creatable&&typeof k=="function"){const pt=k(Ae.value);typeof pt<"u"&&pt!==null&&Yn(typeof pt=="string"?pt:pt.value)}else Yn(Ae.value);ju||Ai(Ae.label),ft(-1),tt(!1),dt.current.focus()}},_t=zdt({data:Vt,searchable:x,limit:O,searchValue:ds,filter:E,filterDataOnExactSearchMatch:ue,value:hr});wt&&H(ds,_t)&&(In=B(ds),_t.push({label:ds,value:ds,creatable:!0}));const Fr=(Ae,pt,jt)=>{let At=Ae;for(;jt(At);)if(At=pt(At),!_t[At].disabled)return At;return Ae};Ss(()=>{ft(-1)},[ds]);const Ii=hr?_t.findIndex(Ae=>Ae.value===hr):0,Ji=!Re&&(_t.length>0?Be:Be&&!!P),no=()=>{ft(Ae=>{var pt;const jt=Fr(Ae,At=>At-1,At=>At>0);return it.current=Bt.current[(pt=_t[jt])==null?void 0:pt.value],Ji&&Pe({alignment:_e?"start":"end"}),jt})},Wa=()=>{ft(Ae=>{var pt;const jt=Fr(Ae,At=>At+1,At=>At<_t.length-1);return it.current=Bt.current[(pt=_t[jt])==null?void 0:pt.value],Ji&&Pe({alignment:_e?"end":"start"}),jt})},ne=()=>window.setTimeout(()=>{var Ae;it.current=Bt.current[(Ae=_t[Ii])==null?void 0:Ae.value],Pe({alignment:_e?"end":"start"})},0);Ss(()=>{Ji&&ne()},[Ji]);const J=Ae=>{switch(typeof f=="function"&&f(Ae),Ae.key){case"ArrowUp":{Ae.preventDefault(),Be?_e?no():Wa():(ft(Ii),tt(!0),ne());break}case"ArrowDown":{Ae.preventDefault(),Be?_e?Wa():no():(ft(Ii),tt(!0),ne());break}case"Home":{if(!x){Ae.preventDefault(),Be||tt(!0);const pt=_t.findIndex(jt=>!jt.disabled);ft(pt),Ji&&Pe({alignment:_e?"end":"start"})}break}case"End":{if(!x){Ae.preventDefault(),Be||tt(!0);const pt=_t.map(jt=>!!jt.disabled).lastIndexOf(!1);ft(pt),Ji&&Pe({alignment:_e?"end":"start"})}break}case"Escape":{Ae.preventDefault(),tt(!1),ft(-1);break}case" ":{x||(Ae.preventDefault(),_t[et]&&Be?yr(_t[et]):(tt(!0),ft(Ii),ne()));break}case"Enter":x||Ae.preventDefault(),_t[et]&&Be&&(Ae.preventDefault(),yr(_t[et]))}},ie=Ae=>{typeof d=="function"&&d(Ae);const pt=Vt.find(jt=>jt.value===hr);U&&_t[et]&&Be&&yr(_t[et]),Ai((pt==null?void 0:pt.label)||""),tt(!1)},ve=Ae=>{typeof h=="function"&&h(Ae),x&&tt(!0)},ye=Ae=>{Re||(Ai(Ae.currentTarget.value),S&&Ae.currentTarget.value===""&&Yn(null),ft(-1),tt(!0))},yt=()=>{Re||(tt(!Be),hr&&!Be&&ft(Ii))};return N.createElement(us.Wrapper,Y9(cS({},i),{__staticSelector:"Select"}),N.createElement($g,{opened:Ji,transition:p,transitionDuration:m,shadow:"sm",withinPortal:j,__staticSelector:"Select",onDirectionChange:he,switchDirectionOnFlip:Q,zIndex:se,dropdownPosition:ce,positionDependencies:Ge,classNames:_,styles:b,unstyled:v},N.createElement($g.Target,null,N.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":Ji?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":Ji,onMouseLeave:()=>ft(-1),tabIndex:-1},N.createElement("input",{type:"hidden",name:ae,value:hr||"",form:$e,disabled:z}),N.createElement(us,cS(Y9(cS(cS({autoComplete:"off",type:"search"},r),Oe),{ref:Ps(t,dt),onKeyDown:J,__staticSelector:"Select",value:ds,placeholder:ge,onChange:ye,"aria-autocomplete":"list","aria-controls":Ji?`${r.id}-items`:null,"aria-activedescendant":et>=0?`${r.id}-${et}`:null,onMouseDown:yt,onBlur:ie,onFocus:ve,readOnly:!x||Re,disabled:z,"data-mantine-stop-propagation":Ji,name:null,classNames:Y9(cS({},_),{input:Ut({[Me.input]:!x},_==null?void 0:_.input)})}),OAe({theme:Qe,rightSection:D,rightSectionWidth:L,styles:b,size:r.size,shouldClear:S&&!!Lr,clearButtonLabel:A,onClear:Gr,error:i.error,clearButtonTabIndex:Fe,disabled:z,readOnly:Re}))))),N.createElement($g.Dropdown,{component:$||I6,maxHeight:w,direction:Dn,id:r.id,innerRef:Ye,__staticSelector:"Select",classNames:_,styles:b},N.createElement(vY,{data:_t,hovered:et,classNames:_,styles:b,isItemSelected:Ae=>Ae===hr,uuid:r.id,__staticSelector:"Select",onItemHover:ft,onItemSelect:yr,itemsRefs:Bt,itemComponent:c,size:r.size,nothingFound:P,creatable:wt&&!!In,createLabel:In,"aria-label":i.label,unstyled:v}))))});N6.displayName="@mantine/core/Select";function mD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function SU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var Qdt=Object.defineProperty,Jdt=Object.defineProperties,Zdt=Object.getOwnPropertyDescriptors,zce=Object.getOwnPropertySymbols,eht=Object.prototype.hasOwnProperty,tht=Object.prototype.propertyIsEnumerable,Uce=(e,t,n)=>t in e?Qdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nht=(e,t)=>{for(var n in t||(t={}))eht.call(t,n)&&Uce(e,n,t[n]);if(zce)for(var n of zce(t))tht.call(t,n)&&Uce(e,n,t[n]);return e},rht=(e,t)=>Jdt(e,Zdt(t));const uu={xs:4,sm:6,md:8,lg:10,xl:12};var iht=lt((e,{size:t,disabled:n})=>({root:rht(nht({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:uu,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const sht=iht;var oht=Object.defineProperty,aht=Object.defineProperties,uht=Object.getOwnPropertyDescriptors,Vce=Object.getOwnPropertySymbols,lht=Object.prototype.hasOwnProperty,cht=Object.prototype.propertyIsEnumerable,Hce=(e,t,n)=>t in e?oht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fht=(e,t)=>{for(var n in t||(t={}))lht.call(t,n)&&Hce(e,n,t[n]);if(Vce)for(var n of Vce(t))cht.call(t,n)&&Hce(e,n,t[n]);return e},dht=(e,t)=>aht(e,uht(t)),hht=lt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:dht(fht({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:uu,size:n})*2,width:i||e.fn.size({sizes:uu,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const pht=hht,gD=C.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:b,unstyled:E,thumbSize:w},x)=>{const{classes:S,cx:P,theme:A}=pht({color:a,size:c,disabled:b,thumbSize:w},{classNames:u,styles:l,unstyled:E,name:"Slider"}),[O,z]=C.useState(!1),M=p||s||O||v;return N.createElement(st,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:x,className:P(S.thumb,{[S.dragging]:s}),onFocus:()=>{z(!0),typeof g=="function"&&g()},onBlur:()=>{z(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:R=>R.stopPropagation(),style:{[A.dir==="rtl"?"right":"left"]:`${r}%`}},_,N.createElement(nI,{mounted:i!=null&&M,duration:d,transition:f,timingFunction:h||A.transitionTimingFunction},R=>N.createElement("div",{style:R,className:S.label},i)))});gD.displayName="@mantine/core/SliderThumb";function mht({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var ght=lt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:uu})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:uu,size:t}),width:e.fn.size({sizes:uu,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:uu,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));const yht=ght;function hIe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=yht({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>N.createElement(st,{className:h.markWrapper,sx:{left:`${mD({value:g.value,min:r,max:i})}%`},key:y},N.createElement("div",{className:p(h.mark,{[h.markFilled]:mht({mark:g,value:s,offset:u,inverted:d})})}),g.label&&N.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return N.createElement("div",null,m)}hIe.displayName="@mantine/core/SliderMarks";var vht=lt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:uu,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:uu}),marginLeft:e.fn.size({size:n,sizes:uu}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:uu}),left:-e.fn.size({size:n,sizes:uu}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}}));const _ht=vht;var bht=Object.defineProperty,wht=Object.defineProperties,Eht=Object.getOwnPropertyDescriptors,yD=Object.getOwnPropertySymbols,pIe=Object.prototype.hasOwnProperty,mIe=Object.prototype.propertyIsEnumerable,qce=(e,t,n)=>t in e?bht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xht=(e,t)=>{for(var n in t||(t={}))pIe.call(t,n)&&qce(e,n,t[n]);if(yD)for(var n of yD(t))mIe.call(t,n)&&qce(e,n,t[n]);return e},Sht=(e,t)=>wht(e,Eht(t)),Tht=(e,t)=>{var n={};for(var r in e)pIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yD)for(var r of yD(e))t.indexOf(r)<0&&mIe.call(e,r)&&(n[r]=e[r]);return n};function BY(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=Tht(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=_ht({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return N.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},N.createElement(st,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:uu})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:uu})}px)`})}),u,N.createElement(hIe,Sht(xht({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}BY.displayName="@mantine/core/SliderTrack";var Cht=Object.defineProperty,Aht=Object.defineProperties,Iht=Object.getOwnPropertyDescriptors,vD=Object.getOwnPropertySymbols,gIe=Object.prototype.hasOwnProperty,yIe=Object.prototype.propertyIsEnumerable,Wce=(e,t,n)=>t in e?Cht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oht=(e,t)=>{for(var n in t||(t={}))gIe.call(t,n)&&Wce(e,n,t[n]);if(vD)for(var n of vD(t))yIe.call(t,n)&&Wce(e,n,t[n]);return e},Pht=(e,t)=>Aht(e,Iht(t)),kht=(e,t)=>{var n={};for(var r in e)gIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vD)for(var r of vD(e))t.indexOf(r)<0&&yIe.call(e,r)&&(n[r]=e[r]);return n};const zY=C.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=kht(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=sht({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return N.createElement(st,Pht(Oht({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});zY.displayName="@mantine/core/SliderRoot";var $ht=Object.defineProperty,Rht=Object.defineProperties,Nht=Object.getOwnPropertyDescriptors,_D=Object.getOwnPropertySymbols,vIe=Object.prototype.hasOwnProperty,_Ie=Object.prototype.propertyIsEnumerable,Gce=(e,t,n)=>t in e?$ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dht=(e,t)=>{for(var n in t||(t={}))vIe.call(t,n)&&Gce(e,n,t[n]);if(_D)for(var n of _D(t))_Ie.call(t,n)&&Gce(e,n,t[n]);return e},Mht=(e,t)=>Rht(e,Nht(t)),Lht=(e,t)=>{var n={};for(var r in e)vIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_D)for(var r of _D(e))t.indexOf(r)<0&&_Ie.call(e,r)&&(n[r]=e[r]);return n};const Fht={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},UY=C.forwardRef((e,t)=>{const n=gt("Slider",Fht,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,thumbChildren:P,disabled:A,unstyled:O,thumbSize:z,scale:M,inverted:R}=n,D=Lht(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),L=fs(),[V,B]=C.useState(!1),[H,U]=oa({value:typeof o=="number"?af(o,f,d):o,defaultValue:typeof m=="number"?af(m,f,d):m,finalValue:af(0,f,d),onChange:a}),k=C.useRef(H),$=C.useRef(),q=mD({value:H,min:f,max:d}),F=M(H),j=typeof v=="function"?v(F):v,Q=C.useCallback(({x:ge})=>{if(!A){const ue=SU({value:ge,min:f,max:d,step:h,precision:p});U(ue),k.current=ue}},[A,f,d,h,p]),{ref:se,active:ae}=vSe(Q,{onScrubEnd:()=>u==null?void 0:u(k.current)},L.dir),ce=ge=>{ge.stopPropagation()},le=ge=>{if(!A)switch(ge.key){case"ArrowUp":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(H+h,f),d);u==null||u(ue),U(ue);break}case"ArrowRight":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(L.dir==="rtl"?H-h:H+h,f),d);u==null||u(ue),U(ue);break}case"ArrowDown":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(H-h,f),d);u==null||u(ue),U(ue);break}case"ArrowLeft":{ge.preventDefault(),$.current.focus();const ue=Math.min(Math.max(L.dir==="rtl"?H+h:H-h,f),d);u==null||u(ue),U(ue);break}case"Home":{ge.preventDefault(),$.current.focus(),u==null||u(f),U(f);break}case"End":{ge.preventDefault(),$.current.focus(),u==null||u(d),U(d);break}}};return N.createElement(zY,Mht(Dht({},D),{size:l,ref:Ps(se,t),onKeyDownCapture:le,onMouseDownCapture:()=>{var ge;return(ge=se.current)==null?void 0:ge.focus()},classNames:r,styles:i,disabled:A,unstyled:O}),N.createElement(BY,{inverted:R,offset:0,filled:q,marks:y,size:l,radius:c,color:s,min:f,max:d,value:F,onChange:U,onMouseEnter:S?()=>B(!0):void 0,onMouseLeave:S?()=>B(!1):void 0,classNames:r,styles:i,disabled:A,unstyled:O},N.createElement(gD,{max:d,min:f,value:F,position:q,dragging:ae,color:s,size:l,label:j,ref:$,onMouseDown:ce,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,classNames:r,styles:i,thumbLabel:x,showLabelOnHover:S&&V,disabled:A,unstyled:O,thumbSize:z},P)),N.createElement("input",{type:"hidden",name:g,value:F}))});UY.displayName="@mantine/core/Slider";function jht(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var Bht=Object.defineProperty,zht=Object.defineProperties,Uht=Object.getOwnPropertyDescriptors,bD=Object.getOwnPropertySymbols,bIe=Object.prototype.hasOwnProperty,wIe=Object.prototype.propertyIsEnumerable,Yce=(e,t,n)=>t in e?Bht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K9=(e,t)=>{for(var n in t||(t={}))bIe.call(t,n)&&Yce(e,n,t[n]);if(bD)for(var n of bD(t))wIe.call(t,n)&&Yce(e,n,t[n]);return e},X9=(e,t)=>zht(e,Uht(t)),Vht=(e,t)=>{var n={};for(var r in e)bIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bD)for(var r of bD(e))t.indexOf(r)<0&&wIe.call(e,r)&&(n[r]=e[r]);return n};const Hht={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},TU=C.forwardRef((e,t)=>{const n=gt("RangeSlider",Hht,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,thumbFromLabel:S,thumbToLabel:P,showLabelOnHover:A,thumbChildren:O,disabled:z,unstyled:M,thumbSize:R,scale:D,inverted:L}=n,V=Vht(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),B=fs(),[H,U]=C.useState(-1),[k,$]=C.useState(!1),[q,F]=oa({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),j=C.useRef(q),Q=C.useRef([]),se=C.useRef(void 0),ae=[mD({value:q[0],min:f,max:d}),mD({value:q[1],min:f,max:d})],ce=Qe=>{F(Qe),j.current=Qe};C.useEffect(()=>{Array.isArray(o)&&(j.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const le=(Qe,Be,xt)=>{const et=[...j.current];et[Be]=Qe,Be===0&&(Qe>et[1]-(h-1e-9)&&(et[1]=Math.min(Qe+h,d)),Qe>(d-(h-1e-9)||f)&&(et[Be]=j.current[Be])),Be===1&&(Qe<et[0]+h&&(et[0]=Math.max(Qe-h,f)),Qe<et[0]+h&&(et[Be]=j.current[Be])),ce(et),xt&&(u==null||u(j.current))},ge=Qe=>{if(!z){const Be=SU({value:Qe,min:f,max:d,step:p,precision:m});le(Be,se.current,!1)}},{ref:ue,active:Fe}=vSe(({x:Qe})=>ge(Qe),{onScrubEnd:()=>u==null?void 0:u(j.current)},B.dir);function $e(Qe,Be){Qe.stopPropagation(),se.current=Be}const Ge=Qe=>{ue.current.focus();const Be=ue.current.getBoundingClientRect(),xt=jht(Qe.nativeEvent),et=SU({value:xt-Be.left,max:d,min:f,step:p,containerWidth:Be.width}),ft=Math.abs(q[0]-et)>Math.abs(q[1]-et)?1:0,dt=B.dir==="ltr"?ft:ft===1?0:1;se.current=dt},Re=()=>H!==1&&H!==0?(U(0),0):H,Oe=Qe=>{if(!z)switch(Qe.key){case"ArrowUp":{Qe.preventDefault();const Be=Re();Q.current[Be].focus(),le(Math.min(Math.max(j.current[Be]+p,f),d),Be,!0);break}case"ArrowRight":{Qe.preventDefault();const Be=Re();Q.current[Be].focus(),le(Math.min(Math.max(B.dir==="rtl"?j.current[Be]-p:j.current[Be]+p,f),d),Be,!0);break}case"ArrowDown":{Qe.preventDefault();const Be=Re();Q.current[Be].focus(),le(Math.min(Math.max(j.current[Be]-p,f),d),Be,!0);break}case"ArrowLeft":{Qe.preventDefault();const Be=Re();Q.current[Be].focus(),le(Math.min(Math.max(B.dir==="rtl"?j.current[Be]+p:j.current[Be]-p,f),d),Be,!0);break}}},Me={max:d,min:f,color:s,size:l,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,onBlur:()=>U(-1),classNames:r,styles:i},Ut=Array.isArray(O);return N.createElement(zY,X9(K9({},V),{size:l,ref:Ps(ue,t),onTouchStartCapture:Ge,onTouchEndCapture:()=>{se.current=-1},onMouseDownCapture:Ge,onMouseUpCapture:()=>{se.current=-1},onKeyDownCapture:Oe,styles:i,classNames:r,disabled:z,unstyled:M}),N.createElement(BY,{offset:ae[0],marksOffset:q[0],filled:ae[1]-ae[0],marks:v,inverted:L,size:l,radius:c,color:s,min:f,max:d,value:q[1],styles:i,classNames:r,onMouseEnter:A?()=>$(!0):void 0,onMouseLeave:A?()=>$(!1):void 0,onChange:Qe=>{const Be=Math.abs(q[0]-Qe)>Math.abs(q[1]-Qe)?1:0,xt=[...q];xt[Be]=Qe,ce(xt)},disabled:z,unstyled:M},N.createElement(gD,X9(K9({},Me),{value:D(q[0]),position:ae[0],dragging:Fe,label:typeof _=="function"?_(D(q[0])):_,ref:Qe=>{Q.current[0]=Qe},thumbLabel:S,onMouseDown:Qe=>$e(Qe,0),onFocus:()=>U(0),showLabelOnHover:A&&k,disabled:z,unstyled:M,thumbSize:R}),Ut?O[0]:O),N.createElement(gD,X9(K9({},Me),{thumbLabel:P,value:D(q[1]),position:ae[1],dragging:Fe,label:typeof _=="function"?_(D(q[1])):_,ref:Qe=>{Q.current[1]=Qe},onMouseDown:Qe=>$e(Qe,1),onFocus:()=>U(1),showLabelOnHover:A&&k,disabled:z,unstyled:M,thumbSize:R}),Ut?O[1]:O)),N.createElement("input",{type:"hidden",name:`${y}_from`,value:q[0]}),N.createElement("input",{type:"hidden",name:`${y}_to`,value:q[1]}))});TU.displayName="@mantine/core/RangeSlider";var qht=Object.defineProperty,wD=Object.getOwnPropertySymbols,EIe=Object.prototype.hasOwnProperty,xIe=Object.prototype.propertyIsEnumerable,Kce=(e,t,n)=>t in e?qht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wht=(e,t)=>{for(var n in t||(t={}))EIe.call(t,n)&&Kce(e,n,t[n]);if(wD)for(var n of wD(t))xIe.call(t,n)&&Kce(e,n,t[n]);return e},Ght=(e,t)=>{var n={};for(var r in e)EIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wD)for(var r of wD(e))t.indexOf(r)<0&&xIe.call(e,r)&&(n[r]=e[r]);return n};const Yht={w:0,h:0},I1=C.forwardRef((e,t)=>{const n=gt("Space",Yht,e),{w:r,h:i,sx:s}=n,o=Ght(n,["w","h","sx"]);return N.createElement(st,Wht({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...Qg(s)]},o))});I1.displayName="@mantine/core/Space";var Kht=lt((e,{transitionDuration:t})=>({control:{},root:{position:"relative"},content:{display:"flex",flexDirection:"column",overflow:"hidden",transitionProperty:"max-height",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${t}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}}));const Xht=Kht;var Qht=Object.defineProperty,ED=Object.getOwnPropertySymbols,SIe=Object.prototype.hasOwnProperty,TIe=Object.prototype.propertyIsEnumerable,Xce=(e,t,n)=>t in e?Qht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jht=(e,t)=>{for(var n in t||(t={}))SIe.call(t,n)&&Xce(e,n,t[n]);if(ED)for(var n of ED(t))TIe.call(t,n)&&Xce(e,n,t[n]);return e},Zht=(e,t)=>{var n={};for(var r in e)SIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ED)for(var r of ED(e))t.indexOf(r)<0&&TIe.call(e,r)&&(n[r]=e[r]);return n};const ept={maxHeight:100,transitionDuration:200,initialState:!1},CIe=C.forwardRef((e,t)=>{const n=gt("Spoiler",ept,e),{className:r,children:i,maxHeight:s,hideLabel:o,showLabel:a,transitionDuration:u,controlRef:l,initialState:c,classNames:f,styles:d,unstyled:h}=n,p=Zht(n,["className","children","maxHeight","hideLabel","showLabel","transitionDuration","controlRef","initialState","classNames","styles","unstyled"]),{classes:m,cx:g}=Xht({transitionDuration:u},{classNames:f,styles:d,unstyled:h,name:"Spoiler"}),[y,v]=C.useState(c),[_,b]=C.useState(c),{ref:E,height:w}=aJe(),x=y?o:a;return C.useEffect(()=>{b(s<w)},[w,s,i]),N.createElement(st,Jht({className:g(m.root,r),ref:t},p),N.createElement("div",{className:m.content,style:{maxHeight:y?w||void 0:s}},N.createElement("div",{ref:E},i)),_&&N.createElement(x6,{component:"button",ref:l,onClick:()=>v(S=>!S),className:m.control},x))});CIe.displayName="@mantine/core/Spoiler";var tpt=Object.defineProperty,npt=Object.defineProperties,rpt=Object.getOwnPropertyDescriptors,Qce=Object.getOwnPropertySymbols,ipt=Object.prototype.hasOwnProperty,spt=Object.prototype.propertyIsEnumerable,Jce=(e,t,n)=>t in e?tpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,opt=(e,t)=>{for(var n in t||(t={}))ipt.call(t,n)&&Jce(e,n,t[n]);if(Qce)for(var n of Qce(t))spt.call(t,n)&&Jce(e,n,t[n]);return e},apt=(e,t)=>npt(e,rpt(t)),upt=lt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:s,withColumnBorders:o})=>{const a=`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:apt(opt({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:s?a:"","& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:e.fn.size({size:i,sizes:e.fontSizes}),padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},"& thead tr th":{borderBottom:a},"& tfoot tr th":{borderTop:a},"& tbody tr td":{padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`,borderBottom:a,fontSize:e.fn.size({size:i,sizes:e.fontSizes})},"& tbody tr:last-of-type td":{borderBottom:"none"},"& th + th, & td + td":{borderLeft:o?a:""},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const lpt=upt;var cpt=Object.defineProperty,fpt=Object.defineProperties,dpt=Object.getOwnPropertyDescriptors,xD=Object.getOwnPropertySymbols,AIe=Object.prototype.hasOwnProperty,IIe=Object.prototype.propertyIsEnumerable,Zce=(e,t,n)=>t in e?cpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hpt=(e,t)=>{for(var n in t||(t={}))AIe.call(t,n)&&Zce(e,n,t[n]);if(xD)for(var n of xD(t))IIe.call(t,n)&&Zce(e,n,t[n]);return e},ppt=(e,t)=>fpt(e,dpt(t)),mpt=(e,t)=>{var n={};for(var r in e)AIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xD)for(var r of xD(e))t.indexOf(r)<0&&IIe.call(e,r)&&(n[r]=e[r]);return n};const gpt={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},VY=C.forwardRef((e,t)=>{const n=gt("Table",gpt,e),{className:r,children:i,striped:s,highlightOnHover:o,captionSide:a,horizontalSpacing:u,verticalSpacing:l,fontSize:c,unstyled:f,withBorder:d,withColumnBorders:h}=n,p=mpt(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders"]),{classes:m,cx:g}=lpt({captionSide:a,verticalSpacing:l,horizontalSpacing:u,fontSize:c,withBorder:d,withColumnBorders:h},{unstyled:f,name:"Table"});return N.createElement(st,ppt(hpt({},p),{component:"table",ref:t,className:g(m.root,r),"data-striped":s||void 0,"data-hover":o||void 0}),i)});VY.displayName="@mantine/core/Table";const CU={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[ypt,HY]=eY(CU.context);var vpt=Object.defineProperty,efe=Object.getOwnPropertySymbols,_pt=Object.prototype.hasOwnProperty,bpt=Object.prototype.propertyIsEnumerable,tfe=(e,t,n)=>t in e?vpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wpt=(e,t)=>{for(var n in t||(t={}))_pt.call(t,n)&&tfe(e,n,t[n]);if(efe)for(var n of efe(t))bpt.call(t,n)&&tfe(e,n,t[n]);return e};function Ept({variant:e,orientation:t,inverted:n,placement:r},i){const s=t==="vertical";return e==="default"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`2px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="outline"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`1px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="pills"?{gap:`calc(${i.spacing.sm}px / 2)`}:{}}var xpt=lt((e,t)=>{const n=t.orientation==="vertical";return{tabsList:wpt({display:"flex",flexWrap:"wrap",flexDirection:n?"column":"row",justifyContent:aCe[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},Ept(t,e))}});const Spt=xpt;var Tpt=Object.defineProperty,Cpt=Object.defineProperties,Apt=Object.getOwnPropertyDescriptors,SD=Object.getOwnPropertySymbols,OIe=Object.prototype.hasOwnProperty,PIe=Object.prototype.propertyIsEnumerable,nfe=(e,t,n)=>t in e?Tpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ipt=(e,t)=>{for(var n in t||(t={}))OIe.call(t,n)&&nfe(e,n,t[n]);if(SD)for(var n of SD(t))PIe.call(t,n)&&nfe(e,n,t[n]);return e},Opt=(e,t)=>Cpt(e,Apt(t)),Ppt=(e,t)=>{var n={};for(var r in e)OIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SD)for(var r of SD(e))t.indexOf(r)<0&&PIe.call(e,r)&&(n[r]=e[r]);return n};const kIe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,grow:s=!1,position:o="left"}=n,a=Ppt(n,["children","className","grow","position"]);const{orientation:u,variant:l,color:c,radius:f,inverted:d,placement:h}=HY(),{classNames:p,styles:m,unstyled:g}=F0(),{classes:y,cx:v}=Spt({orientation:u,grow:s,variant:l,color:c,position:o,radius:f,inverted:d,placement:h},{name:"Tabs",unstyled:g,classNames:p,styles:m});return N.createElement(st,Opt(Ipt({},a),{className:v(y.tabsList,i),ref:t,role:"tablist","aria-orientation":u}),r)});kIe.displayName="@mantine/core/TabsList";var kpt=lt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}}));const $pt=kpt;var Rpt=Object.defineProperty,Npt=Object.defineProperties,Dpt=Object.getOwnPropertyDescriptors,TD=Object.getOwnPropertySymbols,$Ie=Object.prototype.hasOwnProperty,RIe=Object.prototype.propertyIsEnumerable,rfe=(e,t,n)=>t in e?Rpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mpt=(e,t)=>{for(var n in t||(t={}))$Ie.call(t,n)&&rfe(e,n,t[n]);if(TD)for(var n of TD(t))RIe.call(t,n)&&rfe(e,n,t[n]);return e},Lpt=(e,t)=>Npt(e,Dpt(t)),Fpt=(e,t)=>{var n={};for(var r in e)$Ie.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TD)for(var r of TD(e))t.indexOf(r)<0&&RIe.call(e,r)&&(n[r]=e[r]);return n};const NIe=C.forwardRef((e,t)=>{var n=e,{value:r,children:i,sx:s,className:o}=n,a=Fpt(n,["value","children","sx","className"]);const u=HY(),{classNames:l,styles:c,unstyled:f}=F0(),{classes:d,cx:h}=$pt({orientation:u.orientation,variant:u.variant,color:u.color,radius:u.radius,inverted:u.inverted,placement:u.placement},{name:"Tabs",unstyled:f,classNames:l,styles:c}),p=u.value===r,m=u.keepMounted||p?i:null;return N.createElement(st,Lpt(Mpt({},a),{ref:t,sx:[{display:p?void 0:"none"},...Qg(s)],className:h(d.panel,o),role:"tabpanel",id:u.getPanelId(r),"aria-labelledby":u.getTabId(r)}),m)});NIe.displayName="@mantine/core/TabsPanel";var jpt=Object.defineProperty,Bpt=Object.defineProperties,zpt=Object.getOwnPropertyDescriptors,ife=Object.getOwnPropertySymbols,Upt=Object.prototype.hasOwnProperty,Vpt=Object.prototype.propertyIsEnumerable,sfe=(e,t,n)=>t in e?jpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mb=(e,t)=>{for(var n in t||(t={}))Upt.call(t,n)&&sfe(e,n,t[n]);if(ife)for(var n of ife(t))Vpt.call(t,n)&&sfe(e,n,t[n]);return e},ofe=(e,t)=>Bpt(e,zpt(t));function Hpt(e,{variant:t,orientation:n,color:r,radius:i,inverted:s,placement:o}){const a=n==="vertical",u=e.fn.variant({color:r,variant:"filled"}),l=e.fn.radius(i),c=n==="vertical"?o==="left"?`${l}px 0 0 ${l}px`:` 0 ${l}px ${l}px 0`:s?`0 0 ${l}px ${l}px`:`${l}px ${l}px 0 0`;return t==="default"?ofe(mb({[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"2px solid transparent",[a?o==="left"?"marginRight":"marginLeft":s?"marginTop":"marginBottom"]:-2,borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":mb({borderColor:u.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:u.background}))}):t==="outline"?{borderRadius:c,border:"1px solid transparent",[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:a?0:s?"unset":-1,top:a?0:s?-1:"unset",[a?"width":"height"]:1,right:a?o==="left"?-1:"unset":0,left:a?o==="left"?"unset":-1:0}}}:t==="pills"?ofe(mb({borderRadius:e.fn.radius(i)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":mb({backgroundColor:u.background,color:e.white},e.fn.hover({backgroundColor:u.background}))}):{}}var qpt=lt((e,t)=>({tabLabel:{},tab:mb({position:"relative",padding:`${e.spacing.xs}px ${e.spacing.md}px`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":mb({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},Hpt(e,t)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:7}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:7}}}));const Wpt=qpt;var Gpt=Object.defineProperty,Ypt=Object.defineProperties,Kpt=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,DIe=Object.prototype.hasOwnProperty,MIe=Object.prototype.propertyIsEnumerable,afe=(e,t,n)=>t in e?Gpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xpt=(e,t)=>{for(var n in t||(t={}))DIe.call(t,n)&&afe(e,n,t[n]);if(CD)for(var n of CD(t))MIe.call(t,n)&&afe(e,n,t[n]);return e},Qpt=(e,t)=>Ypt(e,Kpt(t)),Jpt=(e,t)=>{var n={};for(var r in e)DIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CD)for(var r of CD(e))t.indexOf(r)<0&&MIe.call(e,r)&&(n[r]=e[r]);return n};const LIe=C.forwardRef((e,t)=>{var n=e,{value:r,children:i,onKeyDown:s,onClick:o,className:a,icon:u,rightSection:l,color:c}=n,f=Jpt(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]);const d=HY(),{classNames:h,styles:p,unstyled:m}=F0(),g=!!u,y=!!l,{theme:v,classes:_,cx:b}=Wpt({withIcon:g||y&&!i,withRightSection:y||g&&!i,orientation:d.orientation,color:c||d.color,variant:d.variant,radius:d.radius,inverted:d.inverted,placement:d.placement},{name:"Tabs",unstyled:m,classNames:h,styles:p}),E=r===d.value,w=x=>{d.onTabChange(d.allowTabDeactivation&&r===d.value?null:r),o==null||o(x)};return N.createElement(sm,Qpt(Xpt({},f),{unstyled:m,className:b(_.tab,a),"data-active":E||void 0,ref:t,type:"button",role:"tab",id:d.getTabId(r),"aria-selected":E,tabIndex:E||d.value===null?0:-1,"aria-controls":d.getPanelId(r),onClick:w,onKeyDown:Fxe({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:d.activateTabWithKeyboard,loop:d.loop,dir:v.dir,orientation:d.orientation,onKeyDown:s})}),u&&N.createElement("div",{className:_.tabIcon},u),i&&N.createElement("div",{className:_.tabLabel},i),l&&N.createElement("div",{className:_.tabRightSection},l))});LIe.displayName="@mantine/core/Tab";function FIe({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:s,id:o,activateTabWithKeyboard:a,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,placement:h,keepMounted:p=!0}){const m=Nu(o),[g,y]=oa({value:t,defaultValue:e,finalValue:null,onChange:n});return N.createElement(ypt,{value:{placement:h,value:g,orientation:r,id:m,loop:s,activateTabWithKeyboard:a,getTabId:boe(`${m}-tab`,CU.value),getPanelId:boe(`${m}-panel`,CU.value),onTabChange:y,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,keepMounted:p}},i)}FIe.displayName="@mantine/core/TabsProvider";var Zpt=lt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}}));const emt=Zpt;var tmt=Object.defineProperty,nmt=Object.defineProperties,rmt=Object.getOwnPropertyDescriptors,AD=Object.getOwnPropertySymbols,jIe=Object.prototype.hasOwnProperty,BIe=Object.prototype.propertyIsEnumerable,ufe=(e,t,n)=>t in e?tmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,imt=(e,t)=>{for(var n in t||(t={}))jIe.call(t,n)&&ufe(e,n,t[n]);if(AD)for(var n of AD(t))BIe.call(t,n)&&ufe(e,n,t[n]);return e},smt=(e,t)=>nmt(e,rmt(t)),omt=(e,t)=>{var n={};for(var r in e)jIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AD)for(var r of AD(e))t.indexOf(r)<0&&BIe.call(e,r)&&(n[r]=e[r]);return n};const amt={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Ll=C.forwardRef((e,t)=>{const n=gt("Tabs",amt,e),{defaultValue:r,value:i,orientation:s,loop:o,activateTabWithKeyboard:a,allowTabDeactivation:u,children:l,id:c,onTabChange:f,variant:d,color:h,className:p,unstyled:m,classNames:g,styles:y,radius:v,inverted:_,keepMounted:b,placement:E}=n,w=omt(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:x,cx:S}=emt({orientation:s,color:h,variant:d,radius:v,inverted:_,placement:E},{unstyled:m,name:"Tabs",classNames:g,styles:y});return N.createElement(fY,{classNames:g,styles:y,unstyled:m},N.createElement(FIe,{activateTabWithKeyboard:a,defaultValue:r,orientation:s,onTabChange:f,value:i,id:c,loop:o,allowTabDeactivation:u,color:h,variant:d,radius:v,inverted:_,keepMounted:b,placement:E},N.createElement(st,smt(imt({},w),{className:S(x.root,p),id:c,ref:t}),l)))});Ll.List=kIe;Ll.Tab=LIe;Ll.Panel=NIe;Ll.displayName="@mantine/core/Tabs";var umt=Object.defineProperty,lmt=Object.defineProperties,cmt=Object.getOwnPropertyDescriptors,lfe=Object.getOwnPropertySymbols,fmt=Object.prototype.hasOwnProperty,dmt=Object.prototype.propertyIsEnumerable,cfe=(e,t,n)=>t in e?umt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hmt=(e,t)=>{for(var n in t||(t={}))fmt.call(t,n)&&cfe(e,n,t[n]);if(lfe)for(var n of lfe(t))dmt.call(t,n)&&cfe(e,n,t[n]);return e},pmt=(e,t)=>lmt(e,cmt(t));function mmt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function gmt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var ymt=lt((e,{element:t,weight:n,size:r,inline:i})=>({root:pmt(hmt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:mmt(r,t,e),lineHeight:i?1:gmt(r,t,e),margin:0})}));const vmt=ymt;var _mt=Object.defineProperty,ID=Object.getOwnPropertySymbols,zIe=Object.prototype.hasOwnProperty,UIe=Object.prototype.propertyIsEnumerable,ffe=(e,t,n)=>t in e?_mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bmt=(e,t)=>{for(var n in t||(t={}))zIe.call(t,n)&&ffe(e,n,t[n]);if(ID)for(var n of ID(t))UIe.call(t,n)&&ffe(e,n,t[n]);return e},wmt=(e,t)=>{var n={};for(var r in e)zIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ID)for(var r of ID(e))t.indexOf(r)<0&&UIe.call(e,r)&&(n[r]=e[r]);return n};const Emt={order:1},Wo=C.forwardRef((e,t)=>{const n=gt("Title",Emt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=wmt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=vmt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?N.createElement(ct,bmt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});Wo.displayName="@mantine/core/Title";const qY=C.createContext(null);qY.displayName="@mantine/modals/ModalsContext";function xmt(){const e=C.useContext(qY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}var Smt=Object.defineProperty,Tmt=Object.defineProperties,Cmt=Object.getOwnPropertyDescriptors,dfe=Object.getOwnPropertySymbols,Amt=Object.prototype.hasOwnProperty,Imt=Object.prototype.propertyIsEnumerable,hfe=(e,t,n)=>t in e?Smt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q9=(e,t)=>{for(var n in t||(t={}))Amt.call(t,n)&&hfe(e,n,t[n]);if(dfe)for(var n of dfe(t))Imt.call(t,n)&&hfe(e,n,t[n]);return e},pfe=(e,t)=>Tmt(e,Cmt(t));function Omt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=xmt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return N.createElement(N.Fragment,null,l&&N.createElement(st,{mb:"md"},l),N.createElement(Co,Q9({position:"right"},o),N.createElement(Xr,pfe(Q9({variant:"default"},t),{onClick:h}),(t==null?void 0:t.children)||c),N.createElement(Xr,pfe(Q9({},n),{onClick:p}),(n==null?void 0:n.children)||f)))}function Pmt(e,t){switch(t.type){case"OPEN":return{current:t.payload,modals:[...e.modals,t.payload]};case"CLOSE":{const n=e.modals.filter(r=>r.id!==t.payload);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return{current:e.current,modals:[]};default:return e}}function kmt(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}const $mt=typeof window<"u"?C.useLayoutEffect:C.useEffect;function Rmt(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});$mt(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>kmt(`${e}:${String(r)}`,i[0])}return[t,n]}const[Nmt,rI]=Rmt("mantine-modals");rI("openModal");rI("closeModal");rI("closeAllModals");const Dmt=rI("openConfirmModal");rI("openContextModal");var Mmt=Object.defineProperty,Lmt=Object.defineProperties,Fmt=Object.getOwnPropertyDescriptors,OD=Object.getOwnPropertySymbols,VIe=Object.prototype.hasOwnProperty,HIe=Object.prototype.propertyIsEnumerable,mfe=(e,t,n)=>t in e?Mmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a$=(e,t)=>{for(var n in t||(t={}))VIe.call(t,n)&&mfe(e,n,t[n]);if(OD)for(var n of OD(t))HIe.call(t,n)&&mfe(e,n,t[n]);return e},gfe=(e,t)=>Lmt(e,Fmt(t)),Ay=(e,t)=>{var n={};for(var r in e)VIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OD)for(var r of OD(e))t.indexOf(r)<0&&HIe.call(e,r)&&(n[r]=e[r]);return n};function jmt(e){if(!e)return{confirmProps:{},modalProps:{}};const t=e,{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f}=t,d=Ay(t,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f},modalProps:a$({id:n},d)}}function Bmt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=C.useReducer(Pmt,{modals:[],current:null}),o=C.useRef(i);o.current=i;const a=C.useCallback(g=>{o.current.modals.forEach(y=>{var v,_,b,E;y.type==="confirm"&&g&&((_=(v=y.props).onCancel)==null||_.call(v)),(E=(b=y.props).onClose)==null||E.call(b)}),s({type:"CLOSE_ALL"})},[o,s]),u=C.useCallback(g=>{var y=g,{modalId:v}=y,_=Ay(y,["modalId"]);const b=v||i$();return s({type:"OPEN",payload:{id:b,type:"content",props:_}}),b},[s]),l=C.useCallback(g=>{var y=g,{modalId:v}=y,_=Ay(y,["modalId"]);const b=v||i$();return s({type:"OPEN",payload:{id:b,type:"confirm",props:_}}),b},[s]),c=C.useCallback((g,y)=>{var v=y,{modalId:_}=v,b=Ay(v,["modalId"]);const E=_||i$();return s({type:"OPEN",payload:{id:E,type:"context",props:b,ctx:g}}),E},[s]),f=C.useCallback((g,y)=>{var v,_,b,E;const w=o.current.modals.find(x=>x.id===g);w&&(w.type==="confirm"&&y&&((_=(v=w.props).onCancel)==null||_.call(v)),(E=(b=w.props).onClose)==null||E.call(b),s({type:"CLOSE",payload:w.id}))},[o,s]);Nmt({openModal:u,openConfirmModal:l,openContextModal:g=>{var y=g,{modal:v}=y,_=Ay(y,["modal"]);return c(v,_)},closeModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const y=g.props,{innerProps:v}=y,_=Ay(y,["innerProps"]),b=r[g.ctx];return{modalProps:_,content:N.createElement(b,{innerProps:v,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=jmt(g.props);return{modalProps:y,content:N.createElement(Omt,gfe(a$({},v),{id:g.id,labels:g.props.labels||n}))}}case"content":{const y=g.props,{children:v}=y;return{modalProps:Ay(y,["children"]),content:N.createElement(N.Fragment,null,v)}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return N.createElement(qY.Provider,{value:d},N.createElement(vp,gfe(a$(a$({zIndex:da("modal")+1},t),p),{opened:i.modals.length>0,onClose:()=>f(i.current.id)}),m),e)}var qIe={exports:{}},zmt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Umt=zmt,Vmt=Umt;function WIe(){}function GIe(){}GIe.resetWarningCache=WIe;var Hmt=function(){function e(r,i,s,o,a,u){if(u!==Vmt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:GIe,resetWarningCache:WIe};return n.PropTypes=n,n};qIe.exports=Hmt();var qmt=qIe.exports;const Lt=El(qmt);var Wmt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Gmt=Object.defineProperty,Ymt=Object.defineProperties,Kmt=Object.getOwnPropertyDescriptors,PD=Object.getOwnPropertySymbols,YIe=Object.prototype.hasOwnProperty,KIe=Object.prototype.propertyIsEnumerable,yfe=(e,t,n)=>t in e?Gmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vfe=(e,t)=>{for(var n in t||(t={}))YIe.call(t,n)&&yfe(e,n,t[n]);if(PD)for(var n of PD(t))KIe.call(t,n)&&yfe(e,n,t[n]);return e},Xmt=(e,t)=>Ymt(e,Kmt(t)),Qmt=(e,t)=>{var n={};for(var r in e)YIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PD)for(var r of PD(e))t.indexOf(r)<0&&KIe.call(e,r)&&(n[r]=e[r]);return n},Wr=(e,t,n)=>{const r=C.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=Qmt(o,["color","size","stroke","children"]);return C.createElement("svg",vfe(Xmt(vfe({ref:s},Wmt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>C.createElement(d,h)),...c||[]])});return r.propTypes={color:Lt.string,size:Lt.oneOfType([Lt.string,Lt.number]),stroke:Lt.oneOfType([Lt.string,Lt.number])},r.displayName=`${t}`,r},Jmt=Wr("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Zmt=Wr("alert-triangle","IconAlertTriangle",[["path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 17h.01",key:"svg-2"}]]),egt=Wr("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),tgt=Wr("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),ngt=Wr("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),rgt=Wr("brand-google","IconBrandGoogle",[["path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8",key:"svg-0"}]]),igt=Wr("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),sgt=Wr("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),ogt=Wr("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),agt=Wr("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),_fe=Wr("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),ugt=Wr("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),lgt=Wr("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),cgt=Wr("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),fgt=Wr("layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]),dgt=Wr("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),hgt=Wr("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),pgt=Wr("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),bfe=Wr("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),mgt=Wr("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),ggt=Wr("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),XIe=Wr("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),ygt=Wr("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),vgt=Wr("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),_gt=Wr("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),QIe=Wr("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function WY(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const mc="/study/",wfe=["http","https","mailto","tel"];function bgt(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<wfe.length;){const s=wfe[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var wgt=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const GY=El(wgt);function jb(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Efe(e.position):"start"in e||"end"in e?Efe(e):"line"in e||"column"in e?AU(e):""}function AU(e){return xfe(e&&e.line)+":"+xfe(e&&e.column)}function Efe(e){return AU(e&&e.start)+"-"+AU(e&&e.end)}function xfe(e){return e&&typeof e=="number"?e:1}let gc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=jb(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};gc.prototype.file="";gc.prototype.name="";gc.prototype.reason="";gc.prototype.message="";gc.prototype.stack="";gc.prototype.fatal=null;gc.prototype.column=null;gc.prototype.line=null;gc.prototype.source=null;gc.prototype.ruleId=null;gc.prototype.position=null;const Gf={basename:Egt,dirname:xgt,extname:Sgt,join:Tgt,sep:"/"};function Egt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');iI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function xgt(e){if(iI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Sgt(e){iI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Tgt(...e){let t=-1,n;for(;++t<e.length;)iI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Cgt(n)}function Cgt(e){iI(e);const t=e.charCodeAt(0)===47;let n=Agt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Agt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function iI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Igt={cwd:Ogt};function Ogt(){return"/"}function IU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Pgt(e){if(typeof e=="string")e=new URL(e);else if(!IU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return kgt(e)}function kgt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const J9=["history","path","basename","stem","extname","dirname"];let $gt=class{constructor(t){let n;t?typeof t=="string"||GY(t)?n={value:t}:IU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Igt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<J9.length;){const s=J9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)J9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){IU(t)&&(t=Pgt(t)),ej(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Gf.dirname(this.path):void 0}set dirname(t){Sfe(this.basename,"dirname"),this.path=Gf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Gf.basename(this.path):void 0}set basename(t){ej(t,"basename"),Z9(t,"basename"),this.path=Gf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Gf.extname(this.path):void 0}set extname(t){if(Z9(t,"extname"),Sfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Gf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Gf.basename(this.path,this.extname):void 0}set stem(t){ej(t,"stem"),Z9(t,"stem"),this.path=Gf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new gc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function Z9(e,t){if(e&&e.includes(Gf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Gf.sep+"`")}function ej(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Sfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Tfe(e){if(e)throw e}var u$=Object.prototype.hasOwnProperty,JIe=Object.prototype.toString,Cfe=Object.defineProperty,Afe=Object.getOwnPropertyDescriptor,Ife=function(t){return typeof Array.isArray=="function"?Array.isArray(t):JIe.call(t)==="[object Array]"},Ofe=function(t){if(!t||JIe.call(t)!=="[object Object]")return!1;var n=u$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&u$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||u$.call(t,i)},Pfe=function(t,n){Cfe&&n.name==="__proto__"?Cfe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},kfe=function(t,n){if(n==="__proto__")if(u$.call(t,n)){if(Afe)return Afe(t,n).value}else return;return t[n]},Rgt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=kfe(a,n),i=kfe(t,n),a!==i&&(c&&i&&(Ofe(i)||(s=Ife(i)))?(s?(s=!1,o=r&&Ife(r)?r:[]):o=r&&Ofe(r)?r:{},Pfe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Pfe(a,{name:n,newValue:i}));return a};const $fe=El(Rgt);function OU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ngt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Dgt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Dgt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class yc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=jb(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}yc.prototype.file="";yc.prototype.name="";yc.prototype.reason="";yc.prototype.message="";yc.prototype.stack="";yc.prototype.fatal=null;yc.prototype.column=null;yc.prototype.line=null;yc.prototype.source=null;yc.prototype.ruleId=null;yc.prototype.position=null;const Yf={basename:Mgt,dirname:Lgt,extname:Fgt,join:jgt,sep:"/"};function Mgt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');sI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Lgt(e){if(sI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Fgt(e){sI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function jgt(...e){let t=-1,n;for(;++t<e.length;)sI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Bgt(n)}function Bgt(e){sI(e);const t=e.charCodeAt(0)===47;let n=zgt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function zgt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function sI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ugt={cwd:Vgt};function Vgt(){return"/"}function PU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Hgt(e){if(typeof e=="string")e=new URL(e);else if(!PU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return qgt(e)}function qgt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const tj=["history","path","basename","stem","extname","dirname"];class Wgt{constructor(t){let n;t?typeof t=="string"||GY(t)?n={value:t}:PU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Ugt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<tj.length;){const s=tj[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)tj.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){PU(t)&&(t=Hgt(t)),rj(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Yf.dirname(this.path):void 0}set dirname(t){Rfe(this.basename,"dirname"),this.path=Yf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Yf.basename(this.path):void 0}set basename(t){rj(t,"basename"),nj(t,"basename"),this.path=Yf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Yf.extname(this.path):void 0}set extname(t){if(nj(t,"extname"),Rfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Yf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Yf.basename(this.path,this.extname):void 0}set stem(t){rj(t,"stem"),nj(t,"stem"),this.path=Yf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new yc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function nj(e,t){if(e&&e.includes(Yf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Yf.sep+"`")}function rj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Rfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Ggt=eOe().freeze(),ZIe={}.hasOwnProperty;function eOe(){const e=Ngt(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=eOe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data($fe(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(oj("data",r),n[m]=g,s):ZIe.call(n,m)&&n[m]||null:m?(oj("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(oj("use",r),m!=null)if(typeof m=="function")E(m,...g);else if(typeof m=="object")Array.isArray(m)?b(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(w){if(typeof w=="function")E(w);else if(typeof w=="object")if(Array.isArray(w)){const[x,...S]=w;E(x,...S)}else _(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function _(w){b(w.plugins),w.settings&&(y=Object.assign(y||{},w.settings))}function b(w){let x=-1;if(w!=null)if(Array.isArray(w))for(;++x<w.length;){const S=w[x];v(S)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function E(w,x){let S=-1,P;for(;++S<t.length;)if(t[S][0]===w){P=t[S];break}P?(OU(P[1])&&OU(x)&&(x=$fe(!0,P[1],x)),P[1]=x):t.push([...arguments])}}function l(m){s.freeze();const g=fS(m),y=s.Parser;return ij("parse",y),Nfe(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=fS(g),v=s.Compiler;return sj("stringify",v),Dfe(m),Nfe(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Dfe(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,b){e.run(m,fS(g),E);function E(w,x,S){x=x||m,w?b(w):_?_(x):y(null,x,S)}}}function d(m,g){let y,v;return s.run(m,g,_),Mfe("runSync","run",v),y;function _(b,E){Tfe(b),y=E,v=!0}}function h(m,g){if(s.freeze(),ij("process",s.Parser),sj("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const b=fS(m);s.run(s.parse(b),b,(w,x,S)=>{if(w||!x||!S)E(w);else{const P=s.stringify(x,S);P==null||(Xgt(P)?S.value=P:S.result=P),E(w,S)}});function E(w,x){w||!x?_(w):v?v(x):g(null,x)}}}function p(m){let g;s.freeze(),ij("processSync",s.Parser),sj("processSync",s.Compiler);const y=fS(m);return s.process(y,v),Mfe("processSync","process",g),y;function v(_){g=!0,Tfe(_)}}}function Nfe(e,t){return typeof e=="function"&&e.prototype&&(Ygt(e.prototype)||t in e.prototype)}function Ygt(e){let t;for(t in e)if(ZIe.call(e,t))return!0;return!1}function ij(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function sj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function oj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Dfe(e){if(!OU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Mfe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function fS(e){return Kgt(e)?e:new Wgt(e)}function Kgt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Xgt(e){return typeof e=="string"||GY(e)}function Qgt(e,t){var{includeImageAlt:n=!0}=t||{};return tOe(e,n)}function tOe(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&Lfe(e.children,t)||Array.isArray(e)&&Lfe(e,t))||""}function Lfe(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=tOe(e[r],t);return n.join("")}function Ud(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Ul(e,t){return e.length>0?(Ud(e,e.length,0,t),e):t}const Ffe={}.hasOwnProperty;function Jgt(e){const t={};let n=-1;for(;++n<e.length;)Zgt(t,e[n]);return t}function Zgt(e,t){let n;for(n in t){const i=(Ffe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){Ffe.call(i,o)||(i[o]=[]);const a=s[o];e0t(i[o],Array.isArray(a)?a:a?[a]:[])}}}function e0t(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ud(e,0,0,r)}const t0t=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,sd=j0(/[A-Za-z]/),kU=j0(/\d/),n0t=j0(/[\dA-Fa-f]/),tl=j0(/[\dA-Za-z]/),r0t=j0(/[!-/:-@[-`{-~]/),jfe=j0(/[#-'*+\--9=?A-Z^-~]/);function $U(e){return e!==null&&(e<32||e===127)}function ec(e){return e!==null&&(e<0||e===32)}function Jt(e){return e!==null&&e<-2}function is(e){return e===-2||e===-1||e===32}const i0t=j0(/\s/),s0t=j0(t0t);function j0(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Nr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return is(u)?(e.enter(n),a(u)):t(u)}function a(u){return is(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const o0t={tokenize:a0t};function a0t(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Jt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const u0t={tokenize:l0t},Bfe={tokenize:c0t};function l0t(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const b=n[r];return t.containerState=b[1],e.attempt(b[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const b=t.events.length;let E=b,w;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){w=t.events[E][1].end;break}y(r);let x=b;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},w),x++;return Ud(t.events,E+1,0,t.events.slice(b)),t.events.length=x,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Bfe,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Bfe,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return Jt(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,b){const E=t.sliceStream(_);if(b&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const x=t.events.length;let S=x,P,A;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(P){A=t.events[S][1].end;break}P=!0}for(y(r),w=x;w<t.events.length;)t.events[w][1].end=Object.assign({},A),w++;Ud(t.events,S+1,0,t.events.slice(x)),t.events.length=w}}function y(_){let b=n.length;for(;b-- >_;){const E=n[b];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function c0t(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function zfe(e){if(e===null||ec(e)||i0t(e))return 1;if(s0t(e))return 2}function YY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const RU={name:"attention",tokenize:d0t,resolveAll:f0t};function f0t(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Ufe(f,-u),Ufe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Ul(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Ul(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Ul(l,YY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Ul(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Ul(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Ud(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function d0t(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=zfe(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=zfe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Ufe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const h0t={name:"autolink",tokenize:p0t};function p0t(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return sd(p)?(e.consume(p),o):jfe(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||tl(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||tl(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||$U(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):jfe(p)?(e.consume(p),l):n(p)}function c(p){return tl(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||tl(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const D6={tokenize:m0t,partial:!0};function m0t(e,t,n){return Nr(e,r,"linePrefix");function r(i){return i===null||Jt(i)?t(i):n(i)}}const nOe={name:"blockQuote",tokenize:g0t,continuation:{tokenize:y0t},exit:v0t};function g0t(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return is(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function y0t(e,t,n){return Nr(e,e.attempt(nOe,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function v0t(e){e.exit("blockQuote")}const rOe={name:"characterEscape",tokenize:_0t};function _0t(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return r0t(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Vfe=document.createElement("i");function KY(e){const t="&"+e+";";Vfe.innerHTML=t;const n=Vfe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const iOe={name:"characterReference",tokenize:b0t};function b0t(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=tl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=n0t,c):(e.enter("characterReferenceValue"),s=7,o=kU,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===tl&&!KY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const Hfe={name:"codeFenced",tokenize:w0t,concrete:!0};function w0t(e,t,n){const r=this,i={tokenize:E,partial:!0},s={tokenize:b,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=w,f(w)}function f(w){return w===l?(e.consume(w),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(w):Nr(e,d,"whitespace")(w))}function d(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||ec(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,p,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),h)}function p(w){return w===null||Jt(w)?g(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||Jt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(w)):w===96&&w===l?n(w):(e.consume(w),m)}function g(w){return e.exit("codeFencedFence"),r.interrupt?t(w):y(w)}function y(w){return w===null?_(w):Jt(w)?e.attempt(s,e.attempt(i,_,a?Nr(e,y,"linePrefix",a+1):y),_)(w):(e.enter("codeFlowValue"),v(w))}function v(w){return w===null||Jt(w)?(e.exit("codeFlowValue"),y(w)):(e.consume(w),v)}function _(w){return e.exit("codeFenced"),t(w)}function b(w,x,S){const P=this;return A;function A(z){return w.enter("lineEnding"),w.consume(z),w.exit("lineEnding"),O}function O(z){return P.parser.lazy[P.now().line]?S(z):x(z)}}function E(w,x,S){let P=0;return Nr(w,A,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function A(M){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),O(M)}function O(M){return M===l?(w.consume(M),P++,O):P<u?S(M):(w.exit("codeFencedFenceSequence"),Nr(w,z,"whitespace")(M))}function z(M){return M===null||Jt(M)?(w.exit("codeFencedFence"),x(M)):S(M)}}}const aj={name:"codeIndented",tokenize:x0t},E0t={tokenize:S0t,partial:!0};function x0t(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Nr(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Jt(l)?e.attempt(E0t,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Jt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function S0t(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Jt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Nr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Jt(o)?i(o):n(o)}}const T0t={name:"codeText",tokenize:I0t,resolve:C0t,previous:A0t};function C0t(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function A0t(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function I0t(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):Jt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Jt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function sOe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,O0t(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),Ud(e,i,n-i+1,a))}}return!l}function O0t(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),Ud(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const P0t={tokenize:R0t,resolve:$0t},k0t={tokenize:N0t,partial:!0};function $0t(e){return sOe(e),e}function R0t(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Jt(a)?e.check(k0t,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function N0t(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Nr(e,s,"linePrefix")}function s(o){if(o===null||Jt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function oOe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||$U(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Jt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||ec(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):$U(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function aOe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Jt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Jt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!is(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function uOe(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Jt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Nr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Jt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function o2(e,t){let n;return r;function r(i){return Jt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):is(i)?Nr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function Bb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const D0t={name:"definition",tokenize:L0t},M0t={tokenize:F0t,partial:!0};function L0t(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),aOe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=Bb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),o2(e,oOe(e,e.attempt(M0t,Nr(e,a,"whitespace"),Nr(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||Jt(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function F0t(e,t,n){return r;function r(o){return ec(o)?o2(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?uOe(e,Nr(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||Jt(o)?t(o):n(o)}}const j0t={name:"hardBreakEscape",tokenize:B0t};function B0t(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return Jt(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const z0t={name:"headingAtx",tokenize:V0t,resolve:U0t};function U0t(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ud(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function V0t(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||ec(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Jt(c)?(e.exit("atxHeading"),t(c)):is(c)?Nr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ec(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const H0t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],qfe=["pre","script","style","textarea"],q0t={name:"htmlFlow",tokenize:Y0t,resolveTo:G0t,concrete:!0},W0t={tokenize:K0t,partial:!0};function G0t(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Y0t(e,t,n){const r=this;let i,s,o,a,u;return l;function l($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),c}function c($){return $===33?(e.consume($),f):$===47?(e.consume($),p):$===63?(e.consume($),i=3,r.interrupt?t:H):sd($)?(e.consume($),o=String.fromCharCode($),s=!0,m):n($)}function f($){return $===45?(e.consume($),i=2,d):$===91?(e.consume($),i=5,o="CDATA[",a=0,h):sd($)?(e.consume($),i=4,r.interrupt?t:H):n($)}function d($){return $===45?(e.consume($),r.interrupt?t:H):n($)}function h($){return $===o.charCodeAt(a++)?(e.consume($),a===o.length?r.interrupt?t:O:h):n($)}function p($){return sd($)?(e.consume($),o=String.fromCharCode($),m):n($)}function m($){return $===null||$===47||$===62||ec($)?$!==47&&s&&qfe.includes(o.toLowerCase())?(i=1,r.interrupt?t($):O($)):H0t.includes(o.toLowerCase())?(i=6,$===47?(e.consume($),g):r.interrupt?t($):O($)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):s?v($):y($)):$===45||tl($)?(e.consume($),o+=String.fromCharCode($),m):n($)}function g($){return $===62?(e.consume($),r.interrupt?t:O):n($)}function y($){return is($)?(e.consume($),y):P($)}function v($){return $===47?(e.consume($),P):$===58||$===95||sd($)?(e.consume($),_):is($)?(e.consume($),v):P($)}function _($){return $===45||$===46||$===58||$===95||tl($)?(e.consume($),_):b($)}function b($){return $===61?(e.consume($),E):is($)?(e.consume($),b):v($)}function E($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),u=$,w):is($)?(e.consume($),E):(u=null,x($))}function w($){return $===null||Jt($)?n($):$===u?(e.consume($),S):(e.consume($),w)}function x($){return $===null||$===34||$===39||$===60||$===61||$===62||$===96||ec($)?b($):(e.consume($),x)}function S($){return $===47||$===62||is($)?v($):n($)}function P($){return $===62?(e.consume($),A):n($)}function A($){return is($)?(e.consume($),A):$===null||Jt($)?O($):n($)}function O($){return $===45&&i===2?(e.consume($),D):$===60&&i===1?(e.consume($),L):$===62&&i===4?(e.consume($),U):$===63&&i===3?(e.consume($),H):$===93&&i===5?(e.consume($),B):Jt($)&&(i===6||i===7)?e.check(W0t,U,z)($):$===null||Jt($)?z($):(e.consume($),O)}function z($){return e.exit("htmlFlowData"),M($)}function M($){return $===null?k($):Jt($)?e.attempt({tokenize:R,partial:!0},M,k)($):(e.enter("htmlFlowData"),O($))}function R($,q,F){return j;function j(se){return $.enter("lineEnding"),$.consume(se),$.exit("lineEnding"),Q}function Q(se){return r.parser.lazy[r.now().line]?F(se):q(se)}}function D($){return $===45?(e.consume($),H):O($)}function L($){return $===47?(e.consume($),o="",V):O($)}function V($){return $===62&&qfe.includes(o.toLowerCase())?(e.consume($),U):sd($)&&o.length<8?(e.consume($),o+=String.fromCharCode($),V):O($)}function B($){return $===93?(e.consume($),H):O($)}function H($){return $===62?(e.consume($),U):$===45&&i===2?(e.consume($),H):O($)}function U($){return $===null||Jt($)?(e.exit("htmlFlowData"),k($)):(e.consume($),U)}function k($){return e.exit("htmlFlow"),t($)}}function K0t(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(D6,t,n)}}const X0t={name:"htmlText",tokenize:Q0t};function Q0t(e,t,n){const r=this;let i,s,o,a;return u;function u(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),l}function l(k){return k===33?(e.consume(k),c):k===47?(e.consume(k),x):k===63?(e.consume(k),E):sd(k)?(e.consume(k),A):n(k)}function c(k){return k===45?(e.consume(k),f):k===91?(e.consume(k),s="CDATA[",o=0,g):sd(k)?(e.consume(k),b):n(k)}function f(k){return k===45?(e.consume(k),d):n(k)}function d(k){return k===null||k===62?n(k):k===45?(e.consume(k),h):p(k)}function h(k){return k===null||k===62?n(k):p(k)}function p(k){return k===null?n(k):k===45?(e.consume(k),m):Jt(k)?(a=p,B(k)):(e.consume(k),p)}function m(k){return k===45?(e.consume(k),U):p(k)}function g(k){return k===s.charCodeAt(o++)?(e.consume(k),o===s.length?y:g):n(k)}function y(k){return k===null?n(k):k===93?(e.consume(k),v):Jt(k)?(a=y,B(k)):(e.consume(k),y)}function v(k){return k===93?(e.consume(k),_):y(k)}function _(k){return k===62?U(k):k===93?(e.consume(k),_):y(k)}function b(k){return k===null||k===62?U(k):Jt(k)?(a=b,B(k)):(e.consume(k),b)}function E(k){return k===null?n(k):k===63?(e.consume(k),w):Jt(k)?(a=E,B(k)):(e.consume(k),E)}function w(k){return k===62?U(k):E(k)}function x(k){return sd(k)?(e.consume(k),S):n(k)}function S(k){return k===45||tl(k)?(e.consume(k),S):P(k)}function P(k){return Jt(k)?(a=P,B(k)):is(k)?(e.consume(k),P):U(k)}function A(k){return k===45||tl(k)?(e.consume(k),A):k===47||k===62||ec(k)?O(k):n(k)}function O(k){return k===47?(e.consume(k),U):k===58||k===95||sd(k)?(e.consume(k),z):Jt(k)?(a=O,B(k)):is(k)?(e.consume(k),O):U(k)}function z(k){return k===45||k===46||k===58||k===95||tl(k)?(e.consume(k),z):M(k)}function M(k){return k===61?(e.consume(k),R):Jt(k)?(a=M,B(k)):is(k)?(e.consume(k),M):O(k)}function R(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),i=k,D):Jt(k)?(a=R,B(k)):is(k)?(e.consume(k),R):(e.consume(k),i=void 0,V)}function D(k){return k===i?(e.consume(k),L):k===null?n(k):Jt(k)?(a=D,B(k)):(e.consume(k),D)}function L(k){return k===62||k===47||ec(k)?O(k):n(k)}function V(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===62||ec(k)?O(k):(e.consume(k),V)}function B(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),Nr(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function H(k){return e.enter("htmlTextData"),a(k)}function U(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}}const XY={name:"labelEnd",tokenize:ryt,resolveTo:nyt,resolveAll:tyt},J0t={tokenize:iyt},Z0t={tokenize:syt},eyt={tokenize:oyt};function tyt(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function nyt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Ul(a,e.slice(s+1,s+r+3)),a=Ul(a,[["enter",c,t]]),a=Ul(a,YY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Ul(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Ul(a,e.slice(o+1)),a=Ul(a,[["exit",u,t]]),Ud(e,s,e.length,a),e}function ryt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(Bb(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(J0t,t,o?t:l)(c):c===91?e.attempt(Z0t,t,o?e.attempt(eyt,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function iyt(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),o2(e,i)}function i(u){return u===41?a(u):oOe(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return ec(u)?o2(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?uOe(e,o2(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function syt(e,t,n){const r=this;return i;function i(o){return aOe.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Bb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function oyt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const ayt={name:"labelStartImage",tokenize:uyt,resolveAll:XY.resolveAll};function uyt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const lyt={name:"labelStartLink",tokenize:cyt,resolveAll:XY.resolveAll};function cyt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const uj={name:"lineEnding",tokenize:fyt};function fyt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const l$={name:"thematicBreak",tokenize:dyt};function dyt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):is(u)?Nr(e,o,"whitespace")(u):r<3||u!==null&&!Jt(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const Qa={name:"list",tokenize:myt,continuation:{tokenize:gyt},exit:vyt},hyt={tokenize:_yt,partial:!0},pyt={tokenize:yyt,partial:!0};function myt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:kU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(l$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return kU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(D6,r.interrupt?n:c,e.attempt(hyt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return is(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function gyt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(D6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!is(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(pyt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(Qa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function yyt(e,t,n){const r=this;return Nr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function vyt(e){e.exit(this.containerState.type)}function _yt(e,t,n){const r=this;return Nr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!is(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Wfe={name:"setextUnderline",tokenize:wyt,resolveTo:byt};function byt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function wyt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),Nr(e,l,"lineSuffix")(c))}function l(c){return c===null||Jt(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const Eyt={tokenize:xyt};function xyt(e){const t=this,n=e.attempt(D6,r,e.attempt(this.parser.constructs.flowInitial,i,Nr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(P0t,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Syt={resolveAll:cOe()},Tyt=lOe("string"),Cyt=lOe("text");function lOe(e){return{tokenize:t,resolveAll:cOe(e==="text"?Ayt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function cOe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Ayt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Iyt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:b,attempt:x(E),check:x(w),interrupt:x(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(O){return o=Ul(o,O),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=YY(s,l.events,l),l.events)}function d(O,z){return Pyt(h(O),z)}function h(O){return Oyt(o,O)}function p(){return Object.assign({},r)}function m(O){i[O.line]=O.column,A()}function g(){let O;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(O){c=c(O)}function v(O){Jt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,A()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function _(O,z){const M=z||{};return M.type=O,M.start=p(),l.events.push(["enter",M,l]),a.push(M),M}function b(O){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function E(O,z){S(O,z.from)}function w(O,z){z.restore()}function x(O,z){return M;function M(R,D,L){let V,B,H,U;return Array.isArray(R)?$(R):"tokenize"in R?$([R]):k(R);function k(Q){return se;function se(ae){const ce=ae!==null&&Q[ae],le=ae!==null&&Q.null,ge=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(le)?le:le?[le]:[]];return $(ge)(ae)}}function $(Q){return V=Q,B=0,Q.length===0?L:q(Q[B])}function q(Q){return se;function se(ae){return U=P(),H=Q,Q.partial||(l.currentConstruct=Q),Q.name&&l.parser.constructs.disable.null.includes(Q.name)?j():Q.tokenize.call(z?Object.assign(Object.create(l),z):l,u,F,j)(ae)}}function F(Q){return O(H,U),D}function j(Q){return U.restore(),++B<V.length?q(V[B]):L}}}function S(O,z){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Ud(l.events,z,l.events.length-z,O.resolve(l.events.slice(z),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function P(){const O=p(),z=l.previous,M=l.currentConstruct,R=l.events.length,D=Array.from(a);return{restore:L,from:R};function L(){r=O,l.previous=z,l.currentConstruct=M,l.events.length=R,a=D,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Oyt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function Pyt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const kyt={42:Qa,43:Qa,45:Qa,48:Qa,49:Qa,50:Qa,51:Qa,52:Qa,53:Qa,54:Qa,55:Qa,56:Qa,57:Qa,62:nOe},$yt={91:D0t},Ryt={[-2]:aj,[-1]:aj,32:aj},Nyt={35:z0t,42:l$,45:[Wfe,l$],60:q0t,61:Wfe,95:l$,96:Hfe,126:Hfe},Dyt={38:iOe,92:rOe},Myt={[-5]:uj,[-4]:uj,[-3]:uj,33:ayt,38:iOe,42:RU,60:[h0t,X0t],91:lyt,92:[j0t,rOe],93:XY,95:RU,96:T0t},Lyt={null:[RU,Syt]},Fyt={null:[42,95]},jyt={null:[]},Byt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Fyt,contentInitial:$yt,disable:jyt,document:kyt,flow:Nyt,flowInitial:Ryt,insideSpan:Lyt,string:Dyt,text:Myt},Symbol.toStringTag,{value:"Module"}));function zyt(e={}){const t=Jgt([Byt].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(o0t),document:r(u0t),flow:r(Eyt),string:r(Tyt),text:r(Cyt)};return n;function r(i){return s;function s(o){return Iyt(n,i,o)}}}const Gfe=/[\0\t\n\r]/g;function Uyt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Gfe.lastIndex=f,l=Gfe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Vyt(e){for(;!sOe(e););return e}function fOe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const Hyt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function qyt(e){return e.replace(Hyt,Wyt)}function Wyt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return fOe(n.slice(s?2:1),s?16:10)}return KY(n)||e}const NU={}.hasOwnProperty,Gyt=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Yyt(n)(Vyt(zyt(n).document().write(Uyt()(e,t,!0))))};function Yyt(e={}){const t=dOe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(Be),autolinkProtocol:z,autolinkEmail:z,atxHeading:u(Oe),blockQuote:u(ue),characterEscape:z,characterReference:z,codeFenced:u(Fe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Fe,l),codeText:u($e,l),codeTextData:z,data:z,codeFlowValue:z,definition:u(Ge),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(Re),hardBreakEscape:u(Me),hardBreakTrailing:u(Me),htmlFlow:u(Ut,l),htmlFlowData:z,htmlText:u(Ut,l),htmlTextData:z,image:u(Qe),label:l,link:u(Be),listItem:u(et),listItemValue:m,listOrdered:u(xt,p),listUnordered:u(xt),paragraph:u(ft),reference:Q,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(Oe),strong:u(dt),thematicBreak:u(Dn)},exit:{atxHeading:f(),atxHeadingSequence:S,autolink:f(),autolinkEmail:ge,autolinkProtocol:le,blockQuote:f(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:ce,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:M,codeIndented:f(b),codeText:f(B),codeTextData:M,data:M,definition:f(),definitionDestinationString:x,definitionLabelString:E,definitionTitleString:w,emphasis:f(),hardBreakEscape:f(D),hardBreakTrailing:f(D),htmlFlow:f(L),htmlFlowData:M,htmlText:f(V),htmlTextData:M,image:f(U),label:$,labelText:k,lineEnding:R,link:f(H),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:q,resourceTitleString:F,resource:j,setextHeading:f(O),setextHeadingLineSequence:A,setextHeadingText:P,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(he){let _e={type:"root",children:[]};const Pe=[_e],it=[],Ye=[],ut={stack:Pe,tokenStack:it,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let tt=-1;for(;++tt<he.length;)if(he[tt][1].type==="listOrdered"||he[tt][1].type==="listUnordered")if(he[tt][0]==="enter")Ye.push(tt);else{const wt=Ye.pop();tt=i(he,wt,tt)}for(tt=-1;++tt<he.length;){const wt=t[he[tt][0]];NU.call(wt,he[tt][1].type)&&wt[he[tt][1].type].call(Object.assign({sliceSerialize:he[tt][2].sliceSerialize},ut),he[tt][1])}if(it.length>0){const wt=it[it.length-1];(wt[1]||Yfe).call(ut,void 0,wt[0])}for(_e.position={start:a(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:a(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<t.transforms.length;)_e=t.transforms[tt](_e)||_e;return _e}function i(he,_e,Pe){let it=_e-1,Ye=-1,ut=!1,tt,wt,In,Wt;for(;++it<=Pe;){const Vt=he[it];if(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered"||Vt[1].type==="blockQuote"?(Vt[0]==="enter"?Ye++:Ye--,Wt=void 0):Vt[1].type==="lineEndingBlank"?Vt[0]==="enter"&&(tt&&!Wt&&!Ye&&!In&&(In=it),Wt=void 0):Vt[1].type==="linePrefix"||Vt[1].type==="listItemValue"||Vt[1].type==="listItemMarker"||Vt[1].type==="listItemPrefix"||Vt[1].type==="listItemPrefixWhitespace"||(Wt=void 0),!Ye&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Ye===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(tt){let hr=it;for(wt=void 0;hr--;){const Yn=he[hr];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;wt&&(he[wt][1].type="lineEndingBlank",ut=!0),Yn[1].type="lineEnding",wt=hr}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}In&&(!wt||In<wt)&&(tt._spread=!0),tt.end=Object.assign({},wt?he[wt][1].start:Vt[1].end),he.splice(wt||it,0,["exit",tt,Vt[2]]),it++,Pe++}Vt[1].type==="listItemPrefix"&&(tt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start)},he.splice(it,0,["enter",tt,Vt[2]]),it++,Pe++,In=void 0,Wt=!0)}}return he[_e][1]._spread=ut,Pe}function s(he,_e){n[he]=_e}function o(he){return n[he]}function a(he){return{line:he.line,column:he.column,offset:he.offset}}function u(he,_e){return Pe;function Pe(it){c.call(this,he(it),it),_e&&_e.call(this,it)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(he,_e,Pe){return this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([_e,Pe]),he.position={start:a(_e.start)},he}function f(he){return _e;function _e(Pe){he&&he.call(this,Pe),d.call(this,Pe)}}function d(he,_e){const Pe=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==he.type&&(_e?_e.call(this,he,it[0]):(it[1]||Yfe).call(this,he,it[0]));else throw new Error("Cannot close `"+he.type+"` ("+jb({start:he.start,end:he.end})+"): its not open");return Pe.position.end=a(he.end),Pe}function h(){return Qgt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(he){if(o("expectingFirstListItemValue")){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(he),10),s("expectingFirstListItemValue")}}function g(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=he}function y(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=he}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/(\r?\n|\r)$/g,"")}function E(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Bb(this.sliceSerialize(he)).toLowerCase()}function w(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function x(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function S(he){const _e=this.stack[this.stack.length-1];if(!_e.depth){const Pe=this.sliceSerialize(he).length;_e.depth=Pe}}function P(){s("setextHeadingSlurpLineEnding",!0)}function A(he){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(he).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function z(he){const _e=this.stack[this.stack.length-1];let Pe=_e.children[_e.children.length-1];(!Pe||Pe.type!=="text")&&(Pe=Bt(),Pe.position={start:a(he.start)},_e.children.push(Pe)),this.stack.push(Pe)}function M(he){const _e=this.stack.pop();_e.value+=this.sliceSerialize(he),_e.position.end=a(he.end)}function R(he){const _e=this.stack[this.stack.length-1];if(o("atHardBreak")){const Pe=_e.children[_e.children.length-1];Pe.position.end=a(he.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(_e.type)&&(z.call(this,he),M.call(this,he))}function D(){s("atHardBreak",!0)}function L(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function V(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function B(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function H(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function U(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function k(he){const _e=this.stack[this.stack.length-2],Pe=this.sliceSerialize(he);_e.label=qyt(Pe),_e.identifier=Bb(Pe).toLowerCase()}function $(){const he=this.stack[this.stack.length-1],_e=this.resume(),Pe=this.stack[this.stack.length-1];s("inReference",!0),Pe.type==="link"?Pe.children=he.children:Pe.alt=_e}function q(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function F(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function j(){s("inReference")}function Q(){s("referenceType","collapsed")}function se(he){const _e=this.resume(),Pe=this.stack[this.stack.length-1];Pe.label=_e,Pe.identifier=Bb(this.sliceSerialize(he)).toLowerCase(),s("referenceType","full")}function ae(he){s("characterReferenceType",he.type)}function ce(he){const _e=this.sliceSerialize(he),Pe=o("characterReferenceType");let it;Pe?(it=fOe(_e,Pe==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):it=KY(_e);const Ye=this.stack.pop();Ye.value+=it,Ye.position.end=a(he.end)}function le(he){M.call(this,he);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(he)}function ge(he){M.call(this,he);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(he)}function ue(){return{type:"blockquote",children:[]}}function Fe(){return{type:"code",lang:null,meta:null,value:""}}function $e(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Me(){return{type:"break"}}function Ut(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function Be(){return{type:"link",title:null,url:"",children:[]}}function xt(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function et(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function ft(){return{type:"paragraph",children:[]}}function dt(){return{type:"strong",children:[]}}function Bt(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function dOe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?dOe(e,r):Kyt(e,r)}return e}function Kyt(e,t){let n;for(n in t)if(NU.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(NU.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function Yfe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+jb({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+jb({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+jb({start:t.start,end:t.end})+") is still open")}function Xyt(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return Gyt(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var Ts=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const c$={}.hasOwnProperty;function Qyt(e,t){const n=t.data||{};return"value"in t&&!(c$.call(n,"hName")||c$.call(n,"hProperties")||c$.call(n,"hChildren"))?e.augment(t,Ts("text",t.value)):e(t,"div",ha(e,t))}function hOe(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return c$.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=Jyt:i=e.unknownHandler,(typeof i=="function"?i:Qyt)(e,t,n)}function Jyt(e,t){return"children"in t?{...t,children:ha(e,t)}:t}function ha(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=hOe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const pOe=function(e){if(e==null)return n1t;if(typeof e=="string")return t1t(e);if(typeof e=="object")return Array.isArray(e)?Zyt(e):e1t(e);if(typeof e=="function")return M6(e);throw new Error("Expected function, string, or object as test")};function Zyt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=pOe(e[n]);return M6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function e1t(e){return M6(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function t1t(e){return M6(t);function t(n){return n&&n.type===e}}function M6(e){return t;function t(...n){return!!e.call(this,...n)}}function n1t(){return!0}const r1t=!0,i1t="skip",Kfe=!1,s1t=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=pOe(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=o1t(n(a,l)),h[0]===Kfe))return h;if(a.children&&h[0]!==i1t)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===Kfe)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function o1t(e){return Array.isArray(e)?e:typeof e=="number"?[r1t,e]:[e]}const QY=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),s1t(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},mOe=yOe("start"),gOe=yOe("end");function yOe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function a1t(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const Xfe={}.hasOwnProperty;function u1t(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return QY(e,"definition",r=>{const i=Qfe(r.identifier);i&&!Xfe.call(t,i)&&(t[i]=r)}),n;function n(r){const i=Qfe(r);return i&&Xfe.call(t,i)?t[i]:null}}function Qfe(e){return String(e||"").toUpperCase()}function VE(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&tl(e.charCodeAt(n+1))&&tl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ip(e,t){const n=[];let r=-1;for(t&&n.push(Ts("text",`
`));++r<e.length;)r&&n.push(Ts("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(Ts("text",`
`)),n}function l1t(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=ha(e,r),s=String(r.identifier),o=VE(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:ip(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[Ts("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:ip(n,!0)},{type:"text",value:`
`}]}}function c1t(e,t){return e(t,"blockquote",ip(ha(e,t),!0))}function f1t(e,t){return[e(t,"br"),Ts("text",`
`)]}function d1t(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[Ts("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function h1t(e,t){return e(t,"del",ha(e,t))}function p1t(e,t){return e(t,"em",ha(e,t))}function vOe(e,t){const n=String(t.identifier),r=VE(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[Ts("text",String(s))])])}function m1t(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},vOe(e,{type:"footnoteReference",identifier:i,position:t.position})}function g1t(e,t){return e(t,"h"+t.depth,ha(e,t))}function y1t(e,t){return e.dangerous?e.augment(t,Ts("raw",t.value)):null}function _Oe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return Ts("text","!["+t.alt+r);const i=ha(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(Ts("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(Ts("text",r)),i}function v1t(e,t){const n=e.definition(t.identifier);if(!n)return _Oe(e,t);const r={src:VE(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function _1t(e,t){const n={src:VE(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function b1t(e,t){return e(t,"code",[Ts("text",t.value.replace(/\r?\n|\r/g," "))])}function w1t(e,t){const n=e.definition(t.identifier);if(!n)return _Oe(e,t);const r={href:VE(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,ha(e,t))}function E1t(e,t){const n={href:VE(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,ha(e,t))}function x1t(e,t,n){const r=ha(e,t),i=n?S1t(n):bOe(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(Ts("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(Ts("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(Ts("text",`
`)),e(t,"li",s,o)}function S1t(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=bOe(n[r]);return!!t}function bOe(e){const t=e.spread;return t??e.children.length>1}function T1t(e,t){const n={},r=t.ordered?"ol":"ul",i=ha(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,ip(i,!0))}function C1t(e,t){return e(t,"p",ha(e,t))}function A1t(e,t){return e.augment(t,Ts("root",ip(ha(e,t))))}function I1t(e,t){return e(t,"strong",ha(e,t))}function O1t(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?ha(e,f):[]))}s[r]=e(n[r],"tr",ip(u,!0))}return e(t,"table",ip([e(s[0].position,"thead",ip([s[0]],!0))].concat(s[1]?e({start:mOe(s[1]),end:gOe(s[s.length-1])},"tbody",ip(s.slice(1),!0)):[]),!0))}const Jfe=9,Zfe=32;function P1t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(ede(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(ede(t.slice(i),i>0,!1)),s.join("")}function ede(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Jfe||s===Zfe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Jfe||s===Zfe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function k1t(e,t){return e.augment(t,Ts("text",P1t(String(t.value))))}function $1t(e,t){return e(t,"hr")}const R1t={blockquote:c1t,break:f1t,code:d1t,delete:h1t,emphasis:p1t,footnoteReference:vOe,footnote:m1t,heading:g1t,html:y1t,imageReference:v1t,image:_1t,inlineCode:b1t,linkReference:w1t,link:E1t,listItem:x1t,list:T1t,paragraph:C1t,root:A1t,strong:I1t,table:O1t,text:k1t,thematicBreak:$1t,toml:EP,yaml:EP,definition:EP,footnoteDefinition:EP};function EP(){return null}const N1t={}.hasOwnProperty;function D1t(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=u1t(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...R1t,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,QY(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();N1t.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};a1t(l)||(u.position={start:mOe(l),end:gOe(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function wOe(e,t){const n=D1t(e,t),r=hOe(n,e,null),i=l1t(n);return i&&r.children.push(Ts("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const M1t=function(e,t){return e&&"run"in e?F1t(e,t):j1t(e||t)},L1t=M1t;function F1t(e,t){return(n,r,i)=>{e.run(wOe(n,t),r,s=>{i(s)})}}function j1t(e){return t=>wOe(t,e)}let oI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};oI.prototype.property={};oI.prototype.normal={};oI.prototype.space=null;function EOe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new oI(n,r,t)}function vC(e){return e.toLowerCase()}let vc=class{constructor(t,n){this.property=t,this.attribute=n}};vc.prototype.space=null;vc.prototype.boolean=!1;vc.prototype.booleanish=!1;vc.prototype.overloadedBoolean=!1;vc.prototype.number=!1;vc.prototype.commaSeparated=!1;vc.prototype.spaceSeparated=!1;vc.prototype.commaOrSpaceSeparated=!1;vc.prototype.mustUseProperty=!1;vc.prototype.defined=!1;let B1t=0;const _n=Bv(),es=Bv(),xOe=Bv(),Ke=Bv(),Kr=Bv(),zb=Bv(),Vu=Bv();function Bv(){return 2**++B1t}const DU=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:es,commaOrSpaceSeparated:Vu,commaSeparated:zb,number:Ke,overloadedBoolean:xOe,spaceSeparated:Kr},Symbol.toStringTag,{value:"Module"})),lj=Object.keys(DU);class JY extends vc{constructor(t,n,r,i){let s=-1;if(super(t,n),tde(this,"space",i),typeof r=="number")for(;++s<lj.length;){const o=lj[s];tde(this,lj[s],(r&DU[o])===DU[o])}}}JY.prototype.defined=!0;function tde(e,t,n){n&&(e[t]=n)}const z1t={}.hasOwnProperty;function HE(e){const t={},n={};let r;for(r in e.properties)if(z1t.call(e.properties,r)){const i=e.properties[r],s=new JY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[vC(r)]=r,n[vC(s.attribute)]=r}return new oI(t,n,e.space)}const SOe=HE({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),TOe=HE({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function COe(e,t){return t in e?e[t]:t}function AOe(e,t){return COe(e,t.toLowerCase())}const IOe=HE({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:AOe,properties:{xmlns:null,xmlnsXLink:null}}),OOe=HE({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:es,ariaAutoComplete:null,ariaBusy:es,ariaChecked:es,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:Kr,ariaCurrent:null,ariaDescribedBy:Kr,ariaDetails:null,ariaDisabled:es,ariaDropEffect:Kr,ariaErrorMessage:null,ariaExpanded:es,ariaFlowTo:Kr,ariaGrabbed:es,ariaHasPopup:null,ariaHidden:es,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Kr,ariaLevel:Ke,ariaLive:null,ariaModal:es,ariaMultiLine:es,ariaMultiSelectable:es,ariaOrientation:null,ariaOwns:Kr,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:es,ariaReadOnly:es,ariaRelevant:null,ariaRequired:es,ariaRoleDescription:Kr,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:es,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null}}),U1t=HE({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:AOe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:zb,acceptCharset:Kr,accessKey:Kr,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:Kr,autoFocus:_n,autoPlay:_n,capture:_n,charSet:null,checked:_n,cite:null,className:Kr,cols:Ke,colSpan:null,content:null,contentEditable:es,controls:_n,controlsList:Kr,coords:Ke|zb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:xOe,draggable:es,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:Kr,height:Ke,hidden:_n,high:Ke,href:null,hrefLang:null,htmlFor:Kr,httpEquiv:Kr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:Kr,itemRef:Kr,itemScope:_n,itemType:Kr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:Ke,pattern:null,ping:Kr,placeholder:null,playsInline:_n,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:Kr,required:_n,reversed:_n,rows:Ke,rowSpan:Ke,sandbox:Kr,scope:null,scoped:_n,seamless:_n,selected:_n,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:es,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:es,width:Ke,wrap:null,align:null,aLink:null,archive:Kr,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:es,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:Ke,security:null,unselectable:null}}),V1t=HE({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:COe,properties:{about:Vu,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:Kr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:zb,g2:zb,glyphName:zb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:Vu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Kr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vu,rev:Vu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vu,requiredFeatures:Vu,requiredFonts:Vu,requiredFormats:Vu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:Vu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vu,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vu,to:null,transform:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),H1t=/^data[-\w.:]+$/i,nde=/-[a-z]/g,q1t=/[A-Z]/g;function L6(e,t){const n=vC(t);let r=t,i=vc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&H1t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(nde,G1t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!nde.test(s)){let o=s.replace(q1t,W1t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=JY}return new i(r,t)}function W1t(e){return"-"+e.toLowerCase()}function G1t(e){return e.charAt(1).toUpperCase()}const rde={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},aI=EOe([TOe,SOe,IOe,OOe,U1t],"html"),qE=EOe([TOe,SOe,IOe,OOe,V1t],"svg");function Y1t(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{QY(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var POe={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZY=Symbol.for("react.element"),eK=Symbol.for("react.portal"),F6=Symbol.for("react.fragment"),j6=Symbol.for("react.strict_mode"),B6=Symbol.for("react.profiler"),z6=Symbol.for("react.provider"),U6=Symbol.for("react.context"),K1t=Symbol.for("react.server_context"),V6=Symbol.for("react.forward_ref"),H6=Symbol.for("react.suspense"),q6=Symbol.for("react.suspense_list"),W6=Symbol.for("react.memo"),G6=Symbol.for("react.lazy"),X1t=Symbol.for("react.offscreen"),kOe;kOe=Symbol.for("react.module.reference");function _c(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZY:switch(e=e.type,e){case F6:case B6:case j6:case H6:case q6:return e;default:switch(e=e&&e.$$typeof,e){case K1t:case U6:case V6:case G6:case W6:case z6:return e;default:return t}}case eK:return t}}}xr.ContextConsumer=U6;xr.ContextProvider=z6;xr.Element=ZY;xr.ForwardRef=V6;xr.Fragment=F6;xr.Lazy=G6;xr.Memo=W6;xr.Portal=eK;xr.Profiler=B6;xr.StrictMode=j6;xr.Suspense=H6;xr.SuspenseList=q6;xr.isAsyncMode=function(){return!1};xr.isConcurrentMode=function(){return!1};xr.isContextConsumer=function(e){return _c(e)===U6};xr.isContextProvider=function(e){return _c(e)===z6};xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZY};xr.isForwardRef=function(e){return _c(e)===V6};xr.isFragment=function(e){return _c(e)===F6};xr.isLazy=function(e){return _c(e)===G6};xr.isMemo=function(e){return _c(e)===W6};xr.isPortal=function(e){return _c(e)===eK};xr.isProfiler=function(e){return _c(e)===B6};xr.isStrictMode=function(e){return _c(e)===j6};xr.isSuspense=function(e){return _c(e)===H6};xr.isSuspenseList=function(e){return _c(e)===q6};xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===F6||e===B6||e===j6||e===H6||e===q6||e===X1t||typeof e=="object"&&e!==null&&(e.$$typeof===G6||e.$$typeof===W6||e.$$typeof===z6||e.$$typeof===U6||e.$$typeof===V6||e.$$typeof===kOe||e.getModuleId!==void 0)};xr.typeOf=_c;POe.exports=xr;var Q1t=POe.exports;const J1t=El(Q1t);function Z1t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function ide(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function $Oe(e){return e.join(" ").trim()}function sde(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function ROe(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var tK={exports:{}},ode=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,evt=/\n/g,tvt=/^\s*/,nvt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,rvt=/^:\s*/,ivt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,svt=/^[;\s]*/,ovt=/^\s+|\s+$/g,avt=`
`,ade="/",ude="*",zy="",uvt="comment",lvt="declaration",cvt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(evt);m&&(n+=m.length);var g=p.lastIndexOf(avt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(tvt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(ade!=e.charAt(0)||ude!=e.charAt(1))){for(var m=2;zy!=e.charAt(m)&&(ude!=e.charAt(m)||ade!=e.charAt(m+1));)++m;if(m+=2,zy===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:uvt,comment:g})}}function d(){var p=s(),m=u(nvt);if(m){if(f(),!u(rvt))return a("property missing ':'");var g=u(ivt),y=p({type:lvt,property:lde(m[0].replace(ode,zy)),value:g?lde(g[0].replace(ode,zy)):zy});return u(svt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function lde(e){return e?e.replace(ovt,zy):zy}var fvt=cvt;function NOe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=fvt(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}tK.exports=NOe;tK.exports.default=NOe;var dvt=tK.exports;const hvt=El(dvt),MU={}.hasOwnProperty,pvt=new Set(["table","thead","tbody","tfoot","tr"]);function DOe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(mvt(e,i,r,t)):i.type==="text"?(t.type!=="element"||!pvt.has(t.tagName)||!Z1t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function mvt(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?bgt:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=qE,e.schema=l),t.properties)for(c in t.properties)MU.call(t.properties,c)&&yvt(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=DOe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&MU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===N.Fragment;if(!J1t.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=gvt(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=cj(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=bvt(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=cj(r,t),u.siblingCount=cj(r)),p||(u.node=t),f.length>0?N.createElement(h,u,f):N.createElement(h,u)}function gvt(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function cj(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function yvt(e,t,n,r){const i=L6(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?ROe(s):$Oe(s)),i.property==="style"&&typeof s=="string"&&(s=vvt(s)),i.space&&i.property?e[MU.call(rde,i.property)?rde[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function vvt(e){const t={};try{hvt(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,_vt)]=i}}function _vt(e,t){return t.toUpperCase()}function bvt(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const cde={}.hasOwnProperty,wvt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function MOe(e){for(const s in xP)if(cde.call(xP,s)&&cde.call(e,s)){const o=xP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${wvt}#${o.id}> for more info)`),delete xP[s]}const t=Ggt().use(Xyt).use(e.remarkPlugins||[]).use(L1t,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(Y1t,e),n=new $gt;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=N.createElement(N.Fragment,{},DOe({options:e,schema:aI,listDepth:0},r));return e.className&&(i=N.createElement("div",{className:e.className},i)),i}MOe.propTypes={children:Lt.string,className:Lt.string,allowElement:Lt.func,allowedElements:Lt.arrayOf(Lt.string),disallowedElements:Lt.arrayOf(Lt.string),unwrapDisallowed:Lt.bool,remarkPlugins:Lt.arrayOf(Lt.oneOfType([Lt.object,Lt.func,Lt.arrayOf(Lt.oneOfType([Lt.bool,Lt.string,Lt.object,Lt.func,Lt.arrayOf(Lt.any)]))])),rehypePlugins:Lt.arrayOf(Lt.oneOfType([Lt.object,Lt.func,Lt.arrayOf(Lt.oneOfType([Lt.bool,Lt.string,Lt.object,Lt.func,Lt.arrayOf(Lt.any)]))])),sourcePos:Lt.bool,rawSourcePos:Lt.bool,skipHtml:Lt.bool,includeElementIndex:Lt.bool,transformLinkUri:Lt.oneOfType([Lt.func,Lt.bool]),linkTarget:Lt.oneOfType([Lt.func,Lt.string]),transformImageUri:Lt.func,components:Lt.object};const LOe=-1,Y6=0,kD=1,$D=2,nK=3,rK=4,iK=5,sK=6,FOe=7,jOe=8,fde=typeof self=="object"?self:globalThis,Evt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case Y6:case LOe:return n(o,i);case kD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case $D:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case nK:return n(new Date(o),i);case rK:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case iK:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case sK:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case FOe:{const{name:a,message:u}=o;return n(new fde[a](u),i)}case jOe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new fde[s](o),i)};return r},dde=e=>Evt(new Map,e)(0),S_="",{toString:xvt}={},{keys:Svt}=Object,dS=e=>{const t=typeof e;if(t!=="object"||!e)return[Y6,t];const n=xvt.call(e).slice(8,-1);switch(n){case"Array":return[kD,S_];case"Object":return[$D,S_];case"Date":return[nK,S_];case"RegExp":return[rK,S_];case"Map":return[iK,S_];case"Set":return[sK,S_]}return n.includes("Array")?[kD,n]:n.includes("Error")?[FOe,n]:[$D,n]},SP=([e,t])=>e===Y6&&(t==="function"||t==="symbol"),Tvt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=dS(o);switch(a){case Y6:{let c=o;switch(u){case"bigint":a=jOe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([LOe],o)}return i([a,c],o)}case kD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case $D:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Svt(o))(e||!SP(dS(o[d])))&&c.push([s(d),s(o[d])]);return f}case nK:return i([a,o.toISOString()],o);case rK:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case iK:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(SP(dS(d))||SP(dS(h))))&&c.push([s(d),s(h)]);return f}case sK:{const c=[],f=i([a,c],o);for(const d of o)(e||!SP(dS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},hde=(e,{json:t,lossy:n}={})=>{const r=[];return Tvt(!(t||n),!!t,new Map,r)(e),r},pde=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?dde(hde(e,t)):structuredClone(e):(e,t)=>dde(hde(e,t)),mde=/[#.]/g;function Cvt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){mde.lastIndex=i;const a=mde.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Avt=new Set(["button","menu","reset","submit"]),LU={}.hasOwnProperty;function BOe(e,t,n){const r=n&&kvt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Cvt(s,t),l.tagName=l.tagName.toLowerCase(),r&&LU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Ivt(o,l.tagName)){let c;for(c in o)LU.call(o,c)&&Ovt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)FU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Ivt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Avt.has(e.type.toLowerCase()):!("value"in e)}function Ovt(e,t,n,r){const i=L6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=ide(r):i.commaSeparated?o=sde(r):i.commaOrSpaceSeparated?o=ide(sde(r).join(" ")):o=gde(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Pvt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=gde(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function FU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)FU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?FU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function gde(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||vC(n)===vC(t)))return!0}return n}function Pvt(e){const t=[];let n;for(n in e)LU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function kvt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const $vt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Rvt=BOe(aI,"div"),Nvt=BOe(qE,"g",$vt),fj=/\r?\n|\r/g;function Dvt(e){const t=String(e),n=[];for(fj.lastIndex=0;fj.test(t);)n.push(fj.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const r1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},zOe={}.hasOwnProperty,Mvt=Object.prototype;function Lvt(e,t){const n=t||{};return oK({file:n.file||void 0,location:!1,schema:n.space==="svg"?qE:aI,verbose:n.verbose||!1},e)}function oK(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},f$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:UOe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Dvt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},f$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},f$(e,r,n),n}default:return n=Fvt(e,t),n}}function UOe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=oK(e,t[n]);r.push(i)}return r}function Fvt(e,t){const n=e.schema;e.schema=t.namespaceURI===r1.svg?qE:aI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;zOe.call(Mvt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Nvt:Rvt)(t.tagName,i,UOe(e,t.childNodes));if(f$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&gb(u.startTag),c=u&&u.endTag&&gb(u.endTag),f=oK(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function f$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=jvt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function jvt(e,t,n){const r=gb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)zOe.call(n.attrs,o)&&(s[L6(e.schema,o).property]=gb(n.attrs[o]));n.startTag;const a=gb(n.startTag),u=n.endTag?gb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function gb(e){const t=yde({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=yde({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function yde(e){return e.line&&e.column?e:void 0}const vde={}.hasOwnProperty;function VOe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&vde.call(i,e)){const u=String(i[e]);o=vde.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Bvt={},zvt={}.hasOwnProperty,HOe=VOe("type",{handlers:{root:Vvt,element:Yvt,text:Wvt,comment:Gvt,doctype:qvt}});function Uvt(e,t){const r=(t||Bvt).space;return HOe(e,r==="svg"?qE:aI)}function Vvt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=aK(e.children,n,t),WE(e,n),n}function Hvt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=aK(e.children,n,t),WE(e,n),n}function qvt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return WE(e,t),t}function Wvt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return WE(e,t),t}function Gvt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return WE(e,t),t}function Yvt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=qE);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&zvt.call(e.properties,s)){const u=Kvt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:r1[o],childNodes:[],parentNode:null};return a.childNodes=aK(e.children,a,r),WE(e,a),e.tagName==="template"&&e.content&&(a.content=Hvt(e.content,r)),a}function Kvt(e,t,n){const r=L6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?ROe(n):$Oe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=r1[r.space]}return i}function aK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=HOe(e[r],n);s.parentNode=t,i.push(s)}return i}function WE(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Xvt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Qvt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ci="";var Y;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Y=Y||(Y={}));const Ka={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function qOe(e){return e>=55296&&e<=57343}function Jvt(e){return e>=56320&&e<=57343}function Zvt(e,t){return(e-55296)*1024+9216+t}function WOe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function GOe(e){return e>=64976&&e<=65007||Qvt.has(e)}var we;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(we=we||(we={}));const e_t=65536;class t_t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=e_t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Jvt(n))return this.pos++,this._addGap(),Zvt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Y.EOF;return this._err(we.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;const r=this.html.charCodeAt(n);return r===Y.CARRIAGE_RETURN?Y.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;let t=this.html.charCodeAt(this.pos);return t===Y.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Y.LINE_FEED):t===Y.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,qOe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Y.LINE_FEED||t===Y.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){WOe(t)?this._err(we.controlCharacterInInputStream):GOe(t)&&this._err(we.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var En;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(En=En||(En={}));function YOe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Nm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),n_t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var dj;const r_t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),i_t=(dj=String.fromCodePoint)!==null&&dj!==void 0?dj:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function s_t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=r_t.get(e))!==null&&t!==void 0?t:e}var zs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(zs||(zs={}));const o_t=32;var yd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(yd||(yd={}));function jU(e){return e>=zs.ZERO&&e<=zs.NINE}function a_t(e){return e>=zs.UPPER_A&&e<=zs.UPPER_F||e>=zs.LOWER_A&&e<=zs.LOWER_F}function u_t(e){return e>=zs.UPPER_A&&e<=zs.UPPER_Z||e>=zs.LOWER_A&&e<=zs.LOWER_Z||jU(e)}function l_t(e){return e===zs.EQUALS||u_t(e)}var Ds;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ds||(Ds={}));var Uy;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Uy||(Uy={}));class c_t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ds.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Uy.Strict}startEntity(t){this.decodeMode=t,this.state=Ds.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ds.EntityStart:return t.charCodeAt(n)===zs.NUM?(this.state=Ds.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ds.NamedEntity,this.stateNamedEntity(t,n));case Ds.NumericStart:return this.stateNumericStart(t,n);case Ds.NumericDecimal:return this.stateNumericDecimal(t,n);case Ds.NumericHex:return this.stateNumericHex(t,n);case Ds.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|o_t)===zs.LOWER_X?(this.state=Ds.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ds.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(jU(i)||a_t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(jU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===zs.SEMI)this.consumed+=1;else if(this.decodeMode===Uy.Strict)return 0;return this.emitCodePoint(s_t(this.result),this.consumed),this.errors&&(t!==zs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&yd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=XOe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Uy.Attribute&&(s===0||l_t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&yd.VALUE_LENGTH)>>14,s!==0){if(o===zs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Uy.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&yd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~yd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ds.NamedEntity:return this.result!==0&&(this.decodeMode!==Uy.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ds.NumericDecimal:return this.emitNumericEntity(0,2);case Ds.NumericHex:return this.emitNumericEntity(0,3);case Ds.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ds.EntityStart:return 0}}}function KOe(e){let t="";const n=new c_t(e,r=>t+=i_t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function XOe(e,t,n,r){const i=(t&yd.BRANCH_LENGTH)>>7,s=t&yd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}KOe(Nm);KOe(n_t);var Ce;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ce=Ce||(Ce={}));var Rg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Rg=Rg||(Rg={}));var Yu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Yu=Yu||(Yu={}));var me;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(me=me||(me={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(T=T||(T={}));const f_t=new Map([[me.A,T.A],[me.ADDRESS,T.ADDRESS],[me.ANNOTATION_XML,T.ANNOTATION_XML],[me.APPLET,T.APPLET],[me.AREA,T.AREA],[me.ARTICLE,T.ARTICLE],[me.ASIDE,T.ASIDE],[me.B,T.B],[me.BASE,T.BASE],[me.BASEFONT,T.BASEFONT],[me.BGSOUND,T.BGSOUND],[me.BIG,T.BIG],[me.BLOCKQUOTE,T.BLOCKQUOTE],[me.BODY,T.BODY],[me.BR,T.BR],[me.BUTTON,T.BUTTON],[me.CAPTION,T.CAPTION],[me.CENTER,T.CENTER],[me.CODE,T.CODE],[me.COL,T.COL],[me.COLGROUP,T.COLGROUP],[me.DD,T.DD],[me.DESC,T.DESC],[me.DETAILS,T.DETAILS],[me.DIALOG,T.DIALOG],[me.DIR,T.DIR],[me.DIV,T.DIV],[me.DL,T.DL],[me.DT,T.DT],[me.EM,T.EM],[me.EMBED,T.EMBED],[me.FIELDSET,T.FIELDSET],[me.FIGCAPTION,T.FIGCAPTION],[me.FIGURE,T.FIGURE],[me.FONT,T.FONT],[me.FOOTER,T.FOOTER],[me.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[me.FORM,T.FORM],[me.FRAME,T.FRAME],[me.FRAMESET,T.FRAMESET],[me.H1,T.H1],[me.H2,T.H2],[me.H3,T.H3],[me.H4,T.H4],[me.H5,T.H5],[me.H6,T.H6],[me.HEAD,T.HEAD],[me.HEADER,T.HEADER],[me.HGROUP,T.HGROUP],[me.HR,T.HR],[me.HTML,T.HTML],[me.I,T.I],[me.IMG,T.IMG],[me.IMAGE,T.IMAGE],[me.INPUT,T.INPUT],[me.IFRAME,T.IFRAME],[me.KEYGEN,T.KEYGEN],[me.LABEL,T.LABEL],[me.LI,T.LI],[me.LINK,T.LINK],[me.LISTING,T.LISTING],[me.MAIN,T.MAIN],[me.MALIGNMARK,T.MALIGNMARK],[me.MARQUEE,T.MARQUEE],[me.MATH,T.MATH],[me.MENU,T.MENU],[me.META,T.META],[me.MGLYPH,T.MGLYPH],[me.MI,T.MI],[me.MO,T.MO],[me.MN,T.MN],[me.MS,T.MS],[me.MTEXT,T.MTEXT],[me.NAV,T.NAV],[me.NOBR,T.NOBR],[me.NOFRAMES,T.NOFRAMES],[me.NOEMBED,T.NOEMBED],[me.NOSCRIPT,T.NOSCRIPT],[me.OBJECT,T.OBJECT],[me.OL,T.OL],[me.OPTGROUP,T.OPTGROUP],[me.OPTION,T.OPTION],[me.P,T.P],[me.PARAM,T.PARAM],[me.PLAINTEXT,T.PLAINTEXT],[me.PRE,T.PRE],[me.RB,T.RB],[me.RP,T.RP],[me.RT,T.RT],[me.RTC,T.RTC],[me.RUBY,T.RUBY],[me.S,T.S],[me.SCRIPT,T.SCRIPT],[me.SECTION,T.SECTION],[me.SELECT,T.SELECT],[me.SOURCE,T.SOURCE],[me.SMALL,T.SMALL],[me.SPAN,T.SPAN],[me.STRIKE,T.STRIKE],[me.STRONG,T.STRONG],[me.STYLE,T.STYLE],[me.SUB,T.SUB],[me.SUMMARY,T.SUMMARY],[me.SUP,T.SUP],[me.TABLE,T.TABLE],[me.TBODY,T.TBODY],[me.TEMPLATE,T.TEMPLATE],[me.TEXTAREA,T.TEXTAREA],[me.TFOOT,T.TFOOT],[me.TD,T.TD],[me.TH,T.TH],[me.THEAD,T.THEAD],[me.TITLE,T.TITLE],[me.TR,T.TR],[me.TRACK,T.TRACK],[me.TT,T.TT],[me.U,T.U],[me.UL,T.UL],[me.SVG,T.SVG],[me.VAR,T.VAR],[me.WBR,T.WBR],[me.XMP,T.XMP]]);function GE(e){var t;return(t=f_t.get(e))!==null&&t!==void 0?t:T.UNKNOWN}const je=T,d_t={[Ce.HTML]:new Set([je.ADDRESS,je.APPLET,je.AREA,je.ARTICLE,je.ASIDE,je.BASE,je.BASEFONT,je.BGSOUND,je.BLOCKQUOTE,je.BODY,je.BR,je.BUTTON,je.CAPTION,je.CENTER,je.COL,je.COLGROUP,je.DD,je.DETAILS,je.DIR,je.DIV,je.DL,je.DT,je.EMBED,je.FIELDSET,je.FIGCAPTION,je.FIGURE,je.FOOTER,je.FORM,je.FRAME,je.FRAMESET,je.H1,je.H2,je.H3,je.H4,je.H5,je.H6,je.HEAD,je.HEADER,je.HGROUP,je.HR,je.HTML,je.IFRAME,je.IMG,je.INPUT,je.LI,je.LINK,je.LISTING,je.MAIN,je.MARQUEE,je.MENU,je.META,je.NAV,je.NOEMBED,je.NOFRAMES,je.NOSCRIPT,je.OBJECT,je.OL,je.P,je.PARAM,je.PLAINTEXT,je.PRE,je.SCRIPT,je.SECTION,je.SELECT,je.SOURCE,je.STYLE,je.SUMMARY,je.TABLE,je.TBODY,je.TD,je.TEMPLATE,je.TEXTAREA,je.TFOOT,je.TH,je.THEAD,je.TITLE,je.TR,je.TRACK,je.UL,je.WBR,je.XMP]),[Ce.MATHML]:new Set([je.MI,je.MO,je.MN,je.MS,je.MTEXT,je.ANNOTATION_XML]),[Ce.SVG]:new Set([je.TITLE,je.FOREIGN_OBJECT,je.DESC]),[Ce.XLINK]:new Set,[Ce.XML]:new Set,[Ce.XMLNS]:new Set};function QOe(e){return e===je.H1||e===je.H2||e===je.H3||e===je.H4||e===je.H5||e===je.H6}me.STYLE,me.SCRIPT,me.XMP,me.IFRAME,me.NOEMBED,me.NOFRAMES,me.PLAINTEXT;const h_t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var X;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(X||(X={}));const Yi={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function a2(e){return e>=Y.DIGIT_0&&e<=Y.DIGIT_9}function lT(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_Z}function p_t(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_Z}function Dm(e){return p_t(e)||lT(e)}function BU(e){return Dm(e)||a2(e)}function JOe(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_F}function ZOe(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_F}function m_t(e){return a2(e)||JOe(e)||ZOe(e)}function TP(e){return e+32}function ePe(e){return e===Y.SPACE||e===Y.LINE_FEED||e===Y.TABULATION||e===Y.FORM_FEED}function g_t(e){return e===Y.EQUALS_SIGN||BU(e)}function _de(e){return ePe(e)||e===Y.SOLIDUS||e===Y.GREATER_THAN_SIGN}class y_t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new t_t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:En.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:En.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:En.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:En.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(YOe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(we.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=GE(t.tagName),t.type===En.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(we.endTagWithAttributes),t.selfClosing&&this._err(we.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case En.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case En.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case En.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:En.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=ePe(t)?En.WHITESPACE_CHARACTER:t===Y.NULL?En.NULL_CHARACTER:En.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(En.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Nm[0];s>=0&&(s=XOe(Nm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Nm[s];const a=o&yd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Y.SEMICOLON&&this._isCharacterReferenceInAttribute()&&g_t(this.preprocessor.peek(1))?(n=[Y.AMPERSAND],s+=u):(n=u===0?[Nm[s]&~yd.VALUE_LENGTH]:u===1?[Nm[++s]]:[Nm[++s],Nm[++s]],r=0,i=t!==Y.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(we.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case X.DATA:{this._stateData(t);break}case X.RCDATA:{this._stateRcdata(t);break}case X.RAWTEXT:{this._stateRawtext(t);break}case X.SCRIPT_DATA:{this._stateScriptData(t);break}case X.PLAINTEXT:{this._statePlaintext(t);break}case X.TAG_OPEN:{this._stateTagOpen(t);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case X.TAG_NAME:{this._stateTagName(t);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case X.BOGUS_COMMENT:{this._stateBogusComment(t);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case X.COMMENT_START:{this._stateCommentStart(t);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case X.COMMENT:{this._stateComment(t);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case X.COMMENT_END:{this._stateCommentEnd(t);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case X.DOCTYPE:{this._stateDoctype(t);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case X.CDATA_SECTION:{this._stateCdataSection(t);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case X.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case X.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case X.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case X.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case Y.AMPERSAND:{this.returnState=X.DATA,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitCodePoint(t);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Y.AMPERSAND:{this.returnState=X.RCDATA,this.state=X.CHARACTER_REFERENCE;break}case Y.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ci);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ci);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ci);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ci);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Dm(t))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case Y.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case Y.QUESTION_MARK:{this._err(we.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t);break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Dm(t))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.GREATER_THAN_SIGN:{this._err(we.missingEndTagName),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.tagName+=ci;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(lT(t)?TP(t):t)}}_stateRcdataLessThanSign(t){t===Y.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Dm(t)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case Y.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case Y.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Y.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Dm(t)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Y.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case Y.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Dm(t)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ci);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ci);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ci);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Y.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Dm(t)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Dm(t)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ka.SCRIPT,!1)&&_de(this.preprocessor.peek(Ka.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ka.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ci);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ci);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ci);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Y.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ka.SCRIPT,!1)&&_de(this.preprocessor.peek(Ka.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ka.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._err(we.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:{this._err(we.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.name+=ci;break}default:this.currentAttr.name+=String.fromCodePoint(lT(t)?TP(t):t)}}_stateAfterAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ci;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ci;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_UNQUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ci;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:case Y.EQUALS_SIGN:case Y.GRAVE_ACCENT:{this._err(we.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Y.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ci;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ka.DASH_DASH,!0)?(this._createCommentToken(Ka.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(Ka.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ka.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(Ka.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(we.cdataInHtmlContent),this._createCommentToken(Ka.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(we.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case Y.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ci;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Y.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Y.GREATER_THAN_SIGN&&t!==Y.EOF&&this._err(we.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case Y.HYPHEN_MINUS:{n.data+="-";break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(lT(t))this._createDoctypeToken(String.fromCharCode(TP(t))),this.state=X.DOCTYPE_NAME;else switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.NULL:{this._err(we.unexpectedNullCharacter),this._createDoctypeToken(ci),this.state=X.DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.name+=ci;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(lT(t)?TP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ka.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ka.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(we.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ci;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ci;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ci;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ci;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.NULL:{this._err(we.unexpectedNullCharacter);break}case Y.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Y.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case Y.EOF:{this._err(we.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Y.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA;break}case Y.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Y.NUMBER_SIGN?this.state=X.NUMERIC_CHARACTER_REFERENCE:BU(t)?(this.state=X.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this.state=X.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){BU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Y.SEMICOLON&&this._err(we.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Y.LATIN_SMALL_X||t===Y.LATIN_CAPITAL_X?this.state=X.HEXADEMICAL_CHARACTER_REFERENCE_START:a2(t)?(this.state=X.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){m_t(t)?(this.state=X.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){JOe(t)?this.charRefCode=this.charRefCode*16+t-55:ZOe(t)?this.charRefCode=this.charRefCode*16+t-87:a2(t)?this.charRefCode=this.charRefCode*16+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){a2(t)?this.charRefCode=this.charRefCode*10+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Y.NULL)this._err(we.nullCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(we.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(qOe(this.charRefCode))this._err(we.surrogateCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(GOe(this.charRefCode))this._err(we.noncharacterCharacterReference);else if(WOe(this.charRefCode)||this.charRefCode===Y.CARRIAGE_RETURN){this._err(we.controlCharacterReference);const n=h_t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const tPe=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),bde=new Set([...tPe,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),CP=new Map([[T.APPLET,Ce.HTML],[T.CAPTION,Ce.HTML],[T.HTML,Ce.HTML],[T.MARQUEE,Ce.HTML],[T.OBJECT,Ce.HTML],[T.TABLE,Ce.HTML],[T.TD,Ce.HTML],[T.TEMPLATE,Ce.HTML],[T.TH,Ce.HTML],[T.ANNOTATION_XML,Ce.MATHML],[T.MI,Ce.MATHML],[T.MN,Ce.MATHML],[T.MO,Ce.MATHML],[T.MS,Ce.MATHML],[T.MTEXT,Ce.MATHML],[T.DESC,Ce.SVG],[T.FOREIGN_OBJECT,Ce.SVG],[T.TITLE,Ce.SVG]]),v_t=[T.H1,T.H2,T.H3,T.H4,T.H5,T.H6],__t=[T.TR,T.TEMPLATE,T.HTML],b_t=[T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML],w_t=[T.TABLE,T.TEMPLATE,T.HTML],E_t=[T.TD,T.TH];class x_t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ce.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ce.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(v_t,Ce.HTML)}popUntilTableCellPopped(){this.popUntilPopped(E_t,Ce.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(w_t,Ce.HTML)}clearBackToTableBodyContext(){this.clearBackTo(b_t,Ce.HTML)}clearBackToTableRowContext(){this.clearBackTo(__t,Ce.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ce.HTML)return!0;if(CP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(QOe(n)&&r===Ce.HTML)return!0;if(CP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ce.HTML)return!0;if((r===T.UL||r===T.OL)&&i===Ce.HTML||CP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ce.HTML)return!0;if(r===T.BUTTON&&i===Ce.HTML||CP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML){if(r===t)return!0;if(r===T.TABLE||r===T.TEMPLATE||r===T.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ce.HTML){if(n===T.TBODY||n===T.THEAD||n===T.TFOOT)return!0;if(n===T.TABLE||n===T.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML){if(r===t)return!0;if(r!==T.OPTION&&r!==T.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;tPe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;bde.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&bde.has(this.currentTagId);)this.pop()}}const hj=3;var Hc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Hc=Hc||(Hc={}));const wde={type:Hc.Marker};class S_t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Hc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<hj)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<hj)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=hj&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(wde)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Hc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Hc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(wde);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Hc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Hc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Hc.Element&&n.element===t)}}function Ede(e){return{nodeName:"#text",value:e,parentNode:null}}const W_={createDocument(){return{nodeName:"#document",mode:Yu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};W_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(W_.isTextNode(n)){n.value+=t;return}}W_.appendChild(e,Ede(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&W_.isTextNode(r)?r.value+=t:W_.insertBefore(e,Ede(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},nPe="html",T_t="about:legacy-compat",C_t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",rPe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],A_t=[...rPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],I_t=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),iPe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],O_t=[...iPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function xde(e,t){return t.some(n=>e.startsWith(n))}function P_t(e){return e.name===nPe&&e.publicId===null&&(e.systemId===null||e.systemId===T_t)}function k_t(e){if(e.name!==nPe)return Yu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===C_t)return Yu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),I_t.has(n))return Yu.QUIRKS;let r=t===null?A_t:rPe;if(xde(n,r))return Yu.QUIRKS;if(r=t===null?iPe:O_t,xde(n,r))return Yu.LIMITED_QUIRKS}return Yu.NO_QUIRKS}const Sde={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},$_t="definitionurl",R_t="definitionURL",N_t=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),D_t=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ce.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ce.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ce.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ce.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ce.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ce.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ce.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ce.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ce.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ce.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ce.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ce.XMLNS}]]),M_t=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),L_t=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function F_t(e){const t=e.tagID;return t===T.FONT&&e.attrs.some(({name:r})=>r===Rg.COLOR||r===Rg.SIZE||r===Rg.FACE)||L_t.has(t)}function sPe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===$_t){e.attrs[t].name=R_t;break}}function oPe(e){for(let t=0;t<e.attrs.length;t++){const n=N_t.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function uK(e){for(let t=0;t<e.attrs.length;t++){const n=D_t.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function j_t(e){const t=M_t.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=GE(e.tagName))}function B_t(e,t){return t===Ce.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function z_t(e,t,n){if(t===Ce.MATHML&&e===T.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Rg.ENCODING){const i=n[r].value.toLowerCase();return i===Sde.TEXT_HTML||i===Sde.APPLICATION_XML}}return t===Ce.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function U_t(e,t,n,r){return(!r||r===Ce.HTML)&&z_t(e,t,n)||(!r||r===Ce.MATHML)&&B_t(e,t)}const V_t="hidden",H_t=8,q_t=3;var ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const W_t={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},aPe=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),Tde={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:W_,onParseError:null};let Cde=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Tde,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new y_t(this.options,this),this.activeFormattingElements=new S_t(this.treeAdapter),this.fragmentContextID=r?GE(this.treeAdapter.getTagName(r)):T.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new x_t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Tde,...n};t??(t=r.treeAdapter.createElement(me.TEMPLATE,Ce.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ce.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===T.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:W_t,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ce.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ce.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=Yi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===me.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ce.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=Yi.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=Yi.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=Yi.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=Yi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ce.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ce.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(me.HTML,Ce.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,T.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===En.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===T.SVG&&this.treeAdapter.getTagName(n)===me.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ce.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===T.MGLYPH||t.tagID===T.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ce.HTML)}_processToken(t){switch(t.type){case En.CHARACTER:{this.onCharacter(t);break}case En.NULL_CHARACTER:{this.onNullCharacter(t);break}case En.COMMENT:{this.onComment(t);break}case En.DOCTYPE:{this.onDoctype(t);break}case En.START_TAG:{this._processStartTag(t);break}case En.END_TAG:{this.onEndTag(t);break}case En.EOF:{this.onEof(t);break}case En.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return U_t(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Hc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case T.TR:{this.insertionMode=ee.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=ee.IN_TABLE;return}case T.BODY:{this.insertionMode=ee.IN_BODY;return}case T.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(t);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case T.TD:case T.TH:{if(t>0){this.insertionMode=ee.IN_CELL;return}break}case T.HEAD:{if(t>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===T.TEMPLATE)break;if(r===T.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(t){return aPe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ce.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case T.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return d_t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ewt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{hS(this,t);break}case ee.BEFORE_HTML:{u2(this,t);break}case ee.BEFORE_HEAD:{l2(this,t);break}case ee.IN_HEAD:{c2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{f2(this,t);break}case ee.AFTER_HEAD:{d2(this,t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{lPe(this,t);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{pj(this,t);break}case ee.IN_TABLE_TEXT:{mPe(this,t);break}case ee.IN_COLUMN_GROUP:{RD(this,t);break}case ee.AFTER_BODY:{ND(this,t);break}case ee.AFTER_AFTER_BODY:{d$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){wwt(this,t);return}switch(this.insertionMode){case ee.INITIAL:{hS(this,t);break}case ee.BEFORE_HTML:{u2(this,t);break}case ee.BEFORE_HEAD:{l2(this,t);break}case ee.IN_HEAD:{c2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{f2(this,t);break}case ee.AFTER_HEAD:{d2(this,t);break}case ee.TEXT:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{pj(this,t);break}case ee.IN_COLUMN_GROUP:{RD(this,t);break}case ee.AFTER_BODY:{ND(this,t);break}case ee.AFTER_AFTER_BODY:{d$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){zU(this,t);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{zU(this,t);break}case ee.IN_TABLE_TEXT:{pS(this,t);break}case ee.AFTER_BODY:{Z_t(this,t);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{ebt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{tbt(this,t);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(t,we.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{pS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,we.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?xwt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{hS(this,t);break}case ee.BEFORE_HTML:{nbt(this,t);break}case ee.BEFORE_HEAD:{ibt(this,t);break}case ee.IN_HEAD:{Tf(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{abt(this,t);break}case ee.AFTER_HEAD:{lbt(this,t);break}case ee.IN_BODY:{pa(this,t);break}case ee.IN_TABLE:{Ow(this,t);break}case ee.IN_TABLE_TEXT:{pS(this,t);break}case ee.IN_CAPTION:{swt(this,t);break}case ee.IN_COLUMN_GROUP:{fK(this,t);break}case ee.IN_TABLE_BODY:{Q6(this,t);break}case ee.IN_ROW:{J6(this,t);break}case ee.IN_CELL:{uwt(this,t);break}case ee.IN_SELECT:{vPe(this,t);break}case ee.IN_SELECT_IN_TABLE:{cwt(this,t);break}case ee.IN_TEMPLATE:{dwt(this,t);break}case ee.AFTER_BODY:{pwt(this,t);break}case ee.IN_FRAMESET:{mwt(this,t);break}case ee.AFTER_FRAMESET:{ywt(this,t);break}case ee.AFTER_AFTER_BODY:{_wt(this,t);break}case ee.AFTER_AFTER_FRAMESET:{bwt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Swt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{hS(this,t);break}case ee.BEFORE_HTML:{rbt(this,t);break}case ee.BEFORE_HEAD:{sbt(this,t);break}case ee.IN_HEAD:{obt(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{ubt(this,t);break}case ee.AFTER_HEAD:{cbt(this,t);break}case ee.IN_BODY:{X6(this,t);break}case ee.TEXT:{Kbt(this,t);break}case ee.IN_TABLE:{_C(this,t);break}case ee.IN_TABLE_TEXT:{pS(this,t);break}case ee.IN_CAPTION:{owt(this,t);break}case ee.IN_COLUMN_GROUP:{awt(this,t);break}case ee.IN_TABLE_BODY:{UU(this,t);break}case ee.IN_ROW:{yPe(this,t);break}case ee.IN_CELL:{lwt(this,t);break}case ee.IN_SELECT:{_Pe(this,t);break}case ee.IN_SELECT_IN_TABLE:{fwt(this,t);break}case ee.IN_TEMPLATE:{hwt(this,t);break}case ee.AFTER_BODY:{wPe(this,t);break}case ee.IN_FRAMESET:{gwt(this,t);break}case ee.AFTER_FRAMESET:{vwt(this,t);break}case ee.AFTER_AFTER_BODY:{d$(this,t);break}}}onEof(t){switch(this.insertionMode){case ee.INITIAL:{hS(this,t);break}case ee.BEFORE_HTML:{u2(this,t);break}case ee.BEFORE_HEAD:{l2(this,t);break}case ee.IN_HEAD:{c2(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{f2(this,t);break}case ee.AFTER_HEAD:{d2(this,t);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{hPe(this,t);break}case ee.TEXT:{Xbt(this,t);break}case ee.IN_TABLE_TEXT:{pS(this,t);break}case ee.IN_TEMPLATE:{bPe(this,t);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{cK(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Y.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{uPe(this,t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{pj(this,t);break}case ee.IN_TABLE_TEXT:{pPe(this,t);break}}}};function G_t(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):dPe(e,t),n}function Y_t(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function K_t(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=q_t;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=X_t(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function X_t(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Q_t(e,t,n){const r=e.treeAdapter.getTagName(t),i=GE(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===T.TEMPLATE&&s===Ce.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function J_t(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function lK(e,t){for(let n=0;n<H_t;n++){const r=G_t(e,t);if(!r)break;const i=Y_t(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=K_t(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Q_t(e,o,s),J_t(e,i,r)}}function zU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Z_t(e,t){e._appendCommentNode(t,e.openElements.items[0])}function ebt(e,t){e._appendCommentNode(t,e.document)}function cK(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function tbt(e,t){e._setDocumentType(t);const n=t.forceQuirks?Yu.QUIRKS:k_t(t);P_t(t)||e._err(t,we.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ee.BEFORE_HTML}function hS(e,t){e._err(t,we.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Yu.QUIRKS),e.insertionMode=ee.BEFORE_HTML,e._processToken(t)}function nbt(e,t){t.tagID===T.HTML?(e._insertElement(t,Ce.HTML),e.insertionMode=ee.BEFORE_HEAD):u2(e,t)}function rbt(e,t){const n=t.tagID;(n===T.HTML||n===T.HEAD||n===T.BODY||n===T.BR)&&u2(e,t)}function u2(e,t){e._insertFakeRootElement(),e.insertionMode=ee.BEFORE_HEAD,e._processToken(t)}function ibt(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.HEAD:{e._insertElement(t,Ce.HTML),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD;break}default:l2(e,t)}}function sbt(e,t){const n=t.tagID;n===T.HEAD||n===T.BODY||n===T.HTML||n===T.BR?l2(e,t):e._err(t,we.endTagWithoutMatchingOpenElement)}function l2(e,t){e._insertFakeElement(me.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD,e._processToken(t)}function Tf(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,Yi.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Yi.RAWTEXT):(e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,Yi.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,Yi.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:c2(e,t)}}function obt(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{c2(e,t);break}case T.TEMPLATE:{zv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function zv(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,we.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,we.endTagWithoutMatchingOpenElement)}function c2(e,t){e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD,e._processToken(t)}function abt(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{Tf(e,t);break}case T.NOSCRIPT:{e._err(t,we.nestedNoscriptInHead);break}default:f2(e,t)}}function ubt(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ee.IN_HEAD;break}case T.BR:{f2(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function f2(e,t){const n=t.type===En.EOF?we.openElementsLeftAfterEof:we.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ee.IN_HEAD,e._processToken(t)}function lbt(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.BODY:{e._insertElement(t,Ce.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,we.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),Tf(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:d2(e,t)}}function cbt(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{d2(e,t);break}case T.TEMPLATE:{zv(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function d2(e,t){e._insertFakeElement(me.BODY,T.BODY),e.insertionMode=ee.IN_BODY,K6(e,t)}function K6(e,t){switch(t.type){case En.CHARACTER:{lPe(e,t);break}case En.WHITESPACE_CHARACTER:{uPe(e,t);break}case En.COMMENT:{zU(e,t);break}case En.START_TAG:{pa(e,t);break}case En.END_TAG:{X6(e,t);break}case En.EOF:{hPe(e,t);break}}}function uPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function lPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function fbt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function dbt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function hbt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_FRAMESET)}function pbt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML)}function mbt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),QOe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ce.HTML)}function gbt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function ybt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),n||(e.formElement=e.openElements.current))}function vbt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===T.LI&&i===T.LI||(n===T.DD||n===T.DT)&&(i===T.DD||i===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==T.ADDRESS&&i!==T.DIV&&i!==T.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML)}function _bt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),e.tokenizer.state=Yi.PLAINTEXT}function bbt(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.framesetOk=!1}function wbt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(me.A);n&&(lK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ebt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function xbt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(lK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ce.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Sbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Tbt(e,t){e.treeAdapter.getDocumentMode(e.document)!==Yu.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ce.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_TABLE}function cPe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ce.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function fPe(e){const t=YOe(e,Rg.TYPE);return t!=null&&t.toLowerCase()===V_t}function Cbt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ce.HTML),fPe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Abt(e,t){e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0}function Ibt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,Ce.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Obt(e,t){t.tagName=me.IMG,t.tagID=T.IMG,cPe(e,t)}function Pbt(e,t){e._insertElement(t,Ce.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Yi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ee.TEXT}function kbt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Yi.RAWTEXT)}function $bt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Yi.RAWTEXT)}function Ade(e,t){e._switchToTextParsing(t,Yi.RAWTEXT)}function Rbt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ee.IN_TABLE||e.insertionMode===ee.IN_CAPTION||e.insertionMode===ee.IN_TABLE_BODY||e.insertionMode===ee.IN_ROW||e.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function Nbt(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML)}function Dbt(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ce.HTML)}function Mbt(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,Ce.HTML)}function Lbt(e,t){e._reconstructActiveFormattingElements(),sPe(t),uK(t),t.selfClosing?e._appendElement(t,Ce.MATHML):e._insertElement(t,Ce.MATHML),t.ackSelfClosing=!0}function Fbt(e,t){e._reconstructActiveFormattingElements(),oPe(t),uK(t),t.selfClosing?e._appendElement(t,Ce.SVG):e._insertElement(t,Ce.SVG),t.ackSelfClosing=!0}function Ide(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ce.HTML)}function pa(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{Ebt(e,t);break}case T.A:{wbt(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{mbt(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{pbt(e,t);break}case T.LI:case T.DD:case T.DT:{vbt(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{cPe(e,t);break}case T.HR:{Ibt(e,t);break}case T.RB:case T.RTC:{Dbt(e,t);break}case T.RT:case T.RP:{Mbt(e,t);break}case T.PRE:case T.LISTING:{gbt(e,t);break}case T.XMP:{kbt(e,t);break}case T.SVG:{Fbt(e,t);break}case T.HTML:{fbt(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{Tf(e,t);break}case T.BODY:{dbt(e,t);break}case T.FORM:{ybt(e,t);break}case T.NOBR:{xbt(e,t);break}case T.MATH:{Lbt(e,t);break}case T.TABLE:{Tbt(e,t);break}case T.INPUT:{Cbt(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{Abt(e,t);break}case T.IMAGE:{Obt(e,t);break}case T.BUTTON:{bbt(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{Sbt(e,t);break}case T.IFRAME:{$bt(e,t);break}case T.SELECT:{Rbt(e,t);break}case T.OPTION:case T.OPTGROUP:{Nbt(e,t);break}case T.NOEMBED:{Ade(e,t);break}case T.FRAMESET:{hbt(e,t);break}case T.TEXTAREA:{Pbt(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?Ade(e,t):Ide(e,t);break}case T.PLAINTEXT:{_bt(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:Ide(e,t)}}function jbt(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Bbt(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,wPe(e,t))}function zbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Ubt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):n&&e.openElements.remove(n))}function Vbt(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(me.P,T.P),e._closePElement()}function Hbt(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function qbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Wbt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Gbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Ybt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(me.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function dPe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==T.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function X6(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{lK(e,t);break}case T.P:{Vbt(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{zbt(e,t);break}case T.LI:{Hbt(e);break}case T.DD:case T.DT:{qbt(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{Wbt(e);break}case T.BR:{Ybt(e);break}case T.BODY:{jbt(e,t);break}case T.HTML:{Bbt(e,t);break}case T.FORM:{Ubt(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{Gbt(e,t);break}case T.TEMPLATE:{zv(e,t);break}default:dPe(e,t)}}function hPe(e,t){e.tmplInsertionModeStack.length>0?bPe(e,t):cK(e,t)}function Kbt(e,t){var n;t.tagID===T.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Xbt(e,t){e._err(t,we.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function pj(e,t){if(aPe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ee.IN_TABLE_TEXT,t.type){case En.CHARACTER:{mPe(e,t);break}case En.WHITESPACE_CHARACTER:{pPe(e,t);break}}else uI(e,t)}function Qbt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_CAPTION}function Jbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_COLUMN_GROUP}function Zbt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.COLGROUP,T.COLGROUP),e.insertionMode=ee.IN_COLUMN_GROUP,fK(e,t)}function ewt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_TABLE_BODY}function twt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.TBODY,T.TBODY),e.insertionMode=ee.IN_TABLE_BODY,Q6(e,t)}function nwt(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function rwt(e,t){fPe(t)?e._appendElement(t,Ce.HTML):uI(e,t),t.ackSelfClosing=!0}function iwt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ce.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Ow(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{twt(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{Tf(e,t);break}case T.COL:{Zbt(e,t);break}case T.FORM:{iwt(e,t);break}case T.TABLE:{nwt(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{ewt(e,t);break}case T.INPUT:{rwt(e,t);break}case T.CAPTION:{Qbt(e,t);break}case T.COLGROUP:{Jbt(e,t);break}default:uI(e,t)}}function _C(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{zv(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:uI(e,t)}}function uI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,K6(e,t),e.fosterParentingEnabled=n}function pPe(e,t){e.pendingCharacterTokens.push(t)}function mPe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function pS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)uI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const gPe=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function swt(e,t){const n=t.tagID;gPe.has(n)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,Ow(e,t)):pa(e,t)}function owt(e,t){const n=t.tagID;switch(n){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,n===T.TABLE&&_C(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:X6(e,t)}}function fK(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.COL:{e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{Tf(e,t);break}default:RD(e,t)}}function awt(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TEMPLATE:{zv(e,t);break}case T.COL:break;default:RD(e,t)}}function RD(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE,e._processToken(t))}function Q6(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(me.TR,T.TR),e.insertionMode=ee.IN_ROW,J6(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,Ow(e,t));break}default:Ow(e,t)}}function UU(e,t){const n=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,_C(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:_C(e,t)}}function J6(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ce.HTML),e.insertionMode=ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,Q6(e,t));break}default:Ow(e,t)}}function yPe(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,UU(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,UU(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:_C(e,t)}}function uwt(e,t){const n=t.tagID;gPe.has(n)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),J6(e,t)):pa(e,t)}function lwt(e,t){const n=t.tagID;switch(n){case T.TD:case T.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),yPe(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:X6(e,t)}}function vPe(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,Ce.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ce.HTML);break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{Tf(e,t);break}}}function _Pe(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{zv(e,t);break}}}function cwt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):vPe(e,t)}function fwt(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):_Pe(e,t)}function dwt(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{Tf(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=ee.IN_TABLE,e.insertionMode=ee.IN_TABLE,Ow(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,e.insertionMode=ee.IN_COLUMN_GROUP,fK(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,e.insertionMode=ee.IN_TABLE_BODY,Q6(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=ee.IN_ROW,e.insertionMode=ee.IN_ROW,J6(e,t);break}default:e.tmplInsertionModeStack[0]=ee.IN_BODY,e.insertionMode=ee.IN_BODY,pa(e,t)}}function hwt(e,t){t.tagID===T.TEMPLATE&&zv(e,t)}function bPe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):cK(e,t)}function pwt(e,t){t.tagID===T.HTML?pa(e,t):ND(e,t)}function wPe(e,t){var n;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else ND(e,t)}function ND(e,t){e.insertionMode=ee.IN_BODY,K6(e,t)}function mwt(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.FRAMESET:{e._insertElement(t,Ce.HTML);break}case T.FRAME:{e._appendElement(t,Ce.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{Tf(e,t);break}}}function gwt(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=ee.AFTER_FRAMESET))}function ywt(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.NOFRAMES:{Tf(e,t);break}}}function vwt(e,t){t.tagID===T.HTML&&(e.insertionMode=ee.AFTER_AFTER_FRAMESET)}function _wt(e,t){t.tagID===T.HTML?pa(e,t):d$(e,t)}function d$(e,t){e.insertionMode=ee.IN_BODY,K6(e,t)}function bwt(e,t){switch(t.tagID){case T.HTML:{pa(e,t);break}case T.NOFRAMES:{Tf(e,t);break}}}function wwt(e,t){t.chars=ci,e._insertCharacters(t)}function Ewt(e,t){e._insertCharacters(t),e.framesetOk=!1}function EPe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ce.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function xwt(e,t){if(F_t(t))EPe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ce.MATHML?sPe(t):r===Ce.SVG&&(j_t(t),oPe(t)),uK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Swt(e,t){if(t.tagID===T.P||t.tagID===T.BR){EPe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ce.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}me.AREA,me.BASE,me.BASEFONT,me.BGSOUND,me.BR,me.COL,me.EMBED,me.FRAME,me.HR,me.IMG,me.INPUT,me.KEYGEN,me.LINK,me.META,me.PARAM,me.SOURCE,me.TRACK,me.WBR;const xPe=SPe("end"),Uv=SPe("start");function SPe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const TPe=function(e){if(e==null)return Iwt;if(typeof e=="function")return Z6(e);if(typeof e=="object")return Array.isArray(e)?Twt(e):Cwt(e);if(typeof e=="string")return Awt(e);throw new Error("Expected function, string, or object as test")};function Twt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=TPe(e[n]);return Z6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Cwt(e){const t=e;return Z6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Awt(e){return Z6(t);function t(n){return n&&n.type===e}}function Z6(e){return t;function t(n,r,i){return!!(Owt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Iwt(){return!0}function Owt(e){return e!==null&&typeof e=="object"&&"type"in e}const CPe=[],Pwt=!0,Ode=!1,kwt="skip";function $wt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=TPe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=CPe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Rwt(n(u,c)),h[0]===Ode))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==kwt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Ode)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Rwt(e){return Array.isArray(e)?e:typeof e=="number"?[Pwt,e]:e==null?CPe:[e]}function Nwt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),$wt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Dwt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Pde={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function APe(e,t){const n=qwt(e),r=VOe("type",{handlers:{root:Mwt,element:Lwt,text:Fwt,comment:OPe,doctype:jwt,raw:zwt},unknown:Uwt}),i={parser:n?new Cde(Pde):Cde.getFragmentParser(void 0,Pde),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),YE(i,Uv());const s=n?i.parser.document:i.parser.getFragment(),o=Lvt(s,{file:i.options.file});return i.stitches&&Nwt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function IPe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Mwt(e,t){IPe(e.children,t)}function Lwt(e,t){Vwt(e,t),IPe(e.children,t),Hwt(e,t)}function Fwt(e,t){const n={type:En.CHARACTER,chars:e.value,location:lI(e)};YE(t,Uv(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function jwt(e,t){const n={type:En.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:lI(e)};YE(t,Uv(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Bwt(e,t){t.stitches=!0;const n=Wwt(e);if("children"in e&&"children"in n){const r=APe({type:"root",children:e.children},t.options);n.children=r.children}OPe({type:"comment",value:{stitch:n}},t)}function OPe(e,t){const n=e.value,r={type:En.COMMENT,data:n,location:lI(e)};YE(t,Uv(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function zwt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,PPe(t,Uv(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Uwt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Bwt(n,t);else{let r="";throw Dwt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function YE(e,t){PPe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Yi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function PPe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Vwt(e,t){if(t.parser.tokenizer.state===Yi.PLAINTEXT)return;YE(t,Uv(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:r1.html;r===r1.html&&e.tagName==="svg"&&(r=r1.svg);const i=Uvt({...e,children:[]},{space:r===r1.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:En.START_TAG,tagName:e.tagName,tagID:GE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:lI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function Hwt(e,t){if(!t.parser.tokenizer.inForeignNode&&Xvt.includes(e.tagName)||t.parser.tokenizer.state===Yi.PLAINTEXT)return;YE(t,xPe(e));const n={type:En.END_TAG,tagName:e.tagName,tagID:GE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:lI(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Yi.RCDATA||t.parser.tokenizer.state===Yi.RAWTEXT||t.parser.tokenizer.state===Yi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Yi.DATA)}function qwt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function lI(e){const t=Uv(e)||{line:void 0,column:void 0,offset:void 0},n=xPe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Wwt(e){return"children"in e?pde({...e,children:[]}):pde(e)}function Gwt(e){return function(t,n){return APe(t,{...e,file:n})}}function Na({text:e,required:t}){const n={img:({node:i,...s})=>I.jsx(jv,{...s}),p:({node:i,...s})=>I.jsx(ct,{...s,pb:8}),h1:({node:i,...s})=>I.jsx(Wo,{order:1,...s,pb:12}),h2:({node:i,...s})=>I.jsx(Wo,{order:2,...s,pb:12}),h3:({node:i,...s})=>I.jsx(Wo,{order:3,...s,pb:12}),h4:({node:i,...s})=>I.jsx(Wo,{order:4,...s,pb:12}),h5:({node:i,...s})=>I.jsx(Wo,{order:5,...s,pb:12}),h6:({node:i,...s})=>I.jsx(Wo,{order:6,...s,pb:12}),a:({node:i,...s})=>I.jsx(x6,{...s}),ul:({node:i,...s})=>I.jsx(C1,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>I.jsx(C1,{type:"ordered",withPadding:!0,...s,pb:8})},r='<span style="color: #fa5252">*</span>';return I.jsx(MOe,{components:n,rehypePlugins:[Gwt],children:e+(t?` ${r}`:"")})}function kPe({errors:e}){const t=`
      There was an issue loading the study config. Please check the following errors:  

      ${e.map(n=>`- You have an error at ${n.instancePath||"root"}: ${n.message} - ${JSON.stringify(n.params)}  `).join(`
`)}
    `.replace(/\n\s+/g,`
`);return I.jsx(Na,{text:t})}const Ywt="https://github.com/revisit-studies/study/tree/main/public/";function Kwt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=im();return I.jsxs(lm,{size:"xs",px:"xs",style:{marginTop:60,marginBottom:60},children:[I.jsx(jv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${mc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),I.jsx(ct,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=WY(i);return I.jsx(sm,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:I.jsx(k6,{shadow:"sm",radius:"md",withBorder:!0,children:s.errors?I.jsxs(I.Fragment,{children:[I.jsxs(Ur,{align:"center",direction:"row",children:[I.jsx(Zmt,{color:"red"}),I.jsx(ct,{fw:"bold",ml:8,color:"red",children:i})]}),I.jsx(kPe,{errors:s.errors})]}):I.jsxs(I.Fragment,{children:[I.jsx(ct,{fw:"bold",children:s.studyMetadata.title}),I.jsx(ct,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),I.jsx(ct,{c:"dimmed",children:s.studyMetadata.description}),I.jsx(ct,{c:"dimmed",ta:"right",style:{paddingRight:5},children:I.jsxs(x6,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Ywt}${o}`,children:["View source:"," ",o]})})]})})},i)})]})}var $Pe={exports:{}},RPe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=C;function Xwt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qwt=typeof Object.is=="function"?Object.is:Xwt,Jwt=Pw.useState,Zwt=Pw.useEffect,eEt=Pw.useLayoutEffect,tEt=Pw.useDebugValue;function nEt(e,t){var n=t(),r=Jwt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return eEt(function(){i.value=n,i.getSnapshot=t,mj(i)&&s({inst:i})},[e,n,t]),Zwt(function(){return mj(i)&&s({inst:i}),e(function(){mj(i)&&s({inst:i})})},[e]),tEt(n),n}function mj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qwt(e,n)}catch{return!0}}function rEt(e,t){return t()}var iEt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rEt:nEt;RPe.useSyncExternalStore=Pw.useSyncExternalStore!==void 0?Pw.useSyncExternalStore:iEt;$Pe.exports=RPe;var sEt=$Pe.exports,NPe={exports:{}},DPe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e4=C,oEt=sEt;function aEt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var uEt=typeof Object.is=="function"?Object.is:aEt,lEt=oEt.useSyncExternalStore,cEt=e4.useRef,fEt=e4.useEffect,dEt=e4.useMemo,hEt=e4.useDebugValue;DPe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=cEt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=dEt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,uEt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=lEt(e,s[0],s[1]);return fEt(function(){o.hasValue=!0,o.value=a},[a]),hEt(a),a};NPe.exports=DPe;var pEt=NPe.exports;function mEt(e){e()}let MPe=mEt;const gEt=e=>MPe=e,yEt=()=>MPe,e0=C.createContext(null);function LPe(){return C.useContext(e0)}const vEt=()=>{throw new Error("uSES not initialized!")};let FPe=vEt;const _Et=e=>{FPe=e},bEt=(e,t)=>e===t;function wEt(e=e0){const t=e===e0?LPe:()=>C.useContext(e);return function(r,i=bEt){const{store:s,subscription:o,getServerState:a}=t(),u=FPe(o.addNestedSub,s.getState,a||s.getState,r,i);return C.useDebugValue(u),u}}const EEt=wEt();var kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dK=Symbol.for("react.element"),hK=Symbol.for("react.portal"),t4=Symbol.for("react.fragment"),n4=Symbol.for("react.strict_mode"),r4=Symbol.for("react.profiler"),i4=Symbol.for("react.provider"),s4=Symbol.for("react.context"),xEt=Symbol.for("react.server_context"),o4=Symbol.for("react.forward_ref"),a4=Symbol.for("react.suspense"),u4=Symbol.for("react.suspense_list"),l4=Symbol.for("react.memo"),c4=Symbol.for("react.lazy"),SEt=Symbol.for("react.offscreen"),jPe;jPe=Symbol.for("react.module.reference");function bc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dK:switch(e=e.type,e){case t4:case r4:case n4:case a4:case u4:return e;default:switch(e=e&&e.$$typeof,e){case xEt:case s4:case o4:case c4:case l4:case i4:return e;default:return t}}case hK:return t}}}kr.ContextConsumer=s4;kr.ContextProvider=i4;kr.Element=dK;kr.ForwardRef=o4;kr.Fragment=t4;kr.Lazy=c4;kr.Memo=l4;kr.Portal=hK;kr.Profiler=r4;kr.StrictMode=n4;kr.Suspense=a4;kr.SuspenseList=u4;kr.isAsyncMode=function(){return!1};kr.isConcurrentMode=function(){return!1};kr.isContextConsumer=function(e){return bc(e)===s4};kr.isContextProvider=function(e){return bc(e)===i4};kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dK};kr.isForwardRef=function(e){return bc(e)===o4};kr.isFragment=function(e){return bc(e)===t4};kr.isLazy=function(e){return bc(e)===c4};kr.isMemo=function(e){return bc(e)===l4};kr.isPortal=function(e){return bc(e)===hK};kr.isProfiler=function(e){return bc(e)===r4};kr.isStrictMode=function(e){return bc(e)===n4};kr.isSuspense=function(e){return bc(e)===a4};kr.isSuspenseList=function(e){return bc(e)===u4};kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===t4||e===r4||e===n4||e===a4||e===u4||e===SEt||typeof e=="object"&&e!==null&&(e.$$typeof===c4||e.$$typeof===l4||e.$$typeof===i4||e.$$typeof===s4||e.$$typeof===o4||e.$$typeof===jPe||e.getModuleId!==void 0)};kr.typeOf=bc;function TEt(){const e=yEt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const kde={notify(){},get:()=>[]};function CEt(e,t){let n,r=kde;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=TEt())}function l(){n&&(n(),n=void 0,r.clear(),r=kde)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const AEt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IEt=AEt?C.useLayoutEffect:C.useEffect;function OEt({store:e,context:t,children:n,serverState:r}){const i=C.useMemo(()=>{const a=CEt(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=C.useMemo(()=>e.getState(),[e]);IEt(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||e0;return N.createElement(o.Provider,{value:i},n)}function BPe(e=e0){const t=e===e0?LPe:()=>C.useContext(e);return function(){const{store:r}=t();return r}}const PEt=BPe();function kEt(e=e0){const t=e===e0?PEt:BPe(e);return function(){return t().dispatch}}const zPe=kEt();_Et(pEt.useSyncExternalStoreWithSelector);gEt(Dv.unstable_batchedUpdates);function f4(){const{studyId:e}=xw();return`${e}`}function wc(){const{index:e}=xw();return parseInt(e||"0",10)}function Wc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function t0(e){return!!e&&!!e[di]}function Mp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===BEt}(e)||Array.isArray(e)||!!e[Fde]||!!(!((t=e.constructor)===null||t===void 0)&&t[Fde])||pK(e)||mK(e))}function Q1(e,t,n){n===void 0&&(n=!1),KE(e)===0?(n?Object.keys:Vb)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function KE(e){var t=e[di];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:pK(e)?2:mK(e)?3:0}function Ub(e,t){return KE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $Et(e,t){return KE(e)===2?e.get(t):e[t]}function UPe(e,t,n){var r=KE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function VPe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function pK(e){return FEt&&e instanceof Map}function mK(e){return jEt&&e instanceof Set}function Iy(e){return e.o||e.t}function gK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=qPe(e);delete t[di];for(var n=Vb(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function yK(e,t){return t===void 0&&(t=!1),vK(e)||t0(e)||!Mp(e)||(KE(e)>1&&(e.set=e.add=e.clear=e.delete=REt),Object.freeze(e),t&&Q1(e,function(n,r){return yK(r,!0)},!0)),e}function REt(){Wc(2)}function vK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ad(e){var t=WU[e];return t||Wc(18,e),t}function NEt(e,t){WU[e]||(WU[e]=t)}function VU(){return bC}function gj(e,t){t&&(Ad("Patches"),e.u=[],e.s=[],e.v=t)}function DD(e){HU(e),e.p.forEach(DEt),e.p=null}function HU(e){e===bC&&(bC=e.l)}function $de(e){return bC={p:[],l:bC,h:e,m:!0,_:0}}function DEt(e){var t=e[di];t.i===0||t.i===1?t.j():t.O=!0}function yj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Ad("ES5").S(t,e,r),r?(n[di].P&&(DD(t),Wc(4)),Mp(e)&&(e=MD(t,e),t.l||LD(t,e)),t.u&&Ad("Patches").M(n[di].t,e,t.u,t.s)):e=MD(t,n,[]),DD(t),t.u&&t.v(t.u,t.s),e!==HPe?e:void 0}function MD(e,t,n){if(vK(t))return t;var r=t[di];if(!r)return Q1(t,function(a,u){return Rde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return LD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=gK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Q1(s,function(a,u){return Rde(e,r,i,a,u,n,o)}),LD(e,i,!1),n&&e.u&&Ad("Patches").N(r,n,e.u,e.s)}return r.o}function Rde(e,t,n,r,i,s,o){if(t0(i)){var a=MD(e,i,s&&t&&t.i!==3&&!Ub(t.R,r)?s.concat(r):void 0);if(UPe(n,r,a),!t0(a))return;e.m=!1}else o&&n.add(i);if(Mp(i)&&!vK(i)){if(!e.h.D&&e._<1)return;MD(e,i),t&&t.A.l||LD(e,i)}}function LD(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&yK(t,n)}function vj(e,t){var n=e[di];return(n?Iy(n):e)[t]}function Nde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Zm(e){e.P||(e.P=!0,e.l&&Zm(e.l))}function _j(e){e.o||(e.o=gK(e.t))}function qU(e,t,n){var r=pK(t)?Ad("MapSet").F(t,n):mK(t)?Ad("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:VU(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=wC;o&&(u=[a],l=cT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ad("ES5").J(t,n);return(n?n.A:VU()).p.push(r),r}function MEt(e){return t0(e)||Wc(22,e),function t(n){if(!Mp(n))return n;var r,i=n[di],s=KE(n);if(i){if(!i.P&&(i.i<4||!Ad("ES5").K(i)))return i.t;i.I=!0,r=Dde(n,s),i.I=!1}else r=Dde(n,s);return Q1(r,function(o,a){i&&$Et(i.t,o)===a||UPe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Dde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return gK(e)}function LEt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[di];return wC.get(u,s)},set:function(u){var l=this[di];wC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][di];if(!a.P)switch(a.i){case 5:r(a)&&Zm(a);break;case 4:n(a)&&Zm(a)}}}function n(s){for(var o=s.t,a=s.k,u=Vb(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==di){var f=o[c];if(f===void 0&&!Ub(o,c))return!0;var d=a[c],h=d&&d[di];if(h?h.t!==f:!VPe(d,f))return!0}}var p=!!o[di];return u.length!==Vb(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};NEt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=qPe(f);delete p[di];for(var m=Vb(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:VU(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,di,{value:l,writable:!0}),u},S:function(s,o,a){a?t0(o)&&o[di].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[di];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Q1(d,function(_){_!==di&&(f[_]!==void 0||Ub(f,_)?h[_]||u(d[_]):(h[_]=!0,Zm(c)))}),Q1(f,function(_){d[_]!==void 0||Ub(d,_)||(h[_]=!1,Zm(c))});else if(p===5){if(r(c)&&(Zm(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Mde,bC,_K=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",FEt=typeof Map<"u",jEt=typeof Set<"u",Lde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",HPe=_K?Symbol.for("immer-nothing"):((Mde={})["immer-nothing"]=!0,Mde),Fde=_K?Symbol.for("immer-draftable"):"__$immer_draftable",di=_K?Symbol.for("immer-state"):"__$immer_state",BEt=""+Object.prototype.constructor,Vb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,qPe=Object.getOwnPropertyDescriptors||function(e){var t={};return Vb(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},WU={},wC={get:function(e,t){if(t===di)return e;var n=Iy(e);if(!Ub(n,t))return function(i,s,o){var a,u=Nde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Mp(r)?r:r===vj(e.t,t)?(_j(e),e.o[t]=qU(e.A.h,r,e)):r},has:function(e,t){return t in Iy(e)},ownKeys:function(e){return Reflect.ownKeys(Iy(e))},set:function(e,t,n){var r=Nde(Iy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=vj(Iy(e),t),s=i==null?void 0:i[di];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(VPe(n,i)&&(n!==void 0||Ub(e.t,t)))return!0;_j(e),Zm(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return vj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,_j(e),Zm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Iy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Wc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Wc(12)}},cT={};Q1(wC,function(e,t){cT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),cT.deleteProperty=function(e,t){return cT.set.call(this,e,t,void 0)},cT.set=function(e,t,n){return wC.set.call(this,e[0],t,n,e[0])};var zEt=function(){function e(n){var r=this;this.g=Lde,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&Wc(6),o!==void 0&&typeof o!="function"&&Wc(7),Mp(i)){var c=$de(r),f=qU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?DD(c):HU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return gj(c,o),yj(m,c)},function(m){throw DD(c),m}):(gj(c,o),yj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===HPe&&(l=void 0),r.D&&yK(l,!0),o){var h=[],p=[];Ad("Patches").M(i,l,h,p),o(h,p)}return l}Wc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Mp(n)||Wc(8),t0(n)&&(n=MEt(n));var r=$de(this),i=qU(this,n,void 0);return i[di].C=!0,HU(r),i},t.finishDraft=function(n,r){var i=n&&n[di],s=i.A;return gj(s,r),yj(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Lde&&Wc(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ad("Patches").$;return t0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),dl=new zEt,WPe=dl.produce;dl.produceWithPatches.bind(dl);dl.setAutoFreeze.bind(dl);dl.setUseProxies.bind(dl);dl.applyPatches.bind(dl);dl.createDraft.bind(dl);dl.finishDraft.bind(dl);function EC(e){"@babel/helpers - typeof";return EC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EC(e)}function UEt(e,t){if(EC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(EC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VEt(e){var t=UEt(e,"string");return EC(t)=="symbol"?t:String(t)}function HEt(e,t,n){return t=VEt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Bde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jde(Object(n),!0).forEach(function(r){HEt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jde(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var zde=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),bj=function(){return Math.random().toString(36).substring(7).split("").join(".")},FD={INIT:"@@redux/INIT"+bj(),REPLACE:"@@redux/REPLACE"+bj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+bj()}};function qEt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function GPe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(zo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(zo(1));return n(GPe)(e,t)}if(typeof e!="function")throw new Error(zo(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(zo(3));return s}function f(m){if(typeof m!="function")throw new Error(zo(4));if(u)throw new Error(zo(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(zo(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!qEt(m))throw new Error(zo(7));if(typeof m.type>"u")throw new Error(zo(8));if(u)throw new Error(zo(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(zo(10));i=m,d({type:FD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(zo(11));function _(){v.next&&v.next(c())}_();var b=g(_);return{unsubscribe:b}}},m[zde]=function(){return this},m}return d({type:FD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[zde]=p,r}function WEt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:FD.INIT});if(typeof r>"u")throw new Error(zo(12));if(typeof n(void 0,{type:FD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zo(13))})}function GEt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{WEt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(zo(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function jD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function YEt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(zo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=jD.apply(void 0,a)(i.dispatch),Bde(Bde({},i),{},{dispatch:s})}}}function YPe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var KPe=YPe();KPe.withExtraArgument=YPe;const Ude=KPe;var KEt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},xC=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},XEt=Object.defineProperty,QEt=Object.defineProperties,JEt=Object.getOwnPropertyDescriptors,Vde=Object.getOwnPropertySymbols,ZEt=Object.prototype.hasOwnProperty,ext=Object.prototype.propertyIsEnumerable,Hde=function(e,t,n){return t in e?XEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ng=function(e,t){for(var n in t||(t={}))ZEt.call(t,n)&&Hde(e,n,t[n]);if(Vde)for(var r=0,i=Vde(t);r<i.length;r++){var n=i[r];ext.call(t,n)&&Hde(e,n,t[n])}return e},wj=function(e,t){return QEt(e,JEt(t))},fI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},txt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jD:jD.apply(null,arguments)};function nxt(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var rxt=function(e){KEt(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,xC([void 0],n[0].concat(this)))):new(t.bind.apply(t,xC([void 0],n.concat(this))))},t}(Array);function GU(e){return Mp(e)?WPe(e,function(){}):e}function ixt(e){return typeof e=="boolean"}function sxt(){return function(t){return oxt(t)}}function oxt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new rxt;return n&&(ixt(n)?r.push(Ude):r.push(Ude.withExtraArgument(n.extraArgument))),r}var axt=!0;function XPe(e){var t=sxt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(nxt(i))h=GEt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=YEt.apply(void 0,p),g=jD;u&&(g=txt(Ng({trace:!axt},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=xC([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return GPe(h,c,v)}function Id(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Ng(Ng({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function QPe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function uxt(e){return typeof e=="function"}function lxt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?QPe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(uxt(e))u=function(){return GU(e())};else{var l=GU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=xC([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(t0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Mp(p))return WPe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function cxt(e,t){return e+"/"+t}function JPe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:GU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=cxt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Id(d,p):Id(d)});function u(){var c=typeof e.extraReducers=="function"?QPe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Ng(Ng({},d),o);return lxt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var b=0,E=p;b<E.length;b++){var w=E[b];v.addMatcher(w.matcher,w.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var fxt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ZPe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=fxt[Math.random()*64|0];return t},dxt=["name","message","stack","code"],Ej=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),qde=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),hxt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=dxt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Id(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:wj(Ng({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Id(t+"/pending",function(l,c,f){return{payload:void 0,meta:wj(Ng({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Id(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||hxt)(l||"Rejected"),meta:wj(Ng({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):ZPe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return fI(this,null,function(){var v,_,b,E,w,x,S;return cI(this,function(P){switch(P.label){case 0:return P.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),mxt(E)?[4,E]:[3,2];case 1:E=P.sent(),P.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(A,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([w,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(A,O){return new Ej(A,O)},fulfillWithValue:function(A,O){return new qde(A,O)}})).then(function(A){if(A instanceof Ej)throw A;return A instanceof qde?i(A.payload,h,l,A.meta):i(A,h,l)})])];case 3:return b=P.sent(),[3,5];case 4:return x=P.sent(),b=x instanceof Ej?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition,S||c(b),[2,b]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(pxt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function pxt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function mxt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var gxt=function(e){return e&&typeof e.match=="function"},yxt=function(e,t){return gxt(e)?e.match(t):e(t)};function Wde(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return yxt(r,n)})}}var bK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},YU=function(){},eke=function(e,t){return t===void 0&&(t=YU),e.catch(t),e},tke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Hb=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},vxt="task",nke="listener",rke="completed",wK="cancelled",_xt="task-"+wK,bxt="task-"+rke,ike=nke+"-"+wK,wxt=nke+"-"+rke,d4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=vxt+" "+wK+" (reason: "+t+")"}return e}(),qb=function(e){if(e.aborted)throw new d4(e.reason)};function ske(e,t){var n=YU;return new Promise(function(r,i){var s=function(){return i(new d4(e.reason))};if(e.aborted){s();return}n=tke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=YU})}var Ext=function(e,t){return fI(void 0,null,function(){var n,r;return cI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof d4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},BD=function(e){return function(t){return eke(ske(e,t).then(function(n){return qb(e),n}))}},oke=function(e){var t=BD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},xxt=Object.assign,Gde={},dI="listenerMiddleware",Sxt=function(e){var t=function(n){return tke(e,function(){return Hb(n,e.reason)})};return function(n){bK(n,"taskExecutor");var r=new AbortController;t(r);var i=Ext(function(){return fI(void 0,null,function(){var s;return cI(this,function(o){switch(o.label){case 0:return qb(e),qb(r.signal),[4,n({pause:BD(r.signal),delay:oke(r.signal),signal:r.signal})];case 1:return s=o.sent(),qb(r.signal),[2,s]}})})},function(){return Hb(r,bxt)});return{result:BD(e)(i),cancel:function(){Hb(r,_xt)}}}},Txt=function(e,t){var n=function(r,i){return fI(void 0,null,function(){var s,o,a,u;return cI(this,function(l){switch(l.label){case 0:qb(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,ske(t,Promise.race(a))];case 2:return u=l.sent(),qb(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return eke(n(r,i))}},ake=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Id(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return bK(s,"options.listener"),{predicate:i,type:t,effect:s}},Cxt=function(e){var t=ake(e),n=t.type,r=t.predicate,i=t.effect,s=ZPe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},KU=function(e){e.pending.forEach(function(t){Hb(t,ike)})},Axt=function(e){return function(){e.forEach(KU),e.clear()}},Yde=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Ixt=Id(dI+"/add"),Oxt=Id(dI+"/removeAll"),Pxt=Id(dI+"/remove"),kxt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,xC([dI+"/error"],e))};function $xt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?kxt:i;bK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&KU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Cxt(h)),o(p)},l=function(h){var p=ake(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var b=typeof m=="string"?_.type===m:_.predicate===y;return b&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&KU(v)),!!v},c=function(h,p,m,g){return fI(t,null,function(){var y,v,_;return cI(this,function(b){switch(b.label){case 0:y=new AbortController,v=Txt(u,y.signal),b.label=1;case 1:return b.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,xxt({},m,{getOriginalState:g,condition:function(E,w){return v(E,w).then(Boolean)},take:v,delay:oke(y.signal),pause:BD(y.signal),extra:r,signal:y.signal,fork:Sxt(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(E,w,x){E!==y&&(Hb(E,ike),x.delete(E))})}})))];case 2:return b.sent(),[3,5];case 3:return _=b.sent(),_ instanceof d4||Yde(s,_,{raisedBy:"effect"}),[3,5];case 4:return Hb(y,wxt),h.pending.delete(y),[7];case 5:return[2]}})})},f=Axt(n),d=function(h){return function(p){return function(m){if(Ixt.match(m))return u(m.payload);if(Oxt.match(m)){f();return}if(Pxt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Gde)throw new Error(dI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),b=Array.from(n.values()),E=0,w=b;E<w.length;E++){var x=w[E],S=!1;try{S=x.predicate(m,_,g)}catch(P){S=!1,Yde(s,P,{raisedBy:"predicate"})}S&&c(x,m,h,y)}}finally{g=Gde}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Kde;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);LEt();function Lp(e){return e.components.flatMap(t=>typeof t=="string"?t:Lp(t))}function uke(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Lp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Lp(e).length-1}];r+=1}else{const o=uke(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function lke(e,t){const n=uke(e,t,0);return typeof n=="number"?null:n}function cke(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=cke(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Rxt(e,t){const n=cke(e,t,0);return n.found?n.distance:-1}function fke(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...fke(i,`${t}-${s}`))}),n}async function Nxt(e,t,n,r,i,s){const o=Lp(n),a={...o.map(h=>({[h]:{}}))},u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:i||a,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=JPe({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:b}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:b}}}});return{store:XPe({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const dke=C.createContext(null);function uh(){return C.useContext(dke).actions}const lh=zPe,Cf=EEt;function Dxt(e){return Cf(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function ch(){return Cf(e=>Lp(e.sequence))}var zD={exports:{}};zD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",b="[object RegExp]",E="[object Set]",w="[object String]",x="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",M="[object Int8Array]",R="[object Int16Array]",D="[object Int32Array]",L="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",H="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,k=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,q={};q[O]=q[z]=q[M]=q[R]=q[D]=q[L]=q[V]=q[B]=q[H]=!0,q[a]=q[u]=q[P]=q[c]=q[A]=q[f]=q[d]=q[h]=q[m]=q[g]=q[v]=q[b]=q[E]=q[w]=q[S]=!1;var F=typeof du=="object"&&du&&du.Object===Object&&du,j=typeof self=="object"&&self&&self.Object===Object&&self,Q=F||j||Function("return this")(),se=t&&!t.nodeType&&t,ae=se&&!0&&e&&!e.nodeType&&e,ce=ae&&ae.exports===se,le=ce&&F.process,ge=function(){try{var Z=ae&&ae.require&&ae.require("util").types;return Z||le&&le.binding&&le.binding("util")}catch{}}(),ue=ge&&ge.isTypedArray;function Fe(Z,de,be){switch(be.length){case 0:return Z.call(de);case 1:return Z.call(de,be[0]);case 2:return Z.call(de,be[0],be[1]);case 3:return Z.call(de,be[0],be[1],be[2])}return Z.apply(de,be)}function $e(Z,de){for(var be=-1,vt=Array(Z);++be<Z;)vt[be]=de(be);return vt}function Ge(Z){return function(de){return Z(de)}}function Re(Z,de){return Z==null?void 0:Z[de]}function Oe(Z,de){return function(be){return Z(de(be))}}var Me=Array.prototype,Ut=Function.prototype,Qe=Object.prototype,Be=Q["__core-js_shared__"],xt=Ut.toString,et=Qe.hasOwnProperty,ft=function(){var Z=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),dt=Qe.toString,Bt=xt.call(Object),Dn=RegExp("^"+xt.call(et).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ce?Q.Buffer:void 0,_e=Q.Symbol,Pe=Q.Uint8Array,it=he?he.allocUnsafe:void 0,Ye=Oe(Object.getPrototypeOf,Object),ut=Object.create,tt=Qe.propertyIsEnumerable,wt=Me.splice,In=_e?_e.toStringTag:void 0,Wt=function(){try{var Z=He(Object,"defineProperty");return Z({},"",{}),Z}catch{}}(),Vt=he?he.isBuffer:void 0,hr=Math.max,Yn=Date.now,ju=He(Q,"Map"),Lr=He(Object,"create"),ds=function(){function Z(){}return function(de){if(!cy(de))return{};if(ut)return ut(de);Z.prototype=de;var be=new Z;return Z.prototype=void 0,be}}();function ii(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var vt=Z[de];this.set(vt[0],vt[1])}}function Ai(){this.__data__=Lr?Lr(null):{},this.size=0}function Gr(Z){var de=this.has(Z)&&delete this.__data__[Z];return this.size-=de?1:0,de}function yr(Z){var de=this.__data__;if(Lr){var be=de[Z];return be===r?void 0:be}return et.call(de,Z)?de[Z]:void 0}function _t(Z){var de=this.__data__;return Lr?de[Z]!==void 0:et.call(de,Z)}function Fr(Z,de){var be=this.__data__;return this.size+=this.has(Z)?0:1,be[Z]=Lr&&de===void 0?r:de,this}ii.prototype.clear=Ai,ii.prototype.delete=Gr,ii.prototype.get=yr,ii.prototype.has=_t,ii.prototype.set=Fr;function Ii(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var vt=Z[de];this.set(vt[0],vt[1])}}function Ji(){this.__data__=[],this.size=0}function no(Z){var de=this.__data__,be=si(de,Z);if(be<0)return!1;var vt=de.length-1;return be==vt?de.pop():wt.call(de,be,1),--this.size,!0}function Wa(Z){var de=this.__data__,be=si(de,Z);return be<0?void 0:de[be][1]}function ne(Z){return si(this.__data__,Z)>-1}function J(Z,de){var be=this.__data__,vt=si(be,Z);return vt<0?(++this.size,be.push([Z,de])):be[vt][1]=de,this}Ii.prototype.clear=Ji,Ii.prototype.delete=no,Ii.prototype.get=Wa,Ii.prototype.has=ne,Ii.prototype.set=J;function ie(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var vt=Z[de];this.set(vt[0],vt[1])}}function ve(){this.size=0,this.__data__={hash:new ii,map:new(ju||Ii),string:new ii}}function ye(Z){var de=ze(this,Z).delete(Z);return this.size-=de?1:0,de}function yt(Z){return ze(this,Z).get(Z)}function Ae(Z){return ze(this,Z).has(Z)}function pt(Z,de){var be=ze(this,Z),vt=be.size;return be.set(Z,de),this.size+=be.size==vt?0:1,this}ie.prototype.clear=ve,ie.prototype.delete=ye,ie.prototype.get=yt,ie.prototype.has=Ae,ie.prototype.set=pt;function jt(Z){var de=this.__data__=new Ii(Z);this.size=de.size}function At(){this.__data__=new Ii,this.size=0}function Ht(Z){var de=this.__data__,be=de.delete(Z);return this.size=de.size,be}function fn(Z){return this.__data__.get(Z)}function Tr(Z){return this.__data__.has(Z)}function zt(Z,de){var be=this.__data__;if(be instanceof Ii){var vt=be.__data__;if(!ju||vt.length<n-1)return vt.push([Z,de]),this.size=++be.size,this;be=this.__data__=new ie(vt)}return be.set(Z,de),this.size=be.size,this}jt.prototype.clear=At,jt.prototype.delete=Ht,jt.prototype.get=fn,jt.prototype.has=Tr,jt.prototype.set=zt;function pr(Z,de){var be=q8(Z),vt=!be&&__(Z),Hn=!be&&!vt&&Qie(Z),Rr=!be&&!vt&&!Hn&&Zie(Z),ai=be||vt||Hn||Rr,Mn=ai?$e(Z.length,String):[],ui=Mn.length;for(var Il in Z)(de||et.call(Z,Il))&&!(ai&&(Il=="length"||Hn&&(Il=="offset"||Il=="parent")||Rr&&(Il=="buffer"||Il=="byteLength"||Il=="byteOffset")||gn(Il,ui)))&&Mn.push(Il);return Mn}function Xt(Z,de,be){(be!==void 0&&!v_(Z[de],be)||be===void 0&&!(de in Z))&&hs(Z,de,be)}function er(Z,de,be){var vt=Z[de];(!(et.call(Z,de)&&v_(vt,be))||be===void 0&&!(de in Z))&&hs(Z,de,be)}function si(Z,de){for(var be=Z.length;be--;)if(v_(Z[be][0],de))return be;return-1}function hs(Z,de,be){de=="__proto__"&&Wt?Wt(Z,de,{configurable:!0,enumerable:!0,value:be,writable:!0}):Z[de]=be}var Vi=De();function ma(Z){return Z==null?Z===void 0?x:y:In&&In in Object(Z)?Ze(Z):ly(Z)}function ro(Z){return Yx(Z)&&ma(Z)==a}function _i(Z){if(!cy(Z)||Oi(Z))return!1;var de=G8(Z)?Dn:k;return de.test(H8(Z))}function bt(Z){return Yx(Z)&&Jie(Z.length)&&!!q[ma(Z)]}function wn(Z){if(!cy(Z))return Ya(Z);var de=oi(Z),be=[];for(var vt in Z)vt=="constructor"&&(de||!et.call(Z,vt))||be.push(vt);return be}function jr(Z,de,be,vt,Hn){Z!==de&&Vi(de,function(Rr,ai){if(Hn||(Hn=new jt),cy(Rr))Rs(Z,de,ai,be,jr,vt,Hn);else{var Mn=vt?vt(Wx(Z,ai),Rr,ai+"",Z,de,Hn):void 0;Mn===void 0&&(Mn=Rr),Xt(Z,ai,Mn)}},ese)}function Rs(Z,de,be,vt,Hn,Rr,ai){var Mn=Wx(Z,be),ui=Wx(de,be),Il=ai.get(ui);if(Il){Xt(Z,be,Il);return}var Bu=Rr?Rr(Mn,ui,be+"",Z,de,ai):void 0,Kx=Bu===void 0;if(Kx){var Y8=q8(ui),K8=!Y8&&Qie(ui),nse=!Y8&&!K8&&Zie(ui);Bu=ui,Y8||K8||nse?q8(Mn)?Bu=Mn:rWe(Mn)?Bu=pe(Mn):K8?(Kx=!1,Bu=te(ui,!0)):nse?(Kx=!1,Bu=fe(ui,!0)):Bu=[]:iWe(ui)||__(ui)?(Bu=Mn,__(Mn)?Bu=sWe(Mn):(!cy(Mn)||G8(Mn))&&(Bu=St(ui))):Kx=!1}Kx&&(ai.set(ui,Bu),Hn(Bu,ui,vt,Rr,ai),ai.delete(ui)),Xt(Z,be,Bu)}function Ga(Z,de){return Gx(qx(Z,de,tse),Z+"")}var W=Wt?function(Z,de){return Wt(Z,"toString",{configurable:!0,enumerable:!1,value:aWe(de),writable:!0})}:tse;function te(Z,de){if(de)return Z.slice();var be=Z.length,vt=it?it(be):new Z.constructor(be);return Z.copy(vt),vt}function K(Z){var de=new Z.constructor(Z.byteLength);return new Pe(de).set(new Pe(Z)),de}function fe(Z,de){var be=de?K(Z.buffer):Z.buffer;return new Z.constructor(be,Z.byteOffset,Z.length)}function pe(Z,de){var be=-1,vt=Z.length;for(de||(de=Array(vt));++be<vt;)de[be]=Z[be];return de}function oe(Z,de,be,vt){var Hn=!be;be||(be={});for(var Rr=-1,ai=de.length;++Rr<ai;){var Mn=de[Rr],ui=vt?vt(be[Mn],Z[Mn],Mn,be,Z):void 0;ui===void 0&&(ui=Z[Mn]),Hn?hs(be,Mn,ui):er(be,Mn,ui)}return be}function Se(Z){return Ga(function(de,be){var vt=-1,Hn=be.length,Rr=Hn>1?be[Hn-1]:void 0,ai=Hn>2?be[2]:void 0;for(Rr=Z.length>3&&typeof Rr=="function"?(Hn--,Rr):void 0,ai&&tr(be[0],be[1],ai)&&(Rr=Hn<3?void 0:Rr,Hn=1),de=Object(de);++vt<Hn;){var Mn=be[vt];Mn&&Z(de,Mn,vt,Rr)}return de})}function De(Z){return function(de,be,vt){for(var Hn=-1,Rr=Object(de),ai=vt(de),Mn=ai.length;Mn--;){var ui=ai[Z?Mn:++Hn];if(be(Rr[ui],ui,Rr)===!1)break}return de}}function ze(Z,de){var be=Z.__data__;return ur(de)?be[typeof de=="string"?"string":"hash"]:be.map}function He(Z,de){var be=Re(Z,de);return _i(be)?be:void 0}function Ze(Z){var de=et.call(Z,In),be=Z[In];try{Z[In]=void 0;var vt=!0}catch{}var Hn=dt.call(Z);return vt&&(de?Z[In]=be:delete Z[In]),Hn}function St(Z){return typeof Z.constructor=="function"&&!oi(Z)?ds(Ye(Z)):{}}function gn(Z,de){var be=typeof Z;return de=de??o,!!de&&(be=="number"||be!="symbol"&&$.test(Z))&&Z>-1&&Z%1==0&&Z<de}function tr(Z,de,be){if(!cy(be))return!1;var vt=typeof de;return(vt=="number"?W8(be)&&gn(de,be.length):vt=="string"&&de in be)?v_(be[de],Z):!1}function ur(Z){var de=typeof Z;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?Z!=="__proto__":Z===null}function Oi(Z){return!!ft&&ft in Z}function oi(Z){var de=Z&&Z.constructor,be=typeof de=="function"&&de.prototype||Qe;return Z===be}function Ya(Z){var de=[];if(Z!=null)for(var be in Object(Z))de.push(be);return de}function ly(Z){return dt.call(Z)}function qx(Z,de,be){return de=hr(de===void 0?Z.length-1:de,0),function(){for(var vt=arguments,Hn=-1,Rr=hr(vt.length-de,0),ai=Array(Rr);++Hn<Rr;)ai[Hn]=vt[de+Hn];Hn=-1;for(var Mn=Array(de+1);++Hn<de;)Mn[Hn]=vt[Hn];return Mn[de]=be(ai),Fe(Z,this,Mn)}}function Wx(Z,de){if(!(de==="constructor"&&typeof Z[de]=="function")&&de!="__proto__")return Z[de]}var Gx=Xie(W);function Xie(Z){var de=0,be=0;return function(){var vt=Yn(),Hn=s-(vt-be);if(be=vt,Hn>0){if(++de>=i)return arguments[0]}else de=0;return Z.apply(void 0,arguments)}}function H8(Z){if(Z!=null){try{return xt.call(Z)}catch{}try{return Z+""}catch{}}return""}function v_(Z,de){return Z===de||Z!==Z&&de!==de}var __=ro(function(){return arguments}())?ro:function(Z){return Yx(Z)&&et.call(Z,"callee")&&!tt.call(Z,"callee")},q8=Array.isArray;function W8(Z){return Z!=null&&Jie(Z.length)&&!G8(Z)}function rWe(Z){return Yx(Z)&&W8(Z)}var Qie=Vt||uWe;function G8(Z){if(!cy(Z))return!1;var de=ma(Z);return de==h||de==p||de==l||de==_}function Jie(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function cy(Z){var de=typeof Z;return Z!=null&&(de=="object"||de=="function")}function Yx(Z){return Z!=null&&typeof Z=="object"}function iWe(Z){if(!Yx(Z)||ma(Z)!=v)return!1;var de=Ye(Z);if(de===null)return!0;var be=et.call(de,"constructor")&&de.constructor;return typeof be=="function"&&be instanceof be&&xt.call(be)==Bt}var Zie=ue?Ge(ue):bt;function sWe(Z){return oe(Z,ese(Z))}function ese(Z){return W8(Z)?pr(Z,!0):wn(Z)}var oWe=Se(function(Z,de,be){jr(Z,de,be)});function aWe(Z){return function(){return Z}}function tse(Z){return Z}function uWe(){return!1}e.exports=oWe})(zD,zD.exports);var Mxt=zD.exports;const EK=El(Mxt);function O1(e){return structuredClone(e)}function xK(){const{answers:e}=Cf(i=>i),t=wc(),r=`${ch()[t]}_${t}`;return e[r]}const hke=C.createContext(null);function Lxt(){const e=C.useContext(hke);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function n0(){return Cf(e=>e.config)}function Xde(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function pke(){const e=wc(),t=ch(),r=`${t[e]}_${e}`,{trialValidation:i,sequence:s,answers:o}=Cf(E=>E),a=xK(),u=lh(),{saveTrialAnswer:l,setIframeAnswers:c}=uh(),{storageEngine:f}=Ru(),h=!Dxt(r),p=a==null?void 0:a.answer,m=im(),g=n0(),y=f4(),v=C.useMemo(()=>Date.now(),[]),_=Lxt(),b=C.useCallback(()=>{const E=O1(i[r]),w=Object.values(E).reduce((R,D)=>Object.hasOwn(D,"values")?{...R,...D.values}:R,{}),{provenanceGraph:x}=E,S=Date.now(),P=_&&"current"in _&&_.current?_.current.splice(0,_.current.length):[];Object.keys(p||{}).length===0&&(u(l({identifier:r,answer:w,startTime:v,endTime:S,provenanceGraph:x,windowEvents:P})),f&&f.saveAnswer(r,{answer:w,startTime:v,endTime:S,provenanceGraph:x,windowEvents:P}),u(c({})));let A=e+1;const O=lke(s,e),z=O!==null&&O.some(R=>Object.hasOwn(R.currentBlock,"skip")&&R.currentBlock.skip!==void 0),M={...o,[r]:{answer:w,startTime:v,endTime:S,provenanceGraph:x,windowEvents:P}};z&&[...O.flatMap(D=>D.currentBlock.skip?D.currentBlock.skip.map(L=>({...L,firstIndex:D.firstIndex,lastIndex:D.lastIndex})):[])].some(D=>{let L=!1;const V=Object.fromEntries(Object.entries(M).filter(([H])=>{const U=parseInt(H.slice(H.lastIndexOf("_")+1),10);return U>=D.firstIndex&&U<=e})),B=D.check!=="block"?Object.entries(V).filter(([H])=>H.slice(0,H.lastIndexOf("_"))===D.name):Object.entries(V);if(B.length===0)return!1;if(B.some(([H,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(D,null,2)}`);if(D.check==="response"||D.check==="responses"){const[H,U]=B[0];D.check==="response"?L=D.value!==U.answer[D.responseId]:L=!Xde(U.answer,H,g.components[H.slice(0,H.lastIndexOf("_"))],g)}else if(D.check==="block"||D.check==="repeatedComponent"){if(B.length<D.value)return!1;const H=B.map(([$,q])=>Xde(q.answer,$,g.components[$.slice(0,$.lastIndexOf("_"))],g)),U=H.filter($=>$).length,k=H.length-U;L=D.condition==="numCorrect"&&U===D.value||D.condition==="numIncorrect"&&k===D.value}if(L){const H=t.indexOf(D.to),U=H===-1?Rxt(s,D.to):-1;return A=H===-1?U:H,!0}return!1}),m(`/${y}/${A}${window.location.search}`)},[i,r,_,p,e,s,o,v,m,y,u,l,f,c,g,t]);return{isNextDisabled:h,goToNextStep:b}}function Fxt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=pke(),o=C.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return I.jsx(Xr,{type:"submit",disabled:t||i,onClick:o,children:e})}var SK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const XU=El(SK);function QU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var jxt=Object.defineProperty,Qde=Object.getOwnPropertySymbols,Bxt=Object.prototype.hasOwnProperty,zxt=Object.prototype.propertyIsEnumerable,Jde=(e,t,n)=>t in e?jxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uxt=(e,t)=>{for(var n in t||(t={}))Bxt.call(t,n)&&Jde(e,n,t[n]);if(Qde)for(var n of Qde(t))zxt.call(t,n)&&Jde(e,n,t[n]);return e};function mke(e,t){if(t===null||typeof t!="object")return{};const n=Uxt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const Vxt="__MANTINE_FORM_INDEX__";function Zde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Vxt}`)):!1:!1}function ehe(e,t,n){typeof n.value=="object"&&(n.value=yb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function yb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(yb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(yb(a),yb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(yb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)ehe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||ehe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function gke(e){return typeof e!="string"?[]:e.split(".")}function h4(e,t,n){const r=gke(e);if(r.length===0)return n;const i=yb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Gh(e,t){const n=gke(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function the(e){const t=QU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function JU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Gh(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>JU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||JU(o,t,a,i)),i},r)}function ZU(e,t){return the(typeof e=="function"?e(t):JU(e,t))}function AP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=ZU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function Hxt(e,{from:t,to:n},r){const i=Gh(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),h4(e,s,r)}var qxt=Object.defineProperty,nhe=Object.getOwnPropertySymbols,Wxt=Object.prototype.hasOwnProperty,Gxt=Object.prototype.propertyIsEnumerable,rhe=(e,t,n)=>t in e?qxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yxt=(e,t)=>{for(var n in t||(t={}))Wxt.call(t,n)&&rhe(e,n,t[n]);if(nhe)for(var n of nhe(t))Gxt.call(t,n)&&rhe(e,n,t[n]);return e};function Kxt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=Yxt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Xxt(e,t,n){const r=Gh(e,n);return Array.isArray(r)?h4(e,r.filter((i,s)=>s!==t),n):n}var Qxt=Object.defineProperty,ihe=Object.getOwnPropertySymbols,Jxt=Object.prototype.hasOwnProperty,Zxt=Object.prototype.propertyIsEnumerable,she=(e,t,n)=>t in e?Qxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eSt=(e,t)=>{for(var n in t||(t={}))Jxt.call(t,n)&&she(e,n,t[n]);if(ihe)for(var n of ihe(t))Zxt.call(t,n)&&she(e,n,t[n]);return e};function ohe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function ahe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=mke(`${i}.${t}`,s));const o=eSt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=ohe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=ohe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function tSt(e,t,n,r){const i=Gh(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),h4(e,s,r)}function uhe(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function nSt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var rSt=Object.defineProperty,iSt=Object.defineProperties,sSt=Object.getOwnPropertyDescriptors,lhe=Object.getOwnPropertySymbols,oSt=Object.prototype.hasOwnProperty,aSt=Object.prototype.propertyIsEnumerable,che=(e,t,n)=>t in e?rSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Am=(e,t)=>{for(var n in t||(t={}))oSt.call(t,n)&&che(e,n,t[n]);if(lhe)for(var n of lhe(t))aSt.call(t,n)&&che(e,n,t[n]);return e},xj=(e,t)=>iSt(e,sSt(t));function yke({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=C.useState(r),[f,d]=C.useState(n),[h,p]=C.useState(e),[m,g]=C.useState(QU(t)),y=C.useRef(e),v=j=>{y.current=j},_=C.useCallback(()=>c({}),[]),b=j=>{const Q=j?Am(Am({},h),j):h;v(Q),d({})},E=C.useCallback(j=>g(Q=>QU(typeof j=="function"?j(Q):j)),[]),w=C.useCallback(()=>g({}),[]),x=C.useCallback(()=>{p(e),w(),v(e),d({}),_()},[]),S=C.useCallback((j,Q)=>E(se=>xj(Am({},se),{[j]:Q})),[]),P=C.useCallback(j=>E(Q=>{if(typeof j!="string")return Q;const se=Am({},Q);return delete se[j],se}),[]),A=C.useCallback(j=>d(Q=>{if(typeof j!="string")return Q;const se=mke(j,Q);return delete se[j],se}),[]),O=C.useCallback((j,Q)=>{const se=Zde(j,s);A(j),c(ae=>xj(Am({},ae),{[j]:!0})),p(ae=>{const ce=h4(j,Q,ae);if(se){const le=AP(j,u,ce);le.hasError?S(j,le.error):P(j)}return ce}),!se&&i&&S(j,null)},[]),z=C.useCallback(j=>{p(Q=>{const se=typeof j=="function"?j(Q):j;return Am(Am({},Q),se)}),i&&w()},[]),M=C.useCallback((j,Q)=>{A(j),p(se=>Hxt(j,Q,se)),g(se=>Kxt(j,Q,se))},[]),R=C.useCallback((j,Q)=>{A(j),p(se=>Xxt(j,Q,se)),g(se=>ahe(j,Q,se,-1))},[]),D=C.useCallback((j,Q,se)=>{A(j),p(ae=>tSt(j,Q,se,ae)),g(ae=>ahe(j,se,ae,1))},[]),L=C.useCallback(()=>{const j=ZU(u,h);return g(j.errors),j},[h,u]),V=C.useCallback(j=>{const Q=AP(j,u,h);return Q.hasError?S(j,Q.error):P(j),Q},[h,u]),B=(j,{type:Q="input",withError:se=!0,withFocus:ae=!0}={})=>{const le={onChange:nSt(ge=>O(j,ge))};return se&&(le.error=m[j]),Q==="checkbox"?le.checked=Gh(j,h):le.value=Gh(j,h),ae&&(le.onFocus=()=>c(ge=>xj(Am({},ge),{[j]:!0})),le.onBlur=()=>{if(Zde(j,o)){const ge=AP(j,u,h);ge.hasError?S(j,ge.error):P(j)}}),le},H=(j,Q)=>se=>{se==null||se.preventDefault();const ae=L();ae.hasErrors?Q==null||Q(ae.errors,h,se):j==null||j(a(h),se)},U=j=>a(j||h),k=C.useCallback(j=>{j.preventDefault(),x()},[]),$=j=>{if(j){const se=Gh(j,f);if(typeof se=="boolean")return se;const ae=Gh(j,h),ce=Gh(j,y.current);return!XU(ae,ce)}return Object.keys(f).length>0?uhe(f):!XU(h,y.current)},q=C.useCallback(j=>uhe(l,j),[l]),F=C.useCallback(j=>j?!AP(j,u,h).hasError:!ZU(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:z,setErrors:E,setFieldValue:O,setFieldError:S,clearFieldError:P,clearErrors:w,reset:x,validate:L,validateField:V,reorderListItem:M,removeListItem:R,insertListItem:D,getInputProps:B,onSubmit:H,onReset:k,isDirty:$,isTouched:q,setTouched:c,setDirty:d,resetTouched:_,resetDirty:b,isValid:F,getTransformedValues:U}}function uSt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function lSt(e){return uSt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const cSt=new URLSearchParams(window.location.search),fSt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?cSt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},dSt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function hSt(e,t,n){const[r,i]=C.useState(null),s=yke({initialValues:fSt(e,n),validate:dSt(e)});return C.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Vv(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function pSt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return I.jsx(Iw.Group,{label:I.jsx(Na,{text:r,required:i}),...n,error:Vv(e,n,s),size:"md",children:I.jsx(Co,{mt:"md",children:s.map(o=>I.jsx(Iw,{disabled:t,value:o.value,label:o.label},o.value))})})}function mSt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return I.jsx(N6,{disabled:t,label:I.jsx(Na,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:Vv(e,n,o)})}function gSt({response:e,answer:t}){const{prompt:n}=e;return I.jsxs(I.Fragment,{children:[I.jsx(ct,{fz:"md",fw:500,children:I.jsx(Na,{text:n})}),I.jsx(C1,{children:Array.isArray(t.value)?t.value.map(r=>I.jsx(C1.Item,{children:r},r)):I.jsx(C1.Item,{children:t.value})})]})}function vke({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return I.jsxs(dD.Group,{name:`radioInput${e.id}`,label:I.jsx(Na,{text:r,required:i}),size:"md",...n,error:Vv(e,n,s),children:[o?I.jsx(ct,{children:o}):null,I.jsx(Co,{mt:"xs",children:s.map(u=>I.jsx(dD,{disabled:t,value:u.value,label:u.label},u.label))}),I.jsx(ct,{children:a})]},e.id)}function ySt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return I.jsx(vke,{disabled:t,response:s,answer:n})}function vSt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return I.jsx(UAe,{disabled:t,placeholder:a,label:I.jsx(Na,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:Vv(e,n)})}function _St({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=Vv(e,n);return I.jsx(us.Wrapper,{label:I.jsx(Na,{text:r,required:i}),error:o,size:"md",children:I.jsx(UY,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function bSt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return I.jsx($6,{disabled:t,placeholder:r,label:I.jsx(Na,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:Vv(e,n)})}function wSt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return I.jsx(qCe,{disabled:t,placeholder:r,label:I.jsx(Na,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:Vv(e,n)})}function ESt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=ZG(),o=C.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return I.jsxs(st,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&I.jsx(vSt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&I.jsx(bSt,{response:e,disabled:o,answer:r}),e.type==="longText"&&I.jsx(wSt,{response:e,disabled:o,answer:r}),e.type==="likert"&&I.jsx(ySt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&I.jsx(mSt,{response:e,disabled:o,answer:r}),e.type==="slider"&&I.jsx(_St,{response:e,disabled:o,answer:r}),e.type==="radio"&&I.jsx(vke,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&I.jsx(pSt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&I.jsx(gSt,{response:e,answer:r})]})}function UD({config:e,location:t,status:n,style:r}){var b;const i=wc(),s=ch()[i],o=n==null?void 0:n.answer,a=e,u=C.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(w=>w.location?w.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=lh(),{updateResponseBlockValidation:c}=uh(),f=hSt(u,i,o||{}),[d,h]=C.useState(void 0),[p,m]=C.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Cf(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((b=a==null?void 0:a.correctAnswer)==null?void 0:b.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return C.useEffect(()=>{const E=u.find(w=>w.type==="iframe");if(g&&E){const w=E.id;f.setValues({...f.values,[w]:g[w]})}},[g]),C.useEffect(()=>{y&&h(y)},[y]),C.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:O1(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),I.jsxs("div",{style:r,children:[u.map(E=>{var w,x;return I.jsx(N.Fragment,{children:E.hidden?"":I.jsxs(I.Fragment,{children:[I.jsx(ESt,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E}),v&&p&&I.jsx(ct,{children:`The correct answer is: ${(x=(w=a.correctAnswer)==null?void 0:w.find(S=>S.id===E.id))==null?void 0:x.answer}`})]})},`${E.id}-${i}`)}),I.jsxs(Co,{position:"right",spacing:"xs",mt:"xl",children:[v&&_&&I.jsx(Xr,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),_&&I.jsx(Fxt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const mS="@REVISIT_COMMS",xSt={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function SSt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=uh(),r=lh(),i=zPe(),s=C.useRef(null),o=C.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=wc(),u=ch()[a],l=im(),c=C.useCallback((f,d)=>{var h,p;(p=(h=s.current)==null?void 0:h.contentWindow)==null||p.postMessage({error:!1,type:`${mS}/${f}`,iframeId:o,message:d},"*")},[s,o]);return C.useEffect(()=>{const f=d=>{const{data:h}=d;if(typeof h=="object"&&o===h.iframeId)switch(h.type){case`${mS}/WINDOW_READY`:e.parameters&&c("STUDY_DATA",e.parameters);break;case`${mS}/READY`:s.current&&(s.current.style.height=`${h.message.documentHeight}px`);break;case`${mS}/ANSWERS`:r(t(h.message));break;case`${mS}/PROVENANCE`:r(n(h.message));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[r,a,i,o,l,e,c,t,n]),I.jsx("div",{children:I.jsx("iframe",{ref:s,src:`${mc}${e.path}?trialid=${u}&id=${o}`,style:xSt})})}const TSt={maxWidth:"100%"};function CSt({currentConfig:e}){const t={...TSt,...e.style};return I.jsx(jv,{mx:"auto",src:`${mc}${e.path}`,style:t})}function fhe(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class dhe extends Map{constructor(t,n=wke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(eV(this,t))}has(t){return super.has(eV(this,t))}set(t,n){return super.set(_ke(this,t),n)}delete(t){return super.delete(bke(this,t))}}class VD extends Set{constructor(t,n=wke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(eV(this,t))}add(t){return super.add(_ke(this,t))}delete(t){return super.delete(bke(this,t))}}function eV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _ke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function bke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function wke(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ASt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var ISt={value:()=>{}};function p4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new h$(n)}function h$(e){this._=e}function OSt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}h$.prototype=p4.prototype={constructor:h$,on:function(e,t){var n=this._,r=OSt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=PSt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=hhe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=hhe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new h$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function PSt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function hhe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ISt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var tV="http://www.w3.org/1999/xhtml";const phe={svg:"http://www.w3.org/2000/svg",xhtml:tV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function m4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),phe.hasOwnProperty(t)?{space:phe[t],local:e}:e}function kSt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tV&&t.documentElement.namespaceURI===tV?t.createElement(e):t.createElementNS(n,e)}}function $St(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Eke(e){var t=m4(e);return(t.local?$St:kSt)(t)}function RSt(){}function TK(e){return e==null?RSt:function(){return this.querySelector(e)}}function NSt(e){typeof e!="function"&&(e=TK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Da(r,this._parents)}function xke(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function DSt(){return[]}function Ske(e){return e==null?DSt:function(){return this.querySelectorAll(e)}}function MSt(e){return function(){return xke(e.apply(this,arguments))}}function LSt(e){typeof e=="function"?e=MSt(e):e=Ske(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Da(r,i)}function Tke(e){return function(){return this.matches(e)}}function Cke(e){return function(t){return t.matches(e)}}var FSt=Array.prototype.find;function jSt(e){return function(){return FSt.call(this.children,e)}}function BSt(){return this.firstElementChild}function zSt(e){return this.select(e==null?BSt:jSt(typeof e=="function"?e:Cke(e)))}var USt=Array.prototype.filter;function VSt(){return Array.from(this.children)}function HSt(e){return function(){return USt.call(this.children,e)}}function qSt(e){return this.selectAll(e==null?VSt:HSt(typeof e=="function"?e:Cke(e)))}function WSt(e){typeof e!="function"&&(e=Tke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Da(r,this._parents)}function Ake(e){return new Array(e.length)}function GSt(){return new Da(this._enter||this._groups.map(Ake),this._parents)}function HD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}HD.prototype={constructor:HD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function YSt(e){return function(){return e}}function KSt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new HD(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function XSt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new HD(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function QSt(e){return e.__data__}function JSt(e,t){if(!arguments.length)return Array.from(this,QSt);var n=t?XSt:KSt,r=this._parents,i=this._groups;typeof e!="function"&&(e=YSt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=ZSt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,b,E;v<p;++v)if(b=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);b._next=E||null}}return o=new Da(o,r),o._enter=a,o._exit=u,o}function ZSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eTt(){return new Da(this._exit||this._groups.map(Ake),this._parents)}function tTt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function nTt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Da(a,this._parents)}function rTt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function iTt(e){e||(e=sTt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Da(i,this._parents).order()}function sTt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function oTt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function aTt(){return Array.from(this)}function uTt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function lTt(){let e=0;for(const t of this)++e;return e}function cTt(){return!this.node()}function fTt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function dTt(e){return function(){this.removeAttribute(e)}}function hTt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pTt(e,t){return function(){this.setAttribute(e,t)}}function mTt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gTt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yTt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vTt(e,t){var n=m4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hTt:dTt:typeof t=="function"?n.local?yTt:gTt:n.local?mTt:pTt)(n,t))}function Ike(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _Tt(e){return function(){this.style.removeProperty(e)}}function bTt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wTt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ETt(e,t,n){return arguments.length>1?this.each((t==null?_Tt:typeof t=="function"?wTt:bTt)(e,t,n??"")):kw(this.node(),e)}function kw(e,t){return e.style.getPropertyValue(t)||Ike(e).getComputedStyle(e,null).getPropertyValue(t)}function xTt(e){return function(){delete this[e]}}function STt(e,t){return function(){this[e]=t}}function TTt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function CTt(e,t){return arguments.length>1?this.each((t==null?xTt:typeof t=="function"?TTt:STt)(e,t)):this.node()[e]}function Oke(e){return e.trim().split(/^|\s+/)}function CK(e){return e.classList||new Pke(e)}function Pke(e){this._node=e,this._names=Oke(e.getAttribute("class")||"")}Pke.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function kke(e,t){for(var n=CK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function $ke(e,t){for(var n=CK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ATt(e){return function(){kke(this,e)}}function ITt(e){return function(){$ke(this,e)}}function OTt(e,t){return function(){(t.apply(this,arguments)?kke:$ke)(this,e)}}function PTt(e,t){var n=Oke(e+"");if(arguments.length<2){for(var r=CK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?OTt:t?ATt:ITt)(n,t))}function kTt(){this.textContent=""}function $Tt(e){return function(){this.textContent=e}}function RTt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function NTt(e){return arguments.length?this.each(e==null?kTt:(typeof e=="function"?RTt:$Tt)(e)):this.node().textContent}function DTt(){this.innerHTML=""}function MTt(e){return function(){this.innerHTML=e}}function LTt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function FTt(e){return arguments.length?this.each(e==null?DTt:(typeof e=="function"?LTt:MTt)(e)):this.node().innerHTML}function jTt(){this.nextSibling&&this.parentNode.appendChild(this)}function BTt(){return this.each(jTt)}function zTt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function UTt(){return this.each(zTt)}function VTt(e){var t=typeof e=="function"?e:Eke(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function HTt(){return null}function qTt(e,t){var n=typeof e=="function"?e:Eke(e),r=t==null?HTt:typeof t=="function"?t:TK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function WTt(){var e=this.parentNode;e&&e.removeChild(this)}function GTt(){return this.each(WTt)}function YTt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KTt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XTt(e){return this.select(e?KTt:YTt)}function QTt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function JTt(e){return function(t){e.call(this,t,this.__data__)}}function ZTt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function e2t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function t2t(e,t,n){return function(){var r=this.__on,i,s=JTt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function n2t(e,t,n){var r=ZTt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?t2t:e2t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Rke(e,t,n){var r=Ike(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function r2t(e,t){return function(){return Rke(this,e,t)}}function i2t(e,t){return function(){return Rke(this,e,t.apply(this,arguments))}}function s2t(e,t){return this.each((typeof t=="function"?i2t:r2t)(e,t))}function*o2t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var AK=[null];function Da(e,t){this._groups=e,this._parents=t}function hI(){return new Da([[document.documentElement]],AK)}function a2t(){return this}Da.prototype=hI.prototype={constructor:Da,select:NSt,selectAll:LSt,selectChild:zSt,selectChildren:qSt,filter:WSt,data:JSt,enter:GSt,exit:eTt,join:tTt,merge:nTt,selection:a2t,order:rTt,sort:iTt,call:oTt,nodes:aTt,node:uTt,size:lTt,empty:cTt,each:fTt,attr:vTt,style:ETt,property:CTt,classed:PTt,text:NTt,html:FTt,raise:BTt,lower:UTt,append:VTt,insert:qTt,remove:GTt,clone:XTt,datum:QTt,on:n2t,dispatch:s2t,[Symbol.iterator]:o2t};function ts(e){return typeof e=="string"?new Da([[document.querySelector(e)]],[document.documentElement]):new Da([[e]],AK)}function u2t(e){let t;for(;t=e.sourceEvent;)e=t;return e}function nV(e,t){if(e=u2t(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function l2t(e){return typeof e=="string"?new Da([document.querySelectorAll(e)],[document.documentElement]):new Da([xke(e)],AK)}const rV={capture:!0,passive:!1};function iV(e){e.preventDefault(),e.stopImmediatePropagation()}function c2t(e){var t=e.document.documentElement,n=ts(e).on("dragstart.drag",iV,rV);"onselectstart"in t?n.on("selectstart.drag",iV,rV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function f2t(e,t){var n=e.document.documentElement,r=ts(e).on("dragstart.drag",null);t&&(r.on("click.drag",iV,rV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function XE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function B0(){}var J1=.7,$w=1/J1,Wb="\\s*([+-]?\\d+)\\s*",SC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d2t=/^#([0-9a-f]{3,8})$/,h2t=new RegExp(`^rgb\\(${Wb},${Wb},${Wb}\\)$`),p2t=new RegExp(`^rgb\\(${Od},${Od},${Od}\\)$`),m2t=new RegExp(`^rgba\\(${Wb},${Wb},${Wb},${SC}\\)$`),g2t=new RegExp(`^rgba\\(${Od},${Od},${Od},${SC}\\)$`),y2t=new RegExp(`^hsl\\(${SC},${Od},${Od}\\)$`),v2t=new RegExp(`^hsla\\(${SC},${Od},${Od},${SC}\\)$`),mhe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XE(B0,Z1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ghe,formatHex:ghe,formatHex8:_2t,formatHsl:b2t,formatRgb:yhe,toString:yhe});function ghe(){return this.rgb().formatHex()}function _2t(){return this.rgb().formatHex8()}function b2t(){return Nke(this).formatHsl()}function yhe(){return this.rgb().formatRgb()}function Z1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=d2t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vhe(t):n===3?new Vs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?IP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?IP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=h2t.exec(e))?new Vs(t[1],t[2],t[3],1):(t=p2t.exec(e))?new Vs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=m2t.exec(e))?IP(t[1],t[2],t[3],t[4]):(t=g2t.exec(e))?IP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=y2t.exec(e))?whe(t[1],t[2]/100,t[3]/100,1):(t=v2t.exec(e))?whe(t[1],t[2]/100,t[3]/100,t[4]):mhe.hasOwnProperty(e)?vhe(mhe[e]):e==="transparent"?new Vs(NaN,NaN,NaN,0):null}function vhe(e){return new Vs(e>>16&255,e>>8&255,e&255,1)}function IP(e,t,n,r){return r<=0&&(e=t=n=NaN),new Vs(e,t,n,r)}function IK(e){return e instanceof B0||(e=Z1(e)),e?(e=e.rgb(),new Vs(e.r,e.g,e.b,e.opacity)):new Vs}function r0(e,t,n,r){return arguments.length===1?IK(e):new Vs(e,t,n,r??1)}function Vs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}XE(Vs,r0,pI(B0,{brighter(e){return e=e==null?$w:Math.pow($w,e),new Vs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?J1:Math.pow(J1,e),new Vs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vs(P1(this.r),P1(this.g),P1(this.b),qD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_he,formatHex:_he,formatHex8:w2t,formatRgb:bhe,toString:bhe}));function _he(){return`#${i1(this.r)}${i1(this.g)}${i1(this.b)}`}function w2t(){return`#${i1(this.r)}${i1(this.g)}${i1(this.b)}${i1((isNaN(this.opacity)?1:this.opacity)*255)}`}function bhe(){const e=qD(this.opacity);return`${e===1?"rgb(":"rgba("}${P1(this.r)}, ${P1(this.g)}, ${P1(this.b)}${e===1?")":`, ${e})`}`}function qD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function P1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function i1(e){return e=P1(e),(e<16?"0":"")+e.toString(16)}function whe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gc(e,t,n,r)}function Nke(e){if(e instanceof Gc)return new Gc(e.h,e.s,e.l,e.opacity);if(e instanceof B0||(e=Z1(e)),!e)return new Gc;if(e instanceof Gc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Gc(o,a,u,e.opacity)}function WD(e,t,n,r){return arguments.length===1?Nke(e):new Gc(e,t,n,r??1)}function Gc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}XE(Gc,WD,pI(B0,{brighter(e){return e=e==null?$w:Math.pow($w,e),new Gc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?J1:Math.pow(J1,e),new Gc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Vs(Sj(e>=240?e-240:e+120,i,r),Sj(e,i,r),Sj(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gc(Ehe(this.h),OP(this.s),OP(this.l),qD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qD(this.opacity);return`${e===1?"hsl(":"hsla("}${Ehe(this.h)}, ${OP(this.s)*100}%, ${OP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ehe(e){return e=(e||0)%360,e<0?e+360:e}function OP(e){return Math.max(0,Math.min(1,e||0))}function Sj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Dke=Math.PI/180,Mke=180/Math.PI,GD=18,Lke=.96422,Fke=1,jke=.82521,Bke=4/29,Gb=6/29,zke=3*Gb*Gb,E2t=Gb*Gb*Gb;function Uke(e){if(e instanceof Pd)return new Pd(e.l,e.a,e.b,e.opacity);if(e instanceof sp)return Vke(e);e instanceof Vs||(e=IK(e));var t=Ij(e.r),n=Ij(e.g),r=Ij(e.b),i=Tj((.2225045*t+.7168786*n+.0606169*r)/Fke),s,o;return t===n&&n===r?s=o=i:(s=Tj((.4360747*t+.3850649*n+.1430804*r)/Lke),o=Tj((.0139322*t+.0971045*n+.7141733*r)/jke)),new Pd(116*i-16,500*(s-i),200*(i-o),e.opacity)}function YD(e,t,n,r){return arguments.length===1?Uke(e):new Pd(e,t,n,r??1)}function Pd(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}XE(Pd,YD,pI(B0,{brighter(e){return new Pd(this.l+GD*(e??1),this.a,this.b,this.opacity)},darker(e){return new Pd(this.l-GD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Lke*Cj(t),e=Fke*Cj(e),n=jke*Cj(n),new Vs(Aj(3.1338561*t-1.6168667*e-.4906146*n),Aj(-.9787684*t+1.9161415*e+.033454*n),Aj(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Tj(e){return e>E2t?Math.pow(e,1/3):e/zke+Bke}function Cj(e){return e>Gb?e*e*e:zke*(e-Bke)}function Aj(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ij(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x2t(e){if(e instanceof sp)return new sp(e.h,e.c,e.l,e.opacity);if(e instanceof Pd||(e=Uke(e)),e.a===0&&e.b===0)return new sp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Mke;return new sp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function KD(e,t,n,r){return arguments.length===1?x2t(e):new sp(e,t,n,r??1)}function sp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Vke(e){if(isNaN(e.h))return new Pd(e.l,0,0,e.opacity);var t=e.h*Dke;return new Pd(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}XE(sp,KD,pI(B0,{brighter(e){return new sp(this.h,this.c,this.l+GD*(e??1),this.opacity)},darker(e){return new sp(this.h,this.c,this.l-GD*(e??1),this.opacity)},rgb(){return Vke(this).rgb()}}));var Hke=-.14861,OK=1.78277,PK=-.29227,g4=-.90649,TC=1.97294,xhe=TC*g4,She=TC*OK,The=OK*PK-g4*Hke;function S2t(e){if(e instanceof k1)return new k1(e.h,e.s,e.l,e.opacity);e instanceof Vs||(e=IK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(The*r+xhe*t-She*n)/(The+xhe-She),s=r-i,o=(TC*(n-i)-PK*s)/g4,a=Math.sqrt(o*o+s*s)/(TC*i*(1-i)),u=a?Math.atan2(o,s)*Mke-120:NaN;return new k1(u<0?u+360:u,a,i,e.opacity)}function sV(e,t,n,r){return arguments.length===1?S2t(e):new k1(e,t,n,r??1)}function k1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}XE(k1,sV,pI(B0,{brighter(e){return e=e==null?$w:Math.pow($w,e),new k1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?J1:Math.pow(J1,e),new k1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Dke,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Vs(255*(t+n*(Hke*r+OK*i)),255*(t+n*(PK*r+g4*i)),255*(t+n*(TC*r)),this.opacity)}}));function qke(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Wke(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return qke((n-r/t)*t,o,i,s,a)}}function Gke(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return qke((n-r/t)*t,i,s,o,a)}}const y4=e=>()=>e;function Yke(e,t){return function(n){return e+n*t}}function T2t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function v4(e,t){var n=t-e;return n?Yke(e,n>180||n<-180?n-360*Math.round(n/360):n):y4(isNaN(e)?t:e)}function C2t(e){return(e=+e)==1?Hs:function(t,n){return n-t?T2t(t,n,e):y4(isNaN(t)?n:t)}}function Hs(e,t){var n=t-e;return n?Yke(e,n):y4(isNaN(e)?t:e)}const CC=function e(t){var n=C2t(t);function r(i,s){var o=n((i=r0(i)).r,(s=r0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Hs(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Kke(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=r0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var A2t=Kke(Wke),I2t=Kke(Gke);function kK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Xke(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function O2t(e,t){return(Xke(t)?kK:Qke)(e,t)}function Qke(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=fm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Jke(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Vl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Zke(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=fm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var oV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oj=new RegExp(oV.source,"g");function P2t(e){return function(){return e}}function k2t(e){return function(t){return e(t)+""}}function $K(e,t){var n=oV.lastIndex=Oj.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=oV.exec(e))&&(i=Oj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Vl(r,i)})),n=Oj.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?k2t(u[0].x):P2t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function fm(e,t){var n=typeof t,r;return t==null||n==="boolean"?y4(t):(n==="number"?Vl:n==="string"?(r=Z1(t))?(t=r,CC):$K:t instanceof Z1?CC:t instanceof Date?Jke:Xke(t)?kK:Array.isArray(t)?Qke:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zke:Vl)(e,t)}function $2t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function R2t(e,t){var n=v4(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function mI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Che=180/Math.PI,aV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e$e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Che,skewX:Math.atan(u)*Che,scaleX:o,scaleY:a}}var PP;function N2t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?aV:e$e(t.a,t.b,t.c,t.d,t.e,t.f)}function D2t(e){return e==null||(PP||(PP=document.createElementNS("http://www.w3.org/2000/svg","g")),PP.setAttribute("transform",e),!(e=PP.transform.baseVal.consolidate()))?aV:(e=e.matrix,e$e(e.a,e.b,e.c,e.d,e.e,e.f))}function t$e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Vl(l,f)},{i:m-2,x:Vl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Vl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Vl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Vl(l,f)},{i:m-2,x:Vl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var n$e=t$e(N2t,"px, ","px)","deg)"),r$e=t$e(D2t,", ",")",")"),M2t=1e-12;function Ahe(e){return((e=Math.exp(e))+1/e)/2}function L2t(e){return((e=Math.exp(e))-1/e)/2}function F2t(e){return((e=Math.exp(2*e))-1)/(e+1)}const j2t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<M2t)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),b=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),w=Math.log(Math.sqrt(b*b+1)-b);y=(w-E)/t,g=function(x){var S=x*y,P=Ahe(E),A=l/(n*v)*(P*F2t(t*S+E)-L2t(E));return[a+A*h,u+A*p,l*P/Ahe(t*S+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function i$e(e){return function(t,n){var r=e((t=WD(t)).h,(n=WD(n)).h),i=Hs(t.s,n.s),s=Hs(t.l,n.l),o=Hs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const B2t=i$e(v4);var z2t=i$e(Hs);function U2t(e,t){var n=Hs((e=YD(e)).l,(t=YD(t)).l),r=Hs(e.a,t.a),i=Hs(e.b,t.b),s=Hs(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function s$e(e){return function(t,n){var r=e((t=KD(t)).h,(n=KD(n)).h),i=Hs(t.c,n.c),s=Hs(t.l,n.l),o=Hs(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const V2t=s$e(v4);var H2t=s$e(Hs);function o$e(e){return function t(n){n=+n;function r(i,s){var o=e((i=sV(i)).h,(s=sV(s)).h),a=Hs(i.s,s.s),u=Hs(i.l,s.l),l=Hs(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const q2t=o$e(v4);var W2t=o$e(Hs);function RK(e,t){t===void 0&&(t=e,e=fm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function G2t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Y2t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:fm,interpolateArray:O2t,interpolateBasis:Wke,interpolateBasisClosed:Gke,interpolateCubehelix:q2t,interpolateCubehelixLong:W2t,interpolateDate:Jke,interpolateDiscrete:$2t,interpolateHcl:V2t,interpolateHclLong:H2t,interpolateHsl:B2t,interpolateHslLong:z2t,interpolateHue:R2t,interpolateLab:U2t,interpolateNumber:Vl,interpolateNumberArray:kK,interpolateObject:Zke,interpolateRgb:CC,interpolateRgbBasis:A2t,interpolateRgbBasisClosed:I2t,interpolateRound:mI,interpolateString:$K,interpolateTransformCss:n$e,interpolateTransformSvg:r$e,interpolateZoom:j2t,piecewise:RK,quantize:G2t},Symbol.toStringTag,{value:"Module"}));var Rw=0,fT=0,gS=0,a$e=1e3,XD,dT,QD=0,ev=0,_4=0,AC=typeof performance=="object"&&performance.now?performance:Date,u$e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function b4(){return ev||(u$e(K2t),ev=AC.now()+_4)}function K2t(){ev=0}function IC(){this._call=this._time=this._next=null}IC.prototype=NK.prototype={constructor:IC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?b4():+n)+(t==null?0:+t),!this._next&&dT!==this&&(dT?dT._next=this:XD=this,dT=this),this._call=e,this._time=n,uV()},stop:function(){this._call&&(this._call=null,this._time=1/0,uV())}};function NK(e,t,n){var r=new IC;return r.restart(e,t,n),r}function X2t(){b4(),++Rw;for(var e=XD,t;e;)(t=ev-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Rw}function Ihe(){ev=(QD=AC.now())+_4,Rw=fT=0;try{X2t()}finally{Rw=0,J2t(),ev=0}}function Q2t(){var e=AC.now(),t=e-QD;t>a$e&&(_4-=t,QD=e)}function J2t(){for(var e,t=XD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:XD=n);dT=e,uV(r)}function uV(e){if(!Rw){fT&&(fT=clearTimeout(fT));var t=e-ev;t>24?(e<1/0&&(fT=setTimeout(Ihe,e-AC.now()-_4)),gS&&(gS=clearInterval(gS))):(gS||(QD=AC.now(),gS=setInterval(Q2t,a$e)),Rw=1,u$e(Ihe))}}function Ohe(e,t,n){var r=new IC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Z2t(e,t,n){var r=new IC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?b4():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var eCt=p4("start","end","cancel","interrupt"),tCt=[],l$e=0,Phe=1,lV=2,p$=3,khe=4,cV=5,m$=6;function w4(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;nCt(e,n,{name:t,index:r,group:i,on:eCt,tween:tCt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:l$e})}function DK(e,t){var n=Af(e,t);if(n.state>l$e)throw new Error("too late; already scheduled");return n}function fh(e,t){var n=Af(e,t);if(n.state>p$)throw new Error("too late; already running");return n}function Af(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nCt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=NK(s,0,n.time);function s(l){n.state=Phe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Phe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===p$)return Ohe(o);h.state===khe?(h.state=m$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=m$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ohe(function(){n.state===p$&&(n.state=khe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=lV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===lV){for(n.state=p$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=cV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===cV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=m$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function fV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>lV&&r.state<cV,r.state=m$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function rCt(e){return this.each(function(){fV(this,e)})}function iCt(e,t){var n,r;return function(){var i=fh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sCt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=fh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function oCt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Af(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?iCt:sCt)(n,e,t))}function MK(e,t,n){var r=e._id;return e.each(function(){var i=fh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Af(i,r).value[t]}}function c$e(e,t){var n;return(typeof t=="number"?Vl:t instanceof Z1?CC:(n=Z1(t))?(t=n,CC):$K)(e,t)}function aCt(e){return function(){this.removeAttribute(e)}}function uCt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lCt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function cCt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function fCt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function dCt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function hCt(e,t){var n=m4(e),r=n==="transform"?r$e:c$e;return this.attrTween(e,typeof t=="function"?(n.local?dCt:fCt)(n,r,MK(this,"attr."+e,t)):t==null?(n.local?uCt:aCt)(n):(n.local?cCt:lCt)(n,r,t))}function pCt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mCt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gCt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mCt(e,s)),n}return i._value=t,i}function yCt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&pCt(e,s)),n}return i._value=t,i}function vCt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=m4(e);return this.tween(n,(r.local?gCt:yCt)(r,t))}function _Ct(e,t){return function(){DK(this,e).delay=+t.apply(this,arguments)}}function bCt(e,t){return t=+t,function(){DK(this,e).delay=t}}function wCt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_Ct:bCt)(t,e)):Af(this.node(),t).delay}function ECt(e,t){return function(){fh(this,e).duration=+t.apply(this,arguments)}}function xCt(e,t){return t=+t,function(){fh(this,e).duration=t}}function SCt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ECt:xCt)(t,e)):Af(this.node(),t).duration}function TCt(e,t){if(typeof t!="function")throw new Error;return function(){fh(this,e).ease=t}}function CCt(e){var t=this._id;return arguments.length?this.each(TCt(t,e)):Af(this.node(),t).ease}function ACt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fh(this,e).ease=n}}function ICt(e){if(typeof e!="function")throw new Error;return this.each(ACt(this._id,e))}function OCt(e){typeof e!="function"&&(e=Tke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Fp(r,this._parents,this._name,this._id)}function PCt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Fp(o,this._parents,this._name,this._id)}function kCt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $Ct(e,t,n){var r,i,s=kCt(t)?DK:fh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function RCt(e,t){var n=this._id;return arguments.length<2?Af(this.node(),n).on.on(e):this.each($Ct(n,e,t))}function NCt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function DCt(){return this.on("end.remove",NCt(this._id))}function MCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=TK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,w4(l[d],t,n,d,l,Af(c,n)));return new Fp(s,this._parents,t,n)}function LCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ske(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Af(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&w4(h,t,n,m,d,p);s.push(d),o.push(c)}return new Fp(s,o,t,n)}var FCt=hI.prototype.constructor;function jCt(){return new FCt(this._groups,this._parents)}function BCt(e,t){var n,r,i;return function(){var s=kw(this,e),o=(this.style.removeProperty(e),kw(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function f$e(e){return function(){this.style.removeProperty(e)}}function zCt(e,t,n){var r,i=n+"",s;return function(){var o=kw(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function UCt(e,t,n){var r,i,s;return function(){var o=kw(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),kw(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function VCt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=fh(this,e),l=u.on,c=u.value[s]==null?a||(a=f$e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function HCt(e,t,n){var r=(e+="")=="transform"?n$e:c$e;return t==null?this.styleTween(e,BCt(e,r)).on("end.style."+e,f$e(e)):typeof t=="function"?this.styleTween(e,UCt(e,r,MK(this,"style."+e,t))).each(VCt(this._id,e)):this.styleTween(e,zCt(e,r,t),n).on("end.style."+e,null)}function qCt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function WCt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&qCt(e,o,n)),r}return s._value=t,s}function GCt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,WCt(e,t,n??""))}function YCt(e){return function(){this.textContent=e}}function KCt(e){return function(){var t=e(this);this.textContent=t??""}}function XCt(e){return this.tween("text",typeof e=="function"?KCt(MK(this,"text",e)):YCt(e==null?"":e+""))}function QCt(e){return function(t){this.textContent=e.call(this,t)}}function JCt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&QCt(i)),t}return r._value=e,r}function ZCt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,JCt(e))}function eAt(){for(var e=this._name,t=this._id,n=d$e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Af(u,t);w4(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Fp(r,this._parents,e,n)}function tAt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=fh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var nAt=0;function Fp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function d$e(){return++nAt}var Ih=hI.prototype;Fp.prototype={constructor:Fp,select:MCt,selectAll:LCt,selectChild:Ih.selectChild,selectChildren:Ih.selectChildren,filter:OCt,merge:PCt,selection:jCt,transition:eAt,call:Ih.call,nodes:Ih.nodes,node:Ih.node,size:Ih.size,empty:Ih.empty,each:Ih.each,on:RCt,attr:hCt,attrTween:vCt,style:HCt,styleTween:GCt,text:XCt,textTween:ZCt,remove:DCt,tween:oCt,delay:wCt,duration:SCt,ease:CCt,easeVarying:ICt,end:tAt,[Symbol.iterator]:Ih[Symbol.iterator]};const rAt=e=>+e;function iAt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sAt={time:null,delay:0,duration:250,ease:iAt};function oAt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function aAt(e){var t,n;e instanceof Fp?(t=e._id,e=e._name):(t=d$e(),(n=sAt).time=b4(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&w4(u,e,t,l,o,n||oAt(u,t));return new Fp(r,this._parents,e,t)}hI.prototype.interrupt=rCt;hI.prototype.transition=aAt;const Pj=e=>()=>e;function uAt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function lAt(e){e.stopImmediatePropagation()}function kj(e){e.preventDefault(),e.stopImmediatePropagation()}var $he={name:"drag"},$j={name:"space"},T_={name:"handle"},C_={name:"center"};const{abs:Rhe,max:$o,min:Ro}=Math;function Nhe(e){return[+e[0],+e[1]]}function dV(e){return[Nhe(e[0]),Nhe(e[1])]}var g$={name:"x",handles:["w","e"].map(OC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},y$={name:"y",handles:["n","s"].map(OC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},cAt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(OC),input:function(e){return e==null?null:dV(e)},output:function(e){return e}},Oh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dhe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Mhe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},fAt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},dAt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function OC(e){return{type:e}}function hAt(e){return!e.ctrlKey&&!e.button}function pAt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function mAt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rj(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function gAt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function yAt(){return LK(g$)}function vAt(){return LK(y$)}function _At(){return LK(cAt)}function LK(e){var t=pAt,n=hAt,r=mAt,i=!0,s=p4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([OC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Oh.overlay).merge(y).each(function(){var _=Rj(this).extent;ts(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([OC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Oh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Oh[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,b=_.__brush,E=c(_,arguments),w=b.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,b.extent),S=fm(w,x);function P(A){b.selection=A===1&&x===null?null:S(A),l.call(_),E.brush()}return w!==null&&x!==null?P:P(1)}):g.each(function(){var _=this,b=arguments,E=_.__brush,w=e.input(typeof y=="function"?y.apply(_,b):y,E.extent),x=c(_,b).beforestart();fV(_),E.selection=w===null?null:w,l.call(_),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ts(this),y=Rj(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=ts(this.that).datum();s.call(g,this.that,new uAt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?$he:i&&g.altKey?C_:T_,b=e===y$?null:fAt[v],E=e===g$?null:dAt[v],w=Rj(y),x=w.extent,S=w.selection,P=x[0][0],A,O,z=x[0][1],M,R,D=x[1][0],L,V,B=x[1][1],H,U,k=0,$=0,q,F=b&&E&&i&&g.shiftKey,j,Q,se=Array.from(g.touches||[g],Oe=>{const Me=Oe.identifier;return Oe=nV(Oe,y),Oe.point0=Oe.slice(),Oe.identifier=Me,Oe});fV(y);var ae=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(q=!0);const Oe=[se[0],se[1]||se[0]];w.selection=S=[[A=e===y$?P:Ro(Oe[0][0],Oe[1][0]),M=e===g$?z:Ro(Oe[0][1],Oe[1][1])],[L=e===y$?D:$o(Oe[0][0],Oe[1][0]),H=e===g$?B:$o(Oe[0][1],Oe[1][1])]],se.length>1&&Fe(g)}else A=S[0][0],M=S[0][1],L=S[1][0],H=S[1][1];O=A,R=M,V=L,U=H;var ce=ts(y).attr("pointer-events","none"),le=ce.selectAll(".overlay").attr("cursor",Oh[v]);if(g.touches)ae.moved=ue,ae.ended=$e;else{var ge=ts(g.view).on("mousemove.brush",ue,!0).on("mouseup.brush",$e,!0);i&&ge.on("keydown.brush",Ge,!0).on("keyup.brush",Re,!0),c2t(g.view)}l.call(y),ae.start(g,_.name);function ue(Oe){for(const Me of Oe.changedTouches||[Oe])for(const Ut of se)Ut.identifier===Me.identifier&&(Ut.cur=nV(Me,y));if(F&&!j&&!Q&&se.length===1){const Me=se[0];Rhe(Me.cur[0]-Me[0])>Rhe(Me.cur[1]-Me[1])?Q=!0:j=!0}for(const Me of se)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);q=!0,kj(Oe),Fe(Oe)}function Fe(Oe){const Me=se[0],Ut=Me.point0;var Qe;switch(k=Me[0]-Ut[0],$=Me[1]-Ut[1],_){case $j:case $he:{b&&(k=$o(P-A,Ro(D-L,k)),O=A+k,V=L+k),E&&($=$o(z-M,Ro(B-H,$)),R=M+$,U=H+$);break}case T_:{se[1]?(b&&(O=$o(P,Ro(D,se[0][0])),V=$o(P,Ro(D,se[1][0])),b=1),E&&(R=$o(z,Ro(B,se[0][1])),U=$o(z,Ro(B,se[1][1])),E=1)):(b<0?(k=$o(P-A,Ro(D-A,k)),O=A+k,V=L):b>0&&(k=$o(P-L,Ro(D-L,k)),O=A,V=L+k),E<0?($=$o(z-M,Ro(B-M,$)),R=M+$,U=H):E>0&&($=$o(z-H,Ro(B-H,$)),R=M,U=H+$));break}case C_:{b&&(O=$o(P,Ro(D,A-k*b)),V=$o(P,Ro(D,L+k*b))),E&&(R=$o(z,Ro(B,M-$*E)),U=$o(z,Ro(B,H+$*E)));break}}V<O&&(b*=-1,Qe=A,A=L,L=Qe,Qe=O,O=V,V=Qe,v in Dhe&&le.attr("cursor",Oh[v=Dhe[v]])),U<R&&(E*=-1,Qe=M,M=H,H=Qe,Qe=R,R=U,U=Qe,v in Mhe&&le.attr("cursor",Oh[v=Mhe[v]])),w.selection&&(S=w.selection),j&&(O=S[0][0],V=S[1][0]),Q&&(R=S[0][1],U=S[1][1]),(S[0][0]!==O||S[0][1]!==R||S[1][0]!==V||S[1][1]!==U)&&(w.selection=[[O,R],[V,U]],l.call(y),ae.brush(Oe,_.name))}function $e(Oe){if(lAt(Oe),Oe.touches){if(Oe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else f2t(Oe.view,q),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ce.attr("pointer-events","all"),le.attr("cursor",Oh.overlay),w.selection&&(S=w.selection),gAt(S)&&(w.selection=null,l.call(y)),ae.end(Oe,_.name)}function Ge(Oe){switch(Oe.keyCode){case 16:{F=b&&E;break}case 18:{_===T_&&(b&&(L=V-k*b,A=O+k*b),E&&(H=U-$*E,M=R+$*E),_=C_,Fe(Oe));break}case 32:{(_===T_||_===C_)&&(b<0?L=V-k:b>0&&(A=O-k),E<0?H=U-$:E>0&&(M=R-$),_=$j,le.attr("cursor",Oh.selection),Fe(Oe));break}default:return}kj(Oe)}function Re(Oe){switch(Oe.keyCode){case 16:{F&&(j=Q=F=!1,Fe(Oe));break}case 18:{_===C_&&(b<0?L=V:b>0&&(A=O),E<0?H=U:E>0&&(M=R),_=T_,Fe(Oe));break}case 32:{_===$j&&(Oe.altKey?(b&&(L=V-k*b,A=O+k*b),E&&(H=U-$*E,M=R+$*E),_=C_):(b<0?L=V:b>0&&(A=O),E<0?H=U:E>0&&(M=R),_=T_),le.attr("cursor",Oh[v]),Fe(Oe));break}default:return}kj(Oe)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=dV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Pj(dV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Pj(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Pj(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const hV=Math.PI,pV=2*hV,Oy=1e-6,bAt=pV-Oy;function h$e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wAt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return h$e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let FK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?h$e:wAt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Oy)if(!(Math.abs(f*u-l*c)>Oy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((hV-Math.acos((m+d-g)/(2*y*v)))/2),b=_/v,E=_/y;Math.abs(b-1)>Oy&&this._append`L${t+b*c},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Oy||Math.abs(this._y1-c)>Oy)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%pV+pV),d>bAt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Oy&&this._append`A${r},${r},0,${+(d>=hV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function E4(){return new FK}E4.prototype=FK.prototype;const _p=11102230246251565e-32,No=134217729,EAt=(3+8*_p)*_p;function Nj(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function xAt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function gI(e){return new Float64Array(e)}const SAt=(3+16*_p)*_p,TAt=(2+12*_p)*_p,CAt=(9+64*_p)*_p*_p,A_=gI(4),Lhe=gI(8),Fhe=gI(12),jhe=gI(16),ga=gI(4);function AAt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,b,E,w,x,S;const P=e-i,A=n-i,O=t-s,z=r-s;b=P*z,d=No*P,h=d-(d-P),p=P-h,d=No*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=O*A,d=No*O,h=d-(d-O),p=O-h,d=No*A,m=d-(d-A),g=A-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,A_[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,A_[1]=_-(y+f)+(f-w),S=v+y,f=S-v,A_[2]=v-(S-f)+(y-f),A_[3]=S;let M=xAt(4,A_),R=TAt*o;if(M>=R||-M>=R||(f=e-P,a=e-(P+f)+(f-i),f=n-A,l=n-(A+f)+(f-i),f=t-O,u=t-(O+f)+(f-s),f=r-z,c=r-(z+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(R=CAt*o+EAt*Math.abs(M),M+=P*c+z*a-(O*l+A*u),M>=R||-M>=R))return M;b=a*z,d=No*a,h=d-(d-a),p=a-h,d=No*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=u*A,d=No*u,h=d-(d-u),p=u-h,d=No*A,m=d-(d-A),g=A-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ga[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ga[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ga[2]=v-(S-f)+(y-f),ga[3]=S;const D=Nj(4,A_,4,ga,Lhe);b=P*c,d=No*P,h=d-(d-P),p=P-h,d=No*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=O*l,d=No*O,h=d-(d-O),p=O-h,d=No*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ga[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ga[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ga[2]=v-(S-f)+(y-f),ga[3]=S;const L=Nj(D,Lhe,4,ga,Fhe);b=a*c,d=No*a,h=d-(d-a),p=a-h,d=No*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=u*l,d=No*u,h=d-(d-u),p=u-h,d=No*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ga[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ga[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ga[2]=v-(S-f)+(y-f),ga[3]=S;const V=Nj(L,Fhe,4,ga,jhe);return jhe[V-1]}function kP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=SAt*l?u:-AAt(e,t,n,r,i,s,l)}const Bhe=Math.pow(2,-52),$P=new Uint32Array(512);class JD{static from(t,n=$At,r=RAt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new JD(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const O=t[2*A],z=t[2*A+1];O<a&&(a=O),z<u&&(u=z),O>l&&(l=O),z>c&&(c=z),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let A=0;A<o;A++){const O=Dj(f,d,t[2*A],t[2*A+1]);O<h&&(p=A,h=O)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let A=0;A<o;A++){if(A===p)continue;const O=Dj(y,v,t[2*A],t[2*A+1]);O<h&&O>0&&(m=A,h=O)}let _=t[2*m],b=t[2*m+1],E=1/0;for(let A=0;A<o;A++){if(A===p||A===m)continue;const O=PAt(y,v,_,b,t[2*A],t[2*A+1]);O<E&&(g=A,E=O)}let w=t[2*g],x=t[2*g+1];if(E===1/0){for(let z=0;z<o;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];vb(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let O=0;for(let z=0,M=-1/0;z<o;z++){const R=this._ids[z];this._dists[R]>M&&(A[O++]=R,M=this._dists[R])}this.hull=A.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(kP(y,v,_,b,w,x)<0){const A=m,O=_,z=b;m=g,_=w,b=x,g=A,w=O,x=z}const S=kAt(y,v,_,b,w,x);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=Dj(t[2*A],t[2*A+1],S.x,S.y);vb(this._ids,this._dists,0,o-1),this._hullStart=p;let P=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,b)]=m,s[this._hashKey(w,x)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let A=0,O,z;A<this._ids.length;A++){const M=this._ids[A],R=t[2*M],D=t[2*M+1];if(A>0&&Math.abs(R-O)<=Bhe&&Math.abs(D-z)<=Bhe||(O=R,z=D,M===p||M===m||M===g))continue;let L=0;for(let k=0,$=this._hashKey(R,D);k<this._hashSize&&(L=s[($+k)%this._hashSize],!(L!==-1&&L!==r[L]));k++);L=n[L];let V=L,B;for(;B=r[V],kP(R,D,t[2*V],t[2*V+1],t[2*B],t[2*B+1])>=0;)if(V=B,V===L){V=-1;break}if(V===-1)continue;let H=this._addTriangle(V,M,r[V],-1,-1,i[V]);i[M]=this._legalize(H+2),i[V]=H,P++;let U=r[V];for(;B=r[U],kP(R,D,t[2*U],t[2*U+1],t[2*B],t[2*B+1])<0;)H=this._addTriangle(U,M,B,i[M],-1,i[U]),i[M]=this._legalize(H+2),r[U]=U,P--,U=B;if(V===L)for(;B=n[V],kP(R,D,t[2*B],t[2*B+1],t[2*V],t[2*V+1])<0;)H=this._addTriangle(B,M,V,-1,i[V],i[B]),this._legalize(H+2),i[B]=H,r[V]=V,P--,V=B;this._hullStart=n[M]=V,r[V]=n[U]=M,r[M]=U,s[this._hashKey(R,D)]=M,s[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(P);for(let A=0,O=this._hullStart;A<P;A++)this.hull[A]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(IAt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=$P[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(OAt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<$P.length&&($P[s++]=v)}else{if(s===0)break;t=$P[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function IAt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Dj(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function OAt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function PAt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function kAt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function vb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;yS(e,i,s),t[e[n]]>t[e[r]]&&yS(e,n,r),t[e[s]]>t[e[r]]&&yS(e,s,r),t[e[n]]>t[e[s]]&&yS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;yS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(vb(e,t,s,r),vb(e,t,n,o-1)):(vb(e,t,n,o-1),vb(e,t,s,r))}}function yS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $At(e){return e[0]}function RAt(e){return e[1]}var zhe={},Mj={},Lj=34,vS=10,Fj=13;function p$e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function NAt(e,t){var n=p$e(e);return function(r,i){return t(n(r),i,e)}}function Uhe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Ja(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function DAt(e){return e<0?"-"+Ja(-e,6):e>9999?"+"+Ja(e,6):Ja(e,4)}function MAt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":DAt(e.getUTCFullYear())+"-"+Ja(e.getUTCMonth()+1,2)+"-"+Ja(e.getUTCDate(),2)+(i?"T"+Ja(t,2)+":"+Ja(n,2)+":"+Ja(r,2)+"."+Ja(i,3)+"Z":r?"T"+Ja(t,2)+":"+Ja(n,2)+":"+Ja(r,2)+"Z":n||t?"T"+Ja(t,2)+":"+Ja(n,2)+"Z":"")}function m$e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?NAt(g,d):p$e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===vS&&--p,f.charCodeAt(p-1)===Fj&&--p;function b(){if(v)return Mj;if(_)return _=!1,zhe;var w,x=m,S;if(f.charCodeAt(x)===Lj){for(;m++<p&&f.charCodeAt(m)!==Lj||f.charCodeAt(++m)===Lj;);return(w=m)>=p?v=!0:(S=f.charCodeAt(m++))===vS?_=!0:S===Fj&&(_=!0,f.charCodeAt(m)===vS&&++m),f.slice(x+1,w-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(w=m++))===vS)_=!0;else if(S===Fj)_=!0,f.charCodeAt(m)===vS&&++m;else if(S!==n)continue;return f.slice(x,w)}return v=!0,f.slice(x,p)}for(;(y=b())!==Mj;){for(var E=[];y!==zhe&&y!==Mj;)E.push(y),y=b();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Uhe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Uhe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?MAt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var LAt=m$e(","),FAt=LAt.parse;function jAt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function BAt(e,t){return fetch(e,t).then(jAt)}function zAt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),BAt(t,n).then(function(i){return e(i,r)})}}var UAt=zAt(FAt);function VAt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function HAt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return g$e(this.cover(t,n),t,n,e)}function g$e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function qAt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)g$e(this,o[n],a[n],e[n]);return this}function WAt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function GAt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function YAt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ca(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function KAt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ca(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ca(h[3],g,y,u,l),new Ca(h[2],o,y,g,l),new Ca(h[1],g,a,u,y),new Ca(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),b=v*v+_*_;if(b<n){var E=Math.sqrt(n=b);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function XAt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function QAt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function JAt(){return this._root}function ZAt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function eIt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ca(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ca(i,l,c,a,u)),(i=r[2])&&t.push(new Ca(i,s,c,l,u)),(i=r[1])&&t.push(new Ca(i,l,o,a,c)),(i=r[0])&&t.push(new Ca(i,s,o,l,c))}return this}function tIt(e){var t=[],n=[],r;for(this._root&&t.push(new Ca(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ca(s,o,a,c,f)),(s=i[1])&&t.push(new Ca(s,c,a,u,f)),(s=i[2])&&t.push(new Ca(s,o,f,c,l)),(s=i[3])&&t.push(new Ca(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function nIt(e){return e[0]}function rIt(e){return arguments.length?(this._x=e,this):this._x}function iIt(e){return e[1]}function sIt(e){return arguments.length?(this._y=e,this):this._y}function jK(e,t,n){var r=new BK(t??nIt,n??iIt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function BK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Vhe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Va=jK.prototype=BK.prototype;Va.copy=function(){var e=new BK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Vhe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Vhe(r));return e};Va.add=HAt;Va.addAll=qAt;Va.cover=WAt;Va.data=GAt;Va.extent=YAt;Va.find=KAt;Va.remove=XAt;Va.removeAll=QAt;Va.root=JAt;Va.size=ZAt;Va.visit=eIt;Va.visitAfter=tIt;Va.x=rIt;Va.y=sIt;function Aa(e){return function(){return e}}function cg(e){return(e()-.5)*1e-6}function oIt(e){return e.x+e.vx}function aIt(e){return e.y+e.vy}function uIt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Aa(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=jK(t,oIt,aIt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,b,E,w,x){var S=_.data,P=_.r,A=m+P;if(S){if(S.index>d.index){var O=h-S.x-S.vx,z=p-S.y-S.vy,M=O*O+z*z;M<A*A&&(O===0&&(O=cg(r),M+=O*O),z===0&&(z=cg(r),M+=z*z),M=(A-(M=Math.sqrt(M)))/M*i,d.vx+=(O*=M)*(A=(P*=P)/(g+P)),d.vy+=(z*=M)*A,S.vx-=O*(A=1-A),S.vy-=z*A)}return}return b>h+A||w<h-A||E>p+A||x<p-A}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Aa(+l),u(),o):e},o}function lIt(e){return e.index}function Hhe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function cIt(e){var t=lIt,n=f,r,i=Aa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,b,E,w,x,S,P,A;_<v;++_)b=e[_],E=b.source,w=b.target,x=w.x+w.vx-E.x-E.vx||cg(l),S=w.y+w.vy-E.y-E.vy||cg(l),P=Math.sqrt(x*x+S*S),P=(P-s[_])/P*g*r[_],x*=P,S*=P,w.vx-=x*(A=u[_]),w.vy-=S*A,E.vx+=x*(A=1-A),E.vy+=S*A}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,w)=>[t(E,w,o),E])),b;for(g=0,a=new Array(y);g<v;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=Hhe(_,b.source)),typeof b.target!="object"&&(b.target=Hhe(_,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)b=e[g],u[g]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Aa(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Aa(+g),m(),d):i},d}const fIt=1664525,dIt=1013904223,qhe=4294967296;function hIt(){let e=1;return()=>(e=(fIt*e+dIt)%qhe)/qhe}function pIt(e){return e.x}function mIt(e){return e.y}var gIt=10,yIt=Math.PI*(3-Math.sqrt(5));function vIt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=NK(f),l=p4("tick","end"),c=hIt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(b){b(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=gIt*Math.sqrt(.5+m),_=m*yIt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,b,E,w,x,S;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],b=m-x.x,E=g-x.y,w=b*b+E*E,w<y&&(S=x,y=w);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function _It(){var e,t,n,r,i=Aa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=jK(e,pIt,mIt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,b;if(h.length){for(v=_=b=0;b<4;++b)(m=h[b])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,b=y*y+v*v;if(_*_/u<b)return b<a&&(y===0&&(y=cg(n),b+=y*y),v===0&&(v=cg(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=cg(n),b+=y*y),v===0&&(v=cg(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)));do h.data!==t&&(_=s[h.data.index]*r/b,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Aa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function bIt(e){var t=Aa(.1),n,r,i;typeof e!="function"&&(e=Aa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Aa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Aa(+a),o(),s):e},s}function wIt(e){var t=Aa(.1),n,r,i;typeof e!="function"&&(e=Aa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Aa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Aa(+a),o(),s):e},s}function EIt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ZD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Nw(e){return e=ZD(Math.abs(e)),e?e[1]:NaN}function xIt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function SIt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var TIt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tv(e){if(!(t=TIt.exec(e)))throw new Error("invalid format: "+e);var t;return new zK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tv.prototype=zK.prototype;function zK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CIt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var y$e;function AIt(e,t){var n=ZD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(y$e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ZD(e,Math.max(0,t+s-1))[0]}function Whe(e,t){var n=ZD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ghe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:EIt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Whe(e*100,t),r:Whe,s:AIt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yhe(e){return e}var Khe=Array.prototype.map,Xhe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function v$e(e){var t=e.grouping===void 0||e.thousands===void 0?Yhe:xIt(Khe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Yhe:SIt(Khe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=tv(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,b=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Ghe[E]||(_===void 0&&(_=12),b=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",S=Ghe[E],P=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function A(O){var z=w,M=x,R,D,L;if(E==="c")M=S(O)+M,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?u:S(Math.abs(O),_),b&&(O=CIt(O)),V&&+O==0&&p!=="+"&&(V=!1),z=(V?p==="("?p:a:p==="-"||p==="("?"":p)+z,M=(E==="s"?Xhe[8+y$e/3]:"")+M+(V&&p==="("?")":""),P){for(R=-1,D=O.length;++R<D;)if(L=O.charCodeAt(R),48>L||L>57){M=(L===46?i+O.slice(R+1):O.slice(R))+M,O=O.slice(0,R);break}}}v&&!g&&(O=t(O,1/0));var B=z.length+O.length+M.length,H=B<y?new Array(y-B+1).join(d):"";switch(v&&g&&(O=t(H+O,H.length?y-M.length:1/0),H=""),h){case"<":O=z+O+M+H;break;case"=":O=z+H+O+M;break;case"^":O=H.slice(0,B=H.length>>1)+z+O+M+H.slice(B);break;default:O=H+z+O+M;break}return s(O)}return A.toString=function(){return f+""},A}function c(f,d){var h=l((f=tv(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Nw(d)/3)))*3,m=Math.pow(10,-p),g=Xhe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var RP,QE,UK;IIt({thousands:",",grouping:[3],currency:["$",""]});function IIt(e){return RP=v$e(e),QE=RP.format,UK=RP.formatPrefix,RP}function _$e(e){return Math.max(0,-Nw(Math.abs(e)))}function b$e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nw(t)/3)))*3-Nw(Math.abs(e)))}function w$e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nw(t)-Nw(e))+1}function OIt(e,t){return e.parent===t.parent?1:2}function PIt(e){return e.reduce(kIt,0)/e.length}function kIt(e,t){return e+t.x}function $It(e){return 1+e.reduce(RIt,0)}function RIt(e,t){return Math.max(e,t.y)}function NIt(e){for(var t;t=e.children;)e=t[0];return e}function DIt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function MIt(){var e=OIt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=PIt(h),d.y=$It(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=NIt(s),l=DIt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function LIt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function FIt(){return this.eachAfter(LIt)}function jIt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function BIt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function zIt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function UIt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function VIt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function HIt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function qIt(e){for(var t=this,n=WIt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function WIt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function GIt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function YIt(){return Array.from(this)}function KIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function XIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*QIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function x4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=eOt)):t===void 0&&(t=ZIt);for(var n=new Dw(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new Dw(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(E$e)}function JIt(){return x4(this).eachBefore(tOt)}function ZIt(e){return e.children}function eOt(e){return Array.isArray(e)?e[1]:null}function tOt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function E$e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Dw(e){this.data=e,this.depth=this.height=0,this.parent=null}Dw.prototype=x4.prototype={constructor:Dw,count:FIt,each:jIt,eachAfter:zIt,eachBefore:BIt,find:UIt,sum:VIt,sort:HIt,path:qIt,ancestors:GIt,descendants:YIt,leaves:KIt,links:XIt,copy:JIt,[Symbol.iterator]:QIt};function v$(e){return e==null?null:x$e(e)}function x$e(e){if(typeof e!="function")throw new Error;return e}function Vy(){return 0}function G_(e){return function(){return e}}const nOt=1664525,rOt=1013904223,Qhe=4294967296;function iOt(){let e=1;return()=>(e=(nOt*e+rOt)%Qhe)/Qhe}function sOt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oOt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function aOt(e,t){for(var n=0,r=(e=oOt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&S$e(o,s)?++n:(o=lOt(i=uOt(i,s)),n=0);return o}function uOt(e,t){var n,r;if(jj(t,e))return[t];for(n=0;n<e.length;++n)if(NP(t,e[n])&&jj(hT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(NP(hT(e[n],e[r]),t)&&NP(hT(e[n],t),e[r])&&NP(hT(e[r],t),e[n])&&jj(T$e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function NP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function S$e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function jj(e,t){for(var n=0;n<t.length;++n)if(!S$e(e,t[n]))return!1;return!0}function lOt(e){switch(e.length){case 1:return cOt(e[0]);case 2:return hT(e[0],e[1]);case 3:return T$e(e[0],e[1],e[2])}}function cOt(e){return{x:e.x,y:e.y,r:e.r}}function hT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function T$e(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,b=v-l*l-c*c+f*f,E=h*p-d*m,w=(p*b-m*_)/(E*2)-r,x=(m*g-p*y)/E,S=(h*_-d*b)/(E*2)-i,P=(d*y-h*g)/E,A=x*x+P*P-1,O=2*(s+w*x+S*P),z=w*w+S*S-s*s,M=-(Math.abs(A)>1e-6?(O+Math.sqrt(O*O-4*A*z))/(2*A):z/O);return{x:r+w+x*M,y:i+S+P*M,r:M}}function Jhe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Zhe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function epe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function DP(e){this._=e,this.next=null,this.previous=null}function fOt(e,t){if(!(s=(e=sOt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Jhe(r,n,i=e[2]),n=new DP(n),r=new DP(r),i=new DP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Jhe(n._,r._,i=e[u]),i=new DP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Zhe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Zhe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=epe(n);(i=i.next)!==r;)(a=epe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=aOt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function dOt(e){return Math.sqrt(e.value)}function C$e(){var e=null,t=1,n=1,r=Vy;function i(s){const o=iOt();return s.x=t/2,s.y=n/2,e?s.eachBefore(tpe(e)).eachAfter(Bj(r,.5,o)).eachBefore(npe(1)):s.eachBefore(tpe(dOt)).eachAfter(Bj(Vy,1,o)).eachAfter(Bj(r,s.r/Math.min(t,n),o)).eachBefore(npe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=v$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:G_(+s),i):r},i}function tpe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Bj(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=fOt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function npe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function A$e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function yI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function hOt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(A$e),o}function s(o,a){return function(u){u.children&&yI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var pOt={depth:-1},rpe={},zj={};function mOt(e){return e.id}function gOt(e){return e.parentId}function ipe(){var e=mOt,t=gOt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((b,E)=>yOt(n(b,E,i))),v=y.map(spe),_=new Set(y).add("");for(const b of v)_.has(b)||(_.add(b),y.push(b),v.push(spe(b)),s.push(zj));o=(b,E)=>y[E],a=(b,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new Dw(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?rpe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===rpe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===zj&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===zj);--y)h.data=null}if(f.parent=pOt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(E$e),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=v$(i),r):e},r.parentId=function(i){return arguments.length?(t=v$(i),r):t},r.path=function(i){return arguments.length?(n=v$(i),r):n},r}function yOt(e){e=`${e}`;let t=e.length;return mV(e,t-1)&&!mV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function spe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!mV(e,t););return e.slice(0,t)}function mV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function vOt(e,t){return e.parent===t.parent?1:2}function Uj(e){var t=e.children;return t?t[0]:e.t}function Vj(e){var t=e.children;return t?t[t.length-1]:e.t}function _Ot(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function bOt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function wOt(e,t,n){return e.a.parent===t.parent?e.a:n}function _$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}_$.prototype=Object.create(Dw.prototype);function EOt(e){for(var t=new _$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new _$(s[o],o)),i.parent=n;return(t.parent=new _$(null,0)).children=[t],t}function xOt(){var e=vOt,t=1,n=1,r=null;function i(l){var c=EOt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){bOt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,b;p=Vj(p),d=Uj(d),p&&d;)m=Uj(m),h=Vj(h),h.a=l,b=p.z+v-d.z-g+e(p._,d._),b>0&&(_Ot(wOt(p,l,f),l,b),g+=b,y+=b),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!Vj(h)&&(h.t=p,h.m+=v-y),d&&!Uj(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function S4(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var I$e=(1+Math.sqrt(5))/2;function O$e(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,b,E,w;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),w=g*g*E,b=Math.max(v/w,w/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),w=g*g*E,_=Math.max(v/w,w/y),_>b){g-=l;break}b=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?yI(u,n,r,i,m?r+=p*g/m:s):S4(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const P$e=function e(t){function n(r,i,s,o,a){O$e(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(I$e);function SOt(){var e=P$e,t=!1,n=1,r=1,i=[0],s=Vy,o=Vy,a=Vy,u=Vy,l=Vy;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(A$e),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=x$e(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:G_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:G_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:G_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:G_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:G_(+d),c):l},c}function TOt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],b=h/2+_,E=f+1,w=d-1;E<w;){var x=E+w>>>1;l[x]<b?E=x+1:w=x}b-l[E-1]<l[E]-b&&f+1<E&&--E;var S=l[E]-_,P=h-S;if(g-p>y-m){var A=h?(p*P+g*S)/h:g;c(f,E,S,p,m,A,y),c(E,d,P,A,m,g,y)}else{var O=h?(m*P+y*S)/h:y;c(f,E,S,p,m,g,O),c(E,d,P,p,O,g,y)}}}function COt(e,t,n,r,i){(e.depth&1?S4:yI)(e,t,n,r,i)}const AOt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?yI(l,i,s,o,m?s+=(a-s)*l.value/m:a):S4(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=O$e(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(I$e);function h2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IOt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function k$e(e){let t,n,r;e.length!==2?(t=h2,n=(a,u)=>h2(e(a),u),r=(a,u)=>e(a)-u):(t=e===h2||e===IOt?e:OOt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function OOt(){return 0}function $$e(e){return e===null?NaN:+e}const POt=k$e(h2),kOt=POt.right;k$e($$e).center;const T4=kOt,$Ot=Math.sqrt(50),ROt=Math.sqrt(10),NOt=Math.sqrt(2);function e3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=$Ot?10:s>=ROt?5:s>=NOt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?e3(e,t,n*2):[a,u,l]}function gV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?e3(t,e,n):e3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function yV(e,t,n){return t=+t,e=+e,n=+n,e3(e,t,n)[2]}function DOt(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?yV(t,e,n):yV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function MOt(e,t,n=$$e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function LOt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function If(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function z0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vV=Symbol("implicit");function JE(){var e=new dhe,t=[],n=[],r=vV;function i(s){let o=e.get(s);if(o===void 0){if(r!==vV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new dhe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return JE(t,n).unknown(r)},If.apply(i,arguments),i}function vI(){var e=JE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=LOt(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return vI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},If.apply(f(),arguments)}function FOt(e){return function(){return e}}function _V(e){return+e}var ope=[0,1];function mu(e){return e}function bV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:FOt(isNaN(t)?NaN:.5)}function jOt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function BOt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=bV(i,r),s=n(o,s)):(r=bV(r,i),s=n(s,o)),function(a){return s(r(a))}}function zOt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=bV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=T4(e,a,1,r)-1;return s[u](i[u](a))}}function _I(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function C4(){var e=ope,t=ope,n=fm,r,i,s,o=mu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==mu&&(o=jOt(e[0],e[d-1])),a=d>2?zOt:BOt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Vl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,_V),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=mI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:mu,c()):o!==mu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function R$e(){return C4()(mu,mu)}function N$e(e,t,n,r){var i=DOt(e,t,n),s;switch(r=tv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=b$e(i,o))&&(r.precision=s),UK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=w$e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=_$e(i))&&(r.precision=s-(r.type==="%")*2);break}}return QE(r)}function Hv(e){var t=e.domain;return e.ticks=function(n){var r=t();return gV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return N$e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=yV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function jp(){var e=R$e();return e.copy=function(){return _I(e,jp())},If.apply(e,arguments),Hv(e)}function D$e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,_V),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return D$e(e).unknown(t)},e=arguments.length?Array.from(e,_V):[0,1],Hv(n)}function M$e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ape(e){return Math.log(e)}function upe(e){return Math.exp(e)}function UOt(e){return-Math.log(-e)}function VOt(e){return-Math.exp(-e)}function HOt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qOt(e){return e===10?HOt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function WOt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lpe(e){return(t,n)=>-e(-t,n)}function VK(e){const t=e(ape,upe),n=t.domain;let r=10,i,s;function o(){return i=WOt(r),s=qOt(r),n()[0]<0?(i=lpe(i),s=lpe(s),e(UOt,VOt)):e(ape,upe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=gV(l,c,g))}else y=gV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=tv(u)).precision==null&&(u.trim=!0),u=QE(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(M$e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function L$e(){const e=VK(C4()).domain([1,10]);return e.copy=()=>_I(e,L$e()).base(e.base()),If.apply(e,arguments),e}function cpe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function fpe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function HK(e){var t=1,n=e(cpe(t),fpe(t));return n.constant=function(r){return arguments.length?e(cpe(t=+r),fpe(t)):t},Hv(n)}function F$e(){var e=HK(C4());return e.copy=function(){return _I(e,F$e()).constant(e.constant())},If.apply(e,arguments)}function dpe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function GOt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function YOt(e){return e<0?-e*e:e*e}function qK(e){var t=e(mu,mu),n=1;function r(){return n===1?e(mu,mu):n===.5?e(GOt,YOt):e(dpe(n),dpe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Hv(t)}function WK(){var e=qK(C4());return e.copy=function(){return _I(e,WK()).exponent(e.exponent())},If.apply(e,arguments),e}function KOt(){return WK.apply(null,arguments).exponent(.5)}function j$e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=MOt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[T4(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(h2),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return j$e().domain(e).range(t).unknown(r)},If.apply(s,arguments)}function B$e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[T4(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return B$e().domain([e,t]).range(i).unknown(s)},If.apply(Hv(o),arguments)}function z$e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[T4(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return z$e().domain(e).range(t).unknown(n)},If.apply(i,arguments)}const Hj=new Date,qj=new Date;function ks(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>ks(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(Hj.setTime(+s),qj.setTime(+o),e(Hj),e(qj),Math.floor(n(Hj,qj))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Mw=ks(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Mw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ks(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Mw);Mw.range;const op=1e3,Kl=op*60,ap=Kl*60,Bp=ap*24,GK=Bp*7,hpe=Bp*30,Wj=Bp*365,up=ks(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*op)},(e,t)=>(t-e)/op,e=>e.getUTCSeconds());up.range;const A4=ks(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*op)},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getMinutes());A4.range;const I4=ks(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getUTCMinutes());I4.range;const O4=ks(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*op-e.getMinutes()*Kl)},(e,t)=>{e.setTime(+e+t*ap)},(e,t)=>(t-e)/ap,e=>e.getHours());O4.range;const P4=ks(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ap)},(e,t)=>(t-e)/ap,e=>e.getUTCHours());P4.range;const bp=ks(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kl)/Bp,e=>e.getDate()-1);bp.range;const Dg=ks(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bp,e=>e.getUTCDate()-1);Dg.range;const U$e=ks(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bp,e=>Math.floor(e/Bp));U$e.range;function qv(e){return ks(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kl)/GK)}const ZE=qv(0),t3=qv(1),XOt=qv(2),QOt=qv(3),Lw=qv(4),JOt=qv(5),ZOt=qv(6);ZE.range;t3.range;XOt.range;QOt.range;Lw.range;JOt.range;ZOt.range;function Wv(e){return ks(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/GK)}const ex=Wv(0),n3=Wv(1),ePt=Wv(2),tPt=Wv(3),Fw=Wv(4),nPt=Wv(5),rPt=Wv(6);ex.range;n3.range;ePt.range;tPt.range;Fw.range;nPt.range;rPt.range;const PC=ks(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());PC.range;const kC=ks(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kC.range;const Vd=ks(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Vd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ks(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Vd.range;const Hd=ks(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ks(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Hd.range;function Gj(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iPt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sPt(e){let t,n,r;e.length!==2?(t=Gj,n=(a,u)=>Gj(e(a),u),r=(a,u)=>e(a)-u):(t=e===Gj||e===iPt?e:oPt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function oPt(){return 0}const aPt=Math.sqrt(50),uPt=Math.sqrt(10),lPt=Math.sqrt(2);function V$e(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=aPt?10:s>=uPt?5:s>=lPt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?V$e(e,t,n*2):[a,u,l]}function ppe(e,t,n){return t=+t,e=+e,n=+n,V$e(e,t,n)[2]}function mpe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ppe(t,e,n):ppe(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function H$e(e,t,n,r,i,s){const o=[[up,1,op],[up,5,5*op],[up,15,15*op],[up,30,30*op],[s,1,Kl],[s,5,5*Kl],[s,15,15*Kl],[s,30,30*Kl],[i,1,ap],[i,3,3*ap],[i,6,6*ap],[i,12,12*ap],[r,1,Bp],[r,2,2*Bp],[n,1,GK],[t,1,hpe],[t,3,3*hpe],[e,1,Wj]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=sPt(([,,g])=>g).right(o,d);if(h===o.length)return e.every(mpe(l/Wj,c/Wj,f));if(h===0)return Mw.every(Math.max(mpe(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[cPt,fPt]=H$e(Hd,kC,ex,U$e,P4,I4),[dPt,hPt]=H$e(Vd,PC,ZE,bp,O4,A4);function Yj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _S(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function q$e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=bS(i),c=wS(i),f=bS(s),d=wS(s),h=bS(o),p=wS(o),m=bS(a),g=wS(a),y=bS(u),v=wS(u),_={a:V,A:B,b:H,B:U,c:null,d:wpe,e:wpe,f:MPt,g:WPt,G:YPt,H:RPt,I:NPt,j:DPt,L:W$e,m:LPt,M:FPt,p:k,q:$,Q:Spe,s:Tpe,S:jPt,u:BPt,U:zPt,V:UPt,w:VPt,W:HPt,x:null,X:null,y:qPt,Y:GPt,Z:KPt,"%":xpe},b={a:q,A:F,b:j,B:Q,c:null,d:Epe,e:Epe,f:ZPt,g:lkt,G:fkt,H:XPt,I:QPt,j:JPt,L:Y$e,m:ekt,M:tkt,p:se,q:ae,Q:Spe,s:Tpe,S:nkt,u:rkt,U:ikt,V:skt,w:okt,W:akt,x:null,X:null,y:ukt,Y:ckt,Z:dkt,"%":xpe},E={a:A,A:O,b:z,B:M,c:R,d:_pe,e:_pe,f:OPt,g:vpe,G:ype,H:bpe,I:bpe,j:TPt,L:IPt,m:SPt,M:CPt,p:P,q:xPt,Q:kPt,s:$Pt,S:APt,u:vPt,U:_Pt,V:bPt,w:yPt,W:wPt,x:D,X:L,y:vpe,Y:ype,Z:EPt,"%":PPt};_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b);function w(ce,le){return function(ge){var ue=[],Fe=-1,$e=0,Ge=ce.length,Re,Oe,Me;for(ge instanceof Date||(ge=new Date(+ge));++Fe<Ge;)ce.charCodeAt(Fe)===37&&(ue.push(ce.slice($e,Fe)),(Oe=gpe[Re=ce.charAt(++Fe)])!=null?Re=ce.charAt(++Fe):Oe=Re==="e"?" ":"0",(Me=le[Re])&&(Re=Me(ge,Oe)),ue.push(Re),$e=Fe+1);return ue.push(ce.slice($e,Fe)),ue.join("")}}function x(ce,le){return function(ge){var ue=_S(1900,void 0,1),Fe=S(ue,ce,ge+="",0),$e,Ge;if(Fe!=ge.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(le&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?($e=Kj(_S(ue.y,0,1)),Ge=$e.getUTCDay(),$e=Ge>4||Ge===0?n3.ceil($e):n3($e),$e=Dg.offset($e,(ue.V-1)*7),ue.y=$e.getUTCFullYear(),ue.m=$e.getUTCMonth(),ue.d=$e.getUTCDate()+(ue.w+6)%7):($e=Yj(_S(ue.y,0,1)),Ge=$e.getDay(),$e=Ge>4||Ge===0?t3.ceil($e):t3($e),$e=bp.offset($e,(ue.V-1)*7),ue.y=$e.getFullYear(),ue.m=$e.getMonth(),ue.d=$e.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Ge="Z"in ue?Kj(_S(ue.y,0,1)).getUTCDay():Yj(_S(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Ge+5)%7:ue.w+ue.U*7-(Ge+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,Kj(ue)):Yj(ue)}}function S(ce,le,ge,ue){for(var Fe=0,$e=le.length,Ge=ge.length,Re,Oe;Fe<$e;){if(ue>=Ge)return-1;if(Re=le.charCodeAt(Fe++),Re===37){if(Re=le.charAt(Fe++),Oe=E[Re in gpe?le.charAt(Fe++):Re],!Oe||(ue=Oe(ce,ge,ue))<0)return-1}else if(Re!=ge.charCodeAt(ue++))return-1}return ue}function P(ce,le,ge){var ue=l.exec(le.slice(ge));return ue?(ce.p=c.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function A(ce,le,ge){var ue=h.exec(le.slice(ge));return ue?(ce.w=p.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function O(ce,le,ge){var ue=f.exec(le.slice(ge));return ue?(ce.w=d.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function z(ce,le,ge){var ue=y.exec(le.slice(ge));return ue?(ce.m=v.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function M(ce,le,ge){var ue=m.exec(le.slice(ge));return ue?(ce.m=g.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function R(ce,le,ge){return S(ce,t,le,ge)}function D(ce,le,ge){return S(ce,n,le,ge)}function L(ce,le,ge){return S(ce,r,le,ge)}function V(ce){return o[ce.getDay()]}function B(ce){return s[ce.getDay()]}function H(ce){return u[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function k(ce){return i[+(ce.getHours()>=12)]}function $(ce){return 1+~~(ce.getMonth()/3)}function q(ce){return o[ce.getUTCDay()]}function F(ce){return s[ce.getUTCDay()]}function j(ce){return u[ce.getUTCMonth()]}function Q(ce){return a[ce.getUTCMonth()]}function se(ce){return i[+(ce.getUTCHours()>=12)]}function ae(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var le=w(ce+="",_);return le.toString=function(){return ce},le},parse:function(ce){var le=x(ce+="",!1);return le.toString=function(){return ce},le},utcFormat:function(ce){var le=w(ce+="",b);return le.toString=function(){return ce},le},utcParse:function(ce){var le=x(ce+="",!0);return le.toString=function(){return ce},le}}}var gpe={"-":"",_:" ",0:"0"},Zs=/^\s*\d+/,pPt=/^%/,mPt=/[\\^$*+?|[\]().{}]/g;function sr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function gPt(e){return e.replace(mPt,"\\$&")}function bS(e){return new RegExp("^(?:"+e.map(gPt).join("|")+")","i")}function wS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function yPt(e,t,n){var r=Zs.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function vPt(e,t,n){var r=Zs.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _Pt(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function bPt(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function wPt(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ype(e,t,n){var r=Zs.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function vpe(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function EPt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xPt(e,t,n){var r=Zs.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function SPt(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _pe(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function TPt(e,t,n){var r=Zs.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function bpe(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function CPt(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function APt(e,t,n){var r=Zs.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function IPt(e,t,n){var r=Zs.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function OPt(e,t,n){var r=Zs.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PPt(e,t,n){var r=pPt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kPt(e,t,n){var r=Zs.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function $Pt(e,t,n){var r=Zs.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wpe(e,t){return sr(e.getDate(),t,2)}function RPt(e,t){return sr(e.getHours(),t,2)}function NPt(e,t){return sr(e.getHours()%12||12,t,2)}function DPt(e,t){return sr(1+bp.count(Vd(e),e),t,3)}function W$e(e,t){return sr(e.getMilliseconds(),t,3)}function MPt(e,t){return W$e(e,t)+"000"}function LPt(e,t){return sr(e.getMonth()+1,t,2)}function FPt(e,t){return sr(e.getMinutes(),t,2)}function jPt(e,t){return sr(e.getSeconds(),t,2)}function BPt(e){var t=e.getDay();return t===0?7:t}function zPt(e,t){return sr(ZE.count(Vd(e)-1,e),t,2)}function G$e(e){var t=e.getDay();return t>=4||t===0?Lw(e):Lw.ceil(e)}function UPt(e,t){return e=G$e(e),sr(Lw.count(Vd(e),e)+(Vd(e).getDay()===4),t,2)}function VPt(e){return e.getDay()}function HPt(e,t){return sr(t3.count(Vd(e)-1,e),t,2)}function qPt(e,t){return sr(e.getFullYear()%100,t,2)}function WPt(e,t){return e=G$e(e),sr(e.getFullYear()%100,t,2)}function GPt(e,t){return sr(e.getFullYear()%1e4,t,4)}function YPt(e,t){var n=e.getDay();return e=n>=4||n===0?Lw(e):Lw.ceil(e),sr(e.getFullYear()%1e4,t,4)}function KPt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function Epe(e,t){return sr(e.getUTCDate(),t,2)}function XPt(e,t){return sr(e.getUTCHours(),t,2)}function QPt(e,t){return sr(e.getUTCHours()%12||12,t,2)}function JPt(e,t){return sr(1+Dg.count(Hd(e),e),t,3)}function Y$e(e,t){return sr(e.getUTCMilliseconds(),t,3)}function ZPt(e,t){return Y$e(e,t)+"000"}function ekt(e,t){return sr(e.getUTCMonth()+1,t,2)}function tkt(e,t){return sr(e.getUTCMinutes(),t,2)}function nkt(e,t){return sr(e.getUTCSeconds(),t,2)}function rkt(e){var t=e.getUTCDay();return t===0?7:t}function ikt(e,t){return sr(ex.count(Hd(e)-1,e),t,2)}function K$e(e){var t=e.getUTCDay();return t>=4||t===0?Fw(e):Fw.ceil(e)}function skt(e,t){return e=K$e(e),sr(Fw.count(Hd(e),e)+(Hd(e).getUTCDay()===4),t,2)}function okt(e){return e.getUTCDay()}function akt(e,t){return sr(n3.count(Hd(e)-1,e),t,2)}function ukt(e,t){return sr(e.getUTCFullYear()%100,t,2)}function lkt(e,t){return e=K$e(e),sr(e.getUTCFullYear()%100,t,2)}function ckt(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function fkt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fw(e):Fw.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function dkt(){return"+0000"}function xpe(){return"%"}function Spe(e){return+e}function Tpe(e){return Math.floor(+e/1e3)}var I_,YK,X$e,k4,Q$e;hkt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hkt(e){return I_=q$e(e),YK=I_.format,X$e=I_.parse,k4=I_.utcFormat,Q$e=I_.utcParse,I_}function pkt(e){return new Date(e)}function mkt(e){return e instanceof Date?+e:+new Date(+e)}function KK(e,t,n,r,i,s,o,a,u,l){var c=R$e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),b=l("%Y");function E(w){return(u(w)<w?h:a(w)<w?p:o(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?y:v:n(w)<w?_:b)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,mkt)):d().map(pkt)},c.ticks=function(w){var x=d();return e(x[0],x[x.length-1],w??10)},c.tickFormat=function(w,x){return x==null?E:l(x)},c.nice=function(w){var x=d();return(!w||typeof w.range!="function")&&(w=t(x[0],x[x.length-1],w??10)),w?d(M$e(x,w)):c},c.copy=function(){return _I(c,KK(e,t,n,r,i,s,o,a,u,l))},c}function J$e(){return If.apply(KK(dPt,hPt,Vd,PC,ZE,bp,O4,A4,up,YK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gkt(){return If.apply(KK(cPt,fPt,Hd,kC,ex,Dg,P4,I4,up,k4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $4(){var e=0,t=1,n,r,i,s,o=mu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(fm),l.rangeRound=c(mI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function U0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function XK(){var e=Hv($4()(mu));return e.copy=function(){return U0(e,XK())},z0.apply(e,arguments)}function Z$e(){var e=VK($4()).domain([1,10]);return e.copy=function(){return U0(e,Z$e()).base(e.base())},z0.apply(e,arguments)}function eRe(){var e=HK($4());return e.copy=function(){return U0(e,eRe()).constant(e.constant())},z0.apply(e,arguments)}function QK(){var e=qK($4());return e.copy=function(){return U0(e,QK()).exponent(e.exponent())},z0.apply(e,arguments)}function ykt(){return QK.apply(null,arguments).exponent(.5)}function R4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=mu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=RK(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(fm),h.rangeRound=p(mI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function tRe(){var e=Hv(R4()(mu));return e.copy=function(){return U0(e,tRe())},z0.apply(e,arguments)}function nRe(){var e=VK(R4()).domain([.1,1,10]);return e.copy=function(){return U0(e,nRe()).base(e.base())},z0.apply(e,arguments)}function rRe(){var e=HK(R4());return e.copy=function(){return U0(e,rRe()).constant(e.constant())},z0.apply(e,arguments)}function JK(){var e=qK(R4());return e.copy=function(){return U0(e,JK()).exponent(e.exponent())},z0.apply(e,arguments)}function vkt(){return JK.apply(null,arguments).exponent(.5)}function _kt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const iRe=_kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function yn(e){return function(){return e}}const Cpe=Math.abs,Do=Math.atan2,dy=Math.cos,bkt=Math.max,Xj=Math.min,jf=Math.sin,s1=Math.sqrt,jo=1e-12,jw=Math.PI,r3=jw/2,p2=2*jw;function wkt(e){return e>1?0:e<-1?jw:Math.acos(e)}function Ape(e){return e>=1?r3:e<=-1?-r3:Math.asin(e)}function N4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new FK(t)}function Ekt(e){return e.innerRadius}function xkt(e){return e.outerRadius}function Skt(e){return e.startAngle}function Tkt(e){return e.endAngle}function Ckt(e){return e&&e.padAngle}function Akt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<jo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function MP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/s1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,b=v*v+_*_,E=i-s,w=d*m-p*h,x=(_<0?-1:1)*s1(bkt(0,E*E*b-w*w)),S=(w*_-v*x)/b,P=(-w*v-_*x)/b,A=(w*_+v*x)/b,O=(-w*v+_*x)/b,z=S-g,M=P-y,R=A-g,D=O-y;return z*z+M*M>R*R+D*D&&(S=A,P=O),{cx:S,cy:P,x01:-c,y01:-f,x11:S*(i/E-1),y11:P*(i/E-1)}}function wV(){var e=Ekt,t=xkt,n=yn(0),r=null,i=Skt,s=Tkt,o=Ckt,a=null,u=N4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-r3,m=s.apply(this,arguments)-r3,g=Cpe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>jo))a.moveTo(0,0);else if(g>p2-jo)a.moveTo(h*dy(p),h*jf(p)),a.arc(0,0,h,p,m,!y),d>jo&&(a.moveTo(d*dy(m),d*jf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,b=p,E=m,w=g,x=g,S=o.apply(this,arguments)/2,P=S>jo&&(r?+r.apply(this,arguments):s1(d*d+h*h)),A=Xj(Cpe(h-d)/2,+n.apply(this,arguments)),O=A,z=A,M,R;if(P>jo){var D=Ape(P/d*jf(S)),L=Ape(P/h*jf(S));(w-=D*2)>jo?(D*=y?1:-1,b+=D,E-=D):(w=0,b=E=(p+m)/2),(x-=L*2)>jo?(L*=y?1:-1,v+=L,_-=L):(x=0,v=_=(p+m)/2)}var V=h*dy(v),B=h*jf(v),H=d*dy(E),U=d*jf(E);if(A>jo){var k=h*dy(_),$=h*jf(_),q=d*dy(b),F=d*jf(b),j;if(g<jw)if(j=Akt(V,B,q,F,k,$,H,U)){var Q=V-j[0],se=B-j[1],ae=k-j[0],ce=$-j[1],le=1/jf(wkt((Q*ae+se*ce)/(s1(Q*Q+se*se)*s1(ae*ae+ce*ce)))/2),ge=s1(j[0]*j[0]+j[1]*j[1]);O=Xj(A,(d-ge)/(le-1)),z=Xj(A,(h-ge)/(le+1))}else O=z=0}x>jo?z>jo?(M=MP(q,F,V,B,h,z,y),R=MP(k,$,H,U,h,z,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),z<A?a.arc(M.cx,M.cy,z,Do(M.y01,M.x01),Do(R.y01,R.x01),!y):(a.arc(M.cx,M.cy,z,Do(M.y01,M.x01),Do(M.y11,M.x11),!y),a.arc(0,0,h,Do(M.cy+M.y11,M.cx+M.x11),Do(R.cy+R.y11,R.cx+R.x11),!y),a.arc(R.cx,R.cy,z,Do(R.y11,R.x11),Do(R.y01,R.x01),!y))):(a.moveTo(V,B),a.arc(0,0,h,v,_,!y)):a.moveTo(V,B),!(d>jo)||!(w>jo)?a.lineTo(H,U):O>jo?(M=MP(H,U,k,$,d,-O,y),R=MP(V,B,q,F,d,-O,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),O<A?a.arc(M.cx,M.cy,O,Do(M.y01,M.x01),Do(R.y01,R.x01),!y):(a.arc(M.cx,M.cy,O,Do(M.y01,M.x01),Do(M.y11,M.x11),!y),a.arc(0,0,d,Do(M.cy+M.y11,M.cx+M.x11),Do(R.cy+R.y11,R.cx+R.x11),y),a.arc(R.cx,R.cy,O,Do(R.y11,R.x11),Do(R.y01,R.x01),!y))):a.arc(0,0,d,E,b,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-jw/2;return[dy(f)*c,jf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:yn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:yn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:yn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:yn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:yn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:yn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:yn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function D4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sRe(e){this._context=e}sRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ZK(e){return new sRe(e)}function oRe(e){return e[0]}function aRe(e){return e[1]}function uRe(e,t){var n=yn(!0),r=null,i=ZK,s=null,o=N4(a);e=typeof e=="function"?e:e===void 0?oRe:yn(e),t=typeof t=="function"?t:t===void 0?aRe:yn(t);function a(u){var l,c=(u=D4(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:yn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:yn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:yn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function lRe(e,t,n){var r=null,i=yn(!0),s=null,o=ZK,a=null,u=N4(l);e=typeof e=="function"?e:e===void 0?oRe:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aRe:yn(+n);function l(f){var d,h,p,m=(f=D4(f)).length,g,y=!1,v,_=new Array(m),b=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),b[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return uRe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Ikt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Okt(e){return e}function Pkt(){var e=Okt,t=Ikt,n=null,r=yn(0),i=yn(p2),s=yn(0);function o(a){var u,l=(a=D4(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(p2,Math.max(-p2,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),b;for(u=0;u<l;++u)(b=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=b);for(t!=null?h.sort(function(E,w){return t(p[E],p[w])}):n!=null&&h.sort(function(E,w){return n(a[E],a[w])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],b=p[c],y=m+(b>0?b*f:0)+_,p[c]={data:a[c],index:u,value:b,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:yn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:yn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:yn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:yn(+a),o):s},o}const kkt={draw(e,t){const n=s1(t/jw);e.moveTo(n,0),e.arc(0,0,n,0,p2)}};function $kt(e,t){let n=null,r=N4(i);e=typeof e=="function"?e:yn(e||kkt),t=typeof t=="function"?t:yn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function i0(){}function i3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function M4(e){this._context=e}M4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:i3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:i3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rkt(e){return new M4(e)}function cRe(e){this._context=e}cRe.prototype={areaStart:i0,areaEnd:i0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:i3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nkt(e){return new cRe(e)}function fRe(e){this._context=e}fRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:i3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dkt(e){return new fRe(e)}function dRe(e,t){this._basis=new M4(e),this._beta=t}dRe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Mkt=function e(t){function n(r){return t===1?new M4(r):new dRe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function s3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function eX(e,t){this._context=e,this._k=(1-t)/6}eX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:s3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:s3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Lkt=function e(t){function n(r){return new eX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function tX(e,t){this._context=e,this._k=(1-t)/6}tX.prototype={areaStart:i0,areaEnd:i0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:s3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fkt=function e(t){function n(r){return new tX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nX(e,t){this._context=e,this._k=(1-t)/6}nX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:s3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jkt=function e(t){function n(r){return new nX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function rX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>jo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>jo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function hRe(e,t){this._context=e,this._alpha=t}hRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:rX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bkt=function e(t){function n(r){return t?new hRe(r,t):new eX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function pRe(e,t){this._context=e,this._alpha=t}pRe.prototype={areaStart:i0,areaEnd:i0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:rX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zkt=function e(t){function n(r){return t?new pRe(r,t):new tX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mRe(e,t){this._context=e,this._alpha=t}mRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ukt=function e(t){function n(r){return t?new mRe(r,t):new nX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gRe(e){this._context=e}gRe.prototype={areaStart:i0,areaEnd:i0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Vkt(e){return new gRe(e)}function Ipe(e){return e<0?-1:1}function Ope(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Ipe(s)+Ipe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ppe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Qj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function o3(e){this._context=e}o3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qj(this,this._t0,Ppe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Qj(this,Ppe(this,n=Ope(this,e,t)),n);break;default:Qj(this,this._t0,n=Ope(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function yRe(e){this._context=new vRe(e)}(yRe.prototype=Object.create(o3.prototype)).point=function(e,t){o3.prototype.point.call(this,t,e)};function vRe(e){this._context=e}vRe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Hkt(e){return new o3(e)}function qkt(e){return new yRe(e)}function _Re(e){this._context=e}_Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=kpe(e),i=kpe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kpe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Wkt(e){return new _Re(e)}function L4(e,t){this._context=e,this._t=t}L4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Gkt(e){return new L4(e,.5)}function Ykt(e){return new L4(e,0)}function Kkt(e){return new L4(e,1)}function $pe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Rpe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Xkt(e,t){return e[t]}function Qkt(e){const t=[];return t.key=e,t}function Jkt(){var e=yn([]),t=Rpe,n=$pe,r=Xkt;function i(s){var o=Array.from(e.apply(this,arguments),Qkt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=D4(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:yn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Rpe:typeof s=="function"?s:yn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??$pe,i):n},i}function pT(e,t,n){this.k=e,this.x=t,this.y=n}pT.prototype={constructor:pT,scale:function(e){return e===1?this:new pT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new pT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};pT.prototype;function iX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=C.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=C.useCallback(c=>(s?k4("%B"):QE(".2s"))(c),[s]);return I.jsxs(I.Fragment,{children:[I.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:I.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:I.jsx(Dp,{children:I.jsx(Co,{spacing:3,children:I.jsx(ct,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),I.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?I.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>I.jsxs("g",{transform:`translate(${f}, ${n})`,children:[I.jsx("line",{y2:"6",stroke:"currentColor"}),o?I.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,I.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:I.jsx(Dp,{children:I.jsx(A1,{withinPortal:!0,label:c,children:I.jsx(ct,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const Zkt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:iX},Symbol.toStringTag,{value:"Module"}));function bRe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=C.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return I.jsxs(I.Fragment,{children:[I.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:I.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:I.jsx(Dp,{children:I.jsx(Co,{spacing:3,children:I.jsx(ct,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),I.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?I.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>I.jsxs("g",{transform:`translate(${n}, ${l})`,children:[I.jsx("line",{x2:"-6",stroke:"currentColor"}),s?I.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,I.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:I.jsx("foreignObject",{width:a,height:20,children:I.jsx(Co,{style:{width:"100%",height:"100%"},position:"right",children:I.jsx(ct,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const e$t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:bRe},Symbol.toStringTag,{value:"Module"})),Ol={top:15,left:100,right:50,bottom:50};function EV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=x1(),o=C.useMemo(()=>s-Ol.left-Ol.right,[s]),a=C.useMemo(()=>i-Ol.top-Ol.bottom,[i]),u=C.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return JE(iRe).domain(d)},[n,t.category]),l=C.useMemo(()=>e?jp([Ol.left,o+Ol.left]).domain([0,ASt(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=C.useMemo(()=>e?vI([Ol.top,a+Ol.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=C.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:I.jsxs("g",{children:[I.jsx("rect",{x:Ol.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Ol.left},h),I.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?I.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[I.jsx(iX,{xScale:l,yRange:c.range(),vertPosition:a+Ol.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?I.jsx(bRe,{yScale:c,horizontalPosition:Ol.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):I.jsx(Mv,{})}const t$t=Object.freeze(Object.defineProperty({__proto__:null,Bar:EV,default:EV},Symbol.toStringTag,{value:"Module"})),nr=Array.isArray;function Su(e){return e!=null?nr(e)?e:[e]:[]}function n$t(e=0,t=1/0){return`${Npe(e)} < row_number() && row_number() <= ${Npe(t)}`}function Npe(e){return e<0?`count() + ${e}`:e}class wRe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(n$t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Su(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function vn(e){throw Error(e)}function Ma(e){return typeof e=="number"}function ri(e){return typeof e=="function"}function F4(e,t){const n=Array(e);if(ri(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let r$t=class extends wRe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){vn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){vn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){vn("Not implemented")}getter(t){vn("Not implemented")}objects(t){vn("Not implemented")}object(t){vn("Not implemented")}[Symbol.iterator](){vn("Not implemented")}print(t={}){Ma(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=F4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},i$t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},s$t=function(e){return e&&ri(e.get)?e:new i$t(e)};function zp(e){return e instanceof Date}function aa(e){return e===Object(e)}function a3(e){return e instanceof RegExp}function Io(e){return typeof e=="string"}function o$t(e,t){const n=r=>vn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Dpe(e.entries(),t):zp(e)?n("Date"):a3(e)?n("RegExp"):Io(e)?n():nr(e)?a$t(e,t):ri(e[Symbol.iterator])?u$t(e,t):aa(e)?Dpe(Object.entries(e),t):n()}function Dpe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function a$t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function u$t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:l$t}=Object.prototype;function mf(e,t){return l$t.call(e,t)}function Cl(e){return e?new Mpe({...e.data()},e.columnNames()):new Mpe}class Mpe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return mf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Xn=void 0,c$t=Object.getPrototypeOf(Int8Array);function bI(e){return e instanceof c$t}function o1(e){return nr(e)||bI(e)}function Jc(e){return e!=null&&e===e}const ES=e=>o1(e)||Io(e),f$t={compact:e=>o1(e)?e.filter(t=>Jc(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>ES(e)?e.includes(t,n):!1,indexof:(e,t)=>ES(e)?e.indexOf(t):-1,join:(e,t)=>o1(e)?e.join(t):Xn,lastindexof:(e,t)=>ES(e)?e.lastIndexOf(t):-1,length:e=>ES(e)?e.length:0,pluck:(e,t)=>o1(e)?e.map(n=>Jc(n)?n[t]:Xn):Xn,reverse:e=>o1(e)?e.slice().reverse():Io(e)?e.split("").reverse().join(""):Xn,slice:(e,t,n)=>ES(e)?e.slice(t,n):Xn};function d$t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function b$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Bf=e=>(e<10?"0":"")+e,h$t=e=>e<0?"-"+b$(-e,6):e>9999?"+"+b$(e,6):b$(e,4);function ERe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return h$t(e)+"-"+Bf(t+1)+"-"+Bf(n)+(!u||o?"T"+Bf(r)+":"+Bf(i)+":"+Bf(s)+"."+b$(o,3)+l:s?"T"+Bf(r)+":"+Bf(i)+":"+Bf(s)+l:i||r||!a?"T"+Bf(r)+":"+Bf(i)+l:"")}function xRe(e,t){return isNaN(e)?"Invalid Date":ERe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function j4(e,t){return isNaN(e)?"Invalid Date":ERe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const p$t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function m$t(e){return e.match(p$t)}function g$t(e,t=Date.parse){return m$t(e)?t(e):e}const SRe=6e4,TRe=864e5,CRe=6048e5,Ni=new Date,Di=new Date,Hi=e=>(Ni.setTime(typeof e=="string"?g$t(e):e),Ni);function y$t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function v$t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function _$t(e){Di.setTime(+e),Di.setHours(0,0,0,0),Ni.setTime(+Di),Ni.setMonth(0),Ni.setDate(1);const t=(Di.getTimezoneOffset()-Ni.getTimezoneOffset())*SRe;return Math.floor(1+(Di-Ni-t)/TRe)}function b$t(e){Di.setTime(+e),Di.setUTCHours(0,0,0,0);const t=Date.UTC(Di.getUTCFullYear(),0,1);return Math.floor(1+(Di-t)/TRe)}function w$t(e,t){const n=t||0;Di.setTime(+e),Di.setDate(Di.getDate()-(Di.getDay()+7-n)%7),Di.setHours(0,0,0,0),Ni.setTime(+e),Ni.setMonth(0),Ni.setDate(1),Ni.setDate(1-(Ni.getDay()+7-n)%7),Ni.setHours(0,0,0,0);const r=(Di.getTimezoneOffset()-Ni.getTimezoneOffset())*SRe;return Math.floor((1+(Di-Ni)-r)/CRe)}function E$t(e,t){const n=t||0;return Di.setTime(+e),Di.setUTCDate(Di.getUTCDate()-(Di.getUTCDay()+7-n)%7),Di.setUTCHours(0,0,0,0),Ni.setTime(+e),Ni.setUTCMonth(0),Ni.setUTCDate(1),Ni.setUTCDate(1-(Ni.getUTCDay()+7-n)%7),Ni.setUTCHours(0,0,0,0),Math.floor((1+(Di-Ni))/CRe)}const x$t={format_date:(e,t)=>xRe(Hi(e),!t),format_utcdate:(e,t)=>j4(Hi(e),!t),timestamp:e=>+Hi(e),year:e=>Hi(e).getFullYear(),quarter:e=>Math.floor(Hi(e).getMonth()/3),month:e=>Hi(e).getMonth(),date:e=>Hi(e).getDate(),dayofweek:e=>Hi(e).getDay(),hours:e=>Hi(e).getHours(),minutes:e=>Hi(e).getMinutes(),seconds:e=>Hi(e).getSeconds(),milliseconds:e=>Hi(e).getMilliseconds(),utcyear:e=>Hi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Hi(e).getUTCMonth()/3),utcmonth:e=>Hi(e).getUTCMonth(),utcdate:e=>Hi(e).getUTCDate(),utcdayofweek:e=>Hi(e).getUTCDay(),utchours:e=>Hi(e).getUTCHours(),utcminutes:e=>Hi(e).getUTCMinutes(),utcseconds:e=>Hi(e).getUTCSeconds(),utcmilliseconds:e=>Hi(e).getUTCMilliseconds(),datetime:y$t,dayofyear:_$t,week:w$t,utcdatetime:v$t,utcdayofyear:b$t,utcweek:E$t,now:Date.now};function sX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:zp(e)||zp(t)?+e==+t:a3(e)&&a3(t)?e+""==t+"":aa(e)&&aa(t)?S$t(e,t):!1}function S$t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Lpe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Lpe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!sX(e[o],t[o]))return!1}return!0}function Lpe(e,t,n=sX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const T$t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let C$t=Math.random;function tx(){return C$t()}const A$t={random:tx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function oX(e){return e instanceof Map}function I$t(e){return e instanceof Set}function w$(e){return oX(e)||I$t(e)}function Jj(e){return Array.from(e)}const O$t={has:(e,t)=>w$(e)?e.has(t):e!=null?mf(e,t):!1,keys:e=>oX(e)?Jj(e.keys()):e!=null?Object.keys(e):[],values:e=>w$(e)?Jj(e.values()):e!=null?Object.values(e):[],entries:e=>w$(e)?Jj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Xn};function P$t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(mf(t,e))return t[e];return n!==void 0?n:e}function k$t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const $$t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},_b={bin:d$t,equal:sX,recode:P$t,sequence:k$t,...f$t,...x$t,...T$t,...A$t,...O$t,...$$t};function $C(e){return typeof e=="bigint"}function qd(e){return e===void 0?e+"":$C(e)?e+"n":JSON.stringify(e)}function dn(e,t=[],n=[]){return new R$t(e,Su(t),Su(n))}let R$t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${qd(n)}]`),...this.params.map(qd)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const ARe=e=>dn("any",e),IRe=()=>dn("count"),ORe=e=>dn("array_agg",e),PRe=e=>dn("array_agg_distinct",e),kRe=(e,t)=>dn("map_agg",[e,t]),$Re=(e,t)=>dn("object_agg",[e,t]),RRe=(e,t)=>dn("entries_agg",[e,t]);({..._b});function N$t(e,t){e=w$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function D$t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function M$t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function L$t(e,t,n,r){const i=r==="map"||r===!0?kRe:r==="entries"?RRe:r==="object"?$Re:vn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=N$t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:ORe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const F$t="ArrayPattern",j$t="ArrowFunctionExpression",B$t="FunctionExpression",Mg="Identifier",nx="Literal",NRe="MemberExpression",z$t="ObjectExpression",DRe="ObjectPattern",MRe="Property",wI="Column",U$t="Constant",V$t="Dictionary",H$t="Function",q$t="Parameter",LRe="Op",Br=(e,t)=>{const n=W$t[e.type];return n?n(e,t):vn(`Unsupported expression construct: ${e.type}`)},Zj=(e,t)=>"("+Br(e.left,t)+" "+e.operator+" "+Br(e.right,t)+")",eB=(e,t)=>"("+Kf(e.params,t)+")=>"+Br(e.body,t),Fpe=(e,t)=>Br(e.callee,t)+"("+Kf(e.arguments,t)+")",Kf=(e,t,n=",")=>e.map(r=>Br(r,t)).join(n),FRe=e=>e.computed?`[${qd(e.name)}]`:`.${e.name}`,jpe=(e,t,n)=>{const r=e.table||"";return`data${r}${FRe(e)}.${n}(${t.index}${r})`},W$t={Constant:e=>e.raw,Column:(e,t)=>jpe(e,t,"get"),Dictionary:(e,t)=>jpe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${FRe(e)}`,Op:(e,t)=>`op(${qd(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Br(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Br(e.object,t),i=Br(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Fpe,NewExpression:(e,t)=>"new "+Fpe(e,t),ArrayExpression:(e,t)=>"["+Kf(e.elements,t)+"]",AssignmentExpression:Zj,BinaryExpression:Zj,LogicalExpression:Zj,UnaryExpression:(e,t)=>"("+e.operator+Br(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Br(e.test,t)+"?"+Br(e.consequent,t)+":"+Br(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Kf(e.properties,t)+"})",Property:(e,t)=>{const n=Br(e.key,t);return(e.computed?`[${n}]`:n)+":"+Br(e.value,t)},ArrowFunctionExpression:eB,FunctionExpression:eB,FunctionDeclaration:eB,ArrayPattern:(e,t)=>"["+Kf(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Kf(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Kf(e.declarations,t,","),VariableDeclarator:(e,t)=>Br(e.id,t)+"="+Br(e.init,t),SpreadElement:(e,t)=>"..."+Br(e.argument,t),BlockStatement:(e,t)=>"{"+Kf(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Br(e.expression,t),IfStatement:(e,t)=>"if ("+Br(e.test,t)+")"+Br(e.consequent,t)+(e.alternate?" else "+Br(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Br(e.discriminant,t)+") {"+Kf(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Br(e.test,t):"default")+": "+Kf(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Br(e.argument,t),Program:(e,t)=>Br(e.body[0],t)};function u3(e,t={index:"row"}){return Br(e,t)}function G$t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Bw(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:zp(e)?+e:nr(e)||bI(e)?`[${e.map(Bw)}]`:a3(e)?e+"":Y$t(e)}function Y$t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${Bw(e[r])}`;return t+="}",t}function l3(e,t){const n=e.length;return n===1?(r,i)=>Bw(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=Bw(a)}return s}}function K$t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Bw(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=Bw(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Uh(){}function X$t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ps(e){return e.init=e.init||Uh,e.add=e.add||Uh,e.rem=e.rem||Uh,e}function Bpe(e,t){return e.product_v=!1,e.product=t}const jRe={count:{create:()=>ps({value:e=>e.count}),param:[]},array_agg:{create:()=>ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ps({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ps({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ps({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Xn}),param:[1]},valid:{create:()=>ps({value:e=>e.valid}),param:[1]},invalid:{create:()=>ps({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=K$t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ps({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ps({value:e=>{let t=Xn,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Xn,add:(e,t)=>$C(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Bpe(e,1),value:e=>e.valid?e.product_v?Bpe(e,X$t(e.list.values())):e.product:void 0,add:(e,t)=>$C(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Xn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ps({value:e=>e.valid?e.mean:Xn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Xn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ps({value:e=>e.valid>1?e.dev/e.valid:Xn}),param:[1],req:["variance"]},stdev:{create:()=>ps({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Xn}),param:[1],req:["variance"]},stdevp:{create:()=>ps({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Xn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Xn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Xn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Xn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Xn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ps({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ps({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Xn,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ps({value:e=>e.valid>1?e.cov/e.valid:Xn}),param:[2],req:["covariance"]},corr:{create:()=>ps({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Xn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ps({value:i=>G$t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},zpe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Upe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},BRe={row_number:{create(){return{init:Uh,value:e=>e.index+1}},param:[]},rank:zpe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=zpe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Upe,ntile:{create(e){e=+e,e>0||vn("ntile num must be greater than zero.");const{init:t,value:n}=Upe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Xn){return e=+e||1,{init:Uh,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Xn){return e=+e||1,{init:Uh,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Uh,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Uh,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||vn("nth_value nth must be greater than zero."),{init:Uh,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Xn}}},param:[1,1]},fill_down:{create(e=Xn){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Jc(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Xn){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Q$t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Q$t(e,t,n){for(const r=e.size;n<r;++n)if(Jc(e.value(n,t)))return n;return-1}function aX(e){return mf(jRe,e)}function uX(e){return mf(BRe,e)}function zRe(e){return mf(_b,e)||e==="row_object"}function URe(e){return aX(e)&&jRe[e]}function VRe(e){return uX(e)&&BRe[e]}function xS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const lX={escape:(e,t,n)=>xS(e,t,n),expr:(e,t)=>xS(`(row,data,op)=>${e}`,_b,t),expr2:(e,t)=>xS(`(row0,data0,row,data)=>${e}`,_b,t),join:(e,t)=>xS(`(row1,data1,row2,data2)=>${e}`,_b,t),param:(e,t)=>xS(e,_b,t)},J$t={"==":1,"!=":1,"===":1,"!==":1};function HRe(e,t,n=0,r,i){if(e.type=wI,e.name=t,e.table=n,i&&r&&ri(r.keyFor)){const s=J$t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===nx&&Z$t(i,e,s,r.keyFor(s.value))}return e}function Z$t(e,t,n,r){return r<0?(e.type=nx,e.value=!1,e.raw="false"):(t.type=V$t,n.value=r,n.raw=r+""),!0}function B4(e){return nr(e)?e:oX(e)?e.entries():e?Object.entries(e):[]}const qRe="row_object";function WRe(e,t){e.type=z$t;const n=e.properties=[];for(const r of B4(t)){const[i,s]=nr(r)?r:[r,r];n.push({type:MRe,key:{type:nx,raw:qd(s)},value:HRe({computed:!0},i)})}return e}function GRe(e){return u3(WRe({},e))}function YRe(e){return lX.expr(GRe(e))}function cX(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Yh(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Vpe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function jn(e){return this instanceof jn?(this.v=e,this):new jn(e)}function a1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof jn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function tB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:jn(e[i](o)),done:!1}:s?s(o):o}:s}}function m2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vpe=="function"?Vpe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const eRt=new TextDecoder("utf-8"),xV=e=>eRt.decode(e),tRt=new TextEncoder,fX=e=>tRt.encode(e),[e2n,KRe]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Gv,t2n]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Yv,n2n]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),nRt=e=>typeof e=="boolean",tu=e=>typeof e=="function",V0=e=>e!=null&&Object(e)===e,z4=e=>V0(e)&&tu(e.then),dX=e=>V0(e)&&tu(e[Symbol.iterator]),U4=e=>V0(e)&&tu(e[Symbol.asyncIterator]),rRt=e=>V0(e)&&"done"in e&&"value"in e,XRe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,iRt=e=>V0(e)&&tu(e.abort)&&tu(e.getWriter)&&!XRe(e),sRt=e=>V0(e)&&tu(e.end)&&tu(e.write)&&nRt(e.writable)&&!XRe(e),oRt=e=>V0(e)&&tu(e.clear)&&tu(e.bytes)&&tu(e.position)&&tu(e.setPosition)&&tu(e.capacity)&&tu(e.getBufferIdentifier)&&tu(e.createLong),hX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function aRt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function c3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Wd(e,t){const n=aRt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?c3(o,s,a):o=s;break}c3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function lo(e,t){let n=rRt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=fX(n)),n instanceof ArrayBuffer?new e(n):n instanceof hX?new e(n):oRt(n)?lo(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const SS=e=>lo(Int32Array,e),vr=e=>lo(Uint8Array,e),SV=e=>(e.next(),e);function*uRt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof hX?n(t):dX(t)?t:n(t);return yield*SV(function*(i){let s=null;do s=i.next(yield lo(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const lRt=e=>uRt(Uint8Array,e);function QRe(e,t){return a1(this,arguments,function*(){if(z4(t))return yield jn(yield jn(yield*tB(m2(QRe(e,yield jn(t))))));const r=function(o){return a1(this,arguments,function*(){yield yield jn(yield jn(o))})},i=function(o){return a1(this,arguments,function*(){yield jn(yield*tB(m2(SV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof hX?r(t):dX(t)?i(t):U4(t)?t:r(t);return yield jn(yield*tB(m2(SV(function(o){return a1(this,arguments,function*(){let a=null;do a=yield jn(o.next(yield yield jn(lo(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield jn(new e)})}const cRt=e=>QRe(Uint8Array,e);function pX(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function fRt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Hpe={fromIterable(e){return LP(dRt(e))},fromAsyncIterable(e){return LP(hRt(e))},fromDOMStream(e){return LP(pRt(e))},fromNodeStream(e){return LP(gRt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},LP=e=>(e.next(),e);function*dRt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Wd(r,o)[0]:([i,r,a]=Wd(r,o),i)}({cmd:s,size:o}=yield null);const l=lRt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function hRt(e){return a1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Wd(i,a)[0]:([s,i,u]=Wd(i,a),s)}({cmd:o,size:a}=yield yield jn(null));const c=cRt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield jn(c.next()):yield jn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield jn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield jn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield jn(c.return(new Uint8Array(0))))}return yield jn(null)})}function pRt(e){return a1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Wd(i,a)[0]:([s,i,u]=Wd(i,a),s)}({cmd:o,size:a}=yield yield jn(null));const c=new mRt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield jn(c.read()):yield jn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(vr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield jn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield jn(c.cancel(f)))}finally{r===!1?yield jn(c.cancel()):e.locked&&c.releaseLock()}return yield jn(null)})}class mRt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Yh(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Yh(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=vr(n)),n})}}const nB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function gRt(e){return a1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Wd(l,a)[0]:([c,l,u]=Wd(l,a),c)}if({cmd:o,size:a}=yield yield jn(null),e.isTTY)return yield yield jn(new Uint8Array(0)),yield jn(null);try{n[0]=nB(e,"end"),n[1]=nB(e,"error");do{if(n[2]=nB(e,"readable"),[r,s]=yield jn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=vr(e.read(a-u)),c.byteLength<a-u&&(c=vr(e.read()))):c=vr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield jn(f()));while(a<u)}while(!i)}finally{yield jn(d(n,r==="error"?s:null))}return yield jn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ju;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ju||(Ju={}));var sc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(sc||(sc={}));var bo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(bo||(bo={}));var Gd;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Gd||(Gd={}));var Bn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Bn||(Bn={}));var Yd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Yd||(Yd={}));var js;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(js||(js={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(re||(re={}));var Lh;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Lh||(Lh={}));const yRt=void 0;function Lg(e){if(e===null)return"null";if(e===yRt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Gv||e instanceof Yv?`[${[...e].map(t=>Lg(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const vRt=Symbol.for("isArrowBigNum");function Of(e,...t){return t.length===0?Object.setPrototypeOf(lo(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Of.prototype[vRt]=!0;Of.prototype.toJSON=function(){return`"${$1(this)}"`};Of.prototype.valueOf=function(){return JRe(this)};Of.prototype.toString=function(){return $1(this)};Of.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return JRe(this);case"string":return $1(this);case"default":return TV(this)}return $1(this)};function Yb(...e){return Of.apply(this,e)}function Kb(...e){return Of.apply(this,e)}function RC(...e){return Of.apply(this,e)}Object.setPrototypeOf(Yb.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Kb.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(RC.prototype,Object.create(Uint32Array.prototype));Object.assign(Yb.prototype,Of.prototype,{constructor:Yb,signed:!0,TypedArray:Int32Array,BigIntArray:Gv});Object.assign(Kb.prototype,Of.prototype,{constructor:Kb,signed:!1,TypedArray:Uint32Array,BigIntArray:Yv});Object.assign(RC.prototype,Of.prototype,{constructor:RC,signed:!0,TypedArray:Uint32Array,BigIntArray:Yv});function JRe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Yv(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let $1,TV;KRe?(TV=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:rB(e),$1=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:rB(e)):($1=rB,TV=$1);function rB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class mX{static new(t,n){switch(n){case!0:return new Yb(t);case!1:return new Kb(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Gv:return new Yb(t)}return t.byteLength===16?new RC(t):new Kb(t)}static signed(t){return new Yb(t)}static unsigned(t){return new Kb(t)}static decimal(t){return new RC(t)}constructor(t,n){return mX.new(t,n)}}var ZRe,eNe,tNe,nNe,rNe,iNe,sNe,oNe,aNe,uNe,lNe,cNe,fNe,dNe,hNe,pNe,mNe,gNe,yNe;class Pn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Pn.isUnion(t)&&t.mode===sc.Dense}static isSparseUnion(t){return Pn.isUnion(t)&&t.mode===sc.Sparse}get typeId(){return re.NONE}}ZRe=Symbol.toStringTag;Pn[ZRe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Pn.prototype);let Up=class extends Pn{toString(){return"Null"}get typeId(){return re.Null}};eNe=Symbol.toStringTag;Up[eNe]=(e=>e[Symbol.toStringTag]="Null")(Up.prototype);class La extends Pn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Gv:Yv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}tNe=Symbol.toStringTag;La[tNe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(La.prototype);class gX extends La{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class yX extends La{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class s0 extends La{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class vX extends La{constructor(){super(!0,64)}get ArrayType(){return Gv}}class _X extends La{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class bX extends La{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class wX extends La{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class EX extends La{constructor(){super(!1,64)}get ArrayType(){return Yv}}Object.defineProperty(gX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(yX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(s0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(vX.prototype,"ArrayType",{value:Gv});Object.defineProperty(_X.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(bX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(wX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(EX.prototype,"ArrayType",{value:Yv});class o0 extends Pn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case bo.HALF:return Uint16Array;case bo.SINGLE:return Float32Array;case bo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}nNe=Symbol.toStringTag;o0[nNe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(o0.prototype);class vNe extends o0{constructor(){super(bo.HALF)}}class xX extends o0{constructor(){super(bo.SINGLE)}}class SX extends o0{constructor(){super(bo.DOUBLE)}}Object.defineProperty(vNe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(xX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(SX.prototype,"ArrayType",{value:Float64Array});let NC=class extends Pn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};rNe=Symbol.toStringTag;NC[rNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(NC.prototype);let zw=class extends Pn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};iNe=Symbol.toStringTag;zw[iNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(zw.prototype);let DC=class extends Pn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};sNe=Symbol.toStringTag;DC[sNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(DC.prototype);let f3=class extends Pn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};oNe=Symbol.toStringTag;f3[oNe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(f3.prototype);class Uw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Gd[this.unit]}>`}}aNe=Symbol.toStringTag;Uw[aNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Uw.prototype);class _Rt extends Uw{constructor(){super(Gd.DAY)}}class bRt extends Uw{constructor(){super(Gd.MILLISECOND)}}class Vp extends Pn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Bn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Gv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}uNe=Symbol.toStringTag;Vp[uNe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Vp.prototype);class wRt extends Vp{constructor(){super(Bn.SECOND,32)}}class ERt extends Vp{constructor(){super(Bn.MILLISECOND,32)}}class xRt extends Vp{constructor(){super(Bn.MICROSECOND,64)}}class SRt extends Vp{constructor(){super(Bn.NANOSECOND,64)}}class d3 extends Pn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Bn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}lNe=Symbol.toStringTag;d3[lNe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(d3.prototype);class Vw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Yd[this.unit]}>`}}cNe=Symbol.toStringTag;Vw[cNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Vw.prototype);class TRt extends Vw{constructor(){super(Yd.DAY_TIME)}}class CRt extends Vw{constructor(){super(Yd.YEAR_MONTH)}}let Hw=class extends Pn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};fNe=Symbol.toStringTag;Hw[fNe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Hw.prototype);class Yo extends Pn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}dNe=Symbol.toStringTag;Yo[dNe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Yo.prototype);class MC extends Pn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}hNe=Symbol.toStringTag;MC[hNe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(MC.prototype);let h3=class extends Pn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};pNe=Symbol.toStringTag;h3[pNe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(h3.prototype);let qw=class extends Pn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};mNe=Symbol.toStringTag;qw[mNe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(qw.prototype);class LC extends Pn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}gNe=Symbol.toStringTag;LC[gNe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(LC.prototype);const ARt=(e=>()=>++e)(-1);class a0 extends Pn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?ARt():typeof r=="number"?r:r.low}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}yNe=Symbol.toStringTag;a0[yNe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(a0.prototype);function Jf(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Vn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return IRt(this,t,n)}getVisitFnByTypeId(t,n=!0){return Y_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function IRt(e,t,n=!0){return typeof t=="number"?Y_(e,t,n):typeof t=="string"&&t in re?Y_(e,re[t],n):t&&t instanceof Pn?Y_(e,qpe(t),n):t!=null&&t.type&&t.type instanceof Pn?Y_(e,qpe(t.type),n):Y_(e,re.NONE,n)}function Y_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function qpe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case bo.HALF:return re.Float16;case bo.SINGLE:return re.Float32;case bo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Bn.SECOND:return re.TimeSecond;case Bn.MILLISECOND:return re.TimeMillisecond;case Bn.MICROSECOND:return re.TimeMicrosecond;case Bn.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Bn.SECOND:return re.TimestampSecond;case Bn.MILLISECOND:return re.TimestampMillisecond;case Bn.MICROSECOND:return re.TimestampMicrosecond;case Bn.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Gd.DAY:return re.DateDay;case Gd.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Yd.DAY_TIME:return re.IntervalDayTime;case Yd.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case sc.Dense:return re.DenseUnion;case sc.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Vn.prototype.visitInt8=null;Vn.prototype.visitInt16=null;Vn.prototype.visitInt32=null;Vn.prototype.visitInt64=null;Vn.prototype.visitUint8=null;Vn.prototype.visitUint16=null;Vn.prototype.visitUint32=null;Vn.prototype.visitUint64=null;Vn.prototype.visitFloat16=null;Vn.prototype.visitFloat32=null;Vn.prototype.visitFloat64=null;Vn.prototype.visitDateDay=null;Vn.prototype.visitDateMillisecond=null;Vn.prototype.visitTimestampSecond=null;Vn.prototype.visitTimestampMillisecond=null;Vn.prototype.visitTimestampMicrosecond=null;Vn.prototype.visitTimestampNanosecond=null;Vn.prototype.visitTimeSecond=null;Vn.prototype.visitTimeMillisecond=null;Vn.prototype.visitTimeMicrosecond=null;Vn.prototype.visitTimeNanosecond=null;Vn.prototype.visitDenseUnion=null;Vn.prototype.visitSparseUnion=null;Vn.prototype.visitIntervalDayTime=null;Vn.prototype.visitIntervalYearMonth=null;const _Ne=new Float64Array(1),O_=new Uint32Array(_Ne.buffer);function bNe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function wNe(e){if(e!==e)return 32256;_Ne[0]=e;const t=(O_[1]&2147483648)>>16&65535;let n=O_[1]&2146435072,r=0;return n>=1089470464?O_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(O_[1]&1048575)>>10):n<=1056964608?(r=1048576+(O_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(O_[1]&1048575)+512>>10),t|n|r&65535}class un extends Vn{}function mn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const ORt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},TX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},PRt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},kRt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},ENe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},$Rt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},dm=({values:e},t,n)=>{e[t]=n},CX=({values:e},t,n)=>{e[t]=n},xNe=({values:e},t,n)=>{e[t]=wNe(n)},RRt=(e,t,n)=>{switch(e.type.precision){case bo.HALF:return xNe(e,t,n);case bo.SINGLE:case bo.DOUBLE:return CX(e,t,n)}},AX=({values:e},t,n)=>{ORt(e,t,n.valueOf())},IX=({values:e},t,n)=>{TX(e,t*2,n.valueOf())},SNe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},NRt=({values:e,valueOffsets:t},n,r)=>ENe(e,t,n,r),DRt=({values:e,valueOffsets:t},n,r)=>{ENe(e,t,n,fX(r))},TNe=(e,t,n)=>{e.type.unit===Gd.DAY?AX(e,t,n):IX(e,t,n)},OX=({values:e},t,n)=>TX(e,t*2,n/1e3),PX=({values:e},t,n)=>TX(e,t*2,n),kX=({values:e},t,n)=>PRt(e,t*2,n),$X=({values:e},t,n)=>kRt(e,t*2,n),CNe=(e,t,n)=>{switch(e.type.unit){case Bn.SECOND:return OX(e,t,n);case Bn.MILLISECOND:return PX(e,t,n);case Bn.MICROSECOND:return kX(e,t,n);case Bn.NANOSECOND:return $X(e,t,n)}},RX=({values:e},t,n)=>{e[t]=n},NX=({values:e},t,n)=>{e[t]=n},DX=({values:e},t,n)=>{e[t]=n},MX=({values:e},t,n)=>{e[t]=n},ANe=(e,t,n)=>{switch(e.type.unit){case Bn.SECOND:return RX(e,t,n);case Bn.MILLISECOND:return NX(e,t,n);case Bn.MICROSECOND:return DX(e,t,n);case Bn.NANOSECOND:return MX(e,t,n)}},INe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},MRt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=oc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},LRt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=oc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},FRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),jRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),BRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),zRt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),URt=(e,t,n)=>{const r=e.type.children.map(s=>oc.getVisitFn(s.type)),i=n instanceof Map?BRt(t,n):n instanceof rr?jRt(t,n):Array.isArray(n)?FRt(t,n):zRt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},VRt=(e,t,n)=>{e.type.mode===sc.Dense?ONe(e,t,n):PNe(e,t,n)},ONe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];oc.visit(i,e.valueOffsets[t],n)},PNe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];oc.visit(i,t,n)},HRt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},kNe=(e,t,n)=>{e.type.unit===Yd.DAY_TIME?LX(e,t,n):FX(e,t,n)},LX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},FX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},qRt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=oc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};un.prototype.visitBool=mn($Rt);un.prototype.visitInt=mn(dm);un.prototype.visitInt8=mn(dm);un.prototype.visitInt16=mn(dm);un.prototype.visitInt32=mn(dm);un.prototype.visitInt64=mn(dm);un.prototype.visitUint8=mn(dm);un.prototype.visitUint16=mn(dm);un.prototype.visitUint32=mn(dm);un.prototype.visitUint64=mn(dm);un.prototype.visitFloat=mn(RRt);un.prototype.visitFloat16=mn(xNe);un.prototype.visitFloat32=mn(CX);un.prototype.visitFloat64=mn(CX);un.prototype.visitUtf8=mn(DRt);un.prototype.visitBinary=mn(NRt);un.prototype.visitFixedSizeBinary=mn(SNe);un.prototype.visitDate=mn(TNe);un.prototype.visitDateDay=mn(AX);un.prototype.visitDateMillisecond=mn(IX);un.prototype.visitTimestamp=mn(CNe);un.prototype.visitTimestampSecond=mn(OX);un.prototype.visitTimestampMillisecond=mn(PX);un.prototype.visitTimestampMicrosecond=mn(kX);un.prototype.visitTimestampNanosecond=mn($X);un.prototype.visitTime=mn(ANe);un.prototype.visitTimeSecond=mn(RX);un.prototype.visitTimeMillisecond=mn(NX);un.prototype.visitTimeMicrosecond=mn(DX);un.prototype.visitTimeNanosecond=mn(MX);un.prototype.visitDecimal=mn(INe);un.prototype.visitList=mn(MRt);un.prototype.visitStruct=mn(URt);un.prototype.visitUnion=mn(VRt);un.prototype.visitDenseUnion=mn(ONe);un.prototype.visitSparseUnion=mn(PNe);un.prototype.visitDictionary=mn(HRt);un.prototype.visitInterval=mn(kNe);un.prototype.visitIntervalDayTime=mn(LX);un.prototype.visitIntervalYearMonth=mn(FX);un.prototype.visitFixedSizeList=mn(qRt);un.prototype.visitMap=mn(LRt);const oc=new un,Bc=Symbol.for("parent"),Xb=Symbol.for("rowIndex");class jX{constructor(t,n){return this[Bc]=t,this[Xb]=n,new Proxy(this,new GRt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Xb],n=this[Bc],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Tu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Lg(t)}: ${Lg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new WRt(this[Bc],this[Xb])}}class WRt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Tu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(jX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Bc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Xb]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class GRt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Bc].type.children.map(n=>n.name)}has(t,n){return t[Bc].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Bc].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Bc].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Tu.visit(t[Bc].children[r],t[Xb]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Bc].type.children.findIndex(s=>s.name===n);return i!==-1?(oc.visit(t[Bc].children[i],t[Xb],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class nn extends Vn{}function ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const YRt=(e,t)=>864e5*e[t],BX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),KRt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,XRt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,$Ne=e=>new Date(e),QRt=(e,t)=>$Ne(YRt(e,t)),JRt=(e,t)=>$Ne(BX(e,t)),ZRt=(e,t)=>null,RNe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},eNt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},NNe=({values:e},t)=>QRt(e,t),DNe=({values:e},t)=>JRt(e,t*2),H0=({stride:e,values:t},n)=>t[e*n],tNt=({stride:e,values:t},n)=>bNe(t[e*n]),MNe=({values:e},t)=>e[t],nNt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),rNt=({values:e,valueOffsets:t},n)=>RNe(e,t,n),iNt=({values:e,valueOffsets:t},n)=>{const r=RNe(e,t,n);return r!==null?xV(r):null},sNt=({values:e},t)=>e[t],oNt=({type:e,values:t},n)=>e.precision!==bo.HALF?t[n]:bNe(t[n]),aNt=(e,t)=>e.type.unit===Gd.DAY?NNe(e,t):DNe(e,t),LNe=({values:e},t)=>1e3*BX(e,t*2),FNe=({values:e},t)=>BX(e,t*2),jNe=({values:e},t)=>KRt(e,t*2),BNe=({values:e},t)=>XRt(e,t*2),uNt=(e,t)=>{switch(e.type.unit){case Bn.SECOND:return LNe(e,t);case Bn.MILLISECOND:return FNe(e,t);case Bn.MICROSECOND:return jNe(e,t);case Bn.NANOSECOND:return BNe(e,t)}},zNe=({values:e},t)=>e[t],UNe=({values:e},t)=>e[t],VNe=({values:e},t)=>e[t],HNe=({values:e},t)=>e[t],lNt=(e,t)=>{switch(e.type.unit){case Bn.SECOND:return zNe(e,t);case Bn.MILLISECOND:return UNe(e,t);case Bn.MICROSECOND:return VNe(e,t);case Bn.NANOSECOND:return HNe(e,t)}},cNt=({values:e,stride:t},n)=>mX.decimal(e.subarray(t*n,t*(n+1))),fNt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new rr([u])},dNt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new V4(o.slice(i,s-i))},hNt=(e,t)=>new jX(e,t),pNt=(e,t)=>e.type.mode===sc.Dense?qNe(e,t):WNe(e,t),qNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Tu.visit(r,e.valueOffsets[t])},WNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Tu.visit(r,t)},mNt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},gNt=(e,t)=>e.type.unit===Yd.DAY_TIME?GNe(e,t):YNe(e,t),GNe=({values:e},t)=>e.subarray(2*t,2*(t+1)),YNe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},yNt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new rr([s])};nn.prototype.visitNull=ln(ZRt);nn.prototype.visitBool=ln(eNt);nn.prototype.visitInt=ln(sNt);nn.prototype.visitInt8=ln(H0);nn.prototype.visitInt16=ln(H0);nn.prototype.visitInt32=ln(H0);nn.prototype.visitInt64=ln(MNe);nn.prototype.visitUint8=ln(H0);nn.prototype.visitUint16=ln(H0);nn.prototype.visitUint32=ln(H0);nn.prototype.visitUint64=ln(MNe);nn.prototype.visitFloat=ln(oNt);nn.prototype.visitFloat16=ln(tNt);nn.prototype.visitFloat32=ln(H0);nn.prototype.visitFloat64=ln(H0);nn.prototype.visitUtf8=ln(iNt);nn.prototype.visitBinary=ln(rNt);nn.prototype.visitFixedSizeBinary=ln(nNt);nn.prototype.visitDate=ln(aNt);nn.prototype.visitDateDay=ln(NNe);nn.prototype.visitDateMillisecond=ln(DNe);nn.prototype.visitTimestamp=ln(uNt);nn.prototype.visitTimestampSecond=ln(LNe);nn.prototype.visitTimestampMillisecond=ln(FNe);nn.prototype.visitTimestampMicrosecond=ln(jNe);nn.prototype.visitTimestampNanosecond=ln(BNe);nn.prototype.visitTime=ln(lNt);nn.prototype.visitTimeSecond=ln(zNe);nn.prototype.visitTimeMillisecond=ln(UNe);nn.prototype.visitTimeMicrosecond=ln(VNe);nn.prototype.visitTimeNanosecond=ln(HNe);nn.prototype.visitDecimal=ln(cNt);nn.prototype.visitList=ln(fNt);nn.prototype.visitStruct=ln(hNt);nn.prototype.visitUnion=ln(pNt);nn.prototype.visitDenseUnion=ln(qNe);nn.prototype.visitSparseUnion=ln(WNe);nn.prototype.visitDictionary=ln(mNt);nn.prototype.visitInterval=ln(gNt);nn.prototype.visitIntervalDayTime=ln(GNe);nn.prototype.visitIntervalYearMonth=ln(YNe);nn.prototype.visitFixedSizeList=ln(yNt);nn.prototype.visitMap=ln(dNt);const Tu=new nn,Yc=Symbol.for("keys"),Qb=Symbol.for("vals");class V4{constructor(t){return this[Yc]=new rr([t.children[0]]).memoize(),this[Qb]=t.children[1],new Proxy(this,new _Nt)}[Symbol.iterator](){return new vNt(this[Yc],this[Qb])}get size(){return this[Yc].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Yc],n=this[Qb],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Tu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Lg(t)}: ${Lg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class vNt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Tu.visit(this.vals,t)]})}}class _Nt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Yc].toArray().map(String)}has(t,n){return t[Yc].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Yc].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Yc].indexOf(n);if(r!==-1){const i=Tu.visit(Reflect.get(t,Qb),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Yc].indexOf(n);return i!==-1?(oc.visit(Reflect.get(t,Qb),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(V4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Yc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Qb]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Wpe;function KNe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Wpe=s,s=o,o=Wpe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Gpe=e=>e!==e;function rx(e){if(typeof e!=="object"||e===null)return Gpe(e)?Gpe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?fRt(e,n):!1:e instanceof Map?wNt(e):Array.isArray(e)?bNt(e):e instanceof rr?ENt(e):xNt(e,!0)}function bNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=rx(e[n]);return H4(t)}function wNt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=rx(r);return H4(n)}function ENt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=rx(e.get(n));return H4(t)}function xNt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=rx(e[n[i]]);return H4(r,n)}function H4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return SNt(e,n);case Map:return Ype(e,n,n.keys());case V4:case jX:case Object:case void 0:return Ype(e,n,t||Object.keys(n))}return n instanceof rr?TNt(e,n):!1}}function SNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function TNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Ype(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function XNe(e,t,n,r){return(n&1<<r)!==0}function CNt(e,t,n,r){return(n&1<<r)>>r}function zX(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):QNe(new UX(n,e,t,null,XNe)).subarray(0,r)),i}return n}function QNe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class UX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function CV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new UX(e,t,n-t,e,CNt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return CV(e,t,i)+CV(e,r,n)+ANt(e,i>>3,r-i>>3)}function ANt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=iB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=iB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=iB(s.getUint8(i)),i+=1;return r}function iB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const INt=-1;class Ar{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Ar?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Jf(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=INt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-CV(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Ar(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(zX(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Lh.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Lh.TYPE])&&(o[Lh.TYPE]=s.subarray(t,t+n)),(s=o[Lh.OFFSET])&&(o[Lh.OFFSET]=s.subarray(t,t+n+1))||(s=o[Lh.DATA])&&(o[Lh.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Ar.prototype.children=Object.freeze([]);class g2 extends Vn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Ar(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=SS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=SS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=vr(t.nullBitmap),o=SS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),o=lo(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(Pn.isSparseUnion(n))return new Ar(n,r,a,u,[void 0,void 0,s,o],i);const l=SS(t.valueOffsets);return new Ar(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.indices.ArrayType,t.data),{["dictionary"]:o=new rr([new g2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=lo(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new g2().visit({type:n.valueType})}=t,s=vr(t.nullBitmap),{["length"]:o=i.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Ar(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new g2().visit({type:n.childType})}=t,s=vr(t.nullBitmap),o=SS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Ar(n,r,a,u,[o,void 0,s],[i])}}function Ho(e){return new g2().visit(e)}class Kpe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function JNe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function ZNe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function eDe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function VX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function HX(e,t){return e.getValid(t)}function Jb(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return VX(r,this._offsets,n,t)}}function tDe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=VX(s,this._offsets,r,n);return t=void 0,o}}function nDe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):VX(s,this._offsets,i,n);return t=void 0,o}}class rn extends Vn{}function ONt(e,t){return t===null&&e.length>0?0:-1}function PNt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new UX(n,e.offset+(t||0),e.length,n,XNe)){if(!i)return r;++r}return-1}function bn(e,t,n){if(t===void 0)return-1;if(t===null)return PNt(e,n);const r=Tu.getVisitFn(e),i=rx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function rDe(e,t,n){const r=Tu.getVisitFn(e),i=rx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}rn.prototype.visitNull=ONt;rn.prototype.visitBool=bn;rn.prototype.visitInt=bn;rn.prototype.visitInt8=bn;rn.prototype.visitInt16=bn;rn.prototype.visitInt32=bn;rn.prototype.visitInt64=bn;rn.prototype.visitUint8=bn;rn.prototype.visitUint16=bn;rn.prototype.visitUint32=bn;rn.prototype.visitUint64=bn;rn.prototype.visitFloat=bn;rn.prototype.visitFloat16=bn;rn.prototype.visitFloat32=bn;rn.prototype.visitFloat64=bn;rn.prototype.visitUtf8=bn;rn.prototype.visitBinary=bn;rn.prototype.visitFixedSizeBinary=bn;rn.prototype.visitDate=bn;rn.prototype.visitDateDay=bn;rn.prototype.visitDateMillisecond=bn;rn.prototype.visitTimestamp=bn;rn.prototype.visitTimestampSecond=bn;rn.prototype.visitTimestampMillisecond=bn;rn.prototype.visitTimestampMicrosecond=bn;rn.prototype.visitTimestampNanosecond=bn;rn.prototype.visitTime=bn;rn.prototype.visitTimeSecond=bn;rn.prototype.visitTimeMillisecond=bn;rn.prototype.visitTimeMicrosecond=bn;rn.prototype.visitTimeNanosecond=bn;rn.prototype.visitDecimal=bn;rn.prototype.visitList=bn;rn.prototype.visitStruct=bn;rn.prototype.visitUnion=bn;rn.prototype.visitDenseUnion=rDe;rn.prototype.visitSparseUnion=rDe;rn.prototype.visitDictionary=bn;rn.prototype.visitInterval=bn;rn.prototype.visitIntervalDayTime=bn;rn.prototype.visitIntervalYearMonth=bn;rn.prototype.visitFixedSizeList=bn;rn.prototype.visitMap=bn;const p3=new rn;class sn extends Vn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof La&&t.bitWidth!==64||t instanceof Vp&&t.bitWidth!==64||t instanceof o0&&t.precision!==bo.HALF))return new Kpe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Kpe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new kNt(o)})}class kNt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}sn.prototype.visitNull=cn;sn.prototype.visitBool=cn;sn.prototype.visitInt=cn;sn.prototype.visitInt8=cn;sn.prototype.visitInt16=cn;sn.prototype.visitInt32=cn;sn.prototype.visitInt64=cn;sn.prototype.visitUint8=cn;sn.prototype.visitUint16=cn;sn.prototype.visitUint32=cn;sn.prototype.visitUint64=cn;sn.prototype.visitFloat=cn;sn.prototype.visitFloat16=cn;sn.prototype.visitFloat32=cn;sn.prototype.visitFloat64=cn;sn.prototype.visitUtf8=cn;sn.prototype.visitBinary=cn;sn.prototype.visitFixedSizeBinary=cn;sn.prototype.visitDate=cn;sn.prototype.visitDateDay=cn;sn.prototype.visitDateMillisecond=cn;sn.prototype.visitTimestamp=cn;sn.prototype.visitTimestampSecond=cn;sn.prototype.visitTimestampMillisecond=cn;sn.prototype.visitTimestampMicrosecond=cn;sn.prototype.visitTimestampNanosecond=cn;sn.prototype.visitTime=cn;sn.prototype.visitTimeSecond=cn;sn.prototype.visitTimeMillisecond=cn;sn.prototype.visitTimeMicrosecond=cn;sn.prototype.visitTimeNanosecond=cn;sn.prototype.visitDecimal=cn;sn.prototype.visitList=cn;sn.prototype.visitStruct=cn;sn.prototype.visitUnion=cn;sn.prototype.visitDenseUnion=cn;sn.prototype.visitSparseUnion=cn;sn.prototype.visitDictionary=cn;sn.prototype.visitInterval=cn;sn.prototype.visitIntervalDayTime=cn;sn.prototype.visitIntervalYearMonth=cn;sn.prototype.visitFixedSizeList=cn;sn.prototype.visitMap=cn;const qX=new sn,$Nt=(e,t)=>e+t;class q0 extends Vn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Bn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+Kd.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Kd.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const RNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),NNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),DNt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Kd.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},MNt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Kd.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},LNt=(e,t)=>e.type.mode===sc.Dense?iDe(e,t):sDe(e,t),iDe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Kd.visit(t[s],r[i])},sDe=({children:e},t)=>4+Kd.visitMany(e,e.map(()=>t)).reduce($Nt,0);q0.prototype.visitUtf8=RNt;q0.prototype.visitBinary=NNt;q0.prototype.visitList=DNt;q0.prototype.visitFixedSizeList=MNt;q0.prototype.visitUnion=LNt;q0.prototype.visitDenseUnion=iDe;q0.prototype.visitSparseUnion=sDe;const Kd=new q0;var oDe;const aDe={},uDe={};class rr{constructor(t){var n,r,i;const s=t[0]instanceof rr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Ar)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=aDe[o.typeId],f=s[0];this.isValid=d=>HX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,uDe[o.typeId]),this._offsets=ZNe(s);break}this.data=s,this.type=o,this.stride=Jf(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=JNe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return qX.visit(this)}concat(...t){return new rr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new rr(KNe(this,t,n,({data:r,_offsets:i},s,o)=>eDe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new rr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Pn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Pn.isDictionary(this.type)){const t=new m3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return new m3(this)}unmemoize(){if(Pn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return this}}oDe=Symbol.toStringTag;rr[oDe]=(e=>{e.type=Pn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Tu.getVisitFnByTypeId(n),i=oc.getVisitFnByTypeId(n),s=p3.getVisitFnByTypeId(n),o=Kd.getVisitFnByTypeId(n);aDe[n]={get:r,set:i,indexOf:s,byteLength:o},uDe[n]=Object.create(e,{isValid:{value:Jb(HX)},get:{value:Jb(Tu.getVisitFnByTypeId(n))},set:{value:tDe(oc.getVisitFnByTypeId(n))},indexOf:{value:nDe(p3.getVisitFnByTypeId(n))},getByteLength:{value:Jb(Kd.getVisitFnByTypeId(n))}})}return"Vector"})(rr.prototype);class m3 extends rr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new m3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new rr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function FNt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${jNt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function jNt(e){return typeof e!="bigint"?Lg(e):KRe?`${Lg(e)}n`:`"${Lg(e)}"`}const sB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,BNt=(e,t=0)=>e.length>=t?e.subarray(0,t):c3(new e.constructor(t),e,0);class q4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?sB(r*1,this.BYTES_PER_ELEMENT):sB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=sB(t*this.stride,this.BYTES_PER_ELEMENT);const n=BNt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=c3(new this.ArrayType(t),this.buffer)}}q4.prototype.offset=0;class EI extends q4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class lDe extends EI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class cDe extends EI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Du=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Jf(t),this._nulls=new lDe,n&&n.length>0&&(this._isValid=FNt(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new rr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Ho({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Du.prototype.length=1;Du.prototype.stride=1;Du.prototype.children=null;Du.prototype.finished=!1;Du.prototype.nullValues=null;Du.prototype._isValid=()=>!0;class W0 extends Du{constructor(t){super(t),this._values=new EI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class W4 extends Du{constructor(t){super(t),this._pendingLength=0,this._offsets=new cDe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof V4?n[Yc].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class AV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const oB=2,od=4,Kh=4,Mr=4,Vm=new Int32Array(2),Xpe=new Float32Array(Vm.buffer),Qpe=new Float64Array(Vm.buffer),FP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let wp=class IV{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?IV.ZERO:new IV(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};wp.ZERO=new wp(0,0);var OV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(OV||(OV={}));let g3=class fDe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new fDe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new wp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new wp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Vm[0]=this.readInt32(t),Xpe[0]}readFloat64(t){return Vm[FP?0:1]=this.readInt32(t),Vm[FP?1:0]=this.readInt32(t+4),Qpe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Xpe[0]=n,this.writeInt32(t,Vm[0])}writeFloat64(t,n){Qpe[0]=n,this.writeInt32(t,Vm[FP?0:1]),this.writeInt32(t+4,Vm[FP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+od+Kh)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Kh;n++)t+=String.fromCharCode(this.readInt8(this.position_+od+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=od,n===OV.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+od}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Kh)throw new Error("FlatBuffers: file identifier must be length "+Kh);for(let n=0;n<Kh;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+od+n))return!1;return!0}createLong(t,n){return wp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},dDe=class hDe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=g3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=hDe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=g3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(od,0),this.writeInt32(this.offset()-t+od)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*oB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=oB;l<s;l+=oB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Mr:0;if(n){const s=n;if(this.prep(this.minalign,od+Kh+i),s.length!=Kh)throw new Error("FlatBuffers: file identifier must be length "+Kh);for(let o=Kh-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,od+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(od,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return wp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ys{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ys).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Mr),(n||new ys).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ys.startKeyValue(t),ys.addKey(t,n),ys.addValue(t,r),ys.endKeyValue(t)}}var Ww;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ww||(Ww={}));var Gw;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Gw||(Gw={}));var y3;(function(e){e[e.DenseArray=0]="DenseArray"})(y3||(y3={}));class Ku{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Ku).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Mr),(n||new Ku).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Ku.startInt(t),Ku.addBitWidth(t,n),Ku.addIsSigned(t,r),Ku.endInt(t)}}class Xh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Xh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Mr),(n||new Xh).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ku).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):y3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,y3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class u1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Mr),(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return u1.startBinary(t),u1.endBinary(t)}}class l1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Mr),(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return l1.startBool(t),l1.endBool(t)}}var v3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(v3||(v3={}));let E$=class K_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new K_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Mr),(n||new K_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):v3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,v3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return K_.startDate(t),K_.addUnit(t,n),K_.endDate(t)}};class nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Mr),(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return nu.startDecimal(t),nu.addPrecision(t,n),nu.addScale(t,r),nu.addBitWidth(t,i),nu.endDecimal(t)}}var Yw;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Yw||(Yw={}));class ad{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Mr),(n||new ad).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return ad.startFixedSizeBinary(t),ad.addByteWidth(t,n),ad.endFixedSizeBinary(t)}}class ud{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Mr),(n||new ud).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return ud.startFixedSizeList(t),ud.addListSize(t,n),ud.endFixedSizeList(t)}}var _3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(_3||(_3={}));class ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Mr),(n||new ld).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,_3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return ld.startFloatingPoint(t),ld.addPrecision(t,n),ld.endFloatingPoint(t)}}var b3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(b3||(b3={}));class cd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new cd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Mr),(n||new cd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):b3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,b3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return cd.startInterval(t),cd.addUnit(t,n),cd.endInterval(t)}}class c1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Mr),(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return c1.startList(t),c1.endList(t)}}let x$=class X_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new X_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Mr),(n||new X_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return X_.startMap(t),X_.addKeysSorted(t,n),X_.endMap(t)}};class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Mr),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return f1.startNull(t),f1.endNull(t)}}class d1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Mr),(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return d1.startStruct_(t),d1.endStruct_(t)}}let mT=class Py{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Py).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Mr),(n||new Py).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yw.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Yw.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Py.startTime(t),Py.addUnit(t,n),Py.addBitWidth(t,r),Py.endTime(t)}},gT=class ky{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new ky).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Mr),(n||new ky).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yw.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Yw.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return ky.startTimestamp(t),ky.addUnit(t,n),ky.addTimezone(t,r),ky.endTimestamp(t)}};var w3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(w3||(w3={}));let $y=class Ry{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Ry).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Mr),(n||new Ry).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):w3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,w3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Ry.startUnion(t),Ry.addMode(t,n),Ry.addTypeIds(t,r),Ry.endUnion(t)}};class h1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Mr),(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return h1.startUtf8(t),h1.endUtf8(t)}}var bi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(bi||(bi={}));let Dl=class S${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new S$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Mr),(n||new S$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):bi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Xh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new S$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ys).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,bi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Xf=class Dh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Dh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Mr),(n||new Dh).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gw.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Dl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ys).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Gw.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Dh.startSchema(t),Dh.addEndianness(t,n),Dh.addFields(t,r),Dh.addCustomMetadata(t,i),Dh.addFeatures(t,s),Dh.endSchema(t)}};class qu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new qu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Mr),(n||new qu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ww.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Xf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new AV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new AV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ys).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ww.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class gr{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=kV(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new gr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new gr(n,this.metadata)}assign(...t){const n=t[0]instanceof gr?t[0]:Array.isArray(t[0])?new gr(t[0]):new gr(t),r=[...this.fields],i=jP(jP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:jP(jP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=kV(s,new Map);return new gr([...r,...s],i,new Map([...this.dictionaries,...o]))}}gr.prototype.fields=null;gr.prototype.metadata=null;gr.prototype.dictionaries=null;let Ir=class PV{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new PV(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],PV.new(n,r,i,s)}};Ir.prototype.type=null;Ir.prototype.name=null;Ir.prototype.nullable=null;Ir.prototype.metadata=null;function jP(e,t){return new Map([...e||new Map,...t||new Map])}function kV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Pn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&kV(s.children,t)}return t}var Jpe=wp,zNt=dDe,UNt=g3;class $V{constructor(t,n=Ju.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new UNt(vr(t));const n=qu.getRootAsFooter(t),r=gr.decode(n.schema());return new VNt(r,n)}static encode(t){const n=new zNt,r=gr.encode(n,t.schema);qu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())u0.encode(n,o);const i=n.endVector();qu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())u0.encode(n,o);const s=n.endVector();return qu.startFooter(n),qu.addSchema(n,r),qu.addVersion(n,Ju.V4),qu.addRecordBatches(n,i),qu.addDictionaries(n,s),qu.finishFooterBuffer(n,qu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class VNt extends $V{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return u0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return u0.decode(n)}return null}}class u0{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new u0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new Jpe(n.offset,0),s=new Jpe(n.bodyLength,0);return AV.createBlock(t,i,r,s)}}const BP=Object.freeze({done:!0,value:void 0});class pDe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class HNt extends pDe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Yh(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(BP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Hpe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Hpe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Yh(this,void 0,void 0,function*(){return yield this.abort(t),BP})}return(t){return Yh(this,void 0,void 0,function*(){return yield this.close(),BP})}read(t){return Yh(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Yh(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(BP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class aB extends HNt{write(t){if((t=vr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?xV(this.toUint8Array(!0)):this.toUint8Array(!1).then(xV)}toUint8Array(t=!1){return t?Wd(this._values)[0]:Yh(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=m2(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Wd(i,s)[0]})}}class mDe extends W4{constructor(t){super(t),this._values=new q4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class qNt extends Du{constructor(t){super(t),this._values=new lDe}setValue(t,n){this._values.set(t,+n)}}class G4 extends W0{}G4.prototype._setValue=TNe;class gDe extends G4{}gDe.prototype._setValue=AX;class yDe extends G4{}yDe.prototype._setValue=IX;class vDe extends W0{}vDe.prototype._setValue=INe;class WNt extends Du{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new a0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=E3({type:this.type.indices,nullValues:n}),this.dictionary=E3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class _De extends W0{}_De.prototype._setValue=SNe;class GNt extends Du{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new qw(this.type.listSize,new Ir(n,t.type,!0)),r}}class Y4 extends W0{setValue(t,n){this._values.set(t,n)}}class YNt extends Y4{setValue(t,n){super.setValue(t,wNe(n))}}class KNt extends Y4{}class XNt extends Y4{}class K4 extends W0{}K4.prototype._setValue=kNe;class bDe extends K4{}bDe.prototype._setValue=LX;class wDe extends K4{}wDe.prototype._setValue=FX;class hm extends W0{setValue(t,n){this._values.set(t,n)}}class QNt extends hm{}class JNt extends hm{}class ZNt extends hm{}class eDt extends hm{}class tDt extends hm{}class nDt extends hm{}class rDt extends hm{}class iDt extends hm{}class sDt extends W4{constructor(t){super(t),this._offsets=new cDe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Hw(new Ir(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class oDt extends W4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new LC(new Ir(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class aDt extends Du{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class uDt extends Du{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Yo([...this.type.children,new Ir(n,t.type,!0)]),r}}class ix extends W0{}ix.prototype._setValue=CNe;class EDe extends ix{}EDe.prototype._setValue=OX;class xDe extends ix{}xDe.prototype._setValue=PX;class SDe extends ix{}SDe.prototype._setValue=kX;class TDe extends ix{}TDe.prototype._setValue=$X;class sx extends W0{}sx.prototype._setValue=ANe;class CDe extends sx{}CDe.prototype._setValue=RX;class ADe extends sx{}ADe.prototype._setValue=NX;class IDe extends sx{}IDe.prototype._setValue=DX;class ODe extends sx{}ODe.prototype._setValue=MX;class WX extends Du{constructor(t){super(t),this._typeIds=new EI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ir(n,t.type)];return this.type=new MC(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class lDt extends WX{}class cDt extends WX{constructor(t){super(t),this._offsets=new EI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class PDe extends W4{constructor(t){super(t),this._values=new q4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,fX(n))}_flushPending(t,n){}}PDe.prototype._flushPending=mDe.prototype._flushPending;class fDt extends Vn{visitNull(){return aDt}visitBool(){return qNt}visitInt(){return hm}visitInt8(){return QNt}visitInt16(){return JNt}visitInt32(){return ZNt}visitInt64(){return eDt}visitUint8(){return tDt}visitUint16(){return nDt}visitUint32(){return rDt}visitUint64(){return iDt}visitFloat(){return Y4}visitFloat16(){return YNt}visitFloat32(){return KNt}visitFloat64(){return XNt}visitUtf8(){return PDe}visitBinary(){return mDe}visitFixedSizeBinary(){return _De}visitDate(){return G4}visitDateDay(){return gDe}visitDateMillisecond(){return yDe}visitTimestamp(){return ix}visitTimestampSecond(){return EDe}visitTimestampMillisecond(){return xDe}visitTimestampMicrosecond(){return SDe}visitTimestampNanosecond(){return TDe}visitTime(){return sx}visitTimeSecond(){return CDe}visitTimeMillisecond(){return ADe}visitTimeMicrosecond(){return IDe}visitTimeNanosecond(){return ODe}visitDecimal(){return vDe}visitList(){return sDt}visitStruct(){return uDt}visitUnion(){return WX}visitDenseUnion(){return cDt}visitSparseUnion(){return lDt}visitDictionary(){return WNt}visitInterval(){return K4}visitIntervalDayTime(){return bDe}visitIntervalYearMonth(){return wDe}visitFixedSizeList(){return GNt}visitMap(){return oDt}}const dDt=new fDt;class on extends Vn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Mu(e,t){return t instanceof e.constructor}function xI(e,t){return e===t||Mu(e,t)}function pm(e,t){return e===t||Mu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function X4(e,t){return e===t||Mu(e,t)&&e.precision===t.precision}function hDt(e,t){return e===t||Mu(e,t)&&e.byteWidth===t.byteWidth}function GX(e,t){return e===t||Mu(e,t)&&e.unit===t.unit}function SI(e,t){return e===t||Mu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function TI(e,t){return e===t||Mu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function pDt(e,t){return e===t||Mu(e,t)&&e.children.length===t.children.length&&l0.compareManyFields(e.children,t.children)}function mDt(e,t){return e===t||Mu(e,t)&&e.children.length===t.children.length&&l0.compareManyFields(e.children,t.children)}function YX(e,t){return e===t||Mu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&l0.compareManyFields(e.children,t.children)}function gDt(e,t){return e===t||Mu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&l0.visit(e.indices,t.indices)&&l0.visit(e.dictionary,t.dictionary)}function KX(e,t){return e===t||Mu(e,t)&&e.unit===t.unit}function yDt(e,t){return e===t||Mu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&l0.compareManyFields(e.children,t.children)}function vDt(e,t){return e===t||Mu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&l0.compareManyFields(e.children,t.children)}on.prototype.visitNull=xI;on.prototype.visitBool=xI;on.prototype.visitInt=pm;on.prototype.visitInt8=pm;on.prototype.visitInt16=pm;on.prototype.visitInt32=pm;on.prototype.visitInt64=pm;on.prototype.visitUint8=pm;on.prototype.visitUint16=pm;on.prototype.visitUint32=pm;on.prototype.visitUint64=pm;on.prototype.visitFloat=X4;on.prototype.visitFloat16=X4;on.prototype.visitFloat32=X4;on.prototype.visitFloat64=X4;on.prototype.visitUtf8=xI;on.prototype.visitBinary=xI;on.prototype.visitFixedSizeBinary=hDt;on.prototype.visitDate=GX;on.prototype.visitDateDay=GX;on.prototype.visitDateMillisecond=GX;on.prototype.visitTimestamp=SI;on.prototype.visitTimestampSecond=SI;on.prototype.visitTimestampMillisecond=SI;on.prototype.visitTimestampMicrosecond=SI;on.prototype.visitTimestampNanosecond=SI;on.prototype.visitTime=TI;on.prototype.visitTimeSecond=TI;on.prototype.visitTimeMillisecond=TI;on.prototype.visitTimeMicrosecond=TI;on.prototype.visitTimeNanosecond=TI;on.prototype.visitDecimal=xI;on.prototype.visitList=pDt;on.prototype.visitStruct=mDt;on.prototype.visitUnion=YX;on.prototype.visitDenseUnion=YX;on.prototype.visitSparseUnion=YX;on.prototype.visitDictionary=gDt;on.prototype.visitInterval=KX;on.prototype.visitIntervalDayTime=KX;on.prototype.visitIntervalYearMonth=KX;on.prototype.visitFixedSizeList=yDt;on.prototype.visitMap=vDt;const l0=new on;function RV(e,t){return l0.compareSchemas(e,t)}function E3(e){const t=e.type,n=new(dDt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(E3(Object.assign(Object.assign({},l),{type:u})))}}return n}function uB(e,t){return _Dt(e,t.map(n=>n.data.concat()))}function _Dt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=bDt(n,o,c,t,i),o>0&&(r[s++]=Ho({type:new Yo(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Xu(e,f))]}function bDt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ho({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var kDe;class su{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new gr([]),this._offsets=[0],this;let i,s;t[0]instanceof gr&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Xu)return[u];if(u instanceof su)return u.batches;if(u instanceof Ar){if(u.type instanceof Yo)return[new Xu(new gr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new rr([u[h]])),f=new gr(l.map((h,p)=>new Ir(String(h),c[p].type))),[,d]=uB(f,c);return d.length===0?[new Xu(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new gr([]),!(i instanceof gr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Xu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!RV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??ZNe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=JNe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?qX.visit(new rr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new su(n,r.map(i=>new Xu(n,i)))}slice(t,n){const r=this.schema;[t,n]=KNe({length:this.numRows},t,n);const i=eDe(this.data,this._offsets,t,n);return new su(r,i.map(s=>new Xu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ho({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new rr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new rr([Ho({type:new Up,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=uB(r,a)}return new su(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new su(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new su(...uB(s,o))}}kDe=Symbol.toStringTag;su[kDe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Jb(HX),e.get=Jb(Tu.getVisitFn(re.Struct)),e.set=tDe(oc.getVisitFn(re.Struct)),e.indexOf=nDe(p3.getVisitFn(re.Struct)),e.getByteLength=Jb(Kd.getVisitFn(re.Struct)),"Table"))(su.prototype);var $De;let Xu=class yT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ho({nullCount:0,type:new Yo(this.schema.fields),children:this.schema.fields.map(n=>Ho({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Ar))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Zpe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ir.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new gr(r),a=Ho({type:new Yo(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Zpe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=RDe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Tu.visit(this.data,t)}set(t,n){return oc.visit(this.data,t,n)}indexOf(t,n){return p3.visit(this.data,t,n)}getByteLength(t){return Kd.visit(this.data,t)}[Symbol.iterator](){return qX.visit(new rr([this.data]))}toArray(){return[...this]}concat(...t){return new su(this.schema,[this,...t])}slice(t,n){const[r]=new rr([this.data]).slice(t,n).data;return new yT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new rr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new rr([Ho({type:new Up,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new gr(s,new Map(this.schema.metadata)),i=Ho({type:new Yo(s),children:o})}return new yT(r,i)}select(t){const n=this.schema.select(t),r=new Yo(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new yT(n,Ho({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ho({type:new Yo(n.fields),length:this.numRows,children:r});return new yT(n,i)}};$De=Symbol.toStringTag;Xu[$De]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Xu.prototype);function Zpe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ho({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ho({type:new Yo(i),length:n,children:s})]}function RDe(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Pn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&RDe(o.children,a.children,n)}return n}class wDt extends Xu{constructor(t){const n=t.fields.map(i=>Ho({type:i.type})),r=Ho({type:new Yo(t.fields),nullCount:0,children:n});super(t,r)}}var x3;(function(e){e[e.BUFFER=0]="BUFFER"})(x3||(x3={}));var S3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(S3||(S3={}));class Hm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Hm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Mr),(n||new Hm).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):S3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):x3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,S3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,x3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Hm.startBodyCompression(t),Hm.addCodec(t,n),Hm.addMethod(t,r),Hm.endBodyCompression(t)}}let NDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},DDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},Fh=class NV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new NV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Mr),(n||new NV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new DDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new NDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Hm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Q_=class DV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new DV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Mr),(n||new DV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Fh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var T3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(T3||(T3={}));let Im=class Uf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Uf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Mr),(n||new Uf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ww.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):T3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ys).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ww.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,T3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Uf.startMessage(t),Uf.addVersion(t,n),Uf.addHeaderType(t,r),Uf.addHeader(t,i),Uf.addBodyLength(t,s),Uf.addCustomMetadata(t,o),Uf.endMessage(t)}};var EDt=wp;class xDt extends Vn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return f1.startNull(n),f1.endNull(n)}visitInt(t,n){return Ku.startInt(n),Ku.addBitWidth(n,t.bitWidth),Ku.addIsSigned(n,t.isSigned),Ku.endInt(n)}visitFloat(t,n){return ld.startFloatingPoint(n),ld.addPrecision(n,t.precision),ld.endFloatingPoint(n)}visitBinary(t,n){return u1.startBinary(n),u1.endBinary(n)}visitBool(t,n){return l1.startBool(n),l1.endBool(n)}visitUtf8(t,n){return h1.startUtf8(n),h1.endUtf8(n)}visitDecimal(t,n){return nu.startDecimal(n),nu.addScale(n,t.scale),nu.addPrecision(n,t.precision),nu.addBitWidth(n,t.bitWidth),nu.endDecimal(n)}visitDate(t,n){return E$.startDate(n),E$.addUnit(n,t.unit),E$.endDate(n)}visitTime(t,n){return mT.startTime(n),mT.addUnit(n,t.unit),mT.addBitWidth(n,t.bitWidth),mT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return gT.startTimestamp(n),gT.addUnit(n,t.unit),r!==void 0&&gT.addTimezone(n,r),gT.endTimestamp(n)}visitInterval(t,n){return cd.startInterval(n),cd.addUnit(n,t.unit),cd.endInterval(n)}visitList(t,n){return c1.startList(n),c1.endList(n)}visitStruct(t,n){return d1.startStruct_(n),d1.endStruct_(n)}visitUnion(t,n){$y.startTypeIdsVector(n,t.typeIds.length);const r=$y.createTypeIdsVector(n,t.typeIds);return $y.startUnion(n),$y.addMode(n,t.mode),$y.addTypeIds(n,r),$y.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Xh.startDictionaryEncoding(n),Xh.addId(n,new EDt(t.id,0)),Xh.addIsOrdered(n,t.isOrdered),r!==void 0&&Xh.addIndexType(n,r),Xh.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return ad.startFixedSizeBinary(n),ad.addByteWidth(n,t.byteWidth),ad.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return ud.startFixedSizeList(n),ud.addListSize(n,t.listSize),ud.endFixedSizeList(n)}visitMap(t,n){return x$.startMap(n),x$.addKeysSorted(n,t.keysSorted),x$.endMap(n)}}const lB=new xDt;function SDt(e,t=new Map){return new gr(CDt(e,t),T$(e.customMetadata),t)}function MDe(e){return new hl(e.count,LDe(e.columns),FDe(e.columns))}function TDt(e){return new Xd(MDe(e.data),e.id,e.isDelta)}function CDt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function eme(e,t){return(e.children||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function LDe(e){return(e||[]).reduce((t,n)=>[...t,new Kv(n.count,ADt(n.VALIDITY)),...LDe(n.children)],[])}function FDe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new vd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new vd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new vd(t.length,i.OFFSET.length)),i.DATA&&t.push(new vd(t.length,i.DATA.length)),t=FDe(i.children,t)}return t}function ADt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function IDt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=nme(e,eme(e,t)),i=new Ir(e.name,o,e.nullable,T$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?tme(r):new s0,a=new a0(t.get(n),r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,T$(e.customMetadata))):(r=(r=s.indexType)?tme(r):new s0,t.set(n,o=nme(e,eme(e,t))),a=new a0(o,r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,T$(e.customMetadata))),i||null}function T$(e){return new Map(Object.entries(e||{}))}function tme(e){return new La(e.isSigned,e.bitWidth)}function nme(e,t){const n=e.type.name;switch(n){case"NONE":return new Up;case"null":return new Up;case"binary":return new NC;case"utf8":return new zw;case"bool":return new DC;case"list":return new Hw((t||[])[0]);case"struct":return new Yo(t||[]);case"struct_":return new Yo(t||[])}switch(n){case"int":{const r=e.type;return new La(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new o0(bo[r.precision])}case"decimal":{const r=e.type;return new f3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Uw(Gd[r.unit])}case"time":{const r=e.type;return new Vp(Bn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new d3(Bn[r.unit],r.timezone)}case"interval":{const r=e.type;return new Vw(Yd[r.unit])}case"union":{const r=e.type;return new MC(sc[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new h3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new qw(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new LC((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var nv=wp,ODt=dDe,PDt=g3;class fd{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new fd(0,Ju.V4,n);return r._createHeader=kDt(t,n),r}static decode(t){t=new PDt(vr(t));const n=Im.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new fd(r,i,s);return o._createHeader=$Dt(n,s),o}static encode(t){const n=new ODt;let r=-1;return t.isSchema()?r=gr.encode(n,t.header()):t.isRecordBatch()?r=hl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Xd.encode(n,t.header())),Im.startMessage(n),Im.addVersion(n,Ju.V4),Im.addHeader(n,r),Im.addHeaderType(n,t.headerType),Im.addBodyLength(n,new nv(t.bodyLength,0)),Im.finishMessageBuffer(n,Im.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof gr)return new fd(0,Ju.V4,js.Schema,t);if(t instanceof hl)return new fd(n,Ju.V4,js.RecordBatch,t);if(t instanceof Xd)return new fd(n,Ju.V4,js.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===js.Schema}isRecordBatch(){return this.headerType===js.RecordBatch}isDictionaryBatch(){return this.headerType===js.DictionaryBatch}}class hl{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Xd{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class vd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class Kv{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function kDt(e,t){return()=>{switch(t){case js.Schema:return gr.fromJSON(e);case js.RecordBatch:return hl.fromJSON(e);case js.DictionaryBatch:return Xd.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${js[t]}, type: ${t} }`)}}function $Dt(e,t){return()=>{switch(t){case js.Schema:return gr.decode(e.header(new Xf));case js.RecordBatch:return hl.decode(e.header(new Fh),e.version());case js.DictionaryBatch:return Xd.decode(e.header(new Q_),e.version())}throw new Error(`Unrecognized Message type: { name: ${js[t]}, type: ${t} }`)}}Ir.encode=VDt;Ir.decode=zDt;Ir.fromJSON=IDt;gr.encode=UDt;gr.decode=RDt;gr.fromJSON=SDt;hl.encode=HDt;hl.decode=NDt;hl.fromJSON=MDe;Xd.encode=qDt;Xd.decode=DDt;Xd.fromJSON=TDt;Kv.encode=WDt;Kv.decode=LDt;vd.encode=GDt;vd.decode=MDt;function RDt(e,t=new Map){const n=BDt(e,t);return new gr(n,C$(e),t)}function NDt(e,t=Ju.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new hl(e.length(),FDt(e),jDt(e,t))}function DDt(e,t=Ju.V4){return new Xd(hl.decode(e.data(),t),e.id(),e.isDelta())}function MDt(e){return new vd(e.offset(),e.length())}function LDt(e){return new Kv(e.length(),e.nullCount())}function FDt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Kv.decode(n));return t}function jDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ju.V4&&(r.bb_pos+=8*(i+1)),n[++s]=vd.decode(r));return n}function BDt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ir.decode(r,t));return n}function rme(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ir.decode(r,t));return n}function zDt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=sme(e,rme(e,t)),r=new Ir(e.name(),i,e.nullable(),C$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?ime(s):new s0,o=new a0(t.get(n),s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),C$(e))):(s=(s=a.indexType())?ime(s):new s0,t.set(n,i=sme(e,rme(e,t))),o=new a0(i,s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),C$(e))),r||null}function C$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ime(e){return new La(e.isSigned(),e.bitWidth())}function sme(e,t){const n=e.typeType();switch(n){case bi.NONE:return new Up;case bi.Null:return new Up;case bi.Binary:return new NC;case bi.Utf8:return new zw;case bi.Bool:return new DC;case bi.List:return new Hw((t||[])[0]);case bi.Struct_:return new Yo(t||[])}switch(n){case bi.Int:{const r=e.type(new Ku);return new La(r.isSigned(),r.bitWidth())}case bi.FloatingPoint:{const r=e.type(new ld);return new o0(r.precision())}case bi.Decimal:{const r=e.type(new nu);return new f3(r.scale(),r.precision(),r.bitWidth())}case bi.Date:{const r=e.type(new E$);return new Uw(r.unit())}case bi.Time:{const r=e.type(new mT);return new Vp(r.unit(),r.bitWidth())}case bi.Timestamp:{const r=e.type(new gT);return new d3(r.unit(),r.timezone())}case bi.Interval:{const r=e.type(new cd);return new Vw(r.unit())}case bi.Union:{const r=e.type(new $y);return new MC(r.mode(),r.typeIdsArray()||[],t||[])}case bi.FixedSizeBinary:{const r=e.type(new ad);return new h3(r.byteWidth())}case bi.FixedSizeList:{const r=e.type(new ud);return new qw(r.listSize(),(t||[])[0])}case bi.Map:{const r=e.type(new x$);return new LC((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${bi[n]}" (${n})`)}function UDt(e,t){const n=t.fields.map(s=>Ir.encode(e,s));Xf.startFieldsVector(e,n.length);const r=Xf.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Xf.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ys.startKeyValue(e),ys.addKey(e,a),ys.addValue(e,u),ys.endKeyValue(e)})):-1;return Xf.startSchema(e),Xf.addFields(e,r),Xf.addEndianness(e,YDt?Gw.Little:Gw.Big),i!==-1&&Xf.addCustomMetadata(e,i),Xf.endSchema(e)}function VDt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Pn.isDictionary(s)?(o=s.dictionary.typeId,i=lB.visit(s,e),r=lB.visit(s.dictionary,e)):r=lB.visit(s,e);const a=(s.children||[]).map(c=>Ir.encode(e,c)),u=Dl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Dl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ys.startKeyValue(e),ys.addKey(e,d),ys.addValue(e,h),ys.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Dl.startField(e),Dl.addType(e,r),Dl.addTypeType(e,o),Dl.addChildren(e,u),Dl.addNullable(e,!!t.nullable),n!==-1&&Dl.addName(e,n),i!==-1&&Dl.addDictionary(e,i),l!==-1&&Dl.addCustomMetadata(e,l),Dl.endField(e)}function HDt(e,t){const n=t.nodes||[],r=t.buffers||[];Fh.startNodesVector(e,n.length);for(const o of n.slice().reverse())Kv.encode(e,o);const i=e.endVector();Fh.startBuffersVector(e,r.length);for(const o of r.slice().reverse())vd.encode(e,o);const s=e.endVector();return Fh.startRecordBatch(e),Fh.addLength(e,new nv(t.length,0)),Fh.addNodes(e,i),Fh.addBuffers(e,s),Fh.endRecordBatch(e)}function qDt(e,t){const n=hl.encode(e,t.data);return Q_.startDictionaryBatch(e),Q_.addId(e,new nv(t.id,0)),Q_.addIsDelta(e,t.isDelta),Q_.addData(e,n),Q_.endDictionaryBatch(e)}function WDt(e,t){return DDe.createFieldNode(e,new nv(t.length,0),new nv(t.nullCount,0))}function GDt(e,t){return NDe.createBuffer(e,new nv(t.offset,0),new nv(t.length,0))}const YDt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),MV="ARROW1",XX=new Uint8Array(MV.length);for(let e=0;e<MV.length;e+=1)XX[e]=MV.codePointAt(e);XX.length;class ls extends Vn{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Xu?s.data.children:s.data),r=new ls;return r.visitMany(n(t)),r}visit(t){if(t instanceof rr)return this.visitMany(t.data),this;const{type:n}=t;if(!Pn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Pn.isNull(n)||uf.call(this,i<=0?new Uint8Array(0):zX(t.offset,r,t.nullBitmap)),this.nodes.push(new Kv(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function uf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new vd(this._byteLength,t)),this._byteLength+=t,this}function KDt(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(uf.call(this,r),t.mode===sc.Sparse)return LV.call(this,e);if(t.mode===sc.Dense){if(e.offset<=0)return uf.call(this,i),LV.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=pX(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];uf.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function XDt(e){let t;return e.nullCount>=e.length?uf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?uf.call(this,zX(e.offset,e.length,t)):uf.call(this,QNe(e.values))}function G0(e){return uf.call(this,e.values.subarray(0,e.length*e.stride))}function jDe(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return uf.call(this,pX(-r[0],t,r)),uf.call(this,n.subarray(i,i+o)),this}function QX(e){const{length:t,valueOffsets:n}=e;return n&&uf.call(this,pX(n[0],t,n)),this.visit(e.children[0])}function LV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ls.prototype.visitBool=XDt;ls.prototype.visitInt=G0;ls.prototype.visitFloat=G0;ls.prototype.visitUtf8=jDe;ls.prototype.visitBinary=jDe;ls.prototype.visitFixedSizeBinary=G0;ls.prototype.visitDate=G0;ls.prototype.visitTimestamp=G0;ls.prototype.visitTime=G0;ls.prototype.visitDecimal=G0;ls.prototype.visitList=QX;ls.prototype.visitStruct=LV;ls.prototype.visitUnion=KDt;ls.prototype.visitInterval=G0;ls.prototype.visitFixedSizeList=QX;ls.prototype.visitMap=QX;class BDe extends pDe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new aB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,V0(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return z4(t)?t.then(n=>this.writeAll(n)):U4(t)?tQ(this,t):eQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof aB?this._sink=t:(this._sink=new aB,t&&iRt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&sRt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!RV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof su&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Xu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!RV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Xu?t instanceof wDt||this._writeRecordBatch(t):t instanceof su?this.writeAll(t.batches):dX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=fd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===js.RecordBatch?this._recordBatchBlocks.push(new u0(a,t.bodyLength,this._position)):t.headerType===js.DictionaryBatch&&this._dictionaryBlocks.push(new u0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=vr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(fd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(XX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ls.assemble(t),o=new hl(t.numRows,r,i),a=fd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ls.assemble(new rr([t])),u=new hl(t.length,s,o),l=new Xd(u,n,r),c=fd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class JX extends BDe{static writeAll(t,n){const r=new JX(n);return z4(t)?t.then(i=>r.writeAll(i)):U4(t)?tQ(r,t):eQ(r,t)}}class ZX extends BDe{static writeAll(t){const n=new ZX;return z4(t)?t.then(r=>n.writeAll(r)):U4(t)?tQ(n,t):eQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=$V.encode(new $V(t,Ju.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function eQ(e,t){let n=t;t instanceof su&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function tQ(e,t){var n,r,i,s;return Yh(this,void 0,void 0,function*(){try{for(n=m2(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function QDt(e,t="stream"){return(t==="stream"?JX:ZX).writeAll(e).toUint8Array(!0)}function nQ(e,t=1){return(e*t+63&-64||64)/t}function c0(e,t,n=e.BYTES_PER_ELEMENT){return new e(nQ(t,n))}function rQ(e){return e instanceof Ar?e:new Ar(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function JDt(e){return new rr([rQ(e)])}const iQ=new TextEncoder;function ZDt(e,t,n){const r=iQ.encode(n);return e.set(r,t),r.length}function e3t(e,t,n){return iQ.encodeInto(n,e.subarray(t)).written}const t3t=iQ.encodeInto?e3t:ZDt;function ome(e,t){const n=c0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function n3t(e,t){const n=c0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function r3t(e,t){const n=c0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function i3t(e,t){const n=c0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function s3t(e){const t=E3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function o3t(e,t,n){const r=c0(Int32Array,t+1),i=c0(Uint8Array,3*n);let s=0;return{set(o,a){s+=t3t(i,s,o),r[a+1]=s},data:()=>{const o=nQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function a3t(e,t){const n=[],r=c0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:u3t(e.dictionary,n,o)})}}function u3t(e,t,n){const r=o3t(e,t.length,n);return t.forEach(r.set),JDt(r.data())}function l3t(e,t){const n=c0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function c3t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?ome:null;break;case re.Float:r=e.precision>0?ome:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?a3t:null;break;case re.Bool:r=n3t;break;case re.Date:r=e.unit?i3t:r3t;break}return r==null?s3t(e):n?l3t(r(e,t),t):r(e,t)}function f3t(e,t){const n=e.length,r=nQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),rQ({type:t,length:n,buffers:[null,i]})}function zDe(e,t,n,r,i=!0){const s=c3t(r,e,i);return t(n,s.set),rQ(s.data())}function sQ(e){if(e instanceof Pn||e==null)return e;switch(e){case re.Binary:return new NC;case re.Bool:return new DC;case re.DateDay:return new _Rt;case re.DateMillisecond:case re.Date:return new bRt;case re.Dictionary:return new a0(new zw,new s0);case re.Float16:return new vNe;case re.Float32:return new xX;case re.Float64:case re.Float:return new SX;case re.Int8:return new gX;case re.Int16:return new yX;case re.Int32:case re.Int:return new s0;case re.Int64:return new vX;case re.IntervalDayTime:return new TRt;case re.Interval:case re.IntervalYearMonth:return new CRt;case re.Null:return new Up;case re.TimeMicrosecond:return new xRt;case re.TimeMillisecond:case re.Time:return new ERt;case re.TimeNanosecond:return new SRt;case re.TimeSecond:return new wRt;case re.Uint8:return new _X;case re.Uint16:return new bX;case re.Uint32:return new wX;case re.Uint64:return new EX;case re.Utf8:return new zw;default:vn(`Unsupported type code: ${qd(e)}. Use a data type constructor instead?`)}}function d3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function UDe(e,t){const n=FV();return e(t,n.add),n}function FV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(zp(t))++e.dates,d3t(t)&&++e.utcdays;else if(o1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=FV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=FV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return sQ(h3t(e))}};return e}function h3t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:vn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:vn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Ir.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new qw(e.minlen,n):new Hw(n)}else if(e.structs===t){const n=e.struct_prof;return new Yo(Object.keys(n).map(r=>Ir.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;vn("Type inference failure")}}}}function p3t(e,t,n,r,i,s=!0){if(i=sQ(i),!i){const o=UDe(r,t);s=o.nulls>0,i=o.type()}return zDe(n,r,t,i,s)}function m3t(e,t,n,r,i,s=!0){i=sQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=g3t(o);if(u&&a&&ame(u.type,i))return u;const l=o.data;if(bI(l)){const c=y3t(l);if(a&&c&&ame(c,i))return f3t(l,c);i=i||c,s=!1}if(!i){const c=UDe(r,o);s=c.nulls>0,i=c.type()}return zDe(n,r,o,i,s)}function g3t(e){return e instanceof rr?e:e.vector instanceof rr?e.vector:null}function y3t(e){const n={Float32Array:xX,Float64Array:SX,Int8Array:gX,Int16Array:yX,Int32Array:s0,Uint8Array:_X,Uint16Array:bX,Uint32Array:wX,BigInt64Array:vX,BigUint64Array:EX}[e.constructor.name];return n?new n:null}function ame(e,t){return!e||!t?!0:e.compareTo(t)}function v3t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function _3t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&o1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const b3t=()=>vn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function w3t(){try{return su}catch{b3t()}}function VDe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=E3t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&vn("Column length mismatch"),a[l]=c});const u=w3t();return new u(a)}function E3t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ri(n)?n(e):nr(n)?n:null;if(nr(e))return{dataFrom:p3t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:v3t(e,r,i)};if(x3t(e))return{dataFrom:m3t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:_3t(e,r,i)};vn("Unsupported input data type")}function x3t(e){return e&&ri(e.reify)}function S3t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return QDt(VDe(e,r),n)}function T3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function C3t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&zp(u))++i,T3t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function Q4(e,t){return ri(t)?t(e):t||e.columnNames()}function HDe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=C3t(A3t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function A3t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function oQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function I3t(e,t={}){const n=Q4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":zp(l)?j4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return oQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function qDe(e,t={}){if(ri(t))return t(e)+"";const n=typeof e;if(n==="object"){if(zp(e))return t.utc?j4(e):xRe(e);{const r=JSON.stringify(e,(s,o)=>bI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function J4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function O3t(e,t={}){const n=Q4(e,t.columns),{align:r,format:i}=HDe(e,n,t),s=P3t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(qDe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",b=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${b?` style="${b}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return oQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function P3t(e){return J4(e.style,t=>ri(t)?t:()=>t)}function k3t(e,t=!0,n=!1){return e===void 0||e?t:n}const $3t=e=>zp(e)?j4(e,!0):e;function R3t(e,t={}){const n=k3t(t.schema),r=t.format||{},i=Q4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||$3t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function N3t(e,t={}){const n=Q4(e,t.columns),{align:r,format:i}=HDe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return oQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(qDe(u,i[l]))+"|"}}),a+`
`}function WDe(e,t){for(const[n,r]of B4(t))e.set(n,r);return e}function D3t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Hp(e,t,n=new Map){return t=Ma(t)?e.columnName(t):t,Io(t)?n.set(t,t):nr(t)?t.forEach(r=>Hp(e,r,n)):ri(t)?Hp(e,t(e),n):aa(t)?WDe(n,t):vn(`Invalid column selection: ${qd(t)}`),n}function Z4(e,t){return e.toObject=t,e}function GDe(e){return nr(e)?e.map(GDe):e&&e.toObject?e.toObject():e}function Kw(){return Z4(e=>e.columnNames(),()=>({all:[]}))}function YDe(...e){return e=e.flat(),Z4(t=>{const n=Hp(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:GDe(e)}))}function M3t(e,t){return Z4(n=>{let r=Ma(e)?e:n.columnIndex(e),i=Ma(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function L3t(e){return Io(e)&&(e=RegExp(D3t(e))),Z4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function F3t(e){return bI(e.data)?e.data.constructor:Array}class Qh extends r$t{static from(t,n){return new Qh(o$t(t,n),n)}static new(t,n){if(t instanceof Qh)return t;const r={},i=[];for(const[s,o]of B4(t))r[s]=o,i.push(s);return new Qh(r,n||i)}constructor(t,n,r,i,s,o){J4(t,s$t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Qh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:D$t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Cl(r).groupby(r.groups());return t.forEach(s=>{s=Qh.new(s),s.numRows()!==n&&vn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):vn(`Unrecognized column: ${t}`)}object(t=0){return ume(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Hp(this,t.columns||Kw()),o=YRe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),L$t(this,u,a,n)}return a}*[Symbol.iterator](){const t=ume(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(F3t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=M$t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return VDe(this,t)}toArrowBuffer(t){return S3t(this,t)}toCSV(t){return I3t(this,t)}toHTML(t){return O3t(this,t)}toJSON(t){return R3t(this,t)}toMarkdown(t){return N3t(this,t)}}function ume(e){let t=e._builder;if(!t){const n=YRe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class j3t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Wn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=B3t[e.type];s&&s(e,t,n)}const zP=(e,t,n)=>{Wn(e.argument,t,n,e)},cB=(e,t,n)=>{Wn(e.left,t,n,e),Wn(e.right,t,n,e)},lme=(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.consequent,t,n,e),e.alternate&&Wn(e.alternate,t,n,e)},fB=(e,t,n)=>{Qf(e.params,t,n,e),Wn(e.body,t,n,e)},cme=(e,t,n)=>{Wn(e.callee,t,n,e),Qf(e.arguments,t,n,e)},Qf=(e,t,n,r)=>{e.forEach(i=>Wn(i,t,n,r))},B3t={TemplateLiteral:(e,t,n)=>{Qf(e.expressions,t,n,e),Qf(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Wn(e.object,t,n,e),Wn(e.property,t,n,e)},CallExpression:cme,NewExpression:cme,ArrayExpression:(e,t,n)=>{Qf(e.elements,t,n,e)},AssignmentExpression:cB,AwaitExpression:zP,BinaryExpression:cB,LogicalExpression:cB,UnaryExpression:zP,UpdateExpression:zP,ConditionalExpression:lme,ObjectExpression:(e,t,n)=>{Qf(e.properties,t,n,e)},Property:(e,t,n)=>{Wn(e.key,t,n,e),Wn(e.value,t,n,e)},ArrowFunctionExpression:fB,FunctionExpression:fB,FunctionDeclaration:fB,VariableDeclaration:(e,t,n)=>{Qf(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Wn(e.id,t,n,e),Wn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Wn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Qf(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Wn(e.expression,t,n,e)},IfStatement:lme,ForStatement:(e,t,n)=>{Wn(e.init,t,n,e),Wn(e.test,t,n,e),Wn(e.update,t,n,e),Wn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Wn(e.body,t,n,e),Wn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Wn(e.discriminant,t,n,e),Qf(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Wn(e.test,t,n,e),Qf(e.consequent,t,n,e)},ReturnStatement:zP,Program:(e,t,n)=>{Wn(e.body[0],t,n,e)}};function KDe(e){delete e.start,delete e.end,delete e.optional}function fme(e){KDe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function z3t(e){return Wn(e,null,{Column:fme,Constant:fme,Default:KDe}),e}function _s(e,t){return t&&t.type===e}function U3t(e){return _s(B$t,e)||_s(j$t,e)}function V3t(e){return ri(e)?e:()=>e}const H3t="Escaped functions are not valid as rollup or pivot values.";function q3t(e,t,n){e.aggronly&&vn(H3t);const r="(row,data)=>fn("+GRe(e.table.columnNames())+",$)";return{escape:lX.escape(r,V3t(t.expr),n)}}var W3t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],XDe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],G3t="-----------------------------------------------------------------------------------------------------------------------------------------------------",QDe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",dB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},hB="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Y3t={5:hB,"5module":hB+" export import",6:hB+" const class extends export import super"},K3t=/^in(stanceof)?$/,X3t=new RegExp("["+QDe+"]"),Q3t=new RegExp("["+QDe+G3t+"]");function jV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function qp(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&X3t.test(String.fromCharCode(e)):t===!1?!1:jV(e,XDe)}function Xw(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Q3t.test(String.fromCharCode(e)):t===!1?!1:jV(e,XDe)||jV(e,W3t)}var Kn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Pl(e,t){return new Kn(e,{beforeExpr:!0,binop:t})}var kl={beforeExpr:!0},Xa={startsExpr:!0},aQ={};function Ln(e,t){return t===void 0&&(t={}),t.keyword=e,aQ[e]=new Kn(e,t)}var G={num:new Kn("num",Xa),regexp:new Kn("regexp",Xa),string:new Kn("string",Xa),name:new Kn("name",Xa),privateId:new Kn("privateId",Xa),eof:new Kn("eof"),bracketL:new Kn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Kn("]"),braceL:new Kn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Kn("}"),parenL:new Kn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Kn(")"),comma:new Kn(",",kl),semi:new Kn(";",kl),colon:new Kn(":",kl),dot:new Kn("."),question:new Kn("?",kl),questionDot:new Kn("?."),arrow:new Kn("=>",kl),template:new Kn("template"),invalidTemplate:new Kn("invalidTemplate"),ellipsis:new Kn("...",kl),backQuote:new Kn("`",Xa),dollarBraceL:new Kn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Kn("=",{beforeExpr:!0,isAssign:!0}),assign:new Kn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Kn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Kn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Pl("||",1),logicalAND:Pl("&&",2),bitwiseOR:Pl("|",3),bitwiseXOR:Pl("^",4),bitwiseAND:Pl("&",5),equality:Pl("==/!=/===/!==",6),relational:Pl("</>/<=/>=",7),bitShift:Pl("<</>>/>>>",8),plusMin:new Kn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Pl("%",10),star:Pl("*",10),slash:Pl("/",10),starstar:new Kn("**",{beforeExpr:!0}),coalesce:Pl("??",1),_break:Ln("break"),_case:Ln("case",kl),_catch:Ln("catch"),_continue:Ln("continue"),_debugger:Ln("debugger"),_default:Ln("default",kl),_do:Ln("do",{isLoop:!0,beforeExpr:!0}),_else:Ln("else",kl),_finally:Ln("finally"),_for:Ln("for",{isLoop:!0}),_function:Ln("function",Xa),_if:Ln("if"),_return:Ln("return",kl),_switch:Ln("switch"),_throw:Ln("throw",kl),_try:Ln("try"),_var:Ln("var"),_const:Ln("const"),_while:Ln("while",{isLoop:!0}),_with:Ln("with"),_new:Ln("new",{beforeExpr:!0,startsExpr:!0}),_this:Ln("this",Xa),_super:Ln("super",Xa),_class:Ln("class",Xa),_extends:Ln("extends",kl),_export:Ln("export"),_import:Ln("import",Xa),_null:Ln("null",Xa),_true:Ln("true",Xa),_false:Ln("false",Xa),_in:Ln("in",{beforeExpr:!0,binop:7}),_instanceof:Ln("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ln("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ln("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ln("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ec=/\r\n?|\n|\u2028|\u2029/,J3t=new RegExp(Ec.source,"g");function ox(e){return e===10||e===13||e===8232||e===8233}function JDe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(ox(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var ZDe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Hl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,e3e=Object.prototype,Z3t=e3e.hasOwnProperty,eMt=e3e.toString,CI=Object.hasOwn||function(e,t){return Z3t.call(e,t)},dme=Array.isArray||function(e){return eMt.call(e)==="[object Array]"},hme=Object.create(null);function fg(e){return hme[e]||(hme[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function f0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var tMt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,FC=function(t,n){this.line=t,this.column=n};FC.prototype.offset=function(t){return new FC(this.line,this.column+t)};var eF=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function t3e(e,t){for(var n=1,r=0;;){var i=JDe(e,r,t);if(i<0)return new FC(n,t-r);++n,r=i}}var BV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},pme=!1;function nMt(e){var t={};for(var n in BV)t[n]=e&&CI(e,n)?e[n]:BV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!pme&&typeof console=="object"&&console.warn&&(pme=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),dme(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return dme(t.onComment)&&(t.onComment=rMt(t,t.onComment)),t}function rMt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new eF(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var jC=1,ax=2,uQ=4,n3e=8,r3e=16,i3e=32,lQ=64,s3e=128,AI=256,cQ=jC|ax|AI;function fQ(e,t){return ax|(e?uQ:0)|(t?n3e:0)}var C3=0,dQ=1,mm=2,o3e=3,a3e=4,u3e=5,Os=function(t,n,r){this.options=t=nMt(t),this.sourceFile=t.sourceFile,this.keywords=fg(Y3t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=dB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=fg(i);var s=(i?i+" ":"")+dB.strict;this.reservedWordsStrict=fg(s),this.reservedWordsStrictBind=fg(s+" "+dB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ec).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=G.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(jC),this.regexpState=null,this.privateNameStack=[]},dh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Os.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};dh.inFunction.get=function(){return(this.currentVarScope().flags&ax)>0};dh.inGenerator.get=function(){return(this.currentVarScope().flags&n3e)>0&&!this.currentVarScope().inClassFieldInit};dh.inAsync.get=function(){return(this.currentVarScope().flags&uQ)>0&&!this.currentVarScope().inClassFieldInit};dh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&AI)return!1;if(t.flags&ax)return(t.flags&uQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};dh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&lQ)>0||n||this.options.allowSuperOutsideMethod};dh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&s3e)>0};dh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};dh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(ax|AI))>0||n};dh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&AI)>0};Os.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Os.parse=function(t,n){return new this(n,t).parse()};Os.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Os.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Os.prototype,dh);var Ha=Os.prototype,iMt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Ha.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Hl.lastIndex=e,e+=Hl.exec(this.input)[0].length;var t=iMt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Hl.lastIndex=e+t[0].length;var n=Hl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Ec.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Hl.lastIndex=e,e+=Hl.exec(this.input)[0].length,this.input[e]===";"&&e++}};Ha.eat=function(e){return this.type===e?(this.next(),!0):!1};Ha.isContextual=function(e){return this.type===G.name&&this.value===e&&!this.containsEsc};Ha.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Ha.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Ha.canInsertSemicolon=function(){return this.type===G.eof||this.type===G.braceR||Ec.test(this.input.slice(this.lastTokEnd,this.start))};Ha.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Ha.semicolon=function(){!this.eat(G.semi)&&!this.insertSemicolon()&&this.unexpected()};Ha.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Ha.expect=function(e){this.eat(e)||this.unexpected()};Ha.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var tF=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Ha.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Ha.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Ha.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Ha.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Pt=Os.prototype;Pt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==G.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var hQ={kind:"loop"},sMt={kind:"switch"};Pt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Hl.lastIndex=this.pos;var t=Hl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(qp(r,!0)){for(var i=n+1;Xw(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!K3t.test(s))return!0}return!1};Pt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Hl.lastIndex=this.pos;var e=Hl.exec(this.input),t=this.pos+e[0].length,n;return!Ec.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Xw(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Pt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=G._var,s="let"),r){case G._break:case G._continue:return this.parseBreakContinueStatement(i,r.keyword);case G._debugger:return this.parseDebuggerStatement(i);case G._do:return this.parseDoStatement(i);case G._for:return this.parseForStatement(i);case G._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case G._class:return e&&this.unexpected(),this.parseClass(i,!0);case G._if:return this.parseIfStatement(i);case G._return:return this.parseReturnStatement(i);case G._switch:return this.parseSwitchStatement(i);case G._throw:return this.parseThrowStatement(i);case G._try:return this.parseTryStatement(i);case G._const:case G._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case G._while:return this.parseWhileStatement(i);case G._with:return this.parseWithStatement(i);case G.braceL:return this.parseBlock(!0,i);case G.semi:return this.parseEmptyStatement(i);case G._export:case G._import:if(this.options.ecmaVersion>10&&r===G._import){Hl.lastIndex=this.pos;var o=Hl.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===G._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===G.name&&c.type==="Identifier"&&this.eat(G.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Pt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(G.semi)||this.insertSemicolon()?e.label=null:this.type!==G.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Pt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Pt.parseDoStatement=function(e){return this.next(),this.labels.push(hQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(G._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(G.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Pt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(hQ),this.enterScope(0),this.expect(G.parenL),this.type===G.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===G._var||this.type===G._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===G._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new tF,u=this.parseExpression(t>-1?"await":!0,a);return this.type===G._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===G._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Pt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,y2|(n?0:zV),!1,t)};Pt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(G._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Pt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(G.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Pt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(G.braceL),this.labels.push(sMt),this.enterScope(0);for(var t,n=!1;this.type!==G.braceR;)if(this.type===G._case||this.type===G._default){var r=this.type===G._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(G.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Pt.parseThrowStatement=function(e){return this.next(),Ec.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var oMt=[];Pt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?i3e:0),this.checkLValPattern(e,t?a3e:mm),this.expect(G.parenR),e};Pt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===G._catch){var t=this.startNode();this.next(),this.eat(G.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(G._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Pt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Pt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(hQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Pt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Pt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Pt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===G._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Pt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Pt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(G.braceL),e&&this.enterScope(0);this.type!==G.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Pt.parseFor=function(e,t){return e.init=t,this.expect(G.semi),e.test=this.type===G.semi?null:this.parseExpression(),this.expect(G.semi),e.update=this.type===G.parenR?null:this.parseExpression(),this.expect(G.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Pt.parseForIn=function(e,t){var n=this.type===G._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(G.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Pt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(G.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===G._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(G.comma))break}return e};Pt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?dQ:mm,!1)};var y2=1,zV=2,l3e=4;Pt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===G.star&&t&zV&&this.unexpected(),e.generator=this.eat(G.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&y2&&(e.id=t&l3e&&this.type!==G.name?null:this.parseIdent(),e.id&&!(t&zV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?dQ:mm:o3e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fQ(e.async,e.generator)),t&y2||(e.id=this.type===G.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&y2?"FunctionDeclaration":"FunctionExpression")};Pt.parseFunctionParams=function(e){this.expect(G.parenL),e.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Pt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(G.braceL);this.type!==G.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&aMt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Pt.parseClassElement=function(e){if(this.eat(G.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(G.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===G.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===G.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(G.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===G.parenL||o!=="method"||i||s){var l=!n.static&&A3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Pt.isClassElementNameStart=function(){return this.type===G.name||this.type===G.privateId||this.type===G.num||this.type===G.string||this.type===G.bracketL||this.type.keyword};Pt.parseClassElementName=function(e){this.type===G.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Pt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&A3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Pt.parseClassField=function(e){if(A3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&A3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(G.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Pt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(AI|lQ);this.type!==G.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Pt.parseClassId=function(e,t){this.type===G.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,mm,!1)):(t===!0&&this.unexpected(),e.id=null)};Pt.parseClassSuper=function(e){e.superClass=this.eat(G._extends)?this.parseExprSubscripts(null,!1):null};Pt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Pt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];CI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function aMt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function A3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Pt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==G.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Pt.parseExport=function(e,t){if(this.next(),this.eat(G.star))return this.parseExportAllDeclaration(e,t);if(this.eat(G._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==G.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Pt.parseExportDeclaration=function(e){return this.parseStatement(null)};Pt.parseExportDefaultDeclaration=function(){var e;if(this.type===G._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,y2|l3e,!1,e)}else if(this.type===G._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Pt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),CI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Pt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Pt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Pt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Pt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Pt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(G.braceL);!this.eat(G.braceR);){if(n)n=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Pt.parseImport=function(e){return this.next(),this.type===G.string?(e.specifiers=oMt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===G.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Pt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,mm),this.finishNode(e,"ImportSpecifier")};Pt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,mm),this.finishNode(e,"ImportDefaultSpecifier")};Pt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,mm),this.finishNode(e,"ImportNamespaceSpecifier")};Pt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===G.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(G.comma)))return e;if(this.type===G.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(G.braceL);!this.eat(G.braceR);){if(t)t=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;e.push(this.parseImportSpecifier())}return e};Pt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===G.string){var e=this.parseLiteral(this.value);return tMt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Pt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Pt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var xc=Os.prototype;xc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};xc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};xc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};xc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==G.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};xc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case G.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(G.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case G.braceL:return this.parseObj(!0)}return this.parseIdent()};xc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(G.comma),t&&this.type===G.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===G.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===G.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};xc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};xc.parseBindingListItem=function(e){return e};xc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(G.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};xc.checkLValSimple=function(e,t,n){t===void 0&&(t=C3);var r=t!==C3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===mm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(CI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==u3e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};xc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=C3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};xc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=C3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var kc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},mi={b_stat:new kc("{",!1),b_expr:new kc("{",!0),b_tmpl:new kc("${",!1),p_stat:new kc("(",!1),p_expr:new kc("(",!0),q_tmpl:new kc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new kc("function",!1),f_expr:new kc("function",!0),f_expr_gen:new kc("function",!0,!1,null,!0),f_gen:new kc("function",!1,!1,null,!0)},ux=Os.prototype;ux.initialContext=function(){return[mi.b_stat]};ux.curContext=function(){return this.context[this.context.length-1]};ux.braceIsBlock=function(e){var t=this.curContext();return t===mi.f_expr||t===mi.f_stat?!0:e===G.colon&&(t===mi.b_stat||t===mi.b_expr)?!t.isExpr:e===G._return||e===G.name&&this.exprAllowed?Ec.test(this.input.slice(this.lastTokEnd,this.start)):e===G._else||e===G.semi||e===G.eof||e===G.parenR||e===G.arrow?!0:e===G.braceL?t===mi.b_stat:e===G._var||e===G._const||e===G.name?!1:!this.exprAllowed};ux.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};ux.updateContext=function(e){var t,n=this.type;n.keyword&&e===G.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};ux.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};G.parenR.updateContext=G.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===mi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};G.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?mi.b_stat:mi.b_expr),this.exprAllowed=!0};G.dollarBraceL.updateContext=function(){this.context.push(mi.b_tmpl),this.exprAllowed=!0};G.parenL.updateContext=function(e){var t=e===G._if||e===G._for||e===G._with||e===G._while;this.context.push(t?mi.p_stat:mi.p_expr),this.exprAllowed=!0};G.incDec.updateContext=function(){};G._function.updateContext=G._class.updateContext=function(e){e.beforeExpr&&e!==G._else&&!(e===G.semi&&this.curContext()!==mi.p_stat)&&!(e===G._return&&Ec.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===G.colon||e===G.braceL)&&this.curContext()===mi.b_stat)?this.context.push(mi.f_expr):this.context.push(mi.f_stat),this.exprAllowed=!1};G.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};G.backQuote.updateContext=function(){this.curContext()===mi.q_tmpl?this.context.pop():this.context.push(mi.q_tmpl),this.exprAllowed=!1};G.star.updateContext=function(e){if(e===G._function){var t=this.context.length-1;this.context[t]===mi.f_expr?this.context[t]=mi.f_expr_gen:this.context[t]=mi.f_gen}this.exprAllowed=!0};G.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==G.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kt=Os.prototype;Kt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kt.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===G.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(G.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new tF,r=!0);var a=this.start,u=this.startLoc;(this.type===G.parenL||this.type===G.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===G.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===G.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kt.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(G.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(G.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kt.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kt.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==G._in)&&s>r){var o=this.type===G.logicalOR||this.type===G.logicalAND,a=this.type===G.coalesce;a&&(s=G.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===G.coalesce||a&&(this.type===G.logicalOR||this.type===G.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kt.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kt.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===G.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&c3e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===G.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==G._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(G.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function c3e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&c3e(e.expression)}Kt.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kt.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(G.arrow)};Kt.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kt.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(G.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(G.bracketL);if(l||u&&this.type!==G.parenL&&this.type!==G.backQuote||this.eat(G.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(G.bracketR)):this.type===G.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(G.parenL)){var f=new tF,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===G.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kt.parseExprAtom=function(e,t,n){this.type===G.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case G._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===G.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==G.dot&&this.type!==G.bracketL&&this.type!==G.parenL&&this.unexpected(),this.finishNode(r,"Super");case G._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case G.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(G._function))return this.overrideContext(mi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(G.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===G.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(G.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case G.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case G.num:case G.string:return this.parseLiteral(this.value);case G._null:case G._true:case G._false:return r=this.startNode(),r.value=this.type===G._null?null:this.type===G._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case G.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case G.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(G.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case G.braceL:return this.overrideContext(mi.b_expr),this.parseObj(!1,e);case G._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case G._class:return this.parseClass(this.startNode(),!1);case G._new:return this.parseNew();case G.backQuote:return this.parseTemplate();case G._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kt.parseExprAtomDefault=function(){this.unexpected()};Kt.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===G.parenL&&!e)return this.parseDynamicImport(t);if(this.type===G.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};Kt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(G.parenR)){var t=this.start;this.eat(G.comma)&&this.eat(G.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kt.parseParenExpression=function(){this.expect(G.parenL);var e=this.parseExpression();return this.expect(G.parenR),e};Kt.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new tF,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==G.parenR;)if(l?l=!1:this.expect(G.comma),s&&this.afterTrailingComma(G.parenR,!0)){c=!0;break}else if(this.type===G.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===G.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(G.parenR),e&&this.shouldParseArrow(u)&&this.eat(G.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kt.parseParenItem=function(e){return e};Kt.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var uMt=[];Kt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===G.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(G.parenL)?e.arguments=this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1):e.arguments=uMt,this.finishNode(e,"NewExpression")};Kt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===G.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===G.backQuote,this.finishNode(n,"TemplateElement")};Kt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===G.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(G.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(G.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===G.name||this.type===G.num||this.type===G.string||this.type===G.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===G.star)&&!Ec.test(this.input.slice(this.lastTokEnd,this.start))};Kt.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(G.braceR);){if(r)r=!1;else if(this.expect(G.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(G.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kt.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(G.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===G.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===G.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(G.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(G.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kt.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kt.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===G.colon&&this.unexpected(),this.eat(G.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===G.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==G.comma&&this.type!==G.braceR&&this.type!==G.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===G.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(G.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(G.bracketR),e.key;e.computed=!1}return e.key=this.type===G.num||this.type===G.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kt.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fQ(t,r.generator)|lQ|(n?s3e:0)),this.expect(G.parenL),r.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kt.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(fQ(n,!1)|r3e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kt.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==G.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,u3e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kt.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,dQ,t?null:n)}};Kt.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(G.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===G.comma?o=null:this.type===G.ellipsis?(o=this.parseSpread(r),r&&this.type===G.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kt.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kt.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kt.parseIdentNode=function(){var e=this.startNode();return this.type===G.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=G.name):this.unexpected(),e};Kt.parsePrivateIdent=function(){var e=this.startNode();return this.type===G.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===G.semi||this.canInsertSemicolon()||this.type!==G.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(G.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var I3=Os.prototype;I3.raise=function(e,t){var n=t3e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};I3.raiseRecoverable=I3.raise;I3.curPosition=function(){if(this.options.locations)return new FC(this.curLine,this.pos-this.lineStart)};var Y0=Os.prototype,lMt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Y0.enterScope=function(e){this.scopeStack.push(new lMt(e))};Y0.exitScope=function(){this.scopeStack.pop()};Y0.treatFunctionsAsVarInScope=function(e){return e.flags&ax||!this.inModule&&e.flags&jC};Y0.declareName=function(e,t,n){var r=!1;if(t===mm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&jC&&delete this.undefinedExports[e]}else if(t===a3e){var s=this.currentScope();s.lexical.push(e)}else if(t===o3e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&i3e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&jC&&delete this.undefinedExports[e],u.flags&cQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Y0.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Y0.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Y0.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&cQ)return t}};Y0.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&cQ&&!(t.flags&r3e))return t}};var nF=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new eF(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},II=Os.prototype;II.startNode=function(){return new nF(this,this.start,this.startLoc)};II.startNodeAt=function(e,t){return new nF(this,e,t)};function f3e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}II.finishNode=function(e,t){return f3e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};II.finishNodeAt=function(e,t,n,r){return f3e.call(this,e,t,n,r)};II.copyNode=function(e){var t=new nF(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var d3e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",h3e=d3e+" Extended_Pictographic",p3e=h3e,m3e=p3e+" EBase EComp EMod EPres ExtPict",g3e=m3e,cMt=g3e,fMt={9:d3e,10:h3e,11:p3e,12:m3e,13:g3e,14:cMt},dMt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",hMt={9:"",10:"",11:"",12:"",13:"",14:dMt},mme="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",y3e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",v3e=y3e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",_3e=v3e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",b3e=_3e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",w3e=b3e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",pMt=w3e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",mMt={9:y3e,10:v3e,11:_3e,12:b3e,13:w3e,14:pMt},E3e={};function gMt(e){var t=E3e[e]={binary:fg(fMt[e]+" "+mme),binaryOfStrings:fg(hMt[e]),nonBinary:{General_Category:fg(mme),Script:fg(mMt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var pB=0,gme=[9,10,11,12,13,14];pB<gme.length;pB+=1){var yMt=gme[pB];gMt(yMt)}var Et=Os.prototype,hh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=E3e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};hh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};hh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};hh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};hh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};hh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};hh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};hh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};hh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};hh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Et.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Et.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Et.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Et.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Et.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Et.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Et.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Et.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Et.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Et.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Et.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Et.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Et.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Et.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Et.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Et.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Et.regexp_eatSyntaxCharacter=function(e){var t=e.current();return x3e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function x3e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Et.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!x3e(n);)e.advance();return e.pos!==t};Et.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Et.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Et.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Et.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=f0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=f0(e.lastIntValue);return!0}return!1};Et.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),vMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function vMt(e){return qp(e,!0)||e===36||e===95}Et.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),_Mt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function _Mt(e){return Xw(e,!0)||e===36||e===95||e===8204||e===8205}Et.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Et.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Et.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Et.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Et.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Et.regexp_eatZero=function(e){return e.current()===48&&!rF(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Et.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Et.regexp_eatControlLetter=function(e){var t=e.current();return S3e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function S3e(e){return e>=65&&e<=90||e>=97&&e<=122}Et.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&bMt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function bMt(e){return e>=0&&e<=1114111}Et.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Et.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var T3e=0,Wp=1,Wl=2;Et.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(wMt(t))return e.lastIntValue=-1,e.advance(),Wp;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Wl&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return T3e};function wMt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Et.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Wp}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return T3e};Et.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){CI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Et.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Wp;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Wl;e.raise("Invalid property name")};Et.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";C3e(t=e.current());)e.lastStringValue+=f0(t),e.advance();return e.lastStringValue!==""};function C3e(e){return S3e(e)||e===95}Et.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";EMt(t=e.current());)e.lastStringValue+=f0(t),e.advance();return e.lastStringValue!==""};function EMt(e){return C3e(e)||rF(e)}Et.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Et.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Wl&&e.raise("Negated character class may contain strings"),!0}return!1};Et.regexp_classContents=function(e){return e.current()===93?Wp:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Wp)};Et.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Et.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||O3e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Et.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Et.regexp_classSetExpression=function(e){var t=Wp,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Wl&&(t=Wl);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Wl&&(t=Wp);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Wl&&(t=Wl)}};Et.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Et.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Wp:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Et.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Wl&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Et.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Et.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Wl&&(t=Wl);return t};Et.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Wp:Wl};Et.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&xMt(n)||SMt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function xMt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function SMt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Et.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return TMt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function TMt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Et.regexp_eatClassControlLetter=function(e){var t=e.current();return rF(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Et.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Et.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;rF(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function rF(e){return e>=48&&e<=57}Et.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;A3e(n=e.current());)e.lastIntValue=16*e.lastIntValue+I3e(n),e.advance();return e.pos!==t};function A3e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function I3e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Et.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Et.regexp_eatOctalDigit=function(e){var t=e.current();return O3e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function O3e(e){return e>=48&&e<=55}Et.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!A3e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+I3e(i),e.advance()}return!0};var pQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new eF(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nn=Os.prototype;Nn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new pQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Nn.getToken=function(){return this.next(),new pQ(this)};typeof Symbol<"u"&&(Nn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===G.eof,value:t}}}});Nn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(G.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Nn.readToken=function(e){return qp(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Nn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Nn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=JDe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Nn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!ox(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Nn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&ZDe.test(String.fromCharCode(e)))++this.pos;else break e}}};Nn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Nn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(G.ellipsis)):(++this.pos,this.finishToken(G.dot))};Nn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(G.assign,2):this.finishOp(G.slash,1)};Nn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?G.star:G.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=G.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(G.assign,n+1):this.finishOp(r,n)};Nn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(G.assign,3)}return this.finishOp(e===124?G.logicalOR:G.logicalAND,2)}return t===61?this.finishOp(G.assign,2):this.finishOp(e===124?G.bitwiseOR:G.bitwiseAND,1)};Nn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(G.assign,2):this.finishOp(G.bitwiseXOR,1)};Nn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ec.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(G.incDec,2):t===61?this.finishOp(G.assign,2):this.finishOp(G.plusMin,1)};Nn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(G.assign,n+1):this.finishOp(G.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(G.relational,n))};Nn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(G.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(G.arrow)):this.finishOp(e===61?G.eq:G.prefix,1)};Nn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(G.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(G.assign,3)}return this.finishOp(G.coalesce,2)}}return this.finishOp(G.question,1)};Nn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),qp(t,!0)||t===92))return this.finishToken(G.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+f0(t)+"'")};Nn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(G.parenL);case 41:return++this.pos,this.finishToken(G.parenR);case 59:return++this.pos,this.finishToken(G.semi);case 44:return++this.pos,this.finishToken(G.comma);case 91:return++this.pos,this.finishToken(G.bracketL);case 93:return++this.pos,this.finishToken(G.bracketR);case 123:return++this.pos,this.finishToken(G.braceL);case 125:return++this.pos,this.finishToken(G.braceR);case 58:return++this.pos,this.finishToken(G.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(G.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(G.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+f0(e)+"'")};Nn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Nn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Ec.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new hh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(G.regexp,{pattern:i,flags:o,value:u})};Nn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function CMt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function P3e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Nn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=P3e(this.input.slice(t,this.pos)),++this.pos):qp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(G.num,n)};Nn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=P3e(this.input.slice(t,this.pos));return++this.pos,qp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(G.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),qp(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=CMt(this.input.slice(t,this.pos),n);return this.finishToken(G.num,s)};Nn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Nn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(ox(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(G.string,t)};var k3e={};Nn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===k3e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Nn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw k3e;this.raise(e,t)};Nn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===G.template||this.type===G.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(G.dollarBraceL)):(++this.pos,this.finishToken(G.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(G.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(ox(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Nn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(G.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Nn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return f0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return ox(t)?"":String.fromCharCode(t)}};Nn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Nn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Xw(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?qp:Xw)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=f0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Nn.readWord=function(){var e=this.readWord1(),t=G.name;return this.keywords.test(e)&&(t=aQ[e]),this.finishToken(t,e)};var AMt="8.11.2";Os.acorn={Parser:Os,version:AMt,defaultOptions:BV,Position:FC,SourceLocation:eF,getLineInfo:t3e,Node:nF,TokenType:Kn,tokTypes:G,keywordTypes:aQ,TokContext:kc,tokContexts:mi,isIdentifierChar:Xw,isIdentifierStart:qp,Token:pQ,isNewLine:ox,lineBreak:Ec,lineBreakG:J3t,nonASCIIwhitespace:ZDe};function IMt(e,t){return Os.parse(e,t)}const mQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},OMt={ecmaVersion:11},yme="$",PMt="d",kMt="d1",$Mt="d2",uo=e=>(t,n)=>n.error(t,e+" not allowed"),RMt=uo("Aggregate function"),NMt=uo("Window function"),DMt="Invalid argument",gQ="Invalid column reference",MMt=gQ+" (must be input to an aggregate function)",$3e="Invalid function call",LMt="Invalid member expression",FMt="Invalid operator parameter",jMt="Invalid param reference",BMt="Invalid variable reference",zMt="Variable not accessible in operator call",UMt="Unsupported variable declaration",VMt="Unsupported destructuring pattern",R3e="Table expressions do not support closures",N3e="Use aq.escape(fn) to use a function as-is (including closures)",HMt="use table.params({ name: value }) to define dynamic parameters",qMt="use aq.addFunction(name, fn) to add new op functions",WMt=`
Note: ${R3e}. ${N3e}, or ${HMt}.`,D3e=`
Note: ${R3e}. ${N3e}, or ${qMt}.`,GMt=`The ${qRe} method is not valid in multi-table expressions.`;function YMt(e,t){const n=KMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,U3t(r)?(QMt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=kMt),e.scope.add(e.tuple2=$Mt),e.scope.add(e.$param=yme)):(e.scope.add(e.tuple=PMt),e.scope.add(e.$param=yme)),Wn(r,e,yQ),e.root}function KMt(e){try{const t=e.field?XMt(e):nr(e)?qd(e):e;return IMt(`expr=(${t})`,OMt).body[0].expression.right}catch{vn(`Expression parse error: ${e+""}`)}}function XMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const yQ={FunctionDeclaration:uo("Function definitions"),ForStatement:uo("For loops"),ForOfStatement:uo("For-of loops"),ForInStatement:uo("For-in loops"),WhileStatement:uo("While loops"),DoWhileStatement:uo("Do-while loops"),AwaitExpression:uo("Await expressions"),ArrowFunctionExpression:uo("Function definitions"),AssignmentExpression:uo("Assignments"),FunctionExpression:uo("Function definitions"),NewExpression:uo('Use of "new"'),UpdateExpression:uo("Update expressions"),VariableDeclarator(e,t){HV(e.id,t)},Identifier(e,t,n){F3e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,BMt,WMt)},CallExpression(e,t){const n=M3e(e.callee),r=URe(n)||VRe(n);if(r){if((t.join||t.aggregate===!1)&&aX(n)&&RMt(e,t),(t.join||t.window===!1)&&uX(n)&&NMt(e,t),t.$op=1,t.ast)VV(e,n,t),e.arguments.forEach(i=>Wn(i,t,UV));else{const i=t.op(JMt(t,r,n,e.arguments));Object.assign(e,{type:LRe,name:i.id})}return t.$op=0,!1}else zRe(n)?VV(e,n,t):t.error(e,$3e,D3e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!_s(Mg,r))return;const{name:s}=r;if(L3e(e)&&_s(Mg,i)&&mf(mQ,i.name)){z3e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return vme(e,o,t,j3e,n);if(s===t.$param)return vme(e,o,t,eLt);t.paramsRef.has(s)?BC(e,t.paramsRef.get(s)):t.columnRef.has(s)?B3e(r,s,t,e):mf(t.params,s)&&BC(r,s)}};function vme(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(_s(nx,s))a=s.value;else try{Wn(s,n,yQ,e),a=n.param(s)}catch{n.error(e,LMt)}return r(e,a,t,n,i),!1}const UV={...yQ,VariableDeclarator:uo("Variable declaration in operator call"),Identifier(e,t,n){F3e(e,t,n)&&t.error(e,zMt)},CallExpression(e,t){const n=M3e(e.callee);zRe(n)?VV(e,n,t):t.error(e,$3e,D3e)}};function QMt(e,t){e.generator&&uo("Generator functions")(e,t),e.async&&uo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(TS(t,n[0],"tuple1",i(1)),r>1&&TS(t,n[1],"tuple2",i(2)),r>2&&TS(t,n[2],"$param",s)):(TS(t,n[0],"tuple",i(0)),r>1&&TS(t,n[1],"$param",s))),t.root=e.body}function TS(e,t,n,r){_s(Mg,t)?(e.scope.add(t.name),e[n]=t.name):_s(DRe,t)&&t.properties.forEach(i=>{const s=_s(Mg,i.key)?i.key.name:_s(nx,i.key)?i.key.value:e.error(i,DMt);_s(Mg,i.value)||e.error(i.value,VMt),r(i.value.name,s)})}function JMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Wn(u,e,UV),i.push(e.field(u))):l<a?(Wn(u,e,UV),s.push(e.param(u))):e.error(u,FMt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function M3e(e){return _s(Mg,e)?e.name:_s(NRe,e)?L3e(e)?ZMt(e.property.name):e.property.name:null}function L3e(e){return _s(Mg,e.object)&&e.object.name==="Math"}function ZMt(e){return e==="max"?"greatest":e==="min"?"least":e}function F3e(e,t,n){const{name:r}=e;if(!(_s(NRe,n)&&n.property===e)){if(!(_s(MRe,n)&&n.key===e))if(t.paramsRef.has(r))BC(e,t.paramsRef.get(r));else if(t.columnRef.has(r))B3e(e,r,t,n);else if(mf(t.params,r))BC(e,r);else if(mf(mQ,r))z3e(e,r);else return!0}}function j3e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,gQ),r.aggronly&&!r.$op&&r.error(e,MMt),HRe(e,t,n,o,i)}function B3e(e,t,n,r){const[i,s]=n.columnRef.get(t);j3e(e,i,s,n,r)}function eLt(e,t,n,r){r.params&&!mf(r.params,t)&&r.error(e,jMt),BC(e,t)}function BC(e,t){e.type=q$t,e.name=t}function z3e(e,t){e.type=U$t,e.name=t,e.raw=mQ[t]}function VV(e,t,n){if(t===qRe){const r=n.table;r||n.error(e,GMt),WRe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ma(s)?r.columnName(s):s;return r.column(o)||n.error(i,gQ),o}):r.columnNames())}else e.callee={type:H$t,name:t}}function HV(e,t){_s(Mg,e)?t.scope.add(e.name):_s(F$t,e)?e.elements.forEach(n=>HV(n,t)):_s(DRe,e)?e.properties.forEach(n=>HV(n.value,t)):t.error(e.id,UMt)}const tLt={[wI]:1,[LRe]:1};function Cu(e,t={}){const n=t.generate||u3,r=t.compiler||lX,i=rLt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=nLt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return _s(nx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?z3t(g):f(n(g),i));u.push(y),tLt[g.type]&&y!==g&&aa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,b=String(d.spec).slice(v,_);vn(`${g}: "${b}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of B4(e))d.value(m+"",g.escape?q3t(d,g,i):YMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function nLt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function rLt(e){return(e.table?mB(e.table):e.join?{...mB(e.join[1]),...mB(e.join[0])}:{})||{}}function mB(e){return e&&ri(e.params)?e.params():{}}const U3e="Expr",$c="ExprList",V3e="ExprNumber",vT="ExprObject",bb="JoinKeys",O3="JoinValues",Ml="Options",vQ="OrderKeys",Mm="SelectionList",Hy="TableRef",wb="TableRefList",iLt="Descending",sLt="Query",oLt="Selection",aLt="Verb",uLt="Window";function iF(e,t){return e&&e.expr?new _me({...e,...t}):new _me(t,e)}class _me{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ri(this.expr)?{func:!0}:{}}}}function lLt(e){return iF(e,{desc:!0})}function rv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return iF(e,t?{expr:t,...r}:r)}function cLt(e,t,n){return iF(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function fLt(e){const t=n=>n;return t.toString=()=>e,t}function bme(e,t){return t=t&&ri(t.query)?t.query():t,t&&ri(t.evaluate)?t.evaluate(null,e):e(t)}function H3e(e){return aa(e)&&(nr(e.all)||nr(e.matches)||nr(e.not)||nr(e.range))}function zC(e){return e&&ri(e.toObject)?e.toObject():ri(e)?{expr:String(e),func:!0}:nr(e)?e.map(zC):aa(e)?J4(e,t=>zC(t)):e}function _Q(e){return nr(e)?e.map(_Q):aa(e)?nr(e.verbs)?wQ.from(e):nr(e.all)?Kw():nr(e.range)?M3t(...e.range):nr(e.match)?L3t(RegExp(...e.match)):nr(e.not)?YDe(e.not.map(zC)):dLt(e):e}function dLt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=rv(n):e.func===!0&&(t=n=fLt(n)),aa(e.window)){const{frame:r,peers:i}=e.window;t=n=cLt(n,r,i)}e.desc===!0&&(t=lLt(n))}return e===t?J4(e,r=>_Q(r)):t}function hLt(e){return nr(e)?e.map(pLt):e}function pLt(e){const t=[];return Su(e).forEach(n=>{Ma(n)?t.push(n):Io(n)?t.push(rv(n,null)):aa(n)&&n.expr||ri(n)?t.push(n):vn(`Invalid key value: ${n+""}`)}),t}function mLt(e){return nr(e)?e.map(gLt):e}function gLt(e,t){return t<2?Su(e):e}function yLt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(aa(r)&&!ri(r))for(const i in r)t.push(r[i]);else n=Ma(r)?r:Io(r)?rv(n):ri(r)?n:vn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const vLt={[U3e]:Y3e,[$c]:Qw,[V3e]:SLt,[vT]:d0,[bb]:TLt,[O3]:CLt,[vQ]:Qw,[Mm]:ELt};function _Lt(e,t,n){return t===Hy?wme(e):t===wb?e.map(wme):q3e(zC(e),t,n)}function q3e(e,t,n){return t===Ml?e&&bLt(e,n):vLt[t](e)}function bLt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?q3e(i,t[r]):i}return n}function wLt(e,t){return Cu({expr:e},{...t,ast:!0}).exprs[0]}function bQ(e){return{type:wI,name:e}}function W3e(e){return{type:wI,index:e}}function d0(e,t){if(Io(e))return wLt(e,t);if(e.expr){let n;if(e.field===!0?n=bQ(e.expr):e.func===!0&&(n=d0(e.expr,t)),n)return e.desc&&(n={type:iLt,expr:n}),e.window&&(n={type:uLt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...d0(e[n],t),as:n}))}function G3e(e){const t=oLt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Qw(e.not)}:e.range?{type:t,operator:"range",arguments:Qw(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:vn("Invalid input")}function ELt(e){return Su(e).map(xLt).flat()}function xLt(e){return H3e(e)?G3e(e):Ma(e)?W3e(e):Io(e)?bQ(e):aa(e)?Object.keys(e).map(t=>({type:wI,name:t,as:e[t]})):vn("Invalid input")}function Y3e(e){return H3e(e)?G3e(e):Ma(e)?W3e(e):Io(e)?bQ(e):aa(e)?d0(e):vn("Invalid input")}function Qw(e){return Su(e).map(Y3e).flat()}function SLt(e){return Ma(e)?e:d0(e)}function TLt(e){return nr(e)?e.map(Qw):d0(e,{join:!0})}function CLt(e){return nr(e)?e.map((t,n)=>n<2?Qw(t):d0(t,{join:!0})):d0(e,{join:!0})}function wme(e){return e&&ri(e.toAST)?e.toAST():e}class K3e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===bb?hLt(a):o===O3?mLt(a):o===vQ?yLt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=qV[t.verb],r=(n.schema||[]).map(({name:i})=>_Q(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Hy?bme(n,o):s===wb?o.map(a=>bme(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=zC(this[n])}),t}toAST(){const t={type:aLt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=_Lt(this[n],r,i)}),t}}function Cr(e,t){return Object.assign((...n)=>new K3e(e,t,n),{schema:t})}const qV={count:Cr("count",[{name:"options",type:Ml}]),derive:Cr("derive",[{name:"values",type:vT},{name:"options",type:Ml,props:{before:Mm,after:Mm}}]),filter:Cr("filter",[{name:"criteria",type:vT}]),groupby:Cr("groupby",[{name:"keys",type:$c}]),orderby:Cr("orderby",[{name:"keys",type:vQ}]),relocate:Cr("relocate",[{name:"columns",type:Mm},{name:"options",type:Ml,props:{before:Mm,after:Mm}}]),rename:Cr("rename",[{name:"columns",type:Mm}]),rollup:Cr("rollup",[{name:"values",type:vT}]),sample:Cr("sample",[{name:"size",type:V3e},{name:"options",type:Ml,props:{weight:U3e}}]),select:Cr("select",[{name:"columns",type:Mm}]),ungroup:Cr("ungroup"),unorder:Cr("unorder"),reify:Cr("reify"),dedupe:Cr("dedupe",[{name:"keys",type:$c,default:[]}]),impute:Cr("impute",[{name:"values",type:vT},{name:"options",type:Ml,props:{expand:$c}}]),fold:Cr("fold",[{name:"values",type:$c},{name:"options",type:Ml}]),pivot:Cr("pivot",[{name:"keys",type:$c},{name:"values",type:$c},{name:"options",type:Ml}]),spread:Cr("spread",[{name:"values",type:$c},{name:"options",type:Ml}]),unroll:Cr("unroll",[{name:"values",type:$c},{name:"options",type:Ml,props:{drop:$c}}]),lookup:Cr("lookup",[{name:"table",type:Hy},{name:"on",type:bb},{name:"values",type:$c}]),join:Cr("join",[{name:"table",type:Hy},{name:"on",type:bb},{name:"values",type:O3},{name:"options",type:Ml}]),cross:Cr("cross",[{name:"table",type:Hy},{name:"values",type:O3},{name:"options",type:Ml}]),semijoin:Cr("semijoin",[{name:"table",type:Hy},{name:"on",type:bb}]),antijoin:Cr("antijoin",[{name:"table",type:Hy},{name:"on",type:bb}]),concat:Cr("concat",[{name:"tables",type:wb}]),union:Cr("union",[{name:"tables",type:wb}]),intersect:Cr("intersect",[{name:"tables",type:wb}]),except:Cr("except",[{name:"tables",type:wb}])};let wQ=class X3e extends wRe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new X3e(t.map(K3e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Eme(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Eme(this,"toAST",{type:sLt})}};function Eme(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function ALt(e,t){return new wQ(e._verbs.concat(t),e._params,e._table)}for(const e in qV){const t=qV[e];wQ.prototype["__"+e]=function(n,...r){return ALt(n,t(...r))}}function lx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function ILt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function EQ(e,t){const n=Cl();return t.forEach((r,i)=>{const s=Io(r)?r:i;if(s){const o=e.column(i)||vn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function Q3e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||vn("relocate requires a before or after option."),i&&s&&vn("relocate accepts only one of the before or after options."),t=Hp(e,t);const o=[...Hp(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),EQ(e,u)}function OI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function xQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function OLt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function PLt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function UP(e){return $C(e)?e:+e}function kLt(e,t){const n=e.length;if(!n)return Xn;if((t=+t)<=0||n<2)return UP(e[0]);if(t>=1)return UP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=UP(e[i]);return $C(s)?s:s+(UP(e[i+1])-s)*(r-i)}class $Lt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:OLt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:PLt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(xQ)),kLt(this._sorted,t)}}const P3=(e,t,n)=>lx(t,"{"+OI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function RLt(e,t){const{ops:n,output:r}=NLt(e,t),i=e[0].fields,s=i.length,o=s===0?SQ:s===1?DLt:s===2?MLt:vn("Unsupported field count: "+s);return new o(i,n,r,t)}function NLt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=URe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class SQ extends j3t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new $Lt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class DLt extends SQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=P3(n,s,"add"),this._rem=P3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Jc(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Jc(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class MLt extends SQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=P3(n,s,"add"),this._rem=P3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Jc(i)&&Jc(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Jc(i)&&Jc(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Xv(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=cx(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function cx(e,t,n){if(!t.length)return n;const r=J3e(t),i=e.groups(),s=i?i.size:1;return n=n||F4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=eMe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=Z3e(e,o);o.write(a,n,0)}),n}function J3e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(RLt(r[i],t));return n}function Z3e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function eMe(e,t,n){const{keys:r,size:i}=n,s=F4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function tMe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function nMe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const xme=nMe(xQ);function LLt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?lx(["w","r","k"],"{"+OI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,b=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=xme.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=xme.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const w=i[E],x=a[E];for(let S=_;S<p.i0;++S)w.rem(x,s[S],e);for(let S=b;S<p.i1;++S)w.add(x,s[S],e);w.write(x,u,l)}return h(p,u,l),u}};return p}const FLt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),jLt=e=>!!e.peers;function BLt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=VRe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function zLt(e,t,n,r={},i){const s=e.data(),o=ULt(i,s),a=o.length,u=lx(["r","d","op"],"{"+OI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=VLt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function ULt(e,t){const n={};return e.forEach(r=>{const i=FLt(r),s=jLt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});aX(r.name)?a.push(r):u.push(BLt(r))}),Object.values(n).map(r=>LLt(t,r.frame,r.peers,r.winOps,J3e(r.aggOps,r.frame[0]!=null?-1:1)))}function VLt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function HLt(e){return uX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function TQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Cl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=qLt(r),c=e.isGrouped()?e.groups().size:1,f=cx(e,u,F4(r.length,()=>Array(c)));return l.length?zLt(e,a,n,f,l):WLt(e,a,n,f),e.create(o)}function qLt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(HLt(s)?n:t).push(s)}return[t,n]}function WLt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function GLt(e,t,n={}){const r=TQ(e,Cu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:Q3e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function YLt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const VP=2147483648,KLt=4294967295;class rMe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&VP>>>t}set(t){this._bits[t>>5]|=VP>>>t}clear(t){this._bits[t>>5]&=~(VP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&KLt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=VP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function XLt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new rMe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function QLt(e,t){const n=Cu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=TQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return XLt(e,r)}function iMe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Xv(e,r,n),l=Cl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(b=>{if(!a.has(b)){const E=l.add(b,[]);c.has(b)||(f.push(e.column(b)),d.push(E))}}),t.forEach(b=>{a.has(b)||(l.has(b)||l.add(b,[]),h.push(l.data[b]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(b,E)=>{for(let w=0;w<g;++w)d[w].length=m+E,d[w].fill(f[w].get(b),m,m+E)},_=p?(b,E)=>{for(let w=0;w<E;++w)p[b+w]=w}:()=>{};if(y===1){const b=u[0],E=h[0];e.scan((w,x)=>{const S=Su(b(w,x)),P=Math.min(S.length,s);v(w,P);for(let A=0;A<P;++A)E[m+A]=S[A];_(m,P),m+=P})}else e.scan((b,E)=>{let w=0;const x=u.map(S=>{const P=Su(S(b,E));return w=Math.min(Math.max(w,P.length),s),P});v(b,w);for(let S=0;S<y;++S){const P=h[S],A=x[S];for(let O=0;O<w;++O)P[m+O]=A[O]}_(m,w),m+=w});return e.create(l.new())}function JLt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Xv(e,r,n);return iMe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function gf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ma(o)?t.columnName(o):o,Io(o)?i.set(o,rv(o)):ri(o)?Hp(t,o).forEach(s):aa(o)?WDe(i,o):vn(`Invalid ${e} value: ${o+""}`)};return Su(n).forEach(s),r.preparse&&r.preparse(i),Cu(i,{table:t,...r})}function ZLt(e,t,n){return JLt(e,gf("fold",e,t),n)}function Sme(e,t,n,r){const i=n&&n.length;return e6t(i?t6t(e,n,r):e,t,i)}function e6t(e,{names:t,exprs:n,ops:r},i){const s=Xv(e,r,n),o=i?null:Cl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Jc(p)?p:d(h)})}),i?e:e.create(o)}function t6t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=l3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Cl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=l3(o.map((p,m)=>g=>g[m])),h=lx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Tme(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Tme(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Tme(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function CQ(e,{names:t,exprs:n,ops:r}){const i=Cl(),s=e.groups();return s&&tMe(i,s),n6t(t,n,s,cx(e,r),i),e.create(i.new())}function n6t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function r6t(e,t,n={}){if(t=Cu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:vn(`Invalid impute column ${qd(r)}`)),n.expand){const r={preparse:i6t,aggronly:!0},i=gf("impute",e,n.expand,r),s=CQ(e.ungroup(),i);return Sme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Sme(e,t)}function i6t(e){e.forEach((t,n)=>t.field?e.set(n,PRe(t+"")):0)}function s6t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function sMe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function o6t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function a6t(e,t){const n=["i","a","j","b"];return lx(n,"{"+OI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function u6t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Cl(),g=Array(p),y=Array(p);for(let b=0;b<r.length;++b)g[b]=m.add(r[b],[]),y[b]=i[b];const v=a6t(g,y);if((nr(n)?c6t:l6t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let b=0;b<u;++b)l[b]||v(a[b],o,-1,c);if(s.right)for(let b=0;b<d;++b)h[b]||v(-1,o,f[b],c);return e.create(m.new())}function l6t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function c6t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(w,x,S,P)=>e(S,P,w,x));const b=o6t(v,m,g),E=p.length;for(let w=0;w<E;++w){const x=p[w],S=b.get(d(x,f));if(S){const P=S.length;for(let A=0;A<P;++A){const O=S[A];_(x,f,v[O],m),y[O]=1}h[w]=1}}}function k3(e,t,n){const r=new Map;Su(n).forEach((s,o)=>{s=Ma(s)?t.columnName(s):s,Io(s)?r.set(o,rv(s)):ri(s)||aa(s)&&s.expr?r.set(o,s):vn(`Invalid ${e} key value: ${s+""}`)});const i=Cu(r,{table:t,aggregate:!1,window:!1});return l3(i.exprs,!0)}function f6t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function AQ(e,t,n){if(n)Io(n)?n=[n,n]:nr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=f6t(e.columnNames(),t.columnNames());r.length||vn("Natural join requires shared column names."),n=[r,r]}return n}function oMe(e,t,n,r){return n.length!==r.length&&vn("Mismatched number of join keys"),[k3("join",e,n),k3("join",t,r)]}const d6t={aggregate:!1,window:!1},h6t={...d6t,index:1};function Cme(e,t,n,r,i={}){n=AQ(e,t,n);const s={join:[e,t]};let o;if(nr(n)){const[a,u]=n.map(Su);o=oMe(e,t,a,u),r||(r=p6t(e,a,u,i))}else o=Cu({on:n},s).exprs[0],r||(r=[Kw(),Kw()]);return u6t(e,t,o,m6t(e,t,r,s,i&&i.suffix),i)}function p6t(e,t,n,r){const i=[];t.forEach((o,a)=>Io(o)&&o===n[a]?i.push(o):0);const s=YDe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${qd(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,Kw()]:[Kw(),s]}function m6t(e,t,n,r,i=[]){if(nr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=gf("join",e,n[0],r)),u--&&(o=gf("join",t,n[1],h6t)),u--&&(a=Cu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(Ame(s.names,l,i[0]||"_1"),Ame(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Cu(n,r)}function Ame(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function g6t(e,t,n,r={}){const i=new rMe(e.totalRows());return(nr(n)?y6t:v6t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function y6t(e,t,n,[r,i]){const s=sMe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function v6t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Ime(e,t,n,r){n=AQ(e,t,n);const i=nr(n)?oMe(e,t,...n.map(Su)):Cu({on:n},{join:[e,t]}).exprs[0];return g6t(e,t,i,r)}function _6t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Cl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Xn)));const l=sMe(t,r),c=lx(["lr","rr","data"],"{"+OI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Xv(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function b6t(e,t,n,r){return n=AQ(e,t,n),_6t(e,t,[k3("lookup",e,n[0]),k3("lookup",t,n[1])],gf("lookup",t,r))}const WV=(e,t)=>e??t;function w6t(e,t,n,r={}){const{keys:i,keyColumn:s}=E6t(e,t,r),o=WV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>cx(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(x6t(n,a,e.groups(),u))}function E6t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=WV(n.sort,!0),s=WV(n.keySeparator,"_"),o=Xv(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=cx(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function x6t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Cl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&tMe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function S6t(e,t,n,r){return w6t(e,gf("fold",e,t),gf("fold",e,n,{preparse:T6t,aggronly:!0}),r)}function T6t(e){e.forEach((t,n)=>t.field?e.set(n,ARe(t+"")):0)}function C6t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),EQ(e,Hp(e,t,n))}function Ome(e,t){return CQ(e,Cu(t,{table:e,aggronly:!0,window:!1}))}function A6t(e,t,n,r){return(t?r?O6t:I6t:r?k6t:P6t)(e.length,e,n,r)}function I6t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*tx()|0];return t}function O6t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=nMe(xQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*tx())];return t}function P6t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*tx();s<e&&(t[s|0]=n[i])}return t}function k6t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(tx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function $6t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=tx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function R6t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):A6t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&$6t(u),e.reify(u)}function N6t(e,t,n={}){return R6t(e,D6t(e,t),M6t(e,n.weight),n)}const aMe=e=>t=>e.get(t)||0;function D6t(e,t){return Ma(t)?()=>t:aMe(CQ(e,Cu({size:t},{table:e,window:!1})).column("size"))}function M6t(e,t){return t==null?null:(t=Ma(t)?e.columnName(t):t,aMe(Io(t)?e.column(t):TQ(e,Cu({w:t},{table:e}),{drop:!0}).column("w")))}function L6t(e,t){return EQ(e,Hp(e,t))}function F6t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Xv(e,r,n),l=Cl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=j6t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function j6t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Su(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Xn));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function B6t(e,t,n){return F6t(e,gf("spread",e,t),n)}function z6t(e,t){return e.concat(t).dedupe()}function U6t(e,t,n){return iMe(e,gf("unroll",e,t),n&&n.drop?{...n,drop:gf("unroll",e,n.drop).names}:n)}function V6t(e,t){return e.create({groups:H6t(e,t)})}function H6t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Xv(e,r,n);const o=l3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function q6t(e,t){return V6t(e,gf("groupby",e,t))}function W6t(e,t){return e.create({order:t})}const G6t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Y6t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Cu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([u3(p,{index:"a",op:o}),u3(p,{index:"b",op:a})])},window:!1}),l=cx(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=G6t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function K6t(e,t){return W6t(e,X6t(e,t))}function X6t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(aa(o)&&!ri(o))for(const a in o)i(o[a]);else i(Ma(o)?rv(s,e.columnName(o)):Io(o)?rv(s):ri(o)?s:vn(`Invalid orderby field: ${s+""}`))}),Y6t(e,r)}function Q6t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Cl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Xn};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function J6t(e,t){const n=Cl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?eMe(e,t,r):[Z3e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Z6t(e){return e.isGrouped()?e.create({groups:null}):e}function e4t(e){return e.isOrdered()?e.create({order:null}):e}const t4t={__antijoin:(e,t,n)=>Ime(e,t,n,{anti:!0}),__count:(e,t={})=>Ome(e,{[t.as||"count"]:IRe()}),__cross:(e,t,n,r)=>Cme(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Q6t,__dedupe:ILt,__derive:GLt,__except:YLt,__filter:QLt,__fold:ZLt,__impute:r6t,__intersect:s6t,__join:Cme,__lookup:b6t,__pivot:S6t,__relocate:Q3e,__rename:C6t,__rollup:Ome,__sample:N6t,__select:L6t,__semijoin:Ime,__spread:B6t,__union:z6t,__unroll:U6t,__groupby:q6t,__orderby:K6t,__ungroup:Z6t,__unorder:e4t,__reduce:J6t};Object.assign(Qh.prototype,t4t);function n4t(e,t){return Qh.from(e,t)}function gB(e){return iF(e,{escape:!0,toString(){vn("Escaped values can not be serialized.")}})}Qh.prototype;function r4t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let HP;const i4t=new Uint8Array(16);function s4t(){if(!HP&&(HP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!HP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HP(i4t)}const io=[];for(let e=0;e<256;++e)io.push((e+256).toString(16).slice(1));function o4t(e,t=0){return(io[e[t+0]]+io[e[t+1]]+io[e[t+2]]+io[e[t+3]]+"-"+io[e[t+4]]+io[e[t+5]]+"-"+io[e[t+6]]+io[e[t+7]]+"-"+io[e[t+8]]+io[e[t+9]]+"-"+io[e[t+10]]+io[e[t+11]]+io[e[t+12]]+io[e[t+13]]+io[e[t+14]]+io[e[t+15]]).toLowerCase()}const a4t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pme={randomUUID:a4t};function kme(e,t,n){if(Pme.randomUUID&&!t&&!e)return Pme.randomUUID();e=e||{};const r=e.random||(e.rng||s4t)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return o4t(r)}let kd=class{static get(){let t=kme();for(;this.ids.has(t);)t=kme();return this.ids.set(t,!0),t}};kd.ids=new Map;function $d(e){return"parent"in e}function u4t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:kd.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:kd.get(),createdOn:Date.now(),val:r}]:[];return{id:kd.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function l4t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:kd.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:kd.get(),createdOn:Date.now(),val:s}]:[];return{id:kd.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Mi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=v4t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function iv(e){return!!e&&!!e[pl]}function h0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===_4t}(e)||Array.isArray(e)||!!e[v2]||!!(!((t=e.constructor)===null||t===void 0)&&t[v2])||sF(e)||oF(e))}function Jw(e,t,n){n===void 0&&(n=!1),p0(e)===0?(n?Object.keys:RQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function p0(e){var t=e[pl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:sF(e)?2:oF(e)?3:0}function UC(e,t){return p0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function A$(e,t){return p0(e)===2?e.get(t):e[t]}function uMe(e,t,n){var r=p0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function c4t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function sF(e){return g4t&&e instanceof Map}function oF(e){return y4t&&e instanceof Set}function Ny(e){return e.o||e.t}function IQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=b4t(e);delete t[pl];for(var n=RQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function OQ(e,t){return t===void 0&&(t=!1),PQ(e)||iv(e)||!h0(e)||(p0(e)>1&&(e.set=e.add=e.clear=e.delete=f4t),Object.freeze(e),t&&Jw(e,function(n,r){return OQ(r,!0)},!0)),e}function f4t(){Mi(2)}function PQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Rd(e){var t=XV[e];return t||Mi(18,e),t}function d4t(e,t){XV[e]||(XV[e]=t)}function $me(){return{}.NODE_ENV==="production"||Zw||Mi(0),Zw}function yB(e,t){t&&(Rd("Patches"),e.u=[],e.s=[],e.v=t)}function $3(e){GV(e),e.p.forEach(h4t),e.p=null}function GV(e){e===Zw&&(Zw=e.l)}function Rme(e){return Zw={p:[],l:Zw,h:e,m:!0,_:0}}function h4t(e){var t=e[pl];t.i===0||t.i===1?t.j():t.O=!0}function vB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Rd("ES5").S(t,e,r),r?(n[pl].P&&($3(t),Mi(4)),h0(e)&&(e=R3(t,e),t.l||N3(t,e)),t.u&&Rd("Patches").M(n[pl].t,e,t.u,t.s)):e=R3(t,n,[]),$3(t),t.u&&t.v(t.u,t.s),e!==$Q?e:void 0}function R3(e,t,n){if(PQ(t))return t;var r=t[pl];if(!r)return Jw(t,function(s,o){return Nme(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return N3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=IQ(r.k):r.o;Jw(r.i===3?new Set(i):i,function(s,o){return Nme(e,r,i,s,o,n)}),N3(e,i,!1),n&&e.u&&Rd("Patches").R(r,n,e.u,e.s)}return r.o}function Nme(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Mi(5),iv(i)){var o=R3(e,i,s&&t&&t.i!==3&&!UC(t.D,r)?s.concat(r):void 0);if(uMe(n,r,o),!iv(o))return;e.m=!1}if(h0(i)&&!PQ(i)){if(!e.h.F&&e._<1)return;R3(e,i),t&&t.A.l||N3(e,i)}}function N3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&OQ(t,n)}function _B(e,t){var n=e[pl];return(n?Ny(n):e)[t]}function Dme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function YV(e){e.P||(e.P=!0,e.l&&YV(e.l))}function bB(e){e.o||(e.o=IQ(e.t))}function KV(e,t,n){var r=sF(t)?Rd("MapSet").N(t,n):oF(t)?Rd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:$me(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=QV;o&&(u=[a],l=_T);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Rd("ES5").J(t,n);return(n?n.A:$me()).p.push(r),r}function p4t(e){return iv(e)||Mi(22,e),function t(n){if(!h0(n))return n;var r,i=n[pl],s=p0(n);if(i){if(!i.P&&(i.i<4||!Rd("ES5").K(i)))return i.t;i.I=!0,r=Mme(n,s),i.I=!1}else r=Mme(n,s);return Jw(r,function(o,a){i&&A$(i.t,o)===a||uMe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Mme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return IQ(e)}function m4t(){function e(r){if(!h0(r))return r;if(Array.isArray(r))return r.map(e);if(sF(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(oF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return UC(r,v2)&&(i[v2]=r[v2]),i}function t(r){return iv(r)?e(r):r}var n="add";d4t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=p0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Mi(24),typeof u=="function"&&f==="prototype"&&Mi(24),typeof(u=A$(u,f))!="object"&&Mi(15,o.join("/"))}var d=p0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Mi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Mi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Jw(a.D,function(h,p){var m=A$(f,h),g=A$(d,h),y=p?UC(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===$Q?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Lme,Zw,kQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",g4t=typeof Map<"u",y4t=typeof Set<"u",Fme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$Q=kQ?Symbol.for("immer-nothing"):((Lme={})["immer-nothing"]=!0,Lme),v2=kQ?Symbol.for("immer-draftable"):"__$immer_draftable",pl=kQ?Symbol.for("immer-state"):"__$immer_state",v4t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},_4t=""+Object.prototype.constructor,RQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,b4t=Object.getOwnPropertyDescriptors||function(e){var t={};return RQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},XV={},QV={get:function(e,t){if(t===pl)return e;var n=Ny(e);if(!UC(n,t))return function(i,s,o){var a,u=Dme(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!h0(r)?r:r===_B(e.t,t)?(bB(e),e.o[t]=KV(e.A.h,r,e)):r},has:function(e,t){return t in Ny(e)},ownKeys:function(e){return Reflect.ownKeys(Ny(e))},set:function(e,t,n){var r=Dme(Ny(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=_B(Ny(e),t),s=i==null?void 0:i[pl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(c4t(n,i)&&(n!==void 0||UC(e.t,t)))return!0;bB(e),YV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return _B(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,bB(e),YV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ny(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Mi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Mi(12)}},_T={};Jw(QV,function(e,t){_T[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),_T.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Mi(13),_T.set.call(this,e,t,void 0)},_T.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Mi(14),QV.set.call(this,e[0],t,n,e[0])};var w4t=function(){function e(n){var r=this;this.g=Fme,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&Mi(6),o!==void 0&&typeof o!="function"&&Mi(7),h0(i)){var c=Rme(r),f=KV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?$3(c):GV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return yB(c,o),vB(m,c)},function(m){throw $3(c),m}):(yB(c,o),vB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===$Q&&(l=void 0),r.F&&OQ(l,!0),o){var h=[],p=[];Rd("Patches").M(i,l,h,p),o(h,p)}return l}Mi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){h0(n)||Mi(8),iv(n)&&(n=p4t(n));var r=Rme(this),i=KV(this,n,void 0);return i[pl].C=!0,GV(r),i},t.finishDraft=function(n,r){var i=n&&n[pl];({}).NODE_ENV!=="production"&&(i&&i.C||Mi(9),i.I&&Mi(10));var s=i.A;return yB(s,r),vB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Fme&&Mi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Rd("Patches").$;return iv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ml=new w4t,E4t=ml.produce;ml.produceWithPatches.bind(ml);ml.setAutoFreeze.bind(ml);ml.setUseProxies.bind(ml);ml.applyPatches.bind(ml);ml.createDraft.bind(ml);ml.finishDraft.bind(ml);function x4t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=u4t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return JPe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:kd.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:kd.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function S4t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=x4t(e),s=$xt();s.startListening({matcher:Wde(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Wde(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=XPe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:kd.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var T4t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C4t=Object.prototype.hasOwnProperty;function JV(e,t){return C4t.call(e,t)}function ZV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)JV(e,i)&&r.push(i);return r}function gu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function eH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Dy(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function lMe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function tH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(tH(e[t]))return!0}else if(typeof e=="object"){for(var r=ZV(e),i=r.length,s=0;s<i;s++)if(tH(e[r[s]]))return!0}}return!1}function jme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var cMe=function(e){T4t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,jme(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=jme(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ki=cMe,A4t=gu,Eb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=D3(n,this.path);r&&(r=gu(r));var i=R1(n,{op:"remove",path:this.from}).removed;return R1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=D3(n,this.from);return R1(n,{op:"add",path:this.path,value:gu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:VC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},I4t={add:function(e,t,n){return eH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Eb.move,copy:Eb.copy,test:Eb.test,_get:Eb._get};function D3(e,t){if(t=="")return e;var n={op:"_get",path:t};return R1(e,n),n.value}function R1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):M3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=D3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=VC(e,t.value),o.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ki("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=gu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=M3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=lMe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!eH(h))throw new ki("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);eH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ki("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=I4t[t.op].call(t,l,h,e);if(o.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Eb[t.op].call(t,l,h,e);if(o.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ki("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function aF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ki("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=gu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=R1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function O4t(e,t,n){var r=R1(e,t);if(r.test===!1)throw new ki("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function M3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ki("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Eb[e.op]){if(typeof e.path!="string")throw new ki("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ki('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ki("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ki("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&tH(e.value))throw new ki("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ki("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ki("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=fMe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ki("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ki("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function fMe(e,t,n){try{if(!Array.isArray(e))throw new ki("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)aF(gu(t),gu(e),n||!0);else{n=n||M3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ki)return i;throw i}}function VC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!VC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!VC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const P4t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ki,_areEquals:VC,applyOperation:R1,applyPatch:aF,applyReducer:O4t,deepClone:A4t,getValueByPointer:D3,validate:fMe,validator:M3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var NQ=new WeakMap,k4t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),$4t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function R4t(e){return NQ.get(e)}function N4t(e,t){return e.observers.get(t)}function D4t(e,t){e.observers.delete(t.callback)}function M4t(e,t){t.unobserve()}function L4t(e,t){var n=[],r,i=R4t(e);if(!i)i=new k4t(e),NQ.set(e,i);else{var s=N4t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=gu(e),t){r.callback=t,r.next=null;var o=function(){nH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){nH(r),clearTimeout(r.next),D4t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new $4t(t,r)),r}function nH(e,t){t===void 0&&(t=!1);var n=NQ.get(e.object);DQ(n.value,e.object,e.patches,"",t),e.patches.length&&aF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function DQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=ZV(t),o=ZV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(JV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?DQ(c,f,n,r+"/"+Dy(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Dy(l),value:gu(c)}),n.push({op:"replace",path:r+"/"+Dy(l),value:gu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Dy(l),value:gu(c)}),n.push({op:"remove",path:r+"/"+Dy(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!JV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Dy(l),value:gu(t[l])})}}}function dMe(e,t,n){n===void 0&&(n=!1);var r=[];return DQ(e,t,r,"",n),r}const F4t=Object.freeze(Object.defineProperty({__proto__:null,compare:dMe,generate:nH,observe:L4t,unobserve:M4t},Symbol.toStringTag,{value:"Module"}));Object.assign({},P4t,F4t,{JsonPatchError:cMe,deepClone:gu,escapePathComponent:Dy,unescapePathComponent:lMe});var bT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(bT||{});function I$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=pMe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=I$(i,t);return aF(a,gu(o),!0,!1).newDocument}function j4t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function hMe({registry:e,initialState:t}){let n=!1;const r=r4t(),i=S4t(t);function s(c){return i.backend.nodes[c]}r.listen(bT.TRAVERSAL_START,()=>{n=!0}),r.listen(bT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return I$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=I$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=dMe(y,f);if(j4t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=l4t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=I$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(bT.TRAVERSAL_START);const f=pMe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);z4t(p,m)?$d(p)&&d.push(...p.sideEffects.undo):$d(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(bT.TRAVERSAL_END)},undo(){const{current:c}=i;return $d(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return mMe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function B4t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;$d(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)$d(r)&&(r=n[r.parent]),$d(i)&&(i=n[i.parent]);return r.id}function pMe(e,t,n){const r=B4t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),$d(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),$d(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function z4t(e,t){if($d(e)&&e.parent===t.id)return!0;if($d(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function mMe(e,t){return{...e,children:e.children.map(n=>mMe(t[n],t)),name:`${e.label}`}}m4t();function U4t(e){return e.length===2?E4t(e):e}class uF{static create(){return new uF}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:U4t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Id(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var V4t="Expected a function",Bme=NaN,H4t="[object Symbol]",q4t=/^\s+|\s+$/g,W4t=/^[-+]0x[0-9a-f]+$/i,G4t=/^0b[01]+$/i,Y4t=/^0o[0-7]+$/i,K4t=parseInt,X4t=typeof du=="object"&&du&&du.Object===Object&&du,Q4t=typeof self=="object"&&self&&self.Object===Object&&self,J4t=X4t||Q4t||Function("return this")(),Z4t=Object.prototype,eFt=Z4t.toString,tFt=Math.max,nFt=Math.min,wB=function(){return J4t.Date.now()};function rFt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(V4t);t=zme(t)||0,rH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?tFt(zme(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(w){var x=r,S=i;return r=i=void 0,l=w,o=e.apply(S,x),o}function p(w){return l=w,a=setTimeout(y,t),c?h(w):o}function m(w){var x=w-u,S=w-l,P=t-x;return f?nFt(P,s-S):P}function g(w){var x=w-u,S=w-l;return u===void 0||x>=t||x<0||f&&S>=s}function y(){var w=wB();if(g(w))return v(w);a=setTimeout(y,m(w))}function v(w){return a=void 0,d&&r?h(w):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function b(){return a===void 0?o:v(wB())}function E(){var w=wB(),x=g(w);if(r=arguments,i=this,u=w,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=b,E}function rH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function iFt(e){return!!e&&typeof e=="object"}function sFt(e){return typeof e=="symbol"||iFt(e)&&eFt.call(e)==H4t}function zme(e){if(typeof e=="number")return e;if(sFt(e))return Bme;if(rH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(q4t,"");var n=G4t.test(e);return n||Y4t.test(e)?K4t(e.slice(2),n?2:8):W4t.test(e)?Bme:+e}var oFt=rFt;const Vf=El(oFt);function gMe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=C.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=C.useMemo(()=>QE(".2s"),[]);return I.jsxs(I.Fragment,{children:[I.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:I.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:I.jsx(Dp,{children:I.jsx(Co,{spacing:3,children:I.jsx(ct,{size:14,style:{color:"#878E95"},children:r})})})})}),I.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),I.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>I.jsxs("g",{transform:`translate(${n}, ${a})`,children:[I.jsx("line",{x2:"-6",stroke:"currentColor"}),I.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),I.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const aFt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:gMe},Symbol.toStringTag,{value:"Module"})),EB=15;function yMe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=C.useState([0,0]),[l,c]=C.useState(!1);return C.useEffect(()=>{const f=ts("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<EB&&Math.abs(t(g[r.y])-p[1])<EB);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),I.jsx("circle",{style:{cursor:l?"pointer":"default"},r:EB,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const uFt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:yMe},Symbol.toStringTag,{value:"Module"})),li={top:15,left:100,right:15,bottom:70};function iH({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=x1(),[c]=x1(),[f]=x1(),[d,h]=C.useState(!0),p=C.useMemo(()=>l-li.left-li.right,[l]),m=C.useMemo(()=>u-li.top-li.bottom,[u]),g=C.useMemo(()=>{const A=Array.from(new Set(s.map(O=>O[i.category])));return JE(iRe).domain(A)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:b}=C.useMemo(()=>{const A=s.map(L=>+L[i.x]).filter(L=>L!==null),[O,z]=fhe(A),M=s.map(L=>+L[i.y]).filter(L=>L!==null),[R,D]=fhe(M);return{xMin:O,xMax:z,yMin:R,yMax:D}},[s,i.x,i.y]),E=C.useMemo(()=>{const A=_-y;return p<=0?null:i.dataType==="date"?J$e([li.left,p+li.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):jp([li.left,p+li.left]).domain([y-A/10,_+A/10]).nice()},[i.dataType,p,_,y]),w=C.useMemo(()=>{const A=b-v;return m<=0?null:jp([m+li.top,li.top]).domain([v-A/10,b+A/10]).nice()},[m,b,v]),x=C.useMemo(()=>{if(!E||!w)return()=>null;if(r==="Axis Selection"){const A=yAt().extent([[li.left,li.top+m-5],[li.left+p,li.top+m+5]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[z.selection[0],null],[z.selection[1],null]],E,w,z.mode)}),O=vAt().extent([[li.left-5,li.top],[li.left+5,li.top+m]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[null,z.selection[0]],[null,z.selection[1]]],E,w,z.mode)});return c.current&&f.current&&(ts(f.current).call(O),ts(c.current).call(A),t.hasBrush||(ts(f.current).call(O.move,[w(b),w(v)]),ts(c.current).call(A.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"drag"))),()=>{ts(f.current).call(O.move,[w(b),w(v)]),ts(c.current).call(A.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"clear")}}if(r==="Rectangular Selection"){const A=_At().extent([[li.left,li.top],[li.left+p,li.top+m]]).on("brush",O=>{O.sourceEvent!==void 0&&n([[O.selection[0][0],O.selection[0][1]],[O.selection[1][0],O.selection[1][1]]],E,w,O.mode)}).on("end",O=>{O.selection===null&&O.sourceEvent!==void 0&&(ts(a.current).call(A.move,null),e(null))});return ts(a.current).call(A),()=>{ts(a.current).call(A.move,null),n([[null,null],[null,null]],E,w,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),w(b)],[E(_),w(v)]],E,w,null),()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,E,b,v,w]),S=C.useMemo(()=>o.length===0?null:new Set(o),[o]),P=C.useMemo(()=>!E||!w?null:s.map((A,O)=>{if(A[i.x]===null||A[i.y]===null)return null;const z=i.dataType==="date"?E(new Date(A[i.x])):E(A[i.x]);return I.jsx("circle",{opacity:S&&!S.has(A[i.ids])?.3:1,r:3,fill:S&&!S.has(A[i.ids])?"lightgray":g(A[i.category]),cx:z,cy:w(A[i.y])},O)}),[S,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,w]);return C.useEffect(()=>{r==="Axis Selection"&&l2t(".handle").style("fill","darkgrey")},[t,r]),I.jsxs(rp,{children:[I.jsxs(Co,{children:[I.jsx(Xr,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?I.jsx(cIe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:A=>h(A==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),I.jsxs(Co,{style:{width:"100%",height:"100%"},noWrap:!0,children:[I.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&w?I.jsxs("g",{children:[I.jsx(gMe,{yScale:w,label:i.y,horizontalPosition:li.left,xRange:E.range()}),I.jsx(iX,{xScale:E,yRange:w.range(),isDate:i.dataType==="date",vertPosition:m+li.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(A=>({value:A.toString(),offset:E(A)}))})]}):null,P,I.jsx("g",{id:"brushXRef",ref:c}),I.jsx("g",{id:"brushYRef",ref:f}),E&&w&&r==="Paintbrush Selection"?I.jsx(yMe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:w}):null]}),r==="Slider Selection"&&E&&w?I.jsxs(rp,{style:{flexGrow:1},spacing:50,children:[I.jsxs(rp,{spacing:0,children:[I.jsx(ct,{children:i.x}),I.jsx(TU,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:A=>{n([[E(A[0]),t.y1],[E(A[1]),t.y2]],E,w,"drag")},style:{width:"300px"},marks:E.ticks(5).map(A=>({value:A,label:A})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),I.jsxs(rp,{spacing:0,children:[I.jsx(ct,{children:i.y}),I.jsx(TU,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],onChange:A=>{n([[t.x1,w(A[1])],[t.x2,w(A[0])]],E,w,"drag")},style:{width:"300px"},marks:w.ticks(5).map(A=>({value:A,label:A})),value:[w.invert(t.y2),w.invert(t.y1)]})]})]}):null]})]})}const lFt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:iH,default:iH},Symbol.toStringTag,{value:"Module"}));function Ume({parameters:e,setAnswer:t}){const[n,r]=C.useState(null),[i,s]=C.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=C.useState(null);C.useEffect(()=>{UAt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=C.useMemo(()=>o?n4t(o):null,[o]),{actions:l,trrack:c}=C.useMemo(()=>{const g=uF.create(),y=g.register("brush",(w,x)=>(w.all={brush:x},w)),v=g.register("brushMove",(w,x)=>(w.all={brush:x},w)),_=g.register("brushResize",(w,x)=>(w.all={brush:x},w)),b=g.register("brushClear",(w,x)=>(w.all={brush:x},w)),E=hMe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:b},trrack:E}},[]),f=C.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=C.useMemo(()=>Vf(f,100,{maxWait:100}),[f]),h=C.useCallback((g,y,v,_,b)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),w=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),S=v.invert(g[0][1]||i.y1);let P=null;if(_==="clear")P=u;else if(b){const O=new Set(b);P=u.filter(gB(z=>O.has(z[e.ids])))}else e.brushType==="Axis Selection"?P=u.filter(gB(O=>new Date(O[e.x])>=new Date(E)&&new Date(O[e.x])<=new Date(w)&&O[e.y]>=x&&O[e.y]<=S)):P=u.filter(gB(O=>O[e.x]>=E&&O[e.x]<=w&&O[e.y]>=x&&O[e.y]<=S));const A={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?P==null?void 0:P.array("id"):[]};s(A),_==="drag"||_==="handle"?d(_,A):_==="clear"&&c.apply("Clear Brush",l.clearBrush(A)),r(P),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=C.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=C.useCallback(g=>{r(g)},[]);return o?I.jsxs(rp,{spacing:"xs",children:[I.jsx(iH,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),I.jsx(EV,{data:o,parameters:e,barsTable:p})]}):I.jsx(Mv,{})}const cFt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Ume,default:Ume},Symbol.toStringTag,{value:"Module"})),fFt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Vme=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},fx=e=>{const t=C.useRef(null),n=Vme(e),[r,i]=C.useState(0),[s,o]=C.useState(0);C.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Vme({...n,width:n.width||r,height:n.height||s});return[t,a]},dFt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:fx},Symbol.toStringTag,{value:"Module"}));function vMe({data:e,xScale:t,yScale:n,height:r}){return I.jsx("g",{children:e.map((i,s)=>I.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const hFt=Object.freeze(Object.defineProperty({__proto__:null,Bars:vMe},Symbol.toStringTag,{value:"Module"}));function MQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=C.useMemo(()=>{const o=jp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return I.jsxs("g",{children:[I.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>I.jsxs("g",{transform:`translate(0,${a})`,children:[I.jsx("line",{x2:`${r}`,stroke:"currentColor"}),I.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const pFt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:MQ},Symbol.toStringTag,{value:"Module"}));function _Me({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=C.useMemo(()=>{const o=vI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return I.jsxs("g",{children:[I.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>I.jsx("g",{transform:`translate(${a}, 10)`,children:I.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const mFt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:_Me},Symbol.toStringTag,{value:"Module"})),gFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function yFt({parameters:e}){const[n,r]=fx(gFt),i=vI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=jp().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return I.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:I.jsx("svg",{width:r.width,height:r.height,children:I.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[I.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:I.jsx(_Me,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),I.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:I.jsx(MQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),I.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:I.jsx(vMe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const vFt=Object.freeze(Object.defineProperty({__proto__:null,default:yFt},Symbol.toStringTag,{value:"Module"}));function bMe({data:e}){return I.jsx("g",{children:e.map(({bubble:t},n)=>I.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const _Ft=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:bMe},Symbol.toStringTag,{value:"Module"}));function LQ({positions:e}){return I.jsx("g",{children:e.map((t,n)=>I.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const bFt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:LQ},Symbol.toStringTag,{value:"Module"})),wFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},EFt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=C$e().size([t-10,n-10]).padding(1.5),o=x4(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},xFt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function SFt({parameters:e}){const[t,n]=fx(wFt),r=EFt(e,n.width,n.height),i=xFt(r,e.selectedIndices);return I.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:I.jsx("svg",{width:n.width,height:n.height,children:I.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[I.jsx(bMe,{data:r}),I.jsx(LQ,{positions:i})]})})})}const TFt=Object.freeze(Object.defineProperty({__proto__:null,default:SFt},Symbol.toStringTag,{value:"Module"}));function wMe({arcs:e}){return I.jsx("g",{children:e.map((t,n)=>I.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const CFt=Object.freeze(Object.defineProperty({__proto__:null,Slices:wMe},Symbol.toStringTag,{value:"Module"}));function EMe({positions:e}){return I.jsx("g",{children:e.map((t,n)=>I.jsx("g",{transform:`translate(${t.centroid()})`,children:I.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const AFt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:EMe},Symbol.toStringTag,{value:"Module"})),IFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},OFt=Pkt().value(e=>e.value),CS=150;function PFt({parameters:e}){const[t,n]=fx(IFt),r=OFt(e.data),i=r.map(o=>wV().innerRadius(0).outerRadius(CS).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>wV().outerRadius(CS+10).innerRadius(CS+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return I.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:I.jsx("svg",{width:n.width,height:n.height,children:I.jsxs("g",{transform:`translate(${[n.marginLeft+CS,n.marginTop+CS].join(",")})`,children:[I.jsx(wMe,{arcs:i}),I.jsx(EMe,{positions:s})]})})})}const kFt=Object.freeze(Object.defineProperty({__proto__:null,default:PFt},Symbol.toStringTag,{value:"Module"}));function xMe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=C.useMemo(()=>{const o=jp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return I.jsxs("g",{children:[I.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>I.jsxs("g",{transform:`translate(${a}, 0)`,children:[I.jsx("line",{y2:`${r}`,stroke:"currentColor"}),I.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const $Ft=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:xMe},Symbol.toStringTag,{value:"Module"}));function SMe({data:e,barWidth:t,yScale:n}){return I.jsx("g",{children:e.map((r,i)=>I.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const RFt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:SMe},Symbol.toStringTag,{value:"Module"})),NFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function DFt({parameters:e}){const[n,r]=fx(NFt),i=vI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=jp().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,b)=>Number(_)+Number(b))/100,y={};p.forEach((_,b)=>{y[String.fromCharCode(b+65)]=_/g});const v=[y];return Jkt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return I.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:I.jsx("svg",{width:r.width,height:r.height,children:I.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[I.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:I.jsx(xMe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),I.jsx("g",{transform:"translate(0, 0)",children:I.jsx(MQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),I.jsxs("g",{transform:"translate(0, 0)",children:[I.jsx(SMe,{data:c,barWidth:f,yScale:s}),I.jsx(LQ,{positions:d})]})]})})})}const MFt=Object.freeze(Object.defineProperty({__proto__:null,default:DFt},Symbol.toStringTag,{value:"Module"})),LFt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function FFt({parameters:e,setAnswer:t}){const[n,r]=fx(LFt),[i,s]=C.useState(100),[o,a]=C.useState(100),[u,l]=C.useState(300),{taskid:c}=e,{actions:f,trrack:d}=C.useMemo(()=>{const p=uF.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=hMe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=C.useCallback(p=>{const m=ts("#movingCircle"),g=ts("#clickAccuracySvg"),y=nV(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return C.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ts(n.current).select("circle").transition().duration(y).ease(rAt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:I.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:I.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[I.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),I.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),I.jsxs(st,{children:["Adjust speed (px/s):",I.jsx(UY,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const jFt=Object.freeze(Object.defineProperty({__proto__:null,default:FFt},Symbol.toStringTag,{value:"Module"}));function Hme({rankings:e}){return I.jsx("div",{style:{fontFamily:"sans-serif"},children:I.jsx("div",{children:e.map((t,n)=>I.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function BFt({parameters:e,setAnswer:t}){const n=wc(),r=ch()[n],[i,s]=C.useState(""),{goToNextStep:o,isNextDisabled:a}=pke(),u=C.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[l]=C.useState(new URLSearchParams(window.location.search)),c=(l.get("admin")||"f")==="t",f=C.useCallback(p=>{s(p),t({status:!0,answers:{[`${r}/leftARP`]:u==="r1"?e.data.r1ARP:e.data.r2ARP,[`${r}/rightARP`]:u==="r2"?e.data.r1ARP:e.data.r2ARP,[`${r}/leftRanking`]:JSON.stringify(u==="r1"?e.data.r1:e.data.r2),[`${r}/rightRanking`]:JSON.stringify(u==="r2"?e.data.r1:e.data.r2),[`${r}/choice`]:p,[`${r}/correctChoice`]:u==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[r,u,e.data,t]),d=C.useCallback(()=>{a||o()},[a,o]);C.useEffect(()=>{const p=xJe([["ArrowLeft",()=>f("left")],["ArrowRight",()=>f("right")],["Enter",d]]);return document.body.addEventListener("keydown",p),()=>{document.body.removeEventListener("keydown",p)}},[f,d]);let h=!1;return u==="r1"?(i==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||i==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(h=!0):(i==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||i==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(h=!0),I.jsxs("div",{children:[I.jsxs(pu,{children:[I.jsxs(pu.Col,{span:2,children:[I.jsx(Hme,{rankings:u==="r1"?e.data.r1:e.data.r2}),I.jsx(Xr,{fullWidth:!0,disabled:i==="left",onClick:()=>{f("left")},children:i==="left"?I.jsx(_fe,{}):"Select this ranking"}),c&&i&&I.jsx("div",{children:u==="r1"?e.data.r1ARP:e.data.r2ARP})]}),I.jsxs(pu.Col,{span:2,children:[I.jsx(Hme,{rankings:u==="r1"?e.data.r2:e.data.r1}),I.jsx(Xr,{fullWidth:!0,disabled:i==="right",onClick:()=>{f("right")},children:i==="right"?I.jsx(_fe,{}):"Select this ranking"}),c&&i&&I.jsx("div",{children:u==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),c&&i&&I.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:h?"CORRECT":"INCORRECT"})]})}const zFt=Object.freeze(Object.defineProperty({__proto__:null,default:BFt},Symbol.toStringTag,{value:"Module"})),UFt=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":t$t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":cFt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":uFt,"../public/demo-brush-interactions/assets/Scatter.tsx":lFt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":Zkt,"../public/demo-brush-interactions/assets/YAxis.tsx":aFt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":e$t,"../public/demo-brush-interactions/assets/types.ts":fFt,"../public/demo-cleveland/assets/BarChart.tsx":vFt,"../public/demo-cleveland/assets/BubbleChart.tsx":TFt,"../public/demo-cleveland/assets/PieChart.tsx":kFt,"../public/demo-cleveland/assets/StackedBarChart.tsx":MFt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":hFt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":_Ft,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":bFt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":$Ft,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":pFt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":mFt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":CFt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":AFt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":RFt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":dFt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":jFt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":zFt});function VFt({currentConfig:e}){const t=wc(),n=ch()[t],r=`../public/${e.path}`,i=UFt[r].default,s=lh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=uh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return I.jsx(C.Suspense,{fallback:I.jsx("div",{children:"Loading..."}),children:I.jsx(i,{parameters:e.parameters,setAnswer:u})})}function HFt({currentConfig:e}){const[t,n]=C.useState(null);return C.useEffect(()=>{fetch(`${mc}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:I.jsx(Na,{text:t})}const qFt={},WFt=Object.freeze(Object.defineProperty({__proto__:null,default:qFt},Symbol.toStringTag,{value:"Module"})),GFt=hWe(WFt);var YFt=GFt;function KFt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function XFt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function QFt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function JFt(e){return e.__COMMENTS__}function ZFt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var lF={EOL:YFt.EOL||`
`,tryParseNumber:KFt,createComment:XFt,removeComment:QFt,getComment:JFt,forceComment:ZFt},e5t="3.2.1";function t5t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return qme}else if(e.length===0)return qme;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return r5t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),n5t.bind(null,n)}function n5t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function qme(){}function r5t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function TMe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}TMe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function CMe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}CMe.description="parse hexadecimal numbers prefixed with 0x";function AMe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}AMe.description="support ISO dates";var FQ={loadDsf:t5t,std:{math:TMe,hex:CMe,date:AMe}},i5t=function(e,t){var n=lF,r=FQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(R){return R==="{"||R==="}"||R==="["||R==="]"||R===","||R===":"}function d(R){var D,L=0,V=1;for(D=s-1;D>0&&i[D]!==`
`;D--,L++);for(;D>0;D--)i[D]===`
`&&V++;throw new Error(R+" at line "+V+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(R){return i.charAt(s+R)}function m(R){for(var D="",L=o;h();){if(o===L)return h(),R&&L==="'"&&o==="'"&&D.length===0?(h(),g()):D;if(o==="\\")if(h(),o==="u"){for(var V=0,B=0;B<4;B++){h();var H=o.charCodeAt(0),U;o>="0"&&o<="9"?U=H-48:o>="a"&&o<="f"?U=H-97+10:o>="A"&&o<="F"?U=H-65+10:d("Bad \\u char "+o),V=V*16+U}D+=String.fromCharCode(V)}else if(typeof a[o]=="string")D+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):D+=o}d("Bad string")}function g(){for(var R="",D=0,L=0;;){var V=p(-L-5);if(!V||V===`
`)break;L++}function B(){for(var H=L;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),B());;){if(!o)d("Bad multiline string");else if(o==="'"){if(D++,h(),D===3)return R.slice(-1)===`
`&&(R=R.slice(0,-1)),R;continue}else for(;D>0;)R+="'",D--;o===`
`?(R+=`
`,h(),B()):(o!=="\r"&&(R+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var R="",D=s,L=-1;;){if(o===":")return R?L>=0&&L!==R.length&&(s=D+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),R;o<=" "?o?L<0&&(L=R.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):R+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var R=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var D=o==="\r"||o===`
`||o==="";if(D||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=R[0];switch(L){case"f":if(R.trim()==="false")return!1;break;case"n":if(R.trim()==="null")return null;break;case"t":if(R.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var V=n.tryParseNumber(R);if(V!==void 0)return V}}if(D){R=R.trim();var B=l(R);return B!==void 0?B:R}}R+=o}}function b(R,D){var L;for(R--,L=s-2;L>R&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var V=i.substr(R,L-R+1);for(L=0;L<V.length;L++)if(V[L]>" "){var B=V.indexOf(`
`);if(B>=0){var H=[V.substr(0,B),V.substr(B+1)];return D&&H[0].trim().length===0&&H.shift(),H}else return[V]}return[]}function E(R){function D(V,B){var H,U,k,$;switch(typeof V){case"string":V.indexOf(B)>=0&&($=V);break;case"object":if(Object.prototype.toString.apply(V)==="[object Array]")for(H=0,k=V.length;H<k;H++)$=D(V[H],B)||$;else for(U in V)Object.prototype.hasOwnProperty.call(V,U)&&($=D(V[U],B)||$)}return $}function L(V){var B=D(R,V);return B?"found '"+V+`' in a string value, your mistake could be with:
  > `+B+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function w(){var R=[],D,L,V;try{if(u&&(D=n.createComment(R,{a:[]})),h(),L=s,v(),D&&(V=b(L,!0).join(`
`)),o==="]")return h(),D&&(D.e=[V]),R;for(;o;){if(R.push(S()),L=s,v(),o===","&&(h(),L=s,v()),D){var B=b(L);D.a.push([V||"",B[0]||""]),V=B[1]}if(o==="]")return h(),D&&(D.a[D.a.length-1][1]+=V||""),R;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E(R),H}}function x(R){var D="",L={},V,B,H;try{if(u&&(V=n.createComment(L,{c:{},o:[]})),R?B=1:(h(),B=s),v(),V&&(H=b(B,!0).join(`
`)),o==="}"&&!R)return V&&(V.e=[H]),h(),L;for(;o;){if(D=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[D]=S(),B=s,v(),o===","&&(h(),B=s,v()),V){var U=b(B);V.c[D]=[H||"",U[0]||""],H=U[1],V.o.push(D)}if(o==="}"&&!R)return h(),V&&(V.c[D][1]+=H||""),L;v()}if(R)return L;d("End of input while parsing an object (missing '}')")}catch(k){throw k.hint=k.hint||E(L),k}}function S(){switch(v(),o){case"{":return x();case"[":return w();case"'":case'"':return m(!0);default:return _()}}function P(R,D){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var V=D.join(`
`),B=b(L).join(`
`);if(B||V){var H=n.createComment(R,n.getComment(R));H.r=[V,B]}}return R}function A(){v();var R=u?b(1):null;switch(o){case"{":return P(x(),R);case"[":return P(w(),R);default:return P(S(),R)}}function O(){v();var R=u?b(1):null;switch(o){case"{":return P(x(),R);case"[":return P(w(),R)}try{return P(x(!0),R)}catch(D){c();try{return P(S(),R)}catch{throw D}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,M=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,M=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),M?O():A()},s5t=function(e,t){var n=lF,r=FQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var b,E="---\u2028--\uFEFF-",w=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),P=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),A={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",M=0;function R($,q){return M+=$[0].length+$[1].length-$[2]-$[3],$[0]+q+$[1]}function D($){return $.replace(w,function(q){var F=A[q];return typeof F=="string"?R(g.esc,F):R(g.uni,("0000"+q.charCodeAt(0).toString(16)).slice(-4))})}function L($,q,F,j){return $?(x.lastIndex=0,P.lastIndex=0,c||F||x.test($)||n.tryParseNumber($,!0)!==void 0||P.test($)?(w.lastIndex=0,S.lastIndex=0,w.test($)?!S.test($)&&!j&&d?V($,q):R(g.qstr,D($)):R(g.qstr,$)):R(g.str,$)):R(g.qstr,"")}function V($,q){var F,j=$.replace(/\r/g,"").split(`
`);if(q+=o,j.length===1)return R(g.mstr,j[0]);var Q=s+q+g.mstr[0];for(F=0;F<j.length;F++)Q+=s,j[F]&&(Q+=q+j[F]);return Q+s+q+g.mstr[1]}function B($){return $?l||O.test($)?(w.lastIndex=0,R(g.qkey,w.test($)?D($):$)):R(g.key,$):'""'}function H($,q,F,j){function Q(wt){return wt&&wt[wt[0]==="\r"?1:0]===`
`}function se(wt){return wt&&!Q(wt)}function ae(wt,In,Wt){if(!wt)return"";wt=n.forceComment(wt);var Vt,hr=wt.length;for(Vt=0;Vt<hr&&wt[Vt]<=" ";Vt++);return Wt&&Vt>0&&(wt=wt.substr(Vt)),Vt<hr?In+R(g.rem,wt):wt}var ce=b($);if(ce!==void 0)return R(g.dsf,ce);switch(typeof $){case"string":return L($,z,q,j);case"number":return isFinite($)?R(g.num,String($)):R(g.lit,"null");case"boolean":return R(g.lit,String($));case"object":if(!$)return R(g.lit,"null");var le;a&&(le=n.getComment($));var ge=Object.prototype.toString.apply($)==="[object Array]",ue=z;z+=o;var Fe=s+ue,$e=s+z,Ge=F||u?"":Fe,Re=[],Oe,Me=f?[]:null,Ut=c,Qe=d,Be=h?"":g.com[0],xt=0,et,ft,dt,Bt,Dn,he,_e,Pe,it;if(ge){for(et=0,ft=$.length;et<ft;et++){if(Oe=et<ft-1,le?(he=le.a[et]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+$e),Me&&(he[0]||he[1]||_e)&&(Me=null)):Re.push($e),M=0,Bt=$[et],Re.push(H(Bt,le?_e:!1,!0)+(Oe?h:"")),Me){switch(typeof Bt){case"string":M=0,c=!0,d=0,Me.push(H(Bt,!1,!0)+(Oe?g.com[0]:"")),c=Ut,d=Qe;break;case"object":if(Bt){Me=null;break}default:Me.push(Re[Re.length-1]+(Oe?Be:""));break}Oe&&(M+=g.com[0].length-g.com[2]),xt+=M}le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e))}ft===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=R(g.arr,""):(Pe=Ge+R(g.arr,Re.join("")),Me&&(it=Me.join(" "),it.length-xt<=f&&(Pe=R(g.arr,it))))}else{var Ye=le?le.o.slice():[],ut=[];for(dt in $)Object.prototype.hasOwnProperty.call($,dt)&&Ye.indexOf(dt)<0&&ut.push(dt);m&&ut.sort();var tt=Ye.concat(ut);for(et=0,ft=tt.length;et<ft;et++)if(Oe=et<ft-1,dt=tt[et],le?(he=le.c[dt]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+$e),Me&&(he[0]||he[1]||_e)&&(Me=null)):Re.push($e),M=0,Bt=$[dt],Dn=H(Bt,le&&_e),Re.push(B(dt)+g.col[0]+(Q(Dn)?"":" ")+Dn+(Oe?h:"")),le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e)),Me){switch(typeof Bt){case"string":M=0,c=!0,d=0,Dn=H(Bt,!1),c=Ut,d=Qe,Me.push(B(dt)+g.col[0]+" "+Dn+(Oe?g.com[0]:""));break;case"object":if(Bt){Me=null;break}default:Me.push(Re[Re.length-1]+(Oe?Be:""));break}M+=g.col[0].length-g.col[2],Oe&&(M+=g.com[0].length-g.com[2]),xt+=M}ft===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?Pe=R(g.obj,""):(Pe=Ge+R(g.obj,Re.join("")),Me&&(it=Me.join(" "),it.length-xt<=f&&(Pe=R(g.obj,it))))}return z=ue,Pe}}b=r.loadDsf(p,"stringify");var U="",k=a?k=(n.getComment(e)||{}).r:null;return k&&k[0]&&(U=k[0]+`
`),U+=H(e,null,!0,!0),k&&(U+=k[1]||""),U},Zb=lF;function _2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function sH(e,t){if(!(e===null||typeof e!="object")){var n=Zb.getComment(e);n&&Zb.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Wme(o.a,r,n.a[r],sH(e[r]))&&(s=!0);!s&&n.e&&(o.e=_2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Wme(o.s,l,n.c[l],sH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=_2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=_2(n.r[0],n.r[1])),s?o:void 0}}function o5t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function a5t(e,t){var n=[];if(oH(e,t,n,[]),n.length>0){var r=L3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+o5t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),L3(t,r,1)}}function Wme(e,t,n,r){var i=_2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function b2(e,t){var n=_2(t.b,t.a);return n.path=e,n}function w2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(b2(s,o)),w2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(b2(u,l)),w2(l.x,t,u))});e.e&&t.push(b2(n,e.e))}}function oH(e,t,n,r){if(e){if(t===null||typeof t!="object"){w2(e,n,r);return}var i,s=Zb.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],oH(u.x,t[i],n,l)):(n.push(b2(l,u)),w2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],oH(d.x,t[c],n,f))):d&&(n.push(b2(f,d)),w2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function L3(e,t,n){var r=Zb.createComment(e,Zb.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Zb.forceComment(t)),r.r[n]||""}var u5t={extract:function(e){return sH(e,!0)},merge:a5t,header:function(e,t){return L3(e,t,0)},footer:function(e,t){return L3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Gme=lF,l5t=e5t,Yme=i5t,Kme=s5t,c5t=u5t,f5t=FQ,jQ={parse:Yme,stringify:Kme,endOfLine:function(){return Gme.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Gme.EOL=e)},version:l5t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Yme(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Kme(e,t)}},comments:c5t,dsf:f5t.std},aH={exports:{}},IMe={},lf={},eE={},PI={},An={},HC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,b)=>`${_}${b}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,b)=>(b instanceof n&&(_[b.str]=(_[b.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let b=0;for(;b<v.length;)a(_,v[b]),_.push(y[++b]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let b=0;for(;b<v.length;)_.push(s),a(_,v[b]),_.push(s,h(y[++b]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(HC);var uH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=HC;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(uH);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=HC,n=uH;var r=HC;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=uH;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(F,j){return this}}class o extends s{constructor(F,j,Q){super(),this.varKind=F,this.name=j,this.rhs=Q}render({es5:F,_n:j}){const Q=F?n.varKinds.var:this.varKind,se=this.rhs===void 0?"":` = ${this.rhs}`;return`${Q} ${this.name}${se};`+j}optimizeNames(F,j){if(F[this.name.str])return this.rhs&&(this.rhs=R(this.rhs,F,j)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(F,j,Q){super(),this.lhs=F,this.rhs=j,this.sideEffects=Q}render({_n:F}){return`${this.lhs} = ${this.rhs};`+F}optimizeNames(F,j){if(!(this.lhs instanceof t.Name&&!F[this.lhs.str]&&!this.sideEffects))return this.rhs=R(this.rhs,F,j),this}get names(){const F=this.lhs instanceof t.Name?{}:{...this.lhs.names};return M(F,this.rhs)}}class u extends a{constructor(F,j,Q,se){super(F,Q,se),this.op=j}render({_n:F}){return`${this.lhs} ${this.op}= ${this.rhs};`+F}}class l extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`${this.label}:`+F}}class c extends s{constructor(F){super(),this.label=F,this.names={}}render({_n:F}){return`break${this.label?` ${this.label}`:""};`+F}}class f extends s{constructor(F){super(),this.error=F}render({_n:F}){return`throw ${this.error};`+F}get names(){return this.error.names}}class d extends s{constructor(F){super(),this.code=F}render({_n:F}){return`${this.code};`+F}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(F,j){return this.code=R(this.code,F,j),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(F=[]){super(),this.nodes=F}render(F){return this.nodes.reduce((j,Q)=>j+Q.render(F),"")}optimizeNodes(){const{nodes:F}=this;let j=F.length;for(;j--;){const Q=F[j].optimizeNodes();Array.isArray(Q)?F.splice(j,1,...Q):Q?F[j]=Q:F.splice(j,1)}return F.length>0?this:void 0}optimizeNames(F,j){const{nodes:Q}=this;let se=Q.length;for(;se--;){const ae=Q[se];ae.optimizeNames(F,j)||(D(F,ae.names),Q.splice(se,1))}return Q.length>0?this:void 0}get names(){return this.nodes.reduce((F,j)=>z(F,j.names),{})}}class p extends h{render(F){return"{"+F._n+super.render(F)+"}"+F._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(F,j){super(j),this.condition=F}render(F){let j=`if(${this.condition})`+super.render(F);return this.else&&(j+="else "+this.else.render(F)),j}optimizeNodes(){super.optimizeNodes();const F=this.condition;if(F===!0)return this.nodes;let j=this.else;if(j){const Q=j.optimizeNodes();j=this.else=Array.isArray(Q)?new g(Q):Q}if(j)return F===!1?j instanceof y?j:j.nodes:this.nodes.length?this:new y(L(F),j instanceof y?[j]:j.nodes);if(!(F===!1||!this.nodes.length))return this}optimizeNames(F,j){var Q;if(this.else=(Q=this.else)===null||Q===void 0?void 0:Q.optimizeNames(F,j),!!(super.optimizeNames(F,j)||this.else))return this.condition=R(this.condition,F,j),this}get names(){const F=super.names;return M(F,this.condition),this.else&&z(F,this.else.names),F}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(F){super(),this.iteration=F}render(F){return`for(${this.iteration})`+super.render(F)}optimizeNames(F,j){if(super.optimizeNames(F,j))return this.iteration=R(this.iteration,F,j),this}get names(){return z(super.names,this.iteration.names)}}class b extends v{constructor(F,j,Q,se){super(),this.varKind=F,this.name=j,this.from=Q,this.to=se}render(F){const j=F.es5?n.varKinds.var:this.varKind,{name:Q,from:se,to:ae}=this;return`for(${j} ${Q}=${se}; ${Q}<${ae}; ${Q}++)`+super.render(F)}get names(){const F=M(super.names,this.from);return M(F,this.to)}}class E extends v{constructor(F,j,Q,se){super(),this.loop=F,this.varKind=j,this.name=Q,this.iterable=se}render(F){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(F)}optimizeNames(F,j){if(super.optimizeNames(F,j))return this.iterable=R(this.iterable,F,j),this}get names(){return z(super.names,this.iterable.names)}}class w extends p{constructor(F,j,Q){super(),this.name=F,this.args=j,this.async=Q}render(F){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(F)}}w.kind="func";class x extends h{render(F){return"return "+super.render(F)}}x.kind="return";class S extends p{render(F){let j="try"+super.render(F);return this.catch&&(j+=this.catch.render(F)),this.finally&&(j+=this.finally.render(F)),j}optimizeNodes(){var F,j;return super.optimizeNodes(),(F=this.catch)===null||F===void 0||F.optimizeNodes(),(j=this.finally)===null||j===void 0||j.optimizeNodes(),this}optimizeNames(F,j){var Q,se;return super.optimizeNames(F,j),(Q=this.catch)===null||Q===void 0||Q.optimizeNames(F,j),(se=this.finally)===null||se===void 0||se.optimizeNames(F,j),this}get names(){const F=super.names;return this.catch&&z(F,this.catch.names),this.finally&&z(F,this.finally.names),F}}class P extends p{constructor(F){super(),this.error=F}render(F){return`catch(${this.error})`+super.render(F)}}P.kind="catch";class A extends p{render(F){return"finally"+super.render(F)}}A.kind="finally";class O{constructor(F,j={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...j,_n:j.lines?`
`:""},this._extScope=F,this._scope=new n.Scope({parent:F}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(F){return this._scope.name(F)}scopeName(F){return this._extScope.name(F)}scopeValue(F,j){const Q=this._extScope.value(F,j);return(this._values[Q.prefix]||(this._values[Q.prefix]=new Set)).add(Q),Q}getScopeValue(F,j){return this._extScope.getValue(F,j)}scopeRefs(F){return this._extScope.scopeRefs(F,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(F,j,Q,se){const ae=this._scope.toName(j);return Q!==void 0&&se&&(this._constants[ae.str]=Q),this._leafNode(new o(F,ae,Q)),ae}const(F,j,Q){return this._def(n.varKinds.const,F,j,Q)}let(F,j,Q){return this._def(n.varKinds.let,F,j,Q)}var(F,j,Q){return this._def(n.varKinds.var,F,j,Q)}assign(F,j,Q){return this._leafNode(new a(F,j,Q))}add(F,j){return this._leafNode(new u(F,e.operators.ADD,j))}code(F){return typeof F=="function"?F():F!==t.nil&&this._leafNode(new d(F)),this}object(...F){const j=["{"];for(const[Q,se]of F)j.length>1&&j.push(","),j.push(Q),(Q!==se||this.opts.es5)&&(j.push(":"),(0,t.addCodeArg)(j,se));return j.push("}"),new t._Code(j)}if(F,j,Q){if(this._blockNode(new y(F)),j&&Q)this.code(j).else().code(Q).endIf();else if(j)this.code(j).endIf();else if(Q)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(F){return this._elseNode(new y(F))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(F,j){return this._blockNode(F),j&&this.code(j).endFor(),this}for(F,j){return this._for(new _(F),j)}forRange(F,j,Q,se,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(F);return this._for(new b(ae,ce,j,Q),()=>se(ce))}forOf(F,j,Q,se=n.varKinds.const){const ae=this._scope.toName(F);if(this.opts.es5){const ce=j instanceof t.Name?j:this.var("_arr",j);return this.forRange("_i",0,(0,t._)`${ce}.length`,le=>{this.var(ae,(0,t._)`${ce}[${le}]`),Q(ae)})}return this._for(new E("of",se,ae,j),()=>Q(ae))}forIn(F,j,Q,se=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(F,(0,t._)`Object.keys(${j})`,Q);const ae=this._scope.toName(F);return this._for(new E("in",se,ae,j),()=>Q(ae))}endFor(){return this._endBlockNode(v)}label(F){return this._leafNode(new l(F))}break(F){return this._leafNode(new c(F))}return(F){const j=new x;if(this._blockNode(j),this.code(F),j.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(F,j,Q){if(!j&&!Q)throw new Error('CodeGen: "try" without "catch" and "finally"');const se=new S;if(this._blockNode(se),this.code(F),j){const ae=this.name("e");this._currNode=se.catch=new P(ae),j(ae)}return Q&&(this._currNode=se.finally=new A,this.code(Q)),this._endBlockNode(P,A)}throw(F){return this._leafNode(new f(F))}block(F,j){return this._blockStarts.push(this._nodes.length),F&&this.code(F).endBlock(j),this}endBlock(F){const j=this._blockStarts.pop();if(j===void 0)throw new Error("CodeGen: not in self-balancing block");const Q=this._nodes.length-j;if(Q<0||F!==void 0&&Q!==F)throw new Error(`CodeGen: wrong number of nodes: ${Q} vs ${F} expected`);return this._nodes.length=j,this}func(F,j=t.nil,Q,se){return this._blockNode(new w(F,j,Q)),se&&this.code(se).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(F=1){for(;F-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(F){return this._currNode.nodes.push(F),this}_blockNode(F){this._currNode.nodes.push(F),this._nodes.push(F)}_endBlockNode(F,j){const Q=this._currNode;if(Q instanceof F||j&&Q instanceof j)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${j?`${F.kind}/${j.kind}`:F.kind}"`)}_elseNode(F){const j=this._currNode;if(!(j instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=j.else=F,this}get _root(){return this._nodes[0]}get _currNode(){const F=this._nodes;return F[F.length-1]}set _currNode(F){const j=this._nodes;j[j.length-1]=F}}e.CodeGen=O;function z(q,F){for(const j in F)q[j]=(q[j]||0)+(F[j]||0);return q}function M(q,F){return F instanceof t._CodeOrName?z(q,F.names):q}function R(q,F,j){if(q instanceof t.Name)return Q(q);if(!se(q))return q;return new t._Code(q._items.reduce((ae,ce)=>(ce instanceof t.Name&&(ce=Q(ce)),ce instanceof t._Code?ae.push(...ce._items):ae.push(ce),ae),[]));function Q(ae){const ce=j[ae.str];return ce===void 0||F[ae.str]!==1?ae:(delete F[ae.str],ce)}function se(ae){return ae instanceof t._Code&&ae._items.some(ce=>ce instanceof t.Name&&F[ce.str]===1&&j[ce.str]!==void 0)}}function D(q,F){for(const j in F)q[j]=(q[j]||0)-(F[j]||0)}function L(q){return typeof q=="boolean"||typeof q=="number"||q===null?!q:(0,t._)`!${$(q)}`}e.not=L;const V=k(e.operators.AND);function B(...q){return q.reduce(V)}e.and=B;const H=k(e.operators.OR);function U(...q){return q.reduce(H)}e.or=U;function k(q){return(F,j)=>F===t.nil?j:j===t.nil?F:(0,t._)`${$(F)} ${q} ${$(j)}`}function $(q){return q instanceof t.Name?q:(0,t._)`(${q})`}})(An);var Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=An,n=HC;function r(w){const x={};for(const S of w)x[S]=!0;return x}e.toHash=r;function i(w,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(s(w,x),!o(x,w.self.RULES.all))}e.alwaysValidSchema=i;function s(w,x=w.schema){const{opts:S,self:P}=w;if(!S.strictSchema||typeof x=="boolean")return;const A=P.RULES.keywords;for(const O in x)A[O]||E(w,`unknown keyword: "${O}"`)}e.checkUnknownRules=s;function o(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(x[S])return!0;return!1}e.schemaHasRules=o;function a(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(S!=="$ref"&&x.all[S])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:w,schemaPath:x},S,P,A){if(!A){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${w}${x}${(0,t.getProperty)(P)}`}e.schemaRefOrVal=u;function l(w){return d(decodeURIComponent(w))}e.unescapeFragment=l;function c(w){return encodeURIComponent(f(w))}e.escapeFragment=c;function f(w){return typeof w=="number"?`${w}`:w.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(w){return w.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(w,x){if(Array.isArray(w))for(const S of w)x(S);else x(w)}e.eachItem=h;function p({mergeNames:w,mergeToName:x,mergeValues:S,resultToName:P}){return(A,O,z,M)=>{const R=z===void 0?O:z instanceof t.Name?(O instanceof t.Name?w(A,O,z):x(A,O,z),z):O instanceof t.Name?(x(A,z,O),O):S(O,z);return M===t.Name&&!(R instanceof t.Name)?P(A,R):R}}e.mergeEvaluated={props:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>{w.if((0,t._)`${x} === true`,()=>w.assign(S,!0),()=>w.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${x})`))}),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>{x===!0?w.assign(S,!0):(w.assign(S,(0,t._)`${S} || {}`),g(w,S,x))}),mergeValues:(w,x)=>w===!0?!0:{...w,...x},resultToName:m}),items:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>w.assign(S,(0,t._)`${x} === true ? true : ${S} > ${x} ? ${S} : ${x}`)),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>w.assign(S,x===!0?!0:(0,t._)`${S} > ${x} ? ${S} : ${x}`)),mergeValues:(w,x)=>w===!0?!0:Math.max(w,x),resultToName:(w,x)=>w.var("items",x)})};function m(w,x){if(x===!0)return w.var("props",!0);const S=w.var("props",(0,t._)`{}`);return x!==void 0&&g(w,S,x),S}e.evaluatedPropsToName=m;function g(w,x,S){Object.keys(S).forEach(P=>w.assign((0,t._)`${x}${(0,t.getProperty)(P)}`,!0))}e.setEvaluated=g;const y={};function v(w,x){return w.scopeValue("func",{ref:x,code:y[x.code]||(y[x.code]=new n._Code(x.code))})}e.useFunc=v;var _;(function(w){w[w.Num=0]="Num",w[w.Str=1]="Str"})(_=e.Type||(e.Type={}));function b(w,x,S){if(w instanceof t.Name){const P=x===_.Num;return S?P?(0,t._)`"[" + ${w} + "]"`:(0,t._)`"['" + ${w} + "']"`:P?(0,t._)`"/" + ${w}`:(0,t._)`"/" + ${w}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(w).toString():"/"+f(w)}e.getErrorPath=b;function E(w,x,S=w.opts.strictSchema){if(S){if(x=`strict mode: ${x}`,S===!0)throw new Error(x);w.self.logger.warn(x)}}e.checkStrictMode=E})(Zn);var ph={};Object.defineProperty(ph,"__esModule",{value:!0});const Mo=An,d5t={data:new Mo.Name("data"),valCxt:new Mo.Name("valCxt"),instancePath:new Mo.Name("instancePath"),parentData:new Mo.Name("parentData"),parentDataProperty:new Mo.Name("parentDataProperty"),rootData:new Mo.Name("rootData"),dynamicAnchors:new Mo.Name("dynamicAnchors"),vErrors:new Mo.Name("vErrors"),errors:new Mo.Name("errors"),this:new Mo.Name("this"),self:new Mo.Name("self"),scope:new Mo.Name("scope"),json:new Mo.Name("json"),jsonPos:new Mo.Name("jsonPos"),jsonLen:new Mo.Name("jsonLen"),jsonPart:new Mo.Name("jsonPart")};ph.default=d5t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=An,n=Zn,r=ph;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:b}=g,{gen:E,compositeRule:w,allErrors:x}=b,S=f(g,y,v);_??(w||x)?u(E,S):l(b,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:b,compositeRule:E,allErrors:w}=_,x=f(g,y,v);u(b,x),E||w||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:b,it:E}){if(b===void 0)throw new Error("ajv implementation error");const w=g.name("err");g.forRange("i",b,r.default.errors,x=>{g.const(w,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${w}.instancePath === undefined`,()=>g.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${w}.schema`,v),g.assign((0,t._)`${w}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:b}=g;b.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:b}=g,E=[h(b,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let b=_?y:(0,t.str)`${y}/${g}`;return v&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,b]}function m(g,{params:y,message:v},_){const{keyword:b,data:E,schemaValue:w,it:x}=g,{opts:S,propertyName:P,topSchemaRef:A,schemaPath:O}=x;_.push([c.keyword,b],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&_.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&_.push([c.schema,w],[c.parentSchema,(0,t._)`${A}${O}`],[r.default.data,E]),P&&_.push([c.propertyName,P])}})(PI);Object.defineProperty(eE,"__esModule",{value:!0});eE.boolOrEmptySchema=eE.topBoolOrEmptySchema=void 0;const h5t=PI,p5t=An,m5t=ph,g5t={message:"boolean schema is false"};function y5t(e){const{gen:t,schema:n,validateName:r}=e;n===!1?OMe(e,!1):typeof n=="object"&&n.$async===!0?t.return(m5t.default.data):(t.assign((0,p5t._)`${r}.errors`,null),t.return(!0))}eE.topBoolOrEmptySchema=y5t;function v5t(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),OMe(e)):n.var(t,!0)}eE.boolOrEmptySchema=v5t;function OMe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,h5t.reportError)(i,g5t,void 0,t)}var kI={},sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.getRules=sv.isJSONType=void 0;const _5t=["string","number","integer","boolean","null","object","array"],b5t=new Set(_5t);function w5t(e){return typeof e=="string"&&b5t.has(e)}sv.isJSONType=w5t;function E5t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}sv.getRules=E5t;var Ep={};Object.defineProperty(Ep,"__esModule",{value:!0});Ep.shouldUseRule=Ep.shouldUseGroup=Ep.schemaHasRulesForType=void 0;function x5t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&PMe(e,r)}Ep.schemaHasRulesForType=x5t;function PMe(e,t){return t.rules.some(n=>kMe(e,n))}Ep.shouldUseGroup=PMe;function kMe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Ep.shouldUseRule=kMe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=sv,n=Ep,r=PI,i=An,s=Zn;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const b=u(_.type);if(b.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&b.push("null")}return b}e.getSchemaTypes=a;function u(_){const b=Array.isArray(_)?_:_?[_]:[];if(b.every(t.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}e.getJSONTypes=u;function l(_,b){const{gen:E,data:w,opts:x}=_,S=f(b,x.coerceTypes),P=b.length>0&&!(S.length===0&&b.length===1&&(0,n.schemaHasRulesForType)(_,b[0]));if(P){const A=m(b,w,x.strictNumbers,o.Wrong);E.if(A,()=>{S.length?d(_,b,S):y(_)})}return P}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,b){return b?_.filter(E=>c.has(E)||b==="array"&&E==="array"):[]}function d(_,b,E){const{gen:w,data:x,opts:S}=_,P=w.let("dataType",(0,i._)`typeof ${x}`),A=w.let("coerced",(0,i._)`undefined`);S.coerceTypes==="array"&&w.if((0,i._)`${P} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>w.assign(x,(0,i._)`${x}[0]`).assign(P,(0,i._)`typeof ${x}`).if(m(b,x,S.strictNumbers),()=>w.assign(A,x))),w.if((0,i._)`${A} !== undefined`);for(const z of E)(c.has(z)||z==="array"&&S.coerceTypes==="array")&&O(z);w.else(),y(_),w.endIf(),w.if((0,i._)`${A} !== undefined`,()=>{w.assign(x,A),h(_,A)});function O(z){switch(z){case"string":w.elseIf((0,i._)`${P} == "number" || ${P} == "boolean"`).assign(A,(0,i._)`"" + ${x}`).elseIf((0,i._)`${x} === null`).assign(A,(0,i._)`""`);return;case"number":w.elseIf((0,i._)`${P} == "boolean" || ${x} === null
              || (${P} == "string" && ${x} && ${x} == +${x})`).assign(A,(0,i._)`+${x}`);return;case"integer":w.elseIf((0,i._)`${P} === "boolean" || ${x} === null
              || (${P} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(A,(0,i._)`+${x}`);return;case"boolean":w.elseIf((0,i._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(A,!1).elseIf((0,i._)`${x} === "true" || ${x} === 1`).assign(A,!0);return;case"null":w.elseIf((0,i._)`${x} === "" || ${x} === 0 || ${x} === false`),w.assign(A,null);return;case"array":w.elseIf((0,i._)`${P} === "string" || ${P} === "number"
              || ${P} === "boolean" || ${x} === null`).assign(A,(0,i._)`[${x}]`)}}}function h({gen:_,parentData:b,parentDataProperty:E},w){_.if((0,i._)`${b} !== undefined`,()=>_.assign((0,i._)`${b}[${E}]`,w))}function p(_,b,E,w=o.Correct){const x=w===o.Correct?i.operators.EQ:i.operators.NEQ;let S;switch(_){case"null":return(0,i._)`${b} ${x} null`;case"array":S=(0,i._)`Array.isArray(${b})`;break;case"object":S=(0,i._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":S=P((0,i._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":S=P();break;default:return(0,i._)`typeof ${b} ${x} ${_}`}return w===o.Correct?S:(0,i.not)(S);function P(A=i.nil){return(0,i.and)((0,i._)`typeof ${b} == "number"`,A,E?(0,i._)`isFinite(${b})`:i.nil)}}e.checkDataType=p;function m(_,b,E,w){if(_.length===1)return p(_[0],b,E,w);let x;const S=(0,s.toHash)(_);if(S.array&&S.object){const P=(0,i._)`typeof ${b} != "object"`;x=S.null?P:(0,i._)`!${b} || ${P}`,delete S.null,delete S.array,delete S.object}else x=i.nil;S.number&&delete S.integer;for(const P in S)x=(0,i.and)(x,p(P,b,E,w));return x}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:b})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${b}}`};function y(_){const b=v(_);(0,r.reportError)(b,g)}e.reportTypeError=y;function v(_){const{gen:b,data:E,schema:w}=_,x=(0,s.schemaRefOrVal)(_,w,"type");return{gen:b,keyword:"type",data:E,schema:w.type,schemaCode:x,schemaValue:x,parentSchema:w,params:{},it:_}}})(kI);var cF={};Object.defineProperty(cF,"__esModule",{value:!0});cF.assignDefaults=void 0;const P_=An,S5t=Zn;function T5t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Xme(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Xme(e,s,i.default))}cF.assignDefaults=T5t;function Xme(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,P_._)`${s}${(0,P_.getProperty)(t)}`;if(i){(0,S5t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,P_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,P_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,P_._)`${a} = ${(0,P_.stringify)(n)}`)}var _d={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Qr=An,BQ=Zn,Om=ph,C5t=Zn;function A5t(e,t){const{gen:n,data:r,it:i}=e;n.if(UQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Qr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=A5t;function I5t({gen:e,data:t,it:{opts:n}},r,i){return(0,Qr.or)(...r.map(s=>(0,Qr.and)(UQ(e,t,s,n.ownProperties),(0,Qr._)`${i} = ${s}`)))}Tn.checkMissingProp=I5t;function O5t(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=O5t;function $Me(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Qr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=$Me;function zQ(e,t,n){return(0,Qr._)`${$Me(e)}.call(${t}, ${n})`}Tn.isOwnProperty=zQ;function P5t(e,t,n,r){const i=(0,Qr._)`${t}${(0,Qr.getProperty)(n)} !== undefined`;return r?(0,Qr._)`${i} && ${zQ(e,t,n)}`:i}Tn.propertyInData=P5t;function UQ(e,t,n,r){const i=(0,Qr._)`${t}${(0,Qr.getProperty)(n)} === undefined`;return r?(0,Qr.or)(i,(0,Qr.not)(zQ(e,t,n))):i}Tn.noPropertyInData=UQ;function RMe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=RMe;function k5t(e,t){return RMe(t).filter(n=>!(0,BQ.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=k5t;function $5t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Qr._)`${e}, ${t}, ${r}${i}`:t,f=[[Om.default.instancePath,(0,Qr.strConcat)(Om.default.instancePath,s)],[Om.default.parentData,o.parentData],[Om.default.parentDataProperty,o.parentDataProperty],[Om.default.rootData,Om.default.rootData]];o.opts.dynamicRef&&f.push([Om.default.dynamicAnchors,Om.default.dynamicAnchors]);const d=(0,Qr._)`${c}, ${n.object(...f)}`;return u!==Qr.nil?(0,Qr._)`${a}.call(${u}, ${d})`:(0,Qr._)`${a}(${d})`}Tn.callValidateCode=$5t;const R5t=(0,Qr._)`new RegExp`;function N5t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Qr._)`${i.code==="new RegExp"?R5t:(0,C5t.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=N5t;function D5t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Qr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:BQ.Type.Num},s),t.if((0,Qr.not)(s),a)})}}Tn.validateArray=D5t;function M5t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,BQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Qr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Qr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=M5t;Object.defineProperty(_d,"__esModule",{value:!0});_d.validateKeywordUsage=_d.validSchemaType=_d.funcKeywordCode=_d.macroKeywordCode=void 0;const wa=An,qy=ph,L5t=Tn,F5t=PI;function j5t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=NMe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:wa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}_d.macroKeywordCode=j5t;function B5t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;U5t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=NMe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Qme(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Qme(e),g(()=>z5t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,wa._)`await `),v=>r.assign(f,!1).if((0,wa._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,wa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,wa._)`${c}.errors`;return r.assign(y,null),m(wa.nil),y}function m(y=t.async?(0,wa._)`await `:wa.nil){const v=u.opts.passContext?qy.default.this:qy.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,wa._)`${y}${(0,L5t.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,wa.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}_d.funcKeywordCode=B5t;function Qme(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,wa._)`${r.parentData}[${r.parentDataProperty}]`))}function z5t(e,t){const{gen:n}=e;n.if((0,wa._)`Array.isArray(${t})`,()=>{n.assign(qy.default.vErrors,(0,wa._)`${qy.default.vErrors} === null ? ${t} : ${qy.default.vErrors}.concat(${t})`).assign(qy.default.errors,(0,wa._)`${qy.default.vErrors}.length`),(0,F5t.extendErrors)(e)},()=>e.error())}function U5t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function NMe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,wa.stringify)(n)})}function V5t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}_d.validSchemaType=V5t;function H5t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}_d.validateKeywordUsage=H5t;var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.extendSubschemaMode=Fg.extendSubschemaData=Fg.getSubschema=void 0;const dd=An,DMe=Zn;function q5t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,dd._)`${e.schemaPath}${(0,dd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,dd._)`${e.schemaPath}${(0,dd.getProperty)(t)}${(0,dd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,DMe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Fg.getSubschema=q5t;function W5t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,dd._)`${t.data}${(0,dd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,dd.str)`${l}${(0,DMe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,dd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof dd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Fg.extendSubschemaData=W5t;function G5t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Fg.extendSubschemaMode=G5t;var po={},MMe={exports:{}},dg=MMe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};O$(t,r,i,e,"",e)};dg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};dg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};dg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};dg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function O$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in dg.arrayKeywords)for(var d=0;d<f.length;d++)O$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in dg.propsKeywords){if(f&&typeof f=="object")for(var h in f)O$(e,t,n,f[h],i+"/"+c+"/"+Y5t(h),s,i,c,r,h)}else(c in dg.keywords||e.allKeys&&!(c in dg.skipKeywords))&&O$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function Y5t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var K5t=MMe.exports;Object.defineProperty(po,"__esModule",{value:!0});po.getSchemaRefs=po.resolveUrl=po.normalizeId=po._getFullPath=po.getFullPath=po.inlineRef=void 0;const X5t=Zn,Q5t=SK,J5t=K5t,Z5t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function e8t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!lH(e):t?LMe(e)<=t:!1}po.inlineRef=e8t;const t8t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function lH(e){for(const t in e){if(t8t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(lH)||typeof n=="object"&&lH(n))return!0}return!1}function LMe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Z5t.has(n)&&(typeof e[n]=="object"&&(0,X5t.eachItem)(e[n],r=>t+=LMe(r)),t===1/0))return 1/0}return t}function FMe(e,t="",n){n!==!1&&(t=ew(t));const r=e.parse(t);return jMe(e,r)}po.getFullPath=FMe;function jMe(e,t){return e.serialize(t).split("#")[0]+"#"}po._getFullPath=jMe;const n8t=/#\/?$/;function ew(e){return e?e.replace(n8t,""):""}po.normalizeId=ew;function r8t(e,t,n){return n=ew(n),e.resolve(t,n)}po.resolveUrl=r8t;const i8t=/^[a-z_][-a-z0-9._]*$/i;function s8t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=ew(e[n]||t),s={"":i},o=FMe(r,i,!1),a={},u=new Set;return J5t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const b=this.opts.uriResolver.resolve;if(_=ew(g?b(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==ew(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!i8t.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!Q5t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}po.getSchemaRefs=s8t;Object.defineProperty(lf,"__esModule",{value:!0});lf.getData=lf.KeywordCxt=lf.validateFunctionCode=void 0;const BMe=eE,Jme=kI,VQ=Ep,F3=kI,o8t=cF,E2=_d,xB=Fg,Ot=An,Gt=ph,a8t=po,xp=Zn,AS=PI;function u8t(e){if(VMe(e)&&(HMe(e),UMe(e))){f8t(e);return}zMe(e,()=>(0,BMe.topBoolOrEmptySchema)(e))}lf.validateFunctionCode=u8t;function zMe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${Gt.default.data}, ${Gt.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${Zme(n,i)}`),c8t(e,i),e.code(s)}):e.func(t,(0,Ot._)`${Gt.default.data}, ${l8t(i)}`,r.$async,()=>e.code(Zme(n,i)).code(s))}function l8t(e){return(0,Ot._)`{${Gt.default.instancePath}="", ${Gt.default.parentData}, ${Gt.default.parentDataProperty}, ${Gt.default.rootData}=${Gt.default.data}${e.dynamicRef?(0,Ot._)`, ${Gt.default.dynamicAnchors}={}`:Ot.nil}}={}`}function c8t(e,t){e.if(Gt.default.valCxt,()=>{e.var(Gt.default.instancePath,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.instancePath}`),e.var(Gt.default.parentData,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.parentData}`),e.var(Gt.default.parentDataProperty,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.parentDataProperty}`),e.var(Gt.default.rootData,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.rootData}`),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,Ot._)`${Gt.default.valCxt}.${Gt.default.dynamicAnchors}`)},()=>{e.var(Gt.default.instancePath,(0,Ot._)`""`),e.var(Gt.default.parentData,(0,Ot._)`undefined`),e.var(Gt.default.parentDataProperty,(0,Ot._)`undefined`),e.var(Gt.default.rootData,Gt.default.data),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,Ot._)`{}`)})}function f8t(e){const{schema:t,opts:n,gen:r}=e;zMe(e,()=>{n.$comment&&t.$comment&&WMe(e),g8t(e),r.let(Gt.default.vErrors,null),r.let(Gt.default.errors,0),n.unevaluated&&d8t(e),qMe(e),_8t(e)})}function d8t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function Zme(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function h8t(e,t){if(VMe(e)&&(HMe(e),UMe(e))){p8t(e,t);return}(0,BMe.boolOrEmptySchema)(e,t)}function UMe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function VMe(e){return typeof e.schema!="boolean"}function p8t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&WMe(e),y8t(e),v8t(e);const s=r.const("_errs",Gt.default.errors);qMe(e,s),r.var(t,(0,Ot._)`${s} === ${Gt.default.errors}`)}function HMe(e){(0,xp.checkUnknownRules)(e),m8t(e)}function qMe(e,t){if(e.opts.jtd)return ege(e,[],!1,t);const n=(0,Jme.getSchemaTypes)(e.schema),r=(0,Jme.coerceAndCheckDataType)(e,n);ege(e,n,!r,t)}function m8t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,xp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function g8t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,xp.checkStrictMode)(e,"default is ignored in the schema root")}function y8t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,a8t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function v8t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function WMe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${Gt.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${Gt.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function _8t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${Gt.default.errors} === 0`,()=>t.return(Gt.default.data),()=>t.throw((0,Ot._)`new ${i}(${Gt.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,Gt.default.vErrors),s.unevaluated&&b8t(e),t.return((0,Ot._)`${Gt.default.errors} === 0`))}function b8t({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function ege(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,xp.schemaHasRulesButRef)(s,c))){i.block(()=>KMe(e,"$ref",c.all.$ref.definition));return}u.jtd||w8t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,VQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,F3.checkDataType)(d.type,o,u.strictNumbers)),tge(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,F3.reportTypeError)(e)),i.endIf()):tge(e,d),a||i.if((0,Ot._)`${Gt.default.errors} === ${r||0}`))}}function tge(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,o8t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,VQ.shouldUseRule)(r,s)&&KMe(e,s.keyword,s.definition,t.type)})}function w8t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(E8t(e,t),e.opts.allowUnionTypes||x8t(e,t),S8t(e,e.dataTypes))}function E8t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{GMe(e.dataTypes,n)||HQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),C8t(e,t)}}function x8t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&HQ(e,"use allowUnionTypes to allow union type keyword")}function S8t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,VQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>T8t(t,o))&&HQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function T8t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function GMe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function C8t(e,t){const n=[];for(const r of e.dataTypes)GMe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function HQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,xp.checkStrictMode)(e,t,e.opts.strictTypes)}class YMe{constructor(t,n,r){if((0,E2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,xp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",XMe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,E2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Gt.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?AS.reportExtraError:AS.reportError)(this,this.def.error,n)}$dataError(){(0,AS.reportError)(this,this.def.$dataError||AS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,AS.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,F3.checkDataTypes)(u,n,s.opts.strictNumbers,F3.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${u}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,xB.getSubschema)(this.it,t);(0,xB.extendSubschemaData)(r,this.it,t),(0,xB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return h8t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=xp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=xp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}lf.KeywordCxt=YMe;function KMe(e,t,n,r){const i=new YMe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,E2.funcKeywordCode)(i,n):"macro"in n?(0,E2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,E2.funcKeywordCode)(i,n)}const A8t=/^\/(?:[^~]|~0|~1)*$/,I8t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function XMe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Gt.default.rootData;if(e[0]==="/"){if(!A8t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Gt.default.rootData}else{const l=I8t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,xp.unescapeJsonPointer)(l))}`,o=(0,Ot._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}lf.getData=XMe;var $I={};Object.defineProperty($I,"__esModule",{value:!0});class O8t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}$I.default=O8t;var RI={};Object.defineProperty(RI,"__esModule",{value:!0});const SB=po;class P8t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,SB.resolveUrl)(t,n,r),this.missingSchema=(0,SB.normalizeId)((0,SB.getFullPath)(t,this.missingRef))}}RI.default=P8t;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.resolveSchema=lu.getCompilingSchema=lu.resolveRef=lu.compileSchema=lu.SchemaEnv=void 0;const Oc=An,k8t=$I,hy=ph,Kc=po,nge=Zn,$8t=lf;class fF{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Kc.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}lu.SchemaEnv=fF;function qQ(e){const t=QMe.call(this,e);if(t)return t;const n=(0,Kc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Oc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:k8t.default,code:(0,Oc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:hy.default.data,parentData:hy.default.parentData,parentDataProperty:hy.default.parentDataProperty,dataNames:[hy.default.data],dataPathArr:[Oc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Oc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Oc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Oc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,$8t.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(hy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${hy.default.self}`,`${hy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Oc.Name?void 0:p,items:m instanceof Oc.Name?void 0:m,dynamicProps:p instanceof Oc.Name,dynamicItems:m instanceof Oc.Name},h.source&&(h.source.evaluated=(0,Oc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}lu.compileSchema=qQ;function R8t(e,t,n){var r;n=(0,Kc.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=M8t.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new fF({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=N8t.call(this,s)}lu.resolveRef=R8t;function N8t(e){return(0,Kc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:qQ.call(this,e)}function QMe(e){for(const t of this._compilations)if(D8t(t,e))return t}lu.getCompilingSchema=QMe;function D8t(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function M8t(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||dF.call(this,e,t)}function dF(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Kc._getFullPath)(this.opts.uriResolver,n);let i=(0,Kc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return TB.call(this,n,e);const s=(0,Kc.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=dF.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:TB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||qQ.call(this,o),s===(0,Kc.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Kc.resolveUrl)(this.opts.uriResolver,i,l)),new fF({schema:a,schemaId:u,root:e,baseId:i})}return TB.call(this,n,o)}}lu.resolveSchema=dF;const L8t=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function TB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,nge.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!L8t.has(a)&&l&&(t=(0,Kc.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,nge.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Kc.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=dF.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new fF({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const F8t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",j8t="Meta-schema for $data reference (JSON AnySchema extension proposal)",B8t="object",z8t=["$data"],U8t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},V8t=!1,H8t={$id:F8t,description:j8t,type:B8t,required:z8t,properties:U8t,additionalProperties:V8t};var WQ={},cH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(du,function(n){function r(){for(var ne=arguments.length,J=Array(ne),ie=0;ie<ne;ie++)J[ie]=arguments[ie];if(J.length>1){J[0]=J[0].slice(0,-1);for(var ve=J.length-1,ye=1;ye<ve;++ye)J[ye]=J[ye].slice(1,-1);return J[ve]=J[ve].slice(1),J.join("")}else return J[0]}function i(ne){return"(?:"+ne+")"}function s(ne){return ne===void 0?"undefined":ne===null?"null":Object.prototype.toString.call(ne).split(" ").pop().split("]").shift().toLowerCase()}function o(ne){return ne.toUpperCase()}function a(ne){return ne!=null?ne instanceof Array?ne:typeof ne.length!="number"||ne.split||ne.setInterval||ne.call?[ne]:Array.prototype.slice.call(ne):[]}function u(ne,J){var ie=ne;if(J)for(var ve in J)ie[ve]=J[ve];return ie}function l(ne){var J="[A-Za-z]",ie="[0-9]",ve=r(ie,"[A-Fa-f]"),ye=i(i("%[EFef]"+ve+"%"+ve+ve+"%"+ve+ve)+"|"+i("%[89A-Fa-f]"+ve+"%"+ve+ve)+"|"+i("%"+ve+ve)),yt="[\\:\\/\\?\\#\\[\\]\\@]",Ae="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",pt=r(yt,Ae),jt=ne?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",At=ne?"[\\uE000-\\uF8FF]":"[]",Ht=r(J,ie,"[\\-\\.\\_\\~]",jt);i(J+r(J,ie,"[\\+\\-\\.]")+"*"),i(i(ye+"|"+r(Ht,Ae,"[\\:]"))+"*");var fn=i(i("25[0-5]")+"|"+i("2[0-4]"+ie)+"|"+i("1"+ie+ie)+"|"+i("0?[1-9]"+ie)+"|0?0?"+ie),Tr=i(fn+"\\."+fn+"\\."+fn+"\\."+fn),zt=i(ve+"{1,4}"),pr=i(i(zt+"\\:"+zt)+"|"+Tr),Xt=i(i(zt+"\\:")+"{6}"+pr),er=i("\\:\\:"+i(zt+"\\:")+"{5}"+pr),si=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+pr),hs=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+pr),Vi=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+pr),ma=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+pr),ro=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+pr),_i=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),bt=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),wn=i([Xt,er,si,hs,Vi,ma,ro,_i,bt].join("|")),jr=i(i(Ht+"|"+ye)+"+");i("[vV]"+ve+"+\\."+r(Ht,Ae,"[\\:]")+"+"),i(i(ye+"|"+r(Ht,Ae))+"*");var Rs=i(ye+"|"+r(Ht,Ae,"[\\:\\@]"));return i(i(ye+"|"+r(Ht,Ae,"[\\@]"))+"+"),i(i(Rs+"|"+r("[\\/\\?]",At))+"*"),{NOT_SCHEME:new RegExp(r("[^]",J,ie,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Ht,Ae),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Ht,Ae),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Ht,Ae),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Ht,Ae),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Ht,Ae,"[\\:\\@\\/\\?]",At),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Ht,Ae,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Ht,Ae),"g"),UNRESERVED:new RegExp(Ht,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Ht,pt),"g"),PCT_ENCODED:new RegExp(ye,"g"),IPV4ADDRESS:new RegExp("^("+Tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+wn+")"+i(i("\\%25|\\%(?!"+ve+"{2})")+"("+jr+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ne(J,ie){var ve=[],ye=!0,yt=!1,Ae=void 0;try{for(var pt=J[Symbol.iterator](),jt;!(ye=(jt=pt.next()).done)&&(ve.push(jt.value),!(ie&&ve.length===ie));ye=!0);}catch(At){yt=!0,Ae=At}finally{try{!ye&&pt.return&&pt.return()}finally{if(yt)throw Ae}}return ve}return function(J,ie){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return ne(J,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ne){if(Array.isArray(ne)){for(var J=0,ie=Array(ne.length);J<ne.length;J++)ie[J]=ne[J];return ie}else return Array.from(ne)},p=2147483647,m=36,g=1,y=26,v=38,_=700,b=72,E=128,w="-",x=/^xn--/,S=/[^\0-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=m-g,z=Math.floor,M=String.fromCharCode;function R(ne){throw new RangeError(A[ne])}function D(ne,J){for(var ie=[],ve=ne.length;ve--;)ie[ve]=J(ne[ve]);return ie}function L(ne,J){var ie=ne.split("@"),ve="";ie.length>1&&(ve=ie[0]+"@",ne=ie[1]),ne=ne.replace(P,".");var ye=ne.split("."),yt=D(ye,J).join(".");return ve+yt}function V(ne){for(var J=[],ie=0,ve=ne.length;ie<ve;){var ye=ne.charCodeAt(ie++);if(ye>=55296&&ye<=56319&&ie<ve){var yt=ne.charCodeAt(ie++);(yt&64512)==56320?J.push(((ye&1023)<<10)+(yt&1023)+65536):(J.push(ye),ie--)}else J.push(ye)}return J}var B=function(J){return String.fromCodePoint.apply(String,h(J))},H=function(J){return J-48<10?J-22:J-65<26?J-65:J-97<26?J-97:m},U=function(J,ie){return J+22+75*(J<26)-((ie!=0)<<5)},k=function(J,ie,ve){var ye=0;for(J=ve?z(J/_):J>>1,J+=z(J/ie);J>O*y>>1;ye+=m)J=z(J/O);return z(ye+(O+1)*J/(J+v))},$=function(J){var ie=[],ve=J.length,ye=0,yt=E,Ae=b,pt=J.lastIndexOf(w);pt<0&&(pt=0);for(var jt=0;jt<pt;++jt)J.charCodeAt(jt)>=128&&R("not-basic"),ie.push(J.charCodeAt(jt));for(var At=pt>0?pt+1:0;At<ve;){for(var Ht=ye,fn=1,Tr=m;;Tr+=m){At>=ve&&R("invalid-input");var zt=H(J.charCodeAt(At++));(zt>=m||zt>z((p-ye)/fn))&&R("overflow"),ye+=zt*fn;var pr=Tr<=Ae?g:Tr>=Ae+y?y:Tr-Ae;if(zt<pr)break;var Xt=m-pr;fn>z(p/Xt)&&R("overflow"),fn*=Xt}var er=ie.length+1;Ae=k(ye-Ht,er,Ht==0),z(ye/er)>p-yt&&R("overflow"),yt+=z(ye/er),ye%=er,ie.splice(ye++,0,yt)}return String.fromCodePoint.apply(String,ie)},q=function(J){var ie=[];J=V(J);var ve=J.length,ye=E,yt=0,Ae=b,pt=!0,jt=!1,At=void 0;try{for(var Ht=J[Symbol.iterator](),fn;!(pt=(fn=Ht.next()).done);pt=!0){var Tr=fn.value;Tr<128&&ie.push(M(Tr))}}catch(Se){jt=!0,At=Se}finally{try{!pt&&Ht.return&&Ht.return()}finally{if(jt)throw At}}var zt=ie.length,pr=zt;for(zt&&ie.push(w);pr<ve;){var Xt=p,er=!0,si=!1,hs=void 0;try{for(var Vi=J[Symbol.iterator](),ma;!(er=(ma=Vi.next()).done);er=!0){var ro=ma.value;ro>=ye&&ro<Xt&&(Xt=ro)}}catch(Se){si=!0,hs=Se}finally{try{!er&&Vi.return&&Vi.return()}finally{if(si)throw hs}}var _i=pr+1;Xt-ye>z((p-yt)/_i)&&R("overflow"),yt+=(Xt-ye)*_i,ye=Xt;var bt=!0,wn=!1,jr=void 0;try{for(var Rs=J[Symbol.iterator](),Ga;!(bt=(Ga=Rs.next()).done);bt=!0){var W=Ga.value;if(W<ye&&++yt>p&&R("overflow"),W==ye){for(var te=yt,K=m;;K+=m){var fe=K<=Ae?g:K>=Ae+y?y:K-Ae;if(te<fe)break;var pe=te-fe,oe=m-fe;ie.push(M(U(fe+pe%oe,0))),te=z(pe/oe)}ie.push(M(U(te,0))),Ae=k(yt,_i,pr==zt),yt=0,++pr}}}catch(Se){wn=!0,jr=Se}finally{try{!bt&&Rs.return&&Rs.return()}finally{if(wn)throw jr}}++yt,++ye}return ie.join("")},F=function(J){return L(J,function(ie){return x.test(ie)?$(ie.slice(4).toLowerCase()):ie})},j=function(J){return L(J,function(ie){return S.test(ie)?"xn--"+q(ie):ie})},Q={version:"2.1.0",ucs2:{decode:V,encode:B},decode:$,encode:q,toASCII:j,toUnicode:F},se={};function ae(ne){var J=ne.charCodeAt(0),ie=void 0;return J<16?ie="%0"+J.toString(16).toUpperCase():J<128?ie="%"+J.toString(16).toUpperCase():J<2048?ie="%"+(J>>6|192).toString(16).toUpperCase()+"%"+(J&63|128).toString(16).toUpperCase():ie="%"+(J>>12|224).toString(16).toUpperCase()+"%"+(J>>6&63|128).toString(16).toUpperCase()+"%"+(J&63|128).toString(16).toUpperCase(),ie}function ce(ne){for(var J="",ie=0,ve=ne.length;ie<ve;){var ye=parseInt(ne.substr(ie+1,2),16);if(ye<128)J+=String.fromCharCode(ye),ie+=3;else if(ye>=194&&ye<224){if(ve-ie>=6){var yt=parseInt(ne.substr(ie+4,2),16);J+=String.fromCharCode((ye&31)<<6|yt&63)}else J+=ne.substr(ie,6);ie+=6}else if(ye>=224){if(ve-ie>=9){var Ae=parseInt(ne.substr(ie+4,2),16),pt=parseInt(ne.substr(ie+7,2),16);J+=String.fromCharCode((ye&15)<<12|(Ae&63)<<6|pt&63)}else J+=ne.substr(ie,9);ie+=9}else J+=ne.substr(ie,3),ie+=3}return J}function le(ne,J){function ie(ve){var ye=ce(ve);return ye.match(J.UNRESERVED)?ye:ve}return ne.scheme&&(ne.scheme=String(ne.scheme).replace(J.PCT_ENCODED,ie).toLowerCase().replace(J.NOT_SCHEME,"")),ne.userinfo!==void 0&&(ne.userinfo=String(ne.userinfo).replace(J.PCT_ENCODED,ie).replace(J.NOT_USERINFO,ae).replace(J.PCT_ENCODED,o)),ne.host!==void 0&&(ne.host=String(ne.host).replace(J.PCT_ENCODED,ie).toLowerCase().replace(J.NOT_HOST,ae).replace(J.PCT_ENCODED,o)),ne.path!==void 0&&(ne.path=String(ne.path).replace(J.PCT_ENCODED,ie).replace(ne.scheme?J.NOT_PATH:J.NOT_PATH_NOSCHEME,ae).replace(J.PCT_ENCODED,o)),ne.query!==void 0&&(ne.query=String(ne.query).replace(J.PCT_ENCODED,ie).replace(J.NOT_QUERY,ae).replace(J.PCT_ENCODED,o)),ne.fragment!==void 0&&(ne.fragment=String(ne.fragment).replace(J.PCT_ENCODED,ie).replace(J.NOT_FRAGMENT,ae).replace(J.PCT_ENCODED,o)),ne}function ge(ne){return ne.replace(/^0*(.*)/,"$1")||"0"}function ue(ne,J){var ie=ne.match(J.IPV4ADDRESS)||[],ve=d(ie,2),ye=ve[1];return ye?ye.split(".").map(ge).join("."):ne}function Fe(ne,J){var ie=ne.match(J.IPV6ADDRESS)||[],ve=d(ie,3),ye=ve[1],yt=ve[2];if(ye){for(var Ae=ye.toLowerCase().split("::").reverse(),pt=d(Ae,2),jt=pt[0],At=pt[1],Ht=At?At.split(":").map(ge):[],fn=jt.split(":").map(ge),Tr=J.IPV4ADDRESS.test(fn[fn.length-1]),zt=Tr?7:8,pr=fn.length-zt,Xt=Array(zt),er=0;er<zt;++er)Xt[er]=Ht[er]||fn[pr+er]||"";Tr&&(Xt[zt-1]=ue(Xt[zt-1],J));var si=Xt.reduce(function(_i,bt,wn){if(!bt||bt==="0"){var jr=_i[_i.length-1];jr&&jr.index+jr.length===wn?jr.length++:_i.push({index:wn,length:1})}return _i},[]),hs=si.sort(function(_i,bt){return bt.length-_i.length})[0],Vi=void 0;if(hs&&hs.length>1){var ma=Xt.slice(0,hs.index),ro=Xt.slice(hs.index+hs.length);Vi=ma.join(":")+"::"+ro.join(":")}else Vi=Xt.join(":");return yt&&(Vi+="%"+yt),Vi}else return ne}var $e=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ge="".match(/(){0}/)[1]===void 0;function Re(ne){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie={},ve=J.iri!==!1?f:c;J.reference==="suffix"&&(ne=(J.scheme?J.scheme+":":"")+"//"+ne);var ye=ne.match($e);if(ye){Ge?(ie.scheme=ye[1],ie.userinfo=ye[3],ie.host=ye[4],ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ye[7],ie.fragment=ye[8],isNaN(ie.port)&&(ie.port=ye[5])):(ie.scheme=ye[1]||void 0,ie.userinfo=ne.indexOf("@")!==-1?ye[3]:void 0,ie.host=ne.indexOf("//")!==-1?ye[4]:void 0,ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ne.indexOf("?")!==-1?ye[7]:void 0,ie.fragment=ne.indexOf("#")!==-1?ye[8]:void 0,isNaN(ie.port)&&(ie.port=ne.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ye[4]:void 0)),ie.host&&(ie.host=Fe(ue(ie.host,ve),ve)),ie.scheme===void 0&&ie.userinfo===void 0&&ie.host===void 0&&ie.port===void 0&&!ie.path&&ie.query===void 0?ie.reference="same-document":ie.scheme===void 0?ie.reference="relative":ie.fragment===void 0?ie.reference="absolute":ie.reference="uri",J.reference&&J.reference!=="suffix"&&J.reference!==ie.reference&&(ie.error=ie.error||"URI is not a "+J.reference+" reference.");var yt=se[(J.scheme||ie.scheme||"").toLowerCase()];if(!J.unicodeSupport&&(!yt||!yt.unicodeSupport)){if(ie.host&&(J.domainHost||yt&&yt.domainHost))try{ie.host=Q.toASCII(ie.host.replace(ve.PCT_ENCODED,ce).toLowerCase())}catch(Ae){ie.error=ie.error||"Host's domain name can not be converted to ASCII via punycode: "+Ae}le(ie,c)}else le(ie,ve);yt&&yt.parse&&yt.parse(ie,J)}else ie.error=ie.error||"URI can not be parsed.";return ie}function Oe(ne,J){var ie=J.iri!==!1?f:c,ve=[];return ne.userinfo!==void 0&&(ve.push(ne.userinfo),ve.push("@")),ne.host!==void 0&&ve.push(Fe(ue(String(ne.host),ie),ie).replace(ie.IPV6ADDRESS,function(ye,yt,Ae){return"["+yt+(Ae?"%25"+Ae:"")+"]"})),(typeof ne.port=="number"||typeof ne.port=="string")&&(ve.push(":"),ve.push(String(ne.port))),ve.length?ve.join(""):void 0}var Me=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,Be=/^\/?(?:.|\n)*?(?=\/|$)/;function xt(ne){for(var J=[];ne.length;)if(ne.match(Me))ne=ne.replace(Me,"");else if(ne.match(Ut))ne=ne.replace(Ut,"/");else if(ne.match(Qe))ne=ne.replace(Qe,"/"),J.pop();else if(ne==="."||ne==="..")ne="";else{var ie=ne.match(Be);if(ie){var ve=ie[0];ne=ne.slice(ve.length),J.push(ve)}else throw new Error("Unexpected dot segment condition")}return J.join("")}function et(ne){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=J.iri?f:c,ve=[],ye=se[(J.scheme||ne.scheme||"").toLowerCase()];if(ye&&ye.serialize&&ye.serialize(ne,J),ne.host&&!ie.IPV6ADDRESS.test(ne.host)){if(J.domainHost||ye&&ye.domainHost)try{ne.host=J.iri?Q.toUnicode(ne.host):Q.toASCII(ne.host.replace(ie.PCT_ENCODED,ce).toLowerCase())}catch(pt){ne.error=ne.error||"Host's domain name can not be converted to "+(J.iri?"Unicode":"ASCII")+" via punycode: "+pt}}le(ne,ie),J.reference!=="suffix"&&ne.scheme&&(ve.push(ne.scheme),ve.push(":"));var yt=Oe(ne,J);if(yt!==void 0&&(J.reference!=="suffix"&&ve.push("//"),ve.push(yt),ne.path&&ne.path.charAt(0)!=="/"&&ve.push("/")),ne.path!==void 0){var Ae=ne.path;!J.absolutePath&&(!ye||!ye.absolutePath)&&(Ae=xt(Ae)),yt===void 0&&(Ae=Ae.replace(/^\/\//,"/%2F")),ve.push(Ae)}return ne.query!==void 0&&(ve.push("?"),ve.push(ne.query)),ne.fragment!==void 0&&(ve.push("#"),ve.push(ne.fragment)),ve.join("")}function ft(ne,J){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=arguments[3],ye={};return ve||(ne=Re(et(ne,ie),ie),J=Re(et(J,ie),ie)),ie=ie||{},!ie.tolerant&&J.scheme?(ye.scheme=J.scheme,ye.userinfo=J.userinfo,ye.host=J.host,ye.port=J.port,ye.path=xt(J.path||""),ye.query=J.query):(J.userinfo!==void 0||J.host!==void 0||J.port!==void 0?(ye.userinfo=J.userinfo,ye.host=J.host,ye.port=J.port,ye.path=xt(J.path||""),ye.query=J.query):(J.path?(J.path.charAt(0)==="/"?ye.path=xt(J.path):((ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0)&&!ne.path?ye.path="/"+J.path:ne.path?ye.path=ne.path.slice(0,ne.path.lastIndexOf("/")+1)+J.path:ye.path=J.path,ye.path=xt(ye.path)),ye.query=J.query):(ye.path=ne.path,J.query!==void 0?ye.query=J.query:ye.query=ne.query),ye.userinfo=ne.userinfo,ye.host=ne.host,ye.port=ne.port),ye.scheme=ne.scheme),ye.fragment=J.fragment,ye}function dt(ne,J,ie){var ve=u({scheme:"null"},ie);return et(ft(Re(ne,ve),Re(J,ve),ve,!0),ve)}function Bt(ne,J){return typeof ne=="string"?ne=et(Re(ne,J),J):s(ne)==="object"&&(ne=Re(et(ne,J),J)),ne}function Dn(ne,J,ie){return typeof ne=="string"?ne=et(Re(ne,ie),ie):s(ne)==="object"&&(ne=et(ne,ie)),typeof J=="string"?J=et(Re(J,ie),ie):s(J)==="object"&&(J=et(J,ie)),ne===J}function he(ne,J){return ne&&ne.toString().replace(!J||!J.iri?c.ESCAPE:f.ESCAPE,ae)}function _e(ne,J){return ne&&ne.toString().replace(!J||!J.iri?c.PCT_ENCODED:f.PCT_ENCODED,ce)}var Pe={scheme:"http",domainHost:!0,parse:function(J,ie){return J.host||(J.error=J.error||"HTTP URIs must have a host."),J},serialize:function(J,ie){var ve=String(J.scheme).toLowerCase()==="https";return(J.port===(ve?443:80)||J.port==="")&&(J.port=void 0),J.path||(J.path="/"),J}},it={scheme:"https",domainHost:Pe.domainHost,parse:Pe.parse,serialize:Pe.serialize};function Ye(ne){return typeof ne.secure=="boolean"?ne.secure:String(ne.scheme).toLowerCase()==="wss"}var ut={scheme:"ws",domainHost:!0,parse:function(J,ie){var ve=J;return ve.secure=Ye(ve),ve.resourceName=(ve.path||"/")+(ve.query?"?"+ve.query:""),ve.path=void 0,ve.query=void 0,ve},serialize:function(J,ie){if((J.port===(Ye(J)?443:80)||J.port==="")&&(J.port=void 0),typeof J.secure=="boolean"&&(J.scheme=J.secure?"wss":"ws",J.secure=void 0),J.resourceName){var ve=J.resourceName.split("?"),ye=d(ve,2),yt=ye[0],Ae=ye[1];J.path=yt&&yt!=="/"?yt:void 0,J.query=Ae,J.resourceName=void 0}return J.fragment=void 0,J}},tt={scheme:"wss",domainHost:ut.domainHost,parse:ut.parse,serialize:ut.serialize},wt={},In="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Wt="[0-9A-Fa-f]",Vt=i(i("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+i("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+i("%"+Wt+Wt)),hr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Yn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ju=r(Yn,'[\\"\\\\]'),Lr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ds=new RegExp(In,"g"),ii=new RegExp(Vt,"g"),Ai=new RegExp(r("[^]",hr,"[\\.]",'[\\"]',ju),"g"),Gr=new RegExp(r("[^]",In,Lr),"g"),yr=Gr;function _t(ne){var J=ce(ne);return J.match(ds)?J:ne}var Fr={scheme:"mailto",parse:function(J,ie){var ve=J,ye=ve.to=ve.path?ve.path.split(","):[];if(ve.path=void 0,ve.query){for(var yt=!1,Ae={},pt=ve.query.split("&"),jt=0,At=pt.length;jt<At;++jt){var Ht=pt[jt].split("=");switch(Ht[0]){case"to":for(var fn=Ht[1].split(","),Tr=0,zt=fn.length;Tr<zt;++Tr)ye.push(fn[Tr]);break;case"subject":ve.subject=_e(Ht[1],ie);break;case"body":ve.body=_e(Ht[1],ie);break;default:yt=!0,Ae[_e(Ht[0],ie)]=_e(Ht[1],ie);break}}yt&&(ve.headers=Ae)}ve.query=void 0;for(var pr=0,Xt=ye.length;pr<Xt;++pr){var er=ye[pr].split("@");if(er[0]=_e(er[0]),ie.unicodeSupport)er[1]=_e(er[1],ie).toLowerCase();else try{er[1]=Q.toASCII(_e(er[1],ie).toLowerCase())}catch(si){ve.error=ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+si}ye[pr]=er.join("@")}return ve},serialize:function(J,ie){var ve=J,ye=a(J.to);if(ye){for(var yt=0,Ae=ye.length;yt<Ae;++yt){var pt=String(ye[yt]),jt=pt.lastIndexOf("@"),At=pt.slice(0,jt).replace(ii,_t).replace(ii,o).replace(Ai,ae),Ht=pt.slice(jt+1);try{Ht=ie.iri?Q.toUnicode(Ht):Q.toASCII(_e(Ht,ie).toLowerCase())}catch(pr){ve.error=ve.error||"Email address's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+pr}ye[yt]=At+"@"+Ht}ve.path=ye.join(",")}var fn=J.headers=J.headers||{};J.subject&&(fn.subject=J.subject),J.body&&(fn.body=J.body);var Tr=[];for(var zt in fn)fn[zt]!==wt[zt]&&Tr.push(zt.replace(ii,_t).replace(ii,o).replace(Gr,ae)+"="+fn[zt].replace(ii,_t).replace(ii,o).replace(yr,ae));return Tr.length&&(ve.query=Tr.join("&")),ve}},Ii=/^([^\:]+)\:(.*)/,Ji={scheme:"urn",parse:function(J,ie){var ve=J.path&&J.path.match(Ii),ye=J;if(ve){var yt=ie.scheme||ye.scheme||"urn",Ae=ve[1].toLowerCase(),pt=ve[2],jt=yt+":"+(ie.nid||Ae),At=se[jt];ye.nid=Ae,ye.nss=pt,ye.path=void 0,At&&(ye=At.parse(ye,ie))}else ye.error=ye.error||"URN can not be parsed.";return ye},serialize:function(J,ie){var ve=ie.scheme||J.scheme||"urn",ye=J.nid,yt=ve+":"+(ie.nid||ye),Ae=se[yt];Ae&&(J=Ae.serialize(J,ie));var pt=J,jt=J.nss;return pt.path=(ye||ie.nid)+":"+jt,pt}},no=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Wa={scheme:"urn:uuid",parse:function(J,ie){var ve=J;return ve.uuid=ve.nss,ve.nss=void 0,!ie.tolerant&&(!ve.uuid||!ve.uuid.match(no))&&(ve.error=ve.error||"UUID is not valid."),ve},serialize:function(J,ie){var ve=J;return ve.nss=(J.uuid||"").toLowerCase(),ve}};se[Pe.scheme]=Pe,se[it.scheme]=it,se[ut.scheme]=ut,se[tt.scheme]=tt,se[Fr.scheme]=Fr,se[Ji.scheme]=Ji,se[Wa.scheme]=Wa,n.SCHEMES=se,n.pctEncChar=ae,n.pctDecChars=ce,n.parse=Re,n.removeDotSegments=xt,n.serialize=et,n.resolveComponents=ft,n.resolve=dt,n.normalize=Bt,n.equal=Dn,n.escapeComponent=he,n.unescapeComponent=_e,Object.defineProperty(n,"__esModule",{value:!0})})})(cH,cH.exports);var q8t=cH.exports;Object.defineProperty(WQ,"__esModule",{value:!0});const JMe=q8t;JMe.code='require("ajv/dist/runtime/uri").default';WQ.default=JMe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=lf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=An;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=$I,i=RI,s=sv,o=lu,a=An,u=po,l=kI,c=Zn,f=H8t,d=WQ,h=(U,k)=>new RegExp(U,k);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(U){var k,$,q,F,j,Q,se,ae,ce,le,ge,ue,Fe,$e,Ge,Re,Oe,Me,Ut,Qe,Be,xt,et,ft,dt;const Bt=U.strict,Dn=(k=U.code)===null||k===void 0?void 0:k.optimize,he=Dn===!0||Dn===void 0?1:Dn||0,_e=(q=($=U.code)===null||$===void 0?void 0:$.regExp)!==null&&q!==void 0?q:h,Pe=(F=U.uriResolver)!==null&&F!==void 0?F:d.default;return{strictSchema:(Q=(j=U.strictSchema)!==null&&j!==void 0?j:Bt)!==null&&Q!==void 0?Q:!0,strictNumbers:(ae=(se=U.strictNumbers)!==null&&se!==void 0?se:Bt)!==null&&ae!==void 0?ae:!0,strictTypes:(le=(ce=U.strictTypes)!==null&&ce!==void 0?ce:Bt)!==null&&le!==void 0?le:"log",strictTuples:(ue=(ge=U.strictTuples)!==null&&ge!==void 0?ge:Bt)!==null&&ue!==void 0?ue:"log",strictRequired:($e=(Fe=U.strictRequired)!==null&&Fe!==void 0?Fe:Bt)!==null&&$e!==void 0?$e:!1,code:U.code?{...U.code,optimize:he,regExp:_e}:{optimize:he,regExp:_e},loopRequired:(Ge=U.loopRequired)!==null&&Ge!==void 0?Ge:v,loopEnum:(Re=U.loopEnum)!==null&&Re!==void 0?Re:v,meta:(Oe=U.meta)!==null&&Oe!==void 0?Oe:!0,messages:(Me=U.messages)!==null&&Me!==void 0?Me:!0,inlineRefs:(Ut=U.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Qe=U.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(Be=U.addUsedSchema)!==null&&Be!==void 0?Be:!0,validateSchema:(xt=U.validateSchema)!==null&&xt!==void 0?xt:!0,validateFormats:(et=U.validateFormats)!==null&&et!==void 0?et:!0,unicodeRegExp:(ft=U.unicodeRegExp)!==null&&ft!==void 0?ft:!0,int32range:(dt=U.int32range)!==null&&dt!==void 0?dt:!0,uriResolver:Pe}}class b{constructor(k={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,k=this.opts={...k,..._(k)};const{es5:$,lines:q}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:$,lines:q}),this.logger=z(k.logger);const F=k.validateFormats;k.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,k,"NOT SUPPORTED"),E.call(this,y,k,"DEPRECATED","warn"),this._metaOpts=A.call(this),k.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),k.keywords&&P.call(this,k.keywords),typeof k.meta=="object"&&this.addMetaSchema(k.meta),x.call(this),k.validateFormats=F}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:k,meta:$,schemaId:q}=this.opts;let F=f;q==="id"&&(F={...f},F.id=F.$id,delete F.$id),$&&k&&this.addMetaSchema(F,F[q],!1)}defaultMeta(){const{meta:k,schemaId:$}=this.opts;return this.opts.defaultMeta=typeof k=="object"?k[$]||k:void 0}validate(k,$){let q;if(typeof k=="string"){if(q=this.getSchema(k),!q)throw new Error(`no schema with key or ref "${k}"`)}else q=this.compile(k);const F=q($);return"$async"in q||(this.errors=q.errors),F}compile(k,$){const q=this._addSchema(k,$);return q.validate||this._compileSchemaEnv(q)}compileAsync(k,$){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:q}=this.opts;return F.call(this,k,$);async function F(le,ge){await j.call(this,le.$schema);const ue=this._addSchema(le,ge);return ue.validate||Q.call(this,ue)}async function j(le){le&&!this.getSchema(le)&&await F.call(this,{$ref:le},!0)}async function Q(le){try{return this._compileSchemaEnv(le)}catch(ge){if(!(ge instanceof i.default))throw ge;return se.call(this,ge),await ae.call(this,ge.missingSchema),Q.call(this,le)}}function se({missingSchema:le,missingRef:ge}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ge} cannot be resolved`)}async function ae(le){const ge=await ce.call(this,le);this.refs[le]||await j.call(this,ge.$schema),this.refs[le]||this.addSchema(ge,le,$)}async function ce(le){const ge=this._loading[le];if(ge)return ge;try{return await(this._loading[le]=q(le))}finally{delete this._loading[le]}}}addSchema(k,$,q,F=this.opts.validateSchema){if(Array.isArray(k)){for(const Q of k)this.addSchema(Q,void 0,q,F);return this}let j;if(typeof k=="object"){const{schemaId:Q}=this.opts;if(j=k[Q],j!==void 0&&typeof j!="string")throw new Error(`schema ${Q} must be string`)}return $=(0,u.normalizeId)($||j),this._checkUnique($),this.schemas[$]=this._addSchema(k,q,$,F,!0),this}addMetaSchema(k,$,q=this.opts.validateSchema){return this.addSchema(k,$,!0,q),this}validateSchema(k,$){if(typeof k=="boolean")return!0;let q;if(q=k.$schema,q!==void 0&&typeof q!="string")throw new Error("$schema must be a string");if(q=q||this.opts.defaultMeta||this.defaultMeta(),!q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const F=this.validate(q,k);if(!F&&$){const j="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(j);else throw new Error(j)}return F}getSchema(k){let $;for(;typeof($=w.call(this,k))=="string";)k=$;if($===void 0){const{schemaId:q}=this.opts,F=new o.SchemaEnv({schema:{},schemaId:q});if($=o.resolveSchema.call(this,F,k),!$)return;this.refs[k]=$}return $.validate||this._compileSchemaEnv($)}removeSchema(k){if(k instanceof RegExp)return this._removeAllSchemas(this.schemas,k),this._removeAllSchemas(this.refs,k),this;switch(typeof k){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const $=w.call(this,k);return typeof $=="object"&&this._cache.delete($.schema),delete this.schemas[k],delete this.refs[k],this}case"object":{const $=k;this._cache.delete($);let q=k[this.opts.schemaId];return q&&(q=(0,u.normalizeId)(q),delete this.schemas[q],delete this.refs[q]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(k){for(const $ of k)this.addKeyword($);return this}addKeyword(k,$){let q;if(typeof k=="string")q=k,typeof $=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),$.keyword=q);else if(typeof k=="object"&&$===void 0){if($=k,q=$.keyword,Array.isArray(q)&&!q.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(R.call(this,q,$),!$)return(0,c.eachItem)(q,j=>D.call(this,j)),this;V.call(this,$);const F={...$,type:(0,l.getJSONTypes)($.type),schemaType:(0,l.getJSONTypes)($.schemaType)};return(0,c.eachItem)(q,F.type.length===0?j=>D.call(this,j,F):j=>F.type.forEach(Q=>D.call(this,j,F,Q))),this}getKeyword(k){const $=this.RULES.all[k];return typeof $=="object"?$.definition:!!$}removeKeyword(k){const{RULES:$}=this;delete $.keywords[k],delete $.all[k];for(const q of $.rules){const F=q.rules.findIndex(j=>j.keyword===k);F>=0&&q.rules.splice(F,1)}return this}addFormat(k,$){return typeof $=="string"&&($=new RegExp($)),this.formats[k]=$,this}errorsText(k=this.errors,{separator:$=", ",dataVar:q="data"}={}){return!k||k.length===0?"No errors":k.map(F=>`${q}${F.instancePath} ${F.message}`).reduce((F,j)=>F+$+j)}$dataMetaSchema(k,$){const q=this.RULES.all;k=JSON.parse(JSON.stringify(k));for(const F of $){const j=F.split("/").slice(1);let Q=k;for(const se of j)Q=Q[se];for(const se in q){const ae=q[se];if(typeof ae!="object")continue;const{$data:ce}=ae.definition,le=Q[se];ce&&le&&(Q[se]=H(le))}}return k}_removeAllSchemas(k,$){for(const q in k){const F=k[q];(!$||$.test(q))&&(typeof F=="string"?delete k[q]:F&&!F.meta&&(this._cache.delete(F.schema),delete k[q]))}}_addSchema(k,$,q,F=this.opts.validateSchema,j=this.opts.addUsedSchema){let Q;const{schemaId:se}=this.opts;if(typeof k=="object")Q=k[se];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof k!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(k);if(ae!==void 0)return ae;q=(0,u.normalizeId)(Q||q);const ce=u.getSchemaRefs.call(this,k,q);return ae=new o.SchemaEnv({schema:k,schemaId:se,meta:$,baseId:q,localRefs:ce}),this._cache.set(ae.schema,ae),j&&!q.startsWith("#")&&(q&&this._checkUnique(q),this.refs[q]=ae),F&&this.validateSchema(k,!0),ae}_checkUnique(k){if(this.schemas[k]||this.refs[k])throw new Error(`schema with key or id "${k}" already exists`)}_compileSchemaEnv(k){if(k.meta?this._compileMetaSchema(k):o.compileSchema.call(this,k),!k.validate)throw new Error("ajv implementation error");return k.validate}_compileMetaSchema(k){const $=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,k)}finally{this.opts=$}}}e.default=b,b.ValidationError=r.default,b.MissingRefError=i.default;function E(U,k,$,q="error"){for(const F in U){const j=F;j in k&&this.logger[q](`${$}: option ${F}. ${U[j]}`)}}function w(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function x(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const k in U)this.addSchema(U[k],k)}function S(){for(const U in this.opts.formats){const k=this.opts.formats[U];k&&this.addFormat(U,k)}}function P(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const k in U){const $=U[k];$.keyword||($.keyword=k),this.addKeyword($)}}function A(){const U={...this.opts};for(const k of p)delete U[k];return U}const O={log(){},warn(){},error(){}};function z(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function R(U,k){const{RULES:$}=this;if((0,c.eachItem)(U,q=>{if($.keywords[q])throw new Error(`Keyword ${q} is already defined`);if(!M.test(q))throw new Error(`Keyword ${q} has invalid name`)}),!!k&&k.$data&&!("code"in k||"validate"in k))throw new Error('$data keyword must have "code" or "validate" function')}function D(U,k,$){var q;const F=k==null?void 0:k.post;if($&&F)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:j}=this;let Q=F?j.post:j.rules.find(({type:ae})=>ae===$);if(Q||(Q={type:$,rules:[]},j.rules.push(Q)),j.keywords[U]=!0,!k)return;const se={keyword:U,definition:{...k,type:(0,l.getJSONTypes)(k.type),schemaType:(0,l.getJSONTypes)(k.schemaType)}};k.before?L.call(this,Q,se,k.before):Q.rules.push(se),j.all[U]=se,(q=k.implements)===null||q===void 0||q.forEach(ae=>this.addKeyword(ae))}function L(U,k,$){const q=U.rules.findIndex(F=>F.keyword===$);q>=0?U.rules.splice(q,0,k):(U.rules.push(k),this.logger.warn(`rule ${$} is not defined`))}function V(U){let{metaSchema:k}=U;k!==void 0&&(U.$data&&this.opts.$data&&(k=H(k)),U.validateSchema=this.compile(k,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(U){return{anyOf:[U,B]}}})(IMe);var GQ={},YQ={},KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});const W8t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};KQ.default=W8t;var ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.callRef=ov.getValidate=void 0;const G8t=RI,rge=Tn,Za=An,k_=ph,ige=lu,qP=Zn,Y8t={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=ige.resolveRef.call(u,l,i,n);if(c===void 0)throw new G8t.default(r.opts.uriResolver,i,n);if(c instanceof ige.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return P$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return P$(e,(0,Za._)`${p}.validate`,l,l.$async)}function d(p){const m=ZMe(e,p);P$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Za.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Za.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function ZMe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Za._)`${n.scopeValue("wrapper",{ref:t})}.validate`}ov.getValidate=ZMe;function P$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?k_.default.this:Za.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Za._)`await ${(0,rge.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Za._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,rge.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Za._)`${p}.errors`;i.assign(k_.default.vErrors,(0,Za._)`${k_.default.vErrors} === null ? ${m} : ${k_.default.vErrors}.concat(${m})`),i.assign(k_.default.errors,(0,Za._)`${k_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=qP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Za._)`${p}.evaluated.props`);s.props=qP.mergeEvaluated.props(i,y,s.props,Za.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=qP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Za._)`${p}.evaluated.items`);s.items=qP.mergeEvaluated.items(i,y,s.items,Za.Name)}}}ov.callRef=P$;ov.default=Y8t;Object.defineProperty(YQ,"__esModule",{value:!0});const K8t=KQ,X8t=ov,Q8t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",K8t.default,X8t.default];YQ.default=Q8t;var XQ={},QQ={};Object.defineProperty(QQ,"__esModule",{value:!0});const j3=An,Pm=j3.operators,B3={maximum:{okStr:"<=",ok:Pm.LTE,fail:Pm.GT},minimum:{okStr:">=",ok:Pm.GTE,fail:Pm.LT},exclusiveMaximum:{okStr:"<",ok:Pm.LT,fail:Pm.GTE},exclusiveMinimum:{okStr:">",ok:Pm.GT,fail:Pm.LTE}},J8t={message:({keyword:e,schemaCode:t})=>(0,j3.str)`must be ${B3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,j3._)`{comparison: ${B3[e].okStr}, limit: ${t}}`},Z8t={keyword:Object.keys(B3),type:"number",schemaType:"number",$data:!0,error:J8t,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,j3._)`${n} ${B3[t].fail} ${r} || isNaN(${n})`)}};QQ.default=Z8t;var JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});const x2=An,e9t={message:({schemaCode:e})=>(0,x2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,x2._)`{multipleOf: ${e}}`},t9t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:e9t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,x2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,x2._)`${o} !== parseInt(${o})`;e.fail$data((0,x2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};JQ.default=t9t;var ZQ={},eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});function eLe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}eJ.default=eLe;eLe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(ZQ,"__esModule",{value:!0});const Wy=An,n9t=Zn,r9t=eJ,i9t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Wy.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Wy._)`{limit: ${e}}`},s9t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:i9t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Wy.operators.GT:Wy.operators.LT,o=i.opts.unicode===!1?(0,Wy._)`${n}.length`:(0,Wy._)`${(0,n9t.useFunc)(e.gen,r9t.default)}(${n})`;e.fail$data((0,Wy._)`${o} ${s} ${r}`)}};ZQ.default=s9t;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const o9t=Tn,z3=An,a9t={message:({schemaCode:e})=>(0,z3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,z3._)`{pattern: ${e}}`},u9t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:a9t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,z3._)`(new RegExp(${i}, ${o}))`:(0,o9t.usePattern)(e,r);e.fail$data((0,z3._)`!${a}.test(${t})`)}};tJ.default=u9t;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const S2=An,l9t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,S2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,S2._)`{limit: ${e}}`},c9t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:l9t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?S2.operators.GT:S2.operators.LT;e.fail$data((0,S2._)`Object.keys(${n}).length ${i} ${r}`)}};nJ.default=c9t;var rJ={};Object.defineProperty(rJ,"__esModule",{value:!0});const IS=Tn,T2=An,f9t=Zn,d9t={message:({params:{missingProperty:e}})=>(0,T2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,T2._)`{missingProperty: ${e}}`},h9t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:d9t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,f9t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(T2.nil,f);else for(const h of n)(0,IS.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,IS.checkMissingProp)(e,n,h)),(0,IS.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,IS.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,IS.propertyInData)(t,i,h,a.ownProperties)),t.if((0,T2.not)(p),()=>{e.error(),t.break()})},T2.nil)}}};rJ.default=h9t;var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const C2=An,p9t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,C2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,C2._)`{limit: ${e}}`},m9t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:p9t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?C2.operators.GT:C2.operators.LT;e.fail$data((0,C2._)`${n}.length ${i} ${r}`)}};iJ.default=m9t;var sJ={},NI={};Object.defineProperty(NI,"__esModule",{value:!0});const tLe=SK;tLe.code='require("ajv/dist/runtime/equal").default';NI.default=tLe;Object.defineProperty(sJ,"__esModule",{value:!0});const CB=kI,oo=An,g9t=Zn,y9t=NI,v9t={message:({params:{i:e,j:t}})=>(0,oo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,oo._)`{i: ${e}, j: ${t}}`},_9t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:v9t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,CB.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,oo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,oo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,oo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,CB.checkDataTypes)(l,g,a.opts.strictNumbers,CB.DataType.Wrong),v=t.const("indices",(0,oo._)`{}`);t.for((0,oo._)`;${p}--;`,()=>{t.let(g,(0,oo._)`${n}[${p}]`),t.if(y,(0,oo._)`continue`),l.length>1&&t.if((0,oo._)`typeof ${g} == "string"`,(0,oo._)`${g} += "_"`),t.if((0,oo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,oo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,oo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,g9t.useFunc)(t,y9t.default),y=t.name("outer");t.label(y).for((0,oo._)`;${p}--;`,()=>t.for((0,oo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,oo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};sJ.default=_9t;var oJ={};Object.defineProperty(oJ,"__esModule",{value:!0});const fH=An,b9t=Zn,w9t=NI,E9t={message:"must be equal to constant",params:({schemaCode:e})=>(0,fH._)`{allowedValue: ${e}}`},x9t={keyword:"const",$data:!0,error:E9t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,fH._)`!${(0,b9t.useFunc)(t,w9t.default)}(${n}, ${i})`):e.fail((0,fH._)`${s} !== ${n}`)}};oJ.default=x9t;var aJ={};Object.defineProperty(aJ,"__esModule",{value:!0});const wT=An,S9t=Zn,T9t=NI,C9t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,wT._)`{allowedValues: ${e}}`},A9t={keyword:"enum",schemaType:"array",$data:!0,error:C9t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,S9t.useFunc)(t,T9t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,wT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,wT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,wT._)`${l()}(${n}, ${h}[${p}])`:(0,wT._)`${n} === ${m}`}}};aJ.default=A9t;Object.defineProperty(XQ,"__esModule",{value:!0});const I9t=QQ,O9t=JQ,P9t=ZQ,k9t=tJ,$9t=nJ,R9t=rJ,N9t=iJ,D9t=sJ,M9t=oJ,L9t=aJ,F9t=[I9t.default,O9t.default,P9t.default,k9t.default,$9t.default,R9t.default,N9t.default,D9t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},M9t.default,L9t.default];XQ.default=F9t;var uJ={},dx={};Object.defineProperty(dx,"__esModule",{value:!0});dx.validateAdditionalItems=void 0;const Gy=An,dH=Zn,j9t={message:({params:{len:e}})=>(0,Gy.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Gy._)`{limit: ${e}}`},B9t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:j9t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,dH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}nLe(e,r)}};function nLe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Gy._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Gy._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,dH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Gy._)`${a} <= ${t.length}`);n.if((0,Gy.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:dH.Type.Num},l),o.allErrors||n.if((0,Gy.not)(l),()=>n.break())})}}dx.validateAdditionalItems=nLe;dx.default=B9t;var lJ={},hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.validateTuple=void 0;const sge=An,k$=Zn,z9t=Tn,U9t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return rLe(e,"additionalItems",t);n.items=!0,!(0,k$.alwaysValidSchema)(n,t)&&e.ok((0,z9t.validateArray)(e))}};function rLe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=k$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,sge._)`${s}.length`);n.forEach((f,d)=>{(0,k$.alwaysValidSchema)(a,f)||(r.if((0,sge._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,k$.checkStrictMode)(a,g,d.strictTuples)}}}hx.validateTuple=rLe;hx.default=U9t;Object.defineProperty(lJ,"__esModule",{value:!0});const V9t=hx,H9t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,V9t.validateTuple)(e,"items")};lJ.default=H9t;var cJ={};Object.defineProperty(cJ,"__esModule",{value:!0});const oge=An,q9t=Zn,W9t=Tn,G9t=dx,Y9t={message:({params:{len:e}})=>(0,oge.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,oge._)`{limit: ${e}}`},K9t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Y9t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,q9t.alwaysValidSchema)(r,t)&&(i?(0,G9t.validateAdditionalItems)(e,i):e.ok((0,W9t.validateArray)(e)))}};cJ.default=K9t;var fJ={};Object.defineProperty(fJ,"__esModule",{value:!0});const Fl=An,WP=Zn,X9t={message:({params:{min:e,max:t}})=>t===void 0?(0,Fl.str)`must contain at least ${e} valid item(s)`:(0,Fl.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Fl._)`{minContains: ${e}}`:(0,Fl._)`{minContains: ${e}, maxContains: ${t}}`},Q9t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:X9t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Fl._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,WP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,WP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,WP.alwaysValidSchema)(s,n)){let m=(0,Fl._)`${c} >= ${o}`;a!==void 0&&(m=(0,Fl._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Fl._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:WP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Fl._)`${m}++`),a===void 0?t.if((0,Fl._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Fl._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Fl._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};fJ.default=Q9t;var iLe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=An,n=Zn,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(iLe);var dJ={};Object.defineProperty(dJ,"__esModule",{value:!0});const sLe=An,J9t=Zn,Z9t={message:"property name must be valid",params:({params:e})=>(0,sLe._)`{propertyName: ${e.propertyName}}`},ejt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Z9t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,J9t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,sLe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};dJ.default=ejt;var hF={};Object.defineProperty(hF,"__esModule",{value:!0});const GP=Tn,Rc=An,tjt=ph,YP=Zn,njt={message:"must NOT have additional properties",params:({params:e})=>(0,Rc._)`{additionalProperty: ${e.additionalProperty}}`},rjt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:njt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,YP.alwaysValidSchema)(o,n))return;const l=(0,GP.allSchemaProperties)(r.properties),c=(0,GP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Rc._)`${s} === ${tjt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,YP.schemaRefOrVal)(o,r.properties,"properties");y=(0,GP.isOwnProperty)(t,v,g)}else l.length?y=(0,Rc.or)(...l.map(v=>(0,Rc._)`${g} === ${v}`)):y=Rc.nil;return c.length&&(y=(0,Rc.or)(y,...c.map(v=>(0,Rc._)`${(0,GP.usePattern)(e,v)}.test(${g})`))),(0,Rc.not)(y)}function h(g){t.code((0,Rc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,YP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Rc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Rc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:YP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};hF.default=rjt;var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});const ijt=lf,age=Tn,AB=Zn,uge=hF,sjt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&uge.default.code(new ijt.KeywordCxt(s,uge.default,"additionalProperties"));const o=(0,age.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=AB.mergeEvaluated.props(t,(0,AB.toHash)(o),s.props));const a=o.filter(f=>!(0,AB.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,age.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};hJ.default=sjt;var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const lge=Tn,KP=An,cge=Zn,fge=Zn,ojt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,lge.allSchemaProperties)(n),u=a.filter(m=>(0,cge.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof KP.Name)&&(s.props=(0,fge.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,cge.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,KP._)`${(0,lge.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:fge.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,KP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,KP.not)(c),()=>t.break())})})}}};pJ.default=ojt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const ajt=Zn,ujt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,ajt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};mJ.default=ujt;var gJ={};Object.defineProperty(gJ,"__esModule",{value:!0});const ljt=Tn,cjt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:ljt.validateUnion,error:{message:"must match a schema in anyOf"}};gJ.default=cjt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const $$=An,fjt=Zn,djt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,$$._)`{passingSchemas: ${e.passing}}`},hjt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:djt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,fjt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,$$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,$$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,$$.Name)})})}}};yJ.default=hjt;var vJ={};Object.defineProperty(vJ,"__esModule",{value:!0});const pjt=Zn,mjt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,pjt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};vJ.default=mjt;var _J={};Object.defineProperty(_J,"__esModule",{value:!0});const U3=An,oLe=Zn,gjt={message:({params:e})=>(0,U3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,U3._)`{failingKeyword: ${e.ifClause}}`},yjt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:gjt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,oLe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=dge(r,"then"),s=dge(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,U3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,U3._)`${c}`):e.setParams({ifClause:c})}}}};function dge(e,t){const n=e.schema[t];return n!==void 0&&!(0,oLe.alwaysValidSchema)(e,n)}_J.default=yjt;var bJ={};Object.defineProperty(bJ,"__esModule",{value:!0});const vjt=Zn,_jt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,vjt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};bJ.default=_jt;Object.defineProperty(uJ,"__esModule",{value:!0});const bjt=dx,wjt=lJ,Ejt=hx,xjt=cJ,Sjt=fJ,Tjt=iLe,Cjt=dJ,Ajt=hF,Ijt=hJ,Ojt=pJ,Pjt=mJ,kjt=gJ,$jt=yJ,Rjt=vJ,Njt=_J,Djt=bJ;function Mjt(e=!1){const t=[Pjt.default,kjt.default,$jt.default,Rjt.default,Njt.default,Djt.default,Cjt.default,Ajt.default,Tjt.default,Ijt.default,Ojt.default];return e?t.push(wjt.default,xjt.default):t.push(bjt.default,Ejt.default),t.push(Sjt.default),t}uJ.default=Mjt;var wJ={},EJ={};Object.defineProperty(EJ,"__esModule",{value:!0});const qi=An,Ljt={message:({schemaCode:e})=>(0,qi.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,qi._)`{format: ${e}}`},Fjt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Ljt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,qi._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,qi._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,qi._)`${m}.type || "string"`).assign(y,(0,qi._)`${m}.validate`),()=>n.assign(g,(0,qi._)`"string"`).assign(y,m)),e.fail$data((0,qi.or)(v(),_()));function v(){return u.strictSchema===!1?qi.nil:(0,qi._)`${o} && !${y}`}function _(){const b=c.$async?(0,qi._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,qi._)`${y}(${r})`,E=(0,qi._)`(typeof ${y} == "function" ? ${b} : ${y}.test(${r}))`;return(0,qi._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(b());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const w=E instanceof RegExp?(0,qi.regexpCode)(E):u.code.formats?(0,qi._)`${u.code.formats}${(0,qi.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:w});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,qi._)`${x}.validate`]:["string",E,x]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,qi._)`await ${y}(${r})`}return typeof g=="function"?(0,qi._)`${y}(${r})`:(0,qi._)`${y}.test(${r})`}}}};EJ.default=Fjt;Object.defineProperty(wJ,"__esModule",{value:!0});const jjt=EJ,Bjt=[jjt.default];wJ.default=Bjt;var tE={};Object.defineProperty(tE,"__esModule",{value:!0});tE.contentVocabulary=tE.metadataVocabulary=void 0;tE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];tE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(GQ,"__esModule",{value:!0});const zjt=YQ,Ujt=XQ,Vjt=uJ,Hjt=wJ,hge=tE,qjt=[zjt.default,Ujt.default,(0,Vjt.default)(),Hjt.default,hge.metadataVocabulary,hge.contentVocabulary];GQ.default=qjt;var xJ={},aLe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(aLe);Object.defineProperty(xJ,"__esModule",{value:!0});const J_=An,hH=aLe,pge=lu,Wjt=Zn,Gjt={message:({params:{discrError:e,tagName:t}})=>e===hH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,J_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Yjt={keyword:"discriminator",type:"object",schemaType:"object",error:Gjt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,J_._)`${n}${(0,J_.getProperty)(a)}`);t.if((0,J_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:hH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,J_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:hH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,J_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let b=0;b<o.length;b++){let E=o[b];E!=null&&E.$ref&&!(0,Wjt.schemaHasRulesButRef)(E,s.self.RULES)&&(E=pge.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E==null?void 0:E.$ref),E instanceof pge.SchemaEnv&&(E=E.schema));const w=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(w,b)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:b}){return Array.isArray(b)&&b.includes(a)}function v(b,E){if(b.const)_(b.const,E);else if(b.enum)for(const w of b.enum)_(w,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};xJ.default=Yjt;const Kjt="http://json-schema.org/draft-07/schema#",Xjt="http://json-schema.org/draft-07/schema#",Qjt="Core schema meta-schema",Jjt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Zjt=["object","boolean"],eBt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},tBt={$schema:Kjt,$id:Xjt,title:Qjt,definitions:Jjt,type:Zjt,properties:eBt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=IMe,r=GQ,i=xJ,s=tBt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=lf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=An;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=$I;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=RI;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(aH,aH.exports);var nBt=aH.exports;const uLe=El(nBt),rBt="#/definitions/StudyConfig",iBt="http://json-schema.org/draft-07/schema#",sBt={Answer:{additionalProperties:!1,description:"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.",properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a latin square.",properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.",properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. If the component is repeated within the block, this condition will only check the first instance of the component once the order is flattened. If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.",properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. If the component is repeated within the block, this condition will only check the first instance of the component once the order is flattened.",properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"}]},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:"The QuestionnaireComponent interface is used to define the properties of a questionnaire component. A QuestionnaireComponent is used to render questions with different response types. The response types are also defined with these documentation. The main use case of this component type is to ask participants questions, without using markdown, websites, images, etc.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times.",properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Skip conditions work recursively, that is if you have a nested block, they parent blocks' skip conditions will be considered when computing the skip logic.",items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta10/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "path/to/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "path/to/assets/help.md",  "logoPath": "path/to/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "path/to/study/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "path/to/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},oBt={$ref:rBt,$schema:iBt,definitions:sBt},aBt="#/definitions/GlobalConfig",uBt="http://json-schema.org/draft-07/schema#",lBt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},cBt={$ref:aBt,$schema:uBt,definitions:lBt},lLe=new uLe;lLe.addSchema(cBt);const mge=lLe.getSchema("#/definitions/GlobalConfig"),cLe=new uLe;cLe.addSchema(oBt);const gge=cLe.getSchema("#/definitions/StudyConfig");function fBt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function pF(e){return e.baseComponent!==void 0}function dBt(e){const t=jQ.parse(e),n=mge(t),r=fBt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...mge.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function hBt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return pF(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function fLe(e,t){const n=jQ.parse(e),r=gge(n),i=hBt(n);if(r&&i[0])return n;const s=[...gge.errors||[]];return console.error(`${t} parsing errors`,s),{...n,errors:s}}function dLe(){const e=wc(),{setAlertModal:t}=uh(),n=lh();C.useEffect(()=>{const i=(new URLSearchParams(window.location.search).get("admin")||"f")==="t"},[e,t,n])}const yge=["status","percentComplete","description","instruction","answer","correctAnswer","startTime","endTime","duration","meta"],vge=["participantId","trialId","trialOrder","responseId"];function SJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function pBt(e,t,n){const r=(Object.entries(e.answers).length/(Lp(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=pF(u)&&u.baseComponent&&t.baseComponents?EK({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var m,g;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d};if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const y=(g=(m=l.correctAnswer)==null?void 0:m.find(v=>v.id===d))==null?void 0:g.answer;p.correctAnswer=typeof y=="object"?JSON.stringify(y):y}return n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function mBt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=C.useState([...yge].filter(c=>c!=="meta")),a=C.useMemo(()=>{const c=[...vge,...s],f=c,d=i.map(h=>pBt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=C.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);SJ(c,n)},[n,a.header,a.rows]),l=C.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return I.jsxs(vp,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[I.jsx($Ae,{searchable:!0,nothingFound:"Property not found",data:[...yge],value:s,onChange:c=>o(c),label:"Included optional columns:",icon:I.jsx(fgt,{}),variant:"filled"}),I.jsx(I1,{h:"md"}),I.jsx(st,{mih:300,style:{width:"100%",overflow:"scroll"},children:I.jsxs(VY,{striped:!0,captionSide:"bottom",withBorder:!0,children:[I.jsx("thead",{children:I.jsx("tr",{children:a.header.map(c=>I.jsx("th",{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:I.jsxs(Ur,{direction:"row",justify:"space-between",align:"center",children:[c,!vge.includes(c)&&I.jsx(Tw,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},children:I.jsx(QIe,{size:16})})]})},c))})}),I.jsx("tbody",{children:a.rows.slice(0,5).map((c,f)=>I.jsx("tr",{children:a.header.map(d=>I.jsx("td",{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),I.jsx(I1,{h:"sm"}),I.jsx(Ur,{justify:"center",fz:"sm",c:"dimmed",children:I.jsx(ct,{children:l})}),I.jsx(I1,{h:"md"}),I.jsxs(Co,{position:"right",children:[I.jsx(Xr,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),I.jsx(Xr,{leftIcon:I.jsx(XIe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function gBt(){const e=n0(),{storageEngine:t}=Ru(),{answers:n}=Cf(m=>m),[r,i]=C.useState(!1);C.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),dLe();const[s,o]=C.useState(),[a,u]=C.useState(""),l=e.studyMetadata.title.replace(" ","_");C.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=C.useCallback(async()=>{SJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=C.useState(Math.floor(d/1e3));return C.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),I.jsx(Dp,{style:{height:"100%"},children:I.jsx(Ur,{direction:"column",children:r?I.jsx(ct,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?I.jsx(Na,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):I.jsxs(I.Fragment,{children:[I.jsx(ct,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),I.jsx(I1,{h:"lg"}),I.jsx(Dp,{children:I.jsx(Mv,{color:"blue"})})]})})})}function yBt(e){const{email:t}=e;return I.jsx(lm,{pt:100,children:I.jsx(Dp,{children:I.jsxs(Wo,{order:3,children:["Trial not found, please contact the administrator at"," ",I.jsxs(x6,{span:!0,c:"blue",href:`mailto:${t}`,children:[t," "]})]})})})}function vBt(){var d;const e=n0(),t=wc(),n=ch()[t]||"Notfound",r=e.components[n],i=xK();dLe();const{storageEngine:s}=Ru(),o=lh(),{setAlertModal:a}=uh();if(C.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return I.jsx(gBt,{});if(n==="Notfound")return I.jsx(yBt,{email:e.uiConfig.contactEmail});const u=pF(r)&&e.baseComponents?EK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return I.jsxs(I.Fragment,{children:[c==="aboveStimulus"&&I.jsx(Na,{text:l}),I.jsx(UD,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),I.jsxs(C.Suspense,{fallback:I.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&I.jsx(HFt,{currentConfig:u}),u.type==="website"&&I.jsx(SSt,{currentConfig:u}),u.type==="image"&&I.jsx(CSt,{currentConfig:u}),u.type==="react-component"&&I.jsx(VFt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&I.jsx(Na,{text:l}),I.jsx(UD,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function pH(e){const[t]=ZG();return I.jsx(JG,{...e,to:{pathname:e.to,search:t.toString()}})}function hLe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=hLe(o,t,n,r),r.includes(o.orderPath))break}return i}function pLe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=pLe(s,r)}}),n}function _Bt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function bBt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=f4(),a=im(),u=wc(),l=n0(),[c,{close:f,open:d}]=aT(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?hLe(n,e,r,s.orderPath):-1,m=u===p;return I.jsxs(hi,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[I.jsx(hi.Target,{children:I.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:I.jsx(MAe,{active:m,style:{lineHeight:"32px",height:"32px"},label:I.jsxs("div",{children:[i&&I.jsx(ngt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?I.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&Dv.createPortal(I.jsx(hi.Dropdown,{onMouseLeave:f,children:I.jsx(ct,{size:"sm",children:I.jsxs("div",{children:[h.description&&I.jsxs("div",{children:[I.jsx(ct,{fw:900,display:"inline-block",mr:2,children:"Description:"}),I.jsx(ct,{fw:400,component:"span",children:h.description})]}),h.meta&&I.jsxs(ct,{children:[I.jsx(ct,{fw:"900",component:"span",children:"Task Meta: "}),I.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function mLe({configSequence:e,fullSequence:t,participantSequence:n}){let r=O1(e.components);return n&&(r=_Bt(O1(e.components),O1(n.components))),I.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return I.jsx(bBt,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?Lp(o).length-pLe(i,o):0,u=Lp(i);return I.jsx(MAe,{label:I.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",I.jsxs(T1,{ml:5,children:[a,"/",u.length]}),i.interruptions&&I.jsx(T1,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),I.jsx(ct,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?I.jsx(egt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:I.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:I.jsx(mLe,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function gLe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>gLe(n,`${t}-${r}`))}}function wBt(){const{showStudyBrowser:e,sequence:t}=Cf(u=>u),{toggleStudyBrowser:n}=uh(),r=wc(),i=ch()[r],s=n0(),o=lh(),a=C.useMemo(()=>{let u=O1(s.sequence);return u=gLe(u,"root"),u.components.push("end"),u},[s.sequence]);return e||i==="end"&&s.uiConfig.autoDownloadStudy?I.jsxs(yY,{p:"0",width:{base:300},style:{zIndex:0},children:[I.jsx(om,{style:{position:"absolute",right:"10px",top:"10px",zIndex:5},onClick:()=>o(n())}),I.jsxs(BTe,{p:"0",children:[I.jsx(ct,{size:"md",p:10,weight:"bold",children:"Study Browser"}),I.jsx(mLe,{configSequence:a,participantSequence:t,fullSequence:t})]})]}):null}var _ge={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yLe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},EBt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},TJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yLe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):EBt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new xBt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xBt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SBt=function(e){const t=yLe(e);return TJ.encodeByteArray(t,!0)},V3=function(e){return SBt(e).replace(/\./g,"")},vLe=function(e){try{return TJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TBt=()=>_Le().__FIREBASE_DEFAULTS__,CBt=()=>{if(typeof process>"u"||typeof _ge>"u")return;const e=_ge.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ABt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&vLe(e[1]);return t&&JSON.parse(t)},CJ=()=>{try{return TBt()||CBt()||ABt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},bLe=e=>{var t,n;return(n=(t=CJ())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},IBt=e=>{const t=bLe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},wLe=()=>{var e;return(e=CJ())===null||e===void 0?void 0:e.config},ELe=e=>{var t;return(t=CJ())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OBt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[V3(JSON.stringify(n)),V3(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PBt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ua())}function kBt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function $Bt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RBt(){const e=ua();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function AJ(){try{return typeof indexedDB=="object"}catch{return!1}}function NBt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DBt="FirebaseError";class mh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=DBt,Object.setPrototypeOf(this,mh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,px.prototype.create)}}class px{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?MBt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new mh(i,a,r)}}function MBt(e,t){return e.replace(LBt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const LBt=/\{\$([^}]+)}/g;function FBt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function WC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(bge(s)&&bge(o)){if(!WC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bge(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function jBt(e,t){const n=new BBt(e,t);return n.subscribe.bind(n)}class BBt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zBt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=IB),i.error===void 0&&(i.error=IB),i.complete===void 0&&(i.complete=IB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zBt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function IB(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UBt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VBt=1e3,HBt=2,qBt=4*60*60*1e3,WBt=.5;function GBt(e,t=VBt,n=HBt){const r=t*Math.pow(n,e),i=Math.round(WBt*r*(Math.random()-.5)*2);return Math.min(qBt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e){return e&&e._delegate?e._delegate:e}class Qd{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YBt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new qC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(XBt(t))try{this.getOrInitializeService({instanceIdentifier:My})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=My){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=My){return this.instances.has(t)}getOptions(t=My){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KBt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=My){return this.component?this.component.multipleInstances?t:My:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KBt(e){return e===My?void 0:e}function XBt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QBt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new YBt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fn||(Fn={}));const JBt={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},ZBt=Fn.INFO,e7t={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},t7t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=e7t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class mF{constructor(t){this.name=t,this._logLevel=ZBt,this._logHandler=t7t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JBt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}const n7t=(e,t)=>t.some(n=>e instanceof n);let wge,Ege;function r7t(){return wge||(wge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i7t(){return Ege||(Ege=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xLe=new WeakMap,mH=new WeakMap,SLe=new WeakMap,OB=new WeakMap,IJ=new WeakMap;function s7t(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(jg(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&xLe.set(n,e)}).catch(()=>{}),IJ.set(t,e),t}function o7t(e){if(mH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});mH.set(e,t)}let gH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return mH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||SLe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jg(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function a7t(e){gH=e(gH)}function u7t(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(PB(this),t,...n);return SLe.set(r,t.sort?t.sort():[t]),jg(r)}:i7t().includes(e)?function(...t){return e.apply(PB(this),t),jg(xLe.get(this))}:function(...t){return jg(e.apply(PB(this),t))}}function l7t(e){return typeof e=="function"?u7t(e):(e instanceof IDBTransaction&&o7t(e),n7t(e,r7t())?new Proxy(e,gH):e)}function jg(e){if(e instanceof IDBRequest)return s7t(e);if(OB.has(e))return OB.get(e);const t=l7t(e);return t!==e&&(OB.set(e,t),IJ.set(t,e)),t}const PB=e=>IJ.get(e);function c7t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=jg(o);return r&&o.addEventListener("upgradeneeded",u=>{r(jg(o.result),u.oldVersion,u.newVersion,jg(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const f7t=["get","getKey","getAll","getAllKeys","count"],d7t=["put","add","delete","clear"],kB=new Map;function xge(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(kB.get(t))return kB.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=d7t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||f7t.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return kB.set(t,s),s}a7t(e=>({...e,get:(t,n,r)=>xge(t,n)||e.get(t,n,r),has:(t,n)=>!!xge(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7t{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p7t(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function p7t(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const yH="@firebase/app",Sge="0.9.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new mF("@firebase/app"),m7t="@firebase/app-compat",g7t="@firebase/analytics-compat",y7t="@firebase/analytics",v7t="@firebase/app-check-compat",_7t="@firebase/app-check",b7t="@firebase/auth",w7t="@firebase/auth-compat",E7t="@firebase/database",x7t="@firebase/database-compat",S7t="@firebase/functions",T7t="@firebase/functions-compat",C7t="@firebase/installations",A7t="@firebase/installations-compat",I7t="@firebase/messaging",O7t="@firebase/messaging-compat",P7t="@firebase/performance",k7t="@firebase/performance-compat",$7t="@firebase/remote-config",R7t="@firebase/remote-config-compat",N7t="@firebase/storage",D7t="@firebase/storage-compat",M7t="@firebase/firestore",L7t="@firebase/firestore-compat",F7t="firebase",j7t="10.7.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH="[DEFAULT]",B7t={[yH]:"fire-core",[m7t]:"fire-core-compat",[y7t]:"fire-analytics",[g7t]:"fire-analytics-compat",[_7t]:"fire-app-check",[v7t]:"fire-app-check-compat",[b7t]:"fire-auth",[w7t]:"fire-auth-compat",[E7t]:"fire-rtdb",[x7t]:"fire-rtdb-compat",[S7t]:"fire-fn",[T7t]:"fire-fn-compat",[C7t]:"fire-iid",[A7t]:"fire-iid-compat",[I7t]:"fire-fcm",[O7t]:"fire-fcm-compat",[P7t]:"fire-perf",[k7t]:"fire-perf-compat",[$7t]:"fire-rc",[R7t]:"fire-rc-compat",[N7t]:"fire-gcs",[D7t]:"fire-gcs-compat",[M7t]:"fire-fst",[L7t]:"fire-fst-compat","fire-js":"fire-js",[F7t]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new Map,_H=new Map;function z7t(e,t){try{e.container.addComponent(t)}catch(n){av.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Gp(e){const t=e.name;if(_H.has(t))return av.debug(`There were multiple attempts to register component ${t}.`),!1;_H.set(t,e);for(const n of H3.values())z7t(n,e);return!0}function mx(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Bg=new px("app","Firebase",U7t);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7t{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=j7t;function TLe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:vH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Bg.create("bad-app-name",{appName:String(i)});if(n||(n=wLe()),!n)throw Bg.create("no-options");const s=H3.get(i);if(s){if(WC(n,s.options)&&WC(r,s.config))return s;throw Bg.create("duplicate-app",{appName:i})}const o=new QBt(i);for(const u of _H.values())o.addComponent(u);const a=new V7t(n,r,o);return H3.set(i,a),a}function OJ(e=vH){const t=H3.get(e);if(!t&&e===vH&&wLe())return TLe();if(!t)throw Bg.create("no-app",{appName:e});return t}function cf(e,t,n){var r;let i=(r=B7t[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),av.warn(a.join(" "));return}Gp(new Qd(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7t="firebase-heartbeat-database",q7t=1,GC="firebase-heartbeat-store";let $B=null;function CLe(){return $B||($B=c7t(H7t,q7t,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(GC)}}}).catch(e=>{throw Bg.create("idb-open",{originalErrorMessage:e.message})})),$B}async function W7t(e){try{return await(await CLe()).transaction(GC).objectStore(GC).get(ALe(e))}catch(t){if(t instanceof mh)av.warn(t.message);else{const n=Bg.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});av.warn(n.message)}}}async function Tge(e,t){try{const r=(await CLe()).transaction(GC,"readwrite");await r.objectStore(GC).put(t,ALe(e)),await r.done}catch(n){if(n instanceof mh)av.warn(n.message);else{const r=Bg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});av.warn(r.message)}}}function ALe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7t=1024,Y7t=30*24*60*60*1e3;class K7t{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Q7t(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cge();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Y7t}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cge(),{heartbeatsToSend:r,unsentEntries:i}=X7t(this._heartbeatsCache.heartbeats),s=V3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Cge(){return new Date().toISOString().substring(0,10)}function X7t(e,t=G7t){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Age(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Age(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Q7t{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AJ()?NBt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W7t(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Tge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Age(e){return V3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7t(e){Gp(new Qd("platform-logger",t=>new h7t(t),"PRIVATE")),Gp(new Qd("heartbeat",t=>new K7t(t),"PRIVATE")),cf(yH,Sge,e),cf(yH,Sge,"esm2017"),cf("fire-js","")}J7t("");function ILe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z7t=ILe,OLe=new px("auth","Firebase",ILe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=new mF("@firebase/auth");function ezt(e,...t){q3.logLevel<=Fn.WARN&&q3.warn(`Auth (${Qv}): ${e}`,...t)}function R$(e,...t){q3.logLevel<=Fn.ERROR&&q3.error(`Auth (${Qv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(e,...t){throw PJ(e,...t)}function Nd(e,...t){return PJ(e,...t)}function PLe(e,t,n){const r=Object.assign(Object.assign({},Z7t()),{[t]:n});return new px("auth","Firebase",r).create(t,{appName:e.name})}function tzt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Jd(e,"argument-error"),PLe(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function PJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return OLe.create(e,...t)}function tn(e,t,...n){if(!e)throw PJ(t,...n)}function lp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw R$(t),new Error(t)}function Yp(e,t){e||lp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function nzt(){return Ige()==="http:"||Ige()==="https:"}function Ige(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rzt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nzt()||kBt()||"connection"in navigator)?navigator.onLine:!0}function izt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,n){this.shortDelay=t,this.longDelay=n,Yp(n>t,"Short delay should be less than long delay!"),this.isMobile=PBt()||$Bt()}get(){return rzt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(e,t){Yp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kLe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const szt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ozt=new MI(3e4,6e4);function gF(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gx(e,t,n,r,i={}){return $Le(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=DI(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),kLe.fetch()(NLe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function $Le(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},szt),t);try{const i=new azt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw XP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw XP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw XP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw XP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw PLe(e,c,l);Jd(e,c)}}catch(i){if(i instanceof mh)throw i;Jd(e,"network-request-failed",{message:String(i)})}}async function RLe(e,t,n,r,i={}){const s=await gx(e,t,n,r,i);return"mfaPendingCredential"in s&&Jd(e,"multi-factor-auth-required",{_serverResponse:s}),s}function NLe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?kJ(e.config,i):`${e.config.apiScheme}://${i}`}class azt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nd(this.auth,"network-request-failed")),ozt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function XP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uzt(e,t){return gx(e,"POST","/v1/accounts:delete",t)}async function lzt(e,t){return gx(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function czt(e,t=!1){const n=Ti(e),r=await n.getIdToken(t),i=$J(r);tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:A2(RB(i.auth_time)),issuedAtTime:A2(RB(i.iat)),expirationTime:A2(RB(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function RB(e){return Number(e)*1e3}function $J(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return R$("JWT malformed, contained fewer than 3 sections"),null;try{const i=vLe(n);return i?JSON.parse(i):(R$("Failed to decode base64 JWT payload"),null)}catch(i){return R$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fzt(e){const t=$J(e);return tn(t,"internal-error"),tn(typeof t.exp<"u","internal-error"),tn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof mh&&dzt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function dzt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hzt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DLe{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=A2(this.lastLoginAt),this.creationTime=A2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await YC(e,lzt(n,{idToken:r}));tn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?gzt(s.providerUserInfo):[],a=mzt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new DLe(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function pzt(e){const t=Ti(e);await W3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mzt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function gzt(e){return e.map(t=>{var{providerId:n}=t,r=cX(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yzt(e,t){const n=await $Le(e,{},async()=>{const r=DI({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=NLe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kLe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vzt(e,t){return gx(e,"POST","/v2/accounts:revokeToken",gF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){tn(t.idToken,"internal-error"),tn(typeof t.idToken<"u","internal-error"),tn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):fzt(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await yzt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new KC;return r&&(tn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(tn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(tn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new KC,this.toJSON())}_performRefresh(){return lp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(e,t){tn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class N1{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=cX(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hzt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new DLe(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await YC(this,this.stsTokenManager.getToken(this.auth,t));return tn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return czt(this,t)}reload(){return pzt(this)}_assign(t){this!==t&&(tn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new N1(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await W3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await YC(this,uzt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:w,stsTokenManager:x}=n;tn(_&&x,t,"internal-error");const S=KC.fromJSON(this.name,x);tn(typeof _=="string",t,"internal-error"),km(f,t.name),km(d,t.name),tn(typeof b=="boolean",t,"internal-error"),tn(typeof E=="boolean",t,"internal-error"),km(h,t.name),km(p,t.name),km(m,t.name),km(g,t.name),km(y,t.name),km(v,t.name);const P=new N1({uid:_,auth:t,email:d,emailVerified:b,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return w&&Array.isArray(w)&&(P.providerData=w.map(A=>Object.assign({},A))),g&&(P._redirectEventId=g),P}static async _fromIdTokenResponse(t,n,r=!1){const i=new KC;i.updateFromServerResponse(n);const s=new N1({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await W3(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oge=new Map;function cp(e){Yp(e instanceof Function,"Expected a class definition");let t=Oge.get(e);return t?(Yp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Oge.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MLe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}MLe.type="NONE";const Pge=MLe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(e,t,n){return`firebase:${e}:${t}:${n}`}class tw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=N$(this.userKey,i.apiKey,s),this.fullPersistenceKey=N$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?N1._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new tw(cp(Pge),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||cp(Pge);const o=N$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=N1._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new tw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new tw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jLe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(LLe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zLe(t))return"Blackberry";if(ULe(t))return"Webos";if(RJ(t))return"Safari";if((t.includes("chrome/")||FLe(t))&&!t.includes("edge/"))return"Chrome";if(BLe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LLe(e=ua()){return/firefox\//i.test(e)}function RJ(e=ua()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function FLe(e=ua()){return/crios\//i.test(e)}function jLe(e=ua()){return/iemobile/i.test(e)}function BLe(e=ua()){return/android/i.test(e)}function zLe(e=ua()){return/blackberry/i.test(e)}function ULe(e=ua()){return/webos/i.test(e)}function yF(e=ua()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _zt(e=ua()){var t;return yF(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function bzt(){return RBt()&&document.documentMode===10}function VLe(e=ua()){return yF(e)||BLe(e)||ULe(e)||zLe(e)||/windows phone/i.test(e)||jLe(e)}function wzt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HLe(e,t=[]){let n;switch(e){case"Browser":n=kge(ua());break;case"Worker":n=`${kge(ua())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ezt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xzt(e,t={}){return gx(e,"GET","/v2/passwordPolicy",gF(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Szt=6;class Tzt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Szt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Czt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $ge(this),this.idTokenSubscription=new $ge(this),this.beforeStateQueue=new Ezt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OLe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=cp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await tw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await W3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=izt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Ti(t):null;return n&&tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(cp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await xzt(this),n=new Tzt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new px("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vzt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&cp(t)||this._popupRedirectResolver;tn(n,this,"argument-error"),this.redirectPersistenceManager=await tw.create(this,[cp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=HLe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&ezt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function LI(e){return Ti(e)}class $ge{constructor(t){this.auth=t,this.observer=null,this.addObserver=jBt(n=>this.observer=n)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Azt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function Izt(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Nd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Azt().appendChild(r)})}function Ozt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pzt(e,t){const n=mx(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(WC(s,t??{}))return i;Jd(i,"already-initialized")}return n.initialize({options:t})}function kzt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function $zt(e,t,n){const r=LI(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=qLe(t),{host:o,port:a}=Rzt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Nzt()}function qLe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rzt(e){const t=qLe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rge(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rge(o)}}}function Rge(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Nzt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WLe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return lp("not implemented")}_getIdTokenResponse(t){return lp("not implemented")}_linkToIdToken(t,n){return lp("not implemented")}_getReauthenticationResolver(t){return lp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nw(e,t){return RLe(e,"POST","/v1/accounts:signInWithIdp",gF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dzt="http://localhost";class uv extends WLe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new uv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Jd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=cX(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new uv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return nw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,nw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,nw(t,n)}buildRequest(){const t={requestUri:Dzt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=DI(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends NJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends FI{constructor(){super("facebook.com")}static credential(t){return uv._fromParams({providerId:eg.PROVIDER_ID,signInMethod:eg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return eg.credentialFromTaggedObject(t)}static credentialFromError(t){return eg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return eg.credential(t.oauthAccessToken)}catch{return null}}}eg.FACEBOOK_SIGN_IN_METHOD="facebook.com";eg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends FI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return uv._fromParams({providerId:Jh.PROVIDER_ID,signInMethod:Jh.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Jh.credentialFromTaggedObject(t)}static credentialFromError(t){return Jh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Jh.credential(n,r)}catch{return null}}}Jh.GOOGLE_SIGN_IN_METHOD="google.com";Jh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends FI{constructor(){super("github.com")}static credential(t){return uv._fromParams({providerId:tg.PROVIDER_ID,signInMethod:tg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tg.credentialFromTaggedObject(t)}static credentialFromError(t){return tg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return tg.credential(t.oauthAccessToken)}catch{return null}}}tg.GITHUB_SIGN_IN_METHOD="github.com";tg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends FI{constructor(){super("twitter.com")}static credential(t,n){return uv._fromParams({providerId:ng.PROVIDER_ID,signInMethod:ng.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return ng.credentialFromTaggedObject(t)}static credentialFromError(t){return ng.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ng.credential(n,r)}catch{return null}}}ng.TWITTER_SIGN_IN_METHOD="twitter.com";ng.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mzt(e,t){return RLe(e,"POST","/v1/accounts:signUp",gF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await N1._fromIdTokenResponse(t,r,i),o=Nge(r);return new m0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Nge(r);return new m0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Nge(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lzt(e){var t;const n=LI(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new m0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Mzt(n,{returnSecureToken:!0}),i=await m0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3 extends mh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,G3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new G3(t,n,r,i)}}function GLe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?G3._fromErrorAndOperation(e,s,t,r):s})}async function Fzt(e,t,n=!1){const r=await YC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return m0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jzt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await YC(e,GLe(r,i,t,e),n);tn(s.idToken,r,"internal-error");const o=$J(s.idToken);tn(o,r,"internal-error");const{sub:a}=o;return tn(e.uid===a,r,"user-mismatch"),m0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jd(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bzt(e,t,n=!1){const r="signIn",i=await GLe(e,r,t),s=await m0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function zzt(e,t,n,r){return Ti(e).onIdTokenChanged(t,n,r)}function Uzt(e,t,n){return Ti(e).beforeAuthStateChanged(t,n)}function Vzt(e,t,n,r){return Ti(e).onAuthStateChanged(t,n,r)}function Hzt(e){return Ti(e).signOut()}const Y3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YLe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Y3,"1"),this.storage.removeItem(Y3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qzt(){const e=ua();return RJ(e)||yF(e)}const Wzt=1e3,Gzt=10;class KLe extends YLe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=qzt()&&wzt(),this.fallbackToPolling=VLe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bzt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Gzt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Wzt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}KLe.type="LOCAL";const Yzt=KLe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XLe extends YLe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}XLe.type="SESSION";const QLe=XLe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kzt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new vF(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Kzt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vF.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xzt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=DJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){return window}function Qzt(e){Dd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JLe(){return typeof Dd().WorkerGlobalScope<"u"&&typeof Dd().importScripts=="function"}async function Jzt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zzt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function eUt(){return JLe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZLe="firebaseLocalStorageDb",tUt=1,K3="firebaseLocalStorage",e6e="fbase_key";class jI{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _F(e,t){return e.transaction([K3],t?"readwrite":"readonly").objectStore(K3)}function nUt(){const e=indexedDB.deleteDatabase(ZLe);return new jI(e).toPromise()}function wH(){const e=indexedDB.open(ZLe,tUt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(K3,{keyPath:e6e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(K3)?t(r):(r.close(),await nUt(),t(await wH()))})})}async function Dge(e,t,n){const r=_F(e,!0).put({[e6e]:t,value:n});return new jI(r).toPromise()}async function rUt(e,t){const n=_F(e,!1).get(t),r=await new jI(n).toPromise();return r===void 0?null:r.value}function Mge(e,t){const n=_F(e,!0).delete(t);return new jI(n).toPromise()}const iUt=800,sUt=3;class t6e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>sUt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JLe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vF._getInstance(eUt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Jzt(),!this.activeServiceWorker)return;this.sender=new Xzt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Zzt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wH();return await Dge(t,Y3,"1"),await Mge(t,Y3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dge(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>rUt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mge(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=_F(i,!1).getAll();return new jI(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iUt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t6e.type="LOCAL";const oUt=t6e;new MI(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6e(e,t){return t?cp(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ extends WLe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return nw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return nw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return nw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function aUt(e){return Bzt(e.auth,new MJ(e),e.bypassAuthState)}function uUt(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),jzt(n,new MJ(e),e.bypassAuthState)}async function lUt(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),Fzt(n,new MJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return aUt;case"linkViaPopup":case"linkViaRedirect":return lUt;case"reauthViaPopup":case"reauthViaRedirect":return uUt;default:Jd(this.auth,"internal-error")}}resolve(t){Yp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Yp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cUt=new MI(2e3,1e4);async function fUt(e,t,n){const r=LI(e);tzt(e,t,NJ);const i=n6e(r,n);return new p1(r,"signInViaPopup",t,i).executeNotNull()}class p1 extends r6e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,p1.currentPopupAction&&p1.currentPopupAction.cancel(),p1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return tn(t,this.auth,"internal-error"),t}async onExecution(){Yp(this.filter.length===1,"Popup operations only handle one event");const t=DJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Nd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,cUt.get())};t()}}p1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dUt="pendingRedirect",D$=new Map;class hUt extends r6e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=D$.get(this.auth._key());if(!t){try{const r=await pUt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}D$.set(this.auth._key(),t)}return this.bypassAuthState||D$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pUt(e,t){const n=yUt(t),r=gUt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mUt(e,t){D$.set(e._key(),t)}function gUt(e){return cp(e._redirectPersistence)}function yUt(e){return N$(dUt,e.config.apiKey,e.name)}async function vUt(e,t,n=!1){const r=LI(e),i=n6e(r,t),o=await new hUt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ut=10*60*1e3;class bUt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!wUt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!i6e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=_Ut&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lge(t))}saveEventToCache(t){this.cachedEventUids.add(Lge(t)),this.lastProcessedEventTime=Date.now()}}function Lge(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function i6e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function wUt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i6e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EUt(e,t={}){return gx(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xUt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SUt=/^https?/;async function TUt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await EUt(e);for(const n of t)try{if(CUt(n))return}catch{}Jd(e,"unauthorized-domain")}function CUt(e){const t=bH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SUt.test(n))return!1;if(xUt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AUt=new MI(3e4,6e4);function Fge(){const e=Dd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function IUt(e){return new Promise((t,n)=>{var r,i,s;function o(){Fge(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fge(),n(Nd(e,"network-request-failed"))},timeout:AUt.get()})}if(!((i=(r=Dd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Dd().gapi)===null||s===void 0)&&s.load)o();else{const a=Ozt("iframefcb");return Dd()[a]=()=>{gapi.load?o():n(Nd(e,"network-request-failed"))},Izt(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw M$=null,t})}let M$=null;function OUt(e){return M$=M$||IUt(e),M$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PUt=new MI(5e3,15e3),kUt="__/auth/iframe",$Ut="emulator/auth/iframe",RUt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NUt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DUt(e){const t=e.config;tn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kJ(t,$Ut):`https://${e.config.authDomain}/${kUt}`,r={apiKey:t.apiKey,appName:e.name,v:Qv},i=NUt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${DI(r).slice(1)}`}async function MUt(e){const t=await OUt(e),n=Dd().gapi;return tn(n,e,"internal-error"),t.open({where:document.body,url:DUt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RUt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Nd(e,"network-request-failed"),a=Dd().setTimeout(()=>{s(o)},PUt.get());function u(){Dd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LUt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FUt=500,jUt=600,BUt="_blank",zUt="http://localhost";class jge{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UUt(e,t,n,r=FUt,i=jUt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},LUt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ua().toLowerCase();n&&(a=FLe(l)?BUt:n),LLe(l)&&(t=t||zUt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(_zt(l)&&a!=="_self")return VUt(t||"",a),new jge(null);const f=window.open(t||"",a,c);tn(f,e,"popup-blocked");try{f.focus()}catch{}return new jge(f)}function VUt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HUt="__/auth/handler",qUt="emulator/auth/handler",WUt=encodeURIComponent("fac");async function Bge(e,t,n,r,i,s){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qv,eventId:i};if(t instanceof NJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",FBt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof FI){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${WUt}=${encodeURIComponent(u)}`:"";return`${GUt(e)}?${DI(a).slice(1)}${l}`}function GUt({config:e}){return e.emulator?kJ(e,qUt):`https://${e.authDomain}/${HUt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="webStorageSupport";class YUt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QLe,this._completeRedirectFn=vUt,this._overrideRedirectResult=mUt}async _openPopup(t,n,r,i){var s;Yp((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Bge(t,n,r,bH(),i);return UUt(t,o,DJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Bge(t,n,r,bH(),i);return Qzt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Yp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await MUt(t),r=new bUt(t);return n.register("authEvent",i=>(tn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(NB,{type:NB},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[NB];o!==void 0&&n(!!o),Jd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TUt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return VLe()||RJ()||yF()}}const KUt=YUt;var zge="@firebase/auth",Uge="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XUt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QUt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function JUt(e){Gp(new Qd("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;tn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HLe(e)},l=new Czt(r,i,s,u);return kzt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Gp(new Qd("auth-internal",t=>{const n=LI(t.getProvider("auth").getImmediate());return(r=>new XUt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cf(zge,Uge,QUt(e)),cf(zge,Uge,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZUt=5*60,eVt=ELe("authIdTokenMaxAge")||ZUt;let Vge=null;const tVt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eVt)return;const i=n==null?void 0:n.token;Vge!==i&&(Vge=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function X3(e=OJ()){const t=mx(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Pzt(e,{popupRedirectResolver:KUt,persistence:[oUt,Yzt,QLe]}),r=ELe("authTokenSyncURL");if(r){const s=tVt(r);Uzt(n,s,()=>s(n.currentUser)),zzt(n,o=>s(o))}const i=bLe("auth");return i&&$zt(n,`http://${i}`),n}JUt("Browser");var nVt="firebase",rVt="10.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cf(nVt,rVt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6e="firebasestorage.googleapis.com",o6e="storageBucket",iVt=2*60*1e3,sVt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends mh{constructor(t,n,r=0){super(DB(t),`Firebase Storage: ${n} (${DB(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ui.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return DB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bi||(Bi={}));function DB(e){return"storage/"+e}function LJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Ui(Bi.UNKNOWN,e)}function oVt(e){return new Ui(Bi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function aVt(e){return new Ui(Bi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uVt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ui(Bi.UNAUTHENTICATED,e)}function lVt(){return new Ui(Bi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cVt(e){return new Ui(Bi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function fVt(){return new Ui(Bi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dVt(){return new Ui(Bi.CANCELED,"User canceled the upload/download.")}function hVt(e){return new Ui(Bi.INVALID_URL,"Invalid URL '"+e+"'.")}function pVt(e){return new Ui(Bi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function mVt(){return new Ui(Bi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+o6e+"' property when initializing the app?")}function gVt(){return new Ui(Bi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yVt(){return new Ui(Bi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vVt(e){return new Ui(Bi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function EH(e){return new Ui(Bi.INVALID_ARGUMENT,e)}function a6e(){return new Ui(Bi.APP_DELETED,"The Firebase app was deleted.")}function _Vt(e){return new Ui(Bi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function I2(e,t){return new Ui(Bi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function OS(e){throw new Ui(Bi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=nl.makeFromUrl(t,n)}catch{return new nl(t,"")}if(r.path==="")return r;throw pVt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===s6e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<_.length;b++){const E=_[b],w=E.regex.exec(t);if(w){const x=w[E.indices.bucket];let S=w[E.indices.path];S||(S=""),r=new nl(x,S),E.postModify(r);break}}if(r==null)throw hVt(t);return r}}class bVt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wVt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function EVt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xVt(e){return e!==void 0}function SVt(e){return typeof e=="object"&&!Array.isArray(e)}function FJ(e){return typeof e=="string"||e instanceof String}function Hge(e){return jJ()&&e instanceof Blob}function jJ(){return typeof Blob<"u"}function qge(e,t,n,r){if(r<t)throw EH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw EH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function u6e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(D1||(D1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TVt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CVt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new QP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===D1.NO_ERROR,u=s.getStatus();if(!a||TVt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===D1.ABORT;r(!1,new QP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new QP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());xVt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=LJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?a6e():dVt();o(u)}else{const u=fVt();o(u)}};this.canceled_?n(!1,new QP(!1,null,!0)):this.backoffId_=wVt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&EVt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class QP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function AVt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function IVt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function OVt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function PVt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function kVt(e,t,n,r,i,s,o=!0){const a=u6e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return OVt(l,t),AVt(l,n),IVt(l,s),PVt(l,r),new CVt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Vt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RVt(...e){const t=$Vt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(jJ())return new Blob(e);throw new Ui(Bi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NVt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DVt(e){if(typeof atob>"u")throw vVt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class MB{constructor(t,n){this.data=t,this.contentType=n||null}}function MVt(e,t){switch(e){case bd.RAW:return new MB(l6e(t));case bd.BASE64:case bd.BASE64URL:return new MB(c6e(e,t));case bd.DATA_URL:return new MB(FVt(t),jVt(t))}throw LJ()}function l6e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function LVt(e){let t;try{t=decodeURIComponent(e)}catch{throw I2(bd.DATA_URL,"Malformed data URL.")}return l6e(t)}function c6e(e,t){switch(e){case bd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw I2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw I2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=DVt(t)}catch(i){throw i.message.includes("polyfill")?i:I2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class f6e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw I2(bd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BVt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function FVt(e){const t=new f6e(e);return t.base64?c6e(bd.BASE64,t.rest):LVt(t.rest)}function jVt(e){return new f6e(e).contentType}function BVt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,n){let r=0,i="";Hge(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Hge(this.data_)){const r=this.data_,i=NVt(r,t,n);return i===null?null:new rg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new rg(r,!0)}}static getBlob(...t){if(jJ()){const n=t.map(r=>r instanceof rg?r.data_:r);return new rg(RVt.apply(null,n))}else{const n=t.map(o=>FJ(o)?MVt(bd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new rg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6e(e){let t;try{t=JSON.parse(e)}catch{return null}return SVt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zVt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function UVt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function h6e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VVt(e,t){return t}class ya{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||VVt}}let JP=null;function HVt(e){return!FJ(e)||e.length<2?e:h6e(e)}function p6e(){if(JP)return JP;const e=[];e.push(new ya("bucket")),e.push(new ya("generation")),e.push(new ya("metageneration")),e.push(new ya("name","fullPath",!0));function t(s,o){return HVt(o)}const n=new ya("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ya("size");return i.xform=r,e.push(i),e.push(new ya("timeCreated")),e.push(new ya("updated")),e.push(new ya("md5Hash",null,!0)),e.push(new ya("cacheControl",null,!0)),e.push(new ya("contentDisposition",null,!0)),e.push(new ya("contentEncoding",null,!0)),e.push(new ya("contentLanguage",null,!0)),e.push(new ya("contentType",null,!0)),e.push(new ya("metadata","customMetadata",!0)),JP=e,JP}function qVt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new nl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function WVt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return qVt(r,e),r}function m6e(e,t,n){const r=d6e(t);return r===null?null:WVt(e,r,n)}function GVt(e,t,n,r){const i=d6e(t);if(i===null||!FJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=bF(d,n,r),p=u6e({alt:"media",token:l});return h+p})[0]}function YVt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class BJ{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6e(e){if(!e)throw LJ()}function KVt(e,t){function n(r,i){const s=m6e(e,i,t);return g6e(s!==null),s}return n}function XVt(e,t){function n(r,i){const s=m6e(e,i,t);return g6e(s!==null),GVt(s,i,e.host,e._protocol)}return n}function y6e(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=lVt():i=uVt():n.getStatus()===402?i=aVt(e.bucket):n.getStatus()===403?i=cVt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function v6e(e){const t=y6e(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=oVt(e.path)),s.serverResponse=i.serverResponse,s}return n}function QVt(e,t,n){const r=t.fullServerUrl(),i=bF(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new BJ(i,s,XVt(e,n),o);return a.errorHandler=v6e(t),a}function JVt(e,t){const n=t.fullServerUrl(),r=bF(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new BJ(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=v6e(t),a}function ZVt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function eHt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=ZVt(null,t)),r}function tHt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=eHt(t,r,i),c=YVt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=rg.getBlob(f,r,d);if(h===null)throw gVt();const p={name:l.fullPath},m=bF(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new BJ(m,g,KVt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=y6e(t),v}class nHt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=D1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=D1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=D1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw OS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw OS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw OS("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw OS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw OS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class rHt extends nHt{initXhr(){this.xhr_.responseType="text"}}function zJ(){return new rHt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(t,n){this._service=t,n instanceof nl?this._location=n:this._location=nl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new lv(t,n)}get root(){const t=new nl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return h6e(this._location.path)}get storage(){return this._service}get parent(){const t=zVt(this._location.path);if(t===null)return null;const n=new nl(this._location.bucket,t);return new lv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw _Vt(t)}}function iHt(e,t,n){e._throwIfRoot("uploadBytes");const r=tHt(e.storage,e._location,p6e(),new rg(t,!0),n);return e.storage.makeRequestWithTokens(r,zJ).then(i=>({metadata:i,ref:e}))}function sHt(e){e._throwIfRoot("getDownloadURL");const t=QVt(e.storage,e._location,p6e());return e.storage.makeRequestWithTokens(t,zJ).then(n=>{if(n===null)throw yVt();return n})}function oHt(e){e._throwIfRoot("deleteObject");const t=JVt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,zJ)}function aHt(e,t){const n=UVt(e._location.path,t),r=new nl(e._location.bucket,n);return new lv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uHt(e){return/^[A-Za-z]+:\/\//.test(e)}function lHt(e,t){return new lv(e,t)}function _6e(e,t){if(e instanceof UJ){const n=e;if(n._bucket==null)throw mVt();const r=new lv(n,n._bucket);return t!=null?_6e(r,t):r}else return t!==void 0?aHt(e,t):e}function cHt(e,t){if(t&&uHt(t)){if(e instanceof UJ)return lHt(e,t);throw EH("To use ref(service, url), the first argument must be a Storage instance.")}else return _6e(e,t)}function Wge(e,t){const n=t==null?void 0:t[o6e];return n==null?null:nl.makeFromBucketSpec(n,e)}function fHt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:OBt(i,e.app.options.projectId))}class UJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=s6e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iVt,this._maxUploadRetryTime=sVt,this._requests=new Set,i!=null?this._bucket=nl.makeFromBucketSpec(i,this._host):this._bucket=Wge(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=nl.makeFromBucketSpec(this._url,t):this._bucket=Wge(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){qge("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){qge("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new lv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new bVt(a6e());{const o=kVt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Gge="@firebase/storage",Yge="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6e="storage";function dHt(e,t,n){return e=Ti(e),iHt(e,t,n)}function hHt(e){return e=Ti(e),sHt(e)}function pHt(e){return e=Ti(e),oHt(e)}function LB(e,t){return e=Ti(e),cHt(e,t)}function FB(e=OJ(),t){e=Ti(e);const r=mx(e,b6e).getImmediate({identifier:t}),i=IBt("storage");return i&&mHt(r,...i),r}function mHt(e,t,n,r={}){fHt(e,t,n,r)}function gHt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new UJ(n,r,i,t,Qv)}function yHt(){Gp(new Qd(b6e,gHt,"PUBLIC").setMultipleInstances(!0)),cf(Gge,Yge,""),cf(Gge,Yge,"esm2017")}yHt();var vHt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},at,VJ=VJ||{},Zt=vHt||self;function wF(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function BI(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function _Ht(e){return Object.prototype.hasOwnProperty.call(e,jB)&&e[jB]||(e[jB]=++bHt)}var jB="closure_uid_"+(1e9*Math.random()>>>0),bHt=0;function wHt(e,t,n){return e.call.apply(e.bind,arguments)}function EHt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Zo(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zo=wHt:Zo=EHt,Zo.apply(null,arguments)}function ZP(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function eo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function K0(){this.s=this.s,this.o=this.o}var xHt=0;K0.prototype.s=!1;K0.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),xHt!=0)&&_Ht(this)};K0.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const w6e=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function HJ(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Kge(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(wF(r)){const i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function ea(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ea.prototype.h=function(){this.defaultPrevented=!0};var SHt=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};Zt.addEventListener("test",n,t),Zt.removeEventListener("test",n,t)}catch{}return e}();function XC(e){return/^[\s\xa0]*$/.test(e)}function EF(){var e=Zt.navigator;return e&&(e=e.userAgent)?e:""}function hd(e){return EF().indexOf(e)!=-1}function qJ(e){return qJ[" "](e),e}qJ[" "]=function(){};function THt(e,t){var n=yqt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var CHt=hd("Opera"),nE=hd("Trident")||hd("MSIE"),E6e=hd("Edge"),xH=E6e||nE,x6e=hd("Gecko")&&!(EF().toLowerCase().indexOf("webkit")!=-1&&!hd("Edge"))&&!(hd("Trident")||hd("MSIE"))&&!hd("Edge"),AHt=EF().toLowerCase().indexOf("webkit")!=-1&&!hd("Edge");function S6e(){var e=Zt.document;return e?e.documentMode:void 0}var SH;e:{var BB="",zB=function(){var e=EF();if(x6e)return/rv:([^\);]+)(\)|;)/.exec(e);if(E6e)return/Edge\/([\d\.]+)/.exec(e);if(nE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(AHt)return/WebKit\/(\S+)/.exec(e);if(CHt)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(zB&&(BB=zB?zB[1]:""),nE){var UB=S6e();if(UB!=null&&UB>parseFloat(BB)){SH=String(UB);break e}}SH=BB}var TH;if(Zt.document&&nE){var Xge=S6e();TH=Xge||parseInt(SH,10)||void 0}else TH=void 0;var IHt=TH;function QC(e,t){if(ea.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(x6e){e:{try{qJ(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:OHt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&QC.$.h.call(this)}}eo(QC,ea);var OHt={2:"touch",3:"pen",4:"mouse"};QC.prototype.h=function(){QC.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zI="closure_listenable_"+(1e6*Math.random()|0),PHt=0;function kHt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++PHt,this.fa=this.ia=!1}function xF(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function WJ(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function $Ht(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function T6e(e){const t={};for(const n in e)t[n]=e[n];return t}const Qge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C6e(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<Qge.length;s++)n=Qge[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function SF(e){this.src=e,this.g={},this.h=0}SF.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=AH(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new kHt(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function CH(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=w6e(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(xF(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function AH(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var GJ="closure_lm_"+(1e6*Math.random()|0),VB={};function A6e(e,t,n,r,i){if(r&&r.once)return O6e(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)A6e(e,t[s],n,r,i);return null}return n=XJ(n),e&&e[zI]?e.O(t,n,BI(r)?!!r.capture:!!r,i):I6e(e,t,n,!1,r,i)}function I6e(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=BI(i)?!!i.capture:!!i,a=KJ(e);if(a||(e[GJ]=a=new SF(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=RHt(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)SHt||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(k6e(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function RHt(){function e(n){return t.call(e.src,e.listener,n)}const t=NHt;return e}function O6e(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)O6e(e,t[s],n,r,i);return null}return n=XJ(n),e&&e[zI]?e.P(t,n,BI(r)?!!r.capture:!!r,i):I6e(e,t,n,!0,r,i)}function P6e(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)P6e(e,t[s],n,r,i);else r=BI(r)?!!r.capture:!!r,n=XJ(n),e&&e[zI]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=AH(s,n,r,i),-1<n&&(xF(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=KJ(e))&&(t=e.g[t.toString()],e=-1,t&&(e=AH(t,n,r,i)),(n=-1<e?t[e]:null)&&YJ(n))}function YJ(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[zI])CH(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(k6e(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=KJ(t))?(CH(n,e),n.h==0&&(n.src=null,t[GJ]=null)):xF(e)}}}function k6e(e){return e in VB?VB[e]:VB[e]="on"+e}function NHt(e,t){if(e.fa)e=!0;else{t=new QC(t,this);var n=e.listener,r=e.la||e.src;e.ia&&YJ(e),e=n.call(r,t)}return e}function KJ(e){return e=e[GJ],e instanceof SF?e:null}var HB="__closure_events_fn_"+(1e9*Math.random()>>>0);function XJ(e){return typeof e=="function"?e:(e[HB]||(e[HB]=function(t){return e.handleEvent(t)}),e[HB])}function Xs(){K0.call(this),this.i=new SF(this),this.S=this,this.J=null}eo(Xs,K0);Xs.prototype[zI]=!0;Xs.prototype.removeEventListener=function(e,t,n,r){P6e(this,e,t,n,r)};function wo(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new ea(t,e);else if(t instanceof ea)t.target=t.target||e;else{var i=t;t=new ea(r,e),C6e(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ek(o,r,!0,t)&&i}if(o=t.g=e,i=ek(o,r,!0,t)&&i,i=ek(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=ek(o,r,!1,t)&&i}Xs.prototype.N=function(){if(Xs.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)xF(n[r]);delete e.g[t],e.h--}}this.J=null};Xs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Xs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function ek(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&CH(e.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var QJ=Zt.JSON.stringify;class DHt{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function MHt(){var e=JJ;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class LHt{constructor(){this.h=this.g=null}add(t,n){const r=$6e.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var $6e=new DHt(()=>new FHt,e=>e.reset());class FHt{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function jHt(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function BHt(e){Zt.setTimeout(()=>{throw e},0)}let JC,ZC=!1,JJ=new LHt,R6e=()=>{const e=Zt.Promise.resolve(void 0);JC=()=>{e.then(zHt)}};var zHt=()=>{for(var e;e=MHt();){try{e.h.call(e.g)}catch(n){BHt(n)}var t=$6e;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ZC=!1};function TF(e,t){Xs.call(this),this.h=e||1,this.g=t||Zt,this.j=Zo(this.qb,this),this.l=Date.now()}eo(TF,Xs);at=TF.prototype;at.ga=!1;at.T=null;at.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wo(this,"tick"),this.ga&&(ZJ(this),this.start()))}};at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ZJ(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}at.N=function(){TF.$.N.call(this),ZJ(this),delete this.g};function eZ(e,t,n){if(typeof e=="function")n&&(e=Zo(e,n));else if(e&&typeof e.handleEvent=="function")e=Zo(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Zt.setTimeout(e,t||0)}function N6e(e){e.g=eZ(()=>{e.g=null,e.i&&(e.i=!1,N6e(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class UHt extends K0{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:N6e(this)}N(){super.N(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eA(e){K0.call(this),this.h=e,this.g={}}eo(eA,K0);var Jge=[];function D6e(e,t,n,r){Array.isArray(n)||(n&&(Jge[0]=n.toString()),n=Jge);for(var i=0;i<n.length;i++){var s=A6e(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function M6e(e){WJ(e.g,function(t,n){this.g.hasOwnProperty(n)&&YJ(t)},e),e.g={}}eA.prototype.N=function(){eA.$.N.call(this),M6e(this)};eA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function CF(){this.g=!0}CF.prototype.Ea=function(){this.g=!1};function VHt(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&f[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function HHt(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function xb(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+WHt(e,n)+(r?" "+r:"")})}function qHt(e,t){e.info(function(){return"TIMEOUT: "+t})}CF.prototype.info=function(){};function WHt(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return QJ(n)}catch{return t}}var Jv={},Zge=null;function AF(){return Zge=Zge||new Xs}Jv.Ta="serverreachability";function L6e(e){ea.call(this,Jv.Ta,e)}eo(L6e,ea);function tA(e){const t=AF();wo(t,new L6e(t))}Jv.STAT_EVENT="statevent";function F6e(e,t){ea.call(this,Jv.STAT_EVENT,e),this.stat=t}eo(F6e,ea);function Ia(e){const t=AF();wo(t,new F6e(t,e))}Jv.Ua="timingevent";function j6e(e,t){ea.call(this,Jv.Ua,e),this.size=t}eo(j6e,ea);function UI(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){e()},t)}var IF={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},B6e={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function tZ(){}tZ.prototype.h=null;function e0e(e){return e.h||(e.h=e.i())}function z6e(){}var VI={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nZ(){ea.call(this,"d")}eo(nZ,ea);function rZ(){ea.call(this,"c")}eo(rZ,ea);var IH;function OF(){}eo(OF,tZ);OF.prototype.g=function(){return new XMLHttpRequest};OF.prototype.i=function(){return{}};IH=new OF;function HI(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new eA(this),this.P=GHt,e=xH?125:void 0,this.V=new TF(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new U6e}function U6e(){this.i=null,this.g="",this.h=!1}var GHt=45e3,V6e={},OH={};at=HI.prototype;at.setTimeout=function(e){this.P=e};function PH(e,t,n){e.L=1,e.A=kF(Kp(t)),e.u=n,e.S=!0,H6e(e,null)}function H6e(e,t){e.G=Date.now(),qI(e),e.B=Kp(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),J6e(n.i,"t",r),e.o=0,n=e.l.J,e.h=new U6e,e.g=_4e(e.l,n?t:null,!e.u),0<e.O&&(e.M=new UHt(Zo(e.Pa,e,e.g),e.O)),D6e(e.U,e.g,"readystatechange",e.nb),t=e.I?T6e(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),tA(),VHt(e.j,e.v,e.B,e.m,e.W,e.u)}at.nb=function(e){e=e.target;const t=this.M;t&&wd(e)==3?t.l():this.Pa(e)};at.Pa=function(e){try{if(e==this.g)e:{const c=wd(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>c)&&(c!=3||xH||this.g&&(this.h.h||this.g.ja()||i0e(this.g)))){this.J||c!=4||t==7||(t==8||0>=f?tA(3):tA(2)),PF(this);var n=this.g.da();this.ca=n;t:if(q6e(this)){var r=i0e(this.g);e="";var i=r.length,s=wd(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){m1(this),O2(this);var o="";break t}this.h.i=new Zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,HHt(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!XC(a)){var l=a;break t}}l=null}if(n=l)xb(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kH(this,n);else{this.i=!1,this.s=3,Ia(12),m1(this),O2(this);break e}}this.S?(W6e(this,c,o),xH&&this.i&&c==3&&(D6e(this.U,this.V,"tick",this.mb),this.V.start())):(xb(this.j,this.m,o,null),kH(this,o)),c==4&&m1(this),this.i&&!this.J&&(c==4?m4e(this.l,this):(this.i=!1,qI(this)))}else pqt(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ia(12)):(this.s=0,Ia(13)),m1(this),O2(this)}}}catch{}finally{}};function q6e(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function W6e(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=YHt(e,n),i==OH){t==4&&(e.s=4,Ia(14),r=!1),xb(e.j,e.m,null,"[Incomplete Response]");break}else if(i==V6e){e.s=4,Ia(15),xb(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else xb(e.j,e.m,i,null),kH(e,i);q6e(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,Ia(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lZ(t),t.M=!0,Ia(11))):(xb(e.j,e.m,n,"[Invalid Chunked Response]"),m1(e),O2(e))}at.mb=function(){if(this.g){var e=wd(this.g),t=this.g.ja();this.o<t.length&&(PF(this),W6e(this,e,t),this.i&&e!=4&&qI(this))}};function YHt(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?OH:(n=Number(t.substring(n,r)),isNaN(n)?V6e:(r+=1,r+n>t.length?OH:(t=t.slice(r,r+n),e.o=r+n,t)))}at.cancel=function(){this.J=!0,m1(this)};function qI(e){e.Y=Date.now()+e.P,G6e(e,e.P)}function G6e(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=UI(Zo(e.lb,e),t)}function PF(e){e.C&&(Zt.clearTimeout(e.C),e.C=null)}at.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(qHt(this.j,this.B),this.L!=2&&(tA(),Ia(17)),m1(this),this.s=2,O2(this)):G6e(this,this.Y-e)};function O2(e){e.l.H==0||e.J||m4e(e.l,e)}function m1(e){PF(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,ZJ(e.V),M6e(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function kH(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||$H(n.i,e))){if(!e.K&&$H(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Z3(n),DF(n);else break e;uZ(n),Ia(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=UI(Zo(n.ib,n),6e3));if(1>=t4e(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else g1(n,11)}else if((e.K||n.g==e)&&Z3(n),!XC(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const f=l[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const p=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(iZ(s,s.h),s.h=null))}if(r.F){const m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Jr(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=v4e(r,r.J?r.pa:null,r.Y),o.K){n4e(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(PF(a),qI(a)),r.g=o}else h4e(r);0<n.j.length&&MF(n)}else l[0]!="stop"&&l[0]!="close"||g1(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?g1(n,7):aZ(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}tA(4)}catch{}}function KHt(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(wF(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function XHt(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(wF(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Y6e(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(wF(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=XHt(e),r=KHt(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var K6e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QHt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function M1(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof M1){this.h=e.h,Q3(this,e.j),this.s=e.s,this.g=e.g,J3(this,e.m),this.l=e.l;var t=e.i,n=new nA;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),t0e(this,n),this.o=e.o}else e&&(t=String(e).match(K6e))?(this.h=!1,Q3(this,t[1]||"",!0),this.s=ET(t[2]||""),this.g=ET(t[3]||"",!0),J3(this,t[4]),this.l=ET(t[5]||"",!0),t0e(this,t[6]||"",!0),this.o=ET(t[7]||"")):(this.h=!1,this.i=new nA(null,this.h))}M1.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xT(t,n0e,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(xT(t,n0e,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(xT(n,n.charAt(0)=="/"?eqt:ZHt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xT(n,nqt)),e.join("")};function Kp(e){return new M1(e)}function Q3(e,t,n){e.j=n?ET(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function J3(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function t0e(e,t,n){t instanceof nA?(e.i=t,rqt(e.i,e.h)):(n||(t=xT(t,tqt)),e.i=new nA(t,e.h))}function Jr(e,t,n){e.i.set(t,n)}function kF(e){return Jr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ET(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xT(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,JHt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function JHt(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var n0e=/[#\/\?@]/g,ZHt=/[#\?:]/g,eqt=/[#\?]/g,tqt=/[#\?@]/g,nqt=/#/g;function nA(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function X0(e){e.g||(e.g=new Map,e.h=0,e.i&&QHt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}at=nA.prototype;at.add=function(e,t){X0(this),this.i=null,e=yx(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function X6e(e,t){X0(e),t=yx(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Q6e(e,t){return X0(e),t=yx(e,t),e.g.has(t)}at.forEach=function(e,t){X0(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};at.ta=function(){X0(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};at.Z=function(e){X0(this);let t=[];if(typeof e=="string")Q6e(this,e)&&(t=t.concat(this.g.get(yx(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};at.set=function(e,t){return X0(this),this.i=null,e=yx(this,e),Q6e(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};at.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function J6e(e,t,n){X6e(e,t),0<n.length&&(e.i=null,e.g.set(yx(e,t),HJ(n)),e.h+=n.length)}at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function yx(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function rqt(e,t){t&&!e.j&&(X0(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(X6e(this,r),J6e(this,i,n))},e)),e.j=t}var iqt=class{constructor(e,t){this.g=e,this.map=t}};function Z6e(e){this.l=e||sqt,Zt.PerformanceNavigationTiming?(e=Zt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Zt.g&&Zt.g.Ka&&Zt.g.Ka()&&Zt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var sqt=10;function e4e(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function t4e(e){return e.h?1:e.g?e.g.size:0}function $H(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function iZ(e,t){e.g?e.g.add(t):e.h=t}function n4e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Z6e.prototype.cancel=function(){if(this.i=r4e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function r4e(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return HJ(e.i)}var oqt=class{stringify(e){return Zt.JSON.stringify(e,void 0)}parse(e){return Zt.JSON.parse(e,void 0)}};function aqt(){this.g=new oqt}function uqt(e,t,n){const r=n||"";try{Y6e(e,function(i,s){let o=i;BI(i)&&(o=QJ(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function lqt(e,t){const n=new CF;if(Zt.Image){const r=new Image;r.onload=ZP(tk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ZP(tk,n,r,"TestLoadImage: error",!1,t),r.onabort=ZP(tk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ZP(tk,n,r,"TestLoadImage: timeout",!1,t),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function tk(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function $F(e){this.l=e.ec||null,this.j=e.ob||!1}eo($F,tZ);$F.prototype.g=function(){return new RF(this.l,this.j)};$F.prototype.i=function(e){return function(){return e}}({});function RF(e,t){Xs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=sZ,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}eo(RF,Xs);var sZ=0;at=RF.prototype;at.open=function(e,t){if(this.readyState!=sZ)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,rA(this)};at.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,WI(this)),this.readyState=sZ};at.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rA(this)),this.g&&(this.readyState=3,rA(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;i4e(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function i4e(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}at.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?WI(this):rA(this),this.readyState==3&&i4e(this)}};at.Za=function(e){this.g&&(this.response=this.responseText=e,WI(this))};at.Ya=function(e){this.g&&(this.response=e,WI(this))};at.ka=function(){this.g&&WI(this)};function WI(e){e.readyState=4,e.l=null,e.j=null,e.A=null,rA(e)}at.setRequestHeader=function(e,t){this.v.append(e,t)};at.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};at.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function rA(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(RF.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var cqt=Zt.JSON.parse;function zi(e){Xs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=s4e,this.L=this.M=!1}eo(zi,Xs);var s4e="",fqt=/^https?$/i,dqt=["POST","PUT"];at=zi.prototype;at.Oa=function(e){this.M=e};at.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():IH.g(),this.C=this.u?e0e(this.u):e0e(IH),this.g.onreadystatechange=Zo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){r0e(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Zt.FormData&&e instanceof Zt.FormData,!(0<=w6e(dqt,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{u4e(this),0<this.B&&((this.L=hqt(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zo(this.ua,this)):this.A=eZ(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){r0e(this,s)}};function hqt(e){return nE&&typeof e.timeout=="number"&&e.ontimeout!==void 0}at.ua=function(){typeof VJ<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wo(this,"timeout"),this.abort(8))};function r0e(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,o4e(e),NF(e)}function o4e(e){e.F||(e.F=!0,wo(e,"complete"),wo(e,"error"))}at.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wo(this,"complete"),wo(this,"abort"),NF(this))};at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),NF(this,!0)),zi.$.N.call(this)};at.La=function(){this.s||(this.G||this.v||this.l?a4e(this):this.kb())};at.kb=function(){a4e(this)};function a4e(e){if(e.h&&typeof VJ<"u"&&(!e.C[1]||wd(e)!=4||e.da()!=2)){if(e.v&&wd(e)==4)eZ(e.La,0,e);else if(wo(e,"readystatechange"),wd(e)==4){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(K6e)[1]||null;!i&&Zt.self&&Zt.self.location&&(i=Zt.self.location.protocol.slice(0,-1)),r=!fqt.test(i?i.toLowerCase():"")}n=r}if(n)wo(e,"complete"),wo(e,"success");else{e.m=6;try{var s=2<wd(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",o4e(e)}}finally{NF(e)}}}}function NF(e,t){if(e.g){u4e(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||wo(e,"ready");try{n.onreadystatechange=r}catch{}}}function u4e(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zt.clearTimeout(e.A),e.A=null)}at.isActive=function(){return!!this.g};function wd(e){return e.g?e.g.readyState:0}at.da=function(){try{return 2<wd(this)?this.g.status:-1}catch{return-1}};at.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};at.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),cqt(t)}};function i0e(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case s4e:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function pqt(e){const t={};e=(e.g&&2<=wd(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(XC(e[r]))continue;var n=jHt(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}$Ht(t,function(r){return r.join(", ")})}at.Ia=function(){return this.m};at.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function l4e(e){let t="";return WJ(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function oZ(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=l4e(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Jr(e,t,n))}function PS(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function c4e(e){this.Ga=0,this.j=[],this.l=new CF,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=PS("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=PS("baseRetryDelayMs",5e3,e),this.hb=PS("retryDelaySeedMs",1e4,e),this.eb=PS("forwardChannelMaxRetries",2,e),this.xa=PS("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Z6e(e&&e.concurrentRequestLimit),this.Ja=new aqt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}at=c4e.prototype;at.ra=8;at.H=1;function aZ(e){if(f4e(e),e.H==3){var t=e.W++,n=Kp(e.I);if(Jr(n,"SID",e.K),Jr(n,"RID",t),Jr(n,"TYPE","terminate"),GI(e,n),t=new HI(e,e.l,t),t.L=2,t.A=kF(Kp(n)),n=!1,Zt.navigator&&Zt.navigator.sendBeacon)try{n=Zt.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&Zt.Image&&(new Image().src=t.A,n=!0),n||(t.g=_4e(t.l,null),t.g.ha(t.A)),t.G=Date.now(),qI(t)}y4e(e)}function DF(e){e.g&&(lZ(e),e.g.cancel(),e.g=null)}function f4e(e){DF(e),e.u&&(Zt.clearTimeout(e.u),e.u=null),Z3(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Zt.clearTimeout(e.m),e.m=null)}function MF(e){if(!e4e(e.i)&&!e.m){e.m=!0;var t=e.Na;JC||R6e(),ZC||(JC(),ZC=!0),JJ.add(t,e),e.C=0}}function mqt(e,t){return t4e(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=UI(Zo(e.Na,e,t),g4e(e,e.C)),e.C++,!0)}at.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new HI(this,this.l,e);let s=this.s;if(this.U&&(s?(s=T6e(s),C6e(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=d4e(this,i,t),n=Kp(this.I),Jr(n,"RID",e),Jr(n,"CVER",22),this.F&&Jr(n,"X-HTTP-Session-Id",this.F),GI(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(l4e(s)))+"&"+t:this.o&&oZ(n,this.o,s)),iZ(this.i,i),this.bb&&Jr(n,"TYPE","init"),this.P?(Jr(n,"$req",t),Jr(n,"SID","null"),i.aa=!0,PH(i,n,null)):PH(i,n,t),this.H=2}}else this.H==3&&(e?s0e(this,e):this.j.length==0||e4e(this.i)||s0e(this))};function s0e(e,t){var n;t?n=t.m:n=e.W++;const r=Kp(e.I);Jr(r,"SID",e.K),Jr(r,"RID",n),Jr(r,"AID",e.V),GI(e,r),e.o&&e.s&&oZ(r,e.o,e.s),n=new HI(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=d4e(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),iZ(e.i,n),PH(n,r,t)}function GI(e,t){e.na&&WJ(e.na,function(n,r){Jr(t,r,n)}),e.h&&Y6e({},function(n,r){Jr(t,r,n)})}function d4e(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Zo(e.h.Va,e.h,e):null;e:{var i=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{uqt(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function h4e(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;JC||R6e(),ZC||(JC(),ZC=!0),JJ.add(t,e),e.A=0}}function uZ(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=UI(Zo(e.Ma,e),g4e(e,e.A)),e.A++,!0)}at.Ma=function(){if(this.u=null,p4e(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=UI(Zo(this.jb,this),e)}};at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ia(10),DF(this),p4e(this))};function lZ(e){e.B!=null&&(Zt.clearTimeout(e.B),e.B=null)}function p4e(e){e.g=new HI(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Kp(e.wa);Jr(t,"RID","rpc"),Jr(t,"SID",e.K),Jr(t,"AID",e.V),Jr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Jr(t,"TO",e.qa),Jr(t,"TYPE","xmlhttp"),GI(e,t),e.o&&e.s&&oZ(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=kF(Kp(t)),n.u=null,n.S=!0,H6e(n,e)}at.ib=function(){this.v!=null&&(this.v=null,DF(this),uZ(this),Ia(19))};function Z3(e){e.v!=null&&(Zt.clearTimeout(e.v),e.v=null)}function m4e(e,t){var n=null;if(e.g==t){Z3(e),lZ(e),e.g=null;var r=2}else if($H(e.i,t))n=t.F,n4e(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=AF(),wo(r,new j6e(r,n)),MF(e)}else h4e(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&mqt(e,t)||r==2&&uZ(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:g1(e,5);break;case 4:g1(e,10);break;case 3:g1(e,6);break;default:g1(e,2)}}}function g4e(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function g1(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Zo(e.pb,e);n||(n=new M1("//www.google.com/images/cleardot.gif"),Zt.location&&Zt.location.protocol=="http"||Q3(n,"https"),kF(n)),lqt(n.toString(),r)}else Ia(2);e.H=0,e.h&&e.h.za(t),y4e(e),f4e(e)}at.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ia(2)):(this.l.info("Failed to ping google.com"),Ia(1))};function y4e(e){if(e.H=0,e.ma=[],e.h){const t=r4e(e.i);(t.length!=0||e.j.length!=0)&&(Kge(e.ma,t),Kge(e.ma,e.j),e.i.i.length=0,HJ(e.j),e.j.length=0),e.h.ya()}}function v4e(e,t,n){var r=n instanceof M1?Kp(n):new M1(n);if(r.g!="")t&&(r.g=t+"."+r.g),J3(r,r.m);else{var i=Zt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new M1(null);r&&Q3(s,r),t&&(s.g=t),i&&J3(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Jr(r,n,t),Jr(r,"VER",e.ra),GI(e,r),r}function _4e(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new zi(new $F({ob:n})):new zi(e.va),t.Oa(e.J),t}at.isActive=function(){return!!this.h&&this.h.isActive(this)};function b4e(){}at=b4e.prototype;at.Ba=function(){};at.Aa=function(){};at.za=function(){};at.ya=function(){};at.isActive=function(){return!0};at.Va=function(){};function eM(){if(nE&&!(10<=Number(IHt)))throw Error("Environmental error: no available transport.")}eM.prototype.g=function(e,t){return new gl(e,t)};function gl(e,t){Xs.call(this),this.g=new c4e(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!XC(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!XC(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new vx(this)}eo(gl,Xs);gl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ia(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=v4e(e,null,e.Y),MF(e)};gl.prototype.close=function(){aZ(this.g)};gl.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=QJ(e),e=n);t.j.push(new iqt(t.fb++,e)),t.H==3&&MF(t)};gl.prototype.N=function(){this.g.h=null,delete this.j,aZ(this.g),delete this.g,gl.$.N.call(this)};function w4e(e){nZ.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}eo(w4e,nZ);function E4e(){rZ.call(this),this.status=1}eo(E4e,rZ);function vx(e){this.g=e}eo(vx,b4e);vx.prototype.Ba=function(){wo(this.g,"a")};vx.prototype.Aa=function(e){wo(this.g,new w4e(e))};vx.prototype.za=function(e){wo(this.g,new E4e)};vx.prototype.ya=function(){wo(this.g,"b")};function gqt(){this.blockSize=-1}function yf(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}eo(yf,gqt);yf.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function qB(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}yf.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)qB(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){qB(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){qB(this,r),i=0;break}}this.h=i,this.i+=t};yf.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function wr(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var yqt={};function cZ(e){return-128<=e&&128>e?THt(e,function(t){return new wr([t|0],0>t?-1:0)}):new wr([e|0],0>e?-1:0)}function Ed(e){if(isNaN(e)||!isFinite(e))return rw;if(0>e)return mo(Ed(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=RH;return new wr(t,0)}function x4e(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return mo(x4e(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ed(Math.pow(t,8)),r=rw,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=Ed(Math.pow(t,s)),r=r.R(s).add(Ed(o))):(r=r.R(n),r=r.add(Ed(o)))}return r}var RH=4294967296,rw=cZ(0),NH=cZ(1),o0e=cZ(16777216);at=wr.prototype;at.ea=function(){if(Gl(this))return-mo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:RH+r)*t,t*=RH}return e};at.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(fp(this))return"0";if(Gl(this))return"-"+mo(this).toString(e);for(var t=Ed(Math.pow(e,6)),n=this,r="";;){var i=nM(n,t).g;n=tM(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,fp(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};at.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function fp(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Gl(e){return e.h==-1}at.X=function(e){return e=tM(this,e),Gl(e)?-1:fp(e)?0:1};function mo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wr(n,~e.h).add(NH)}at.abs=function(){return Gl(this)?mo(this):this};at.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new wr(n,n[n.length-1]&-2147483648?-1:0)};function tM(e,t){return e.add(mo(t))}at.R=function(e){if(fp(this)||fp(e))return rw;if(Gl(this))return Gl(e)?mo(this).R(mo(e)):mo(mo(this).R(e));if(Gl(e))return mo(this.R(mo(e)));if(0>this.X(o0e)&&0>e.X(o0e))return Ed(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,u=e.D(i)&65535;n[2*r+2*i]+=o*u,nk(n,2*r+2*i),n[2*r+2*i+1]+=s*u,nk(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,nk(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,nk(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wr(n,0)};function nk(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function kS(e,t){this.g=e,this.h=t}function nM(e,t){if(fp(t))throw Error("division by zero");if(fp(e))return new kS(rw,rw);if(Gl(e))return t=nM(mo(e),t),new kS(mo(t.g),mo(t.h));if(Gl(t))return t=nM(e,mo(t)),new kS(mo(t.g),t.h);if(30<e.g.length){if(Gl(e)||Gl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=NH,r=t;0>=r.X(e);)n=a0e(n),r=a0e(r);var i=$_(n,1),s=$_(r,1);for(r=$_(r,2),n=$_(n,2);!fp(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=$_(r,1),n=$_(n,1)}return t=tM(e,i.R(t)),new kS(i,t)}for(i=rw;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ed(n),o=s.R(t);Gl(o)||0<o.X(e);)n-=r,s=Ed(n),o=s.R(t);fp(s)&&(s=NH),i=i.add(s),e=tM(e,o)}return new kS(i,e)}at.gb=function(e){return nM(this,e).h};at.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wr(n,this.h&e.h)};at.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wr(n,this.h|e.h)};at.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wr(n,this.h^e.h)};function a0e(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wr(n,e.h)}function $_(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new wr(i,e.h)}eM.prototype.createWebChannel=eM.prototype.g;gl.prototype.send=gl.prototype.u;gl.prototype.open=gl.prototype.m;gl.prototype.close=gl.prototype.close;IF.NO_ERROR=0;IF.TIMEOUT=8;IF.HTTP_ERROR=6;B6e.COMPLETE="complete";z6e.EventType=VI;VI.OPEN="a";VI.CLOSE="b";VI.ERROR="c";VI.MESSAGE="d";Xs.prototype.listen=Xs.prototype.O;zi.prototype.listenOnce=zi.prototype.P;zi.prototype.getLastError=zi.prototype.Sa;zi.prototype.getLastErrorCode=zi.prototype.Ia;zi.prototype.getStatus=zi.prototype.da;zi.prototype.getResponseJson=zi.prototype.Wa;zi.prototype.getResponseText=zi.prototype.ja;zi.prototype.send=zi.prototype.ha;zi.prototype.setWithCredentials=zi.prototype.Oa;yf.prototype.digest=yf.prototype.l;yf.prototype.reset=yf.prototype.reset;yf.prototype.update=yf.prototype.j;wr.prototype.add=wr.prototype.add;wr.prototype.multiply=wr.prototype.R;wr.prototype.modulo=wr.prototype.gb;wr.prototype.compare=wr.prototype.X;wr.prototype.toNumber=wr.prototype.ea;wr.prototype.toString=wr.prototype.toString;wr.prototype.getBits=wr.prototype.D;wr.fromNumber=Ed;wr.fromString=x4e;var vqt=function(){return new eM},_qt=function(){return AF()},WB=IF,bqt=B6e,wqt=Jv,u0e={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rk=z6e,Eqt=zi,xqt=yf,iw=wr;const l0e="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}eu.UNAUTHENTICATED=new eu(null),eu.GOOGLE_CREDENTIALS=new eu("google-credentials-uid"),eu.FIRST_PARTY=new eu("first-party-uid"),eu.MOCK_USER=new eu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _x="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new mF("@firebase/firestore");function $S(){return cv.logLevel}function Tt(e,...t){if(cv.logLevel<=Fn.DEBUG){const n=t.map(fZ);cv.debug(`Firestore (${_x}): ${e}`,...n)}}function Xp(e,...t){if(cv.logLevel<=Fn.ERROR){const n=t.map(fZ);cv.error(`Firestore (${_x}): ${e}`,...n)}}function iA(e,...t){if(cv.logLevel<=Fn.WARN){const n=t.map(fZ);cv.warn(`Firestore (${_x}): ${e}`,...n)}}function fZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e="Unexpected state"){const t=`FIRESTORE (${_x}) INTERNAL ASSERTION FAILED: `+e;throw Xp(t),new Error(t)}function Hr(e,t){e||Yt()}function an(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends mh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sqt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Tqt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(eu.UNAUTHENTICATED))}shutdown(){}}class Cqt{constructor(t){this.t=t,this.currentUser=eu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Sp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Hr(typeof r.accessToken=="string"),new Sqt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Hr(t===null||typeof t=="string"),new eu(t)}}class Aqt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=eu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Iqt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Aqt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(eu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oqt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pqt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Tt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Hr(typeof n.token=="string"),this.R=n.token,new Oqt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kqt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=kqt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function cr(e,t){return e<t?-1:e>t?1:0}function rE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ht(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ht(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ht(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Cs.fromMillis(Date.now())}static fromDate(t){return Cs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Cs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?cr(this.nanoseconds,t.nanoseconds):cr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.timestamp=t}static fromTimestamp(t){return new en(t)}static min(){return new en(new Cs(0,0))}static max(){return new en(new Cs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,n,r){n===void 0?n=0:n>t.length&&Yt(),r===void 0?r=t.length-n:r>t.length-n&&Yt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return sA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof sA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Zr extends sA{construct(t,n,r){return new Zr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ht(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Zr(n)}static emptyPath(){return new Zr([])}}const $qt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class go extends sA{construct(t,n,r){return new go(t,n,r)}static isValidIdentifier(t){return $qt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),go.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new go(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ht(ke.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new ht(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ht(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ht(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new go(n)}static emptyPath(){return new go([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t){this.path=t}static fromPath(t){return new Mt(Zr.fromString(t))}static fromName(t){return new Mt(Zr.fromString(t).popFirst(5))}static empty(){return new Mt(Zr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Zr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Zr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Mt(new Zr(t.slice()))}}function Rqt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=en.fromTimestamp(r===1e9?new Cs(n+1,0):new Cs(n,r));return new g0(i,Mt.empty(),t)}function Nqt(e){return new g0(e.readTime,e.key,-1)}class g0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new g0(en.min(),Mt.empty(),-1)}static max(){return new g0(en.max(),Mt.empty(),-1)}}function Dqt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Mt.comparator(e.documentKey,t.documentKey),n!==0?n:cr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mqt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lqt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(e){if(e.code!==ke.FAILED_PRECONDITION||e.message!==Mqt)throw e;Tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Le?n:Le.resolve(n)}catch(n){return Le.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Le.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Le.reject(n)}static resolve(t){return new Le((n,r)=>{n(t)})}static reject(t){return new Le((n,r)=>{r(t)})}static waitFor(t){return new Le((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Le.resolve(!1);for(const r of t)n=n.next(i=>i?Le.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Le((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Le((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function KI(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}dZ._e=-1;function LF(e){return e==null}function rM(e){return e===0&&1/e==-1/0}function Fqt(e){return typeof e=="number"&&Number.isInteger(e)&&!rM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0e(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function T4e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n){this.comparator=t,this.root=n||co.EMPTY}insert(t,n){return new Ci(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,co.BLACK,null,null))}remove(t){return new Ci(this.comparator,this.root.remove(t,this.comparator).copy(null,null,co.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ik(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ik(this.root,t,this.comparator,!1)}getReverseIterator(){return new ik(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ik(this.root,t,this.comparator,!0)}}class ik{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class co{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??co.RED,this.left=i??co.EMPTY,this.right=s??co.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new co(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return co.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return co.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,co.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yt();const t=this.left.check();if(t!==this.right.check())throw Yt();return t+(this.isRed()?0:1)}}co.EMPTY=null,co.RED=!0,co.BLACK=!1;co.EMPTY=new class{constructor(){this.size=0}get key(){throw Yt()}get value(){throw Yt()}get color(){throw Yt()}get left(){throw Yt()}get right(){throw Yt()}copy(t,n,r,i,s){return this}insert(t,n,r){return new co(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this.comparator=t,this.data=new Ci(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new f0e(this.data.getIterator())}getIteratorFrom(t){return new f0e(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Eo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Eo(this.comparator);return n.data=t,n}}class f0e{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t){this.fields=t,t.sort(go.comparator)}static empty(){return new rl([])}unionWith(t){let n=new Eo(go.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new rl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return rE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new C4e("Invalid base64 string: "+s):s}}(t);return new la(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new la(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return cr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}la.EMPTY_BYTE_STRING=new la("");const jqt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function y0(e){if(Hr(!!e),typeof e=="string"){let t=0;const n=jqt.exec(e);if(Hr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ns(e.seconds),nanos:ns(e.nanos)}}function ns(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fv(e){return typeof e=="string"?la.fromBase64String(e):la.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pZ(e){const t=e.mapValue.fields.__previous_value__;return hZ(t)?pZ(t):t}function oA(e){const t=y0(e.mapValue.fields.__local_write_time__.timestampValue);return new Cs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bqt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class aA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new aA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof aA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function dv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hZ(e)?4:zqt(e)?9007199254740991:10:Yt()}function Zd(e,t){if(e===t)return!0;const n=dv(e);if(n!==dv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return oA(e).isEqual(oA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=y0(i.timestampValue),a=y0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return fv(i.bytesValue).isEqual(fv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ns(i.geoPointValue.latitude)===ns(s.geoPointValue.latitude)&&ns(i.geoPointValue.longitude)===ns(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ns(i.integerValue)===ns(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ns(i.doubleValue),a=ns(s.doubleValue);return o===a?rM(o)===rM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return rE(e.arrayValue.values||[],t.arrayValue.values||[],Zd);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(c0e(o)!==c0e(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Zd(o[u],a[u])))return!1;return!0}(e,t);default:return Yt()}}function uA(e,t){return(e.values||[]).find(n=>Zd(n,t))!==void 0}function iE(e,t){if(e===t)return 0;const n=dv(e),r=dv(t);if(n!==r)return cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ns(s.integerValue||s.doubleValue),u=ns(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return d0e(e.timestampValue,t.timestampValue);case 4:return d0e(oA(e),oA(t));case 5:return cr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=fv(s),u=fv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=cr(a[l],u[l]);if(c!==0)return c}return cr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=cr(ns(s.latitude),ns(o.latitude));return a!==0?a:cr(ns(s.longitude),ns(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=iE(a[l],u[l]);if(c)return c}return cr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===sk.mapValue&&o===sk.mapValue)return 0;if(s===sk.mapValue)return 1;if(o===sk.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=cr(u[f],c[f]);if(d!==0)return d;const h=iE(a[u[f]],l[c[f]]);if(h!==0)return h}return cr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Yt()}}function d0e(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return cr(e,t);const n=y0(e),r=y0(t),i=cr(n.seconds,r.seconds);return i!==0?i:cr(n.nanos,r.nanos)}function sE(e){return DH(e)}function DH(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=y0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return fv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Mt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=DH(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${DH(n.fields[o])}`;return i+"}"}(e.mapValue):Yt()}function h0e(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function MH(e){return!!e&&"integerValue"in e}function mZ(e){return!!e&&"arrayValue"in e}function p0e(e){return!!e&&"nullValue"in e}function m0e(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function L$(e){return!!e&&"mapValue"in e}function P2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Zv(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=P2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=P2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function zqt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t){this.value=t}static empty(){return new cu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!L$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=P2(n)}setAll(t){let n=go.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=P2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());L$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Zd(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];L$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Zv(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new cu(P2(this.value))}}function A4e(e){const t=[];return Zv(e.fields,(n,r)=>{const i=new go([n]);if(L$(r)){const s=A4e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new rl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Go(t,0,en.min(),en.min(),en.min(),cu.empty(),0)}static newFoundDocument(t,n,r,i){return new Go(t,1,n,en.min(),r,i,0)}static newNoDocument(t,n){return new Go(t,2,n,en.min(),en.min(),cu.empty(),0)}static newUnknownDocument(t,n){return new Go(t,3,n,en.min(),en.min(),cu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(en.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=cu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=cu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Go&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Go(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iM=class{constructor(t,n){this.position=t,this.inclusive=n}};function g0e(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Mt.comparator(Mt.fromName(o.referenceValue),n.key):r=iE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function y0e(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zd(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t,n="asc"){this.field=t,this.dir=n}}function Uqt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I4e=class{};class os extends I4e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Hqt(t,n,r):n==="array-contains"?new Gqt(t,r):n==="in"?new Yqt(t,r):n==="not-in"?new Kqt(t,r):n==="array-contains-any"?new Xqt(t,r):new os(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new qqt(t,r):new Wqt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(iE(n,this.value)):n!==null&&dv(this.value)===dv(n)&&this.matchesComparison(iE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vf extends I4e{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new vf(t,n)}matches(t){return O4e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function O4e(e){return e.op==="and"}function P4e(e){return Vqt(e)&&O4e(e)}function Vqt(e){for(const t of e.filters)if(t instanceof vf)return!1;return!0}function LH(e){if(e instanceof os)return e.field.canonicalString()+e.op.toString()+sE(e.value);if(P4e(e))return e.filters.map(t=>LH(t)).join(",");{const t=e.filters.map(n=>LH(n)).join(",");return`${e.op}(${t})`}}function k4e(e,t){return e instanceof os?function(r,i){return i instanceof os&&r.op===i.op&&r.field.isEqual(i.field)&&Zd(r.value,i.value)}(e,t):e instanceof vf?function(r,i){return i instanceof vf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&k4e(o,i.filters[a]),!0):!1}(e,t):void Yt()}function $4e(e){return e instanceof os?function(n){return`${n.field.canonicalString()} ${n.op} ${sE(n.value)}`}(e):e instanceof vf?function(n){return n.op.toString()+" {"+n.getFilters().map($4e).join(" ,")+"}"}(e):"Filter"}class Hqt extends os{constructor(t,n,r){super(t,n,r),this.key=Mt.fromName(r.referenceValue)}matches(t){const n=Mt.comparator(t.key,this.key);return this.matchesComparison(n)}}class qqt extends os{constructor(t,n){super(t,"in",n),this.keys=R4e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Wqt extends os{constructor(t,n){super(t,"not-in",n),this.keys=R4e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function R4e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Mt.fromName(r.referenceValue))}class Gqt extends os{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return mZ(n)&&uA(n.arrayValue,this.value)}}class Yqt extends os{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&uA(this.value.arrayValue,n)}}class Kqt extends os{constructor(t,n){super(t,"not-in",n)}matches(t){if(uA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!uA(this.value.arrayValue,n)}}class Xqt extends os{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!mZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qqt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function v0e(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Qqt(e,t,n,r,i,s,o)}function gZ(e){const t=an(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>LH(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),LF(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>sE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>sE(r)).join(",")),t.ce=n}return t.ce}function yZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Uqt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!k4e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!y0e(e.startAt,t.startAt)&&y0e(e.endAt,t.endAt)}function FH(e){return Mt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Jqt(e,t,n,r,i,s,o,a){return new bx(e,t,n,r,i,s,o,a)}function vZ(e){return new bx(e)}function _0e(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function N4e(e){return e.collectionGroup!==null}function k2(e){const t=an(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Eo(go.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new lA(s,r))}),n.has(go.keyField().canonicalString())||t.le.push(new lA(go.keyField(),r))}return t.le}function Md(e){const t=an(e);return t.he||(t.he=Zqt(t,k2(e))),t.he}function Zqt(e,t){if(e.limitType==="F")return v0e(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lA(i.field,s)});const n=e.endAt?new iM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new iM(e.startAt.position,e.startAt.inclusive):null;return v0e(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function jH(e,t){const n=e.filters.concat([t]);return new bx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function BH(e,t,n){return new bx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function FF(e,t){return yZ(Md(e),Md(t))&&e.limitType===t.limitType}function D4e(e){return`${gZ(Md(e))}|lt:${e.limitType}`}function Z_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$4e(i)).join(", ")}]`),LF(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>sE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>sE(i)).join(",")),`Target(${r})`}(Md(e))}; limitType=${e.limitType})`}function jF(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Mt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of k2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=g0e(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,k2(r),i)||r.endAt&&!function(o,a,u){const l=g0e(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,k2(r),i))}(e,t)}function eWt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function M4e(e){return(t,n)=>{let r=!1;for(const i of k2(e)){const s=tWt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function tWt(e,t,n){const r=e.field.isKeyField()?Mt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?iE(u,l):Yt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zv(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return T4e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nWt=new Ci(Mt.comparator);function Qp(){return nWt}const L4e=new Ci(Mt.comparator);function ST(...e){let t=L4e;for(const n of e)t=t.insert(n.key,n);return t}function F4e(e){let t=L4e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function y1(){return $2()}function j4e(){return $2()}function $2(){return new wx(e=>e.toString(),(e,t)=>e.isEqual(t))}const rWt=new Ci(Mt.comparator),iWt=new Eo(Mt.comparator);function On(...e){let t=iWt;for(const n of e)t=t.add(n);return t}const sWt=new Eo(cr);function oWt(){return sWt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rM(t)?"-0":t}}function z4e(e){return{integerValue:""+e}}function aWt(e,t){return Fqt(t)?z4e(t):B4e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(){this._=void 0}}function uWt(e,t,n){return e instanceof cA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hZ(s)&&(s=pZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof fA?V4e(e,t):e instanceof dA?H4e(e,t):function(i,s){const o=U4e(i,s),a=b0e(o)+b0e(i.Ie);return MH(o)&&MH(i.Ie)?z4e(a):B4e(i.serializer,a)}(e,t)}function lWt(e,t,n){return e instanceof fA?V4e(e,t):e instanceof dA?H4e(e,t):n}function U4e(e,t){return e instanceof sM?function(r){return MH(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class cA extends BF{}class fA extends BF{constructor(t){super(),this.elements=t}}function V4e(e,t){const n=q4e(t);for(const r of e.elements)n.some(i=>Zd(i,r))||n.push(r);return{arrayValue:{values:n}}}class dA extends BF{constructor(t){super(),this.elements=t}}function H4e(e,t){let n=q4e(t);for(const r of e.elements)n=n.filter(i=>!Zd(i,r));return{arrayValue:{values:n}}}class sM extends BF{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function b0e(e){return ns(e.integerValue||e.doubleValue)}function q4e(e){return mZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cWt{constructor(t,n){this.field=t,this.transform=n}}function fWt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof fA&&i instanceof fA||r instanceof dA&&i instanceof dA?rE(r.elements,i.elements,Zd):r instanceof sM&&i instanceof sM?Zd(r.Ie,i.Ie):r instanceof cA&&i instanceof cA}(e.transform,t.transform)}class dWt{constructor(t,n){this.version=t,this.transformResults=n}}class ff{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ff}static exists(t){return new ff(void 0,t)}static updateTime(t){return new ff(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function F$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class zF{}function W4e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new _Z(e.key,ff.none()):new XI(e.key,e.data,ff.none());{const n=e.data,r=cu.empty();let i=new Eo(go.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Q0(e.key,r,new rl(i.toArray()),ff.none())}}function hWt(e,t,n){e instanceof XI?function(i,s,o){const a=i.value.clone(),u=E0e(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Q0?function(i,s,o){if(!F$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=E0e(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(G4e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function R2(e,t,n,r){return e instanceof XI?function(s,o,a,u){if(!F$(s.precondition,o))return a;const l=s.value.clone(),c=x0e(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Q0?function(s,o,a,u){if(!F$(s.precondition,o))return a;const l=x0e(s.fieldTransforms,u,o),c=o.data;return c.setAll(G4e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return F$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function pWt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=U4e(r.transform,i||null);s!=null&&(n===null&&(n=cu.empty()),n.set(r.field,s))}return n||null}function w0e(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rE(r,i,(s,o)=>fWt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class XI extends zF{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Q0 extends zF{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function G4e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function E0e(e,t,n){const r=new Map;Hr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,lWt(o,a,n[i]))}return r}function x0e(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,uWt(s,o,t))}return r}class _Z extends zF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mWt extends zF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gWt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&hWt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=R2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=R2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=j4e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=W4e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(en.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),On())}isEqual(t){return this.batchId===t.batchId&&rE(this.mutations,t.mutations,(n,r)=>w0e(n,r))&&rE(this.baseMutations,t.baseMutations,(n,r)=>w0e(n,r))}}class bZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Hr(t.mutations.length===r.length);let i=function(){return rWt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new bZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yWt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vWt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zi,qn;function _Wt(e){switch(e){default:return Yt();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function Y4e(e){if(e===void 0)return Xp("GRPC error has no .code"),ke.UNKNOWN;switch(e){case Zi.OK:return ke.OK;case Zi.CANCELLED:return ke.CANCELLED;case Zi.UNKNOWN:return ke.UNKNOWN;case Zi.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Zi.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Zi.INTERNAL:return ke.INTERNAL;case Zi.UNAVAILABLE:return ke.UNAVAILABLE;case Zi.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Zi.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Zi.NOT_FOUND:return ke.NOT_FOUND;case Zi.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Zi.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Zi.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Zi.ABORTED:return ke.ABORTED;case Zi.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Zi.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Zi.DATA_LOSS:return ke.DATA_LOSS;default:return Yt()}}(qn=Zi||(Zi={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bWt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wWt=new iw([4294967295,4294967295],0);function S0e(e){const t=bWt().encode(e),n=new xqt;return n.update(t),new Uint8Array(n.digest())}function T0e(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new iw([n,r],0),new iw([i,s],0)]}class wZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new TT(`Invalid padding: ${n}`);if(r<0)throw new TT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new TT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new TT(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=iw.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(iw.fromNumber(r)));return i.compare(wWt)===1&&(i=new iw([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=S0e(t),[r,i]=T0e(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new wZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=S0e(t),[r,i]=T0e(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class TT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,QI.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new UF(en.min(),i,new Ci(cr),Qp(),On())}}class QI{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new QI(r,n,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class K4e{constructor(t,n){this.targetId=t,this.fe=n}}class X4e{constructor(t,n,r=la.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class C0e{constructor(){this.ge=0,this.pe=I0e(),this.ye=la.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=On(),n=On(),r=On();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Yt()}}),new QI(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=I0e()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Hr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class EWt{constructor(t){this.Le=t,this.ke=new Map,this.qe=Qp(),this.Qe=A0e(),this.Ke=new Ci(cr)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Yt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const s=i.target;if(FH(s))if(r===0){const o=new Mt(s.path);this.We(n,o,Go.newNoDocument(o,en.min()))}else Hr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=fv(r).toUint8Array()}catch(u){if(u instanceof C4e)return iA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new wZ(o,i,s)}catch(u){return iA(u instanceof TT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&FH(a.target)){const u=new Mt(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,Go.newNoDocument(u,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=On();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const i=new UF(t,n,this.Ke,this.qe,r);return this.qe=Qp(),this.Qe=A0e(),this.Ke=new Ci(cr),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new C0e,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Eo(cr),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||Tt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new C0e),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function A0e(){return new Ci(Mt.comparator)}function I0e(){return new Ci(Mt.comparator)}const xWt={asc:"ASCENDING",desc:"DESCENDING"},SWt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TWt={and:"AND",or:"OR"};class CWt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function zH(e,t){return e.useProto3Json||LF(t)?t:{value:t}}function oM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Q4e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function AWt(e,t){return oM(e,t.toTimestamp())}function Ld(e){return Hr(!!e),en.fromTimestamp(function(n){const r=y0(n);return new Cs(r.seconds,r.nanos)}(e))}function EZ(e,t){return function(r){return new Zr(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function J4e(e){const t=Zr.fromString(e);return Hr(nFe(t)),t}function UH(e,t){return EZ(e.databaseId,t.path)}function GB(e,t){const n=J4e(t);if(n.get(1)!==e.databaseId.projectId)throw new ht(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ht(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Mt(Z4e(n))}function VH(e,t){return EZ(e.databaseId,t)}function IWt(e){const t=J4e(e);return t.length===4?Zr.emptyPath():Z4e(t)}function HH(e){return new Zr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Z4e(e){return Hr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function O0e(e,t,n){return{name:UH(e,t),fields:n.value.mapValue.fields}}function OWt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Hr(c===void 0||typeof c=="string"),la.fromBase64String(c||"")):(Hr(c===void 0||c instanceof Uint8Array),la.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?ke.UNKNOWN:Y4e(l.code);return new ht(c,l.message||"")}(o);n=new X4e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=GB(e,r.document.name),s=Ld(r.document.updateTime),o=r.document.createTime?Ld(r.document.createTime):en.min(),a=new cu({mapValue:{fields:r.document.fields}}),u=Go.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new j$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=GB(e,r.document),s=r.readTime?Ld(r.readTime):en.min(),o=Go.newNoDocument(i,s),a=r.removedTargetIds||[];n=new j$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=GB(e,r.document),s=r.removedTargetIds||[];n=new j$([],s,i,null)}else{if(!("filter"in t))return Yt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new vWt(i,s),a=r.targetId;n=new K4e(a,o)}}return n}function PWt(e,t){let n;if(t instanceof XI)n={update:O0e(e,t.key,t.value)};else if(t instanceof _Z)n={delete:UH(e,t.key)};else if(t instanceof Q0)n={update:O0e(e,t.key,t.data),updateMask:jWt(t.fieldMask)};else{if(!(t instanceof mWt))return Yt();n={verify:UH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof cA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sM)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Yt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AWt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Yt()}(e,t.precondition)),n}function kWt(e,t){return e&&e.length>0?(Hr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Ld(i.updateTime):Ld(s);return o.isEqual(en.min())&&(o=Ld(s)),new dWt(o,i.transformResults||[])}(n,t))):[]}function $Wt(e,t){return{documents:[VH(e,t.path)]}}function RWt(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=VH(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=VH(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return tFe(vf.create(u,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:eb(f.field),direction:MWt(f.dir)}}(l))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=zH(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),n}function NWt(e){let t=IWt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Hr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=eFe(f);return d instanceof vf&&P4e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new lA(tb(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,LF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new iM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new iM(h,d)}(n.endAt)),Jqt(t,i,o,s,a,"F",u,l)}function DWt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function eFe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=tb(n.unaryFilter.field);return os.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=tb(n.unaryFilter.field);return os.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tb(n.unaryFilter.field);return os.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tb(n.unaryFilter.field);return os.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Yt()}}(e):e.fieldFilter!==void 0?function(n){return os.create(tb(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return vf.create(n.compositeFilter.filters.map(r=>eFe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yt()}}(n.compositeFilter.op))}(e):Yt()}function MWt(e){return xWt[e]}function LWt(e){return SWt[e]}function FWt(e){return TWt[e]}function eb(e){return{fieldPath:e.canonicalString()}}function tb(e){return go.fromServerFormat(e.fieldPath)}function tFe(e){return e instanceof os?function(n){if(n.op==="=="){if(m0e(n.value))return{unaryFilter:{field:eb(n.field),op:"IS_NAN"}};if(p0e(n.value))return{unaryFilter:{field:eb(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m0e(n.value))return{unaryFilter:{field:eb(n.field),op:"IS_NOT_NAN"}};if(p0e(n.value))return{unaryFilter:{field:eb(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eb(n.field),op:LWt(n.op),value:n.value}}}(e):e instanceof vf?function(n){const r=n.getFilters().map(i=>tFe(i));return r.length===1?r[0]:{compositeFilter:{op:FWt(n.op),filters:r}}}(e):Yt()}function jWt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function nFe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t,n,r,i,s=en.min(),o=en.min(),a=la.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new hg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new hg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new hg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new hg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BWt{constructor(t){this.ut=t}}function zWt(e){const t=NWt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?BH(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UWt{constructor(){this.on=new VWt}addToCollectionParentIndex(t,n){return this.on.add(n),Le.resolve()}getCollectionParents(t,n){return Le.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return Le.resolve()}deleteFieldIndex(t,n){return Le.resolve()}deleteAllFieldIndexes(t){return Le.resolve()}createTargetIndexes(t,n){return Le.resolve()}getDocumentsMatchingTarget(t,n){return Le.resolve(null)}getIndexType(t,n){return Le.resolve(0)}getFieldIndexes(t,n){return Le.resolve([])}getNextCollectionGroupToUpdate(t){return Le.resolve(null)}getMinOffset(t,n){return Le.resolve(g0.min())}getMinOffsetFromCollectionGroup(t,n){return Le.resolve(g0.min())}updateCollectionGroup(t,n,r){return Le.resolve()}updateIndexEntries(t,n){return Le.resolve()}}class VWt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Eo(Zr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Eo(Zr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new oE(0)}static Nn(){return new oE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HWt{constructor(){this.changes=new wx(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Go.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Le.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qWt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WWt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&R2(r.mutation,i,rl.empty(),Cs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,On()).next(()=>r))}getLocalViewOfDocuments(t,n,r=On()){const i=y1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=ST();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=y1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,On()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Qp();const o=$2(),a=function(){return $2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Q0)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),R2(c.mutation,l,c.mutation.getFieldMask(),Cs.now())):o.set(l.key,rl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new qWt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=$2();let i=new Ci((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||rl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||On()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=j4e();c.forEach(d=>{if(!s.has(d)){const h=W4e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Mt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):N4e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Le.resolve(y1());let a=-1,u=s;return o.next(l=>Le.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Le.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,On())).next(c=>({batchId:a,changes:F4e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Mt(n)).next(r=>{let i=ST();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=ST();return this.indexManager.getCollectionParents(t,s).next(a=>Le.forEach(a,u=>{const l=function(f,d){return new bx(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Go.newInvalidDocument(c)))});let a=ST();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&R2(c.mutation,l,rl.empty(),Cs.now()),jF(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GWt{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return Le.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ld(i.createTime)}}(n)),Le.resolve()}getNamedQuery(t,n){return Le.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(i){return{name:i.name,query:zWt(i.bundledQuery),readTime:Ld(i.readTime)}}(n)),Le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YWt{constructor(){this.overlays=new Ci(Mt.comparator),this.lr=new Map}getOverlay(t,n){return Le.resolve(this.overlays.get(n))}getOverlays(t,n){const r=y1();return Le.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.lt(t,n,s)}),Le.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),Le.resolve()}getOverlaysForCollection(t,n,r){const i=y1(),s=n.length+1,o=new Mt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Le.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ci((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=y1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=y1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Le.resolve(a)}lt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yWt(n,r));let s=this.lr.get(n);s===void 0&&(s=On(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(){this.hr=new Eo(Ls.Pr),this.Ir=new Eo(Ls.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Ls(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Ls(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new Mt(new Zr([])),r=new Ls(n,t),i=new Ls(n,t+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new Mt(new Zr([])),r=new Ls(n,t),i=new Ls(n,t+1);let s=On();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ls(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ls{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return Mt.comparator(t.key,n.key)||cr(t.gr,n.gr)}static Tr(t,n){return cr(t.gr,n.gr)||Mt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KWt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Eo(Ls.Pr)}checkEmpty(t){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gWt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Ls(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Le.resolve(o)}lookupMutationBatch(t,n){return Le.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ls(n,0),i=new Ls(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Eo(cr);return n.forEach(i=>{const s=new Ls(i,0),o=new Ls(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),Le.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Mt.isDocumentKey(s)||(s=s.child(""));const o=new Ls(new Mt(s),0);let a=new Eo(cr);return this.yr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.gr)),!0)},o),Le.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Hr(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return Le.forEach(n.mutations,i=>{const s=new Ls(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Ls(n,0),i=this.yr.firstAfterOrEqual(r);return Le.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Le.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XWt{constructor(t){this.Cr=t,this.docs=function(){return new Ci(Mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Le.resolve(r?r.document.mutableCopy():Go.newInvalidDocument(n))}getEntries(t,n){let r=Qp();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Go.newInvalidDocument(i))}),Le.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Qp();const o=n.path,a=new Mt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Dqt(Nqt(c),r)<=0||(i.has(c.key)||jF(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Yt()}vr(t,n){return Le.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new QWt(this)}getSize(t){return Le.resolve(this.size)}}class QWt extends HWt{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(t,i)):this._r.removeEntry(r)}),Le.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JWt{constructor(t){this.persistence=t,this.Fr=new wx(n=>gZ(n),yZ),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Mr=0,this.Or=new xZ,this.targetCount=0,this.Nr=oE.On()}forEachTarget(t,n){return this.Fr.forEach((r,i)=>n(i)),Le.resolve()}getLastRemoteSnapshotVersion(t){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Le.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),Le.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new oE(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,Le.resolve()}updateTargetData(t,n){return this.kn(n),Le.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,Le.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Le.waitFor(s).next(()=>i)}getTargetCount(t){return Le.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return Le.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),Le.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Le.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),Le.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return Le.resolve(r)}containsKey(t,n){return Le.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZWt{constructor(t,n){this.Br={},this.overlays={},this.Lr=new dZ(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new JWt(this),this.indexManager=new UWt,this.remoteDocumentCache=function(i){return new XWt(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new BWt(n),this.Kr=new GWt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new YWt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new KWt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){Tt("MemoryPersistence","Starting transaction:",t);const i=new eGt(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(t,n){return Le.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class eGt extends Lqt{constructor(t){super(),this.currentSequenceNumber=t}}class SZ{constructor(t){this.persistence=t,this.Gr=new xZ,this.zr=null}static jr(t){return new SZ(t)}get Hr(){if(this.zr)return this.zr;throw Yt()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),Le.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),Le.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),Le.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.Hr,r=>{const i=Mt.fromPath(r);return this.Jr(t,i).next(s=>{s||n.removeEntry(i,en.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return Le.or([()=>Le.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=i}static Qi(t,n){let r=On(),i=On();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new TZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tGt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nGt{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.zi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tGt;return this.Hi(t,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>s.result)}Ji(t,n,r,i){return r.documentReadCount<this.Ui?($S()<=Fn.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",Z_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Le.resolve()):($S()<=Fn.DEBUG&&Tt("QueryEngine","Query:",Z_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?($S()<=Fn.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",Z_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Md(n))):Le.resolve())}zi(t,n){if(_0e(n))return Le.resolve(null);let r=Md(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=BH(n,null,"F"),r=Md(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=On(...s);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Yi(n,a);return this.Zi(n,l,o,u.readTime)?this.zi(t,BH(n,null,"F")):this.Xi(t,l,n,u)}))})))}ji(t,n,r,i){return _0e(n)||i.isEqual(en.min())?Le.resolve(null):this.Gi.getDocuments(t,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?Le.resolve(null):($S()<=Fn.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Z_(n)),this.Xi(t,o,n,Rqt(i,-1)).next(a=>a))})}Yi(t,n){let r=new Eo(M4e(t));return n.forEach((i,s)=>{jF(t,s)&&(r=r.add(s))}),r}Zi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(t,n,r){return $S()<=Fn.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Z_(n)),this.Gi.getDocumentsMatchingQuery(t,n,g0.min(),r)}Xi(t,n,r,i){return this.Gi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rGt{constructor(t,n,r,i){this.persistence=t,this.es=n,this.serializer=i,this.ts=new Ci(cr),this.ns=new wx(s=>gZ(s),yZ),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new WWt(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function iGt(e,t,n,r){return new rGt(e,t,n,r)}async function rFe(e,t){const n=an(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=On();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})}function sGt(e,t){const n=an(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Le.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Hr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=On();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function iFe(e){const t=an(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function oGt(e,t){const n=an(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(la.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.qr.updateTargetData(s,h))});let u=Qp(),l=On();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(aGt(s,o,t.documentUpdates).next(c=>{u=c.us,l=c.cs})),!r.isEqual(en.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(f=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Le.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ts=i,s))}function aGt(e,t,n){let r=On(),i=On();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Qp();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(en.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Tt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{us:o,cs:i}})}function uGt(e,t){const n=an(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function lGt(e,t){const n=an(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,t).next(s=>s?(i=s,Le.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new hg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function qH(e,t,n){const r=an(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!KI(o))throw o;Tt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function P0e(e,t,n){const r=an(e);let i=en.min(),s=On();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=an(u),d=f.ns.get(c);return d!==void 0?Le.resolve(f.ts.get(d)):f.qr.getTargetData(l,c)}(r,o,Md(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?i:en.min(),n?s:On())).next(a=>(cGt(r,eWt(t),a),{documents:a,ls:s})))}function cGt(e,t,n){let r=e.rs.get(t)||en.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.rs.set(t,r)}class k0e{constructor(){this.activeTargetIds=oWt()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fGt{constructor(){this.eo=new k0e,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new k0e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dGt{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0e{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ok=null;function YB(){return ok===null?ok=function(){return 268435456+Math.round(2147483648*Math.random())}():ok++,"0x"+ok.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hGt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pGt{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="WebChannelConnection";class mGt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=YB(),u=this.So(n,r);Tt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(n,u,l,i).then(c=>(Tt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw iA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_x}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=hGt[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,i){const s=YB();return new Promise((o,a)=>{const u=new Eqt;u.setWithCredentials(!0),u.listenOnce(bqt.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case WB.NO_ERROR:const c=u.getResponseJson();Tt(Lo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case WB.TIMEOUT:Tt(Lo,`RPC '${t}' ${s} timed out`),a(new ht(ke.DEADLINE_EXCEEDED,"Request time out"));break;case WB.HTTP_ERROR:const f=u.getStatus();if(Tt(Lo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(y)>=0?y:ke.UNKNOWN}(h.status);a(new ht(p,h.message))}else a(new ht(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ht(ke.UNAVAILABLE,"Connection failed."));break;default:Yt()}}finally{Tt(Lo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Tt(Lo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}vo(t,n,r){const i=YB(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=vqt(),a=_qt(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Tt(Lo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new pGt({co:g=>{h?Tt(Lo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Tt(Lo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Tt(Lo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},lo:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return m(f,rk.EventType.OPEN,()=>{h||Tt(Lo,`RPC '${t}' stream ${i} transport opened.`)}),m(f,rk.EventType.CLOSE,()=>{h||(h=!0,Tt(Lo,`RPC '${t}' stream ${i} transport closed`),p.Ro())}),m(f,rk.EventType.ERROR,g=>{h||(h=!0,iA(Lo,`RPC '${t}' stream ${i} transport errored:`,g),p.Ro(new ht(ke.UNAVAILABLE,"The operation could not be completed")))}),m(f,rk.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Hr(!!v);const _=v,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){Tt(Lo,`RPC '${t}' stream ${i} received error:`,b);const E=b.status;let w=function(P){const A=Zi[P];if(A!==void 0)return Y4e(A)}(E),x=b.message;w===void 0&&(w=ke.INTERNAL,x="Unknown error status: "+E+" with message "+b.message),h=!0,p.Ro(new ht(w,x)),f.close()}else Tt(Lo,`RPC '${t}' stream ${i} received:`,v),p.Vo(v)}}),m(a,wqt.STAT_EVENT,g=>{g.stat===u0e.PROXY?Tt(Lo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===u0e.NOPROXY&&Tt(Lo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}}function KB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(e){return new CWt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sFe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&Tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oFe{constructor(t,n,r,i,s,o,a,u){this.si=t,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new sFe(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(Xp(n.toString()),Xp("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{t(()=>{const i=new ht(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return Tt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(Tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gGt extends oFe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=OWt(this.serializer,t),r=function(s){if(!("targetChange"in s))return en.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?en.min():o.readTime?Ld(o.readTime):en.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=HH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=FH(u)?{documents:$Wt(s,u)}:{query:RWt(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Q4e(s,o.resumeToken);const l=zH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(en.min())>0){a.readTime=oM(s,o.snapshotVersion.toTimestamp());const l=zH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=DWt(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=HH(this.serializer),n.removeTarget=t,this.e_(n)}}class yGt extends oFe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(Hr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=kWt(t.writeResults,t.commitTime),r=Ld(t.commitTime);return this.listener.I_(r,n)}return Hr(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=HH(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>PWt(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vGt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new ht(ke.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(t,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ht(ke.UNKNOWN,i.toString())})}Co(t,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ht(ke.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class _Gt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Xp(n),this.f_=!1):Tt("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bGt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{e_(this)&&(Tt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=an(u);l.C_.add(4),await ZI(l),l.M_.set("Unknown"),l.C_.delete(4),await JI(l)}(this))})}),this.M_=new _Gt(r,i)}}async function JI(e){if(e_(e))for(const t of e.v_)await t(!0)}async function ZI(e){for(const t of e.v_)await t(!1)}function aFe(e,t){const n=an(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),IZ(n)?AZ(n):Ex(n).Ho()&&CZ(n,t))}function uFe(e,t){const n=an(e),r=Ex(n);n.D_.delete(t),r.Ho()&&lFe(n,t),n.D_.size===0&&(r.Ho()?r.Zo():e_(n)&&n.M_.set("Unknown"))}function CZ(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ex(e).u_(t)}function lFe(e,t){e.x_.Oe(t),Ex(e).c_(t)}function AZ(e){e.x_=new EWt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Ex(e).start(),e.M_.g_()}function IZ(e){return e_(e)&&!Ex(e).jo()&&e.D_.size>0}function e_(e){return an(e).C_.size===0}function cFe(e){e.x_=void 0}async function wGt(e){e.D_.forEach((t,n)=>{CZ(e,t)})}async function EGt(e,t){cFe(e),IZ(e)?(e.M_.w_(t),AZ(e)):e.M_.set("Unknown")}async function xGt(e,t,n){if(e.M_.set("Online"),t instanceof X4e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(e,t)}catch(r){Tt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await aM(e,r)}else if(t instanceof j$?e.x_.$e(t):t instanceof K4e?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(en.min()))try{const r=await iFe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.D_.get(l);c&&s.D_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.D_.get(u);if(!c)return;s.D_.set(u,c.withResumeToken(la.EMPTY_BYTE_STRING,c.snapshotVersion)),lFe(s,u);const f=new hg(c.target,u,l,c.sequenceNumber);CZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Tt("RemoteStore","Failed to raise snapshot:",r),await aM(e,r)}}async function aM(e,t,n){if(!KI(t))throw t;e.C_.add(1),await ZI(e),e.M_.set("Offline"),n||(n=()=>iFe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Tt("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await JI(e)})}function fFe(e,t){return t().catch(n=>aM(e,n,t))}async function HF(e){const t=an(e),n=v0(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;SGt(t);)try{const i=await uGt(t.localStore,r);if(i===null){t.b_.length===0&&n.Zo();break}r=i.batchId,TGt(t,i)}catch(i){await aM(t,i)}dFe(t)&&hFe(t)}function SGt(e){return e_(e)&&e.b_.length<10}function TGt(e,t){e.b_.push(t);const n=v0(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function dFe(e){return e_(e)&&!v0(e).jo()&&e.b_.length>0}function hFe(e){v0(e).start()}async function CGt(e){v0(e).E_()}async function AGt(e){const t=v0(e);for(const n of e.b_)t.P_(n.mutations)}async function IGt(e,t,n){const r=e.b_.shift(),i=bZ.from(r,t,n);await fFe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await HF(e)}async function OGt(e,t){t&&v0(e).h_&&await async function(r,i){if(function(o){return _Wt(o)&&o!==ke.ABORTED}(i.code)){const s=r.b_.shift();v0(r).Yo(),await fFe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await HF(r)}}(e,t),dFe(e)&&hFe(e)}async function R0e(e,t){const n=an(e);n.asyncQueue.verifyOperationInProgress(),Tt("RemoteStore","RemoteStore received new credentials");const r=e_(n);n.C_.add(3),await ZI(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await JI(n)}async function PGt(e,t){const n=an(e);t?(n.C_.delete(2),await JI(n)):t||(n.C_.add(2),await ZI(n),n.M_.set("Unknown"))}function Ex(e){return e.O_||(e.O_=function(n,r,i){const s=an(n);return s.A_(),new gGt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:wGt.bind(null,e),Io:EGt.bind(null,e),a_:xGt.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),IZ(e)?AZ(e):e.M_.set("Unknown")):(await e.O_.stop(),cFe(e))})),e.O_}function v0(e){return e.N_||(e.N_=function(n,r,i){const s=an(n);return s.A_(),new yGt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{ho:CGt.bind(null,e),Io:OGt.bind(null,e),T_:AGt.bind(null,e),I_:IGt.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await HF(e)):(await e.N_.stop(),e.b_.length>0&&(Tt("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new OZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(ke.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PZ(e,t){if(Xp("AsyncQueue",`${t}: ${e}`),KI(e))return new ht(ke.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Mt.comparator(n.key,r.key):(n,r)=>Mt.comparator(n.key,r.key),this.keyedMap=ST(),this.sortedSet=new Ci(this.comparator)}static emptySet(t){return new sw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof sw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new sw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0e{constructor(){this.B_=new Ci(Mt.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Yt():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class aE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new aE(t,n,sw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&FF(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kGt{constructor(){this.k_=void 0,this.listeners=[]}}class $Gt{constructor(){this.queries=new wx(t=>D4e(t),FF),this.onlineState="Unknown",this.q_=new Set}}async function pFe(e,t){const n=an(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new kGt),i)try{s.k_=await n.onListen(r)}catch(o){const a=PZ(o,`Initialization of query '${Z_(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&kZ(n)}async function mFe(e,t){const n=an(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function RGt(e,t){const n=an(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&kZ(n)}function NGt(e,t,n){const r=an(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function kZ(e){e.q_.forEach(t=>{t.next()})}class gFe{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new aE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=aE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yFe{constructor(t){this.key=t}}class vFe{constructor(t){this.key=t}}class DGt{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=On(),this.mutatedKeys=On(),this._a=M4e(t),this.aa=new sw(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new N0e,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=jF(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ha(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this._a(h,u)>0||l&&this._a(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yt()}};return m(h)-m(p)}(c.type,f.type)||this._a(c.doc,f.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],u=this.oa.size===0&&this.current&&!i?1:0,l=u!==this.sa;return this.sa=u,o.length!==0||l?{snapshot:new aE(this.query,t.aa,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new N0e,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=On(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new vFe(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new yFe(r))}),n}da(t){this.ia=t.ls,this.oa=On();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return aE.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class MGt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class LGt{constructor(t){this.key=t,this.Ra=!1}}class FGt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new wx(a=>D4e(a),FF),this.fa=new Map,this.ga=new Set,this.pa=new Ci(Mt.comparator),this.ya=new Map,this.wa=new xZ,this.Sa={},this.ba=new Map,this.Da=oE.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function jGt(e,t){const n=KGt(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await lGt(n.localStore,Md(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await BGt(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&aFe(n.remoteStore,o)}return i}async function BGt(e,t,n,r,i){e.va=(f,d,h)=>async function(m,g,y,v){let _=g.view.ca(y);_.Zi&&(_=await P0e(m.localStore,g.query,!1).then(({documents:x})=>g.view.ca(x,_)));const b=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(_,m.isPrimaryClient,b,E);return M0e(m,g.targetId,w.Ta),w.snapshot}(e,f,d,h);const s=await P0e(e.localStore,t,!0),o=new DGt(t,s.ls),a=o.ca(s.documents),u=QI.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);M0e(e,n,l.Ta);const c=new MGt(t,n,o);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}async function zGt(e,t){const n=an(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!FF(s,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qH(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),uFe(n.remoteStore,r.targetId),WH(n,r.targetId)}).catch(YI)):(WH(n,r.targetId),await qH(n.localStore,r.targetId,!0))}async function UGt(e,t,n){const r=XGt(e);try{const i=await function(o,a){const u=an(o),l=Cs.now(),c=a.reduce((h,p)=>h.add(p.key),On());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Qp(),m=On();return u.ss.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=pWt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Q0(v.key,_,A4e(_.value.mapValue),ff.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:F4e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Sa[o.currentUser.toKey()];l||(l=new Ci(cr)),l=l.insert(a,u),o.Sa[o.currentUser.toKey()]=l}(r,i.batchId,n),await eO(r,i.changes),await HF(r.remoteStore)}catch(i){const s=PZ(i,"Failed to persist write");n.reject(s)}}async function _Fe(e,t){const n=an(e);try{const r=await oGt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Hr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Hr(o.Ra):i.removedDocuments.size>0&&(Hr(o.Ra),o.Ra=!1))}),await eO(n,r,t)}catch(r){await YI(r)}}function D0e(e,t,n){const r=an(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=an(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.listeners)d.Q_(a)&&(l=!0)}),l&&kZ(u)}(r.eventManager,t),i.length&&r.Va.a_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function VGt(e,t,n){const r=an(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let o=new Ci(Mt.comparator);o=o.insert(s,Go.newNoDocument(s,en.min()));const a=On().add(s),u=new UF(en.min(),new Map,new Ci(cr),o,a);await _Fe(r,u),r.pa=r.pa.remove(s),r.ya.delete(t),$Z(r)}else await qH(r.localStore,t,!1).then(()=>WH(r,t,n)).catch(YI)}async function HGt(e,t){const n=an(e),r=t.batch.batchId;try{const i=await sGt(n.localStore,t);wFe(n,r,null),bFe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await eO(n,i)}catch(i){await YI(i)}}async function qGt(e,t,n){const r=an(e);try{const i=await function(o,a){const u=an(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Hr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);wFe(r,t,n),bFe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await eO(r,i)}catch(i){await YI(i)}}function bFe(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function wFe(e,t,n){const r=an(e);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function WH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||EFe(e,r)})}function EFe(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(uFe(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),$Z(e))}function M0e(e,t,n){for(const r of n)r instanceof yFe?(e.wa.addReference(r.key,t),WGt(e,r)):r instanceof vFe?(Tt("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||EFe(e,r.key)):Yt()}function WGt(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Tt("SyncEngine","New document in limbo: "+n),e.ga.add(r),$Z(e))}function $Z(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Mt(Zr.fromString(t)),r=e.Da.next();e.ya.set(r,new LGt(n)),e.pa=e.pa.insert(n,r),aFe(e.remoteStore,new hg(Md(vZ(n.path)),r,"TargetPurposeLimboResolution",dZ._e))}}async function eO(e,t,n){const r=an(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,u)=>{o.push(r.va(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=TZ.Qi(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(u,l){const c=an(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Le.forEach(l,d=>Le.forEach(d.ki,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Le.forEach(d.qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!KI(f))throw f;Tt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ts.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ts=c.ts.insert(d,m)}}}(r.localStore,s))}async function GGt(e,t){const n=an(e);if(!n.currentUser.isEqual(t)){Tt("SyncEngine","User change. New user:",t.toKey());const r=await rFe(n.localStore,t);n.currentUser=t,function(s,o){s.ba.forEach(a=>{a.forEach(u=>{u.reject(new ht(ke.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await eO(n,r._s)}}function YGt(e,t){const n=an(e),r=n.ya.get(t);if(r&&r.Ra)return On().add(r.key);{let i=On();const s=n.fa.get(t);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function KGt(e){const t=an(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_Fe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YGt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VGt.bind(null,t),t.Va.a_=RGt.bind(null,t.eventManager),t.Va.Fa=NGt.bind(null,t.eventManager),t}function XGt(e){const t=an(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=HGt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qGt.bind(null,t),t}class L0e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=VF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return iGt(this.persistence,new nGt,t.initialUser,this.serializer)}createPersistence(t){return new ZWt(SZ.jr,this.serializer)}createSharedClientState(t){return new fGt}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class QGt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D0e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GGt.bind(null,this.syncEngine),await PGt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $Gt}()}createDatastore(t){const n=VF(t.databaseInfo.databaseId),r=function(s){return new mGt(s)}(t.databaseInfo);return function(s,o,a,u){return new vGt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new bGt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>D0e(this.syncEngine,n,0),function(){return $0e.D()?new $0e:new dGt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new FGt(i,s,o,a,u,l);return c&&(f.Ca=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=an(n);Tt("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await ZI(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xFe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Xp("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JGt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=eu.UNAUTHENTICATED,this.clientId=S4e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Tt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Tt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ht(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Sp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=PZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function XB(e,t){e.asyncQueue.verifyOperationInProgress(),Tt("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rFe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function F0e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await SFe(e);Tt("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(i=>R0e(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>R0e(t.remoteStore,s)),e._onlineComponents=t}function ZGt(e){return e.name==="FirebaseError"?e.code===ke.FAILED_PRECONDITION||e.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function SFe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Tt("FirestoreClient","Using user provided OfflineComponentProvider");try{await XB(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ZGt(n))throw n;iA("Error using user provided cache. Falling back to memory cache: "+n),await XB(e,new L0e)}}else Tt("FirestoreClient","Using default OfflineComponentProvider"),await XB(e,new L0e);return e._offlineComponents}async function RZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Tt("FirestoreClient","Using user provided OnlineComponentProvider"),await F0e(e,e._uninitializedComponentsProvider._online)):(Tt("FirestoreClient","Using default OnlineComponentProvider"),await F0e(e,new QGt))),e._onlineComponents}function eYt(e){return SFe(e).then(t=>t.persistence)}function tYt(e){return RZ(e).then(t=>t.remoteStore)}function nYt(e){return RZ(e).then(t=>t.syncEngine)}async function TFe(e){const t=await RZ(e),n=t.eventManager;return n.onListen=jGt.bind(null,t.syncEngine),n.onUnlisten=zGt.bind(null,t.syncEngine),n}function rYt(e){return e.asyncQueue.enqueue(async()=>{const t=await eYt(e),n=await tYt(e);return t.setNetworkEnabled(!0),function(i){const s=an(i);return s.C_.delete(0),JI(s)}(n)})}function iYt(e,t,n={}){const r=new Sp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new xFe({next:d=>{o.enqueueAndForget(()=>mFe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new ht(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new ht(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new gFe(vZ(a.path),c,{includeMetadataChanges:!0,J_:!0});return pFe(s,f)}(await TFe(e),e.asyncQueue,t,n,r)),r.promise}function sYt(e,t,n={}){const r=new Sp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new xFe({next:d=>{o.enqueueAndForget(()=>mFe(s,f)),d.fromCache&&u.source==="server"?l.reject(new ht(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new gFe(a,c,{includeMetadataChanges:!0,J_:!0});return pFe(s,f)}(await TFe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CFe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AFe(e,t,n){if(!n)throw new ht(ke.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function oYt(e,t,n,r){if(t===!0&&r===!0)throw new ht(ke.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function B0e(e){if(!Mt.isDocumentKey(e))throw new ht(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function z0e(e){if(Mt.isDocumentKey(e))throw new ht(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Yt()}function eh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ht(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qF(e);throw new ht(ke.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0e{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}oYt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CFe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ht(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ht(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ht(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class NZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U0e({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ht(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ht(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U0e(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tqt;switch(r.type){case"firstParty":return new Iqt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ht(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j0e.get(n);r&&(Tt("ComponentProvider","Removing Datastore"),j0e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new t_(this.firestore,t,this._query)}}class Pa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zg(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pa(this.firestore,t,this._key)}}class zg extends t_{constructor(t,n,r){super(t,n,vZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pa(this.firestore,null,new Mt(t))}withConverter(t){return new zg(this.firestore,t,this._path)}}function py(e,t,...n){if(e=Ti(e),AFe("collection","path",t),e instanceof NZ){const r=Zr.fromString(t,...n);return z0e(r),new zg(e,null,r)}{if(!(e instanceof Pa||e instanceof zg))throw new ht(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zr.fromString(t,...n));return z0e(r),new zg(e.firestore,null,r)}}function ms(e,t,...n){if(e=Ti(e),arguments.length===1&&(t=S4e.newId()),AFe("doc","path",t),e instanceof NZ){const r=Zr.fromString(t,...n);return B0e(r),new Pa(e,null,new Mt(r))}{if(!(e instanceof Pa||e instanceof zg))throw new ht(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zr.fromString(t,...n));return B0e(r),new Pa(e.firestore,e instanceof zg?e.converter:null,new Mt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aYt{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new sFe(this,"async_queue_retry"),this.iu=()=>{const n=KB();n&&Tt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=KB();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=KB();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new Sp;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!KI(t))throw t;Tt("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Xp("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const i=OZ.createAndSchedule(this,t,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&Yt()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}class n_ extends NZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new aYt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||IFe(this),this._firestoreClient.terminate()}}function uYt(e,t,n){n||(n="(default)");const r=mx(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(WC(s,t))return i;throw new ht(ke.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new ht(ke.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function WF(e){return e._firestoreClient||IFe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function IFe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Bqt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,CFe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new JGt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function lYt(e){return rYt(WF(e=eh(e,n_)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new uE(la.fromBase64String(t))}catch(n){throw new ht(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new uE(la.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ht(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new go(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ht(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ht(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return cr(this._lat,t._lat)||cr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cYt=/^__.*__$/;class fYt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Q0(t,this.data,this.fieldMask,n,this.fieldTransforms):new XI(t,this.data,n,this.fieldTransforms)}}class OFe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Q0(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function PFe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yt()}}class MZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new MZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Au(t),i}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return uM(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(PFe(this.Iu)&&cYt.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class dYt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||VF(t)}pu(t,n,r,i=!1){return new MZ({Iu:t,methodName:n,gu:r,path:go.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LZ(e){const t=e._freezeSettings(),n=VF(e._databaseId);return new dYt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hYt(e,t,n,r,i,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);jZ("Data must be an object, but it was:",o,r);const a=kFe(r,o);let u,l;if(s.merge)u=new rl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=GH(t,f,n);if(!o.contains(d))throw new ht(ke.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);RFe(c,d)||c.push(d)}u=new rl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new fYt(new cu(a),u,l)}class KF extends YF{_toFieldTransform(t){if(t.Iu!==2)throw t.Iu===1?t.mu(`${this._methodName}() can only appear at the top level of your update data`):t.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof KF}}class FZ extends YF{_toFieldTransform(t){return new cWt(t.path,new cA)}isEqual(t){return t instanceof FZ}}function pYt(e,t,n,r){const i=e.pu(1,t,n);jZ("Data must be an object, but it was:",i,r);const s=[],o=cu.empty();Zv(r,(u,l)=>{const c=BZ(t,u,n);l=Ti(l);const f=i.Ru(c);if(l instanceof KF)s.push(c);else{const d=tO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new rl(s);return new OFe(o,a,i.fieldTransforms)}function mYt(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[GH(t,r,n)],u=[i];if(s.length%2!=0)throw new ht(ke.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(GH(t,s[d])),u.push(s[d+1]);const l=[],c=cu.empty();for(let d=a.length-1;d>=0;--d)if(!RFe(l,a[d])){const h=a[d];let p=u[d];p=Ti(p);const m=o.Ru(h);if(p instanceof KF)l.push(h);else{const g=tO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new rl(l);return new OFe(c,f,o.fieldTransforms)}function gYt(e,t,n,r=!1){return tO(n,e.pu(r?4:3,t))}function tO(e,t){if($Fe(e=Ti(e)))return jZ("Unsupported field value:",t,e),kFe(e,t);if(e instanceof YF)return function(r,i){if(!PFe(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=tO(a,i.Vu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aWt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Cs.fromDate(r);return{timestampValue:oM(i.serializer,s)}}if(r instanceof Cs){const s=new Cs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oM(i.serializer,s)}}if(r instanceof DZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof uE)return{bytesValue:Q4e(i.serializer,r._byteString)};if(r instanceof Pa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:EZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${qF(r)}`)}(e,t)}function kFe(e,t){const n={};return T4e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zv(e,(r,i)=>{const s=tO(i,t.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $Fe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Cs||e instanceof DZ||e instanceof uE||e instanceof Pa||e instanceof YF)}function jZ(e,t,n){if(!$Fe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=qF(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function GH(e,t,n){if((t=Ti(t))instanceof GF)return t._internalPath;if(typeof t=="string")return BZ(e,t);throw uM("Field path arguments must be of type string or ",e,!1,void 0,n)}const yYt=new RegExp("[~\\*/\\[\\]]");function BZ(e,t,n){if(t.search(yYt)>=0)throw uM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new GF(...t.split("."))._internalPath}catch{throw uM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function uM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ht(ke.INVALID_ARGUMENT,a+e+u)}function RFe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NFe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new vYt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(XF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vYt extends NFe{data(){return super.data()}}function XF(e,t){return typeof t=="string"?BZ(e,t):t instanceof GF?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Yt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ht(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zZ{}class DFe extends zZ{}function V0e(e,t,...n){let r=[];t instanceof zZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof UZ).length,a=s.filter(u=>u instanceof QF).length;if(o>1||o>0&&a>0)throw new ht(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class QF extends DFe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new QF(t,n,r)}_apply(t){const n=this._parse(t);return MFe(t._query,n),new t_(t.firestore,t.converter,jH(t._query,n))}_parse(t){const n=LZ(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ht(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){q0e(f,c);const h=[];for(const p of f)h.push(H0e(u,s,p));d={arrayValue:{values:h}}}else d=H0e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||q0e(f,c),d=gYt(a,o,f,c==="in"||c==="not-in");return os.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function bYt(e,t,n){const r=t,i=XF("where",e);return QF._create(i,r,n)}class UZ extends zZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new UZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)MFe(o,u),o=jH(o,u)}(t._query,n),new t_(t.firestore,t.converter,jH(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class VZ extends DFe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new VZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new ht(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ht(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lA(s,o)}(t._query,this._field,this._direction);return new t_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new bx(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function wYt(e,t="asc"){const n=t,r=XF("orderBy",e);return VZ._create(r,n)}function H0e(e,t,n){if(typeof(n=Ti(n))=="string"){if(n==="")throw new ht(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N4e(t)&&n.indexOf("/")!==-1)throw new ht(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Zr.fromString(n));if(!Mt.isDocumentKey(r))throw new ht(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return h0e(e,new Mt(r))}if(n instanceof Pa)return h0e(e,n._key);throw new ht(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qF(n)}.`)}function q0e(e,t){if(!Array.isArray(e)||e.length===0)throw new ht(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function MFe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ht(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class EYt{convertValue(t,n="none"){switch(dv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ns(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(fv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Yt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Zv(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new DZ(ns(t.latitude),ns(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=pZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oA(t));default:return null}}convertTimestamp(t){const n=y0(t);return new Cs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Zr.fromString(t);Hr(nFe(r));const i=new aA(r.get(1),r.get(3)),s=new Mt(r.popFirst(5));return i.isEqual(n)||Xp(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xYt(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class LFe extends NFe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new B$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(XF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class B$ extends LFe{data(t={}){return super.data(t)}}class SYt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new CT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new B$(this._firestore,this._userDataWriter,r.key,r,new CT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ht(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new B$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new CT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new B$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new CT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:TYt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TYt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(e){e=eh(e,Pa);const t=eh(e.firestore,n_);return iYt(WF(t),e._key).then(n=>AYt(t,e,n))}class FFe extends EYt{constructor(t){super(),this.firestore=t}convertBytes(t){return new uE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pa(this.firestore,null,n)}}function NS(e){e=eh(e,t_);const t=eh(e.firestore,n_),n=WF(t),r=new FFe(t);return _Yt(e._query),sYt(n,e._query).then(i=>new SYt(t,r,e,i))}function $l(e,t,n){e=eh(e,Pa);const r=eh(e.firestore,n_),i=xYt(e.converter,t,n);return HZ(r,[hYt(LZ(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ff.none())])}function W0e(e,t,n,...r){e=eh(e,Pa);const i=eh(e.firestore,n_),s=LZ(i);let o;return o=typeof(t=Ti(t))=="string"||t instanceof GF?mYt(s,"updateDoc",e._key,t,n,r):pYt(s,"updateDoc",e._key,t),HZ(i,[o.toMutation(e._key,ff.exists(!0))])}function CYt(e){return HZ(eh(e.firestore,n_),[new _Z(e._key,ff.none())])}function HZ(e,t){return function(r,i){const s=new Sp;return r.asyncQueue.enqueueAndForget(async()=>UGt(await nYt(r),i,s)),s.promise}(WF(e),t)}function AYt(e,t,n){const r=n.docs.get(t._key),i=new FFe(e);return new LFe(e,i,t._key,r,new CT(n.hasPendingWrites,n.fromCache),t.converter)}function IYt(){return new FZ("serverTimestamp")}(function(t,n=!0){(function(i){_x=i})(Qv),Gp(new Qd("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new n_(new Cqt(r.getProvider("auth-internal")),new Pqt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ht(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),cf(l0e,"4.4.0",t),cf(l0e,"4.4.0","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH=new Map,jFe={activated:!1,tokenObservers:[]},OYt={initialized:!1,enabled:!1};function As(e){return YH.get(e)||Object.assign({},jFe)}function PYt(e,t){return YH.set(e,t),YH.get(e)}function JF(){return OYt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BFe="https://content-firebaseappcheck.googleapis.com/v1",kYt="exchangeRecaptchaV3Token",$Yt="exchangeDebugToken",G0e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},RYt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NYt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new qC,await DYt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new qC,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function DYt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MYt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},yu=new px("appCheck","AppCheck",MYt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function qZ(e){if(!As(e).activated)throw yu.create("use-before-activation",{appName:e.name})}function zFe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=ak(n)+"d:"),r&&(o+=ak(r)+"h:"),o+=ak(i)+"m:"+ak(s)+"s",o}function ak(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw yu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw yu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw yu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw yu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function LYt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${BFe}/projects/${n}/apps/${r}:${kYt}?key=${i}`,body:{recaptcha_v3_token:t}}}function UFe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${BFe}/projects/${n}/apps/${r}:${$Yt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FYt="firebase-app-check-database",jYt=1,hA="firebase-app-check-store",VFe="debug-token";let uk=null;function HFe(){return uk||(uk=new Promise((e,t)=>{try{const n=indexedDB.open(FYt,jYt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(yu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hA,{keyPath:"compositeKey"})}}}catch(n){t(yu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),uk)}function BYt(e){return WFe(GFe(e))}function zYt(e,t){return qFe(GFe(e),t)}function UYt(e){return qFe(VFe,e)}function VYt(){return WFe(VFe)}async function qFe(e,t){const r=(await HFe()).transaction(hA,"readwrite"),s=r.objectStore(hA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(yu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function WFe(e){const n=(await HFe()).transaction(hA,"readonly"),i=n.objectStore(hA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(yu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function GFe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=new mF("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HYt(e){if(AJ()){let t;try{t=await BYt(e)}catch(n){pA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function QB(e,t){return AJ()?zYt(e,t).catch(n=>{pA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function qYt(){let e;try{e=await VYt()}catch{}if(e)return e;{const t=UBt();return UYt(t).catch(n=>pA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GZ(){return JF().enabled}async function YZ(){const e=JF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function WYt(){const e=_Le(),t=JF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new qC;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(qYt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GYt={error:"UNKNOWN_ERROR"};function YYt(e){return TJ.encodeString(JSON.stringify(e),!1)}async function KH(e,t=!1){const n=e.app;qZ(n);const r=As(n);let i=r.token,s;if(i&&!Sb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Sb(u)?i=u:await QB(n,void 0))}if(!t&&i&&Sb(i))return{token:i.token};let o=!1;if(GZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WZ(UFe(n,await YZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await QB(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await As(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?pA.warn(u.message):pA.error(u),s=u}let a;return i?s?Sb(i)?a={token:i.token,internalError:s}:a=X0e(s):(a={token:i.token},r.token=i,await QB(n,i)):a=X0e(s),o&&XFe(n,a),a}async function KYt(e){const t=e.app;qZ(t);const{provider:n}=As(t);if(GZ()){const r=await YZ(),{token:i}=await WZ(UFe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function YFe(e,t,n,r){const{app:i}=e,s=As(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Sb(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),K0e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>K0e(e))}function KFe(e,t){const n=As(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function K0e(e){const{app:t}=e,n=As(t);let r=n.tokenRefresher;r||(r=XYt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function XYt(e){const{app:t}=e;return new NYt(async()=>{const n=As(t);let r;if(n.token?r=await KH(e,!0):r=await KH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=As(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},G0e.RETRIAL_MIN_WAIT,G0e.RETRIAL_MAX_WAIT)}function XFe(e,t){const n=As(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Sb(e){return e.expireTimeMillis-Date.now()>0}function X0e(e){return{token:YYt(GYt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QYt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=As(this.app);for(const n of t)KFe(this.app,n.next);return Promise.resolve()}}function JYt(e,t){return new QYt(e,t)}function ZYt(e){return{getToken:t=>KH(e,t),getLimitedUseToken:()=>KYt(e),addTokenListener:t=>YFe(e,"INTERNAL",t),removeTokenListener:t=>KFe(e.app,t)}}const eKt="@firebase/app-check",tKt="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nKt="https://www.google.com/recaptcha/api.js";function rKt(e,t){const n=new qC,r=As(e);r.reCAPTCHAState={initialized:n};const i=iKt(e),s=Y0e(!1);return s?Q0e(e,t,s,i,n):aKt(()=>{const o=Y0e(!1);if(!o)throw new Error("no recaptcha");Q0e(e,t,o,i,n)}),n.promise}function Q0e(e,t,n,r,i){n.ready(()=>{oKt(e,t,n,r),i.resolve(n)})}function iKt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function sKt(e){qZ(e);const n=await As(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=As(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function oKt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{As(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{As(e).reCAPTCHAState.succeeded=!1}}),s=As(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function aKt(e){const t=document.createElement("script");t.src=nKt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;lKt(this._throttleData);const i=await sKt(this._app).catch(o=>{throw yu.create("recaptcha-error")});if(!(!((t=As(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw yu.create("recaptcha-error");let s;try{s=await WZ(LYt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=uKt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),yu.create("throttled",{time:zFe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=mx(t,"heartbeat"),rKt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof KZ?this._siteKey===t._siteKey:!1}}function uKt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+RYt,httpStatus:e};{const n=t?t.backoffCount:0,r=GBt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function lKt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw yu.create("throttled",{time:zFe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cKt(e=OJ(),t){e=Ti(e);const n=mx(e,"app-check");if(JF().initialized||WYt(),GZ()&&YZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw yu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return fKt(e,t.provider,t.isTokenAutoRefreshEnabled),As(e).isTokenAutoRefreshEnabled&&YFe(r,"INTERNAL",()=>{}),r}function fKt(e,t,n){const r=PYt(e,Object.assign({},jFe));r.activated=!0,r.provider=t,r.cachedTokenPromise=HYt(e).then(i=>(i&&Sb(i)&&(r.token=i,XFe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const dKt="app-check",J0e="app-check-internal";function hKt(){Gp(new Qd(dKt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return JYt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(J0e).initialize()})),Gp(new Qd(J0e,e=>{const t=e.getProvider("app-check").getImmediate();return ZYt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),cf(eKt,tKt)}hKt();function lk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var QFe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof lk=="function"&&lk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof lk=="function"&&lk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof du<"u"?du:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,w){if(typeof E!="function"&&this.state===l||typeof w!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var S=this.state===l?E:w;h(x,S,this.outcome)}else this.queue.push(new d(x,E,w));return x};function d(E,w,x){this.promise=E,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,w,x){s(function(){var S;try{S=w(x)}catch(P){return a.reject(E,P)}S===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,S)})}a.resolve=function(E,w){var x=g(p,w);if(x.status==="error")return a.reject(E,x.value);var S=x.value;if(S)m(E,S);else{E.state=l,E.outcome=w;for(var P=-1,A=E.queue.length;++P<A;)E.queue[P].callFulfilled(w)}return E},a.reject=function(E,w){E.state=u,E.outcome=w;for(var x=-1,S=E.queue.length;++x<S;)E.queue[x].callRejected(w);return E};function p(E){var w=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof w=="function")return function(){w.apply(E,arguments)}}function m(E,w){var x=!1;function S(z){x||(x=!0,a.reject(E,z))}function P(z){x||(x=!0,a.resolve(E,z))}function A(){w(P,S)}var O=g(A);O.status==="error"&&S(O.value)}function g(E,w){var x={};try{x.value=E(w),x.status="success"}catch(S){x.status="error",x.value=S}return x}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var w=new this(o);return a.reject(w,E)}f.all=_;function _(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var P=new Array(x),A=0,O=-1,z=new this(o);++O<x;)M(E[O],O);return z;function M(R,D){w.resolve(R).then(L,function(V){S||(S=!0,a.reject(z,V))});function L(V){P[D]=V,++A===x&&!S&&(S=!0,a.resolve(z,P))}}}f.race=b;function b(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var P=-1,A=new this(o);++P<x;)O(E[P]);return A;function O(z){w.resolve(z).then(function(M){S||(S=!0,a.resolve(A,M))},function(M){S||(S=!0,a.reject(A,M))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof du<"u"?du:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W};function o(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var W=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!W||te)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(W,te){W=W||[],te=te||{};try{return new Blob(W,te)}catch(oe){if(oe.name!=="TypeError")throw oe;for(var K=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new K,pe=0;pe<W.length;pe+=1)fe.append(W[pe]);return fe.getBlob(te.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(W,te){te&&W.then(function(K){te(null,K)},function(K){te(K)})}function h(W,te,K){typeof te=="function"&&W.then(te),typeof K=="function"&&W.catch(K)}function p(W){return typeof W!="string"&&(console.warn(W+" used as a key, but it is not a string."),W=String(W)),W}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,b="readonly",E="readwrite";function w(W){for(var te=W.length,K=new ArrayBuffer(te),fe=new Uint8Array(K),pe=0;pe<te;pe++)fe[pe]=W.charCodeAt(pe);return K}function x(W){return new f(function(te){var K=W.transaction(g,E),fe=c([""]);K.objectStore(g).put(fe,"key"),K.onabort=function(pe){pe.preventDefault(),pe.stopPropagation(),te(!1)},K.oncomplete=function(){var pe=navigator.userAgent.match(/Chrome\/(\d+)/),oe=navigator.userAgent.match(/Edge\//);te(oe||!pe||parseInt(pe[1],10)>=43)}}).catch(function(){return!1})}function S(W){return typeof y=="boolean"?f.resolve(y):x(W).then(function(te){return y=te,y})}function P(W){var te=v[W.name],K={};K.promise=new f(function(fe,pe){K.resolve=fe,K.reject=pe}),te.deferredOperations.push(K),te.dbReady?te.dbReady=te.dbReady.then(function(){return K.promise}):te.dbReady=K.promise}function A(W){var te=v[W.name],K=te.deferredOperations.pop();if(K)return K.resolve(),K.promise}function O(W,te){var K=v[W.name],fe=K.deferredOperations.pop();if(fe)return fe.reject(te),fe.promise}function z(W,te){return new f(function(K,fe){if(v[W.name]=v[W.name]||$(),W.db)if(te)P(W),W.db.close();else return K(W.db);var pe=[W.name];te&&pe.push(W.version);var oe=u.open.apply(u,pe);te&&(oe.onupgradeneeded=function(Se){var De=oe.result;try{De.createObjectStore(W.storeName),Se.oldVersion<=1&&De.createObjectStore(g)}catch(ze){if(ze.name==="ConstraintError")console.warn('The database "'+W.name+'" has been upgraded from version '+Se.oldVersion+" to version "+Se.newVersion+', but the storage "'+W.storeName+'" already exists.');else throw ze}}),oe.onerror=function(Se){Se.preventDefault(),fe(oe.error)},oe.onsuccess=function(){var Se=oe.result;Se.onversionchange=function(De){De.target.close()},K(Se),A(W)}})}function M(W){return z(W,!1)}function R(W){return z(W,!0)}function D(W,te){if(!W.db)return!0;var K=!W.db.objectStoreNames.contains(W.storeName),fe=W.version<W.db.version,pe=W.version>W.db.version;if(fe&&(W.version!==te&&console.warn('The database "'+W.name+`" can't be downgraded from version `+W.db.version+" to version "+W.version+"."),W.version=W.db.version),pe||K){if(K){var oe=W.db.version+1;oe>W.version&&(W.version=oe)}return!0}return!1}function L(W){return new f(function(te,K){var fe=new FileReader;fe.onerror=K,fe.onloadend=function(pe){var oe=btoa(pe.target.result||"");te({__local_forage_encoded_blob:!0,data:oe,type:W.type})},fe.readAsBinaryString(W)})}function V(W){var te=w(atob(W.data));return c([te],{type:W.type})}function B(W){return W&&W.__local_forage_encoded_blob}function H(W){var te=this,K=te._initReady().then(function(){var fe=v[te._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(K,W,W),K}function U(W){P(W);for(var te=v[W.name],K=te.forages,fe=0;fe<K.length;fe++){var pe=K[fe];pe._dbInfo.db&&(pe._dbInfo.db.close(),pe._dbInfo.db=null)}return W.db=null,M(W).then(function(oe){return W.db=oe,D(W)?R(W):oe}).then(function(oe){W.db=te.db=oe;for(var Se=0;Se<K.length;Se++)K[Se]._dbInfo.db=oe}).catch(function(oe){throw O(W,oe),oe})}function k(W,te,K,fe){fe===void 0&&(fe=1);try{var pe=W.db.transaction(W.storeName,te);K(null,pe)}catch(oe){if(fe>0&&(!W.db||oe.name==="InvalidStateError"||oe.name==="NotFoundError"))return f.resolve().then(function(){if(!W.db||oe.name==="NotFoundError"&&!W.db.objectStoreNames.contains(W.storeName)&&W.version<=W.db.version)return W.db&&(W.version=W.db.version+1),R(W)}).then(function(){return U(W).then(function(){k(W,te,K,fe-1)})}).catch(K);K(oe)}}function $(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function q(W){var te=this,K={db:null};if(W)for(var fe in W)K[fe]=W[fe];var pe=v[K.name];pe||(pe=$(),v[K.name]=pe),pe.forages.push(te),te._initReady||(te._initReady=te.ready,te.ready=H);var oe=[];function Se(){return f.resolve()}for(var De=0;De<pe.forages.length;De++){var ze=pe.forages[De];ze!==te&&oe.push(ze._initReady().catch(Se))}var He=pe.forages.slice(0);return f.all(oe).then(function(){return K.db=pe.db,M(K)}).then(function(Ze){return K.db=Ze,D(K,te._defaultConfig.version)?R(K):Ze}).then(function(Ze){K.db=pe.db=Ze,te._dbInfo=K;for(var St=0;St<He.length;St++){var gn=He[St];gn!==te&&(gn._dbInfo.db=K.db,gn._dbInfo.version=K.version)}})}function F(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){k(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.get(W);He.onsuccess=function(){var Ze=He.result;Ze===void 0&&(Ze=null),B(Ze)&&(Ze=V(Ze)),pe(Ze)},He.onerror=function(){oe(He.error)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function j(W,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){k(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.openCursor(),Ze=1;He.onsuccess=function(){var St=He.result;if(St){var gn=St.value;B(gn)&&(gn=V(gn));var tr=W(gn,St.key,Ze++);tr!==void 0?pe(tr):St.continue()}else pe()},He.onerror=function(){oe(He.error)}}catch(St){oe(St)}})}).catch(oe)});return d(fe,te),fe}function Q(W,te,K){var fe=this;W=p(W);var pe=new f(function(oe,Se){var De;fe.ready().then(function(){return De=fe._dbInfo,_.call(te)==="[object Blob]"?S(De.db).then(function(ze){return ze?te:L(te)}):te}).then(function(ze){k(fe._dbInfo,E,function(He,Ze){if(He)return Se(He);try{var St=Ze.objectStore(fe._dbInfo.storeName);ze===null&&(ze=void 0);var gn=St.put(ze,W);Ze.oncomplete=function(){ze===void 0&&(ze=null),oe(ze)},Ze.onabort=Ze.onerror=function(){var tr=gn.error?gn.error:gn.transaction.error;Se(tr)}}catch(tr){Se(tr)}})}).catch(Se)});return d(pe,K),pe}function se(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){k(K._dbInfo,E,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=ze.delete(W);De.oncomplete=function(){pe()},De.onerror=function(){oe(He.error)},De.onabort=function(){var Ze=He.error?He.error:He.transaction.error;oe(Ze)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function ae(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){k(te._dbInfo,E,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.clear();Se.oncomplete=function(){fe()},Se.onabort=Se.onerror=function(){var He=ze.error?ze.error:ze.transaction.error;pe(He)}}catch(He){pe(He)}})}).catch(pe)});return d(K,W),K}function ce(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){k(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.count();ze.onsuccess=function(){fe(ze.result)},ze.onerror=function(){pe(ze.error)}}catch(He){pe(He)}})}).catch(pe)});return d(K,W),K}function le(W,te){var K=this,fe=new f(function(pe,oe){if(W<0){pe(null);return}K.ready().then(function(){k(K._dbInfo,b,function(Se,De){if(Se)return oe(Se);try{var ze=De.objectStore(K._dbInfo.storeName),He=!1,Ze=ze.openKeyCursor();Ze.onsuccess=function(){var St=Ze.result;if(!St){pe(null);return}W===0||He?pe(St.key):(He=!0,St.advance(W))},Ze.onerror=function(){oe(Ze.error)}}catch(St){oe(St)}})}).catch(oe)});return d(fe,te),fe}function ge(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){k(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var De=Se.objectStore(te._dbInfo.storeName),ze=De.openKeyCursor(),He=[];ze.onsuccess=function(){var Ze=ze.result;if(!Ze){fe(He);return}He.push(Ze.key),Ze.continue()},ze.onerror=function(){pe(ze.error)}}catch(Ze){pe(Ze)}})}).catch(pe)});return d(K,W),K}function ue(W,te){te=m.apply(this,arguments);var K=this.config();W=typeof W!="function"&&W||{},W.name||(W.name=W.name||K.name,W.storeName=W.storeName||K.storeName);var fe=this,pe;if(!W.name)pe=f.reject("Invalid arguments");else{var oe=W.name===K.name&&fe._dbInfo.db,Se=oe?f.resolve(fe._dbInfo.db):M(W).then(function(De){var ze=v[W.name],He=ze.forages;ze.db=De;for(var Ze=0;Ze<He.length;Ze++)He[Ze]._dbInfo.db=De;return De});W.storeName?pe=Se.then(function(De){if(De.objectStoreNames.contains(W.storeName)){var ze=De.version+1;P(W);var He=v[W.name],Ze=He.forages;De.close();for(var St=0;St<Ze.length;St++){var gn=Ze[St];gn._dbInfo.db=null,gn._dbInfo.version=ze}var tr=new f(function(ur,Oi){var oi=u.open(W.name,ze);oi.onerror=function(Ya){var ly=oi.result;ly.close(),Oi(Ya)},oi.onupgradeneeded=function(){var Ya=oi.result;Ya.deleteObjectStore(W.storeName)},oi.onsuccess=function(){var Ya=oi.result;Ya.close(),ur(Ya)}});return tr.then(function(ur){He.db=ur;for(var Oi=0;Oi<Ze.length;Oi++){var oi=Ze[Oi];oi._dbInfo.db=ur,A(oi._dbInfo)}}).catch(function(ur){throw(O(W,ur)||f.resolve()).catch(function(){}),ur})}}):pe=Se.then(function(De){P(W);var ze=v[W.name],He=ze.forages;De.close();for(var Ze=0;Ze<He.length;Ze++){var St=He[Ze];St._dbInfo.db=null}var gn=new f(function(tr,ur){var Oi=u.deleteDatabase(W.name);Oi.onerror=function(){var oi=Oi.result;oi&&oi.close(),ur(Oi.error)},Oi.onblocked=function(){console.warn('dropInstance blocked for database "'+W.name+'" until all open connections are closed')},Oi.onsuccess=function(){var oi=Oi.result;oi&&oi.close(),tr(oi)}});return gn.then(function(tr){ze.db=tr;for(var ur=0;ur<He.length;ur++){var Oi=He[ur];A(Oi._dbInfo)}}).catch(function(tr){throw(O(W,tr)||f.resolve()).catch(function(){}),tr})})}return d(pe,te),pe}var Fe={_driver:"asyncStorage",_initStorage:q,_support:l(),iterate:j,getItem:F,setItem:Q,removeItem:se,clear:ae,length:ce,key:le,keys:ge,dropInstance:ue};function $e(){return typeof openDatabase=="function"}var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,Me="__lfsc__:",Ut=Me.length,Qe="arbf",Be="blob",xt="si08",et="ui08",ft="uic8",dt="si16",Bt="si32",Dn="ur16",he="ui32",_e="fl32",Pe="fl64",it=Ut+Qe.length,Ye=Object.prototype.toString;function ut(W){var te=W.length*.75,K=W.length,fe,pe=0,oe,Se,De,ze;W[W.length-1]==="="&&(te--,W[W.length-2]==="="&&te--);var He=new ArrayBuffer(te),Ze=new Uint8Array(He);for(fe=0;fe<K;fe+=4)oe=Ge.indexOf(W[fe]),Se=Ge.indexOf(W[fe+1]),De=Ge.indexOf(W[fe+2]),ze=Ge.indexOf(W[fe+3]),Ze[pe++]=oe<<2|Se>>4,Ze[pe++]=(Se&15)<<4|De>>2,Ze[pe++]=(De&3)<<6|ze&63;return He}function tt(W){var te=new Uint8Array(W),K="",fe;for(fe=0;fe<te.length;fe+=3)K+=Ge[te[fe]>>2],K+=Ge[(te[fe]&3)<<4|te[fe+1]>>4],K+=Ge[(te[fe+1]&15)<<2|te[fe+2]>>6],K+=Ge[te[fe+2]&63];return te.length%3===2?K=K.substring(0,K.length-1)+"=":te.length%3===1&&(K=K.substring(0,K.length-2)+"=="),K}function wt(W,te){var K="";if(W&&(K=Ye.call(W)),W&&(K==="[object ArrayBuffer]"||W.buffer&&Ye.call(W.buffer)==="[object ArrayBuffer]")){var fe,pe=Me;W instanceof ArrayBuffer?(fe=W,pe+=Qe):(fe=W.buffer,K==="[object Int8Array]"?pe+=xt:K==="[object Uint8Array]"?pe+=et:K==="[object Uint8ClampedArray]"?pe+=ft:K==="[object Int16Array]"?pe+=dt:K==="[object Uint16Array]"?pe+=Dn:K==="[object Int32Array]"?pe+=Bt:K==="[object Uint32Array]"?pe+=he:K==="[object Float32Array]"?pe+=_e:K==="[object Float64Array]"?pe+=Pe:te(new Error("Failed to get type for BinaryArray"))),te(pe+tt(fe))}else if(K==="[object Blob]"){var oe=new FileReader;oe.onload=function(){var Se=Re+W.type+"~"+tt(this.result);te(Me+Be+Se)},oe.readAsArrayBuffer(W)}else try{te(JSON.stringify(W))}catch(Se){console.error("Couldn't convert value into a JSON string: ",W),te(null,Se)}}function In(W){if(W.substring(0,Ut)!==Me)return JSON.parse(W);var te=W.substring(it),K=W.substring(Ut,it),fe;if(K===Be&&Oe.test(te)){var pe=te.match(Oe);fe=pe[1],te=te.substring(pe[0].length)}var oe=ut(te);switch(K){case Qe:return oe;case Be:return c([oe],{type:fe});case xt:return new Int8Array(oe);case et:return new Uint8Array(oe);case ft:return new Uint8ClampedArray(oe);case dt:return new Int16Array(oe);case Dn:return new Uint16Array(oe);case Bt:return new Int32Array(oe);case he:return new Uint32Array(oe);case _e:return new Float32Array(oe);case Pe:return new Float64Array(oe);default:throw new Error("Unkown type: "+K)}}var Wt={serialize:wt,deserialize:In,stringToBuffer:ut,bufferToString:tt};function Vt(W,te,K,fe){W.executeSql("CREATE TABLE IF NOT EXISTS "+te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],K,fe)}function hr(W){var te=this,K={db:null};if(W)for(var fe in W)K[fe]=typeof W[fe]!="string"?W[fe].toString():W[fe];var pe=new f(function(oe,Se){try{K.db=openDatabase(K.name,String(K.version),K.description,K.size)}catch(De){return Se(De)}K.db.transaction(function(De){Vt(De,K,function(){te._dbInfo=K,oe()},function(ze,He){Se(He)})},Se)});return K.serializer=Wt,pe}function Yn(W,te,K,fe,pe,oe){W.executeSql(K,fe,pe,function(Se,De){De.code===De.SYNTAX_ERR?Se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[te.storeName],function(ze,He){He.rows.length?oe(ze,De):Vt(ze,te,function(){ze.executeSql(K,fe,pe,oe)},oe)},oe):oe(Se,De)},oe)}function ju(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName+" WHERE key = ? LIMIT 1",[W],function(ze,He){var Ze=He.rows.length?He.rows.item(0).value:null;Ze&&(Ze=Se.serializer.deserialize(Ze)),pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Lr(W,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT * FROM "+Se.storeName,[],function(ze,He){for(var Ze=He.rows,St=Ze.length,gn=0;gn<St;gn++){var tr=Ze.item(gn),ur=tr.value;if(ur&&(ur=Se.serializer.deserialize(ur)),ur=W(ur,tr.key,gn+1),ur!==void 0){pe(ur);return}}pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function ds(W,te,K,fe){var pe=this;W=p(W);var oe=new f(function(Se,De){pe.ready().then(function(){te===void 0&&(te=null);var ze=te,He=pe._dbInfo;He.serializer.serialize(te,function(Ze,St){St?De(St):He.db.transaction(function(gn){Yn(gn,He,"INSERT OR REPLACE INTO "+He.storeName+" (key, value) VALUES (?, ?)",[W,Ze],function(){Se(ze)},function(tr,ur){De(ur)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(fe>0){Se(ds.apply(pe,[W,ze,K,fe-1]));return}De(gn)}})})}).catch(De)});return d(oe,K),oe}function ii(W,te,K){return ds.apply(this,[W,te,K,1])}function Ai(W,te){var K=this;W=p(W);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"DELETE FROM "+Se.storeName+" WHERE key = ?",[W],function(){pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Gr(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"DELETE FROM "+oe.storeName,[],function(){fe()},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,W),K}function yr(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT COUNT(key) as c FROM "+oe.storeName,[],function(De,ze){var He=ze.rows.item(0).c;fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,W),K}function _t(W,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(De){Yn(De,Se,"SELECT key FROM "+Se.storeName+" WHERE id = ? LIMIT 1",[W+1],function(ze,He){var Ze=He.rows.length?He.rows.item(0).key:null;pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Fr(W){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT key FROM "+oe.storeName,[],function(De,ze){for(var He=[],Ze=0;Ze<ze.rows.length;Ze++)He.push(ze.rows.item(Ze).key);fe(He)},function(De,ze){pe(ze)})})}).catch(pe)});return d(K,W),K}function Ii(W){return new f(function(te,K){W.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(pe,oe){for(var Se=[],De=0;De<oe.rows.length;De++)Se.push(oe.rows.item(De).name);te({db:W,storeNames:Se})},function(pe,oe){K(oe)})},function(fe){K(fe)})})}function Ji(W,te){te=m.apply(this,arguments);var K=this.config();W=typeof W!="function"&&W||{},W.name||(W.name=W.name||K.name,W.storeName=W.storeName||K.storeName);var fe=this,pe;return W.name?pe=new f(function(oe){var Se;W.name===K.name?Se=fe._dbInfo.db:Se=openDatabase(W.name,"","",0),W.storeName?oe({db:Se,storeNames:[W.storeName]}):oe(Ii(Se))}).then(function(oe){return new f(function(Se,De){oe.db.transaction(function(ze){function He(tr){return new f(function(ur,Oi){ze.executeSql("DROP TABLE IF EXISTS "+tr,[],function(){ur()},function(oi,Ya){Oi(Ya)})})}for(var Ze=[],St=0,gn=oe.storeNames.length;St<gn;St++)Ze.push(He(oe.storeNames[St]));f.all(Ze).then(function(){Se()}).catch(function(tr){De(tr)})},function(ze){De(ze)})})}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var no={_driver:"webSQLStorage",_initStorage:hr,_support:$e(),iterate:Lr,getItem:ju,setItem:ii,removeItem:Ai,clear:Gr,length:yr,key:_t,keys:Fr,dropInstance:Ji};function Wa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ne(W,te){var K=W.name+"/";return W.storeName!==te.storeName&&(K+=W.storeName+"/"),K}function J(){var W="_localforage_support_test";try{return localStorage.setItem(W,!0),localStorage.removeItem(W),!1}catch{return!0}}function ie(){return!J()||localStorage.length>0}function ve(W){var te=this,K={};if(W)for(var fe in W)K[fe]=W[fe];return K.keyPrefix=ne(W,te._defaultConfig),ie()?(te._dbInfo=K,K.serializer=Wt,f.resolve()):f.reject()}function ye(W){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo.keyPrefix,pe=localStorage.length-1;pe>=0;pe--){var oe=localStorage.key(pe);oe.indexOf(fe)===0&&localStorage.removeItem(oe)}});return d(K,W),K}function yt(W,te){var K=this;W=p(W);var fe=K.ready().then(function(){var pe=K._dbInfo,oe=localStorage.getItem(pe.keyPrefix+W);return oe&&(oe=pe.serializer.deserialize(oe)),oe});return d(fe,te),fe}function Ae(W,te){var K=this,fe=K.ready().then(function(){for(var pe=K._dbInfo,oe=pe.keyPrefix,Se=oe.length,De=localStorage.length,ze=1,He=0;He<De;He++){var Ze=localStorage.key(He);if(Ze.indexOf(oe)===0){var St=localStorage.getItem(Ze);if(St&&(St=pe.serializer.deserialize(St)),St=W(St,Ze.substring(Se),ze++),St!==void 0)return St}}});return d(fe,te),fe}function pt(W,te){var K=this,fe=K.ready().then(function(){var pe=K._dbInfo,oe;try{oe=localStorage.key(W)}catch{oe=null}return oe&&(oe=oe.substring(pe.keyPrefix.length)),oe});return d(fe,te),fe}function jt(W){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo,pe=localStorage.length,oe=[],Se=0;Se<pe;Se++){var De=localStorage.key(Se);De.indexOf(fe.keyPrefix)===0&&oe.push(De.substring(fe.keyPrefix.length))}return oe});return d(K,W),K}function At(W){var te=this,K=te.keys().then(function(fe){return fe.length});return d(K,W),K}function Ht(W,te){var K=this;W=p(W);var fe=K.ready().then(function(){var pe=K._dbInfo;localStorage.removeItem(pe.keyPrefix+W)});return d(fe,te),fe}function fn(W,te,K){var fe=this;W=p(W);var pe=fe.ready().then(function(){te===void 0&&(te=null);var oe=te;return new f(function(Se,De){var ze=fe._dbInfo;ze.serializer.serialize(te,function(He,Ze){if(Ze)De(Ze);else try{localStorage.setItem(ze.keyPrefix+W,He),Se(oe)}catch(St){(St.name==="QuotaExceededError"||St.name==="NS_ERROR_DOM_QUOTA_REACHED")&&De(St),De(St)}})})});return d(pe,K),pe}function Tr(W,te){if(te=m.apply(this,arguments),W=typeof W!="function"&&W||{},!W.name){var K=this.config();W.name=W.name||K.name,W.storeName=W.storeName||K.storeName}var fe=this,pe;return W.name?pe=new f(function(oe){W.storeName?oe(ne(W,fe._defaultConfig)):oe(W.name+"/")}).then(function(oe){for(var Se=localStorage.length-1;Se>=0;Se--){var De=localStorage.key(Se);De.indexOf(oe)===0&&localStorage.removeItem(De)}}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var zt={_driver:"localStorageWrapper",_initStorage:ve,_support:Wa(),iterate:Ae,getItem:yt,setItem:fn,removeItem:Ht,clear:ye,length:At,key:pt,keys:jt,dropInstance:Tr},pr=function(te,K){return te===K||typeof te=="number"&&typeof K=="number"&&isNaN(te)&&isNaN(K)},Xt=function(te,K){for(var fe=te.length,pe=0;pe<fe;){if(pr(te[pe],K))return!0;pe++}return!1},er=Array.isArray||function(W){return Object.prototype.toString.call(W)==="[object Array]"},si={},hs={},Vi={INDEXEDDB:Fe,WEBSQL:no,LOCALSTORAGE:zt},ma=[Vi.INDEXEDDB._driver,Vi.WEBSQL._driver,Vi.LOCALSTORAGE._driver],ro=["dropInstance"],_i=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ro),bt={description:"",driver:ma.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wn(W,te){W[te]=function(){var K=arguments;return W.ready().then(function(){return W[te].apply(W,K)})}}function jr(){for(var W=1;W<arguments.length;W++){var te=arguments[W];if(te)for(var K in te)te.hasOwnProperty(K)&&(er(te[K])?arguments[0][K]=te[K].slice():arguments[0][K]=te[K])}return arguments[0]}var Rs=function(){function W(te){o(this,W);for(var K in Vi)if(Vi.hasOwnProperty(K)){var fe=Vi[K],pe=fe._driver;this[K]=pe,si[pe]||this.defineDriver(fe)}this._defaultConfig=jr({},bt),this._config=jr({},this._defaultConfig,te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return W.prototype.config=function(K){if((typeof K>"u"?"undefined":s(K))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in K){if(fe==="storeName"&&(K[fe]=K[fe].replace(/\W/g,"_")),fe==="version"&&typeof K[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=K[fe]}return"driver"in K&&K.driver?this.setDriver(this._config.driver):!0}else return typeof K=="string"?this._config[K]:this._config},W.prototype.defineDriver=function(K,fe,pe){var oe=new f(function(Se,De){try{var ze=K._driver,He=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!K._driver){De(He);return}for(var Ze=_i.concat("_initStorage"),St=0,gn=Ze.length;St<gn;St++){var tr=Ze[St],ur=!Xt(ro,tr);if((ur||K[tr])&&typeof K[tr]!="function"){De(He);return}}var Oi=function(){for(var ly=function(H8){return function(){var v_=new Error("Method "+H8+" is not implemented by the current driver"),__=f.reject(v_);return d(__,arguments[arguments.length-1]),__}},qx=0,Wx=ro.length;qx<Wx;qx++){var Gx=ro[qx];K[Gx]||(K[Gx]=ly(Gx))}};Oi();var oi=function(ly){si[ze]&&console.info("Redefining LocalForage driver: "+ze),si[ze]=K,hs[ze]=ly,Se()};"_support"in K?K._support&&typeof K._support=="function"?K._support().then(oi,De):oi(!!K._support):oi(!0)}catch(Ya){De(Ya)}});return h(oe,fe,pe),oe},W.prototype.driver=function(){return this._driver||null},W.prototype.getDriver=function(K,fe,pe){var oe=si[K]?f.resolve(si[K]):f.reject(new Error("Driver not found."));return h(oe,fe,pe),oe},W.prototype.getSerializer=function(K){var fe=f.resolve(Wt);return h(fe,K),fe},W.prototype.ready=function(K){var fe=this,pe=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(pe,K,K),pe},W.prototype.setDriver=function(K,fe,pe){var oe=this;er(K)||(K=[K]);var Se=this._getSupportedDrivers(K);function De(){oe._config.driver=oe.driver()}function ze(St){return oe._extend(St),De(),oe._ready=oe._initStorage(oe._config),oe._ready}function He(St){return function(){var gn=0;function tr(){for(;gn<St.length;){var ur=St[gn];return gn++,oe._dbInfo=null,oe._ready=null,oe.getDriver(ur).then(ze).catch(tr)}De();var Oi=new Error("No available storage method found.");return oe._driverSet=f.reject(Oi),oe._driverSet}return tr()}}var Ze=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ze.then(function(){var St=Se[0];return oe._dbInfo=null,oe._ready=null,oe.getDriver(St).then(function(gn){oe._driver=gn._driver,De(),oe._wrapLibraryMethodsWithReady(),oe._initDriver=He(Se)})}).catch(function(){De();var St=new Error("No available storage method found.");return oe._driverSet=f.reject(St),oe._driverSet}),h(this._driverSet,fe,pe),this._driverSet},W.prototype.supports=function(K){return!!hs[K]},W.prototype._extend=function(K){jr(this,K)},W.prototype._getSupportedDrivers=function(K){for(var fe=[],pe=0,oe=K.length;pe<oe;pe++){var Se=K[pe];this.supports(Se)&&fe.push(Se)}return fe},W.prototype._wrapLibraryMethodsWithReady=function(){for(var K=0,fe=_i.length;K<fe;K++)wn(this,_i[K])},W.prototype.createInstance=function(K){return new W(K)},W}(),Ga=new Rs;r.exports=Ga},{3:3}]},{},[4])(4)})})(QFe);var pKt=QFe.exports;const XH=El(pKt);class JFe{constructor(t){zu(this,"engine");zu(this,"connected",!1);zu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function ow(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class Vh extends JFe{constructor(){super("firebase");zu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");zu(this,"firestore");zu(this,"collectionPrefix","prod-");zu(this,"studyCollection");zu(this,"studyId","");zu(this,"localForage",XH.createInstance({name:"currentParticipantId"}));zu(this,"localProvenanceCopy",{});zu(this,"localWindowEvents",{});const n=jQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=TLe(n);this.firestore=uYt(r,{});try{cKt(r,{provider:new KZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await lYt(this.firestore);const n=await ms(this.firestore,".info/connected");await RS(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=X3();if(!i.currentUser&&(await Lzt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await ow(JSON.stringify(r));this.studyCollection=py(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const a=ms(this.studyCollection,"configs"),u=py(a,"configs"),l=ms(u,o);return s&&s!==o&&(this._deleteFromFirebaseStorage("","sequenceArray"),await this.clearCurrentParticipantId()),await this.localForage.setItem("currentConfigHash",o),await $l(l,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=ms(this.studyCollection,this.currentParticipantId),a=(await RS(o)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([c,f])=>{a!==null&&(f===void 0||f.length===0?a.answers[c].windowEvents=[]:a.answers[c].windowEvents=f)}),a)return a;const u=await ow(JSON.stringify(r)),l={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await $l(o,l),l}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ms(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=ms(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await $l(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=ms(this.studyCollection,"sequenceAssignment"),i=py(r,"sequenceAssignment"),s=ms(i,this.currentParticipantId),o=V0e(i,bYt("participantId","==","")),a=await NS(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await CYt(h.ref),await $l(s,{participantId:this.currentParticipantId,timestamp:p})}else await $l(s,{participantId:this.currentParticipantId,timestamp:IYt()});const u=V0e(i,wYt("timestamp","asc")),f=(await NS(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await NS(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let n=null;if(this.currentParticipantId!==null){const r=ms(this.studyCollection,this.currentParticipantId);if(n=(await RS(r)).data(),n!==null){const i=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),s=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents");Object.entries(n.answers).forEach(([o,a])=>{a!==void 0&&(a.provenanceGraph=i[o],a.windowEvents=s[o])})}}return n}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ms(this.studyCollection),s=i.id;await this.localForage.setItem("currentParticipantId",s),this.currentParticipantId=s;let o=null;if(this.currentParticipantId!==null&&(o=(await RS(i)).data()),!o){const a=await ow(JSON.stringify(n)),u={participantId:s,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await $l(i,u),o=u}return o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=ms(this.studyCollection,this.currentParticipantId);return await $l(r,{completed:!0},{merge:!0}),n.completed=!0,!0}async getUserManagementData(n){const r=py(this.firestore,"user-management"),i=await NS(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await $l(ms(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await $l(ms(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await $l(ms(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await $l(ms(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await $l(ms(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=py(this.firestore,`${this.collectionPrefix}${n}`),i=await NS(r),s=[],o=i.docs.map(async a=>{if(a.id==="config"||a.id==="sequenceArray")return;const u=a.data(),l=await this._getFromFirebaseStorage(u.participantId,"provenance"),c=await this._getFromFirebaseStorage(u.participantId,"windowEvents");u.answers=Object.fromEntries(Object.entries(u.answers).map(([f,d])=>{if(d===void 0)return[f,d];const h=l[f],p=c[f];return[f,{...d,provenanceGraph:h,windowEvents:p}]})),s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=py(this.firestore,`${this.collectionPrefix}${n}`),s=ms(i,r),o=(await RS(s)).data();try{if(!o||o.rejected)return;await W0e(s,{rejected:!0});const a=ms(i,"sequenceAssignment"),u=py(a,"sequenceAssignment"),l=ms(u,r);await W0e(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=FB(),s=LB(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await hHt(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=FB(),o=LB(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await dHt(o,a)}}async _deleteFromFirebaseStorage(n,r){const i=FB(),s=LB(i,`${this.studyId}/${n}_${r}`);await pHt(s)}}const ZFe=C.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),xx=()=>C.useContext(ZFe);function mKt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=C.useState(t),[o,a]=C.useState(!1),{storageEngine:u}=Ru(),l=async()=>{const h=X3();try{await Hzt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;C.useEffect(()=>{s(t);let h;if(u instanceof Vh)try{h=X3()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof Vh){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=Vzt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=C.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return I.jsx(ZFe.Provider,{value:d,children:i.determiningStatus?I.jsx(cm,{visible:!0}):e})}function gKt(){const{config:e,metadata:t}=Cf(y=>y),n=ch(),r=lh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=uh(),{storageEngine:o}=Ru(),a=wc();xx();const u=n.length-1,l=a/u*100,[c,f]=C.useState(!1),d=e==null?void 0:e.uiConfig.logoPath,h=e==null?void 0:e.uiConfig.withProgressBar,p=f4(),m=wKe(`/${p}`);function g(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=m}).catch(y=>{console.error(y)})}return I.jsx(gY,{height:"70",p:"md",children:I.jsxs(pu,{mt:-7,align:"center",children:[I.jsx(pu.Col,{span:4,children:I.jsxs(Ur,{align:"center",children:[I.jsx(jv,{maw:40,src:`${mc}${d}`,alt:"Study Logo"}),I.jsx(I1,{w:"md"}),I.jsx(Wo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e==null?void 0:e.studyMetadata.title})]})}),I.jsx(pu.Col,{span:4,children:h&&I.jsx(tIe,{radius:"md",size:"lg",value:l})}),I.jsx(pu.Col,{span:4,children:I.jsxs(Co,{noWrap:!0,position:"right",children:[I.jsx(A1,{multiline:!0,withArrow:!0,arrowSize:6,width:300,label:"This is a demo version of the study, were not collecting any data. Navigate the study via the study browser on the right.",children:I.jsx(T1,{size:"lg",color:"orange",children:"Demo Mode"})}),(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&I.jsx(Xr,{variant:"outline",onClick:()=>r(i()),children:"Help"}),I.jsxs(zl,{shadow:"md",width:200,zIndex:1,opened:c,onChange:f,children:[I.jsx(zl.Target,{children:I.jsx(Tw,{size:"lg",className:"studyBrowserMenuDropdown",children:I.jsx(lgt,{})})}),I.jsxs(zl.Dropdown,{children:[I.jsx(zl.Item,{icon:I.jsx(bfe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),I.jsx(zl.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:I.jsx(dgt,{size:14}),children:"Contact"}),I.jsx(zl.Item,{icon:I.jsx(bfe,{size:14}),onClick:()=>g(),children:"Next Participant"})]})]})]})})]})})}function yKt(){var l;const e=(l=n0())==null?void 0:l.uiConfig.sidebar,t=n0(),n=wc(),r=ch()[n],i=t.components[r],s=C.useMemo(()=>{var c;return i?pF(i)&&t.baseComponents?EK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i,t.baseComponents]),o=xK(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?I.jsxs(i2,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&I.jsx(i2.Section,{bg:"gray.3",p:"xl",children:I.jsxs(ct,{c:"gray.9",children:[I.jsx(ct,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),I.jsx(Na,{text:a})]})}),I.jsx(i2.Section,{p:"xl",children:I.jsx(UD,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):I.jsx(UD,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function vKt(){const{showHelpText:e,config:t}=Cf(o=>o),n=lh(),{toggleShowHelpText:r}=uh(),[i,s]=C.useState("");return C.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${mc}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),I.jsx(vp,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:I.jsx(Na,{text:i})})}function _Kt(){const{alertModal:e}=Cf(o=>o),{setAlertModal:t}=uh(),n=lh(),[r,i]=C.useState(e.show),s=C.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return C.useEffect(()=>i(e.show),[e.show]),I.jsx(vp,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:I.jsxs(ZSe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:I.jsx(Jmt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[I.jsx(ct,{my:"md",children:e.message}),I.jsx(st,{style:{float:"right"},color:"red",children:I.jsx(Xr,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function bKt(){const e=C.useRef([]),n=n0().uiConfig.windowEventDebounceTime??100;return C.useEffect(()=>{const r=Vf(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=Vf(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=Vf(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=Vf(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=Vf(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=Vf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=Vf(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=Vf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=Vf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),I.jsx(hke.Provider,{value:e,children:I.jsxs(JA,{navbar:I.jsx(yKt,{}),aside:I.jsx(wBt,{}),header:I.jsx(gKt,{}),children:[I.jsx(vKt,{}),I.jsx(_Kt,{}),I.jsx(RKe,{})]})})}function wKt(e,t=!1){return typeof e=="number"?Z0e(e,t):Z0e(e.length,t).map(r=>r.map(i=>e[i]))}function Z0e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function e5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=e5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function EKt(e,t){const n=O1(e);return e5e(n,t,"root")}function t5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&t5e(s,t,i,o)})}function xKt(e){const t=[];return t5e(e,t,"",0),t}function eye(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return wKt(i.sort(()=>.5-Math.random()),!0)}function SKt(e){const n=xKt(e.sequence).map(s=>({[s]:eye(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=EKt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=eye(e,o))})}),i}async function TKt(e,t){const n=await(await fetch(`${mc}${e}`)).text();return fLe(n,t)}async function XZ(e,t){const n=t.configsList.find(r=>WY(r)===e);if(n){const r=t.configs[n];return await TKt(`${r.path}`,n)}return null}function CKt(){return I.jsx(lm,{pt:100,children:I.jsx(Dp,{children:I.jsxs(Wo,{order:3,children:[I.jsx(ct,{span:!0,c:"orange",children:"Study ID"})," ","not Found, please check valid Study ID on your global config, or contact the administrator."]})})})}function AKt({globalConfig:e}){const t=f4(),[n,r]=C.useState(null),i=e.configsList.find(p=>WY(p)===t),s=xx();C.useEffect(()=>{XZ(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=C.useState([]),[u,l]=C.useState(null),{storageEngine:c}=Ru(),[f]=ZG();C.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await SKt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(x=>""),_=v instanceof Response?await v.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:_.ip},E=await c.initializeParticipantSession(y,n,b,g),w=await Nxt(t,n,E.sequence,b,E.answers,s.user.isAdmin);l(w),a([{element:I.jsx(bKt,{}),children:[{path:"/",element:I.jsx(pH,{to:"0",replace:!0})},{path:"/:index",element:n.errors?I.jsxs(I.Fragment,{children:[I.jsx(Wo,{order:2,mb:8,children:"Error loading config"}),I.jsx(kPe,{errors:n.errors})]}):I.jsx(vBt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=Lxe(o),h=!d||!u?I.jsx(cm,{visible:!0}):I.jsx(dke.Provider,{value:u,children:I.jsx(OEt,{store:u.store,children:d})});return i?h:I.jsx(CKt,{})}function N2({studyIds:e}){const t=im(),{studyId:n}=xw(),r=YA(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Ru(),{user:o,logout:a}=xx(),[u,l]=C.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:I.jsx(cgt,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:I.jsx(igt,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:I.jsx(ggt,{}),href:"/settings",needAdmin:!0}];return I.jsx(gY,{height:70,p:"md",children:I.jsxs(pu,{mt:-7,align:"center",children:[I.jsx(pu.Col,{span:6,children:I.jsxs(Ur,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),sx:{cursor:"pointer"},children:[I.jsx(jv,{maw:40,src:`${mc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),I.jsx(I1,{w:"md"}),I.jsx(Wo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),I.jsx(pu.Col,{span:6,children:I.jsxs(Ur,{justify:"flex-end",direction:"row",children:[c&&I.jsx(N6,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),I.jsx(z2e,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),I.jsx(OCe,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:I.jsxs(Ur,{direction:"column",mt:20,children:[I.jsx(ct,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?I.jsx(Xr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:I.jsx(Xr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),I.jsxs(st,{ml:10,children:[I.jsx(rN,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?I.jsx(ct,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):I.jsx(ct,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function IKt({cellData:e}){return I.jsx("td",{children:I.jsx(rp,{miw:100,children:Object.entries(e.answer).map(([t,n])=>I.jsxs(st,{children:[I.jsxs(ct,{fw:700,span:!0,children:[" ",`${t}: `]}),I.jsx(ct,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function tye({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return I.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function OKt(e){const{metaData:t}=e;return I.jsx("td",{children:I.jsx(CIe,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:I.jsxs(rp,{spacing:"xs",children:[I.jsxs(st,{children:["IP:"," ",t.ip]}),I.jsxs(st,{children:["Language:"," ",t.language]}),I.jsxs(st,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),I.jsxs(st,{children:["User Agent:"," ",t.userAgent]})]})})})}function PKt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=Ru(),{studyId:s}=xw(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),r())},[a,u]=C.useState([]),[l,c]=C.useState(!1),f=()=>Dmt({title:"Confirm rejecting participants",children:I.jsxs(ct,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",I.jsx(ct,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=fke(n.sequence),p=[I.jsx("th",{children:I.jsx(Ur,{justify:"center",children:I.jsx(Iw,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),I.jsx("th",{children:"ID"},"ID"),I.jsx("th",{children:"Status"},"status"),I.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[I.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),I.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),I.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>I.jsxs("tr",{children:[I.jsx("td",{children:I.jsx(Ur,{justify:"center",children:I.jsx(Iw,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),I.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),I.jsx("td",{children:I.jsxs(Ur,{direction:"row",align:"center",children:[g.rejected?I.jsx(A1,{label:"Rejected",children:I.jsx(QIe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?I.jsx(A1,{label:"Completed",children:I.jsx(agt,{size:16,color:"teal",style:{marginBottom:-3}})}):I.jsx(A1,{label:"In Progress",children:I.jsx(pgt,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&I.jsxs(ct,{size:"sm",mb:-1,ml:4,children:[Object.entries(g.answers).length/(Lp(g.sequence).length-1)*100,"%"]})]})}),g.metadata?I.jsx(OKt,{metaData:g.metadata}):I.jsx("td",{children:"N/A"}),h.map(y=>{const v=lke(g.sequence,y.orderPath),_=v&&Object.entries(g.answers).sort((b,E)=>{const w=parseInt(b[0].slice(b[0].lastIndexOf("_")+1),10),x=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10);return w-x}).filter(([b])=>{const E=b.slice(0,b.lastIndexOf("_")),w=parseInt(b.slice(b.lastIndexOf("_")+1),10);return E===y.componentName&&w<=v[0].lastIndex&&w>=v[0].firstIndex});return _!==null&&_.length>=y.timesSeenInBlock+1?I.jsxs(N.Fragment,{children:[I.jsx(IKt,{cellData:_[y.timesSeenInBlock][1]}),I.jsx(tye,{cellData:_[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):I.jsxs(N.Fragment,{children:[I.jsx("td",{children:"N/A"}),I.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),I.jsx(tye,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?I.jsxs(I.Fragment,{children:[I.jsx(cm,{visible:l,overlayBlur:2}),I.jsxs(Ur,{justify:"space-between",mb:8,p:8,children:[I.jsx(Co,{children:I.jsx(N6,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,icon:I.jsx(mgt,{size:14}),onChange:g=>g&&d(g)})}),I.jsx(Co,{children:I.jsx(Xr,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),I.jsxs(VY,{striped:!0,withBorder:!0,children:[I.jsx("thead",{children:I.jsx("tr",{children:p})}),I.jsx("tbody",{children:m})]})]}):I.jsx(Ur,{justify:"center",align:"center",style:{height:"100%"},children:I.jsx(ct,{children:"No data available"})})}function kKt(e){const{globalConfig:t}=e,{studyId:n}=xw(),[r,i]=C.useState([]),[s,o]=C.useState(void 0),[a,u]=C.useState(!1),{storageEngine:l}=Ru(),c=im(),{tab:f}=xw(),d=C.useCallback(async()=>{if(u(!0),n){const m=await XZ(n,t);if(!m||!l)return;await l.initializeStudyDb(n,m);const g=await l.getAllParticipantsData();i(g),o(m),u(!1)}},[t,l,n]);C.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=C.useMemo(()=>{const m=r.filter(y=>y.completed),g=r.filter(y=>!y.completed);return[m,g]},[r]);return I.jsxs(JA,{children:[I.jsx(N2,{studyIds:e.globalConfig.configsList}),I.jsxs(lm,{fluid:!0,style:{height:"100%"},children:[I.jsx(cm,{visible:a}),I.jsxs(Ll,{variant:"outline",value:f,onTabChange:m=>c(`./../${m}`),style:{height:"100%"},children:[I.jsxs(Ll.List,{children:[I.jsx(Ll.Tab,{value:"table",icon:I.jsx(ygt,{size:16}),children:"Table View"}),I.jsx(Ll.Tab,{value:"stats",icon:I.jsx(sgt,{size:16}),children:"Trial Stats"}),I.jsx(Ll.Tab,{value:"settings",icon:I.jsx(hgt,{size:16}),children:"Individual Replay"})]}),I.jsx(Ll.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&I.jsx(PKt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),I.jsx(Ll.Panel,{value:"stats",pt:"xs",children:"statsboard"}),I.jsx(Ll.Panel,{value:"settings",pt:"xs",children:"Settings tab content"})]})]})]})}function JB({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=xx(),{storageEngine:i}=Ru();return C.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?I.jsx(cm,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?I.jsx(JG,{to:"/login"}):I.jsx(I.Fragment,{children:e})}async function n5e(e,t,n){if(e instanceof Vh){t(!0);const r=new Jh,i=X3();try{await fUt(i,r)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function $Kt(){const{user:e}=xx(),[t,n]=C.useState(null),[r,i]=C.useState(!1),{storageEngine:s}=Ru();return C.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?I.jsx(JG,{to:"/"}):I.jsx(lm,{children:I.jsx(k6,{p:"lg",children:I.jsxs(Ur,{align:"center",direction:"column",justify:"center",children:[I.jsx(jv,{maw:200,mt:50,mb:100,src:`${mc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),I.jsxs(I.Fragment,{children:[I.jsx(ct,{mb:20,children:"To access admin settings, please sign in using your Google account."}),I.jsx(Xr,{onClick:()=>n5e(s,i,n),leftIcon:I.jsx(rgt,{}),variant:"filled",children:"Sign In With Google"})]}),t?I.jsx(T1,{size:"lg",color:"red",mt:30,children:t}):null,I.jsx(cm,{visible:r})]})})})}function RKt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function r5e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function NKt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=RKt(i,t),o=r5e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var i5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(du,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var D=["th","st","nd","rd"],L=R%100;return"["+R+(D[(L-20)%10]||D[L]||D[0])+"]"}},_=function(R,D,L){var V=String(R);return!V||V.length>=D?R:""+Array(D+1-V.length).join(L)+R},b={s:_,z:function(R){var D=-R.utcOffset(),L=Math.abs(D),V=Math.floor(L/60),B=L%60;return(D<=0?"+":"-")+_(V,2,"0")+":"+_(B,2,"0")},m:function R(D,L){if(D.date()<L.date())return-R(L,D);var V=12*(L.year()-D.year())+(L.month()-D.month()),B=D.clone().add(V,f),H=L-B<0,U=D.clone().add(V+(H?-1:1),f);return+(-(V+(L-B)/(H?B-U:U-B))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},E="en",w={};w[E]=v;var x="$isDayjsObject",S=function(R){return R instanceof z||!(!R||!R[x])},P=function R(D,L,V){var B;if(!D)return E;if(typeof D=="string"){var H=D.toLowerCase();w[H]&&(B=H),L&&(w[H]=L,B=H);var U=D.split("-");if(!B&&U.length>1)return R(U[0])}else{var k=D.name;w[k]=D,B=k}return!V&&B&&(E=B),B||!V&&E},A=function(R,D){if(S(R))return R.clone();var L=typeof D=="object"?D:{};return L.date=R,L.args=arguments,new z(L)},O=b;O.l=P,O.i=S,O.w=function(R,D){return A(R,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var z=function(){function R(L){this.$L=P(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[x]=!0}var D=R.prototype;return D.parse=function(L){this.$d=function(V){var B=V.date,H=V.utc;if(B===null)return new Date(NaN);if(O.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var U=B.match(g);if(U){var k=U[2]-1||0,$=(U[7]||"0").substring(0,3);return H?new Date(Date.UTC(U[1],k,U[3]||1,U[4]||0,U[5]||0,U[6]||0,$)):new Date(U[1],k,U[3]||1,U[4]||0,U[5]||0,U[6]||0,$)}}return new Date(B)}(L),this.init()},D.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},D.$utils=function(){return O},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(L,V){var B=A(L);return this.startOf(V)<=B&&B<=this.endOf(V)},D.isAfter=function(L,V){return A(L)<this.startOf(V)},D.isBefore=function(L,V){return this.endOf(V)<A(L)},D.$g=function(L,V,B){return O.u(L)?this[V]:this.set(B,L)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(L,V){var B=this,H=!!O.u(V)||V,U=O.p(L),k=function(ce,le){var ge=O.w(B.$u?Date.UTC(B.$y,le,ce):new Date(B.$y,le,ce),B);return H?ge:ge.endOf(l)},$=function(ce,le){return O.w(B.toDate()[ce].apply(B.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(le)),B)},q=this.$W,F=this.$M,j=this.$D,Q="set"+(this.$u?"UTC":"");switch(U){case h:return H?k(1,0):k(31,11);case f:return H?k(1,F):k(0,F+1);case c:var se=this.$locale().weekStart||0,ae=(q<se?q+7:q)-se;return k(H?j-ae:j+(6-ae),F);case l:case p:return $(Q+"Hours",0);case u:return $(Q+"Minutes",1);case a:return $(Q+"Seconds",2);case o:return $(Q+"Milliseconds",3);default:return this.clone()}},D.endOf=function(L){return this.startOf(L,!1)},D.$set=function(L,V){var B,H=O.p(L),U="set"+(this.$u?"UTC":""),k=(B={},B[l]=U+"Date",B[p]=U+"Date",B[f]=U+"Month",B[h]=U+"FullYear",B[u]=U+"Hours",B[a]=U+"Minutes",B[o]=U+"Seconds",B[s]=U+"Milliseconds",B)[H],$=H===l?this.$D+(V-this.$W):V;if(H===f||H===h){var q=this.clone().set(p,1);q.$d[k]($),q.init(),this.$d=q.set(p,Math.min(this.$D,q.daysInMonth())).$d}else k&&this.$d[k]($);return this.init(),this},D.set=function(L,V){return this.clone().$set(L,V)},D.get=function(L){return this[O.p(L)]()},D.add=function(L,V){var B,H=this;L=Number(L);var U=O.p(V),k=function(F){var j=A(H);return O.w(j.date(j.date()+Math.round(F*L)),H)};if(U===f)return this.set(f,this.$M+L);if(U===h)return this.set(h,this.$y+L);if(U===l)return k(1);if(U===c)return k(7);var $=(B={},B[a]=r,B[u]=i,B[o]=n,B)[U]||1,q=this.$d.getTime()+L*$;return O.w(q,this)},D.subtract=function(L,V){return this.add(-1*L,V)},D.format=function(L){var V=this,B=this.$locale();if(!this.isValid())return B.invalidDate||m;var H=L||"YYYY-MM-DDTHH:mm:ssZ",U=O.z(this),k=this.$H,$=this.$m,q=this.$M,F=B.weekdays,j=B.months,Q=B.meridiem,se=function(le,ge,ue,Fe){return le&&(le[ge]||le(V,H))||ue[ge].slice(0,Fe)},ae=function(le){return O.s(k%12||12,le,"0")},ce=Q||function(le,ge,ue){var Fe=le<12?"AM":"PM";return ue?Fe.toLowerCase():Fe};return H.replace(y,function(le,ge){return ge||function(ue){switch(ue){case"YY":return String(V.$y).slice(-2);case"YYYY":return O.s(V.$y,4,"0");case"M":return q+1;case"MM":return O.s(q+1,2,"0");case"MMM":return se(B.monthsShort,q,j,3);case"MMMM":return se(j,q);case"D":return V.$D;case"DD":return O.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return se(B.weekdaysMin,V.$W,F,2);case"ddd":return se(B.weekdaysShort,V.$W,F,3);case"dddd":return F[V.$W];case"H":return String(k);case"HH":return O.s(k,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return ce(k,$,!0);case"A":return ce(k,$,!1);case"m":return String($);case"mm":return O.s($,2,"0");case"s":return String(V.$s);case"ss":return O.s(V.$s,2,"0");case"SSS":return O.s(V.$ms,3,"0");case"Z":return U}return null}(le)||U.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(L,V,B){var H,U=this,k=O.p(V),$=A(L),q=($.utcOffset()-this.utcOffset())*r,F=this-$,j=function(){return O.m(U,$)};switch(k){case h:H=j()/12;break;case f:H=j();break;case d:H=j()/3;break;case c:H=(F-q)/6048e5;break;case l:H=(F-q)/864e5;break;case u:H=F/i;break;case a:H=F/r;break;case o:H=F/n;break;default:H=F}return B?H:O.a(H)},D.daysInMonth=function(){return this.endOf(f).$D},D.$locale=function(){return w[this.$L]},D.locale=function(L,V){if(!L)return this.$L;var B=this.clone(),H=P(L,V,!0);return H&&(B.$L=H),B},D.clone=function(){return O.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},R}(),M=z.prototype;return A.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(R){M[R[1]]=function(D){return this.$g(D,R[0],R[1])}}),A.extend=function(R,D){return R.$i||(R(D,z,A),R.$i=!0),A},A.locale=P,A.isDayjs=S,A.unix=function(R){return A(1e3*R)},A.en=w[E],A.Ls=w,A.p={},A})})(i5e);var DKt=i5e.exports;const xn=El(DKt);function MKt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(xn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function LKt(e,t="monday",n="dd"){const r=[],i=r5e(new Date,t);for(let s=0;s<7;s+=1)r.push(xn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function s5e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Jp(e,t){return s5e(e,t)&&e.getDate()===t.getDate()}function FKt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var jKt=Object.defineProperty,BKt=Object.defineProperties,zKt=Object.getOwnPropertyDescriptors,lM=Object.getOwnPropertySymbols,o5e=Object.prototype.hasOwnProperty,a5e=Object.prototype.propertyIsEnumerable,nye=(e,t,n)=>t in e?jKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rye=(e,t)=>{for(var n in t||(t={}))o5e.call(t,n)&&nye(e,n,t[n]);if(lM)for(var n of lM(t))a5e.call(t,n)&&nye(e,n,t[n]);return e},UKt=(e,t)=>BKt(e,zKt(t)),VKt=(e,t)=>{var n={};for(var r in e)o5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lM)for(var r of lM(e))t.indexOf(r)<0&&a5e.call(e,r)&&(n[r]=e[r]);return n};function QH(e){var t=e,{direction:n,style:r}=t,i=VKt(t,["direction","style"]);const s=fs();return N.createElement("svg",rye({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:UKt(rye({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),N.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}QH.displayName="@mantine/dates/ArrowIcon";var HKt=Object.defineProperty,qKt=Object.defineProperties,WKt=Object.getOwnPropertyDescriptors,iye=Object.getOwnPropertySymbols,GKt=Object.prototype.hasOwnProperty,YKt=Object.prototype.propertyIsEnumerable,sye=(e,t,n)=>t in e?HKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KKt=(e,t)=>{for(var n in t||(t={}))GKt.call(t,n)&&sye(e,n,t[n]);if(iye)for(var n of iye(t))YKt.call(t,n)&&sye(e,n,t[n]);return e},XKt=(e,t)=>qKt(e,WKt(t));const ZB={xs:32,sm:40,md:44,lg:50,xl:54};var QKt=lt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:ZB}),height:e.fn.size({size:t,sizes:ZB}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:XKt(KKt({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:ZB}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),JKt=Object.defineProperty,cM=Object.getOwnPropertySymbols,u5e=Object.prototype.hasOwnProperty,l5e=Object.prototype.propertyIsEnumerable,oye=(e,t,n)=>t in e?JKt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZKt=(e,t)=>{for(var n in t||(t={}))u5e.call(t,n)&&oye(e,n,t[n]);if(cM)for(var n of cM(t))l5e.call(t,n)&&oye(e,n,t[n]);return e},eXt=(e,t)=>{var n={};for(var r in e)u5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cM)for(var r of cM(e))t.indexOf(r)<0&&l5e.call(e,r)&&(n[r]=e[r]);return n};const tXt={xs:12,sm:14,md:18,lg:22,xl:28};function ZF(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,b=eXt(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:E,cx:w,theme:x}=QKt({size:c},{classNames:f,styles:d,unstyled:v,name:h}),S=x.fn.size({size:c,sizes:tXt});return N.createElement("div",ZKt({className:w(E.calendarHeader,a)},b),N.createElement(Tw,{className:E.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:P=>y&&P.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},N.createElement(QH,{direction:"left",width:S,height:S})),N.createElement(sm,{unstyled:v,className:E.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:P=>y&&P.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&N.createElement(TAe,{error:!1,size:c,className:E.calendarHeaderLevelIcon})),N.createElement(Tw,{className:E.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:P=>y&&P.preventDefault(),"data-mantine-stop-propagation":_||void 0},N.createElement(QH,{direction:"right",width:S,height:S})))}ZF.displayName="@mantine/dates/CalendarHeader";function z$(e,t){return xn(new Date(e,1,1)).format(t)}var nXt=Object.defineProperty,rXt=Object.defineProperties,iXt=Object.getOwnPropertyDescriptors,aye=Object.getOwnPropertySymbols,sXt=Object.prototype.hasOwnProperty,oXt=Object.prototype.propertyIsEnumerable,uye=(e,t,n)=>t in e?nXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,e7=(e,t)=>{for(var n in t||(t={}))sXt.call(t,n)&&uye(e,n,t[n]);if(aye)for(var n of aye(t))oXt.call(t,n)&&uye(e,n,t[n]);return e},aXt=(e,t)=>rXt(e,iXt(t));const uXt={xs:32,sm:40,md:46,lg:52,xl:56};var lXt=lt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:aXt(e7({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:uXt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e7({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:e7({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),cXt=Object.defineProperty,fM=Object.getOwnPropertySymbols,c5e=Object.prototype.hasOwnProperty,f5e=Object.prototype.propertyIsEnumerable,lye=(e,t,n)=>t in e?cXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fXt=(e,t)=>{for(var n in t||(t={}))c5e.call(t,n)&&lye(e,n,t[n]);if(fM)for(var n of fM(t))f5e.call(t,n)&&lye(e,n,t[n]);return e},dXt=(e,t)=>{var n={};for(var r in e)c5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fM)for(var r of fM(e))t.indexOf(r)<0&&f5e.call(e,r)&&(n[r]=e[r]);return n};function d5e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=dXt(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=lXt({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[b,E]=C.useState(s),w=FKt(b),x=w.map(S=>N.createElement(sm,{key:S,unstyled:p,onClick:()=>o(S),disabled:S<u||S>l,onMouseDown:P=>h&&P.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:S===s})},z$(S,m)));return N.createElement("div",fXt({className:_(v.yearPicker,n)},y),N.createElement(ZF,{unstyled:p,label:`${z$(w[0],m)}  ${z$(w[w.length-1],m)}`,hasPrevious:typeof u=="number"?u<w[0]:!0,hasNext:typeof l=="number"?l>w[w.length-1]:!0,onNext:()=>E(S=>S+10),onPrevious:()=>E(S=>S-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),N.createElement("div",{className:v.yearPickerControls},x))}d5e.displayName="@mantine/dates/YearPicker";function JH({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=xn(e).endOf("month"),o=xn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var hXt=Object.defineProperty,pXt=Object.defineProperties,mXt=Object.getOwnPropertyDescriptors,cye=Object.getOwnPropertySymbols,gXt=Object.prototype.hasOwnProperty,yXt=Object.prototype.propertyIsEnumerable,fye=(e,t,n)=>t in e?hXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t7=(e,t)=>{for(var n in t||(t={}))gXt.call(t,n)&&fye(e,n,t[n]);if(cye)for(var n of cye(t))yXt.call(t,n)&&fye(e,n,t[n]);return e},vXt=(e,t)=>pXt(e,mXt(t));const _Xt={xs:32,sm:40,md:46,lg:52,xl:56};var bXt=lt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:vXt(t7({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:_Xt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":t7({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:t7({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),wXt=Object.defineProperty,dM=Object.getOwnPropertySymbols,h5e=Object.prototype.hasOwnProperty,p5e=Object.prototype.propertyIsEnumerable,dye=(e,t,n)=>t in e?wXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EXt=(e,t)=>{for(var n in t||(t={}))h5e.call(t,n)&&dye(e,n,t[n]);if(dM)for(var n of dM(t))p5e.call(t,n)&&dye(e,n,t[n]);return e},xXt=(e,t)=>{var n={};for(var r in e)h5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dM)for(var r of dM(e))t.indexOf(r)<0&&p5e.call(e,r)&&(n[r]=e[r]);return n};function m5e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:b}=t,E=xXt(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:w,cx:x}=bXt({size:f},{classNames:i,styles:r,unstyled:v,name:p}),S=MKt(a),P=d instanceof Date?d.getFullYear():void 0,A=h instanceof Date?h.getFullYear():void 0,O=S.map((z,M)=>N.createElement(sm,{key:z,unstyled:v,onClick:()=>o(M),className:x(w.monthPickerControl,{[w.monthPickerControlActive]:M===s.month&&u===s.year}),disabled:!JH({date:new Date(u,M),minDate:d,maxDate:h}),onMouseDown:R=>y&&R.preventDefault(),"data-mantine-stop-propagation":b||void 0},z));return N.createElement("div",EXt({className:x(w.monthPicker,n)},E),N.createElement(ZF,{label:z$(u,_),hasNext:typeof A=="number"?u<A:!0,hasPrevious:typeof P=="number"?u>P:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:b}),N.createElement("div",{className:w.monthPickerControls},O))}m5e.displayName="@mantine/dates/MonthPicker";function SXt({month:e,locale:t,format:n}){return lg(xn(e).locale(t).format(n))}function TXt({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function CXt({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var AXt=Object.defineProperty,IXt=Object.defineProperties,OXt=Object.getOwnPropertyDescriptors,hye=Object.getOwnPropertySymbols,PXt=Object.prototype.hasOwnProperty,kXt=Object.prototype.propertyIsEnumerable,pye=(e,t,n)=>t in e?AXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n7=(e,t)=>{for(var n in t||(t={}))PXt.call(t,n)&&pye(e,n,t[n]);if(hye)for(var n of hye(t))kXt.call(t,n)&&pye(e,n,t[n]);return e},mye=(e,t)=>IXt(e,OXt(t));const U$={xs:34,sm:38,md:46,lg:58,xl:66};var $Xt=lt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:mye(n7(mye(n7(n7({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:U$}),height:e.fn.size({size:t,sizes:U$}),lineHeight:`${e.fn.size({size:t,sizes:U$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),RXt=Object.defineProperty,NXt=Object.defineProperties,DXt=Object.getOwnPropertyDescriptors,hM=Object.getOwnPropertySymbols,g5e=Object.prototype.hasOwnProperty,y5e=Object.prototype.propertyIsEnumerable,gye=(e,t,n)=>t in e?RXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MXt=(e,t)=>{for(var n in t||(t={}))g5e.call(t,n)&&gye(e,n,t[n]);if(hM)for(var n of hM(t))y5e.call(t,n)&&gye(e,n,t[n]);return e},LXt=(e,t)=>NXt(e,DXt(t)),FXt=(e,t)=>{var n={};for(var r in e)g5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hM)for(var r of hM(e))t.indexOf(r)<0&&y5e.call(e,r)&&(n[r]=e[r]);return n};const v5e=C.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:b,renderDay:E,unstyled:w,disabled:x,stopPropagation:S}=n,P=FXt(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:A,cx:O}=$Xt({size:g,fullWidth:y,hideOutsideDates:b},{classNames:l,styles:c,unstyled:w,name:p});return N.createElement("button",LXt(MXt({},P),{type:"button",ref:t,disabled:x,onMouseEnter:z=>u(i,z),tabIndex:TXt({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":CXt({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":S||void 0,"data-outside":a&&!x||void 0,"data-weekend":o&&!x||void 0,"data-selected":s&&!x||void 0,"data-in-range":m&&!x||void 0,"data-first-in-range":d&&!x||void 0,"data-last-in-range":h&&!x||void 0,className:O(A.day,r)}),typeof E=="function"?E(i):i.getDate())});v5e.displayName="@mantine/core/Day";function jXt(e,t=[0,6]){return t.includes(e.getDay())}function BXt(e,t){return!s5e(e,t)}function zXt({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&xn(t).isBefore(i,"day"),a=e instanceof Date&&xn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function UXt(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[xn(t[0]).subtract(1,"day"),xn(t[1]).add(1,"day")],i=n&&Jp(e,t[0]),s=n&&Jp(e,t[1]),o=n&&xn(e).isAfter(r[0],"day")&&xn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function yye({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=BXt(e,t),f=n&&(Array.isArray(s)?s.some(g=>Jp(g,e)):Jp(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=UXt(e,u);return{disabled:zXt({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:jXt(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var VXt=Object.defineProperty,HXt=Object.defineProperties,qXt=Object.getOwnPropertyDescriptors,vye=Object.getOwnPropertySymbols,WXt=Object.prototype.hasOwnProperty,GXt=Object.prototype.propertyIsEnumerable,_ye=(e,t,n)=>t in e?VXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YXt=(e,t)=>{for(var n in t||(t={}))WXt.call(t,n)&&_ye(e,n,t[n]);if(vye)for(var n of vye(t))GXt.call(t,n)&&_ye(e,n,t[n]);return e},KXt=(e,t)=>HXt(e,qXt(t)),XXt=lt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:KXt(YXt({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),QXt=Object.defineProperty,pM=Object.getOwnPropertySymbols,_5e=Object.prototype.hasOwnProperty,b5e=Object.prototype.propertyIsEnumerable,bye=(e,t,n)=>t in e?QXt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JXt=(e,t)=>{for(var n in t||(t={}))_5e.call(t,n)&&bye(e,n,t[n]);if(pM)for(var n of pM(t))b5e.call(t,n)&&bye(e,n,t[n]);return e},ZXt=(e,t)=>{var n={};for(var r in e)_5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pM)for(var r of pM(e))t.indexOf(r)<0&&b5e.call(e,r)&&(n[r]=e[r]);return n};const ck=()=>!1,eQt={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},w5e=C.forwardRef((e,t)=>{const n=gt("Month",eQt,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:b,fullWidth:E,preventFocus:w,focusable:x,firstDayOfWeek:S,onDayKeyDown:P,daysRefs:A,hideOutsideDates:O,isDateInRange:z=ck,isDateFirstInRange:M=ck,isDateLastInRange:R=ck,renderDay:D,weekdayLabelFormat:L,unstyled:V,weekendDays:B,__stopPropagation:H}=n,U=ZXt(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:k,cx:$,theme:q}=XXt({fullWidth:E},{classNames:f,styles:d,unstyled:V,name:_}),F=u||q.datesLocale,j=NKt(i,S),Q=LKt(F,S,L).map(ge=>N.createElement("th",{className:k.weekdayCell,key:ge},N.createElement(ct,{size:b,className:k.weekday},ge.length>=2?lg(ge):ge))),se=Array.isArray(s)?s.every(ge=>ge instanceof Date):s instanceof Date,ae=s instanceof Date&&xn(s).isAfter(xn(i).startOf("month"))&&xn(s).isBefore(xn(i).endOf("month")),ce=C.useMemo(()=>j.flatMap(ge=>ge).find(ge=>{const ue=yye({date:ge,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:B});return!ue.disabled&&!ue.outside})||xn(i).startOf("month").toDate(),[]),le=j.map((ge,ue)=>{const Fe=ge.map(($e,Ge)=>{const Re=yye({date:$e,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:B}),Oe={rowIndex:ue,cellIndex:Ge,date:$e};return N.createElement("td",{className:k.cell,key:Ge},N.createElement(v5e,{unstyled:V,ref:Me=>{A&&(Array.isArray(A[ue])||(A[ue]=[]),A[ue][Ge]=Me)},onClick:()=>typeof o=="function"&&o($e),onMouseDown:Me=>w&&Me.preventDefault(),value:$e,outside:Re.outside,weekend:Re.weekend,inRange:Re.inRange||z($e,Re),firstInRange:Re.firstInRange||M($e,Re),lastInRange:Re.lastInRange||R($e,Re),firstInMonth:Jp($e,ce),selected:Re.selected||Re.selectedInRange,hasValue:ae,onKeyDown:Me=>typeof P=="function"&&P(Oe,Me),className:typeof l=="function"?l($e,Re):null,style:typeof c=="function"?c($e,Re):null,disabled:Re.disabled,onMouseEnter:typeof g=="function"?g:ck,size:b,fullWidth:E,focusable:x,hideOutsideDates:O,__staticSelector:_,styles:d,classNames:f,renderDay:D,stopPropagation:H}))});return N.createElement("tr",{key:ue},Fe)});return N.createElement(st,JXt({component:"table",className:$(k.month,r),ref:t},U),!v&&N.createElement("thead",null,N.createElement("tr",null,Q)),N.createElement("tbody",null,le))});w5e.displayName="@mantine/dates/Month";var tQt=Object.defineProperty,mM=Object.getOwnPropertySymbols,E5e=Object.prototype.hasOwnProperty,x5e=Object.prototype.propertyIsEnumerable,wye=(e,t,n)=>t in e?tQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nQt=(e,t)=>{for(var n in t||(t={}))E5e.call(t,n)&&wye(e,n,t[n]);if(mM)for(var n of mM(t))x5e.call(t,n)&&wye(e,n,t[n]);return e},rQt=(e,t)=>{var n={};for(var r in e)E5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mM)for(var r of mM(e))t.indexOf(r)<0&&x5e.call(e,r)&&(n[r]=e[r]);return n};function S5e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:b,preventFocus:E,renderDay:w,unstyled:x,__stopPropagation:S}=t,P=rQt(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const A=xn(i).add(n,"months").toDate(),O=xn(i).subtract(1,"months").toDate(),z=Array(n).fill(0).map((M,R)=>{const D=xn(i).add(R,"months").toDate();return N.createElement("div",{key:R},N.createElement(ZF,{hasNext:R+1===n&&JH({date:A,minDate:o,maxDate:a}),hasPrevious:R===0&&JH({date:O,minDate:o,maxDate:a}),label:SXt({month:D,locale:s,format:_}),onNext:()=>f(xn(i).add(r,"months").toDate()),onPrevious:()=>f(xn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:R>0,preventFocus:E,unstyled:x,__stopPropagation:S}),N.createElement(w5e,nQt({month:D,daysRefs:c.current[R],onDayKeyDown:(...L)=>h(R,...L),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:R===0,preventFocus:E,renderDay:w,weekdayLabelFormat:b,unstyled:x,__stopPropagation:S},P)))});return N.createElement(N.Fragment,null,z)}S5e.displayName="@mantine/dates/MonthsList";var iQt=lt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:U$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),sQt=Object.defineProperty,gM=Object.getOwnPropertySymbols,T5e=Object.prototype.hasOwnProperty,C5e=Object.prototype.propertyIsEnumerable,Eye=(e,t,n)=>t in e?sQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oQt=(e,t)=>{for(var n in t||(t={}))T5e.call(t,n)&&Eye(e,n,t[n]);if(gM)for(var n of gM(t))C5e.call(t,n)&&Eye(e,n,t[n]);return e},aQt=(e,t)=>{var n={};for(var r in e)T5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gM)for(var r of gM(e))t.indexOf(r)<0&&C5e.call(e,r)&&(n[r]=e[r]);return n};const QZ=C.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:P="monday",value:A,onChange:O,onDayMouseEnter:z,range:M,nextDecadeLabel:R,nextMonthLabel:D,nextYearLabel:L,previousDecadeLabel:V,previousMonthLabel:B,previousYearLabel:H,labelFormat:U="MMMM YYYY",weekdayLabelFormat:k,hideOutsideDates:$,isDateInRange:q,isDateFirstInRange:F,isDateLastInRange:j,renderDay:Q,unstyled:se,weekendDays:ae,__stopPropagation:ce,yearLabelFormat:le="YYYY"}=n,ge=aQt(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ue,Fe]=C.useState(p),{classes:$e,cx:Ge,theme:Re}=iQt({size:d,fullWidth:x,amountOfMonths:ue==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:se}),Oe=l||Re.datesLocale,Me=C.useRef(Array(c).fill(0).map(()=>[])),[Ut,Qe]=oa({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[Be,xt]=C.useState(Ut.getFullYear()),et=m instanceof Date?m.getFullYear():100,ft=g instanceof Date?g.getFullYear():1e4,dt=6,Bt=(he,_e,Pe,it=1)=>{var Ye;const ut=["down","up"].includes(he),tt=ut?Pe.rowIndex+(he==="down"?it:-it):Pe.rowIndex,wt=ut?Pe.cellIndex:Pe.cellIndex+(he==="right"?it:-it),In=(Ye=Me.current[_e][tt])==null?void 0:Ye[wt];In&&(In.disabled?Bt(he,_e,Pe,it+1):In.focus())},Dn=(he,_e,Pe)=>{var it;switch(Pe.key){case"ArrowDown":{Pe.preventDefault(),_e.rowIndex+1<Me.current[he].length&&Bt("down",he,_e);break}case"ArrowUp":{Pe.preventDefault(),_e.rowIndex>0&&Bt("up",he,_e);break}case"ArrowRight":{Pe.preventDefault(),_e.cellIndex!==dt?Bt("right",he,_e):he+1<c&&Me.current[he+1][_e.rowIndex]&&((it=Me.current[he+1][_e.rowIndex][0])==null||it.focus());break}case"ArrowLeft":Pe.preventDefault(),_e.cellIndex!==0?Bt("left",he,_e):he>0&&Me.current[he-1][_e.rowIndex]&&Me.current[he-1][_e.rowIndex][dt].focus()}};return N.createElement(st,oQt({className:Ge($e.calendarBase,r),ref:t},ge),ue==="year"&&N.createElement(d5e,{size:d,value:Be,minYear:et,maxYear:ft,onChange:he=>{xt(he),Fe("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextDecadeLabel:R,previousDecadeLabel:V,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="month"&&N.createElement(m5e,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:Be,onYearChange:xt,onNextLevel:()=>Fe("year"),locale:Oe,minDate:m,maxDate:g,onChange:he=>{Qe(new Date(Be,he,1)),Fe("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextYearLabel:L,previousYearLabel:H,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="date"&&N.createElement(S5e,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Oe,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Me,onMonthChange:Qe,onNextLevel:()=>Fe("month"),onDayKeyDown:Dn,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:P,value:A,range:M,onChange:O,nextMonthLabel:D,previousMonthLabel:B,labelFormat:U,weekdayLabelFormat:k,onDayMouseEnter:z,renderDay:Q,hideOutsideDates:$,isDateInRange:q,isDateFirstInRange:F,isDateLastInRange:j,unstyled:se,weekendDays:ae,__stopPropagation:ce}))});QZ.displayName="@mantine/dates/CalendarBase";var uQt=Object.defineProperty,yM=Object.getOwnPropertySymbols,A5e=Object.prototype.hasOwnProperty,I5e=Object.prototype.propertyIsEnumerable,xye=(e,t,n)=>t in e?uQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lQt=(e,t)=>{for(var n in t||(t={}))A5e.call(t,n)&&xye(e,n,t[n]);if(yM)for(var n of yM(t))I5e.call(t,n)&&xye(e,n,t[n]);return e},cQt=(e,t)=>{var n={};for(var r in e)A5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yM)for(var r of yM(e))t.indexOf(r)<0&&I5e.call(e,r)&&(n[r]=e[r]);return n};const fQt={__staticSelector:"Calendar"};function O5e(e){const t=gt("Calendar",fQt,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=cQt(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Jp(c,u));return s(l?i.filter(c=>!Jp(c,u)):[...i,u])};return N.createElement(QZ,lQt({__staticSelector:n,onChange:a,value:i},o))}O5e.displayName="@mantine/dates/Calendar";var dQt=Object.defineProperty,hQt=Object.defineProperties,pQt=Object.getOwnPropertyDescriptors,Sye=Object.getOwnPropertySymbols,mQt=Object.prototype.hasOwnProperty,gQt=Object.prototype.propertyIsEnumerable,Tye=(e,t,n)=>t in e?dQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yQt=(e,t)=>{for(var n in t||(t={}))mQt.call(t,n)&&Tye(e,n,t[n]);if(Sye)for(var n of Sye(t))gQt.call(t,n)&&Tye(e,n,t[n]);return e},vQt=(e,t)=>hQt(e,pQt(t)),_Qt=lt(e=>({wrapper:vQt(yQt({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),bQt=Object.defineProperty,wQt=Object.defineProperties,EQt=Object.getOwnPropertyDescriptors,vM=Object.getOwnPropertySymbols,P5e=Object.prototype.hasOwnProperty,k5e=Object.prototype.propertyIsEnumerable,Cye=(e,t,n)=>t in e?bQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DS=(e,t)=>{for(var n in t||(t={}))P5e.call(t,n)&&Cye(e,n,t[n]);if(vM)for(var n of vM(t))k5e.call(t,n)&&Cye(e,n,t[n]);return e},Aye=(e,t)=>wQt(e,EQt(t)),xQt=(e,t)=>{var n={};for(var r in e)P5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vM)for(var r of vM(e))t.indexOf(r)<0&&k5e.call(e,r)&&(n[r]=e[r]);return n};const SQt={xs:24,sm:30,md:34,lg:40,xl:44},TQt={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},JZ=C.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=TQt,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:b,inputLabel:E,__staticSelector:w="DatePickerBase",dropdownOpened:x,setDropdownOpened:S,dropdownType:P="popover",dropdownPosition:A="flip",clearable:O=!0,clearButtonLabel:z,onClear:M,positionDependencies:R=[],zIndex:D,withinPortal:L=!1,onBlur:V,onFocus:B,onChange:H,onKeyDown:U,name:k="date",sx:$,amountOfMonths:q=1,onDropdownClose:F,onDropdownOpen:j,clickOutsideEvents:Q=["mousedown","touchstart"],modalZIndex:se,errorProps:ae,labelProps:ce,descriptionProps:le,clearButtonTabIndex:ge=0,unstyled:ue,inputContainer:Fe,inputWrapperOrder:$e,modalProps:Ge,withAsterisk:Re}=n,Oe=xQt(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Me,cx:Ut,theme:Qe}=_Qt(null,{classNames:r,styles:o,unstyled:ue,name:w}),{systemStyles:Be,rest:xt}=Sf(Oe),et=Nu(d),ft=C.useRef(),dt=()=>{S(!1),F==null||F()},Bt=()=>{S(!0),j==null||j()},Dn=()=>{S(!x),x?F==null||F():j==null||j()},he=ut=>{ut.key==="Escape"&&(dt(),window.setTimeout(()=>{var tt;return(tt=ft.current)==null?void 0:tt.focus()},0))},_e=O?N.createElement(om,{variant:"transparent","aria-label":z,onClick:M,size:_,tabIndex:ge,unstyled:ue}):null,Pe=ut=>{typeof V=="function"&&V(ut),l&&dt()},it=ut=>{typeof B=="function"&&B(ut),l&&Bt()},Ye=ut=>{typeof U=="function"&&U(ut),(ut.key==="Space"||ut.key==="Enter")&&!l&&(ut.preventDefault(),Bt())};return N.createElement(us.Wrapper,DS(DS({required:u,id:et,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:w,sx:$,errorProps:ae,descriptionProps:le,labelProps:ce,inputContainer:Fe,inputWrapperOrder:$e,unstyled:ue,withAsterisk:Re},Be),a),N.createElement(hi,{__staticSelector:w,withinPortal:L,offset:10,opened:x,transitionDuration:y,transition:g,positionDependencies:R,middlewares:{flip:A==="flip",shift:!1},position:A==="flip"?"bottom-start":A,shadow:m,onClose:dt,trapFocus:!l,withRoles:!1,clickOutsideEvents:Q,zIndex:D,classNames:r,styles:o,unstyled:ue},N.createElement(hi.Target,null,N.createElement("div",{className:Me.wrapper},N.createElement(us,DS({classNames:Aye(DS({},r),{input:Ut(Me.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?Bt():Dn(),onKeyDown:Ye,id:et,ref:Ps(t,ft),__staticSelector:w,size:_,name:k,placeholder:p,value:E,required:u,invalid:!!f,readOnly:!l,rightSection:_e,rightSectionWidth:Qe.fn.size({size:_,sizes:SQt}),onBlur:Pe,onFocus:it,onChange:H,autoComplete:"off",unstyled:ue},xt)))),P==="popover"?N.createElement(hi.Dropdown,null,N.createElement("div",{"data-mantine-stop-propagation":x,onKeyDownCapture:he,"aria-hidden":l||void 0},b)):N.createElement(vp,Aye(DS({},Ge),{opened:x,onClose:dt,withCloseButton:!1,size:q*400,zIndex:se,unstyled:ue}),b)))});JZ.displayName="@mantine/dates/DatePickerBase";var CQt=Object.defineProperty,_M=Object.getOwnPropertySymbols,$5e=Object.prototype.hasOwnProperty,R5e=Object.prototype.propertyIsEnumerable,Iye=(e,t,n)=>t in e?CQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AQt=(e,t)=>{for(var n in t||(t={}))$5e.call(t,n)&&Iye(e,n,t[n]);if(_M)for(var n of _M(t))R5e.call(t,n)&&Iye(e,n,t[n]);return e},IQt=(e,t)=>{var n={};for(var r in e)$5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_M)for(var r of _M(e))t.indexOf(r)<0&&R5e.call(e,r)&&(n[r]=e[r]);return n};const OQt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},PQt=C.forwardRef((e,t)=>{const n=gt("DatePicker",OQt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,name:P,size:A,dropdownType:O,dropdownPosition:z,clearable:M,disabled:R,clearButtonLabel:D,fixOnBlur:L,allowFreeInput:V,withinPortal:B,dateParser:H,firstDayOfWeek:U,onFocus:k,onBlur:$,amountOfMonths:q,allowLevelChange:F,initialLevel:j,onDropdownClose:Q,onDropdownOpen:se,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,type:ge,openDropdownOnClear:ue,unstyled:Fe,weekendDays:$e,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Me,previousYearLabel:Ut}=n,Qe=IQt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Be=fs(),xt=l||Be.datesLocale,et=ge==="date"?"YYYY-MM-DD":c||Be.dateFormat,[ft,dt]=C.useState(S),Bt=A==="lg"||A==="xl"?"md":"sm",Dn=C.useRef(),[he,_e]=C.useState(s??null),[Pe,it]=oa({value:r,defaultValue:s,finalValue:null,onChange:i}),[Ye,ut]=C.useState(Pe||x||new Date),[tt,wt]=C.useState(!1),[In,Wt]=C.useState(Pe instanceof Date?lg(xn(Pe).locale(xt).format(et)):""),Vt=()=>{dt(!1),Q==null||Q()},hr=()=>{dt(!0),se==null||se()};C.useEffect(()=>{r===null&&!tt&&Wt(""),r instanceof Date&&!tt&&Wt(lg(xn(r).locale(xt).format(et)))},[r,tt]);const Yn=_t=>{it(_t),Wt(lg(xn(_t).locale(xt).format(et))),m&&Vt(),window.setTimeout(()=>{var Fr;return(Fr=Dn.current)==null?void 0:Fr.focus()},0)},ju=()=>{var _t;it(null),_e(null),Wt(""),ue&&hr(),(_t=Dn.current)==null||_t.focus()},Lr=_t=>H?H(_t):xn(_t,et,xt).toDate(),ds=()=>{let _t=typeof Pe=="string"?Lr(Pe):Pe;E&&xn(_t).isAfter(E)&&(_t=E),b&&xn(_t).isBefore(b)&&(_t=b),xn(_t).isValid()?(it(_t),_e(_t),Wt(lg(xn(_t).locale(xt).format(et))),ut(_t)):L&&it(he)},ii=_t=>{typeof $=="function"&&$(_t),wt(!1),V&&ds()},Ai=_t=>{_t.key==="Enter"&&V&&(Vt(),ds())},Gr=_t=>{typeof k=="function"&&k(_t),wt(!0)},yr=_t=>{hr();const Fr=Lr(_t.target.value);xn(Fr).isValid()?(it(Fr),_e(Fr),Wt(_t.target.value),ut(Fr)):Wt(_t.target.value)};return N.createElement(JZ,AQt({allowFreeInput:V,dropdownOpened:ft,setDropdownOpened:dt,shadow:u,transitionDuration:f,ref:Ps(t,Dn),size:A,styles:a,classNames:o,onChange:yr,onBlur:ii,onFocus:Gr,onKeyDown:Ai,name:P,inputLabel:In,__staticSelector:"DatePicker",dropdownType:O,dropdownPosition:z,clearable:ge==="date"?!1:M&&!!Pe&&!R,clearButtonLabel:D,onClear:ju,disabled:R,withinPortal:B,amountOfMonths:q,onDropdownClose:Q,onDropdownOpen:se,type:ge,unstyled:Fe},Qe),N.createElement(O5e,{classNames:o,styles:a,locale:xt,nextMonthLabel:h,previousMonthLabel:p,month:V?Ye:void 0,initialMonth:x||(Pe instanceof Date?Pe:new Date),onMonthChange:ut,value:Pe instanceof Date?Pe:xn(Pe).toDate(),onChange:Yn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DatePicker",fullWidth:O==="modal",__stopPropagation:O!=="modal",size:O==="modal"?"lg":Bt,firstDayOfWeek:U,preventFocus:V,amountOfMonths:q,allowLevelChange:F,initialLevel:j,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,unstyled:Fe,weekendDays:$e,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Me,previousYearLabel:Ut}))});PQt.displayName="@mantine/dates/DatePicker";var kQt=Object.defineProperty,bM=Object.getOwnPropertySymbols,N5e=Object.prototype.hasOwnProperty,D5e=Object.prototype.propertyIsEnumerable,Oye=(e,t,n)=>t in e?kQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$Qt=(e,t)=>{for(var n in t||(t={}))N5e.call(t,n)&&Oye(e,n,t[n]);if(bM)for(var n of bM(t))D5e.call(t,n)&&Oye(e,n,t[n]);return e},RQt=(e,t)=>{var n={};for(var r in e)N5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bM)for(var r of bM(e))t.indexOf(r)<0&&D5e.call(e,r)&&(n[r]=e[r]);return n};const NQt={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},M5e=C.forwardRef((e,t)=>{const n=gt("RangeCalendar",NQt,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=RQt(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=C.useState(null),[p,m]=C.useState(null),g=E=>{if(p instanceof Date){if(Jp(E,p)&&!u)return m(null),h(null),null;const w=[E,p];return w.sort((x,S)=>x.getTime()-S.getTime()),i(w),m(null),null}return r[0]&&Jp(E,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([E,null]),m(E),null)},y=E=>{typeof o=="function"&&o(E),h(null)},v=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,P)=>S.getTime()-P.getTime()),!w.selected&&xn(E).subtract(1,"day").isBefore(x[1])&&xn(E).add(1,"day").isAfter(x[0])}return!1},_=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,P)=>S.getTime()-P.getTime()),w.selected&&xn(E).isBefore(x[1])}return!1},b=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,P)=>S.getTime()-P.getTime()),w.selected&&xn(E).isAfter(x[0])}return!1};return N.createElement(QZ,$Qt({dayStyle:s,onMouseLeave:y,onDayMouseEnter:E=>h(E),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:b},f))});M5e.displayName="@mantine/dates/RangeCalendar";var DQt=Object.defineProperty,wM=Object.getOwnPropertySymbols,L5e=Object.prototype.hasOwnProperty,F5e=Object.prototype.propertyIsEnumerable,Pye=(e,t,n)=>t in e?DQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MQt=(e,t)=>{for(var n in t||(t={}))L5e.call(t,n)&&Pye(e,n,t[n]);if(wM)for(var n of wM(t))F5e.call(t,n)&&Pye(e,n,t[n]);return e},LQt=(e,t)=>{var n={};for(var r in e)L5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wM)for(var r of wM(e))t.indexOf(r)<0&&F5e.call(e,r)&&(n[r]=e[r]);return n};const kye=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),FQt=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,jQt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},j5e=C.forwardRef((e,t)=>{const n=gt("DateRangePicker",jQt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,size:P,dropdownType:A,labelSeparator:O,clearable:z,clearButtonLabel:M,firstDayOfWeek:R,allowLevelChange:D,allowSingleDateInRange:L,amountOfMonths:V,withinPortal:B,initialLevel:H,onDropdownClose:U,onDropdownOpen:k,hideOutsideDates:$,hideWeekdays:q,renderDay:F,openDropdownOnClear:j,unstyled:Q,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}=n,Fe=LQt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),$e=fs(),Ge=l||$e.datesLocale,Re=c||$e.dateFormat,[Oe,Me]=C.useState(S),Ut=P==="lg"||P==="xl"?"md":"sm",Qe=C.useRef(),[Be,xt]=oa({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),et=Pe=>{xt(Pe),m&&kye(Pe)&&(Me(!1),U==null||U(),window.setTimeout(()=>{var it;return(it=Qe.current)==null?void 0:it.focus()},0))},ft=kye(Be),dt=FQt(Be),Bt=Be[0]?lg(xn(Be[0]).locale(Ge).format(Re)):"",Dn=Be[1]?lg(xn(Be[1]).locale(Ge).format(Re)):"",he=()=>{var Pe;xt([null,null]),Me(!0),j&&(k==null||k()),(Pe=Qe.current)==null||Pe.focus()},_e=Pe=>{!Pe&&dt&&Be[1]===null&&he(),Me(Pe)};return N.createElement(JZ,MQt({dropdownOpened:Oe,setDropdownOpened:_e,shadow:u,transitionDuration:f,ref:Ps(t,Qe),size:P,styles:a,classNames:o,inputLabel:dt?`${Bt} ${O} ${Dn}`:"",__staticSelector:"DateRangePicker",dropdownType:A,clearable:z&&dt,clearButtonLabel:M,onClear:he,withinPortal:B,amountOfMonths:V,onDropdownClose:U,onDropdownOpen:k,unstyled:Q},Fe),N.createElement(M5e,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ft?Be[0]:x,value:Be,onChange:et,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DateRangePicker",fullWidth:A==="modal",firstDayOfWeek:R,size:A==="modal"?"lg":Ut,allowLevelChange:D,allowSingleDateInRange:L,amountOfMonths:V,initialLevel:H,hideOutsideDates:$,hideWeekdays:q,renderDay:F,unstyled:Q,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}))});j5e.displayName="@mantine/dates/DateRangePicker";function Ug(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var BQt=Object.defineProperty,zQt=Object.defineProperties,UQt=Object.getOwnPropertyDescriptors,$ye=Object.getOwnPropertySymbols,VQt=Object.prototype.hasOwnProperty,HQt=Object.prototype.propertyIsEnumerable,Rye=(e,t,n)=>t in e?BQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qQt=(e,t)=>{for(var n in t||(t={}))VQt.call(t,n)&&Rye(e,n,t[n]);if($ye)for(var n of $ye(t))HQt.call(t,n)&&Rye(e,n,t[n]);return e},WQt=(e,t)=>zQt(e,UQt(t));const GQt={xs:20,sm:23,md:25,lg:27,xl:29};var B5e=lt((e,{size:t,hasValue:n})=>({timeInput:WQt(qQt({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:GQt}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),YQt=Object.defineProperty,EM=Object.getOwnPropertySymbols,z5e=Object.prototype.hasOwnProperty,U5e=Object.prototype.propertyIsEnumerable,Nye=(e,t,n)=>t in e?YQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KQt=(e,t)=>{for(var n in t||(t={}))z5e.call(t,n)&&Nye(e,n,t[n]);if(EM)for(var n of EM(t))U5e.call(t,n)&&Nye(e,n,t[n]);return e},XQt=(e,t)=>{var n={};for(var r in e)z5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EM)for(var r of EM(e))t.indexOf(r)<0&&U5e.call(e,r)&&(n[r]=e[r]);return n};const V$=C.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=XQt(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=C.useState(0),{classes:y,cx:v,theme:_}=B5e({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),b=C.useRef(),E=A=>{typeof i=="function"&&i(A),b.current.select(),g(0)},w=A=>{typeof s=="function"&&s(A),m===1&&typeof o=="function"&&o(A.currentTarget.value,!1)},x=A=>{A.stopPropagation(),b.current.select()},S=A=>{if(A.key==="ArrowUp"){A.preventDefault();const O=Ug(af(parseInt(A.currentTarget.value,10)+1,f,c).toString());d!==O&&o(O,!1)}if(A.key==="ArrowDown"){A.preventDefault();const O=Ug(af(parseInt(A.currentTarget.value,10)-1,f,c).toString());d!==O&&o(O,!1)}},P=A=>{g(m+1);const O=parseInt(A.currentTarget.value,10).toString();if(O==="0"&&m===0){a("00");return}o(O,!0,m>0)};return N.createElement(N.Fragment,null,N.createElement("input",KQt({type:"text",inputMode:"numeric",ref:Ps(b,t),onChange:P,onClick:x,onFocus:E,onBlur:w,onKeyDown:S,value:d,className:v(y.timeInput,r)},p)),u&&N.createElement(ct,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});V$.displayName="@mantine/dates/TimeField";function r7(e){return Math.floor(e/10)}function i7({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>r7(r)||a){const f=c%10;let d,h;c>r&&i&&f<=r7(i)?(d=Ug(r7(c).toString()),h=Ug(f.toString())):d=Ug(af(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var QQt=lt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:Vo})-2}})),JQt=Object.defineProperty,xM=Object.getOwnPropertySymbols,V5e=Object.prototype.hasOwnProperty,H5e=Object.prototype.propertyIsEnumerable,Dye=(e,t,n)=>t in e?JQt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZQt=(e,t)=>{for(var n in t||(t={}))V5e.call(t,n)&&Dye(e,n,t[n]);if(xM)for(var n of xM(t))H5e.call(t,n)&&Dye(e,n,t[n]);return e},eJt=(e,t)=>{var n={};for(var r in e)V5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xM)for(var r of xM(e))t.indexOf(r)<0&&H5e.call(e,r)&&(n[r]=e[r]);return n};const q5e=C.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=eJt(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=B5e({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=C.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const b=_.target.value.slice(-1).toLowerCase();if(b==="p"){_.preventDefault(),i(c,!0);return}if(b==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return N.createElement("input",ZQt({type:"text",ref:Ps(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});q5e.displayName="@mantine/dates/AmPmInput";function tJt({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function nJt(e,t,n,r,i,s){const o=xn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function Mye(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:Ug(i.toString()),minutes:Ug(e.getMinutes().toString()),seconds:Ug(e.getSeconds().toString()),amPm:s?r:n}}var rJt=Object.defineProperty,iJt=Object.defineProperties,sJt=Object.getOwnPropertyDescriptors,SM=Object.getOwnPropertySymbols,W5e=Object.prototype.hasOwnProperty,G5e=Object.prototype.propertyIsEnumerable,Lye=(e,t,n)=>t in e?rJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$m=(e,t)=>{for(var n in t||(t={}))W5e.call(t,n)&&Lye(e,n,t[n]);if(SM)for(var n of SM(t))G5e.call(t,n)&&Lye(e,n,t[n]);return e},s7=(e,t)=>iJt(e,sJt(t)),oJt=(e,t)=>{var n={};for(var r in e)W5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SM)for(var r of SM(e))t.indexOf(r)<0&&G5e.call(e,r)&&(n[r]=e[r]);return n};const aJt={xs:24,sm:30,md:34,lg:40,xl:44},uJt={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},ZH=C.forwardRef((e,t)=>{const n=gt("TimeInput",uJt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,amLabel:E,pmLabel:w,name:x,hoursLabel:S,minutesLabel:P,secondsLabel:A,amPmLabel:O,timePlaceholder:z,amPmPlaceholder:M,disabled:R,sx:D,nextRef:L,labelProps:V,descriptionProps:B,errorProps:H,unstyled:U,withAsterisk:k}=n,$=oJt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:q,cx:F,theme:j}=QQt({size:l},{classNames:f,styles:d,unstyled:U,name:"TimeInput"}),{systemStyles:Q,rest:se}=Sf($),ae=Nu(h),ce=C.useRef(),le=C.useRef(),ge=C.useRef(),ue=C.useRef(),[Fe,$e]=C.useState(Mye(p||m,b,E,w)),[Ge,Re]=C.useState(p||m);Ss(()=>{$e(Mye(Ge,b,E,w))},[Ge,b,E,w]),Ss(()=>{(p==null?void 0:p.getTime())!==(Ge==null?void 0:Ge.getTime())&&Re(p)},[p]);const Oe=ft=>{const dt=$m($m({},Fe),ft),Bt=nJt(dt.hours,dt.minutes,dt.seconds,b,w,dt.amPm);Re(Bt),typeof g=="function"&&g(Bt)},Me=i7({onChange:(ft,dt)=>{Oe({hours:ft,minutes:dt??Fe.minutes})},min:b==="12"?1:0,max:b==="12"?12:23,nextRef:le,nextMax:59}),Ut=i7({onChange:(ft,dt)=>{Oe({minutes:ft,seconds:dt??Fe.seconds})},min:0,max:59,nextRef:y?ge:b==="12"?ue:L,nextMax:y?59:void 0}),Qe=i7({onChange:ft=>{Oe({seconds:ft})},min:0,max:59,nextRef:b==="12"?ue:L}),Be=tJt({amLabel:E,pmLabel:w,onChange:ft=>{Oe({amPm:ft})},nextRef:L}),xt=()=>{$e({hours:"",minutes:"",seconds:"",amPm:""}),Re(null),g==null||g(null),ce.current.focus()},et=v&&Ge&&!R?N.createElement(om,{variant:"transparent","aria-label":_,onClick:xt,size:l,unstyled:U}):null;return N.createElement(us.Wrapper,$m($m({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:ae,sx:D,errorProps:H,descriptionProps:B,labelProps:V,unstyled:U,withAsterisk:k},Q),c),N.createElement(us,$m({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ce.current.focus(),size:l,className:F({[q.disabled]:R}),classNames:f,styles:d,disabled:R,rightSection:et,rightSectionWidth:j.fn.size({size:l,sizes:aJt}),unstyled:U},se),N.createElement("div",{className:q.controls},N.createElement(V$,{ref:Ps(ce,t),value:Fe.hours,onChange:Me,setValue:ft=>$e(dt=>s7($m({},dt),{hours:ft})),id:ae,className:q.timeInput,withSeparator:!0,size:l,max:b==="12"?12:23,placeholder:z,"aria-label":S,disabled:R,name:x,unstyled:U}),N.createElement(V$,{ref:le,value:Fe.minutes,onChange:Ut,setValue:ft=>$e(dt=>s7($m({},dt),{minutes:ft})),className:q.timeInput,withSeparator:y,size:l,max:59,placeholder:z,"aria-label":P,disabled:R,unstyled:U}),y&&N.createElement(V$,{ref:ge,value:Fe.seconds,onChange:Qe,setValue:ft=>$e(dt=>s7($m({},dt),{seconds:ft})),className:q.timeInput,size:l,max:59,placeholder:z,"aria-label":A,disabled:R,unstyled:U}),b==="12"&&N.createElement(q5e,{ref:ue,value:Fe.amPm,onChange:Be,placeholder:M,amLabel:E,pmLabel:w,size:l,"aria-label":O,disabled:R,unstyled:U}))))});ZH.displayName="@mantine/dates/TimeInput";var lJt=lt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:Vo})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),cJt=Object.defineProperty,TM=Object.getOwnPropertySymbols,Y5e=Object.prototype.hasOwnProperty,K5e=Object.prototype.propertyIsEnumerable,Fye=(e,t,n)=>t in e?cJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MS=(e,t)=>{for(var n in t||(t={}))Y5e.call(t,n)&&Fye(e,n,t[n]);if(TM)for(var n of TM(t))K5e.call(t,n)&&Fye(e,n,t[n]);return e},fJt=(e,t)=>{var n={};for(var r in e)Y5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TM)for(var r of TM(e))t.indexOf(r)<0&&K5e.call(e,r)&&(n[r]=e[r]);return n};const dJt={xs:24,sm:30,md:34,lg:40,xl:44},hJt={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},pJt=C.forwardRef((e,t)=>{const n=gt("TimeRangeInput",hJt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,name:E,hoursLabel:w,minutesLabel:x,secondsLabel:S,amPmLabel:P,timePlaceholder:A,amPmPlaceholder:O,labelSeparator:z,disabled:M,sx:R,labelProps:D,descriptionProps:L,errorProps:V,unstyled:B,withAsterisk:H}=n,U=fJt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:k,cx:$,theme:q}=lJt({size:l},{classNames:f,styles:d,unstyled:B,name:"TimeRangeInput"}),{systemStyles:F,rest:j}=Sf(U),Q=Nu(h),se=C.useRef(),ae=C.useRef(),[ce,le]=C.useState(p??m);Ss(()=>{typeof g=="function"&&g(ce)},[ce]),Ss(()=>{var $e,Ge,Re,Oe;((($e=p[0])==null?void 0:$e.getTime())!==((Ge=ce[0])==null?void 0:Ge.getTime())||((Re=p[1])==null?void 0:Re.getTime())!==((Oe=ce[1])==null?void 0:Oe.getTime()))&&le(p)},[p]);const ge=()=>{var $e;le([null,null]),($e=se.current)==null||$e.focus()},ue=v&&ce.filter($e=>!!$e).length>0?N.createElement(om,{variant:"transparent","aria-label":_,onClick:ge,size:l,unstyled:B}):null,Fe={amPmLabel:P,amPmPlaceholder:O,disabled:M,format:b,hoursLabel:w,minutesLabel:x,secondsLabel:S,size:l,timePlaceholder:A,withSeconds:y};return N.createElement(us.Wrapper,MS(MS({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:Q,sx:R,errorProps:V,descriptionProps:L,labelProps:D,unstyled:B,withAsterisk:H},F),c),N.createElement(us,MS({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var $e;($e=se.current)==null||$e.focus()},size:l,className:$({[k.disabled]:M}),classNames:f,styles:d,disabled:M,rightSection:ue,rightSectionWidth:q.fn.size({size:l,sizes:dJt}),unstyled:B},j),N.createElement("div",{className:k.inputWrapper},N.createElement(ZH,MS({ref:Ps(se,t),variant:"unstyled",value:ce[0],onChange:$e=>le([$e,ce[1]]),name:E,nextRef:ae,id:Q,unstyled:B},Fe)),N.createElement("span",{className:k.separator,style:{color:q.colorScheme==="dark"?q.colors.dark[2]:q.colors.gray[7]}},z),N.createElement(ZH,MS({ref:ae,variant:"unstyled",value:ce[1],onChange:$e=>le([ce[0],$e]),unstyled:B},Fe)))))});pJt.displayName="@mantine/dates/TimeRangeInput";const jye={};function eq(e,t){e===void 0&&(e=jye),t===void 0&&(t=jye);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var mJt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gJt=Object.prototype.hasOwnProperty;function tq(e,t){return gJt.call(e,t)}function nq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)tq(e,i)&&r.push(i);return r}function il(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function rq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ly(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function X5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function iq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(iq(e[t]))return!0}else if(typeof e=="object"){for(var r=nq(e),i=r.length,s=0;s<i;s++)if(iq(e[r[s]]))return!0}}return!1}function Bye(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Q5e=function(e){mJt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Bye(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Bye(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),$i=Q5e,yJt=il,Tb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=CM(n,this.path);r&&(r=il(r));var i=L1(n,{op:"remove",path:this.from}).removed;return L1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=CM(n,this.from);return L1(n,{op:"add",path:this.path,value:il(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:mA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},vJt={add:function(e,t,n){return rq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Tb.move,copy:Tb.copy,test:Tb.test,_get:Tb._get};function CM(e,t){if(t=="")return e;var n={op:"_get",path:t};return L1(e,n),n.value}function L1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):AM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=CM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=mA(e,t.value),o.test===!1)throw new $i("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new $i("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=il(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=AM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=X5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!rq(h))throw new $i("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);rq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new $i("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=vJt[t.op].call(t,l,h,e);if(o.test===!1)throw new $i("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Tb[t.op].call(t,l,h,e);if(o.test===!1)throw new $i("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new $i("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function e5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new $i("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=il(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=L1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function _Jt(e,t,n){var r=L1(e,t);if(r.test===!1)throw new $i("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function AM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new $i("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Tb[e.op]){if(typeof e.path!="string")throw new $i("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new $i('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new $i("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new $i("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&iq(e.value))throw new $i("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new $i("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new $i("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=J5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new $i("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new $i("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function J5e(e,t,n){try{if(!Array.isArray(e))throw new $i("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)e5(il(t),il(e),n||!0);else{n=n||AM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof $i)return i;throw i}}function mA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!mA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!mA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const bJt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:$i,_areEquals:mA,applyOperation:L1,applyPatch:e5,applyReducer:_Jt,deepClone:yJt,getValueByPointer:CM,validate:J5e,validator:AM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var ZZ=new WeakMap,wJt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),EJt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function xJt(e){return ZZ.get(e)}function SJt(e,t){return e.observers.get(t)}function TJt(e,t){e.observers.delete(t.callback)}function CJt(e,t){t.unobserve()}function AJt(e,t){var n=[],r,i=xJt(e);if(!i)i=new wJt(e),ZZ.set(e,i);else{var s=SJt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=il(e),t){r.callback=t,r.next=null;var o=function(){sq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){sq(r),clearTimeout(r.next),TJt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new EJt(t,r)),r}function sq(e,t){t===void 0&&(t=!1);var n=ZZ.get(e.object);eee(n.value,e.object,e.patches,"",t),e.patches.length&&e5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function eee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=nq(t),o=nq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(tq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?eee(c,f,n,r+"/"+Ly(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ly(l),value:il(c)}),n.push({op:"replace",path:r+"/"+Ly(l),value:il(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ly(l),value:il(c)}),n.push({op:"remove",path:r+"/"+Ly(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!tq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Ly(l),value:il(t[l])})}}}function IJt(e,t,n){n===void 0&&(n=!1);var r=[];return eee(e,t,r,"",n),r}const OJt=Object.freeze(Object.defineProperty({__proto__:null,compare:IJt,generate:sq,observe:AJt,unobserve:CJt},Symbol.toStringTag,{value:"Module"}));Object.assign({},bJt,OJt,{JsonPatchError:Q5e,deepClone:il,escapePathComponent:Ly,unescapePathComponent:X5e});var PJt=/("(?:[^\\"]|\\.)*")|[:,]/g,kJt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,b,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),b=JSON.stringify(a,s),b===void 0)return b;if(g=i-u.length-l,b.length<=g&&(v=b.replace(PJt,function(w,x){return x||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(b),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return b}(t,"",0)};const o7=El(kJt);function Lu(e,t,n){return e.fields=t||[],e.fname=n,e}function ji(e){return e==null?null:e.fname}function ta(e){return e==null?null:e.fields}function Z5e(e){return e.length===1?$Jt(e[0]):RJt(e)}const $Jt=e=>function(t){return t[e]},RJt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Te(e){throw Error(e)}function gh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Te("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Te("Access path missing closing bracket: "+e),r&&Te("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function ac(e,t,n){const r=gh(e);return e=r.length===1?r[0]:e,Lu((n&&n.get||Z5e)(r),[e],t||e)}const nO=ac("id"),ca=Lu(e=>e,[],"identity"),ig=Lu(()=>0,[],"zero"),Sx=Lu(()=>1,[],"one"),uc=Lu(()=>!0,[],"true"),Lm=Lu(()=>!1,[],"false");function NJt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const e8e=0,tee=1,nee=2,t8e=3,n8e=4;function ree(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NJt,r=e||e8e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=tee&&n(t||"error","ERROR",arguments),this},warn(){return r>=nee&&n(t||"warn","WARN",arguments),this},info(){return r>=t8e&&n(t||"log","INFO",arguments),this},debug(){return r>=n8e&&n(t||"log","DEBUG",arguments),this}}}var Ie=Array.isArray;function ot(e){return e===Object(e)}const zye=e=>e!=="__proto__";function Tx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=DJt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;Cx(r,s,i[s],o)}return r},{})}function Cx(e,t,n,r){if(!zye(t))return;let i,s;if(ot(n)&&!Ie(n)){s=ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Cx(s,i,n[i]):zye(i)&&(s[i]=n[i])}else e[t]=n}function DJt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Un(e){return e[e.length-1]}function Xo(e){return e==null||e===""?null:+e}const r8e=e=>t=>e*Math.exp(t),i8e=e=>t=>Math.log(e*t),s8e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),o8e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,IM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function t5(e,t,n,r){const i=n(e[0]),s=n(Un(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function a8e(e,t){return t5(e,t,Xo,ca)}function u8e(e,t){var n=Math.sign(e[0]);return t5(e,t,i8e(n),r8e(n))}function l8e(e,t,n){return t5(e,t,IM(n),IM(1/n))}function c8e(e,t,n){return t5(e,t,s8e(n),o8e(n))}function n5(e,t,n,r,i){const s=r(e[0]),o=r(Un(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function iee(e,t,n){return n5(e,t,n,Xo,ca)}function see(e,t,n){const r=Math.sign(e[0]);return n5(e,t,n,i8e(r),r8e(r))}function OM(e,t,n,r){return n5(e,t,n,IM(r),IM(1/r))}function oee(e,t,n,r){return n5(e,t,n,s8e(r),o8e(r))}function f8e(e){return 1+~~(new Date(e).getMonth()/3)}function d8e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function nt(e){return e!=null?Ie(e)?e:[e]:[]}function h8e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pn(e){return typeof e=="function"}const MJt="descending";function aee(e,t,n){n=n||{},t=nt(t)||[];const r=[],i=[],s={},o=n.comparator||LJt;return nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===MJt?-1:1),i.push(a=pn(a)?a:ac(a,null,n)),(ta(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Lu(o(i,r),Object.keys(s))}const r5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),LJt=(e,t)=>e.length===1?FJt(e[0],t[0]):jJt(e,t,e.length),FJt=(e,t)=>function(n,r){return r5(e(n),e(r))*t},jJt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=r5(s(r),s(i));return o*t[a]});function fa(e){return pn(e)?e:()=>e}function uee(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function th(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function p8e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const BJt=Object.prototype.hasOwnProperty;function Nt(e,t){return BJt.call(e,t)}const fk={};function Ax(e){let t={},n;function r(s){return Nt(t,s)&&t[s]!==fk}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===fk&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=fk),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==fk&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function m8e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Un(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function We(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hn(r,n)}function Cb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function J0(e){return typeof e=="boolean"}function Vg(e){return Object.prototype.toString.call(e)==="[object Date]"}function g8e(e){return e&&pn(e[Symbol.iterator])}function Jn(e){return typeof e=="number"}function y8e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function rt(e){return typeof e=="string"}function lee(e,t,n){e&&(e=t?nt(e).map(a=>a.replace(/\\(.)/g,"$1")):nt(e));const r=e&&e.length,i=n&&n.get||Z5e,s=a=>i(t?[a]:gh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Lu(o,e,"key")}function v8e(e,t){const n=e[0],r=Un(e),i=+t;return i?i===1?r:n+i*(r-n):n}const zJt=1e4;function _8e(e){e=+e||zJt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Nt(t,o)||Nt(n,o),get:o=>Nt(t,o)?t[o]:Nt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Nt(t,o)?t[o]=a:s(o,a)}}function b8e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function AT(e,t){let n="";for(;--t>=0;)n+=e;return n}function w8e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?AT(i,o)+s:r==="center"?AT(i,~~(o/2))+s+AT(i,Math.ceil(o/2)):s+AT(i,o)}function rO(e){return e&&Un(e)-e[0]||0}function Xe(e){return Ie(e)?"["+e.map(Xe)+"]":ot(e)||rt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function cee(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const UJt=e=>Jn(e)||Vg(e)?e:Date.parse(e);function fee(e,t){return t=t||UJt,e==null||e===""?null:t(e)}function dee(e){return e==null||e===""?null:e+""}function _f(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function E8e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function qm(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function VJt(e){return e}function HJt(e){if(e==null)return VJt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function qJt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function WJt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Uye(e,n)})}:Uye(e,t)}function Uye(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=x8e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function x8e(e,t){var n=HJt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&qJt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function GJt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function YJt(e){return x8e(e,KJt.apply(this,arguments))}function KJt(e,t,n){var r,i,s;if(arguments.length>1)r=XJt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:GJt(e,r)}}function XJt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Hg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QJt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iO(e){let t,n,r;e.length!==2?(t=Hg,n=(a,u)=>Hg(e(a),u),r=(a,u)=>e(a)-u):(t=e===Hg||e===QJt?e:JJt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function JJt(){return 0}function S8e(e){return e===null?NaN:+e}function*ZJt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const T8e=iO(Hg),PM=T8e.right,eZt=T8e.left;iO(S8e).center;const tZt=PM;function nZt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function rZt(e,t){const n=nZt(e,t);return n&&Math.sqrt(n)}function iZt(e,t){return Array.from(t,n=>e[n])}function sZt(e=Hg){if(e===Hg)return C8e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function C8e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const oZt=Math.sqrt(50),aZt=Math.sqrt(10),uZt=Math.sqrt(2);function A8e(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=oZt?10:s>=aZt?5:s>=uZt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?A8e(e,t,n*2):[a,u,l]}function Vye(e,t,n){return t=+t,e=+e,n=+n,A8e(e,t,n)[2]}function gA(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Vye(t,e,n):Vye(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function F1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function oq(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function I8e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?C8e:sZt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));I8e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(LS(e,n,t),i(e[r],s)>0&&LS(e,n,r);o<a;){for(LS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?LS(e,n,a):(++a,LS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function LS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function aq(e,t,n){if(e=Float64Array.from(ZJt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return oq(e);if(t>=1)return F1(e);var r,i=(r-1)*t,s=Math.floor(i),o=F1(I8e(e,s).subarray(0,s+1)),a=oq(e.subarray(s+1));return o+(a-o)*(i-s)}}function lZt(e,t,n=S8e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function cZt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function O8e(e,t){return aq(e,.5,t)}function r_(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function P8e(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function fZt(e,...t){e=new VD(e),t=t.map(dZt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function dZt(e){return e instanceof VD?e:new VD(e)}function hZt(...e){const t=new VD;for(const n of e)for(const r of n)t.add(r);return t}const xo="year",Au="quarter",na="month",Es="week",Iu="date",Ko="day",nh="dayofyear",yl="hours",vl="minutes",lc="seconds",bf="milliseconds",hee=[xo,Au,na,Es,Iu,Ko,nh,yl,vl,lc,bf],a7=hee.reduce((e,t,n)=>(e[t]=1+n,e),{});function pee(e){const t=nt(e).slice(),n={};return t.length||Te("Missing time unit."),t.forEach(i=>{Nt(a7,i)?n[i]=1:Te(`Invalid time unit: ${i}.`)}),(n[Es]||n[Ko]?1:0)+(n[Au]||n[na]||n[Iu]?1:0)+(n[nh]?1:0)>1&&Te(`Incompatible time units: ${e}`),t.sort((i,s)=>a7[i]-a7[s]),t}const pZt={[xo]:"%Y ",[Au]:"Q%q ",[na]:"%b ",[Iu]:"%d ",[Es]:"W%U ",[Ko]:"%a ",[nh]:"%j ",[yl]:"%H:00",[vl]:"00:%M",[lc]:":%S",[bf]:".%L",[`${xo}-${na}`]:"%Y-%m ",[`${xo}-${na}-${Iu}`]:"%Y-%m-%d ",[`${yl}-${vl}`]:"%H:%M"};function k8e(e,t){const n=hn({},pZt,t),r=pee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Yy=new Date;function mee(e){return Yy.setFullYear(e),Yy.setMonth(0),Yy.setDate(1),Yy.setHours(0,0,0,0),Yy}function $8e(e){return N8e(new Date(e))}function R8e(e){return uq(new Date(e))}function N8e(e){return bp.count(mee(e.getFullYear())-1,e)}function uq(e){return ZE.count(mee(e.getFullYear())-1,e)}function lq(e){return mee(e).getDay()}function mZt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function D8e(e){return L8e(new Date(e))}function M8e(e){return cq(new Date(e))}function L8e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Dg.count(t-1,e)}function cq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ex.count(t-1,e)}function fq(e){return Yy.setTime(Date.UTC(e,0,1)),Yy.getUTCDay()}function gZt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function F8e(e,t,n,r,i){const s=t||1,o=Un(e),a=(y,v,_)=>(_=_||y,yZt(n[_],r[_],y===o&&s,v)),u=new Date,l=_f(e),c=l[xo]?a(xo):fa(2012),f=l[na]?a(na):l[Au]?a(Au):ig,d=l[Es]&&l[Ko]?a(Ko,1,Es+Ko):l[Es]?a(Es,1):l[Ko]?a(Ko,1):l[Iu]?a(Iu,1):l[nh]?a(nh,1):Sx,h=l[yl]?a(yl):ig,p=l[vl]?a(vl):ig,m=l[lc]?a(lc):ig,g=l[bf]?a(bf):ig;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function yZt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function lE(e,t,n){return t+e*7-(n+6)%7}const vZt={[xo]:e=>e.getFullYear(),[Au]:e=>Math.floor(e.getMonth()/3),[na]:e=>e.getMonth(),[Iu]:e=>e.getDate(),[yl]:e=>e.getHours(),[vl]:e=>e.getMinutes(),[lc]:e=>e.getSeconds(),[bf]:e=>e.getMilliseconds(),[nh]:e=>N8e(e),[Es]:e=>uq(e),[Es+Ko]:(e,t)=>lE(uq(e),e.getDay(),lq(t)),[Ko]:(e,t)=>lE(1,e.getDay(),lq(t))},_Zt={[Au]:e=>3*e,[Es]:(e,t)=>lE(e,0,lq(t))};function j8e(e,t){return F8e(e,t||1,vZt,_Zt,mZt)}const bZt={[xo]:e=>e.getUTCFullYear(),[Au]:e=>Math.floor(e.getUTCMonth()/3),[na]:e=>e.getUTCMonth(),[Iu]:e=>e.getUTCDate(),[yl]:e=>e.getUTCHours(),[vl]:e=>e.getUTCMinutes(),[lc]:e=>e.getUTCSeconds(),[bf]:e=>e.getUTCMilliseconds(),[nh]:e=>L8e(e),[Es]:e=>cq(e),[Ko]:(e,t)=>lE(1,e.getUTCDay(),fq(t)),[Es+Ko]:(e,t)=>lE(cq(e),e.getUTCDay(),fq(t))},wZt={[Au]:e=>3*e,[Es]:(e,t)=>lE(e,0,fq(t))};function B8e(e,t){return F8e(e,t||1,bZt,wZt,gZt)}const EZt={[xo]:Vd,[Au]:PC.every(3),[na]:PC,[Es]:ZE,[Iu]:bp,[Ko]:bp,[nh]:bp,[yl]:O4,[vl]:A4,[lc]:up,[bf]:Mw},xZt={[xo]:Hd,[Au]:kC.every(3),[na]:kC,[Es]:ex,[Iu]:Dg,[Ko]:Dg,[nh]:Dg,[yl]:P4,[vl]:I4,[lc]:up,[bf]:Mw};function Ix(e){return EZt[e]}function Ox(e){return xZt[e]}function z8e(e,t,n){return e?e.offset(t,n):void 0}function U8e(e,t,n){return z8e(Ix(e),t,n)}function V8e(e,t,n){return z8e(Ox(e),t,n)}function H8e(e,t,n,r){return e?e.range(t,n,r):void 0}function q8e(e,t,n,r){return H8e(Ix(e),t,n,r)}function W8e(e,t,n,r){return H8e(Ox(e),t,n,r)}const IT=1e3,OT=IT*60,PT=OT*60,i5=PT*24,SZt=i5*7,Hye=i5*30,dq=i5*365,G8e=[xo,na,Iu,yl,vl,lc,bf],kT=G8e.slice(0,-1),$T=kT.slice(0,-1),RT=$T.slice(0,-1),TZt=RT.slice(0,-1),CZt=[xo,Es],qye=[xo,na],Y8e=[xo],FS=[[kT,1,IT],[kT,5,5*IT],[kT,15,15*IT],[kT,30,30*IT],[$T,1,OT],[$T,5,5*OT],[$T,15,15*OT],[$T,30,30*OT],[RT,1,PT],[RT,3,3*PT],[RT,6,6*PT],[RT,12,12*PT],[TZt,1,i5],[CZt,1,SZt],[qye,1,Hye],[qye,3,3*Hye],[Y8e,1,dq]];function K8e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(rO(t))/n;let i=iO(a=>a[2]).right(FS,r),s,o;return i===FS.length?(s=Y8e,o=gA(t[0]/dq,t[1]/dq,n)):i?(i=FS[r/FS[i-1][2]<FS[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=G8e,o=Math.max(gA(t[0],t[1],n),1)),{units:s,step:o}}function NT(e){const t={};return n=>t[n]||(t[n]=e(n))}function AZt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=IZt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function IZt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function X8e(e){const t=NT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=tv(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return AZt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=tv(o??",f");const a=gA(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=b$e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=w$e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=_$e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let hq;Q8e();function Q8e(){return hq=X8e({format:QE,formatPrefix:UK})}function J8e(e){return X8e(v$e(e))}function kM(e){return arguments.length?hq=J8e(e):hq}function Wye(e,t,n){n=n||{},ot(n)||Te(`Invalid time multi-format specifier: ${n}`);const r=t(lc),i=t(vl),s=t(yl),o=t(Iu),a=t(Es),u=t(na),l=t(Au),c=t(xo),f=e(n[bf]||".%L"),d=e(n[lc]||":%S"),h=e(n[vl]||"%I:%M"),p=e(n[yl]||"%I %p"),m=e(n[Iu]||n[Ko]||"%a %d"),g=e(n[Es]||"%b %d"),y=e(n[na]||"%B"),v=e(n[Au]||"%B"),_=e(n[xo]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:s(b)<b?h:o(b)<b?p:u(b)<b?a(b)<b?m:g:c(b)<b?l(b)<b?y:v:_)(b)}function Z8e(e){const t=NT(e.format),n=NT(e.utcFormat);return{timeFormat:r=>rt(r)?t(r):Wye(t,Ix,r),utcFormat:r=>rt(r)?n(r):Wye(n,Ox,r),timeParse:NT(e.parse),utcParse:NT(e.utcParse)}}let pq;e9e();function e9e(){return pq=Z8e({format:YK,parse:X$e,utcFormat:k4,utcParse:Q$e})}function t9e(e){return Z8e(q$e(e))}function yA(e){return arguments.length?pq=t9e(e):pq}const mq=(e,t)=>hn({},e,t);function n9e(e,t){const n=e?J8e(e):kM(),r=t?t9e(t):yA();return mq(n,r)}function gee(e,t){const n=arguments.length;return n&&n!==2&&Te("defaultLocale expects either zero or two arguments."),n?mq(kM(e),yA(t)):mq(kM(),yA())}function OZt(){return Q8e(),e9e(),gee()}const PZt=/^(data:|([A-Za-z]+:)?\/\/)/,kZt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,$Zt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Gye="file://";function RZt(e,t){return n=>({options:n||{},sanitize:DZt,load:NZt,fileAccess:!!t,file:MZt(t),http:FZt(e)})}async function NZt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function DZt(e,t){t=hn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=kZt.test(e.replace($Zt,""));(e==null||typeof e!="string"||!a)&&Te("Sanitize failure, invalid URI: "+Xe(e));const u=PZt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Gye))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Gye.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function MZt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):LZt}async function LZt(){Te("No file system access.")}function FZt(e){return e?async function(t,n){const r=hn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pn(s[i])?s[i]():s.text():Te(s.status+""+s.statusText)}:jZt}async function jZt(){Te("No HTTP fetch method available.")}const BZt=e=>e!=null&&e===e,zZt=e=>e==="true"||e==="false"||e===!0||e===!1,UZt=e=>!Number.isNaN(Date.parse(e)),r9e=e=>!Number.isNaN(+e)&&!(e instanceof Date),VZt=e=>r9e(e)&&Number.isInteger(+e),gq={boolean:cee,integer:Xo,number:Xo,date:fee,string:dee,unknown:ca},dk=[zZt,VZt,r9e,UZt],HZt=["boolean","integer","number","date"];function i9e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=dk.length,i=dk.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&BZt(u)&&!dk[a](u)&&(i[a]=0,++o,o===dk.length))return"string";return HZt[i.reduce((s,o)=>s===0?o:s,0)-1]}function s9e(e,t){return t.reduce((n,r)=>(n[r]=i9e(e,r),n),{})}function Yye(e){const t=function(n,r){const i={delimiter:e};return yee(n,r?hn(r,i):i)};return t.responseType="text",t}function yee(e,t){return t.header&&(e=t.header.map(Xe).join(t.delimiter)+`
`+e),m$e(t.delimiter).parse(e+"")}yee.responseType="text";function qZt(e){return typeof Buffer=="function"&&pn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function vee(e,t){const n=t&&t.property?ac(t.property):ca;return ot(e)&&!qZt(e)?WZt(n(e),t):n(JSON.parse(e))}vee.responseType="json";function WZt(e,t){return!Ie(e)&&g8e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const GZt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function o9e(e,t){let n,r,i,s;return e=vee(e,t),t&&t.feature?(n=WJt,i=t.feature):t&&t.mesh?(n=YJt,i=t.mesh,s=GZt[t.filter]):Te("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Te("Invalid TopoJSON object: "+i),r&&r.features||[r]}o9e.responseType="json";const H$={dsv:yee,csv:Yye(","),tsv:Yye("	"),json:vee,topojson:o9e};function _ee(e,t){return arguments.length>1?(H$[e]=t,this):Nt(H$,e)?H$[e]:null}function a9e(e){const t=_ee(e);return t&&t.responseType||"text"}function u9e(e,t,n,r){t=t||{};const i=_ee(t.type||"json");return i||Te("Unknown data format type: "+t.type),e=i(e,t),t.parse&&YZt(e,t.parse,n,r),Nt(e,"columns")&&delete e.columns,e}function YZt(e,t,n,r){if(!e.length)return;const i=yA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=s9e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!gq[p])throw Error("Illegal format pattern: "+h+":"+p);return gq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const s5=RZt(typeof fetch<"u"&&fetch,null);function o5(e){const t=e||ca,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function q$(e,t){try{await t(e)}catch(n){e.error(n)}}const l9e=Symbol("vega_id");let KZt=1;function a5(e){return!!(e&&$t(e))}function $t(e){return e[l9e]}function c9e(e,t){return e[l9e]=t,e}function dr(e){const t=e===Object(e)?e:{data:e};return $t(t)?t:c9e(t,KZt++)}function bee(e){return u5(e,dr({}))}function u5(e,t){for(const n in e)t[n]=e[n];return t}function f9e(e,t){return c9e(t,$t(e))}function i_(e,t){return e?t?(n,r)=>e(n,r)||$t(t(n))-$t(t(r)):(n,r)=>e(n,r)||$t(n)-$t(r):null}function d9e(e){return e&&e.constructor===s_}function s_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:s_,insert(a){const u=nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=pn(a)?r:t,l=nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:fa(l)};return pn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return pn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[$t(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[$t(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[$t(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=$t(m),l[g]?l[g]=1:a.add.push(dr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[$t(m)]<0&&a.rem.push(m);function y(v,_,b){b?v[_]=b(v):a.encode=_,o||(c[$t(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[$t(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[$t(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[$t(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const W$="_:mod:_";function l5(){Object.defineProperty(this,W$,{writable:!0,value:{}})}l5.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[W$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ie(n)?1+n.length:-1),i},modified(e,t){const n=this[W$];if(arguments.length){if(Ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[W$]={},this}};let XZt=0;const QZt="pulse",JZt=new l5,ZZt=1,een=2;function Dr(e,t,n,r){this.id=++XZt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Kye(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=o5(nO))},set(e){return this.value!==e?(this.value=e,1):0},skip:Kye(ZZt),modified:Kye(een),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new l5,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===QZt)nt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Te("Pulse parameters must be operator instances.")}),this.source=a;else if(Ie(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||JZt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function ten(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:pn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function nen(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let ren=0;function c5(e,t,n){this.id=++ren,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Fm(e,t,n){return new c5(e,t,n)}c5.prototype={_filter:uc,_apply:ca,targets(){return this._targets||(this._targets=o5(nO))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Fm(e);return this.targets().add(t),t},apply(e){const t=Fm(null,e);return this.targets().add(t),t},merge(){const e=Fm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Fm();return this.targets().add(Fm(null,null,uee(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Fm(null,null,()=>n=!0)),t.targets().add(Fm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=uc,this._targets=null}};function ien(e,t,n,r){const i=this,s=Fm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function sen(e,t){const n=this.locale();return u9e(e,t,n.timeParse,n.utcParse)}function oen(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function aen(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:a9e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function uen(e,t,n){const r=this,i=r._pending||len(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(uc).insert(s.data||[])),i.done(),s}function len(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const cen={skip:!0};function fen(e,t,n,r,i){return(e instanceof Dr?hen:den)(this,e,t,n,r,i),this}function den(e,t,n,r,i,s){const o=hn({},s,cen);let a,u;pn(n)||(n=fa(n)),r===void 0?a=l=>e.touch(n(l)):pn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;d9e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function hen(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,pen(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function pen(e,t){return t=pn(t)?t:fa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function men(e){e.rank=++this._rank}function gen(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Te("Cycle detected in dataflow graph.")}const $M={},Zf=1,Wm=2,jh=4,yen=Zf|Wm,Xye=Zf|jh,R_=Zf|Wm|jh,Qye=8,jS=16,Jye=32,Zye=64;function qg(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function u7(e,t){const n=[];return qm(e,t,r=>n.push(r)),n}function e1e(e,t){const n={};return e.visit(t,r=>{n[$t(r)]=1}),r=>n[$t(r)]?null:r}function hk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}qg.prototype={StopPropagation:$M,ADD:Zf,REM:Wm,MOD:jh,ADD_REM:yen,ADD_MOD:Xye,ALL:R_,REFLOW:Qye,SOURCE:jS,NO_SOURCE:Jye,NO_FIELDS:Zye,fork(e){return new qg(this.dataflow).init(this,e)},clone(){const e=this.fork(R_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(R_|jS)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new qg(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Zye)&&(n.fields=e.fields),t&Zf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Wm?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&jh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Jye?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||R_;return t&Zf&&this.add.length||t&Wm&&this.rem.length||t&jh&&this.mod.length},reflow(e){if(e)return this.fork(R_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(jh,e1e(this,Zf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Zf&&(n.addF=hk(n.addF,t)),e&Wm&&(n.remF=hk(n.remF,t)),e&jh&&(n.modF=hk(n.modF,t)),e&jS&&(n.srcF=hk(n.srcF,t)),n},materialize(e){e=e||R_;const t=this;return e&Zf&&t.addF&&(t.add=u7(t.add,t.addF),t.addF=null),e&Wm&&t.remF&&(t.rem=u7(t.rem,t.remF),t.remF=null),e&jh&&t.modF&&(t.mod=u7(t.mod,t.modF),t.modF=null),e&jS&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&jS)return qm(n.source,n.srcF,r),n;e&Zf&&qm(n.add,n.addF,r),e&Wm&&qm(n.rem,n.remF,r),e&jh&&qm(n.mod,n.modF,r);const i=n.source;if(e&Qye&&i){const s=n.add.length+n.mod.length;s===i.length||(s?qm(i,e1e(n,Xye),r):qm(i,n.srcF,r))}return n}};function wee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}We(wee,qg,{fork(e){const t=new qg(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ie(e)?e.some(r=>n[r]):n[e]:0},filter(){Te("MultiPulse does not support filtering.")},materialize(){Te("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function ven(e,t,n){const r=this,i=[];if(r._pulse)return h9e(r);if(r._pending&&await r._pending,t&&await q$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new qg(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=o5(nO);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=$M),u!==$M&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await q$(r,c[f].callback)}return n&&await q$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function _en(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function ben(e,t,n){return this._pulse?h9e(this):(this.evaluate(e,t,n),this)}function wen(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function h9e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Een(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function xen(e,t){const n=e.source,r=this._clock;return n&&Ie(n)?new wee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Sen(this._pulse,n&&n.pulse)}function Sen(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==$M&&(e.source=t.source),e)}const Eee={skip:!1,force:!1};function Ten(e,t){const n=t||Eee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Cen(e,t,n){const r=n||Eee;return(e.set(t)||r.force)&&this.touch(e,r),this}function Aen(e,t,n){this.touch(e,n||Eee);const r=new qg(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Ien(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),p9e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Oen(t,0,e)):r=n,r}}}function p9e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Oen(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,p9e(e,r,t,n)}function aw(){this.logger(ree()),this.logLevel(tee),this._clock=0,this._rank=0,this._locale=gee();try{this._loader=s5()}catch{}this._touched=o5(nO),this._input={},this._pulse=null,this._heap=Ien((e,t)=>e.qrank-t.qrank),this._postrun=[]}function BS(e){return function(){return this._log[e].apply(this,arguments)}}aw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:BS("error"),warn:BS("warn"),info:BS("info"),debug:BS("debug"),logLevel:BS("level"),cleanThreshold:1e4,add:ten,connect:nen,rank:men,rerank:gen,pulse:Aen,touch:Ten,update:Cen,changeset:s_,ingest:oen,parse:sen,preload:uen,request:aen,events:ien,on:fen,evaluate:ven,run:ben,runAsync:_en,runAfter:wen,_enqueue:Een,_getPulse:xen};function Ee(e,t){Dr.call(this,e,null,t)}We(Ee,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const cE={};function m9e(e){const t=g9e(e);return t&&t.Definition||null}function g9e(e){return e=e&&e.toLowerCase(),Nt(cE,e)?cE[e]:null}function*y9e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function xee(e,t,n){const r=Float64Array.from(y9e(e,n));return r.sort(Hg),t.map(i=>lZt(r,i))}function See(e,t){return xee(e,[.25,.5,.75],t)}function Tee(e,t){const n=e.length,r=rZt(e,t),i=See(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function v9e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var cc=Math.random;function Pen(e){cc=e}function _9e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(y9e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(cc()*s)];c[l]=a/s}return c.sort(Hg),[aq(c,n/2),aq(c,1-n/2)]}function b9e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?ken(s,t+t/4):s}function ken(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function $en(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Ren(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*cc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const w9e=Math.sqrt(2*Math.PI),Nen=Math.SQRT2;let zS=NaN;function f5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(zS===zS)n=zS,zS=NaN;else{do n=cc()*2-1,r=cc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,zS=r*s}return e+n*t}function Cee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*w9e)}function d5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function h5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Nen*Den(2*e-1)}function Den(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Aee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>f5(n,r),pdf:s=>Cee(s,n,r),cdf:s=>d5(s,n,r),icdf:s=>h5(s,n,r)};return i.mean(e).stdev(t)}function Iee(e,t){const n=Aee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Tee(e)),i):t},sample(){return e[~~(cc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Oee(e,t){return e=e||0,t=t??1,Math.exp(e+f5()*t)}function Pee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*w9e*e)}function kee(e,t,n){return d5(Math.log(e),t,n)}function $ee(e,t,n){return Math.exp(h5(e,t,n))}function E9e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Oee(n,r),pdf:s=>Pee(s,n,r),cdf:s=>kee(s,n,r),icdf:s=>$ee(s,n,r)};return i.mean(e).stdev(t)}function x9e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=cc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Ree(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*cc()}function Nee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Dee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Mee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function S9e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Ree(n,r),pdf:s=>Nee(s,n,r),cdf:s=>Dee(s,n,r),icdf:s=>Mee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Lee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function sO(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function p5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function oO(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function Px(e,t,n,r,i){let s=0,o=0;return oO(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Fee(e,t,n){let r=0,i=0,s=0,o=0,a=0;oO(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=sO(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:Px(e,t,n,i,l)}}function T9e(e,t,n){let r=0,i=0,s=0,o=0,a=0;oO(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=sO(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:Px(e,t,n,i,l)}}function C9e(e,t,n){const[r,i,s,o]=p5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;oO(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=sO(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:Px(e,t,n,o,y)}}function A9e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;oO(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=sO(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:Px(e,t,n,a,c)}}function jee(e,t,n){const[r,i,s,o]=p5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,b=(f*y-d*l)/v,E=-_*u,w=x=>(x=x-s,_*x*x+b*x+E+o);return{coef:[E-b*s+_*s*s+o,b-2*_*s,_],predict:w,rSquared:Px(e,t,n,o,w)}}function I9e(e,t,n,r){if(r===0)return Lee(e,t,n);if(r===1)return Fee(e,t,n);if(r===2)return jee(e,t,n);const[i,s,o,a]=p5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=Len(c),v=_=>{_-=o;let b=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)b+=y[d]*Math.pow(_,d);return b};return{coef:Men(f,y,-o,a),predict:v,rSquared:Px(e,t,n,a,v)}}function Men(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Len(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const t1e=2,n1e=1e-12;function O9e(e,t,n,r){const[i,s,o,a]=p5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=t1e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],b=y-i[v]>i[_]-y?v:_;let E=0,w=0,x=0,S=0,P=0;const A=1/Math.abs(i[b]-y||1);for(let M=v;M<=_;++M){const R=i[M],D=s[M],L=Fen(Math.abs(y-R)*A)*d[M],V=R*L;E+=L,w+=V,x+=D*L,S+=D*V,P+=R*V}const[O,z]=sO(w/E,x/E,S/E,P/E);c[g]=O+z*y,f[g]=Math.abs(s[g]-c[g]),jen(i,g+1,p)}if(h===t1e)break;const m=O8e(f);if(Math.abs(m)<n1e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?n1e:(v=1-y*y)*v}return Ben(i,c,o,a)}function Fen(e){return(e=1-e*e*e)*e*e}function jen(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Ben(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const zen=.5*Math.PI/180;function m5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=Uen(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&Ven(f,m,d,h,p)>zen?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function Uen(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Ven(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Hen(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function yq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Hen(e)}function P9e(e,t,n){return n||e+(t?"_"+t:"")}const l7=()=>{},qen={init:l7,add:l7,rem:l7,idx:0},vA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},aO=Object.keys(vA).filter(e=>e!=="__count__");function Wen(e,t){return(n,r)=>hn({name:e,aggregate_param:r,out:n||e},qen,t)}[...aO,"__count__"].forEach(e=>{vA[e]=Wen(e,vA[e])});function k9e(e,t,n){return vA[e](n,t)}function $9e(e,t){return e.idx-t.idx}function Gen(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=vA[i]())})};return e.forEach(n),Object.values(t).sort($9e)}function Yen(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Ken(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Xen(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Qen(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function R9e(e,t){const n=t||ca,r=Gen(e),i=e.slice().sort($9e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Yen,s.prototype.add=Ken,s.prototype.rem=Xen,s.prototype.set=Qen,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Bee(e){this._key=e?ac(e):$t,this.reset()}const Oo=Bee.prototype;Oo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Oo.add=function(e){this._add.push(e)};Oo.rem=function(e){this._rem.push(e)};Oo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Oo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Nt(n,s)||(n[s]=1,++i);return i};Oo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=p8e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Oo.argmin=function(e){return this.extent(e)[0]||{}};Oo.argmax=function(e){return this.extent(e)[1]||{}};Oo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Oo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Oo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=See(this.values(),e),this._get=e),this._q};Oo.q1=function(e){return this.quartile(e)[0]};Oo.q2=function(e){return this.quartile(e)[1]};Oo.q3=function(e){return this.quartile(e)[2]};Oo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=_9e(this.values(),1e3,.05,e),this._get=e),this._ci};Oo.ci0=function(e){return this.ci(e)[0]};Oo.ci1=function(e){return this.ci(e)[1]};function _0(e){Ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}_0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:aO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};We(_0,Ee,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=nt(ta(v)),b=_.length;let E=0,w;for(;E<b;++E)r[w=_[E]]||(r[w]=1,t.push(w))}this._dims=nt(e.groupby),this._dnames=this._dims.map(v=>{const _=ji(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:yq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Te("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Te("Null aggregate field specified."),m=ji(f),g=P9e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(k9e(d,h,g))}return this._measures=this._measures.map(v=>R9e(v,v.field)),Object.create(null)},cellkey:yq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Bee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?f9e(t.tuple,s):dr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Jen=1e-14;function zee(e){Ee.call(this,null,e)}zee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};We(zee,Ee,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ta(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=v9e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Xo(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Jen+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Lu(u,ta(t),e.name||"bin_"+ji(t))}});function N9e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?b8e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Uee(e){Ee.call(this,[],e)}Uee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};We(Uee,Ee,{transform(e,t){const n=t.fork(t.ALL),r=N9e($t,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(i_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function D9e(e){Dr.call(this,null,Zen,e)}We(D9e,Dr);function Zen(e){return this.value&&!e.modified()?this.value:aee(e.fields,e.orders)}function Vee(e){Ee.call(this,null,e)}Vee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function etn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}We(Vee,Ee,{transform(e,t){const n=f=>d=>{for(var h=etn(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=dr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Hee(e){Ee.call(this,null,e)}Hee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};We(Hee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=ttn(a,i,s,e.filter||uc)):n.mod=a,n.source=this.value,n.modifies(r)}});function ttn(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(dr(s)),s={},s[t]=l);return i}const r1e={kde:Iee,mixture:x9e,normal:Aee,lognormal:E9e,uniform:S9e},ntn="distributions",i1e="function",rtn="field";function M9e(e,t){const n=e[i1e];Nt(r1e,n)||Te("Unknown distribution function: "+n);const r=r1e[n]();for(const i in e)i===rtn?r.data((e.from||t()).map(e[i])):i===ntn?r[i](e[i].map(s=>M9e(s,t))):typeof r[i]===i1e&&r[i](e[i]);return r}function qee(e){Ee.call(this,null,e)}const L9e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],itn={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:L9e},{name:"weights",type:"number",array:!0}]};qee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:L9e.concat(itn)},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(qee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=M9e(e.distribution,stn(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Te("Invalid density method: "+o),!e.extent&&!r.data&&Te("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||th(r.data()),l=m5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],dr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function stn(e){return()=>e.materialize(e.SOURCE).source}function F9e(e,t){return e?e.map((n,r)=>t[r]||ji(n)):null}function Wee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const j9e="bin";function Gee(e){Ee.call(this,null,e)}Gee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:j9e}]};const otn=(e,t)=>rO(th(e,t))/30;We(Gee,Ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Wee(t.source,e.groupby,ca),i=e.smooth||!1,s=e.field,o=e.step||otn(n,s),a=i_((p,m)=>s(p)-s(m)),u=e.as||j9e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of b9e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function B9e(e){Dr.call(this,null,atn,e),this.modified(!0)}We(B9e,Dr);function atn(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Lu(n=>t(n,e),ta(t),ji(t))}function Yee(e){Ee.call(this,[void 0,void 0],e)}Yee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};We(Yee,Ee,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Xo(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=ji(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Kee(e,t){Dr.call(this,e),this.parent=t,this.count=0}We(Kee,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function g5(e){Ee.call(this,{},e),this._keys=Ax();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}We(g5,Ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Nt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Kee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=$t(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set($t(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=$t(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get($t(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=$t(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function z9e(e){Dr.call(this,null,utn,e)}We(z9e,Dr);function utn(e){return this.value&&!e.modified()?this.value:Ie(e.name)?nt(e.name).map(t=>ac(t)):ac(e.name,e.as)}function Xee(e){Ee.call(this,Ax(),e)}Xee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};We(Xee,Ee,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=$t(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set($t(f),1)});function c(f){const d=$t(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Qee(e){Ee.call(this,[],e)}Qee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};We(Qee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=F9e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=bee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Jee(e){Ee.call(this,[],e)}Jee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};We(Jee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(ji),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=bee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Zee(e){Ee.call(this,null,e)}Zee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};We(Zee,Ee,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function U9e(e){Ee.call(this,[],e)}We(U9e,Ee,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=dr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const pk={value:"value",median:O8e,mean:cZt,min:oq,max:F1},ltn=[];function ete(e){Ee.call(this,[],e)}ete.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ctn(e){var t=e.method||pk.value,n;if(pk[t]==null)Te("Unrecognized imputation method: "+t);else return t===pk.value?(n=e.value!==void 0?e.value:0,()=>n):pk[t]}function ftn(e){const t=e.field;return n=>n?t(n):NaN}We(ete,Ee,{transform(e,t){var n=t.fork(t.ALL),r=ctn(e),i=ftn(e),s=ji(e.field),o=ji(e.key),a=(e.groupby||[]).map(ji),u=dtn(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,b,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,b=p.length;y<b;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(dr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function dtn(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):ltn)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function tte(e){_0.call(this,e)}tte.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:aO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};We(tte,_0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function nte(e){Ee.call(this,null,e)}nte.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(nte,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Wee(r,e.groupby,e.field),s=(e.groupby||[]).map(ji),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Te("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=th(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Iee(h,o)[a],m=e.counts?h.length:1,g=c||th(h);m5(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(dr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function V9e(e){Dr.call(this,null,htn,e)}We(V9e,Dr);function htn(e){return this.value&&!e.modified()?this.value:lee(e.fields,e.flat)}function H9e(e){Ee.call(this,[],e),this._pending=null}We(H9e,Ee,{transform(e,t){const n=t.dataflow;return this._pending?c7(this,t,this._pending):ptn(e)?t.StopPropagation:e.values?c7(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>c7(this,t,nt(r.data)))}});function ptn(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function c7(e,t,n){n.forEach(dr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function rte(e){Ee.call(this,{},e)}rte.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};We(rte,Ee,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Te('The "as" parameter has too few output field names.'),c=c||i.map(ji),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Te("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function q9e(e){Dr.call(this,null,mtn,e)}We(q9e,Dr);function mtn(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function W9e(e){Dr.call(this,null,gtn,e)}We(W9e,Dr);function gtn(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function G9e(e){Ee.call(this,null,e)}We(G9e,Ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ite(e){_0.call(this,e)}ite.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:aO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};We(ite,_0,{_transform:_0.prototype.transform,transform(e,t){return this._transform(ytn(e,t),t)}});function ytn(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ta(n).concat(ta(r)),o=_tn(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>vtn(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function vtn(e,t,n,r){return Lu(i=>t(i)===e?n(i):NaN,r,e+"")}function _tn(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(r5),t?i.slice(0,t):i}function Y9e(e){g5.call(this,e)}We(Y9e,g5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow($t(s),n,t,s);return(e.modified("field")||r&&t.modified(ta(r)))&&Te("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(dr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ste(e){Ee.call(this,null,e)}ste.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};We(ste,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=F9e(e.fields,e.as||[]),s=r?(a,u)=>btn(a,u,r,i):u5;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=$t(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,dr({}));o[$t(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[$t(a)]))}),n}});function btn(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function K9e(e){Ee.call(this,null,e)}We(K9e,Ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ote(e){Ee.call(this,null,e)}ote.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const wtn=1e-14;We(ote,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Wee(i,e.groupby,e.field),o=(e.groupby||[]).map(ji),a=[],u=e.step||.01,l=e.probs||r_(u/2,1-wtn,u),c=l.length;return s.forEach(f=>{const d=xee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(dr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function X9e(e){Ee.call(this,null,e)}We(X9e,Ee,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=$t(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=bee(i);r[$t(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[$t(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function ate(e){Ee.call(this,[],e),this.count=0}ate.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};We(ate,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[$t(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*cc()),d<o.length&&d>=u&&(f=o[d],s[$t(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=$t(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[$t(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[$t(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[$t(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[$t(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[$t(c)])),this.count=a,this.value=n.source=o,n}});function ute(e){Ee.call(this,null,e)}ute.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};We(ute,Ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=r_(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,dr(s)}),n.add=t.add.concat(this.value),n}});function Q9e(e){Ee.call(this,null,e),this.modified(!0)}We(Q9e,Ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function lte(e){Ee.call(this,null,e)}const J9e=["unit0","unit1"];lte.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:hee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:J9e}]};We(lte,Ee,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?Ox:Ix)(s.unit).offset,a=e.as||J9e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ta(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:K8e({extent:e.extent||th(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=pee(r),o=this.value||{},a=(n?B8e:j8e)(s,i);return a.unit=Un(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function Z9e(e){Ee.call(this,Ax(),e)}We(Z9e,Ee,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function eje(e){Ee.call(this,null,e)}We(eje,Ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(i_(e.sort)):t.source).map(e.field))}});function Etn(e,t,n,r){const i=_A[e](t,n);return{init:i.init||ig,update:function(s,o){o[r]=i.next(s)}}}const _A={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=_A.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Te("ntile num must be greater than zero.");const n=_A.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Te("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=xtn(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function xtn(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Stn=Object.keys(_A);function tje(e){const t=nt(e.ops),n=nt(e.fields),r=nt(e.params),i=nt(e.aggregate_params),s=nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){nt(ta(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=ji(g),b=P9e(p,_,s[m]);if(h(g),o.push(b),Nt(_A,p))a.push(Etn(p,g,y,b));else{if(g==null&&p!=="count"&&Te("Null aggregate field specified."),p==="count"){c.push(b);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(k9e(p,v,b))}}),(c.length||f.length)&&(this.cell=Ttn(f,c,d)),this.inputs=Object.keys(u)}const nje=tje.prototype;nje.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};nje.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Ttn(e,t,n){e=e.map(u=>R9e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Bee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function cte(e){Ee.call(this,{},e),this._mlen=0,this._mods=[]}cte.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Stn.concat(aO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};We(cte,Ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=i_(e.sort),i=yq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new tje(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Ctn(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=N9e($t),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Ctn(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?iO(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||fa(-1)};t.init();for(let f=0;f<u;++f)Atn(c,o,f,u),s&&Itn(c,l),t.update(c,a[f])}function Atn(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Itn(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Otn=Object.freeze(Object.defineProperty({__proto__:null,aggregate:_0,bin:zee,collect:Uee,compare:D9e,countpattern:Vee,cross:Hee,density:qee,dotbin:Gee,expression:B9e,extent:Yee,facet:g5,field:z9e,filter:Xee,flatten:Qee,fold:Jee,formula:Zee,generate:U9e,impute:ete,joinaggregate:tte,kde:nte,key:V9e,load:H9e,lookup:rte,multiextent:q9e,multivalues:W9e,params:G9e,pivot:ite,prefacet:Y9e,project:ste,proxy:K9e,quantile:ote,relay:X9e,sample:ate,sequence:ute,sieve:Q9e,subflow:Kee,timeunit:lte,tupleindex:Z9e,values:eje,window:cte},Symbol.toStringTag,{value:"Module"}));function Wg(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Ptn=()=>typeof Image<"u"?Image:null;function fte(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const ktn="identity",fE="linear",Zp="log",uO="pow",lO="sqrt",y5="symlog",hv="time",pv="utc",Fd="sequential",kx="diverging",dE="quantile",v5="quantize",_5="threshold",dte="ordinal",vq="point",rje="band",hte="bin-ordinal",$s="continuous",cO="discrete",fO="discretizing",Sc="interpolating",pte="temporal";function $tn(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Rtn(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function mte(){const e=JE().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=fte(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=r_(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,PM(h,m)-1),v=m===g?y:PM(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return mte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function ije(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ije(t())},e}function Ntn(){return ije(mte().paddingInner(1))}var Dtn=Array.prototype.map;function Mtn(e){return Dtn.call(e,Xo)}const Ltn=Array.prototype.slice;function sje(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(tZt(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Mtn(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Ltn.call(r),n):t.slice()},n.tickFormat=function(r,i){return N$e(e[0],Un(e),r??10,i)},n.copy=function(){return sje().domain(n.domain()).range(n.range())},n}const RM=new Map,oje=Symbol("vega_scale");function aje(e){return e[oje]=!0,e}function Ftn(e){return e&&e[oje]===!0}function jtn(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?$tn(s):s.invertExtent?Rtn(s):void 0),s.type=e,aje(s)};return r.metadata=_f(nt(n)),r}function or(e,t,n){return arguments.length>1?(RM.set(e,jtn(e,t,n)),this):uje(e)?RM.get(e):void 0}or(ktn,D$e);or(fE,jp,$s);or(Zp,L$e,[$s,Zp]);or(uO,WK,$s);or(lO,KOt,$s);or(y5,F$e,$s);or(hv,J$e,[$s,pte]);or(pv,gkt,[$s,pte]);or(Fd,XK,[$s,Sc]);or(`${Fd}-${fE}`,XK,[$s,Sc]);or(`${Fd}-${Zp}`,Z$e,[$s,Sc,Zp]);or(`${Fd}-${uO}`,QK,[$s,Sc]);or(`${Fd}-${lO}`,ykt,[$s,Sc]);or(`${Fd}-${y5}`,eRe,[$s,Sc]);or(`${kx}-${fE}`,tRe,[$s,Sc]);or(`${kx}-${Zp}`,nRe,[$s,Sc,Zp]);or(`${kx}-${uO}`,JK,[$s,Sc]);or(`${kx}-${lO}`,vkt,[$s,Sc]);or(`${kx}-${y5}`,rRe,[$s,Sc]);or(dE,j$e,[fO,dE]);or(v5,B$e,fO);or(_5,z$e,fO);or(hte,sje,[cO,fO]);or(dte,JE,cO);or(rje,mte,cO);or(vq,Ntn,cO);function uje(e){return RM.has(e)}function o_(e,t){const n=RM.get(e);return n&&n.metadata[t]}function gte(e){return o_(e,$s)}function hE(e){return o_(e,cO)}function _q(e){return o_(e,fO)}function lje(e){return o_(e,Zp)}function Btn(e){return o_(e,pte)}function cje(e){return o_(e,Sc)}function fje(e){return o_(e,dE)}const ztn=["clamp","base","constant","exponent"];function dje(e,t){const n=t[0],r=Un(t)-n;return function(i){return e(n+i*r)}}function b5(e,t,n){return RK(yte(t||"rgb",n),e)}function hje(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function pje(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?fa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=or(s)().domain([t,n]).range([0,1]),ztn.forEach(a=>e[a]?o[a](e[a]()):0),o)}function yte(e,t){const n=Y2t[Utn(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Utn(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Vtn={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Htn={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function mje(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function gje(e,t){for(const n in e)vte(n,t(e[n]))}const s1e={};gje(Htn,mje);gje(Vtn,e=>b5(mje(e)));function vte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(s1e[e]=t,this):s1e[e]}const G$="symbol",qtn="discrete",Wtn="gradient",Gtn=e=>Ie(e)?e.map(t=>String(t)):String(e),Ytn=(e,t)=>e[1]-t[1],Ktn=(e,t)=>t[1]-e[1];function _te(e,t,n){let r;return Jn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(rO(e.domain())/n||1)+1))),ot(t)&&(r=t.step,t=t.interval),rt(t)&&(t=e.type===hv?Ix(t):e.type==pv?Ox(t):Te("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function yje(e,t,n){let r=e.range(),i=r[0],s=Un(r),o=Ytn;if(i>s&&(r=s,s=i,i=r,o=Ktn),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Un(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function bte(e,t){return e.bins?yje(e,e.bins):e.ticks?e.ticks(t):e.domain()}function vje(e,t,n,r,i,s){const o=t.type;let a=Gtn;if(o===hv||i===hv)a=e.timeFormat(r);else if(o===pv||i===pv)a=e.utcFormat(r);else if(lje(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=_je(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function _je(e,t,n){const r=bte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const bq={[dE]:"quantiles",[v5]:"thresholds",[_5]:"domain"},bje={[dE]:"quantiles",[v5]:"domain"};function wje(e,t){return e.bins?Jtn(e.bins):e.type===Zp?_je(e,t,!0):bq[e.type]?Qtn(e[bq[e.type]]()):bte(e,t)}function Xtn(e,t,n){const r=t[bje[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Qtn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Jtn(e){const t=e.slice(0,-1);return t.max=Un(e),t}const Ztn=e=>bq[e.type]||e.bins;function Eje(e,t,n,r,i,s,o){const a=bje[t.type]&&s!==hv&&s!==pv?Xtn(e,t,i):vje(e,t,n,i,s,o);return r===G$&&Ztn(t)?enn(a):r===qtn?tnn(a):nnn(a)}const enn=e=>(t,n,r)=>{const i=o1e(r[n+1],o1e(r.max,1/0)),s=a1e(t,e),o=a1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},o1e=(e,t)=>e??t,tnn=e=>(t,n)=>n?e(t):null,nnn=e=>t=>e(t),a1e=(e,t)=>Number.isFinite(e)?t(e):null;function rnn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Un(t),s=i-r;if(e.type===_5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function inn(e,t,n,r){const i=r||t.type;return rt(n)&&Btn(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===hv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===pv?e.utcFormat("%A, %d %B %Y, %X UTC"):Eje(e,t,5,null,n,r,!0)}function xje(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=inn(e,t,n.format,n.formatType);if(_q(t.type)){const s=wje(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(hE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Un(s))}`}}let Sje=0;function snn(){Sje=0}const NM="p_";function wte(e){return e&&e.gradient}function Tje(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?NM:"";return i||(i=e.id="gradient_"+Sje++,r==="radial"?(e.x1=zf(e.x1,.5),e.y1=zf(e.y1,.5),e.r1=zf(e.r1,0),e.x2=zf(e.x2,.5),e.y2=zf(e.y2,.5),e.r2=zf(e.r2,.5),s=NM):(e.x1=zf(e.x1,0),e.y1=zf(e.y1,0),e.x2=zf(e.x2,1),e.y2=zf(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function zf(e,t){return e??t}function Cje(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const u1e={basis:{curve:Rkt},"basis-closed":{curve:Nkt},"basis-open":{curve:Dkt},bundle:{curve:Mkt,tension:"beta",value:.85},cardinal:{curve:Lkt,tension:"tension",value:0},"cardinal-open":{curve:jkt,tension:"tension",value:0},"cardinal-closed":{curve:Fkt,tension:"tension",value:0},"catmull-rom":{curve:Bkt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:zkt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Ukt,tension:"alpha",value:.5},linear:{curve:ZK},"linear-closed":{curve:Vkt},monotone:{horizontal:qkt,vertical:Hkt},natural:{curve:Wkt},step:{curve:Gkt},"step-after":{curve:Kkt},"step-before":{curve:Ykt}};function Ete(e,t,n){var r=Nt(u1e,e)&&u1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const onn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},ann=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,unn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,lnn=/^((\s+,?\s*)|(,\s*))/,cnn=/^[01]/;function pE(e){const t=[];return(e.match(ann)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=onn[s],a=fnn(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function fnn(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?cnn:unn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(lnn);u!==null&&(i+=u[0].length)}return r}const b0=Math.PI/180,dnn=1e-14,Ky=Math.PI/2,pd=Math.PI*2,N_=Math.sqrt(3)/2;var f7={},d7={},Aje=[].join;function hnn(e,t,n,r,i,s,o,a,u){const l=Aje.call(arguments);if(f7[l])return f7[l];const c=o*b0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,b=g*a+y*u,E=v*a+_*u,w=g*e+y*t,x=v*e+_*t;let P=1/((w-b)*(w-b)+(x-E)*(x-E))-.25;P<0&&(P=0);let A=Math.sqrt(P);s==i&&(A=-A);const O=.5*(b+w)-A*(x-E),z=.5*(E+x)+A*(w-b),M=Math.atan2(E-z,b-O);let D=Math.atan2(x-z,w-O)-M;D<0&&s===1?D+=pd:D>0&&s===0&&(D-=pd);const L=Math.ceil(Math.abs(D/(Ky+.001))),V=[];for(let B=0;B<L;++B){const H=M+B*D/L,U=M+(B+1)*D/L;V[B]=[O,z,H,U,n,r,f,d]}return f7[l]=V}function pnn(e){const t=Aje.call(e);if(d7[t])return d7[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),b=8/3*_*_/Math.sin(v),E=n+p-b*m,w=r+m+b*p,x=n+g,S=r+y,P=x+b*y,A=S-b*g;return d7[t]=[c*E+f*w,d*E+h*w,c*P+f*A,d*P+h*A,c*x+f*S,d*x+h*S]}const Rl=["l",0,0,0,0,0,0,0];function mnn(e,t,n){const r=Rl[0]=e[0];if(r==="a"||r==="A")Rl[1]=t*e[1],Rl[2]=n*e[2],Rl[3]=e[3],Rl[4]=e[4],Rl[5]=e[5],Rl[6]=t*e[6],Rl[7]=n*e[7];else if(r==="h"||r==="H")Rl[1]=t*e[1];else if(r==="v"||r==="V")Rl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Rl[i]=(i%2==1?t:n)*e[i];return Rl}function bA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=mnn(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":l1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":l1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function l1e(e,t,n,r){const i=hnn(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=pnn(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const c1e=.5773502691896257,f1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,pd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=N_*n,i=r-n*c1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=N_*n,i=r-n*c1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=N_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=N_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=N_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=N_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Ije(e){return Nt(f1e,e)?f1e[e]:gnn(e)}var h7={};function gnn(e){if(!Nt(h7,e)){const t=pE(e);h7[e]={draw:function(n,r){bA(n,t,0,0,Math.sqrt(r)/2)}}}return h7[e]}const Rm=.448084975506;function ynn(e){return e.x}function vnn(e){return e.y}function _nn(e){return e.width}function bnn(e){return e.height}function Ph(e){return typeof e=="function"?e:()=>+e}function mk(e,t,n){return Math.max(t,Math.min(e,n))}function Oje(){var e=ynn,t=vnn,n=_nn,r=bnn,i=Ph(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=mk(+i.call(this,c),0,v),b=mk(+s.call(this,c),0,v),E=mk(+o.call(this,c),0,v),w=mk(+a.call(this,c),0,v);if(u||(u=h=E4()),_<=0&&b<=0&&E<=0&&w<=0)u.rect(p,m,g,y);else{var x=p+g,S=m+y;u.moveTo(p+_,m),u.lineTo(x-b,m),u.bezierCurveTo(x-Rm*b,m,x,m+Rm*b,x,m+b),u.lineTo(x,S-w),u.bezierCurveTo(x,S-Rm*w,x-Rm*w,S,x-w,S),u.lineTo(p+E,S),u.bezierCurveTo(p+Rm*E,S,p,S-Rm*E,p,S-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+Rm*_,p+Rm*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Ph(c),l):e},l.y=function(c){return arguments.length?(t=Ph(c),l):t},l.width=function(c){return arguments.length?(n=Ph(c),l):n},l.height=function(c){return arguments.length?(r=Ph(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ph(c),s=f!=null?Ph(f):i,a=d!=null?Ph(d):i,o=h!=null?Ph(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function Pje(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,b=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(o+v,a+_),i.arc(o,a,u,b,b+Math.PI)}else i.arc(f,d,p,0,pd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=E4()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function dO(e,t){return e??t}const hO=e=>e.x||0,pO=e=>e.y||0,wnn=e=>e.width||0,Enn=e=>e.height||0,xnn=e=>(e.x||0)+(e.width||0),Snn=e=>(e.y||0)+(e.height||0),Tnn=e=>e.startAngle||0,Cnn=e=>e.endAngle||0,Ann=e=>e.padAngle||0,Inn=e=>e.innerRadius||0,Onn=e=>e.outerRadius||0,Pnn=e=>e.cornerRadius||0,knn=e=>dO(e.cornerRadiusTopLeft,e.cornerRadius)||0,$nn=e=>dO(e.cornerRadiusTopRight,e.cornerRadius)||0,Rnn=e=>dO(e.cornerRadiusBottomRight,e.cornerRadius)||0,Nnn=e=>dO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Dnn=e=>dO(e.size,64),Mnn=e=>e.size||1,w5=e=>e.defined!==!1,Lnn=e=>Ije(e.shape||"circle"),Fnn=wV().startAngle(Tnn).endAngle(Cnn).padAngle(Ann).innerRadius(Inn).outerRadius(Onn).cornerRadius(Pnn),jnn=lRe().x(hO).y1(pO).y0(Snn).defined(w5),Bnn=lRe().y(pO).x1(hO).x0(xnn).defined(w5),znn=uRe().x(hO).y(pO).defined(w5),Unn=Oje().x(hO).y(pO).width(wnn).height(Enn).cornerRadius(knn,$nn,Rnn,Nnn),Vnn=$kt().type(Lnn).size(Dnn),Hnn=Pje().x(hO).y(pO).defined(w5).size(Mnn);function xte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function qnn(e,t){return Fnn.context(e)(t)}function Wnn(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Bnn:jnn).curve(Ete(r,n.orient,n.tension)).context(e)(t)}function Gnn(e,t){const n=t[0],r=n.interpolate||"linear";return znn.curve(Ete(r,n.orient,n.tension)).context(e)(t)}function $x(e,t,n,r){return Unn.context(e)(t,n,r)}function Ynn(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Knn(e,t){return Vnn.context(e)(t)}function Xnn(e,t){return Hnn.context(e)(t)}var kje=1;function $je(){kje=1}function Ste(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+kje++),o=i.clipping[s]||(i.clipping[s]={id:s});return pn(r)?o.path=r(null):xte(n)?o.path=$x(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function cs(e){this.clear(),e&&this.union(e)}cs.prototype={clone(){return new cs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function E5(e){this.mark=e,this.bounds=this.bounds||new cs}function x5(e){E5.call(this,e),this.items=this.items||[]}We(x5,E5);function Tte(e){this._pending=0,this._loader=e||s5()}function d1e(e){e._pending+=1}function US(e){e._pending-=1}Tte.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return d1e(t),t._loader.sanitize(e,{context:"href"}).then(n=>(US(t),n)).catch(()=>(US(t),null))},loadImage(e){const t=this,n=Ptn();return d1e(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Nt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>US(t),s.onerror=()=>US(t),s.src=i,s}).catch(r=>(US(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function gm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Qnn(t,r):0))}return e}function Qnn(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Jnn=pd-1e-8;let S5,Y$,K$,v1,wq,X$,Eq,xq;const pg=(e,t)=>S5.add(e,t),Q$=(e,t)=>pg(Y$=e,K$=t),h1e=e=>pg(e,S5.y1),p1e=e=>pg(S5.x1,e),Xy=(e,t)=>wq*e+Eq*t,Qy=(e,t)=>X$*e+xq*t,p7=(e,t)=>pg(Xy(e,t),Qy(e,t)),m7=(e,t)=>Q$(Xy(e,t),Qy(e,t));function mO(e,t){return S5=e,t?(v1=t*b0,wq=xq=Math.cos(v1),X$=Math.sin(v1),Eq=-X$):(wq=xq=1,v1=X$=Eq=0),Znn}const Znn={beginPath(){},closePath(){},moveTo:m7,lineTo:m7,rect(e,t,n,r){v1?(p7(e+n,t),p7(e+n,t+r),p7(e,t+r),m7(e,t)):(pg(e+n,t+r),Q$(e,t))},quadraticCurveTo(e,t,n,r){const i=Xy(e,t),s=Qy(e,t),o=Xy(n,r),a=Qy(n,r);m1e(Y$,i,o,h1e),m1e(K$,s,a,p1e),Q$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Xy(e,t),a=Qy(e,t),u=Xy(n,r),l=Qy(n,r),c=Xy(i,s),f=Qy(i,s);g1e(Y$,o,u,c,h1e),g1e(K$,a,l,f,p1e),Q$(c,f)},arc(e,t,n,r,i,s){if(r+=v1,i+=v1,Y$=n*Math.cos(i)+e,K$=n*Math.sin(i)+t,Math.abs(i-r)>Jnn)pg(e-n,t-n),pg(e+n,t+n);else{const o=l=>pg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%pd,r<0&&(r+=pd),i=i%pd,i<0&&(i+=pd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=pd,a=r-r%Ky,u=0;u<4&&a>i;++u,a-=Ky)o(a);else for(a=r-r%Ky+Ky,u=0;u<4&&a<i;++u,a=a+Ky)o(a)}}};function m1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function g1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>dnn?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(y1e(u,e,t,n,r)),0<l&&l<1&&i(y1e(l,e,t,n,r))}function y1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Gg=(Gg=Wg(1,1))?Gg.getContext("2d"):null;const Sq=new cs;function Cte(e){return function(t,n){if(!Gg)return!0;e(Gg,t),Sq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=Sq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Gg.isPointInPath(u,a))return!0;return!1}}function Ate(e,t){return t.contains(e.x||0,e.y||0)}function Rje(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(Sq.set(n,r,n+i,r+s))}function Nje(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Ab(t,n,r,i,s)}function Ab(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function mE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Nc(e,t){return e??t}function v1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function ern(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Nc(t.x1,.5)*r,n.y1+Nc(t.y1,.5)*i,Math.max(r,i)*Nc(t.r1,0),n.x1+Nc(t.x2,.5)*r,n.y1+Nc(t.y2,.5)*i,Math.max(r,i)*Nc(t.r2,.5));else{const o=Nc(t.x1,0),a=Nc(t.y1,0),u=Nc(t.x2,1),l=Nc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Wg(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=v1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return v1e(s,t.stops)}function Dje(e,t,n){return wte(n)?ern(e,n,t.bounds):n}function DM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Dje(e,t,t.fill),!0):!1}var trn=[];function gE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Dje(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||trn),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function nrn(e,t){return e.zindex-t.zindex||e.index-t.index}function Ite(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(nrn)}function wf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Ite(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function MM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Ite(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Ote(e){return function(t,n,r){wf(n,i=>{(!r||r.intersects(i.bounds))&&Mje(e,t,i,i)})}}function rrn(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Mje(e,t,n.items[0],n.items)}}function Mje(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(mE(t,n),n.fill&&DM(t,n,i)&&t.fill(),n.stroke&&gE(t,n,i)&&t.stroke()))}function T5(e){return e=e||uc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,MM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function gO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Pte(e){return T5(gO(e))}function j1(e,t){return"translate("+e+","+t+")"}function kte(e){return"rotate("+e+")"}function irn(e,t){return"scale("+e+","+t+")"}function Lje(e){return j1(e.x||0,e.y||0)}function srn(e){return j1(e.x||0,e.y||0)+(e.angle?" "+kte(e.angle):"")}function orn(e){return j1(e.x||0,e.y||0)+(e.angle?" "+kte(e.angle):"")+(e.scaleX||e.scaleY?" "+irn(e.scaleX||1,e.scaleY||1):"")}function $te(e,t,n){function r(o,a){o("transform",srn(a)),o("d",t(null,a))}function i(o,a){return t(mO(o,a.angle),a),gm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=b0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Ote(s),pick:Pte(s),isect:n||Cte(s)}}var arn=$te("arc",qnn);function urn(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function lrn(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function crn(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Rte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(mO(u),c),gm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=gO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:rrn(s),pick:a,isect:Ate,tip:n}}var frn=Rte("area",Wnn,urn);function drn(e,t){var n=t.clip;e.save(),pn(n)?(e.beginPath(),n(e),e.clip()):Fje(e,t.group)}function Fje(e,t){e.beginPath(),xte(t)?$x(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function jje(e){const t=Nc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function hrn(e,t){e("transform",Lje(t))}function Bje(e,t){const n=jje(t);e("d",$x(null,t,n,n))}function prn(e,t){e("class","background"),e("aria-hidden",!0),Bje(e,t)}function mrn(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Bje(e,t):e("d","")}function grn(e,t,n){const r=t.clip?Ste(n,t,t):null;e("clip-path",r)}function yrn(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),gm(e,t),e.translate(t.x||0,t.y||0)}function wA(e,t,n,r){const i=jje(t);e.beginPath(),$x(e,t,(n||0)+i,(r||0)+i)}const vrn=gO(wA),_rn=gO(wA,!1),brn=gO(wA,!0);function wrn(e,t,n,r){wf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(wA(e,i,s,o),mE(e,i),i.fill&&DM(e,i,u)&&e.fill(),i.stroke&&!a&&gE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&Fje(e,i),n&&n.translate(-s,-o),wf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(wA(e,i,s,o),mE(e,i),gE(e,i,u)&&e.stroke())})}function Ern(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return MM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&xte(u)&&!brn(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&_rn(e,u,o,a)?(e.restore(),u):(l=MM(u,v=>xrn(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&vrn(e,u,o,a)&&(l=u),e.restore(),l||null)})}function xrn(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Srn={type:"group",tag:"g",nested:!1,attr:hrn,bound:yrn,draw:wrn,pick:Ern,isect:Rje,content:grn,background:prn,foreground:mrn},EA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Nte(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Dte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Mte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function C5(e,t){return e==="center"?t/2:e==="right"?t:0}function A5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Trn(e,t,n){const r=Nte(t,n),i=Dte(t,r),s=Mte(t,r),o=(t.x||0)-C5(t.align,i),a=(t.y||0)-A5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,EA["xmlns:xlink"],"xlink:href"),e("transform",j1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Crn(e,t){const n=t.image,r=Dte(t,n),i=Mte(t,n),s=(t.x||0)-C5(t.align,r),o=(t.y||0)-A5(t.baseline,i);return e.set(s,o,s+r,o+i)}function Arn(e,t,n){wf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Nte(r,this);let s=Dte(r,i),o=Mte(r,i);if(s===0||o===0)return;let a=(r.x||0)-C5(r.align,s),u=(r.y||0)-A5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(mE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Irn={type:"image",tag:"image",nested:!1,attr:Trn,bound:Crn,draw:Arn,pick:T5(),isect:uc,get:Nte,xOffset:C5,yOffset:A5},Orn=Rte("line",Gnn,lrn);function Prn(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",orn(t)),e("d",t.path)}function J$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*b0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=pE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),bA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):bA(e,u,r,i,s,o)}function krn(e,t){return J$(mO(e,t.angle),t)?e.set(0,0,0,0):gm(e,t,!0)}var $rn={type:"path",tag:"path",nested:!1,attr:Prn,bound:krn,draw:Ote(J$),pick:Pte(J$),isect:Cte(J$)};function Rrn(e,t){e("d",$x(null,t))}function Nrn(e,t){var n,r;return gm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function _1e(e,t){e.beginPath(),$x(e,t)}var Drn={type:"rect",tag:"path",nested:!1,attr:Rrn,bound:Nrn,draw:Ote(_1e),pick:Pte(_1e),isect:Rje};function Mrn(e,t){e("transform",Lje(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Lrn(e,t){var n,r;return gm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function zje(e,t,n){var r,i,s,o;return t.stroke&&gE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Frn(e,t,n){wf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&zje(e,r,i)&&(mE(e,r),e.stroke())}})}function jrn(e,t,n,r){return e.isPointInStroke?zje(e,t,1)&&e.isPointInStroke(n,r):!1}var Brn={type:"rule",tag:"line",nested:!1,attr:Mrn,bound:Lrn,draw:Frn,pick:T5(jrn),isect:Nje},zrn=$te("shape",Ynn),Urn=$te("symbol",Knn,Ate);const b1e=_8e();var ul={height:yh,measureWidth:Lte,estimateWidth:LM,width:LM,canvas:Uje};Uje(!0);function Uje(e){ul.width=e&&Gg?Lte:LM}function LM(e,t){return Vje(E0(e,t),yh(e))}function Vje(e,t){return~~(.8*e.length*t)}function Lte(e,t){return yh(e)<=0||!(t=E0(e,t))?0:Hje(t,I5(e))}function Hje(e,t){const n=`(${t}) ${e}`;let r=b1e.get(n);return r===void 0&&(Gg.font=t,r=Gg.measureText(e).width,b1e.set(n,r)),r}function yh(e){return e.fontSize!=null?+e.fontSize||0:11}function w0(e){return e.lineHeight!=null?e.lineHeight:yh(e)+2}function Vrn(e){return Ie(e)?e.length>1?e:e[0]:e}function yO(e){return Vrn(e.lineBreak&&e.text&&!Ie(e.text)?e.text.split(e.lineBreak):e.text)}function Fte(e){const t=yO(e);return(Ie(t)?t.length-1:0)*w0(e)}function E0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?qrn(e,n):n}function Hrn(e){if(ul.width===Lte){const t=I5(e);return n=>Hje(n,t)}else if(ul.width===LM){const t=yh(e);return n=>Vje(n,t)}else return t=>ul.width(e,t)}function qrn(e,t){var n=+e.limit,r=Hrn(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function vO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function I5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+yh(e)+"px "+vO(e,t)}function jte(e){var t=e.baseline,n=yh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*w0(e):t==="line-bottom"?.29*n-.5*w0(e):0)}const Wrn={left:"start",center:"middle",right:"end"},D2=new cs;function O5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ky,t+=r*Math.cos(i),n+=r*Math.sin(i)),D2.x1=t,D2.y1=n,D2}function Grn(e,t){var n=t.dx||0,r=(t.dy||0)+jte(t),i=O5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Wrn[t.align]||"start"),a?(u=j1(s,o)+" "+kte(a),(n||r)&&(u+=" "+j1(n,r))):u=j1(s+n,o+r),e("transform",u)}function Bte(e,t,n){var r=ul.height(t),i=t.align,s=O5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+jte(t)-Math.round(.8*r),c=yO(t),f;if(Ie(c)?(r+=w0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ul.width(t,h)),0)):f=ul.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*b0,o,a);else if(n===2)return e.rotatedPoints(t.angle*b0,o,a);return e}function Yrn(e,t,n){wf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=I5(r),e.textAlign=r.align||"left",s=O5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*b0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+jte(r),c=yO(r),mE(e,r),Ie(c))for(l=w0(r),u=0;u<c.length;++u)f=E0(r,c[u]),r.fill&&DM(e,r,i)&&e.fillText(f,o,a),r.stroke&&gE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=E0(r,c),r.fill&&DM(e,r,i)&&e.fillText(f,o,a),r.stroke&&gE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Krn(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=O5(t),a=o.x1,u=o.y1,l=Bte(D2,t,1),c=-t.angle*b0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function Xrn(e,t){const n=Bte(D2,e,2);return Ab(t,n[0],n[1],n[2],n[3])||Ab(t,n[0],n[1],n[4],n[5])||Ab(t,n[4],n[5],n[6],n[7])||Ab(t,n[2],n[3],n[6],n[7])}var Qrn={type:"text",tag:"text",nested:!1,attr:Grn,bound:Bte,draw:Yrn,pick:T5(Krn),isect:Xrn},Jrn=Rte("trail",Xnn,crn),_l={arc:arn,area:frn,group:Srn,image:Irn,line:Orn,path:$rn,rect:Drn,rule:Brn,shape:zrn,symbol:Urn,text:Qrn,trail:Jrn};function Tq(e,t,n){var r=_l[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new cs),e,n)}var w1e={mark:null};function qje(e,t,n){var r=_l[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(w1e.mark=e,l=w1e),c=Tq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new cs,o)for(a=0,u=s.length;a<u;++a)t.union(Tq(s[a],i,n));return e.bounds=t}const Zrn=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Wje(e,t){return JSON.stringify(e,Zrn,t)}function Gje(e){const t=typeof e=="string"?JSON.parse(e):e;return Yje(t)}function Yje(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&Yje(n[i]);return t&&qje(e),e}function zte(e){arguments.length?this.root=Gje(e):(this.root=Kje({marktype:"group",name:"root",role:"frame"}),this.root.items=[new x5(this.root)])}zte.prototype={toJSON(e){return Wje(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=Kje(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function Kje(e,t){const n={bounds:new cs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function mg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Ute(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function bs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=mg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function ql(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Xje(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function P5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function ein(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=_l[i.marktype]).tip){for(o=P5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function x0(e,t){this._active=null,this._handlers={},this._loader=e||s5(),this._tooltip=t||tin}function tin(e,t,n,r){e.element().setAttribute("title",r||"")}x0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=mg(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=ein(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function Al(e){this._el=null,this._bgcolor=null,this._loader=new Tte(e)}Al.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const nin="keydown",rin="keypress",iin="keyup",Qje="dragenter",Z$="dragleave",Jje="dragover",Cq="pointerdown",sin="pointerup",FM="pointermove",M2="pointerout",Zje="pointerover",Aq="mousedown",oin="mouseup",eBe="mousemove",Iq="mouseout",tBe="mouseover",jM="click",ain="dblclick",uin="wheel",nBe="mousewheel",BM="touchstart",zM="touchmove",UM="touchend",lin=[nin,rin,iin,Qje,Z$,Jje,Cq,sin,FM,M2,Zje,Aq,oin,eBe,Iq,tBe,jM,ain,uin,nBe,BM,zM,UM],Oq=FM,xA=M2,Pq=jM;function S0(e,t){x0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const cin=e=>e===BM||e===zM||e===UM?[BM,zM,UM]:[e];function E1e(e,t){cin(t).forEach(n=>fin(e,n))}function fin(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function DT(e,t,n){t.forEach(r=>e.fire(r,n))}function x1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?DT(this,e,r):((!i||!i.exit)&&DT(this,n,r),this._active=s,DT(this,t,r),DT(this,e,r))}}function S1e(e){return function(t){DT(this,e,t),this._active=null}}We(S0,x0,{initialize(e,t,n){return this._canvas=e&&Ute(e,"canvas"),[jM,Aq,Cq,FM,M2,Z$].forEach(r=>E1e(this,r)),x0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:lin,DOMMouseScroll(e){this.fire(nBe,e)},pointermove:x1e([FM,eBe],[Zje,tBe],[M2,Iq]),dragover:x1e([Jje],[Qje],[Z$]),pointerout:S1e([M2,Iq]),dragleave:S1e([Z$]),pointerdown(e){this._down=this._active,this.fire(Cq,e)},mousedown(e){this._down=this._active,this.fire(Aq,e)},click(e){this._down===this._active&&(this.fire(jM,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(BM,e,!0)},touchmove(e){this.fire(zM,e,!0)},touchend(e){this.fire(UM,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===Pq&&r&&r.href?this.handleHref(t,r,r.href):(e===Oq||e===xA)&&this.handleTooltip(t,r,e!==xA),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(E1e(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=P5(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return _l[e.marktype].pick.call(this,s,e,t,n,r,i)}});function din(){return typeof window<"u"&&window.devicePixelRatio||1}function hin(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?din():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function SA(e){Al.call(this,e),this._options={},this._redraw=!1,this._dirty=new cs,this._tempb=new cs}const T1e=Al.prototype,pin=(e,t,n)=>new cs().set(0,0,t,n).translate(-e[0],-e[1]);function min(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}We(SA,Al,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Wg(1,1,this._options.type),e&&this._canvas&&(ql(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),T1e.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(T1e.resize.call(this,e,t,n,r),this._canvas)hin(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Te("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=pin(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):min(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=_l[t.marktype];t.clip&&drn(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function Vte(e,t){x0.call(this,e,t);const n=this;n._hrefHandler=kq(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=kq(n,(r,i)=>{n.handleTooltip(r,i,r.type!==xA)})}const kq=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};We(Vte,x0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(Pq,this._hrefHandler),r.removeEventListener(Oq,this._tooltipHandler),r.removeEventListener(xA,this._tooltipHandler)),this._svg=r=e&&Ute(e,"svg"),r&&(r.addEventListener(Pq,this._hrefHandler),r.addEventListener(Oq,this._tooltipHandler),r.addEventListener(xA,this._tooltipHandler)),x0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:kq(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const rBe="aria-hidden",Hte="aria-label",qte="role",Wte="aria-roledescription",iBe="graphics-object",Gte="graphics-symbol",sBe=(e,t,n)=>({[qte]:e,[Wte]:t,[Hte]:n||void 0}),gin=_f(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),C1e={axis:{desc:"axis",caption:_in},legend:{desc:"legend",caption:bin},"title-text":{desc:"title",caption:e=>`Title text '${I1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${I1e(e)}'`}},A1e={ariaRole:qte,ariaRoleDescription:Wte,description:Hte};function oBe(e,t){const n=t.aria===!1;if(e(rBe,n||void 0),n||t.description==null)for(const r in A1e)e(A1e[r],void 0);else{const r=t.mark.marktype;e(Hte,t.description),e(qte,t.ariaRole||(r==="group"?iBe:Gte)),e(Wte,t.ariaRoleDescription||`${r} mark`)}}function aBe(e){return e.aria===!1?{[rBe]:!0}:gin[e.role]?null:C1e[e.role]?vin(e,C1e[e.role]):yin(e)}function yin(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return sBe(n?iBe:Gte,`${t} mark container`,e.description)}function vin(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return sBe(t.role||Gte,t.desc,n.description||r(n))}catch{return null}}function I1e(e){return nt(e.text).join(" ")}function _in(e){const t=e.datum,n=e.orient,r=t.title?uBe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${hE(a)?"discrete":a} scale with ${xje(o,s,e)}`}function bin(e){const t=e.datum,n=t.title?uBe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Ein(r)+(n?` titled '${n}'`:"")+` for ${win(s)} with ${xje(u,a,e)}`}function uBe(e){try{return nt(Un(e.items).items[0].text).join(" ")}catch{return null}}function win(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Un(e)}function Ein(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const lBe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),xin=e=>lBe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Yte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${xin(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=lBe(u),a),toString:()=>e};return a}const cBe=e=>fBe(Yte(),e)+"";function fBe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):fBe(e,r)}return e.close()}const VM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},HM={blend:"mix-blend-mode"},dBe={fill:"none","stroke-miterlimit":10},VS=0,O1e="http://www.w3.org/2000/xmlns/",vs=EA.xmlns;function k5(e){Al.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const g7=Al.prototype;We(k5,Al,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=bs(e,0,"svg",vs),this._svg.setAttributeNS(O1e,"xmlns",vs),this._svg.setAttributeNS(O1e,"xmlns:xlink",EA["xmlns:xlink"]),this._svg.setAttribute("version",EA.version),this._svg.setAttribute("class","marks"),ql(e,1),this._root=bs(this._svg,VS,"g",vs),gg(this._root,dBe),ql(this._svg,VS+1)),this.background(this._bgcolor),g7.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),g7.background.apply(this,arguments)},resize(e,t,n,r){return g7.resize.call(this,e,t,n,r),this._svg&&(gg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=bs(e,VS,"rect",vs),gg(n,{width:this._width,height:this._height,fill:t}));const r=cBe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),ql(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=_l[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,P1e(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,P1e(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=_l[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=k1e(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return ql(l,0),t._svg;l.setAttribute("class",Xje(t));const c=aBe(t);for(const p in c)_a(l,p,c[p]);u||_a(l,"pointer-events",a),_a(l,"clip-path",t.clip?Ste(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=k1e(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&Cin(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):wf(t,h),ql(l,d),l},_update(e,t,n){dp=t,Uo=t.__values__,oBe(L2,n),e.attr(L2,n,this);const r=Iin[e.type];r&&r.call(this,e,t,n),dp&&this.style(dp,n)},style(e,t){if(t!=null){for(const n in VM){let r=n==="font"?vO(t):t[n];if(r===Uo[n])continue;const i=VM[n];r==null?e.removeAttribute(i):(wte(r)&&(r=Tje(r,this._defs.gradient,hBe())),e.setAttribute(i,r+"")),Uo[n]=r}for(const n in HM)eR(e,HM[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=bs(e,VS+1,"defs",vs)),r=Sin(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=bs(e,VS+1,"defs",vs)),r=Tin(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):ql(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function P1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Sin(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=bs(e,n++,"pattern",vs);gg(o,{id:NM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=bs(o,0,"rect",vs),gg(o,{width:1,height:1,fill:`url(${hBe()}#${t.id})`}),e=bs(e,n++,"radialGradient",vs),gg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=bs(e,n++,"linearGradient",vs),gg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=bs(e,r,"stop",vs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return ql(e,r),n}function Tin(e,t,n){let r;return e=bs(e,n,"clipPath",vs),e.setAttribute("id",t.id),t.path?(r=bs(e,0,"path",vs),r.setAttribute("d",t.path)):(r=bs(e,0,"rect",vs),gg(r,{x:0,y:0,width:t.width,height:t.height})),ql(e,1),n+1}function Cin(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;wf(n,o=>{i=e.mark(t,o,i,r),++s}),ql(t,1+s)}function k1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=mg(o,r,vs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=mg(o,"path",vs);s.appendChild(a),a.__data__=e;const u=mg(o,"g",vs);s.appendChild(u),u.__data__=e;const l=mg(o,"path",vs);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Ain(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Ain(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let dp=null,Uo=null;const Iin={group(e,t,n){const r=dp=t.childNodes[2];Uo=r.__values__,e.foreground(L2,n,this),Uo=t.__values__,dp=t.childNodes[1],e.content(L2,n,this);const i=dp=t.childNodes[0];e.background(L2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Uo.events&&(_a(r,"pointer-events",s),_a(i,"pointer-events",s),Uo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;_a(r,"display",null),this.style(i,n),_a(i,"stroke",null),o&&(n.fill=null),Uo=r.__values__,this.style(r,n),o&&(n.fill=o),dp=null}else _a(r,"display","none")},image(e,t,n){n.smooth===!1?(eR(t,"image-rendering","optimizeSpeed"),eR(t,"image-rendering","pixelated")):eR(t,"image-rendering",null)},text(e,t,n){const r=yO(n);let i,s,o,a;Ie(r)?(s=r.map(u=>E0(n,u)),i=s.join(`
`),i!==Uo.text&&(ql(t,0),o=t.ownerDocument,a=w0(n),s.forEach((u,l)=>{const c=mg(o,"tspan",vs);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Uo.text=i)):(s=E0(n,r),s!==Uo.text&&(t.textContent=s,Uo.text=s)),_a(t,"font-family",vO(n)),_a(t,"font-size",yh(n)+"px"),_a(t,"font-style",n.fontStyle),_a(t,"font-variant",n.fontVariant),_a(t,"font-weight",n.fontWeight)}};function L2(e,t,n){t!==Uo[e]&&(n?Oin(dp,e,t,n):_a(dp,e,t),Uo[e]=t)}function eR(e,t,n){n!==Uo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Uo[t]=n)}function gg(e,t){for(const n in t)_a(e,n,t[n])}function _a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Oin(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function hBe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Kte(e){Al.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}We(Kte,Al,{svg(){return this._text},_render(e){const t=Yte();t.open("svg",hn({},EA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",dBe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=_l[t.marktype],r=n.tag,i=[oBe,n.attr];e.open("g",{class:Xje(t),"clip-path":t.clip?Ste(this,t,t.group):null},aBe(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=yO(o);if(Ie(u)){const l={x:0,dy:w0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(E0(o,u[c])).close()}else e.text(E0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),wf(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):wf(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&Pin(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:NM+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function Pin(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=vO(t),e["font-size"]=yh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in VM){let a=t[o];const u=VM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(wte(a)&&(a=Tje(a,i.gradient,"")),e[u]=a)}for(const o in HM){const a=t[o];a!=null&&(s=s||[],s.push(`${HM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const zc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function kin(e){zc.svgMarkTypes=e.svgMarkTypes??["text"],zc.svgOnTop=e.svgOnTop??!0,zc.debug=e.debug??!1}function qM(e){Al.call(this,e),this._svgRenderer=new k5(e),this._canvasRenderer=new SA(e)}const $1e=Al.prototype;We(qM,Al,{initialize(e,t,n,r,i){this._root_el=bs(e,0,"div");const s=bs(this._root_el,0,"div"),o=bs(this._root_el,1,"div");return this._root_el.style.position="relative",zc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=zc.svgOnTop?o:s,this._canvasEl=zc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),$1e.initialize.call(this,e,t,n,r,i)},dirty(e){return zc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!zc.svgMarkTypes.includes(i));this._svgRenderer.render(e,zc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return $1e.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return zc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function Xte(e,t){S0.call(this,e,t)}We(Xte,S0,{initialize(e,t,n){const r=bs(bs(e,0,"div"),zc.svgOnTop?0:1,"div");return S0.prototype.initialize.call(this,r,t,n)}});const pBe="canvas",mBe="hybrid",gBe="png",yBe="svg",vBe="none",yg={Canvas:pBe,PNG:gBe,SVG:yBe,Hybrid:mBe,None:vBe},mv={};mv[pBe]=mv[gBe]={renderer:SA,headless:SA,handler:S0};mv[yBe]={renderer:k5,headless:Kte,handler:Vte};mv[mBe]={renderer:qM,headless:qM,handler:Xte};mv[vBe]={};function $5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(mv[e]=t,this):mv[e]}function _Be(e,t,n){const r=[],i=new cs().union(t),s=e.marktype;return s?bBe(e,i,n,r):s==="group"?wBe(e,i,n,r):Te("Intersect scene must be mark node or group item.")}function bBe(e,t,n,r){if($in(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)wBe(i[a],t,n,r);else for(const u=_l[s].isect;a<o;++a){const l=i[a];EBe(l,t,u)&&r.push(l)}}return r}function $in(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function wBe(e,t,n,r){n&&n(e.mark)&&EBe(e,t,_l.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)bBe(i[u],t,n,r);t.translate(o,a)}return r}function EBe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const y7=new cs;function xBe(e){const t=e.clip;if(pn(t))t(mO(y7.clear()));else if(t)y7.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(y7)}const Rin=1e-9;function Qte(e,t,n){return e===t?!0:n==="path"?SBe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Jn(e)&&Jn(t)?Math.abs(e-t)<=Rin:!e||!t||!ot(e)&&!ot(t)?e==t:Nin(e,t)}function SBe(e,t){return Qte(pE(e),pE(t))}function Nin(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Qte(e[i],t[i],i))return!1;return typeof e==typeof t}function Din(){$je(),snn()}const yE="top",Xc="left",Zc="right",T0="bottom",Min="top-left",Lin="top-right",Fin="bottom-left",jin="bottom-right",Jte="start",$q="middle",Ea="end",Bin="x",zin="y",R5="group",Zte="axis",ene="title",Uin="frame",Vin="scope",tne="legend",TBe="row-header",CBe="row-footer",ABe="row-title",IBe="column-header",OBe="column-footer",PBe="column-title",Hin="padding",qin="symbol",kBe="fit",$Be="fit-x",RBe="fit-y",Win="pad",nne="none",gk="all",Rq="each",rne="flush",vg="column",_g="row";function NBe(e){Ee.call(this,null,e)}We(NBe,Ee,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=_l[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=yk(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===R5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(yk(l,o))),r.role){case Zte:case tne:case ene:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(yk(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(yk(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return xBe(r),t.modifies("bounds")}});function yk(e,t,n){return t(e.bounds.clear(),e,n)}const R1e=":vega_identifier:";function ine(e){Ee.call(this,0,e)}ine.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};We(ine,Ee,{transform(e,t){const n=Gin(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Gin(e){return e._signals[R1e]||(e._signals[R1e]=e.add(0))}function DBe(e){Ee.call(this,null,e)}We(DBe,Ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Yin(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===R5?x5:E5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Yin(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function MBe(e){Ee.call(this,null,e)}const N1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!LBe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},LBe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),D1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(LBe(i,s=e[n].bounds,t))return!0},Kin=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Xin=(e,t,n)=>{var r=e.range(),i=new cs;return t===yE||t===T0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},M1e=e=>(e.forEach(t=>t.opacity=1),e),L1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");We(MBe,Ee,{transform(e,t){const n=N1e[e.method]||N1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(M1e(i),t=L1e(t,e)),t;if(i=i.filter(Kin),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=M1e(i),t=L1e(t,e),s.length>=3&&D1e(s,r)){do s=n(s,r);while(s.length>=3&&D1e(s,r));s.length<3&&!Un(i).opacity&&(s.length>1&&(Un(s).opacity=0),Un(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Xin(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function FBe(e){Ee.call(this,null,e)}We(FBe,Ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Bo=new cs;function Ib(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Qin(e){var t=e.items[0].orient;return t===Xc||t===Zc}function Jin(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Zin(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Jin(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Fte(p),v=0,_=0,b,E;switch(Bo.clear().union(g),g.clear(),(b=u[0])>-1&&g.union(i.items[b].bounds),(b=u[1])>-1&&g.union(i.items[b].bounds),a){case yE:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&vk(e,p,E,m,y,0,-1,g);break;case Xc:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&vk(e,p,E,m,y,1,-1,g);break;case Zc:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&vk(e,p,E,m,y,1,1,g);break;case T0:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&vk(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return gm(g.translate(v,_),i),Ib(i,"x",v+o)|Ib(i,"y",_+o)&&(i.bounds=Bo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function vk(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const F1e=(e,t)=>Math.floor(Math.min(e,t)),j1e=(e,t)=>Math.ceil(Math.max(e,t));function esn(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===R5)switch(i.role){case Zte:case tne:case ene:break;case TBe:o.rowheaders.push(...s);break;case CBe:o.rowfooters.push(...s);break;case IBe:o.colheaders.push(...s);break;case OBe:o.colfooters.push(...s);break;case ABe:o.rowtitle=s[0];break;case PBe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function tsn(e){return new cs().set(0,0,e.width||0,e.height||0)}function nsn(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function fi(e,t,n){const r=ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function B1e(e){return e<0?Math.ceil(-e):0}function jBe(e,t,n){var r=!n.nodirty,i=n.bounds===rne?tsn:nsn,s=Bo.set(0,0,0,0),o=fi(n.align,vg),a=fi(n.align,_g),u=fi(n.padding,vg),l=fi(n.padding,_g),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),b=Array(d),E=Array(d),w,x,S,P,A,O,z,M,R,D,L;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)O=t[x],A=E[x]=i(O),O.x=O.x||0,_[x]=0,O.y=O.y||0,b[x]=0,S=x%c,P=~~(x/c),m=Math.max(m,z=Math.ceil(A.x2)),v=Math.max(v,M=Math.ceil(A.y2)),p[S]=Math.max(p[S],z),y[P]=Math.max(y[P],M),h[x]=u+B1e(A.x1),g[x]=l+B1e(A.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===Rq)for(S=1;S<c;++S){for(L=0,x=S;x<d;x+=c)L<h[x]&&(L=h[x]);for(x=S;x<d;x+=c)h[x]=L+p[S-1]}else if(o===gk){for(L=0,x=0;x<d;++x)x%c&&L<h[x]&&(L=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=L+m)}else for(o=!1,S=1;S<c;++S)for(x=S;x<d;x+=c)h[x]+=p[S-1];if(a===Rq)for(P=1;P<f;++P){for(L=0,x=P*c,w=x+c;x<w;++x)L<g[x]&&(L=g[x]);for(x=P*c;x<w;++x)g[x]=L+y[P-1]}else if(a===gk){for(L=0,x=c;x<d;++x)L<g[x]&&(L=g[x]);for(x=c;x<d;++x)g[x]=L+v}else for(a=!1,P=1;P<f;++P)for(x=P*c,w=x+c;x<w;++x)g[x]+=y[P-1];for(R=0,x=0;x<d;++x)R=h[x]+(x%c?R:0),_[x]+=R-t[x].x;for(S=0;S<c;++S)for(D=0,x=S;x<d;x+=c)D+=g[x],b[x]+=D-t[x].y;if(o&&fi(n.center,vg)&&f>1)for(x=0;x<d;++x)A=o===gk?m:p[x%c],R=A-E[x].x2-t[x].x-_[x],R>0&&(_[x]+=R/2);if(a&&fi(n.center,_g)&&c!==1)for(x=0;x<d;++x)A=a===gk?v:y[~~(x/c)],D=A-E[x].y2-t[x].y-b[x],D>0&&(b[x]+=D/2);for(x=0;x<d;++x)s.union(E[x].translate(_[x],b[x]));switch(R=fi(n.anchor,Bin),D=fi(n.anchor,zin),fi(n.anchor,vg)){case Ea:R-=s.width();break;case $q:R-=s.width()/2}switch(fi(n.anchor,_g)){case Ea:D-=s.height();break;case $q:D-=s.height()/2}for(R=Math.round(R),D=Math.round(D),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)O=t[x],O.x+=_[x]+=R,O.y+=b[x]+=D,s.union(O.mark.bounds.union(O.bounds.translate(_[x],b[x]))),r&&e.dirty(O);return s}function rsn(e,t,n){var r=esn(t),i=r.marks,s=n.bounds===rne?isn:ssn,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=jBe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=fi(n.headerBand,_g,null),c=_k(e,r.rowheaders,i,a,u,-fi(o,"rowHeader"),F1e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=fi(n.headerBand,vg,null),f=_k(e,r.colheaders,i,a,a,-fi(o,"columnHeader"),F1e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=fi(n.footerBand,_g,null),d=_k(e,r.rowfooters,i,a,u,fi(o,"rowFooter"),j1e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=fi(n.footerBand,vg,null),h=_k(e,r.colfooters,i,a,a,fi(o,"columnFooter"),j1e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=fi(n.titleAnchor,_g),g=fi(o,"rowTitle"),g=p===Ea?d+g:c-g,m=fi(n.titleBand,_g,.5),z1e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=fi(n.titleAnchor,vg),g=fi(o,"columnTitle"),g=p===Ea?h+g:f-g,m=fi(n.titleBand,vg,.5),z1e(e,r.coltitle,g,1,y,m))}function isn(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function ssn(e,t){return e.bounds[t]}function _k(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,b,E,w,x,S,P;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(w=t[v],E=w.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=d);a?(S=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),P=m):(S=m,P=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(w.bounds.translate(S-(w.x||0),P-(w.y||0))),w.x=S,w.y=P,e.dirty(w),g=o(g,E[l])}return g}function z1e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function osn(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function asn(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function usn(e,t,n,r,i,s,o){const a=osn(n,t),u=asn(e,a("offset",0)),l=a("anchor",Jte),c=l===Ea?1:l===$q?.5:0,f={align:Rq,bounds:a("bounds",rne),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Xc:f.anchor={x:Math.floor(r.x1)-u,column:Ea,y:c*(o||r.height()+2*r.y1),row:l};break;case Zc:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case yE:f.anchor={y:Math.floor(i.y1)-u,row:Ea,x:c*(s||i.width()+2*i.x1),column:l};break;case T0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Min:f.anchor={x:u,y:u};break;case Lin:f.anchor={x:s-u,y:u,column:Ea};break;case Fin:f.anchor={x:u,y:o-u,row:Ea};break;case jin:f.anchor={x:s-u,y:o-u,column:Ea,row:Ea};break}return f}function lsn(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),fsn(e,n,n.items[0].items[0]),s=csn(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===qin&&dsn(n.items[0].items[0].items[0].items),i!==nne&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,gm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function csn(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function fsn(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&HS(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Xc:i+=Math.ceil(o.bounds.width())+u;break;case Zc:case T0:break;default:s+=o.bounds.height()+u}switch((i||s)&&HS(e,n,i,s),o.orient){case Xc:c+=D_(t,n,o,a,1,1);break;case Zc:l+=D_(t,n,o,Ea,0,0)+u,c+=D_(t,n,o,a,1,1);break;case T0:l+=D_(t,n,o,a,0,0),c+=D_(t,n,o,Ea,-1,0,1)+u;break;default:l+=D_(t,n,o,a,0,0)}(l||c)&&HS(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(HS(e,n,-l,0),HS(e,o,-l,0))}}function D_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Fte(n);return Math.round(r===Jte?f:r===Ea?d-h:.5*(c-h))}function HS(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function dsn(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function hsn(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Xc||a===Zc?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==R5?a===Xc?(p=i.y2,h=i.y1):a===Zc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Xc&&(p=r,h=0),_=u===Jte?p:u===Ea?h:(p+h)/2,d&&d.text){switch(a){case yE:case T0:v=f.bounds.height()+c;break;case Xc:y=f.bounds.width()+c;break;case Zc:y=-f.bounds.width()-c;break}Bo.clear().union(d.bounds),Bo.translate(y-(d.x||0),v-(d.y||0)),Ib(d,"x",y)|Ib(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Bo),d.mark.bounds.clear().union(Bo),e.dirty(d)),Bo.clear().union(d.bounds)}else Bo.clear();switch(Bo.union(f.bounds),a){case yE:m=_,g=i.y1-Bo.height()-l;break;case Xc:m=i.x1-Bo.width()-l,g=_;break;case Zc:m=i.x2+Bo.width()+l,g=_;break;case T0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return Ib(s,"x",m)|Ib(s,"y",g)&&(Bo.translate(m,g),e.dirty(s),s.bounds.clear().union(Bo),t.bounds.clear().union(Bo),e.dirty(s)),s.bounds}function BBe(e){Ee.call(this,null,e)}We(BBe,Ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&rsn(n,r,e.layout),msn(n,r,e)}),psn(e.mark.group)?t.reflow():t}});function psn(e){return e&&e.mark.role!=="legend-entry"}function msn(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new cs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Zte:h=Qin(f)?a:u,h.union(Zin(e,f,i,s));break;case ene:c=f;break;case tne:l.push(lsn(e,f));break;case Uin:case Vin:case TBe:case CBe:case ABe:case IBe:case OBe:case PBe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Zc,d!==nne&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];jBe(e,v,usn(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===kBe||n.autosize.type===$Be||n.autosize.type===RBe))switch(y.orient){case Xc:case Zc:o.add(v.x1,0).add(v.x2,0);break;case yE:case T0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(hsn(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),gsn(e,t,o,n)}function gsn(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Hin){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===nne?(l=0,f=0,u=o,c=a):s===kBe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===$Be?(u=Math.max(0,o-l-d),a=c+f+h):s===RBe?(o=u+l+d,c=Math.max(0,a-f-h)):s===Win&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const ysn=Object.freeze(Object.defineProperty({__proto__:null,bound:NBe,identifier:ine,mark:DBe,overlap:MBe,render:FBe,viewlayout:BBe},Symbol.toStringTag,{value:"Module"}));function zBe(e){Ee.call(this,null,e)}We(zBe,Ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=_te(s,o,e.minstep),u=e.format||vje(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?yje(s,e.values,a):bte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>dr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(dr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function UBe(e){Ee.call(this,null,e)}function vsn(){return dr({})}function _sn(e){const t=Ax().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}We(UBe,Ee,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||vsn,s=e.key||$t,o=this.value;return Ie(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Te("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=_sn(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function VBe(e){Ee.call(this,null,e)}We(VBe,Ee,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ie(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Lm,u=i.enter||Lm,l=i.exit||Lm,c=(s&&!o?i[s]:a)||Lm;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Lm&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Lm&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Lm){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function HBe(e){Ee.call(this,[],e)}We(HBe,Ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||G$,o=e.scale,a=+e.limit,u=_te(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===G$,c=e.format||Eje(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||wje(o,u),d,h,p,m,g;return i&&(r.rem=i),s===G$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,pn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=fa(m=p||8),i=i.map((y,v)=>dr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(dr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Wtn?(d=o.domain(),h=pje(o,d[0],Un(d)),f.length<3&&!e.values&&d[0]!==Un(d)&&(f=[d[0],Un(d)]),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=rnn(o),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const bsn=e=>e.source.x,wsn=e=>e.source.y,Esn=e=>e.target.x,xsn=e=>e.target.y;function sne(e){Ee.call(this,{},e)}sne.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};We(sne,Ee,{transform(e,t){var n=e.sourceX||bsn,r=e.sourceY||wsn,i=e.targetX||Esn,s=e.targetY||xsn,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=U1e.get(u+"-"+a)||U1e.get(u);return l||Te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const qBe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Ssn=(e,t,n,r)=>qBe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),WBe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Tsn=(e,t,n,r)=>WBe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GBe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Csn=(e,t,n,r)=>GBe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Asn=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Isn=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Osn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Psn=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ksn=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},$sn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},U1e=Ax({line:qBe,"line-radial":Ssn,arc:WBe,"arc-radial":Tsn,curve:GBe,"curve-radial":Csn,"orthogonal-horizontal":Asn,"orthogonal-vertical":Isn,"orthogonal-radial":Osn,"diagonal-horizontal":Psn,"diagonal-vertical":ksn,"diagonal-radial":$sn});function one(e){Ee.call(this,null,e)}one.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};We(one,Ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||Sx,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/P8e(l),h=r_(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Rsn=5;function Nsn(e){const t=e.type;return!e.bins&&(t===fE||t===uO||t===lO)}function YBe(e){return gte(e)&&e!==Fd}const Dsn=_f(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function KBe(e){Ee.call(this,null,e),this.modified(!0)}We(KBe,Ee,{transform(e,t){var n=t.dataflow,r=this.value,i=Msn(e);(!r||i!==r.type)&&(this.value=r=or(i)());for(i in e)if(!Dsn[i]){if(i==="padding"&&YBe(r.type))continue;pn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Usn(r,e,zsn(r,e,Fsn(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Msn(e){var t=e.type,n="",r;return t===Fd?Fd+"-"+fE:(Lsn(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Fd+"-":r===3?kx+"-":""),(n+t||fE).toLowerCase())}function Lsn(e){const t=e.type;return gte(t)&&t!==hv&&t!==pv&&(e.scheme||e.range&&e.range.length&&e.range.every(rt))}function Fsn(e,t,n){const r=jsn(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Nsn(e),a,u;if(!i)return 0;if(YBe(s)&&t.padding&&i[0]!==Un(i)&&(i=Bsn(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(XBe(s,i,n)),s===dte&&e.unknown(t.domainImplicit?vV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&_te(e,t.nice)||null),i.length}function jsn(e,t,n){return t?(e.domain(XBe(e.type,t,n)),t.length):-1}function Bsn(e,t,n,r,i,s){var o=Math.abs(Un(n)-n[0]),a=o/(o-2*r),u=e===Zp?see(t,null,a):e===lO?OM(t,null,a,.5):e===uO?OM(t,null,a,i||1):e===y5?oee(t,null,a,s||1):iee(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function XBe(e,t,n){if(lje(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Xe(t))}return t}function zsn(e,t,n){let r=t.bins;if(r&&!Ie(r)){const i=e.domain(),s=i[0],o=Un(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Te("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=r_(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===hte&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Usn(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Vsn(r,t,n);else if(t.scheme&&(s=Hsn(r,t,n),pn(s))){if(e.interpolator)return e.interpolator(s);Te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&cje(r))return e.interpolator(b5(Nq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(yte(t.interpolate,t.interpolateGamma)):pn(e.round)?e.round(i):pn(e.rangeRound)&&e.interpolate(i?mI:fm),s&&e.range(Nq(s,t.reverse))}function Vsn(e,t,n){e!==rje&&e!==vq&&Te("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===vq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*fte(n,i,r)]}function Hsn(e,t,n){var r=t.schemeExtent,i,s;return Ie(t.scheme)?s=b5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=vte(i),s||Te(`Unrecognized scheme name: ${t.scheme}`)),n=e===_5?n+1:e===hte?n-1:e===dE||e===v5?+t.schemeCount||Rsn:n,cje(e)?V1e(s,r,t.reverse):pn(s)?hje(V1e(s,r),n):e===dte?s:s.slice(0,n)}function V1e(e,t,n){return pn(e)&&(t||n)?dje(e,Nq(t||[0,1],n)):e}function Nq(e,t){return t?e.slice().reverse():e}function QBe(e){Ee.call(this,null,e)}We(QBe,Ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(i_(e.sort)),this.modified(n),t}});const H1e="zero",JBe="center",ZBe="normalize",e7e=["y0","y1"];function ane(e){Ee.call(this,null,e)}ane.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:H1e,values:[H1e,JBe,ZBe]},{name:"as",type:"string",array:!0,length:2,default:e7e}]};We(ane,Ee,{transform(e,t){var n=e.as||e7e,r=n[0],i=n[1],s=i_(e.sort),o=e.field||Sx,a=e.offset===JBe?qsn:e.offset===ZBe?Wsn:Gsn,u,l,c,f;for(u=Ysn(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function qsn(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Wsn(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Gsn(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Ysn(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Ksn=Object.freeze(Object.defineProperty({__proto__:null,axisticks:zBe,datajoin:UBe,encode:VBe,legendentries:HBe,linkpath:sne,pie:one,scale:KBe,sortitems:QBe,stack:ane},Symbol.toStringTag,{value:"Module"}));class ka{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*Xsn(e){for(const t of e)yield*t}function t7e(e){return Array.from(Xsn(e))}function Ob(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Dt=1e-6,WM=1e-12,Cn=Math.PI,Fi=Cn/2,GM=Cn/4,Fa=Cn*2,Wi=180/Cn,Sn=Cn/180,zn=Math.abs,Rx=Math.atan,fc=Math.atan2,Ft=Math.cos,bk=Math.ceil,n7e=Math.exp,Dq=Math.hypot,YM=Math.log,v7=Math.pow,Rt=Math.sin,Xl=Math.sign||function(e){return e>0?1:e<0?-1:0},ja=Math.sqrt,une=Math.tan;function r7e(e){return e>1?0:e<-1?Cn:Math.acos(e)}function Ou(e){return e>1?Fi:e<-1?-Fi:Math.asin(e)}function yo(){}function KM(e,t){e&&W1e.hasOwnProperty(e.type)&&W1e[e.type](e,t)}var q1e={Feature:function(e,t){KM(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)KM(n[r].geometry,t)}},W1e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Mq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mq(n[r],t,0)},Polygon:function(e,t){G1e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)G1e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)KM(n[r],t)}};function Mq(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function G1e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Mq(e[n],t,1);t.polygonEnd()}function Zh(e,t){e&&q1e.hasOwnProperty(e.type)?q1e[e.type](e,t):KM(e,t)}var XM=new ka,QM=new ka,i7e,s7e,Lq,Fq,jq,rh={point:yo,lineStart:yo,lineEnd:yo,polygonStart:function(){XM=new ka,rh.lineStart=Qsn,rh.lineEnd=Jsn},polygonEnd:function(){var e=+XM;QM.add(e<0?Fa+e:e),this.lineStart=this.lineEnd=this.point=yo},sphere:function(){QM.add(Fa)}};function Qsn(){rh.point=Zsn}function Jsn(){o7e(i7e,s7e)}function Zsn(e,t){rh.point=o7e,i7e=e,s7e=t,e*=Sn,t*=Sn,Lq=e,Fq=Ft(t=t/2+GM),jq=Rt(t)}function o7e(e,t){e*=Sn,t*=Sn,t=t/2+GM;var n=e-Lq,r=n>=0?1:-1,i=r*n,s=Ft(t),o=Rt(t),a=jq*o,u=Fq*s+a*Ft(i),l=a*r*Rt(i);XM.add(fc(l,u)),Lq=e,Fq=s,jq=o}function eon(e){return QM=new ka,Zh(e,rh),QM*2}function JM(e){return[fc(e[1],e[0]),Ou(e[2])]}function gv(e){var t=e[0],n=e[1],r=Ft(n);return[r*Ft(t),r*Rt(t),Rt(n)]}function wk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function _7(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ek(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ZM(e){var t=ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var wi,ou,Pi,Qu,Fy,a7e,u7e,uw,F2,Gm,em,Hh={point:Bq,lineStart:Y1e,lineEnd:K1e,polygonStart:function(){Hh.point=c7e,Hh.lineStart=ton,Hh.lineEnd=non,F2=new ka,rh.polygonStart()},polygonEnd:function(){rh.polygonEnd(),Hh.point=Bq,Hh.lineStart=Y1e,Hh.lineEnd=K1e,XM<0?(wi=-(Pi=180),ou=-(Qu=90)):F2>Dt?Qu=90:F2<-Dt&&(ou=-90),em[0]=wi,em[1]=Pi},sphere:function(){wi=-(Pi=180),ou=-(Qu=90)}};function Bq(e,t){Gm.push(em=[wi=e,Pi=e]),t<ou&&(ou=t),t>Qu&&(Qu=t)}function l7e(e,t){var n=gv([e*Sn,t*Sn]);if(uw){var r=vE(uw,n),i=[r[1],-r[0],0],s=vE(i,r);ZM(s),s=JM(s);var o=e-Fy,a=o>0?1:-1,u=s[0]*Wi*a,l,c=zn(o)>180;c^(a*Fy<u&&u<a*e)?(l=s[1]*Wi,l>Qu&&(Qu=l)):(u=(u+360)%360-180,c^(a*Fy<u&&u<a*e)?(l=-s[1]*Wi,l<ou&&(ou=l)):(t<ou&&(ou=t),t>Qu&&(Qu=t))),c?e<Fy?Gu(wi,e)>Gu(wi,Pi)&&(Pi=e):Gu(e,Pi)>Gu(wi,Pi)&&(wi=e):Pi>=wi?(e<wi&&(wi=e),e>Pi&&(Pi=e)):e>Fy?Gu(wi,e)>Gu(wi,Pi)&&(Pi=e):Gu(e,Pi)>Gu(wi,Pi)&&(wi=e)}else Gm.push(em=[wi=e,Pi=e]);t<ou&&(ou=t),t>Qu&&(Qu=t),uw=n,Fy=e}function Y1e(){Hh.point=l7e}function K1e(){em[0]=wi,em[1]=Pi,Hh.point=Bq,uw=null}function c7e(e,t){if(uw){var n=e-Fy;F2.add(zn(n)>180?n+(n>0?360:-360):n)}else a7e=e,u7e=t;rh.point(e,t),l7e(e,t)}function ton(){rh.lineStart()}function non(){c7e(a7e,u7e),rh.lineEnd(),zn(F2)>Dt&&(wi=-(Pi=180)),em[0]=wi,em[1]=Pi,uw=null}function Gu(e,t){return(t-=e)<0?t+360:t}function ron(e,t){return e[0]-t[0]}function X1e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ion(e){var t,n,r,i,s,o,a;if(Qu=Pi=-(wi=ou=1/0),Gm=[],Zh(e,Hh),n=Gm.length){for(Gm.sort(ron),t=1,r=Gm[0],s=[r];t<n;++t)i=Gm[t],X1e(r,i[0])||X1e(r,i[1])?(Gu(r[0],i[1])>Gu(r[0],r[1])&&(r[1]=i[1]),Gu(i[0],r[1])>Gu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Gu(r[1],i[0]))>o&&(o=a,wi=i[0],Pi=r[1])}return Gm=em=null,wi===1/0||ou===1/0?[[NaN,NaN],[NaN,NaN]]:[[wi,ou],[Pi,Qu]]}var MT,eL,tL,nL,rL,iL,sL,oL,zq,Uq,Vq,f7e,d7e,xa,Sa,Ta,ef={sphere:yo,point:lne,lineStart:Q1e,lineEnd:J1e,polygonStart:function(){ef.lineStart=aon,ef.lineEnd=uon},polygonEnd:function(){ef.lineStart=Q1e,ef.lineEnd=J1e}};function lne(e,t){e*=Sn,t*=Sn;var n=Ft(t);_O(n*Ft(e),n*Rt(e),Rt(t))}function _O(e,t,n){++MT,tL+=(e-tL)/MT,nL+=(t-nL)/MT,rL+=(n-rL)/MT}function Q1e(){ef.point=son}function son(e,t){e*=Sn,t*=Sn;var n=Ft(t);xa=n*Ft(e),Sa=n*Rt(e),Ta=Rt(t),ef.point=oon,_O(xa,Sa,Ta)}function oon(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*Rt(e),s=Rt(t),o=fc(ja((o=Sa*s-Ta*i)*o+(o=Ta*r-xa*s)*o+(o=xa*i-Sa*r)*o),xa*r+Sa*i+Ta*s);eL+=o,iL+=o*(xa+(xa=r)),sL+=o*(Sa+(Sa=i)),oL+=o*(Ta+(Ta=s)),_O(xa,Sa,Ta)}function J1e(){ef.point=lne}function aon(){ef.point=lon}function uon(){h7e(f7e,d7e),ef.point=lne}function lon(e,t){f7e=e,d7e=t,e*=Sn,t*=Sn,ef.point=h7e;var n=Ft(t);xa=n*Ft(e),Sa=n*Rt(e),Ta=Rt(t),_O(xa,Sa,Ta)}function h7e(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*Rt(e),s=Rt(t),o=Sa*s-Ta*i,a=Ta*r-xa*s,u=xa*i-Sa*r,l=Dq(o,a,u),c=Ou(l),f=l&&-c/l;zq.add(f*o),Uq.add(f*a),Vq.add(f*u),eL+=c,iL+=c*(xa+(xa=r)),sL+=c*(Sa+(Sa=i)),oL+=c*(Ta+(Ta=s)),_O(xa,Sa,Ta)}function con(e){MT=eL=tL=nL=rL=iL=sL=oL=0,zq=new ka,Uq=new ka,Vq=new ka,Zh(e,ef);var t=+zq,n=+Uq,r=+Vq,i=Dq(t,n,r);return i<WM&&(t=iL,n=sL,r=oL,eL<Dt&&(t=tL,n=nL,r=rL),i=Dq(t,n,r),i<WM)?[NaN,NaN]:[fc(n,t)*Wi,Ou(r/i)*Wi]}function Hq(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function qq(e,t){return zn(e)>Cn&&(e-=Math.round(e/Fa)*Fa),[e,t]}qq.invert=qq;function p7e(e,t,n){return(e%=Fa)?t||n?Hq(eve(e),tve(t,n)):eve(e):t||n?tve(t,n):qq}function Z1e(e){return function(t,n){return t+=e,zn(t)>Cn&&(t-=Math.round(t/Fa)*Fa),[t,n]}}function eve(e){var t=Z1e(e);return t.invert=Z1e(-e),t}function tve(e,t){var n=Ft(e),r=Rt(e),i=Ft(t),s=Rt(t);function o(a,u){var l=Ft(u),c=Ft(a)*l,f=Rt(a)*l,d=Rt(u),h=d*n+c*r;return[fc(f*i-h*s,c*n-d*r),Ou(h*i+f*s)]}return o.invert=function(a,u){var l=Ft(u),c=Ft(a)*l,f=Rt(a)*l,d=Rt(u),h=d*i-f*s;return[fc(f*i+d*s,c*n+h*r),Ou(h*n-c*r)]},o}function fon(e){e=p7e(e[0]*Sn,e[1]*Sn,e.length>2?e[2]*Sn:0);function t(n){return n=e(n[0]*Sn,n[1]*Sn),n[0]*=Wi,n[1]*=Wi,n}return t.invert=function(n){return n=e.invert(n[0]*Sn,n[1]*Sn),n[0]*=Wi,n[1]*=Wi,n},t}function don(e,t,n,r,i,s){if(n){var o=Ft(t),a=Rt(t),u=r*n;i==null?(i=t+r*Fa,s=t-u/2):(i=nve(o,i),s=nve(o,s),(r>0?i<s:i>s)&&(i+=r*Fa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=JM([o,-a*Ft(c),-a*Rt(c)]),e.point(l[0],l[1])}}function nve(e,t){t=gv(t),t[0]-=e,ZM(t);var n=r7e(-t[1]);return((-t[2]<0?-n:n)+Fa-Dt)%Fa}function m7e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:yo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tR(e,t){return zn(e[0]-t[0])<Dt&&zn(e[1]-t[1])<Dt}function xk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function g7e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(tR(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Dt}s.push(v=new xk(g,p,null,!0)),o.push(v.o=new xk(g,null,v,!1)),s.push(v=new xk(y,p,null,!1)),o.push(v.o=new xk(y,null,v,!0))}}),!!s.length){for(o.sort(t),rve(s),rve(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function rve(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function b7(e){return zn(e[0])<=Cn?e[0]:Xl(e[0])*((zn(e[0])+Cn)%Fa-Cn)}function hon(e,t){var n=b7(t),r=t[1],i=Rt(r),s=[Rt(n),-Ft(n),0],o=0,a=0,u=new ka;i===1?r=Fi+Dt:i===-1&&(r=-Fi-Dt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=b7(h),m=h[1]/2+GM,g=Rt(m),y=Ft(m),v=0;v<d;++v,p=b,g=w,y=x,h=_){var _=f[v],b=b7(_),E=_[1]/2+GM,w=Rt(E),x=Ft(E),S=b-p,P=S>=0?1:-1,A=P*S,O=A>Cn,z=g*w;if(u.add(fc(z*P*Rt(A),y*x+z*Ft(A))),o+=O?S+P*Fa:S,O^p>=n^b>=n){var M=vE(gv(h),gv(_));ZM(M);var R=vE(s,M);ZM(R);var D=(O^S>=0?-1:1)*Ou(R[2]);(r>D||r===D&&(M[0]||M[1]))&&(a+=O^S>=0?1:-1)}}return(o<-Dt||o<Dt&&u<-WM)^a&1}function y7e(e,t,n,r){return function(i){var s=t(i),o=m7e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=t7e(c);var b=hon(l,r);c.length?(u||(i.polygonStart(),u=!0),g7e(c,mon,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,E){e(b,E)&&i.point(b,E)}function p(b,E){s.point(b,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(b,E){f.push([b,E]),a.point(b,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),E=o.result(),w,x=E.length,S,P,A;if(f.pop(),l.push(f),f=null,!!x){if(b&1){if(P=E[0],(S=P.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<S;++w)i.point((A=P[w])[0],A[1]);i.lineEnd()}return}x>1&&b&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(pon))}}return d}}function pon(e){return e.length>1}function mon(e,t){return((e=e.x)[0]<0?e[1]-Fi-Dt:Fi-e[1])-((t=t.x)[0]<0?t[1]-Fi-Dt:Fi-t[1])}const ive=y7e(function(){return!0},gon,von,[-Cn,-Fi]);function gon(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Cn:-Cn,u=zn(s-t);zn(u-Cn)<Dt?(e.point(t,n=(n+o)/2>0?Fi:-Fi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Cn&&(zn(t-r)<Dt&&(t-=r*Dt),zn(s-a)<Dt&&(s-=a*Dt),n=yon(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function yon(e,t,n,r){var i,s,o=Rt(e-n);return zn(o)>Dt?Rx((Rt(t)*(s=Ft(r))*Rt(n)-Rt(r)*(i=Ft(t))*Rt(e))/(i*s*o)):(t+r)/2}function von(e,t,n,r){var i;if(e==null)i=n*Fi,r.point(-Cn,i),r.point(0,i),r.point(Cn,i),r.point(Cn,0),r.point(Cn,-i),r.point(0,-i),r.point(-Cn,-i),r.point(-Cn,0),r.point(-Cn,i);else if(zn(e[0]-t[0])>Dt){var s=e[0]<t[0]?Cn:-Cn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function _on(e){var t=Ft(e),n=2*Sn,r=t>0,i=zn(t)>Dt;function s(c,f,d,h){don(h,e,n,d,c,f)}function o(c,f){return Ft(c)*Ft(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,b=o(g,y),E=r?b?0:l(g,y):b?l(g+(g<0?Cn:-Cn),y):0;if(!f&&(p=h=b)&&c.lineStart(),b!==h&&(_=u(f,v),(!_||tR(f,_)||tR(v,_))&&(v[2]=1)),b!==h)m=0,b?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^b){var w;!(E&d)&&(w=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}b&&(!f||!tR(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=gv(c),p=gv(f),m=[1,0,0],g=vE(h,p),y=wk(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var b=t*y/_,E=-t*v/_,w=vE(m,g),x=Ek(m,b),S=Ek(g,E);_7(x,S);var P=w,A=wk(x,P),O=wk(P,P),z=A*A-O*(wk(x,x)-1);if(!(z<0)){var M=ja(z),R=Ek(P,(-A-M)/O);if(_7(R,x),R=JM(R),!d)return R;var D=c[0],L=f[0],V=c[1],B=f[1],H;L<D&&(H=D,D=L,L=H);var U=L-D,k=zn(U-Cn)<Dt,$=k||U<Dt;if(!k&&B<V&&(H=V,V=B,B=H),$?k?V+B>0^R[1]<(zn(R[0]-D)<Dt?V:B):V<=R[1]&&R[1]<=B:U>Cn^(D<=R[0]&&R[0]<=L)){var q=Ek(P,(-A+M)/O);return _7(q,x),[R,JM(q)]}}}function l(c,f){var d=r?e:Cn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return y7e(o,a,s,r?[0,-e]:[-Cn,e-Cn])}function bon(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var LT=1e9,Sk=-LT;function v7e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return zn(l[0]-e)<Dt?c>0?0:3:zn(l[0]-n)<Dt?c>0?2:1:zn(l[1]-t)<Dt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=m7e(),d,h,p,m,g,y,v,_,b,E,w,x={point:S,lineStart:z,lineEnd:M,polygonStart:A,polygonEnd:O};function S(D,L){i(D,L)&&c.point(D,L)}function P(){for(var D=0,L=0,V=h.length;L<V;++L)for(var B=h[L],H=1,U=B.length,k=B[0],$,q,F=k[0],j=k[1];H<U;++H)$=F,q=j,k=B[H],F=k[0],j=k[1],q<=r?j>r&&(F-$)*(r-q)>(j-q)*(e-$)&&++D:j<=r&&(F-$)*(r-q)<(j-q)*(e-$)&&--D;return D}function A(){c=f,d=[],h=[],w=!0}function O(){var D=P(),L=w&&D,V=(d=t7e(d)).length;(L||V)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),V&&g7e(d,a,D,s,l),l.polygonEnd()),c=l,d=h=p=null}function z(){x.point=R,h&&h.push(p=[]),E=!0,b=!1,v=_=NaN}function M(){d&&(R(m,g),y&&b&&f.rejoin(),d.push(f.result())),x.point=S,b&&c.lineEnd()}function R(D,L){var V=i(D,L);if(h&&p.push([D,L]),E)m=D,g=L,y=V,E=!1,V&&(c.lineStart(),c.point(D,L));else if(V&&b)c.point(D,L);else{var B=[v=Math.max(Sk,Math.min(LT,v)),_=Math.max(Sk,Math.min(LT,_))],H=[D=Math.max(Sk,Math.min(LT,D)),L=Math.max(Sk,Math.min(LT,L))];bon(B,H,e,t,n,r)?(b||(c.lineStart(),c.point(B[0],B[1])),c.point(H[0],H[1]),V||c.lineEnd(),w=!1):V&&(c.lineStart(),c.point(D,L),w=!1)}v=D,_=L,b=V}return x}}function sve(e,t,n){var r=Ob(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function ove(e,t,n){var r=Ob(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function won(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ob(bk(r/c)*c,n,c).map(p).concat(Ob(bk(a/f)*f,o,f).map(m)).concat(Ob(bk(t/u)*u,e,u).filter(function(_){return zn(_%c)>Dt}).map(d)).concat(Ob(bk(s/l)*l,i,l).filter(function(_){return zn(_%f)>Dt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=sve(s,i,90),h=ove(t,e,g),p=sve(a,o,90),m=ove(r,n,g),y):g},y.extentMajor([[-180,-90+Dt],[180,90-Dt]]).extentMinor([[-180,-80-Dt],[180,80+Dt]])}const TA=e=>e;var w7=new ka,Wq=new ka,_7e,b7e,Gq,Yq,sg={point:yo,lineStart:yo,lineEnd:yo,polygonStart:function(){sg.lineStart=Eon,sg.lineEnd=Son},polygonEnd:function(){sg.lineStart=sg.lineEnd=sg.point=yo,w7.add(zn(Wq)),Wq=new ka},result:function(){var e=w7/2;return w7=new ka,e}};function Eon(){sg.point=xon}function xon(e,t){sg.point=w7e,_7e=Gq=e,b7e=Yq=t}function w7e(e,t){Wq.add(Yq*e-Gq*t),Gq=e,Yq=t}function Son(){w7e(_7e,b7e)}const ave=sg;var _E=1/0,aL=_E,CA=-_E,uL=CA,Ton={point:Con,lineStart:yo,lineEnd:yo,polygonStart:yo,polygonEnd:yo,result:function(){var e=[[_E,aL],[CA,uL]];return CA=uL=-(aL=_E=1/0),e}};function Con(e,t){e<_E&&(_E=e),e>CA&&(CA=e),t<aL&&(aL=t),t>uL&&(uL=t)}const lL=Ton;var Kq=0,Xq=0,FT=0,cL=0,fL=0,Pb=0,Qq=0,Jq=0,jT=0,E7e,x7e,md,gd,Qc={point:yv,lineStart:uve,lineEnd:lve,polygonStart:function(){Qc.lineStart=Oon,Qc.lineEnd=Pon},polygonEnd:function(){Qc.point=yv,Qc.lineStart=uve,Qc.lineEnd=lve},result:function(){var e=jT?[Qq/jT,Jq/jT]:Pb?[cL/Pb,fL/Pb]:FT?[Kq/FT,Xq/FT]:[NaN,NaN];return Kq=Xq=FT=cL=fL=Pb=Qq=Jq=jT=0,e}};function yv(e,t){Kq+=e,Xq+=t,++FT}function uve(){Qc.point=Aon}function Aon(e,t){Qc.point=Ion,yv(md=e,gd=t)}function Ion(e,t){var n=e-md,r=t-gd,i=ja(n*n+r*r);cL+=i*(md+e)/2,fL+=i*(gd+t)/2,Pb+=i,yv(md=e,gd=t)}function lve(){Qc.point=yv}function Oon(){Qc.point=kon}function Pon(){S7e(E7e,x7e)}function kon(e,t){Qc.point=S7e,yv(E7e=md=e,x7e=gd=t)}function S7e(e,t){var n=e-md,r=t-gd,i=ja(n*n+r*r);cL+=i*(md+e)/2,fL+=i*(gd+t)/2,Pb+=i,i=gd*e-md*t,Qq+=i*(md+e),Jq+=i*(gd+t),jT+=i*3,yv(md=e,gd=t)}const cve=Qc;function T7e(e){this._context=e}T7e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Fa);break}}},result:yo};var Zq=new ka,E7,C7e,A7e,BT,zT,dL={point:yo,lineStart:function(){dL.point=$on},lineEnd:function(){E7&&I7e(C7e,A7e),dL.point=yo},polygonStart:function(){E7=!0},polygonEnd:function(){E7=null},result:function(){var e=+Zq;return Zq=new ka,e}};function $on(e,t){dL.point=I7e,C7e=BT=e,A7e=zT=t}function I7e(e,t){BT-=e,zT-=t,Zq.add(ja(BT*BT+zT*zT)),BT=e,zT=t}const fve=dL;let dve,hL,hve,pve;class mve{constructor(t){this._append=t==null?O7e:Ron(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==hve||this._append!==hL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,hve=r,hL=this._append,pve=this._,this._=i}this._+=pve;break}}}result(){const t=this._;return this._="",t.length?t:null}}function O7e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ron(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return O7e;if(t!==dve){const n=10**t;dve=t,hL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return hL}function P7e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Zh(a,i(s))),s.result()}return o.area=function(a){return Zh(a,i(ave)),ave.result()},o.measure=function(a){return Zh(a,i(fve)),fve.result()},o.bounds=function(a){return Zh(a,i(lL)),lL.result()},o.centroid=function(a){return Zh(a,i(cve)),cve.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,TA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new mve(n)):new T7e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new mve(n)),o},o.projection(e).digits(n).context(t)}function N5(e){return function(t){var n=new eW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function eW(){}eW.prototype={constructor:eW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function cne(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Zh(n,e.stream(lL)),t(lL.result()),r!=null&&e.clipExtent(r),e}function D5(e,t,n){return cne(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function fne(e,t,n){return D5(e,[[0,0],t],n)}function dne(e,t,n){return cne(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function hne(e,t,n){return cne(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var gve=16,Non=Ft(30*Sn);function yve(e,t){return+t?Mon(e,t):Don(e)}function Don(e){return N5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Mon(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var b=o+d,E=a+h,w=u+p,x=ja(b*b+E*E+w*w),S=Ou(w/=x),P=zn(zn(w)-1)<Dt||zn(s-f)<Dt?(s+f)/2:fc(E,b),A=e(P,S),O=A[0],z=A[1],M=O-r,R=z-i,D=v*M-y*R;(D*D/_>t||zn((y*M+v*R)/_-.5)>.3||o*d+a*h+u*p<Non)&&(n(r,i,s,o,a,u,O,z,P,b/=x,E/=x,w,m,g),g.point(O,z),n(O,z,P,b,E,w,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,P){S=e(S,P),r.point(S[0],S[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(S,P){var A=gv([S,P]),O=e(S,P);n(f,d,c,h,p,m,f=O[0],d=O[1],c=S,h=A[0],p=A[1],m=A[2],gve,r),r.point(f,d)}function b(){g.point=y,r.lineEnd()}function E(){v(),g.point=w,g.lineEnd=x}function w(S,P){_(i=S,P),s=f,o=d,a=h,u=p,l=m,g.point=_}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,gve,r),g.lineEnd=b,b()}return g}}var Lon=N5({point:function(e,t){this.stream.point(e*Sn,t*Sn)}});function Fon(e){return N5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function jon(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function vve(e,t,n,r,i,s){if(!s)return jon(e,t,n,r,i);var o=Ft(s),a=Rt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function vh(e){return k7e(function(){return e})()}function k7e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=ive,g=null,y,v,_,b=TA,E=.5,w,x,S,P,A;function O(D){return S(D[0]*Sn,D[1]*Sn)}function z(D){return D=S.invert(D[0],D[1]),D&&[D[0]*Wi,D[1]*Wi]}O.stream=function(D){return P&&A===D?P:P=Lon(Fon(c)(m(w(b(A=D)))))},O.preclip=function(D){return arguments.length?(m=D,p=void 0,R()):m},O.postclip=function(D){return arguments.length?(b=D,g=y=v=_=null,R()):b},O.clipAngle=function(D){return arguments.length?(m=+D?_on(p=D*Sn):(p=null,ive),R()):p*Wi},O.clipExtent=function(D){return arguments.length?(b=D==null?(g=y=v=_=null,TA):v7e(g=+D[0][0],y=+D[0][1],v=+D[1][0],_=+D[1][1]),R()):g==null?null:[[g,y],[v,_]]},O.scale=function(D){return arguments.length?(n=+D,M()):n},O.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],M()):[r,i]},O.center=function(D){return arguments.length?(s=D[0]%360*Sn,o=D[1]%360*Sn,M()):[s*Wi,o*Wi]},O.rotate=function(D){return arguments.length?(a=D[0]%360*Sn,u=D[1]%360*Sn,l=D.length>2?D[2]%360*Sn:0,M()):[a*Wi,u*Wi,l*Wi]},O.angle=function(D){return arguments.length?(f=D%360*Sn,M()):f*Wi},O.reflectX=function(D){return arguments.length?(d=D?-1:1,M()):d<0},O.reflectY=function(D){return arguments.length?(h=D?-1:1,M()):h<0},O.precision=function(D){return arguments.length?(w=yve(x,E=D*D),R()):ja(E)},O.fitExtent=function(D,L){return D5(O,D,L)},O.fitSize=function(D,L){return fne(O,D,L)},O.fitWidth=function(D,L){return dne(O,D,L)},O.fitHeight=function(D,L){return hne(O,D,L)};function M(){var D=vve(n,0,0,d,h,f).apply(null,t(s,o)),L=vve(n,r-D[0],i-D[1],d,h,f);return c=p7e(a,u,l),x=Hq(t,L),S=Hq(c,x),w=yve(x,E),R()}function R(){return P=A=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&z,M()}}function pne(e){var t=0,n=Cn/3,r=k7e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sn,n=s[1]*Sn):[t*Wi,n*Wi]},i}function Bon(e){var t=Ft(e);function n(r,i){return[r*t,Rt(i)/t]}return n.invert=function(r,i){return[r/t,Ou(i*t)]},n}function zon(e,t){var n=Rt(e),r=(n+Rt(t))/2;if(zn(r)<Dt)return Bon(e);var i=1+n*(2*r-n),s=ja(i)/r;function o(a,u){var l=ja(i-2*r*Rt(u))/r;return[l*Rt(a*=r),s-l*Ft(a)]}return o.invert=function(a,u){var l=s-u,c=fc(a,zn(l))*Xl(l);return l*r<0&&(c-=Cn*Xl(a)*Xl(l)),[c/r,Ou((i-(a*a+l*l)*r*r)/(2*r))]},o}function pL(){return pne(zon).scale(155.424).center([0,33.6442])}function $7e(){return pL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Uon(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Von(){var e,t,n=$7e(),r,i=pL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=pL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Uon([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Dt,m+.12*h+Dt],[p-.214*h-Dt,m+.234*h-Dt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Dt,m+.166*h+Dt],[p-.115*h-Dt,m+.234*h-Dt]]).stream(l),f()},c.fitExtent=function(d,h){return D5(c,d,h)},c.fitSize=function(d,h){return fne(c,d,h)},c.fitWidth=function(d,h){return dne(c,d,h)},c.fitHeight=function(d,h){return hne(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function R7e(e){return function(t,n){var r=Ft(t),i=Ft(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Rt(t),s*Rt(n)]}}function bO(e){return function(t,n){var r=ja(t*t+n*n),i=e(r),s=Rt(i),o=Ft(i);return[fc(t*s,r*o),Ou(r&&n*s/r)]}}var N7e=R7e(function(e){return ja(2/(1+e))});N7e.invert=bO(function(e){return 2*Ou(e/2)});function Hon(){return vh(N7e).scale(124.75).clipAngle(180-.001)}var D7e=R7e(function(e){return(e=r7e(e))&&e/Rt(e)});D7e.invert=bO(function(e){return e});function qon(){return vh(D7e).scale(79.4188).clipAngle(180-.001)}function M5(e,t){return[e,YM(une((Fi+t)/2))]}M5.invert=function(e,t){return[e,2*Rx(n7e(t))-Fi]};function Won(){return M7e(M5).scale(961/Fa)}function M7e(e){var t=vh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Cn*r(),d=t(fon(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===M5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function Tk(e){return une((Fi+e)/2)}function Gon(e,t){var n=Ft(e),r=e===t?Rt(e):YM(n/Ft(t))/YM(Tk(t)/Tk(e)),i=n*v7(Tk(e),r)/r;if(!r)return M5;function s(o,a){i>0?a<-Fi+Dt&&(a=-Fi+Dt):a>Fi-Dt&&(a=Fi-Dt);var u=i/v7(Tk(a),r);return[u*Rt(r*o),i-u*Ft(r*o)]}return s.invert=function(o,a){var u=i-a,l=Xl(r)*ja(o*o+u*u),c=fc(o,zn(u))*Xl(u);return u*r<0&&(c-=Cn*Xl(o)*Xl(u)),[c/r,2*Rx(v7(i/l,1/r))-Fi]},s}function Yon(){return pne(Gon).scale(109.5).parallels([30,30])}function mL(e,t){return[e,t]}mL.invert=mL;function Kon(){return vh(mL).scale(152.63)}function Xon(e,t){var n=Ft(e),r=e===t?Rt(e):(n-Ft(t))/(t-e),i=n/r+e;if(zn(r)<Dt)return mL;function s(o,a){var u=i-a,l=r*o;return[u*Rt(l),i-u*Ft(l)]}return s.invert=function(o,a){var u=i-a,l=fc(o,zn(u))*Xl(u);return u*r<0&&(l-=Cn*Xl(o)*Xl(u)),[l/r,i-Xl(r)*ja(o*o+u*u)]},s}function Qon(){return pne(Xon).scale(131.154).center([0,13.9389])}var j2=1.340264,B2=-.081106,z2=893e-6,U2=.003796,gL=ja(3)/2,Jon=12;function L7e(e,t){var n=Ou(gL*Rt(t)),r=n*n,i=r*r*r;return[e*Ft(n)/(gL*(j2+3*B2*r+i*(7*z2+9*U2*r))),n*(j2+B2*r+i*(z2+U2*r))]}L7e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Jon&&(a=n*(j2+B2*r+i*(z2+U2*r))-t,u=j2+3*B2*r+i*(7*z2+9*U2*r),n-=o=a/u,r=n*n,i=r*r*r,!(zn(o)<WM));++s);return[gL*e*(j2+3*B2*r+i*(7*z2+9*U2*r))/Ft(n),Ou(Rt(n)/gL)]};function Zon(){return vh(L7e).scale(177.158)}function F7e(e,t){var n=Ft(t),r=Ft(e)*n;return[n*Rt(e)/r,Rt(t)/r]}F7e.invert=bO(Rx);function ean(){return vh(F7e).scale(144.049).clipAngle(60)}function tan(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=N5({point:function(b,E){var w=_([b,E]);this.stream.point(w[0],w[1])}}),m=TA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(b){var E=b[0]*d,w=b[1]*h;if(s){var x=w*o-E*a;E=E*o+w*a,w=x}return[E+t,w+n]}return _.invert=function(b){var E=b[0]-t,w=b[1]-n;if(s){var x=w*o+E*a;E=E*o-w*a,w=x}return[E/d,w/h]},_.stream=function(b){return g&&y===b?g:g=p(m(y=b))},_.postclip=function(b){return arguments.length?(m=b,u=l=c=f=null,v()):m},_.clipExtent=function(b){return arguments.length?(m=b==null?(u=l=c=f=null,TA):v7e(u=+b[0][0],l=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(b){return arguments.length?(e=+b,v()):e},_.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},_.angle=function(b){return arguments.length?(s=b%360*Sn,a=Rt(s),o=Ft(s),v()):s*Wi},_.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},_.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},_.fitExtent=function(b,E){return D5(_,b,E)},_.fitSize=function(b,E){return fne(_,b,E)},_.fitWidth=function(b,E){return dne(_,b,E)},_.fitHeight=function(b,E){return hne(_,b,E)},_}function j7e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}j7e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(zn(i)>Dt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function nan(){return vh(j7e).scale(175.295)}function B7e(e,t){return[Ft(t)*Rt(e),Rt(t)]}B7e.invert=bO(Ou);function ran(){return vh(B7e).scale(249.5).clipAngle(90+Dt)}function z7e(e,t){var n=Ft(t),r=1+Ft(e)*n;return[n*Rt(e)/r,Rt(t)/r]}z7e.invert=bO(function(e){return 2*Rx(e)});function ian(){return vh(z7e).scale(250).clipAngle(142)}function U7e(e,t){return[YM(une((Fi+t)/2)),-e]}U7e.invert=function(e,t){return[-t,2*Rx(n7e(e))-Fi]};function san(){var e=M7e(U7e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var oan=Math.abs,tW=Math.cos,yL=Math.sin,aan=1e-6,V7e=Math.PI,nW=V7e/2,_ve=uan(2);function bve(e){return e>1?nW:e<-1?-nW:Math.asin(e)}function uan(e){return e>0?Math.sqrt(e):0}function lan(e,t){var n=e*yL(t),r=30,i;do t-=i=(t+yL(t)-n)/(1+tW(t));while(oan(i)>aan&&--r>0);return t/2}function can(e,t,n){function r(i,s){return[e*i*tW(s=lan(n,s)),t*yL(s)]}return r.invert=function(i,s){return s=bve(s/t),[i/(e*tW(s)),bve((2*s+yL(2*s))/n)]},r}var fan=can(_ve/nW,_ve,V7e);function dan(){return vh(fan).scale(169.529)}const han=P7e(),rW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function pan(e,t){return function n(){const r=t();return r.type=e,r.path=P7e().projection(r),r.copy=r.copy||function(){const i=n();return rW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},aje(r)}}function mne(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(vL[e]=pan(e,t),this):vL[e]||null}function H7e(e){return e&&e.path||han}const vL={albers:$7e,albersusa:Von,azimuthalequalarea:Hon,azimuthalequidistant:qon,conicconformal:Yon,conicequalarea:pL,conicequidistant:Qon,equalEarth:Zon,equirectangular:Kon,gnomonic:ean,identity:tan,mercator:Won,mollweide:dan,naturalEarth1:nan,orthographic:ran,stereographic:ian,transversemercator:san};for(const e in vL)mne(e,vL[e]);function man(){}const kh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function q7e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),gan(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(yan((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,kh[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,kh[m|g<<1].forEach(_);for(kh[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,kh[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,kh[m|g<<1|y<<2|v<<3].forEach(_);kh[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,kh[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,kh[y<<2|v<<3].forEach(_);kh[y<<3].forEach(_);function _(b){var E=[b[0][0]+h,b[0][1]+p],w=[b[1][0]+h,b[1][1]+p],x=o(E),S=o(w),P,A;(P=d[x])?(A=f[S])?(delete d[P.end],delete f[A.start],P===A?(P.ring.push(w),c(P.ring)):f[P.start]=d[A.end]={start:P.start,end:A.end,ring:P.ring.concat(A.ring)}):(delete d[P.end],P.ring.push(w),d[P.end=S]=P):(P=f[S])?(A=d[x])?(delete f[P.start],delete d[A.end],P===A?(P.ring.push(w),c(P.ring)):f[A.start]=d[P.end]={start:A.start,end:P.end,ring:A.ring.concat(P.ring)}):(delete f[P.start],P.ring.unshift(E),f[P.start=x]=P):f[x]=d[S]={start:x,end:S,ring:[E,w]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Te("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:man,r):n===a},r}function gan(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function yan(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=van(e,t[n]))return i;return 0}function van(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(_an(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function _an(e,t,n){var r;return ban(e,t,n)&&wan(e[r=+(e[0]===t[0])],n[r],t[r])}function ban(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function wan(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function W7e(e,t,n){return function(r){var i=th(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?gA(s,o,e):a/(e+1);return r_(s+u,o,u)}}function gne(e){Ee.call(this,null,e)}gne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};We(gne,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ca,s=q7e().smooth(e.smooth!==!1),o=e.thresholds||Ean(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ie(o)?o:o(c.values));xan(f,c,l,e),f.forEach(d=>{u.push(u5(l,dr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Ean(e,t,n){const r=W7e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>F1(t(i).values)))}function xan(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pn(i)&&(i=i(n,r)),pn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Jn(i)?i:i[0])||1,a=(Jn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(G7e(t,o,a,u,l))}function G7e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function wve(e,t,n){const r=e>=0?e:Tee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function x7(e){return pn(e)?e:fa(+e)}function Y7e(){var e=u=>u[0],t=u=>u[1],n=Sx,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=wve(r[0],u,e)>>o,f=wve(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(b=>{const E=d+(+e(b)>>o),w=h+(+t(b)>>o);E>=0&&E<p&&w>=0&&w<m&&(g[E+w*p]+=+n(b))}),c>0&&f>0?(M_(p,m,g,y,c),L_(p,m,y,g,f),M_(p,m,g,y,c),L_(p,m,y,g,f),M_(p,m,g,y,c),L_(p,m,y,g,f)):c>0?(M_(p,m,g,y,c),M_(p,m,y,g,c),M_(p,m,g,y,c),v=y):f>0&&(L_(p,m,g,y,f),L_(p,m,y,g,f),L_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/P8e(v);for(let b=0,E=p*m;b<E;++b)v[b]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=x7(u),a):e},a.y=function(u){return arguments.length?(t=x7(u),a):t},a.weight=function(u){return arguments.length?(n=x7(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Te("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Te("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Te("invalid bandwidth"),r=u,a):r},a}function M_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function L_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function yne(e){Ee.call(this,null,e)}yne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const San=["x","y","weight","size","cellSize","bandwidth"];function K7e(e,t){return San.forEach(n=>t[n]!=null?e[n](t[n]):0),e}We(yne,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Tan(r,e.groupby),s=(e.groupby||[]).map(ji),o=K7e(Y7e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>dr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Tan(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function vne(e){Ee.call(this,null,e)}vne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};We(vne,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=q7e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||W7e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=K7e(Y7e(),e)(i,!0),u=G7e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ie(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(dr),n}});const iW="Feature",_ne="FeatureCollection",Can="MultiPoint";function bne(e){Ee.call(this,null,e)}bne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};We(bne,Ee,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ca,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ta(a))||s&&t.modified(ta(s))||o&&t.modified(ta(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:iW,geometry:{type:Can,coordinates:r}})),this.value={type:_ne,features:n}}});function wne(e){Ee.call(this,null,e)}wne.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};We(wne,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ca,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=H7e(e.projection),n.materialize().reflow()):o=i===ca||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Aan(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Aan(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Ene(e){Ee.call(this,null,e)}Ene.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};We(Ene,Ee,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function xne(e){Ee.call(this,null,e)}xne.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};We(xne,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Ian(H7e(e.projection),e.field||ac("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Ian(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Sne(e){Ee.call(this,[],e),this.generator=won()}Sne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};We(Sne,Ee,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(f9e(n[0],i)):t.add.push(dr(i)),n[0]=i,t}});function Tne(e){Ee.call(this,null,e)}Tne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};We(Tne,Ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ca,s=Pan(e.opacity,e),o=Oan(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?F1(n.map(l=>F1(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=hn({},l,u);r||(f.$max=F1(c.values||[])),l[a]=kan(c,f,o.dep?o:fa(o(f)),s.dep?s:fa(s(f)))}),t.reflow(!0).modifies(a)}});function Oan(e,t){let n;return pn(e)?(n=r=>r0(e(r,t)),n.dep=X7e(e)):n=fa(r0(e||"#888")),n}function Pan(e,t){let n;return pn(e)?(n=r=>e(r,t),n.dep=X7e(e)):e?n=fa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function X7e(e){if(!pn(e))return!1;const t=_f(ta(e));return t.$x||t.$y||t.$value||t.$max}function kan(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:ig,d=Wg(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const b=n(t);m[y+0]=b.r,m[y+1]=b.g,m[y+2]=b.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Q7e(e){Ee.call(this,null,e),this.modified(!0)}We(Q7e,Ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Ran(e.type),rW.forEach(r=>{e[r]!=null&&Eve(n,r,e[r])})):rW.forEach(r=>{e.modified(r)&&Eve(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&$an(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $an(e,t){const n=Nan(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Ran(e){const t=mne((e||"mercator").toLowerCase());return t||Te("Unrecognized projection type: "+e),t()}function Eve(e,t,n){pn(e[t])&&e[t](n)}function Nan(e){return e=nt(e),e.length===1?e[0]:{type:_ne,features:e.reduce((t,n)=>t.concat(Dan(n)),[])}}function Dan(e){return e.type===_ne?e.features:nt(e).filter(t=>t!=null).map(t=>t.type===iW?t:{type:iW,geometry:t})}const Man=Object.freeze(Object.defineProperty({__proto__:null,contour:vne,geojson:bne,geopath:wne,geopoint:Ene,geoshape:xne,graticule:Sne,heatmap:Tne,isocontour:gne,kde2d:yne,projection:Q7e},Symbol.toStringTag,{value:"Module"})),xve={center:VAt,collide:uIt,nbody:_It,link:cIt,x:bIt,y:wIt},UT="forces",sW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Lan=["static","iterations"],J7e=["x","y","vx","vy"];function Cne(e){Ee.call(this,null,e)}Cne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:J7e}]};We(Cne,Ee,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(sW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Z7e(n,e,0,t)):(this.value=n=jan(t.source,e),n.on("tick",Fan(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Lan)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==UT||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(J7e)}});function Fan(e,t){return()=>e.touch(t).run()}function jan(e,t){const n=vIt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Z7e(n,t,!0).on("end",()=>s=!0)}function Z7e(e,t,n,r){var i=nt(t.forces),s,o,a,u;for(s=0,o=sW.length;s<o;++s)a=sW[s],a!==UT&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=UT+s,a=n||t.modified(UT,s)?zan(i[s]):r&&Ban(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(UT+s,null);return e.numForces=i.length,e}function Ban(e,t){var n,r;for(n in e)if(pn(r=e[n])&&t.modified(ta(r)))return 1;return 0}function zan(e){var t,n;Nt(xve,e.force)||Te("Unrecognized force: "+e.force),t=xve[e.force]();for(n in e)pn(t[n])&&Uan(t[n],e[n],e);return t}function Uan(e,t,n){e(pn(t)?r=>t(r,n):t)}const Van=Object.freeze(Object.defineProperty({__proto__:null,force:Cne},Symbol.toStringTag,{value:"Module"}));function oW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Ane(e){Ee.call(this,null,e)}Ane.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Han=e=>e.values;We(Ane,Ee,{transform(e,t){t.source||Te("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&a5(o.data)&&i.rem.push(o.data)}),this.value=s=x4({values:nt(e.keys).reduce((o,a)=>(o.key(a),o),qan()).entries(i.source)},Han),n&&s.each(o=>{o.children&&(o=dr(o.data),i.add.push(o),i.source.push(o))}),oW(s,$t,$t)),i.source.root=s,i}});function qan(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ym(e){Ee.call(this,null,e)}const Wan=(e,t)=>e.parent===t.parent?1:2;We(ym,Ee,{transform(e,t){(!t.source||!t.source.root)&&Te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(i_(e.sort,o=>o.data)),Gan(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Wan:Sx);try{this.value=n(i)}catch(o){Te(o)}return i.each(o=>Yan(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Gan(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function Yan(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const aW=["x","y","r","depth","children"];function Ine(e){ym.call(this,e)}Ine.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:aW.length,default:aW}]};We(Ine,ym,{layout:C$e,params:["radius","size","padding"],fields:aW});const uW=["x0","y0","x1","y1","depth","children"];function One(e){ym.call(this,e)}One.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uW.length,default:uW}]};We(One,ym,{layout:hOt,params:["size","round","padding"],fields:uW});function Pne(e){Ee.call(this,null,e)}Pne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};We(Pne,Ee,{transform(e,t){t.source||Te("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?oW(ipe().id(e.key).parentId(e.parentKey)(i.source),e.key,uc):oW(ipe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Sve={tidy:xOt,cluster:MIt},lW=["x","y","depth","children"];function kne(e){ym.call(this,e)}kne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:lW.length,default:lW}]};We(kne,ym,{layout(e){const t=e||"tidy";if(Nt(Sve,t))return Sve[t]();Te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:lW});function $ne(e){Ee.call(this,[],e)}$ne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};We($ne,Ee,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[$t(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[$t(a)]&&s[$t(u)]&&i.add.push(dr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[$t(o)]=1),n.forEach(o=>{(s[$t(o.source)]||s[$t(o.target)])&&i.mod.push(o)})),i}});const Tve={binary:TOt,dice:yI,slice:S4,slicedice:COt,squarify:P$e,resquarify:AOt},cW=["x0","y0","x1","y1","depth","children"];function Rne(e){ym.call(this,e)}Rne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cW.length,default:cW}]};We(Rne,ym,{layout(){const e=SOt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Nt(Tve,t)?e.tile(Tve[t]):Te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:cW});const Kan=Object.freeze(Object.defineProperty({__proto__:null,nest:Ane,pack:Ine,partition:One,stratify:Pne,tree:kne,treelinks:$ne,treemap:Rne},Symbol.toStringTag,{value:"Module"})),S7=4278190080;function Xan(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Qan(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=Wg(s,o).getContext("2d"),l=Wg(s,o).getContext("2d"),c=a&&Wg(s,o).getContext("2d");n.forEach(S=>nR(u,S,!1)),nR(l,t,!1),a&&nR(c,t,!0);const f=T7(u,s,o),d=T7(l,s,o),h=a&&T7(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,b,E,w,x;for(y=0;y<o;++y)for(g=0;g<s;++g)b=y*s+g,E=f[b]&S7,x=d[b]&S7,w=a&&h[b]&S7,(E||w||x)&&(v=e(g),_=e(y),!i&&(E||x)&&p.set(v,_),a&&(E||w)&&m.set(v,_));return[p,m]}function T7(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function nR(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>nR(e,s.items,n))}):_l[r].draw(e,{items:n?t.map(Jan):t})}function Jan(e){const t=u5(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const $h=5,va=31,AA=32,Ym=new Uint32Array(AA+1),qc=new Uint32Array(AA+1);qc[0]=0;Ym[0]=~qc[0];for(let e=1;e<=AA;++e)qc[e]=qc[e-1]<<1|1,Ym[e]=~qc[e];function Zan(e,t){const n=new Uint32Array(~~((e*t+AA)/AA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>$h]&1<<(a&va)},set:(s,o)=>{const a=o*e+s;r(a>>>$h,1<<(a&va))},clear:(s,o)=>{const a=o*e+s;i(a>>>$h,~(1<<(a&va)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>$h,h=f>>>$h,d===h){if(n[d]&Ym[c&va]&qc[(f&va)+1])return!0}else{if(n[d]&Ym[c&va]||n[h]&qc[(f&va)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>$h,d=c>>>$h,f===d)r(f,Ym[l&va]&qc[(c&va)+1]);else for(r(f,Ym[l&va]),r(d,qc[(c&va)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>$h,d=c>>>$h,f===d)i(f,qc[l&va]|Ym[(c&va)+1]);else for(i(f,qc[l&va]),i(d,Ym[(c&va)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function eun(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Zan(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function tun(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ul.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function _L(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function bg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function nun(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!_L(p,m,d,h,i,s)&&!bg(e,p,m,h,d,g,o,a)&&!bg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,bg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ul.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,b,E,w,x,S,P,A,O,z,M,R,D,L,V,B;for(let H=0;H<f;++H){for(v=c[H].x,b=c[H].y,_=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?b:c[H].y2,v>_&&(B=v,v=_,_=B),b>E&&(B=b,b=E,E=B),A=e(v),z=e(_),O=~~((A+z)/2),M=e(b),D=e(E),R=~~((M+D)/2),S=O;S>=A;--S)for(P=R;P>=M;--P)V=u(S,P,p,h,d),V&&([l.x,l.y,p,m]=V);for(S=O;S<=z;++S)for(P=R;P<=D;++P)V=u(S,P,p,h,d),V&&([l.x,l.y,p,m]=V);!m&&!n&&(L=Math.abs(_-v+E-b),w=(v+_)/2,x=(b+E)/2,L>=y&&!_L(w,x,h,d,i,s)&&!bg(e,w,x,d,h,d,o,null)&&(y=L,l.x=w,l.y=x,g=!0))}return m||g?(w=h/2,x=d/2,o.setRange(e(l.x-w),e(l.y-x),e(l.x+w),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const run=[-1,-1,1,1],iun=[-1,1,-1,1];function sun(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ul.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,b,E,w,x,S,P,A,O,z,M,R;for(let D=0;D<f;++D){for(_=c[D].x,E=c[D].y,b=c[D].x2===void 0?_:c[D].x2,w=c[D].y2===void 0?E:c[D].y2,p.push([e((_+b)/2),e((E+w)/2)]);p.length;)if([P,A]=p.pop(),!(o.get(P,A)||a.get(P,A)||u.get(P,A))){u.set(P,A);for(let L=0;L<4;++L)x=P+run[L],S=A+iun[L],u.outOfBounds(x,S,x,S)||p.push([x,S]);if(x=e.invert(P),S=e.invert(A),O=m,z=s,!_L(x,S,h,d,i,s)&&!bg(e,x,S,d,h,O,o,a)&&!bg(e,x,S,d,h,d,o,null)){for(;z-O>=1;)M=(O+z)/2,bg(e,x,S,d,h,M,o,a)?z=M:O=M;O>m&&(l.x=x,l.y=S,m=O,g=!0)}}!g&&!n&&(R=Math.abs(b-_+w-E),x=(_+b)/2,S=(E+w)/2,R>=v&&!_L(x,S,h,d,i,s)&&!bg(e,x,S,d,h,d,o,null)&&(v=R,l.x=x,l.y=S,y=!0))}return g||y?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const oun=["right","center","left"],aun=["bottom","middle","top"];function uun(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,b,E,w,x,S,P,A,O;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,m=h===0&&p===0||r[z]<0,g=h&&p?Math.SQRT1_2:1,y=r[z]<0?-1:1,v=c[1+h]+r[z]*h*g,x=c[4+p]+y*f*p/2+r[z]*p*g,b=x-f/2,E=x+f/2,S=e(v),A=e(b),O=e(E),!d)if(Cve(S,S,A,O,o,a,v,v,b,E,c,m))d=ul.width(l.datum,l.datum.text);else continue;if(w=v+y*d*h/2,v=w-d/2,_=w+d/2,S=e(v),P=e(_),Cve(S,P,A,O,o,a,v,_,b,E,c,m))return l.x=h?h*y<0?_:v:w,l.y=p?p*y<0?E:b:x,l.align=oun[h*y+1],l.baseline=aun[p*y+1],o.setRange(S,A,P,O),!0}return!1}}function Cve(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const C7=0,A7=4,I7=8,O7=0,P7=1,k7=2,lun={"top-left":C7+O7,top:C7+P7,"top-right":C7+k7,left:A7+O7,middle:A7+P7,right:A7+k7,"bottom-left":I7+O7,bottom:I7+P7,"bottom-right":I7+k7},cun={naive:tun,"reduced-search":nun,floodfill:sun};function fun(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=dun(r,f),h=hun(i,f),p=pun(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=mun(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let b=-1,E=-1;const w=e.map(A=>{const O=v?ul.width(A,A.text):void 0;return b=Math.max(b,O),E=Math.max(E,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(A),textWidth:O}});l=l===null||l===1/0?Math.max(b,E)+Math.max(...r):l;const x=eun(t[0],t[1],l);let S;if(!_){n&&w.sort((z,M)=>n(z.datum,M.datum));let A=!1;for(let z=0;z<h.length&&!A;++z)A=h[z]===5||d[z]<0;const O=(p&&o||g)&&e.map(z=>z.datum);S=s.length||O?Qan(x,O||[],s,A,g):Xan(x,o&&w)}const P=g?cun[c](x,S,o,u):uun(x,S,h,d);return w.forEach(A=>A.opacity=+P(A)),w}function dun(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function hun(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=lun[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function pun(e){return e&&e.mark&&e.mark.marktype}function mun(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const fW=["x","y","opacity","align","baseline"],eze=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Nne(e){Ee.call(this,null,e)}Nne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:eze},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:fW.length,default:fW}]};We(Nne,Ee,{transform(e,t){function n(s){const o=e[s];return pn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Te("Size parameter should be specified as a [width, height] array.");const i=e.as||fW;return fun(t.materialize(t.SOURCE).source||[],e.size,e.sort,nt(e.offset==null?1:e.offset),nt(e.anchor||eze),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const gun=Object.freeze(Object.defineProperty({__proto__:null,label:Nne},Symbol.toStringTag,{value:"Module"}));function tze(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Dne(e){Ee.call(this,null,e)}Dne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};We(Dne,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=tze(r,e.groupby),s=(e.groupby||[]).map(ji),o=s.length,a=e.as||[ji(e.x),ji(e.y)],u=[];i.forEach(l=>{O9e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(dr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const dW={constant:Lee,linear:Fee,log:T9e,exp:C9e,pow:A9e,quad:jee,poly:I9e},yun=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Mne(e){Ee.call(this,null,e)}Mne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};We(Mne,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=tze(r,e.groupby),s=(e.groupby||[]).map(ji),o=e.method||"linear",a=e.order==null?3:e.order,u=yun(o,a),l=e.as||[ji(e.x),ji(e.y)],c=dW[o],f=[];let d=e.extent;Nt(dW,o)||Te("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(dr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||th(h,e.x),y=v=>{const _={};for(let b=0;b<s.length;++b)_[s[b]]=h.dims[b];_[l[0]]=v[0],_[l[1]]=v[1],f.push(dr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):m5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const vun=Object.freeze(Object.defineProperty({__proto__:null,loess:Dne,regression:Mne},Symbol.toStringTag,{value:"Module"})),Ave=1e-6;class _1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Ave||Math.abs(this._y1-s)>Ave)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class hW{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let _un=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const b=r[m]*2,E=r[m+1]*2,w=r[m+2]*2,x=t[b],S=t[b+1],P=t[E],A=t[E+1],O=t[w],z=t[w+1],M=P-x,R=A-S,D=O-x,L=z-S,V=(M*L-R*D)*2;if(Math.abs(V)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const B=1e9*Math.sign((s-x)*L-(o-S)*D);v=(x+O)/2-B*L,_=(S+z)/2+B*D}else{const B=1/V,H=M*M+R*R,U=D*D+L*L;v=x+(L*H-R*U)*B,_=S+(M*U-D*H)*B}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new _1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new _1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new _1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new hW;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const bun=2*Math.PI,F_=Math.pow;function wun(e){return e[0]}function Eun(e){return e[1]}function xun(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Sun(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Lne{static from(t,n=wun,r=Eun,i){return new Lne("length"in t?Tun(t,n,r,i):Float64Array.from(Cun(t,n,r,i)))}constructor(t){this._delaunator=new JD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&xun(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Sun(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new JD(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new _un(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=F_(n-l[t*2],2)+F_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=F_(n-l[p*2],2)+F_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&F_(n-l[h*2],2)+F_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new _1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new _1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,bun)}return r&&r.value()}renderHull(t){const n=t==null?t=new _1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new hW;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new _1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new hW;return this.renderTriangle(t,n),n.value()}}function Tun(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Cun(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Fne(e){Ee.call(this,null,e)}Fne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Aun=[-1e5,-1e5,1e5,1e5];We(Fne,Ee,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Aun;const s=this.value=Lne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Oun(u)?Iun(u):null}return t.reflow(e.modified()).modifies(n)}});function Iun(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Oun(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Pun=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Fne},Symbol.toStringTag,{value:"Module"}));var $7=Math.PI/180,VT=64,rR=2048;function kun(){var e=[256,256],t,n,r,i,s,o,a,u=nze,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Wg()),m=Lun((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],b=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,x)=>x.size-w.size);++v<y;){var E=b[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,$un(p,E,b,v),E.hasText&&h(m,E,g)&&(_.push(E),g?Nun(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(VT<<5)/m,p.height=rR/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=u(e),E=c()<.5?1:-1,w=-E,x,S,P;(x=b(w+=E))&&(S=~~x[0],P=~~x[1],!(Math.min(Math.abs(S),Math.abs(P))>=_));)if(m.x=y+S,m.y=v+P,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Run(m,p,e[0]))&&(!g||Dun(m,g))){for(var A=m.sprite,O=m.width>>5,z=e[0]>>5,M=m.x-(O<<4),R=M&127,D=32-R,L=m.y1-m.y0,V=(m.y+m.y0)*z+(M>>5),B,H=0;H<L;H++){B=0;for(var U=0;U<=O;U++)p[V+U]|=B<<D|(U<O?(B=A[H*O+U])>>>R:0);V+=z}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=my(p),f):n},f.fontStyle=function(p){return arguments.length?(i=my(p),f):i},f.fontWeight=function(p){return arguments.length?(s=my(p),f):s},f.rotate=function(p){return arguments.length?(o=my(p),f):o},f.text=function(p){return arguments.length?(t=my(p),f):t},f.spiral=function(p){return arguments.length?(u=Fun[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=my(p),f):r},f.padding=function(p){return arguments.length?(a=my(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function $un(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(VT<<5)/s,rR/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*$7),g=Math.cos(t.rotate*$7),y=c*g,v=c*m,_=d*g,b=d*m;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=VT<<5&&(o=0,a+=u,u=0),a+d>=rR)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*$7),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(VT<<5)/s,rR/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var P=f*p+(h>>5),A=E[(a+p)*(VT<<5)+(o+h)<<2]?1<<31-h%32:0;w[P]|=A,x|=A}x?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function Run(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Nun(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Dun(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function nze(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Mun(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Lun(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function my(e){return typeof e=="function"?e:function(){return e}}var Fun={archimedean:nze,rectangular:Mun};const rze=["x","y","font","fontSize","fontStyle","fontWeight","angle"],jun=["text","font","rotate","fontSize","fontStyle","fontWeight"];function jne(e){Ee.call(this,kun(),e)}jne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:rze}]};We(jne,Ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Te("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return pn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||jun.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||rze;let a=e.fontSize||14,u;if(pn(a)?u=e.fontSizeRange:a=fa(a),u){const p=a,m=or("sqrt")().domain(th(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(cc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Bun=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:jne},Symbol.toStringTag,{value:"Module"})),zun=e=>new Uint8Array(e),Uun=e=>new Uint16Array(e),V2=e=>new Uint32Array(e);function Vun(){let e=8,t=[],n=V2(0),r=Ck(0,e),i=Ck(0,e);return{data:()=>t,seen:()=>n=Hun(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=Ck(s,e,r),i=Ck(s,e))}}}function Hun(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Ck(e,t,n){const r=(t<257?zun:t<65537?Uun:V2)(e);return n&&r.set(n),r}function Ive(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Ove(){let e=V2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=V2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=qun(h,d),c)p=t,m=e,t=Array(c+f),e=V2(c+f),Wun(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[eZt(u,a[0],0,l),PM(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function qun(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),iZt(e,t)}function Wun(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Bne(e){Ee.call(this,Vun(),e),this._indices=null,this._dims=null}Bne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};We(Bne,Ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Ove()),s.push(Ive(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,b,E,w,x;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,E=0,w=v.length;E<w;++E)b[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=Ove(),p[y]=m=g.insert(x,t.source,0)),o[E]=Ive(g,E,i[E]).onAdd(m,u));for(E=0,w=a.data().length;E<w;++E)_[E]||(l[E]!==u[E]?f.push(E):b[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function zne(e){Ee.call(this,null,e)}zne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};We(zne,Ee,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Gun=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Bne,resolvefilter:zne},Symbol.toStringTag,{value:"Module"})),Yun="RawCode",vv="Literal",Kun="Property",Xun="Identifier",Qun="ArrayExpression",Jun="BinaryExpression",ize="CallExpression",Zun="ConditionalExpression",eln="LogicalExpression",tln="MemberExpression",nln="ObjectExpression",rln="UnaryExpression";function Pf(e){this.type=e}Pf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=iln(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function iln(e){switch(e.type){case Qun:return e.elements;case Jun:case eln:return[e.left,e.right];case ize:return[e.callee].concat(e.arguments);case Zun:return[e.test,e.consequent,e.alternate];case tln:return[e.object,e.property];case nln:return e.properties;case Kun:return[e.key,e.value];case rln:return[e.argument];case Xun:case vv:case Yun:default:return[]}}var _h,Ct,xe,ra,_r,L5=1,wO=2,_v=3,Z0=4,F5=5,a_=6,ru=7,EO=8,sln=9;_h={};_h[L5]="Boolean";_h[wO]="<end>";_h[_v]="Identifier";_h[Z0]="Keyword";_h[F5]="Null";_h[a_]="Numeric";_h[ru]="Punctuator";_h[EO]="String";_h[sln]="RegularExpression";var oln="ArrayExpression",aln="BinaryExpression",uln="CallExpression",lln="ConditionalExpression",sze="Identifier",cln="Literal",fln="LogicalExpression",dln="MemberExpression",hln="ObjectExpression",pln="Property",mln="UnaryExpression",qs="Unexpected token %0",gln="Unexpected number",yln="Unexpected string",vln="Unexpected identifier",_ln="Unexpected reserved word",bln="Unexpected end of input",pW="Invalid regular expression",R7="Invalid regular expression: missing /",oze="Octal literals are not allowed in strict mode.",wln="Duplicate data property in object literal not allowed in strict mode",vo="ILLEGAL",IA="Disabled.",Eln=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),xln=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function j5(e,t){if(!e)throw new Error("ASSERT: "+t)}function qh(e){return e>=48&&e<=57}function Une(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function H2(e){return"01234567".indexOf(e)>=0}function Sln(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function OA(e){return e===10||e===13||e===8232||e===8233}function xO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Eln.test(String.fromCharCode(e))}function bL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&xln.test(String.fromCharCode(e))}const Tln={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function aze(){for(;xe<ra;){const e=Ct.charCodeAt(xe);if(Sln(e)||OA(e))++xe;else break}}function mW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)xe<ra&&Une(Ct[xe])?(r=Ct[xe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ir({},qs,vo);return String.fromCharCode(i)}function Cln(){var e,t,n,r;for(e=Ct[xe],t=0,e==="}"&&ir({},qs,vo);xe<ra&&(e=Ct[xe++],!!Une(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ir({},qs,vo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function uze(){var e,t;for(e=Ct.charCodeAt(xe++),t=String.fromCharCode(e),e===92&&(Ct.charCodeAt(xe)!==117&&ir({},qs,vo),++xe,e=mW("u"),(!e||e==="\\"||!xO(e.charCodeAt(0)))&&ir({},qs,vo),t=e);xe<ra&&(e=Ct.charCodeAt(xe),!!bL(e));)++xe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ct.charCodeAt(xe)!==117&&ir({},qs,vo),++xe,e=mW("u"),(!e||e==="\\"||!bL(e.charCodeAt(0)))&&ir({},qs,vo),t+=e);return t}function Aln(){var e,t;for(e=xe++;xe<ra;){if(t=Ct.charCodeAt(xe),t===92)return xe=e,uze();if(bL(t))++xe;else break}return Ct.slice(e,xe)}function Iln(){var e,t,n;return e=xe,t=Ct.charCodeAt(xe)===92?uze():Aln(),t.length===1?n=_v:Tln.hasOwnProperty(t)?n=Z0:t==="null"?n=F5:t==="true"||t==="false"?n=L5:n=_v,{type:n,value:t,start:e,end:xe}}function N7(){var e=xe,t=Ct.charCodeAt(xe),n,r=Ct[xe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xe,{type:ru,value:String.fromCharCode(t),start:e,end:xe};default:if(n=Ct.charCodeAt(xe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xe+=2,{type:ru,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:xe};case 33:case 61:return xe+=2,Ct.charCodeAt(xe)===61&&++xe,{type:ru,value:Ct.slice(e,xe),start:e,end:xe}}}if(o=Ct.substr(xe,4),o===">>>=")return xe+=4,{type:ru,value:o,start:e,end:xe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return xe+=3,{type:ru,value:s,start:e,end:xe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return xe+=2,{type:ru,value:i,start:e,end:xe};if(i==="//"&&ir({},qs,vo),"<>=!+-*%&|^/".indexOf(r)>=0)return++xe,{type:ru,value:r,start:e,end:xe};ir({},qs,vo)}function Oln(e){let t="";for(;xe<ra&&Une(Ct[xe]);)t+=Ct[xe++];return t.length===0&&ir({},qs,vo),xO(Ct.charCodeAt(xe))&&ir({},qs,vo),{type:a_,value:parseInt("0x"+t,16),start:e,end:xe}}function Pln(e){let t="0"+Ct[xe++];for(;xe<ra&&H2(Ct[xe]);)t+=Ct[xe++];return(xO(Ct.charCodeAt(xe))||qh(Ct.charCodeAt(xe)))&&ir({},qs,vo),{type:a_,value:parseInt(t,8),octal:!0,start:e,end:xe}}function Pve(){var e,t,n;if(n=Ct[xe],j5(qh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=xe,e="",n!=="."){if(e=Ct[xe++],n=Ct[xe],e==="0"){if(n==="x"||n==="X")return++xe,Oln(t);if(H2(n))return Pln(t);n&&qh(n.charCodeAt(0))&&ir({},qs,vo)}for(;qh(Ct.charCodeAt(xe));)e+=Ct[xe++];n=Ct[xe]}if(n==="."){for(e+=Ct[xe++];qh(Ct.charCodeAt(xe));)e+=Ct[xe++];n=Ct[xe]}if(n==="e"||n==="E")if(e+=Ct[xe++],n=Ct[xe],(n==="+"||n==="-")&&(e+=Ct[xe++]),qh(Ct.charCodeAt(xe)))for(;qh(Ct.charCodeAt(xe));)e+=Ct[xe++];else ir({},qs,vo);return xO(Ct.charCodeAt(xe))&&ir({},qs,vo),{type:a_,value:parseFloat(e),start:t,end:xe}}function kln(){var e="",t,n,r,i,s=!1;for(t=Ct[xe],j5(t==="'"||t==='"',"String literal must starts with a quote"),n=xe,++xe;xe<ra;)if(r=Ct[xe++],r===t){t="";break}else if(r==="\\")if(r=Ct[xe++],!r||!OA(r.charCodeAt(0)))switch(r){case"u":case"x":Ct[xe]==="{"?(++xe,e+=Cln()):e+=mW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:H2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),xe<ra&&H2(Ct[xe])&&(s=!0,i=i*8+"01234567".indexOf(Ct[xe++]),"0123".indexOf(r)>=0&&xe<ra&&H2(Ct[xe])&&(i=i*8+"01234567".indexOf(Ct[xe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ct[xe]===`
`&&++xe;else{if(OA(r.charCodeAt(0)))break;e+=r}return t!==""&&ir({},qs,vo),{type:EO,value:e,octal:s,start:n,end:xe}}function $ln(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ir({},pW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ir({},pW)}try{return new RegExp(e,t)}catch{return null}}function Rln(){var e,t,n,r,i;for(e=Ct[xe],j5(e==="/","Regular expression literal must start with a slash"),t=Ct[xe++],n=!1,r=!1;xe<ra;)if(e=Ct[xe++],t+=e,e==="\\")e=Ct[xe++],OA(e.charCodeAt(0))&&ir({},R7),t+=e;else if(OA(e.charCodeAt(0)))ir({},R7);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ir({},R7),i=t.substr(1,t.length-2),{value:i,literal:t}}function Nln(){var e,t,n;for(t="",n="";xe<ra&&(e=Ct[xe],!!bL(e.charCodeAt(0)));)++xe,e==="\\"&&xe<ra?ir({},qs,vo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ir({},pW,n),{value:n,literal:t}}function Dln(){var e,t,n,r;return _r=null,aze(),e=xe,t=Rln(),n=Nln(),r=$ln(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xe}}function Mln(e){return e.type===_v||e.type===Z0||e.type===L5||e.type===F5}function lze(){if(aze(),xe>=ra)return{type:wO,start:xe,end:xe};const e=Ct.charCodeAt(xe);return xO(e)?Iln():e===40||e===41||e===59?N7():e===39||e===34?kln():e===46?qh(Ct.charCodeAt(xe+1))?Pve():N7():qh(e)?Pve():N7()}function fu(){const e=_r;return xe=e.end,_r=lze(),xe=e.end,e}function cze(){const e=xe;_r=lze(),xe=e}function Lln(e){const t=new Pf(oln);return t.elements=e,t}function kve(e,t,n){const r=new Pf(e==="||"||e==="&&"?fln:aln);return r.operator=e,r.left=t,r.right=n,r}function Fln(e,t){const n=new Pf(uln);return n.callee=e,n.arguments=t,n}function jln(e,t,n){const r=new Pf(lln);return r.test=e,r.consequent=t,r.alternate=n,r}function Vne(e){const t=new Pf(sze);return t.name=e,t}function HT(e){const t=new Pf(cln);return t.value=e.value,t.raw=Ct.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function $ve(e,t,n){const r=new Pf(dln);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Bln(e){const t=new Pf(hln);return t.properties=e,t}function Rve(e,t,n){const r=new Pf(pln);return r.key=t,r.value=n,r.kind=e,r}function zln(e,t){const n=new Pf(mln);return n.operator=e,n.argument=t,n.prefix=!0,n}function ir(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(j5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=xe,n.description=i,n}function B5(e){e.type===wO&&ir(e,bln),e.type===a_&&ir(e,gln),e.type===EO&&ir(e,yln),e.type===_v&&ir(e,vln),e.type===Z0&&ir(e,_ln),ir(e,qs,e.value)}function ia(e){const t=fu();(t.type!==ru||t.value!==e)&&B5(t)}function ei(e){return _r.type===ru&&_r.value===e}function D7(e){return _r.type===Z0&&_r.value===e}function Uln(){const e=[];for(xe=_r.start,ia("[");!ei("]");)ei(",")?(fu(),e.push(null)):(e.push(bv()),ei("]")||ia(","));return fu(),Lln(e)}function Nve(){xe=_r.start;const e=fu();return e.type===EO||e.type===a_?(e.octal&&ir(e,oze),HT(e)):Vne(e.value)}function Vln(){var e,t,n,r;if(xe=_r.start,e=_r,e.type===_v)return n=Nve(),ia(":"),r=bv(),Rve("init",n,r);if(e.type===wO||e.type===ru)B5(e);else return t=Nve(),ia(":"),r=bv(),Rve("init",t,r)}function Hln(){var e=[],t,n,r,i={},s=String;for(xe=_r.start,ia("{");!ei("}");)t=Vln(),t.key.type===sze?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ir({},wln):i[r]=!0,e.push(t),ei("}")||ia(",");return ia("}"),Bln(e)}function qln(){ia("(");const e=Hne();return ia(")"),e}const Wln={if:1};function Gln(){var e,t,n;if(ei("("))return qln();if(ei("["))return Uln();if(ei("{"))return Hln();if(e=_r.type,xe=_r.start,e===_v||Wln[_r.value])n=Vne(fu().value);else if(e===EO||e===a_)_r.octal&&ir(_r,oze),n=HT(fu());else{if(e===Z0)throw new Error(IA);e===L5?(t=fu(),t.value=t.value==="true",n=HT(t)):e===F5?(t=fu(),t.value=null,n=HT(t)):ei("/")||ei("/=")?(n=HT(Dln()),cze()):B5(fu())}return n}function Yln(){const e=[];if(ia("("),!ei(")"))for(;xe<ra&&(e.push(bv()),!ei(")"));)ia(",");return ia(")"),e}function Kln(){xe=_r.start;const e=fu();return Mln(e)||B5(e),Vne(e.value)}function Xln(){return ia("."),Kln()}function Qln(){ia("[");const e=Hne();return ia("]"),e}function Jln(){var e,t,n;for(e=Gln();;)if(ei("."))n=Xln(),e=$ve(".",e,n);else if(ei("("))t=Yln(),e=Fln(e,t);else if(ei("["))n=Qln(),e=$ve("[",e,n);else break;return e}function Dve(){const e=Jln();if(_r.type===ru&&(ei("++")||ei("--")))throw new Error(IA);return e}function iR(){var e,t;if(_r.type!==ru&&_r.type!==Z0)t=Dve();else{if(ei("++")||ei("--"))throw new Error(IA);if(ei("+")||ei("-")||ei("~")||ei("!"))e=fu(),t=iR(),t=zln(e.value,t);else{if(D7("delete")||D7("void")||D7("typeof"))throw new Error(IA);t=Dve()}}return t}function Mve(e){let t=0;if(e.type!==ru&&e.type!==Z0)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Zln(){var e,t,n,r,i,s,o,a,u,l;if(e=_r,u=iR(),r=_r,i=Mve(r),i===0)return u;for(r.prec=i,fu(),t=[e,_r],o=iR(),s=[u,r,o];(i=Mve(_r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=kve(a,u,o),s.push(n);r=fu(),r.prec=i,s.push(r),t.push(_r),n=iR(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=kve(s[l-1].value,s[l-2],n),l-=2;return n}function bv(){var e,t,n;return e=Zln(),ei("?")&&(fu(),t=bv(),ia(":"),n=bv(),e=jln(e,t,n)),e}function Hne(){const e=bv();if(ei(","))throw new Error(IA);return e}function qne(e){Ct=e,xe=0,ra=Ct.length,_r=null,cze();const t=Hne();if(_r.type!==wO)throw new Error("Unexpect token after expression.");return t}var fze={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function dze(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Te("Missing arguments to clamp function."),o.length>3&&Te("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Te("Missing arguments to if function."),o.length>3&&Te("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function ecn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function hze(e){e=e||{};const t=e.allowed?_f(e.allowed):{},n=e.forbidden?_f(e.forbidden):{},r=e.constants||fze,i=(e.functions||dze)(f),s=e.globalvar,o=e.fieldvar,a=pn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(rt(p))return p;const m=d[p.type];return m==null&&Te("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Nt(n,m)?Te("Illegal identifier: "+m):Nt(r,m)?r[m]:Nt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[ecn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Te("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Nt(i,m)&&i[m];return y||Te("Unrecognized function: "+m),pn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Lve=Symbol("vega_selection_getter");function pze(e){return(!e.getter||!e.getter[Lve])&&(e.getter=ac(e.field),e.getter[Lve]=!0),e.getter}const Wne="intersect",Fve="union",tcn="vlMulti",ncn="vlPoint",jve="or",rcn="and",rd="_vgsid_",PA=ac(rd),icn="E",scn="R",ocn="R-E",acn="R-LE",ucn="R-RE",wL="index:unit";function Bve(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=pze(a)(e),Vg(o)&&(o=Xo(o)),Vg(r[s])&&(r[s]=Xo(r[s])),Ie(r[s])&&Vg(r[s][0])&&(r[s]=r[s].map(Xo)),a.type===icn){if(Ie(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===scn){if(!Cb(o,r[s]))return!1}else if(a.type===ucn){if(!Cb(o,r[s],!0,!1))return!1}else if(a.type===ocn){if(!Cb(o,r[s],!1,!1))return!1}else if(a.type===acn&&!Cb(o,r[s],!1,!0))return!1;return!0}function lcn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[wL]&&r[wL].value:void 0,o=n===Wne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Bve(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Bve(t,l),o^h)return h;return a&&o}const mze=iO(PA),ccn=mze.left,fcn=mze.right;function dcn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[wL]&&r[wL].value:void 0,o=n===Wne,a=PA(t),u=ccn(i,a);if(u===i.length||PA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(fcn(i,a)-u<s.size)return!1}return!0}function hcn(e,t){return e.map(n=>hn(t.fields?{values:t.fields.map(r=>pze(r)(n.datum))}:{[rd]:PA(n.datum)},t))}function pcn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,b=0,E,w;b<_;++b)if(l=s[b],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,w=c.length;E<w;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=M7[`${y}_union`],m[d]=v(g,nt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(nt(f).reduce((x,S,P)=>(x[c[P].field]=S,x),{})))}else h=rd,p=PA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[rd]:p}));if(t=t||Fve,o[rd]?o[rd]=M7[`${rd}_${t}`](...Object.values(o[rd])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(S=>o[x][S]).reduce((S,P)=>S===void 0?P:M7[`${u[x]}_${t}`](S,P))}),s=Object.keys(a),n&&s.length){const x=r?ncn:tcn;o[x]=t===Fve?{[jve]:s.reduce((S,P)=>(S.push(...a[P]),S),[])}:{[rcn]:s.map(S=>({[jve]:a[S]}))}}return o}var M7={[`${rd}_union`]:hZt,[`${rd}_intersect`]:fZt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Xo(t[0]),r=Xo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Xo(t[0]),r=Xo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const mcn=":",gcn="@";function Gne(e,t,n,r){t[0].type!==vv&&Te("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Un(t).value,o="unit",a=gcn+o,u=mcn+i;s===Wne&&!Nt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Nt(r,u)||(r[u]=n.getData(i).tuplesRef())}function gze(e){const t=this.context.data[e];return t?t.values.value:[]}function ycn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function vcn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(uc).insert(t)),1}function _cn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const SO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},bcn=SO("format"),yze=SO("timeFormat"),wcn=SO("utcFormat"),Ecn=SO("timeParse"),xcn=SO("utcParse"),Ak=new Date(2e3,0,1);function z5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Ak.setYear(2e3),Ak.setMonth(e),Ak.setDate(t),yze.call(this,Ak,n))}function Scn(e){return z5.call(this,e,1,"%B")}function Tcn(e){return z5.call(this,e,1,"%b")}function Ccn(e){return z5.call(this,0,2+e,"%A")}function Acn(e){return z5.call(this,0,2+e,"%a")}const Icn=":",Ocn="@",gW="%",vze="$";function Yne(e,t,n,r){t[0].type!==vv&&Te("First argument to data functions must be a string literal.");const i=t[0].value,s=Icn+i;if(!Nt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Pcn(e,t,n,r){t[0].type!==vv&&Te("First argument to indata must be a string literal."),t[1].type!==vv&&Te("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Ocn+s;Nt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function $a(e,t,n,r){if(t[0].type===vv)zve(n,r,t[0].value);else for(e in n.scales)zve(n,r,e)}function zve(e,t,n){const r=gW+n;if(!Nt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function bh(e,t){if(pn(e))return e;if(rt(e)){const n=t.scales[e];return n&&Ftn(n.value)?n.value:void 0}}function kcn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=$a,n._range=$a,n._scale=$a;const r=i=>"_["+(i.type===vv?Xe(gW+i.value):Xe(gW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Kne(e,t){return function(n,r,i){if(n){const s=bh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const $cn=Kne("area",eon),Rcn=Kne("bounds",ion),Ncn=Kne("centroid",con);function Dcn(e,t){const n=bh(e,(t||this).context);return n&&n.scale()}function Mcn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Xne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Lcn(){return Xne(this.context.dataflow,"warn",arguments)}function Fcn(){return Xne(this.context.dataflow,"info",arguments)}function jcn(){return Xne(this.context.dataflow,"debug",arguments)}function L7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yW(e){const t=r0(e),n=L7(t.r),r=L7(t.g),i=L7(t.b);return .2126*n+.7152*r+.0722*i}function Bcn(e,t){const n=yW(e),r=yW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function zcn(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function _ze(e,t){return e===t||e!==e&&t!==t?!0:Ie(e)?Ie(t)&&e.length===t.length?Ucn(e,t):!1:ot(e)&&ot(t)?bze(e,t):!1}function Ucn(e,t){for(let n=0,r=e.length;n<r;++n)if(!_ze(e[n],t[n]))return!1;return!0}function bze(e,t){for(const n in e)if(!_ze(e[n],t[n]))return!1;return!0}function Uve(e){return t=>bze(e,t)}function Vcn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?uc:Ie(n)||a5(n)?n:Uve(n),c.remove(f)),t&&c.insert(t),r&&(f=Uve(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Hcn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function qcn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Vve={};function Wcn(e,t){const n=Vve[t]||(Vve[t]=ac(t));return Ie(e)?e.map(n):n(e)}function Qne(e){return Ie(e)||ArrayBuffer.isView(e)?e:null}function Jne(e){return Qne(e)||(rt(e)?e:null)}function Gcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qne(e).join(...n)}function Ycn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jne(e).indexOf(...n)}function Kcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jne(e).lastIndexOf(...n)}function Xcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jne(e).slice(...n)}function Qcn(e,t,n){return pn(n)&&Te("Function argument passed to replace."),String(e).replace(t,n)}function Jcn(e){return Qne(e).slice().reverse()}function Zcn(e,t,n){return fte(e||0,t||0,n||0)}function efn(e,t){const n=bh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function tfn(e,t){const n=bh(e,(t||this).context);return n?n.copy():void 0}function nfn(e,t){const n=bh(e,(t||this).context);return n?n.domain():[]}function rfn(e,t,n){const r=bh(e,(n||this).context);return r?Ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function ifn(e,t){const n=bh(e,(t||this).context);return n&&n.range?n.range():[]}function sfn(e,t,n){const r=bh(e,(n||this).context);return r?r(t):void 0}function ofn(e,t,n,r,i){e=bh(e,(i||this).context);const s=Cje(t,n);let o=e.domain(),a=o[0],u=Un(o),l=ca;return u-a?l=pje(e,a,u):e=(e.interpolator?or("sequential")().interpolator(e.interpolator()):or("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Un(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function afn(e,t,n){const r=bh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function ufn(e){let t=null;return function(n){return n?bA(n,t=t||pE(e)):e}}const wze=e=>e.data;function Eze(e,t){const n=gze.call(t,e);return n.root&&n.root.lookup||{}}function lfn(e,t,n){const r=Eze(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(wze):void 0}function cfn(e,t){const n=Eze(e,this)[t];return n?n.ancestors().map(wze):void 0}const xze=()=>typeof window<"u"&&window||null;function ffn(){const e=xze();return e?e.screen:{}}function dfn(){const e=xze();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function hfn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Sze(e,t,n){if(!e)return[];const[r,i]=e,s=new cs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return _Be(o,s,pfn(t))}function pfn(e){let t=null;if(e){const n=nt(e.marktype),r=nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function mfn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function gfn(e){return nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function yfn(e,t,n){const{x:r,y:i,mark:s}=n,o=new cs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),Sze([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>vfn(u.x,u.y,t))}function vfn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const kA={random(){return cc()},cumulativeNormal:d5,cumulativeLogNormal:kee,cumulativeUniform:Dee,densityNormal:Cee,densityLogNormal:Pee,densityUniform:Nee,quantileNormal:h5,quantileLogNormal:$ee,quantileUniform:Mee,sampleNormal:f5,sampleLogNormal:Oee,sampleUniform:Ree,isArray:Ie,isBoolean:J0,isDate:Vg,isDefined(e){return e!==void 0},isNumber:Jn,isObject:ot,isRegExp:y8e,isString:rt,isTuple:a5,isValid(e){return e!=null&&e===e},toBoolean:cee,toDate(e){return fee(e)},toNumber:Xo,toString:dee,indexof:Ycn,join:Gcn,lastindexof:Kcn,replace:Qcn,reverse:Jcn,slice:Xcn,flush:m8e,lerp:v8e,merge:zcn,pad:w8e,peek:Un,pluck:Wcn,span:rO,inrange:Cb,truncate:E8e,rgb:r0,lab:YD,hcl:KD,hsl:WD,luminance:yW,contrast:Bcn,sequence:r_,format:bcn,utcFormat:wcn,utcParse:xcn,utcOffset:V8e,utcSequence:W8e,timeFormat:yze,timeParse:Ecn,timeOffset:U8e,timeSequence:q8e,timeUnitSpecifier:k8e,monthFormat:Scn,monthAbbrevFormat:Tcn,dayFormat:Ccn,dayAbbrevFormat:Acn,quarter:f8e,utcquarter:d8e,week:R8e,utcweek:M8e,dayofyear:$8e,utcdayofyear:D8e,warn:Lcn,info:Fcn,debug:jcn,extent(e){return th(e)},inScope:Mcn,intersect:Sze,clampRange:h8e,pinchDistance:Hcn,pinchAngle:qcn,screen:ffn,containerSize:hfn,windowSize:dfn,bandspace:Zcn,setdata:vcn,pathShape:ufn,panLinear:a8e,panLog:u8e,panPow:l8e,panSymlog:c8e,zoomLinear:iee,zoomLog:see,zoomPow:OM,zoomSymlog:oee,encode:_cn,modify:Vcn,lassoAppend:mfn,lassoPath:gfn,intersectLasso:yfn},_fn=["view","item","group","xy","x","y"],bfn="event.vega.",Tze="this.",Zne={},Cze={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Xe(vze+e)}]`,functions:wfn,constants:fze,visitors:Zne},vW=hze(Cze);function wfn(e){const t=dze(e);_fn.forEach(n=>t[n]=bfn+n);for(const n in kA)t[n]=Tze+n;return hn(t,kcn(e,kA,Zne)),t}function Qi(e,t,n){return arguments.length===1?kA[e]:(kA[e]=t,n&&(Zne[e]=n),vW&&(vW.functions[e]=Tze+e),this)}Qi("bandwidth",efn,$a);Qi("copy",tfn,$a);Qi("domain",nfn,$a);Qi("range",ifn,$a);Qi("invert",rfn,$a);Qi("scale",sfn,$a);Qi("gradient",ofn,$a);Qi("geoArea",$cn,$a);Qi("geoBounds",Rcn,$a);Qi("geoCentroid",Ncn,$a);Qi("geoShape",afn,$a);Qi("geoScale",Dcn,$a);Qi("indata",ycn,Pcn);Qi("data",gze,Yne);Qi("treePath",lfn,Yne);Qi("treeAncestors",cfn,Yne);Qi("vlSelectionTest",lcn,Gne);Qi("vlSelectionIdTest",dcn,Gne);Qi("vlSelectionResolve",pcn,Gne);Qi("vlSelectionTuples",hcn);function ih(e,t){const n={};let r;try{e=rt(e)?e:Xe(e)+"",r=qne(e)}catch{Te("Expression parse error: "+e)}r.visit(s=>{if(s.type!==ize)return;const o=s.callee.name,a=Cze.visitors[o];a&&a(o,s.arguments,t,n)});const i=vW(r);return i.globals.forEach(s=>{const o=vze+s;!Nt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Efn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const xfn=_f(["rule"]),Hve=_f(["group","image","rect"]);function Sfn(e,t){let n="";return xfn[t]||(e.x2&&(e.x?(Hve[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Hve[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ere(e){return(e+"").toLowerCase()}function Tfn(e){return ere(e)==="operator"}function Cfn(e){return ere(e)==="collect"}function qS(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Afn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Ifn={operator:(e,t)=>qS(e,["_"],t.code),parameter:(e,t)=>qS(e,["datum","_"],t.code),event:(e,t)=>qS(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return qS(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Xe(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Sfn(r,n),i+="return m;",qS(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Xe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Afn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Ofn(e){const t=this;Tfn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Pfn(e){const t=this;if(e.params){const n=t.get(e.id);n||Te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function kfn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ie(i)?i.map(s=>qve(s,n,t)):qve(i,n,t)}return t}function qve(e,t,n){if(!e||!ot(e))return e;for(let r=0,i=Wve.length,s;r<i;++r)if(s=Wve[r],Nt(e,s.key))return s.parse(e,t,n);return e}var Wve=[{key:"$ref",parse:$fn},{key:"$key",parse:Nfn},{key:"$expr",parse:Rfn},{key:"$field",parse:Dfn},{key:"$encode",parse:Lfn},{key:"$compare",parse:Mfn},{key:"$context",parse:Ffn},{key:"$subflow",parse:jfn},{key:"$tupleid",parse:Bfn}];function $fn(e,t){return t.get(e.$ref)||Te("Operator not defined: "+e.$ref)}function Rfn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Lu(t.parameterExpression(e.$expr),e.$fields))}function Nfn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=lee(e.$key,e.$flat,t.expr.codegen))}function Dfn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ac(e.$field,e.$name,t.expr.codegen))}function Mfn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=nt(e.$compare).map(i=>i&&i.$tupleid?$t:i);return t.fn[n]||(t.fn[n]=aee(r,e.$order,t.expr.codegen))}function Lfn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Lu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Ffn(e,t){return t}function jfn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Bfn(){return $t}function zfn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Ufn(e){var t=this,n=ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Te("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Vfn={skip:!0};function Hfn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function qfn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Vfn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(uc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function Aze(e,t,n,r){return new Ize(e,t,n,r)}function Ize(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Ifn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Gve(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Ize.prototype=Gve.prototype={fork(){const e=new Gve(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Cfn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ere(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Efn,parseOperator:Ofn,parseOperatorParameters:Pfn,parseParameters:kfn,parseStream:zfn,parseUpdate:Ufn,getState:Hfn,setState:qfn};function Wfn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Oze(t,e.description()))}function Oze(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Gfn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const F7="default";function Yfn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:F7,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?rt(i)?i:i.user:F7,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return rt(r)||(i=r.item,r=r.user),_W(e,r&&r!==F7?r:i||r),i},{cursor:t})}function _W(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function EL(e,t){var n=e._runtime.data;return Nt(n,t)||Te("Unrecognized data set: "+t),n[t]}function Kfn(e,t){return arguments.length<2?EL(this,e).values.value:U5.call(this,e,s_().remove(uc).insert(t))}function U5(e,t){d9e(t)||Te("Second argument to changes must be a changeset.");const n=EL(this,e);return n.modified=!0,this.pulse(n.input,t)}function Xfn(e,t){return U5.call(this,e,s_().insert(t))}function Qfn(e,t){return U5.call(this,e,s_().remove(t))}function Pze(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function kze(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function V5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Jfn(e){var t=V5(e),n=Pze(e),r=kze(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Zfn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=V5(e),o=t.changedTouches?t.changedTouches[0]:t,s=P5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=edn(e,n,s),t}function edn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;rt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:fa(e),item:fa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Yve="view",tdn="timer",ndn="window",rdn={trap:!1};function idn(e){const t=hn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ie(r[s])&&(r[s]=_f(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function $ze(e,t,n,r){e._eventListeners.push({type:n,sources:nt(t),handler:r})}function sdn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Ik(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function odn(e,t,n){var r=this,i=new c5(n),s=function(l,c){r.runAsync(null,()=>{e===Yve&&sdn(r,t)&&l.preventDefault(),i.receive(Zfn(r,l,c))})},o;if(e===tdn)Ik(r,"timer",t)&&r.timer(s,t);else if(e===Yve)Ik(r,"view",t)&&r.addEventListener(t,s,rdn);else if(e===ndn?Ik(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&Ik(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);$ze(r,o,t,s)}return i}function Kve(e){return e.item}function Xve(e){return e.item.mark.source}function Qve(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function adn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Kve),Xve,Qve(e)),this.on(this.events("view","pointerout",Kve),Xve,Qve(t)),this}function udn(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function ll(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const ldn="vega-bind",cdn="vega-bind-name",fdn="vega-bind-radio";function ddn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=uee(r.debounce,i.update))),(r.input==null&&r.element?hdn:mdn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function hdn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),$ze(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(pdn(i))}}function pdn(e){return typeof Event<"u"?new Event(e):{type:e}}function mdn(e,t,n,r){const i=r.signal(n.signal),s=ll("div",{class:ldn}),o=n.input==="radio"?s:s.appendChild(ll("label"));o.appendChild(ll("span",{class:cdn},n.name||n.signal)),t.appendChild(s);let a=gdn;switch(n.input){case"checkbox":a=ydn;break;case"select":a=vdn;break;case"radio":a=_dn;break;case"range":a=bdn;break}a(e,o,n,i)}function gdn(e,t,n,r){const i=ll("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function ydn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=ll("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function vdn(e,t,n,r){const i=ll("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};xL(o,r)&&(u.selected=!0),i.appendChild(ll("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(xL(n.options[a],o)){i.selectedIndex=a;return}}}function _dn(e,t,n,r){const i=ll("span",{class:fdn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};xL(o,r)&&(u.checked=!0);const l=ll("input",u);l.addEventListener("change",()=>e.update(o));const c=ll("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)xL(a[l].value,o)&&(a[l].checked=!0)}}function bdn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||gA(s,i,100),a=ll("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=ll("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function xL(e,t){return e===t||e+""==t+""}function Rze(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Pze(e),kze(e),V5(e),i,s).background(e.background())}function tre(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function wdn(e,t,n,r){const i=new r(e.loader(),tre(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,V5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Edn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=$5(r);e=n._el=e?j7(n,e,!0):null,Wfn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||S0,a=e?s.renderer:s.headless;return n._renderer=a?Rze(n,n._renderer,e,a):null,n._handler=wdn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=j7(n,t,!0):e.appendChild(ll("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=j7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{ddn(n,u.element||t,u)})),n}function j7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const WS=e=>+e||0,xdn=e=>({top:e,bottom:e,left:e,right:e});function Jve(e){return ot(e)?{top:WS(e.top),bottom:WS(e.bottom),left:WS(e.left),right:WS(e.right)}:xdn(WS(e))}async function nre(e,t,n,r){const i=$5(t),s=i&&i.headless;return s||Te("Unrecognized renderer type: "+t),await e.runAsync(),Rze(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Sdn(e,t){e!==yg.Canvas&&e!==yg.SVG&&e!==yg.PNG&&Te("Unrecognized image type: "+e);const n=await nre(this,e,t);return e===yg.SVG?Tdn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Tdn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Cdn(e,t){return(await nre(this,yg.Canvas,e,t)).canvas()}async function Adn(e){return(await nre(this,yg.SVG,e)).svg()}function Idn(e,t,n){return Aze(e,cE,kA,n).parse(t)}function Odn(e){var t=this._runtime.scales;return Nt(t,e)||Te("Unrecognized scale or projection: "+e),t[e].value}var Nze="width",Dze="height",rre="padding",Zve={skip:!0};function Mze(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===rre?r.left+r.right:0)}function Lze(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===rre?r.top+r.bottom:0)}function Pdn(e){var t=e._signals,n=t[Nze],r=t[Dze],i=t[rre];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Mze(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Lze(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function kdn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(Nze,n,Zve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(Dze,r,Zve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function $dn(e){return this._runtime.getState(e||{data:Rdn,signals:Ndn,recurse:!0})}function Rdn(e,t){return t.modified&&Ie(t.input.value)&&!e.startsWith("_:vega:_")}function Ndn(e,t){return!(e==="parent"||t instanceof cE.proxy)}function Ddn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Mdn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Z2t(n,t))}function Ldn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Fdn(r))}function Fdn(e){return e==null?"":Ie(e)?Fze(e):ot(e)&&!Vg(e)?jdn(e):e+""}function jdn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ie(n)?Fze(n):jze(n))}).join(`
`)}function Fze(e){return"["+e.map(jze).join(", ")+"]"}function jze(e){return Ie(e)?"[]":ot(e)&&!Vg(e)?"{}":e}function Bdn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Bze(e,t){const n=this;if(t=t||{},aw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hn({},e.locale,t.locale);n.locale(n9e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||yg.Canvas,n._scenegraph=new zte;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Ldn,n._redraw=!0,n._handler=new S0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=idn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Idn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Mze(n,n._width),n._viewHeight=Lze(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Pdn(n),Gfn(n),Yfn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Ok(e,t){return Nt(e._signals,t)?e._signals[t]:Te("Unrecognized signal name: "+Xe(t))}function zze(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function e_e(e,t,n,r){let i=zze(n,r);return i||(i=tre(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function t_e(e,t,n){const r=zze(t,n);return r&&t._targets.remove(r),e}We(Bze,aw,{async evaluate(e,t,n){if(await aw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Jfn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&q$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Oze(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Ok(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Jve(e)):Jve(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?($5(e)||Te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(aw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Ok(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:kdn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=tre(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return e_e(this,e,Ok(this,e),t)},removeSignalListener(e,t){return t_e(this,Ok(this,e),t)},addDataListener(e,t){return e_e(this,e,EL(this,e).values,t)},removeDataListener(e,t){return t_e(this,EL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=_W(this,null);this._globalCursor=!!e,t&&_W(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Mdn,events:odn,finalize:udn,hover:adn,data:Kfn,change:U5,insert:Xfn,remove:Qfn,scale:Odn,initialize:Edn,toImageURL:Sdn,toCanvas:Cdn,toSVG:Adn,getState:$dn,setState:Ddn,_watchPixelRatio:Bdn});const zdn="view",SL="[",TL="]",Uze="{",Vze="}",Udn=":",Hze=",",Vdn="@",Hdn=">",qdn=/[[\]{}]/,Wdn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let qze,Wze;function ey(e,t,n){return qze=t||zdn,Wze=n||Wdn,Gze(e.trim()).map(bW)}function Gdn(e){return Wze[e]}function q2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Gze(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=q2(e,i,Hze,SL+Uze,TL+Vze),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function bW(e){return e[0]==="["?Ydn(e):Kdn(e)}function Ydn(e){const t=e.length;let n=1,r;if(n=q2(e,n,TL,SL,TL),n===t)throw"Empty between selector: "+e;if(r=Gze(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Hdn)throw"Expected '>' after between selector: "+e;r=r.map(bW);const i=bW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Kdn(e){const t={source:qze},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===Vze){if(a=e.lastIndexOf(Uze),a>=0){try{r=Xdn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Vdn&&(i=++a),u=q2(e,a,Udn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=q2(e,a,SL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=q2(e,a,TL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==SL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||qdn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Gdn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Xdn(e){const t=e.split(Hze);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Qdn(e){return ot(e)?e:{type:e||"pad"}}const GS=e=>+e||0,Jdn=e=>({top:e,bottom:e,left:e,right:e});function Zdn(e){return ot(e)?e.signal?e:{top:GS(e.top),bottom:GS(e.bottom),left:GS(e.left),right:GS(e.right)}:Jdn(GS(e))}const Ws=e=>ot(e)&&!Ie(e)?hn({},e):{value:e};function n_e(e,t,n,r){return n!=null?(ot(n)&&!Ie(n)||Ie(n)&&n.length&&ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Ao(e,t,n){for(const r in t)n_e(e,r,t[r]);for(const r in n)n_e(e,r,n[r],"update")}function Nx(e,t,n){for(const r in t)n&&Nt(n,r)||(e[r]=hn(e[r]||{},t[r]));return e}function nb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const ire="mark",sre="frame",ore="scope",ehn="axis",thn="axis-domain",nhn="axis-grid",rhn="axis-label",ihn="axis-tick",shn="axis-title",ohn="legend",ahn="legend-band",uhn="legend-entry",lhn="legend-gradient",Yze="legend-label",chn="legend-symbol",fhn="legend-title",dhn="title",hhn="title-text",phn="title-subtitle";function mhn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!nb(u,e)&&B7(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===sre?i.group:n===ire?hn({},i.mark,i[t]):null;for(u in c)l=nb(u,e)||(u==="fill"||u==="stroke")&&(nb("fill",e)||nb("stroke",e)),l||B7(s,u,c[u]);nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)nb(h,e)||B7(s,h,d[h])}),e=hn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=hn(o,e.enter),a&&(e.update=hn(a,e.update)),e}function B7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Kze=e=>rt(e)?Xe(e):e.signal?`(${e.signal})`:Xze(e);function H5(e){if(e.gradient!=null)return yhn(e);let t=e.signal?`(${e.signal})`:e.color?ghn(e.color):e.field!=null?Xze(e.field):e.value!==void 0?Xe(e.value):void 0;return e.scale!=null&&(t=vhn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${sR(e.exponent)})`),e.mult!=null&&(t+=`*${sR(e.mult)}`),e.offset!=null&&(t+=`+${sR(e.offset)}`),e.round&&(t=`round(${t})`),t}const Pk=(e,t,n,r)=>`(${e}(${[t,n,r].map(H5).join(",")})+'')`;function ghn(e){return e.c?Pk("hcl",e.h,e.c,e.l):e.h||e.s?Pk("hsl",e.h,e.s,e.l):e.l||e.a?Pk("lab",e.l,e.a,e.b):e.r||e.g||e.b?Pk("rgb",e.r,e.g,e.b):null}function yhn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Xe(n));for(;t.length&&Un(t)==null;)t.pop();return t.unshift(Kze(e.gradient)),`gradient(${t.join(",")})`}function sR(e){return ot(e)?"("+H5(e)+")":e}function Xze(e){return Qze(ot(e)?e:{datum:e})}function Qze(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Te("Invalid field reference: "+Xe(e));return e.signal||(r=rt(r)?gh(r).map(Xe).join("]["):Qze(r)),t+"["+r+"]"}function vhn(e,t){const n=Kze(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+sR(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function _hn(e){let t="";return e.forEach(n=>{const r=H5(n);t+=n.test?`(${n.test})?${r}:`:r}),Un(t)===":"&&(t+="null"),t}function Jze(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=mhn(e,t,n,r,i.config);for(const a in e)o[a]=bhn(e[a],t,s,i);return s}function bhn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Ehn(whn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function whn(e){return Ie(e)?_hn(e):H5(e)}function Ehn(e,t,n,r){const i=ih(e,t);return i.$fields.forEach(s=>r[s]=1),hn(n,i.$params),i.$expr}const xhn="outer",Shn=["value","update","init","react","bind"];function r_e(e,t){Te(e+' for "outer" push: '+Xe(t))}function Zze(e,t){const n=e.name;if(e.push===xhn)t.signals[n]||r_e("No prior signal definition",n),Shn.forEach(r=>{e[r]!==void 0&&r_e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function wW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function q5(e,t,n,r){return new wW(e,t,n,r)}function CL(e,t){return q5("operator",e,t)}function kt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function $A(e,t){return t?{$field:e,$name:t}:{$field:e}}const EW=$A("key");function i_e(e,t){return{$compare:e,$order:t}}function Thn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Chn="ascending",Ahn="descending";function Ihn(e){return ot(e)?(e.order===Ahn?"-":"+")+W5(e.op,e.field):""}function W5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const are="scope",xW="view";function Is(e){return e&&e.signal}function Ohn(e){return e&&e.expr}function oR(e){if(Is(e))return!0;if(ot(e)){for(const t in e)if(oR(e[t]))return!0}return!1}function Uc(e,t){return e??t}function B1(e){return e&&e.signal||e}const s_e="timer";function RA(e,t){return(e.merge?khn:e.stream?$hn:e.type?Rhn:Te("Invalid stream specification: "+Xe(e)))(e,t)}function Phn(e){return e===are?xW:e||xW}function khn(e,t){const n=e.merge.map(i=>RA(i,t)),r=ure({merge:n},e,t);return t.addStream(r).id}function $hn(e,t){const n=RA(e.stream,t),r=ure({stream:n},e,t);return t.addStream(r).id}function Rhn(e,t){let n;e.type===s_e?(n=t.event(s_e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Phn(e.source),e.type);const r=ure({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function ure(e,t,n){let r=t.between;return r&&(r.length!==2&&Te('Stream "between" parameter must have 2 entries: '+Xe(t)),e.between=[RA(r[0],n),RA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Nhn(t.marktype,t.markname,t.markrole)),t.source===are&&r.push("inScope(event.item)"),r.length&&(e.filter=ih("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Nhn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Dhn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Mhn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Te("Signal update missing events specification."),rt(s)&&(s=ey(s,t.isSubscope()?are:xW)),s=nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Fhn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Te("Signal encode and update are mutually exclusive."),o="encode(item(),"+Xe(r)+")"),i.update=rt(o)?ih(o,t):o.expr!=null?ih(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Dhn,$params:{$value:t.signalRef(o.signal)}}:Te("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(hn(Lhn(u,t),i)))}function Lhn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):RA(e,t)}}function Fhn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function jhn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Te("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ih(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Mhn(i,t,n.id))}const $r=e=>(t,n,r)=>q5(e,n,t||void 0,r),eUe=$r("aggregate"),Bhn=$r("axisticks"),tUe=$r("bound"),kf=$r("collect"),o_e=$r("compare"),zhn=$r("datajoin"),nUe=$r("encode"),Uhn=$r("expression"),Vhn=$r("facet"),Hhn=$r("field"),qhn=$r("key"),Whn=$r("legendentries"),Ghn=$r("load"),Yhn=$r("mark"),Khn=$r("multiextent"),Xhn=$r("multivalues"),Qhn=$r("overlap"),Jhn=$r("params"),rUe=$r("prefacet"),Zhn=$r("projection"),epn=$r("proxy"),tpn=$r("relay"),iUe=$r("render"),npn=$r("scale"),u_=$r("sieve"),rpn=$r("sortitems"),sUe=$r("viewlayout"),ipn=$r("values");let spn=0;const oUe={min:"min",max:"max",count:"sum"};function opn(e,t){const n=e.type||"linear";uje(n)||Te("Unrecognized scale type: "+Xe(n)),t.addScale(e.name,{type:n,domain:void 0})}function apn(e,t){const n=t.getScale(e.name).params;let r;n.domain=aUe(e.domain,e,t),e.range!=null&&(n.range=lUe(e,t,n)),e.interpolate!=null&&ypn(e.interpolate,n),e.nice!=null&&(n.nice=gpn(e.nice,t)),e.bins!=null&&(n.bins=mpn(e.bins,t));for(r in e)Nt(n,r)||r==="name"||(n[r]=Ql(e[r],t))}function Ql(e,t){return ot(e)?e.signal?t.signalRef(e.signal):Te("Unsupported object: "+Xe(e)):e}function aR(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ql(n,t))}function G5(e){Te("Can not find data set: "+Xe(e))}function aUe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ie(e)?upn:e.fields?cpn:lpn)(e,t,n)}function upn(e,t,n){return e.map(r=>Ql(r,n))}function lpn(e,t,n){const r=n.getData(e.data);return r||G5(e.data),hE(t.type)?r.valuesRef(n,e.field,uUe(e.sort,!1)):fje(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function cpn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=rt(o)?{data:r,field:o}:Ie(o)||o.signal?fpn(o,n):o,s.push(o),s),[]);return(hE(t.type)?dpn:fje(t.type)?hpn:ppn)(e,n,i)}function fpn(e,t){const n="_:vega:_"+spn++,r=kf({});if(Ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Xe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,u_({})]),{data:n,field:"data"}}function dpn(e,t,n){const r=uUe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||G5(l.data),c.countsRef(t,l.field,r)}),a={groupby:EW,pulse:o};r&&(i=r.op||"count",s=r.field?W5(i,r.field):"count",a.ops=[oUe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(eUe(a));const u=t.add(kf({pulse:kt(i)}));return s=t.add(ipn({field:EW,sort:t.sortRef(r),pulse:kt(u)})),kt(s)}function uUe(e,t){return e&&(!e.field&&!e.op?ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!oUe[e.op]&&Te("Multiple domain scales can not be sorted using "+e.op)),e}function hpn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||G5(i.data),s.domainRef(t,i.field)});return kt(t.add(Xhn({values:r})))}function ppn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||G5(i.data),s.extentRef(t,i.field)});return kt(t.add(Khn({extents:r})))}function mpn(e,t){return e.signal||Ie(e)?aR(e,t):t.objectProperty(e)}function gpn(e,t){return e.signal?t.signalRef(e.signal):ot(e)?{interval:Ql(e.interval),step:Ql(e.step)}:Ql(e)}function ypn(e,t){t.interpolate=Ql(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ql(e.gamma))}function lUe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(rt(i)){if(r&&Nt(r,i))return e=hn({},e,{range:r[i]}),lUe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=hE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Te("Unrecognized scale range value: "+Xe(i))}else if(i.scheme){n.scheme=Ie(i.scheme)?aR(i.scheme,t):Ql(i.scheme,t),i.extent&&(n.schemeExtent=aR(i.extent,t)),i.count&&(n.schemeCount=Ql(i.count,t));return}else if(i.step){n.rangeStep=Ql(i.step,t);return}else{if(hE(e.type)&&!Ie(i))return aUe(i,e,t);Ie(i)||Te("Unsupported range type: "+Xe(i))}return i.map(s=>(Ie(s)?aR:Ql)(s,t))}function vpn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=SW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=SW(n[i],i,t));t.addProjection(e.name,r)}function SW(e,t,n){return Ie(e)?e.map(r=>SW(r,t,n)):ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Te("Unsupported parameter object: "+Xe(e)):e}const $f="top",Dx="left",Mx="right",C0="bottom",cUe="center",_pn="vertical",bpn="start",wpn="middle",Epn="end",TW="index",lre="label",xpn="offset",bE="perc",Spn="perc2",tc="value",TO="guide-label",cre="guide-title",Tpn="group-title",Cpn="group-subtitle",a_e="symbol",uR="gradient",CW="discrete",AW="size",Apn="shape",Ipn="fill",Opn="stroke",Ppn="strokeWidth",kpn="strokeDash",$pn="opacity",fre=[AW,Apn,Ipn,Opn,Ppn,kpn,$pn],CO={name:1,style:1,interactive:1},Gn={value:0},nc={value:1},Y5="group",fUe="rect",dre="rule",Rpn="symbol",l_="text";function NA(e){return e.type=Y5,e.interactive=e.interactive||!1,e}function Fu(e,t){const n=(r,i)=>Uc(e[r],Uc(t[r],i));return n.isVertical=r=>_pn===Uc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Uc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Uc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Uc(e.columns,Uc(t.columns,+n.isVertical(!0))),n}function dUe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Npn(e,t,n){const r=t.config.style[n];return r&&r[e]}function K5(e,t,n){return`item.anchor === '${bpn}' ? ${e} : item.anchor === '${Epn}' ? ${t} : ${n}`}const hre=K5(Xe(Dx),Xe(Mx),Xe(cUe));function Dpn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function hUe(e,t){return t?e?ot(e)?Object.assign({},e,{offset:hUe(e.offset,t)}):{value:e,offset:t}:t:e}function bl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Nx(e.encode,t,CO)):e.interactive=!1,e}function Mpn(e,t,n,r){const i=Fu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Gn,x:Gn,y:Gn,width:Ws(f),height:Ws(d)},update:hn({},u,{opacity:nc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Gn}};return Ao(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),bl({type:fUe,role:lhn,encode:h},r)}function Lpn(e,t,n,r,i){const s=Fu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Gn,fill:{scale:t,field:tc}};p[l]={signal:h+"datum."+bE,mult:u},p[c]=Gn,p[f]={signal:h+"datum."+Spn,mult:u},p[d]=Ws(a);const m={enter:p,update:hn({},p,{opacity:nc}),exit:{opacity:Gn}};return Ao(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),bl({type:fUe,role:ahn,key:tc,from:i,encode:m},r)}const Fpn=`datum.${bE}<=0?"${Dx}":datum.${bE}>=1?"${Mx}":"${cUe}"`,jpn=`datum.${bE}<=0?"${C0}":datum.${bE}>=1?"${$f}":"${wpn}"`;function u_e(e,t,n,r){const i=Fu(e,t),s=i.isVertical(),o=Ws(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Gn},update:c={opacity:nc,text:{field:lre}},exit:{opacity:Gn}};return Ao(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Uc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:jpn},f="y",d="x",h="1-"):(l.align=c.align={signal:Fpn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+bE,mult:a},l[d]=c[d]=o,o.offset=Uc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+TW}:void 0,bl({type:l_,role:Yze,style:TO,key:tc,from:r,encode:p,overlap:u},n)}function Bpn(e,t,n,r,i){const s=Fu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${xpn} : datum.${AW}`,h=l?Ws(l):{field:AW},p=`datum.${TW}`,m=`max(1, ${i})`;let g,y,v,_,b;h.mult=.5,g={enter:y={opacity:Gn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:nc,x:y.x,y:y.y},exit:{opacity:Gn}};let E=null,w=null;e.fill||(E=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),Ao(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),fre.forEach(A=>{e[A]&&(v[A]=y[A]={scale:e[A],field:tc})});const x=bl({type:Rpn,role:chn,key:tc,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=Ws(c);S.offset=s("labelOffset"),g={enter:y={opacity:Gn,x:{signal:d,offset:S},y:h},update:v={opacity:nc,text:{field:lre},x:y.x,y:y.y},exit:{opacity:Gn}},Ao(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const P=bl({type:l_,role:Yze,style:TO,key:tc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Gn,height:l?Ws(l):Gn,opacity:Gn},exit:{opacity:Gn},update:v={opacity:nc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,b={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,b={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:TW}},NA({role:ore,from:r,encode:Nx(g,o,CO),marks:[x,P],name:u,interactive:a,sort:b})}function zpn(e,t){const n=Fu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const pre='item.orient === "left"',mre='item.orient === "right"',X5=`(${pre} || ${mre})`,Upn=`datum.vgrad && ${X5}`,Vpn=K5('"top"','"bottom"','"middle"'),Hpn=K5('"right"','"left"','"center"'),qpn=`datum.vgrad && ${mre} ? (${Hpn}) : (${X5} && !(datum.vgrad && ${pre})) ? "left" : ${hre}`,Wpn=`item._anchor || (${X5} ? "middle" : "start")`,Gpn=`${Upn} ? (${pre} ? -90 : 90) : 0`,Ypn=`${X5} ? (datum.vgrad ? (${mre} ? "bottom" : "top") : ${Vpn}) : "top"`;function Kpn(e,t,n,r){const i=Fu(e,t),s={enter:{opacity:Gn},update:{opacity:nc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Gn}};return Ao(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Wpn},angle:{signal:Gpn},align:{signal:qpn},baseline:{signal:Ypn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),bl({type:l_,role:fhn,style:cre,from:r,encode:s},n)}function Xpn(e,t){let n;return ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+l_e(e.path)+")":e.sphere&&(n="geoShape("+l_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function l_e(e){return ot(e)&&e.signal?e.signal:Xe(e)}function pUe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Y5?ore:t||ire}function Qpn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||pUe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Jpn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function gre(e,t){const n=m9e(e.type);n||Te("Unrecognized transform type: "+Xe(e.type));const r=q5(n.type.toLowerCase(),null,mUe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function mUe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Zpn(o,t,n)}return r}function Zpn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return emn(e,t,n);if(i===void 0){e.required&&Te("Missing required "+Xe(t.type)+" parameter: "+Xe(e.name));return}else{if(r==="param")return tmn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Is(i)?i.map(s=>c_e(e,s,n)):c_e(e,i,n)}function c_e(e,t,n){const r=e.type;if(Is(t))return d_e(r)?Te("Expression references can not be signals."):z7(r)?n.fieldRef(t):h_e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||z7(r);return i&&nmn(t)?n.exprRef(t.expr,t.as):i&&rmn(t)?$A(t.field,t.as):d_e(r)?ih(t,n):imn(r)?kt(n.getData(t).values):z7(r)?$A(t):h_e(r)?n.compareRef(t):t}}function emn(e,t,n){return rt(t.from)||Te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function tmn(e,t,n){const r=t[e.name];return e.array?(Ie(r)||Te("Expected an array of sub-parameters. Instead: "+Xe(r)),r.map(i=>f_e(e,i,n))):f_e(e,r,n)}function f_e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Te("Unsupported parameter: "+Xe(t));const s=hn(mUe(i,t,n),i.key);return kt(n.add(Jhn(s)))}const nmn=e=>e&&e.expr,rmn=e=>e&&e.field,imn=e=>e==="data",d_e=e=>e==="expr",z7=e=>e==="field",h_e=e=>e==="compare";function smn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Te("Only group marks can be faceted."),r.field!=null?o=a=lR(r,n):(e.data?a=kt(n.getData(e.data).aggregate):(s=gre(hn({type:"aggregate",groupby:nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=lR(r,n),o=a=kt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=kt(n.add(kf(null,[{}]))),o||(o=lR(e,n)),{key:i,pulse:o,parent:a}}function lR(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:kt(t.getData(e.data).output)}function wv(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}wv.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=kt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new wv(e,s,i,r,o)};function gUe(e){return rt(e)?e:null}function p_e(e,t,n){const r=W5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function YS(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Ihn(s);let l=gUe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:EW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:kt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(q5(r,void 0,d)),o&&(t.index[i]=f),c=kt(f),l!=null&&(a[l]=c)}return c}wv.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=gUe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&p_e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:kt(r.output)},n&&n.field&&p_e(e,u,n),a=e.add(eUe(u)),o=e.add(kf({pulse:kt(a)})),o={agg:a,ref:kt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return kt(this.values)},extentRef(e,t){return YS(e,this,"extent","extent",t,!1)},domainRef(e,t){return YS(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return YS(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return YS(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return YS(e,this,"indata","tupleindex",t,!0,!0)}};function omn(e,t,n){const r=e.from.facet,i=r.name,s=lR(r,t);let o;r.name||Te("Facet must have a name: "+Xe(r)),r.data||Te("Facet must reference a data set: "+Xe(r)),r.field?o=t.add(rUe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Vhn({key:t.keyRef(r.groupby),group:kt(t.proxy(n.parent)),pulse:s})):Te("Facet must specify groupby or field: "+Xe(r));const a=t.fork(),u=a.add(kf()),l=a.add(u_({pulse:kt(u)}));a.addData(i,new wv(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function amn(e,t,n){const r=t.add(rUe({pulse:n.pulse})),i=t.fork();i.add(u_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function yUe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(CL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=ih(l,t);u.update=c.$expr,u.params=c.$params}function Q5(e,t){const n=pUe(e),r=e.type===Y5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ore||n===sre,a,u,l,c,f,d,h;const p=n===ire||o||i,m=smn(e.from,r,t);u=t.add(zhn({key:m.key||(e.key?$A(e.key):void 0),pulse:m.pulse,clean:!r}));const g=kt(u);u=l=t.add(kf({pulse:g})),u=t.add(Yhn({markdef:Qpn(e),interactive:Jpn(e.interactive,t),clip:Xpn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:kt(u)}));const y=kt(u);u=c=t.add(nUe(Jze(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const x=gre(w,t),S=x.metadata;(S.generates||S.changes)&&Te("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),x.params.pulse=kt(u),t.add(u=x)}),e.sort&&(u=t.add(rpn({sort:t.compareRef(e.sort),pulse:kt(u)})));const v=kt(u);(i||o)&&(o=t.add(sUe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=kt(o));const _=t.add(tUe({mark:y,pulse:d||v}));h=kt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?omn(e,t,m):p?amn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=umn(s,h,t));const b=t.add(iUe({pulse:h})),E=t.add(u_({pulse:kt(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new wv(t,l,b,E)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Te("Marks only support modify triggers."),yUe(w,t,f)}))}function umn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Is(s)?n.signalRef(s.signal):s,method:Is(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Is(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return kt(n.add(Qhn(o)))}function lmn(e,t){const n=t.config.legend,r=e.encode||{},i=Fu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;fre.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Te("Missing valid scale for legend.");const p=cmn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=kt(t.add(kf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=kt(t.add(Whn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===uR?(h=[Mpn(e,c,n,r.gradient),u_e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${B1(i.gradientLength())})/100))`)):p===CW?h=[Lpn(e,c,n,r.gradient,v),u_e(e,n,r.labels,v)]:(f=zpn(e,n),h=[Bpn(e,n,r,v,B1(f.columns))],d.size=hmn(e,t,h[0].marks)),h=[NA({role:uhn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(Kpn(e,n,r.title,g)),Q5(NA({role:ohn,from:g,encode:Nx(dmn(i,e,n),s,CO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function cmn(e,t){let n=e.type||a_e;return!e.type&&fmn(e)===1&&(e.fill||e.stroke)&&(n=gte(t)?uR:_q(t)?CW:a_e),n!==uR?n:_q(t)?CW:uR}function fmn(e){return fre.reduce((t,n)=>t+(e[n]?1:0),0)}function dmn(e,t,n){const r={enter:{},update:{}};return Ao(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function hmn(e,t,n){const r=B1(m_e("size",e,n)),i=B1(m_e("strokeWidth",e,n)),s=B1(pmn(n[1].encode,t,TO));return ih(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function m_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:dUe(e,n[0].encode)}function pmn(e,t,n){return dUe("fontSize",e)||Npn("fontSize",t,n)}const mmn=`item.orient==="${Dx}"?-90:item.orient==="${Mx}"?90:0`;function gmn(e,t){e=rt(e)?{text:e}:e;const n=Fu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=kt(t.add(kf(null,[l])));return u.push(_mn(e,n,ymn(e),c)),e.subtitle&&u.push(bmn(e,n,r.subtitle,c)),Q5(NA({role:dhn,from:c,encode:vmn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function ymn(e){const t=e.encode;return t&&t.title||hn({name:e.name,interactive:e.interactive,style:e.style},t)}function vmn(e,t){const n={enter:{},update:{}};return Ao(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:hre},angle:{signal:mmn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Nx(n,t,CO)}function _mn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ao(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bl({type:l_,role:hhn,style:Tpn,from:r,encode:o},n)}function bmn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ao(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bl({type:l_,role:phn,style:Cpn,from:r,encode:o},n)}function wmn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(gre(r,t))}),e.on&&e.on.forEach(r=>{yUe(r,t,e.name)}),t.addDataPipeline(e.name,Emn(e,t,n))}function Emn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Is(e.values)||oR(e.format)?(r.push(g_e(t,e)),r.push(i=gy())):r.push(i=gy({$ingest:e.values,$format:e.format})):e.url?oR(e.url)||oR(e.format)?(r.push(g_e(t,e)),r.push(i=gy())):r.push(i=gy({$request:e.url,$format:e.format})):e.source&&(i=a=nt(e.source).map(d=>kt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=gy()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=tpn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,gy())),i||r.push(gy()),r.push(u_({})),r}function gy(e){const t=kf({},e);return t.metadata={source:!0},t}function g_e(e,t){return Ghn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const vUe=e=>e===C0||e===$f,J5=(e,t,n)=>Is(e)?Cmn(e.signal,t,n):e===Dx||e===$f?t:n,Gs=(e,t,n)=>Is(e)?Smn(e.signal,t,n):vUe(e)?t:n,df=(e,t,n)=>Is(e)?Tmn(e.signal,t,n):vUe(e)?n:t,_Ue=(e,t,n)=>Is(e)?Amn(e.signal,t,n):e===$f?{value:t}:{value:n},xmn=(e,t,n)=>Is(e)?Imn(e.signal,t,n):e===Mx?{value:t}:{value:n},Smn=(e,t,n)=>bUe(`${e} === '${$f}' || ${e} === '${C0}'`,t,n),Tmn=(e,t,n)=>bUe(`${e} !== '${$f}' && ${e} !== '${C0}'`,t,n),Cmn=(e,t,n)=>yre(`${e} === '${Dx}' || ${e} === '${$f}'`,t,n),Amn=(e,t,n)=>yre(`${e} === '${$f}'`,t,n),Imn=(e,t,n)=>yre(`${e} === '${Mx}'`,t,n),bUe=(e,t,n)=>(t=t!=null?Ws(t):t,n=n!=null?Ws(n):n,y_e(t)&&y_e(n)?(t=t?t.signal||Xe(t.value):null,n=n?n.signal||Xe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hn({test:e},t)].concat(n||[])),y_e=e=>e==null||Object.keys(e).length===1,yre=(e,t,n)=>({signal:`${e} ? (${kb(t)}) : (${kb(n)})`}),Omn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Dx}' ? (${kb(r)}) : `:"")+(n!=null?`${e} === '${C0}' ? (${kb(n)}) : `:"")+(i!=null?`${e} === '${Mx}' ? (${kb(i)}) : `:"")+(t!=null?`${e} === '${$f}' ? (${kb(t)}) : `:"")+"(null)"}),kb=e=>Is(e)?e.signal:e==null?null:Xe(e),Pmn=(e,t)=>t===0?0:Is(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},lw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function j_(e,t,n,r){let i;if(t&&Nt(t,e))return t[e];if(Nt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[cre][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[TO][i]}return null}function v_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function kmn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Is(o)){const f=v_e([n.axisX,n.axisY]),d=v_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Gs(o,j_(l,n.axisX,i,r),j_(l,n.axisY,i,r));u={};for(l of d)u[l]=Omn(o.signal,j_(l,n.axisTop,i,r),j_(l,n.axisBottom,i,r),j_(l,n.axisLeft,i,r),j_(l,n.axisRight,i,r))}else a=o===$f||o===C0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?hn({},i,a,u,s):i}function $mn(e,t,n,r){const i=Fu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Gn},update:a={opacity:nc},exit:{opacity:Gn}};Ao(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=__e(e,0),c=__e(e,1);return o.x=a.x=Gs(s,l,Gn),o.x2=a.x2=Gs(s,c),o.y=a.y=df(s,l,Gn),o.y2=a.y2=df(s,c),bl({type:dre,role:thn,from:r,encode:u},n)}function __e(e,t){return{scale:e.scale,range:t}}function Rmn(e,t,n,r,i){const s=Fu(e,t),o=e.orient,a=e.gridScale,u=J5(o,1,-1),l=Nmn(e.offset,u);let c,f,d;const h={enter:c={opacity:Gn},update:d={opacity:nc},exit:f={opacity:Gn}};Ao(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:tc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Gs(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:hn(m,{mult:u,offset:l});return c.x=d.x=Gs(o,p,g),c.y=d.y=df(o,p,g),c.x2=d.x2=df(o,y),c.y2=d.y2=Gs(o,y),f.x=Gs(o,p),f.y=df(o,p),bl({type:dre,role:nhn,key:tc,from:r,encode:h},n)}function Nmn(e,t){if(t!==1)if(!ot(e))e=Is(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hn({},e);for(;n.mult!=null;)if(ot(n.mult))n=n.mult=hn({},n.mult);else return n.mult=Is(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Dmn(e,t,n,r,i,s){const o=Fu(e,t),a=e.orient,u=J5(a,-1,1);let l,c,f;const d={enter:l={opacity:Gn},update:f={opacity:nc},exit:c={opacity:Gn}};Ao(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Ws(i);h.mult=u;const p={scale:e.scale,field:tc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Gs(a,Gn,p),f.y2=l.y2=Gs(a,h),c.x=Gs(a,p),f.x=l.x=df(a,Gn,p),f.x2=l.x2=df(a,h),c.y=df(a,p),bl({type:dre,role:ihn,key:tc,from:r,encode:d},n)}function U7(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Mmn(e,t,n,r,i,s){const o=Fu(e,t),a=e.orient,u=e.scale,l=J5(a,-1,1),c=B1(o("labelFlush")),f=B1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Ws(i);g.mult=l,g.offset=Ws(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:tc,band:.5,offset:hUe(s.offset,o("labelOffset"))},v=Gs(a,p?U7(u,c,'"left"','"right"','"center"'):{value:"center"},xmn(a,"left","right")),_=Gs(a,_Ue(a,"bottom","top"),p?U7(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=U7(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Gn,x:Gs(a,y,g),y:df(a,y,g)},w={enter:E,update:m={opacity:nc,text:{field:lre},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:Gn,x:E.x,y:E.y}};Ao(w,{dx:!d&&p?Gs(a,b):null,dy:!h&&p?df(a,b):null}),Ao(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let S=o("labelOverlap");return S=S||x?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=lw(m.align,v)),m.baseline!==_&&(m.baseline=lw(m.baseline,_)),bl({type:l_,role:rhn,style:TO,key:tc,from:r,encode:w,overlap:S},n)}function Lmn(e,t,n,r){const i=Fu(e,t),s=e.orient,o=J5(s,-1,1);let a,u;const l={enter:a={opacity:Gn,anchor:Ws(i("titleAnchor",null)),align:{signal:hre}},update:u=hn({},a,{opacity:nc,text:Ws(e.title)}),exit:{opacity:Gn}},c={signal:`lerp(range("${e.scale}"), ${K5(0,1,.5)})`};return u.x=Gs(s,c),u.y=df(s,c),a.angle=Gs(s,Gn,Pmn(o,90)),a.baseline=Gs(s,_Ue(s,C0,$f),{value:C0}),u.angle=a.angle,u.baseline=a.baseline,Ao(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Fmn(i,s,l,n),l.update.align=lw(l.update.align,a.align),l.update.angle=lw(l.update.angle,a.angle),l.update.baseline=lw(l.update.baseline,a.baseline),bl({type:l_,role:shn,style:cre,from:r,encode:l},n)}function Fmn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=lw(Ws(a),n.update[u]),!1):!nb(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Ws(o):Gs(t,Ws(o),Ws(s))}function jmn(e,t){const n=kmn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Fu(e,n),l=Dpn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=kt(t.add(kf({},[c]))),d=kt(t.add(Bhn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Rmn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Dmn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Mmn(e,n,r.labels,d,p,l))),c.domain&&h.push($mn(e,n,r.domain,f)),c.title&&h.push(Lmn(e,n,r.title,f)),Q5(NA({role:ehn,from:f,encode:Nx(Bmn(u,e),i,CO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Bmn(e,t){const n={enter:{},update:{}};return Ao(n,{orient:e("orient"),offset:e("offset")||0,position:Uc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function wUe(e,t,n){const r=nt(e.signals),i=nt(e.scales);return n||r.forEach(s=>Zze(s,t)),nt(e.projections).forEach(s=>vpn(s,t)),i.forEach(s=>opn(s,t)),nt(e.data).forEach(s=>wmn(s,t)),i.forEach(s=>apn(s,t)),(n||r).forEach(s=>jhn(s,t)),nt(e.axes).forEach(s=>jmn(s,t)),nt(e.marks).forEach(s=>Q5(s,t)),nt(e.legends).forEach(s=>lmn(s,t)),e.title&&gmn(e.title,t),t.parseLambdas(),t}const zmn=e=>Nx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Umn(e,t){const n=t.config,r=kt(t.root=t.add(CL())),i=Vmn(e,n);i.forEach(l=>Zze(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(kf()),o=t.add(nUe(Jze(zmn(e.encode),Y5,sre,e.style,t,{pulse:kt(s)}))),a=t.add(sUe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:kt(o)}));t.operators.pop(),t.pushState(kt(o),kt(a),null),wUe(e,t,i),t.operators.push(a);let u=t.add(tUe({mark:r,pulse:kt(a)}));return u=t.add(iUe({pulse:kt(u)})),u=t.add(u_({pulse:kt(u)})),t.addData("root",new wv(t,s,s,u)),t}function KS(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Vmn(e,t){const n=o=>Uc(e[o],t[o]),r=[KS("background",n("background")),KS("autosize",Qdn(n("autosize"))),KS("padding",Zdn(n("padding"))),KS("width",n("width")||0),KS("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return nt(e.signals).forEach(o=>{Nt(i,o.name)?o=hn(i[o.name],o):r.push(o),s[o.name]=o}),nt(t.signals).forEach(o=>{!Nt(s,o.name)&&!Nt(i,o.name)&&r.push(o)}),r}function EUe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function b_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}EUe.prototype=b_e.prototype={parse(e){return wUe(e,this)},fork(){return new b_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof wW?kt(e):e;return this.add(epn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(kt(this.add(u_({pulse:e})))),this._parent.push(t),this._lookup.push(n?kt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(rt(e))return $A(e,t);e.signal||Te("Unsupported field reference: "+Xe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=kt(this.add(Hhn(i)))}return r},compareRef(e){let t=!1;const n=s=>Is(s)?(t=!0,this.signalRef(s.signal)):Ohn(s)?(t=!0,this.exprRef(s.expr)):s,r=nt(e.field).map(n),i=nt(e.order).map(n);return t?kt(this.add(o_e({fields:r,orders:i}))):i_e(r,i)},keyRef(e,t){let n=!1;const r=s=>Is(s)?(n=!0,kt(i[s.signal])):s,i=this.signals;return e=nt(e).map(r),n?kt(this.add(qhn({fields:e,flat:t}))):Thn(e,t)},sortRef(e){if(!e)return e;const t=W5(e.op,e.field),n=e.order||Chn;return n.signal?kt(this.add(o_e({fields:t,orders:this.signalRef(n.signal)}))):i_e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Nt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Te("Duplicate signal name: "+Xe(e));const n=t instanceof wW?t:this.add(CL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Te("Unrecognized signal name: "+Xe(e)),this.signals[e]},signalRef(e){return this.signals[e]?kt(this.signals[e]):(Nt(this.lambdas,e)||(this.lambdas[e]=this.add(CL(null))),kt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ih(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ot(e)?e:this.signalRef(e.signal||vre(e))},exprRef(e,t){const n={expr:ih(e,this)};return t&&(n.expr.$name=t),kt(this.add(Uhn(n)))},addBinding(e,t){this.bindings||Te("Nested signals do not support binding: "+Xe(e)),this.bindings.push(hn({signal:e},t))},addScaleProj(e,t){Nt(this.scales,e)&&Te("Duplicate scale or projection name: "+Xe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,npn(t))},addProjection(e,t){this.addScaleProj(e,Zhn(t))},getScale(e){return this.scales[e]||Te("Unrecognized scale name: "+Xe(e)),this.scales[e]},scaleRef(e){return kt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.data[e]=t},getData(e){return this.data[e]||Te("Undefined data set name: "+Xe(e)),this.data[e]},addDataPipeline(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.addData(e,wv.fromEntries(this,t))}};function vre(e){return(Ie(e)?Hmn:qmn)(e)}function Hmn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ot(i)?i.signal||vre(i):Xe(i))}return n+"]"}function qmn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Xe(r)+":"+(ot(i)?i.signal||vre(i):Xe(i));return t+"}"}function Wmn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Gmn(e,t,n){return ot(e)||Te("Input Vega specification must be an object."),t=Tx(Wmn(),t,e.config),Umn(e,new EUe(t,n)).toRuntime()}var Ymn="5.28.0";hn(cE,Otn,ysn,Ksn,Man,Van,gun,Kan,vun,Pun,Bun,Gun);const Kmn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:cs,CanvasHandler:S0,CanvasRenderer:SA,DATE:Iu,DAY:Ko,DAYOFYEAR:nh,Dataflow:aw,Debug:n8e,Error:tee,EventStream:c5,Gradient:Cje,GroupItem:x5,HOURS:yl,Handler:x0,HybridHandler:Xte,HybridRenderer:qM,Info:t8e,Item:E5,MILLISECONDS:bf,MINUTES:vl,MONTH:na,Marks:_l,MultiPulse:wee,None:e8e,Operator:Dr,Parameters:l5,Pulse:qg,QUARTER:Au,RenderType:yg,Renderer:Al,ResourceLoader:Tte,SECONDS:lc,SVGHandler:Vte,SVGRenderer:k5,SVGStringRenderer:Kte,Scenegraph:zte,TIME_UNITS:hee,Transform:Ee,View:Bze,WEEK:Es,Warn:nee,YEAR:xo,accessor:Lu,accessorFields:ta,accessorName:ji,array:nt,ascending:r5,bandwidthNRD:Tee,bin:v9e,bootstrapCI:_9e,boundClip:xBe,boundContext:mO,boundItem:Tq,boundMark:qje,boundStroke:gm,changeset:s_,clampRange:h8e,codegenExpression:hze,compare:aee,constant:fa,cumulativeLogNormal:kee,cumulativeNormal:d5,cumulativeUniform:Dee,dayofyear:$8e,debounce:uee,defaultLocale:gee,definition:m9e,densityLogNormal:Pee,densityNormal:Cee,densityUniform:Nee,domChild:bs,domClear:ql,domCreate:mg,domFind:Ute,dotbin:b9e,error:Te,expressionFunction:Qi,extend:hn,extent:th,extentIndex:p8e,falsy:Lm,fastmap:Ax,field:ac,flush:m8e,font:I5,fontFamily:vO,fontSize:yh,format:H$,formatLocale:kM,formats:_ee,hasOwnProperty:Nt,id:nO,identity:ca,inferType:i9e,inferTypes:s9e,ingest:dr,inherits:We,inrange:Cb,interpolate:yte,interpolateColors:b5,interpolateRange:dje,intersect:_Be,intersectBoxLine:Ab,intersectPath:Cte,intersectPoint:Ate,intersectRule:Nje,isArray:Ie,isBoolean:J0,isDate:Vg,isFunction:pn,isIterable:g8e,isNumber:Jn,isObject:ot,isRegExp:y8e,isString:rt,isTuple:a5,key:lee,lerp:v8e,lineHeight:w0,loader:s5,locale:n9e,logger:ree,lruCache:_8e,markup:Yte,merge:b8e,mergeConfig:Tx,multiLineOffset:Fte,one:Sx,pad:w8e,panLinear:a8e,panLog:u8e,panPow:l8e,panSymlog:c8e,parse:Gmn,parseExpression:qne,parseSelector:ey,path:E4,pathCurves:Ete,pathEqual:SBe,pathParse:pE,pathRectangle:Oje,pathRender:bA,pathSymbols:Ije,pathTrail:Pje,peek:Un,point:P5,projection:mne,quantileLogNormal:$ee,quantileNormal:h5,quantileUniform:Mee,quantiles:xee,quantizeInterpolator:hje,quarter:f8e,quartiles:See,get random(){return cc},randomInteger:Ren,randomKDE:Iee,randomLCG:$en,randomLogNormal:E9e,randomMixture:x9e,randomNormal:Aee,randomUniform:S9e,read:u9e,regressionConstant:Lee,regressionExp:C9e,regressionLinear:Fee,regressionLoess:O9e,regressionLog:T9e,regressionPoly:I9e,regressionPow:A9e,regressionQuad:jee,renderModule:$5,repeat:AT,resetDefaultLocale:OZt,resetSVGClipId:$je,resetSVGDefIds:Din,responseType:a9e,runtimeContext:Aze,sampleCurve:m5,sampleLogNormal:Oee,sampleNormal:f5,sampleUniform:Ree,scale:or,sceneEqual:Qte,sceneFromJSON:Gje,scenePickVisit:MM,sceneToJSON:Wje,sceneVisit:wf,sceneZOrder:Ite,scheme:vte,serializeXML:cBe,setHybridRendererOptions:kin,setRandom:Pen,span:rO,splitAccessPath:gh,stringValue:Xe,textMetrics:ul,timeBin:K8e,timeFloor:j8e,timeFormatLocale:yA,timeInterval:Ix,timeOffset:U8e,timeSequence:q8e,timeUnitSpecifier:k8e,timeUnits:pee,toBoolean:cee,toDate:fee,toNumber:Xo,toSet:_f,toString:dee,transform:g9e,transforms:cE,truncate:E8e,truthy:uc,tupleid:$t,typeParsers:gq,utcFloor:B8e,utcInterval:Ox,utcOffset:V8e,utcSequence:W8e,utcdayofyear:D8e,utcquarter:d8e,utcweek:M8e,version:Ymn,visitArray:qm,week:R8e,writeConfig:Cx,zero:ig,zoomLinear:iee,zoomLog:see,zoomPow:OM,zoomSymlog:oee},Symbol.toStringTag,{value:"Module"}));function Xmn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Qmn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Jmn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Zmn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const egn=Array.prototype.slice,yy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,egn.call(t,1))},tgn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var ngn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:tgn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return yy("join",arguments)},indexof:function(){return yy("indexOf",arguments)},lastindexof:function(){return yy("lastIndexOf",arguments)},slice:function(){return yy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return yy("substring",arguments,String)},split:function(){return yy("split",arguments,String)},replace:function(){return yy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const rgn=["view","item","group","xy","x","y"],IW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&IW.add(setImmediate);const ign={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Qmn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),IW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||ngn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Jmn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Zmn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,IW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function XS(e,t,n,r,i,s){const o=a=>ign[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,rgn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var sgn={operator(e,t){const n=t.ast,r=e.functions;return i=>XS(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>XS(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>XS(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return XS(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=XS(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&Xmn(o,r,s),l}}};const ogn="vega-lite",agn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',ugn="5.17.0",lgn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],cgn="https://vega.github.io/vega-lite/",fgn="Vega-Lite is a concise high-level language for interactive visualization.",dgn=["vega","chart","visualization"],hgn="build/vega-lite.js",pgn="build/vega-lite.min.js",mgn="build/vega-lite.min.js",ggn="build/src/index",ygn="build/src/index.d.ts",vgn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},_gn=["bin","build","src","vega-lite*","tsconfig.json"],bgn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},wgn={type:"git",url:"https://github.com/vega/vega-lite.git"},Egn="BSD-3-Clause",xgn={url:"https://github.com/vega/vega-lite/issues"},Sgn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Tgn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Cgn={vega:"^5.24.0"},Agn={node:">=18"},Ign={name:ogn,author:agn,version:ugn,collaborators:lgn,homepage:cgn,description:fgn,keywords:dgn,main:hgn,unpkg:pgn,jsdelivr:mgn,module:ggn,types:ygn,bin:vgn,files:_gn,scripts:bgn,repository:wgn,license:Egn,bugs:xgn,devDependencies:Sgn,dependencies:Tgn,peerDependencies:Cgn,engines:Agn};function _re(e){return!!e.or}function bre(e){return!!e.and}function wre(e){return!!e.not}function cR(e,t){if(wre(e))cR(e.not,t);else if(bre(e))for(const n of e.and)cR(n,t);else if(_re(e))for(const n of e.or)cR(n,t);else t(e)}function cw(e,t){return wre(e)?{not:cw(e.not,t)}:bre(e)?{and:e.and.map(n=>cw(n,t))}:_re(e)?{or:e.or.map(n=>cw(n,t))}:t(e)}const qt=structuredClone;function xUe(e){throw new Error(e)}function wE(e,t){const n={};for(const r of t)Nt(e,r)&&(n[r]=e[r]);return n}function wu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Pr(e)).join(",")})`};function kn(e){if(Jn(e))return e;const t=rt(e)?e:Pr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function OW(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function Ev(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Ere(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function SUe(e,...t){for(const n of t)Ogn(e,n??{});return e}function Ogn(e,t){for(const n of Ne(t))Cx(e,n,t[n],!0)}function xd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Pgn(e,t){const n=Ne(e),r=Ne(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function TUe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function xre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function PW(e){const t=new Set;for(const n of e){const i=gh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Sre(e,t){return e===void 0||t===void 0?!0:xre(PW(e),PW(t))}function Or(e){return Ne(e).length===0}const Ne=Object.keys,So=Object.values,A0=Object.entries;function DA(e){return e===!0||e===!1}function yi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function W2(e,t){return wre(e)?`!(${W2(e.not,t)})`:bre(e)?`(${e.and.map(n=>W2(n,t)).join(") && (")})`:_re(e)?`(${e.or.map(n=>W2(n,t)).join(") || (")})`:t(e)}function AL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&AL(e[n],t)&&delete e[n],Or(e)}function AO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Tre(e,t="datum"){const n=gh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Xe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function CUe(e,t="datum"){return`${t}[${Xe(gh(e).join("."))}]`}function kgn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function dc(e){return`${gh(e).map(kgn).join("\\.")}`}function xv(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Cre(e){return`${gh(e).join(".")}`}function EE(e){return e?gh(e).length:0}function Ki(...e){for(const t of e)if(t!==void 0)return t}let AUe=42;function IUe(e){const t=++AUe;return e?String(e)+t:t}function $gn(){AUe=42}function OUe(e){return PUe(e)?e:`__${e}`}function PUe(e){return e.startsWith("__")}function MA(e){if(e!==void 0)return(e%360+360)%360}function Z5(e){return Jn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const w_e=Object.getPrototypeOf(structuredClone({}));function sl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!sl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!sl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==w_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==w_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!sl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Tp="row",Cp="column",e8="facet",vi="x",to="y",Rf="x2",wh="y2",ty="xOffset",Lx="yOffset",Nf="radius",vm="radius2",Tc="theta",_m="theta2",Df="latitude",Mf="longitude",Lf="latitude2",hc="longitude2",Pu="color",Eh="fill",xh="stroke",ku="shape",bm="size",c_="angle",wm="opacity",ny="fillOpacity",ry="strokeOpacity",iy="strokeWidth",sy="strokeDash",IO="text",xE="order",OO="detail",t8="key",Sv="tooltip",n8="href",r8="url",i8="description",Rgn={x:1,y:1,x2:1,y2:1},kUe={theta:1,theta2:1,radius:1,radius2:1};function $Ue(e){return e in kUe}const Are={longitude:1,longitude2:1,latitude:1,latitude2:1};function RUe(e){switch(e){case Df:return"y";case Lf:return"y2";case Mf:return"x";case hc:return"x2"}}function NUe(e){return e in Are}const Ngn=Ne(Are),Ire={...Rgn,...kUe,...Are,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function fw(e){return e===Pu||e===Eh||e===xh}const DUe={row:1,column:1,facet:1},Jl=Ne(DUe),Ore={...Ire,...DUe},Dgn=Ne(Ore),{order:E2n,detail:x2n,tooltip:S2n,...Mgn}=Ore,{row:T2n,column:C2n,facet:A2n,...Lgn}=Mgn;function Fgn(e){return!!Lgn[e]}function MUe(e){return!!Ore[e]}const jgn=[Rf,wh,Lf,hc,_m,vm];function LUe(e){return f_(e)!==e}function f_(e){switch(e){case Rf:return vi;case wh:return to;case Lf:return Df;case hc:return Mf;case _m:return Tc;case vm:return Nf}return e}function I0(e){if($Ue(e))switch(e){case Tc:return"startAngle";case _m:return"endAngle";case Nf:return"outerRadius";case vm:return"innerRadius"}return e}function Sh(e){switch(e){case vi:return Rf;case to:return wh;case Df:return Lf;case Mf:return hc;case Tc:return _m;case Nf:return vm}}function $u(e){switch(e){case vi:case Rf:return"width";case to:case wh:return"height"}}function FUe(e){switch(e){case vi:return"xOffset";case to:return"yOffset";case Rf:return"x2Offset";case wh:return"y2Offset";case Tc:return"thetaOffset";case Nf:return"radiusOffset";case _m:return"theta2Offset";case vm:return"radius2Offset"}}function Pre(e){switch(e){case vi:return"xOffset";case to:return"yOffset"}}function Bgn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const zgn=Ne(Ire),{x:I2n,y:O2n,x2:P2n,y2:k2n,xOffset:$2n,yOffset:R2n,latitude:N2n,longitude:D2n,latitude2:M2n,longitude2:L2n,theta:F2n,theta2:j2n,radius:B2n,radius2:z2n,...kre}=Ire,Ugn=Ne(kre),$re={x:1,y:1},Th=Ne($re);function Xi(e){return e in $re}const Rre={theta:1,radius:1},Vgn=Ne(Rre);function s8(e){return e==="width"?vi:to}const jUe={xOffset:1,yOffset:1};function PO(e){return e in jUe}const{text:U2n,tooltip:V2n,href:H2n,url:q2n,description:W2n,detail:G2n,key:Y2n,order:K2n,...BUe}=kre,Hgn=Ne(BUe);function qgn(e){return!!kre[e]}function Wgn(e){switch(e){case Pu:case Eh:case xh:case bm:case ku:case wm:case iy:case sy:return!0;case ny:case ry:case c_:return!1}}const zUe={...$re,...Rre,...jUe,...BUe},o8=Ne(zUe);function Em(e){return!!zUe[e]}function Ggn(e,t){return Kgn(e)[t]}const UUe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:X2n,...Ygn}=UUe;function Kgn(e){switch(e){case Pu:case Eh:case xh:case i8:case OO:case t8:case Sv:case n8:case xE:case wm:case ny:case ry:case iy:case e8:case Tp:case Cp:return UUe;case vi:case to:case ty:case Lx:case Df:case Mf:return Ygn;case Rf:case wh:case Lf:case hc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case sy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ku:return{point:"always",geoshape:"always"};case IO:return{text:"always"};case c_:return{point:"always",square:"always",text:"always"};case r8:return{image:"always"};case Tc:return{text:"always",arc:"always"};case Nf:return{text:"always",arc:"always"};case _m:case vm:return{arc:"always"}}}function V7(e){switch(e){case vi:case to:case Tc:case Nf:case ty:case Lx:case bm:case c_:case iy:case wm:case ny:case ry:case Rf:case wh:case _m:case vm:return;case e8:case Tp:case Cp:case ku:case sy:case IO:case Sv:case n8:case r8:case i8:return"discrete";case Pu:case Eh:case xh:return"flexible";case Df:case Mf:case Lf:case hc:case OO:case t8:case xE:return}}const Xgn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Qgn={count:1,min:1,max:1};function tm(e){return!!e&&!!e.argmin}function oy(e){return!!e&&!!e.argmax}function Nre(e){return rt(e)&&!!Xgn[e]}const Jgn=new Set(["count","valid","missing","distinct"]);function VUe(e){return rt(e)&&Jgn.has(e)}function Zgn(e){return rt(e)&&$n(["min","max"],e)}const e0n=new Set(["count","sum","distinct","valid","missing"]),t0n=new Set(["mean","average","median","q1","q3","min","max"]);function HUe(e){return J0(e)&&(e=v8(e,void 0)),"bin"+Ne(e).map(t=>a8(e[t])?yi(`_${t}_${A0(e[t])}`):yi(`_${t}_${e[t]}`)).join("")}function qr(e){return e===!0||d_(e)&&!e.binned}function fo(e){return e==="binned"||d_(e)&&e.binned===!0}function d_(e){return ot(e)}function a8(e){return e==null?void 0:e.param}function E_e(e){switch(e){case Tp:case Cp:case bm:case Pu:case Eh:case xh:case iy:case wm:case ny:case ry:case ku:return 6;case sy:return 4;default:return 10}}function kO(e){return!!(e!=null&&e.expr)}function au(e){const t=Ne(e||{}),n={};for(const r of t)n[r]=Zu(e[r]);return n}function qUe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=wE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function Km(e){return rt(e)||Ie(e)&&rt(e[0])}function It(e){return!!(e!=null&&e.signal)}function ay(e){return!!e.step}function n0n(e){return Ie(e)?!1:"fields"in e&&!("data"in e)}function r0n(e){return Ie(e)?!1:"fields"in e&&"data"in e}function hp(e){return Ie(e)?!1:"field"in e&&"data"in e}const i0n={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},s0n=Ne(i0n),o0n={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},kW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function WUe(e){const t=Ie(e.condition)?e.condition.map(x_e):x_e(e.condition);return{...Zu(e),condition:t}}function Zu(e){if(kO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function x_e(e){if(kO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ti(e){if(kO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return It(e)?e:e!==void 0?{value:e}:void 0}function a0n(e){return It(e)?e.signal:Xe(e)}function S_e(e){return It(e)?e.signal:Xe(e.value)}function tf(e){return It(e)?e.signal:e==null?null:Xe(e)}function u0n(e,t,n){for(const r of n){const i=nm(r,t.markDef,t.config);i!==void 0&&(e[r]=ti(i))}return e}function GUe(e){return[].concat(e.type,e.style??[])}function fr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:nm(e,t,n,r)}function nm(e,t,n,{vgChannel:r}={}){return Ki(r?IL(e,t,n.style):void 0,IL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function IL(e,t,n){return YUe(e,GUe(t),n)}function YUe(e,t,n){t=nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function KUe(e,t){return nt(e).reduce((n,r)=>(n.field.push(Je(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function XUe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(sl(i,r))return;n.push(r)}),n}function QUe(e,t){return sl(e,t)||!t?e:e?[...nt(e),...nt(t)].join(", "):t}function JUe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Km(n)||It(n))&&(Km(r)||It(r)))return{explicit:e.explicit,value:QUe(n,r)};if(Km(n)||It(n))return{explicit:e.explicit,value:n};if(Km(r)||It(r))return{explicit:e.explicit,value:r};if(!Km(n)&&!It(n)&&!Km(r)&&!It(r))return{explicit:e.explicit,value:XUe(n,r)};throw new Error("It should never reach here")}function Dre(e){return`Invalid specification ${Pr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const l0n='Autosize "fit" only works for single views and layered views.';function T_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function C_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function A_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${$u(e)}.`:'Dropping "fit" because spec has discrete size.'}function Mre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function I_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function c0n(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function f0n(e){return`The "nearest" transform is not supported for ${e} marks.`}function ZUe(e){return`Selection not supported for ${e} yet.`}function d0n(e){return`Cannot find a selection named "${e}".`}const h0n="Scale bindings are currently only supported for scales with unbinned, continuous domains.",p0n="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",m0n="Legend bindings are only supported for selections over an individual field or encoding channel.";function g0n(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function y0n(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const v0n="The same selection must be used to override scale domains in a layered view.",_0n='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function b0n(e){return`Unknown repeated value "${e}".`}function O_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const w0n="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function E0n(e){return`Unrecognized parse "${e}".`}function P_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const x0n="Attempt to add the same child twice.";function S0n(e){return`Ignoring an invalid transform: ${Pr(e)}.`}const T0n='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function k_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function C0n(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Pr(t)} is overridden by a child projection ${Pr(n)}.`}const A0n="Arc marks uses theta channel rather than angle, replacing angle with theta.";function I0n(e){return`${e}Offset dropped because ${e} is continuous`}function O0n(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Pr(n)}}.`}function eVe(e){return`Invalid field type "${e}".`}function P0n(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function k0n(e){return`Invalid aggregation operator "${e}".`}function tVe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function $0n(e){return`Position range does not support relative band size for ${e}.`}function $W(e,t){return`Dropping ${Pr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const R0n="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function u8(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function N0n(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function D0n(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function M0n(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function L0n(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function H7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function F0n(e){return`The ${e} for range marks cannot be an expression`}function j0n(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function B0n(e,t){return`Specified orient "${e}" overridden with "${t}".`}function z0n(e){return`Cannot use the scale property "${e}" with non-color channel.`}function U0n(e){return`Cannot use the relative band size with ${e} scale.`}function V0n(e){return`Using unaggregated domain with raw field has no effect (${Pr(e)}).`}function H0n(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function q0n(e){return`Unaggregated domain is currently unsupported for log scale (${Pr(e)}).`}function W0n(e){return`Cannot apply size to non-oriented mark "${e}".`}function G0n(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Y0n(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function nVe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function rVe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function K0n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using ${Pr(n)}.`}function X0n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using the union of the two domains.`}function Q0n(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function J0n(e){return`Dropping sort property ${Pr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const $_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Z0n="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",eyn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",tyn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function nyn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function ryn(e){return`Cannot stack non-linear scale (${e}).`}function iyn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function OL(e,t){return`Invalid ${e}: ${Pr(t)}.`}function syn(e){return`Dropping day from datetime ${Pr(e)} as day cannot be combined with other units.`}function oyn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function ayn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function uyn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function R_e(e){return`1D error band does not support ${e}.`}function iVe(e){return`Channel ${e} is required for "binned" bin.`}function lyn(e){return`Channel ${e} should not be used with "binned" bin.`}function cyn(e){return`Domain for ${e} is required for threshold scale.`}const sVe=ree(nee);let SE=sVe;function fyn(e){return SE=e,SE}function dyn(){return SE=sVe,SE}function Ue(...e){SE.warn(...e)}function hyn(...e){SE.debug(...e)}function h_(e){if(e&&ot(e)){for(const t of Fre)if(t in e)return!0}return!1}const oVe=["january","february","march","april","may","june","july","august","september","october","november","december"],pyn=oVe.map(e=>e.substr(0,3)),aVe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],myn=aVe.map(e=>e.substr(0,3));function gyn(e){if(Z5(e)&&(e=+e),Jn(e))return e>4&&Ue(OL("quarter",e)),e-1;throw new Error(OL("quarter",e))}function yyn(e){if(Z5(e)&&(e=+e),Jn(e))return e-1;{const t=e.toLowerCase(),n=oVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=pyn.indexOf(r);if(i!==-1)return i;throw new Error(OL("month",e))}}function vyn(e){if(Z5(e)&&(e=+e),Jn(e))return e%7;{const t=e.toLowerCase(),n=aVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=myn.indexOf(r);if(i!==-1)return i;throw new Error(OL("day",e))}}function Lre(e,t){const n=[];if(t&&e.day!==void 0&&Ne(e).length>1&&(Ue(syn(e)),e=qt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?yyn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?gyn(e.quarter):e.quarter;n.push(Jn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?vyn(e.day):e.day;n.push(Jn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Tv(e){const n=Lre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function _yn(e){const n=Lre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function byn(e){const t=Lre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const uVe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Fre=Ne(uVe);function wyn(e){return!!uVe[e]}function p_(e){return ot(e)?e.binned:lVe(e)}function lVe(e){return e&&e.startsWith("binned")}function jre(e){return e.startsWith("utc")}function Eyn(e){return e.substring(3)}const xyn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function l8(e){return Fre.filter(t=>fVe(e,t))}function cVe(e){const t=l8(e);return t[t.length-1]}function fVe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Syn(e,t,{end:n}={end:!1}){const r=Tre(t),i=jre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Fre)fVe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),_yn(a)}function dVe(e){if(!e)return;const t=l8(e);return`timeUnitSpecifier(${Pr(t)}, ${Pr(xyn)})`}function Tyn(e,t,n){if(!e)return;const r=dVe(e);return`${n||jre(e)?"utc":"time"}Format(${t}, ${r})`}function Ks(e){if(!e)return;let t;return rt(e)?lVe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),jre(t.unit)&&(t.utc=!0,t.unit=Eyn(t.unit)),t}function Cyn(e){const{utc:t,...n}=Ks(e);return n.unit?(t?"utc":"")+Ne(n).map(r=>yi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ne(n).map(r=>yi(`_${r}_${n[r]}`)).join("")}function hVe(e,t=n=>n){const n=Ks(e),r=cVe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=pVe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Tv(a))} - ${t(Tv(i))}`}}const Ayn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Iyn(e){return!!Ayn[e]}function pVe(e,t=1){if(Iyn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Oyn(e){return e==null?void 0:e.param}function Bre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function zre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ure(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Vre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Hre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function qre(e){if(e!=null&&e.field){if(Ie(e.range)&&e.range.length===2)return!0;if(It(e.range))return!0}return!1}function Wre(e){return!!(e!=null&&e.field)&&(Ie(e.oneOf)||Ie(e.in))}function Pyn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function mVe(e){return Wre(e)||Bre(e)||qre(e)||zre(e)||Vre(e)||Ure(e)||Hre(e)}function Hf(e,t){return _8(e,{timeUnit:t,wrapTime:!0})}function kyn(e,t){return e.map(n=>Hf(n,t))}function gVe(e,t=!0){const{field:n}=e,r=Ks(e.timeUnit),{unit:i,binned:s}=r||{},o=Je(e,{expr:"datum"}),a=i?`time(${s?o:Syn(i,n)})`:o;if(Bre(e))return`${a}===${Hf(e.equal,i)}`;if(zre(e)){const u=e.lt;return`${a}<${Hf(u,i)}`}else if(Vre(e)){const u=e.gt;return`${a}>${Hf(u,i)}`}else if(Ure(e)){const u=e.lte;return`${a}<=${Hf(u,i)}`}else if(Hre(e)){const u=e.gte;return`${a}>=${Hf(u,i)}`}else{if(Wre(e))return`indexof([${kyn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Pyn(e))return Gre(a,e.valid);if(qre(e)){const{range:u}=e,l=It(u)?{signal:`${u.signal}[0]`}:u[0],c=It(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Hf(l,i)+", "+Hf(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Hf(l,i)}`),c!==null&&f.push(`${a} <= ${Hf(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Pr(e)}`)}function Gre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function $yn(e){return mVe(e)&&e.timeUnit?{...e,timeUnit:Ks(e.timeUnit)}:e}const $O={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Ryn(e){return e==="quantitative"||e==="temporal"}function yVe(e){return e==="ordinal"||e==="nominal"}const Cv=$O.quantitative,Yre=$O.ordinal,TE=$O.temporal,Kre=$O.nominal,Fx=$O.geojson;function Nyn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Cv:return"quantitative";case"t":case TE:return"temporal";case"o":case Yre:return"ordinal";case"n":case Kre:return"nominal";case Fx:return"geojson"}}const Eu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},RW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Dyn(e,t){const n=RW[e],r=RW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Myn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function N_e(e){return Myn[e]}const vVe=new Set(["linear","log","pow","sqrt","symlog"]),_Ve=new Set([...vVe,"time","utc"]);function bVe(e){return vVe.has(e)}const wVe=new Set(["quantile","quantize","threshold"]),Lyn=new Set([..._Ve,...wVe,"sequential","identity"]),Fyn=new Set(["ordinal","bin-ordinal","point","band"]);function Qs(e){return Fyn.has(e)}function wl(e){return Lyn.has(e)}function nf(e){return _Ve.has(e)}function CE(e){return wVe.has(e)}const jyn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Byn(e){return!rt(e)&&!!e.name}function EVe(e){return e==null?void 0:e.param}function zyn(e){return e==null?void 0:e.unionWith}function Uyn(e){return ot(e)&&"field"in e}const Vyn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Q2n,domain:J2n,range:Z2n,rangeMax:eCn,rangeMin:tCn,scheme:nCn,...Hyn}=Vyn,qyn=Ne(Hyn);function NW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return nf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return nf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return nf(e);case"nice":return nf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return wl(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function xVe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return fw(e)?void 0:z0n(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Wyn(e,t){return $n([Yre,Kre],t)?e===void 0||Qs(e):t===TE?$n([Eu.TIME,Eu.UTC,void 0],e):t===Cv?bVe(e)||CE(e)||e===void 0:!0}function Gyn(e,t,n=!1){if(!Em(e))return!1;switch(e){case vi:case to:case ty:case Lx:case Tc:case Nf:return nf(t)||t==="band"?!0:t==="point"?!n:!1;case bm:case iy:case wm:case ny:case ry:case c_:return nf(t)||CE(t)||$n(["band","point","ordinal"],t);case Pu:case Eh:case xh:return t!=="band";case sy:case ku:return t==="ordinal"||CE(t)}}const qa={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},SVe=qa.arc,c8=qa.area,f8=qa.bar,Yyn=qa.image,d8=qa.line,h8=qa.point,Kyn=qa.rect,PL=qa.rule,TVe=qa.text,Xre=qa.tick,Xyn=qa.trail,Qre=qa.circle,Jre=qa.square,CVe=qa.geoshape;function uy(e){return["line","area","trail"].includes(e)}function LA(e){return["rect","bar","image","arc"].includes(e)}const Qyn=new Set(Ne(qa));function sh(e){return e.type}const Jyn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Zyn=["fill","fillOpacity"],e1n=[...Jyn,...Zyn],t1n={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},D_e=Ne(t1n),n1n={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},r1n={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},i1n={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},AVe=Ne(i1n);function Av(e){return e&&e.band!=null}const s1n={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},IVe=5,o1n={binSpacing:1,continuousBandSize:IVe,minBandSize:.25,timeUnitBandPosition:.5},a1n={binSpacing:0,continuousBandSize:IVe,minBandSize:.25,timeUnitBandPosition:.5},u1n={thickness:1};function l1n(e){return sh(e)?e.type:e}function Zre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=tie(e);return Ve(n)&&!VUe(n.aggregate)&&i&&nf(i.get("type"))?c1n({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function c1n({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return uy(n.type)?r:fr("invalid",n,i)===null?[f1n(e,t),r]:r}function f1n(e,t){const n=eie(e,!0),i=f_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function eie(e,t=!0){return Gre(rt(e)?e:Je(e,{expr:"datum"}),!t)}function d1n(e){const{datum:t}=e;return h_(t)?Tv(t):`${Pr(t)}`}function z1(e,t,n,r){const i={};if(t&&(i.scale=t),Ch(e)){const{datum:s}=e;h_(s)?i.signal=Tv(s):It(s)?i.signal=s.signal:kO(s)?i.signal=s.expr:i.value=s}else i.field=Je(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function kL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!It(o)&&0<o&&o<1?"datum":void 0,u=Je(t,{expr:a,suffix:i}),l=n!==void 0?Je(n,{expr:a}):Je(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=It(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function h1n({scaleName:e,fieldDef:t}){const n=Je(t,{expr:"datum"}),r=Je(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function tie({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qt(t)){const f=o==null?void 0:o.get("type");if(Ba(t)){c??(c=O0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(qr(d)||c&&h&&p===TE)return a!=null&&a.impute?z1(t,s,{binSuffix:"mid"},{offset:u}):c&&!Qs(f)?kL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):z1(t,s,MO(t,e)?{binSuffix:"range"}:{},{offset:u});if(fo(d)){if(Ve(n))return kL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ue(iVe(e===vi?Rf:wh))}}return z1(t,s,Qs(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Ef(t)){const f=t.value,d=u?{offset:u}:{};return{...G2(e,f),...d}}}return pn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function G2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ti(t)}function Iv(e){return e&&e!=="number"&&e!=="time"}function OVe(e,t,n){return`${e}(${t}${n?`, ${Pr(n)}`:""})`}const p1n="  ";function nie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Iv(n))return rf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=PVe(e,r,i),a=AE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return rf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return rf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ve(e)&&e.timeUnit===void 0)return rf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(OE(e)){const c=g1n({field:o,timeUnit:Ve(e)?(u=Ks(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:m_(e)&&((l=e.scale)==null?void 0:l.type)===Eu.UTC});return c?{signal:c}:void 0}if(t=DW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ve(e)&&qr(e.bin)){const c=Je(e,{expr:r,binSuffix:"end"});return{signal:RO(o,c,t,n,s)}}else return t||AE(e)==="quantitative"?{signal:`${RVe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function PVe(e,t,n){return Ve(e)?n?`${Je(e,{expr:t,suffix:"end"})}-${Je(e,{expr:t,suffix:"start"})}`:Je(e,{expr:t}):d1n(e)}function rf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=PVe(e,r,i)),o!=="datum.value"&&Ve(e)&&qr(e.bin)){const a=Je(e,{expr:r,binSuffix:"end"});return{signal:RO(o,a,t,n,s)}}return{signal:OVe(n,o,t)}}function kVe(e,t,n,r,i,s){var o;if(!(rt(r)&&Iv(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&AE(e)==="quantitative"&&(i.normalizedNumberFormatType&&IE(e)&&e.stack==="normalize"||i.numberFormatType))){if(IE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return DW({type:"quantitative",config:i,normalizeStack:!0});if(OE(e)){const a=Ve(e)?(o=Ks(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:m1n({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return DW({type:t,specifiedFormat:n,config:i})}}function $Ve(e,t,n){var r;if(e&&(It(e)||e==="number"||e==="time"))return e;if(OE(t)&&n!=="time"&&n!=="utc")return Ve(t)&&((r=Ks(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function DW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(rt(t))return t;if(e===Cv)return r?n.normalizedNumberFormat:n.numberFormat}function m1n({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:dVe(t)}:r?void 0:n.timeFormat)}function RVe(e,t){return`format(${e}, "${t||""}")`}function M_e(e,t,n,r){return Iv(n)?OVe(n,e,t):RVe(e,(rt(t)?t:void 0)??r.numberFormat)}function RO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return RO(e,t,i.numberFormat,i.numberFormatType,i);const s=M_e(e,n,r,i),o=M_e(t,n,r,i);return`${Gre(e,!1)} ? "null" : ${s} + "${p1n}" + ${o}`}function g1n({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=rt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Tyn(t,e,s)}const p8="min",y1n={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function L_e(e){return e in y1n}function NVe(e){return!!(e!=null&&e.encoding)}function jd(e){return e&&(e.op==="count"||!!e.field)}function DVe(e){return e&&Ie(e)}function NO(e){return"row"in e||"column"in e}function rie(e){return!!e&&"header"in e}function m8(e){return"facet"in e}function v1n(e){return e.param}function _1n(e){return e&&!rt(e)&&"repeat"in e}function F_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function iie(e){return"sort"in e}function O0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ve(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return nm("timeUnitBandPosition",n,r);if(qr(s))return .5}}function MVe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=$u(e),u=fr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ve(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:nm("timeUnitBandSize",r,i)};if(qr(h)&&!Qs(s))return{band:1}}if(LA(r.type))return s?Qs(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function LVe(e,t,n,r){return qr(e.bin)||e.timeUnit&&Ba(e)&&e.type==="temporal"?O0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function FVe(e){return e&&!!e.sort&&!e.field}function g8(e){return e&&"condition"in e}function y8(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Ve(t)}function DO(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Qt(t)}function b1n(e){const t=e==null?void 0:e.condition;return!!t&&(Ie(t)||Ef(t))}function Ve(e){return e&&(!!e.field||e.aggregate==="count")}function AE(e){return e==null?void 0:e.type}function Ch(e){return e&&"datum"in e}function wg(e){return Ba(e)&&!RL(e)||$L(e)}function j_e(e){return Ba(e)&&e.type==="quantitative"&&!e.bin||$L(e)}function $L(e){return Ch(e)&&Jn(e.datum)}function Qt(e){return Ve(e)||Ch(e)}function Ba(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Ef(e){return e&&"value"in e&&"value"in e}function m_(e){return e&&("scale"in e||"sort"in e)}function IE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function jVe(e){return e&&"legend"in e}function BVe(e){return e&&("format"in e||"formatType"in e)}function w1n(e){return wu(e,["legend","axis","header","scale"])}function E1n(e){return"op"in e}function Je(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(S1n(e))n=OUe("count");else{let o;if(!t.nofn)if(E1n(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;qr(a)?(o=HUe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?oy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):tm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!p_(l)&&(o=Cyn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Cre(n):t.expr?CUe(n,t.expr)+s:dc(n)+s}function RL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ve(e)&&!!e.bin;case"temporal":return!1}throw new Error(eVe(e.type))}function x1n(e){var t;return m_(e)&&CE((t=e.scale)==null?void 0:t.type)}function S1n(e){return e.aggregate==="count"}function T1n(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(qr(r))return`${n} (binned)`;if(i&&!p_(i)){const a=(o=Ks(i))==null?void 0:o.unit;if(a)return`${n} (${l8(a).join("-")})`}else if(s)return oy(s)?`${n} for max ${s.argmax}`:tm(s)?`${n} for min ${s.argmin}`:`${AO(s)} of ${n}`;return n}function C1n(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(oy(t))return`${i} for argmax(${t.argmax})`;if(tm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!p_(r)?Ks(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||qr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const zVe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return C1n(e);default:return T1n(e,t)}};let UVe=zVe;function VVe(e){UVe=e}function A1n(){VVe(zVe)}function dw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=sie(e))==null?void 0:a.title;if(!Ve(e))return i??e.title;const s=e,o=r?oie(s,t):void 0;return n?Ki(i,s.title,o):i??s.title??o}function sie(e){if(IE(e)&&e.axis)return e.axis;if(jVe(e)&&e.legend)return e.legend;if(rie(e)&&e.header)return e.header}function oie(e,t){return UVe(e,t)}function NL(e){if(BVe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=sie(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function I1n(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(iie(e)&&Ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!oy(n)&&!tm(n))return"quantitative";if(m_(e)&&((s=e.scale)!=null&&s.type))switch(RW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function oh(e){if(Ve(e))return e;if(y8(e))return e.condition}function xs(e){if(Qt(e))return e;if(DO(e))return e.condition}function HVe(e,t,n,r={}){if(rt(e)||Jn(e)||J0(e)){const i=rt(e)?"string":Jn(e)?"number":"boolean";return Ue(O0n(t,i,e)),{value:e}}return Qt(e)?DL(e,t,n,r):DO(e)?{...e,condition:DL(e.condition,t,n,r)}:e}function DL(e,t,n,r){if(BVe(e)){const{format:i,formatType:s,...o}=e;if(Iv(s)&&!n.customFormatTypes)return Ue(k_e(t)),DL(o,t,n,r)}else{const i=IE(e)?"axis":jVe(e)?"legend":rie(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Iv(o)&&!n.customFormatTypes)return Ue(k_e(t)),DL({...e,[i]:a},t,n,r)}}return Ve(e)?aie(e,t,r):O1n(e)}function O1n(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Jn(n)?"quantitative":rt(n)?"nominal":h_(n)?"temporal":void 0,{...e,type:t}}function aie(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Nre(r)&&!oy(r)&&!tm(r)&&(Ue(k0n(r)),delete a.aggregate),i&&(a.timeUnit=Ks(i)),o&&(a.field=`${o}`),qr(s)&&(a.bin=v8(s,t)),fo(s)&&!Xi(t)&&Ue(lyn(t)),Ba(a)){const{type:u}=a,l=Nyn(u);u!==l&&(a.type=l),u!=="quantitative"&&VUe(r)&&(Ue(P0n(u,r)),a.type="quantitative")}else if(!LUe(t)){const u=I1n(a,t);a.type=u}if(Ba(a)){const{compatible:u,warning:l}=P1n(a,t)||{};u===!1&&Ue(l)}if(iie(a)&&rt(a.sort)){const{sort:u}=a;if(L_e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&L_e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(rie(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function v8(e,t){return J0(e)?{maxbins:E_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:E_e(t)}:e}const B_={compatible:!0};function P1n(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Tp:case Cp:case e8:return RL(e)?B_:{compatible:!1,warning:D0n(t)};case vi:case to:case ty:case Lx:case Pu:case Eh:case xh:case IO:case OO:case t8:case Sv:case n8:case r8:case c_:case Tc:case Nf:case i8:return B_;case Mf:case hc:case Df:case Lf:return n!==Cv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:B_;case wm:case ny:case ry:case iy:case bm:case _m:case vm:case Rf:case wh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:B_;case ku:case sy:return!RL(e)&&!x1n(e)?{compatible:!1,warning:M0n(t)}:B_;case xE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:B_}}function OE(e){const{formatType:t}=NL(e);return t==="time"||!t&&k1n(e)}function k1n(e){return e&&(e.type==="temporal"||Ve(e)&&!!e.timeUnit)}function _8(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ks(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return kO(e)?a=e.expr:It(e)?a=e.signal:h_(e)?(o=!0,a=Tv(e)):(rt(e)||Jn(e))&&o&&(a=`datetime(${Pr(e)})`,wyn(s)&&(Jn(e)&&e<1e4||rt(e)&&isNaN(Date.parse(e)))&&(a=Tv({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Pr(e)}function qVe(e,t){const{type:n}=e;return t.map(r=>{const i=Ve(e)&&!p_(e.timeUnit)?e.timeUnit:void 0,s=_8(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function MO(e,t){return qr(e.bin)?Em(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const B_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function LO(e){return e==null?void 0:e.condition}const WVe=["domain","grid","labels","ticks","title"],$1n={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},GVe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},R1n={...GVe,style:1,labelExpr:1,encoding:1};function z_e(e){return!!R1n[e]}const N1n={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},YVe=Ne(N1n);function xm(e){return"mark"in e}class b8{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return xm(t)?l1n(t.mark)===this.name:!1}}function U1(e,t){const n=e&&e[t];return n?Ie(n)?Ev(n,r=>!!r.field):Ve(n)||y8(n):!1}function KVe(e,t){const n=e&&e[t];return n?Ie(n)?Ev(n,r=>!!r.field):Ve(n)||Ch(n)||DO(n):!1}function XVe(e,t){if(Xi(t)){const n=e[t];if((Ve(n)||Ch(n))&&(yVe(n.type)||Ve(n)&&n.timeUnit)){const r=Pre(t);return KVe(e,r)}}return!1}function uie(e){return Ev(Dgn,t=>{if(U1(e,t)){const n=e[t];if(Ie(n))return Ev(n,r=>!!r.aggregate);{const r=oh(n);return r&&!!r.aggregate}}return!1})}function QVe(e,t){const n=[],r=[],i=[],s=[],o={};return lie(e,(a,u)=>{if(Ve(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=sie(a),m=p==null?void 0:p.title;let g=Je(a,{forAs:!0});const y={...m?[]:{title:dw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(oy(c)?(v="argmax",g=Je({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):tm(c)?(v="argmin",g=Je({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),Ba(a)&&qr(f)){if(r.push({bin:f,field:l,as:g}),n.push(Je(a,{binSuffix:"end"})),MO(a,u)&&n.push(Je(a,{binSuffix:"range"})),Xi(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",LUe(u)||(y.type=Cv)}else if(d&&!p_(d)){i.push({timeUnit:d,field:l,as:g});const v=Ba(a)&&a.type!==TE&&"time";v&&(u===IO||u===Sv?y.formatType=v:qgn(u)?y.legend={formatType:v,...y.legend}:Xi(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function D1n(e,t,n){const r=Ggn(t,n);if(r){if(r==="binned"){const i=e[t===Rf?vi:to];return!!(Ve(i)&&Ve(e[t])&&fo(i.bin))}}else return!1;return!0}function M1n(e,t,n,r){const i={};for(const s of Ne(e))MUe(s)||Ue(N0n(s));for(let s of zgn){if(!e[s])continue;const o=e[s];if(PO(s)){const a=Bgn(s),u=i[a];if(Ve(u)&&Ryn(u.type)&&Ve(o)&&!u.timeUnit){Ue(I0n(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ue(A0n),s=Tc),!D1n(e,s,t)){Ue(u8(s,t));continue}if(s===bm&&t==="line"){const a=oh(e[s]);if(a!=null&&a.aggregate){Ue(R0n);continue}}if(s===Pu&&(n?"fill"in e:"stroke"in e)){Ue(tVe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===OO||s===xE&&!Ie(o)&&!Ef(o)||s===Sv&&Ie(o)){if(o){if(s===xE){const a=e[s];if(FVe(a)){i[s]=a;continue}}i[s]=nt(o).reduce((a,u)=>(Ve(u)?a.push(aie(u,s)):Ue($W(u,s)),a),[])}}else{if(s===Sv&&o===null)i[s]=null;else if(!Ve(o)&&!Ch(o)&&!Ef(o)&&!g8(o)&&!It(o)){Ue($W(o,s));continue}i[s]=HVe(o,s,r)}}return i}function w8(e,t){const n={};for(const r of Ne(e)){const i=HVe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function L1n(e){const t=[];for(const n of Ne(e))if(U1(e,n)){const r=e[n],i=nt(r);for(const s of i)Ve(s)?t.push(s):y8(s)&&t.push(s.condition)}return t}function lie(e,t,n){if(e)for(const r of Ne(e)){const i=e[r];if(Ie(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function F1n(e,t,n,r){return e?Ne(e).reduce((i,s)=>{const o=e[s];return Ie(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function JVe(e,t){return Ne(t).reduce((n,r)=>{switch(r){case vi:case to:case n8:case i8:case r8:case Rf:case wh:case ty:case Lx:case Tc:case _m:case Nf:case vm:case Df:case Mf:case Lf:case hc:case IO:case ku:case c_:case Sv:return n;case xE:if(e==="line"||e==="trail")return n;case OO:case t8:{const i=t[r];if(Ie(i)||Ve(i))for(const s of nt(i))s.aggregate||n.push(Je(s,{}));return n}case bm:if(e==="trail")return n;case Pu:case Eh:case xh:case wm:case ny:case ry:case sy:case iy:{const i=oh(t[r]);return i&&!i.aggregate&&n.push(Je(i,{})),n}}},[])}function j1n(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ie(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function MW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${cie(t)}`:"";return{field:o+t.field,type:t.type,title:It(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=L1n(n).map(w1n);return{tooltip:[...i,...xd(s,kn)]}}function cie(e){const{title:t,field:n}=e;return Ki(t,n)}function fie(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=cie(n);return ZVe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...rt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function ZVe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...sh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...J0(e[t])?{}:e[t]}}]:[]}function eHe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:kk(s,n),continuousAxisChannelDef2:kk(o,n),continuousAxisChannelDefError:kk(a,n),continuousAxisChannelDefError2:kk(u,n),continuousAxis:i}}function kk(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ue(uyn(n,t)),r}else return e}function tHe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(sh(n)&&n.orient)return n.orient;if(wg(i)){if(wg(s)){const o=Ve(i)&&i.aggregate,a=Ve(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return OE(s)&&!OE(i)?"horizontal":"vertical"}return"horizontal"}else{if(wg(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const ML="boxplot",B1n=["box","median","outliers","rule","ticks"],z1n=new b8(ML,rHe);function nHe(e){return Jn(e)?"tukey":e}function rHe(e,{config:t}){e={...e,encoding:w8(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=sh(n)?n:{type:n};i&&Ue(ZUe("boxplot"));const u=a.extent??t.boxplot.extent,l=fr("size",a,t),c=a.invalid,f=nHe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:b,boxOrient:E,customTooltipWithoutAggregatedField:w}=U1n(e,u,t),{color:x,size:S,...P}=_,A=Re=>fie(a,g,m,Re,t.boxplot),O=A(P),z=A(_),M=A({...P,...S?{size:S}:{}}),R=MW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),D={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},L=f==="min-max"?R:MW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:L}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:L}),...O({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:L}),...O({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:L})],B=[...f!=="tukey"?V:[],...z({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...M({partName:"median",mark:{type:"tick",invalid:c,...ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:B};const H=`datum["lower_box_${m.field}"]`,U=`datum["upper_box_${m.field}"]`,k=`(${U} - ${H})`,$=`${H} - ${u} * ${k}`,q=`${U} + ${u} * ${k}`,F=`datum["${m.field}"]`,j={joinaggregate:iHe(m.field),groupby:y},Q={transform:[{filter:`(${$} <= ${F}) && (${F} <= ${q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:V},{tooltip:se,...ae}=P,{scale:ce,axis:le}=m,ge=cie(m),ue=wu(le,["title"]),Fe=ZVe(a,"outliers",t.boxplot,{transform:[{filter:`(${F} < ${$}) || (${F} > ${q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ge!==void 0?{title:ge}:{},...ce!==void 0?{scale:ce}:{},...Or(ue)?{}:{axis:ue}},...ae,...x?{color:x}:{},...w?{tooltip:w}:{}}})[0];let $e;const Ge=[...d,...h,j];return Fe?$e={transform:Ge,layer:[Fe,Q]}:($e=Q,$e.transform.unshift(...Ge)),{...o,layer:[$e,{transform:p,layer:B}]}}function iHe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function U1n(e,t,n){const r=tHe(e,ML),{continuousAxisChannelDef:i,continuousAxis:s}=eHe(e,r,ML),o=i.field,a=nHe(t),u=[...iHe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=j1n(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=QVe(h,n),_=r==="vertical"?"horizontal":"vertical",b=r,E=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:E,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const die="errorbar",V1n=["ticks","rule"],H1n=new b8(die,sHe);function sHe(e,{config:t}){e={...e,encoding:w8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=oHe(e,die,t);delete s.size;const c=fie(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function q1n(e,t){const{encoding:n}=e;if(W1n(n))return{orient:tHe(e,t),inputType:"raw"};const r=G1n(n),i=Y1n(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qt(a)&&Qt(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qt(a)){if(wg(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qt(u)){if(wg(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qt(u)&&!Qt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qt(c)&&!Qt(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qt(a)&&Qt(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qt(a)){if(wg(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qt(l)){if(wg(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function W1n(e){return(Qt(e.x)||Qt(e.y))&&!Qt(e.x2)&&!Qt(e.y2)&&!Qt(e.xError)&&!Qt(e.xError2)&&!Qt(e.yError)&&!Qt(e.yError2)}function G1n(e){return Qt(e.x2)||Qt(e.y2)}function Y1n(e){return Qt(e.xError)||Qt(e.xError2)||Qt(e.yError)||Qt(e.yError2)}function oHe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=sh(r)?r:{type:r};s&&Ue(ZUe(t));const{orient:l,inputType:c}=q1n(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=eHe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=K1n(u,f,d,h,p,c,t,n),{[m]:b,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:x,...S}=i,{bins:P,timeUnits:A,aggregate:O,groupby:z,encoding:M}=QVe(S,n),R=[...O,...g],D=c!=="raw"?[]:z,L=MW(v,f,M,_);return{transform:[...a.transform??[],...P,...A,...R.length===0?[]:[{aggregate:R,groupby:D}],...y],groupby:D,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function K1n(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ue(ayn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:AO(h)},{fieldPrefix:"upper_",titlePrefix:U_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:U_e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:dw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:dw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:dw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ue(oyn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:xv(xv(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function U_e(e,t,n){return`${AO(e)} ${n} ${t}`}const hie="errorband",X1n=["band","borders"],Q1n=new b8(hie,aHe);function aHe(e,{config:t}){e={...e,encoding:w8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=oHe(e,hie,t),l=o,c=fie(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ue(R_e("interpolate")):l.tension&&Ue(R_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const uHe={};function pie(e,t,n){const r=new b8(e,t);uHe[e]={normalizer:r,parts:n}}function J1n(){return Ne(uHe)}pie(ML,rHe,B1n);pie(die,sHe,V1n);pie(hie,aHe,X1n);const Z1n=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],lHe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},cHe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},evn=Ne(lHe),tvn=Ne(cHe),nvn={header:1,headerRow:1,headerColumn:1,headerFacet:1},fHe=Ne(nvn),dHe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],rvn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},ivn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},xf="_vgsid_",svn={point:{on:"click",fields:[xf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function mie(e){return e==="legend"||!!(e!=null&&e.legend)}function q7(e){return mie(e)&&ot(e)}function gie(e){return!!(e!=null&&e.select)}function hHe(e){const t=[];for(const n of e||[]){if(gie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function ovn(e){return E8(e)||vie(e)||yie(e)}function yie(e){return"concat"in e}function E8(e){return"vconcat"in e}function vie(e){return"hconcat"in e}function pHe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ah(e){return ot(e)&&e.step!==void 0}function V_e(e){return e.view||e.width||e.height}const H_e=20,avn={align:1,bounds:1,center:1,columns:1,spacing:1},uvn=Ne(avn);function lvn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(m8(e)&&!NO(e.facet)||yie(e))&&(i.columns=o),E8(e)&&(i.columns=1);for(const a of uvn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Jn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function LW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function LL(e,t){const n=FL(e,t);return ah(n)?n.step:mHe}function FL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ki(n,{step:e.step})}const mHe=20,cvn={continuousWidth:200,continuousHeight:200,step:mHe},fvn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:cvn,mark:r1n,arc:{},area:{},bar:o1n,circle:{},geoshape:{},image:{},line:{},point:{},rect:a1n,rule:{color:"black"},square:{},text:{color:"black"},tick:u1n,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:jyn,projection:{},legend:rvn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:svn,style:{},title:{},facet:{spacing:H_e},concat:{spacing:H_e},normalizedNumberFormat:".0%"},Rh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],q_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},W_e={blue:Rh[0],orange:Rh[1],red:Rh[2],teal:Rh[3],green:Rh[4],yellow:Rh[5],purple:Rh[6],pink:Rh[7],brown:Rh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function dvn(e={}){return{signals:[{name:"color",value:ot(e)?{...W_e,...e}:W_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function hvn(e){return{signals:[{name:"fontSize",value:ot(e)?{...q_e,...e}:q_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function pvn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function gHe(e){const t=Ne(e||{}),n={};for(const r of t){const i=e[r];n[r]=LO(i)?WUe(i):Zu(i)}return n}function mvn(e){const t=Ne(e),n={};for(const r of t)n[r]=gHe(e[r]);return n}const gvn=[...AVe,...YVe,...fHe,"background","padding","legend","lineBreak","scale","style","title","view"];function yHe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=Tx({},qt(fvn),n?pvn(n):{},t?dvn(t):{},r?hvn(r):{},s||{});i&&Cx(o,"selection",i,!0);const a=wu(o,gvn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Zu(o[u]));for(const u of AVe)o[u]&&(a[u]=au(o[u]));for(const u of YVe)o[u]&&(a[u]=gHe(o[u]));for(const u of fHe)o[u]&&(a[u]=au(o[u]));return o.legend&&(a.legend=au(o.legend)),o.scale&&(a.scale=au(o.scale)),o.style&&(a.style=mvn(o.style)),o.title&&(a.title=au(o.title)),o.view&&(a.view=au(o.view)),a}const yvn=new Set(["view",...Qyn]),vvn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_vn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...n1n};function bvn(e){e=qt(e);for(const t of vvn)delete e[t];if(e.axis)for(const t in e.axis)LO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Z1n)delete e.legend[t];if(e.mark){for(const t of D_e)delete e.mark[t];e.mark.tooltip&&ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(hHe(e.params)),delete e.params);for(const t of yvn){for(const r of D_e)delete e[t][r];const n=_vn[t];if(n)for(const r of n)delete e[t][r];Evn(e,t)}for(const t of J1n())delete e[t];wvn(e);for(const t in e)ot(e[t])&&Or(e[t])&&delete e[t];return Or(e)?void 0:e}function wvn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=qUe(e.title);Or(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Or(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Or(r)?delete e.title:e.title=r}function Evn(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Or(s)||(e.style[n??t]=s),r||delete e[t]}function x8(e){return"layer"in e}function xvn(e){return"repeat"in e}function Svn(e){return!Ie(e.repeat)&&e.repeat.layer}class _ie{map(t,n){return m8(t)?this.mapFacet(t,n):xvn(t)?this.mapRepeat(t,n):vie(t)?this.mapHConcat(t,n):E8(t)?this.mapVConcat(t,n):yie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(x8(t))return this.mapLayer(t,n);if(xm(t))return this.mapUnit(t,n);throw new Error(Dre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Tvn={zero:1,center:1,normalize:1};function Cvn(e){return e in Tvn}const Avn=new Set([SVe,f8,c8,PL,h8,Qre,Jre,d8,TVe,Xre]),Ivn=new Set([f8,c8,SVe]);function z_(e){return Ve(e)&&AE(e)==="quantitative"&&!e.bin}function G_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ve(o)&&Ve(a))if(z_(o)&&z_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ve(o)&&!!o.aggregate,l=Ve(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(z_(o))return t;if(z_(a))return i}else{if(z_(o))return s&&n==="vertical"?void 0:t;if(z_(a))return s&&n==="horizontal"?void 0:i}}function Ovn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vHe(e,t){var m,g;const n=sh(e)?e:{type:e},r=n.type;if(!Avn.has(r))return null;const i=G_e(t,"x",n)||G_e(t,"theta",n);if(!i)return null;const s=t[i],o=Ve(s)?Je(s,{}):void 0,a=Ovn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ve(y)?Je(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ve(f)?Je(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Ugn.reduce((y,v)=>{if(v!=="tooltip"&&U1(t,v)){const _=t[v];for(const b of nt(_)){const E=oh(b);if(E.aggregate)continue;const w=Je(E,{});(!w||!l.has(w))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?J0(s.stack)?p=s.stack?"zero":null:p=s.stack:Ivn.has(r)&&(p="zero"),!p||!Cvn(p)||uie(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Eu.LINEAR?(s!=null&&s.stack&&Ue(ryn(s.scale.type)),null):Qt(t[Sh(i)])?(s.stack!==void 0&&Ue(nyn(i)),null):(Ve(s)&&s.aggregate&&!e0n.has(s.aggregate)&&Ue(iyn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:uy(r),stackBy:h,offset:p})}function _He(e,t,n){const r=au(e),i=fr("orient",r,n);if(r.orient=Rvn(r.type,t,i),i!==void 0&&i!==r.orient&&Ue(B0n(r.orient,i)),r.type==="bar"&&r.orient){const u=fr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:s1n[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fr("opacity",r,n),o=fr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=kvn(r.type,t)),fr("cursor",r,n)===void 0&&(r.cursor=Pvn(r,t,n)),r}function Pvn(e,t,n){return t.href||e.href||fr("href",e,n)?"pointer":e.cursor}function kvn(e,t){if($n([h8,Xre,Qre,Jre],e)&&!uie(t))return .7}function $vn(e,t,{graticule:n}){if(n)return!1;const r=nm("filled",e,t),i=e.type;return Ki(r,i!==h8&&i!==d8&&i!==PL)}function Rvn(e,t,n){switch(e){case h8:case Qre:case Jre:case TVe:case Kyn:case Yyn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case f8:if(Ve(r)&&(fo(r.bin)||Ve(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ve(i)&&(fo(i.bin)||Ve(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ve(r)&&r.type===Cv&&!qr(r.bin)||$L(r))&&Ve(i)&&fo(i.bin)?"horizontal":"vertical";if(!o)return(Ve(i)&&i.type===Cv&&!qr(i.bin)||$L(i))&&Ve(r)&&fo(r.bin)?"vertical":"horizontal"}case PL:if(s&&!(Ve(r)&&fo(r.bin))&&o&&!(Ve(i)&&fo(i.bin)))return;case c8:if(o)return Ve(i)&&fo(i.bin)?"horizontal":"vertical";if(s)return Ve(r)&&fo(r.bin)?"vertical":"horizontal";if(e===PL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case d8:case Xre:{const a=j_e(r),u=j_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Ba(r)&&r.type===TE,c=Ba(i)&&i.type===TE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Nvn(e){const{point:t,line:n,...r}=e;return Ne(r).length>1?r:r.type}function Dvn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:wu(e[t],["point","line"])});return e}function W7(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ot(t.point)?t.point:{}:void 0}function Y_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Mvn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(xm(t)){const{mark:r,encoding:i}=t,s=sh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!W7(s,n[s.type],i);case"area":return!!W7(s,n[s.type],i)||!!Y_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=w8(l,i),d=sh(a)?a:{type:a},h=W7(d,i[d.type],f),p=d.type==="area"&&Y_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Nvn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:wu(f,["shape"])}],g=vHe(_He(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=wu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...wE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...wE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Dvn(i)})}}function Lvn(e,t){return t?NO(e)?wHe(e,t):bHe(e,t):e}function G7(e,t){return t?wHe(e,t):e}function FW(e,t,n){const r=t[e];if(_1n(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ue(b0n(r.repeat));return}return t}function bHe(e,t){if(e=FW("field",e,t),e!==void 0){if(e===null)return null;if(iie(e)&&jd(e.sort)){const n=FW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function K_e(e,t){if(Ve(e))return bHe(e,t);{const n=FW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function X_e(e,t){if(Qt(e)){const n=K_e(e,t);if(n)return n;if(g8(e))return{condition:e.condition}}else{if(DO(e)){const n=K_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function wHe(e,t){const n={};for(const r in e)if(Nt(e,r)){const i=e[r];if(Ie(i))n[r]=i.map(s=>X_e(s,t)).filter(s=>s);else{const s=X_e(i,t);s!==void 0&&(n[r]=s)}}return n}class Fvn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(xm(t)){const{encoding:n,mark:r}=t;if(r==="line"||sh(r)&&r.type==="line")for(const i of jgn){const s=f_(i),o=n[s];if(n[i]&&(Ve(o)&&!fo(o.bin)||Ch(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ue(j0n(!!i.x2,!!i.y2)),r({...t,mark:ot(s)?{...s,type:"rule"}:"rule"},n)}}class jvn extends _ie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[z1n,H1n,Q1n,new Mvn,new Fvn]}map(t,n){if(xm(t)){const r=U1(t.encoding,Tp),i=U1(t.encoding,Cp),s=U1(t.encoding,e8);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=G7(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Svn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${yi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ie(r)&&t.columns&&(t=wu(t,["columns"]),Ue(O_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ie(r)&&r.row||[u?u.row:null],f=!Ie(r)&&r.column||[u?u.column:null],d=Ie(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ie(r)?`${yi(p)}`:(r.row?`row_${yi(m)}`:"")+(r.column?`column_${yi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(wu(_,["data"]))}const h=Ie(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return NO(r)&&t.columns&&(t=wu(t,["columns"]),Ue(O_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=J_e({parentProjection:o,projection:i}),l=Q_e({parentEncoding:s,encoding:G7(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=G7(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ue(L0n([...r?[Tp]:[],...i?[Cp]:[]]));const o={},a={};for(const u of[Tp,Cp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Lvn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Q_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:J_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Q_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ne(e),...Ne(t)]);for(const s of i){const o=t[s],a=e[s];if(Qt(o)){const u={...a,...o};r[s]=u}else DO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Ef(a)||It(a)||Qt(a)||Ie(a))&&(r[s]=a)}}else r=t;return!r||Or(r)?void 0:r}function J_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ue(C0n({parentProjection:t,projection:n})),n??t}function bie(e){return"filter"in e}function Bvn(e){return(e==null?void 0:e.stop)!==void 0}function EHe(e){return"lookup"in e}function zvn(e){return"data"in e}function Uvn(e){return"param"in e}function Vvn(e){return"pivot"in e}function Hvn(e){return"density"in e}function qvn(e){return"quantile"in e}function Wvn(e){return"regression"in e}function Gvn(e){return"loess"in e}function Yvn(e){return"sample"in e}function Kvn(e){return"window"in e}function Xvn(e){return"joinaggregate"in e}function Qvn(e){return"flatten"in e}function Jvn(e){return"calculate"in e}function xHe(e){return"bin"in e}function Zvn(e){return"impute"in e}function e_n(e){return"timeUnit"in e}function t_n(e){return"aggregate"in e}function n_n(e){return"stack"in e}function r_n(e){return"fold"in e}function i_n(e){return"extent"in e&&!("density"in e)}function s_n(e){return e.map(t=>bie(t)?{filter:cw(t.filter,$yn)}:t)}class o_n extends _ie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Z_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Z_e(t,n),t.encoding){const r={};for(const[i,s]of A0(t.encoding))r[i]=SHe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:A0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of So(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Z_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(bie(s))return{filter:jW(s,t)};if(xHe(s)&&d_(s.bin))return{...s,bin:THe(s.bin)};if(EHe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function SHe(e,t){var r,i;const n=qt(e);if(Ve(n)&&d_(n.bin)&&(n.bin=THe(n.bin)),m_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(g8(n))if(Ie(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:jW(s,t)}});else{const{selection:s,param:o,test:a,...u}=SHe(n.condition,t);n.condition=o?n.condition:{...u,test:jW(n.condition,t)}}return n}function THe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function jW(e,t){const n=r=>cw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):cw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class BW extends _ie{map(t,n){const r=n.selections??[];if(t.params&&!xm(t)){const i=[];for(const s of t.params)gie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(rt(a)&&(a===t.name||i.includes(a))||Ie(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=BW.prototype[e];BW.prototype[e]=function(n,r){return t.call(this,n,a_n(n,r))}}function a_n(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function CHe(e,t){t===void 0&&(t=yHe(e.config));const n=f_n(e,t),{width:r,height:i}=e,s=d_n(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const u_n=new jvn,l_n=new o_n,c_n=new BW;function f_n(e,t={}){const n={config:t};return c_n.map(u_n.map(l_n.map(e,n),n),n)}function ebe(e){return rt(e)?{type:e}:e??{}}function d_n(e,t,n){let{width:r,height:i}=t;const s=xm(e)||x8(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ue(T_e("width")),r=void 0),i=="container"&&(Ue(T_e("height")),i=void 0));const a={type:"pad",...o,...n?ebe(n.autosize):{},...ebe(e.autosize)};if(a.type==="fit"&&!s&&(Ue(l0n),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ue(C_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ue(C_e("height")),!sl(a,{type:"pad"}))return a}function h_n(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function p_n(e){return e?`fit-${s8(e)}`:"fit"}const m_n=["background","padding"];function tbe(e,t){const n={};for(const r of m_n)e&&e[r]!==void 0&&(n[r]=Zu(e[r]));return t&&(n.params=e.params),n}class Sm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Sm(qt(this.explicit),qt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ki(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ne(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function ed(e){return{explicit:!0,value:e}}function Hu(e){return{explicit:!1,value:e}}function AHe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:S8(t,n,r,i)}}function S8(e,t,n,r){return e.explicit&&t.explicit&&Ue(K0n(n,r,e.value,t.value)),e}function P0(e,t,n,r,i=S8){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:sl(e.value,t.value)?e:i(e,t,n,r)}class g_n extends Sm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function PE(e){return"url"in e}function FA(e){return"values"in e}function IHe(e){return"name"in e&&!PE(e)&&!FA(e)&&!Yg(e)}function Yg(e){return e&&(OHe(e)||PHe(e)||wie(e))}function OHe(e){return"sequence"in e}function PHe(e){return"sphere"in e}function wie(e){return"graticule"in e}var zr;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(zr||(zr={}));function kHe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=dc(i.field),i}function Ov(e,t=!0,n=ca){if(Ie(e)){const r=e.map(i=>Ov(i,t,n));return t?`[${r.join(", ")}]`:r}else if(h_(e))return n(t?Tv(e):byn(e));return t?n(Pr(e)):e}function y_n(e,t){for(const n of So(e.component.selection??{})){const r=n.name;let i=`${r}${$0}, ${n.resolve==="global"?"true":`{unit: ${V1(e)}}`}`;for(const s of I8)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+K_n,on:[{events:{signal:n.name+$0},update:`modify(${Xe(n.name+Pv)}, ${i})`}]})}return Eie(t)}function v_n(e,t){if(e.component.selection&&Ne(e.component.selection).length){const n=Xe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:ey("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Eie(t)}function __n(e,t){let n=!1;for(const r of So(e.component.selection??{})){const i=r.name,s=Xe(i+Pv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${KHe}(${s}, ${Xe(a)}${u}`})}n=!0;for(const a of I8)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Eie(t)}function b_n(e,t){const n=[...t],r=V1(e,{escape:!1});for(const i of So(e.component.selection??{})){const s={name:i.name+Pv};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:xf}}]),i.init){const a=i.project.items.map(kHe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[xf]:Ov(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Ov(u,!1)}))}n.filter(a=>a.name===i.name+Pv).length||n.push(s)}return n}function $He(e,t){for(const n of So(e.component.selection??{}))for(const r of I8)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function w_n(e,t){for(const n of e.children)Li(n)&&(t=$He(n,t));return t}function E_n(e,t,n,r){const i=eqe(e,t.param,t);return{signal:wl(n.get("type"))&&Ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Eie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Sr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ue(x0n);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ra extends Sr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${IUe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Y7(e){return e.as!==void 0}function nbe(e){return`${e}_end`}class Bd extends Sr{clone(){return new Bd(null,qt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(p_(u)){if(Li(n)){const{mark:c,markDef:f,config:d}=n,h=O0({fieldDef:s,markDef:f,config:d});(LA(c)||h)&&(l={timeUnit:Ks(u),field:a})}}else l={as:Je(s,{forAs:!0}),field:a,timeUnit:u};if(Li(n)){const{mark:c,markDef:f,config:d}=n,h=O0({fieldDef:s,markDef:f,config:d});LA(c)&&Xi(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[kn(l)]=l)}return i},{});return Or(r)?null:new Bd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ks(r),o={...i,timeUnit:s};return new Bd(t,{[kn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of A0(this.timeUnits)){const s=Y7(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(So(this.timeUnits).map(t=>Y7(t)?t.as:nbe(t.field)))}dependentFields(){return new Set(So(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${kn(this.timeUnits)}`}assemble(){const t=[];for(const n of So(this.timeUnits)){const{rectBandPosition:r}=n,i=Ks(n.timeUnit);if(Y7(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:dc(s),type:"timeunit",...a?{units:l8(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...rbe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=RHe({timeUnit:i,field:o}),u=nbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...rbe([o,u],r,i))}}return t}}const T8="offsetted_rect_start",C8="offsetted_rect_end";function RHe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=cVe(r),{part:o,step:a}=pVe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function rbe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:ibe([RHe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${T8}`},{type:"formula",expr:ibe([i,s],n+.5),as:`${e}_${C8}`}]}return[]}function ibe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const FO="_tuple_fields";class x_n{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const S_n={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new x_n),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=yi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=yi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?nt(n.value):null;let{fields:d,encodings:h}=ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ot(p))for(const m of Ne(p))Fgn(m)?(h||(h=[])).push(m):l==="interval"?(Ue(_0n),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ue(c0n(p,m.aggregate));continue}else if(!g){Ue(I_e(p));continue}if(m.timeUnit&&!p_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[kn(y)]=y}if(!s[g]){const y=l==="interval"&&Em(p)&&wl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===xf,NUe(p)?(v.geoChannel=p,v.channel=RUe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ue(I_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===xf}f&&(t.init=f.map(p=>i.items.map(m=>ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Or(o)||(i.timeUnit=new Bd(null,o))},signals:(e,t,n)=>{const r=t.name+FO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(kHe)})}},Ap={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Em(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ue(p0n),!s||!wl(o)){Ue(h0n);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||sbe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(KHe)>=0)i.update=`{${r.map(o=>`${Xe(dc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Xe(dc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!sbe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function zW(e,t){return`domain(${Xe(e.scaleName(t))})`}function sbe(e){return e.parent&&Vx(e.parent)&&!e.parent.parent}const hw="_brush",NHe="_scale_trigger",QS="geo_interval_init_tick",DHe="_init",T_n="_center",C_n={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ot(n.select)?n.select:{}};i.fields=[xf],i.encodings||(i.encodings=n.value?Ne(n.value):[Mf,Df]),n.select={type:"interval",...i}}if(t.translate&&!Ap.defined(t)){const i=`!event.item || event.item.mark.name !== ${Xe(t.name+hw)}`;for(const s of t.events){if(!s.between){Ue(`${s} is not an ordered event stream for interval selections.`);continue}const o=nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+$0,s=So(t.project.hasChannel).filter(a=>a.channel===vi||a.channel===to),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(A_n(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Xe(e.projectionName()),u=e.projectionName()+T_n,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+DHe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(w=>w.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Xe(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${V1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,b=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...o?[{signal:QS}]:[]],update:_}]})}else{if(!Ap.defined(t)){const l=r+NHe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Xe(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=wl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${V1(e)}, fields: ${r+FO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Ov(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Li(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===QS).length||n.unshift({name:QS,value:null,on:[{events:"timer{1}",update:`${QS} === null ? {} : ${QS}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Xe(t.name+Pv)})`;if(Ap.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ne(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${V1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ne(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+hw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+hw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function A_n(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Xe(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===vi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Ap.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Ov(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+NHe},update:wl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Ov(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===vi?0:1,h=t.name+DHe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const I_n={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+FO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=So(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+hw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${V1(e)}, `;if(t.project.hasSelectionId)l+=`${xf}: ${o}[${Xe(xf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Xe(e.vgField(d.channel,{}))}], ${o}[${Xe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Xe(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+$0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function jx(e,t,n,r){const i=g8(t)&&t.condition,s=r(t);if(i){const a=nt(i).map(u=>{const l=r(u);if(v1n(u)){const{param:c,empty:f}=u;return{test:ZHe(e,{param:c,empty:f}),...l}}else return{test:zL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function xie(e,t="text"){const n=e.encoding[t];return jx(e,n,t,r=>A8(r,e.config))}function A8(e,t,n="datum"){if(e){if(Ef(e))return ti(e.value);if(Qt(e)){const{format:r,formatType:i}=NL(e);return nie({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function MHe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ie(o))return{tooltip:obe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return jx(e,o,"tooltip",u=>{const l=A8(u,i,a);if(l)return l;if(u===null)return;let c=fr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),rt(c))return{value:c};if(ot(c))return It(c)?c:c.content==="encoding"?obe(n,s,i,t):{signal:a}})}}function LHe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=f_(f),h=Ba(c)?c:{...c,type:e[d].type},p=h.title||oie(h,i),m=nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Xi(f)){const y=f==="x"?"x2":"y2",v=oh(e[y]);if(fo(h.bin)&&v){const _=Je(h,{expr:o}),b=Je(v,{expr:o}),{format:E,formatType:w}=NL(h);g=RO(_,b,E,w,i),s[y]=!0}}if((Xi(f)||f===Tc||f===Nf)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=NL(h);g=nie({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=A8(h,i,o).signal),a.push({channel:f,key:m,value:g})}lie(e,(c,f)=>{Ve(c)?u(c,f):y8(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function obe(e,t,n,{reactiveGeom:r}={}){const i=LHe(e,t,n,{reactiveGeom:r}),s=A0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function O_n(e){const{markDef:t,config:n}=e,r=fr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...P_n(e),...k_n(e)}}function P_n(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in o0n?{}:{ariaRoleDescription:{value:t}}}function k_n(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return jx(e,s,"description",u=>A8(u,e.config));const o=fr("description",n,r);if(o!=null)return{description:ti(o)};if(r.aria===!1)return{};const a=LHe(t,i,r);if(!Or(a))return{description:{signal:A0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Us(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=fr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ti(u)));const l=i[e];return jx(t,l,o??e,c=>tie({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function FHe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fr("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ti(u)}:{},...l?{stroke:ti(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ue(tVe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Us("color",e,{vgChannel:c,defaultValue:o?u:l}),...Us("fill",e,{defaultValue:r.fill?u:void 0}),...Us("stroke",e,{defaultValue:r.stroke?l:void 0})}}function $_n(e){const{encoding:t,mark:n}=e,r=t.order;return!uy(n)&&Ef(r)?jx(e,r,"zindex",i=>ti(i.value)):{}}function kE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:tie({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ti(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Qo(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Sh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=kE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Sie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Xi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:R_n({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function R_n(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qt(n)&&i&&t===i.fieldChannel){if(Ve(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return kL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return z1(n,r,{suffix:"end"},{offset:s})}return Zre(e)}function Sie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=f_(n),u=I0(n),l=fr(n,s,o,{vgChannel:u});if(l!==void 0)return G2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!$n([Eu.LOG,Eu.TIME,Eu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[$u(n)],mult:.5}}}}const N_n={left:"x",center:"xc",right:"x2"},D_n={top:"y",middle:"yc",bottom:"y2"};function jHe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return I0(e);const i=e==="x"?"align":"baseline",s=fr(i,t,n);let o;return It(s)?(Ue(F0n(i)),o=void 0):o=s,e==="x"?N_n[o||(r==="top"?"left":"center")]:D_n[o||r]}function jL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?BHe(e,t,{defaultPos:n,defaultPos2:r}):Qo(e,t,{defaultPos:n})}function BHe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Sh(e),a=$u(e),u=M_n(t,r,o),l=u[a]?jHe(e,i,s):I0(e);return{...Qo(e,t,{defaultPos:n,vgChannel:l}),...u}}function M_n(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=f_(n),l=$u(n),c=I0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?kE({channel:n,markDef:s,encoding:r,model:e}):kE({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=$u(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=L_n({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:$k(n,s)||$k(n,{[n]:IL(n,s,a.style),[l]:IL(l,s,a.style)})||$k(n,a[i])||$k(n,a.mark)||{[c]:Sie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function L_n({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?z1(t,s,{suffix:"start"},{offset:u}):Zre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function $k(e,t){const n=$u(e),r=I0(e);if(t[r]!==void 0)return{[r]:G2(e,t[r])};if(t[e]!==void 0)return{[r]:G2(e,t[e])};if(t[n]){const i=t[n];if(Av(i))Ue($0n(n));else return{[n]:G2(e,i)}}}function k0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Sh(t),a=$u(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fr("size",i,n,{vgChannel:a}),p=FUe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ve(u)&&(qr(u.bin)||fo(u.bin)||u.timeUnit&&!l)&&!(h&&!Av(h))&&!r[p]&&!Qs(f)?B_n({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qt(u)&&Qs(f)||m)&&!l?j_n(u,t,e):BHe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function F_n(e,t,n,r,i,s,o){if(Av(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=nm("minBandSize",{type:o},r);return{signal:c?`max(${tf(c)}, ${l})`:l}}else i.band!==1&&(Ue(U0n(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(It(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(ay(u)&&Jn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Ki(u,o==="bar"?l:c);if(It(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Jn(f))return{signal:`${1-f} * ${e}`}}return{value:LL(r.view,e)-2}}function j_n(e,t,n){var P,A;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=$u(t),f=Sh(t),d=FUe(t),h=n.scaleName(d),p=n.getScaleComponent(Pre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Us("size",n,{vgChannel:c,defaultRef:ti(r.size)}):Ue(W0n(r.type)));const y=!!g,v=MVe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(P=l||p)==null?void 0:P.get("type"),useVlSizeChannel:m});g=g||{[c]:F_n(c,h||u,p||l,s,v,!!e,r.type)};const _=((A=l||p)==null?void 0:A.get("type"))==="band"&&Av(v)&&!y?"top":"middle",b=jHe(t,r,s,_),E=b==="xc"||b==="yc",{offset:w,offsetType:x}=kE({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),S=Zre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:w,defaultRef:Sie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?x==="encoding"?0:.5:It(v)?{signal:`(1-${v})/2`}:Av(v)?(1-v.band)/2:0});if(c)return{[b]:S,...g};{const O=I0(f),z=g[c],M=w?{...z,offset:w}:z;return{[b]:S,[O]:Ie(S)?[S[0],{...S[1],offset:M}]:{...S,offset:M}}}}function abe(e,t,n,r,i,s,o){if($Ue(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(It(n)||It(i)||It(r)||s){const l=tf(n),c=tf(i),f=tf(r),d=tf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function B_n({fieldDef:e,fieldDef2:t,channel:n,model:r}){var A;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=MVe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(A=r.component.axes[n])==null?void 0:A[0],h=(d==null?void 0:d.get("translate"))??.5,p=Xi(n)?fr("binSpacing",s,i)??0:0,m=Sh(n),g=I0(n),y=I0(m),v=nm("minBandSize",s,i),{offset:_}=kE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:b}=kE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=h1n({fieldDef:e,scaleName:u}),w=abe(n,p,c,h,_,v,E),x=abe(m,p,c,h,b??_,v,E),S=It(f)?{signal:`(1-${f.signal})/2`}:Av(f)?(1-f.band)/2:.5,P=O0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(qr(e.bin)||e.timeUnit){const O=e.timeUnit&&P!==.5;return{[y]:ube({fieldDef:e,scaleName:u,bandPosition:S,offset:x,useRectOffsetField:O}),[g]:ube({fieldDef:e,scaleName:u,bandPosition:It(S)?{signal:`1-${S.signal}`}:1-S,offset:w,useRectOffsetField:O})}}else if(fo(e.bin)){const O=z1(e,u,{},{offset:x});if(Ve(t))return{[y]:O,[g]:z1(t,u,{},{offset:w})};if(d_(e.bin)&&e.bin.step)return{[y]:O,[g]:{signal:`scale("${u}", ${Je(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}Ue(iVe(m))}function ube({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return kL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:T8,endSuffix:C8}:{}})}const z_n=new Set(["aria","width","height"]);function Cc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?FHe(e):{};return{...U_n(e.markDef,t),...lbe(e,"fill",n),...lbe(e,"stroke",r),...Us("opacity",e),...Us("fillOpacity",e),...Us("strokeOpacity",e),...Us("strokeWidth",e),...Us("strokeDash",e),...$_n(e),...MHe(e),...xie(e,"href"),...O_n(e)}}function lbe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(fr("invalid",s,r)==="hide"&&n&&!uy(i)){const a=V_n(e,{invalid:!0,channels:o8});if(a)return{[t]:[{test:a,value:null},...nt(n)]}}return n?{[t]:n}:{}}function U_n(e,t){return s0n.reduce((n,r)=>(!z_n.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ti(e[r])),n),{})}function V_n(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&wl(u)&&(s[l]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>eie(o,t)).join(` ${s} `)}}function Tie(e){const{config:t,markDef:n}=e;if(fr("invalid",n,t)){const i=H_n(e,{channels:Th});if(i)return{defined:{signal:i}}}return{}}function H_n(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&wl(l)&&(s[c]=!0)}return s},{}),i=Ne(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>eie(o,t)).join(` ${s} `)}}function cbe(e,t){if(t!==void 0)return{[e]:ti(t)}}const K7="voronoi",zHe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(K7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(uy(s))return Ue(f0n(s)),n;const o={name:e.getName(K7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...MHe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(K7)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},UHe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!mie(e.bind),parse:(e,t,n)=>XHe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=zHe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=yi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Ov(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Xe(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+$0)[0],o=r+FO,a=i.items.map(l=>yi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},BL="_toggle",VHe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+BL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+$0,r=t.name+BL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${V1(e)}}, `)+`${r} ? ${n} : null`}},q_n={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=rt(t.clear)?ey(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(UHe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===yi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+$0);r(i,"null"),VHe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+BL),r(i,"false"))}return n}},HHe={defined:e=>{const t=e.resolve==="global"&&e.bind&&mie(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==xf;return t&&!n&&Ue(m0n),t&&n},parse:(e,t,n)=>{const r=qt(n);if(r.select=rt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},XHe(t,r),ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=q7(t.bind)?t.bind.legend:"click",s=rt(i)?ey(i,"view"):nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=q7(t.bind)&&t.bind.legend,s=o=>a=>{const u=qt(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${yi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+$0),o=r+FO,a=i.items.filter(d=>d.hasLegend).map(d=>yi(`${r}_${yi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+BL),f=q7(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function W_n(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of So(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&HHe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const qHe="_translate_anchor",WHe="_translate_delta",G_n={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ap.defined(t),s=r+qHe,{x:o,y:a}=t.project.hasChannel;let u=ey(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+hw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?zW(e,vi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?zW(e,to):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+WHe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&fbe(e,t,o,"width",n),a!==void 0&&fbe(e,t,a,"height",n),n}};function fbe(e,t,n,r,i){const s=t.name,o=s+qHe,a=s+WHe,u=n.channel,l=Ap.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===vi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?b:`clampRange(${b}, 0, ${f})`})}const GHe="_zoom_anchor",YHe="_zoom_delta",Y_n={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ap.defined(t),s=r+YHe,{x:o,y:a}=t.project.hasChannel,u=Xe(e.scaleName(vi)),l=Xe(e.scaleName(to));let c=ey(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+hw,f))),n.push({name:r+GHe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&dbe(e,t,o,"width",n),a!==void 0&&dbe(e,t,a,"height",n),n}};function dbe(e,t,n,r,i){const s=t.name,o=n.channel,a=Ap.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?zW(e,o):u.name,h=s+YHe,p=`${s}${GHe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Pv="_store",$0="_tuple",K_n="_modify",KHe="vlSelectionResolve",I8=[I_n,C_n,S_n,VHe,UHe,Ap,HHe,q_n,G_n,Y_n,zHe];function X_n(e){let t=e.parent;for(;t&&!cl(t);)t=t.parent;return t}function V1(e,{escape:t}={escape:!0}){let n=t?Xe(e.name):e.name;const r=X_n(e);if(r){const{facet:i}=r;for(const s of Jl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Xe(r.vgField(s))}])`)}return n}function Cie(e){return So(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function XHe(e,t){(rt(t.select)||!t.select.on)&&delete e.events,(rt(t.select)||!t.select.clear)&&delete e.clear,(rt(t.select)||!t.select.toggle)&&delete e.toggle}function UW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...UW(e.object)),t.push(...UW(e.property))),t)}function QHe(e){return e.object.type==="MemberExpression"?QHe(e.object):e.object.name==="datum"}function JHe(e){const t=qne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&QHe(r)&&n.add(UW(r).slice(1).join("."))}),n}class Bx extends Sr{clone(){return new Bx(null,this.model,qt(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=zL(this.model,this.filter,this),this._dependentFields=JHe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Q_n(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=yi(i.name),o=i.select,a=rt(o)?o:o.type,u=ot(o)?qt(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=qt(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:rt(u.on)?ey(u.on,"scope"):nt(qt(u.on))},f=qt(i);for(const d of I8)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function ZHe(e,t,n,r="datum"){const i=rt(t)?t:t.param,s=yi(i),o=Xe(s+Pv);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Xe(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function eqe(e,t,n){const r=yi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ue(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Xe(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ue((a.length?"Multiple ":"No ")+`matching ${Xe(i)} encoding found for selection ${Xe(n.param)}. Using "field": ${Xe(s)}.`)):s=a[0].field}return`${o.name}[${Xe(dc(s))}]`}function J_n(e,t){for(const[n,r]of A0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ra(new Bx(t,e,{param:n}),i,zr.Lookup,e.component.data.outputNodeRefCounts)}}function zL(e,t,n){return W2(t,r=>rt(r)?r:Oyn(r)?ZHe(e,r,n):gVe(r))}function Z_n(e,t){if(e)return Ie(e)&&!Km(e)?e.map(n=>oie(n,t)).join(", "):e}function X7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function qT(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=$1n[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(LO(m)){const{condition:g,...y}=m,v=nt(g),_=B_e[h];if(_){const{vgProp:b,part:E}=_,w=[...v.map(x=>{const{test:S,...P}=x;return{test:zL(null,S),...P}}),y];X7(c,E,b,w),delete c[h]}else if(_===null){const b={signal:v.map(E=>{const{test:w,...x}=E;return`${zL(null,w)} ? ${S_e(x)} : `}).join("")+S_e(y)};c[h]=b}}else if(It(m)){const g=B_e[h];if(g){const{vgProp:y,part:v}=g;X7(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Or(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ki(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&It(c.encode.labels.update.text)&&(p=xv(a,"datum.label",c.encode.labels.update.text.signal)),X7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of WVe)e.hasAxisPart(p)||delete c.encode[p];Or(c.encode)&&delete c.encode}const h=Z_n(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ki(l,0)}}}}function tqe(e){const{axes:t}=e.component,n=[];for(const r of Th)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function ebn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>qT(i,"grid",t)),...r.map(i=>qT(i,"grid",t)),...n.map(i=>qT(i,"main",t)),...r.map(i=>qT(i,"main",t))].filter(i=>i)}function hbe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ne(o),...Ne(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${tf(o[c])} : ${tf(a[c])}`};return l}return t[i]})])}function tbn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:bVe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=It(n)?"axisOrient":`axis${AO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:hbe(a,r,e,n),vgAxisConfig:hbe(u,r,e,n),axisConfigStyle:nbn([...u,...a],r)}}function nbn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function VW(e,t,n,r={}){var s;const i=YUe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const pbe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??rbn(n,e),gridScale:({model:e,channel:t})=>ibn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||rqe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||nqe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??obn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??abn(t.type,n,Ve(t)&&!!t.timeUnit,Ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??lbn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:cbn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=iqe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return XUe(i?[F_e(i)]:[],Ve(o)?[F_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>fbn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??dbn(n,t)};function rbn(e,t){return!Qs(e)&&Ve(t)&&!qr(t==null?void 0:t.bin)&&!fo(t==null?void 0:t.bin)}function ibn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function sbn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return It(s)?s:MA(s);{const{configValue:o}=VW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?MA(o):n===vi&&$n([Kre,Yre],e.type)&&!(Ve(e)&&e.timeUnit)?270:void 0}}function HW(e){return`(((${e.signal} % 360) + 360) % 360)`}function nqe(e,t,n,r){if(e!==void 0)if(n==="x"){if(It(e)){const i=HW(e),s=It(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(It(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(It(e)){const i=HW(e),s=It(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(It(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function rqe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(It(e)){const o=HW(e),a=It(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(It(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function obn(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function abn(e,t,n,r){if(n&&!ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function ubn(e){return e==="x"?"bottom":"left"}function lbn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Qs(t)&&t!=="log"){if(Ve(e)){if(qr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=Ks(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function cbn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ve(t)){const{timeUnit:n}=t;if(n){const r=hVe(n);if(r)return{signal:r}}}}function iqe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return QUe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function fbn(e,t){const n=e.values;if(Ie(n))return qVe(t,n);if(It(n))return n}function dbn(e,t){return e==="rect"&&RL(t)?1:0}class $E extends Sr{clone(){return new $E(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=JHe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(m_(r)&&DVe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${gVe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new $E(t,{calculate:u,as:RE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${kn(this.transform)}`}}function RE(e,t,n){return Je(e,{prefix:t,suffix:"sort_index",...n})}function O8(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function NE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ki((t||{})[e],i[e],n.header[e])}function P8(e,t,n,r){const i={};for(const s of e){const o=NE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Aie=["row","column"],Iie=["header","footer"];function hbn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=P8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=O8(t,a),l=MA(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...oqe(l,u),...sqe(u,l,s),...aqe(r,i,t,evn,lHe)}}}function sqe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=rqe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function oqe(e,t){const n=nqe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function pbn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Iie)if(n[i])for(const s of n[i]){const o=gbn(e,t,i,n,s);o!=null&&r.push(o)}return r}function mbn(e,t){const{sort:n}=e;return jd(n)?{field:Je(n,{expr:"datum"}),order:n.order??"ascending"}:Ie(n)?{field:RE(e,t,{expr:"datum"}),order:"ascending"}:{field:Je(e,{expr:"datum"}),order:n??"ascending"}}function qW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=P8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=nie({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=O8(t,a);return{text:{signal:u?xv(xv(u,"datum.label",l),"datum.value",Je(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...oqe(s,c),...sqe(c,s,o),...aqe(n,e,t,tvn,cHe)}}function gbn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=P8(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=qW(o,t,a))}const u=cl(e)&&!NO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:mbn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const ybn={column:{start:0,end:1},row:{start:1,end:0}};function vbn(e,t){return ybn[t][e]}function _bn(e,t){const n={};for(const r of Jl){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=P8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=O8(r,o),u=vbn(s,a);u!==void 0&&(n[a]=u)}}return Or(n)?void 0:n}function aqe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=NE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Oie(e){return[...Rk(e,"width"),...Rk(e,"height"),...Rk(e,"childWidth"),...Rk(e,"childHeight")]}function Rk(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Qs(o)&&ay(a)){const u=e.scaleName(n);return cl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[mbe(u,a)]:[mbe(u,a),{name:i,update:uqe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=LW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function mbe(e,t){const n=`${e}_step`;return It(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function uqe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ki(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${tf(o)}, ${tf(s)}) * ${e}_step`}function lqe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function cqe(e,t){return Ne(e).reduce((n,r)=>{const i=e[r];return{...n,...jx(t,i,r,s=>ti(s.value))}},{})}function fqe(e,t){if(cl(t))return e==="theta"?"independent":"shared";if(Vx(t))return"shared";if(Mie(t))return Xi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Pie(e,t){const n=e.scale[t],r=Xi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ue(Q0n(t)),"independent"):e[r][t]||"shared"}const bbn={...ivn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},dqe=Ne(bbn);class wbn extends Sm{}const gbe={symbols:Ebn,gradient:xbn,labels:Sbn,entries:Tbn};function Ebn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...u0n({},n,e1n),...FHe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?hqe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Pu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ti(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ti(m??1));else if(Ie(f.fill)){const g=WW(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ti(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Pu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ie(f.stroke)){const g=Ki(WW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==wm){const g=Ve(t)&&mqe(n,i,t);g?f.opacity=[{test:g,...ti(m??1)},ti(u.legend.unselectedOpacity)]:m&&(f.opacity=ti(m))}return f={...f,...e},Or(f)?void 0:f}function xbn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?hqe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ti(l)),a={...a,...e},Or(a)?void 0:a}function Sbn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ve(t)?mqe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Iv(c)?f=rf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=rf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ve(t)&&t.timeUnit===void 0&&(f=rf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Or(d)?void 0:d}function Tbn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function hqe(e){return pqe(e,(t,n)=>Math.max(t,n.value))}function WW(e){return pqe(e,(t,n)=>Ki(t,n.value))}function pqe(e,t){if(b1n(e))return nt(e.condition).reduce(t,e.value);if(Ef(e))return e.value}function mqe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Xe(n.field);return r.map(s=>`(!length(data(${Xe(yi(s)+Pv)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const ybe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return kVe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return $Ve(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??$bn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Rbn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Abn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>dw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(fw(n)&&nf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Cbn(t,e)};function Cbn(e,t){const n=e.values;if(Ie(n))return qVe(t,n);if(It(n))return n}function Abn(e,t,n,r){if(t!=="shape"){const i=WW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Ibn(e){const{legend:t}=e;return Ki(t.type,Obn(e))}function Obn({channel:e,timeUnit:t,scaleType:n}){if(fw(e)){if($n(["quarter","month","day"],t))return"symbol";if(nf(n))return"gradient"}return"symbol"}function Pbn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??kbn(n,t)}function kbn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function $bn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(nf(i))return n==="horizontal"?r==="top"||r==="bottom"?vbe(t,"width",o,s):o:vbe(t,"height",u,a)}function vbe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Rbn(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function gqe(e){const t=Li(e)?Nbn(e):Fbn(e);return e.component.legends=t,t}function Nbn(e){const{encoding:t}=e,n={};for(const r of[Pu,...dHe]){const i=xs(t[r]);!i||!e.getScaleComponent(r)||r===ku&&Ve(i)&&i.type===Fx||(n[r]=Lbn(e,r))}return n}function Dbn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Mbn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Lbn(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new wbn({},Dbn(e,t));W_n(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=xs(i[t]),f=Ve(c)?(b=Ks(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||s.legend.orient||"right",h=Ibn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Pbn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of dqe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const w=E in ybe?ybe[E](m):n[E];if(w!==void 0){const x=Mbn(w,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,w,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const w=cqe(g[E]??{},e),x=E in gbe?gbe[E](w,_):w;x!==void 0&&!Or(x)&&(v[E]={...y!=null&&y.length&&Ve(c)?{name:`${yi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Or(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Fbn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){gqe(r);for(const i of Ne(r.component.legends))n.legend[i]=Pie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=yqe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ne(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function yqe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of dqe){const c=P0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return jbn(f,d);case"title":return JUe(f,d);case"type":return i=!0,Hu("symbol")}return S8(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&AL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&AL(e.explicit,["encode","gradient"])),e}function jbn(e,t){return t.value==="circle"?t:e}function Bbn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function vqe(e){const t=e.component.legends,n={};for(const i of Ne(t)){const s=e.getScaleComponent(i),o=Pr(s.get("domains"));if(n[o])for(const a of n[o])yqe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return So(n).flat().map(i=>zbn(i,e.config)).filter(i=>i!==void 0)}function zbn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of dHe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&It(s.encode.labels.update.text)&&(l=xv(r,"datum.label",s.encode.labels.update.text.signal)),Bbn(s,"labels","text",{signal:l})}return s}}function Ubn(e){return Vx(e)||Mie(e)?Vbn(e):_qe(e)}function Vbn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),_qe(e))}function _qe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=It(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Hbn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class bqe extends Sm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function wqe(e){e.component.projection=Li(e)?qbn(e):Ybn(e)}function qbn(e){if(e.hasProjection){const t=au(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Wbn(e):void 0,s=new bqe(e.projectionName(!0),{...au(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Wbn(e){const t=[],{encoding:n}=e;for(const r of[[Mf,Df],[hc,Lf]])(xs(n[r[0]])||xs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ku)&&e.typedFieldDef(ku).type===Fx&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zr.Main)),t}function Gbn(e,t){const n=Ere(Hbn,i=>!!(!Nt(e.explicit,i)&&!Nt(t.explicit,i)||Nt(e.explicit,i)&&Nt(t.explicit,i)&&sl(e.get(i),t.get(i))));if(sl(e.size,t.size)){if(n)return e;if(sl(e.explicit,{}))return t;if(sl(t.explicit,{}))return e}return null}function Ybn(e){if(e.children.length===0)return;let t;for(const r of e.children)wqe(r);const n=Ere(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Gbn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new bqe(r,t.specifiedProjection,t.size,qt(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Kbn(e,t,n,r){if(MO(t,n)){const i=Li(e)?e.axis(n)??e.legend(n)??{}:{},s=Je(t,{expr:"datum"}),o=Je(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Je(t,{binSuffix:"range",forAs:!0}),formula:RO(s,o,i.format,i.formatType,r)}}return{}}function Eqe(e,t){return`${HUe(e)}_${t}`}function Xbn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function kie(e,t,n){const r=v8(n,void 0)??{},i=Eqe(r,t);return e.getName(`${i}_bins`)}function Qbn(e){return"as"in e}function _be(e,t,n){let r,i;Qbn(e)?r=rt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Je(e,{forAs:!0}),Je(e,{binSuffix:"end",forAs:!0})];const s={...v8(t,void 0)},o=Eqe(s,e.field),{signal:a,extentSignal:u}=Xbn(n,o);if(a8(s.extent)){const c=s.extent;i=eqe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class zd extends Sr{clone(){return new zd(null,qt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Ba(s)&&qr(s.bin)){const{key:a,binComponent:u}=_be(s,s.bin,n);i[a]={...u,...i[a],...Kbn(n,s,o,n.config)}}return i},{});return Or(r)?null:new zd(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=_be(n,n.bin,r);return new zd(t,{[i]:s})}merge(t,n){for(const r of Ne(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=xd([...this.bins[r].as,...t.bins[r].as],kn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(So(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(So(this.bins).map(t=>t.field))}hash(){return`Bin ${kn(this.bins)}`}assemble(){return So(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:dc(t.field),as:r,signal:t.signal,...a8(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:dc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Je({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Jbn(e,t,n,r){var s;const i=Li(r)?r.encoding[Sh(t)]:void 0;if(Ba(n)&&Li(r)&&LVe(n,i,r.markDef,r.config)){e.add(Je(n,{})),e.add(Je(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=O0({fieldDef:n,markDef:a,config:u});LA(o)&&l!==.5&&Xi(t)&&(e.add(Je(n,{suffix:T8})),e.add(Je(n,{suffix:C8}))),n.bin&&MO(n,t)&&e.add(Je(n,{binSuffix:"range"}))}else if(NUe(t)){const o=RUe(t);e.add(r.getName(o))}else e.add(Je(n));return m_(n)&&Uyn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Zbn(e,t){for(const n of Ne(t)){const r=t[n];for(const i of Ne(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class hf extends Sr{clone(){return new hf(null,new Set(this.dimensions),qt(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Je(o,{forAs:!0})]);else{if(tm(u)||oy(u)){const c=tm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Je({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Je(o,{forAs:!0})]);Em(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Je({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Je({field:l,aggregate:"max"},{forAs:!0})]))}else Jbn(s,a,o,n)}),s.size+Ne(i).length===0)?null:new hf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Je(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Je(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ne(i).length===0?null:new hf(t,r,i)}merge(t){return TUe(this.dimensions,t.dimensions)?(Zbn(this.measures,t.measures),!0):(hyn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ne(this.measures)])}producedFields(){const t=new Set;for(const n of Ne(this.measures))for(const r of Ne(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${kn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ne(this.measures))for(const o of Ne(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:dc(s));return{type:"aggregate",groupby:[...this.dimensions].map(dc),ops:t,fields:n,as:r}}}class zx extends Sr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Jl){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Je(o),...qr(a)?[Je(o,{binSuffix:"end"})]:[]],...jd(u)?{sortField:u}:Ie(u)?{sortIndexField:RE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Jl)this[n]&&(t+=` ${n.charAt(0)}:${kn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Jl)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Jl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Th){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Qs(i)&&ay(s)){const o=k8(this.childModel,n),a=Die(o);a?t[n]=a:Ue(Mre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=p8,field:f}=u;s.push(f),o.push(c),a.push(Je(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Aie){for(const c of Iie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Cp,Tp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function bbe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ewn(e,t){const n=Tre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=bbe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=bbe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ue(E0n(t)),null}function twn(e){const t={};return cR(e.filter,n=>{if(mVe(n)){let r=null;Bre(n)?r=Zu(n.equal):Ure(n)?r=Zu(n.lte):zre(n)?r=Zu(n.lt):Vre(n)?r=Zu(n.gt):Hre(n)?r=Zu(n.gte):qre(n)?r=n.range[0]:Wre(n)&&(r=(n.oneOf??n.in)[0]),r&&(h_(r)?t[n.field]="date":Jn(r)?t[n.field]="number":rt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function nwn(e){const t={};function n(r){OE(r)?t[r.field]="date":r.type==="quantitative"&&Zgn(r.aggregate)?t[r.field]="number":EE(r.field)>1?r.field in t||(t[r.field]="flatten"):m_(r)&&jd(r.sort)&&EE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Li(e)||cl(e))&&e.forEachFieldDef((r,i)=>{if(Ba(r))n(r);else{const s=f_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Li(e)){const{mark:r,markDef:i,encoding:s}=e;if(uy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ve(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function rwn(e){const t={};if(Li(e)&&e.component.selection)for(const n of Ne(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&EE(i.field)>1&&(t[i.field]="flatten")}return t}class Jo extends Sr{clone(){return new Jo(null,qt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${kn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Yg(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ne(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ue(P_e(a,r[a],u.value)))}for(const a of Ne(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ue(P_e(a,n[a],u)))}const s=new Sm(n,r);i.copyAll(s);const o={};for(const a of Ne(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ne(o).length===0||i.parseNothing?null:new Jo(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ne(this._parse)){const r=this._parse[n];EE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ne(this._parse))}dependentFields(){return new Set(Ne(this._parse))}assembleTransforms(t=!1){return Ne(this._parse).filter(n=>t?EE(n)>1:!0).map(n=>{const r=ewn(n,this._parse[n]);return r?{type:"formula",expr:r,as:Cre(n)}:null}).filter(n=>n!==null)}}class R0 extends Sr{clone(){return new R0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([xf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:xf}}}class jO extends Sr{clone(){return new jO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${kn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class BO extends Sr{clone(){return new BO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${kn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kv extends Sr{constructor(t){super(null),t??(t={name:"source"});let n;if(Yg(t)||(n=t.format?{...wu(t.format,["parse"])}:{}),FA(t))this._data={values:t.values};else if(PE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else PHe(t)?this._data={values:[{type:"Sphere"}]}:(IHe(t)||Yg(t))&&(this._data={});this._generator=Yg(t),t.name&&(this._name=t.name),n&&!Or(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var wbe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},iwn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},WT;function $ie(e){return e instanceof kv||e instanceof jO||e instanceof BO}class Rie{constructor(){WT.set(this,void 0),wbe(this,WT,!1,"f")}setModified(){wbe(this,WT,!0,"f")}get modifiedFlag(){return iwn(this,WT,"f")}}WT=new WeakMap;class g_ extends Rie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Nie extends Rie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class swn extends Nie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ne(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class own extends Nie{constructor(t){super(),this.requiresSelectionId=t&&Cie(t)}run(t){t instanceof R0&&(this.requiresSelectionId&&($ie(t.parent)||t.parent instanceof hf||t.parent instanceof Jo)||(this.setModified(),t.remove()))}}class awn extends Rie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Bd&&(r=t.producedFields(),xre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class uwn extends Nie{constructor(){super()}run(t){t instanceof Ra&&!t.isRequired()&&(this.setModified(),t.remove())}}class lwn extends g_{run(t){if(!$ie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Jo)if(t instanceof Jo)this.setModified(),t.merge(n);else{if(Sre(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class cwn extends g_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Jo);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ne(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Or(i)){this.setModified();const o=new Jo(t,i);for(const a of n){if(a instanceof Jo)for(const u of Ne(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Jo&&Ne(a.parse).length===0&&a.remove()}}}}}class fwn extends g_{run(t){t instanceof Ra||t.numChildren()>0||t instanceof zx||t instanceof kv||(this.setModified(),t.remove())}}class dwn extends g_{run(t){const n=t.children.filter(i=>i instanceof Bd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class hwn extends g_{run(t){const n=t.children.filter(i=>i instanceof hf),r={};for(const i of n){const s=kn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ne(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class pwn extends g_{constructor(t){super(),this.model=t}run(t){const n=!($ie(t)||t instanceof Bx||t instanceof Jo||t instanceof R0),r=[],i=[];for(const s of t.children)s instanceof zd&&(n&&!Sre(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof zd?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class mwn extends g_{run(t){const n=[...t.children];if(!Ev(n,o=>o instanceof Ra)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ra){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ra)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class y_ extends Sr{clone(){return new y_(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`JoinAggregateTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function gwn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Je(r);return i&&t.push(i),t},[])}function ywn(e){return Ie(e)&&e.every(t=>rt(t))&&e.length>1}class Ip extends Sr{clone(){return new Ip(null,qt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ki(f.order,"ascending"));const l={field:a,order:u};let c;return ywn(s)?c=s:rt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Ip(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return oh(p)}).filter(h=>!!h),c=gwn(n),f=n.encoding.order;let d;if(Ie(f)||Ve(f))d=KUe(f);else{const h=FVe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Ip(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${kn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Je(i,{binSuffix:"mid"})]:[Je(i,{}),Je(i,{binSuffix:"end"})]:[Je(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Je(c,{expr:"datum"}),p=Je(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Je(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Je(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class Ux extends Sr{clone(){return new Ux(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`WindowTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Nre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function vwn(e){function t(n){if(!(n instanceof zx)){const r=n.clone();if(r instanceof Ra){const i=YW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof hf||r instanceof Ip||r instanceof Ux||r instanceof y_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function GW(e){if(e instanceof zx)if(e.numChildren()===1&&!(e.children[0]instanceof Ra)){const t=e.children[0];(t instanceof hf||t instanceof Ip||t instanceof Ux||t instanceof y_)&&t.addDimensions(e.fields),t.swapWithParent(),GW(e)}else{const t=e.model.component.data.main;xqe(t);const n=vwn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(GW)}function xqe(e){if(e instanceof Ra&&e.type===zr.Main&&e.numChildren()===1){const t=e.children[0];t instanceof zx||(t.swapWithParent(),xqe(e))}}const YW="scale_",Nk=5;function KW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!KW(t.children))return!1}return!0}function Pc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Ebe(e,t,n){let r=e.sources,i=!1;return i=Pc(new uwn,r)||i,i=Pc(new own(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Pc(new fwn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Pc(new lwn,r)||i,i=Pc(new pwn(t),r)||i,i=Pc(new awn,r)||i,i=Pc(new cwn,r)||i,i=Pc(new hwn,r)||i,i=Pc(new dwn,r)||i,i=Pc(new swn,r)||i,i=Pc(new mwn,r)||i),e.sources=r,i}function _wn(e,t){KW(e.sources);let n=0,r=0;for(let i=0;i<Nk&&Ebe(e,t,!0);i++)n++;e.sources.map(GW);for(let i=0;i<Nk&&Ebe(e,t,!1);i++)r++;KW(e.sources),Math.max(n,r)===Nk&&Ue(`Maximum optimization runs(${Nk}) reached.`)}class Bs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Bs(()=>t(n))}}function Sqe(e){Li(e)?bwn(e):wwn(e)}function bwn(e){const t=e.component.scales;for(const n of Ne(t)){const r=xwn(e,n);if(t[n].setWithExplicit("domains",r),Twn(e,n),e.component.data.isFaceted){let s=e;for(;!cl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)hp(a)&&(a.data=YW+a.data.replace(YW,""))}}}function wwn(e){for(const n of e.children)Sqe(n);const t=e.component.scales;for(const n of Ne(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=P0(r,o.getWithExplicit("domains"),"domains","scale",XW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ue(v0n),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Ewn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=xbe(t,n);if(!i){Ue(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=xbe(t,n);if(i)return"unaggregated"}return e}function xwn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Ewn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&xs(r.x2)?xs(r.x)?P0(jm(n,i,e,"x"),jm(n,i,e,"x2"),"domain","scale",XW):jm(n,i,e,"x2"):t==="y"&&xs(r.y2)?xs(r.y)?P0(jm(n,i,e,"y"),jm(n,i,e,"y2"),"domain","scale",XW):jm(n,i,e,"y2"):jm(n,i,e,t)}function Swn(e,t,n){return e.map(r=>({signal:`{data: ${_8(r,{timeUnit:n,type:t})}}`}))}function Q7(e,t,n){var i;const r=(i=Ks(n))==null?void 0:i.unit;return t==="temporal"||r?Swn(e,t,r):[e]}function jm(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=xs(i[r]),{type:c}=l,f=l.timeUnit;if(zyn(t)){const p=jm(e,void 0,n,r),m=Q7(t.unionWith,c,f);return ed([...m,...p.value])}else{if(It(t))return ed([t]);if(t&&t!=="unaggregated"&&!EVe(t))return ed(Q7(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Hu([[0,1]]);const p=n.requestDataName(zr.Main);return Hu([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Em(r)&&Ve(l)?Cwn(n,r,e):void 0;if(Ch(l)){const p=Q7([l.datum],c,f);return Hu(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(zr.Main),{field:m}=l;return Hu([{data:p,field:Je({field:m,aggregate:"min"})},{data:p,field:Je({field:m,aggregate:"max"})}])}else if(qr(h.bin)){if(Qs(e))return Hu(e==="bin-ordinal"?[]:[{data:DA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r,MO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(qr(p)){const m=kie(n,h.field,p);return Hu([new Bs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Hu([{data:n.requestDataName(zr.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&$n(["time","utc"],e)){const p=i[Sh(r)];if(LVe(h,p,s,a)){const m=n.requestDataName(zr.Main),g=O0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=LA(o)&&g!==.5&&Xi(r);return Hu([{data:m,field:n.vgField(r,y?{suffix:T8}:{})},{data:m,field:n.vgField(r,{suffix:y?C8:"end"})}])}}return Hu(d?[{data:DA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(zr.Main),field:n.vgField(r)}])}function J7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":p8),...r?{field:dc(r)}:{},...i?{order:i}:{}}}function Twn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=EVe(r)&&r,o=d_(i)&&a8(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Cwn(e,t,n){if(!Qs(n))return;const r=e.fieldDef(t),i=r.sort;if(DVe(i))return{op:"min",field:RE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(jd(i)){const a=s&&!o.has(i.field);return J7(i,a)}else if(NVe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(tm(c)||oy(c))return J7({field:Je(l),order:u},d);if(Nre(c)||!c)return J7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function xbe(e,t){const{aggregate:n,type:r}=e;return n?rt(n)&&!t0n.has(n)?{valid:!1,reason:H0n(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:q0n(e)}:{valid:!0}:{valid:!1,reason:V0n(e)}}function XW(e,t,n,r){return e.explicit&&t.explicit&&Ue(X0n(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Awn(e){const t=xd(e.map(o=>{if(hp(o)){const{sort:a,...u}=o;return u}return o}),kn),n=xd(e.map(o=>{if(hp(o)){const a=o.sort;return a!==void 0&&!DA(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),kn);if(t.length===0)return;if(t.length===1){const o=e[0];if(hp(o)&&n.length>0){let a=n[0];if(n.length>1){Ue($_e);const u=n.filter(l=>ot(l)&&"op"in l&&l.op!=="min");n.every(l=>ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=xd(n.map(o=>DA(o)||!("op"in o)||rt(o.op)&&o.op in Qgn?o:(Ue(J0n(o)),!0)),kn);let i;r.length===1?i=r[0]:r.length>1&&(Ue($_e),i=!0);const s=xd(e.map(o=>hp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Die(e){if(hp(e)&&rt(e.field))return e.field;if(n0n(e)){let t;for(const n of e.fields)if(hp(n)&&rt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ue(Z0n),t}return Ue(eyn),t}else if(r0n(e)){Ue(tyn);const t=e.fields[0];return rt(t)?t:void 0}}function k8(e,t){const r=e.component.scales[t].get("domains").map(i=>(hp(i)&&(i.data=e.lookupDataSource(i.data)),i));return Awn(r)}function Tqe(e){return Vx(e)||Mie(e)?e.children.reduce((t,n)=>t.concat(Tqe(n)),Sbe(e)):Sbe(e)}function Sbe(e){return Ne(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Iwn(i.range,s,n,e),h=k8(e,n),p=a?E_n(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Iwn(e,t,n,r){if(Xi(n)){if(ay(e))return{step:{signal:`${t}_step`}}}else if(ot(e)&&hp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Cqe extends Sm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Ev(this.get("domains"),t=>Ie(t)&&t.length===2&&Jn(t[0])&&t[0]<=0&&Jn(t[1])&&t[1]>=0)}}const Own=["range","scheme"];function Pwn(e){const t=e.component.scales;for(const n of o8){const r=t[n];if(!r)continue;const i=kwn(n,e);r.setWithExplicit("range",i)}}function Tbe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=$u(t),o=e.getName(s);if(ot(r)&&r.binned&&r.step!==void 0)return new Bs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(qr(r)){const a=kie(e,i,r);return new Bs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function kwn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Own)if(n[f]!==void 0){const d=NW(s,f),h=xVe(e,f);if(!d)Ue(nVe(s,f,e));else if(h)Ue(h);else switch(f){case"range":{const p=n.range;if(Ie(p)){if(Xi(e))return ed(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Bs.fromName(y,g)}return m}))}else if(ot(p))return ed({data:t.requestDataName(zr.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return ed(p)}case"scheme":return ed($wn(n[f]))}}const o=e===vi||e==="xOffset"?"width":"height",a=r[o];if(ah(a)){if(Xi(e))if(Qs(s)){const f=Iqe(a,t,e);if(f)return ed({step:f})}else Ue(rVe(o));else if(PO(e)){const f=e===ty?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Oqe(a,s);if(p)return ed(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Rwn(e,t);return(u!==void 0||l!==void 0)&&NW(s,"rangeMin")&&Ie(c)&&c.length===2?ed([u??c[0],l??c[1]]):Hu(c)}function $wn(e){return Byn(e)?{scheme:e.name,...wu(e,["name"])}:{scheme:e}}function Aqe(e,t,n,{center:r}={}){const i=$u(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===to&&wl(n)?r?[Bs.fromName(a=>`${o(a)}/2`,s),Bs.fromName(a=>`-${o(a)}/2`,s)]:[Bs.fromName(o,s),0]:r?[Bs.fromName(a=>`-${o(a)}/2`,s),Bs.fromName(a=>`${o(a)}/2`,s)]:[0,Bs.fromName(o,s)]}function Rwn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=xs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case vi:case to:{if($n(["point","band"],u)){const f=Pqe(e,n,r.view);if(ah(f))return{step:Iqe(f,t,e)}}return Aqe(e,t,u)}case ty:case Lx:return Nwn(e,t,u);case bm:{const f=t.component.scales[e].get("zero"),d=kqe(i,f,r),h=Lwn(i,n,t,r);return CE(u)?Mwn(d,h,Dwn(u,r,l,e)):[d,h]}case Tc:return[0,Math.PI*2];case c_:return[0,360];case Nf:return[0,new Bs(()=>{const f=t.getSignalName(cl(t.parent)?"child_width":"width"),d=t.getSignalName(cl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case iy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case sy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ku:return"symbol";case Pu:case Eh:case xh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case wm:case ny:case ry:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Iqe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Pre(n),o=r[s];if(pHe({step:e,offsetIsDiscrete:Qt(o)&&yVe(o.type)})==="offset"&&KVe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${a0n(f)})`}}else return e.step}function Oqe(e,t){if(pHe({step:e,offsetIsDiscrete:Qs(t)})==="offset")return{step:e.step}}function Nwn(e,t,n){const r=e===ty?"x":"y",i=t.getScaleComponent(r);if(!i)return Aqe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=Pqe(r,t.size,t.config.view);if(ah(l)){const c=Oqe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ve(l)&&l.timeUnit){const c=hVe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=O0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=It(f)?`${f.signal}/2`+h:`${f/2+d}`,m=It(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return xUe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Pqe(e,t,n){const r=e===vi?"width":"height",i=t[r];return i||FL(n,r)}function Dwn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ie(n)?n.length+1:(Ue(cyn(r)),3)}}function Mwn(e,t,n){const r=()=>{const i=tf(t),s=tf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return It(t)?new Bs(r):{signal:r()}}function kqe(e,t,n){if(t)return It(t)?{signal:`${t.signal} ? 0 : ${kqe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(u8("size",e))}const Cbe=.95;function Lwn(e,t,n,r){const i={x:Tbe(n,"x"),y:Tbe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Abe(t,i,r.view);return Jn(s)?s-1:new Bs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Abe(t,i,r.view);return Jn(s)?Math.pow(Cbe*s,2):new Bs(()=>`pow(${Cbe} * ${s.signal}, 2)`)}}throw new Error(u8("size",e))}function Abe(e,t,n){const r=ah(e.width)?e.width.step:LL(n,"width"),i=ah(e.height)?e.height.step:LL(n,"height");return t.x||t.y?new Bs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function $qe(e,t){Li(e)?Fwn(e,t):Nqe(e,t)}function Fwn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ne(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=xs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=NW(h,t),y=xVe(a,t);if(d!==void 0&&(g?y&&Ue(y):Ue(nVe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":h_(u[t])||_==="temporal"||v?l.set(t,{signal:_8(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Ibe?Ibe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:XVe(i,a),hasSecondaryRangeChannel:!!i[Sh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Ibe={bins:({model:e,fieldOrDatumDef:t})=>Ve(t)?jwn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Bwn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>zwn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Uwn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Vwn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Hwn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ve(e)?e.sort:void 0;return qwn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Wwn(e,t,n,r,i,s.scale,o)};function Rqe(e){Li(e)?Pwn(e):Nqe(e,"range")}function Nqe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Rqe(r):$qe(r,t);for(const r of Ne(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=P0(i,a,t,"scale",AHe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function jwn(e,t){const n=t.bin;if(qr(n)){const r=kie(e,t.field,n);return new Bs(()=>e.getSignalName(r))}else if(fo(n)&&d_(n)&&n.step!==void 0)return{step:n.step}}function Bwn(e,t){if($n([Pu,Eh,xh],e)&&t!=="nominal")return"hcl"}function zwn(e,t,n,r,i,s){var o;if(!((o=oh(s))!=null&&o.bin||Ie(n)||i!=null||r!=null||$n([Eu.TIME,Eu.UTC],e)))return Xi(t)?!0:void 0}function Uwn(e,t,n,r,i,s){if(Xi(e)){if(nf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ve(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Eu.POINT)return n.pointPadding}}function Vwn(e,t,n,r,i,s=!1){if(e===void 0){if(Xi(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Ki(o,n==="bar"?a:u)}else if(PO(t)&&r===Eu.BAND)return i.offsetBandPaddingInner}}function Hwn(e,t,n,r,i,s=!1){if(e===void 0){if(Xi(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Eu.BAND)return Ki(o,It(r)?{signal:`${r.signal}/2`}:r/2)}else if(PO(t)){if(n===Eu.POINT)return .5;if(n===Eu.BAND)return i.offsetBandPaddingOuter}}}function qwn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return wl(e)&&t==="descending"?It(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(wl(e)&&t==="descending")return!0}function Wwn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&wl(i)){if(Ie(n)){const u=n[0],l=n[n.length-1];if(Jn(u)&&u<=0&&Jn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!CE(i))return!0;if(!(Ve(t)&&t.bin)&&$n([...Th,...Vgn],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Gwn(e,t,n,r,i=!1){const s=Ywn(t,n,r,i),{type:o}=e;return Em(t)?o!==void 0?Gyn(t,o)?Ve(n)&&!Wyn(o,n.type)?(Ue(Y0n(o,s)),s):o:(Ue(G0n(t,o,s)),s):s:null}function Ywn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(fw(e)||V7(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ue(H7(e,"ordinal")),"ordinal";if(Xi(e)||PO(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Rre)return"band";const s=n[$u(e)];return Av(s)||IE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return fw(e)?"time":V7(e)==="discrete"?(Ue(H7(e,"temporal")),"ordinal"):Ve(t)&&t.timeUnit&&Ks(t.timeUnit).utc?"utc":"time";case"quantitative":return fw(e)?Ve(t)&&qr(t.bin)?"bin-ordinal":"linear":V7(e)==="discrete"?(Ue(H7(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(eVe(t.type))}function Kwn(e,{ignoreRange:t}={}){Dqe(e),Sqe(e);for(const n of qyn)$qe(e,n);t||Rqe(e)}function Dqe(e){Li(e)?e.component.scales=Xwn(e):e.component.scales=Jwn(e)}function Xwn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of o8){const o=xs(t[s]);if(o&&n===CVe&&s===ku&&o.type===Fx)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=XVe(t,s),l=Gwn(a,s,o,r,u);i[s]=new Cqe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Qwn=AHe((e,t)=>N_e(e)-N_e(t));function Jwn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Dqe(s);for(const o of Ne(s.component.scales))if((t=i.scale)[o]??(t[o]=fqe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Dyn(a.value,u.value)?r[o]=P0(a,u,"type","scale",Qwn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ne(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new Cqe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class Z7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Li(e){return(e==null?void 0:e.type)==="unit"}function cl(e){return(e==null?void 0:e.type)==="facet"}function Mie(e){return(e==null?void 0:e.type)==="concat"}function Vx(e){return(e==null?void 0:e.type)==="layer"}class Lie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=au(a),this.name=t.name??i,this.title=Km(t.title)?{text:t.title}:t.title?au(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Z7,this.projectionNameMap=r?r.projectionNameMap:new Z7,this.signalNameMap=r?r.signalNameMap:new Z7,this.data=t.data,this.description=t.description,this.transforms=s_n(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:lvn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:m8(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Sm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qt(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Kwn(this)}parseProjection(){wqe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){gqe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ne(r)){const o=r[s];o!==void 0&&(i[s]=ti(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ti(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Or(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=_bn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Jl)t[r].title&&n.push(hbn(this,r));for(const r of Aie)n=n.concat(pbn(this,r));return n}assembleAxes(){return ebn(this.component.axes,this.config)}assembleLegends(){return vqe(this)}assembleProjections(){return Ubn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...qUe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Or(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||cl(this.parent)?Tqe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return yi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zr[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(cl(this.parent)){const n=lqe(t),r=s8(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Qs(s)&&ay(o)){const a=i.get("name"),u=k8(this,r),l=Die(u);if(l){const c=Je({aggregate:"distinct",field:l},{expr:"datum"});return{signal:uqe(a,i,c)}}else return Ue(Mre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(MUe(t)&&Em(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(d0n(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Mqe extends Lie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Je(r,n)}reduceFieldDef(t,n){return F1n(this.getMapping(),(r,i,s)=>{const o=oh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){lie(this.getMapping(),(r,i)=>{const s=oh(r);s&&t(s,i)},n)}}class $8 extends Sr{clone(){return new $8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${kn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class R8 extends Sr{clone(){return new R8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${kn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class jA extends Sr{clone(){return new jA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(fr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Em(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");wl(d)&&l.aggregate!=="count"&&!uy(i)&&(u[l.field]=l)}return u},{});return Ne(a).length?new jA(t,a):null}dependentFields(){return new Set(Ne(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${kn(this.filter)}`}assemble(){const t=Ne(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Je(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class N8 extends Sr{clone(){return new N8(this.parent,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${kn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class D8 extends Sr{clone(){return new D8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${kn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class pw extends Sr{clone(){return new pw(null,qt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Mf,Df],[hc,Lf]]){const s=i.map(o=>{const a=xs(n.encoding[o]);return Ve(a)?a.field:Ch(a)?{expr:`${a.datum}`}:Ef(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new pw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ku)){const i=n.typedFieldDef(ku);i.type===Fx&&(t=new pw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(rt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${kn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class BA extends Sr{clone(){return new BA(null,this.projection,qt(this.fields),qt(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Mf,Df],[hc,Lf]]){const i=r.map(o=>{const a=xs(n.encoding[o]);return Ve(a)?a.field:Ch(a)?{expr:`${a.datum}`}:Ef(a)?{expr:`${a.value}`}:void 0}),s=r[0]===hc?"2":"";(i[0]||i[1])&&(t=new BA(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(rt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${kn(this.fields)} ${kn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class H1 extends Sr{clone(){return new H1(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new H1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ve(i)&&Ve(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=JVe(n.mark,r);return new H1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${kn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Bvn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class M8 extends Sr{clone(){return new M8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${kn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class zA extends Sr{clone(){return new zA(null,qt(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(zvn(o)){let u=jqe(o.data,s);u||(u=new kv(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ra(u,l,zr.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Uvn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(yi(u),u)}catch{throw new Error(g0n(u))}if(a=l.materialized,!a)throw new Error(y0n(u))}return new zA(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${kn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:nt(this.transform.as)}:{}};else{let n=this.transform.as;rt(n)||(Ue(T0n),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class L8 extends Sr{clone(){return new L8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${kn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class F8 extends Sr{clone(){return new F8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${kn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class j8 extends Sr{clone(){return new j8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${kn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class B8 extends Sr{clone(){return new B8(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${kn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Lqe(e){let t=0;function n(r,i){if(r instanceof kv&&!r.isGenerator&&!PE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Jo&&(r.parent instanceof kv&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof zx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof jO||r instanceof BO||r instanceof jA||r instanceof Bx||r instanceof $E||r instanceof BA||r instanceof hf||r instanceof zA||r instanceof Ux||r instanceof y_||r instanceof D8||r instanceof N8||r instanceof $8||r instanceof M8||r instanceof L8||r instanceof F8||r instanceof R0||r instanceof B8||r instanceof j8||r instanceof R8)&&i.transform.push(r.assemble()),(r instanceof zd||r instanceof Bd||r instanceof H1||r instanceof Ip||r instanceof pw)&&i.transform.push(...r.assemble()),r instanceof Ra&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ra?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ra&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Zwn(e){const t=[],n=Lqe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function eEn(e,t){const n=[],r=Lqe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function tEn(e){return e==="top"||e==="left"||It(e)?"header":"footer"}function nEn(e){for(const t of Jl)rEn(e,t);Obe(e,"x"),Obe(e,"y")}function rEn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=NE("title",null,r,t);let l=dw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ie(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=NE("labelOrient",a.header,r,t),f=a.header!==null?Ki((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Fqe(e,t,f)]}}}function Fqe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Obe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Pie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=tEn(a.get("orient"));o[u]??(o[u]=[Fqe(e,s,!1)]);const l=qT(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function iEn(e){Fie(e),UL(e,"width"),UL(e,"height")}function sEn(e){Fie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";UL(e,t),UL(e,n)}function Fie(e){for(const t of e.children)t.parseLayoutSize()}function UL(e,t){const n=lqe(t),r=s8(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??fqe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=P0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function oEn(e){const{size:t,component:n}=e;for(const r of Th){const i=$u(r);if(t[i]){const s=t[i];n.layoutSize.set(i,ah(s)?"step":s,!0)}else{const s=aEn(e,i);n.layoutSize.set(i,s,!1)}}}function aEn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Qs(s)){const a=FL(r.view,t);return ay(o)||ah(a)?"step":a}else return LW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return LW(r.view,t);{const s=FL(r.view,t);return ah(s)?s.step:s}}}function QW(e,t,n){return Je(t,{suffix:`by_${Je(e)}`,...n})}class Y2 extends Mqe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Vie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!NO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ne(t),r={};for(const i of n){if(![Tp,Cp].includes(i)){Ue(u8(i,"facet"));break}const s=t[i];if(s.field===void 0){Ue($W(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=aie(t,n);return r.header?r.header=au(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=z8(this),this.child.parseData()}parseLayoutSize(){Fie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),nEn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Jl)for(const r of Iie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=NE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=O8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Y2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Y2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Je(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Y2){if(this.child.channelHasField("column")){const i=Je(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Th){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Qs(o)&&ay(a)){const u=k8(this.child,i),l=Die(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ue(Mre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Jl){const f=this.facet[c];if(f){u.push(Je(f));const{bin:d,sort:h}=f;if(qr(d)&&u.push(Je(f,{binSuffix:"end"})),jd(h)){const{field:p,op:m=p8}=h,g=QW(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ie(h)){const p=RE(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?jd(r.sort)?[QW(r,r.sort,{expr:"datum"})]:Ie(r.sort)?[RE(r,t,{expr:"datum"})]:[Je(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(jd(i)?i.order:!Ie(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return qW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Aie)if(t[s]){const o=NE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return qW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Zwn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Jl.map(u=>this.facetSortFields(u)).flat(),order:Jl.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(v_n(this,[]))}]}getMapping(){return this.facet}}function uEn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(jd(s.sort)){const{field:o,op:a=p8}=s.sort;e=i=new y_(e,{joinaggregate:[{op:a,field:o,as:QW(s,s.sort,{forAs:!0})}],groupby:[Je(s)]})}return i}return null}function jqe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(FA(e)&&FA(a)){if(sl(e.values,a.values))return o}else if(PE(e)&&PE(a)){if(e.url===a.url)return o}else if(IHe(e)&&e.name===o.dataName)return o}}return null}function lEn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new kv({values:[]});return t.push(r),r}const n=jqe(e.data,t);if(n)return Yg(e.data)||(n.data.format=SUe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new kv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function cEn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Jvn(i))o=e=new $E(e,i),s="derived";else if(bie(i)){const a=twn(i);o=e=Jo.makeWithAncestors(e,{},a,n)??e,e=new Bx(e,t,i.filter)}else if(xHe(i))o=e=zd.makeFromTransform(e,i,t),s="number";else if(e_n(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Jo(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Bd.makeFromTransform(e,i);else if(t_n(i))o=e=hf.makeFromTransform(e,i),s="number",Cie(t)&&(e=new R0(e));else if(EHe(i))o=e=zA.make(e,t,i,r++),s="derived";else if(Kvn(i))o=e=new Ux(e,i),s="number";else if(Xvn(i))o=e=new y_(e,i),s="number";else if(n_n(i))o=e=Ip.makeFromTransform(e,i),s="derived";else if(r_n(i))o=e=new D8(e,i),s="derived";else if(i_n(i))o=e=new R8(e,i),s="derived";else if(Qvn(i))o=e=new N8(e,i),s="derived";else if(Vvn(i))o=e=new j8(e,i),s="derived";else if(Yvn(i))e=new B8(e,i);else if(Zvn(i))o=e=H1.makeFromTransform(e,i),s="derived";else if(Hvn(i))o=e=new $8(e,i),s="derived";else if(qvn(i))o=e=new L8(e,i),s="derived";else if(Wvn(i))o=e=new F8(e,i),s="derived";else if(Gvn(i))o=e=new M8(e,i),s="derived";else{Ue(S0n(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function z8(e){var m;let t=lEn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Yg(i)||PE(i)||FA(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new g_n;Yg(i)?(OHe(i)?t=new BO(t,i.sequence):wie(i)&&(t=new jO(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=Jo.makeExplicit(t,e,o)??t,t=new R0(t);const a=e.parent&&Vx(e.parent);(Li(e)||cl(e))&&a&&(t=zd.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=cEn(t,e,o));const u=rwn(e),l=nwn(e);t=Jo.makeWithAncestors(t,{},{...u,...l},o)??t,Li(e)&&(t=pw.parseAll(t,e),t=BA.parseAll(t,e)),(Li(e)||cl(e))&&(a||(t=zd.makeFromEncoding(t,e)??t),t=Bd.makeFromEncoding(t,e)??t,t=$E.parseAllForSortIndex(t,e));const c=e.getDataName(zr.Raw),f=new Ra(t,c,zr.Raw,r);if(n[c]=f,t=f,Li(e)){const g=hf.makeFromEncoding(t,e);g&&(t=g,Cie(e)&&(t=new R0(t))),t=H1.makeFromEncoding(t,e)??t,t=Ip.makeFromEncoding(t,e)??t}Li(e)&&(t=jA.make(t,e)??t);const d=e.getDataName(zr.Main),h=new Ra(t,d,zr.Main,r);n[d]=h,t=h,Li(e)&&J_n(e,h);let p=null;if(cl(e)){const g=e.getName("facet");t=uEn(t,e.facet)??t,p=new zx(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class fEn extends Lie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ue(w0n),this.children=this.getChildren(t).map((l,c)=>Vie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=z8(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return E8(t)?t.vconcat:vie(t)?t.hconcat:t.concat}parseLayoutSize(){sEn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Oie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function dEn(e){return e===!1||e===null}const hEn={disable:1,gridScale:1,scale:1,...GVe,labelExpr:1,encode:1},Bqe=Ne(hEn);class jie extends Sm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new jie(qt(this.explicit),qt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!dEn(this.get(t))}hasOrientSignalRef(){return It(this.explicit.orient)}}function pEn(e,t,n){const{encoding:r,config:i}=e,s=xs(r[t])??xs(r[Sh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Iv(u))return{text:rf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(AE(s)==="quantitative"){if(IE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:rf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:rf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(AE(s)==="temporal"&&i.timeFormatType&&Ve(s)&&!s.timeUnit)return{text:rf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function mEn(e){return Th.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[EEn(n,e)]),t),{})}const gEn={bottom:"top",top:"bottom",left:"right",right:"left"};function yEn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ne(i.component.axes))n.axis[s]=Pie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=vEn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Th){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!It(a)){if(r[a]>0&&!u){const l=gEn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function vEn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=_En(i,s)}}}else return t.map(n=>n.clone());return e}function _En(e,t){for(const n of Bqe){const r=P0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return JUe(i,s);case"gridScale":return{explicit:i.explicit,value:Ki(i.value,s.value)}}return S8(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function bEn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(It(n.labelAngle)?n.labelAngle:MA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===iqe(r,i))return!0}return e===n[t]}const wEn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function EEn(e,t){var y,v;let n=t.axis(e);const r=new jie,i=xs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||ubn(e),u=t.getScaleComponent(e).get("type"),l=tbn(e,u,a,t.config),c=n!==void 0?!n:VW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=sbn(i,n,e,o.style,l),d=$Ve(n.formatType,i,u),h=kVe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of Bqe){const b=_ in pbe?pbe[_](p):z_e(_)?n[_]:void 0,E=b!==void 0,w=bEn(b,_,n,t,e);if(E&&w)r.set(_,b,w);else{const{configValue:x=void 0,configFrom:S=void 0}=z_e(_)&&_!=="values"?VW(_,o.style,n.style,l):{},P=x!==void 0;E&&!P?r.set(_,b,w):(S!=="vgAxisConfig"||wEn.has(_)&&P||LO(x)||It(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=WVe.reduce((_,b)=>{if(!r.hasAxisPart(b))return _;const E=cqe(m[b]??{},t),w=b==="labels"?pEn(t,e,E):E;return w!==void 0&&!Or(w)&&(_[b]={update:w}),_},{});return Or(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function xEn({encoding:e,size:t}){for(const n of Th){const r=$u(n);ah(t[r])&&wg(e[n])&&(delete t[r],Ue(rVe(r)))}return t}const SEn={vgMark:"arc",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Qo("x",e,{defaultPos:"mid"}),...Qo("y",e,{defaultPos:"mid"}),...k0(e,"radius"),...k0(e,"theta")})},TEn={vgMark:"area",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...jL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...jL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Tie(e)})},CEn={vgMark:"rect",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...k0(e,"x"),...k0(e,"y")})},AEn={vgMark:"shape",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ve(n)&&n.type===Fx?{field:Je(n,{expr:"datum"})}:{}}]}},IEn={vgMark:"image",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...k0(e,"x"),...k0(e,"y"),...xie(e,"url")})},OEn={vgMark:"line",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Qo("x",e,{defaultPos:"mid"}),...Qo("y",e,{defaultPos:"mid"}),...Us("size",e,{vgChannel:"strokeWidth"}),...Tie(e)})},PEn={vgMark:"trail",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Qo("x",e,{defaultPos:"mid"}),...Qo("y",e,{defaultPos:"mid"}),...Us("size",e),...Tie(e)})};function Bie(e,t){const{config:n}=e;return{...Cc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Qo("x",e,{defaultPos:"mid"}),...Qo("y",e,{defaultPos:"mid"}),...Us("size",e),...Us("angle",e),...kEn(e,n,t)}}function kEn(e,t,n){return n?{shape:{value:n}}:Us("shape",e)}const $En={vgMark:"symbol",encodeEntry:e=>Bie(e)},REn={vgMark:"symbol",encodeEntry:e=>Bie(e,"circle")},NEn={vgMark:"symbol",encodeEntry:e=>Bie(e,"square")},DEn={vgMark:"rect",encodeEntry:e=>({...Cc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...k0(e,"x"),...k0(e,"y")})},MEn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Cc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...jL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...jL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Us("size",e,{vgChannel:"strokeWidth"})}}},LEn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Cc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Qo("x",e,{defaultPos:"mid"}),...Qo("y",e,{defaultPos:"mid"}),...xie(e),...Us("size",e,{vgChannel:"fontSize"}),...Us("angle",e),...cbe("align",FEn(e.markDef,n,t)),...cbe("baseline",jEn(e.markDef,n,t)),...Qo("radius",e,{defaultPos:null}),...Qo("theta",e,{defaultPos:null})}}};function FEn(e,t,n){if(fr("align",e,n)===void 0)return"center"}function jEn(e,t,n){if(fr("baseline",e,n)===void 0)return"middle"}const BEn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Cc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Qo("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Qo("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Us("size",e,{defaultValue:zEn(e),vgChannel:i}),[s]:ti(fr("thickness",n,t))}}};function zEn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=fr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&ay(a)&&Jn(a.step)?a.step*3/4:LL(t.view,i)*3/4}}const Dk={arc:SEn,area:TEn,bar:CEn,circle:REn,geoshape:AEn,image:IEn,line:OEn,point:$En,rect:DEn,rule:MEn,square:NEn,text:LEn,tick:BEn,trail:PEn};function UEn(e){if($n([d8,c8,Xyn],e.mark)){const t=JVe(e.mark,e.encoding);if(t.length>0)return VEn(e,t)}else if(e.mark===f8){const t=kW.some(n=>fr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return HEn(e)}return zie(e)}const Pbe="faceted_path_";function VEn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Pbe+e.requestDataName(zr.Main),data:e.requestDataName(zr.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:zie(e,{fromPrefix:Pbe})}]}const kbe="stack_group_";function HEn(e){var l;const[t]=zie(e,{fromPrefix:kbe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...wE(t.encode.update,["y","yc","y2","height",...kW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...wu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...wE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...wu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of kW){const f=nm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ti(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Je(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Je(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=nm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ti(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zr.Main),name:kbe+e.requestDataName(zr.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function qEn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ie(o)&&Ef(o)&&OW(o.value)||!o&&OW(fr("order",i,s)))){if((Ie(o)||Ve(o))&&!n)return KUe(o,{expr:"datum"});if(uy(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ve(l)){const c=l.sort;if(Ie(c))return{field:Je(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(jd(c))return{field:Je({aggregate:uie(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(NVe(c)){const f=e.fieldDef(c.encoding);return{field:Je(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Je(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function zie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ki(r.clip,WEn(e),GEn(e)),a=GUe(r),u=i.key,l=qEn(e),c=YEn(e),f=fr("aria",r,s),d=Dk[n].postEncodingTransform?Dk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Dk[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(zr.Main)},encode:{update:Dk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function WEn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function GEn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function YEn(e){if(!e.component.selection)return null;const t=Ne(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ne(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class zqe extends Mqe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,V_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=sh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=$vn(o,s,{graticule:t.data&&wie(t.data)}));const u=this.encoding=M1n(t.encoding||{},a,o.filled,s);this.markDef=_He(o,u,s),this.size=xEn({encoding:u,size:V_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=vHe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>gie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===CVe,r=t&&Ngn.some(i=>Qt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return o8.reduce((r,i)=>{const s=xs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=au(t);return Ie(n)&&(i.domain=n.map(Zu)),Ie(r)&&(i.range=r.map(Zu)),i}initAxes(t){return Th.reduce((n,r)=>{const i=t[r];if(Qt(i)||r===vi&&Qt(t.x2)||r===to&&Qt(t.y2)){const s=Qt(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ne(t),r={};for(const i of n){const s=t[i];r[i]=LO(s)?WUe(s):Zu(s)}return r}initLegends(t){return Hgn.reduce((n,r)=>{const i=xs(t[r]);if(i&&Wgn(r)){const s=i.legend;n[r]=s&&au(s)}return n},{})}parseData(){this.component.data=z8(this)}parseLayoutSize(){oEn(this)}parseSelections(){this.component.selection=Q_n(this,this.selection)}parseMarkGroup(){this.component.mark=UEn(this)}parseAxesAndHeaders(){this.component.axes=mEn(this)}assembleSelectionTopLevelSignals(t){return __n(this,t)}assembleSignals(){return[...tqe(this),...y_n(this,[])]}assembleSelectionData(t){return b_n(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Oie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Vx(this.parent))&&(t=$He(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return U1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return oh(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ba(n)?n:null}}class Uie extends Lie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(x8(a))return new Uie(a,this,this.getName(`layer_${u}`),o,s);if(xm(a))return new zqe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Dre(a))})}parseData(){this.component.data=z8(this);for(const t of this.children)t.parseData()}parseLayoutSize(){iEn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ne(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){yEn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),tqe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Oie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return w_n(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),vqe(this))}}function Vie(e,t,n,r,i){if(m8(e))return new Y2(e,t,n,i);if(x8(e))return new Uie(e,t,n,r,i);if(xm(e))return new zqe(e,t,n,r,i);if(ovn(e))return new fEn(e,t,n,i);throw new Error(Dre(e))}function KEn(e,t={}){t.logger&&fyn(t.logger),t.fieldTitle&&VVe(t.fieldTitle);try{const n=yHe(Tx(t.config,e.config)),r=CHe(e,n),i=Vie(r,null,"",void 0,n);return i.parse(),_wn(i.component.data,i),{spec:QEn(i,XEn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&dyn(),t.fieldTitle&&A1n()}}function XEn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):rt(t)&&(t={type:t}),i&&s&&h_n(t.type)){if(i==="step"&&s==="step")Ue(A_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ue(A_e(s8(o)));const a=o==="width"?"height":"width";t.type=p_n(a)}}return{...Ne(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...tbe(n,!1),...tbe(e,!0)}}function QEn(e,t,n={},r){const i=e.config?bvn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),eEn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...hHe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const JEn=Ign.version,ZEn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:EE,accessPathWithDatum:Tre,compile:KEn,contains:$n,deepEqual:sl,deleteNestedProperty:AL,duplicate:qt,entries:A0,every:Ere,fieldIntersection:Sre,flatAccessWithDatum:CUe,getFirstDefined:Ki,hasIntersection:xre,hash:kn,internalField:OUe,isBoolean:DA,isEmpty:Or,isEqual:Pgn,isInternalField:PUe,isNullOrFalse:OW,isNumeric:Z5,keys:Ne,logicalExpr:W2,mergeDeep:SUe,never:xUe,normalize:CHe,normalizeAngle:MA,omit:wu,pick:wE,prefixGenerator:PW,removePathFromField:Cre,replaceAll:xv,replacePathInField:dc,resetIdCounter:$gn,setEqual:TUe,some:Ev,stringify:Pr,titleCase:AO,unique:xd,uniqueId:IUe,vals:So,varName:yi,version:JEn},Symbol.toStringTag,{value:"Module"}));function Uqe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var exn="vega-themes",txn="2.14.0",nxn="Themes for stylized Vega and Vega-Lite visualizations.",rxn=["vega","vega-lite","themes","style"],ixn="BSD-3-Clause",sxn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},oxn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],axn="build/vega-themes.js",Hie="build/vega-themes.module.js",uxn="build/vega-themes.min.js",lxn="build/vega-themes.min.js",cxn="build/vega-themes.module.d.ts",fxn={type:"git",url:"https://github.com/vega/vega-themes.git"},dxn=["src","build"],hxn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},pxn={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},mxn={vega:"*","vega-lite":"*"},gxn={},yxn={name:exn,version:txn,description:nxn,keywords:rxn,license:ixn,author:sxn,contributors:oxn,main:axn,module:Hie,unpkg:uxn,jsdelivr:lxn,types:cxn,repository:fxn,files:dxn,scripts:hxn,devDependencies:pxn,peerDependencies:mxn,dependencies:gxn};const U_="#fff",$be="#888",vxn={background:"#333",view:{stroke:$be},title:{color:U_,subtitleColor:U_},style:{"guide-label":{fill:U_},"guide-title":{fill:U_}},axis:{domainColor:U_,gridColor:$be,tickColor:U_}},vy="#4572a7",_xn={background:"#fff",arc:{fill:vy},area:{fill:vy},line:{stroke:vy,strokeWidth:2},path:{stroke:vy},rect:{fill:vy},shape:{stroke:vy},symbol:{fill:vy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},_y="#30a2da",ez="#cbcbcb",bxn="#999",wxn="#333",Rbe="#f0f0f0",Nbe="#333",Exn={arc:{fill:_y},area:{fill:_y},axis:{domainColor:ez,grid:!0,gridColor:ez,gridWidth:1,labelColor:bxn,labelFontSize:10,titleColor:wxn,tickColor:ez,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Rbe,group:{fill:Rbe},legend:{labelColor:Nbe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Nbe,titleFontSize:14,titlePadding:10},line:{stroke:_y,strokeWidth:2},path:{stroke:_y,strokeWidth:.5},rect:{fill:_y},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:_y},bar:{binSpacing:2,fill:_y,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},by="#000",xxn={group:{fill:"#e5e5e5"},arc:{fill:by},area:{fill:by},line:{stroke:by},path:{stroke:by},rect:{fill:by},shape:{stroke:by},symbol:{fill:by,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Sxn=22,Txn="normal",Dbe="Benton Gothic, sans-serif",Mbe=11.5,Cxn="normal",wy="#82c6df",tz="Benton Gothic Bold, sans-serif",Lbe="normal",Fbe=13,JS={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Axn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:tz,fontSize:Sxn,fontWeight:Txn},arc:{fill:wy},area:{fill:wy},line:{stroke:wy,strokeWidth:2},path:{stroke:wy},rect:{fill:wy},shape:{stroke:wy},symbol:{fill:wy,size:30},axis:{labelFont:Dbe,labelFontSize:Mbe,labelFontWeight:Cxn,titleFont:tz,titleFontSize:Fbe,titleFontWeight:Lbe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Dbe,labelFontSize:Mbe,symbolType:"square",titleFont:tz,titleFontSize:Fbe,titleFontWeight:Lbe},range:{category:JS["category-6"],diverging:JS["fireandice-6"],heatmap:JS["fire-7"],ordinal:JS["fire-7"],ramp:JS["fire-7"]}},Ey="#ab5787",Mk="#979797",Ixn={background:"#f9f9f9",arc:{fill:Ey},area:{fill:Ey},line:{stroke:Ey},path:{stroke:Ey},rect:{fill:Ey},shape:{stroke:Ey},symbol:{fill:Ey,size:30},axis:{domainColor:Mk,domainWidth:.5,gridWidth:.2,labelColor:Mk,tickColor:Mk,tickWidth:.2,titleColor:Mk},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},xy="#3e5c69",Oxn={background:"#fff",arc:{fill:xy},area:{fill:xy},line:{stroke:xy},path:{stroke:xy},rect:{fill:xy},shape:{stroke:xy},symbol:{fill:xy},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Nl="#1696d2",jbe="#000000",Pxn="#FFFFFF",Lk="Lato",nz="Lato",kxn="Lato",$xn="#DEDDDD",Rxn=18,ZS={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Nxn={background:Pxn,title:{anchor:"start",fontSize:Rxn,font:Lk},axisX:{domain:!0,domainColor:jbe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:nz,labelAngle:0,tickColor:jbe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Lk},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:$xn,gridWidth:1,labelFontSize:12,labelFont:nz,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Lk,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:nz,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Lk,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:ZS["six-groups-cat-1"],diverging:ZS["diverging-colors"],heatmap:ZS["diverging-colors"],ordinal:ZS["six-groups-seq"],ramp:ZS["shades-blue"]},area:{fill:Nl},rect:{fill:Nl},line:{color:Nl,stroke:Nl,strokeWidth:5},trail:{color:Nl,stroke:Nl,strokeWidth:0,size:1},path:{stroke:Nl,strokeWidth:.5},point:{filled:!0},text:{font:kxn,color:Nl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Nl,stroke:null}},arc:{fill:Nl},shape:{stroke:Nl},symbol:{fill:Nl,size:30}},Sy="#3366CC",Bbe="#ccc",Fk="Arial, sans-serif",Dxn={arc:{fill:Sy},area:{fill:Sy},path:{stroke:Sy},rect:{fill:Sy},shape:{stroke:Sy},symbol:{stroke:Sy},circle:{fill:Sy},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Fk,fontSize:12},"guide-title":{font:Fk,fontSize:12},"group-title":{font:Fk,fontSize:12}},title:{font:Fk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Bbe,tickColor:Bbe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},qie=e=>e*(1/3+1),zbe=qie(9),Ube=qie(10),Vbe=qie(12),eT="Segoe UI",Hbe="wf_standard-font, helvetica, arial, sans-serif",qbe="#252423",tT="#605E5C",Wbe="transparent",Mxn="#C8C6C4",Dc="#118DFF",Lxn="#12239E",Fxn="#E66C37",jxn="#6B007B",Bxn="#E044A7",zxn="#744EC2",Uxn="#D9B300",Vxn="#D64550",Vqe=Dc,Hqe="#DEEFFF",Gbe=[Hqe,Vqe],Hxn=[Hqe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Vqe],qxn={view:{stroke:Wbe},background:Wbe,font:eT,header:{titleFont:Hbe,titleFontSize:Vbe,titleColor:qbe,labelFont:eT,labelFontSize:Ube,labelColor:tT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:tT,labelFontSize:zbe,titleFont:Hbe,titleColor:qbe,titleFontSize:Vbe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Mxn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Dc},line:{stroke:Dc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:eT,fontSize:zbe,fill:tT},arc:{fill:Dc},area:{fill:Dc,line:!0,opacity:.6},path:{stroke:Dc},rect:{fill:Dc},point:{fill:Dc,filled:!0,size:75},shape:{stroke:Dc},symbol:{fill:Dc,strokeWidth:1.5,size:50},legend:{titleFont:eT,titleFontWeight:"bold",titleColor:tT,labelFont:eT,labelFontSize:Ube,labelColor:tT,symbolType:"circle",symbolSize:75},range:{category:[Dc,Lxn,Fxn,jxn,Bxn,zxn,Uxn,Vxn],diverging:Gbe,heatmap:Gbe,ordinal:Hxn}},rz='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Ybe=400,Wxn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Gxn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function U8({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?Wxn:Gxn,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:rz,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:rz,fill:r,fontWeight:Ybe},"guide-title":{font:rz,fill:r,fontWeight:Ybe}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Yxn=U8({type:"light",background:"#ffffff"}),Kxn=U8({type:"light",background:"#f4f4f4"}),Xxn=U8({type:"dark",background:"#262626"}),Qxn=U8({type:"dark",background:"#161616"}),Jxn=yxn.version,Zxn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Kxn,carbong100:Qxn,carbong90:Xxn,carbonwhite:Yxn,dark:vxn,excel:_xn,fivethirtyeight:Exn,ggplot2:xxn,googlecharts:Dxn,latimes:Axn,powerbi:qxn,quartz:Ixn,urbaninstitute:Nxn,version:Jxn,vox:Oxn},Symbol.toStringTag,{value:"Module"}));function eSn(e,t,n,r){if(Ie(e))return`[${e.map(i=>t(rt(i)?i:Kbe(i,n))).join(", ")}]`;if(ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(ot(c)&&(c=Kbe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function tSn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Kbe(e,t){return JSON.stringify(e,tSn(t))}var nSn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const qqe="vg-tooltip-element",rSn={offsetX:10,offsetY:10,id:qqe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:iSn,maxDepth:2,formatTooltip:eSn,baseURL:""};function iSn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function sSn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return nSn.toString().replace(qqe,e)}function oSn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class aSn{constructor(t){this.options={...rSn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=sSn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=oSn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var iz={};function uSn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sz,Xbe;function lSn(){return Xbe||(Xbe=1,sz=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),sz}var cSn=ar;ar.Node=$v;ar.create=ar;function ar(e){var t=this;if(t instanceof ar||(t=new ar),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ar.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ar.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ar.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ar.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)dSn(this,arguments[e]);return this.length};ar.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)hSn(this,arguments[e]);return this.length};ar.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ar.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ar.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ar.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ar.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ar.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ar.prototype.map=function(e,t){t=t||this;for(var n=new ar,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ar.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ar,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ar.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ar.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ar.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ar.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ar.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ar.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ar.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=fSn(this,i,n[r]);return s};ar.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function fSn(e,t,n){var r=t===e.head?new $v(n,null,t,e):new $v(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function dSn(e,t){e.tail=new $v(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function hSn(e,t){e.head=new $v(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function $v(e,t,n,r){if(!(this instanceof $v))return new $v(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{lSn()(ar)}catch{}const pSn=cSn,Jy=Symbol("max"),Wh=Symbol("length"),V_=Symbol("lengthCalculator"),K2=Symbol("allowStale"),b1=Symbol("maxAge"),Bh=Symbol("dispose"),Qbe=Symbol("noDisposeOnSet"),Ms=Symbol("lruList"),Mc=Symbol("cache"),Wqe=Symbol("updateAgeOnGet"),oz=()=>1;class mSn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Jy]=t.max||1/0;const n=t.length||oz;if(this[V_]=typeof n!="function"?oz:n,this[K2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[b1]=t.maxAge||0,this[Bh]=t.dispose,this[Qbe]=t.noDisposeOnSet||!1,this[Wqe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Jy]=t||1/0,nT(this)}get max(){return this[Jy]}set allowStale(t){this[K2]=!!t}get allowStale(){return this[K2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[b1]=t,nT(this)}get maxAge(){return this[b1]}set lengthCalculator(t){typeof t!="function"&&(t=oz),t!==this[V_]&&(this[V_]=t,this[Wh]=0,this[Ms].forEach(n=>{n.length=this[V_](n.value,n.key),this[Wh]+=n.length})),nT(this)}get lengthCalculator(){return this[V_]}get length(){return this[Wh]}get itemCount(){return this[Ms].length}rforEach(t,n){n=n||this;for(let r=this[Ms].tail;r!==null;){const i=r.prev;Jbe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ms].head;r!==null;){const i=r.next;Jbe(this,t,r,n),r=i}}keys(){return this[Ms].toArray().map(t=>t.key)}values(){return this[Ms].toArray().map(t=>t.value)}reset(){this[Bh]&&this[Ms]&&this[Ms].length&&this[Ms].forEach(t=>this[Bh](t.key,t.value)),this[Mc]=new Map,this[Ms]=new pSn,this[Wh]=0}dump(){return this[Ms].map(t=>VL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ms]}set(t,n,r){if(r=r||this[b1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[V_](n,t);if(this[Mc].has(t)){if(s>this[Jy])return mw(this,this[Mc].get(t)),!1;const u=this[Mc].get(t).value;return this[Bh]&&(this[Qbe]||this[Bh](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Wh]+=s-u.length,u.length=s,this.get(t),nT(this),!0}const o=new gSn(t,n,s,i,r);return o.length>this[Jy]?(this[Bh]&&this[Bh](t,n),!1):(this[Wh]+=o.length,this[Ms].unshift(o),this[Mc].set(t,this[Ms].head),nT(this),!0)}has(t){if(!this[Mc].has(t))return!1;const n=this[Mc].get(t).value;return!VL(this,n)}get(t){return az(this,t,!0)}peek(t){return az(this,t,!1)}pop(){const t=this[Ms].tail;return t?(mw(this,t),t.value):null}del(t){mw(this,this[Mc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Mc].forEach((t,n)=>az(this,n,!1))}}const az=(e,t,n)=>{const r=e[Mc].get(t);if(r){const i=r.value;if(VL(e,i)){if(mw(e,r),!e[K2])return}else n&&(e[Wqe]&&(r.value.now=Date.now()),e[Ms].unshiftNode(r));return i.value}},VL=(e,t)=>{if(!t||!t.maxAge&&!e[b1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[b1]&&n>e[b1]},nT=e=>{if(e[Wh]>e[Jy])for(let t=e[Ms].tail;e[Wh]>e[Jy]&&t!==null;){const n=t.prev;mw(e,t),t=n}},mw=(e,t)=>{if(t){const n=t.value;e[Bh]&&e[Bh](n.key,n.value),e[Wh]-=n.length,e[Mc].delete(n.key),e[Ms].removeNode(t)}};class gSn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Jbe=(e,t,n,r)=>{let i=n.value;VL(e,i)&&(mw(e,n),e[K2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var ySn=mSn;const vSn=Object.freeze({loose:!0}),_Sn=Object.freeze({}),bSn=e=>e?typeof e!="object"?vSn:e:_Sn;var Wie=bSn,JW={exports:{}};const wSn="2.0.0",Gqe=256,ESn=Number.MAX_SAFE_INTEGER||9007199254740991,xSn=16,SSn=Gqe-6,TSn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Gie={MAX_LENGTH:Gqe,MAX_SAFE_COMPONENT_LENGTH:xSn,MAX_SAFE_BUILD_LENGTH:SSn,MAX_SAFE_INTEGER:ESn,RELEASE_TYPES:TSn,SEMVER_SPEC_VERSION:wSn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const CSn=typeof process=="object"&&iz&&iz.NODE_DEBUG&&/\bsemver\b/i.test(iz.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var V8=CSn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Gie,s=V8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(JW,JW.exports);var Yie=JW.exports;const Zbe=/^[0-9]+$/,Yqe=(e,t)=>{const n=Zbe.test(e),r=Zbe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ASn=(e,t)=>Yqe(t,e);var ISn={compareIdentifiers:Yqe,rcompareIdentifiers:ASn};const jk=V8,{MAX_LENGTH:ewe,MAX_SAFE_INTEGER:Bk}=Gie,{safeRe:twe,t:nwe}=Yie,OSn=Wie,{compareIdentifiers:H_}=ISn;let PSn=class qf{constructor(t,n){if(n=OSn(n),t instanceof qf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ewe)throw new TypeError(`version is longer than ${ewe} characters`);jk("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?twe[nwe.LOOSE]:twe[nwe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Bk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Bk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Bk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<Bk)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(jk("SemVer.compare",this.version,this.options,t),!(t instanceof qf)){if(typeof t=="string"&&t===this.version)return 0;t=new qf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof qf||(t=new qf(t,this.options)),H_(this.major,t.major)||H_(this.minor,t.minor)||H_(this.patch,t.patch)}comparePre(t){if(t instanceof qf||(t=new qf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(jk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return H_(r,i)}while(++n)}compareBuild(t){t instanceof qf||(t=new qf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(jk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return H_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),H_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Kie=PSn;const rwe=Kie,kSn=(e,t,n)=>new rwe(e,n).compare(new rwe(t,n));var Hx=kSn;const $Sn=Hx,RSn=(e,t,n)=>$Sn(e,t,n)===0;var NSn=RSn;const DSn=Hx,MSn=(e,t,n)=>DSn(e,t,n)!==0;var LSn=MSn;const FSn=Hx,jSn=(e,t,n)=>FSn(e,t,n)>0;var BSn=jSn;const zSn=Hx,USn=(e,t,n)=>zSn(e,t,n)>=0;var VSn=USn;const HSn=Hx,qSn=(e,t,n)=>HSn(e,t,n)<0;var WSn=qSn;const GSn=Hx,YSn=(e,t,n)=>GSn(e,t,n)<=0;var KSn=YSn;const XSn=NSn,QSn=LSn,JSn=BSn,ZSn=VSn,eTn=WSn,tTn=KSn,nTn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return XSn(e,n,r);case"!=":return QSn(e,n,r);case">":return JSn(e,n,r);case">=":return ZSn(e,n,r);case"<":return eTn(e,n,r);case"<=":return tTn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var rTn=nTn,uz,iwe;function iTn(){if(iwe)return uz;iwe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}uz=t;const n=Wie,{safeRe:r,t:i}=Yie,s=rTn,o=V8,a=Kie,u=Kqe();return uz}var lz,swe;function Kqe(){if(swe)return lz;swe=1;class e{constructor(R,D){if(D=r(D),R instanceof e)return R.loose===!!D.loose&&R.includePrerelease===!!D.includePrerelease?R:new e(R.raw,D);if(R instanceof i)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=R.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(V=>!p(V[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&m(V[0])){this.set=[V];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+R,V=n.get(L);if(V)return V;const B=this.options.loose,H=B?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];R=R.replace(H,O(this.options.includePrerelease)),s("hyphen replace",R),R=R.replace(a[u.COMPARATORTRIM],l),s("comparator trim",R),R=R.replace(a[u.TILDETRIM],c),s("tilde trim",R),R=R.replace(a[u.CARETTRIM],f),s("caret trim",R);let U=R.split(" ").map(F=>y(F,this.options)).join(" ").split(/\s+/).map(F=>A(F,this.options));B&&(U=U.filter(F=>(s("loose invalid filter",F,this.options),!!F.match(a[u.COMPARATORLOOSE])))),s("range list",U);const k=new Map,$=U.map(F=>new i(F,this.options));for(const F of $){if(p(F))return[F];k.set(F.value,F)}k.size>1&&k.has("")&&k.delete("");const q=[...k.values()];return n.set(L,q),q}intersects(R,D){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,D)&&R.set.some(V=>g(V,D)&&L.every(B=>V.every(H=>B.intersects(H,D)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new o(R,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(z(this.set[D],R,this.options))return!0;return!1}}lz=e;const t=ySn,n=new t({max:1e3}),r=Wie,i=iTn(),s=V8,o=Kie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Yie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Gie,p=M=>M.value==="<0.0.0-0",m=M=>M.value==="",g=(M,R)=>{let D=!0;const L=M.slice();let V=L.pop();for(;D&&L.length;)D=L.every(B=>V.intersects(B,R)),V=L.pop();return D},y=(M,R)=>(s("comp",M,R),M=E(M,R),s("caret",M),M=_(M,R),s("tildes",M),M=x(M,R),s("xrange",M),M=P(M,R),s("stars",M),M),v=M=>!M||M.toLowerCase()==="x"||M==="*",_=(M,R)=>M.trim().split(/\s+/).map(D=>b(D,R)).join(" "),b=(M,R)=>{const D=R.loose?a[u.TILDELOOSE]:a[u.TILDE];return M.replace(D,(L,V,B,H,U)=>{s("tilde",M,L,V,B,H,U);let k;return v(V)?k="":v(B)?k=`>=${V}.0.0 <${+V+1}.0.0-0`:v(H)?k=`>=${V}.${B}.0 <${V}.${+B+1}.0-0`:U?(s("replaceTilde pr",U),k=`>=${V}.${B}.${H}-${U} <${V}.${+B+1}.0-0`):k=`>=${V}.${B}.${H} <${V}.${+B+1}.0-0`,s("tilde return",k),k})},E=(M,R)=>M.trim().split(/\s+/).map(D=>w(D,R)).join(" "),w=(M,R)=>{s("caret",M,R);const D=R.loose?a[u.CARETLOOSE]:a[u.CARET],L=R.includePrerelease?"-0":"";return M.replace(D,(V,B,H,U,k)=>{s("caret",M,V,B,H,U,k);let $;return v(B)?$="":v(H)?$=`>=${B}.0.0${L} <${+B+1}.0.0-0`:v(U)?B==="0"?$=`>=${B}.${H}.0${L} <${B}.${+H+1}.0-0`:$=`>=${B}.${H}.0${L} <${+B+1}.0.0-0`:k?(s("replaceCaret pr",k),B==="0"?H==="0"?$=`>=${B}.${H}.${U}-${k} <${B}.${H}.${+U+1}-0`:$=`>=${B}.${H}.${U}-${k} <${B}.${+H+1}.0-0`:$=`>=${B}.${H}.${U}-${k} <${+B+1}.0.0-0`):(s("no pr"),B==="0"?H==="0"?$=`>=${B}.${H}.${U}${L} <${B}.${H}.${+U+1}-0`:$=`>=${B}.${H}.${U}${L} <${B}.${+H+1}.0-0`:$=`>=${B}.${H}.${U} <${+B+1}.0.0-0`),s("caret return",$),$})},x=(M,R)=>(s("replaceXRanges",M,R),M.split(/\s+/).map(D=>S(D,R)).join(" ")),S=(M,R)=>{M=M.trim();const D=R.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return M.replace(D,(L,V,B,H,U,k)=>{s("xRange",M,L,V,B,H,U,k);const $=v(B),q=$||v(H),F=q||v(U),j=F;return V==="="&&j&&(V=""),k=R.includePrerelease?"-0":"",$?V===">"||V==="<"?L="<0.0.0-0":L="*":V&&j?(q&&(H=0),U=0,V===">"?(V=">=",q?(B=+B+1,H=0,U=0):(H=+H+1,U=0)):V==="<="&&(V="<",q?B=+B+1:H=+H+1),V==="<"&&(k="-0"),L=`${V+B}.${H}.${U}${k}`):q?L=`>=${B}.0.0${k} <${+B+1}.0.0-0`:F&&(L=`>=${B}.${H}.0${k} <${B}.${+H+1}.0-0`),s("xRange return",L),L})},P=(M,R)=>(s("replaceStars",M,R),M.trim().replace(a[u.STAR],"")),A=(M,R)=>(s("replaceGTE0",M,R),M.trim().replace(a[R.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=M=>(R,D,L,V,B,H,U,k,$,q,F,j,Q)=>(v(L)?D="":v(V)?D=`>=${L}.0.0${M?"-0":""}`:v(B)?D=`>=${L}.${V}.0${M?"-0":""}`:H?D=`>=${D}`:D=`>=${D}${M?"-0":""}`,v($)?k="":v(q)?k=`<${+$+1}.0.0-0`:v(F)?k=`<${$}.${+q+1}.0-0`:j?k=`<=${$}.${q}.${F}-${j}`:M?k=`<${$}.${q}.${+F+1}-0`:k=`<=${k}`,`${D} ${k}`.trim()),z=(M,R,D)=>{for(let L=0;L<M.length;L++)if(!M[L].test(R))return!1;if(R.prerelease.length&&!D.includePrerelease){for(let L=0;L<M.length;L++)if(s(M[L].semver),M[L].semver!==i.ANY&&M[L].semver.prerelease.length>0){const V=M[L].semver;if(V.major===R.major&&V.minor===R.minor&&V.patch===R.patch)return!0}return!1}return!0};return lz}const sTn=Kqe(),oTn=(e,t,n)=>{try{t=new sTn(t,n)}catch{return!1}return t.test(e)};var aTn=oTn,Xqe=uSn(aTn);function uTn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var lTn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Qqe(e,...t){for(const n of t)cTn(e,n);return e}function cTn(e,t){for(const n of Object.keys(t))Cx(e,n,t[n],!0)}const Fc=Kmn;let UA=ZEn;const zk=typeof window<"u"?window:void 0;var hwe;UA===void 0&&((hwe=zk==null?void 0:zk.vl)!=null&&hwe.compile)&&(UA=zk.vl);const fTn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},dTn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},GT={vega:"Vega","vega-lite":"Vega-Lite"},HL={vega:Fc.version,"vega-lite":UA?UA.version:"not available"},hTn={vega:e=>e,"vega-lite":(e,t)=>UA.compile(e,{config:t}).spec},pTn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,mTn="chart-wrapper";function gTn(e){return typeof e=="function"}function owe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${GT[r]} JSON Source`}function yTn(e,t){if(e.$schema){const n=Uqe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${GT[n.library]}, but mode argument sets ${GT[t]??t}.`);const r=n.library;return Xqe(HL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${GT[r]} ${n.version}, but the current version of ${GT[r]} is v${HL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Jqe(e){return!!(e&&"load"in e)}function awe(e){return Jqe(e)?e:Fc.loader(e)}function vTn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return rt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function _Tn(e,t,n={}){let r,i;rt(t)?(i=awe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=vTn(r),o=s.loader;(!i||o)&&(i=awe(n.loader??o));const a=await uwe(s,i),u=await uwe(n,i),l={...Qqe(u,a),config:Tx(u.config??{},a.config??{})};return await wTn(e,r,l,i)}async function uwe(e,t){const n=rt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=rt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function bTn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function wTn(e,t,n={},r){const i=n.theme?Tx(Zxn[n.theme],n.config??{}):n.config,s=J0(n.actions)?n.actions:Qqe({},fTn,n.actions??{}),o={...dTn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Fc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:w,rootContainer:x}=bTn(c);if(!w.getElementById(E)){const S=document.createElement("style");S.id=E,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?lTn.toString():n.defaultStyle,x.appendChild(S)}}const f=yTn(t,n.mode);let d=hTn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=Uqe(d.$schema);Xqe(HL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${HL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(mTn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):e5(d,p,!0,!1).newDocument),n.formatLocale&&Fc.formatLocale(n.formatLocale),n.timeFormatLocale&&Fc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const w=n.expressionFunctions[E];"fn"in w?Fc.expressionFunction(E,w.fn,w.visitor):w instanceof Function&&Fc.expressionFunction(E,w)}const{ast:m}=n,g=Fc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Fc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Fc.expressionInterpreter??n.expr??sgn}:{}});if(y.addSignalListener("autosize",(E,w)=>{const{type:x}=w;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:w}=n,x=E&&!Jqe(E)?E==null?void 0:E.baseURL:void 0,S=gTn(w)?w:new aSn({baseURL:x,...w===!0?{}:w}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:w}=typeof v=="boolean"?{}:v;y.hover(E,w)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const S=document.createElement("summary");S.innerHTML=pTn,x.append(S),_=P=>{x.contains(P.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const w=document.createElement("div");if(E.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const S=o[`${x.toUpperCase()}_ACTION`],P=document.createElement("a"),A=ot(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;P.text=S,P.href="#",P.target="_blank",P.download=`${l}.${x}`,P.addEventListener("mousedown",async function(O){O.preventDefault();const z=await y.toImageURL(x,A);this.href=z}),w.append(P)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(S){owe(o7(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),w.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(S){owe(o7(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),w.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(P){uTn(window,x,{config:i,mode:f,renderer:a,spec:o7(t)}),P.preventDefault()}),w.append(S)}}function b(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}function ETn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function xTn(e,t,n){n&&(ETn(n)?n(e.data(t)):e.change(t,Fc.changeset().remove(()=>!0).insert(n)))}function STn(e,t){Object.keys(t).forEach(n=>{xTn(e,n,t[n])})}function Zqe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const eWe=()=>{};function cz(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function TTn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Zqe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!XU(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function lwe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function fz(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function YT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class tWe extends N.PureComponent{constructor(){super(...arguments),YT(this,"containerRef",N.createRef()),YT(this,"resultPromise",void 0),YT(this,"handleError",t=>{const{onError:n=eWe}=this.props;n(t,this.containerRef.current),console.warn(t)}),YT(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Zqe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=TTn(fz(this.props),fz(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!eq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&lwe(a,s),i&&cz(a,i)),a.run()})}else eq(i,s)||this.modifyView(o=>{s&&lwe(o,s),i&&cz(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=fz(this.props);this.resultPromise=_Tn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;cz(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return N.createElement("div",{ref:this.containerRef,className:t,style:n})}}YT(tWe,"propTypes",{className:Lt.string,onError:Lt.func});function ZW(){return ZW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZW.apply(this,arguments)}function eG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const CTn={};class nWe extends N.PureComponent{constructor(){super(...arguments),eG(this,"vegaEmbed",N.createRef()),eG(this,"handleNewView",t=>{this.update();const{onNewView:n=eWe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){eq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{STn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return N.createElement(tWe,ZW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}eG(nWe,"defaultProps",{data:CTn});function tG(){return tG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tG.apply(this,arguments)}function ATn(e){return N.createElement(nWe,tG({},e,{mode:"vega-lite"}))}function cwe(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function ITn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=aT(!1),a=im(),[u,l]=x1(),c=n.filter(A=>A.completed).map(A=>Math.max(...Object.values(A.answers).map(O=>O.endTime))),[f,d]=C.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=C.useMemo(()=>n.filter(A=>A.completed&&cwe(A.answers,f)),[n,f]),p=C.useMemo(()=>n.filter(A=>!A.completed&&cwe(A.answers,f)),[n,f]),m=C.useMemo(()=>{var A,O;return h.length>0?[{Date:(A=f[0])==null?void 0:A.getTime(),Participants:0},...h.map(z=>Math.max(...Object.values(z.answers).map(M=>M.endTime).flat())).sort((z,M)=>z-M).map((z,M)=>({Date:z,Participants:M})),{Date:(O=f[1])==null?void 0:O.getTime(),Participants:h.length}]:[]},[h,f]),g=C.useMemo(()=>{var A,O;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(A=f[0])==null?void 0:A.getTime(),(O=f[1])==null?void 0:O.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:_}]=aT(!1),[b,{close:E,open:w}]=aT(!1),[x,{close:S,open:P}]=aT(!1);return I.jsxs(lm,{children:[I.jsxs(k6,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[I.jsxs(Ur,{align:"center",mb:16,justify:"space-between",children:[I.jsxs(Ur,{direction:"column",children:[I.jsx(Wo,{order:5,mb:4,children:t}),I.jsxs(Ur,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[I.jsxs(T1,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),I.jsxs(T1,{size:"sm",color:"green",children:["Completed:",h.length]}),I.jsxs(T1,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),I.jsxs(Co,{children:[I.jsxs(hi,{opened:y,children:[I.jsx(hi.Target,{children:I.jsx(Xr,{variant:"light",disabled:n.length===0,onClick:()=>{SJ(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:_,onMouseLeave:v,px:4,children:I.jsx(ugt,{})})}),I.jsx(hi.Dropdown,{children:I.jsx(ct,{children:"Download all participants data as JSON"})})]}),I.jsxs(hi,{opened:b,children:[I.jsx(hi.Target,{children:I.jsx(Xr,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:w,onMouseLeave:E,px:4,children:I.jsx(XIe,{})})}),I.jsx(hi.Dropdown,{children:I.jsx(ct,{children:"Download all participants data as a tidy CSV"})})]}),I.jsxs(hi,{opened:x,children:[I.jsx(hi.Target,{children:I.jsx(Xr,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:P,onMouseLeave:S,px:4,children:I.jsx(ogt,{})})}),I.jsx(hi.Dropdown,{children:I.jsx(ct,{children:"Analyze study data"})})]})]})]}),I.jsx(j5e,{label:I.jsx(ct,{children:"Time Filter:"}),placeholder:"Pick dates range",value:f,onChange:d}),m.length>0?I.jsxs(I.Fragment,{children:[I.jsx(ct,{mt:16,children:"Finished Participants"}),I.jsx(ATn,{spec:g,actions:!1})]}):I.jsx(st,{h:293.4,children:I.jsx(Dp,{style:{height:"100%"},children:I.jsx(ct,{children:"Not enough participants for chart"})})})]}),i&&I.jsx(mBt,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function OTn(e){const{globalConfig:t}=e,[n,r]=C.useState(!1),[i,s]=C.useState({}),[o,a]=C.useState({}),{storageEngine:u}=Ru();return C.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await XZ(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),I.jsxs(st,{children:[I.jsx(Wo,{mb:20,order:4,children:"Your Studies:"}),I.jsxs(pu,{children:[t.configsList.map(l=>i[l]&&I.jsx(pu.Col,{md:12,xl:6,children:I.jsx(ITn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),I.jsx(cm,{visible:n})]})]})}function PTn({globalConfig:e}){return I.jsxs(JA,{children:[I.jsx(N2,{studyIds:e.configsList}),I.jsx(lm,{fluid:!0,children:I.jsx(OTn,{globalConfig:e})})]})}function kTn(){const{user:e,triggerAuth:t}=xx(),{storageEngine:n}=Ru(),[r,i]=C.useState(!1),[s,o]=C.useState([]),[a,u]=C.useState(!1),[l,c]=C.useState(!1),[f,d]=C.useState(!1),[h,p]=C.useState(!1),[m,g]=C.useState(""),[y,v]=C.useState(null),_=yke({initialValues:{email:""},validate:{email:lSt("Invalid email")}});C.useEffect(()=>{(async()=>{if(u(!0),n instanceof Vh){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i(O==null?void 0:O.isEnabled);const z=await(n==null?void 0:n.getUserManagementData("adminUsers"));z&&z.adminUsersList&&o(z==null?void 0:z.adminUsersList.map(M=>M.email))}else i(!1);u(!1)})()},[n]);const b=async()=>{if(u(!0),n instanceof Vh){const A=await n5e(n,u);A&&A.email&&v({email:A.email,uid:A.uid}),p(!0)}u(!1)},E=async A=>{u(!0),n instanceof Vh&&A&&(await n.changeAuth(!0),await n.addAdminUser(A),o([A.email]),i(!0),t()),p(!1),u(!1)},w=async()=>{if(u(!0),n instanceof Vh){await n.addAdminUser({email:_.values.email,uid:null});const A=await n.getUserManagementData("adminUsers");o(A==null?void 0:A.adminUsersList.map(O=>O.email))}u(!1),c(!1),_.setValues({email:""})},x=A=>{d(!0),g(A)},S=async()=>{if(u(!0),n instanceof Vh){await n.removeAdminUser(m);const A=await n.getUserManagementData("adminUsers");o(A==null?void 0:A.adminUsersList.map(O=>O.email))}d(!1),u(!1)},P=C.useMemo(()=>n instanceof Vh,[n]);return I.jsxs(I.Fragment,{children:[I.jsx(lm,{children:I.jsxs(k6,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[I.jsx(Wo,{mb:20,order:3,children:"Authentication"}),r?I.jsx(Ur,{children:I.jsx(ct,{children:"Authentication is enabled."})}):I.jsxs(Ur,{justify:"space-between",children:[I.jsx(st,{children:I.jsx(ct,{children:"Authentication is currently disabled."})}),I.jsx(A1,{label:"You can only enable auth when using Firebase",disabled:P,children:I.jsx(Xr,{onClick:A=>P?b():A.preventDefault(),color:"green","data-disabled":P?void 0:!0,sx:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?I.jsxs(Ur,{mt:40,direction:"column",children:[I.jsxs(Ur,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[I.jsx(Wo,{order:6,children:"Enabled Users"}),I.jsx(_gt,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(A=>{var O;return I.jsxs(Ur,{justify:"space-between",mb:10,children:[I.jsx(ct,{children:A}),A===((O=e.user)==null?void 0:O.email)?I.jsx(ct,{color:"blue",size:"xs",children:"You"}):I.jsx(Tw,{variant:"subtle",onClick:()=>x(A),children:I.jsx(vgt,{color:"red"})})]},A)}):null]}):null]})}),I.jsx(vp,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:I.jsxs(st,{component:"form",onSubmit:_.onSubmit(()=>w()),children:[I.jsx($6,{icon:I.jsx(tgt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),I.jsxs(Ur,{mt:30,justify:"right",children:[I.jsx(Xr,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),I.jsx(Xr,{type:"submit",children:"Save"})]})]})}),I.jsxs(vp,{opened:f,size:"large",onClose:()=>d(!1),title:I.jsxs(ct,{fw:700,children:["Remove",m,"?"]}),children:[I.jsxs(ct,{mt:40,children:["Are you sure you want to remove",I.jsx("b",{children:m})," ","as an administrator?"]}),I.jsxs(Ur,{mt:40,justify:"right",children:[I.jsx(Xr,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),I.jsx(Xr,{onClick:()=>S(),children:"Yes, I'm sure."})]})]}),I.jsxs(vp,{opened:h,size:"md",onClose:()=>d(!1),title:I.jsx(ct,{fw:700,children:"Enable Authentication?"}),children:[I.jsxs(ct,{mt:40,children:["User"," ",I.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),I.jsxs(Ur,{mt:40,justify:"right",children:[I.jsx(Xr,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),I.jsx(Xr,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),I.jsx(cm,{visible:a})]})}async function $Tn(){const t=await(await fetch(`${mc}global.json`)).text();return dBt(t)}async function RTn(e){const t={},n=e.configsList.map(o=>`${mc}${e.configs[o].path}`),r=await Promise.all(n.map(o=>fetch(o))),i=await Promise.all(r.map(o=>o.text())),s=await Promise.all(i.map((o,a)=>fLe(o,e.configsList[a])));return e.configsList.forEach((o,a)=>{t[o]=s[a]}),t}function NTn(){const[e,t]=C.useState(null),[n,r]=C.useState({});return C.useEffect(()=>{async function i(){e&&r(await RTn(e))}i()},[e]),C.useEffect(()=>{e||$Tn().then(i=>{t(i)})},[e]),e?I.jsx(LKe,{basename:mc,children:I.jsx(mKt,{children:I.jsx(Bmt,{children:I.jsxs(DKe,{children:[I.jsx(Nh,{path:"/",element:I.jsxs(I.Fragment,{children:[I.jsx(N2,{studyIds:e.configsList}),I.jsx(Kwt,{globalConfig:e,studyConfigs:n})]})}),I.jsx(Nh,{path:"/:studyId/*",element:I.jsx(AKt,{globalConfig:e})}),I.jsx(Nh,{path:"/analysis/dashboard",element:I.jsx(JB,{children:I.jsx(PTn,{globalConfig:e})})}),I.jsx(Nh,{path:"/analysis",element:I.jsx(pH,{to:"/analysis/dashboard"})}),I.jsx(Nh,{path:"/analysis/stats/:studyId/:tab",element:I.jsx(JB,{children:I.jsx(kKt,{globalConfig:e})})}),I.jsx(Nh,{path:"/analysis/stats/:studyId",element:I.jsx(pH,{to:"./table",replace:!0})}),I.jsx(Nh,{path:"/settings",element:I.jsx(JB,{children:I.jsxs(JA,{children:[I.jsx(N2,{studyIds:e.configsList}),I.jsx(kTn,{})]})})}),I.jsx(Nh,{path:"/login",element:I.jsxs(I.Fragment,{children:[I.jsx(N2,{studyIds:e.configsList}),I.jsx($Kt,{})]})})]})})})}):null}let Uk;const DTn=new Uint8Array(16);function MTn(){if(!Uk&&(Uk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Uk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Uk(DTn)}const so=[];for(let e=0;e<256;++e)so.push((e+256).toString(16).slice(1));function LTn(e,t=0){return so[e[t+0]]+so[e[t+1]]+so[e[t+2]]+so[e[t+3]]+"-"+so[e[t+4]]+so[e[t+5]]+"-"+so[e[t+6]]+so[e[t+7]]+"-"+so[e[t+8]]+so[e[t+9]]+"-"+so[e[t+10]]+so[e[t+11]]+so[e[t+12]]+so[e[t+13]]+so[e[t+14]]+so[e[t+15]]}const FTn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fwe={randomUUID:FTn};function dwe(e,t,n){if(fwe.randomUUID&&!t&&!e)return fwe.randomUUID();e=e||{};const r=e.random||(e.rng||MTn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return LTn(r)}class jTn extends JFe{constructor(){super("localStorage");zu(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await XH.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await ow(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await ow(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=dwe();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=XH.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=dwe();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await ow(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function BTn(){let e;{const t=new jTn;await t.connect(),e=t}return e}function zTn(){const{storageEngine:e,setStorageEngine:t}=Ru();return C.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await BTn();t(r)}n()},[t,e]),I.jsx(NTn,{})}dz.createRoot(document.getElementById("root")).render(I.jsx(N.StrictMode,{children:I.jsx(FYe,{children:I.jsx(zTn,{})})}))});export default UTn();
