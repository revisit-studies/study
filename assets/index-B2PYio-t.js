var nje=Object.defineProperty;var rje=(e,t,n)=>t in e?nje(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ije=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fu=(e,t,n)=>(rje(e,typeof t!="symbol"?t+"":t,n),n);var lon=ije((ban,$re)=>{function sje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oje(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var R0e={exports:{}},NM={},N0e={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI=Symbol.for("react.element"),aje=Symbol.for("react.portal"),uje=Symbol.for("react.fragment"),lje=Symbol.for("react.strict_mode"),cje=Symbol.for("react.profiler"),fje=Symbol.for("react.provider"),dje=Symbol.for("react.context"),hje=Symbol.for("react.forward_ref"),pje=Symbol.for("react.suspense"),mje=Symbol.for("react.memo"),gje=Symbol.for("react.lazy"),sie=Symbol.iterator;function yje(e){return e===null||typeof e!="object"?null:(e=sie&&e[sie]||e["@@iterator"],typeof e=="function"?e:null)}var P0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D0e=Object.assign,O0e={};function Ax(e,t,n){this.props=e,this.context=t,this.refs=O0e,this.updater=n||P0e}Ax.prototype.isReactComponent={};Ax.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ax.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $0e(){}$0e.prototype=Ax.prototype;function sq(e,t,n){this.props=e,this.context=t,this.refs=O0e,this.updater=n||P0e}var oq=sq.prototype=new $0e;oq.constructor=sq;D0e(oq,Ax.prototype);oq.isPureReactComponent=!0;var oie=Array.isArray,M0e=Object.prototype.hasOwnProperty,aq={current:null},L0e={key:!0,ref:!0,__self:!0,__source:!0};function F0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)M0e.call(t,r)&&!L0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:NI,type:e,key:s,ref:o,props:i,_owner:aq.current}}function vje(e,t){return{$$typeof:NI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uq(e){return typeof e=="object"&&e!==null&&e.$$typeof===NI}function bje(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var aie=/\/+/g;function C5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bje(""+e.key):t.toString(36)}function IP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case NI:case aje:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+C5(o,0):r,oie(i)?(n="",e!=null&&(n=e.replace(aie,"$&/")+"/"),IP(i,t,n,"",function(l){return l})):i!=null&&(uq(i)&&(i=vje(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(aie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",oie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+C5(s,a);o+=IP(s,t,n,u,i)}else if(u=yje(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+C5(s,a++),o+=IP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function jR(e,t,n){if(e==null)return e;var r=[],i=0;return IP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function _je(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nu={current:null},kP={transition:null},wje={ReactCurrentDispatcher:nu,ReactCurrentBatchConfig:kP,ReactCurrentOwner:aq};function j0e(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:jR,forEach:function(e,t,n){jR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jR(e,function(){t++}),t},toArray:function(e){return jR(e,function(t){return t})||[]},only:function(e){if(!uq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Ax;Mn.Fragment=uje;Mn.Profiler=cje;Mn.PureComponent=sq;Mn.StrictMode=lje;Mn.Suspense=pje;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wje;Mn.act=j0e;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=D0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=aq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)M0e.call(t,u)&&!L0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:NI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:dje,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fje,_context:e},e.Consumer=e};Mn.createElement=F0e;Mn.createFactory=function(e){var t=F0e.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:hje,render:e}};Mn.isValidElement=uq;Mn.lazy=function(e){return{$$typeof:gje,_payload:{_status:-1,_result:e},_init:_je}};Mn.memo=function(e,t){return{$$typeof:mje,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=kP.transition;kP.transition={};try{e()}finally{kP.transition=t}};Mn.unstable_act=j0e;Mn.useCallback=function(e,t){return nu.current.useCallback(e,t)};Mn.useContext=function(e){return nu.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return nu.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return nu.current.useEffect(e,t)};Mn.useId=function(){return nu.current.useId()};Mn.useImperativeHandle=function(e,t,n){return nu.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return nu.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return nu.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return nu.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return nu.current.useReducer(e,t,n)};Mn.useRef=function(e){return nu.current.useRef(e)};Mn.useState=function(e){return nu.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return nu.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return nu.current.useTransition()};Mn.version="18.3.1";N0e.exports=Mn;var R=N0e.exports;const Wi=Wl(R),GD=sje({__proto__:null,default:Wi},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eje=R,xje=Symbol.for("react.element"),Sje=Symbol.for("react.fragment"),Tje=Object.prototype.hasOwnProperty,Aje=Eje.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cje={key:!0,ref:!0,__self:!0,__source:!0};function B0e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Tje.call(t,r)&&!Cje.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:xje,type:e,key:s,ref:o,props:i,_owner:Aje.current}}NM.Fragment=Sje;NM.jsx=B0e;NM.jsxs=B0e;R0e.exports=NM;var _=R0e.exports,EB={},U0e={exports:{}},Gl={},z0e={exports:{}},V0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,q){var D=z.length;z.push(q);e:for(;0<D;){var U=D-1>>>1,W=z[U];if(0<i(W,q))z[U]=q,z[D]=W,D=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],D=z.pop();if(D!==q){z[0]=D;e:for(var U=0,W=z.length,j=W>>>1;U<j;){var H=2*(U+1)-1,G=z[H],ne=H+1,ce=z[ne];if(0>i(G,D))ne<W&&0>i(ce,G)?(z[U]=ce,z[ne]=D,U=ne):(z[U]=G,z[H]=D,U=H);else if(ne<W&&0>i(ce,D))z[U]=ce,z[ne]=D,U=ne;else break e}}return q}function i(z,q){var D=z.sortIndex-q.sortIndex;return D!==0?D:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=z)r(l),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(l)}}function w(z){if(m=!1,b(z),!p)if(n(u)!==null)p=!0,L(E);else{var q=n(l);q!==null&&B(w,q.startTime-z)}}function E(z,q){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var D=d;try{for(b(q),f=n(u);f!==null&&(!(f.expirationTime>q)||z&&!N());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=q);q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(q)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var H=n(l);H!==null&&B(w,H.startTime-q),j=!1}return j}finally{f=null,d=D,h=!1}}var T=!1,S=null,A=-1,C=5,I=-1;function N(){return!(e.unstable_now()-I<C)}function O(){if(S!==null){var z=e.unstable_now();I=z;var q=!0;try{q=S(!0,z)}finally{q?P():(T=!1,S=null)}}else T=!1}var P;if(typeof v=="function")P=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,P=function(){F.postMessage(null)}}else P=function(){g(O,0)};function L(z){S=z,T||(T=!0,P())}function B(z,q){A=g(function(){z(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var D=d;d=q;try{return z()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var D=d;d=z;try{return q()}finally{d=D}},e.unstable_scheduleCallback=function(z,q,D){var U=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?U+D:U):D=U,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,z={id:c++,callback:q,priorityLevel:z,startTime:D,expirationTime:W,sortIndex:-1},D>U?(z.sortIndex=D,t(l,z),n(u)===null&&z===n(l)&&(m?(y(A),A=-1):m=!0,B(w,D-U))):(z.sortIndex=W,t(u,z),p||h||(p=!0,L(E))),z},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(z){var q=d;return function(){var D=d;d=q;try{return z.apply(this,arguments)}finally{d=D}}}})(V0e);z0e.exports=V0e;var Ije=z0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kje=R,Pl=Ije;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H0e=new Set,UA={};function wb(e,t){aE(e,t),aE(e+"Capture",t)}function aE(e,t){for(UA[e]=t,e=0;e<t.length;e++)H0e.add(t[e])}var am=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xB=Object.prototype.hasOwnProperty,Rje=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uie={},lie={};function Nje(e){return xB.call(lie,e)?!0:xB.call(uie,e)?!1:Rje.test(e)?lie[e]=!0:(uie[e]=!0,!1)}function Pje(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dje(e,t,n,r){if(t===null||typeof t>"u"||Pje(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ru(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Mo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mo[e]=new ru(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mo[t]=new ru(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mo[e]=new ru(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mo[e]=new ru(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mo[e]=new ru(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mo[e]=new ru(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mo[e]=new ru(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mo[e]=new ru(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mo[e]=new ru(e,5,!1,e.toLowerCase(),null,!1,!1)});var lq=/[\-:]([a-z])/g;function cq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lq,cq);Mo[t]=new ru(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lq,cq);Mo[t]=new ru(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lq,cq);Mo[t]=new ru(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mo[e]=new ru(e,1,!1,e.toLowerCase(),null,!1,!1)});Mo.xlinkHref=new ru("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mo[e]=new ru(e,1,!1,e.toLowerCase(),null,!0,!0)});function fq(e,t,n,r){var i=Mo.hasOwnProperty(t)?Mo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dje(t,n,i,r)&&(n=null),r||i===null?Nje(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fm=kje.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,BR=Symbol.for("react.element"),X_=Symbol.for("react.portal"),Q_=Symbol.for("react.fragment"),dq=Symbol.for("react.strict_mode"),SB=Symbol.for("react.profiler"),q0e=Symbol.for("react.provider"),W0e=Symbol.for("react.context"),hq=Symbol.for("react.forward_ref"),TB=Symbol.for("react.suspense"),AB=Symbol.for("react.suspense_list"),pq=Symbol.for("react.memo"),Sg=Symbol.for("react.lazy"),G0e=Symbol.for("react.offscreen"),cie=Symbol.iterator;function KS(e){return e===null||typeof e!="object"?null:(e=cie&&e[cie]||e["@@iterator"],typeof e=="function"?e:null)}var Pi=Object.assign,I5;function XT(e){if(I5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I5=t&&t[1]||""}return`
`+I5+e}var k5=!1;function R5(e,t){if(!e||k5)return"";k5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{k5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?XT(e):""}function Oje(e){switch(e.tag){case 5:return XT(e.type);case 16:return XT("Lazy");case 13:return XT("Suspense");case 19:return XT("SuspenseList");case 0:case 2:case 15:return e=R5(e.type,!1),e;case 11:return e=R5(e.type.render,!1),e;case 1:return e=R5(e.type,!0),e;default:return""}}function CB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q_:return"Fragment";case X_:return"Portal";case SB:return"Profiler";case dq:return"StrictMode";case TB:return"Suspense";case AB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W0e:return(e.displayName||"Context")+".Consumer";case q0e:return(e._context.displayName||"Context")+".Provider";case hq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pq:return t=e.displayName||null,t!==null?t:CB(e.type)||"Memo";case Sg:t=e._payload,e=e._init;try{return CB(e(t))}catch{}}return null}function $je(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CB(t);case 8:return t===dq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function R0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y0e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mje(e){var t=Y0e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function UR(e){e._valueTracker||(e._valueTracker=Mje(e))}function K0e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y0e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function YD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function IB(e,t){var n=t.checked;return Pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function fie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=R0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X0e(e,t){t=t.checked,t!=null&&fq(e,"checked",t,!1)}function kB(e,t){X0e(e,t);var n=R0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?RB(e,t.type,n):t.hasOwnProperty("defaultValue")&&RB(e,t.type,R0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function die(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function RB(e,t,n){(t!=="number"||YD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var QT=Array.isArray;function Ew(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+R0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function NB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(QT(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:R0(n)}}function Q0e(e,t){var n=R0(t.value),r=R0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function J0e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?J0e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zR,Z0e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zR=zR||document.createElement("div"),zR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var B2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lje=["Webkit","ms","Moz","O"];Object.keys(B2).forEach(function(e){Lje.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),B2[t]=B2[e]})});function eye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||B2.hasOwnProperty(e)&&B2[e]?(""+t).trim():t+"px"}function tye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Fje=Pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function DB(e,t){if(t){if(Fje[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function OB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $B=null;function mq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var MB=null,xw=null,Sw=null;function mie(e){if(e=OI(e)){if(typeof MB!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=MM(t),MB(e.stateNode,e.type,t))}}function nye(e){xw?Sw?Sw.push(e):Sw=[e]:xw=e}function rye(){if(xw){var e=xw,t=Sw;if(Sw=xw=null,mie(e),t)for(e=0;e<t.length;e++)mie(t[e])}}function iye(e,t){return e(t)}function sye(){}var N5=!1;function oye(e,t,n){if(N5)return e(t,n);N5=!0;try{return iye(e,t,n)}finally{N5=!1,(xw!==null||Sw!==null)&&(sye(),rye())}}function VA(e,t){var n=e.stateNode;if(n===null)return null;var r=MM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var LB=!1;if(am)try{var XS={};Object.defineProperty(XS,"passive",{get:function(){LB=!0}}),window.addEventListener("test",XS,XS),window.removeEventListener("test",XS,XS)}catch{LB=!1}function jje(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var U2=!1,KD=null,XD=!1,FB=null,Bje={onError:function(e){U2=!0,KD=e}};function Uje(e,t,n,r,i,s,o,a,u){U2=!1,KD=null,jje.apply(Bje,arguments)}function zje(e,t,n,r,i,s,o,a,u){if(Uje.apply(this,arguments),U2){if(U2){var l=KD;U2=!1,KD=null}else throw Error(tt(198));XD||(XD=!0,FB=l)}}function Eb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function aye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gie(e){if(Eb(e)!==e)throw Error(tt(188))}function Vje(e){var t=e.alternate;if(!t){if(t=Eb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gie(i),e;if(s===r)return gie(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function uye(e){return e=Vje(e),e!==null?lye(e):null}function lye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lye(e);if(t!==null)return t;e=e.sibling}return null}var cye=Pl.unstable_scheduleCallback,yie=Pl.unstable_cancelCallback,Hje=Pl.unstable_shouldYield,qje=Pl.unstable_requestPaint,rs=Pl.unstable_now,Wje=Pl.unstable_getCurrentPriorityLevel,gq=Pl.unstable_ImmediatePriority,fye=Pl.unstable_UserBlockingPriority,QD=Pl.unstable_NormalPriority,Gje=Pl.unstable_LowPriority,dye=Pl.unstable_IdlePriority,PM=null,eh=null;function Yje(e){if(eh&&typeof eh.onCommitFiberRoot=="function")try{eh.onCommitFiberRoot(PM,e,void 0,(e.current.flags&128)===128)}catch{}}var Nf=Math.clz32?Math.clz32:Qje,Kje=Math.log,Xje=Math.LN2;function Qje(e){return e>>>=0,e===0?32:31-(Kje(e)/Xje|0)|0}var VR=64,HR=4194304;function JT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function JD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=JT(a):(s&=o,s!==0&&(r=JT(s)))}else o=n&~i,o!==0?r=JT(o):s!==0&&(r=JT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nf(t),i=1<<n,r|=e[n],t&=~i;return r}function Jje(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zje(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Nf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Jje(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function jB(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hye(){var e=VR;return VR<<=1,!(VR&4194240)&&(VR=64),e}function P5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function PI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nf(t),e[t]=n}function e8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Nf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function yq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dr=0;function pye(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mye,vq,gye,yye,vye,BB=!1,qR=[],i0=null,s0=null,o0=null,HA=new Map,qA=new Map,Dg=[],t8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vie(e,t){switch(e){case"focusin":case"focusout":i0=null;break;case"dragenter":case"dragleave":s0=null;break;case"mouseover":case"mouseout":o0=null;break;case"pointerover":case"pointerout":HA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qA.delete(t.pointerId)}}function QS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=OI(t),t!==null&&vq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function n8e(e,t,n,r,i){switch(t){case"focusin":return i0=QS(i0,e,t,n,r,i),!0;case"dragenter":return s0=QS(s0,e,t,n,r,i),!0;case"mouseover":return o0=QS(o0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return HA.set(s,QS(HA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qA.set(s,QS(qA.get(s)||null,e,t,n,r,i)),!0}return!1}function bye(e){var t=q1(e.target);if(t!==null){var n=Eb(t);if(n!==null){if(t=n.tag,t===13){if(t=aye(n),t!==null){e.blockedOn=t,vye(e.priority,function(){gye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function RP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=UB(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$B=r,n.target.dispatchEvent(r),$B=null}else return t=OI(n),t!==null&&vq(t),e.blockedOn=n,!1;t.shift()}return!0}function bie(e,t,n){RP(e)&&n.delete(t)}function r8e(){BB=!1,i0!==null&&RP(i0)&&(i0=null),s0!==null&&RP(s0)&&(s0=null),o0!==null&&RP(o0)&&(o0=null),HA.forEach(bie),qA.forEach(bie)}function JS(e,t){e.blockedOn===t&&(e.blockedOn=null,BB||(BB=!0,Pl.unstable_scheduleCallback(Pl.unstable_NormalPriority,r8e)))}function WA(e){function t(i){return JS(i,e)}if(0<qR.length){JS(qR[0],e);for(var n=1;n<qR.length;n++){var r=qR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(i0!==null&&JS(i0,e),s0!==null&&JS(s0,e),o0!==null&&JS(o0,e),HA.forEach(t),qA.forEach(t),n=0;n<Dg.length;n++)r=Dg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Dg.length&&(n=Dg[0],n.blockedOn===null);)bye(n),n.blockedOn===null&&Dg.shift()}var Tw=Fm.ReactCurrentBatchConfig,ZD=!0;function i8e(e,t,n,r){var i=Dr,s=Tw.transition;Tw.transition=null;try{Dr=1,bq(e,t,n,r)}finally{Dr=i,Tw.transition=s}}function s8e(e,t,n,r){var i=Dr,s=Tw.transition;Tw.transition=null;try{Dr=4,bq(e,t,n,r)}finally{Dr=i,Tw.transition=s}}function bq(e,t,n,r){if(ZD){var i=UB(e,t,n,r);if(i===null)z5(e,t,r,eO,n),vie(e,r);else if(n8e(i,e,t,n,r))r.stopPropagation();else if(vie(e,r),t&4&&-1<t8e.indexOf(e)){for(;i!==null;){var s=OI(i);if(s!==null&&mye(s),s=UB(e,t,n,r),s===null&&z5(e,t,r,eO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else z5(e,t,r,null,n)}}var eO=null;function UB(e,t,n,r){if(eO=null,e=mq(r),e=q1(e),e!==null)if(t=Eb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=aye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return eO=e,null}function _ye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wje()){case gq:return 1;case fye:return 4;case QD:case Gje:return 16;case dye:return 536870912;default:return 16}default:return 16}}var Vg=null,_q=null,NP=null;function wye(){if(NP)return NP;var e,t=_q,n=t.length,r,i="value"in Vg?Vg.value:Vg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return NP=i.slice(e,1<r?1-r:void 0)}function PP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function WR(){return!0}function _ie(){return!1}function Yl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?WR:_ie,this.isPropagationStopped=_ie,this}return Pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=WR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=WR)},persist:function(){},isPersistent:WR}),t}var Cx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wq=Yl(Cx),DI=Pi({},Cx,{view:0,detail:0}),o8e=Yl(DI),D5,O5,ZS,DM=Pi({},DI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ZS&&(ZS&&e.type==="mousemove"?(D5=e.screenX-ZS.screenX,O5=e.screenY-ZS.screenY):O5=D5=0,ZS=e),D5)},movementY:function(e){return"movementY"in e?e.movementY:O5}}),wie=Yl(DM),a8e=Pi({},DM,{dataTransfer:0}),u8e=Yl(a8e),l8e=Pi({},DI,{relatedTarget:0}),$5=Yl(l8e),c8e=Pi({},Cx,{animationName:0,elapsedTime:0,pseudoElement:0}),f8e=Yl(c8e),d8e=Pi({},Cx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h8e=Yl(d8e),p8e=Pi({},Cx,{data:0}),Eie=Yl(p8e),m8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v8e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y8e[e])?!!t[e]:!1}function Eq(){return v8e}var b8e=Pi({},DI,{key:function(e){if(e.key){var t=m8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=PP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g8e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eq,charCode:function(e){return e.type==="keypress"?PP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?PP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_8e=Yl(b8e),w8e=Pi({},DM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xie=Yl(w8e),E8e=Pi({},DI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eq}),x8e=Yl(E8e),S8e=Pi({},Cx,{propertyName:0,elapsedTime:0,pseudoElement:0}),T8e=Yl(S8e),A8e=Pi({},DM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C8e=Yl(A8e),I8e=[9,13,27,32],xq=am&&"CompositionEvent"in window,z2=null;am&&"documentMode"in document&&(z2=document.documentMode);var k8e=am&&"TextEvent"in window&&!z2,Eye=am&&(!xq||z2&&8<z2&&11>=z2),Sie=" ",Tie=!1;function xye(e,t){switch(e){case"keyup":return I8e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var J_=!1;function R8e(e,t){switch(e){case"compositionend":return Sye(t);case"keypress":return t.which!==32?null:(Tie=!0,Sie);case"textInput":return e=t.data,e===Sie&&Tie?null:e;default:return null}}function N8e(e,t){if(J_)return e==="compositionend"||!xq&&xye(e,t)?(e=wye(),NP=_q=Vg=null,J_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Eye&&t.locale!=="ko"?null:t.data;default:return null}}var P8e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Aie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!P8e[e.type]:t==="textarea"}function Tye(e,t,n,r){nye(r),t=tO(t,"onChange"),0<t.length&&(n=new wq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var V2=null,GA=null;function D8e(e){Mye(e,0)}function OM(e){var t=tw(e);if(K0e(t))return e}function O8e(e,t){if(e==="change")return t}var Aye=!1;if(am){var M5;if(am){var L5="oninput"in document;if(!L5){var Cie=document.createElement("div");Cie.setAttribute("oninput","return;"),L5=typeof Cie.oninput=="function"}M5=L5}else M5=!1;Aye=M5&&(!document.documentMode||9<document.documentMode)}function Iie(){V2&&(V2.detachEvent("onpropertychange",Cye),GA=V2=null)}function Cye(e){if(e.propertyName==="value"&&OM(GA)){var t=[];Tye(t,GA,e,mq(e)),oye(D8e,t)}}function $8e(e,t,n){e==="focusin"?(Iie(),V2=t,GA=n,V2.attachEvent("onpropertychange",Cye)):e==="focusout"&&Iie()}function M8e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return OM(GA)}function L8e(e,t){if(e==="click")return OM(t)}function F8e(e,t){if(e==="input"||e==="change")return OM(t)}function j8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bf=typeof Object.is=="function"?Object.is:j8e;function YA(e,t){if(Bf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xB.call(t,i)||!Bf(e[i],t[i]))return!1}return!0}function kie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rie(e,t){var n=kie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kie(n)}}function Iye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Iye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kye(){for(var e=window,t=YD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=YD(e.document)}return t}function Sq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B8e(e){var t=kye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Iye(n.ownerDocument.documentElement,n)){if(r!==null&&Sq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Rie(n,s);var o=Rie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var U8e=am&&"documentMode"in document&&11>=document.documentMode,Z_=null,zB=null,H2=null,VB=!1;function Nie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;VB||Z_==null||Z_!==YD(r)||(r=Z_,"selectionStart"in r&&Sq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),H2&&YA(H2,r)||(H2=r,r=tO(zB,"onSelect"),0<r.length&&(t=new wq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Z_)))}function GR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ew={animationend:GR("Animation","AnimationEnd"),animationiteration:GR("Animation","AnimationIteration"),animationstart:GR("Animation","AnimationStart"),transitionend:GR("Transition","TransitionEnd")},F5={},Rye={};am&&(Rye=document.createElement("div").style,"AnimationEvent"in window||(delete ew.animationend.animation,delete ew.animationiteration.animation,delete ew.animationstart.animation),"TransitionEvent"in window||delete ew.transitionend.transition);function $M(e){if(F5[e])return F5[e];if(!ew[e])return e;var t=ew[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rye)return F5[e]=t[n];return e}var Nye=$M("animationend"),Pye=$M("animationiteration"),Dye=$M("animationstart"),Oye=$M("transitionend"),$ye=new Map,Pie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vy(e,t){$ye.set(e,t),wb(t,[e])}for(var j5=0;j5<Pie.length;j5++){var B5=Pie[j5],z8e=B5.toLowerCase(),V8e=B5[0].toUpperCase()+B5.slice(1);vy(z8e,"on"+V8e)}vy(Nye,"onAnimationEnd");vy(Pye,"onAnimationIteration");vy(Dye,"onAnimationStart");vy("dblclick","onDoubleClick");vy("focusin","onFocus");vy("focusout","onBlur");vy(Oye,"onTransitionEnd");aE("onMouseEnter",["mouseout","mouseover"]);aE("onMouseLeave",["mouseout","mouseover"]);aE("onPointerEnter",["pointerout","pointerover"]);aE("onPointerLeave",["pointerout","pointerover"]);wb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wb("onBeforeInput",["compositionend","keypress","textInput","paste"]);wb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ZT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H8e=new Set("cancel close invalid load scroll toggle".split(" ").concat(ZT));function Die(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zje(r,t,void 0,e),e.currentTarget=null}function Mye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Die(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Die(i,a,l),s=u}}}if(XD)throw e=FB,XD=!1,FB=null,e}function oi(e,t){var n=t[YB];n===void 0&&(n=t[YB]=new Set);var r=e+"__bubble";n.has(r)||(Lye(t,e,2,!1),n.add(r))}function U5(e,t,n){var r=0;t&&(r|=4),Lye(n,e,r,t)}var YR="_reactListening"+Math.random().toString(36).slice(2);function KA(e){if(!e[YR]){e[YR]=!0,H0e.forEach(function(n){n!=="selectionchange"&&(H8e.has(n)||U5(n,!1,e),U5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[YR]||(t[YR]=!0,U5("selectionchange",!1,t))}}function Lye(e,t,n,r){switch(_ye(t)){case 1:var i=i8e;break;case 4:i=s8e;break;default:i=bq}n=i.bind(null,t,n,e),i=void 0,!LB||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function z5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=q1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}oye(function(){var l=s,c=mq(n),f=[];e:{var d=$ye.get(e);if(d!==void 0){var h=wq,p=e;switch(e){case"keypress":if(PP(n)===0)break e;case"keydown":case"keyup":h=_8e;break;case"focusin":p="focus",h=$5;break;case"focusout":p="blur",h=$5;break;case"beforeblur":case"afterblur":h=$5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=u8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=x8e;break;case Nye:case Pye:case Dye:h=f8e;break;case Oye:h=T8e;break;case"scroll":h=o8e;break;case"wheel":h=C8e;break;case"copy":case"cut":case"paste":h=h8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=xie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=VA(v,y),w!=null&&m.push(XA(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==$B&&(p=n.relatedTarget||n.fromElement)&&(q1(p)||p[um]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?q1(p):null,p!==null&&(g=Eb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=wie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=xie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:tw(h),b=p==null?d:tw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,q1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=l_(b))v++;for(b=0,w=y;w;w=l_(w))b++;for(;0<v-b;)m=l_(m),v--;for(;0<b-v;)y=l_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=l_(m),y=l_(y)}m=null}else m=null;h!==null&&Oie(f,d,h,m,!1),p!==null&&g!==null&&Oie(f,g,p,m,!0)}}e:{if(d=l?tw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=O8e;else if(Aie(d))if(Aye)E=F8e;else{E=M8e;var T=$8e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=L8e);if(E&&(E=E(e,l))){Tye(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&RB(d,"number",d.value)}switch(T=l?tw(l):window,e){case"focusin":(Aie(T)||T.contentEditable==="true")&&(Z_=T,zB=l,H2=null);break;case"focusout":H2=zB=Z_=null;break;case"mousedown":VB=!0;break;case"contextmenu":case"mouseup":case"dragend":VB=!1,Nie(f,n,c);break;case"selectionchange":if(U8e)break;case"keydown":case"keyup":Nie(f,n,c)}var S;if(xq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else J_?xye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Eye&&n.locale!=="ko"&&(J_||A!=="onCompositionStart"?A==="onCompositionEnd"&&J_&&(S=wye()):(Vg=c,_q="value"in Vg?Vg.value:Vg.textContent,J_=!0)),T=tO(l,A),0<T.length&&(A=new Eie(A,e,null,n,c),f.push({event:A,listeners:T}),S?A.data=S:(S=Sye(n),S!==null&&(A.data=S)))),(S=k8e?R8e(e,n):N8e(e,n))&&(l=tO(l,"onBeforeInput"),0<l.length&&(c=new Eie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}Mye(f,t)})}function XA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=VA(e,n),s!=null&&r.unshift(XA(e,s,i)),s=VA(e,t),s!=null&&r.push(XA(e,s,i))),e=e.return}return r}function l_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=VA(n,s),u!=null&&o.unshift(XA(n,u,a))):i||(u=VA(n,s),u!=null&&o.push(XA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var q8e=/\r\n?/g,W8e=/\u0000|\uFFFD/g;function $ie(e){return(typeof e=="string"?e:""+e).replace(q8e,`
`).replace(W8e,"")}function KR(e,t,n){if(t=$ie(t),$ie(e)!==t&&n)throw Error(tt(425))}function nO(){}var HB=null,qB=null;function WB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var GB=typeof setTimeout=="function"?setTimeout:void 0,G8e=typeof clearTimeout=="function"?clearTimeout:void 0,Mie=typeof Promise=="function"?Promise:void 0,Y8e=typeof queueMicrotask=="function"?queueMicrotask:typeof Mie<"u"?function(e){return Mie.resolve(null).then(e).catch(K8e)}:GB;function K8e(e){setTimeout(function(){throw e})}function V5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),WA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);WA(t)}function a0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ix=Math.random().toString(36).slice(2),Pd="__reactFiber$"+Ix,QA="__reactProps$"+Ix,um="__reactContainer$"+Ix,YB="__reactEvents$"+Ix,X8e="__reactListeners$"+Ix,Q8e="__reactHandles$"+Ix;function q1(e){var t=e[Pd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[um]||n[Pd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lie(e);e!==null;){if(n=e[Pd])return n;e=Lie(e)}return t}e=n,n=e.parentNode}return null}function OI(e){return e=e[Pd]||e[um],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function MM(e){return e[QA]||null}var KB=[],nw=-1;function by(e){return{current:e}}function fi(e){0>nw||(e.current=KB[nw],KB[nw]=null,nw--)}function ti(e,t){nw++,KB[nw]=e.current,e.current=t}var N0={},va=by(N0),Mu=by(!1),kv=N0;function uE(e,t){var n=e.type.contextTypes;if(!n)return N0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lu(e){return e=e.childContextTypes,e!=null}function rO(){fi(Mu),fi(va)}function Fie(e,t,n){if(va.current!==N0)throw Error(tt(168));ti(va,t),ti(Mu,n)}function Fye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,$je(e)||"Unknown",i));return Pi({},n,r)}function iO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||N0,kv=va.current,ti(va,e),ti(Mu,Mu.current),!0}function jie(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=Fye(e,t,kv),r.__reactInternalMemoizedMergedChildContext=e,fi(Mu),fi(va),ti(va,e)):fi(Mu),ti(Mu,n)}var Sp=null,LM=!1,H5=!1;function jye(e){Sp===null?Sp=[e]:Sp.push(e)}function J8e(e){LM=!0,jye(e)}function _y(){if(!H5&&Sp!==null){H5=!0;var e=0,t=Dr;try{var n=Sp;for(Dr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Sp=null,LM=!1}catch(i){throw Sp!==null&&(Sp=Sp.slice(e+1)),cye(gq,_y),i}finally{Dr=t,H5=!1}}return null}var rw=[],iw=0,sO=null,oO=0,lc=[],cc=0,Rv=null,Mp=1,Lp="";function y1(e,t){rw[iw++]=oO,rw[iw++]=sO,sO=e,oO=t}function Bye(e,t,n){lc[cc++]=Mp,lc[cc++]=Lp,lc[cc++]=Rv,Rv=e;var r=Mp;e=Lp;var i=32-Nf(r)-1;r&=~(1<<i),n+=1;var s=32-Nf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Mp=1<<32-Nf(t)+i|n<<i|r,Lp=s+e}else Mp=1<<s|n<<i|r,Lp=e}function Tq(e){e.return!==null&&(y1(e,1),Bye(e,1,0))}function Aq(e){for(;e===sO;)sO=rw[--iw],rw[iw]=null,oO=rw[--iw],rw[iw]=null;for(;e===Rv;)Rv=lc[--cc],lc[cc]=null,Lp=lc[--cc],lc[cc]=null,Mp=lc[--cc],lc[cc]=null}var Cl=null,bl=null,wi=!1,pf=null;function Uye(e,t){var n=vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cl=e,bl=a0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cl=e,bl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rv!==null?{id:Mp,overflow:Lp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Cl=e,bl=null,!0):!1;default:return!1}}function XB(e){return(e.mode&1)!==0&&(e.flags&128)===0}function QB(e){if(wi){var t=bl;if(t){var n=t;if(!Bie(e,t)){if(XB(e))throw Error(tt(418));t=a0(n.nextSibling);var r=Cl;t&&Bie(e,t)?Uye(r,n):(e.flags=e.flags&-4097|2,wi=!1,Cl=e)}}else{if(XB(e))throw Error(tt(418));e.flags=e.flags&-4097|2,wi=!1,Cl=e}}}function Uie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cl=e}function XR(e){if(e!==Cl)return!1;if(!wi)return Uie(e),wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!WB(e.type,e.memoizedProps)),t&&(t=bl)){if(XB(e))throw zye(),Error(tt(418));for(;t;)Uye(e,t),t=a0(t.nextSibling)}if(Uie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bl=a0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bl=null}}else bl=Cl?a0(e.stateNode.nextSibling):null;return!0}function zye(){for(var e=bl;e;)e=a0(e.nextSibling)}function lE(){bl=Cl=null,wi=!1}function Cq(e){pf===null?pf=[e]:pf.push(e)}var Z8e=Fm.ReactCurrentBatchConfig;function eT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function QR(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zie(e){var t=e._init;return t(e._payload)}function Vye(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=f0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=Q5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===Q_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Sg&&zie(E)===v.type)?(w=i(v,b.props),w.ref=eT(y,v,b),w.return=y,w):(w=jP(b.type,b.key,b.props,null,y.mode,w),w.ref=eT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=J5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=dv(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Q5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case BR:return b=jP(v.type,v.key,v.props,null,y.mode,b),b.ref=eT(y,null,v),b.return=y,b;case X_:return v=J5(v,y.mode,b),v.return=y,v;case Sg:var w=v._init;return f(y,w(v._payload),b)}if(QT(v)||KS(v))return v=dv(v,y.mode,b,null),v.return=y,v;QR(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case BR:return b.key===E?u(y,v,b,w):null;case X_:return b.key===E?l(y,v,b,w):null;case Sg:return E=b._init,d(y,v,E(b._payload),w)}if(QT(b)||KS(b))return E!==null?null:c(y,v,b,w,null);QR(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case BR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case X_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Sg:var T=w._init;return h(y,v,b,T(w._payload),E)}if(QT(w)||KS(w))return y=y.get(b)||null,c(v,y,w,E,null);QR(v,w)}return null}function p(y,v,b,w){for(var E=null,T=null,S=v,A=v=0,C=null;S!==null&&A<b.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var I=d(y,S,b[A],w);if(I===null){S===null&&(S=C);break}e&&S&&I.alternate===null&&t(y,S),v=s(I,v,A),T===null?E=I:T.sibling=I,T=I,S=C}if(A===b.length)return n(y,S),wi&&y1(y,A),E;if(S===null){for(;A<b.length;A++)S=f(y,b[A],w),S!==null&&(v=s(S,v,A),T===null?E=S:T.sibling=S,T=S);return wi&&y1(y,A),E}for(S=r(y,S);A<b.length;A++)C=h(S,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),v=s(C,v,A),T===null?E=C:T.sibling=C,T=C);return e&&S.forEach(function(N){return t(y,N)}),wi&&y1(y,A),E}function m(y,v,b,w){var E=KS(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var T=E=null,S=v,A=v=0,C=null,I=b.next();S!==null&&!I.done;A++,I=b.next()){S.index>A?(C=S,S=null):C=S.sibling;var N=d(y,S,I.value,w);if(N===null){S===null&&(S=C);break}e&&S&&N.alternate===null&&t(y,S),v=s(N,v,A),T===null?E=N:T.sibling=N,T=N,S=C}if(I.done)return n(y,S),wi&&y1(y,A),E;if(S===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,A),T===null?E=I:T.sibling=I,T=I);return wi&&y1(y,A),E}for(S=r(y,S);!I.done;A++,I=b.next())I=h(S,y,A,I.value,w),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?A:I.key),v=s(I,v,A),T===null?E=I:T.sibling=I,T=I);return e&&S.forEach(function(O){return t(y,O)}),wi&&y1(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===Q_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case BR:e:{for(var E=b.key,T=v;T!==null;){if(T.key===E){if(E=b.type,E===Q_){if(T.tag===7){n(y,T.sibling),v=i(T,b.props.children),v.return=y,y=v;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Sg&&zie(E)===T.type){n(y,T.sibling),v=i(T,b.props),v.ref=eT(y,T,b),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}b.type===Q_?(v=dv(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=jP(b.type,b.key,b.props,null,y.mode,w),w.ref=eT(y,v,b),w.return=y,y=w)}return o(y);case X_:e:{for(T=b.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=J5(b,y.mode,w),v.return=y,y=v}return o(y);case Sg:return T=b._init,g(y,v,T(b._payload),w)}if(QT(b))return p(y,v,b,w);if(KS(b))return m(y,v,b,w);QR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=Q5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var cE=Vye(!0),Hye=Vye(!1),aO=by(null),uO=null,sw=null,Iq=null;function kq(){Iq=sw=uO=null}function Rq(e){var t=aO.current;fi(aO),e._currentValue=t}function JB(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aw(e,t){uO=e,Iq=sw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ru=!0),e.firstContext=null)}function Ac(e){var t=e._currentValue;if(Iq!==e)if(e={context:e,memoizedValue:t,next:null},sw===null){if(uO===null)throw Error(tt(308));sw=e,uO.dependencies={lanes:0,firstContext:e}}else sw=sw.next=e;return t}var W1=null;function Nq(e){W1===null?W1=[e]:W1.push(e)}function qye(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Nq(t)):(n.next=i.next,i.next=n),t.interleaved=n,lm(e,r)}function lm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Tg=!1;function Pq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wye(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function u0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,lm(e,n)}return i=r.interleaved,i===null?(t.next=t,Nq(r)):(t.next=i.next,i.next=t),r.interleaved=t,lm(e,n)}function DP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yq(e,n)}}function Vie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lO(e,t,n,r){var i=e.updateQueue;Tg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Pi({},f,d);break e;case 2:Tg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Pv|=o,e.lanes=o,e.memoizedState=f}}function Hie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var $I={},th=by($I),JA=by($I),ZA=by($I);function G1(e){if(e===$I)throw Error(tt(174));return e}function Dq(e,t){switch(ti(ZA,t),ti(JA,e),ti(th,$I),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:PB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=PB(t,e)}fi(th),ti(th,t)}function fE(){fi(th),fi(JA),fi(ZA)}function Gye(e){G1(ZA.current);var t=G1(th.current),n=PB(t,e.type);t!==n&&(ti(JA,e),ti(th,n))}function Oq(e){JA.current===e&&(fi(th),fi(JA))}var Ri=by(0);function cO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var q5=[];function $q(){for(var e=0;e<q5.length;e++)q5[e]._workInProgressVersionPrimary=null;q5.length=0}var OP=Fm.ReactCurrentDispatcher,W5=Fm.ReactCurrentBatchConfig,Nv=0,Ni=null,ks=null,Qs=null,fO=!1,q2=!1,eC=0,e9e=0;function Go(){throw Error(tt(321))}function Mq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bf(e[n],t[n]))return!1;return!0}function Lq(e,t,n,r,i,s){if(Nv=s,Ni=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,OP.current=e===null||e.memoizedState===null?i9e:s9e,e=n(r,i),q2){s=0;do{if(q2=!1,eC=0,25<=s)throw Error(tt(301));s+=1,Qs=ks=null,t.updateQueue=null,OP.current=o9e,e=n(r,i)}while(q2)}if(OP.current=dO,t=ks!==null&&ks.next!==null,Nv=0,Qs=ks=Ni=null,fO=!1,t)throw Error(tt(300));return e}function Fq(){var e=eC!==0;return eC=0,e}function Ed(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?Ni.memoizedState=Qs=e:Qs=Qs.next=e,Qs}function Cc(){if(ks===null){var e=Ni.alternate;e=e!==null?e.memoizedState:null}else e=ks.next;var t=Qs===null?Ni.memoizedState:Qs.next;if(t!==null)Qs=t,ks=e;else{if(e===null)throw Error(tt(310));ks=e,e={memoizedState:ks.memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},Qs===null?Ni.memoizedState=Qs=e:Qs=Qs.next=e}return Qs}function tC(e,t){return typeof t=="function"?t(e):t}function G5(e){var t=Cc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=ks,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Nv&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ni.lanes|=c,Pv|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Bf(r,t.memoizedState)||(Ru=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ni.lanes|=s,Pv|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Y5(e){var t=Cc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Bf(s,t.memoizedState)||(Ru=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Yye(){}function Kye(e,t){var n=Ni,r=Cc(),i=t(),s=!Bf(r.memoizedState,i);if(s&&(r.memoizedState=i,Ru=!0),r=r.queue,jq(Jye.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Qs!==null&&Qs.memoizedState.tag&1){if(n.flags|=2048,nC(9,Qye.bind(null,n,r,i,t),void 0,null),uo===null)throw Error(tt(349));Nv&30||Xye(n,t,i)}return i}function Xye(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ni.updateQueue,t===null?(t={lastEffect:null,stores:null},Ni.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qye(e,t,n,r){t.value=n,t.getSnapshot=r,Zye(t)&&e1e(e)}function Jye(e,t,n){return n(function(){Zye(t)&&e1e(e)})}function Zye(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bf(e,n)}catch{return!0}}function e1e(e){var t=lm(e,1);t!==null&&Pf(t,e,1,-1)}function qie(e){var t=Ed();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tC,lastRenderedState:e},t.queue=e,e=e.dispatch=r9e.bind(null,Ni,e),[t.memoizedState,e]}function nC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ni.updateQueue,t===null?(t={lastEffect:null,stores:null},Ni.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function t1e(){return Cc().memoizedState}function $P(e,t,n,r){var i=Ed();Ni.flags|=e,i.memoizedState=nC(1|t,n,void 0,r===void 0?null:r)}function FM(e,t,n,r){var i=Cc();r=r===void 0?null:r;var s=void 0;if(ks!==null){var o=ks.memoizedState;if(s=o.destroy,r!==null&&Mq(r,o.deps)){i.memoizedState=nC(t,n,s,r);return}}Ni.flags|=e,i.memoizedState=nC(1|t,n,s,r)}function Wie(e,t){return $P(8390656,8,e,t)}function jq(e,t){return FM(2048,8,e,t)}function n1e(e,t){return FM(4,2,e,t)}function r1e(e,t){return FM(4,4,e,t)}function i1e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function s1e(e,t,n){return n=n!=null?n.concat([e]):null,FM(4,4,i1e.bind(null,t,e),n)}function Bq(){}function o1e(e,t){var n=Cc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function a1e(e,t){var n=Cc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function u1e(e,t,n){return Nv&21?(Bf(n,t)||(n=hye(),Ni.lanes|=n,Pv|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ru=!0),e.memoizedState=n)}function t9e(e,t){var n=Dr;Dr=n!==0&&4>n?n:4,e(!0);var r=W5.transition;W5.transition={};try{e(!1),t()}finally{Dr=n,W5.transition=r}}function l1e(){return Cc().memoizedState}function n9e(e,t,n){var r=c0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c1e(e))f1e(t,n);else if(n=qye(e,t,n,r),n!==null){var i=qa();Pf(n,e,r,i),d1e(n,t,r)}}function r9e(e,t,n){var r=c0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c1e(e))f1e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Bf(a,o)){var u=t.interleaved;u===null?(i.next=i,Nq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=qye(e,t,i,r),n!==null&&(i=qa(),Pf(n,e,r,i),d1e(n,t,r))}}function c1e(e){var t=e.alternate;return e===Ni||t!==null&&t===Ni}function f1e(e,t){q2=fO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function d1e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yq(e,n)}}var dO={readContext:Ac,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},i9e={readContext:Ac,useCallback:function(e,t){return Ed().memoizedState=[e,t===void 0?null:t],e},useContext:Ac,useEffect:Wie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$P(4194308,4,i1e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $P(4194308,4,e,t)},useInsertionEffect:function(e,t){return $P(4,2,e,t)},useMemo:function(e,t){var n=Ed();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ed();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=n9e.bind(null,Ni,e),[r.memoizedState,e]},useRef:function(e){var t=Ed();return e={current:e},t.memoizedState=e},useState:qie,useDebugValue:Bq,useDeferredValue:function(e){return Ed().memoizedState=e},useTransition:function(){var e=qie(!1),t=e[0];return e=t9e.bind(null,e[1]),Ed().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ni,i=Ed();if(wi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),uo===null)throw Error(tt(349));Nv&30||Xye(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Wie(Jye.bind(null,r,s,e),[e]),r.flags|=2048,nC(9,Qye.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ed(),t=uo.identifierPrefix;if(wi){var n=Lp,r=Mp;n=(r&~(1<<32-Nf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=e9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},s9e={readContext:Ac,useCallback:o1e,useContext:Ac,useEffect:jq,useImperativeHandle:s1e,useInsertionEffect:n1e,useLayoutEffect:r1e,useMemo:a1e,useReducer:G5,useRef:t1e,useState:function(){return G5(tC)},useDebugValue:Bq,useDeferredValue:function(e){var t=Cc();return u1e(t,ks.memoizedState,e)},useTransition:function(){var e=G5(tC)[0],t=Cc().memoizedState;return[e,t]},useMutableSource:Yye,useSyncExternalStore:Kye,useId:l1e,unstable_isNewReconciler:!1},o9e={readContext:Ac,useCallback:o1e,useContext:Ac,useEffect:jq,useImperativeHandle:s1e,useInsertionEffect:n1e,useLayoutEffect:r1e,useMemo:a1e,useReducer:Y5,useRef:t1e,useState:function(){return Y5(tC)},useDebugValue:Bq,useDeferredValue:function(e){var t=Cc();return ks===null?t.memoizedState=e:u1e(t,ks.memoizedState,e)},useTransition:function(){var e=Y5(tC)[0],t=Cc().memoizedState;return[e,t]},useMutableSource:Yye,useSyncExternalStore:Kye,useId:l1e,unstable_isNewReconciler:!1};function uf(e,t){if(e&&e.defaultProps){t=Pi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ZB(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jM={isMounted:function(e){return(e=e._reactInternals)?Eb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qa(),i=c0(e),s=Yp(r,i);s.payload=t,n!=null&&(s.callback=n),t=u0(e,s,i),t!==null&&(Pf(t,e,i,r),DP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qa(),i=c0(e),s=Yp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=u0(e,s,i),t!==null&&(Pf(t,e,i,r),DP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qa(),r=c0(e),i=Yp(n,r);i.tag=2,t!=null&&(i.callback=t),t=u0(e,i,r),t!==null&&(Pf(t,e,r,n),DP(t,e,r))}};function Gie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!YA(n,r)||!YA(i,s):!0}function h1e(e,t,n){var r=!1,i=N0,s=t.contextType;return typeof s=="object"&&s!==null?s=Ac(s):(i=Lu(t)?kv:va.current,r=t.contextTypes,s=(r=r!=null)?uE(e,i):N0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Yie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jM.enqueueReplaceState(t,t.state,null)}function eU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Pq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ac(s):(s=Lu(t)?kv:va.current,i.context=uE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(ZB(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&jM.enqueueReplaceState(i,i.state,null),lO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function dE(e,t){try{var n="",r=t;do n+=Oje(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function K5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var a9e=typeof WeakMap=="function"?WeakMap:Map;function p1e(e,t,n){n=Yp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){pO||(pO=!0,fU=r),tU(e,t)},n}function m1e(e,t,n){n=Yp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){tU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tU(e,t),typeof r!="function"&&(l0===null?l0=new Set([this]):l0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Kie(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new a9e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=w9e.bind(null,e,t,n),t.then(e,e))}function Xie(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yp(-1,1),t.tag=2,u0(n,t,1))),n.lanes|=1),e)}var u9e=Fm.ReactCurrentOwner,Ru=!1;function Oa(e,t,n,r){t.child=e===null?Hye(t,null,n,r):cE(t,e.child,n,r)}function Jie(e,t,n,r,i){n=n.render;var s=t.ref;return Aw(t,i),r=Lq(e,t,n,r,s,i),n=Fq(),e!==null&&!Ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cm(e,t,i)):(wi&&n&&Tq(t),t.flags|=1,Oa(e,t,r,i),t.child)}function Zie(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Yq(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,g1e(e,t,s,r,i)):(e=jP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:YA,n(o,r)&&e.ref===t.ref)return cm(e,t,i)}return t.flags|=1,e=f0(s,r),e.ref=t.ref,e.return=t,t.child=e}function g1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(YA(s,r)&&e.ref===t.ref)if(Ru=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ru=!0);else return t.lanes=e.lanes,cm(e,t,i)}return nU(e,t,n,r,i)}function y1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(aw,dl),dl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ti(aw,dl),dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ti(aw,dl),dl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ti(aw,dl),dl|=r;return Oa(e,t,i,n),t.child}function v1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nU(e,t,n,r,i){var s=Lu(n)?kv:va.current;return s=uE(t,s),Aw(t,i),n=Lq(e,t,n,r,s,i),r=Fq(),e!==null&&!Ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cm(e,t,i)):(wi&&r&&Tq(t),t.flags|=1,Oa(e,t,n,i),t.child)}function ese(e,t,n,r,i){if(Lu(n)){var s=!0;iO(t)}else s=!1;if(Aw(t,i),t.stateNode===null)MP(e,t),h1e(t,n,r),eU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ac(l):(l=Lu(n)?kv:va.current,l=uE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Yie(t,o,r,l),Tg=!1;var d=t.memoizedState;o.state=d,lO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Mu.current||Tg?(typeof c=="function"&&(ZB(t,n,c,r),u=t.memoizedState),(a=Tg||Gie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Wye(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:uf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ac(u):(u=Lu(n)?kv:va.current,u=uE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Yie(t,o,r,u),Tg=!1,d=t.memoizedState,o.state=d,lO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Mu.current||Tg?(typeof h=="function"&&(ZB(t,n,h,r),p=t.memoizedState),(l=Tg||Gie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return rU(e,t,n,r,s,i)}function rU(e,t,n,r,i,s){v1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&jie(t,n,!1),cm(e,t,s);r=t.stateNode,u9e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=cE(t,e.child,null,s),t.child=cE(t,null,a,s)):Oa(e,t,a,s),t.memoizedState=r.state,i&&jie(t,n,!0),t.child}function b1e(e){var t=e.stateNode;t.pendingContext?Fie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fie(e,t.context,!1),Dq(e,t.containerInfo)}function tse(e,t,n,r,i){return lE(),Cq(i),t.flags|=256,Oa(e,t,n,r),t.child}var iU={dehydrated:null,treeContext:null,retryLane:0};function sU(e){return{baseLanes:e,cachePool:null,transitions:null}}function _1e(e,t,n){var r=t.pendingProps,i=Ri.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ti(Ri,i&1),e===null)return QB(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zM(o,r,0,null),e=dv(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=sU(n),t.memoizedState=iU,e):Uq(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return l9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=f0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=f0(a,s):(s=dv(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?sU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=iU,r}return s=e.child,e=s.sibling,r=f0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Uq(e,t){return t=zM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function JR(e,t,n,r){return r!==null&&Cq(r),cE(t,e.child,null,n),e=Uq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function l9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=K5(Error(tt(422))),JR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=zM({mode:"visible",children:r.children},i,0,null),s=dv(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&cE(t,e.child,null,o),t.child.memoizedState=sU(o),t.memoizedState=iU,s);if(!(t.mode&1))return JR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=K5(s,r,void 0),JR(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ru||a){if(r=uo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lm(e,i),Pf(r,e,i,-1))}return Gq(),r=K5(Error(tt(421))),JR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=E9e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,bl=a0(i.nextSibling),Cl=t,wi=!0,pf=null,e!==null&&(lc[cc++]=Mp,lc[cc++]=Lp,lc[cc++]=Rv,Mp=e.id,Lp=e.overflow,Rv=t),t=Uq(t,r.children),t.flags|=4096,t)}function nse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),JB(e.return,t,n)}function X5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function w1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Oa(e,t,r.children,n),r=Ri.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nse(e,n,t);else if(e.tag===19)nse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ti(Ri,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&cO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),X5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&cO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}X5(t,!0,n,null,s);break;case"together":X5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function MP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pv|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=f0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=f0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function c9e(e,t,n){switch(t.tag){case 3:b1e(t),lE();break;case 5:Gye(t);break;case 1:Lu(t.type)&&iO(t);break;case 4:Dq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ti(aO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ri,Ri.current&1),t.flags|=128,null):n&t.child.childLanes?_1e(e,t,n):(ti(Ri,Ri.current&1),e=cm(e,t,n),e!==null?e.sibling:null);ti(Ri,Ri.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return w1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ri,Ri.current),r)break;return null;case 22:case 23:return t.lanes=0,y1e(e,t,n)}return cm(e,t,n)}var E1e,oU,x1e,S1e;E1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oU=function(){};x1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,G1(th.current);var s=null;switch(n){case"input":i=IB(e,i),r=IB(e,r),s=[];break;case"select":i=Pi({},i,{value:void 0}),r=Pi({},r,{value:void 0}),s=[];break;case"textarea":i=NB(e,i),r=NB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=nO)}DB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(UA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(UA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&oi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};S1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function tT(e,t){if(!wi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function f9e(e,t,n){var r=t.pendingProps;switch(Aq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:return Lu(t.type)&&rO(),Yo(t),null;case 3:return r=t.stateNode,fE(),fi(Mu),fi(va),$q(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(XR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pf!==null&&(pU(pf),pf=null))),oU(e,t),Yo(t),null;case 5:Oq(t);var i=G1(ZA.current);if(n=t.type,e!==null&&t.stateNode!=null)x1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Yo(t),null}if(e=G1(th.current),XR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Pd]=t,r[QA]=s,e=(t.mode&1)!==0,n){case"dialog":oi("cancel",r),oi("close",r);break;case"iframe":case"object":case"embed":oi("load",r);break;case"video":case"audio":for(i=0;i<ZT.length;i++)oi(ZT[i],r);break;case"source":oi("error",r);break;case"img":case"image":case"link":oi("error",r),oi("load",r);break;case"details":oi("toggle",r);break;case"input":fie(r,s),oi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oi("invalid",r);break;case"textarea":hie(r,s),oi("invalid",r)}DB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&KR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&KR(r.textContent,a,e),i=["children",""+a]):UA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oi("scroll",r)}switch(n){case"input":UR(r),die(r,s,!0);break;case"textarea":UR(r),pie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=nO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=J0e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Pd]=t,e[QA]=r,E1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=OB(n,r),n){case"dialog":oi("cancel",e),oi("close",e),i=r;break;case"iframe":case"object":case"embed":oi("load",e),i=r;break;case"video":case"audio":for(i=0;i<ZT.length;i++)oi(ZT[i],e);i=r;break;case"source":oi("error",e),i=r;break;case"img":case"image":case"link":oi("error",e),oi("load",e),i=r;break;case"details":oi("toggle",e),i=r;break;case"input":fie(e,r),i=IB(e,r),oi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pi({},r,{value:void 0}),oi("invalid",e);break;case"textarea":hie(e,r),i=NB(e,r),oi("invalid",e);break;default:i=r}DB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?tye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Z0e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zA(e,u):typeof u=="number"&&zA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(UA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&oi("scroll",e):u!=null&&fq(e,s,u,o))}switch(n){case"input":UR(e),die(e,r,!1);break;case"textarea":UR(e),pie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+R0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ew(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ew(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=nO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&t.stateNode!=null)S1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=G1(ZA.current),G1(th.current),XR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Pd]=t,(s=r.nodeValue!==n)&&(e=Cl,e!==null))switch(e.tag){case 3:KR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&KR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pd]=t,t.stateNode=r}return Yo(t),null;case 13:if(fi(Ri),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wi&&bl!==null&&t.mode&1&&!(t.flags&128))zye(),lE(),t.flags|=98560,s=!1;else if(s=XR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Pd]=t}else lE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yo(t),s=!1}else pf!==null&&(pU(pf),pf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ri.current&1?$s===0&&($s=3):Gq())),t.updateQueue!==null&&(t.flags|=4),Yo(t),null);case 4:return fE(),oU(e,t),e===null&&KA(t.stateNode.containerInfo),Yo(t),null;case 10:return Rq(t.type._context),Yo(t),null;case 17:return Lu(t.type)&&rO(),Yo(t),null;case 19:if(fi(Ri),s=t.memoizedState,s===null)return Yo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)tT(s,!1);else{if($s!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=cO(e),o!==null){for(t.flags|=128,tT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ti(Ri,Ri.current&1|2),t.child}e=e.sibling}s.tail!==null&&rs()>hE&&(t.flags|=128,r=!0,tT(s,!1),t.lanes=4194304)}else{if(!r)if(e=cO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),tT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wi)return Yo(t),null}else 2*rs()-s.renderingStartTime>hE&&n!==1073741824&&(t.flags|=128,r=!0,tT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rs(),t.sibling=null,n=Ri.current,ti(Ri,r?n&1|2:n&1),t):(Yo(t),null);case 22:case 23:return Wq(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?dl&1073741824&&(Yo(t),t.subtreeFlags&6&&(t.flags|=8192)):Yo(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function d9e(e,t){switch(Aq(t),t.tag){case 1:return Lu(t.type)&&rO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fE(),fi(Mu),fi(va),$q(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Oq(t),null;case 13:if(fi(Ri),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));lE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fi(Ri),null;case 4:return fE(),null;case 10:return Rq(t.type._context),null;case 22:case 23:return Wq(),null;case 24:return null;default:return null}}var ZR=!1,oa=!1,h9e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function ow(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ui(e,t,r)}else n.current=null}function aU(e,t,n){try{n()}catch(r){Ui(e,t,r)}}var rse=!1;function p9e(e,t){if(HB=ZD,e=kye(),Sq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qB={focusedElem:e,selectionRange:n},ZD=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:uf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){Ui(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=rse,rse=!1,p}function W2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&aU(t,n,s)}i=i.next}while(i!==r)}}function BM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function uU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function T1e(e){var t=e.alternate;t!==null&&(e.alternate=null,T1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pd],delete t[QA],delete t[YB],delete t[X8e],delete t[Q8e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function A1e(e){return e.tag===5||e.tag===3||e.tag===4}function ise(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||A1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nO));else if(r!==4&&(e=e.child,e!==null))for(lU(e,t,n),e=e.sibling;e!==null;)lU(e,t,n),e=e.sibling}function cU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cU(e,t,n),e=e.sibling;e!==null;)cU(e,t,n),e=e.sibling}var xo=null,cf=!1;function fg(e,t,n){for(n=n.child;n!==null;)C1e(e,t,n),n=n.sibling}function C1e(e,t,n){if(eh&&typeof eh.onCommitFiberUnmount=="function")try{eh.onCommitFiberUnmount(PM,n)}catch{}switch(n.tag){case 5:oa||ow(n,t);case 6:var r=xo,i=cf;xo=null,fg(e,t,n),xo=r,cf=i,xo!==null&&(cf?(e=xo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xo.removeChild(n.stateNode));break;case 18:xo!==null&&(cf?(e=xo,n=n.stateNode,e.nodeType===8?V5(e.parentNode,n):e.nodeType===1&&V5(e,n),WA(e)):V5(xo,n.stateNode));break;case 4:r=xo,i=cf,xo=n.stateNode.containerInfo,cf=!0,fg(e,t,n),xo=r,cf=i;break;case 0:case 11:case 14:case 15:if(!oa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aU(n,t,o),i=i.next}while(i!==r)}fg(e,t,n);break;case 1:if(!oa&&(ow(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ui(n,t,a)}fg(e,t,n);break;case 21:fg(e,t,n);break;case 22:n.mode&1?(oa=(r=oa)||n.memoizedState!==null,fg(e,t,n),oa=r):fg(e,t,n);break;default:fg(e,t,n)}}function sse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new h9e),t.forEach(function(r){var i=x9e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:xo=a.stateNode,cf=!1;break e;case 3:xo=a.stateNode.containerInfo,cf=!0;break e;case 4:xo=a.stateNode.containerInfo,cf=!0;break e}a=a.return}if(xo===null)throw Error(tt(160));C1e(s,o,i),xo=null,cf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ui(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)I1e(t,e),t=t.sibling}function I1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qc(t,e),pd(e),r&4){try{W2(3,e,e.return),BM(3,e)}catch(m){Ui(e,e.return,m)}try{W2(5,e,e.return)}catch(m){Ui(e,e.return,m)}}break;case 1:Qc(t,e),pd(e),r&512&&n!==null&&ow(n,n.return);break;case 5:if(Qc(t,e),pd(e),r&512&&n!==null&&ow(n,n.return),e.flags&32){var i=e.stateNode;try{zA(i,"")}catch(m){Ui(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&X0e(i,s),OB(a,o);var l=OB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?tye(i,f):c==="dangerouslySetInnerHTML"?Z0e(i,f):c==="children"?zA(i,f):fq(i,c,f,l)}switch(a){case"input":kB(i,s);break;case"textarea":Q0e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ew(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ew(i,!!s.multiple,s.defaultValue,!0):Ew(i,!!s.multiple,s.multiple?[]:"",!1))}i[QA]=s}catch(m){Ui(e,e.return,m)}}break;case 6:if(Qc(t,e),pd(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ui(e,e.return,m)}}break;case 3:if(Qc(t,e),pd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{WA(t.containerInfo)}catch(m){Ui(e,e.return,m)}break;case 4:Qc(t,e),pd(e);break;case 13:Qc(t,e),pd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hq=rs())),r&4&&sse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(oa=(l=oa)||c,Qc(t,e),oa=l):Qc(t,e),pd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:W2(4,d,d.return);break;case 1:ow(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ui(r,n,m)}}break;case 5:ow(d,d.return);break;case 22:if(d.memoizedState!==null){ase(f);continue}}h!==null?(h.return=d,xt=h):ase(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=eye("display",o))}catch(m){Ui(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ui(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qc(t,e),pd(e),r&4&&sse(e);break;case 21:break;default:Qc(t,e),pd(e)}}function pd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(A1e(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zA(i,""),r.flags&=-33);var s=ise(e);cU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ise(e);lU(e,a,o);break;default:throw Error(tt(161))}}catch(u){Ui(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function m9e(e,t,n){xt=e,k1e(e)}function k1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ZR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||oa;a=ZR;var l=oa;if(ZR=o,(oa=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?use(i):u!==null?(u.return=o,xt=u):use(i);for(;s!==null;)xt=s,k1e(s),s=s.sibling;xt=i,ZR=a,oa=l}ose(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):ose(e)}}function ose(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:oa||BM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!oa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:uf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Hie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&WA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}oa||t.flags&512&&uU(t)}catch(d){Ui(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function ase(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function use(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{BM(4,t)}catch(u){Ui(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ui(t,i,u)}}var s=t.return;try{uU(t)}catch(u){Ui(t,s,u)}break;case 5:var o=t.return;try{uU(t)}catch(u){Ui(t,o,u)}}}catch(u){Ui(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var g9e=Math.ceil,hO=Fm.ReactCurrentDispatcher,zq=Fm.ReactCurrentOwner,xc=Fm.ReactCurrentBatchConfig,ur=0,uo=null,ys=null,No=0,dl=0,aw=by(0),$s=0,rC=null,Pv=0,UM=0,Vq=0,G2=null,Eu=null,Hq=0,hE=1/0,bp=null,pO=!1,fU=null,l0=null,eN=!1,Hg=null,mO=0,Y2=0,dU=null,LP=-1,FP=0;function qa(){return ur&6?rs():LP!==-1?LP:LP=rs()}function c0(e){return e.mode&1?ur&2&&No!==0?No&-No:Z8e.transition!==null?(FP===0&&(FP=hye()),FP):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:_ye(e.type)),e):1}function Pf(e,t,n,r){if(50<Y2)throw Y2=0,dU=null,Error(tt(185));PI(e,n,r),(!(ur&2)||e!==uo)&&(e===uo&&(!(ur&2)&&(UM|=n),$s===4&&Og(e,No)),Fu(e,r),n===1&&ur===0&&!(t.mode&1)&&(hE=rs()+500,LM&&_y()))}function Fu(e,t){var n=e.callbackNode;Zje(e,t);var r=JD(e,e===uo?No:0);if(r===0)n!==null&&yie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yie(n),t===1)e.tag===0?J8e(lse.bind(null,e)):jye(lse.bind(null,e)),Y8e(function(){!(ur&6)&&_y()}),n=null;else{switch(pye(r)){case 1:n=gq;break;case 4:n=fye;break;case 16:n=QD;break;case 536870912:n=dye;break;default:n=QD}n=L1e(n,R1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function R1e(e,t){if(LP=-1,FP=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(Cw()&&e.callbackNode!==n)return null;var r=JD(e,e===uo?No:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=gO(e,r);else{t=r;var i=ur;ur|=2;var s=P1e();(uo!==e||No!==t)&&(bp=null,hE=rs()+500,fv(e,t));do try{b9e();break}catch(a){N1e(e,a)}while(!0);kq(),hO.current=s,ur=i,ys!==null?t=0:(uo=null,No=0,t=$s)}if(t!==0){if(t===2&&(i=jB(e),i!==0&&(r=i,t=hU(e,i))),t===1)throw n=rC,fv(e,0),Og(e,r),Fu(e,rs()),n;if(t===6)Og(e,r);else{if(i=e.current.alternate,!(r&30)&&!y9e(i)&&(t=gO(e,r),t===2&&(s=jB(e),s!==0&&(r=s,t=hU(e,s))),t===1))throw n=rC,fv(e,0),Og(e,r),Fu(e,rs()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:v1(e,Eu,bp);break;case 3:if(Og(e,r),(r&130023424)===r&&(t=Hq+500-rs(),10<t)){if(JD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=GB(v1.bind(null,e,Eu,bp),t);break}v1(e,Eu,bp);break;case 4:if(Og(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Nf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=rs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*g9e(r/1960))-r,10<r){e.timeoutHandle=GB(v1.bind(null,e,Eu,bp),r);break}v1(e,Eu,bp);break;case 5:v1(e,Eu,bp);break;default:throw Error(tt(329))}}}return Fu(e,rs()),e.callbackNode===n?R1e.bind(null,e):null}function hU(e,t){var n=G2;return e.current.memoizedState.isDehydrated&&(fv(e,t).flags|=256),e=gO(e,t),e!==2&&(t=Eu,Eu=n,t!==null&&pU(t)),e}function pU(e){Eu===null?Eu=e:Eu.push.apply(Eu,e)}function y9e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Bf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Og(e,t){for(t&=~Vq,t&=~UM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nf(t),r=1<<n;e[n]=-1,t&=~r}}function lse(e){if(ur&6)throw Error(tt(327));Cw();var t=JD(e,0);if(!(t&1))return Fu(e,rs()),null;var n=gO(e,t);if(e.tag!==0&&n===2){var r=jB(e);r!==0&&(t=r,n=hU(e,r))}if(n===1)throw n=rC,fv(e,0),Og(e,t),Fu(e,rs()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,v1(e,Eu,bp),Fu(e,rs()),null}function qq(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(hE=rs()+500,LM&&_y())}}function Dv(e){Hg!==null&&Hg.tag===0&&!(ur&6)&&Cw();var t=ur;ur|=1;var n=xc.transition,r=Dr;try{if(xc.transition=null,Dr=1,e)return e()}finally{Dr=r,xc.transition=n,ur=t,!(ur&6)&&_y()}}function Wq(){dl=aw.current,fi(aw)}function fv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G8e(n)),ys!==null)for(n=ys.return;n!==null;){var r=n;switch(Aq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rO();break;case 3:fE(),fi(Mu),fi(va),$q();break;case 5:Oq(r);break;case 4:fE();break;case 13:fi(Ri);break;case 19:fi(Ri);break;case 10:Rq(r.type._context);break;case 22:case 23:Wq()}n=n.return}if(uo=e,ys=e=f0(e.current,null),No=dl=t,$s=0,rC=null,Vq=UM=Pv=0,Eu=G2=null,W1!==null){for(t=0;t<W1.length;t++)if(n=W1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}W1=null}return e}function N1e(e,t){do{var n=ys;try{if(kq(),OP.current=dO,fO){for(var r=Ni.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fO=!1}if(Nv=0,Qs=ks=Ni=null,q2=!1,eC=0,zq.current=null,n===null||n.return===null){$s=1,rC=t,ys=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=No,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Xie(o);if(h!==null){h.flags&=-257,Qie(h,o,a,s,t),h.mode&1&&Kie(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Kie(s,l,t),Gq();break e}u=Error(tt(426))}}else if(wi&&a.mode&1){var g=Xie(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Qie(g,o,a,s,t),Cq(dE(u,a));break e}}s=u=dE(u,a),$s!==4&&($s=2),G2===null?G2=[s]:G2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=p1e(s,u,t);Vie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(l0===null||!l0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=m1e(s,a,t);Vie(s,w);break e}}s=s.return}while(s!==null)}O1e(n)}catch(E){t=E,ys===n&&n!==null&&(ys=n=n.return);continue}break}while(!0)}function P1e(){var e=hO.current;return hO.current=dO,e===null?dO:e}function Gq(){($s===0||$s===3||$s===2)&&($s=4),uo===null||!(Pv&268435455)&&!(UM&268435455)||Og(uo,No)}function gO(e,t){var n=ur;ur|=2;var r=P1e();(uo!==e||No!==t)&&(bp=null,fv(e,t));do try{v9e();break}catch(i){N1e(e,i)}while(!0);if(kq(),ur=n,hO.current=r,ys!==null)throw Error(tt(261));return uo=null,No=0,$s}function v9e(){for(;ys!==null;)D1e(ys)}function b9e(){for(;ys!==null&&!Hje();)D1e(ys)}function D1e(e){var t=M1e(e.alternate,e,dl);e.memoizedProps=e.pendingProps,t===null?O1e(e):ys=t,zq.current=null}function O1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=d9e(n,t),n!==null){n.flags&=32767,ys=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$s=6,ys=null;return}}else if(n=f9e(n,t,dl),n!==null){ys=n;return}if(t=t.sibling,t!==null){ys=t;return}ys=t=e}while(t!==null);$s===0&&($s=5)}function v1(e,t,n){var r=Dr,i=xc.transition;try{xc.transition=null,Dr=1,_9e(e,t,n,r)}finally{xc.transition=i,Dr=r}return null}function _9e(e,t,n,r){do Cw();while(Hg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(e8e(e,s),e===uo&&(ys=uo=null,No=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||eN||(eN=!0,L1e(QD,function(){return Cw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=xc.transition,xc.transition=null;var o=Dr;Dr=1;var a=ur;ur|=4,zq.current=null,p9e(e,n),I1e(n,e),B8e(qB),ZD=!!HB,qB=HB=null,e.current=n,m9e(n),qje(),ur=a,Dr=o,xc.transition=s}else e.current=n;if(eN&&(eN=!1,Hg=e,mO=i),s=e.pendingLanes,s===0&&(l0=null),Yje(n.stateNode),Fu(e,rs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pO)throw pO=!1,e=fU,fU=null,e;return mO&1&&e.tag!==0&&Cw(),s=e.pendingLanes,s&1?e===dU?Y2++:(Y2=0,dU=e):Y2=0,_y(),null}function Cw(){if(Hg!==null){var e=pye(mO),t=xc.transition,n=Dr;try{if(xc.transition=null,Dr=16>e?16:e,Hg===null)var r=!1;else{if(e=Hg,Hg=null,mO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:W2(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(T1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:W2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:BM(9,a)}}catch(E){Ui(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,_y(),eh&&typeof eh.onPostCommitFiberRoot=="function")try{eh.onPostCommitFiberRoot(PM,e)}catch{}r=!0}return r}finally{Dr=n,xc.transition=t}}return!1}function cse(e,t,n){t=dE(n,t),t=p1e(e,t,1),e=u0(e,t,1),t=qa(),e!==null&&(PI(e,1,t),Fu(e,t))}function Ui(e,t,n){if(e.tag===3)cse(e,e,n);else for(;t!==null;){if(t.tag===3){cse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(l0===null||!l0.has(r))){e=dE(n,e),e=m1e(t,e,1),t=u0(t,e,1),e=qa(),t!==null&&(PI(t,1,e),Fu(t,e));break}}t=t.return}}function w9e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qa(),e.pingedLanes|=e.suspendedLanes&n,uo===e&&(No&n)===n&&($s===4||$s===3&&(No&130023424)===No&&500>rs()-Hq?fv(e,0):Vq|=n),Fu(e,t)}function $1e(e,t){t===0&&(e.mode&1?(t=HR,HR<<=1,!(HR&130023424)&&(HR=4194304)):t=1);var n=qa();e=lm(e,t),e!==null&&(PI(e,t,n),Fu(e,n))}function E9e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$1e(e,n)}function x9e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),$1e(e,n)}var M1e;M1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mu.current)Ru=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ru=!1,c9e(e,t,n);Ru=!!(e.flags&131072)}else Ru=!1,wi&&t.flags&1048576&&Bye(t,oO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;MP(e,t),e=t.pendingProps;var i=uE(t,va.current);Aw(t,n),i=Lq(null,t,r,e,i,n);var s=Fq();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lu(r)?(s=!0,iO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pq(t),i.updater=jM,t.stateNode=i,i._reactInternals=t,eU(t,r,e,n),t=rU(null,t,r,!0,s,n)):(t.tag=0,wi&&s&&Tq(t),Oa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(MP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=T9e(r),e=uf(r,e),i){case 0:t=nU(null,t,r,e,n);break e;case 1:t=ese(null,t,r,e,n);break e;case 11:t=Jie(null,t,r,e,n);break e;case 14:t=Zie(null,t,r,uf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:uf(r,i),nU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:uf(r,i),ese(e,t,r,i,n);case 3:e:{if(b1e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Wye(e,t),lO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=dE(Error(tt(423)),t),t=tse(e,t,r,n,i);break e}else if(r!==i){i=dE(Error(tt(424)),t),t=tse(e,t,r,n,i);break e}else for(bl=a0(t.stateNode.containerInfo.firstChild),Cl=t,wi=!0,pf=null,n=Hye(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lE(),r===i){t=cm(e,t,n);break e}Oa(e,t,r,n)}t=t.child}return t;case 5:return Gye(t),e===null&&QB(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,WB(r,i)?o=null:s!==null&&WB(r,s)&&(t.flags|=32),v1e(e,t),Oa(e,t,o,n),t.child;case 6:return e===null&&QB(t),null;case 13:return _1e(e,t,n);case 4:return Dq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=cE(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:uf(r,i),Jie(e,t,r,i,n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:return Oa(e,t,t.pendingProps.children,n),t.child;case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ti(aO,r._currentValue),r._currentValue=o,s!==null)if(Bf(s.value,o)){if(s.children===i.children&&!Mu.current){t=cm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Yp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),JB(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),JB(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Oa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Aw(t,n),i=Ac(i),r=r(i),t.flags|=1,Oa(e,t,r,n),t.child;case 14:return r=t.type,i=uf(r,t.pendingProps),i=uf(r.type,i),Zie(e,t,r,i,n);case 15:return g1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:uf(r,i),MP(e,t),t.tag=1,Lu(r)?(e=!0,iO(t)):e=!1,Aw(t,n),h1e(t,r,i),eU(t,r,i,n),rU(null,t,r,!0,e,n);case 19:return w1e(e,t,n);case 22:return y1e(e,t,n)}throw Error(tt(156,t.tag))};function L1e(e,t){return cye(e,t)}function S9e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vc(e,t,n,r){return new S9e(e,t,n,r)}function Yq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T9e(e){if(typeof e=="function")return Yq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hq)return 11;if(e===pq)return 14}return 2}function f0(e,t){var n=e.alternate;return n===null?(n=vc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Yq(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Q_:return dv(n.children,i,s,t);case dq:o=8,i|=8;break;case SB:return e=vc(12,n,t,i|2),e.elementType=SB,e.lanes=s,e;case TB:return e=vc(13,n,t,i),e.elementType=TB,e.lanes=s,e;case AB:return e=vc(19,n,t,i),e.elementType=AB,e.lanes=s,e;case G0e:return zM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q0e:o=10;break e;case W0e:o=9;break e;case hq:o=11;break e;case pq:o=14;break e;case Sg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=vc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function dv(e,t,n,r){return e=vc(7,e,r,t),e.lanes=n,e}function zM(e,t,n,r){return e=vc(22,e,r,t),e.elementType=G0e,e.lanes=n,e.stateNode={isHidden:!1},e}function Q5(e,t,n){return e=vc(6,e,null,t),e.lanes=n,e}function J5(e,t,n){return t=vc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A9e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=P5(0),this.expirationTimes=P5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kq(e,t,n,r,i,s,o,a,u){return e=new A9e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=vc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pq(s),e}function C9e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function F1e(e){if(!e)return N0;e=e._reactInternals;e:{if(Eb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Lu(n))return Fye(e,n,t)}return t}function j1e(e,t,n,r,i,s,o,a,u){return e=Kq(n,r,!0,e,i,s,o,a,u),e.context=F1e(null),n=e.current,r=qa(),i=c0(n),s=Yp(r,i),s.callback=t??null,u0(n,s,i),e.current.lanes=i,PI(e,i,r),Fu(e,r),e}function VM(e,t,n,r){var i=t.current,s=qa(),o=c0(i);return n=F1e(n),t.context===null?t.context=n:t.pendingContext=n,t=Yp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=u0(i,t,o),e!==null&&(Pf(e,i,o,s),DP(e,i,o)),o}function yO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xq(e,t){fse(e,t),(e=e.alternate)&&fse(e,t)}function I9e(){return null}var B1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qq(e){this._internalRoot=e}HM.prototype.render=Qq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));VM(e,t,null,null)};HM.prototype.unmount=Qq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dv(function(){VM(null,e,null,null)}),t[um]=null}};function HM(e){this._internalRoot=e}HM.prototype.unstable_scheduleHydration=function(e){if(e){var t=yye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dg.length&&t!==0&&t<Dg[n].priority;n++);Dg.splice(n,0,e),n===0&&bye(e)}};function Jq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dse(){}function k9e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=yO(o);s.call(l)}}var o=j1e(t,r,e,0,null,!1,!1,"",dse);return e._reactRootContainer=o,e[um]=o.current,KA(e.nodeType===8?e.parentNode:e),Dv(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=yO(u);a.call(l)}}var u=Kq(e,0,!1,null,null,!1,!1,"",dse);return e._reactRootContainer=u,e[um]=u.current,KA(e.nodeType===8?e.parentNode:e),Dv(function(){VM(t,u,n,r)}),u}function WM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=yO(o);a.call(u)}}VM(t,o,e,i)}else o=k9e(n,t,e,i,r);return yO(o)}mye=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=JT(t.pendingLanes);n!==0&&(yq(t,n|1),Fu(t,rs()),!(ur&6)&&(hE=rs()+500,_y()))}break;case 13:Dv(function(){var r=lm(e,1);if(r!==null){var i=qa();Pf(r,e,1,i)}}),Xq(e,1)}};vq=function(e){if(e.tag===13){var t=lm(e,134217728);if(t!==null){var n=qa();Pf(t,e,134217728,n)}Xq(e,134217728)}};gye=function(e){if(e.tag===13){var t=c0(e),n=lm(e,t);if(n!==null){var r=qa();Pf(n,e,t,r)}Xq(e,t)}};yye=function(){return Dr};vye=function(e,t){var n=Dr;try{return Dr=e,t()}finally{Dr=n}};MB=function(e,t,n){switch(t){case"input":if(kB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=MM(r);if(!i)throw Error(tt(90));K0e(r),kB(r,i)}}}break;case"textarea":Q0e(e,n);break;case"select":t=n.value,t!=null&&Ew(e,!!n.multiple,t,!1)}};iye=qq;sye=Dv;var R9e={usingClientEntryPoint:!1,Events:[OI,tw,MM,nye,rye,qq]},nT={findFiberByHostInstance:q1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N9e={bundleType:nT.bundleType,version:nT.version,rendererPackageName:nT.rendererPackageName,rendererConfig:nT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uye(e),e===null?null:e.stateNode},findFiberByHostInstance:nT.findFiberByHostInstance||I9e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tN.isDisabled&&tN.supportsFiber)try{PM=tN.inject(N9e),eh=tN}catch{}}Gl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R9e;Gl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jq(t))throw Error(tt(200));return C9e(e,t,null,n)};Gl.createRoot=function(e,t){if(!Jq(e))throw Error(tt(299));var n=!1,r="",i=B1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Kq(e,1,!1,null,null,n,!1,r,i),e[um]=t.current,KA(e.nodeType===8?e.parentNode:e),new Qq(t)};Gl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=uye(t),e=e===null?null:e.stateNode,e};Gl.flushSync=function(e){return Dv(e)};Gl.hydrate=function(e,t,n){if(!qM(t))throw Error(tt(200));return WM(null,e,t,!0,n)};Gl.hydrateRoot=function(e,t,n){if(!Jq(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=B1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=j1e(t,null,e,1,n??null,i,!1,s,o),e[um]=t.current,KA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new HM(t)};Gl.render=function(e,t,n){if(!qM(t))throw Error(tt(200));return WM(null,e,t,!1,n)};Gl.unmountComponentAtNode=function(e){if(!qM(e))throw Error(tt(40));return e._reactRootContainer?(Dv(function(){WM(null,null,e,!1,function(){e._reactRootContainer=null,e[um]=null})}),!0):!1};Gl.unstable_batchedUpdates=qq;Gl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qM(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return WM(e,t,n,!1,r)};Gl.version="18.3.1-next-f1338f8080-20240426";function U1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U1e)}catch(e){console.error(e)}}U1e(),U0e.exports=Gl;var MI=U0e.exports;const P9e=Wl(MI);var hse=MI;EB.createRoot=hse.createRoot,EB.hydrateRoot=hse.hydrateRoot;var Dd=function(){return Dd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Dd.apply(this,arguments)};function LI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function kp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function pse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function D9e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function Y1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Z5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function K2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof pse=="function"?pse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var BP="right-scroll-bar-position",UP="width-before-scroll-bar",O9e="with-scroll-bars-hidden",$9e="--removed-body-scroll-bar-size";function ej(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function M9e(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var L9e=typeof window<"u"?R.useLayoutEffect:R.useEffect,mse=new WeakMap;function F9e(e,t){var n=M9e(null,function(r){return e.forEach(function(i){return ej(i,r)})});return L9e(function(){var r=mse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||ej(a,null)}),s.forEach(function(a){i.has(a)||ej(a,o)})}mse.set(n,e)},[e]),n}function j9e(e){return e}function B9e(e,t){t===void 0&&(t=j9e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function U9e(e){e===void 0&&(e={});var t=B9e(null);return t.options=Dd({async:!0,ssr:!1},e),t}var z1e=function(e){var t=e.sideCar,n=LI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Dd({},n))};z1e.isSideCarExport=!0;function z9e(e,t){return e.useMedium(t),z1e}var V1e=U9e(),tj=function(){},GM=R.forwardRef(function(e,t){var n=R.useRef(null),r=R.useState({onScrollCapture:tj,onWheelCapture:tj,onTouchMoveCapture:tj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=LI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=F9e([n,t]),T=Dd(Dd({},b),i);return R.createElement(R.Fragment,null,c&&R.createElement(w,{sideCar:V1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?R.cloneElement(R.Children.only(a),Dd(Dd({},T),{ref:E})):R.createElement(y,Dd({},T,{className:u,ref:E}),a))});GM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};GM.classNames={fullWidth:UP,zeroRight:BP};var V9e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function H9e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=V9e();return t&&e.setAttribute("nonce",t),e}function q9e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function W9e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var G9e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=H9e())&&(q9e(t,n),W9e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Y9e=function(){var e=G9e();return function(t,n){R.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},H1e=function(){var e=Y9e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},K9e={left:0,top:0,right:0,gap:0},nj=function(e){return parseInt(e||"",10)||0},X9e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[nj(n),nj(r),nj(i)]},Q9e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return K9e;var t=X9e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},J9e=H1e(),Iw="data-scroll-locked",Z9e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(O9e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Iw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(BP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(UP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(BP," .").concat(BP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(UP," .").concat(UP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Iw,`] {
    `).concat($9e,": ").concat(a,`px;
  }
`)},gse=function(){var e=parseInt(document.body.getAttribute(Iw)||"0",10);return isFinite(e)?e:0},eBe=function(){R.useEffect(function(){return document.body.setAttribute(Iw,(gse()+1).toString()),function(){var e=gse()-1;e<=0?document.body.removeAttribute(Iw):document.body.setAttribute(Iw,e.toString())}},[])},tBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;eBe();var s=R.useMemo(function(){return Q9e(i)},[i]);return R.createElement(J9e,{styles:Z9e(s,!t,i,n?"":"!important")})},mU=!1;if(typeof window<"u")try{var nN=Object.defineProperty({},"passive",{get:function(){return mU=!0,!0}});window.addEventListener("test",nN,nN),window.removeEventListener("test",nN,nN)}catch{mU=!1}var c_=mU?{passive:!1}:!1,nBe=function(e){return e.tagName==="TEXTAREA"},q1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!nBe(e)&&n[t]==="visible")},rBe=function(e){return q1e(e,"overflowY")},iBe=function(e){return q1e(e,"overflowX")},yse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=W1e(e,r);if(i){var s=G1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},oBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},W1e=function(e,t){return e==="v"?rBe(t):iBe(t)},G1e=function(e,t){return e==="v"?sBe(t):oBe(t)},aBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},uBe=function(e,t,n,r,i){var s=aBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=G1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&W1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},rN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vse=function(e){return[e.deltaX,e.deltaY]},bse=function(e){return e&&"current"in e?e.current:e},lBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fBe=0,f_=[];function dBe(e){var t=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),i=R.useState(fBe++)[0],s=R.useState(H1e)[0],o=R.useRef(e);R.useEffect(function(){o.current=e},[e]),R.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=D9e([e.lockRef.current],(e.shards||[]).map(bse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=R.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=rN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,T=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&T.type==="range")return!1;var A=yse(S,T);if(!A)return!0;if(A?E=S:(E=S==="v"?"h":"v",A=yse(S,T)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return uBe(C,g,m,C==="h"?b:w,!0)},[]),u=R.useCallback(function(m){var g=m;if(!(!f_.length||f_[f_.length-1]!==s)){var y="deltaY"in g?vse(g):rN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&lBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(bse).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=R.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:hBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=R.useCallback(function(m){n.current=rN(m),r.current=void 0},[]),f=R.useCallback(function(m){l(m.type,vse(m),m.target,a(m,e.lockRef.current))},[]),d=R.useCallback(function(m){l(m.type,rN(m),m.target,a(m,e.lockRef.current))},[]);R.useEffect(function(){return f_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,c_),document.addEventListener("touchmove",u,c_),document.addEventListener("touchstart",c,c_),function(){f_=f_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,c_),document.removeEventListener("touchmove",u,c_),document.removeEventListener("touchstart",c,c_)}},[]);var h=e.removeScrollBar,p=e.inert;return R.createElement(R.Fragment,null,p?R.createElement(s,{styles:cBe(i)}):null,h?R.createElement(tBe,{gapMode:e.gapMode}):null)}function hBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pBe=z9e(V1e,dBe);var YM=R.forwardRef(function(e,t){return R.createElement(GM,Dd({},e,{ref:t,sideCar:pBe}))});YM.classNames=GM.classNames;function Yr(e){return Object.keys(e)}function rj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Zq(e,t){const n={...e},r=t;return rj(e)&&rj(t)&&Object.keys(t).forEach(i=>{rj(r[i])&&i in e?n[i]=Zq(n[i],r[i]):n[i]=r[i]}),n}function mBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function gBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function iC(e){const t=gBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function ij(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Y1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?ij(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?ij(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?ij(s):s}}return r}return n}const Ae=Y1e("rem",{shouldScale:!0}),vO=Y1e("em");function wy(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function K1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Ey(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==R.Fragment:!1}function ho(e){const t=R.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=R.useContext(t);if(i===null)throw new Error(e);return i}]}function kx(e=null){const t=R.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>R.useContext(t)]}function bO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function _O(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function yBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function vBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function bBe(e,t,n){return _O(e,n)===_O(t,n)}function eW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=_O(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>bBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=vBe(l,u,r),f=yBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const _Be={app:100,modal:200,popover:300,overlay:400,max:9999};function Fc(e){return _Be[e]}const wBe=()=>{};function EBe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||wBe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function en(e,t="size",n=!0){if(e!==void 0)return K1e(e)?n?Ae(e):e:`var(--${t}-${e})`}function ss(e){return en(e,"mantine-spacing")}function Kr(e){return e===void 0?"var(--mantine-radius-default)":en(e,"mantine-radius")}function lo(e){return en(e,"mantine-font-size")}function X1e(e){return en(e,"mantine-line-height",!1)}function tW(e){if(e)return en(e,"mantine-shadow",!1)}function Fp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function nW(e,t){return e in t.breakpoints?iC(t.breakpoints[e]):iC(e)}function sC(e,t){const n=e.map(r=>({value:r,px:nW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function xf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function xBe(e,t,n){var r;return n?Array.from(((r=_O(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function SBe(){const[e,t]=R.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Wd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function X2(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function N1(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),R.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function KM(e,t){const n=N1(e),r=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),R.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const _se=["mousedown","touchstart"];function TBe(e,t,n){const r=R.useRef();return R.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||_se).forEach(s=>document.addEventListener(s,i)),()=>{(t||_se).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function ABe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function CBe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function IBe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=R.useState(n?t:CBe(e)),s=R.useRef();return R.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),ABe(s.current,o=>i(o.matches))},[e]),r}const xb=typeof document<"u"?R.useLayoutEffect:R.useEffect;function fm(e,t){const n=R.useRef(!1);R.useEffect(()=>()=>{n.current=!1},[]),R.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Q1e({opened:e,shouldReturnFocus:t=!0}){const n=R.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return fm(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function kBe(e,t="body > :not(script)"){const n=X2(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const RBe=/input|select|textarea|button|object/,J1e="a, input, select, textarea, button, object, [tabindex]";function NBe(e){return e.style.display==="none"}function PBe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(NBe(n))return!1;n=n.parentNode}return!0}function Z1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function gU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Z1e(e));return(RBe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&PBe(e)}function eve(e){const t=Z1e(e);return(Number.isNaN(t)||t>=0)&&gU(e)}function DBe(e){return Array.from(e.querySelectorAll(J1e)).filter(eve)}function OBe(e,t){const n=DBe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function $Be(e=!0){const t=R.useRef(),n=R.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(J1e));o=a.find(eve)||a.find(gU)||null,!o&&gU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=R.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=kBe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return R.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&OBe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const MBe=Wi.useId||(()=>{});function LBe(){const e=MBe();return e?`mantine-${e.replace(/:/g,"")}`:""}function xa(e){const t=LBe(),[n,r]=R.useState(t);return xb(()=>{r(X2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function tve(e,t,n){R.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function rW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function nve(...e){return t=>{e.forEach(n=>rW(n,t))}}function cs(...e){return R.useCallback(nve(...e),e)}function rve(e,t,n="ltr"){const r=R.useRef(null),i=R.useRef(!1),s=R.useRef(!1),o=R.useRef(0),[a,u]=R.useState(!1);return R.useEffect(()=>{i.current=!0},[]),R.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const S=Wd((w-T.left)/T.width,0,1);e({x:n==="ltr"?S:1-S,y:Wd((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Es({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=R.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function iW(e,t){return IBe("(prefers-reduced-motion: reduce)",e,t)}const FBe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function hv(e){const t=R.useRef(0),n=R.useRef(null),[r,i]=R.useState(FBe),s=R.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return R.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function jBe(e){const[t,{width:n,height:r}]=hv(e);return{ref:t,width:n,height:r}}function BBe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function UBe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function zBe(e){return t=>UBe(BBe(e),t)}function VBe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{zBe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function pv(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=R.useState(e),o=R.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=R.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=R.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function HBe(e,t,n={autoInvoke:!1}){const r=R.useRef(null),i=R.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=R.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return R.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function qBe(e,t,n){const r=R.useRef(),i=R.useRef(null);return R.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function WBe(){const[e,t]=R.useState(!1);return R.useEffect(()=>t(!0),[]),e}function GBe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function YBe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});xb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>GBe(`${e}:${String(r)}`,i[0])}return[t,n]}var KBe={};function ive(){return typeof process<"u"&&KBe?"production":"development"}function sve(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=sve(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ki(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=sve(e))&&(r&&(r+=" "),r+=t);return r}const XBe={};function QBe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ki(t[r],i):t[r]=i})}),t}function XM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||XBe);return QBe(s)}function wO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const ove=R.createContext(null);function xy(){const e=R.useContext(ove);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function JBe(){return xy().cssVariablesResolver}function ZBe(){return xy().classNamesPrefix}function sW(){return xy().getStyleNonce}function eUe(){return xy().withStaticClasses}function tUe(){return xy().headless}function nUe(){var e;return(e=xy().stylesTransform)==null?void 0:e.sx}function rUe(){var e;return(e=xy().stylesTransform)==null?void 0:e.styles}function iUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function sUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function oUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function aUe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function oW(e){return iUe(e)?sUe(e):e.startsWith("rgb")?oUe(e):e.startsWith("hsl")?aUe(e):{r:0,g:0,b:0,a:1}}function iN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=oW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function oC(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function sj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function uUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function lUe(e){if(e.startsWith("oklch("))return(uUe(e)||0)/100;const{r:t,g:n,b:r}=oW(e),i=t/255,s=n/255,o=r/255,a=sj(i),u=sj(s),l=sj(o);return .2126*a+.7152*u+.0722*l}function rT(e,t=.179){return e.startsWith("var(")?!1:lUe(e)>t}function $h({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:rT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:rT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:rT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][oC(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:rT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:rT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Mr(e,t){const n=$h({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function yU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Mr(n.from,t),i=Mr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function xd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=oW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const d_=xd,cUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=$h({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ae(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ae(1)} solid transparent`}:{background:e,hover:iN(e,.1),color:a,border:`${Ae(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:xd(a,.1),hover:xd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:xd(e,.1),hover:xd(e,.12),color:e,border:`${Ae(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ae(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:xd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ae(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:xd(e,.05),color:e,border:`${Ae(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:xd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:"transparent",hover:xd(e,.12),color:e,border:`${Ae(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ae(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:iN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:iN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:iN(t.white,.01),color:e,border:`${Ae(1)} solid transparent`}:n==="gradient"?{background:yU(r,t),hover:yU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ae(1)} solid var(--mantine-color-default-border)`}:{}},fUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},wse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",aW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:fUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:cUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:wse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:wse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ae(34),lineHeight:"1.3"},h2:{fontSize:Ae(26),lineHeight:"1.35"},h3:{fontSize:Ae(22),lineHeight:"1.4"},h4:{fontSize:Ae(18),lineHeight:"1.45"},h5:{fontSize:Ae(16),lineHeight:"1.5"},h6:{fontSize:Ae(14),lineHeight:"1.5"}}},fontSizes:{xs:Ae(12),sm:Ae(14),md:Ae(16),lg:Ae(18),xl:Ae(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ae(2),sm:Ae(4),md:Ae(8),lg:Ae(16),xl:Ae(32)},spacing:{xs:Ae(10),sm:Ae(12),md:Ae(16),lg:Ae(20),xl:Ae(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), 0 ${Ae(1)} ${Ae(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(10)} ${Ae(15)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(7)} ${Ae(7)} ${Ae(-5)}`,md:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(20)} ${Ae(25)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(10)} ${Ae(10)} ${Ae(-5)}`,lg:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(28)} ${Ae(23)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(12)} ${Ae(12)} ${Ae(-7)}`,xl:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(36)} ${Ae(28)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(17)} ${Ae(17)} ${Ae(-7)}`},other:{},components:{}};function Ese(e){return e==="auto"||e==="dark"||e==="light"}function dUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Ese(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Ese(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const hUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",xse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function oj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Sse(e){if(!(e.primaryColor in e.colors))throw new Error(hUe);if(typeof e.primaryShade=="object"&&(!oj(e.primaryShade.dark)||!oj(e.primaryShade.light)))throw new Error(xse);if(typeof e.primaryShade=="number"&&!oj(e.primaryShade))throw new Error(xse)}function pUe(e,t){var r;if(!t)return Sse(e),e;const n=Zq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Sse(n),n}const uW=R.createContext(null),mUe=()=>R.useContext(uW)||aW;function Ts(){const e=R.useContext(uW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function ave({theme:e,children:t,inherit:n=!0}){const r=mUe(),i=R.useMemo(()=>pUe(n?r:aW,e),[e,r,n]);return _.jsx(uW.Provider,{value:i,children:t})}ave.displayName="@mantine/core/MantineThemeProvider";function gUe(){const e=Ts(),t=sW(),n=Yr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=iC(e.breakpoints[i]),a=s?`${o-.1}px`:vO(o-.1),u=s?`${o}px`:vO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function aj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function uj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function yUe(e,t){const n=aj(e.variables),r=n?uj(t,n):"",i=aj(e.dark),s=i?uj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=aj(e.light),a=o?uj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Sy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&$h({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Tse(e,t){return Sy({color:e.colors[e.primaryColor][oC(e,t)],theme:e,autoContrast:null})}function sN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=oC(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:d_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:d_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:d_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=oC(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:d_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:d_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:d_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function vUe(e){return Array.isArray(e)?e:Array(10).fill(e)}function bUe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function h_(e,t,n){Yr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const uve=e=>{const t=oC(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ae(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Tse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Tse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};h_(r.variables,e.breakpoints,"breakpoint"),h_(r.variables,e.spacing,"spacing"),h_(r.variables,e.fontSizes,"font-size"),h_(r.variables,e.lineHeights,"line-height"),h_(r.variables,e.shadows,"shadow"),h_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Yr(e.colors).forEach(s=>{const o=e.colors[s];if(bUe(o)){Object.assign(r.light,sN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,sN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,sN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,sN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Yr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function _Ue({theme:e,generator:t}){const n=uve(e),r=t==null?void 0:t(e);return r?Zq(n,r):n}const lj=uve(aW);function wUe(e){const t={variables:{},light:{},dark:{}};return Yr(e.variables).forEach(n=>{lj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Yr(e.light).forEach(n=>{lj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Yr(e.dark).forEach(n=>{lj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function EUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function lve({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ts(),r=sW(),i=JBe(),s=_Ue({theme:n,generator:i}),o=e===":root"&&t,a=o?wUe(s):s,u=yUe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":EUe(e)}`}}):null}lve.displayName="@mantine/CssVariables";function xUe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function p_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function SUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=R.useRef(),[s,o]=R.useState(()=>e.get(t)),a=r||s,u=R.useCallback(c=>{r||(p_(c,n),o(c),e.set(c))},[e.set,a,r]),l=R.useCallback(()=>{o(t),p_(t,n),e.clear()},[e.clear,t]);return R.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),xb(()=>{p_(e.get(t),n)},[]),R.useEffect(()=>{var f;if(r)return p_(r,n),()=>{};r===void 0&&p_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&p_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function TUe({respectReducedMotion:e,getRootElement:t}){xb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}xUe();function cve({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=dUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=SUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return TUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(ove.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(ave,{theme:e,children:[o&&_.jsx(lve,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(gUe,{}),t]})})}cve.displayName="@mantine/core/MantineProvider";function jm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ts();return{resolvedClassNames:XM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:wO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const AUe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function CUe({theme:e,options:t,unstyled:n}){return Ki((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||AUe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function IUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return XM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Ase({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return XM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function kUe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function RUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function NUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function PUe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=XM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function DUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function OUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ki(CUe({theme:e,options:t,unstyled:a||h}),PUe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),DUe({options:t,classes:o,selector:r,unstyled:a}),Ase({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Ase({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),IUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),kUe({rootSelector:l,selector:r,className:u}),RUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&NUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function $Ue({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return wO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function vU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...vU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function MUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...wy(n[r])}}),t),{})}function LUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=MUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function FUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&$Ue({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&wO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&wO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...LUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?vU({style:u,theme:e}):null,...vU({style:r==null?void 0:r.style,theme:e})}}function jUe({props:e,stylesCtx:t,themeName:n}){var o;const r=Ts(),i=(o=rUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function gt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ts(),h=ZBe(),p=eUe(),m=tUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=jUe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:OUe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:FUe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Rx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=Ts(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...wy(n)}}function cj(e){return Yr(e).reduce((t,n)=>e[n]!==void 0?`${t}${mBe(n)}:${e[n]};`:t,"").trim()}function BUe({selector:e,styles:t,media:n,container:r}){const i=t?cj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${cj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${cj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Sb(e){const t=sW();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:BUe(e)}})}function Tb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:I,ta:N,lh:O,fs:P,tt:$,td:F,w:L,miw:B,maw:z,h:q,mih:D,mah:U,bgsz:W,bgp:j,bgr:H,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...ze}=e;return{styleProps:wy({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:I,ta:N,lh:O,fs:P,tt:$,td:F,w:L,miw:B,maw:z,h:q,mih:D,mah:U,bgsz:W,bgp:j,bgr:H,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:ze}}const UUe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function lW(e,t){const n=$h({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function zUe(e,t){const n=$h({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:lW(e,t)}function VUe(e,t){if(typeof e=="number")return Ae(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ae(n)}`;return r&&(s+=` ${r}`),vUe.length>0&&(s+=` ${lW(i.join(" "),t)}`),s.trim()}return e}const Cse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function HUe(e){return typeof e=="string"&&e in Cse?Cse[e]:e}const qUe=["h1","h2","h3","h4","h5","h6"];function WUe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&qUe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ae(e):e}function GUe(e){return e}const YUe=["h1","h2","h3","h4","h5","h6"];function KUe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&YUe.includes(e)?`var(--mantine-${e}-line-height)`:e}function XUe(e){return typeof e=="number"?Ae(e):e}function QUe(e,t){if(typeof e=="number")return Ae(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ae(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const fj={color:lW,textColor:zUe,fontSize:WUe,spacing:QUe,identity:GUe,size:XUe,lineHeight:KUe,fontFamily:HUe,border:VUe};function Ise(e){return e.replace("(min-width: ","").replace("em)","")}function JUe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Ise(i))-Number(Ise(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function ZUe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function e7e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function t7e(e){return typeof e=="object"&&e!==null?Yr(e).filter(t=>t!=="base"):[]}function n7e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function fve({styleProps:e,data:t,theme:n}){return JUe(Yr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=e7e(e[i]);if(!ZUe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=fj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=t7e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=fj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:fj[s.type](n7e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function FI(){return`__m__-${R.useId().replace(/:/g,"")}`}function cW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...cW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function dve(e){return e.startsWith("data-")?e:`data-${e}`}function r7e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[dve(n)]=e[n]),t},{})}function hve(e){return e?typeof e=="string"?{[dve(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...hve(n)}),{}):r7e(e):null}function bU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...bU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function i7e({theme:e,style:t,vars:n,styleProps:r}){const i=bU(t,e),s=bU(n,e);return{...i,...s,...r}}const pve=R.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=Ts(),g=e||"div",{styleProps:y,rest:v}=Tb(h),b=nUe(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=FI(),T=fve({styleProps:y,theme:m,data:UUe}),S={ref:p,style:i7e({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Ki(r,w,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":K1e(o)?void 0:o||void 0,size:d,...hve(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(Sb,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});pve.displayName="@mantine/core/Box";const ve=pve;function mve(e){return e}function Le(e){const t=R.forwardRef(e);return t.extend=mve,t}function zs(e){const t=R.forwardRef(e);return t.extend=mve,t}const s7e=R.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Mh(){return R.useContext(s7e)}function o7e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function dj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const iT=typeof window<"u"&&window.requestAnimationFrame;function a7e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=R.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=R.useState(r?{}:o),l=p=>{MI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||o7e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}fm(()=>{typeof iT=="function"&&iT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),iT(()=>{const p=dj(i);c({...f(p),height:p})})}:()=>{const p=dj(i);c({...f(p),willChange:"height",height:p}),iT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=dj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:nve(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const u7e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},QM=Le((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",u7e,e),c=Ts(),f=iW(),h=(c.respectReducedMotion?f:!1)?0:i,p=a7e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(ve,{...l,children:n}):null:_.jsx(ve,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...cW(o,c)},ref:t,...l}),children:n})});QM.displayName="@mantine/core/Collapse";const[l7e,jc]=ho("ScrollArea.Root component was not found in tree");function pE(e,t){const n=N1(t);xb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const c7e=R.forwardRef((e,t)=>{const{style:n,...r}=e,i=jc(),[s,o]=R.useState(0),[a,u]=R.useState(0),l=!!(s&&a);return pE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),pE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),f7e=R.forwardRef((e,t)=>{const n=jc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(c7e,{...e,ref:t}):null}),d7e={scrollHideDelay:1e3,type:"hover"},gve=R.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",d7e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=R.useState(null),[l,c]=R.useState(null),[f,d]=R.useState(null),[h,p]=R.useState(null),[m,g]=R.useState(null),[y,v]=R.useState(0),[b,w]=R.useState(0),[E,T]=R.useState(!1),[S,A]=R.useState(!1),C=cs(t,I=>u(I));return _.jsx(l7e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(ve,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});gve.displayName="@mantine/core/ScrollAreaRoot";function yve(e,t){const n=e/t;return Number.isNaN(n)?0:n}function JM(e){const t=yve(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function vve(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function h7e(e,[t,n]){return Math.min(n,Math.max(t,e))}function kse(e,t,n="ltr"){const r=JM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=h7e(e,u);return vve([0,o],[0,a])(l)}function p7e(e,t,n,r="ltr"){const i=JM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return vve([u,l],f)(e)}function bve(e,t){return e>0&&e<t}function EO(e){return e?parseInt(e,10):0}function mv(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[m7e,_ve]=ho("ScrollAreaScrollbar was not found in tree"),wve=R.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=jc(),[h,p]=R.useState(null),m=cs(t,A=>p(A)),g=R.useRef(null),y=R.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=N1(l),E=N1(a),T=KM(c,10),S=A=>{if(g.current){const C=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:C,y:I})}};return R.useEffect(()=>{const A=C=>{const I=C.target;(h==null?void 0:h.contains(I))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),R.useEffect(E,[n,E]),pE(h,T),pE(d.content,T),_.jsx(m7e,{value:{scrollbar:h,hasThumb:r,onThumbChange:N1(i),onThumbPointerUp:N1(s),onThumbPositionChange:E,onThumbPointerDown:N1(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:mv(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(A))}),onPointerMove:mv(e.onPointerMove,S),onPointerUp:mv(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),g7e=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=jc(),[a,u]=R.useState(),l=R.useRef(null),c=cs(t,l,o.onScrollbarXChange);return R.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(wve,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${JM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),bve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:EO(a.paddingLeft),paddingEnd:EO(a.paddingRight)}})}})}),y7e=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=jc(),[a,u]=R.useState(),l=R.useRef(null),c=cs(t,l,o.onScrollbarYChange);return R.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(wve,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${JM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),bve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:EO(a.paddingTop),paddingEnd:EO(a.paddingBottom)}})}})}),fW=R.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Mh(),s=jc(),o=R.useRef(null),a=R.useRef(0),[u,l]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=yve(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>p7e(h,a.current,u,p);return n==="horizontal"?_.jsx(g7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=kse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(y7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=kse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Eve=R.forwardRef((e,t)=>{const n=jc(),{forceMount:r,...i}=e,[s,o]=R.useState(!1),a=e.orientation==="horizontal",u=KM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return pE(n.viewport,u),pE(n.content,u),r||s?_.jsx(fW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),v7e=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jc(),[s,o]=R.useState(!1);return R.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(Eve,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),b7e=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jc(),s=e.orientation==="horizontal",[o,a]=R.useState("hidden"),u=KM(()=>a("idle"),100);return R.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),R.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(fW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:mv(e.onPointerEnter,()=>a("interacting")),onPointerLeave:mv(e.onPointerLeave,()=>a("idle"))}):null}),Rse=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return R.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(v7e,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(b7e,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(Eve,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(fW,{...r,ref:t}):null});function _7e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const w7e=R.forwardRef((e,t)=>{const{style:n,...r}=e,i=jc(),s=_ve(),{onThumbPositionChange:o}=s,a=cs(t,c=>s.onThumbChange(c)),u=R.useRef(),l=KM(()=>{u.current&&(u.current(),u.current=void 0)},100);return R.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=_7e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:mv(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:mv(e.onPointerUp,s.onThumbPointerUp)})}),Nse=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=_ve();return n||i.hasThumb?_.jsx(w7e,{ref:t,...r}):null}),xve=R.forwardRef(({children:e,style:t,...n},r)=>{const i=jc(),s=cs(r,i.onViewportChange);return _.jsx(ve,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});xve.displayName="@mantine/core/ScrollAreaViewport";var dW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Sve={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},E7e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ae(t)}}),dm=Le((e,t)=>{const n=xe("ScrollArea",Sve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=R.useState(!1),E=gt({name:"ScrollArea",props:n,classes:dW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:E7e});return _.jsxs(gve,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(xve,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Rse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Nse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Rse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Nse,{...E("thumb")})}),_.jsx(f7e,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});dm.displayName="@mantine/core/ScrollArea";const hW=Le((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",Sve,e);return _.jsx(ve,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(ve,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(dm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});dm.classes=dW;hW.displayName="@mantine/core/ScrollAreaAutosize";hW.classes=dW;dm.Autosize=hW;var Tve={root:"m_87cf2631"};const x7e={__staticSelector:"UnstyledButton"},_s=zs((e,t)=>{const n=xe("UnstyledButton",x7e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=gt({name:s,props:n,classes:Tve,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(ve,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});_s.classes=Tve;_s.displayName="@mantine/core/UnstyledButton";var Ave={root:"m_515a97f8"};const S7e={},pW=Le((e,t)=>{const n=xe("VisuallyHidden",S7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=gt({name:"VisuallyHidden",classes:Ave,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(ve,{component:"span",ref:t,...c("root"),...l})});pW.classes=Ave;pW.displayName="@mantine/core/VisuallyHidden";var Cve={root:"m_1b7284a3"};const T7e={},A7e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Kr(t),"--paper-shadow":tW(n)}}),Nx=zs((e,t)=>{const n=xe("Paper",T7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=gt({name:"Paper",props:n,classes:Cve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:A7e});return _.jsx(ve,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});Nx.classes=Cve;Nx.displayName="@mantine/core/Paper";function Px(e){return Ive(e)?(e.nodeName||"").toLowerCase():"#document"}function ju(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Bm(e){var t;return(t=(Ive(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ive(e){return e instanceof Node||e instanceof ju(e).Node}function Ei(e){return e instanceof Element||e instanceof ju(e).Element}function Dl(e){return e instanceof HTMLElement||e instanceof ju(e).HTMLElement}function _U(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ju(e).ShadowRoot}function jI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ic(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function C7e(e){return["table","td","th"].includes(Px(e))}function mW(e){const t=gW(),n=Ic(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function I7e(e){let t=hm(e);for(;Dl(t)&&!P0(t);){if(mW(t))return t;t=hm(t)}return null}function gW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function P0(e){return["html","body","#document"].includes(Px(e))}function Ic(e){return ju(e).getComputedStyle(e)}function ZM(e){return Ei(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function hm(e){if(Px(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_U(e)&&e.host||Bm(e);return _U(t)?t.host:t}function kve(e){const t=hm(e);return P0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Dl(t)&&jI(t)?t:kve(t)}function Kp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=kve(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=ju(i);return s?t.concat(o,o.visualViewport||[],jI(i)?i:[],o.frameElement&&n?Kp(o.frameElement):[]):t.concat(i,Kp(i,[],n))}function Pse(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function aC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&_U(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Rve(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Nve(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function k7e(e){return P7e()?!1:!Dse()&&e.width===0&&e.height===0||Dse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function R7e(){return/apple/i.test(navigator.vendor)}function Dse(){const e=/android/i;return e.test(Rve())||e.test(Nve())}function N7e(){return Rve().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function P7e(){return Nve().includes("jsdom/")}function wU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function D7e(e){return"nativeEvent"in e}function O7e(e){return e.matches("html,body")}function K1(e){return(e==null?void 0:e.ownerDocument)||document}function hj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function L_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const $7e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function M7e(e){return Dl(e)&&e.matches($7e)}const _l=Math.min,aa=Math.max,xO=Math.round,oN=Math.floor,D0=e=>({x:e,y:e}),L7e={left:"right",right:"left",bottom:"top",top:"bottom"},F7e={start:"end",end:"start"};function EU(e,t,n){return aa(e,_l(t,n))}function pm(e,t){return typeof e=="function"?e(t):e}function Uf(e){return e.split("-")[0]}function Dx(e){return e.split("-")[1]}function yW(e){return e==="x"?"y":"x"}function vW(e){return e==="y"?"height":"width"}function Ab(e){return["top","bottom"].includes(Uf(e))?"y":"x"}function bW(e){return yW(Ab(e))}function j7e(e,t,n){n===void 0&&(n=!1);const r=Dx(e),i=bW(e),s=vW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=SO(o)),[o,SO(o)]}function B7e(e){const t=SO(e);return[xU(e),t,xU(t)]}function xU(e){return e.replace(/start|end/g,t=>F7e[t])}function U7e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function z7e(e,t,n,r){const i=Dx(e);let s=U7e(Uf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(xU)))),s}function SO(e){return e.replace(/left|right|bottom|top/g,t=>L7e[t])}function V7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function _W(e){return typeof e!="number"?V7e(e):{top:e,right:e,bottom:e,left:e}}function mE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ose(e,t,n){let{reference:r,floating:i}=e;const s=Ab(t),o=bW(t),a=vW(o),u=Uf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Dx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const H7e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Ose(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Ose(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function wW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=pm(t,e),p=_W(h),g=a[d?f==="floating"?"reference":"floating":f],y=mE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=mE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const q7e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=pm(e,t)||{};if(l==null)return{};const f=_W(c),d={x:n,y:r},h=bW(i),p=vW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=T?T[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(T)))&&(S=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=S/2-m[p]/2-1,I=_l(f[y],C),N=_l(f[v],C),O=I,P=S-m[p]-N,$=S/2-m[p]/2+A,F=EU(O,$,P),L=!u.arrow&&Dx(i)!=null&&$!==F&&s.reference[p]/2-($<O?I:N)-m[p]/2<0,B=L?$<O?$-O:$-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...L&&{alignmentOffset:B}},reset:L}}}),W7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=pm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Uf(i),v=Uf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[SO(a)]:B7e(a));!d&&p!=="none"&&w.push(...z7e(a,m,p,b));const E=[a,...w],T=await wW(t,g),S=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(T[y]),f){const O=j7e(i,o,b);S.push(T[O[0]],T[O[1]])}if(A=[...A,{placement:i,overflows:S}],!S.every(O=>O<=0)){var C,I;const O=(((C=s.flip)==null?void 0:C.index)||0)+1,P=E[O];if(P)return{data:{index:O,overflows:A},reset:{placement:P}};let $=(I=A.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:I.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=A.map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function Pve(e){const t=_l(...e.map(s=>s.left)),n=_l(...e.map(s=>s.top)),r=aa(...e.map(s=>s.right)),i=aa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function G7e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>mE(Pve(i)))}const Y7e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=pm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=G7e(c),d=mE(Pve(c)),h=_W(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Ab(n)==="y"){const I=f[0],N=f[f.length-1],O=Uf(n)==="top",P=I.top,$=N.bottom,F=O?I.left:N.left,L=O?I.right:N.right,B=L-F,z=$-P;return{top:P,bottom:$,left:F,right:L,width:B,height:z,x:F,y:P}}const g=Uf(n)==="left",y=aa(...f.map(I=>I.right)),v=_l(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),w=b[0].top,E=b[b.length-1].bottom,T=v,S=y,A=S-T,C=E-w;return{top:w,bottom:E,left:T,right:S,width:A,height:C,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function K7e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Uf(n),a=Dx(n),u=Ab(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=pm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const X7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await K7e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Q7e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=pm(e,t),l={x:n,y:r},c=await wW(t,u),f=Ab(Uf(i)),d=yW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=EU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=EU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},J7e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=pm(e,t),c={x:n,y:r},f=Ab(i),d=yW(f);let h=c[d],p=c[f];const m=pm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Uf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},Z7e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=pm(e,t),u=await wW(t,a),l=Uf(n),c=Dx(n),f=Ab(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=_l(h-u[p],g),b=_l(d-u[m],y),w=!t.middlewareData.shift;let E=v,T=b;if(f?T=c||w?_l(b,y):y:E=c||w?_l(v,g):g,w&&!c){const A=aa(u.left,0),C=aa(u.right,0),I=aa(u.top,0),N=aa(u.bottom,0);f?T=d-2*(A!==0||C!==0?A+C:aa(u.left,u.right)):E=h-2*(I!==0||N!==0?I+N:aa(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Dve(e){const t=Ic(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Dl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=xO(n)!==s||xO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function EW(e){return Ei(e)?e:e.contextElement}function kw(e){const t=EW(e);if(!Dl(t))return D0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Dve(t);let o=(s?xO(n.width):n.width)/r,a=(s?xO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const eze=D0(0);function Ove(e){const t=ju(e);return!gW()||!t.visualViewport?eze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function tze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ju(e)?!1:t}function Ov(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=EW(e);let o=D0(1);t&&(r?Ei(r)&&(o=kw(r)):o=kw(e));const a=tze(s,n,r)?Ove(s):D0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=ju(s),h=r&&Ei(r)?ju(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=kw(m),y=m.getBoundingClientRect(),v=Ic(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=ju(m),m=p.frameElement}}return mE({width:c,height:f,x:u,y:l})}const nze=[":popover-open",":modal"];function xW(e){return nze.some(t=>{try{return e.matches(t)}catch{return!1}})}function rze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Bm(r),a=t?xW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=D0(1);const c=D0(0),f=Dl(r);if((f||!f&&!s)&&((Px(r)!=="body"||jI(o))&&(u=ZM(r)),Dl(r))){const d=Ov(r);l=kw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function ize(e){return Array.from(e.getClientRects())}function $ve(e){return Ov(Bm(e)).left+ZM(e).scrollLeft}function sze(e){const t=Bm(e),n=ZM(e),r=e.ownerDocument.body,i=aa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=aa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+$ve(e);const a=-n.scrollTop;return Ic(r).direction==="rtl"&&(o+=aa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function oze(e,t){const n=ju(e),r=Bm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=gW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function aze(e,t){const n=Ov(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Dl(e)?kw(e):D0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function $se(e,t,n){let r;if(t==="viewport")r=oze(e,n);else if(t==="document")r=sze(Bm(e));else if(Ei(t))r=aze(t,n);else{const i=Ove(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return mE(r)}function Mve(e,t){const n=hm(e);return n===t||!Ei(n)||P0(n)?!1:Ic(n).position==="fixed"||Mve(n,t)}function uze(e,t){const n=t.get(e);if(n)return n;let r=Kp(e,[],!1).filter(a=>Ei(a)&&Px(a)!=="body"),i=null;const s=Ic(e).position==="fixed";let o=s?hm(e):e;for(;Ei(o)&&!P0(o);){const a=Ic(o),u=mW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||jI(o)&&!u&&Mve(e,o))?r=r.filter(c=>c!==o):i=a,o=hm(o)}return t.set(e,r),r}function lze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?xW(t)?[]:uze(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=$se(t,c,i);return l.top=aa(f.top,l.top),l.right=_l(f.right,l.right),l.bottom=_l(f.bottom,l.bottom),l.left=aa(f.left,l.left),l},$se(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function cze(e){const{width:t,height:n}=Dve(e);return{width:t,height:n}}function fze(e,t,n){const r=Dl(t),i=Bm(t),s=n==="fixed",o=Ov(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=D0(0);if(r||!r&&!s)if((Px(t)!=="body"||jI(i))&&(a=ZM(t)),r){const f=Ov(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=$ve(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function pj(e){return Ic(e).position==="static"}function Mse(e,t){return!Dl(e)||Ic(e).position==="fixed"?null:t?t(e):e.offsetParent}function Lve(e,t){const n=ju(e);if(xW(e))return n;if(!Dl(e)){let i=hm(e);for(;i&&!P0(i);){if(Ei(i)&&!pj(i))return i;i=hm(i)}return n}let r=Mse(e,t);for(;r&&C7e(r)&&pj(r);)r=Mse(r,t);return r&&P0(r)&&pj(r)&&!mW(r)?n:r||I7e(e)||n}const dze=async function(e){const t=this.getOffsetParent||Lve,n=this.getDimensions,r=await n(e.floating);return{reference:fze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hze(e){return Ic(e).direction==="rtl"}const pze={convertOffsetParentRelativeRectToViewportRelativeRect:rze,getDocumentElement:Bm,getClippingRect:lze,getOffsetParent:Lve,getElementRects:dze,getClientRects:ize,getDimensions:cze,getScale:kw,isElement:Ei,isRTL:hze};function mze(e,t){let n=null,r;const i=Bm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=oN(c),p=oN(i.clientWidth-(l+f)),m=oN(i.clientHeight-(c+d)),g=oN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:aa(0,_l(1,u))||1};let b=!0;function w(E){const T=E[0].intersectionRatio;if(T!==u){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function gze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=EW(e),c=i||s?[...l?Kp(l):[],...Kp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?mze(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Ov(e):null;u&&g();function g(){const y=Ov(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const yze=X7e,vze=Q7e,bze=W7e,_ze=Z7e,Lse=q7e,wze=Y7e,Eze=J7e,xze=(e,t,n)=>{const r=new Map,i={platform:pze,...n},s={...i.platform,_c:r};return H7e(e,t,{...i,platform:s})};var zP=typeof document<"u"?R.useLayoutEffect:R.useEffect;function TO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!TO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!TO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fve(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fse(e,t){const n=Fve(e);return Math.round(t*n)/n}function jse(e){const t=R.useRef(e);return zP(()=>{t.current=e}),t}function Sze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=R.useState(r);TO(d,r)||h(r);const[p,m]=R.useState(null),[g,y]=R.useState(null),v=R.useCallback(B=>{B!==T.current&&(T.current=B,m(B))},[]),b=R.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,T=R.useRef(null),S=R.useRef(null),A=R.useRef(c),C=u!=null,I=jse(u),N=jse(i),O=R.useCallback(()=>{if(!T.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),xze(T.current,S.current,B).then(z=>{const q={...z,isPositioned:!0};P.current&&!TO(A.current,q)&&(A.current=q,MI.flushSync(()=>{f(q)}))})},[d,t,n,N]);zP(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=R.useRef(!1);zP(()=>(P.current=!0,()=>{P.current=!1}),[]),zP(()=>{if(w&&(T.current=w),E&&(S.current=E),w&&E){if(I.current)return I.current(w,E,O);O()}},[w,E,O,I,C]);const $=R.useMemo(()=>({reference:T,floating:S,setReference:v,setFloating:b}),[v,b]),F=R.useMemo(()=>({reference:w,floating:E}),[w,E]),L=R.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const z=Fse(F.floating,c.x),q=Fse(F.floating,c.y);return a?{...B,transform:"translate("+z+"px, "+q+"px)",...Fve(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:q}},[n,a,F.floating,c.x,c.y]);return R.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:L}),[c,O,$,F,L])}const Tze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Lse({element:r.current,padding:i}).fn(n):{}:r?Lse({element:r,padding:i}).fn(n):{}}}},jve=(e,t)=>({...yze(e),options:[e,t]}),SW=(e,t)=>({...vze(e),options:[e,t]}),Bse=(e,t)=>({...Eze(e),options:[e,t]}),SU=(e,t)=>({...bze(e),options:[e,t]}),Aze=(e,t)=>({..._ze(e),options:[e,t]}),TU=(e,t)=>({...wze(e),options:[e,t]}),Bve=(e,t)=>({...Tze(e),options:[e,t]}),Uve={...GD},Cze=Uve.useInsertionEffect,Ize=Cze||(e=>e());function $g(e){const t=R.useRef(()=>{});return Ize(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var nh=typeof document<"u"?R.useLayoutEffect:R.useEffect;let Use=!1,kze=0;const zse=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kze++;function Rze(){const[e,t]=R.useState(()=>Use?zse():void 0);return nh(()=>{e==null&&t(zse())},[]),R.useEffect(()=>{Use=!0},[]),e}const Nze=Uve.useId,zve=Nze||Rze;function Pze(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Dze=R.createContext(null),Oze=R.createContext(null),TW=()=>{var e;return((e=R.useContext(Dze))==null?void 0:e.id)||null},AW=()=>R.useContext(Oze);function CW(e){return"data-floating-ui-"+e}function Vse(e){const t=R.useRef(e);return nh(()=>{t.current=e}),t}const Hse=CW("safe-polygon");function VP(e,t,n){return n&&!wU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function $ze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=AW(),m=TW(),g=Vse(c),y=Vse(l),v=R.useRef(),b=R.useRef(-1),w=R.useRef(),E=R.useRef(-1),T=R.useRef(!0),S=R.useRef(!1),A=R.useRef(()=>{}),C=R.useCallback(()=>{var P;const $=(P=i.current.openEvent)==null?void 0:P.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);R.useEffect(()=>{if(!u)return;function P($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),R.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){C()&&r(!1,F,"hover")}const $=K1(a).documentElement;return $.addEventListener("mouseleave",P),()=>{$.removeEventListener("mouseleave",P)}},[a,n,r,u,g,C]);const I=R.useCallback(function(P,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const L=VP(y.current,"close",v.current);L&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),L)):$&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),N=$g(()=>{A.current(),w.current=void 0}),O=$g(()=>{if(S.current){const P=K1(a).body;P.style.pointerEvents="",P.removeAttribute(Hse),S.current=!1}});return R.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),T.current=!1,f&&!wU(v.current)||d>0&&!VP(y.current,"open"))return;const z=VP(y.current,"open",v.current);z?b.current=window.setTimeout(()=>{r(!0,B,"hover")},z):r(!0,B,"hover")}function F(B){if(P())return;A.current();const z=K1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),I(B,!0,"safe-polygon")}});const D=w.current;z.addEventListener("mousemove",D),A.current=()=>{z.removeEventListener("mousemove",D)};return}(v.current==="touch"?!aC(a,B.relatedTarget):!0)&&I(B)}function L(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),I(B)}})(B))}if(Ei(o)){const B=o;return n&&B.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,I,N,O,r,n,p,y,g,i]),nh(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&C()){const F=K1(a).body;if(F.setAttribute(Hse,""),F.style.pointerEvents="none",S.current=!0,Ei(o)&&a){var $;const L=o,B=p==null||($=p.nodesRef.current.find(z=>z.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),nh(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),R.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,N,O]),R.useMemo(()=>{if(!u)return{};function P($){v.current=$.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove($){function F(){T.current||r(!0,$.nativeEvent,"hover")}f&&!wU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){I($.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const AU=()=>{},Vve=R.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:AU,setState:AU,isInstantPhase:!1}),Hve=()=>R.useContext(Vve);function Mze(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=R.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=R.useRef(null),a=R.useCallback(u=>{s({currentId:u})},[]);return nh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),R.createElement(Vve.Provider,{value:R.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Lze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Hve(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return nh(()=>{u&&(f({delay:{open:1,close:VP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),nh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),nh(()=>{l===AU||!n||l(o)},[n,l,o]),a}function mj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Fze={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},jze={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},qse=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Bze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=AW(),v=$g(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=R.useRef(!1),E=R.useRef(!1),{escapeKey:T,outsidePress:S}=qse(m),{escapeKey:A,outsidePress:C}=qse(g),I=$g($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?mj(y.nodesRef.current,L):[];if(!T&&($.stopPropagation(),B.length>0)){let z=!0;if(B.forEach(q=>{var D;if((D=q.context)!=null&&D.open&&!q.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,D7e($)?$.nativeEvent:$,"escape-key")}),N=$g($=>{var F;const L=()=>{var B;I($),(B=L_($))==null||B.removeEventListener("keydown",L)};(F=L_($))==null||F.addEventListener("keydown",L)}),O=$g($=>{var F;const L=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||L||typeof b=="function"&&!b($))return;const z=L_($),q="["+CW("inert")+"]",D=K1(o).querySelectorAll(q);let U=Ei(z)?z:null;for(;U&&!P0(U);){const G=hm(U);if(P0(G)||!Ei(G))break;U=G}if(D.length&&Ei(z)&&!O7e(z)&&!aC(z,o)&&Array.from(D).every(G=>!aC(U,G)))return;if(Dl(z)&&o){const G=z.clientWidth>0&&z.scrollWidth>z.clientWidth,ne=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let ce=ne&&$.offsetX>z.clientWidth;if(ne&&Ic(z).direction==="rtl"&&(ce=$.offsetX<=z.offsetWidth-z.clientWidth),ce||G&&$.offsetY>z.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&mj(y.nodesRef.current,W).some(G=>{var ne;return hj($,(ne=G.context)==null?void 0:ne.elements.floating)});if(hj($,o)||hj($,s)||j)return;const H=y?mj(y.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=$g($=>{var F;const L=()=>{var B;O($),(B=L_($))==null||B.removeEventListener(f,L)};(F=L_($))==null||F.addEventListener(f,L)});return R.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const F=K1(o);l&&F.addEventListener("keydown",A?N:I,A),b&&F.addEventListener(f,C?P:O,C);let L=[];return p&&(Ei(s)&&(L=Kp(s)),Ei(o)&&(L=L.concat(Kp(o))),!Ei(i)&&i&&i.contextElement&&(L=L.concat(Kp(i.contextElement)))),L=L.filter(B=>{var z;return B!==((z=F.defaultView)==null?void 0:z.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?N:I,A),b&&F.removeEventListener(f,C?P:O,C),L.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,T,S,I,A,N,O,C,P]),R.useEffect(()=>{w.current=!1},[b,f]),R.useMemo(()=>u?{reference:{onKeyDown:I,[Fze[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[jze[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,I])}function Uze(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=zve(),s=R.useRef({}),[o]=R.useState(()=>Pze()),a=TW()!=null,[u,l]=R.useState(r.reference),c=$g((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=R.useMemo(()=>({setPositionReference:l}),[]),d=R.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return R.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function IW(e){e===void 0&&(e={});const{nodeId:t}=e,n=Uze({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=R.useState(null),[a,u]=R.useState(null),c=(i==null?void 0:i.reference)||s,f=R.useRef(null),d=AW();nh(()=>{c&&(f.current=c)},[c]);const h=Sze({...e,elements:{...i,...a&&{reference:a}}}),p=R.useCallback(b=>{const w=Ei(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=R.useCallback(b=>{(Ei(b)||b===null)&&(f.current=b,o(b)),(Ei(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ei(b))&&h.refs.setReference(b)},[h.refs]),g=R.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=R.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=R.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return nh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),R.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function zze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=R.useRef(!1),c=R.useRef(),f=R.useRef(!0);return R.useEffect(()=>{if(!a)return;const d=ju(o);function h(){!n&&Dl(o)&&o===Pse(K1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),R.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),R.useEffect(()=>()=>{clearTimeout(c.current)},[]),R.useMemo(()=>a?{reference:{onPointerDown(d){k7e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=L_(d.nativeEvent);if(u&&Ei(h))try{if(R7e()&&N7e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!M7e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ei(h)&&h.hasAttribute(CW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Pse(o?o.ownerDocument:document);!h&&g===o||aC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||aC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Wse="active",Gse="selected";function gj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Wse]:o,[Gse]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Wse,Gse].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Vze(e){e===void 0&&(e=[]);const t=e,n=R.useCallback(s=>gj(s,e,"reference"),t),r=R.useCallback(s=>gj(s,e,"floating"),t),i=R.useCallback(s=>gj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return R.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const Hze=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function qze(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Hze.get(o))!=null?n:o,u=zve(),c=TW()!=null;return R.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function qve(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Yse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Kse(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Wze={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Gze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ae(t),height:Ae(t),transform:"rotate(45deg)",position:"absolute",[Wze[u]]:Ae(r)},f=Ae(-t/2);return u==="left"?{...c,...Yse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Yse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Kse(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Kse(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const kW=R.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Mh();return s?_.jsx("div",{...l,ref:c,style:{...u,...Gze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});kW.displayName="@mantine/core/FloatingArrow";const[Yze,Wve]=ho("Popover component was not found in the tree");function eL({children:e,active:t=!0,refProp:n="ref"}){const r=$Be(t),i=cs(r,e==null?void 0:e.ref);return Ey(e)?R.cloneElement(e,{[n]:i}):e}function Gve(e){return _.jsx(pW,{tabIndex:-1,"data-autofocus":!0,...e})}eL.displayName="@mantine/core/FocusTrap";Gve.displayName="@mantine/core/FocusTrapInitialFocus";eL.InitialFocus=Gve;function Kze(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Xze={},Yve=R.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",Xze,e),[s,o]=R.useState(!1),a=R.useRef(null);return xb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Kze(i),rW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:MI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});Yve.displayName="@mantine/core/Portal";function BI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(Yve,{...n,children:t}):_.jsx(_.Fragment,{children:t})}BI.displayName="@mantine/core/OptionalPortal";const sT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ae(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),aN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ae(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ae(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ae(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ae(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ae(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ae(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ae(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ae(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...sT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...sT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...sT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...sT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...sT("top"),common:{transformOrigin:"top right"}}},Xse={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Qze({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in aN?{transitionProperty:aN[e].transitionProperty,...i,...aN[e].common,...aN[e][Xse[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Xse[t]]}}function Jze({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Ts(),l=iW(),c=u.respectReducedMotion?l:!1,[f,d]=R.useState(c?0:e),[h,p]=R.useState(r?"entered":"exited"),m=R.useRef(-1),g=R.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{P9e.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return fm(()=>{y(r)},[r]),R.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Um({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Jze({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(Qze({transition:t,duration:f,state:d,timingFunction:h}))})}Um.displayName="@mantine/core/Transition";var Kve={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Zze={},RW=Le((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",Zze,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Wve(),h=Q1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=cs(t,d.floating);return d.disabled?null:_.jsx(BI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Um,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(eL,{active:d.trapFocus,children:_.jsxs(ve,{...p,...f,variant:u,ref:m,onKeyDownCapture:EBe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ae(d.width)},i]}),children:[o,_.jsx(kW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});RW.classes=Kve;RW.displayName="@mantine/core/PopoverDropdown";const eVe={refProp:"ref",popupType:"dialog"},Xve=Le((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",eVe,e);if(!Ey(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Wve(),u=cs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return R.cloneElement(n,{...o,...l,...a.targetProps,className:Ki(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Xve.displayName="@mantine/core/PopoverTarget";function Qve({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=R.useState(0);R.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return gze(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),fm(()=>{t.update()},r),fm(()=>{s(o=>o+1)},[e])}function tVe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function nVe(e,t){const n=tVe(e.middlewares),r=[jve(e.offset)];return n.shift&&r.push(SW(typeof n.shift=="boolean"?{limiter:Bse(),padding:5}:{limiter:Bse(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?SU():SU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?TU():TU(n.inline)),r.push(Bve({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Aze({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function rVe(e){const[t,n]=Es({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=IW({strategy:e.strategy,placement:e.position,middleware:nVe(e,()=>s)});return Qve({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),fm(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),fm(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const iVe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Fc("popover"),__staticSelector:"Popover",width:"max-content"},sVe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Kr(t),"--popover-shadow":tW(n)}});function ei(e){var _e,ke,ze,ct,Ot,We;const t=xe("Popover",iVe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:T,clickOutsideEvents:S,trapFocus:A,onClose:C,onOpen:I,onChange:N,zIndex:O,radius:P,shadow:$,id:F,defaultOpened:L,__staticSelector:B,withRoles:z,disabled:q,returnFocus:D,variant:U,keepMounted:W,vars:j,floatingStrategy:H,...G}=t,ne=gt({name:B,props:t,classes:Kve,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:sVe}),ce=R.useRef(null),[de,he]=R.useState(null),[ye,Ie]=R.useState(null),{dir:be}=Mh(),Ke=xa(F),Ue=rVe({middlewares:c,width:l,position:qve(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:N,onOpen:I,onClose:C,strategy:H});TBe(()=>b&&Ue.onClose(),S,[de,ye]);const yt=R.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),it=R.useCallback(me=>{Ie(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return _.jsx(Yze,{value:{returnFocus:D,disabled:q,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:O,radius:P,shadow:$,closeOnEscape:T,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:z,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:ne},children:n})}ei.Target=Xve;ei.Dropdown=RW;ei.displayName="@mantine/core/Popover";ei.extend=e=>e;var Sf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const oVe=R.forwardRef(({className:e,...t},n)=>_.jsxs(ve,{component:"span",className:Ki(Sf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Sf.bar}),_.jsx("span",{className:Sf.bar}),_.jsx("span",{className:Sf.bar})]})),aVe=R.forwardRef(({className:e,...t},n)=>_.jsxs(ve,{component:"span",className:Ki(Sf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Sf.dot}),_.jsx("span",{className:Sf.dot}),_.jsx("span",{className:Sf.dot})]})),uVe=R.forwardRef(({className:e,...t},n)=>_.jsx(ve,{component:"span",className:Ki(Sf.ovalLoader,e),...t,ref:n})),Jve={bars:oVe,oval:uVe,dots:aVe},lVe={loaders:Jve,type:"oval"},cVe=(e,{size:t,color:n})=>({root:{"--loader-size":en(t,"loader-size"),"--loader-color":n?Mr(n,e):void 0}}),zm=Le((e,t)=>{const n=xe("Loader",lVe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=gt({name:"Loader",props:n,classes:Sf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:cVe});return p?_.jsx(ve,{...g("root"),ref:t,...m,children:p}):_.jsx(ve,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});zm.defaultLoaders=Jve;zm.classes=Sf;zm.displayName="@mantine/core/Loader";var tL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Qse={orientation:"horizontal"},fVe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ae(t)}}),NW=Le((e,t)=>{const n=xe("ActionIconGroup",Qse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",Qse,e),p=gt({name:"ActionIconGroup",props:n,classes:tL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:fVe,rootSelector:"group"});return _.jsx(ve,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});NW.classes=tL;NW.displayName="@mantine/core/ActionIconGroup";const dVe={},hVe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":en(t,"ai-size"),"--ai-radius":n===void 0?void 0:Kr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},O0=zs((e,t)=>{const n=xe("ActionIcon",dVe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...T}=n,S=gt({name:["ActionIcon",p],props:n,className:r,style:u,classes:tL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:hVe});return _.jsxs(_s,{...S("root",{active:!v&&!l&&!b}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(Um,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(ve,{component:"span",...S("loader",{style:A}),"aria-hidden":!0,children:_.jsx(zm,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(ve,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});O0.classes=tL;O0.displayName="@mantine/core/ActionIcon";O0.Group=NW;const Zve=R.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Zve.displayName="@mantine/core/CloseIcon";var ebe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const pVe={variant:"subtle"},mVe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":en(t,"cb-size"),"--cb-radius":n===void 0?void 0:Kr(n),"--cb-icon-size":Ae(r)}}),Ty=zs((e,t)=>{const n=xe("CloseButton",pVe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=gt({name:"CloseButton",props:n,className:a,style:l,classes:ebe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:mVe});return _.jsxs(_s,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(Zve,{}),i]})});Ty.classes=ebe;Ty.displayName="@mantine/core/CloseButton";function gVe(e){return R.Children.toArray(e).filter(Boolean)}var tbe={root:"m_4081bf90"};const yVe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},vVe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":ss(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),xs=Le((e,t)=>{const n=xe("Group",yVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=gVe(u),E=w.length,T=ss(l??"md"),A={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},C=gt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:tbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:vVe});return _.jsx(ve,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});xs.classes=tbe;xs.displayName="@mantine/core/Group";var nbe={root:"m_9814e45f"};const bVe={zIndex:Fc("modal")},_Ve=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&xd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ae(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Kr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),uC=zs((e,t)=>{const n=xe("Overlay",bVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=gt({name:"Overlay",props:n,classes:nbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ve});return _.jsx(ve,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});uC.classes=nbe;uC.displayName="@mantine/core/Overlay";const[wVe,Vm]=ho("ModalBase component was not found in tree");function EVe({opened:e,transitionDuration:t}){const[n,r]=R.useState(e),i=R.useRef(),o=iW()?0:t;return R.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function xVe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=xa(e),[u,l]=R.useState(!1),[c,f]=R.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=EVe({opened:n,transitionDuration:d});return tve("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Q1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const rbe=R.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:T,bodyMounted:S,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:I}=xVe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(BI,{...c,withinPortal:l,children:_.jsx(wVe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:S,setTitleMounted:C,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(YM,{enabled:A&&f,...v,children:_.jsx(ve,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Fc("modal")).toString(),"--mb-shadow":tW(p),"--mb-padding":ss(m)},children:d})})})})});function SVe(){const e=Vm();return R.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var gE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const PW=R.forwardRef(({className:e,...t},n)=>{const r=SVe(),i=Vm();return _.jsx(ve,{ref:n,...t,id:r,className:Ki({[gE.body]:!i.unstyled},e)})});PW.displayName="@mantine/core/ModalBaseBody";const DW=R.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Vm();return _.jsx(Ty,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ki({[gE.close]:!i.unstyled},e),unstyled:i.unstyled})});DW.displayName="@mantine/core/ModalBaseCloseButton";const ibe=R.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Vm();return _.jsx(Um,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Ki({[gE.inner]:!a.unstyled},n.className),children:_.jsx(eL,{active:a.opened&&a.trapFocus,children:_.jsx(Nx,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ki({[gE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),OW=R.forwardRef(({className:e,...t},n)=>{const r=Vm();return _.jsx(ve,{component:"header",ref:n,className:Ki({[gE.header]:!r.unstyled},e),...t})});OW.displayName="@mantine/core/ModalBaseHeader";const TVe={duration:200,timingFunction:"ease",transition:"fade"};function AVe(e){const t=Vm();return{...TVe,...t.transitionProps,...e}}const $W=R.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Vm(),o=AVe(t);return _.jsx(Um,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(uC,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});$W.displayName="@mantine/core/ModalBaseOverlay";function CVe(){const e=Vm();return R.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const MW=R.forwardRef(({className:e,...t},n)=>{const r=CVe(),i=Vm();return _.jsx(ve,{component:"h2",ref:n,className:Ki({[gE.title]:!i.unstyled},e),...t,id:r})});MW.displayName="@mantine/core/ModalBaseTitle";function sbe({children:e}){return _.jsx(_.Fragment,{children:e})}const[IVe,Ox]=kx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Bc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Jse={},kVe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Ae(2)})`}}),nL=Le((e,t)=>{const n=xe("InputDescription",Jse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Jse,n),p=Ox(),m=gt({name:["InputWrapper",c],props:n,classes:Bc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:kVe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(ve,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});nL.classes=Bc;nL.displayName="@mantine/core/InputDescription";const RVe={},NVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Ae(2)})`}}),rL=Le((e,t)=>{const n=xe("InputError",RVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=gt({name:["InputWrapper",c],props:n,classes:Bc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:NVe}),m=Ox(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(ve,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});rL.classes=Bc;rL.displayName="@mantine/core/InputError";const Zse={labelElement:"label"},PVe=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0}}),iL=Le((e,t)=>{const n=xe("InputLabel",Zse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Zse,n),b=gt({name:["InputWrapper",m],props:n,classes:Bc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:PVe}),w=Ox(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(ve,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});iL.classes=Bc;iL.displayName="@mantine/core/InputLabel";const eoe={},LW=Le((e,t)=>{const n=xe("InputPlaceholder",eoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",eoe,n),p=gt({name:["InputPlaceholder",l],props:n,classes:Bc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(ve,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});LW.classes=Bc;LW.displayName="@mantine/core/InputPlaceholder";function DVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const OVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},$Ve=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Ae(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Ae(2)})`}}),FW=Le((e,t)=>{const n=xe("InputWrapper",OVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:T,id:S,required:A,__stylesApiProps:C,mod:I,...N}=n,O=gt({name:["InputWrapper",f],props:C||n,classes:Bc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Ve}),P={size:l,variant:c,__staticSelector:f},$=xa(S),F=typeof T=="boolean"?T:A,L=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,z=$,q=!!m&&typeof m!="boolean",D=!!g,U=`${q?L:""} ${D?B:""}`,W=U.trim().length>0?U.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,H=p&&_.jsx(iL,{labelElement:w,id:j,htmlFor:z,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(nL,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(R.Fragment,{children:d(E)},"input"),ce=q&&R.createElement(rL,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||L},m),de=h.map(he=>{switch(he){case"label":return H;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(IVe,{value:{getStyles:O,describedBy:W,inputId:z,labelId:j,...DVe(h,{hasDescription:D,hasError:q})},children:_.jsx(ve,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...O("root"),...N,children:de})})});FW.classes=Bc;FW.displayName="@mantine/core/InputWrapper";const MVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},LVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":en(t.size,"input-height"),"--input-fz":lo(t.size),"--input-radius":t.radius===void 0?void 0:Kr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ae(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ae(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?en(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),hi=zs((e,t)=>{const n=xe("Input",MVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:S,vars:A,pointer:C,multiline:I,radius:N,id:O,withAria:P,withErrorStyles:$,mod:F,inputSize:L,...B}=n,{styleProps:z,rest:q}=Tb(B),D=Ox(),U={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=gt({name:["Input",l],props:c||n,classes:Bc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:A,varsResolver:LVe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||O}:{};return _.jsxs(ve,{...W("wrapper"),...z,...d,mod:[{error:!!h&&$,pointer:C,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(ve,{component:"input",...q,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});hi.classes=Bc;hi.Wrapper=FW;hi.Label=iL;hi.Error=rL;hi.Description=nL;hi.Placeholder=LW;hi.displayName="@mantine/core/Input";function obe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,vars:C,mod:I,...N}=r,{styleProps:O,rest:P}=Tb(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,id:v,mod:I,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const FVe={__staticSelector:"InputBase",withAria:!0},Uc=zs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=obe("InputBase",FVe,e);return _.jsx(hi.Wrapper,{...r,children:_.jsx(hi,{...n,...i,ref:t})})});Uc.classes={...hi.classes,...hi.Wrapper.classes};Uc.displayName="@mantine/core/InputBase";const jVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var abe={root:"m_8bffd616"};const BVe={},Dt=zs((e,t)=>{const n=xe("Flex",BVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=gt({name:"Flex",classes:abe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ts(),b=FI(),w=fve({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:jVe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(Sb,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(ve,{ref:t,...y("root",{className:b,style:wy(w.inlineStyles)}),...g})]})});Dt.classes=abe;Dt.displayName="@mantine/core/Flex";function UVe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function zVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=R.useRef(),[s,o]=R.useState(!1),[a,u]=R.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=R.useRef(),d=R.useRef();return R.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),R.useEffect(()=>{if(t){const h=p=>{UVe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),HBe(()=>{ive()!=="test"&&o(!0)},20,{autoInvoke:!0}),qBe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var ube={root:"m_96b553a6"};const VVe={},HVe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),jW=Le((e,t)=>{const n=xe("FloatingIndicator",VVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=gt({name:"FloatingIndicator",classes:ube,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HVe}),g=R.useRef(null),{initialized:y,hidden:v}=zVe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=cs(t,g);return!l||!c?null:_.jsx(ve,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});jW.displayName="@mantine/core/FloatingIndicator";jW.classes=ube;const[qVe,BW]=ho("Accordion component was not found in the tree");function yE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ae(t),height:Ae(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}yE.displayName="@mantine/core/AccordionChevron";const[WVe,lbe]=ho("Accordion.Item component was not found in the tree");var UI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const GVe={},UW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",GVe,e),{value:m}=lbe(),g=BW(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(_s,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:eW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(ve,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(ve,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});UW.displayName="@mantine/core/AccordionControl";UW.classes=UI;const YVe={},zW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",YVe,e),c=BW();return _.jsx(WVe,{value:{value:a},children:_.jsx(ve,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});zW.displayName="@mantine/core/AccordionItem";zW.classes=UI;const KVe={},VW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",KVe,e),{value:l}=lbe(),c=BW();return _.jsx(QM,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});VW.displayName="@mantine/core/AccordionPanel";VW.classes=UI;const XVe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(yE,{})},QVe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ae(n),"--accordion-radius":r===void 0?void 0:Kr(r)}});function vu(e){const t=xe("Accordion",XVe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:T,...S}=t,A=xa(h),[C,I]=Es({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(C)?C.includes($):$===C,O=$=>{const F=Array.isArray(C)?C.includes($)?C.filter(L=>L!==$):[...C,$]:$===C?null:$;I(F)},P=gt({name:"Accordion",classes:UI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:QVe});return _.jsx(qVe,{value:{isItemActive:N,onChange:O,getControlId:bO(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:bO(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:P,variant:E,unstyled:o},children:_.jsx(ve,{...P("root"),id:A,...S,variant:E,"data-accordion":!0,children:u})})}const JVe=e=>e;vu.extend=JVe;vu.classes=UI;vu.displayName="@mantine/core/Accordion";vu.Item=zW;vu.Panel=VW;vu.Control=UW;vu.Chevron=yE;var cbe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const ZVe={},eHe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Kr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},$x=Le((e,t)=>{const n=xe("Alert",ZVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=gt({name:"Alert",classes:cbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eHe}),T=xa(h),S=f&&`${T}-title`||void 0,A=`${T}-body`;return _.jsx(ve,{id:T,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":S,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(Ty,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});$x.classes=cbe;$x.displayName="@mantine/core/Alert";var fbe={root:"m_b6d8b162"};function tHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const nHe={inherit:!1},rHe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":lo(i),"--text-lh":X1e(i),"--text-gradient":t==="gradient"?yU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Mr(s,e):void 0}}),et=zs((e,t)=>{const n=xe("Text",nHe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=gt({name:["Text",l],props:n,classes:fbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:rHe});return _.jsx(ve,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":tHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});et.classes=fbe;et.displayName="@mantine/core/Text";var dbe={root:"m_849cf0da"};const iHe={underline:"hover"},Mx=zs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",iHe,e);return _.jsx(et,{component:"a",ref:t,className:Ki({[dbe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Mx.classes=dbe;Mx.displayName="@mantine/core/Anchor";const[sHe,Lx]=ho("AppShell was not found in tree");var Ay={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const oHe={},HW=Le((e,t)=>{const n=xe("AppShellAside",oHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Lx();return h.disabled?null:_.jsx(ve,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});HW.classes=Ay;HW.displayName="@mantine/core/AppShellAside";const aHe={},qW=Le((e,t)=>{var p;const n=xe("AppShellFooter",aHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Lx();return h.disabled?null:_.jsx(ve,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ki({[YM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});qW.classes=Ay;qW.displayName="@mantine/core/AppShellFooter";const uHe={},WW=Le((e,t)=>{var p;const n=xe("AppShellHeader",uHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Lx();return h.disabled?null:_.jsx(ve,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ki({[YM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});WW.classes=Ay;WW.displayName="@mantine/core/AppShellHeader";const lHe={},GW=Le((e,t)=>{const n=xe("AppShellMain",lHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Lx();return _.jsx(ve,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});GW.classes=Ay;GW.displayName="@mantine/core/AppShellMain";function zI(e){return typeof e=="object"?e.base:e}function VI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function HI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function cHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),VI(s)){const f=Ae(zI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(HI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ae(s.base),e["--app-shell-aside-offset"]=Ae(s.base)),Yr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ae(s[f]),t[f]["--app-shell-aside-offset"]=Ae(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=nW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function fHe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(VI(r)){const o=Ae(zI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}HI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ae(r.base),s&&(e["--app-shell-footer-offset"]=Ae(r.base))),Yr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ae(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ae(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function dHe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(VI(r)){const o=Ae(zI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}HI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ae(r.base),s&&(e["--app-shell-header-offset"]=Ae(r.base))),Yr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ae(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ae(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function hHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),VI(s)){const f=Ae(zI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(HI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ae(s.base),e["--app-shell-navbar-offset"]=Ae(s.base)),Yr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ae(s[f]),t[f]["--app-shell-navbar-offset"]=Ae(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=nW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function yj(e){return Number(e)===0?"0px":ss(e)}function pHe({padding:e,baseStyles:t,minMediaStyles:n}){VI(e)&&(t["--app-shell-padding"]=yj(zI(e))),HI(e)&&(e.base&&(t["--app-shell-padding"]=yj(e.base)),Yr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=yj(e[r]))}))}function mHe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};hHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),cHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),dHe({baseStyles:u,minMediaStyles:o,header:t}),fHe({baseStyles:u,minMediaStyles:o,footer:n}),pHe({baseStyles:u,minMediaStyles:o,padding:i});const l=sC(Yr(o),s).map(d=>({query:`(min-width: ${vO(d.px)})`,styles:o[d.value]})),c=sC(Yr(a),s).map(d=>({query:`(max-width: ${vO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function gHe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ts(),o=xy(),{media:a,baseStyles:u}=mHe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(Sb,{media:a,styles:u,selector:o.cssVariablesSelector})}const yHe={},YW=Le((e,t)=>{const n=xe("AppShellNavbar",yHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Lx();return h.disabled?null:_.jsx(ve,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});YW.classes=Ay;YW.displayName="@mantine/core/AppShellNavbar";const vHe={},KW=zs((e,t)=>{const n=xe("AppShellSection",vHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Lx();return _.jsx(ve,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});KW.classes=Ay;KW.displayName="@mantine/core/AppShellSection";function bHe({transitionDuration:e,disabled:t}){const[n,r]=R.useState(!0),i=R.useRef(),s=R.useRef();return tve("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),xb(()=>{R.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const _He={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Fc("app")},wHe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),di=Le((e,t)=>{const n=xe("AppShell",_He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...T}=n,S=gt({name:"AppShell",classes:Ay,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wHe}),A=bHe({disabled:y,transitionDuration:d});return _.jsxs(sHe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(gHe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(ve,{ref:t,...S("root"),mod:[{resizing:A,layout:g,disabled:y},E],...T})]})});di.classes=Ay;di.displayName="@mantine/core/AppShell";di.Navbar=YW;di.Header=WW;di.Main=GW;di.Aside=HW;di.Footer=qW;di.Section=KW;function hbe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>hbe(t))}:e}function pbe(e){return e?e.map(t=>hbe(t)):[]}function XW(e){return e.reduce((t,n)=>"group"in n?{...t,...XW(n.items)}:(t[n.value]=n,t),{})}var Wu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const EHe={error:null},xHe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":en(t,"combobox-chevron-size")}}),QW=Le((e,t)=>{const n=xe("ComboboxChevron",EHe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=gt({name:"ComboboxChevron",classes:Wu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:xHe,rootSelector:"chevron"});return _.jsx(ve,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});QW.classes=Wu;QW.displayName="@mantine/core/ComboboxChevron";const[SHe,zc]=ho("Combobox component was not found in tree"),mbe=R.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Ty,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));mbe.displayName="@mantine/core/ComboboxClearButton";const THe={},JW=Le((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",THe,e),u=zc();return _.jsx(ei.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});JW.classes=Wu;JW.displayName="@mantine/core/ComboboxDropdown";const AHe={refProp:"ref"},gbe=Le((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",AHe,e);if(zc(),!Ey(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(ei.Target,{ref:t,refProp:r,children:n})});gbe.displayName="@mantine/core/ComboboxDropdownTarget";const CHe={},ZW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",CHe,e),u=zc();return _.jsx(ve,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});ZW.classes=Wu;ZW.displayName="@mantine/core/ComboboxEmpty";function eG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=zc(),[a,u]=R.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const IHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ybe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",IHe,e);if(!Ey(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=zc(),f=eG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return R.cloneElement(n,{...f,...l,[r]:cs(t,c.store.targetRef,n==null?void 0:n.ref)})});ybe.displayName="@mantine/core/ComboboxEventsTarget";const kHe={},tG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",kHe,e),u=zc();return _.jsx(ve,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});tG.classes=Wu;tG.displayName="@mantine/core/ComboboxFooter";const RHe={},nG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",RHe,e),c=zc();return _.jsxs(ve,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});nG.classes=Wu;nG.displayName="@mantine/core/ComboboxGroup";const NHe={},rG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",NHe,e),u=zc();return _.jsx(ve,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});rG.classes=Wu;rG.displayName="@mantine/core/ComboboxHeader";function vbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}vbe.displayName="@mantine/core/ComboboxHiddenInput";const PHe={},iG=Le((e,t)=>{const n=xe("ComboboxOption",PHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=zc(),v=R.useId(),b=l||v;return _.jsx(ve,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});iG.classes=Wu;iG.displayName="@mantine/core/ComboboxOption";const DHe={},sG=Le((e,t)=>{const n=xe("ComboboxOptions",DHe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=zc(),d=xa(a);return R.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(ve,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});sG.classes=Wu;sG.displayName="@mantine/core/ComboboxOptions";const OHe={withAriaAttributes:!0,withKeyboardNavigation:!0},oG=Le((e,t)=>{const n=xe("ComboboxSearch",OHe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=zc(),h=d.getStyles("search"),p=eG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(hi,{ref:cs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});oG.classes=Wu;oG.displayName="@mantine/core/ComboboxSearch";const $He={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},bbe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",$He,e);if(!Ey(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=zc(),f=eG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=R.cloneElement(n,{...f,...l});return _.jsx(ei.Target,{ref:cs(t,c.store.targetRef),children:d})});bbe.displayName="@mantine/core/ComboboxTarget";function MHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function LHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function FHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function aG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Es({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=R.useRef(null),c=R.useRef(-1),f=R.useRef(null),d=R.useRef(null),h=R.useRef(-1),p=R.useRef(-1),m=R.useRef(-1),g=R.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=R.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=R.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=R.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=R.useCallback(L=>{const B=document.getElementById(l.current),z=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!z)return null;const q=L>=z.length?0:L<0?z.length-1:L;return c.current=q,z!=null&&z[q]&&!z[q].hasAttribute("data-combobox-disabled")?(b(),z[q].setAttribute("data-combobox-selected","true"),z[q].setAttribute("aria-selected","true"),z[q].scrollIntoView({block:"nearest",behavior:o}),z[q].id):null},[o,b]),E=R.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(B).findIndex(q=>q===L);return w(z)}return w(0)},[w]),T=R.useCallback(()=>w(LHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=R.useCallback(()=>w(MHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=R.useCallback(()=>w(FHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=R.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var D;const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),q=Array.from(z).findIndex(U=>U.hasAttribute(`data-combobox-${L}`));c.current=q,B!=null&&B.scrollIntoView&&((D=z[q])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=R.useCallback(()=>{c.current=-1,b()},[b]),N=R.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),O=R.useCallback(L=>{l.current=L},[]),P=R.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=R.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=R.useCallback(()=>c.current,[]);return R.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:I,updateSelectedOptionIndex:C,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:$}}const jHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},BHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":lo(t),"--combobox-option-padding":en(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ae(n),"--combobox-option-fz":lo(t),"--combobox-option-padding":en(t,"combobox-option-padding")}});function Kn(e){const t=xe("Combobox",jHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=aG(),y=o||g,v=gt({name:h||"Combobox",classes:Wu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:BHe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(SHe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(ei,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const UHe=e=>e;Kn.extend=UHe;Kn.classes=Wu;Kn.displayName="@mantine/core/Combobox";Kn.Target=bbe;Kn.Dropdown=JW;Kn.Options=sG;Kn.Option=iG;Kn.Search=oG;Kn.Empty=ZW;Kn.Chevron=QW;Kn.Footer=tG;Kn.Header=rG;Kn.EventsTarget=ybe;Kn.DropdownTarget=gbe;Kn.Group=nG;Kn.ClearButton=mbe;Kn.HiddenInput=vbe;var _be={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const wbe=_be,sL=R.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const T=gt({name:e,props:t,className:n,style:y,classes:_be,classNames:r,styles:i,unstyled:s});return _.jsx(ve,{...T("root"),ref:E,__vars:{"--label-fz":lo(d),"--label-lh":en(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(ve,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(ve,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(hi.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(hi.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});sL.displayName="@mantine/core/InlineInput";const Ebe=R.createContext(null),zHe=Ebe.Provider,xbe=()=>R.useContext(Ebe),[VHe,HHe]=kx();var Sbe={card:"m_26775b0a"};const qHe={withBorder:!0},WHe=(e,{radius:t})=>({card:{"--card-radius":Kr(t)}}),uG=Le((e,t)=>{const n=xe("CheckboxCard",qHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=gt({name:"CheckboxCard",classes:Sbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WHe,rootSelector:"card"}),g=xbe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(VHe,{value:{checked:y},children:_.jsx(_s,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});uG.displayName="@mantine/core/CheckboxCard";uG.classes=Sbe;function lG({children:e,role:t}){const n=Ox();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const GHe={},cG=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",GHe,e),[c,f]=Es({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(zHe,{value:{value:c,onChange:d,size:s},children:_.jsx(hi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(lG,{role:"group",children:a})})})});cG.classes=hi.Wrapper.classes;cG.displayName="@mantine/core/CheckboxGroup";function Tbe({size:e,style:t,...n}){const r=e!==void 0?{width:Ae(e),height:Ae(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Abe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(Tbe,{...t})}var Cbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const YHe={icon:Abe},KHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=$h({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":en(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Kr(t),"--checkbox-color":s==="outline"?u:Mr(n,e),"--checkbox-icon-color":i?Mr(i,e):Rx(o,e)?Sy({color:n,theme:e,autoContrast:o}):void 0}}},fG=Le((e,t)=>{const n=xe("CheckboxIndicator",YHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=gt({name:"CheckboxIndicator",classes:Cbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KHe,rootSelector:"indicator"}),T=HHe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(ve,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});fG.displayName="@mantine/core/CheckboxIndicator";fG.classes=Cbe;var Ibe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const XHe={labelPosition:"right",icon:Abe},QHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=$h({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":en(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Kr(t),"--checkbox-color":s==="outline"?u:Mr(n,e),"--checkbox-icon-color":i?Mr(i,e):Rx(o,e)?Sy({color:n,theme:e,autoContrast:o}):void 0}}},wl=Le((e,t)=>{const n=xe("Checkbox",XHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:S,rootRef:A,iconColor:C,onChange:I,autoContrast:N,mod:O,...P}=n,$=xbe(),F=d||($==null?void 0:$.size),L=S,B=gt({name:"Checkbox",props:n,classes:Ibe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QHe}),{styleProps:z,rest:q}=Tb(P),D=xa(f),U=$?{checked:$.value.includes(q.value),onChange:W=>{$.onChange(W),I==null||I(W)}}:{};return _.jsx(sL,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:E,ref:A,mod:O,...z,...p,children:_.jsxs(ve,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(ve,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:T},...B("input",{focusable:!0,variant:E}),onChange:I,...q,...U,type:"checkbox"}),_.jsx(L,{indeterminate:T,...B("icon")})]})})});wl.classes={...Ibe,...wbe};wl.displayName="@mantine/core/Checkbox";wl.Group=cG;wl.Indicator=fG;wl.Card=uG;function vE(e){return"group"in e}function kbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;vE(o)&&i.push({group:o.group,items:kbe({options:o.items,search:t,limit:n-i.length})}),vE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function JHe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Rbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(vE(n))Rbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function ZHe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Nbe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!vE(e)){const a=ZHe(n,e.value),u=t&&a&&_.jsx(Tbe,{className:Wu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Ki({[Wu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(Nbe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Kn.Group,{label:e.group,children:o})}function Pbe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){Rbe(e);const b=typeof i=="string"?(r||kbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=JHe(b),E=b.map(T=>_.jsx(Nbe,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},vE(T)?T.group:T.value));return _.jsx(Kn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(dm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Kn.Empty,{children:d})]})})}var Dbe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const eqe={},tqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":en(s,"badge-height"),"--badge-padding-x":en(s,"badge-padding-x"),"--badge-fz":en(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Kr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Mr(n,e):void 0}}},Xp=zs((e,t)=>{const n=xe("Badge",eqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=gt({name:"Badge",props:n,classes:Dbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tqe});return _.jsxs(ve,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Xp.classes=Dbe;Xp.displayName="@mantine/core/Badge";var Obe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const nqe={},rqe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Mr(t,e):void 0,"--burger-size":en(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),dG=Le((e,t)=>{const n=xe("Burger",nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=gt({name:"Burger",classes:Obe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rqe});return _.jsxs(_s,{...p("root"),ref:t,...h,children:[_.jsx(ve,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});dG.classes=Obe;dG.displayName="@mantine/core/Burger";var oL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const toe={orientation:"horizontal"},iqe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ae(t)}}),hG=Le((e,t)=>{const n=xe("ButtonGroup",toe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",toe,e),p=gt({name:"ButtonGroup",props:n,classes:oL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:iqe,rootSelector:"group"});return _.jsx(ve,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});hG.classes=oL;hG.displayName="@mantine/core/ButtonGroup";const sqe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ae(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},oqe={},aqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":en(s,"button-height"),"--button-padding-x":en(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?lo(s.replace("compact-","")):lo(s),"--button-radius":t===void 0?void 0:Kr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Rn=zs((e,t)=>{const n=xe("Button",oqe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:T,...S}=n,A=gt({name:"Button",props:n,classes:oL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:aqe}),C=!!l,I=!!c;return _.jsxs(_s,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":I},T],...S,children:[_.jsx(Um,{mounted:!!p,transition:sqe,duration:150,children:N=>_.jsx(ve,{component:"span",...A("loader",{style:N}),"aria-hidden":!0,children:_.jsx(zm,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(ve,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(ve,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(ve,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Rn.classes=oL;Rn.displayName="@mantine/core/Button";Rn.Group=hG;const[uqe,lqe]=ho("Card component was not found in tree");var pG={root:"m_e615b15f",section:"m_599a2148"};const cqe={},aL=zs((e,t)=>{const n=xe("CardSection",cqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=lqe();return _.jsx(ve,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});aL.classes=pG;aL.displayName="@mantine/core/CardSection";const fqe={},dqe=(e,{padding:t})=>({root:{"--card-padding":ss(t)}}),Cb=zs((e,t)=>{const n=xe("Card",fqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=gt({name:"Card",props:n,classes:pG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dqe}),h=R.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===aL?R.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(uqe,{value:{getStyles:d},children:_.jsx(Nx,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Cb.classes=pG;Cb.displayName="@mantine/core/Card";Cb.Section=aL;var $be={root:"m_4451eb3a"};const hqe={},mm=zs((e,t)=>{const n=xe("Center",hqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=gt({name:"Center",props:n,classes:$be,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(ve,{ref:t,mod:[{inline:l},c],...d("root"),...f})});mm.classes=$be;mm.displayName="@mantine/core/Center";var Mbe={root:"m_b183c0a2"};const pqe={},mqe=(e,{color:t})=>({root:{"--code-bg":t?Mr(t,e):void 0}}),Q2=Le((e,t)=>{const n=xe("Code",pqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=gt({name:"Code",props:n,classes:Mbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mqe});return _.jsx(ve,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});Q2.classes=Mbe;Q2.displayName="@mantine/core/Code";var Lbe={root:"m_7485cace"};const gqe={},yqe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:en(t,"container-size")}}),kc=Le((e,t)=>{const n=xe("Container",gqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=gt({name:"Container",classes:Lbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yqe});return _.jsx(ve,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});kc.classes=Lbe;kc.displayName="@mantine/core/Container";var Fbe={root:"m_3eebeb36",label:"m_9e365f20"};const vqe={orientation:"horizontal"},bqe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Mr(t,e):void 0,"--divider-border-style":n,"--divider-size":en(r,"divider-size")}}),bE=Le((e,t)=>{const n=xe("Divider",vqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=gt({name:"Divider",classes:Fbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bqe});return _.jsx(ve,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(ve,{component:"span",mod:{position:d},...m("label"),children:f})})});bE.classes=Fbe;bE.displayName="@mantine/core/Divider";const[_qe,Fx]=ho("Drawer component was not found in tree");var Hm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const wqe={},uL=Le((e,t)=>{const n=xe("DrawerBody",wqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Fx();return _.jsx(PW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});uL.classes=Hm;uL.displayName="@mantine/core/DrawerBody";const Eqe={},lL=Le((e,t)=>{const n=xe("DrawerCloseButton",Eqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Fx();return _.jsx(DW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});lL.classes=Hm;lL.displayName="@mantine/core/DrawerCloseButton";const xqe={},cL=Le((e,t)=>{const n=xe("DrawerContent",xqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Fx(),d=f.scrollAreaComponent||sbe;return _.jsx(ibe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});cL.classes=Hm;cL.displayName="@mantine/core/DrawerContent";const Sqe={},fL=Le((e,t)=>{const n=xe("DrawerHeader",Sqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Fx();return _.jsx(OW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});fL.classes=Hm;fL.displayName="@mantine/core/DrawerHeader";const Tqe={},dL=Le((e,t)=>{const n=xe("DrawerOverlay",Tqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Fx();return _.jsx($W,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});dL.classes=Hm;dL.displayName="@mantine/core/DrawerOverlay";function Aqe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function Cqe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const Iqe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},kqe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},Rqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Fc("modal"),position:"left"},Nqe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":en(n,"drawer-size"),"--drawer-flex":Cqe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":Aqe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ae(r)}}),hL=Le((e,t)=>{const n=xe("DrawerRoot",Rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Mh(),m=gt({name:"Drawer",classes:Hm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nqe}),g=(p==="rtl"?kqe:Iqe)[c];return _.jsx(_qe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(rbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});hL.classes=Hm;hL.displayName="@mantine/core/DrawerRoot";const Pqe={},pL=Le((e,t)=>{const n=xe("DrawerTitle",Pqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Fx();return _.jsx(MW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});pL.classes=Hm;pL.displayName="@mantine/core/DrawerTitle";const Dqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Fc("modal"),withOverlay:!0,withCloseButton:!0},Lh=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",Dqe,e),l=!!n||s;return _.jsxs(hL,{ref:t,...u,children:[r&&_.jsx(dL,{...i}),_.jsxs(cL,{children:[l&&_.jsxs(fL,{children:[n&&_.jsx(pL,{children:n}),s&&_.jsx(lL,{...o})]}),_.jsx(uL,{children:a})]})]})});Lh.classes=Hm;Lh.displayName="@mantine/core/Drawer";Lh.Root=hL;Lh.Overlay=dL;Lh.Content=cL;Lh.Body=uL;Lh.Header=fL;Lh.Title=pL;Lh.CloseButton=lL;function Oqe({open:e,close:t,openDelay:n,closeDelay:r}){const i=R.useRef(-1),s=R.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return R.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[$qe,jbe]=ho("Grid component was not found in tree"),CU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,noe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":CU(e,t),roe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},ioe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Mqe({span:e,order:t,offset:n,selector:r}){var d;const i=Ts(),s=jbe(),a=xf(e)===void 0?12:xf(e),u=wy({"--col-order":(d=xf(t))==null?void 0:d.toString(),"--col-flex-grow":roe(a,s.grow),"--col-flex-basis":CU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":noe(a,s.columns,s.grow),"--col-offset":ioe(xf(n),s.columns)}),l=Yr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=roe(e[p],s.grow),h[p]["--col-flex-basis"]=CU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=noe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=ioe(n[p],s.columns)),h},{}),f=sC(Yr(l),i).filter(h=>Yr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(Sb,{styles:u,media:f,selector:r})}var mG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Lqe={span:12},gG=Le((e,t)=>{const n=xe("GridCol",Lqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=jbe(),h=FI();return _.jsxs(_.Fragment,{children:[_.jsx(Mqe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(ve,{ref:t,...d.getStyles("col",{className:Ki(i,h),style:s,classNames:r,styles:o}),...f})]})});gG.classes=mG;gG.displayName="@mantine/core/GridCol";function Fqe({gutter:e,selector:t}){const n=Ts(),r=wy({"--grid-gutter":ss(xf(e))}),i=Yr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=ss(e[u])),a),{}),o=sC(Yr(i),n).filter(a=>Yr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(Sb,{styles:r,media:o,selector:t})}const jqe={gutter:"md",grow:!1,columns:12},Bqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),za=Le((e,t)=>{const n=xe("Grid",jqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=gt({name:"Grid",classes:mG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bqe}),y=FI();return _.jsxs($qe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(Fqe,{selector:`.${y}`,...n}),_.jsx(ve,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});za.classes=mG;za.displayName="@mantine/core/Grid";za.Col=gG;var Bbe={root:"m_9e117634"};const Uqe={},zqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Kr(t),"--image-object-fit":n}}),Cy=zs((e,t)=>{const n=xe("Image",Uqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=R.useState(!c);R.useEffect(()=>y(!c),[c]);const v=gt({name:"Image",classes:Bbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zqe});return g&&h?_.jsx(ve,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(ve,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Cy.classes=Bbe;Cy.displayName="@mantine/core/Image";function IU(){return IU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IU.apply(null,arguments)}function Vqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Hqe=R.useLayoutEffect,qqe=function(t){var n=R.useRef(t);return Hqe(function(){n.current=t}),n},soe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Wqe=function(t,n){var r=R.useRef();return R.useCallback(function(i){t.current=i,r.current&&soe(r.current,null),r.current=n,n&&soe(n,i)},[n])},ooe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Gqe=function(t){Object.keys(ooe).forEach(function(n){t.style.setProperty(n,ooe[n],"important")})},aoe=Gqe,ka=null,uoe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Yqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ka||(ka=document.createElement("textarea"),ka.setAttribute("tabindex","-1"),ka.setAttribute("aria-hidden","true"),aoe(ka)),ka.parentNode===null&&document.body.appendChild(ka);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;ka.style[h]=o[h]}),aoe(ka),ka.value=t;var u=uoe(ka,e);ka.value=t,u=uoe(ka,e),ka.value="x";var l=ka.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var loe=function(){},Kqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Xqe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Qqe=!!document.documentElement.currentStyle,Jqe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Kqe(Xqe,n),i=r.boxSizing;if(i==="")return null;Qqe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Zqe=Jqe;function Ube(e,t,n){var r=qqe(n);R.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var eWe=function(t){Ube(window,"resize",t)},tWe=function(t){Ube(document.fonts,"loadingdone",t)},nWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],rWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?loe:o,u=t.onHeightChange,l=u===void 0?loe:u,c=Vqe(t,nWe),f=c.value!==void 0,d=R.useRef(null),h=Wqe(d,n),p=R.useRef(0),m=R.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:Zqe(b);if(w){m.current=w;var E=Yqe(w,b.value||b.placeholder||"x",s,i),T=E[0],S=E[1];p.current!==T&&(p.current=T,b.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return R.useLayoutEffect(g),eWe(g),tWe(g),R.createElement("textarea",IU({},c,{onChange:y,ref:h}))},iWe=R.forwardRef(rWe);const sWe={},yG=Le((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",sWe,e),u=n&&ive()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Uc,{component:u?iWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});yG.classes=Uc.classes;yG.displayName="@mantine/core/Textarea";const[oWe,aWe]=ho("List component was not found in tree");var vG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const uWe={},bG=Le((e,t)=>{const n=xe("ListItem",uWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=aWe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(ve,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});bG.classes=vG;bG.displayName="@mantine/core/ListItem";const lWe={type:"unordered"},cWe=(e,{size:t,spacing:n})=>({root:{"--list-fz":lo(t),"--list-lh":X1e(t),"--list-spacing":ss(n)}}),Df=Le((e,t)=>{const n=xe("List",lWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=gt({name:"List",classes:vG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cWe});return _.jsx(oWe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(ve,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Df.classes=vG;Df.displayName="@mantine/core/List";Df.Item=bG;var zbe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const coe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Fc("overlay")},fWe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Ol=Le((e,t)=>{const n=xe("LoadingOverlay",coe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ts(),g=gt({name:"LoadingOverlay",classes:zbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fWe}),y={...coe.overlayProps,...f};return _.jsx(Um,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(ve,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(zm,{...g("loader"),unstyled:a,...c}),_.jsx(uC,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(uC,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Ol.classes=zbe;Ol.displayName="@mantine/core/LoadingOverlay";const[dWe,qI]=ho("Menu component was not found in the tree");var jx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const hWe={},_G=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",hWe,e),u=qI();return _.jsx(ve,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});_G.classes=jx;_G.displayName="@mantine/core/MenuDivider";const pWe={},wG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",pWe,e),f=R.useRef(null),d=qI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Fp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Fp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(ei.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:cs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});wG.classes=jx;wG.displayName="@mantine/core/MenuDropdown";const mWe={},EG=zs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",mWe,e),p=qI(),m=Ts(),{dir:g}=Mh(),y=R.useRef(),v=p.getItemIndex(y.current),b=h,w=Fp(b.onMouseLeave,()=>p.setHovered(-1)),E=Fp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=Fp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=Fp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?$h({color:a,theme:m}):null;return _.jsxs(_s,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:cs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:T,onKeyDown:eW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});EG.classes=jx;EG.displayName="@mantine/core/MenuItem";const gWe={},xG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",gWe,e),u=qI();return _.jsx(ve,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});xG.classes=jx;xG.displayName="@mantine/core/MenuLabel";const yWe={refProp:"ref"},Vbe=R.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",yWe,e);if(!Ey(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=qI(),o=Fp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Fp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Fp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(ei.Target,{refProp:r,popupType:"menu",ref:t,...i,children:R.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Vbe.displayName="@mantine/core/MenuTarget";const vWe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function xu(e){const t=xe("Menu",vWe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...T}=t,S=gt({name:"Menu",classes:jx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:I}]=SBe(),[N,O]=Es({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,$]=R.useState(!1),F=()=>{O(!1),$(!1),N&&(i==null||i())},L=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():L()},{openDropdown:z,closeDropdown:q}=Oqe({open:L,close:F,closeDelay:p,openDelay:h}),D=j=>xBe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:U,resolvedStyles:W}=jm({classNames:m,styles:g,props:t});return fm(()=>{I()},[N]),_.jsx(dWe,{value:{getStyles:S,opened:N,toggleDropdown:B,getItemIndex:D,hovered:A,setHovered:C,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:q,openDropdown:d==="click"?L:z,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(ei,{...T,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}xu.extend=e=>e;xu.classes=jx;xu.displayName="@mantine/core/Menu";xu.Item=EG;xu.Label=xG;xu.Dropdown=wG;xu.Target=Vbe;xu.Divider=_G;const[bWe,Bx]=ho("Modal component was not found in tree");var qm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const _We={},mL=Le((e,t)=>{const n=xe("ModalBody",_We,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Bx();return _.jsx(PW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});mL.classes=qm;mL.displayName="@mantine/core/ModalBody";const wWe={},gL=Le((e,t)=>{const n=xe("ModalCloseButton",wWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Bx();return _.jsx(DW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});gL.classes=qm;gL.displayName="@mantine/core/ModalCloseButton";const EWe={},yL=Le((e,t)=>{const n=xe("ModalContent",EWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Bx(),f=c.scrollAreaComponent||sbe;return _.jsx(ibe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ae(c.yOffset)} * 2))`},children:u})})});yL.classes=qm;yL.displayName="@mantine/core/ModalContent";const xWe={},vL=Le((e,t)=>{const n=xe("ModalHeader",xWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Bx();return _.jsx(OW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});vL.classes=qm;vL.displayName="@mantine/core/ModalHeader";const SWe={},bL=Le((e,t)=>{const n=xe("ModalOverlay",SWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Bx();return _.jsx($W,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});bL.classes=qm;bL.displayName="@mantine/core/ModalOverlay";const TWe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Fc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},AWe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Kr(t),"--modal-size":en(n,"modal-size"),"--modal-y-offset":Ae(r),"--modal-x-offset":Ae(i)}}),_L=Le((e,t)=>{const n=xe("ModalRoot",TWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=gt({name:m,classes:qm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AWe});return _.jsx(bWe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(rbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});_L.classes=qm;_L.displayName="@mantine/core/ModalRoot";const CWe={},wL=Le((e,t)=>{const n=xe("ModalTitle",CWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Bx();return _.jsx(MW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});wL.classes=qm;wL.displayName="@mantine/core/ModalTitle";const IWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Fc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},ws=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",IWe,e),c=!!n||s;return _.jsxs(_L,{ref:t,radius:u,...l,children:[r&&_.jsx(bL,{...i}),_.jsxs(yL,{radius:u,children:[c&&_.jsxs(vL,{children:[n&&_.jsx(wL,{children:n}),s&&_.jsx(gL,{...o})]}),_.jsx(mL,{children:a})]})]})});ws.classes=qm;ws.displayName="@mantine/core/Modal";ws.Root=_L;ws.Overlay=bL;ws.Content=yL;ws.Body=mL;ws.Header=vL;ws.Title=wL;ws.CloseButton=gL;const[kWe,SG]=kx(),[RWe,NWe]=kx();var EL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const PWe={},DWe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?en(t):en(n,"pg-gap")}}),TG=Le((e,t)=>{const n=xe("PillGroup",PWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=SG(),h=(d==null?void 0:d.size)||l||void 0,p=gt({name:"PillGroup",classes:EL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DWe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(RWe,{value:{size:h,disabled:c},children:_.jsx(ve,{ref:t,size:h,...p("group"),...f})})});TG.classes=EL;TG.displayName="@mantine/core/PillGroup";const OWe={variant:"default"},$We=(e,{radius:t},{size:n})=>({root:{"--pill-fz":en(n,"pill-fz"),"--pill-height":en(n,"pill-height"),"--pill-radius":t===void 0?void 0:Kr(t)}}),lC=Le((e,t)=>{const n=xe("Pill",OWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=NWe(),w=SG(),E=m||(b==null?void 0:b.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=gt({name:"Pill",classes:EL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$We,stylesCtx:{size:E}});return _.jsxs(ve,{component:"span",ref:t,variant:T,size:E,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(Ty,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});lC.classes=EL;lC.displayName="@mantine/core/Pill";lC.Group=TG;var Hbe={field:"m_45c4369d"};const MWe={type:"visible"},AG=Le((e,t)=>{const n=xe("PillsInputField",MWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=SG(),g=Ox(),y=gt({name:"PillsInputField",classes:Hbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(ve,{component:"input",ref:cs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});AG.classes=Hbe;AG.displayName="@mantine/core/PillsInputField";const LWe={},AO=Le((e,t)=>{const n=xe("PillsInput",LWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=R.useRef();return _.jsx(kWe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Uc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});AO.displayName="@mantine/core/PillsInput";AO.Field=AG;function FWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(vE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const jWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},CG=Le((e,t)=>{const n=xe("MultiSelect",jWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:I,searchValue:N,defaultSearchValue:O,onSearchChange:P,readOnly:$,disabled:F,onFocus:L,onBlur:B,onPaste:z,radius:q,rightSection:D,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:We,hidePickedOptions:me,withErrorStyles:dt,name:vt,form:pe,id:Ce,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Tr,required:Fn,mod:cr,renderOption:pn,onRemove:Sn,onClear:nr,scrollAreaProps:rr,...Uo}=n,Oi=xa(Ce),Tn=pbe(m),$i=XW(Tn),Ar=aG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Ar.resetSelectedOption()}}),{styleProps:ds,rest:{type:sp,autoComplete:ol,...fd}}=Tb(Uo),[Er,Ci]=Es({value:c,defaultValue:f,finalValue:[],onChange:d}),[Xr,uu]=Es({value:N,defaultValue:O,finalValue:"",onChange:P}),Aa=gt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ca,resolvedStyles:oe}=jm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ar.toggleDropdown()),ot.key==="Backspace"&&Xr.length===0&&Er.length>0&&(Sn==null||Sn(Er[Er.length-1]),Ci(Er.slice(0,Er.length-1)))},ae=Er.map((ot,St)=>{var Ht,On;return _.jsx(lC,{withRemoveButton:!$&&!((Ht=$i[ot])!=null&&Ht.disabled),onRemove:()=>{Ci(Er.filter(jn=>ot!==jn)),Sn==null||Sn(ot)},unstyled:a,disabled:F,...Aa("pill"),children:((On=$i[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});R.useEffect(()=>{w&&Ar.selectFirstOption()},[w,Er]);const Te=He&&Er.length>0&&!F&&!$&&_.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ci([]),uu("")}}),Se=FWe({data:Tn,value:Er});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:Ar,classNames:Ca,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),uu(""),Ar.updateSelectedOptionIndex("selected"),Er.includes($i[ot].value)?(Ci(Er.filter(St=>St!==$i[ot].value)),Sn==null||Sn($i[ot].value)):Er.length<ke&&Ci([...Er,$i[ot].value])},...T,children:[_.jsx(Kn.DropdownTarget,{children:_.jsx(AO,{...ds,__staticSelector:"MultiSelect",classNames:Ca,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:q,rightSection:D||Te||_.jsx(Kn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Te?"all":"none"),rightSectionWidth:U,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Te?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:Oi,required:Fn,mod:cr,children:_.jsxs(lC.Group,{disabled:F,unstyled:a,...Aa("pillsList"),children:[ae,_.jsx(Kn.EventsTarget,{autoComplete:ol,children:_.jsx(AO.Field,{...fd,ref:t,id:Oi,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Aa("inputField"),unstyled:a,onFocus:ot=>{L==null||L(ot),ze&&Ar.openDropdown()},onBlur:ot=>{B==null||B(ot),Ar.closeDropdown(),uu("")},onKeyDown:ee,value:Xr,onChange:ot=>{uu(ot.currentTarget.value),ze&&Ar.openDropdown(),w&&Ar.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),_.jsx(Pbe,{data:me?Se:Tn,hidden:$||F,filter:S,search:Xr,limit:A,hiddenWhenEmpty:!ze||!ct||me&&Se.length===0&&Xr.trim().length===0,withScrollArea:C,maxDropdownHeight:I,filterOptions:ze,value:Er,checkIconPosition:We,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${Oi}-label`:void 0,"aria-label":it?void 0:Uo["aria-label"],renderOption:pn,scrollAreaProps:rr})]}),_.jsx(Kn.HiddenInput,{name:vt,valuesDivider:Tr,value:Er,form:pe,disabled:F,..._t})]})});CG.classes={...Uc.classes,...Kn.classes};CG.displayName="@mantine/core/MultiSelect";var qbe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const BWe={},UWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":ss(r)}}},xL=zs((e,t)=>{const n=xe("NavLink",BWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:T,onKeyDown:S,autoContrast:A,mod:C,...I}=n,N=gt({name:"NavLink",props:n,classes:qbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UWe}),[O,P]=Es({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=L=>{h==null||h(L),$&&(L.preventDefault(),P(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(_s,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{S==null||S(L),L.nativeEvent.code==="Space"&&$&&(L.preventDefault(),P(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},C],...I,children:[g&&_.jsx(ve,{component:"span",...N("section"),mod:{position:"left"},children:g}),_.jsxs(ve,{...N("body"),mod:{"no-wrap":E},children:[_.jsx(ve,{component:"span",...N("label"),children:v}),_.jsx(ve,{component:"span",mod:{active:p},...N("description"),children:b})]}),($||y)&&_.jsx(ve,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(yE,{...N("chevron")}):y})]}),_.jsx(QM,{in:O,...N("collapse"),children:_.jsx("div",{...N("children"),children:d})})]})});xL.classes=qbe;xL.displayName="@mantine/core/NavLink";function Wbe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var cC;(function(e){e.event="event",e.props="prop"})(cC||(cC={}));function Mg(){}function zWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function fC(e){return!!(e||"").match(/\d/)}function Rw(e){return e==null}function VWe(e){return typeof e=="number"&&isNaN(e)}function Gbe(e){return Rw(e)||VWe(e)||typeof e=="number"&&!isFinite(e)}function Ybe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function HWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function qWe(e,t,n){var r=HWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function WWe(e){var t=R.useRef(e);t.current=e;var n=R.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function IG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function GWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Kbe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function foe(e,t){return Array(t+1).join(e)}function Xbe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+foe("0",Math.abs(o))+i:o>=a?i=i+foe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function doe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=IG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Kbe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function P1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Qbe=zWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),YWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function KWe(e,t,n){return Math.min(Math.max(e,t),n)}function vj(e){return Math.max(e.selectionStart,e.selectionEnd)}function XWe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function QWe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function JWe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function ZWe(e,t,n,r,i,s,o){o===void 0&&(o=JWe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function hoe(e,t,n,r){var i=e.length;if(t=KWe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function eGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(fC(e[n])||fC(e[n-1]));return t}function Jbe(e,t,n,r,i,s){s===void 0&&(s=Mg);var o=WWe(function(p,m){var g,y;return Gbe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Xbe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=R.useState(function(){return o(Rw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Rw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return R.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function tGe(e){return e.replace(/[^0-9]/g,"")}function nGe(e){return e}function rGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=nGe);var a=e.removeFormatting;a===void 0&&(a=tGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Mg);var h=e.onKeyDown;h===void 0&&(h=Mg);var p=e.onMouseUp;p===void 0&&(p=Mg);var m=e.onFocus;m===void 0&&(m=Mg);var g=e.onBlur;g===void 0&&(g=Mg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=eGe);var b=e.isValidInputCharacter;b===void 0&&(b=fC);var w=e.isCharacterSame,E=Wbe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=Jbe(y,u,!!l,o,a,c),S=T[0],A=S.formattedValue,C=S.numAsString,I=T[1],N=R.useRef(),O=R.useRef({formattedValue:A,numAsString:C}),P=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},I(_e,ke)},$=R.useState(!1),F=$[0],L=$[1],B=R.useRef(null),z=R.useRef({setCaretTimeout:null,focusTimeout:null});R.useEffect(function(){return L(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var q=o,D=function(_e,ke){var ze=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(ze)?void 0:ze}},U=function(_e,ke,ze){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(P1(_e,ke),z.current.setCaretTimeout=setTimeout(function(){_e.value===ze&&_e.selectionStart!==ke&&P1(_e,ke)},0))},W=function(_e,ke,ze){return hoe(_e,ke,v(_e),ze)},j=function(_e,ke,ze){var ct=v(ke),Ot=ZWe(ke,A,_e,ze,ct,b,w);return Ot=hoe(ke,Ot,ct),Ot},H=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var ze=_e.input,ct=_e.source,Ot=_e.event,We=_e.numAsString,me;if(ze){var dt=_e.inputValue||ze.value,vt=vj(ze);ze.value=ke,me=j(dt,ke,vt),me!==void 0&&U(ze,me,ke)}ke!==A&&P(D(ke,We),{event:Ot,source:ct})};R.useEffect(function(){var _e=O.current,ke=_e.formattedValue,ze=_e.numAsString;(A!==ke||C!==ze)&&P(D(A,C),{event:void 0,source:cC.props})},[A,C]);var G=B.current?vj(B.current):void 0,ne=typeof window<"u"?R.useLayoutEffect:R.useEffect;ne(function(){var _e=B.current;if(A!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,A,G);_e.value=A,U(_e,ke,A)}},[A]);var ce=function(_e,ke,ze){var ct=ke.target,Ot=N.current?YWe(N.current,ct.selectionEnd):Qbe(A,_e),We=Object.assign(Object.assign({},Ot),{lastValue:A}),me=a(_e,We),dt=q(me);if(me=a(dt,void 0),f&&!f(D(dt,me))){var vt=ke.target,pe=vj(vt),Ce=j(_e,A,pe);return vt.value=A,U(vt,Ce,A),!1}return H({formattedValue:dt,numAsString:me,inputValue:_e,event:ke,source:ze,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var ze=_e.selectionStart,ct=_e.selectionEnd;N.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,ze=ke.value,ct=ce(ze,_e,cC.event);ct&&d(_e),N.current=void 0},ye=function(_e){var ke=_e.target,ze=_e.key,ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me;ze==="ArrowLeft"||ze==="Backspace"?me=Math.max(ct-1,0):ze==="ArrowRight"?me=Math.min(ct+1,We.length):ze==="Delete"&&(me=ct);var dt=0;ze==="Delete"&&ct===Ot&&(dt=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(me===void 0||ct!==Ot&&!vt){h(_e),de(ke,dt);return}var pe=me;if(vt){var Ce=ze==="ArrowLeft"?"left":"right";pe=W(We,me,Ce),pe!==me&&_e.preventDefault()}else ze==="Delete"&&!b(We[me])?pe=W(We,me,"right"):ze==="Backspace"&&!b(We[me])&&(pe=W(We,me,"left"));pe!==me&&U(ke,pe,We),h(_e),de(ke,dt)},Ie=function(_e){var ke=_e.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Ot){var me=W(We,ct);me!==ct&&U(ke,me,We)}};ze(),requestAnimationFrame(function(){ze()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,ze=_e.currentTarget;B.current=ke,z.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me=W(We,ct);me!==ct&&!(ct===0&&Ot===We.length)&&U(ke,me,We),m(Object.assign(Object.assign({},_e),{currentTarget:ze}))},0)},Ke=function(_e){B.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(_e)},Ue=F&&XWe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},E,{type:t,value:A,onChange:he,onKeyDown:ye,onMouseUp:Ie,onFocus:be,onBlur:Ke});if(n==="text")return i?Wi.createElement(Wi.Fragment,null,i(A,E)||null):Wi.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var it=r;return Wi.createElement(it,Object.assign({},yt,{ref:s}))}return Wi.createElement("input",Object.assign({},yt,{ref:s}))}function poe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=SL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=IG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Kbe(p,n,!!r)),l&&(h=qWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function SL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function iGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function sGe(e,t){return new RegExp("(^-)|[0-9]|"+Ybe(e),"g")}function oGe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function aGe(e,t,n){var r;t===void 0&&(t=QWe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=SL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(fC(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,z,q){var D=!1,U=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,U=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return U&&(W=2),W&&(B=B.substring(W),z-=W,q-=W),{value:B,start:z,end:q,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,T=w.end,S=w.value,A=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||T<s.length)&&!(A&&o.startsWith(A))&&(e=S);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var I=e.length,N=e.length-o.length;e.endsWith(o)?I=N:(f>N||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=iGe(b?"-"+e:e,i),e=(e.match(sGe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(Ybe(p),"g"),function(B,z){return z===O?".":""});var P=IG(e,i),$=P.beforeDecimal,F=P.afterDecimal,L=P.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function uGe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function lGe(e){var t=SL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function cGe(e){e=lGe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Mg);var s=e.onBlur;s===void 0&&(s=Mg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Wbe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=SL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return poe(L,e)},b=function(L,B){return aGe(L,B,e)},w=Rw(f)?c:f,E=d??oGe(w,l,t);Rw(f)?Rw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(L){return Gbe(L)?L:(typeof L=="number"&&(L=Xbe(L)),E&&typeof a=="number"?doe(L,a,!!u):L)},S=Jbe(T(f),T(c),!!E,v,b,h),A=S[0],C=A.numAsString,I=A.formattedValue,N=S[1],O=function(L){var B=L.target,z=L.key,q=B.selectionStart,D=B.selectionEnd,U=B.value;if(U===void 0&&(U=""),(z==="Backspace"||z==="Delete")&&D<l.length){L.preventDefault();return}if(q!==D){i(L);return}z==="Backspace"&&U[0]==="-"&&q===l.length+1&&n&&P1(B,1),a&&u&&(z==="Backspace"&&U[q-1]===g?(P1(B,q-1),L.preventDefault()):z==="Delete"&&U[q]===g&&L.preventDefault()),y!=null&&y.includes(z)&&U[q]===g&&P1(B,q+1);var W=o===!0?",":o;z==="Backspace"&&U[q-1]===W&&P1(B,q-1),z==="Delete"&&U[q]===W&&P1(B,q+1),i(L)},P=function(L){var B=C;if(B.match(/\d/g)||(B=""),r||(B=GWe(B)),u&&a&&(B=doe(B,a,u)),B!==C){var z=poe(B,e);N({formattedValue:z,value:B,floatValue:parseFloat(B)},{event:L,source:cC.event})}s(L)},$=function(L){return L===g?!0:fC(L)},F=function(L){var B=L.currentValue,z=L.lastValue,q=L.formattedValue,D=L.currentValueIndex,U=L.formattedValueIndex,W=B[D],j=q[U],H=Qbe(z,B),G=H.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:b,getCaretBoundary:function(L){return uGe(L,e)},onKeyDown:O,onBlur:P})}function fGe(e){var t=cGe(e);return Wi.createElement(rGe,Object.assign({},t))}function moe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var kU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const dGe=/^(0\.0*|-0(\.0*)?)$/,hGe=/^-?0\d+(\.\d+)?\.?$/;function pGe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function goe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const mGe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},gGe=(e,{size:t})=>({controls:{"--ni-chevron-size":en(t,"ni-chevron-size")}}),kG=Le((e,t)=>{const n=xe("NumberInput",mGe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:T,onKeyDownCapture:S,handlersRef:A,startValue:C,disabled:I,rightSectionPointerEvents:N,allowNegative:O,readOnly:P,size:$,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:z,withKeyboardEvents:q,trimLeadingZeroesOnBlur:D,...U}=n,W=gt({name:"NumberInput",classes:kU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:gGe}),{resolvedClassNames:j,resolvedStyles:H}=jm({classNames:i,styles:s,props:n}),[G,ne]=Es({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&L!==void 0,de=R.useRef(null),he=R.useRef(null),ye=R.useRef(0),Ie=(me,dt)=>{dt.source==="event"&&ne(pGe(me.floatValue)&&!dGe.test(me.value)&&!(z&&hGe.test(me.value))?me.floatValue:me.value),l==null||l(me,dt)},be=me=>{const dt=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},Ke=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=R.useRef();Ue.current=()=>{let me;const dt=be(G),vt=be(p),pe=Math.max(dt,vt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))me=Wd(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;me=ut<=d?ut:d}else me=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const He=me.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=R.useRef();yt.current=()=>{let me;const dt=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=be(G),pe=be(p),Ce=Math.max(vt,pe),He=10**Ce;if(typeof G!="number"||Number.isNaN(G))me=Wd(C,dt,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;me=dt!==void 0&&_t<dt?dt:_t}const ut=me.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const it=me=>{T==null||T(me),!(P||!q)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),yt.current()))},_e=me=>{if(S==null||S(me),me.key==="Backspace"){const dt=de.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ke(0),0))}};rW(A,{increment:Ue.current,decrement:yt.current});const ke=me=>{me?Ue.current():yt.current(),ye.current+=1},ze=me=>{if(ke(me),ce){const dt=typeof L=="number"?L:L(ye.current);he.current=window.setTimeout(()=>ze(me),dt)}},ct=(me,dt)=>{var vt;me.preventDefault(),(vt=de.current)==null||vt.focus(),ke(dt),ce&&(he.current=window.setTimeout(()=>ze(dt),B))},Ot=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(_s,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(moe,{direction:"up"})}),_.jsx(_s,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(moe,{direction:"down"})})]});return _.jsx(Uc,{component:fGe,allowNegative:O,className:Ki(kU.root,r),size:$,...U,readOnly:P,disabled:I,value:G,getInputRef:cs(t,de),onValueChange:Ie,rightSection:m||P?g:g||We,classNames:j,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:N??(I?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:z,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&Wd(G,h,d)!==G&&ne(Wd(G,h,d)),D&&typeof G=="string"){const dt=G.replace(/^0+/,""),vt=parseFloat(dt);ne(Number.isNaN(vt)?dt:vt)}},isAllowed:me=>v==="strict"?y?y(me)&&goe(me.floatValue,h,d):goe(me.floatValue,h,d):y?y(me):!0})});kG.classes={...Uc.classes,...kU};kG.displayName="@mantine/core/NumberInput";const[yGe,Zbe]=ho("Progress.Root component was not found in tree");var WI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const vGe={},RG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",vGe,e),u=Zbe();return _.jsx(ve,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});RG.classes=WI;RG.displayName="@mantine/core/ProgressLabel";const bGe={},_Ge=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":en(t,"progress-size"),"--progress-radius":n===void 0?void 0:Kr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),TL=Le((e,t)=>{const n=xe("ProgressRoot",bGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=gt({name:"Progress",classes:WI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ge});return _.jsx(yGe,{value:{getStyles:d,autoContrast:l},children:_.jsx(ve,{ref:t,...d("root"),...f})})});TL.classes=WI;TL.displayName="@mantine/core/ProgressRoot";const wGe={withAria:!0},AL=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",wGe,e),p=Zbe(),m=Ts(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(ve,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Mr(l,m),"--progress-label-color":Rx(p.autoContrast,m)?Sy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});AL.classes=WI;AL.displayName="@mantine/core/ProgressSection";const EGe={},Ux=Le((e,t)=>{const n=xe("Progress",EGe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=jm({classNames:i,styles:s,props:n});return _.jsx(TL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(AL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Ux.classes=WI;Ux.displayName="@mantine/core/Progress";Ux.Section=AL;Ux.Root=TL;Ux.Label=RG;const[xGe,e_e]=kx(),[SGe,TGe]=kx();var t_e={card:"m_9dc8ae12"};const AGe={withBorder:!0},CGe=(e,{radius:t})=>({card:{"--card-radius":Kr(t)}}),NG=Le((e,t)=>{const n=xe("RadioCard",AGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=gt({name:"RadioCard",classes:t_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CGe,rootSelector:"card"}),{dir:v}=Mh(),b=e_e(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),T=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(O=>O===S.target),I=C+1>=A.length?0:C+1,N=C-1<0?A.length-1:C-1;S.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),S.nativeEvent.code==="ArrowUp"&&(A[N].focus(),A[N].click()),S.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?N:I].focus(),A[v==="ltr"?N:I].click()),S.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:N].focus(),A[v==="ltr"?I:N].click())}};return _.jsx(SGe,{value:{checked:w},children:_.jsx(_s,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:T})})});NG.displayName="@mantine/core/RadioCard";NG.classes=t_e;const IGe={},PG=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",IGe,e),f=xa(u),[d,h]=Es({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(xGe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(hi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(lG,{role:"radiogroup",children:a})})})});PG.classes=hi.Wrapper.classes;PG.displayName="@mantine/core/RadioGroup";function n_e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ae(e),height:Ae(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var r_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const kGe={icon:n_e},RGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=$h({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":en(r,"radio-size"),"--radio-radius":t===void 0?void 0:Kr(t),"--radio-color":s==="outline"?u:Mr(n,e),"--radio-icon-size":en(r,"radio-icon-size"),"--radio-icon-color":i?Mr(i,e):Rx(o,e)?Sy({color:n,theme:e,autoContrast:o}):void 0}}},DG=Le((e,t)=>{const n=xe("RadioIndicator",kGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=gt({name:"RadioIndicator",classes:r_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RGe,rootSelector:"indicator"}),E=TGe(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(ve,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});DG.displayName="@mantine/core/RadioIndicator";DG.classes=r_e;var i_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const NGe={labelPosition:"right"},PGe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=$h({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":en(t,"radio-size"),"--radio-radius":n===void 0?void 0:Kr(n),"--radio-color":s==="outline"?u:Mr(r,e),"--radio-icon-color":i?Mr(i,e):Rx(o,e)?Sy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":en(t,"radio-icon-size")}}},$v=Le((e,t)=>{const n=xe("Radio",NGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=n_e,rootRef:E,iconColor:T,onChange:S,mod:A,...C}=n,I=gt({name:"Radio",classes:i_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PGe}),N=e_e(),O=(N==null?void 0:N.size)??c,P=n.size?c:O,{styleProps:$,rest:F}=Tb(C),L=xa(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:z=>{N.onChange(z),S==null||S(z)}}:{};return _.jsx(sL,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...$,...b,children:_.jsxs(ve,{...I("inner"),mod:{"label-position":d},children:[_.jsx(ve,{...I("radio",{focusable:!0,variant:y}),onChange:S,...F,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...I("icon"),"aria-hidden":!0})]})})});$v.classes=i_e;$v.displayName="@mantine/core/Radio";$v.Group=PG;$v.Card=NG;$v.Indicator=DG;const DGe={duration:100,transition:"fade"};function OGe(e,t){return{...DGe,...t,...e}}function $Ge({offset:e,position:t}){const[n,r]=R.useState(!1),i=R.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=IW({placement:t,middleware:[SW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=R.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return R.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Kp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var CL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const MGe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Fc("popover")},LGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Kr(t),"--tooltip-bg":n?Mr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),OG=Le((e,t)=>{const n=xe("TooltipFloating",MGe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...T}=n,S=Ts(),A=gt({name:"TooltipFloating",props:n,classes:CL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:LGe}),{handleMouseMove:C,x:I,y:N,opened:O,boundaryRef:P,floating:$,setOpened:F}=$Ge({offset:p,position:m});if(!Ey(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=cs(P,r.ref,t),B=q=>{var D,U;(U=(D=r.props).onMouseEnter)==null||U.call(D,q),C(q),F(!0)},z=q=>{var D,U;(U=(D=r.props).onMouseLeave)==null||U.call(D,q),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(BI,{...E,withinPortal:s,children:_.jsx(ve,{...T,...A("tooltip",{style:{...cW(o,S),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),R.cloneElement(r,{...r.props,[i]:L,onMouseEnter:B,onMouseLeave:z})]})});OG.classes=CL;OG.displayName="@mantine/core/TooltipFloating";const s_e=R.createContext(!1),FGe=s_e.Provider,jGe=()=>R.useContext(s_e),BGe={openDelay:0,closeDelay:0};function o_e(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",BGe,e);return _.jsx(FGe,{value:!0,children:_.jsx(Mze,{delay:{open:t,close:n},children:r})})}o_e.displayName="@mantine/core/TooltipGroup";function UGe(e){var T,S,A;const[t,n]=R.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=jGe(),o=xa(),{delay:a,currentId:u,setCurrentId:l}=Hve(),c=R.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=IW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[jve(e.offset),SW({padding:8}),SU(),Bve({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[TU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=Vze([$ze(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),zze(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),qze(h,{role:"tooltip"}),Bze(h,{enabled:typeof e.opened>"u"}),Lze(h,{id:o})]);Qve({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),fm(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const yoe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Fc("popover"),positionDependencies:[]},zGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Kr(t),"--tooltip-bg":n?Mr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),vs=Le((e,t)=>{const n=xe("Tooltip",yoe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,offset:A,transitionProps:C,multiline:I,events:N,zIndex:O,disabled:P,positionDependencies:$,onClick:F,onMouseEnter:L,onMouseLeave:B,inline:z,variant:q,keepMounted:D,vars:U,portalProps:W,mod:j,floatingStrategy:H,...G}=xe("Tooltip",yoe,n),{dir:ne}=Mh(),ce=R.useRef(null),de=UGe({position:qve(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...$,r],inline:z,strategy:H}),he=gt({name:"Tooltip",props:n,classes:CL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:zGe});if(!Ey(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=cs(de.reference,r.ref,t),Ie=OGe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(BI,{...W,withinPortal:f,children:_.jsx(Um,{...Ie,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>_.jsxs(ve,{...G,variant:q,mod:[{multiline:I},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(kW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,...he("arrow")})]})})}),R.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Ki(v,r.props.className),...r.props}))]})});vs.classes=CL;vs.displayName="@mantine/core/Tooltip";vs.Floating=OG;vs.Group=o_e;var a_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const VGe={withItemsBorders:!0},HGe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Kr(t),"--sc-color":n?Mr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":en(i,"sc-padding"),"--sc-font-size":lo(i)}}),$G=Le((e,t)=>{var ne,ce;const n=xe("SegmentedControl",VGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:T,variant:S,autoContrast:A,withItemsBorders:C,mod:I,...N}=n,O=gt({name:"SegmentedControl",props:n,classes:a_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HGe}),P=Ts(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=WBe(),[L,B]=R.useState(null),[z,q]=R.useState({}),D=(de,he)=>{z[he]=de,q(z)},[U,W]=Es({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=xa(p),H=$.map(de=>R.createElement(ve,{...O("control"),mod:{active:U===de.value,orientation:v},key:de.value},R.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:U===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),R.createElement(ve,{component:"label",...O("label"),mod:{active:U===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":w!==void 0?Sy({color:w,theme:P,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...O("innerLabel"),children:de.label})))),G=cs(t,de=>B(de));return l.length===0?null:_.jsxs(ve,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},I],...N,role:"radiogroup",children:[typeof U=="string"&&_.jsx(jW,{target:z[U],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),H]})});$G.classes=a_e;$G.displayName="@mantine/core/SegmentedControl";const qGe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},GI=Le((e,t)=>{const n=xe("Select",qGe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:I,size:N,searchable:O,rightSection:P,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:L,name:B,form:z,searchValue:q,defaultSearchValue:D,onSearchChange:U,allowDeselect:W,error:j,rightSectionPointerEvents:H,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ie,scrollAreaProps:be,...Ke}=n,Ue=R.useMemo(()=>pbe(m),[m]),yt=R.useMemo(()=>XW(Ue),[Ue]),it=xa(G),[_e,ke,ze]=Es({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Ot,We]=Es({value:q,defaultValue:D,finalValue:ct?ct.label:"",onChange:U}),me=aG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:dt,resolvedStyles:vt}=jm({props:n,styles:i,classNames:r});R.useEffect(()=>{v&&me.selectFirstOption()},[v,_e]),R.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!_e&&!T&&!E&&_.jsx(Kn.ClearButton,{size:N,...ce,onClear:()=>{ke(null,null),We(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:me,__staticSelector:"Select",classNames:dt,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const He=W&&yt[Ce].value===_e?null:yt[Ce],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),me.closeDropdown()},size:N,...w,children:[_.jsx(Kn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:_.jsx(Uc,{id:it,ref:t,rightSection:P||pe||_.jsx(Kn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:H||(pe?"all":"none"),...Ke,size:N,__staticSelector:"Select",disabled:T,readOnly:E||!O,value:Ot,onChange:Ce=>{We(Ce.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:Ce=>{O&&me.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var He;O&&me.closeDropdown(),We(_e!=null&&((He=yt[_e])==null?void 0:He.label)||""),d==null||d(Ce)},onClick:Ce=>{O?me.openDropdown():me.toggleDropdown(),h==null||h(Ce)},classNames:dt,styles:vt,unstyled:s,pointer:!O,error:j})}),_.jsx(Pbe,{data:Ue,hidden:E||T,filter:S,search:Ot,limit:A,hiddenWhenEmpty:!O||!L,withScrollArea:C,maxDropdownHeight:I,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:L,unstyled:s,labelId:Ke.label?`${it}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:be})]}),_.jsx(Kn.HiddenInput,{value:_e,name:B,form:z,disabled:T,...de})]})});GI.classes={...Uc.classes,...Kn.classes};GI.displayName="@mantine/core/Select";function WGe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Ts(),s=t===void 0?e:t,o=wy({"--sg-spacing-x":ss(xf(e)),"--sg-spacing-y":ss(xf(s)),"--sg-cols":(c=xf(n))==null?void 0:c.toString()}),a=Yr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=ss(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=ss(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=sC(Yr(a),i).filter(f=>Yr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(Sb,{styles:o,media:l,selector:r})}function bj(e){return typeof e=="object"&&e!==null?Yr(e):[]}function GGe(e){return e.sort((t,n)=>iC(t)-iC(n))}function YGe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...bj(e),...bj(t),...bj(n)]));return GGe(r)}function KGe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=wy({"--sg-spacing-x":ss(xf(e)),"--sg-spacing-y":ss(xf(i)),"--sg-cols":(l=xf(n))==null?void 0:l.toString()}),o=YGe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=ss(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=ss(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(Sb,{styles:s,container:u,selector:r})}var u_e={container:"m_925c2d2c",root:"m_2415a157"};const XGe={cols:1,spacing:"md",type:"media"},MG=Le((e,t)=>{const n=xe("SimpleGrid",XGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=gt({name:"SimpleGrid",classes:u_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=FI();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(KGe,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(ve,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(WGe,{...n,selector:`.${m}`}),_.jsx(ve,{ref:t,...p("root",{className:m}),...h})]})});MG.classes=u_e;MG.displayName="@mantine/core/SimpleGrid";const[l_e,IL]=ho("SliderProvider was not found in tree"),LG=R.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=IL();return _.jsx(ve,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});LG.displayName="@mantine/core/SliderRoot";const CO=R.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=IL(),[b,w]=R.useState(!1),E=l||s||b||h&&p;return _.jsxs(ve,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(Um,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});CO.displayName="@mantine/core/SliderThumb";function IO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function QGe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function c_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=IL();if(!e)return null;const u=e.map((l,c)=>R.createElement(ve,{...a("markWrapper"),__vars:{"--mark-offset":`${IO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(ve,{...a("mark"),mod:{filled:QGe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}c_e.displayName="@mantine/core/SliderMarks";function FG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=IL();return _.jsx(_.Fragment,{children:_.jsx(ve,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(ve,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(ve,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(c_e,{...a,offset:i,disabled:r,inverted:s})]})})})}FG.displayName="@mantine/core/SliderTrack";function RU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function ac(e,t){return parseFloat(e.toFixed(t))}function f_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var kL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const JGe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},ZGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":en(t,"slider-size"),"--slider-color":n?Mr(n,e):void 0,"--slider-radius":i===void 0?void 0:Kr(i),"--slider-thumb-size":r!==void 0?Ae(r):"calc(var(--slider-size) * 2)"}}),RL=Le((e,t)=>{const n=xe("Slider",JGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:T,unstyled:S,scale:A,inverted:C,className:I,style:N,vars:O,hiddenInputProps:P,...$}=n,F=gt({name:"Slider",props:n,classes:kL,classNames:r,className:I,styles:i,style:N,vars:O,varsResolver:ZGe,unstyled:S}),{dir:L}=Mh(),[B,z]=R.useState(!1),[q,D]=Es({value:typeof s=="number"?Wd(s,l,c):s,defaultValue:typeof h=="number"?Wd(h,l,c):h,finalValue:Wd(0,l,c),onChange:o}),U=R.useRef(q),W=R.useRef(),j=R.useRef(),H=IO({value:q,min:l,max:c}),G=A(q),ne=typeof g=="function"?g(G):g,ce=d??f_e(f),de=R.useCallback(({x:be})=>{if(!T){const Ke=RU({value:be,min:l,max:c,step:f,precision:ce});D(Ke),U.current=Ke}},[T,l,c,f,ce,D]),{ref:he,active:ye}=rve(de,{onScrubEnd:()=>a==null?void 0:a(U.current)},L),Ie=be=>{var Ke,Ue,yt,it,_e,ke;if(!T)switch(be.key){case"ArrowUp":{be.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=ac(Math.min(Math.max(q+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowRight":{be.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=ac(Math.min(Math.max(L==="rtl"?q-f:q+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const ze=ac(Math.min(Math.max(q-f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const ze=ac(Math.min(Math.max(L==="rtl"?q+f:q-f,l),c),ce);D(ze),a==null||a(ze);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),D(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(l_e,{value:{getStyles:F},children:_.jsxs(LG,{...$,ref:cs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:T,children:[_.jsx(FG,{inverted:C,offset:0,filled:H,marks:m,min:l,max:c,value:G,disabled:T,containerProps:{ref:he,onMouseEnter:w?()=>z(!0):void 0,onMouseLeave:w?()=>z(!1):void 0},children:_.jsx(CO,{max:c,min:l,value:G,position:H,dragging:ye,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});RL.classes=kL;RL.displayName="@mantine/core/Slider";function eYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const tYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":en(t,"slider-size"),"--slider-color":n?Mr(n,e):void 0,"--slider-radius":i===void 0?void 0:Kr(i),"--slider-thumb-size":r!==void 0?Ae(r):"calc(var(--slider-size) * 2)"}}),nYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},kO=Le((e,t)=>{const n=xe("RangeSlider",nYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:S,thumbChildren:A,disabled:C,unstyled:I,scale:N,inverted:O,className:P,style:$,vars:F,hiddenInputProps:L,...B}=n,z=gt({name:"Slider",props:n,classes:kL,classNames:r,className:P,styles:i,style:$,vars:F,varsResolver:tYe,unstyled:I}),{dir:q}=Mh(),[D,U]=R.useState(-1),[W,j]=R.useState(!1),[H,G]=Es({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=R.useRef(H),ce=R.useRef([]),de=R.useRef(void 0),he=[IO({value:H[0],min:l,max:c}),IO({value:H[1],min:l,max:c})],ye=p??f_e(h),Ie=We=>{G(We),ne.current=We};R.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(We,me,dt)=>{const vt=[...ne.current];vt[me]=We,me===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[me]=ne.current[me]),vt[1]-We>d&&(vt[1]=We+d)),me===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[me]=ne.current[me]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=ac(vt[0],ye),vt[1]=ac(vt[1],ye),Ie(vt),dt&&(a==null||a(ne.current))},Ke=We=>{if(!C){const me=RU({value:We,min:l,max:c,step:h,precision:ye});be(me,de.current,!1)}},{ref:Ue,active:yt}=rve(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},q);function it(We){de.current=We}const _e=We=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),dt=eYe(We.nativeEvent),vt=RU({value:dt-me.left,max:c,min:l,step:h,containerWidth:me.width}),pe=Math.abs(H[0]-vt)>Math.abs(H[1]-vt)?1:0,Ce=q==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>D!==1&&D!==0?(U(0),0):D,ze=We=>{if(!C)switch(We.key){case"ArrowUp":{We.preventDefault();const me=ke();ce.current[me].focus(),be(ac(Math.min(Math.max(ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{We.preventDefault();const me=ke();ce.current[me].focus(),be(ac(Math.min(Math.max(q==="rtl"?ne.current[me]-h:ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{We.preventDefault();const me=ke();ce.current[me].focus(),be(ac(Math.min(Math.max(ne.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{We.preventDefault();const me=ke();ce.current[me].focus(),be(ac(Math.min(Math.max(q==="rtl"?ne.current[me]+h:ne.current[me]-h,l),c),ye),me,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>U(-1)},Ot=Array.isArray(A);return _.jsx(l_e,{value:{getStyles:z},children:_.jsxs(LG,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(FG,{offset:he[0],marksOffset:H[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:H[1],disabled:C,containerProps:{ref:Ue,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(CO,{...ct,value:N(H[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(ac(N(H[0]),ye)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>U(0),showLabelOnHover:S,isHovered:W,disabled:C,children:Ot?A[0]:A}),_.jsx(CO,{...ct,thumbLabel:T,value:N(H[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(ac(N(H[1]),ye)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>U(1),showLabelOnHover:S,isHovered:W,disabled:C,children:Ot?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...L})]})})});kO.classes=kL;kO.displayName="@mantine/core/RangeSlider";const rYe={},Il=Le((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",rYe,e);return _.jsx(ve,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Il.displayName="@mantine/core/Space";var d_e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const iYe={maxHeight:100,initialState:!1},sYe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),jG=Le((e,t)=>{const n=xe("Spoiler",iYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=gt({name:"Spoiler",classes:d_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sYe}),b=xa(g),w=`${b}-region`,[E,T]=R.useState(l),{ref:S,height:A}=jBe(),C=E?f:d,I=C!==null&&c<A;return _.jsxs(ve,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&_.jsx(Mx,{component:"button",type:"button",ref:p,onClick:()=>T(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Ae(A):void 0:Ae(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});jG.classes=d_e;jG.displayName="@mantine/core/Spoiler";var h_e={root:"m_6d731127"};const oYe={gap:"md",align:"stretch",justify:"flex-start"},aYe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":ss(t),"--stack-align":n,"--stack-justify":r}}),Gd=Le((e,t)=>{const n=xe("Stack",oYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=gt({name:"Stack",props:n,classes:h_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aYe});return _.jsx(ve,{ref:t,...p("root"),variant:d,...h})});Gd.classes=h_e;Gd.displayName="@mantine/core/Stack";const p_e=R.createContext(null),uYe=p_e.Provider,lYe=()=>R.useContext(p_e),cYe={},BG=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",cYe,e),[c,f]=Es({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(uYe,{value:{value:c,onChange:d,size:s},children:_.jsx(hi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(lG,{role:"group",children:a})})})});BG.classes=hi.Wrapper.classes;BG.displayName="@mantine/core/SwitchGroup";var m_e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const fYe={labelPosition:"right"},dYe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Kr(t),"--switch-height":en(r,"switch-height"),"--switch-width":en(r,"switch-width"),"--switch-thumb-size":en(r,"switch-thumb-size"),"--switch-label-font-size":en(r,"switch-label-font-size"),"--switch-track-label-padding":en(r,"switch-track-label-padding"),"--switch-color":n?Mr(n,e):void 0}}),Nw=Le((e,t)=>{const n=xe("Switch",fYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:S,error:A,disabled:C,variant:I,rootRef:N,mod:O,...P}=n,$=lYe(),F=p||($==null?void 0:$.size),L=gt({name:"Switch",props:n,classes:m_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dYe}),{styleProps:B,rest:z}=Tb(P),q=xa(h),D=$?{checked:$.value.includes(z.value),onChange:$.onChange}:{},[U,W]=Es({value:D.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(sL,{...L("root"),__staticSelector:"Switch",__stylesApiProps:n,id:q,size:F,labelPosition:T,label:c,description:S,error:A,disabled:C,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:I,ref:N,mod:O,...B,...g,children:[_.jsx("input",{...z,disabled:C,checked:U,onChange:j=>{var H;$?(H=D.onChange)==null||H.call(D,j):E==null||E(j),W(j.currentTarget.checked)},id:q,ref:t,type:"checkbox",role:"switch",...L("input")}),_.jsxs(ve,{"aria-hidden":"true",mod:{error:A,"label-position":T},...L("track"),children:[_.jsx(ve,{component:"span",mod:"reduce-motion",...L("thumb"),children:v}),_.jsx("span",{...L("trackLabel"),children:U?d:f})]})]})});Nw.classes={...m_e,...wbe};Nw.displayName="@mantine/core/Switch";Nw.Group=BG;const[hYe,pYe]=ho("Table component was not found in the tree");var YI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function mYe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Ib(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Le((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=pYe();return _.jsx(ve,{component:e,ref:s,...mYe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=YI,r}const NU=Ib("th",{columnBorder:!0}),g_e=Ib("td",{columnBorder:!0}),HP=Ib("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),y_e=Ib("thead",{stickyHeader:!0}),v_e=Ib("tbody"),b_e=Ib("tfoot"),__e=Ib("caption",{captionSide:!0});function UG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(__e,{children:e.caption}),e.head&&_.jsx(y_e,{children:_.jsx(HP,{children:e.head.map((t,n)=>_.jsx(NU,{children:t},n))})}),e.body&&_.jsx(v_e,{children:e.body.map((t,n)=>_.jsx(HP,{children:t.map((r,i)=>_.jsx(g_e,{children:r},i))},n))}),e.foot&&_.jsx(b_e,{children:_.jsx(HP,{children:e.foot.map((t,n)=>_.jsx(NU,{children:t},n))})})]})}UG.displayName="@mantine/core/TableDataRenderer";const gYe={type:"scrollarea"},yYe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ae(t),"--table-overflow":n==="native"?"auto":void 0}}),zG=Le((e,t)=>{const n=xe("TableScrollContainer",gYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=gt({name:"TableScrollContainer",classes:YI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yYe,rootSelector:"scrollContainer"});return _.jsx(ve,{component:f==="scrollarea"?dm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});zG.classes=YI;zG.displayName="@mantine/core/TableScrollContainer";const vYe={withRowBorders:!0,verticalSpacing:7},bYe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":ss(r),"--table-vertical-spacing":ss(i),"--table-border-color":s?Mr(s,e):void 0,"--table-striped-color":u&&o?Mr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Mr(a,e):void 0,"--table-sticky-header-offset":f?Ae(c):void 0}}),An=Le((e,t)=>{const n=xe("Table",vYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:T,children:S,stickyHeader:A,stickyHeaderOffset:C,mod:I,...N}=n,O=gt({name:"Table",props:n,className:i,style:s,classes:YI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:bYe});return _.jsx(hYe,{value:{getStyles:O,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(ve,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},I],...O("table"),...N,children:S||!!T&&_.jsx(UG,{data:T})})})});An.classes=YI;An.displayName="@mantine/core/Table";An.Td=g_e;An.Th=NU;An.Tr=HP;An.Thead=y_e;An.Tbody=v_e;An.Tfoot=b_e;An.Caption=__e;An.ScrollContainer=zG;An.DataRenderer=UG;const[_Ye,VG]=ho("Tabs component was not found in the tree");var KI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const wYe={},HG=Le((e,t)=>{const n=xe("TabsList",wYe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=VG();return _.jsx(ve,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});HG.classes=KI;HG.displayName="@mantine/core/TabsList";const EYe={},qG=Le((e,t)=>{const n=xe("TabsPanel",EYe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=VG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(ve,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});qG.classes=KI;qG.displayName="@mantine/core/TabsPanel";const xYe={},WG=Le((e,t)=>{const n=xe("TabsTab",xYe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ts(),{dir:b}=Mh(),w=VG(),E=a===w.value,T=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},S={classNames:h,styles:p,props:n};return _.jsxs(_s,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Mr(f,v):void 0},onKeyDown:eW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});WG.classes=KI;WG.displayName="@mantine/core/TabsTab";const voe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",SYe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},TYe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Kr(t),"--tabs-color":Mr(n,e),"--tabs-text-color":Rx(r,e)?Sy({color:n,theme:e,autoContrast:r}):void 0}}),ts=Le((e,t)=>{const n=xe("Tabs",SYe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:T,vars:S,autoContrast:A,mod:C,...I}=n,N=xa(l),[O,P]=Es({value:i,defaultValue:r,finalValue:null,onChange:s}),$=gt({name:"Tabs",props:n,classes:KI,className:E,style:T,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:TYe});return _.jsx(_Ye,{value:{placement:g,value:O,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:bO(`${N}-tab`,voe),getPanelId:bO(`${N}-panel`,voe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(ve,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...$("root"),...I,children:a})})});ts.classes=KI;ts.displayName="@mantine/core/Tabs";ts.Tab=WG;ts.Panel=qG;ts.List=HG;const AYe={},gv=Le((e,t)=>{const n=xe("TextInput",AYe,e);return _.jsx(Uc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});gv.classes=Uc.classes;gv.displayName="@mantine/core/TextInput";const CYe=["h1","h2","h3","h4","h5","h6"];function IYe(e,t){const n=t!==void 0?t:`h${e}`;return CYe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ae(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var w_e={root:"m_8a5d1357"};const kYe={order:1},RYe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=IYe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},xi=Le((e,t)=>{const n=xe("Title",kYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=gt({name:"Title",props:n,classes:w_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:RYe});return[1,2,3,4,5,6].includes(u)?_.jsx(ve,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});xi.classes=w_e;xi.displayName="@mantine/core/Title";const E_e=R.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),As=()=>R.useContext(E_e);function NYe({children:e}){const[t,n]=Wi.useState(void 0),r=Wi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(E_e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dC.apply(this,arguments)}var qg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qg||(qg={}));const boe="popstate";function PYe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return PU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:S_e(i)}return OYe(t,n,null,e)}function os(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function x_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DYe(){return Math.random().toString(36).substr(2,8)}function _oe(e,t){return{usr:e.state,key:e.key,idx:t}}function PU(e,t,n,r){return n===void 0&&(n=null),dC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zx(t):t,{state:n,key:t&&t.key||r||DYe()})}function S_e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function OYe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=qg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(dC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=qg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=qg.Push;let v=PU(m.location,g,y);l=c()+1;let b=_oe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=qg.Replace;let v=PU(m.location,g,y);l=c();let b=_oe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:S_e(g);return v=v.replace(/ $/,"%20"),os(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(boe,f),u=g,()=>{i.removeEventListener(boe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var woe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(woe||(woe={}));function $Ye(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?zx(t):t,i=C_e(r.pathname||"/",n);if(i==null)return null;let s=T_e(e);MYe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=YYe(i);o=qYe(s[a],u)}return o}function T_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(os(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=d0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(os(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),T_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:VYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of A_e(s.path))i(s,o,u)}),t}function A_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=A_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function MYe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:HYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LYe=/^:[\w-]+$/,FYe=3,jYe=2,BYe=1,UYe=10,zYe=-2,Eoe=e=>e==="*";function VYe(e,t){let n=e.split("/"),r=n.length;return n.some(Eoe)&&(r+=zYe),t&&(r+=jYe),n.filter(i=>!Eoe(i)).reduce((i,s)=>i+(LYe.test(s)?FYe:s===""?BYe:UYe),r)}function HYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function qYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=WYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:d0([i,c.pathname]),pathnameBase:JYe(d0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=d0([i,c.pathnameBase]))}return s}function WYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=GYe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function GYe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),x_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function YYe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return x_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function C_e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function KYe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?zx(e):e;return{pathname:n?n.startsWith("/")?n:XYe(n,t):t,search:ZYe(r),hash:eKe(i)}}function XYe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QYe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function GG(e,t){let n=QYe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function YG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=zx(e):(i=dC({},e),os(!i.pathname||!i.pathname.includes("?"),_j("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),_j("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),_j("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=KYe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const d0=e=>e.join("/").replace(/\/\/+/g,"/"),JYe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZYe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const I_e=["post","put","patch","delete"];new Set(I_e);const nKe=["get",...I_e];new Set(nKe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hC(){return hC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hC.apply(this,arguments)}const KG=R.createContext(null),rKe=R.createContext(null),kb=R.createContext(null),NL=R.createContext(null),Fh=R.createContext({outlet:null,matches:[],isDataRoute:!1}),k_e=R.createContext(null);function R_e(e,t){let{relative:n}={};Vx()||os(!1);let{basename:r,navigator:i}=R.useContext(kb),{hash:s,pathname:o,search:a}=aKe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:d0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Vx(){return R.useContext(NL)!=null}function Iy(){return Vx()||os(!1),R.useContext(NL).location}function N_e(e){R.useContext(kb).static||R.useLayoutEffect(e)}function Wm(){let{isDataRoute:e}=R.useContext(Fh);return e?vKe():iKe()}function iKe(){Vx()||os(!1);let e=R.useContext(KG),{basename:t,future:n,navigator:r}=R.useContext(kb),{matches:i}=R.useContext(Fh),{pathname:s}=Iy(),o=JSON.stringify(GG(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return N_e(()=>{a.current=!0}),R.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=YG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:d0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const sKe=R.createContext(null);function oKe(e){let t=R.useContext(Fh).outlet;return t&&R.createElement(sKe.Provider,{value:e},t)}function gm(){let{matches:e}=R.useContext(Fh),t=e[e.length-1];return t?t.params:{}}function aKe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=R.useContext(kb),{matches:i}=R.useContext(Fh),{pathname:s}=Iy(),o=JSON.stringify(GG(i,r.v7_relativeSplatPath));return R.useMemo(()=>YG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function P_e(e,t){return uKe(e,t)}function uKe(e,t,n,r){Vx()||os(!1);let{navigator:i}=R.useContext(kb),{matches:s}=R.useContext(Fh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Iy(),c;if(t){var f;let g=typeof t=="string"?zx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||os(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=$Ye(e,{pathname:h}),m=hKe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:d0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:d0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?R.createElement(NL.Provider,{value:{location:hC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:qg.Pop}},m):m}function lKe(){let e=yKe(),t=tKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:i},n):null,null)}const cKe=R.createElement(lKe,null);class fKe extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?R.createElement(Fh.Provider,{value:this.props.routeContext},R.createElement(k_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dKe(e){let{routeContext:t,match:n,children:r}=e,i=R.useContext(KG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Fh.Provider,{value:t},r)}function hKe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||os(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||cKe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=R.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,R.createElement(dKe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?R.createElement(fKe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var D_e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(D_e||{}),RO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(RO||{});function pKe(e){let t=R.useContext(KG);return t||os(!1),t}function mKe(e){let t=R.useContext(rKe);return t||os(!1),t}function gKe(e){let t=R.useContext(Fh);return t||os(!1),t}function O_e(e){let t=gKe(),n=t.matches[t.matches.length-1];return n.route.id||os(!1),n.route.id}function yKe(){var e;let t=R.useContext(k_e),n=mKe(RO.UseRouteError),r=O_e(RO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function vKe(){let{router:e}=pKe(D_e.UseNavigateStable),t=O_e(RO.UseNavigateStable),n=R.useRef(!1);return N_e(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,hC({fromRouteId:t},s)))},[e,t])}function XG(e){let{to:t,replace:n,state:r,relative:i}=e;Vx()||os(!1);let{future:s,static:o}=R.useContext(kb),{matches:a}=R.useContext(Fh),{pathname:u}=Iy(),l=Wm(),c=YG(t,GG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return R.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function bKe(e){return oKe(e.context)}function yp(e){os(!1)}function _Ke(e){let{basename:t="/",children:n=null,location:r,navigationType:i=qg.Pop,navigator:s,static:o=!1,future:a}=e;Vx()&&os(!1);let u=t.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:u,navigator:s,static:o,future:hC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=zx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=R.useMemo(()=>{let g=C_e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:R.createElement(kb.Provider,{value:l},R.createElement(NL.Provider,{children:n,value:m}))}function wKe(e){let{children:t,location:n}=e;return P_e(DU(t),n)}new Promise(()=>{});function DU(e,t){t===void 0&&(t=[]);let n=[];return R.Children.forEach(e,(r,i)=>{if(!R.isValidElement(r))return;let s=[...t,i];if(r.type===R.Fragment){n.push.apply(n,DU(r.props.children,s));return}r.type!==yp&&os(!1),!r.props.index||!r.props.children||os(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=DU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function EKe(e,t){let n=OU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const xKe="6";try{window.__reactRouterVersion=xKe}catch{}const SKe="startTransition",xoe=GD[SKe];function TKe(e){let{basename:t,children:n,future:r,window:i}=e,s=R.useRef();s.current==null&&(s.current=PYe({window:i,v5Compat:!0}));let o=s.current,[a,u]=R.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=R.useCallback(f=>{l&&xoe?xoe(()=>u(f)):u(f)},[u,l]);return R.useLayoutEffect(()=>o.listen(c),[o,c]),R.createElement(_Ke,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Soe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Soe||(Soe={}));var Toe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Toe||(Toe={}));function QG(e){let t=R.useRef(OU(e)),n=R.useRef(!1),r=Iy(),i=R.useMemo(()=>EKe(r.search,n.current?null:t.current),[r.search]),s=Wm(),o=R.useCallback((a,u)=>{const l=OU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const JG=R.createContext(null);JG.displayName="@mantine/modals/ModalsContext";function AKe(){const e=R.useContext(JG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function CKe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=AKe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(ve,{mb:"md",children:l}),_.jsxs(xs,{justify:"flex-end",...o,children:[_.jsx(Rn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Rn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[IKe,PL]=YBe("mantine-modals");PL("openModal");PL("closeModal");PL("closeAllModals");const $U=PL("openConfirmModal");function Aoe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function kKe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Aoe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Aoe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function RKe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function NKe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=R.useReducer(kKe,{modals:[],current:null}),o=R.useRef(i);o.current=i;const a=R.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=R.useCallback(({modalId:g,...y})=>{const v=g||X2();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=R.useCallback(({modalId:g,...y})=>{const v=g||X2();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=R.useCallback((g,{modalId:y,...v})=>{const b=y||X2();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=R.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);IKe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=RKe(g.props);return{modalProps:y,content:_.jsx(CKe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(JG.Provider,{value:d,children:[_.jsx(ws,{zIndex:Fc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PKe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=(e,t,n,r)=>{const i=R.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>R.createElement("svg",{ref:f,...PKe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>R.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DKe=Dn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OKe=Dn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Coe=Dn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ke=Dn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MKe=Dn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LKe=Dn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FKe=Dn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jKe=Dn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BKe=Dn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UKe=Dn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $_e=Dn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zKe=Dn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ioe=Dn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VKe=Dn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HKe=Dn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qKe=Dn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WKe=Dn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GKe=Dn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YKe=Dn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M_e=Dn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KKe=Dn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XKe=Dn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QKe=Dn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JKe=Dn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L_e=Dn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZKe=Dn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eXe=Dn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tXe=Dn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nXe=Dn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rXe=Dn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F_e=Dn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iXe=Dn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j_e=Dn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sXe=Dn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B_e=Dn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZG=Dn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eY=Dn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oXe=Dn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function U_e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const jh="/study/";function koe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function z_e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const aXe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uXe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lXe={};function Roe(e,t){return(lXe.jsx?uXe:aXe).test(e)}const cXe=/[ \t\n\f\r]/g;function fXe(e){return typeof e=="object"?e.type==="text"?Noe(e.value):!1:Noe(e)}function Noe(e){return e.replace(cXe,"")===""}let XI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};XI.prototype.property={};XI.prototype.normal={};XI.prototype.space=null;function V_e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new XI(n,r,t)}function pC(e){return e.toLowerCase()}let Vc=class{constructor(t,n){this.property=t,this.attribute=n}};Vc.prototype.space=null;Vc.prototype.boolean=!1;Vc.prototype.booleanish=!1;Vc.prototype.overloadedBoolean=!1;Vc.prototype.number=!1;Vc.prototype.commaSeparated=!1;Vc.prototype.spaceSeparated=!1;Vc.prototype.commaOrSpaceSeparated=!1;Vc.prototype.mustUseProperty=!1;Vc.prototype.defined=!1;let dXe=0;const mn=Rb(),ps=Rb(),H_e=Rb(),nt=Rb(),Zr=Rb(),Pw=Rb(),ll=Rb();function Rb(){return 2**++dXe}const MU=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:ps,commaOrSpaceSeparated:ll,commaSeparated:Pw,number:nt,overloadedBoolean:H_e,spaceSeparated:Zr},Symbol.toStringTag,{value:"Module"})),wj=Object.keys(MU);class tY extends Vc{constructor(t,n,r,i){let s=-1;if(super(t,n),Poe(this,"space",i),typeof r=="number")for(;++s<wj.length;){const o=wj[s];Poe(this,wj[s],(r&MU[o])===MU[o])}}}tY.prototype.defined=!0;function Poe(e,t,n){n&&(e[t]=n)}const hXe={}.hasOwnProperty;function Hx(e){const t={},n={};let r;for(r in e.properties)if(hXe.call(e.properties,r)){const i=e.properties[r],s=new tY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[pC(r)]=r,n[pC(s.attribute)]=r}return new XI(t,n,e.space)}const q_e=Hx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),W_e=Hx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function G_e(e,t){return t in e?e[t]:t}function Y_e(e,t){return G_e(e,t.toLowerCase())}const K_e=Hx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Y_e,properties:{xmlns:null,xmlnsXLink:null}}),X_e=Hx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ps,ariaAutoComplete:null,ariaBusy:ps,ariaChecked:ps,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:Zr,ariaCurrent:null,ariaDescribedBy:Zr,ariaDetails:null,ariaDisabled:ps,ariaDropEffect:Zr,ariaErrorMessage:null,ariaExpanded:ps,ariaFlowTo:Zr,ariaGrabbed:ps,ariaHasPopup:null,ariaHidden:ps,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Zr,ariaLevel:nt,ariaLive:null,ariaModal:ps,ariaMultiLine:ps,ariaMultiSelectable:ps,ariaOrientation:null,ariaOwns:Zr,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:ps,ariaReadOnly:ps,ariaRelevant:null,ariaRequired:ps,ariaRoleDescription:Zr,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:ps,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),pXe=Hx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Y_e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Pw,acceptCharset:Zr,accessKey:Zr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Zr,autoFocus:mn,autoPlay:mn,blocking:Zr,capture:null,charSet:null,checked:mn,cite:null,className:Zr,cols:nt,colSpan:null,content:null,contentEditable:ps,controls:mn,controlsList:Zr,coords:nt|Pw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:H_e,draggable:ps,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Zr,height:nt,hidden:mn,high:nt,href:null,hrefLang:null,htmlFor:Zr,httpEquiv:Zr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Zr,itemRef:Zr,itemScope:mn,itemType:Zr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:nt,pattern:null,ping:Zr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Zr,required:mn,reversed:mn,rows:nt,rowSpan:nt,sandbox:Zr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:ps,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:ps,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Zr,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:ps,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),mXe=Hx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:G_e,properties:{about:ll,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:Zr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Pw,g2:Pw,glyphName:Pw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:ll,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Zr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ll,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ll,rev:ll,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ll,requiredFeatures:ll,requiredFonts:ll,requiredFormats:ll,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:ll,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ll,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ll,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),gXe=/^data[-\w.:]+$/i,Doe=/-[a-z]/g,yXe=/[A-Z]/g;function DL(e,t){const n=pC(t);let r=t,i=Vc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&gXe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Doe,bXe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Doe.test(s)){let o=s.replace(yXe,vXe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=tY}return new i(r,t)}function vXe(e){return"-"+e.toLowerCase()}function bXe(e){return e.charAt(1).toUpperCase()}const _Xe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},QI=V_e([W_e,q_e,K_e,X_e,pXe],"html"),ky=V_e([W_e,q_e,K_e,X_e,mXe],"svg");function Ooe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Q_e(e){return e.join(" ").trim()}var J_e={},$oe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,wXe=/\n/g,EXe=/^\s*/,xXe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,SXe=/^:\s*/,TXe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,AXe=/^[;\s]*/,CXe=/^\s+|\s+$/g,IXe=`
`,Moe="/",Loe="*",D1="",kXe="comment",RXe="declaration",NXe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(wXe);m&&(n+=m.length);var g=p.lastIndexOf(IXe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(EXe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Moe!=e.charAt(0)||Loe!=e.charAt(1))){for(var m=2;D1!=e.charAt(m)&&(Loe!=e.charAt(m)||Moe!=e.charAt(m+1));)++m;if(m+=2,D1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:kXe,comment:g})}}function d(){var p=s(),m=u(xXe);if(m){if(f(),!u(SXe))return a("property missing ':'");var g=u(TXe),y=p({type:RXe,property:Foe(m[0].replace($oe,D1)),value:g?Foe(g[0].replace($oe,D1)):D1});return u(AXe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Foe(e){return e?e.replace(CXe,D1):D1}var PXe=no&&no.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J_e,"__esModule",{value:!0});var DXe=PXe(NXe);function OXe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,DXe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var joe=J_e.default=OXe;const $Xe=joe.default||joe,OL=Z_e("end"),Bh=Z_e("start");function Z_e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function MXe(e){const t=Bh(e),n=OL(e);if(t&&n)return{start:t,end:n}}function J2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Boe(e.position):"start"in e||"end"in e?Boe(e):"line"in e||"column"in e?LU(e):""}function LU(e){return Uoe(e&&e.line)+":"+Uoe(e&&e.column)}function Boe(e){return LU(e&&e.start)+"-"+LU(e&&e.end)}function Uoe(e){return e&&typeof e=="number"?e:1}class Sa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=J2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Sa.prototype.file="";Sa.prototype.name="";Sa.prototype.reason="";Sa.prototype.message="";Sa.prototype.stack="";Sa.prototype.column=void 0;Sa.prototype.line=void 0;Sa.prototype.ancestors=void 0;Sa.prototype.cause=void 0;Sa.prototype.fatal=void 0;Sa.prototype.place=void 0;Sa.prototype.ruleId=void 0;Sa.prototype.source=void 0;const nY={}.hasOwnProperty,LXe=new Map,FXe=/[A-Z]/g,jXe=/-([a-z])/g,BXe=new Set(["table","tbody","thead","tfoot","tr"]),UXe=new Set(["td","th"]),ewe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function zXe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=XXe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=KXe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?ky:QI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=twe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function twe(e,t,n){if(t.type==="element")return VXe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return HXe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return WXe(e,t,n);if(t.type==="mdxjsEsm")return qXe(e,t);if(t.type==="root")return GXe(e,t,n);if(t.type==="text")return YXe(e,t)}function VXe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=ky,e.schema=i),e.ancestors.push(t);const s=rwe(e,t.tagName,!1),o=QXe(e,t);let a=iY(e,t);return BXe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!fXe(u):!0})),nwe(e,o,s,t),rY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function HXe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}mC(e,t.position)}function qXe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);mC(e,t.position)}function WXe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=ky,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:rwe(e,t.name,!0),o=JXe(e,t),a=iY(e,t);return nwe(e,o,s,t),rY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function GXe(e,t,n){const r={};return rY(r,iY(e,t)),e.create(t,e.Fragment,r,n)}function YXe(e,t){return t.value}function nwe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function rY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function KXe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function XXe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Bh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function QXe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&nY.call(t.properties,i)){const s=ZXe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&UXe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JXe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else mC(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else mC(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function iY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:LXe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=twe(e,s,o);a!==void 0&&n.push(a)}return n}function ZXe(e,t,n){const r=DL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?z_e(n):Q_e(n)),r.property==="style"){let i=typeof n=="object"?n:eQe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=tQe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?_Xe[r.property]||r.property:r.attribute,n]}}function eQe(e,t){const n={};try{$Xe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Sa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=ewe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(jXe,rQe)),n[o]=s}}function rwe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Roe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Roe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return nY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);mC(e)}function mC(e,t){const n=new Sa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ewe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function tQe(e){const t={};let n;for(n in e)nY.call(e,n)&&(t[nQe(n)]=e[n]);return t}function nQe(e){let t=e.replace(FXe,iQe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function rQe(e,t){return t.toUpperCase()}function iQe(e){return"-"+e.toLowerCase()}const Ej={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sQe={};function oQe(e,t){const n=sQe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return iwe(e,r,i)}function iwe(e,t,n){if(aQe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return zoe(e.children,t,n)}return Array.isArray(e)?zoe(e,t,n):""}function zoe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=iwe(e[i],t,n);return r.join("")}function aQe(e){return!!(e&&typeof e=="object")}const Voe=document.createElement("i");function sY(e){const t="&"+e+";";Voe.innerHTML=t;const n=Voe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ym(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function fc(e,t){return e.length>0?(ym(e,e.length,0,t),e):t}const Hoe={}.hasOwnProperty;function uQe(e){const t={};let n=-1;for(;++n<e.length;)lQe(t,e[n]);return t}function lQe(e,t){let n;for(n in t){const i=(Hoe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Hoe.call(i,o)||(i[o]=[]);const a=s[o];cQe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function cQe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ym(e,0,0,r)}function swe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Dw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Od=Ry(/[A-Za-z]/),El=Ry(/[\dA-Za-z]/),fQe=Ry(/[#-'*+\--9=?A-Z^-~]/);function FU(e){return e!==null&&(e<32||e===127)}const jU=Ry(/\d/),dQe=Ry(/[\dA-Fa-f]/),hQe=Ry(/[!-/:-@[-`{-~]/);function Zt(e){return e!==null&&e<-2}function Bu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const pQe=Ry(new RegExp("\\p{P}|\\p{S}","u")),mQe=Ry(/\s/);function Ry(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function qx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&El(e.charCodeAt(n+1))&&El(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ni(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const gQe={tokenize:yQe};function yQe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ni(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const vQe={tokenize:bQe},qoe={tokenize:_Qe};function bQe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return ym(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(qoe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(qoe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Zt(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const S=t.events.length;let A=S,C,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){I=t.events[A][1].end;break}C=!0}for(y(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},I),T++;ym(t.events,A+1,0,t.events.slice(S)),t.events.length=T}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function _Qe(e,t,n){return ni(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Woe(e){if(e===null||Bu(e)||mQe(e))return 1;if(pQe(e))return 2}function oY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const BU={name:"attention",tokenize:EQe,resolveAll:wQe};function wQe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Goe(f,-u),Goe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=fc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=fc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=fc(l,oY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=fc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=fc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,ym(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function EQe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Woe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Woe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Goe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const xQe={name:"autolink",tokenize:SQe};function SQe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Od(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||El(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||El(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||FU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):fQe(h)?(e.consume(h),l):n(h)}function c(h){return El(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||El(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const $L={tokenize:TQe,partial:!0};function TQe(e,t,n){return r;function r(s){return br(s)?ni(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Zt(s)?t(s):n(s)}}const owe={name:"blockQuote",tokenize:AQe,continuation:{tokenize:CQe},exit:IQe};function AQe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function CQe(e,t,n){const r=this;return i;function i(o){return br(o)?ni(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(owe,t,n)(o)}}function IQe(e){e.exit("blockQuote")}const awe={name:"characterEscape",tokenize:kQe};function kQe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return hQe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const uwe={name:"characterReference",tokenize:RQe};function RQe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=El,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=dQe,c):(e.enter("characterReferenceValue"),s=7,o=jU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===El&&!sY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Yoe={tokenize:PQe,partial:!0},Koe={name:"codeFenced",tokenize:NQe,concrete:!0};function NQe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),br(T)?ni(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Zt(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(Yoe,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Zt(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):br(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ni(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Zt(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Zt(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&br(T)?ni(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||Zt(T)?e.check(Yoe,m,w)(T):(e.enter("codeFlowValue"),b(T))}function b(T){return T===null||Zt(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),b)}function w(T){return e.exit("codeFenced"),t(T)}function E(T,S,A){let C=0;return I;function I(F){return T.enter("lineEnding"),T.consume(F),T.exit("lineEnding"),N}function N(F){return T.enter("codeFencedFence"),br(F)?ni(T,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(T.enter("codeFencedFenceSequence"),P(F)):A(F)}function P(F){return F===a?(C++,T.consume(F),P):C>=o?(T.exit("codeFencedFenceSequence"),br(F)?ni(T,$,"whitespace")(F):$(F)):A(F)}function $(F){return F===null||Zt(F)?(T.exit("codeFencedFence"),S(F)):A(F)}}}function PQe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const xj={name:"codeIndented",tokenize:OQe},DQe={tokenize:$Qe,partial:!0};function OQe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ni(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(DQe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function $Qe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ni(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const MQe={name:"codeText",tokenize:jQe,resolve:LQe,previous:FQe};function LQe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function FQe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function jQe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class BQe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&oT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),oT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),oT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);oT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);oT(this.left,n.reverse())}}}function oT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function lwe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new BQe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,UQe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return ym(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function UQe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const zQe={tokenize:qQe,resolve:HQe},VQe={tokenize:WQe,partial:!0};function HQe(e){return lwe(e),e}function qQe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(VQe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function WQe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ni(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function cwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||FU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Bu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||FU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function fwe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function dwe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ni(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function Z2(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ni(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const GQe={name:"definition",tokenize:KQe},YQe={tokenize:XQe,partial:!0};function KQe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return fwe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Dw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Bu(h)?Z2(e,l)(h):l(h)}function l(h){return cwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(YQe,f,f)(h)}function f(h){return br(h)?ni(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function XQe(e,t,n){return r;function r(a){return Bu(a)?Z2(e,i)(a):n(a)}function i(a){return dwe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ni(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Zt(a)?t(a):n(a)}}const QQe={name:"hardBreakEscape",tokenize:JQe};function JQe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const ZQe={name:"headingAtx",tokenize:tJe,resolve:eJe};function eJe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ym(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function tJe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Bu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):br(c)?ni(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Bu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const nJe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Xoe=["pre","script","style","textarea"],rJe={name:"htmlFlow",tokenize:aJe,resolveTo:oJe,concrete:!0},iJe={tokenize:lJe,partial:!0},sJe={tokenize:uJe,partial:!0};function oJe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function aJe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):Od(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Od(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const H="CDATA[";return j===H.charCodeAt(a++)?(e.consume(j),a===H.length?r.interrupt?t:O:p):n(j)}function m(j){return Od(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Bu(j)){const H=j===47,G=o.toLowerCase();return!H&&!s&&Xoe.includes(G)?(i=1,r.interrupt?t(j):O(j)):nJe.includes(o.toLowerCase())?(i=6,H?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||El(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return br(j)?(e.consume(j),v):I(j)}function b(j){return j===47?(e.consume(j),I):j===58||j===95||Od(j)?(e.consume(j),w):br(j)?(e.consume(j),b):I(j)}function w(j){return j===45||j===46||j===58||j===95||El(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),T):br(j)?(e.consume(j),E):b(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):br(j)?(e.consume(j),T):A(j)}function S(j){return j===u?(e.consume(j),u=null,C):j===null||Zt(j)?n(j):(e.consume(j),S)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Bu(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||br(j)?b(j):n(j)}function I(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||Zt(j)?O(j):br(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),U):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),q):Zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(iJe,W,P)(j)):j===null||Zt(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),O)}function P(j){return e.check(sJe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||Zt(j)?P(j):(e.enter("htmlFlowData"),O(j))}function L(j){return j===45?(e.consume(j),D):O(j)}function B(j){return j===47?(e.consume(j),o="",z):O(j)}function z(j){if(j===62){const H=o.toLowerCase();return Xoe.includes(H)?(e.consume(j),U):O(j)}return Od(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),z):O(j)}function q(j){return j===93?(e.consume(j),D):O(j)}function D(j){return j===62?(e.consume(j),U):j===45&&i===2?(e.consume(j),D):O(j)}function U(j){return j===null||Zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),U)}function W(j){return e.exit("htmlFlow"),t(j)}}function uJe(e,t,n){const r=this;return i;function i(o){return Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function lJe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt($L,t,n)}}const cJe={name:"htmlText",tokenize:fJe};function fJe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):Od(D)?(e.consume(D),A):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Od(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):Zt(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?L(D):D===45?d(D):f(D)}function p(D){const U="CDATA[";return D===U.charCodeAt(s++)?(e.consume(D),s===U.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):Zt(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?L(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?L(D):Zt(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):Zt(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?L(D):b(D)}function E(D){return Od(D)?(e.consume(D),T):n(D)}function T(D){return D===45||El(D)?(e.consume(D),T):S(D)}function S(D){return Zt(D)?(o=S,B(D)):br(D)?(e.consume(D),S):L(D)}function A(D){return D===45||El(D)?(e.consume(D),A):D===47||D===62||Bu(D)?C(D):n(D)}function C(D){return D===47?(e.consume(D),L):D===58||D===95||Od(D)?(e.consume(D),I):Zt(D)?(o=C,B(D)):br(D)?(e.consume(D),C):L(D)}function I(D){return D===45||D===46||D===58||D===95||El(D)?(e.consume(D),I):N(D)}function N(D){return D===61?(e.consume(D),O):Zt(D)?(o=N,B(D)):br(D)?(e.consume(D),N):C(D)}function O(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):Zt(D)?(o=O,B(D)):br(D)?(e.consume(D),O):(e.consume(D),$)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):Zt(D)?(o=P,B(D)):(e.consume(D),P)}function $(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Bu(D)?C(D):(e.consume(D),$)}function F(D){return D===47||D===62||Bu(D)?C(D):n(D)}function L(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),z}function z(D){return br(D)?ni(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):q(D)}function q(D){return e.enter("htmlTextData"),o(D)}}const aY={name:"labelEnd",tokenize:yJe,resolveTo:gJe,resolveAll:mJe},dJe={tokenize:vJe},hJe={tokenize:bJe},pJe={tokenize:_Je};function mJe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function gJe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=fc(a,e.slice(s+1,s+r+3)),a=fc(a,[["enter",c,t]]),a=fc(a,oY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=fc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=fc(a,e.slice(o+1)),a=fc(a,[["exit",u,t]]),ym(e,s,e.length,a),e}function yJe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Dw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(dJe,c,o?c:f)(d):d===91?e.attempt(hJe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(pJe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function vJe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Bu(f)?Z2(e,s)(f):s(f)}function s(f){return f===41?c(f):cwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Bu(f)?Z2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?dwe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Bu(f)?Z2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function bJe(e,t,n){const r=this;return i;function i(a){return fwe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Dw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function _Je(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const wJe={name:"labelStartImage",tokenize:EJe,resolveAll:aY.resolveAll};function EJe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const xJe={name:"labelStartLink",tokenize:SJe,resolveAll:aY.resolveAll};function SJe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Sj={name:"lineEnding",tokenize:TJe};function TJe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ni(e,t,"linePrefix")}}const qP={name:"thematicBreak",tokenize:AJe};function AJe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ni(e,a,"whitespace")(l):a(l))}}const pu={name:"list",tokenize:kJe,continuation:{tokenize:RJe},exit:PJe},CJe={tokenize:DJe,partial:!0},IJe={tokenize:NJe,partial:!0};function kJe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:jU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(qP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return jU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check($L,r.interrupt?n:c,e.attempt(CJe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function RJe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check($L,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ni(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(IJe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ni(e,e.attempt(pu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function NJe(e,t,n){const r=this;return ni(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function PJe(e){e.exit(this.containerState.type)}function DJe(e,t,n){const r=this;return ni(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Qoe={name:"setextUnderline",tokenize:$Je,resolveTo:OJe};function OJe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function $Je(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ni(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const MJe={tokenize:LJe};function LJe(e){const t=this,n=e.attempt($L,r,e.attempt(this.parser.constructs.flowInitial,i,ni(e,e.attempt(this.parser.constructs.flow,i,e.attempt(zQe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const FJe={resolveAll:pwe()},jJe=hwe("string"),BJe=hwe("text");function hwe(e){return{tokenize:t,resolveAll:pwe(e==="text"?UJe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function pwe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function UJe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function zJe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(E),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=fc(o,N),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=oY(s,l.events,l),l.events)}function d(N,O){return HJe(h(N),O)}function h(N){return VJe(o,N)}function p(){const{line:N,column:O,offset:P,_index:$,_bufferIndex:F}=r;return{line:N,column:O,offset:P,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,I()}function g(){let N;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){Zt(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,I()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function b(N,O){const P=O||{};return P.type=N,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){A(N,O.from)}function T(N,O){O.restore()}function S(N,O){return P;function P($,F,L){let B,z,q,D;return Array.isArray($)?W($):"tokenize"in $?W([$]):U($);function U(ne){return ce;function ce(de){const he=de!==null&&ne[de],ye=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ie)(de)}}function W(ne){return B=ne,z=0,ne.length===0?L:j(ne[z])}function j(ne){return ce;function ce(de){return D=C(),q=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,H,G)(de)}}function H(ne){return N(q,D),F}function G(ne){return D.restore(),++z<B.length?j(B[z]):L}}}function A(N,O){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&ym(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function C(){const N=p(),O=l.previous,P=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:L,from:$};function L(){r=N,l.previous=O,l.currentConstruct=P,l.events.length=$,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function VJe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function HJe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const qJe={42:pu,43:pu,45:pu,48:pu,49:pu,50:pu,51:pu,52:pu,53:pu,54:pu,55:pu,56:pu,57:pu,62:owe},WJe={91:GQe},GJe={[-2]:xj,[-1]:xj,32:xj},YJe={35:ZQe,42:qP,45:[Qoe,qP],60:rJe,61:Qoe,95:qP,96:Koe,126:Koe},KJe={38:uwe,92:awe},XJe={[-5]:Sj,[-4]:Sj,[-3]:Sj,33:wJe,38:uwe,42:BU,60:[xQe,cJe],91:xJe,92:[QQe,awe],93:aY,95:BU,96:MQe},QJe={null:[BU,FJe]},JJe={null:[42,95]},ZJe={null:[]},eZe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:JJe,contentInitial:WJe,disable:ZJe,document:qJe,flow:YJe,flowInitial:GJe,insideSpan:QJe,string:KJe,text:XJe},Symbol.toStringTag,{value:"Module"}));function tZe(e){const n=uQe([eZe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(gQe),document:i(vQe),flow:i(MJe),string:i(jJe),text:i(BJe)};return r;function i(s){return o;function o(a){return zJe(r,s,a)}}}function nZe(e){for(;!lwe(e););return e}const Joe=/[\0\t\n\r]/g;function rZe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Joe.lastIndex=f,l=Joe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const iZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sZe(e){return e.replace(iZe,oZe)}function oZe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return swe(n.slice(s?2:1),s?16:10)}return sY(n)||e}const mwe={}.hasOwnProperty;function aZe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),uZe(n)(nZe(tZe(n).document().write(rZe()(e,t,!0))))}function uZe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(yt),blockQuote:s(ye),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:C,htmlText:s(_e,o),htmlTextData:C,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(me),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(F),codeTextData:I,data:I,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(P),htmlFlowData:I,htmlText:u($),htmlTextData:I,image:u(B),label:q,labelText:z,lineEnding:N,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:H,resourceDestinationString:D,resourceTitleString:U,resource:W,setextHeading:u(A),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};gwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const He={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(pe,Ln,_t)}for(_t=-1;++_t<pe.length;){const Ln=t[pe[_t][0]];mwe.call(Ln,pe[_t][1].type)&&Ln[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||Zoe).call(He,void 0,Ln[0])}for(Ce.position={start:dg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:dg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,He){let ut=Ce-1,_t=-1,Ln=!1,Tr,Fn,cr,pn;for(;++ut<=He;){const Sn=pe[ut];switch(Sn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Sn[0]==="enter"?_t++:_t--,pn=void 0;break}case"lineEndingBlank":{Sn[0]==="enter"&&(Tr&&!pn&&!_t&&!cr&&(cr=ut),pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pn=void 0}if(!_t&&Sn[0]==="enter"&&Sn[1].type==="listItemPrefix"||_t===-1&&Sn[0]==="exit"&&(Sn[1].type==="listUnordered"||Sn[1].type==="listOrdered")){if(Tr){let nr=ut;for(Fn=void 0;nr--;){const rr=pe[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(pe[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Tr._spread=!0),Tr.end=Object.assign({},Fn?pe[Fn][1].start:Sn[1].end),pe.splice(Fn||ut,0,["exit",Tr,Sn[2]]),ut++,He++}if(Sn[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},Sn[1].start),end:void 0};Tr=nr,pe.splice(ut,0,["enter",nr,Sn[2]]),ut++,He++,cr=void 0,pn=!0}}}return pe[Ce][1]._spread=Ln,He}function s(pe,Ce){return He;function He(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,He]),pe.position={start:dg(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ce){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||Zoe).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+J2({start:pe.start,end:pe.end})+"): its not open");He.position.end=dg(pe.end)}function c(){return oQe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=Dw(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const He=this.sliceSerialize(pe).length;Ce.depth=He}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=dt(),ut.position={start:dg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function I(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=dg(pe.end)}function N(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ce.children[Ce.children.length-1];He.position.end=dg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),I.call(this,pe))}function O(){this.data.atHardBreak=!0}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function $(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function L(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function z(pe){const Ce=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=sZe(Ce),He.identifier=Dw(Ce).toLowerCase()}function q(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ce}function D(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function U(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function H(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=Dw(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=swe(Ce,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=sY(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=dg(pe.end)}function de(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ye(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Ot(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function me(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function dg(e){return{line:e.line,column:e.column,offset:e.offset}}function gwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?gwe(e,r):lZe(e,r)}}function lZe(e,t){let n;for(n in t)if(mwe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Zoe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+J2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+J2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+J2({start:t.start,end:t.end})+") is still open")}function cZe(e){const t=this;t.parser=n;function n(r){return aZe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function fZe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function dZe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function hZe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function pZe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mZe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gZe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=qx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function yZe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vZe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ywe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function bZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ywe(e,t);const i={src:qx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function _Ze(e,t){const n={src:qx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function wZe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function EZe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ywe(e,t);const i={href:qx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function xZe(e,t){const n={href:qx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function SZe(e,t,n){const r=e.all(t),i=n?TZe(n):vwe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function TZe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=vwe(n[r])}return t}function vwe(e){const t=e.spread;return t??e.children.length>1}function AZe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function CZe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IZe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function kZe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function RZe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Bh(t.children[1]),u=OL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function NZe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function PZe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const eae=9,tae=32;function DZe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(nae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(nae(t.slice(i),i>0,!1)),s.join("")}function nae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===eae||s===tae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===eae||s===tae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function OZe(e,t){const n={type:"text",value:DZe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function $Ze(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const MZe={blockquote:fZe,break:dZe,code:hZe,delete:pZe,emphasis:mZe,footnoteReference:gZe,heading:yZe,html:vZe,imageReference:bZe,image:_Ze,inlineCode:wZe,linkReference:EZe,link:xZe,listItem:SZe,list:AZe,paragraph:CZe,root:IZe,strong:kZe,table:RZe,tableCell:PZe,tableRow:NZe,text:OZe,thematicBreak:$Ze,toml:uN,yaml:uN,definition:uN,footnoteDefinition:uN};function uN(){}const bwe=-1,ML=0,NO=1,PO=2,uY=3,lY=4,cY=5,fY=6,_we=7,wwe=8,rae=typeof self=="object"?self:globalThis,LZe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case ML:case bwe:return n(o,i);case NO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case PO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case uY:return n(new Date(o),i);case lY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case cY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case fY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case _we:{const{name:a,message:u}=o;return n(new rae[a](u),i)}case wwe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new rae[s](o),i)};return r},iae=e=>LZe(new Map,e)(0),m_="",{toString:FZe}={},{keys:jZe}=Object,aT=e=>{const t=typeof e;if(t!=="object"||!e)return[ML,t];const n=FZe.call(e).slice(8,-1);switch(n){case"Array":return[NO,m_];case"Object":return[PO,m_];case"Date":return[uY,m_];case"RegExp":return[lY,m_];case"Map":return[cY,m_];case"Set":return[fY,m_]}return n.includes("Array")?[NO,n]:n.includes("Error")?[_we,n]:[PO,n]},lN=([e,t])=>e===ML&&(t==="function"||t==="symbol"),BZe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=aT(o);switch(a){case ML:{let c=o;switch(u){case"bigint":a=wwe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([bwe],o)}return i([a,c],o)}case NO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case PO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of jZe(o))(e||!lN(aT(o[d])))&&c.push([s(d),s(o[d])]);return f}case uY:return i([a,o.toISOString()],o);case lY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case cY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(lN(aT(d))||lN(aT(h))))&&c.push([s(d),s(h)]);return f}case fY:{const c=[],f=i([a,c],o);for(const d of o)(e||!lN(aT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},sae=(e,{json:t,lossy:n}={})=>{const r=[];return BZe(!(t||n),!!t,new Map,r)(e),r},_E=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?iae(sae(e,t)):structuredClone(e):(e,t)=>iae(sae(e,t));function UZe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function zZe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function VZe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||UZe,r=e.options.footnoteBackLabel||zZe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=qx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{..._E(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Ewe=function(e){if(e==null)return GZe;if(typeof e=="function")return LL(e);if(typeof e=="object")return Array.isArray(e)?HZe(e):qZe(e);if(typeof e=="string")return WZe(e);throw new Error("Expected function, string, or object as test")};function HZe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ewe(e[n]);return LL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function qZe(e){const t=e;return LL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function WZe(e){return LL(t);function t(n){return n&&n.type===e}}function LL(e){return t;function t(n,r,i){return!!(YZe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function GZe(){return!0}function YZe(e){return e!==null&&typeof e=="object"&&"type"in e}const xwe=[],KZe=!0,oae=!1,XZe="skip";function QZe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Ewe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=xwe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=JZe(n(u,c)),h[0]===oae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==XZe)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===oae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function JZe(e){return Array.isArray(e)?e:typeof e=="number"?[KZe,e]:e==null?xwe:[e]}function dY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),QZe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const UU={}.hasOwnProperty,ZZe={};function eet(e,t){const n=t||ZZe,r=new Map,i=new Map,s=new Map,o={...MZe,...n.handlers},a={all:l,applyData:net,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:tet,wrap:iet};return dY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(UU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=_E(g);return y.children=a.all(c),y}return _E(c)}return(a.options.unknownHandler||ret)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=aae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=aae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function tet(e,t){e.position&&(t.position=MXe(e))}function net(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,_E(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ret(e,t){const n=t.data||{},r="value"in t&&!(UU.call(n,"hProperties")||UU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function iet(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function aae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function uae(e,t){const n=eet(e,t),r=n.one(e,void 0),i=VZe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function set(e,t){return e&&"run"in e?async function(n,r){const i=uae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return uae(n,{file:r,...t||e})}}function lae(e){if(e)throw e}var WP=Object.prototype.hasOwnProperty,Swe=Object.prototype.toString,cae=Object.defineProperty,fae=Object.getOwnPropertyDescriptor,dae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Swe.call(t)==="[object Array]"},hae=function(t){if(!t||Swe.call(t)!=="[object Object]")return!1;var n=WP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&WP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||WP.call(t,i)},pae=function(t,n){cae&&n.name==="__proto__"?cae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},mae=function(t,n){if(n==="__proto__")if(WP.call(t,n)){if(fae)return fae(t,n).value}else return;return t[n]},oet=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=mae(a,n),i=mae(t,n),a!==i&&(c&&i&&(hae(i)||(s=dae(i)))?(s?(s=!1,o=r&&dae(r)?r:[]):o=r&&hae(r)?r:{},pae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&pae(a,{name:n,newValue:i}));return a};const Tj=Wl(oet);function zU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function aet(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?uet(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function uet(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Sd={basename:cet,dirname:fet,extname:det,join:het,sep:"/"};function cet(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');JI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function fet(e){if(JI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function det(e){JI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function het(...e){let t=-1,n;for(;++t<e.length;)JI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":pet(n)}function pet(e){JI(e);const t=e.codePointAt(0)===47;let n=met(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function met(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function JI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const get={cwd:yet};function yet(){return"/"}function VU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function vet(e){if(typeof e=="string")e=new URL(e);else if(!VU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return bet(e)}function bet(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Aj=["history","path","basename","stem","extname","dirname"];class Twe{constructor(t){let n;t?VU(t)?n={path:t}:typeof t=="string"||_et(t)?n={value:t}:n=t:n={},this.cwd=get.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Aj.length;){const s=Aj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Aj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Sd.basename(this.path):void 0}set basename(t){Ij(t,"basename"),Cj(t,"basename"),this.path=Sd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Sd.dirname(this.path):void 0}set dirname(t){gae(this.basename,"dirname"),this.path=Sd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Sd.extname(this.path):void 0}set extname(t){if(Cj(t,"extname"),gae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Sd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){VU(t)&&(t=vet(t)),Ij(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Sd.basename(this.path,this.extname):void 0}set stem(t){Ij(t,"stem"),Cj(t,"stem"),this.path=Sd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Sa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Cj(e,t){if(e&&e.includes(Sd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Sd.sep+"`")}function Ij(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function _et(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const wet=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Eet={}.hasOwnProperty;class hY extends wet{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=aet()}copy(){const t=new hY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Tj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Nj("data",this.frozen),this.namespace[t]=n,this):Eet.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Nj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=cN(t),r=this.parser||this.Parser;return kj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),kj("process",this.parser||this.Parser),Rj("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=cN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Aet(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),kj("processSync",this.parser||this.Parser),Rj("processSync",this.compiler||this.Compiler),this.process(t,i),vae("processSync","process",n),r;function i(s,o){n=!0,lae(s),r=o}}run(t,n,r){yae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=cN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),vae("runSync","run",r),i;function s(o,a){lae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=cN(n),i=this.compiler||this.Compiler;return Rj("stringify",i),yae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Nj("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Tj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];zU(m)&&zU(h)&&(h=Tj(!0,m,h)),r[d]=[l,h,...p]}}}}const xet=new hY().freeze();function kj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Rj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Nj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function yae(e){if(!zU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function vae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function cN(e){return Tet(e)?e:new Twe(e)}function Tet(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Aet(e){return typeof e=="string"||Cet(e)}function Cet(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Iet="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",bae=[],_ae={allowDangerousHtml:!0},ket=/^(https?|ircs?|mailto|xmpp)$/i,Ret=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Net(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||bae,u=e.remarkPlugins||bae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,..._ae}:_ae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Pet,h=xet().use(cZe).use(u).use(set,l).use(a),p=new Twe;typeof r=="string"&&(p.value=r);for(const v of Ret)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Iet+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),dY(g,y),zXe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in Ej)if(Object.hasOwn(Ej,E)&&Object.hasOwn(v.properties,E)){const T=v.properties[E],S=Ej[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(T||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function Pet(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||ket.test(e.slice(0,t))?e:""}const wae=/[#.]/g;function Det(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){wae.lastIndex=i;const a=wae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Oet=new Set(["button","menu","reset","submit"]),HU={}.hasOwnProperty;function Awe(e,t,n){const r=n&&Fet(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Det(s,t),l.tagName=l.tagName.toLowerCase(),r&&HU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),$et(o,l.tagName)){let c;for(c in o)HU.call(o,c)&&Met(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)qU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function $et(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Oet.has(e.type.toLowerCase()):!("value"in e)}function Met(e,t,n,r){const i=DL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Ooe(r):i.commaSeparated?o=koe(r):i.commaOrSpaceSeparated?o=Ooe(koe(r).join(" ")):o=Eae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Let(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Eae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function qU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)qU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?qU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Eae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||pC(n)===pC(t)))return!0}return n}function Let(e){const t=[];let n;for(n in e)HU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Fet(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const jet=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Bet=Awe(QI,"div"),Uet=Awe(ky,"g",jet),Pj=/\r?\n|\r/g;function zet(e){const t=String(e),n=[];for(Pj.lastIndex=0;Pj.test(t);)n.push(Pj.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const X1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Cwe={}.hasOwnProperty,Vet=Object.prototype;function Het(e,t){const n=t||{};return pY({file:n.file||void 0,location:!1,schema:n.space==="svg"?ky:QI,verbose:n.verbose||!1},e)}function pY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},GP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Iwe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=zet(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},GP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},GP(e,r,n),n}default:return n=qet(e,t),n}}function Iwe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=pY(e,t[n]);r.push(i)}return r}function qet(e,t){const n=e.schema;e.schema=t.namespaceURI===X1.svg?ky:QI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Cwe.call(Vet,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Uet:Bet)(t.tagName,i,Iwe(e,t.childNodes));if(GP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&uw(u.startTag),c=u&&u.endTag&&uw(u.endTag),f=pY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function GP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Wet(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Wet(e,t,n){const r=uw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)Cwe.call(n.attrs,o)&&(s[DL(e.schema,o).property]=uw(n.attrs[o]));n.startTag;const a=uw(n.startTag),u=n.endTag?uw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function uw(e){const t=xae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=xae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function xae(e){return e.line&&e.column?e:void 0}const Sae={}.hasOwnProperty;function kwe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Sae.call(i,e)){const u=String(i[e]);o=Sae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Get={},Yet={}.hasOwnProperty,Rwe=kwe("type",{handlers:{root:Xet,element:ttt,text:Zet,comment:ett,doctype:Jet}});function Ket(e,t){const r=(t||Get).space;return Rwe(e,r==="svg"?ky:QI)}function Xet(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=mY(e.children,n,t),Wx(e,n),n}function Qet(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=mY(e.children,n,t),Wx(e,n),n}function Jet(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Wx(e,t),t}function Zet(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Wx(e,t),t}function ett(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Wx(e,t),t}function ttt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=ky);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Yet.call(e.properties,s)){const u=ntt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:X1[o],childNodes:[],parentNode:null};return a.childNodes=mY(e.children,a,r),Wx(e,a),e.tagName==="template"&&e.content&&(a.content=Qet(e.content,r)),a}function ntt(e,t,n){const r=DL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?z_e(n):Q_e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=X1[r.space]}return i}function mY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Rwe(e[r],n);s.parentNode=t,i.push(s)}return i}function Wx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const rtt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],itt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const du={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Nwe(e){return e>=55296&&e<=57343}function stt(e){return e>=56320&&e<=57343}function ott(e,t){return(e-55296)*1024+9216+t}function Pwe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Dwe(e){return e>=64976&&e<=65007||itt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const att=65536;class utt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=att,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(stt(n))return this.pos++,this._addGap(),ott(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Nwe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Pwe(t)?this._err(Ne.controlCharacterInInputStream):Dwe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function Owe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const vg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),ltt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Dj;const ctt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ftt=(Dj=String.fromCodePoint)!==null&&Dj!==void 0?Dj:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function dtt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=ctt.get(e))!==null&&t!==void 0?t:e}var eo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(eo||(eo={}));const htt=32;var Yd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Yd||(Yd={}));function WU(e){return e>=eo.ZERO&&e<=eo.NINE}function ptt(e){return e>=eo.UPPER_A&&e<=eo.UPPER_F||e>=eo.LOWER_A&&e<=eo.LOWER_F}function mtt(e){return e>=eo.UPPER_A&&e<=eo.UPPER_Z||e>=eo.LOWER_A&&e<=eo.LOWER_Z||WU(e)}function gtt(e){return e===eo.EQUALS||mtt(e)}var Gs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Gs||(Gs={}));var O1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(O1||(O1={}));class ytt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Gs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=O1.Strict}startEntity(t){this.decodeMode=t,this.state=Gs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Gs.EntityStart:return t.charCodeAt(n)===eo.NUM?(this.state=Gs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Gs.NamedEntity,this.stateNamedEntity(t,n));case Gs.NumericStart:return this.stateNumericStart(t,n);case Gs.NumericDecimal:return this.stateNumericDecimal(t,n);case Gs.NumericHex:return this.stateNumericHex(t,n);case Gs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|htt)===eo.LOWER_X?(this.state=Gs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Gs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(WU(i)||ptt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(WU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===eo.SEMI)this.consumed+=1;else if(this.decodeMode===O1.Strict)return 0;return this.emitCodePoint(dtt(this.result),this.consumed),this.errors&&(t!==eo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Yd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Mwe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===O1.Attribute&&(s===0||gtt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Yd.VALUE_LENGTH)>>14,s!==0){if(o===eo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==O1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Yd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Yd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Gs.NamedEntity:return this.result!==0&&(this.decodeMode!==O1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Gs.NumericDecimal:return this.emitNumericEntity(0,2);case Gs.NumericHex:return this.emitNumericEntity(0,3);case Gs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Gs.EntityStart:return 0}}}function $we(e){let t="";const n=new ytt(e,r=>t+=ftt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Mwe(e,t,n,r){const i=(t&Yd.BRANCH_LENGTH)>>7,s=t&Yd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}$we(vg);$we(ltt);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var h0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(h0=h0||(h0={}));var pl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(pl=pl||(pl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(k=k||(k={}));const vtt=new Map([[Ee.A,k.A],[Ee.ADDRESS,k.ADDRESS],[Ee.ANNOTATION_XML,k.ANNOTATION_XML],[Ee.APPLET,k.APPLET],[Ee.AREA,k.AREA],[Ee.ARTICLE,k.ARTICLE],[Ee.ASIDE,k.ASIDE],[Ee.B,k.B],[Ee.BASE,k.BASE],[Ee.BASEFONT,k.BASEFONT],[Ee.BGSOUND,k.BGSOUND],[Ee.BIG,k.BIG],[Ee.BLOCKQUOTE,k.BLOCKQUOTE],[Ee.BODY,k.BODY],[Ee.BR,k.BR],[Ee.BUTTON,k.BUTTON],[Ee.CAPTION,k.CAPTION],[Ee.CENTER,k.CENTER],[Ee.CODE,k.CODE],[Ee.COL,k.COL],[Ee.COLGROUP,k.COLGROUP],[Ee.DD,k.DD],[Ee.DESC,k.DESC],[Ee.DETAILS,k.DETAILS],[Ee.DIALOG,k.DIALOG],[Ee.DIR,k.DIR],[Ee.DIV,k.DIV],[Ee.DL,k.DL],[Ee.DT,k.DT],[Ee.EM,k.EM],[Ee.EMBED,k.EMBED],[Ee.FIELDSET,k.FIELDSET],[Ee.FIGCAPTION,k.FIGCAPTION],[Ee.FIGURE,k.FIGURE],[Ee.FONT,k.FONT],[Ee.FOOTER,k.FOOTER],[Ee.FOREIGN_OBJECT,k.FOREIGN_OBJECT],[Ee.FORM,k.FORM],[Ee.FRAME,k.FRAME],[Ee.FRAMESET,k.FRAMESET],[Ee.H1,k.H1],[Ee.H2,k.H2],[Ee.H3,k.H3],[Ee.H4,k.H4],[Ee.H5,k.H5],[Ee.H6,k.H6],[Ee.HEAD,k.HEAD],[Ee.HEADER,k.HEADER],[Ee.HGROUP,k.HGROUP],[Ee.HR,k.HR],[Ee.HTML,k.HTML],[Ee.I,k.I],[Ee.IMG,k.IMG],[Ee.IMAGE,k.IMAGE],[Ee.INPUT,k.INPUT],[Ee.IFRAME,k.IFRAME],[Ee.KEYGEN,k.KEYGEN],[Ee.LABEL,k.LABEL],[Ee.LI,k.LI],[Ee.LINK,k.LINK],[Ee.LISTING,k.LISTING],[Ee.MAIN,k.MAIN],[Ee.MALIGNMARK,k.MALIGNMARK],[Ee.MARQUEE,k.MARQUEE],[Ee.MATH,k.MATH],[Ee.MENU,k.MENU],[Ee.META,k.META],[Ee.MGLYPH,k.MGLYPH],[Ee.MI,k.MI],[Ee.MO,k.MO],[Ee.MN,k.MN],[Ee.MS,k.MS],[Ee.MTEXT,k.MTEXT],[Ee.NAV,k.NAV],[Ee.NOBR,k.NOBR],[Ee.NOFRAMES,k.NOFRAMES],[Ee.NOEMBED,k.NOEMBED],[Ee.NOSCRIPT,k.NOSCRIPT],[Ee.OBJECT,k.OBJECT],[Ee.OL,k.OL],[Ee.OPTGROUP,k.OPTGROUP],[Ee.OPTION,k.OPTION],[Ee.P,k.P],[Ee.PARAM,k.PARAM],[Ee.PLAINTEXT,k.PLAINTEXT],[Ee.PRE,k.PRE],[Ee.RB,k.RB],[Ee.RP,k.RP],[Ee.RT,k.RT],[Ee.RTC,k.RTC],[Ee.RUBY,k.RUBY],[Ee.S,k.S],[Ee.SCRIPT,k.SCRIPT],[Ee.SECTION,k.SECTION],[Ee.SELECT,k.SELECT],[Ee.SOURCE,k.SOURCE],[Ee.SMALL,k.SMALL],[Ee.SPAN,k.SPAN],[Ee.STRIKE,k.STRIKE],[Ee.STRONG,k.STRONG],[Ee.STYLE,k.STYLE],[Ee.SUB,k.SUB],[Ee.SUMMARY,k.SUMMARY],[Ee.SUP,k.SUP],[Ee.TABLE,k.TABLE],[Ee.TBODY,k.TBODY],[Ee.TEMPLATE,k.TEMPLATE],[Ee.TEXTAREA,k.TEXTAREA],[Ee.TFOOT,k.TFOOT],[Ee.TD,k.TD],[Ee.TH,k.TH],[Ee.THEAD,k.THEAD],[Ee.TITLE,k.TITLE],[Ee.TR,k.TR],[Ee.TRACK,k.TRACK],[Ee.TT,k.TT],[Ee.U,k.U],[Ee.UL,k.UL],[Ee.SVG,k.SVG],[Ee.VAR,k.VAR],[Ee.WBR,k.WBR],[Ee.XMP,k.XMP]]);function Gx(e){var t;return(t=vtt.get(e))!==null&&t!==void 0?t:k.UNKNOWN}const Qe=k,btt={[Fe.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Fe.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Fe.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function Lwe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const _tt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const is={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function eA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function e2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function wtt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function bg(e){return wtt(e)||e2(e)}function GU(e){return bg(e)||eA(e)}function Fwe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function jwe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function Ett(e){return eA(e)||Fwe(e)||jwe(e)}function fN(e){return e+32}function Bwe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function xtt(e){return e===X.EQUALS_SIGN||GU(e)}function Tae(e){return Bwe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Stt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new utt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Owe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Gx(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Bwe(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=vg[0];s>=0&&(s=Mwe(vg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=vg[s];const a=o&Yd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&xtt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[vg[s]&~Yd.VALUE_LENGTH]:u===1?[vg[++s]]:[vg[++s],vg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(bg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(bg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(e2(t)?fN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){bg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){bg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){bg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:bg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){bg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(du.SCRIPT,!1)&&Tae(this.preprocessor.peek(du.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<du.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(du.SCRIPT,!1)&&Tae(this.preprocessor.peek(du.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<du.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=gi;break}default:this.currentAttr.name+=String.fromCodePoint(e2(t)?fN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=gi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(du.DASH_DASH,!0)?(this._createCommentToken(du.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(du.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(du.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(du.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(du.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=gi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(e2(t))this._createDoctypeToken(String.fromCharCode(fN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(gi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=gi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(e2(t)?fN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(du.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(du.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:GU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){GU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:eA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Ett(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Fwe(t)?this.charRefCode=this.charRefCode*16+t-55:jwe(t)?this.charRefCode=this.charRefCode*16+t-87:eA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){eA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Nwe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Dwe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(Pwe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=_tt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Uwe=new Set([k.DD,k.DT,k.LI,k.OPTGROUP,k.OPTION,k.P,k.RB,k.RP,k.RT,k.RTC]),Aae=new Set([...Uwe,k.CAPTION,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]),dN=new Map([[k.APPLET,Fe.HTML],[k.CAPTION,Fe.HTML],[k.HTML,Fe.HTML],[k.MARQUEE,Fe.HTML],[k.OBJECT,Fe.HTML],[k.TABLE,Fe.HTML],[k.TD,Fe.HTML],[k.TEMPLATE,Fe.HTML],[k.TH,Fe.HTML],[k.ANNOTATION_XML,Fe.MATHML],[k.MI,Fe.MATHML],[k.MN,Fe.MATHML],[k.MO,Fe.MATHML],[k.MS,Fe.MATHML],[k.MTEXT,Fe.MATHML],[k.DESC,Fe.SVG],[k.FOREIGN_OBJECT,Fe.SVG],[k.TITLE,Fe.SVG]]),Ttt=[k.H1,k.H2,k.H3,k.H4,k.H5,k.H6],Att=[k.TR,k.TEMPLATE,k.HTML],Ctt=[k.TBODY,k.TFOOT,k.THEAD,k.TEMPLATE,k.HTML],Itt=[k.TABLE,k.TEMPLATE,k.HTML],ktt=[k.TD,k.TH];class Rtt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=k.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===k.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ttt,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(ktt,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Itt,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Ctt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(Att,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===k.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===k.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(dN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(Lwe(n)&&r===Fe.HTML)return!0;if(dN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===k.UL||r===k.OL)&&i===Fe.HTML||dN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===k.BUTTON&&i===Fe.HTML||dN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===k.TABLE||r===k.TEMPLATE||r===k.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===k.TBODY||n===k.THEAD||n===k.TFOOT)return!0;if(n===k.TABLE||n===k.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==k.OPTION&&r!==k.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Uwe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Aae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Aae.has(this.currentTagId);)this.pop()}}const Oj=3;var mf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(mf=mf||(mf={}));const Cae={type:mf.Marker};class Ntt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===mf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Oj)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Oj)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Oj&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Cae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:mf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:mf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Cae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===mf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===mf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===mf.Element&&n.element===t)}}function Iae(e){return{nodeName:"#text",value:e,parentNode:null}}const F_={createDocument(){return{nodeName:"#document",mode:pl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};F_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(F_.isTextNode(n)){n.value+=t;return}}F_.appendChild(e,Iae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&F_.isTextNode(r)?r.value+=t:F_.insertBefore(e,Iae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},zwe="html",Ptt="about:legacy-compat",Dtt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Vwe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Ott=[...Vwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],$tt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Hwe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Mtt=[...Hwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function kae(e,t){return t.some(n=>e.startsWith(n))}function Ltt(e){return e.name===zwe&&e.publicId===null&&(e.systemId===null||e.systemId===Ptt)}function Ftt(e){if(e.name!==zwe)return pl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Dtt)return pl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),$tt.has(n))return pl.QUIRKS;let r=t===null?Ott:Vwe;if(kae(n,r))return pl.QUIRKS;if(r=t===null?Hwe:Mtt,kae(n,r))return pl.LIMITED_QUIRKS}return pl.NO_QUIRKS}const Rae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},jtt="definitionurl",Btt="definitionURL",Utt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),ztt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),Vtt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Htt=new Set([k.B,k.BIG,k.BLOCKQUOTE,k.BODY,k.BR,k.CENTER,k.CODE,k.DD,k.DIV,k.DL,k.DT,k.EM,k.EMBED,k.H1,k.H2,k.H3,k.H4,k.H5,k.H6,k.HEAD,k.HR,k.I,k.IMG,k.LI,k.LISTING,k.MENU,k.META,k.NOBR,k.OL,k.P,k.PRE,k.RUBY,k.S,k.SMALL,k.SPAN,k.STRONG,k.STRIKE,k.SUB,k.SUP,k.TABLE,k.TT,k.U,k.UL,k.VAR]);function qtt(e){const t=e.tagID;return t===k.FONT&&e.attrs.some(({name:r})=>r===h0.COLOR||r===h0.SIZE||r===h0.FACE)||Htt.has(t)}function qwe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===jtt){e.attrs[t].name=Btt;break}}function Wwe(e){for(let t=0;t<e.attrs.length;t++){const n=Utt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function gY(e){for(let t=0;t<e.attrs.length;t++){const n=ztt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Wtt(e){const t=Vtt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Gx(e.tagName))}function Gtt(e,t){return t===Fe.MATHML&&(e===k.MI||e===k.MO||e===k.MN||e===k.MS||e===k.MTEXT)}function Ytt(e,t,n){if(t===Fe.MATHML&&e===k.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===h0.ENCODING){const i=n[r].value.toLowerCase();return i===Rae.TEXT_HTML||i===Rae.APPLICATION_XML}}return t===Fe.SVG&&(e===k.FOREIGN_OBJECT||e===k.DESC||e===k.TITLE)}function Ktt(e,t,n,r){return(!r||r===Fe.HTML)&&Ytt(e,t,n)||(!r||r===Fe.MATHML)&&Gtt(e,t)}const Xtt="hidden",Qtt=8,Jtt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Ztt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Gwe=new Set([k.TABLE,k.TBODY,k.TFOOT,k.THEAD,k.TR]),Nae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:F_,onParseError:null};let Pae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Nae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Stt(this.options,this),this.activeFormattingElements=new Ntt(this.treeAdapter),this.fragmentContextID=r?Gx(this.treeAdapter.getTagName(r)):k.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Rtt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Nae,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===k.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Ztt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=is.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case k.TITLE:case k.TEXTAREA:{this.tokenizer.state=is.RCDATA;break}case k.STYLE:case k.XMP:case k.IFRAME:case k.NOEMBED:case k.NOFRAMES:case k.NOSCRIPT:{this.tokenizer.state=is.RAWTEXT;break}case k.SCRIPT:{this.tokenizer.state=is.SCRIPT_DATA;break}case k.PLAINTEXT:{this.tokenizer.state=is.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,k.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===k.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===k.MGLYPH||t.tagID===k.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Ktt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===mf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(k.P),this.openElements.popUntilTagNamePopped(k.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case k.TR:{this.insertionMode=ie.IN_ROW;return}case k.TBODY:case k.THEAD:case k.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case k.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case k.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case k.TABLE:{this.insertionMode=ie.IN_TABLE;return}case k.BODY:{this.insertionMode=ie.IN_BODY;return}case k.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case k.SELECT:{this._resetInsertionModeForSelect(t);return}case k.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case k.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case k.TD:case k.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case k.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===k.TEMPLATE)break;if(r===k.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return Gwe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case k.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case k.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return btt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){krt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{uT(this,t);break}case ie.BEFORE_HTML:{tA(this,t);break}case ie.BEFORE_HEAD:{nA(this,t);break}case ie.IN_HEAD:{rA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{iA(this,t);break}case ie.AFTER_HEAD:{sA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{Kwe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{$j(this,t);break}case ie.IN_TABLE_TEXT:{tEe(this,t);break}case ie.IN_COLUMN_GROUP:{DO(this,t);break}case ie.AFTER_BODY:{OO(this,t);break}case ie.AFTER_AFTER_BODY:{YP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Irt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{uT(this,t);break}case ie.BEFORE_HTML:{tA(this,t);break}case ie.BEFORE_HEAD:{nA(this,t);break}case ie.IN_HEAD:{rA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{iA(this,t);break}case ie.AFTER_HEAD:{sA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{$j(this,t);break}case ie.IN_COLUMN_GROUP:{DO(this,t);break}case ie.AFTER_BODY:{OO(this,t);break}case ie.AFTER_AFTER_BODY:{YP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){YU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{YU(this,t);break}case ie.IN_TABLE_TEXT:{lT(this,t);break}case ie.AFTER_BODY:{ont(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{ant(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{unt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{lT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Rrt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{uT(this,t);break}case ie.BEFORE_HTML:{lnt(this,t);break}case ie.BEFORE_HEAD:{fnt(this,t);break}case ie.IN_HEAD:{Jf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{pnt(this,t);break}case ie.AFTER_HEAD:{gnt(this,t);break}case ie.IN_BODY:{Ta(this,t);break}case ie.IN_TABLE:{wE(this,t);break}case ie.IN_TABLE_TEXT:{lT(this,t);break}case ie.IN_CAPTION:{drt(this,t);break}case ie.IN_COLUMN_GROUP:{bY(this,t);break}case ie.IN_TABLE_BODY:{BL(this,t);break}case ie.IN_ROW:{UL(this,t);break}case ie.IN_CELL:{mrt(this,t);break}case ie.IN_SELECT:{iEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{yrt(this,t);break}case ie.IN_TEMPLATE:{brt(this,t);break}case ie.AFTER_BODY:{wrt(this,t);break}case ie.IN_FRAMESET:{Ert(this,t);break}case ie.AFTER_FRAMESET:{Srt(this,t);break}case ie.AFTER_AFTER_BODY:{Art(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Crt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Nrt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{uT(this,t);break}case ie.BEFORE_HTML:{cnt(this,t);break}case ie.BEFORE_HEAD:{dnt(this,t);break}case ie.IN_HEAD:{hnt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{mnt(this,t);break}case ie.AFTER_HEAD:{ynt(this,t);break}case ie.IN_BODY:{jL(this,t);break}case ie.TEXT:{nrt(this,t);break}case ie.IN_TABLE:{gC(this,t);break}case ie.IN_TABLE_TEXT:{lT(this,t);break}case ie.IN_CAPTION:{hrt(this,t);break}case ie.IN_COLUMN_GROUP:{prt(this,t);break}case ie.IN_TABLE_BODY:{KU(this,t);break}case ie.IN_ROW:{rEe(this,t);break}case ie.IN_CELL:{grt(this,t);break}case ie.IN_SELECT:{sEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{vrt(this,t);break}case ie.IN_TEMPLATE:{_rt(this,t);break}case ie.AFTER_BODY:{aEe(this,t);break}case ie.IN_FRAMESET:{xrt(this,t);break}case ie.AFTER_FRAMESET:{Trt(this,t);break}case ie.AFTER_AFTER_BODY:{YP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{uT(this,t);break}case ie.BEFORE_HTML:{tA(this,t);break}case ie.BEFORE_HEAD:{nA(this,t);break}case ie.IN_HEAD:{rA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{iA(this,t);break}case ie.AFTER_HEAD:{sA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{Zwe(this,t);break}case ie.TEXT:{rrt(this,t);break}case ie.IN_TABLE_TEXT:{lT(this,t);break}case ie.IN_TEMPLATE:{oEe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{vY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Ywe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{$j(this,t);break}case ie.IN_TABLE_TEXT:{eEe(this,t);break}}}};function ent(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Jwe(e,t),n}function tnt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function nnt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Jtt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=rnt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function rnt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function int(e,t,n){const r=e.treeAdapter.getTagName(t),i=Gx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===k.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function snt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function yY(e,t){for(let n=0;n<Qtt;n++){const r=ent(e,t);if(!r)break;const i=tnt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=nnt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&int(e,o,s),snt(e,i,r)}}function YU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ont(e,t){e._appendCommentNode(t,e.openElements.items[0])}function ant(e,t){e._appendCommentNode(t,e.document)}function vY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function unt(e,t){e._setDocumentType(t);const n=t.forceQuirks?pl.QUIRKS:Ftt(t);Ltt(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function uT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,pl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function lnt(e,t){t.tagID===k.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):tA(e,t)}function cnt(e,t){const n=t.tagID;(n===k.HTML||n===k.HEAD||n===k.BODY||n===k.BR)&&tA(e,t)}function tA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function fnt(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:nA(e,t)}}function dnt(e,t){const n=t.tagID;n===k.HEAD||n===k.BODY||n===k.HTML||n===k.BR?nA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function nA(e,t){e._insertFakeElement(Ee.HEAD,k.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Jf(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case k.TITLE:{e._switchToTextParsing(t,is.RCDATA);break}case k.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,is.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case k.NOFRAMES:case k.STYLE:{e._switchToTextParsing(t,is.RAWTEXT);break}case k.SCRIPT:{e._switchToTextParsing(t,is.SCRIPT_DATA);break}case k.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:rA(e,t)}}function hnt(e,t){switch(t.tagID){case k.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case k.BODY:case k.BR:case k.HTML:{rA(e,t);break}case k.TEMPLATE:{Nb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Nb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==k.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function rA(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function pnt(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.BASEFONT:case k.BGSOUND:case k.HEAD:case k.LINK:case k.META:case k.NOFRAMES:case k.STYLE:{Jf(e,t);break}case k.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:iA(e,t)}}function mnt(e,t){switch(t.tagID){case k.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case k.BR:{iA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function iA(e,t){const n=t.type===Cn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function gnt(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case k.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,k.HEAD),Jf(e,t),e.openElements.remove(e.headElement);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:sA(e,t)}}function ynt(e,t){switch(t.tagID){case k.BODY:case k.HTML:case k.BR:{sA(e,t);break}case k.TEMPLATE:{Nb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function sA(e,t){e._insertFakeElement(Ee.BODY,k.BODY),e.insertionMode=ie.IN_BODY,FL(e,t)}function FL(e,t){switch(t.type){case Cn.CHARACTER:{Kwe(e,t);break}case Cn.WHITESPACE_CHARACTER:{Ywe(e,t);break}case Cn.COMMENT:{YU(e,t);break}case Cn.START_TAG:{Ta(e,t);break}case Cn.END_TAG:{jL(e,t);break}case Cn.EOF:{Zwe(e,t);break}}}function Ywe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Kwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function vnt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function bnt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function _nt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function wnt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Ent(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),Lwe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function xnt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Snt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function Tnt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===k.LI&&i===k.LI||(n===k.DD||n===k.DT)&&(i===k.DD||i===k.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==k.ADDRESS&&i!==k.DIV&&i!==k.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Ant(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=is.PLAINTEXT}function Cnt(e,t){e.openElements.hasInScope(k.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function Int(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(yY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function knt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Rnt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(k.NOBR)&&(yY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Nnt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Pnt(e,t){e.treeAdapter.getDocumentMode(e.document)!==pl.QUIRKS&&e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function Xwe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Qwe(e){const t=Owe(e,h0.TYPE);return t!=null&&t.toLowerCase()===Xtt}function Dnt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),Qwe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Ont(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function $nt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Mnt(e,t){t.tagName=Ee.IMG,t.tagID=k.IMG,Xwe(e,t)}function Lnt(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=is.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Fnt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function jnt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function Dae(e,t){e._switchToTextParsing(t,is.RAWTEXT)}function Bnt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Unt(e,t){e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function znt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function Vnt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(k.RTC),e._insertElement(t,Fe.HTML)}function Hnt(e,t){e._reconstructActiveFormattingElements(),qwe(t),gY(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function qnt(e,t){e._reconstructActiveFormattingElements(),Wwe(t),gY(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function Oae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Ta(e,t){switch(t.tagID){case k.I:case k.S:case k.B:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.SMALL:case k.STRIKE:case k.STRONG:{knt(e,t);break}case k.A:{Int(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Ent(e,t);break}case k.P:case k.DL:case k.OL:case k.UL:case k.DIV:case k.DIR:case k.NAV:case k.MAIN:case k.MENU:case k.ASIDE:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.DETAILS:case k.ADDRESS:case k.ARTICLE:case k.SECTION:case k.SUMMARY:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{wnt(e,t);break}case k.LI:case k.DD:case k.DT:{Tnt(e,t);break}case k.BR:case k.IMG:case k.WBR:case k.AREA:case k.EMBED:case k.KEYGEN:{Xwe(e,t);break}case k.HR:{$nt(e,t);break}case k.RB:case k.RTC:{znt(e,t);break}case k.RT:case k.RP:{Vnt(e,t);break}case k.PRE:case k.LISTING:{xnt(e,t);break}case k.XMP:{Fnt(e,t);break}case k.SVG:{qnt(e,t);break}case k.HTML:{vnt(e,t);break}case k.BASE:case k.LINK:case k.META:case k.STYLE:case k.TITLE:case k.SCRIPT:case k.BGSOUND:case k.BASEFONT:case k.TEMPLATE:{Jf(e,t);break}case k.BODY:{bnt(e,t);break}case k.FORM:{Snt(e,t);break}case k.NOBR:{Rnt(e,t);break}case k.MATH:{Hnt(e,t);break}case k.TABLE:{Pnt(e,t);break}case k.INPUT:{Dnt(e,t);break}case k.PARAM:case k.TRACK:case k.SOURCE:{Ont(e,t);break}case k.IMAGE:{Mnt(e,t);break}case k.BUTTON:{Cnt(e,t);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{Nnt(e,t);break}case k.IFRAME:{jnt(e,t);break}case k.SELECT:{Bnt(e,t);break}case k.OPTION:case k.OPTGROUP:{Unt(e,t);break}case k.NOEMBED:{Dae(e,t);break}case k.FRAMESET:{_nt(e,t);break}case k.TEXTAREA:{Lnt(e,t);break}case k.NOSCRIPT:{e.options.scriptingEnabled?Dae(e,t):Oae(e,t);break}case k.PLAINTEXT:{Ant(e,t);break}case k.COL:case k.TH:case k.TD:case k.TR:case k.HEAD:case k.FRAME:case k.TBODY:case k.TFOOT:case k.THEAD:case k.CAPTION:case k.COLGROUP:break;default:Oae(e,t)}}function Wnt(e,t){if(e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Gnt(e,t){e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,aEe(e,t))}function Ynt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Knt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(k.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(k.FORM):n&&e.openElements.remove(n))}function Xnt(e){e.openElements.hasInButtonScope(k.P)||e._insertFakeElement(Ee.P,k.P),e._closePElement()}function Qnt(e){e.openElements.hasInListItemScope(k.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(k.LI),e.openElements.popUntilTagNamePopped(k.LI))}function Jnt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Znt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ert(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function trt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,k.BR),e.openElements.pop(),e.framesetOk=!1}function Jwe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==k.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function jL(e,t){switch(t.tagID){case k.A:case k.B:case k.I:case k.S:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.NOBR:case k.SMALL:case k.STRIKE:case k.STRONG:{yY(e,t);break}case k.P:{Xnt(e);break}case k.DL:case k.UL:case k.OL:case k.DIR:case k.DIV:case k.NAV:case k.PRE:case k.MAIN:case k.MENU:case k.ASIDE:case k.BUTTON:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.ADDRESS:case k.ARTICLE:case k.DETAILS:case k.SECTION:case k.SUMMARY:case k.LISTING:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Ynt(e,t);break}case k.LI:{Qnt(e);break}case k.DD:case k.DT:{Jnt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Znt(e);break}case k.BR:{trt(e);break}case k.BODY:{Wnt(e,t);break}case k.HTML:{Gnt(e,t);break}case k.FORM:{Knt(e);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{ert(e,t);break}case k.TEMPLATE:{Nb(e,t);break}default:Jwe(e,t)}}function Zwe(e,t){e.tmplInsertionModeStack.length>0?oEe(e,t):vY(e,t)}function nrt(e,t){var n;t.tagID===k.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function rrt(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function $j(e,t){if(Gwe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{tEe(e,t);break}case Cn.WHITESPACE_CHARACTER:{eEe(e,t);break}}else ZI(e,t)}function irt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function srt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function ort(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,k.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,bY(e,t)}function art(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function urt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,k.TBODY),e.insertionMode=ie.IN_TABLE_BODY,BL(e,t)}function lrt(e,t){e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function crt(e,t){Qwe(t)?e._appendElement(t,Fe.HTML):ZI(e,t),t.ackSelfClosing=!0}function frt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function wE(e,t){switch(t.tagID){case k.TD:case k.TH:case k.TR:{urt(e,t);break}case k.STYLE:case k.SCRIPT:case k.TEMPLATE:{Jf(e,t);break}case k.COL:{ort(e,t);break}case k.FORM:{frt(e,t);break}case k.TABLE:{lrt(e,t);break}case k.TBODY:case k.TFOOT:case k.THEAD:{art(e,t);break}case k.INPUT:{crt(e,t);break}case k.CAPTION:{irt(e,t);break}case k.COLGROUP:{srt(e,t);break}default:ZI(e,t)}}function gC(e,t){switch(t.tagID){case k.TABLE:{e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode());break}case k.TEMPLATE:{Nb(e,t);break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:ZI(e,t)}}function ZI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,FL(e,t),e.fosterParentingEnabled=n}function eEe(e,t){e.pendingCharacterTokens.push(t)}function tEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function lT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)ZI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const nEe=new Set([k.CAPTION,k.COL,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]);function drt(e,t){const n=t.tagID;nEe.has(n)?e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,wE(e,t)):Ta(e,t)}function hrt(e,t){const n=t.tagID;switch(n){case k.CAPTION:case k.TABLE:{e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===k.TABLE&&gC(e,t));break}case k.BODY:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:jL(e,t)}}function bY(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case k.TEMPLATE:{Jf(e,t);break}default:DO(e,t)}}function prt(e,t){switch(t.tagID){case k.COLGROUP:{e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TEMPLATE:{Nb(e,t);break}case k.COL:break;default:DO(e,t)}}function DO(e,t){e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function BL(e,t){switch(t.tagID){case k.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case k.TH:case k.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,k.TR),e.insertionMode=ie.IN_ROW,UL(e,t);break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,wE(e,t));break}default:wE(e,t)}}function KU(e,t){const n=t.tagID;switch(t.tagID){case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,gC(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:case k.TR:break;default:gC(e,t)}}function UL(e,t){switch(t.tagID){case k.TH:case k.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,BL(e,t));break}default:wE(e,t)}}function rEe(e,t){switch(t.tagID){case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case k.TABLE:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,KU(e,t));break}case k.TBODY:case k.TFOOT:case k.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(k.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,KU(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:break;default:gC(e,t)}}function mrt(e,t){const n=t.tagID;nEe.has(n)?(e.openElements.hasInTableScope(k.TD)||e.openElements.hasInTableScope(k.TH))&&(e._closeTableCell(),UL(e,t)):Ta(e,t)}function grt(e,t){const n=t.tagID;switch(n){case k.TD:case k.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case k.TABLE:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),rEe(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:break;default:jL(e,t)}}function iEe(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case k.OPTGROUP:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case k.INPUT:case k.KEYGEN:case k.TEXTAREA:case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),t.tagID!==k.SELECT&&e._processStartTag(t));break}case k.SCRIPT:case k.TEMPLATE:{Jf(e,t);break}}}function sEe(e,t){switch(t.tagID){case k.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===k.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===k.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop();break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop();break}case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode());break}case k.TEMPLATE:{Nb(e,t);break}}}function yrt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e._processStartTag(t)):iEe(e,t)}function vrt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e.onEndTag(t)):sEe(e,t)}function brt(e,t){switch(t.tagID){case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{Jf(e,t);break}case k.CAPTION:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,wE(e,t);break}case k.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,bY(e,t);break}case k.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,BL(e,t);break}case k.TD:case k.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,UL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ta(e,t)}}function _rt(e,t){t.tagID===k.TEMPLATE&&Nb(e,t)}function oEe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):vY(e,t)}function wrt(e,t){t.tagID===k.HTML?Ta(e,t):OO(e,t)}function aEe(e,t){var n;if(t.tagID===k.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===k.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else OO(e,t)}function OO(e,t){e.insertionMode=ie.IN_BODY,FL(e,t)}function Ert(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.FRAMESET:{e._insertElement(t,Fe.HTML);break}case k.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case k.NOFRAMES:{Jf(e,t);break}}}function xrt(e,t){t.tagID===k.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==k.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Srt(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.NOFRAMES:{Jf(e,t);break}}}function Trt(e,t){t.tagID===k.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Art(e,t){t.tagID===k.HTML?Ta(e,t):YP(e,t)}function YP(e,t){e.insertionMode=ie.IN_BODY,FL(e,t)}function Crt(e,t){switch(t.tagID){case k.HTML:{Ta(e,t);break}case k.NOFRAMES:{Jf(e,t);break}}}function Irt(e,t){t.chars=gi,e._insertCharacters(t)}function krt(e,t){e._insertCharacters(t),e.framesetOk=!1}function uEe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Rrt(e,t){if(qtt(t))uEe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?qwe(t):r===Fe.SVG&&(Wtt(t),Wwe(t)),gY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Nrt(e,t){if(t.tagID===k.P||t.tagID===k.BR){uEe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const Prt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),$ae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function lEe(e,t){const n=zrt(e),r=kwe("type",{handlers:{root:Drt,element:Ort,text:$rt,comment:fEe,doctype:Mrt,raw:Frt},unknown:jrt}),i={parser:n?new Pae($ae):Pae.getFragmentParser(void 0,$ae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Yx(i,Bh());const s=n?i.parser.document:i.parser.getFragment(),o=Het(s,{file:i.options.file});return i.stitches&&dY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function cEe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Drt(e,t){cEe(e.children,t)}function Ort(e,t){Brt(e,t),cEe(e.children,t),Urt(e,t)}function $rt(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:ek(e)};Yx(t,Bh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Mrt(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:ek(e)};Yx(t,Bh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Lrt(e,t){t.stitches=!0;const n=Vrt(e);if("children"in e&&"children"in n){const r=lEe({type:"root",children:e.children},t.options);n.children=r.children}fEe({type:"comment",value:{stitch:n}},t)}function fEe(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:ek(e)};Yx(t,Bh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Frt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,dEe(t,Bh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function jrt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Lrt(n,t);else{let r="";throw Prt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Yx(e,t){dEe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=is.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function dEe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Brt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===is.PLAINTEXT)return;Yx(t,Bh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:X1.html;i===X1.html&&n==="svg"&&(i=X1.svg);const s=Ket({...e,children:[]},{space:i===X1.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:Gx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:ek(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Urt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&rtt.includes(n)||t.parser.tokenizer.state===is.PLAINTEXT)return;Yx(t,OL(e));const r={type:Cn.END_TAG,tagName:n,tagID:Gx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:ek(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===is.RCDATA||t.parser.tokenizer.state===is.RAWTEXT||t.parser.tokenizer.state===is.SCRIPT_DATA)&&(t.parser.tokenizer.state=is.DATA)}function zrt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function ek(e){const t=Bh(e)||{line:void 0,column:void 0,offset:void 0},n=OL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Vrt(e){return"children"in e?_E({...e,children:[]}):_E(e)}function Hrt(e){return function(t,n){return lEe(t,{...e,file:n})}}function Ka({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Cy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(et,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(xi,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(xi,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(xi,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(xi,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(xi,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(xi,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Mx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Df,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Df,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(Net,{components:n,rehypePlugins:[Hrt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function XU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ka,{text:n})}const qrt="https://github.com/revisit-studies/study/tree/main/public/";function Wrt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Wm();return _.jsx(di.Main,{children:_.jsxs(kc,{size:"xs",px:"xs",children:[_.jsx(Cy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${jh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(et,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=U_e(i);return _.jsx(_s,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Cb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:i}),_.jsxs(Dt,{align:"center",direction:"row",children:[_.jsx(Coe,{color:"red"}),_.jsx(et,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(XU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(et,{c:"dimmed",children:[_.jsx(et,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(et,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(et,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Mx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${qrt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Dt,{align:"center",direction:"row",children:[_.jsx(Coe,{color:"orange"}),_.jsx(et,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(XU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var hEe={exports:{}},pEe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tk=R;function Grt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yrt=typeof Object.is=="function"?Object.is:Grt,Krt=tk.useSyncExternalStore,Xrt=tk.useRef,Qrt=tk.useEffect,Jrt=tk.useMemo,Zrt=tk.useDebugValue;pEe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Xrt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Jrt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Yrt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Krt(e,s[0],s[1]);return Qrt(function(){o.hasValue=!0,o.value=a},[a]),Zrt(a),a};hEe.exports=pEe;var eit=hEe.exports,xl="default"in GD?Wi:GD,Mae=Symbol.for("react-redux-context"),Lae=typeof globalThis<"u"?globalThis:{};function tit(){if(!xl.createContext)return{};const e=Lae[Mae]??(Lae[Mae]=new Map);let t=e.get(xl.createContext);return t||(t=xl.createContext(null),e.set(xl.createContext,t)),t}var $0=tit(),nit=()=>{throw new Error("uSES not initialized!")};function _Y(e=$0){return function(){return xl.useContext(e)}}var mEe=_Y(),gEe=nit,rit=e=>{gEe=e},iit=(e,t)=>e===t;function sit(e=$0){const t=e===$0?mEe:_Y(e),n=(r,i={})=>{const{equalityFn:s=iit,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();xl.useRef(!0);const d=xl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=gEe(u.addNestedSub,a.getState,l||a.getState,d,s);return xl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var oit=sit();function ait(e){e()}function uit(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ait(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Fae={notify(){},get:()=>[]};function lit(e,t){let n,r=Fae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=uit())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Fae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var cit=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fit=typeof navigator<"u"&&navigator.product==="ReactNative",dit=cit||fit?xl.useLayoutEffect:xl.useEffect;function hit({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=xl.useMemo(()=>{const l=lit(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=xl.useMemo(()=>e.getState(),[e]);dit(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||$0;return xl.createElement(u.Provider,{value:o},n)}var pit=hit;function yEe(e=$0){const t=e===$0?mEe:_Y(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var mit=yEe();function git(e=$0){const t=e===$0?mit:yEe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var vEe=git();rit(eit.useSyncExternalStoreWithSelector);function Eo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yit=typeof Symbol=="function"&&Symbol.observable||"@@observable",jae=yit,Mj=()=>Math.random().toString(36).substring(7).split("").join("."),vit={INIT:`@@redux/INIT${Mj()}`,REPLACE:`@@redux/REPLACE${Mj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Mj()}`},$O=vit;function wY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bEe(e,t,n){if(typeof e!="function")throw new Error(Eo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Eo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Eo(1));return n(bEe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Eo(3));return i}function f(g){if(typeof g!="function")throw new Error(Eo(4));if(u)throw new Error(Eo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Eo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!wY(g))throw new Error(Eo(7));if(typeof g.type>"u")throw new Error(Eo(8));if(typeof g.type!="string")throw new Error(Eo(17));if(u)throw new Error(Eo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Eo(10));r=g,d({type:$O.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Eo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[jae](){return this}}}return d({type:$O.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[jae]:p}}function bit(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:$O.INIT})>"u")throw new Error(Eo(12));if(typeof n(void 0,{type:$O.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eo(13))})}function _it(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{bit(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Eo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function MO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function wit(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Eo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=MO(...a)(i.dispatch),{...i,dispatch:s}}}function Eit(e){return wY(e)&&"type"in e&&typeof e.type=="string"}var _Ee=Symbol.for("immer-nothing"),Bae=Symbol.for("immer-draftable"),$l=Symbol.for("immer-state");function yf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var EE=Object.getPrototypeOf;function M0(e){return!!e&&!!e[$l]}function vm(e){var t;return e?wEe(e)||Array.isArray(e)||!!e[Bae]||!!((t=e.constructor)!=null&&t[Bae])||VL(e)||HL(e):!1}var xit=Object.prototype.constructor.toString();function wEe(e){if(!e||typeof e!="object")return!1;const t=EE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===xit}function LO(e,t){zL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function zL(e){const t=e[$l];return t?t.type_:Array.isArray(e)?1:VL(e)?2:HL(e)?3:0}function QU(e,t){return zL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function EEe(e,t,n){const r=zL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Sit(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function VL(e){return e instanceof Map}function HL(e){return e instanceof Set}function b1(e){return e.copy_||e.base_}function JU(e,t){if(VL(e))return new Map(e);if(HL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[$l];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(EE(e),r)}else{const r=EE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function EY(e,t=!1){return qL(e)||M0(e)||!vm(e)||(zL(e)>1&&(e.set=e.add=e.clear=e.delete=Tit),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>EY(r,!0))),e}function Tit(){yf(2)}function qL(e){return Object.isFrozen(e)}var Ait={};function Mv(e){const t=Ait[e];return t||yf(0,e),t}var yC;function xEe(){return yC}function Cit(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Uae(e,t){t&&(Mv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ZU(e){e7(e),e.drafts_.forEach(Iit),e.drafts_=null}function e7(e){e===yC&&(yC=e.parent_)}function zae(e){return yC=Cit(yC,e)}function Iit(e){const t=e[$l];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Vae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[$l].modified_&&(ZU(t),yf(4)),vm(e)&&(e=FO(t,e),t.parent_||jO(t,e)),t.patches_&&Mv("Patches").generateReplacementPatches_(n[$l].base_,e,t.patches_,t.inversePatches_)):e=FO(t,n,[]),ZU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_Ee?e:void 0}function FO(e,t,n){if(qL(t))return t;const r=t[$l];if(!r)return LO(t,(i,s)=>Hae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return jO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),LO(s,(a,u)=>Hae(e,r,i,a,u,n,o)),jO(e,i,!1),n&&e.patches_&&Mv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Hae(e,t,n,r,i,s,o){if(M0(i)){const a=s&&t&&t.type_!==3&&!QU(t.assigned_,r)?s.concat(r):void 0,u=FO(e,i,a);if(EEe(n,r,u),M0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(vm(i)&&!qL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;FO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&jO(e,i)}}function jO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&EY(t,n)}function kit(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:xEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=xY;n&&(i=[r],s=vC);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var xY={get(e,t){if(t===$l)return e;const n=b1(e);if(!QU(n,t))return Rit(e,n,t);const r=n[t];return e.finalized_||!vm(r)?r:r===Lj(e.base_,t)?(Fj(e),e.copy_[t]=n7(r,e)):r},has(e,t){return t in b1(e)},ownKeys(e){return Reflect.ownKeys(b1(e))},set(e,t,n){const r=SEe(b1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Lj(b1(e),t),s=i==null?void 0:i[$l];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Sit(n,i)&&(n!==void 0||QU(e.base_,t)))return!0;Fj(e),t7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Lj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Fj(e),t7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=b1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){yf(11)},getPrototypeOf(e){return EE(e.base_)},setPrototypeOf(){yf(12)}},vC={};LO(xY,(e,t)=>{vC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vC.deleteProperty=function(e,t){return vC.set.call(this,e,t,void 0)};vC.set=function(e,t,n){return xY.set.call(this,e[0],t,n,e[0])};function Lj(e,t){const n=e[$l];return(n?b1(n):e)[t]}function Rit(e,t,n){var i;const r=SEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function SEe(e,t){if(!(t in e))return;let n=EE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=EE(n)}}function t7(e){e.modified_||(e.modified_=!0,e.parent_&&t7(e.parent_))}function Fj(e){e.copy_||(e.copy_=JU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nit=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&yf(6),r!==void 0&&typeof r!="function"&&yf(7);let i;if(vm(t)){const s=zae(this),o=n7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?ZU(s):e7(s)}return Uae(s,r),Vae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===_Ee&&(i=void 0),this.autoFreeze_&&EY(i,!0),r){const s=[],o=[];Mv("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else yf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){vm(e)||yf(8),M0(e)&&(e=TEe(e));const t=zae(this),n=n7(e,void 0);return n[$l].isManual_=!0,e7(t),n}finishDraft(e,t){const n=e&&e[$l];(!n||!n.isManual_)&&yf(9);const{scope_:r}=n;return Uae(r,t),Vae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Mv("Patches").applyPatches_;return M0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function n7(e,t){const n=VL(e)?Mv("MapSet").proxyMap_(e,t):HL(e)?Mv("MapSet").proxySet_(e,t):kit(e,t);return(t?t.scope_:xEe()).drafts_.push(n),n}function TEe(e){return M0(e)||yf(10,e),AEe(e)}function AEe(e){if(!vm(e)||qL(e))return e;const t=e[$l];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=JU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=JU(e,!0);return LO(n,(r,i)=>{EEe(n,r,AEe(i))}),t&&(t.finalized_=!1),n}var Ml=new Nit,CEe=Ml.produce;Ml.produceWithPatches.bind(Ml);Ml.setAutoFreeze.bind(Ml);Ml.setUseStrictShallowCopy.bind(Ml);Ml.applyPatches.bind(Ml);Ml.createDraft.bind(Ml);Ml.finishDraft.bind(Ml);function Pit(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Dit(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Oit(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var qae=e=>Array.isArray(e)?e:[e];function $it(e){const t=Array.isArray(e[0])?e[0]:e;return Oit(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Mit(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Lit=class{constructor(e){this.value=e}deref(){return this.value}},Fit=typeof WeakRef<"u"?WeakRef:Lit,jit=0,Wae=1;function hN(){return{s:jit,v:void 0,o:null,p:null}}function SY(e,t={}){let n=hN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=hN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=hN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Wae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Fit(c):c}return l.s=Wae,l.v=c,c}return o.clearCache=()=>{n=hN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function IEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Pit(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=SY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=qae(d),y=qae(p),v=$it(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=Mit(v,arguments);return a=b.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Bit=IEe(SY),Uit=Object.assign((e,t=Bit)=>{Dit(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Uit});function kEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var zit=kEe(),Vit=kEe,Hit=(...e)=>{const t=IEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(M0(o)?TEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Hit(SY);var qit=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?MO:MO.apply(null,arguments)};function xE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Uu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Eit(r)&&r.type===e,n}var REe=class t2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,t2.prototype)}static get[Symbol.species](){return t2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new t2(...t[0].concat(this)):new t2(...t.concat(this))}};function Gae(e){return vm(e)?CEe(e,()=>{}):e}function Yae(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Uu(10));const r=n.insert(t,e);return e.set(t,r),r}function Wit(e){return typeof e=="boolean"}var Git=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new REe;return n&&(Wit(n)?o.push(zit):o.push(Vit(n.extraArgument))),o},Yit="RTK_autoBatch",NEe=e=>t=>{setTimeout(t,e)},Kit=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:NEe(10),Xit=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Kit:e.type==="callback"?e.queueNotification:NEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Yit]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Qit=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new REe(e);return r&&i.push(Xit(typeof r=="object"?r:void 0)),i},Jit=!0;function Zit(e){const t=Git(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(wY(n))a=_it(n);else throw new Error(Uu(1));let u;typeof r=="function"?u=r(t):u=t();let l=MO;i&&(l=qit({trace:!Jit,...typeof i=="object"&&i}));const c=wit(...u),f=Qit(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return bEe(a,s,h)}function PEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Uu(28));if(a in t)throw new Error(Uu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function est(e){return typeof e=="function"}function tst(e,t){let[n,r,i]=PEe(t),s;if(est(e))s=()=>Gae(e());else{const a=Gae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(M0(c)){const h=f(c,u);return h===void 0?c:h}else{if(vm(c))return CEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Uu(9))}return d}}return c},a)}return o.getInitialState=s,o}var nst="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rst=(e=21)=>{let t="",n=e;for(;n--;)t+=nst[Math.random()*64|0];return t},ist=Symbol.for("rtk-slice-createasyncthunk");function sst(e,t){return`${e}/${t}`}function ost({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[ist];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Uu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(lst()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Uu(12));if(E in l.sliceCaseReducersByType)throw new Error(Uu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:sst(s,b),createNotation:typeof i.reducers=="function"};fst(w)?hst(E,w,c,t):cst(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?PEe(i.extraReducers):[i.extraReducers],T={...b,...l.sliceCaseReducersByType};return tst(i.initialState,S=>{for(let A in T)S.addCase(A,T[A]);for(let A of l.sliceMatchers)S.addMatcher(A.matcher,A.reducer);for(let A of w)S.addMatcher(A.matcher,A.reducer);E&&S.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(S){let A=S[b];return typeof A>"u"&&w&&(A=g()),A}function T(S=d){const A=Yae(h,w,{insert:()=>new WeakMap});return Yae(A,S,{insert:()=>{const C={};for(const[I,N]of Object.entries(i.selectors??{}))C[I]=ast(N,S,g,w);return C}})}return{reducerPath:b,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const T=w??o;return b.inject({reducerPath:T,reducer:m},E),{...v,...y(T,!0)}}};return v}}function ast(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var ust=ost();function lst(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function cst({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!dst(r))throw new Error(Uu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?xE(e,o):xE(e))}function fst(e){return e._reducerDefinitionType==="asyncThunk"}function dst(e){return e._reducerDefinitionType==="reducerWithPrepare"}function hst({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Uu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||pN,pending:a||pN,rejected:u||pN,settled:l||pN})}function pN(){}var pst=(e,t)=>{if(typeof e!="function")throw new Error(Uu(32))},TY="listenerMiddleware",mst=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=xE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Uu(21));return pst(s),{predicate:i,type:t,effect:s}},gst=Object.assign(e=>{const{type:t,predicate:n,effect:r}=mst(e);return{id:rst(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Uu(22))}}},{withTypes:()=>gst}),yst=Object.assign(xE(`${TY}/add`),{withTypes:()=>yst});xE(`${TY}/removeAll`);var vst=Object.assign(xE(`${TY}/remove`),{withTypes:()=>vst});function Uu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function bm(e){return e.components.flatMap(t=>typeof t=="string"?t:bm(t))}function DEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:DEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function OEe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+bm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+bm(e).length-1}];r+=1}else{const o=OEe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function $Ee(e,t){const n=OEe(e,t,0);return typeof n=="number"?null:n}function MEe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=MEe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function bst(e,t){const n=MEe(e,t,0);return n.found?n.distance:-1}function LEe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...LEe(i,`${t}-${s}`))}),n}function AY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>AY(n,`${t}-${r}`))}}async function _st(e,t,n,r,i){const s=bm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=ust({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Zit({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const FEe=R.createContext(null);function Uh(){return R.useContext(FEe).actions}const zh=vEe,Hc=oit;function wst(e){return Hc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function CY(){return Hc(e=>bm(e.sequence))}function Pb(){const{studyId:e}=gm();return`${e}`}function Gm(){const{index:e}=gm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Ny(){const e=Gm(),t=CY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var BO={exports:{}};BO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",T="[object String]",S="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[P]=j[$]=j[F]=j[L]=j[B]=j[z]=j[q]=!0,j[a]=j[u]=j[C]=j[c]=j[I]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[T]=j[A]=!1;var H=typeof no=="object"&&no&&no.Object===Object&&no,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=H||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ye=he&&H.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ye&&ye.binding&&ye.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,Ct=Array(te);++Re<te;)Ct[Re]=ue(Re);return Ct}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=ne["__core-js_shared__"],We=ze.toString,me=ct.hasOwnProperty,dt=function(){var te=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,pe=We.call(Object),Ce=RegExp("^"+We.call(me).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=_e(Object.getPrototypeOf,Object),Tr=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,pn=ut?ut.toStringTag:void 0,Sn=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,Uo=Date.now,Oi=qe(ne,"Map"),Tn=qe(Object,"create"),$i=function(){function te(){}return function(ue){if(!lp(ue))return{};if(Tr)return Tr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ar(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ds(){this.__data__=Tn?Tn(null):{},this.size=0}function sp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function ol(te){var ue=this.__data__;if(Tn){var Re=ue[te];return Re===r?void 0:Re}return me.call(ue,te)?ue[te]:void 0}function fd(te){var ue=this.__data__;return Tn?ue[te]!==void 0:me.call(ue,te)}function Er(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=Tn&&ue===void 0?r:ue,this}Ar.prototype.clear=ds,Ar.prototype.delete=sp,Ar.prototype.get=ol,Ar.prototype.has=fd,Ar.prototype.set=Er;function Ci(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function Xr(){this.__data__=[],this.size=0}function uu(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var Ct=ue.length-1;return Re==Ct?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Aa(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function Ca(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,Ct=Jn(Re,te);return Ct<0?(++this.size,Re.push([te,ue])):Re[Ct][1]=ue,this}Ci.prototype.clear=Xr,Ci.prototype.delete=uu,Ci.prototype.get=Aa,Ci.prototype.has=Ca,Ci.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ae(){this.size=0,this.__data__={hash:new Ar,map:new(Oi||Ci),string:new Ar}}function Te(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),Ct=Re.size;return Re.set(te,ue),this.size+=Re.size==Ct?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Te,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=St;function Ht(te){var ue=this.__data__=new Ci(te);this.size=ue.size}function On(){this.__data__=new Ci,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function dn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Cr(te,ue){var Re=this.__data__;if(Re instanceof Ci){var Ct=Re.__data__;if(!Oi||Ct.length<n-1)return Ct.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(Ct)}return Re.set(te,ue),this.size=Re.size,this}Ht.prototype.clear=On,Ht.prototype.delete=jn,Ht.prototype.get=dn,Ht.prototype.has=ir,Ht.prototype.set=Cr;function Vt(te,ue){var Re=ap(te),Ct=!Re&&lu(te),$n=!Re&&!Ct&&up(te),xr=!Re&&!Ct&&!$n&&NR(te),Vr=Re||Ct||$n||xr,Un=Vr?Ue(te.length,String):[],Hr=Un.length;for(var Ji in te)Vr&&(Ji=="length"||$n&&(Ji=="offset"||Ji=="parent")||xr&&(Ji=="buffer"||Ji=="byteLength"||Ji=="byteOffset")||Et(Ji,Hr))||Un.push(Ji);return Un}function sr(te,ue,Re){(Re!==void 0&&!Jl(te[ue],Re)||Re===void 0&&!(ue in te))&&Ii(te,ue,Re)}function zr(te,ue,Re){var Ct=te[ue];(!(me.call(te,ue)&&Jl(Ct,Re))||Re===void 0&&!(ue in te))&&Ii(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(Jl(te[Re][0],ue))return Re;return-1}function Ii(te,ue,Re){ue=="__proto__"&&Sn?Sn(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var qs=Oe();function Qr(te){return te==null?te===void 0?S:y:pn&&pn in Object(te)?Ge(te):Vo(te)}function go(te){return cu(te)&&Qr(te)==a}function Mi(te){if(!lp(te)||Bn(te))return!1;var ue=GS(te)?Ce:U;return ue.test(IR(te))}function Li(te){return cu(te)&&RR(te.length)&&!!j[Qr(te)]}function zo(te){if(!lp(te))return kr(te);var ue=Ir(te),Re=[];for(var Ct in te)Ct=="constructor"&&(ue||!me.call(te,Ct))||Re.push(Ct);return Re}function Ia(te,ue,Re,Ct,$n){te!==ue&&qs(ue,function(xr,Vr){if($n||($n=new Ht),lp(xr))Ws(te,ue,Vr,Re,Ia,Ct,$n);else{var Un=Ct?Ct(op(te,Vr),xr,Vr+"",te,ue,$n):void 0;Un===void 0&&(Un=xr),sr(te,Vr,Un)}},t1)}function Ws(te,ue,Re,Ct,$n,xr,Vr){var Un=op(te,Re),Hr=op(ue,Re),Ji=Vr.get(Hr);if(Ji){sr(te,Re,Ji);return}var Ho=xr?xr(Un,Hr,Re+"",te,ue,Vr):void 0,r1=Ho===void 0;if(r1){var cp=ap(Hr),s_=!cp&&up(Hr),o_=!cp&&!s_&&NR(Hr);Ho=Hr,cp||s_||o_?ap(Un)?Ho=Un:kR(Un)?Ho=fe(Un):s_?(r1=!1,Ho=Y(Hr)):o_?(r1=!1,Ho=Z(Hr)):Ho=[]:x5(Hr)||lu(Hr)?(Ho=Un,lu(Un)?Ho=e1(Un):(!lp(Un)||GS(Un))&&(Ho=st(Hr))):r1=!1}r1&&(Vr.set(Hr,Ho),$n(Ho,Hr,Ct,xr,Vr),Vr.delete(Hr)),sr(te,Re,Ho)}function Ql(te,ue){return WS(hd(te,ue,cg),te+"")}var dd=Sn?function(te,ue){return Sn(te,"toString",{configurable:!0,enumerable:!1,value:n1(ue),writable:!0})}:cg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,Ct=te.length;for(ue||(ue=Array(Ct));++Re<Ct;)ue[Re]=te[Re];return ue}function ge(te,ue,Re,Ct){var $n=!Re;Re||(Re={});for(var xr=-1,Vr=ue.length;++xr<Vr;){var Un=ue[xr],Hr=void 0;Hr===void 0&&(Hr=te[Un]),$n?Ii(Re,Un,Hr):zr(Re,Un,Hr)}return Re}function le(te){return Ql(function(ue,Re){var Ct=-1,$n=Re.length,xr=$n>1?Re[$n-1]:void 0,Vr=$n>2?Re[2]:void 0;for(xr=te.length>3&&typeof xr=="function"?($n--,xr):void 0,Vr&&hn(Re[0],Re[1],Vr)&&(xr=$n<3?void 0:xr,$n=1),ue=Object(ue);++Ct<$n;){var Un=Re[Ct];Un&&te(ue,Un,Ct,xr)}return ue})}function Oe(te){return function(ue,Re,Ct){for(var $n=-1,xr=Object(ue),Vr=Ct(ue),Un=Vr.length;Un--;){var Hr=Vr[++$n];if(Re(xr[Hr],Hr,xr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Nt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Mi(Re)?Re:void 0}function Ge(te){var ue=me.call(te,pn),Re=te[pn];try{te[pn]=void 0;var Ct=!0}catch{}var $n=vt.call(te);return Ct&&(ue?te[pn]=Re:delete te[pn]),$n}function st(te){return typeof te.constructor=="function"&&!Ir(te)?$i(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function hn(te,ue,Re){if(!lp(Re))return!1;var Ct=typeof ue;return(Ct=="number"?i_(Re)&&Et(ue,Re.length):Ct=="string"&&ue in Re)?Jl(Re[ue],te):!1}function Nt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!dt&&dt in te}function Ir(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function kr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Vo(te){return vt.call(te)}function hd(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var Ct=arguments,$n=-1,xr=rr(Ct.length-ue,0),Vr=Array(xr);++$n<xr;)Vr[$n]=Ct[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=Ct[$n];return Un[ue]=Re(Vr),Ke(te,this,Un)}}function op(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var WS=Zy(dd);function Zy(te){var ue=0,Re=0;return function(){var Ct=Uo(),$n=s-(Ct-Re);if(Re=Ct,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function IR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function Jl(te,ue){return te===ue||te!==te&&ue!==ue}var lu=go(function(){return arguments}())?go:function(te){return cu(te)&&me.call(te,"callee")&&!Fn.call(te,"callee")},ap=Array.isArray;function i_(te){return te!=null&&RR(te.length)&&!GS(te)}function kR(te){return cu(te)&&i_(te)}var up=nr||DR;function GS(te){if(!lp(te))return!1;var ue=Qr(te);return ue==h||ue==p||ue==l||ue==b}function RR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function lp(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function cu(te){return te!=null&&typeof te=="object"}function x5(te){if(!cu(te)||Qr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=me.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var NR=be?yt(be):Li;function e1(te){return ge(te,t1(te))}function t1(te){return i_(te)?Vt(te):zo(te)}var PR=le(function(te,ue,Re){Ia(te,ue,Re)});function n1(te){return function(){return te}}function cg(te){return te}function DR(){return!1}e.exports=PR})(BO,BO.exports);var Est=BO.exports;const IY=Wl(Est);function p0(e){return structuredClone(e)}function kY(){const{answers:e}=Hc(i=>i),t=Gm(),r=`${Ny()}_${t}`;return e[r]}const jEe=R.createContext(null);function xst(){const e=R.useContext(jEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function L0(){return Hc(e=>e.config)}function Kae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function BEe(){const e=Gm(),t=CY(),r=`${Ny()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Hc(T=>T),a=zh(),{saveTrialAnswer:u,setIframeAnswers:l}=Uh(),{storageEngine:c}=As(),f=Pb(),[d,h]=R.useState(!0);R.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=wst(r),m=typeof e!="number"||!p,g=kY(),y=Wm(),v=L0(),b=R.useMemo(()=>Date.now(),[]),w=xst(),E=R.useCallback(()=>{if(typeof e!="number")return;const T=p0(i[r]),S=Object.values(T).reduce((F,L)=>Object.hasOwn(L,"values")?{...F,...L.values}:F,{}),{provenanceGraph:A}=T,C=Date.now(),I=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:I})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:I}}),a(l({})));let N=e+1;const O=$Ee(s,e),P=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:I}};P&&[...O.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(B=>({...B,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let B=!1;const z=Object.fromEntries(Object.entries($).filter(([D])=>{const U=parseInt(D.slice(D.lastIndexOf("_")+1),10);return U>=L.firstIndex&&U<=e})),q=L.check!=="block"?Object.entries(z).filter(([D])=>D.slice(0,D.lastIndexOf("_"))===L.name):Object.entries(z);if(q.length===0)return!1;if(q.some(([D,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[D,U]=q[0];L.check==="response"?B=L.comparison==="equal"?L.value===U.answer[L.responseId]:L.value!==U.answer[L.responseId]:B=!Kae(U.answer,D,v.components[D.slice(0,D.lastIndexOf("_"))],v)}else if(L.check==="block"||L.check==="repeatedComponent"){if(q.length<L.value)return!1;const D=q.map(([j,H])=>Kae(H.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),U=D.filter(j=>j).length,W=D.length-U;B=L.condition==="numCorrect"&&U===L.value||L.condition==="numIncorrect"&&W===L.value}if(B){const D=t.indexOf(L.to),U=D===-1?bst(s,L.to):-1;return N=D===-1?U:D,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function Sst({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=BEe(),o=R.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Rn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Tst(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Ast=typeof window<"u"?R.useLayoutEffect:R.useEffect;function vo(e,t){Ast(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Cst(e,t){e&&Tst(e),vo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),vo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),vo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),vo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),vo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),vo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),vo(`mantine-form:${e}:clear-errors`,t.clearErrors),vo(`mantine-form:${e}:reset`,t.reset),vo(`mantine-form:${e}:validate`,t.validate),vo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),vo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),vo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),vo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),vo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),vo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),vo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),vo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Ist(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function r7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function kst(e){const[t,n]=R.useState(r7(e)),r=R.useRef(t),i=R.useCallback(u=>{n(l=>{const c=r7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=R.useCallback(()=>i({}),[]),o=R.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=R.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function UEe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Xae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Qae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=UEe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Xae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Xae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Rst(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Jae(e,t,n){typeof n.value=="object"&&(n.value=lw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function lw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(lw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(lw(a),lw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(lw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Jae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Jae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function zEe(e){return typeof e!="string"?[]:e.split(".")}function Nu(e,t){const n=zEe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function WL(e,t,n){const r=zEe(e);if(r.length===0)return n;const i=lw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Nst(e,{from:t,to:n},r){const i=Nu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),WL(e,s,r)}function Pst(e,t,n,r){const i=Nu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),WL(e,s,r)}function Dst(e,t,n){const r=Nu(e,n);return Array.isArray(r)?WL(e,r.filter((i,s)=>s!==t),n):n}function Ost({$values:e,$errors:t,$status:n}){const r=R.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Rst(o,a,u)),e.setValues({values:Nst(o,a,e.refValues.current),updateState:!0})},[]),i=R.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Qae(o,a,u,-1)),e.setValues({values:Dst(o,a,e.refValues.current),updateState:!0})},[]),s=R.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Qae(o,u,l,1)),e.setValues({values:Pst(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var RY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const KP=Wl(RY);function mN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function $st({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=R.useState(t),[o,a]=R.useState(e),u=R.useRef(t),l=R.useRef(e),c=R.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=R.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=R.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=R.useCallback((E,T)=>{c(S=>mN(S,E)===T?S:{...S,[E]:T})},[]),m=R.useCallback((E,T)=>{f(S=>mN(S,E)===T?S:{...S,[E]:T})},[]),g=R.useCallback(E=>mN(u.current,E),[]),y=R.useCallback(E=>f(T=>{if(typeof E!="string")return T;const S=UEe(E,T);return delete S[E],KP(S,T)?T:S}),[]),v=R.useCallback(E=>{if(E){const S=Nu(E,l.current);if(typeof S=="boolean")return S;const A=Nu(E,r.refValues.current),C=Nu(E,r.valuesSnapshot.current);return!KP(A,C)}return Object.keys(l.current).length>0?mN(l.current):!KP(r.refValues.current,r.valuesSnapshot.current)},[]),b=R.useCallback(()=>l.current,[]),w=R.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Mst({initialValues:e,onValuesChange:t,mode:n}){const r=R.useRef(!1),[i,s]=R.useState(e||{}),o=R.useRef(i),a=R.useRef(i),u=R.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=R.useCallback(p=>{var y;const m=Nu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=WL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=R.useCallback(p=>{a.current=p},[]),f=R.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=R.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=R.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Lst({$status:e}){const t=R.useRef({}),n=R.useCallback((i,s)=>{R.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=R.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Nu(i,o.previousValues),value:Nu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Zae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function eue(e){const t=r7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function i7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Nu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>i7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||i7(o,t,a,i)),i},r)}function s7(e,t){return eue(typeof e=="function"?e(t):i7(e,t))}function gN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=s7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Fst="__MANTINE_FORM_INDEX__";function tue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Fst}`)):!1:!1}function VEe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=kst(r),p=Mst({initialValues:n,onValuesChange:l,mode:t}),m=$st({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Ost({$values:p,$errors:h,$status:m}),y=Lst({$status:m}),[v,b]=R.useState(0),[w,E]=R.useState({}),T=R.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),S=R.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(U=>U+1))},[]),A=R.useCallback((D,U,W)=>{const j=tue(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?H=>{const G=gN(D,d,H.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(H=>({...H,[D]:(H[D]||0)+1})):null]})},[l,d]),C=R.useCallback(D=>{const U=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Nu(W,p.refValues.current),H=Nu(W,U);j!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),I=R.useCallback(()=>{const D=s7(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),N=R.useCallback(D=>{const U=gN(D,d,p.refValues.current);return U.hasError?h.setFieldError(D,U.error):h.clearFieldError(D),U},[d]),O=(D,{type:U="input",withError:W=!0,withFocus:j=!0,...H}={})=>{const ne={onChange:Ist(ce=>A(D,ce,{forceUpdate:!1})),"data-path":Zae(e,D)};return W&&(ne.error=h.errorsState[D]),U==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Nu(D,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Nu(D,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(D,!0),ne.onBlur=()=>{if(tue(D,u)){const ce=gN(D,d,p.refValues.current);ce.hasError?h.setFieldError(D,ce.error):h.clearFieldError(D)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:D,options:{type:U,withError:W,withFocus:j,...H},form:q}))},P=(D,U)=>W=>{W==null||W.preventDefault();const j=I();j.hasErrors?U==null||U(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},$=D=>c(D||p.refValues.current),F=R.useCallback(D=>{D.preventDefault(),T()},[]),L=R.useCallback(D=>D?!gN(D,d,p.refValues.current).hasError:!s7(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,z=R.useCallback(D=>document.querySelector(`[data-path="${Zae(e,D)}"]`),[]),q={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:I,validateField:N,getInputProps:O,onSubmit:P,onReset:F,isValid:L,getTransformedValues:$,key:B,getInputNode:z};return Cst(e,q),q}function jst(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Bst(e){return jst(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function HEe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Ust=new URLSearchParams(window.location.search),zst=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Ust.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Vst=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?HEe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Hst(e,t,n){const[r,i]=R.useState(null),s=VEe({initialValues:zst(e,n),validate:Vst(e)});return R.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Db(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=HEe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function qst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(wl.Group,{label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:u,...n,error:Db(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(xs,{mt:"xs",children:a.map(l=>_.jsx(wl,{disabled:t,value:l.value,label:l.label},l.value))})})}function Wst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(GI,{disabled:t,label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Db(e,n,u)})}function Gst({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(hi.Wrapper,{label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Df,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Df.Item,{children:a},a)):_.jsx(Df.Item,{children:t.value})})})}function qEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx($v.Group,{name:`radioInput${e.id}`,label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:c,...n,error:Db(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(xs,{mt:"xs",children:[u?_.jsx(et,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx($v,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(et,{children:l})]})},e.id)}function Yst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(qEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Kst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(kG,{disabled:t,placeholder:l,label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Db(e,n)})}function Xst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Db(e,n);return _.jsx(hi.Wrapper,{label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(RL,{disabled:t,marks:a,...n,h:40})})}function Qst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(gv,{disabled:t,placeholder:s,label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Db(e,n)})}function Jst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(yG,{disabled:t,placeholder:s,label:_.jsxs(Dt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(ve,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(ve,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Db(e,n)})}function Zst({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=QG(),u=L0().uiConfig.enumerateQuestions??!1,l=R.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(ve,{mb:"md",children:[e.type==="numerical"&&_.jsx(Kst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Qst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Jst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Yst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Wst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Xst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(qEe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(qst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Gst,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function UO({config:e,location:t,status:n,style:r}){var w;const i=Gm(),s=Ny(),o=n==null?void 0:n.answer,a=e,u=R.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(T=>T.location?T.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=zh(),{updateResponseBlockValidation:c}=Uh(),f=Hst(u,i,o||{}),[d,h]=R.useState(void 0),[p,m]=R.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Hc(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return R.useEffect(()=>{const E=u.find(T=>T.type==="iframe");if(g&&E){const T=E.id;f.setValues({...f.values,[T]:g[T]})}},[g]),R.useEffect(()=>{y&&h(y)},[y]),R.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:p0(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,T)=>{var S,A;return _.jsx(Wi.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Zst,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:T+1}),v&&p&&_.jsx($x,{mb:"md",title:"Correct Answer",children:`The correct answer is: ${(A=(S=a.correctAnswer)==null?void 0:S.find(C=>C.id===E.id))==null?void 0:A.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(xs,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(Rn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Sst,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const cT="@REVISIT_COMMS",eot={minHeight:"500px",width:"100%",border:0};function tot({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Uh(),r=zh(),i=vEe(),s=R.useRef(null),o=R.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ny(),u=Wm(),l=R.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${cT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return R.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${cT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${cT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${cT}/ANSWERS`:r(t(d.message));break;case`${cT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${jh}${e.path}?trialid=${a}&id=${o}`,style:eot})}async function NY(e){const n=await(await fetch(`${jh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Lv({email:e,path:t}){const n=Iy();return _.jsxs(kc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(xi,{order:2,children:_.jsx(et,{span:!0,c:"orange",children:"404"})}),_.jsxs(et,{children:[_.jsx(et,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Il,{h:"lg"}),_.jsxs(Df,{children:[_.jsx(Df.Item,{children:_.jsx(et,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Df.Item,{children:_.jsxs(et,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Mx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const not={maxWidth:"100%"};function rot({currentConfig:e}){const t={...not,...e.style},[n,r]=R.useState(!0),[i,s]=R.useState(!1);return R.useEffect(()=>{async function o(){const a=await NY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Cy,{mx:"auto",src:`${jh}${e.path}`,style:t}):_.jsx(Lv,{path:e.path})}function Qp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iot(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kx(e){let t,n,r;e.length!==2?(t=Qp,n=(a,u)=>Qp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Qp||e===iot?e:sot,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function sot(){return 0}function WEe(e){return e===null?NaN:+e}function*oot(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const GEe=Kx(Qp),F0=GEe.right,aot=GEe.left;Kx(WEe).center;function uot(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function lot(e,t){const n=uot(e,t);return n&&Math.sqrt(n)}function nue(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Wa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class rue extends Map{constructor(t,n=XEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(o7(this,t))}has(t){return super.has(o7(this,t))}set(t,n){return super.set(YEe(this,t),n)}delete(t){return super.delete(KEe(this,t))}}class zO extends Set{constructor(t,n=XEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(o7(this,t))}add(t){return super.add(YEe(this,t))}delete(t){return super.delete(KEe(this,t))}}function o7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function YEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function KEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function XEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cot(e,t){return Array.from(t,n=>e[n])}function fot(e=Qp){if(e===Qp)return QEe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function QEe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dot=Math.sqrt(50),hot=Math.sqrt(10),pot=Math.sqrt(2);function VO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=dot?10:s>=hot?5:s>=pot?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?VO(e,t,n*2):[a,u,l]}function a7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?VO(t,e,n):VO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function u7(e,t,n){return t=+t,e=+e,n=+n,VO(e,t,n)[2]}function j0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?u7(t,e,n):u7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function m0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function l7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function JEe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?QEe:fot(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));JEe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(fT(e,n,t),i(e[r],s)>0&&fT(e,n,r);o<a;){for(fT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?fT(e,n,a):(++a,fT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function fT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function c7(e,t,n){if(e=Float64Array.from(oot(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return l7(e);if(t>=1)return m0(e);var r,i=(r-1)*t,s=Math.floor(i),o=m0(JEe(e,s).subarray(0,s+1)),a=l7(e.subarray(s+1));return o+(a-o)*(i-s)}}function ZEe(e,t,n=WEe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function mot(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function exe(e,t){return c7(e,.5,t)}function*got(e){for(const t of e)yield*t}function txe(e){return Array.from(got(e))}function Pu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function nxe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function yot(e,...t){e=new zO(e),t=t.map(vot);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function vot(e){return e instanceof zO?e:new zO(e)}function bot(...e){const t=new zO;for(const n of e)for(const r of n)t.add(r);return t}var _ot={value:()=>{}};function GL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new XP(n)}function XP(e){this._=e}function wot(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}XP.prototype=GL.prototype={constructor:XP,on:function(e,t){var n=this._,r=wot(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Eot(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=iue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=iue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new XP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Eot(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function iue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_ot,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var f7="http://www.w3.org/1999/xhtml";const sue={svg:"http://www.w3.org/2000/svg",xhtml:f7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function YL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),sue.hasOwnProperty(t)?{space:sue[t],local:e}:e}function xot(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===f7&&t.documentElement.namespaceURI===f7?t.createElement(e):t.createElementNS(n,e)}}function Sot(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rxe(e){var t=YL(e);return(t.local?Sot:xot)(t)}function Tot(){}function PY(e){return e==null?Tot:function(){return this.querySelector(e)}}function Aot(e){typeof e!="function"&&(e=PY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xa(r,this._parents)}function ixe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Cot(){return[]}function sxe(e){return e==null?Cot:function(){return this.querySelectorAll(e)}}function Iot(e){return function(){return ixe(e.apply(this,arguments))}}function kot(e){typeof e=="function"?e=Iot(e):e=sxe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Xa(r,i)}function oxe(e){return function(){return this.matches(e)}}function axe(e){return function(t){return t.matches(e)}}var Rot=Array.prototype.find;function Not(e){return function(){return Rot.call(this.children,e)}}function Pot(){return this.firstElementChild}function Dot(e){return this.select(e==null?Pot:Not(typeof e=="function"?e:axe(e)))}var Oot=Array.prototype.filter;function $ot(){return Array.from(this.children)}function Mot(e){return function(){return Oot.call(this.children,e)}}function Lot(e){return this.selectAll(e==null?$ot:Mot(typeof e=="function"?e:axe(e)))}function Fot(e){typeof e!="function"&&(e=oxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Xa(r,this._parents)}function uxe(e){return new Array(e.length)}function jot(){return new Xa(this._enter||this._groups.map(uxe),this._parents)}function HO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}HO.prototype={constructor:HO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Bot(e){return function(){return e}}function Uot(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new HO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function zot(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new HO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Vot(e){return e.__data__}function Hot(e,t){if(!arguments.length)return Array.from(this,Vot);var n=t?zot:Uot,r=this._parents,i=this._groups;typeof e!="function"&&(e=Bot(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=qot(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Xa(o,r),o._enter=a,o._exit=u,o}function qot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wot(){return new Xa(this._exit||this._groups.map(uxe),this._parents)}function Got(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Yot(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Xa(a,this._parents)}function Kot(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Xot(e){e||(e=Qot);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Xa(i,this._parents).order()}function Qot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jot(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zot(){return Array.from(this)}function eat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function tat(){let e=0;for(const t of this)++e;return e}function nat(){return!this.node()}function rat(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function iat(e){return function(){this.removeAttribute(e)}}function sat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oat(e,t){return function(){this.setAttribute(e,t)}}function aat(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uat(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lat(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cat(e,t){var n=YL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?sat:iat:typeof t=="function"?n.local?lat:uat:n.local?aat:oat)(n,t))}function lxe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fat(e){return function(){this.style.removeProperty(e)}}function dat(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hat(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pat(e,t,n){return arguments.length>1?this.each((t==null?fat:typeof t=="function"?hat:dat)(e,t,n??"")):SE(this.node(),e)}function SE(e,t){return e.style.getPropertyValue(t)||lxe(e).getComputedStyle(e,null).getPropertyValue(t)}function mat(e){return function(){delete this[e]}}function gat(e,t){return function(){this[e]=t}}function yat(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vat(e,t){return arguments.length>1?this.each((t==null?mat:typeof t=="function"?yat:gat)(e,t)):this.node()[e]}function cxe(e){return e.trim().split(/^|\s+/)}function DY(e){return e.classList||new fxe(e)}function fxe(e){this._node=e,this._names=cxe(e.getAttribute("class")||"")}fxe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dxe(e,t){for(var n=DY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function hxe(e,t){for(var n=DY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function bat(e){return function(){dxe(this,e)}}function _at(e){return function(){hxe(this,e)}}function wat(e,t){return function(){(t.apply(this,arguments)?dxe:hxe)(this,e)}}function Eat(e,t){var n=cxe(e+"");if(arguments.length<2){for(var r=DY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?wat:t?bat:_at)(n,t))}function xat(){this.textContent=""}function Sat(e){return function(){this.textContent=e}}function Tat(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Aat(e){return arguments.length?this.each(e==null?xat:(typeof e=="function"?Tat:Sat)(e)):this.node().textContent}function Cat(){this.innerHTML=""}function Iat(e){return function(){this.innerHTML=e}}function kat(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rat(e){return arguments.length?this.each(e==null?Cat:(typeof e=="function"?kat:Iat)(e)):this.node().innerHTML}function Nat(){this.nextSibling&&this.parentNode.appendChild(this)}function Pat(){return this.each(Nat)}function Dat(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oat(){return this.each(Dat)}function $at(e){var t=typeof e=="function"?e:rxe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Mat(){return null}function Lat(e,t){var n=typeof e=="function"?e:rxe(e),r=t==null?Mat:typeof t=="function"?t:PY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Fat(){var e=this.parentNode;e&&e.removeChild(this)}function jat(){return this.each(Fat)}function Bat(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Uat(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zat(e){return this.select(e?Uat:Bat)}function Vat(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hat(e){return function(t){e.call(this,t,this.__data__)}}function qat(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wat(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Gat(e,t,n){return function(){var r=this.__on,i,s=Hat(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Yat(e,t,n){var r=qat(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Gat:Wat,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function pxe(e,t,n){var r=lxe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kat(e,t){return function(){return pxe(this,e,t)}}function Xat(e,t){return function(){return pxe(this,e,t.apply(this,arguments))}}function Qat(e,t){return this.each((typeof t=="function"?Xat:Kat)(e,t))}function*Jat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var OY=[null];function Xa(e,t){this._groups=e,this._parents=t}function nk(){return new Xa([[document.documentElement]],OY)}function Zat(){return this}Xa.prototype=nk.prototype={constructor:Xa,select:Aot,selectAll:kot,selectChild:Dot,selectChildren:Lot,filter:Fot,data:Hot,enter:jot,exit:Wot,join:Got,merge:Yot,selection:Zat,order:Kot,sort:Xot,call:Jot,nodes:Zot,node:eat,size:tat,empty:nat,each:rat,attr:cat,style:pat,property:vat,classed:Eat,text:Aat,html:Rat,raise:Pat,lower:Oat,append:$at,insert:Lat,remove:jat,clone:zat,datum:Vat,on:Yat,dispatch:Qat,[Symbol.iterator]:Jat};function ms(e){return typeof e=="string"?new Xa([[document.querySelector(e)]],[document.documentElement]):new Xa([[e]],OY)}function eut(e){let t;for(;t=e.sourceEvent;)e=t;return e}function d7(e,t){if(e=eut(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function tut(e){return typeof e=="string"?new Xa([document.querySelectorAll(e)],[document.documentElement]):new Xa([ixe(e)],OY)}const h7={capture:!0,passive:!1};function p7(e){e.preventDefault(),e.stopImmediatePropagation()}function nut(e){var t=e.document.documentElement,n=ms(e).on("dragstart.drag",p7,h7);"onselectstart"in t?n.on("selectstart.drag",p7,h7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function rut(e,t){var n=e.document.documentElement,r=ms(e).on("dragstart.drag",null);t&&(r.on("click.drag",p7,h7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Xx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Py(){}var Fv=.7,TE=1/Fv,Ow="\\s*([+-]?\\d+)\\s*",bC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iut=/^#([0-9a-f]{3,8})$/,sut=new RegExp(`^rgb\\(${Ow},${Ow},${Ow}\\)$`),out=new RegExp(`^rgb\\(${rh},${rh},${rh}\\)$`),aut=new RegExp(`^rgba\\(${Ow},${Ow},${Ow},${bC}\\)$`),uut=new RegExp(`^rgba\\(${rh},${rh},${rh},${bC}\\)$`),lut=new RegExp(`^hsl\\(${bC},${rh},${rh}\\)$`),cut=new RegExp(`^hsla\\(${bC},${rh},${rh},${bC}\\)$`),oue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xx(Py,jv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:aue,formatHex:aue,formatHex8:fut,formatHsl:dut,formatRgb:uue,toString:uue});function aue(){return this.rgb().formatHex()}function fut(){return this.rgb().formatHex8()}function dut(){return mxe(this).formatHsl()}function uue(){return this.rgb().formatRgb()}function jv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iut.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lue(t):n===3?new ro(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sut.exec(e))?new ro(t[1],t[2],t[3],1):(t=out.exec(e))?new ro(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aut.exec(e))?yN(t[1],t[2],t[3],t[4]):(t=uut.exec(e))?yN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lut.exec(e))?due(t[1],t[2]/100,t[3]/100,1):(t=cut.exec(e))?due(t[1],t[2]/100,t[3]/100,t[4]):oue.hasOwnProperty(e)?lue(oue[e]):e==="transparent"?new ro(NaN,NaN,NaN,0):null}function lue(e){return new ro(e>>16&255,e>>8&255,e&255,1)}function yN(e,t,n,r){return r<=0&&(e=t=n=NaN),new ro(e,t,n,r)}function $Y(e){return e instanceof Py||(e=jv(e)),e?(e=e.rgb(),new ro(e.r,e.g,e.b,e.opacity)):new ro}function B0(e,t,n,r){return arguments.length===1?$Y(e):new ro(e,t,n,r??1)}function ro(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xx(ro,B0,rk(Py,{brighter(e){return e=e==null?TE:Math.pow(TE,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fv:Math.pow(Fv,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ro(yv(this.r),yv(this.g),yv(this.b),qO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cue,formatHex:cue,formatHex8:hut,formatRgb:fue,toString:fue}));function cue(){return`#${Q1(this.r)}${Q1(this.g)}${Q1(this.b)}`}function hut(){return`#${Q1(this.r)}${Q1(this.g)}${Q1(this.b)}${Q1((isNaN(this.opacity)?1:this.opacity)*255)}`}function fue(){const e=qO(this.opacity);return`${e===1?"rgb(":"rgba("}${yv(this.r)}, ${yv(this.g)}, ${yv(this.b)}${e===1?")":`, ${e})`}`}function qO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Q1(e){return e=yv(e),(e<16?"0":"")+e.toString(16)}function due(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vf(e,t,n,r)}function mxe(e){if(e instanceof vf)return new vf(e.h,e.s,e.l,e.opacity);if(e instanceof Py||(e=jv(e)),!e)return new vf;if(e instanceof vf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new vf(o,a,u,e.opacity)}function WO(e,t,n,r){return arguments.length===1?mxe(e):new vf(e,t,n,r??1)}function vf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xx(vf,WO,rk(Py,{brighter(e){return e=e==null?TE:Math.pow(TE,e),new vf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fv:Math.pow(Fv,e),new vf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ro(jj(e>=240?e-240:e+120,i,r),jj(e,i,r),jj(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new vf(hue(this.h),vN(this.s),vN(this.l),qO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qO(this.opacity);return`${e===1?"hsl(":"hsla("}${hue(this.h)}, ${vN(this.s)*100}%, ${vN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hue(e){return e=(e||0)%360,e<0?e+360:e}function vN(e){return Math.max(0,Math.min(1,e||0))}function jj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const gxe=Math.PI/180,yxe=180/Math.PI,GO=18,vxe=.96422,bxe=1,_xe=.82521,wxe=4/29,$w=6/29,Exe=3*$w*$w,put=$w*$w*$w;function xxe(e){if(e instanceof ih)return new ih(e.l,e.a,e.b,e.opacity);if(e instanceof jp)return Sxe(e);e instanceof ro||(e=$Y(e));var t=Vj(e.r),n=Vj(e.g),r=Vj(e.b),i=Bj((.2225045*t+.7168786*n+.0606169*r)/bxe),s,o;return t===n&&n===r?s=o=i:(s=Bj((.4360747*t+.3850649*n+.1430804*r)/vxe),o=Bj((.0139322*t+.0971045*n+.7141733*r)/_xe)),new ih(116*i-16,500*(s-i),200*(i-o),e.opacity)}function YO(e,t,n,r){return arguments.length===1?xxe(e):new ih(e,t,n,r??1)}function ih(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Xx(ih,YO,rk(Py,{brighter(e){return new ih(this.l+GO*(e??1),this.a,this.b,this.opacity)},darker(e){return new ih(this.l-GO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=vxe*Uj(t),e=bxe*Uj(e),n=_xe*Uj(n),new ro(zj(3.1338561*t-1.6168667*e-.4906146*n),zj(-.9787684*t+1.9161415*e+.033454*n),zj(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Bj(e){return e>put?Math.pow(e,1/3):e/Exe+wxe}function Uj(e){return e>$w?e*e*e:Exe*(e-wxe)}function zj(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Vj(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mut(e){if(e instanceof jp)return new jp(e.h,e.c,e.l,e.opacity);if(e instanceof ih||(e=xxe(e)),e.a===0&&e.b===0)return new jp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*yxe;return new jp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function KO(e,t,n,r){return arguments.length===1?mut(e):new jp(e,t,n,r??1)}function jp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Sxe(e){if(isNaN(e.h))return new ih(e.l,0,0,e.opacity);var t=e.h*gxe;return new ih(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Xx(jp,KO,rk(Py,{brighter(e){return new jp(this.h,this.c,this.l+GO*(e??1),this.opacity)},darker(e){return new jp(this.h,this.c,this.l-GO*(e??1),this.opacity)},rgb(){return Sxe(this).rgb()}}));var Txe=-.14861,MY=1.78277,LY=-.29227,KL=-.90649,_C=1.97294,pue=_C*KL,mue=_C*MY,gue=MY*LY-KL*Txe;function gut(e){if(e instanceof vv)return new vv(e.h,e.s,e.l,e.opacity);e instanceof ro||(e=$Y(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(gue*r+pue*t-mue*n)/(gue+pue-mue),s=r-i,o=(_C*(n-i)-LY*s)/KL,a=Math.sqrt(o*o+s*s)/(_C*i*(1-i)),u=a?Math.atan2(o,s)*yxe-120:NaN;return new vv(u<0?u+360:u,a,i,e.opacity)}function m7(e,t,n,r){return arguments.length===1?gut(e):new vv(e,t,n,r??1)}function vv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xx(vv,m7,rk(Py,{brighter(e){return e=e==null?TE:Math.pow(TE,e),new vv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fv:Math.pow(Fv,e),new vv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*gxe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ro(255*(t+n*(Txe*r+MY*i)),255*(t+n*(LY*r+KL*i)),255*(t+n*(_C*r)),this.opacity)}}));function Axe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Cxe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Axe((n-r/t)*t,o,i,s,a)}}function Ixe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Axe((n-r/t)*t,i,s,o,a)}}const XL=e=>()=>e;function kxe(e,t){return function(n){return e+n*t}}function yut(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function QL(e,t){var n=t-e;return n?kxe(e,n>180||n<-180?n-360*Math.round(n/360):n):XL(isNaN(e)?t:e)}function vut(e){return(e=+e)==1?io:function(t,n){return n-t?yut(t,n,e):XL(isNaN(t)?n:t)}}function io(e,t){var n=t-e;return n?kxe(e,n):XL(isNaN(e)?t:e)}const wC=function e(t){var n=vut(t);function r(i,s){var o=n((i=B0(i)).r,(s=B0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=io(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Rxe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=B0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var but=Rxe(Cxe),_ut=Rxe(Ixe);function FY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Nxe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wut(e,t){return(Nxe(t)?FY:Pxe)(e,t)}function Pxe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ym(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Dxe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function dc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Oxe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ym(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var g7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hj=new RegExp(g7.source,"g");function Eut(e){return function(){return e}}function xut(e){return function(t){return e(t)+""}}function jY(e,t){var n=g7.lastIndex=Hj.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=g7.exec(e))&&(i=Hj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:dc(r,i)})),n=Hj.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?xut(u[0].x):Eut(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Ym(e,t){var n=typeof t,r;return t==null||n==="boolean"?XL(t):(n==="number"?dc:n==="string"?(r=jv(t))?(t=r,wC):jY:t instanceof jv?wC:t instanceof Date?Dxe:Nxe(t)?FY:Array.isArray(t)?Pxe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Oxe:dc)(e,t)}function Sut(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Tut(e,t){var n=QL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function ik(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var yue=180/Math.PI,y7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $xe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*yue,skewX:Math.atan(u)*yue,scaleX:o,scaleY:a}}var bN;function Aut(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?y7:$xe(t.a,t.b,t.c,t.d,t.e,t.f)}function Cut(e){return e==null||(bN||(bN=document.createElementNS("http://www.w3.org/2000/svg","g")),bN.setAttribute("transform",e),!(e=bN.transform.baseVal.consolidate()))?y7:(e=e.matrix,$xe(e.a,e.b,e.c,e.d,e.e,e.f))}function Mxe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:dc(l,f)},{i:m-2,x:dc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:dc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:dc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:dc(l,f)},{i:m-2,x:dc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Lxe=Mxe(Aut,"px, ","px)","deg)"),Fxe=Mxe(Cut,", ",")",")"),Iut=1e-12;function vue(e){return((e=Math.exp(e))+1/e)/2}function kut(e){return((e=Math.exp(e))-1/e)/2}function Rut(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nut=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Iut)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-E)/t,g=function(S){var A=S*y,C=vue(E),I=l/(n*v)*(C*Rut(t*A+E)-kut(E));return[a+I*h,u+I*p,l*C/vue(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function jxe(e){return function(t,n){var r=e((t=WO(t)).h,(n=WO(n)).h),i=io(t.s,n.s),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Put=jxe(QL);var Dut=jxe(io);function Out(e,t){var n=io((e=YO(e)).l,(t=YO(t)).l),r=io(e.a,t.a),i=io(e.b,t.b),s=io(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function Bxe(e){return function(t,n){var r=e((t=KO(t)).h,(n=KO(n)).h),i=io(t.c,n.c),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const $ut=Bxe(QL);var Mut=Bxe(io);function Uxe(e){return function t(n){n=+n;function r(i,s){var o=e((i=m7(i)).h,(s=m7(s)).h),a=io(i.s,s.s),u=io(i.l,s.l),l=io(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Lut=Uxe(QL);var Fut=Uxe(io);function BY(e,t){t===void 0&&(t=e,e=Ym);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function jut(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const But=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ym,interpolateArray:wut,interpolateBasis:Cxe,interpolateBasisClosed:Ixe,interpolateCubehelix:Lut,interpolateCubehelixLong:Fut,interpolateDate:Dxe,interpolateDiscrete:Sut,interpolateHcl:$ut,interpolateHclLong:Mut,interpolateHsl:Put,interpolateHslLong:Dut,interpolateHue:Tut,interpolateLab:Out,interpolateNumber:dc,interpolateNumberArray:FY,interpolateObject:Oxe,interpolateRgb:wC,interpolateRgbBasis:but,interpolateRgbBasisClosed:_ut,interpolateRound:ik,interpolateString:jY,interpolateTransformCss:Lxe,interpolateTransformSvg:Fxe,interpolateZoom:Nut,piecewise:BY,quantize:jut},Symbol.toStringTag,{value:"Module"}));var AE=0,n2=0,dT=0,zxe=1e3,XO,r2,QO=0,Bv=0,JL=0,EC=typeof performance=="object"&&performance.now?performance:Date,Vxe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ZL(){return Bv||(Vxe(Uut),Bv=EC.now()+JL)}function Uut(){Bv=0}function xC(){this._call=this._time=this._next=null}xC.prototype=UY.prototype={constructor:xC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ZL():+n)+(t==null?0:+t),!this._next&&r2!==this&&(r2?r2._next=this:XO=this,r2=this),this._call=e,this._time=n,v7()},stop:function(){this._call&&(this._call=null,this._time=1/0,v7())}};function UY(e,t,n){var r=new xC;return r.restart(e,t,n),r}function zut(){ZL(),++AE;for(var e=XO,t;e;)(t=Bv-e._time)>=0&&e._call.call(void 0,t),e=e._next;--AE}function bue(){Bv=(QO=EC.now())+JL,AE=n2=0;try{zut()}finally{AE=0,Hut(),Bv=0}}function Vut(){var e=EC.now(),t=e-QO;t>zxe&&(JL-=t,QO=e)}function Hut(){for(var e,t=XO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:XO=n);r2=e,v7(r)}function v7(e){if(!AE){n2&&(n2=clearTimeout(n2));var t=e-Bv;t>24?(e<1/0&&(n2=setTimeout(bue,e-EC.now()-JL)),dT&&(dT=clearInterval(dT))):(dT||(QO=EC.now(),dT=setInterval(Vut,zxe)),AE=1,Vxe(bue))}}function _ue(e,t,n){var r=new xC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function qut(e,t,n){var r=new xC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?ZL():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Wut=GL("start","end","cancel","interrupt"),Gut=[],Hxe=0,wue=1,b7=2,QP=3,Eue=4,_7=5,JP=6;function e6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Yut(e,n,{name:t,index:r,group:i,on:Wut,tween:Gut,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Hxe})}function zY(e,t){var n=Zf(e,t);if(n.state>Hxe)throw new Error("too late; already scheduled");return n}function Vh(e,t){var n=Zf(e,t);if(n.state>QP)throw new Error("too late; already running");return n}function Zf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yut(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=UY(s,0,n.time);function s(l){n.state=wue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==wue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===QP)return _ue(o);h.state===Eue?(h.state=JP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=JP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(_ue(function(){n.state===QP&&(n.state=Eue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=b7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===b7){for(n.state=QP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=_7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===_7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=JP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function w7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>b7&&r.state<_7,r.state=JP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Kut(e){return this.each(function(){w7(this,e)})}function Xut(e,t){var n,r;return function(){var i=Vh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Qut(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Vh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Jut(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Zf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Xut:Qut)(n,e,t))}function VY(e,t,n){var r=e._id;return e.each(function(){var i=Vh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Zf(i,r).value[t]}}function qxe(e,t){var n;return(typeof t=="number"?dc:t instanceof jv?wC:(n=jv(t))?(t=n,wC):jY)(e,t)}function Zut(e){return function(){this.removeAttribute(e)}}function elt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tlt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function nlt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function rlt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function ilt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function slt(e,t){var n=YL(e),r=n==="transform"?Fxe:qxe;return this.attrTween(e,typeof t=="function"?(n.local?ilt:rlt)(n,r,VY(this,"attr."+e,t)):t==null?(n.local?elt:Zut)(n):(n.local?nlt:tlt)(n,r,t))}function olt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function alt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ult(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&alt(e,s)),n}return i._value=t,i}function llt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&olt(e,s)),n}return i._value=t,i}function clt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=YL(e);return this.tween(n,(r.local?ult:llt)(r,t))}function flt(e,t){return function(){zY(this,e).delay=+t.apply(this,arguments)}}function dlt(e,t){return t=+t,function(){zY(this,e).delay=t}}function hlt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?flt:dlt)(t,e)):Zf(this.node(),t).delay}function plt(e,t){return function(){Vh(this,e).duration=+t.apply(this,arguments)}}function mlt(e,t){return t=+t,function(){Vh(this,e).duration=t}}function glt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?plt:mlt)(t,e)):Zf(this.node(),t).duration}function ylt(e,t){if(typeof t!="function")throw new Error;return function(){Vh(this,e).ease=t}}function vlt(e){var t=this._id;return arguments.length?this.each(ylt(t,e)):Zf(this.node(),t).ease}function blt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Vh(this,e).ease=n}}function _lt(e){if(typeof e!="function")throw new Error;return this.each(blt(this._id,e))}function wlt(e){typeof e!="function"&&(e=oxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new _m(r,this._parents,this._name,this._id)}function Elt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new _m(o,this._parents,this._name,this._id)}function xlt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Slt(e,t,n){var r,i,s=xlt(t)?zY:Vh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Tlt(e,t){var n=this._id;return arguments.length<2?Zf(this.node(),n).on.on(e):this.each(Slt(n,e,t))}function Alt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Clt(){return this.on("end.remove",Alt(this._id))}function Ilt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=PY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,e6(l[d],t,n,d,l,Zf(c,n)));return new _m(s,this._parents,t,n)}function klt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sxe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Zf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&e6(h,t,n,m,d,p);s.push(d),o.push(c)}return new _m(s,o,t,n)}var Rlt=nk.prototype.constructor;function Nlt(){return new Rlt(this._groups,this._parents)}function Plt(e,t){var n,r,i;return function(){var s=SE(this,e),o=(this.style.removeProperty(e),SE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Wxe(e){return function(){this.style.removeProperty(e)}}function Dlt(e,t,n){var r,i=n+"",s;return function(){var o=SE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Olt(e,t,n){var r,i,s;return function(){var o=SE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),SE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function $lt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Vh(this,e),l=u.on,c=u.value[s]==null?a||(a=Wxe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Mlt(e,t,n){var r=(e+="")=="transform"?Lxe:qxe;return t==null?this.styleTween(e,Plt(e,r)).on("end.style."+e,Wxe(e)):typeof t=="function"?this.styleTween(e,Olt(e,r,VY(this,"style."+e,t))).each($lt(this._id,e)):this.styleTween(e,Dlt(e,r,t),n).on("end.style."+e,null)}function Llt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Flt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Llt(e,o,n)),r}return s._value=t,s}function jlt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Flt(e,t,n??""))}function Blt(e){return function(){this.textContent=e}}function Ult(e){return function(){var t=e(this);this.textContent=t??""}}function zlt(e){return this.tween("text",typeof e=="function"?Ult(VY(this,"text",e)):Blt(e==null?"":e+""))}function Vlt(e){return function(t){this.textContent=e.call(this,t)}}function Hlt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Vlt(i)),t}return r._value=e,r}function qlt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hlt(e))}function Wlt(){for(var e=this._name,t=this._id,n=Gxe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Zf(u,t);e6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _m(r,this._parents,e,n)}function Glt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Vh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Ylt=0;function _m(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Gxe(){return++Ylt}var fp=nk.prototype;_m.prototype={constructor:_m,select:Ilt,selectAll:klt,selectChild:fp.selectChild,selectChildren:fp.selectChildren,filter:wlt,merge:Elt,selection:Nlt,transition:Wlt,call:fp.call,nodes:fp.nodes,node:fp.node,size:fp.size,empty:fp.empty,each:fp.each,on:Tlt,attr:slt,attrTween:clt,style:Mlt,styleTween:jlt,text:zlt,textTween:qlt,remove:Clt,tween:Jut,delay:hlt,duration:glt,ease:vlt,easeVarying:_lt,end:Glt,[Symbol.iterator]:fp[Symbol.iterator]};const Klt=e=>+e;function Xlt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qlt={time:null,delay:0,duration:250,ease:Xlt};function Jlt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zlt(e){var t,n;e instanceof _m?(t=e._id,e=e._name):(t=Gxe(),(n=Qlt).time=ZL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&e6(u,e,t,l,o,n||Jlt(u,t));return new _m(r,this._parents,e,t)}nk.prototype.interrupt=Kut;nk.prototype.transition=Zlt;const qj=e=>()=>e;function ect(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function tct(e){e.stopImmediatePropagation()}function Wj(e){e.preventDefault(),e.stopImmediatePropagation()}var xue={name:"drag"},Gj={name:"space"},g_={name:"handle"},y_={name:"center"};const{abs:Sue,max:Ko,min:Xo}=Math;function Tue(e){return[+e[0],+e[1]]}function E7(e){return[Tue(e[0]),Tue(e[1])]}var ZP={name:"x",handles:["w","e"].map(SC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},eD={name:"y",handles:["n","s"].map(SC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},nct={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(SC),input:function(e){return e==null?null:E7(e)},output:function(e){return e}},dp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Aue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Cue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},rct={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ict={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function SC(e){return{type:e}}function sct(e){return!e.ctrlKey&&!e.button}function oct(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function act(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yj(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function uct(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function lct(){return HY(ZP)}function cct(){return HY(eD)}function fct(){return HY(nct)}function HY(e){var t=oct,n=sct,r=act,i=!0,s=GL("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([SC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",dp.overlay).merge(y).each(function(){var b=Yj(this).extent;ms(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([SC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",dp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return dp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),T=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Ym(T,S);function C(I){w.selection=I===1&&S===null?null:A(I),l.call(b),E.brush()}return T!==null&&S!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,T=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),S=c(b,w).beforestart();w7(b),E.selection=T===null?null:T,l.call(b),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ms(this),y=Yj(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=ms(this.that).datum();s.call(g,this.that,new ect(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?xue:i&&g.altKey?y_:g_,w=e===eD?null:rct[v],E=e===ZP?null:ict[v],T=Yj(y),S=T.extent,A=T.selection,C=S[0][0],I,N,O=S[0][1],P,$,F=S[1][0],L,B,z=S[1][1],q,D,U=0,W=0,j,H=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=d7(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});w7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];T.selection=A=[[I=e===eD?C:Xo(_e[0][0],_e[1][0]),P=e===ZP?O:Xo(_e[0][1],_e[1][1])],[L=e===eD?F:Ko(_e[0][0],_e[1][0]),q=e===ZP?z:Ko(_e[0][1],_e[1][1])]],ce.length>1&&Ke(g)}else I=A[0][0],P=A[0][1],L=A[1][0],q=A[1][1];N=I,$=P,B=L,D=q;var he=ms(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",dp[v]);if(g.touches)de.moved=be,de.ended=Ue;else{var Ie=ms(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),nut(g.view)}l.call(y),de.start(g,b.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=d7(ke,y));if(H&&!G&&!ne&&ce.length===1){const ke=ce[0];Sue(ke.cur[0]-ke[0])>Sue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,Wj(_e),Ke(_e)}function Ke(_e){const ke=ce[0],ze=ke.point0;var ct;switch(U=ke[0]-ze[0],W=ke[1]-ze[1],b){case Gj:case xue:{w&&(U=Ko(C-I,Xo(F-L,U)),N=I+U,B=L+U),E&&(W=Ko(O-P,Xo(z-q,W)),$=P+W,D=q+W);break}case g_:{ce[1]?(w&&(N=Ko(C,Xo(F,ce[0][0])),B=Ko(C,Xo(F,ce[1][0])),w=1),E&&($=Ko(O,Xo(z,ce[0][1])),D=Ko(O,Xo(z,ce[1][1])),E=1)):(w<0?(U=Ko(C-I,Xo(F-I,U)),N=I+U,B=L):w>0&&(U=Ko(C-L,Xo(F-L,U)),N=I,B=L+U),E<0?(W=Ko(O-P,Xo(z-P,W)),$=P+W,D=q):E>0&&(W=Ko(O-q,Xo(z-q,W)),$=P,D=q+W));break}case y_:{w&&(N=Ko(C,Xo(F,I-U*w)),B=Ko(C,Xo(F,L+U*w))),E&&($=Ko(O,Xo(z,P-W*E)),D=Ko(O,Xo(z,q+W*E)));break}}B<N&&(w*=-1,ct=I,I=L,L=ct,ct=N,N=B,B=ct,v in Aue&&ye.attr("cursor",dp[v=Aue[v]])),D<$&&(E*=-1,ct=P,P=q,q=ct,ct=$,$=D,D=ct,v in Cue&&ye.attr("cursor",dp[v=Cue[v]])),T.selection&&(A=T.selection),G&&(N=A[0][0],B=A[1][0]),ne&&($=A[0][1],D=A[1][1]),(A[0][0]!==N||A[0][1]!==$||A[1][0]!==B||A[1][1]!==D)&&(T.selection=[[N,$],[B,D]],l.call(y),de.brush(_e,b.name))}function Ue(_e){if(tct(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else rut(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",dp.overlay),T.selection&&(A=T.selection),uct(A)&&(T.selection=null,l.call(y)),de.end(_e,b.name)}function yt(_e){switch(_e.keyCode){case 16:{H=w&&E;break}case 18:{b===g_&&(w&&(L=B-U*w,I=N+U*w),E&&(q=D-W*E,P=$+W*E),b=y_,Ke(_e));break}case 32:{(b===g_||b===y_)&&(w<0?L=B-U:w>0&&(I=N-U),E<0?q=D-W:E>0&&(P=$-W),b=Gj,ye.attr("cursor",dp.selection),Ke(_e));break}default:return}Wj(_e)}function it(_e){switch(_e.keyCode){case 16:{H&&(G=ne=H=!1,Ke(_e));break}case 18:{b===y_&&(w<0?L=B:w>0&&(I=N),E<0?q=D:E>0&&(P=$),b=g_,Ke(_e));break}case 32:{b===Gj&&(_e.altKey?(w&&(L=B-U*w,I=N+U*w),E&&(q=D-W*E,P=$+W*E),b=y_):(w<0?L=B:w>0&&(I=N),E<0?q=D:E>0&&(P=$),b=g_),ye.attr("cursor",dp[v]),Ke(_e));break}default:return}Wj(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=E7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:qj(E7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:qj(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:qj(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const x7=Math.PI,S7=2*x7,_1=1e-6,dct=S7-_1;function Yxe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hct(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Yxe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let qY=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Yxe:hct(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>_1)if(!(Math.abs(f*u-l*c)>_1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((x7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>_1&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>_1||Math.abs(this._y1-c)>_1)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%S7+S7),d>dct?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>_1&&this._append`A${r},${r},0,${+(d>=x7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function t6(){return new qY}t6.prototype=qY.prototype;const Jp=11102230246251565e-32,Qo=134217729,pct=(3+8*Jp)*Jp;function Kj(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function mct(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function sk(e){return new Float64Array(e)}const gct=(3+16*Jp)*Jp,yct=(2+12*Jp)*Jp,vct=(9+64*Jp)*Jp*Jp,v_=sk(4),Iue=sk(8),kue=sk(12),Rue=sk(16),Ra=sk(4);function bct(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,T,S,A;const C=e-i,I=n-i,N=t-s,O=r-s;w=C*O,d=Qo*C,h=d-(d-C),p=C-h,d=Qo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=N*I,d=Qo*N,h=d-(d-N),p=N-h,d=Qo*I,m=d-(d-I),g=I-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,v_[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,v_[1]=b-(y+f)+(f-T),A=v+y,f=A-v,v_[2]=v-(A-f)+(y-f),v_[3]=A;let P=mct(4,v_),$=yct*o;if(P>=$||-P>=$||(f=e-C,a=e-(C+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=vct*o+pct*Math.abs(P),P+=C*c+O*a-(N*l+I*u),P>=$||-P>=$))return P;w=a*O,d=Qo*a,h=d-(d-a),p=a-h,d=Qo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=u*I,d=Qo*u,h=d-(d-u),p=u-h,d=Qo*I,m=d-(d-I),g=I-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ra[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ra[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ra[2]=v-(A-f)+(y-f),Ra[3]=A;const F=Kj(4,v_,4,Ra,Iue);w=C*c,d=Qo*C,h=d-(d-C),p=C-h,d=Qo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=N*l,d=Qo*N,h=d-(d-N),p=N-h,d=Qo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ra[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ra[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ra[2]=v-(A-f)+(y-f),Ra[3]=A;const L=Kj(F,Iue,4,Ra,kue);w=a*c,d=Qo*a,h=d-(d-a),p=a-h,d=Qo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=u*l,d=Qo*u,h=d-(d-u),p=u-h,d=Qo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ra[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ra[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ra[2]=v-(A-f)+(y-f),Ra[3]=A;const B=Kj(L,kue,4,Ra,Rue);return Rue[B-1]}function _N(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=gct*l?u:-bct(e,t,n,r,i,s,l)}const Nue=Math.pow(2,-52),wN=new Uint32Array(512);class JO{static from(t,n=Sct,r=Tct){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new JO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const I=t[2*C],N=t[2*C+1];I<a&&(a=I),N<u&&(u=N),I>l&&(l=I),N>c&&(c=N),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,I=1/0;C<o;C++){const N=Xj(f,d,t[2*C],t[2*C+1]);N<I&&(h=C,I=N)}const g=t[2*h],y=t[2*h+1];for(let C=0,I=1/0;C<o;C++){if(C===h)continue;const N=Xj(g,y,t[2*C],t[2*C+1]);N<I&&N>0&&(p=C,I=N)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const I=Ect(g,y,v,b,t[2*C],t[2*C+1]);I<w&&(m=C,w=I)}let E=t[2*m],T=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];cw(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let I=0;for(let N=0,O=-1/0;N<o;N++){const P=this._ids[N],$=this._dists[P];$>O&&(C[I++]=P,O=$)}this.hull=C.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(_N(g,y,v,b,E,T)<0){const C=p,I=v,N=b;p=m,v=E,b=T,m=C,E=I,T=N}const S=xct(g,y,v,b,E,T);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=Xj(t[2*C],t[2*C+1],S.x,S.y);cw(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,I,N;C<this._ids.length;C++){const O=this._ids[C],P=t[2*O],$=t[2*O+1];if(C>0&&Math.abs(P-I)<=Nue&&Math.abs($-N)<=Nue||(I=P,N=$,O===h||O===p||O===m))continue;let F=0;for(let D=0,U=this._hashKey(P,$);D<this._hashSize&&(F=s[(U+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let L=F,B;for(;B=r[L],_N(P,$,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===F){L=-1;break}if(L===-1)continue;let z=this._addTriangle(L,O,r[L],-1,-1,i[L]);i[O]=this._legalize(z+2),i[L]=z,A++;let q=r[L];for(;B=r[q],_N(P,$,t[2*q],t[2*q+1],t[2*B],t[2*B+1])<0;)z=this._addTriangle(q,O,B,i[O],-1,i[q]),i[O]=this._legalize(z+2),r[q]=q,A--,q=B;if(L===F)for(;B=n[L],_N(P,$,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)z=this._addTriangle(B,O,L,-1,i[L],i[B]),this._legalize(z+2),i[B]=z,r[L]=L,A--,L=B;this._hullStart=n[O]=L,r[L]=n[q]=O,r[O]=q,s[this._hashKey(P,$)]=O,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(A);for(let C=0,I=this._hullStart;C<A;C++)this.hull[C]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(_ct(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=wN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(wct(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<wN.length&&(wN[s++]=v)}else{if(s===0)break;t=wN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function _ct(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Xj(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function wct(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Ect(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function xct(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function cw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;hT(e,i,s),t[e[n]]>t[e[r]]&&hT(e,n,r),t[e[s]]>t[e[r]]&&hT(e,s,r),t[e[n]]>t[e[s]]&&hT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;hT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(cw(e,t,s,r),cw(e,t,n,o-1)):(cw(e,t,n,o-1),cw(e,t,s,r))}}function hT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Sct(e){return e[0]}function Tct(e){return e[1]}const Pue=1e-6;class J1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Pue||Math.abs(this._y1-s)>Pue)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class T7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Act=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,S=t[w],A=t[w+1],C=t[E],I=t[E+1],N=t[T],O=t[T+1],P=C-S,$=I-A,F=N-S,L=O-A,B=(P*L-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const q of n)s+=t[q*2],o+=t[q*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-S)*L-(o-A)*F);v=(S+N)/2-z*L,b=(A+O)/2+z*F}else{const z=1/B,q=P*P+$*$,D=F*F+L*L;v=S+(L*q-$*D)*z,b=A+(P*D-F*q)*z}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new J1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new J1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new J1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new T7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Cct=2*Math.PI,b_=Math.pow;function Ict(e){return e[0]}function kct(e){return e[1]}function Rct(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Nct(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class WY{static from(t,n=Ict,r=kct,i){return new WY("length"in t?Pct(t,n,r,i):Float64Array.from(Dct(t,n,r,i)))}constructor(t){this._delaunator=new JO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Rct(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Nct(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new JO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Act(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=b_(n-l[t*2],2)+b_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=b_(n-l[p*2],2)+b_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&b_(n-l[h*2],2)+b_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new J1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new J1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Cct)}return r&&r.value()}renderHull(t){const n=t==null?t=new J1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new T7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new J1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new T7;return this.renderTriangle(t,n),n.value()}}function Pct(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Dct(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Due={},Qj={},Jj=34,pT=10,Zj=13;function Kxe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Oct(e,t){var n=Kxe(e);return function(r,i){return t(n(r),i,e)}}function Oue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function mu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function $ct(e){return e<0?"-"+mu(-e,6):e>9999?"+"+mu(e,6):mu(e,4)}function Mct(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":$ct(e.getUTCFullYear())+"-"+mu(e.getUTCMonth()+1,2)+"-"+mu(e.getUTCDate(),2)+(i?"T"+mu(t,2)+":"+mu(n,2)+":"+mu(r,2)+"."+mu(i,3)+"Z":r?"T"+mu(t,2)+":"+mu(n,2)+":"+mu(r,2)+"Z":n||t?"T"+mu(t,2)+":"+mu(n,2)+"Z":"")}function Xxe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Oct(g,d):Kxe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===pT&&--p,f.charCodeAt(p-1)===Zj&&--p;function w(){if(v)return Qj;if(b)return b=!1,Due;var T,S=m,A;if(f.charCodeAt(S)===Jj){for(;m++<p&&f.charCodeAt(m)!==Jj||f.charCodeAt(++m)===Jj;);return(T=m)>=p?v=!0:(A=f.charCodeAt(m++))===pT?b=!0:A===Zj&&(b=!0,f.charCodeAt(m)===pT&&++m),f.slice(S+1,T-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(T=m++))===pT)b=!0;else if(A===Zj)b=!0,f.charCodeAt(m)===pT&&++m;else if(A!==n)continue;return f.slice(S,T)}return v=!0,f.slice(S,p)}for(;(y=w())!==Qj;){for(var E=[];y!==Due&&y!==Qj;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Oue(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Oue(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Mct(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Lct=Xxe(","),Fct=Lct.parse;function jct(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Bct(e,t){return fetch(e,t).then(jct)}function Uct(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Bct(t,n).then(function(i){return e(i,r)})}}var zct=Uct(Fct);function Vct(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Hct(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Qxe(this.cover(t,n),t,n,e)}function Qxe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function qct(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Qxe(this,o[n],a[n],e[n]);return this}function Wct(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Gct(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Yct(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ba(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Kct(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ba(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ba(h[3],g,y,u,l),new Ba(h[2],o,y,g,l),new Ba(h[1],g,a,u,y),new Ba(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Xct(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Qct(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Jct(){return this._root}function Zct(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function eft(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ba(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ba(i,l,c,a,u)),(i=r[2])&&t.push(new Ba(i,s,c,l,u)),(i=r[1])&&t.push(new Ba(i,l,o,a,c)),(i=r[0])&&t.push(new Ba(i,s,o,l,c))}return this}function tft(e){var t=[],n=[],r;for(this._root&&t.push(new Ba(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ba(s,o,a,c,f)),(s=i[1])&&t.push(new Ba(s,c,a,u,f)),(s=i[2])&&t.push(new Ba(s,o,f,c,l)),(s=i[3])&&t.push(new Ba(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function nft(e){return e[0]}function rft(e){return arguments.length?(this._x=e,this):this._x}function ift(e){return e[1]}function sft(e){return arguments.length?(this._y=e,this):this._y}function GY(e,t,n){var r=new YY(t??nft,n??ift,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function YY(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function $ue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var iu=GY.prototype=YY.prototype;iu.copy=function(){var e=new YY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=$ue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=$ue(r));return e};iu.add=Hct;iu.addAll=qct;iu.cover=Wct;iu.data=Gct;iu.extent=Yct;iu.find=Kct;iu.remove=Xct;iu.removeAll=Qct;iu.root=Jct;iu.size=Zct;iu.visit=eft;iu.visitAfter=tft;iu.x=rft;iu.y=sft;function Va(e){return function(){return e}}function Wg(e){return(e()-.5)*1e-6}function oft(e){return e.x+e.vx}function aft(e){return e.y+e.vy}function uft(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Va(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=GY(t,oft,aft).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,T,S){var A=b.data,C=b.r,I=m+C;if(A){if(A.index>d.index){var N=h-A.x-A.vx,O=p-A.y-A.vy,P=N*N+O*O;P<I*I&&(N===0&&(N=Wg(r),P+=N*N),O===0&&(O=Wg(r),P+=O*O),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(N*=P)*(I=(C*=C)/(g+C)),d.vy+=(O*=P)*I,A.vx-=N*(I=1-I),A.vy-=O*I)}return}return w>h+I||T<h-I||E>p+I||S<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Va(+l),u(),o):e},o}function lft(e){return e.index}function Mue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function cft(e){var t=lft,n=f,r,i=Va(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,T,S,A,C,I;b<v;++b)w=e[b],E=w.source,T=w.target,S=T.x+T.vx-E.x-E.vx||Wg(l),A=T.y+T.vy-E.y-E.vy||Wg(l),C=Math.sqrt(S*S+A*A),C=(C-s[b])/C*g*r[b],S*=C,A*=C,T.vx-=S*(I=u[b]),T.vy-=A*I,E.vx+=S*(I=1-I),E.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,T)=>[t(E,T,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Mue(b,w.source)),typeof w.target!="object"&&(w.target=Mue(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Va(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Va(+g),m(),d):i},d}const fft=1664525,dft=1013904223,Lue=4294967296;function hft(){let e=1;return()=>(e=(fft*e+dft)%Lue)/Lue}function pft(e){return e.x}function mft(e){return e.y}var gft=10,yft=Math.PI*(3-Math.sqrt(5));function vft(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=UY(f),l=GL("tick","end"),c=hft();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=gft*Math.sqrt(.5+m),b=m*yft;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,T,S,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,E=g-S.y,T=w*w+E*E,T<y&&(A=S,y=T);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function bft(){var e,t,n,r,i=Va(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=GY(e,pft,mft).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Wg(n),w+=y*y),v===0&&(v=Wg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Wg(n),w+=y*y),v===0&&(v=Wg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Va(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function _ft(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function wft(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function Eft(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ZO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function CE(e){return e=ZO(Math.abs(e)),e?e[1]:NaN}function xft(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Sft(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Tft=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uv(e){if(!(t=Tft.exec(e)))throw new Error("invalid format: "+e);var t;return new KY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uv.prototype=KY.prototype;function KY(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}KY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Aft(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Jxe;function Cft(e,t){var n=ZO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Jxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ZO(e,Math.max(0,t+s-1))[0]}function Fue(e,t){var n=ZO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const jue={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eft,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Fue(e*100,t),r:Fue,s:Cft,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Bue(e){return e}var Uue=Array.prototype.map,zue=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zxe(e){var t=e.grouping===void 0||e.thousands===void 0?Bue:xft(Uue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Bue:Sft(Uue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Uv(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):jue[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",A=jue[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(N){var O=T,P=S,$,F,L;if(E==="c")P=A(N)+P,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),b),w&&(N=Aft(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,P=(E==="s"?zue[8+Jxe/3]:"")+P+(B&&p==="("?")":""),C){for($=-1,F=N.length;++$<F;)if(L=N.charCodeAt($),48>L||L>57){P=(L===46?i+N.slice($+1):N.slice($))+P,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var z=O.length+N.length+P.length,q=z<y?new Array(y-z+1).join(d):"";switch(v&&g&&(N=t(q+N,q.length?y-P.length:1/0),q=""),h){case"<":N=O+N+P+q;break;case"=":N=O+q+N+P;break;case"^":N=q.slice(0,z=q.length>>1)+O+N+P+q.slice(z);break;default:N=q+O+N+P;break}return s(N)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=Uv(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(CE(d)/3)))*3,m=Math.pow(10,-p),g=zue[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var EN,Qx,XY;Ift({thousands:",",grouping:[3],currency:["$",""]});function Ift(e){return EN=Zxe(e),Qx=EN.format,XY=EN.formatPrefix,EN}function eSe(e){return Math.max(0,-CE(Math.abs(e)))}function tSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(CE(t)/3)))*3-CE(Math.abs(e)))}function nSe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,CE(t)-CE(e))+1}var Bt=1e-6,e3=1e-12,Nn=Math.PI,Gi=Nn/2,t3=Nn/4,Qa=Nn*2,ns=180/Nn,In=Nn/180,Xn=Math.abs,Jx=Math.atan,Rc=Math.atan2,zt=Math.cos,xN=Math.ceil,rSe=Math.exp,A7=Math.hypot,n3=Math.log,e8=Math.pow,Ft=Math.sin,bc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,QY=Math.tan;function iSe(e){return e>1?0:e<-1?Nn:Math.acos(e)}function Gu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function ko(){}function r3(e,t){e&&Hue.hasOwnProperty(e.type)&&Hue[e.type](e,t)}var Vue={Feature:function(e,t){r3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)r3(n[r].geometry,t)}},Hue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){C7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)C7(n[r],t,0)},Polygon:function(e,t){que(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)que(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)r3(n[r],t)}};function C7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function que(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)C7(e[n],t,1);t.polygonEnd()}function Rp(e,t){e&&Vue.hasOwnProperty(e.type)?Vue[e.type](e,t):r3(e,t)}var i3=new Wa,s3=new Wa,sSe,oSe,I7,k7,R7,yh={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){i3=new Wa,yh.lineStart=kft,yh.lineEnd=Rft},polygonEnd:function(){var e=+i3;s3.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=ko},sphere:function(){s3.add(Qa)}};function kft(){yh.point=Nft}function Rft(){aSe(sSe,oSe)}function Nft(e,t){yh.point=aSe,sSe=e,oSe=t,e*=In,t*=In,I7=e,k7=zt(t=t/2+t3),R7=Ft(t)}function aSe(e,t){e*=In,t*=In,t=t/2+t3;var n=e-I7,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=R7*o,u=k7*s+a*zt(i),l=a*r*Ft(i);i3.add(Rc(l,u)),I7=e,k7=s,R7=o}function Pft(e){return s3=new Wa,Rp(e,yh),s3*2}function o3(e){return[Rc(e[1],e[0]),Gu(e[2])]}function zv(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function SN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function IE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function t8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function TN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function a3(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ki,Su,Fi,ml,w1,uSe,lSe,Mw,oA,Ag,wm,Tp={point:N7,lineStart:Wue,lineEnd:Gue,polygonStart:function(){Tp.point=fSe,Tp.lineStart=Dft,Tp.lineEnd=Oft,oA=new Wa,yh.polygonStart()},polygonEnd:function(){yh.polygonEnd(),Tp.point=N7,Tp.lineStart=Wue,Tp.lineEnd=Gue,i3<0?(ki=-(Fi=180),Su=-(ml=90)):oA>Bt?ml=90:oA<-Bt&&(Su=-90),wm[0]=ki,wm[1]=Fi},sphere:function(){ki=-(Fi=180),Su=-(ml=90)}};function N7(e,t){Ag.push(wm=[ki=e,Fi=e]),t<Su&&(Su=t),t>ml&&(ml=t)}function cSe(e,t){var n=zv([e*In,t*In]);if(Mw){var r=IE(Mw,n),i=[r[1],-r[0],0],s=IE(i,r);a3(s),s=o3(s);var o=e-w1,a=o>0?1:-1,u=s[0]*ns*a,l,c=Xn(o)>180;c^(a*w1<u&&u<a*e)?(l=s[1]*ns,l>ml&&(ml=l)):(u=(u+360)%360-180,c^(a*w1<u&&u<a*e)?(l=-s[1]*ns,l<Su&&(Su=l)):(t<Su&&(Su=t),t>ml&&(ml=t))),c?e<w1?hl(ki,e)>hl(ki,Fi)&&(Fi=e):hl(e,Fi)>hl(ki,Fi)&&(ki=e):Fi>=ki?(e<ki&&(ki=e),e>Fi&&(Fi=e)):e>w1?hl(ki,e)>hl(ki,Fi)&&(Fi=e):hl(e,Fi)>hl(ki,Fi)&&(ki=e)}else Ag.push(wm=[ki=e,Fi=e]);t<Su&&(Su=t),t>ml&&(ml=t),Mw=n,w1=e}function Wue(){Tp.point=cSe}function Gue(){wm[0]=ki,wm[1]=Fi,Tp.point=N7,Mw=null}function fSe(e,t){if(Mw){var n=e-w1;oA.add(Xn(n)>180?n+(n>0?360:-360):n)}else uSe=e,lSe=t;yh.point(e,t),cSe(e,t)}function Dft(){yh.lineStart()}function Oft(){fSe(uSe,lSe),yh.lineEnd(),Xn(oA)>Bt&&(ki=-(Fi=180)),wm[0]=ki,wm[1]=Fi,Mw=null}function hl(e,t){return(t-=e)<0?t+360:t}function $ft(e,t){return e[0]-t[0]}function Yue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Mft(e){var t,n,r,i,s,o,a;if(ml=Fi=-(ki=Su=1/0),Ag=[],Rp(e,Tp),n=Ag.length){for(Ag.sort($ft),t=1,r=Ag[0],s=[r];t<n;++t)i=Ag[t],Yue(r,i[0])||Yue(r,i[1])?(hl(r[0],i[1])>hl(r[0],r[1])&&(r[1]=i[1]),hl(i[0],r[1])>hl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=hl(r[1],i[0]))>o&&(o=a,ki=i[0],Fi=r[1])}return Ag=wm=null,ki===1/0||Su===1/0?[[NaN,NaN],[NaN,NaN]]:[[ki,Su],[Fi,ml]]}var i2,u3,l3,c3,f3,d3,h3,p3,P7,D7,O7,dSe,hSe,La,Fa,ja,Tf={sphere:ko,point:JY,lineStart:Kue,lineEnd:Xue,polygonStart:function(){Tf.lineStart=jft,Tf.lineEnd=Bft},polygonEnd:function(){Tf.lineStart=Kue,Tf.lineEnd=Xue}};function JY(e,t){e*=In,t*=In;var n=zt(t);ok(n*zt(e),n*Ft(e),Ft(t))}function ok(e,t,n){++i2,l3+=(e-l3)/i2,c3+=(t-c3)/i2,f3+=(n-f3)/i2}function Kue(){Tf.point=Lft}function Lft(e,t){e*=In,t*=In;var n=zt(t);La=n*zt(e),Fa=n*Ft(e),ja=Ft(t),Tf.point=Fft,ok(La,Fa,ja)}function Fft(e,t){e*=In,t*=In;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Rc(Ja((o=Fa*s-ja*i)*o+(o=ja*r-La*s)*o+(o=La*i-Fa*r)*o),La*r+Fa*i+ja*s);u3+=o,d3+=o*(La+(La=r)),h3+=o*(Fa+(Fa=i)),p3+=o*(ja+(ja=s)),ok(La,Fa,ja)}function Xue(){Tf.point=JY}function jft(){Tf.point=Uft}function Bft(){pSe(dSe,hSe),Tf.point=JY}function Uft(e,t){dSe=e,hSe=t,e*=In,t*=In,Tf.point=pSe;var n=zt(t);La=n*zt(e),Fa=n*Ft(e),ja=Ft(t),ok(La,Fa,ja)}function pSe(e,t){e*=In,t*=In;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Fa*s-ja*i,a=ja*r-La*s,u=La*i-Fa*r,l=A7(o,a,u),c=Gu(l),f=l&&-c/l;P7.add(f*o),D7.add(f*a),O7.add(f*u),u3+=c,d3+=c*(La+(La=r)),h3+=c*(Fa+(Fa=i)),p3+=c*(ja+(ja=s)),ok(La,Fa,ja)}function zft(e){i2=u3=l3=c3=f3=d3=h3=p3=0,P7=new Wa,D7=new Wa,O7=new Wa,Rp(e,Tf);var t=+P7,n=+D7,r=+O7,i=A7(t,n,r);return i<e3&&(t=d3,n=h3,r=p3,u3<Bt&&(t=l3,n=c3,r=f3),i=A7(t,n,r),i<e3)?[NaN,NaN]:[Rc(n,t)*ns,Gu(r/i)*ns]}function $7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function M7(e,t){return Xn(e)>Nn&&(e-=Math.round(e/Qa)*Qa),[e,t]}M7.invert=M7;function mSe(e,t,n){return(e%=Qa)?t||n?$7(Jue(e),Zue(t,n)):Jue(e):t||n?Zue(t,n):M7}function Que(e){return function(t,n){return t+=e,Xn(t)>Nn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function Jue(e){var t=Que(e);return t.invert=Que(-e),t}function Zue(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[Rc(f*i-h*s,c*n-d*r),Gu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[Rc(f*i+d*s,c*n+h*r),Gu(h*n-c*r)]},o}function Vft(e){e=mSe(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=ns,n[1]*=ns,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=ns,n[1]*=ns,n},t}function Hft(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*Qa,s=t-u/2):(i=ele(o,i),s=ele(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=o3([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function ele(e,t){t=zv(t),t[0]-=e,a3(t);var n=iSe(-t[1]);return((-t[2]<0?-n:n)+Qa-Bt)%Qa}function gSe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ko,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tD(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function AN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ySe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(tD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new AN(g,p,null,!0)),o.push(v.o=new AN(g,null,v,!1)),s.push(v=new AN(y,p,null,!1)),o.push(v.o=new AN(y,null,v,!0))}}),!!s.length){for(o.sort(t),tle(s),tle(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function tle(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function n8(e){return Xn(e[0])<=Nn?e[0]:bc(e[0])*((Xn(e[0])+Nn)%Qa-Nn)}function qft(e,t){var n=n8(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Wa;i===1?r=Gi+Bt:i===-1&&(r=-Gi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=n8(h),m=h[1]/2+t3,g=Ft(m),y=zt(m),v=0;v<d;++v,p=w,g=T,y=S,h=b){var b=f[v],w=n8(b),E=b[1]/2+t3,T=Ft(E),S=zt(E),A=w-p,C=A>=0?1:-1,I=C*A,N=I>Nn,O=g*T;if(u.add(Rc(O*C*Ft(I),y*S+O*zt(I))),o+=N?A+C*Qa:A,N^p>=n^w>=n){var P=IE(zv(h),zv(b));a3(P);var $=IE(s,P);a3($);var F=(N^A>=0?-1:1)*Gu($[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=N^A>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-e3)^a&1}function vSe(e,t,n,r){return function(i){var s=t(i),o=gSe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=txe(c);var w=qft(l,r);c.length?(u||(i.polygonStart(),u=!0),ySe(c,Gft,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),T,S=E.length,A,C,I;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<A;++T)i.point((I=C[T])[0],I[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Wft))}}return d}}function Wft(e){return e.length>1}function Gft(e,t){return((e=e.x)[0]<0?e[1]-Gi-Bt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-Bt:Gi-t[1])}const nle=vSe(function(){return!0},Yft,Xft,[-Nn,-Gi]);function Yft(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Nn:-Nn,u=Xn(s-t);Xn(u-Nn)<Bt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Nn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=Kft(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Kft(e,t,n,r){var i,s,o=Ft(e-n);return Xn(o)>Bt?Jx((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function Xft(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Nn,i),r.point(0,i),r.point(Nn,i),r.point(Nn,0),r.point(Nn,-i),r.point(0,-i),r.point(-Nn,-i),r.point(-Nn,0),r.point(-Nn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Nn:-Nn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Qft(e){var t=zt(e),n=2*In,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){Hft(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Nn:-Nn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||tD(f,b)||tD(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var T;!(E&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!tD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=zv(c),p=zv(f),m=[1,0,0],g=IE(h,p),y=SN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,T=IE(m,g),S=TN(m,w),A=TN(g,E);t8(S,A);var C=T,I=SN(S,C),N=SN(C,C),O=I*I-N*(SN(S,S)-1);if(!(O<0)){var P=Ja(O),$=TN(C,(-I-P)/N);if(t8($,S),$=o3($),!d)return $;var F=c[0],L=f[0],B=c[1],z=f[1],q;L<F&&(q=F,F=L,L=q);var D=L-F,U=Xn(D-Nn)<Bt,W=U||D<Bt;if(!U&&z<B&&(q=B,B=z,z=q),W?U?B+z>0^$[1]<(Xn($[0]-F)<Bt?B:z):B<=$[1]&&$[1]<=z:D>Nn^(F<=$[0]&&$[0]<=L)){var j=TN(C,(-I+P)/N);return t8(j,S),[$,o3(j)]}}}function l(c,f){var d=r?e:Nn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return vSe(o,a,s,r?[0,-e]:[-Nn,e-Nn])}function Jft(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var s2=1e9,CN=-s2;function bSe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=gSe(),d,h,p,m,g,y,v,b,w,E,T,S={point:A,lineStart:O,lineEnd:P,polygonStart:I,polygonEnd:N};function A(F,L){i(F,L)&&c.point(F,L)}function C(){for(var F=0,L=0,B=h.length;L<B;++L)for(var z=h[L],q=1,D=z.length,U=z[0],W,j,H=U[0],G=U[1];q<D;++q)W=H,j=G,U=z[q],H=U[0],G=U[1],j<=r?G>r&&(H-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(H-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function I(){c=f,d=[],h=[],T=!0}function N(){var F=C(),L=T&&F,B=(d=txe(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&ySe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=A,w&&c.lineEnd()}function $(F,L){var B=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(F,L));else if(B&&w)c.point(F,L);else{var z=[v=Math.max(CN,Math.min(s2,v)),b=Math.max(CN,Math.min(s2,b))],q=[F=Math.max(CN,Math.min(s2,F)),L=Math.max(CN,Math.min(s2,L))];Jft(z,q,e,t,n,r)?(w||(c.lineStart(),c.point(z[0],z[1])),c.point(q[0],q[1]),B||c.lineEnd(),T=!1):B&&(c.lineStart(),c.point(F,L),T=!1)}v=F,b=L,w=B}return S}}function rle(e,t,n){var r=Pu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function ile(e,t,n){var r=Pu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Zft(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Pu(xN(r/c)*c,n,c).map(p).concat(Pu(xN(a/f)*f,o,f).map(m)).concat(Pu(xN(t/u)*u,e,u).filter(function(b){return Xn(b%c)>Bt}).map(d)).concat(Pu(xN(s/l)*l,i,l).filter(function(b){return Xn(b%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=rle(s,i,90),h=ile(t,e,g),p=rle(a,o,90),m=ile(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const TC=e=>e;var r8=new Wa,L7=new Wa,_Se,wSe,F7,j7,Np={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){Np.lineStart=edt,Np.lineEnd=ndt},polygonEnd:function(){Np.lineStart=Np.lineEnd=Np.point=ko,r8.add(Xn(L7)),L7=new Wa},result:function(){var e=r8/2;return r8=new Wa,e}};function edt(){Np.point=tdt}function tdt(e,t){Np.point=ESe,_Se=F7=e,wSe=j7=t}function ESe(e,t){L7.add(j7*e-F7*t),F7=e,j7=t}function ndt(){ESe(_Se,wSe)}var kE=1/0,m3=kE,AC=-kE,g3=AC,y3={point:rdt,lineStart:ko,lineEnd:ko,polygonStart:ko,polygonEnd:ko,result:function(){var e=[[kE,m3],[AC,g3]];return AC=g3=-(m3=kE=1/0),e}};function rdt(e,t){e<kE&&(kE=e),e>AC&&(AC=e),t<m3&&(m3=t),t>g3&&(g3=t)}var B7=0,U7=0,o2=0,v3=0,b3=0,fw=0,z7=0,V7=0,a2=0,xSe,SSe,$d,Md,gc={point:Vv,lineStart:sle,lineEnd:ole,polygonStart:function(){gc.lineStart=odt,gc.lineEnd=adt},polygonEnd:function(){gc.point=Vv,gc.lineStart=sle,gc.lineEnd=ole},result:function(){var e=a2?[z7/a2,V7/a2]:fw?[v3/fw,b3/fw]:o2?[B7/o2,U7/o2]:[NaN,NaN];return B7=U7=o2=v3=b3=fw=z7=V7=a2=0,e}};function Vv(e,t){B7+=e,U7+=t,++o2}function sle(){gc.point=idt}function idt(e,t){gc.point=sdt,Vv($d=e,Md=t)}function sdt(e,t){var n=e-$d,r=t-Md,i=Ja(n*n+r*r);v3+=i*($d+e)/2,b3+=i*(Md+t)/2,fw+=i,Vv($d=e,Md=t)}function ole(){gc.point=Vv}function odt(){gc.point=udt}function adt(){TSe(xSe,SSe)}function udt(e,t){gc.point=TSe,Vv(xSe=$d=e,SSe=Md=t)}function TSe(e,t){var n=e-$d,r=t-Md,i=Ja(n*n+r*r);v3+=i*($d+e)/2,b3+=i*(Md+t)/2,fw+=i,i=Md*e-$d*t,z7+=i*($d+e),V7+=i*(Md+t),a2+=i*3,Vv($d=e,Md=t)}function ASe(e){this._context=e}ASe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:ko};var H7=new Wa,i8,CSe,ISe,u2,l2,CC={point:ko,lineStart:function(){CC.point=ldt},lineEnd:function(){i8&&kSe(CSe,ISe),CC.point=ko},polygonStart:function(){i8=!0},polygonEnd:function(){i8=null},result:function(){var e=+H7;return H7=new Wa,e}};function ldt(e,t){CC.point=kSe,CSe=u2=e,ISe=l2=t}function kSe(e,t){u2-=e,l2-=t,H7.add(Ja(u2*u2+l2*l2)),u2=e,l2=t}let ale,_3,ule,lle;class cle{constructor(t){this._append=t==null?RSe:cdt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==ule||this._append!==_3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,ule=r,_3=this._append,lle=this._,this._=i}this._+=lle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function RSe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cdt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return RSe;if(t!==ale){const n=10**t;ale=t,_3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return _3}function NSe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Rp(a,i(s))),s.result()}return o.area=function(a){return Rp(a,i(Np)),Np.result()},o.measure=function(a){return Rp(a,i(CC)),CC.result()},o.bounds=function(a){return Rp(a,i(y3)),y3.result()},o.centroid=function(a){return Rp(a,i(gc)),gc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,TC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new cle(n)):new ASe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new cle(n)),o},o.projection(e).digits(n).context(t)}function n6(e){return function(t){var n=new q7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function q7(){}q7.prototype={constructor:q7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ZY(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Rp(n,e.stream(y3)),t(y3.result()),r!=null&&e.clipExtent(r),e}function r6(e,t,n){return ZY(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function eK(e,t,n){return r6(e,[[0,0],t],n)}function tK(e,t,n){return ZY(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function nK(e,t,n){return ZY(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var fle=16,fdt=zt(30*In);function dle(e,t){return+t?hdt(e,t):ddt(e)}function ddt(e){return n6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function hdt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,T=u+p,S=Ja(w*w+E*E+T*T),A=Gu(T/=S),C=Xn(Xn(T)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:Rc(E,w),I=e(C,A),N=I[0],O=I[1],P=N-r,$=O-i,F=v*P-y*$;(F*F/b>t||Xn((y*P+v*$)/b-.5)>.3||o*d+a*h+u*p<fdt)&&(n(r,i,s,o,a,u,N,O,C,w/=S,E/=S,T,m,g),g.point(N,O),n(N,O,C,w,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var I=zv([A,C]),N=e(A,C);n(f,d,c,h,p,m,f=N[0],d=N[1],c=A,h=I[0],p=I[1],m=I[2],fle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=T,g.lineEnd=S}function T(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,fle,r),g.lineEnd=w,w()}return g}}var pdt=n6({point:function(e,t){this.stream.point(e*In,t*In)}});function mdt(e){return n6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function gdt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function hle(e,t,n,r,i,s){if(!s)return gdt(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Hh(e){return PSe(function(){return e})()}function PSe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=nle,g=null,y,v,b,w=TC,E=.5,T,S,A,C,I;function N(F){return A(F[0]*In,F[1]*In)}function O(F){return F=A.invert(F[0],F[1]),F&&[F[0]*ns,F[1]*ns]}N.stream=function(F){return C&&I===F?C:C=pdt(mdt(c)(m(T(w(I=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?Qft(p=F*In):(p=null,nle),$()):p*ns},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,TC):bSe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},N.scale=function(F){return arguments.length?(n=+F,P()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*In,o=F[1]%360*In,P()):[s*ns,o*ns]},N.rotate=function(F){return arguments.length?(a=F[0]%360*In,u=F[1]%360*In,l=F.length>2?F[2]%360*In:0,P()):[a*ns,u*ns,l*ns]},N.angle=function(F){return arguments.length?(f=F%360*In,P()):f*ns},N.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},N.precision=function(F){return arguments.length?(T=dle(S,E=F*F),$()):Ja(E)},N.fitExtent=function(F,L){return r6(N,F,L)},N.fitSize=function(F,L){return eK(N,F,L)},N.fitWidth=function(F,L){return tK(N,F,L)},N.fitHeight=function(F,L){return nK(N,F,L)};function P(){var F=hle(n,0,0,d,h,f).apply(null,t(s,o)),L=hle(n,r-F[0],i-F[1],d,h,f);return c=mSe(a,u,l),S=$7(t,L),A=$7(c,S),T=dle(S,E),$()}function $(){return C=I=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,P()}}function rK(e){var t=0,n=Nn/3,r=PSe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*ns,n*ns]},i}function ydt(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,Gu(i*t)]},n}function vdt(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Xn(r)<Bt)return ydt(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,u){var l=Ja(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=Rc(a,Xn(l))*bc(l);return l*r<0&&(c-=Nn*bc(a)*bc(l)),[c/r,Gu((i-(a*a+l*l)*r*r)/(2*r))]},o}function w3(){return rK(vdt).scale(155.424).center([0,33.6442])}function DSe(){return w3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function bdt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function _dt(){var e,t,n=DSe(),r,i=w3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=w3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=bdt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return r6(c,d,h)},c.fitSize=function(d,h){return eK(c,d,h)},c.fitWidth=function(d,h){return tK(c,d,h)},c.fitHeight=function(d,h){return nK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function OSe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function ak(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[Rc(t*s,r*o),Gu(r&&n*s/r)]}}var $Se=OSe(function(e){return Ja(2/(1+e))});$Se.invert=ak(function(e){return 2*Gu(e/2)});function wdt(){return Hh($Se).scale(124.75).clipAngle(180-.001)}var MSe=OSe(function(e){return(e=iSe(e))&&e/Ft(e)});MSe.invert=ak(function(e){return e});function Edt(){return Hh(MSe).scale(79.4188).clipAngle(180-.001)}function i6(e,t){return[e,n3(QY((Gi+t)/2))]}i6.invert=function(e,t){return[e,2*Jx(rSe(t))-Gi]};function xdt(){return LSe(i6).scale(961/Qa)}function LSe(e){var t=Hh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Nn*r(),d=t(Vft(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===i6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function IN(e){return QY((Gi+e)/2)}function Sdt(e,t){var n=zt(e),r=e===t?Ft(e):n3(n/zt(t))/n3(IN(t)/IN(e)),i=n*e8(IN(e),r)/r;if(!r)return i6;function s(o,a){i>0?a<-Gi+Bt&&(a=-Gi+Bt):a>Gi-Bt&&(a=Gi-Bt);var u=i/e8(IN(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=bc(r)*Ja(o*o+u*u),c=Rc(o,Xn(u))*bc(u);return u*r<0&&(c-=Nn*bc(o)*bc(u)),[c/r,2*Jx(e8(i/l,1/r))-Gi]},s}function Tdt(){return rK(Sdt).scale(109.5).parallels([30,30])}function E3(e,t){return[e,t]}E3.invert=E3;function Adt(){return Hh(E3).scale(152.63)}function Cdt(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return E3;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=Rc(o,Xn(u))*bc(u);return u*r<0&&(l-=Nn*bc(o)*bc(u)),[l/r,i-bc(r)*Ja(o*o+u*u)]},s}function Idt(){return rK(Cdt).scale(131.154).center([0,13.9389])}var aA=1.340264,uA=-.081106,lA=893e-6,cA=.003796,x3=Ja(3)/2,kdt=12;function FSe(e,t){var n=Gu(x3*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(x3*(aA+3*uA*r+i*(7*lA+9*cA*r))),n*(aA+uA*r+i*(lA+cA*r))]}FSe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<kdt&&(a=n*(aA+uA*r+i*(lA+cA*r))-t,u=aA+3*uA*r+i*(7*lA+9*cA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<e3));++s);return[x3*e*(aA+3*uA*r+i*(7*lA+9*cA*r))/zt(n),Gu(Ft(n)/x3)]};function Rdt(){return Hh(FSe).scale(177.158)}function jSe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}jSe.invert=ak(Jx);function Ndt(){return Hh(jSe).scale(144.049).clipAngle(60)}function Pdt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=n6({point:function(w,E){var T=b([w,E]);this.stream.point(T[0],T[1])}}),m=TC,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,T=w[1]*h;if(s){var S=T*o-E*a;E=E*o+T*a,T=S}return[E+t,T+n]}return b.invert=function(w){var E=w[0]-t,T=w[1]-n;if(s){var S=T*o+E*a;E=E*o-T*a,T=S}return[E/d,T/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,TC):bSe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*In,a=Ft(s),o=zt(s),v()):s*ns},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return r6(b,w,E)},b.fitSize=function(w,E){return eK(b,w,E)},b.fitWidth=function(w,E){return tK(b,w,E)},b.fitHeight=function(w,E){return nK(b,w,E)},b}function BSe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}BSe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Ddt(){return Hh(BSe).scale(175.295)}function USe(e,t){return[zt(t)*Ft(e),Ft(t)]}USe.invert=ak(Gu);function Odt(){return Hh(USe).scale(249.5).clipAngle(90+Bt)}function zSe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}zSe.invert=ak(function(e){return 2*Jx(e)});function $dt(){return Hh(zSe).scale(250).clipAngle(142)}function VSe(e,t){return[n3(QY((Gi+t)/2)),-e]}VSe.invert=function(e,t){return[-t,2*Jx(rSe(e))-Gi]};function Mdt(){var e=LSe(VSe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ldt(e,t){return e.parent===t.parent?1:2}function Fdt(e){return e.reduce(jdt,0)/e.length}function jdt(e,t){return e+t.x}function Bdt(e){return 1+e.reduce(Udt,0)}function Udt(e,t){return Math.max(e,t.y)}function zdt(e){for(var t;t=e.children;)e=t[0];return e}function Vdt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Hdt(){var e=Ldt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Fdt(h),d.y=Bdt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=zdt(s),l=Vdt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function qdt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Wdt(){return this.eachAfter(qdt)}function Gdt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ydt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Kdt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Xdt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Qdt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Jdt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Zdt(e){for(var t=this,n=eht(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function eht(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function tht(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function nht(){return Array.from(this)}function rht(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function iht(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*sht(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function s6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=uht)):t===void 0&&(t=aht);for(var n=new RE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new RE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(HSe)}function oht(){return s6(this).eachBefore(lht)}function aht(e){return e.children}function uht(e){return Array.isArray(e)?e[1]:null}function lht(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function HSe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function RE(e){this.data=e,this.depth=this.height=0,this.parent=null}RE.prototype=s6.prototype={constructor:RE,count:Wdt,each:Gdt,eachAfter:Kdt,eachBefore:Ydt,find:Xdt,sum:Qdt,sort:Jdt,path:Zdt,ancestors:tht,descendants:nht,leaves:rht,links:iht,copy:oht,[Symbol.iterator]:sht};function nD(e){return e==null?null:qSe(e)}function qSe(e){if(typeof e!="function")throw new Error;return e}function $1(){return 0}function j_(e){return function(){return e}}const cht=1664525,fht=1013904223,ple=4294967296;function dht(){let e=1;return()=>(e=(cht*e+fht)%ple)/ple}function hht(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pht(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function mht(e,t){for(var n=0,r=(e=pht(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&WSe(o,s)?++n:(o=yht(i=ght(i,s)),n=0);return o}function ght(e,t){var n,r;if(s8(t,e))return[t];for(n=0;n<e.length;++n)if(kN(t,e[n])&&s8(c2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(kN(c2(e[n],e[r]),t)&&kN(c2(e[n],t),e[r])&&kN(c2(e[r],t),e[n])&&s8(GSe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function kN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function WSe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function s8(e,t){for(var n=0;n<t.length;++n)if(!WSe(e,t[n]))return!1;return!0}function yht(e){switch(e.length){case 1:return vht(e[0]);case 2:return c2(e[0],e[1]);case 3:return GSe(e[0],e[1],e[2])}}function vht(e){return{x:e.x,y:e.y,r:e.r}}function c2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function GSe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,T=(p*w-m*b)/(E*2)-r,S=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,I=S*S+C*C-1,N=2*(s+T*S+A*C),O=T*T+A*A-s*s,P=-(Math.abs(I)>1e-6?(N+Math.sqrt(N*N-4*I*O))/(2*I):O/N);return{x:r+T+S*P,y:i+A+C*P,r:P}}function mle(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function gle(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function yle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function RN(e){this._=e,this.next=null,this.previous=null}function bht(e,t){if(!(s=(e=hht(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;mle(r,n,i=e[2]),n=new RN(n),r=new RN(r),i=new RN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){mle(n._,r._,i=e[u]),i=new RN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(gle(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(gle(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=yle(n);(i=i.next)!==r;)(a=yle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=mht(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function _ht(e){return Math.sqrt(e.value)}function YSe(){var e=null,t=1,n=1,r=$1;function i(s){const o=dht();return s.x=t/2,s.y=n/2,e?s.eachBefore(vle(e)).eachAfter(o8(r,.5,o)).eachBefore(ble(1)):s.eachBefore(vle(_ht)).eachAfter(o8($1,1,o)).eachAfter(o8(r,s.r/Math.min(t,n),o)).eachBefore(ble(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=nD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:j_(+s),i):r},i}function vle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function o8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=bht(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function ble(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function KSe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function uk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function wht(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(KSe),o}function s(o,a){return function(u){u.children&&uk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Eht={depth:-1},_le={},a8={};function xht(e){return e.id}function Sht(e){return e.parentId}function wle(){var e=xht,t=Sht,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Tht(n(w,E,i))),v=y.map(Ele),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(Ele(w)),s.push(a8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new RE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?_le:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===_le)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===a8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===a8);--y)h.data=null}if(f.parent=Eht,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(HSe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=nD(i),r):e},r.parentId=function(i){return arguments.length?(t=nD(i),r):t},r.path=function(i){return arguments.length?(n=nD(i),r):n},r}function Tht(e){e=`${e}`;let t=e.length;return W7(e,t-1)&&!W7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Ele(e){let t=e.length;if(t<2)return"";for(;--t>1&&!W7(e,t););return e.slice(0,t)}function W7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Aht(e,t){return e.parent===t.parent?1:2}function u8(e){var t=e.children;return t?t[0]:e.t}function l8(e){var t=e.children;return t?t[t.length-1]:e.t}function Cht(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Iht(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function kht(e,t,n){return e.a.parent===t.parent?e.a:n}function rD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}rD.prototype=Object.create(RE.prototype);function Rht(e){for(var t=new rD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new rD(s[o],o)),i.parent=n;return(t.parent=new rD(null,0)).children=[t],t}function Nht(){var e=Aht,t=1,n=1,r=null;function i(l){var c=Rht(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Iht(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=l8(p),d=u8(d),p&&d;)m=u8(m),h=l8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(Cht(kht(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!l8(h)&&(h.t=p,h.m+=v-y),d&&!u8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function o6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var XSe=(1+Math.sqrt(5))/2;function QSe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*E,b=Math.max(v/T,T/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?uk(u,n,r,i,m?r+=p*g/m:s):o6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const JSe=function e(t){function n(r,i,s,o,a){QSe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(XSe);function Pht(){var e=JSe,t=!1,n=1,r=1,i=[0],s=$1,o=$1,a=$1,u=$1,l=$1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(KSe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=qSe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:j_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:j_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:j_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:j_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:j_(+d),c):l},c}function Dht(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,T=d-1;E<T;){var S=E+T>>>1;l[S]<w?E=S+1:T=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var I=h?(p*C+g*A)/h:g;c(f,E,A,p,m,I,y),c(E,d,C,I,m,g,y)}else{var N=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,N),c(E,d,C,p,N,g,y)}}}function Oht(e,t,n,r,i){(e.depth&1?o6:uk)(e,t,n,r,i)}const $ht=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?uk(l,i,s,o,m?s+=(a-s)*l.value/m:a):o6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=QSe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(XSe);function ed(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Dy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const G7=Symbol("implicit");function Zx(){var e=new rue,t=[],n=[],r=G7;function i(s){let o=e.get(s);if(o===void 0){if(r!==G7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new rue;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Zx(t,n).unknown(r)},ed.apply(i,arguments),i}function lk(){var e=Zx().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Pu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return lk(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},ed.apply(f(),arguments)}function Mht(e){return function(){return e}}function Y7(e){return+e}var xle=[0,1];function Du(e){return e}function K7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Mht(isNaN(t)?NaN:.5)}function Lht(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Fht(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=K7(i,r),s=n(o,s)):(r=K7(r,i),s=n(s,o)),function(a){return s(r(a))}}function jht(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=K7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=F0(e,a,1,r)-1;return s[u](i[u](a))}}function ck(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function a6(){var e=xle,t=xle,n=Ym,r,i,s,o=Du,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Du&&(o=Lht(e[0],e[d-1])),a=d>2?jht:Fht,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),dc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Y7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=ik,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Du,c()):o!==Du},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function ZSe(){return a6()(Du,Du)}function eTe(e,t,n,r){var i=j0(e,t,n),s;switch(r=Uv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=tSe(i,o))&&(r.precision=s),XY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=nSe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=eSe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Qx(r)}function Ob(e){var t=e.domain;return e.ticks=function(n){var r=t();return a7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return eTe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=u7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Em(){var e=ZSe();return e.copy=function(){return ck(e,Em())},ed.apply(e,arguments),Ob(e)}function tTe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Y7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return tTe(e).unknown(t)},e=arguments.length?Array.from(e,Y7):[0,1],Ob(n)}function nTe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Sle(e){return Math.log(e)}function Tle(e){return Math.exp(e)}function Bht(e){return-Math.log(-e)}function Uht(e){return-Math.exp(-e)}function zht(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vht(e){return e===10?zht:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Hht(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ale(e){return(t,n)=>-e(-t,n)}function iK(e){const t=e(Sle,Tle),n=t.domain;let r=10,i,s;function o(){return i=Hht(r),s=Vht(r),n()[0]<0?(i=Ale(i),s=Ale(s),e(Bht,Uht)):e(Sle,Tle),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=a7(l,c,g))}else y=a7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Uv(u)).precision==null&&(u.trim=!0),u=Qx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(nTe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function rTe(){const e=iK(a6()).domain([1,10]);return e.copy=()=>ck(e,rTe()).base(e.base()),ed.apply(e,arguments),e}function Cle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ile(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sK(e){var t=1,n=e(Cle(t),Ile(t));return n.constant=function(r){return arguments.length?e(Cle(t=+r),Ile(t)):t},Ob(n)}function iTe(){var e=sK(a6());return e.copy=function(){return ck(e,iTe()).constant(e.constant())},ed.apply(e,arguments)}function kle(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qht(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Wht(e){return e<0?-e*e:e*e}function oK(e){var t=e(Du,Du),n=1;function r(){return n===1?e(Du,Du):n===.5?e(qht,Wht):e(kle(n),kle(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ob(t)}function aK(){var e=oK(a6());return e.copy=function(){return ck(e,aK()).exponent(e.exponent())},ed.apply(e,arguments),e}function Ght(){return aK.apply(null,arguments).exponent(.5)}function sTe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=ZEe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[F0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Qp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return sTe().domain(e).range(t).unknown(r)},ed.apply(s,arguments)}function oTe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[F0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return oTe().domain([e,t]).range(i).unknown(s)},ed.apply(Ob(o),arguments)}function aTe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[F0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return aTe().domain(e).range(t).unknown(n)},ed.apply(i,arguments)}const c8=new Date,f8=new Date;function Vs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Vs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(c8.setTime(+s),f8.setTime(+o),e(c8),e(f8),Math.floor(n(c8,f8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const NE=Vs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);NE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):NE);NE.range;const Bp=1e3,_c=Bp*60,Up=_c*60,xm=Up*24,uK=xm*7,Rle=xm*30,d8=xm*365,zp=Vs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getUTCSeconds());zp.range;const u6=Vs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bp)},(e,t)=>{e.setTime(+e+t*_c)},(e,t)=>(t-e)/_c,e=>e.getMinutes());u6.range;const l6=Vs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_c)},(e,t)=>(t-e)/_c,e=>e.getUTCMinutes());l6.range;const c6=Vs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bp-e.getMinutes()*_c)},(e,t)=>{e.setTime(+e+t*Up)},(e,t)=>(t-e)/Up,e=>e.getHours());c6.range;const f6=Vs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Up)},(e,t)=>(t-e)/Up,e=>e.getUTCHours());f6.range;const Zp=Vs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_c)/xm,e=>e.getDate()-1);Zp.range;const g0=Vs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xm,e=>e.getUTCDate()-1);g0.range;const uTe=Vs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xm,e=>Math.floor(e/xm));uTe.range;function $b(e){return Vs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_c)/uK)}const eS=$b(0),S3=$b(1),Yht=$b(2),Kht=$b(3),PE=$b(4),Xht=$b(5),Qht=$b(6);eS.range;S3.range;Yht.range;Kht.range;PE.range;Xht.range;Qht.range;function Mb(e){return Vs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/uK)}const tS=Mb(0),T3=Mb(1),Jht=Mb(2),Zht=Mb(3),DE=Mb(4),ept=Mb(5),tpt=Mb(6);tS.range;T3.range;Jht.range;Zht.range;DE.range;ept.range;tpt.range;const IC=Vs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());IC.range;const kC=Vs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kC.range;const vh=Vs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});vh.range;const bh=Vs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});bh.range;function lTe(e,t,n,r,i,s){const o=[[zp,1,Bp],[zp,5,5*Bp],[zp,15,15*Bp],[zp,30,30*Bp],[s,1,_c],[s,5,5*_c],[s,15,15*_c],[s,30,30*_c],[i,1,Up],[i,3,3*Up],[i,6,6*Up],[i,12,12*Up],[r,1,xm],[r,2,2*xm],[n,1,uK],[t,1,Rle],[t,3,3*Rle],[e,1,d8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Kx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(j0(l/d8,c/d8,f));if(h===0)return NE.every(Math.max(j0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[npt,rpt]=lTe(bh,kC,tS,uTe,f6,l6),[ipt,spt]=lTe(vh,IC,eS,Zp,c6,u6);function h8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function p8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cTe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=gT(i),c=yT(i),f=gT(s),d=yT(s),h=gT(o),p=yT(o),m=gT(a),g=yT(a),y=gT(u),v=yT(u),b={a:B,A:z,b:q,B:D,c:null,d:Mle,e:Mle,f:Ipt,g:Fpt,G:Bpt,H:Tpt,I:Apt,j:Cpt,L:fTe,m:kpt,M:Rpt,p:U,q:W,Q:jle,s:Ble,S:Npt,u:Ppt,U:Dpt,V:Opt,w:$pt,W:Mpt,x:null,X:null,y:Lpt,Y:jpt,Z:Upt,"%":Fle},w={a:j,A:H,b:G,B:ne,c:null,d:Lle,e:Lle,f:qpt,g:tmt,G:rmt,H:zpt,I:Vpt,j:Hpt,L:hTe,m:Wpt,M:Gpt,p:ce,q:de,Q:jle,s:Ble,S:Ypt,u:Kpt,U:Xpt,V:Qpt,w:Jpt,W:Zpt,x:null,X:null,y:emt,Y:nmt,Z:imt,"%":Fle},E={a:I,A:N,b:O,B:P,c:$,d:Ole,e:Ole,f:wpt,g:Dle,G:Ple,H:$le,I:$le,j:ypt,L:_pt,m:gpt,M:vpt,p:C,q:mpt,Q:xpt,s:Spt,S:bpt,u:cpt,U:fpt,V:dpt,w:lpt,W:hpt,x:F,X:L,y:Dle,Y:Ple,Z:ppt,"%":Ept};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(he,ye){return function(Ie){var be=[],Ke=-1,Ue=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<yt;)he.charCodeAt(Ke)===37&&(be.push(he.slice(Ue,Ke)),(_e=Nle[it=he.charAt(++Ke)])!=null?it=he.charAt(++Ke):_e=it==="e"?" ":"0",(ke=ye[it])&&(it=ke(Ie,_e)),be.push(it),Ue=Ke+1);return be.push(he.slice(Ue,Ke)),be.join("")}}function S(he,ye){return function(Ie){var be=mT(1900,void 0,1),Ke=A(be,he,Ie+="",0),Ue,yt;if(Ke!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ye&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=p8(mT(be.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?T3.ceil(Ue):T3(Ue),Ue=g0.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=h8(mT(be.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?S3.ceil(Ue):S3(Ue),Ue=Zp.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?p8(mT(be.y,0,1)).getUTCDay():h8(mT(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,p8(be)):h8(be)}}function A(he,ye,Ie,be){for(var Ke=0,Ue=ye.length,yt=Ie.length,it,_e;Ke<Ue;){if(be>=yt)return-1;if(it=ye.charCodeAt(Ke++),it===37){if(it=ye.charAt(Ke++),_e=E[it in Nle?ye.charAt(Ke++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function C(he,ye,Ie){var be=l.exec(ye.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function I(he,ye,Ie){var be=h.exec(ye.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function N(he,ye,Ie){var be=f.exec(ye.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ye,Ie){var be=y.exec(ye.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function P(he,ye,Ie){var be=m.exec(ye.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ye,Ie){return A(he,t,ye,Ie)}function F(he,ye,Ie){return A(he,n,ye,Ie)}function L(he,ye,Ie){return A(he,r,ye,Ie)}function B(he){return o[he.getDay()]}function z(he){return s[he.getDay()]}function q(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function U(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function H(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=T(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=S(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=T(he+="",w);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=S(he+="",!0);return ye.toString=function(){return he},ye}}}var Nle={"-":"",_:" ",0:"0"},po=/^\s*\d+/,opt=/^%/,apt=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function upt(e){return e.replace(apt,"\\$&")}function gT(e){return new RegExp("^(?:"+e.map(upt).join("|")+")","i")}function yT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function lpt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function cpt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function fpt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function dpt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function hpt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ple(e,t,n){var r=po.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Dle(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ppt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mpt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function gpt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ole(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ypt(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function $le(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function vpt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function bpt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _pt(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wpt(e,t,n){var r=po.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ept(e,t,n){var r=opt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xpt(e,t,n){var r=po.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Spt(e,t,n){var r=po.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Mle(e,t){return mr(e.getDate(),t,2)}function Tpt(e,t){return mr(e.getHours(),t,2)}function Apt(e,t){return mr(e.getHours()%12||12,t,2)}function Cpt(e,t){return mr(1+Zp.count(vh(e),e),t,3)}function fTe(e,t){return mr(e.getMilliseconds(),t,3)}function Ipt(e,t){return fTe(e,t)+"000"}function kpt(e,t){return mr(e.getMonth()+1,t,2)}function Rpt(e,t){return mr(e.getMinutes(),t,2)}function Npt(e,t){return mr(e.getSeconds(),t,2)}function Ppt(e){var t=e.getDay();return t===0?7:t}function Dpt(e,t){return mr(eS.count(vh(e)-1,e),t,2)}function dTe(e){var t=e.getDay();return t>=4||t===0?PE(e):PE.ceil(e)}function Opt(e,t){return e=dTe(e),mr(PE.count(vh(e),e)+(vh(e).getDay()===4),t,2)}function $pt(e){return e.getDay()}function Mpt(e,t){return mr(S3.count(vh(e)-1,e),t,2)}function Lpt(e,t){return mr(e.getFullYear()%100,t,2)}function Fpt(e,t){return e=dTe(e),mr(e.getFullYear()%100,t,2)}function jpt(e,t){return mr(e.getFullYear()%1e4,t,4)}function Bpt(e,t){var n=e.getDay();return e=n>=4||n===0?PE(e):PE.ceil(e),mr(e.getFullYear()%1e4,t,4)}function Upt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function Lle(e,t){return mr(e.getUTCDate(),t,2)}function zpt(e,t){return mr(e.getUTCHours(),t,2)}function Vpt(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Hpt(e,t){return mr(1+g0.count(bh(e),e),t,3)}function hTe(e,t){return mr(e.getUTCMilliseconds(),t,3)}function qpt(e,t){return hTe(e,t)+"000"}function Wpt(e,t){return mr(e.getUTCMonth()+1,t,2)}function Gpt(e,t){return mr(e.getUTCMinutes(),t,2)}function Ypt(e,t){return mr(e.getUTCSeconds(),t,2)}function Kpt(e){var t=e.getUTCDay();return t===0?7:t}function Xpt(e,t){return mr(tS.count(bh(e)-1,e),t,2)}function pTe(e){var t=e.getUTCDay();return t>=4||t===0?DE(e):DE.ceil(e)}function Qpt(e,t){return e=pTe(e),mr(DE.count(bh(e),e)+(bh(e).getUTCDay()===4),t,2)}function Jpt(e){return e.getUTCDay()}function Zpt(e,t){return mr(T3.count(bh(e)-1,e),t,2)}function emt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function tmt(e,t){return e=pTe(e),mr(e.getUTCFullYear()%100,t,2)}function nmt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function rmt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?DE(e):DE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function imt(){return"+0000"}function Fle(){return"%"}function jle(e){return+e}function Ble(e){return Math.floor(+e/1e3)}var __,lK,mTe,d6,gTe;smt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function smt(e){return __=cTe(e),lK=__.format,mTe=__.parse,d6=__.utcFormat,gTe=__.utcParse,__}function omt(e){return new Date(e)}function amt(e){return e instanceof Date?+e:+new Date(+e)}function cK(e,t,n,r,i,s,o,a,u,l){var c=ZSe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?b:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,amt)):d().map(omt)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?E:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(nTe(S,T)):c},c.copy=function(){return ck(c,cK(e,t,n,r,i,s,o,a,u,l))},c}function yTe(){return ed.apply(cK(ipt,spt,vh,IC,eS,Zp,c6,u6,zp,lK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function umt(){return ed.apply(cK(npt,rpt,bh,kC,tS,g0,f6,l6,zp,d6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function h6(){var e=0,t=1,n,r,i,s,o=Du,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Ym),l.rangeRound=c(ik),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Oy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fK(){var e=Ob(h6()(Du));return e.copy=function(){return Oy(e,fK())},Dy.apply(e,arguments)}function vTe(){var e=iK(h6()).domain([1,10]);return e.copy=function(){return Oy(e,vTe()).base(e.base())},Dy.apply(e,arguments)}function bTe(){var e=sK(h6());return e.copy=function(){return Oy(e,bTe()).constant(e.constant())},Dy.apply(e,arguments)}function dK(){var e=oK(h6());return e.copy=function(){return Oy(e,dK()).exponent(e.exponent())},Dy.apply(e,arguments)}function lmt(){return dK.apply(null,arguments).exponent(.5)}function p6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Du,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=BY(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Ym),h.rangeRound=p(ik),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function _Te(){var e=Ob(p6()(Du));return e.copy=function(){return Oy(e,_Te())},Dy.apply(e,arguments)}function wTe(){var e=iK(p6()).domain([.1,1,10]);return e.copy=function(){return Oy(e,wTe()).base(e.base())},Dy.apply(e,arguments)}function ETe(){var e=sK(p6());return e.copy=function(){return Oy(e,ETe()).constant(e.constant())},Dy.apply(e,arguments)}function hK(){var e=oK(p6());return e.copy=function(){return Oy(e,hK()).exponent(e.exponent())},Dy.apply(e,arguments)}function cmt(){return hK.apply(null,arguments).exponent(.5)}function td(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const fmt=td("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),dmt=td("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),hmt=td("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),pmt=td("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),mmt=td("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),gmt=td("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ymt=td("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),vmt=td("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),bmt=td("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),_mt=td("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),xTe=td("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function _n(e){return function(){return e}}const Ule=Math.abs,Jo=Math.atan2,s1=Math.cos,wmt=Math.max,m8=Math.min,md=Math.sin,Z1=Math.sqrt,ta=1e-12,OE=Math.PI,A3=OE/2,fA=2*OE;function Emt(e){return e>1?0:e<-1?OE:Math.acos(e)}function zle(e){return e>=1?A3:e<=-1?-A3:Math.asin(e)}function m6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new qY(t)}function xmt(e){return e.innerRadius}function Smt(e){return e.outerRadius}function Tmt(e){return e.startAngle}function Amt(e){return e.endAngle}function Cmt(e){return e&&e.padAngle}function Imt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ta))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function NN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Z1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,T=d*m-p*h,S=(b<0?-1:1)*Z1(wmt(0,E*E*w-T*T)),A=(T*b-v*S)/w,C=(-T*v-b*S)/w,I=(T*b+v*S)/w,N=(-T*v+b*S)/w,O=A-g,P=C-y,$=I-g,F=N-y;return O*O+P*P>$*$+F*F&&(A=I,C=N),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function X7(){var e=xmt,t=Smt,n=_n(0),r=null,i=Tmt,s=Amt,o=Cmt,a=null,u=m6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-A3,m=s.apply(this,arguments)-A3,g=Ule(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ta))a.moveTo(0,0);else if(g>fA-ta)a.moveTo(h*s1(p),h*md(p)),a.arc(0,0,h,p,m,!y),d>ta&&(a.moveTo(d*s1(m),d*md(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,T=g,S=g,A=o.apply(this,arguments)/2,C=A>ta&&(r?+r.apply(this,arguments):Z1(d*d+h*h)),I=m8(Ule(h-d)/2,+n.apply(this,arguments)),N=I,O=I,P,$;if(C>ta){var F=zle(C/d*md(A)),L=zle(C/h*md(A));(T-=F*2)>ta?(F*=y?1:-1,w+=F,E-=F):(T=0,w=E=(p+m)/2),(S-=L*2)>ta?(L*=y?1:-1,v+=L,b-=L):(S=0,v=b=(p+m)/2)}var B=h*s1(v),z=h*md(v),q=d*s1(E),D=d*md(E);if(I>ta){var U=h*s1(b),W=h*md(b),j=d*s1(w),H=d*md(w),G;if(g<OE)if(G=Imt(B,z,j,H,U,W,q,D)){var ne=B-G[0],ce=z-G[1],de=U-G[0],he=W-G[1],ye=1/md(Emt((ne*de+ce*he)/(Z1(ne*ne+ce*ce)*Z1(de*de+he*he)))/2),Ie=Z1(G[0]*G[0]+G[1]*G[1]);N=m8(I,(d-Ie)/(ye-1)),O=m8(I,(h-Ie)/(ye+1))}else N=O=0}S>ta?O>ta?(P=NN(j,H,B,z,h,O,y),$=NN(U,W,q,D,h,O,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),O<I?a.arc(P.cx,P.cy,O,Jo(P.y01,P.x01),Jo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,O,Jo(P.y01,P.x01),Jo(P.y11,P.x11),!y),a.arc(0,0,h,Jo(P.cy+P.y11,P.cx+P.x11),Jo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Jo($.y11,$.x11),Jo($.y01,$.x01),!y))):(a.moveTo(B,z),a.arc(0,0,h,v,b,!y)):a.moveTo(B,z),!(d>ta)||!(T>ta)?a.lineTo(q,D):N>ta?(P=NN(q,D,U,W,d,-N,y),$=NN(B,z,j,H,d,-N,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),N<I?a.arc(P.cx,P.cy,N,Jo(P.y01,P.x01),Jo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,N,Jo(P.y01,P.x01),Jo(P.y11,P.x11),!y),a.arc(0,0,d,Jo(P.cy+P.y11,P.cx+P.x11),Jo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,Jo($.y11,$.x11),Jo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-OE/2;return[s1(f)*c,md(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:_n(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:_n(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:_n(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_n(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:_n(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:_n(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:_n(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function g6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function STe(e){this._context=e}STe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pK(e){return new STe(e)}function TTe(e){return e[0]}function ATe(e){return e[1]}function CTe(e,t){var n=_n(!0),r=null,i=pK,s=null,o=m6(a);e=typeof e=="function"?e:e===void 0?TTe:_n(e),t=typeof t=="function"?t:t===void 0?ATe:_n(t);function a(u){var l,c=(u=g6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:_n(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:_n(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_n(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function ITe(e,t,n){var r=null,i=_n(!0),s=null,o=pK,a=null,u=m6(l);e=typeof e=="function"?e:e===void 0?TTe:_n(+e),t=typeof t=="function"?t:_n(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ATe:_n(+n);function l(f){var d,h,p,m=(f=g6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return CTe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_n(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_n(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_n(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function kmt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Rmt(e){return e}function Nmt(){var e=Rmt,t=kmt,n=null,r=_n(0),i=_n(fA),s=_n(0);function o(a){var u,l=(a=g6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(fA,Math.max(-fA,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:_n(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:_n(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:_n(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:_n(+a),o):s},o}const Pmt={draw(e,t){const n=Z1(t/OE);e.moveTo(n,0),e.arc(0,0,n,0,fA)}};function Dmt(e,t){let n=null,r=m6(i);e=typeof e=="function"?e:_n(e||Pmt),t=typeof t=="function"?t:_n(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_n(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_n(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function U0(){}function C3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function y6(e){this._context=e}y6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Omt(e){return new y6(e)}function kTe(e){this._context=e}kTe.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $mt(e){return new kTe(e)}function RTe(e){this._context=e}RTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:C3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mmt(e){return new RTe(e)}function NTe(e,t){this._basis=new y6(e),this._beta=t}NTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Lmt=function e(t){function n(r){return t===1?new y6(r):new NTe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function I3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function mK(e,t){this._context=e,this._k=(1-t)/6}mK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:I3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:I3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fmt=function e(t){function n(r){return new mK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function gK(e,t){this._context=e,this._k=(1-t)/6}gK.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:I3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jmt=function e(t){function n(r){return new gK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function yK(e,t){this._context=e,this._k=(1-t)/6}yK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bmt=function e(t){function n(r){return new yK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function vK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ta){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ta){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function PTe(e,t){this._context=e,this._alpha=t}PTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:vK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Umt=function e(t){function n(r){return t?new PTe(r,t):new mK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function DTe(e,t){this._context=e,this._alpha=t}DTe.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zmt=function e(t){function n(r){return t?new DTe(r,t):new gK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function OTe(e,t){this._context=e,this._alpha=t}OTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vmt=function e(t){function n(r){return t?new OTe(r,t):new yK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $Te(e){this._context=e}$Te.prototype={areaStart:U0,areaEnd:U0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Hmt(e){return new $Te(e)}function Vle(e){return e<0?-1:1}function Hle(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Vle(s)+Vle(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function qle(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function g8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function k3(e){this._context=e}k3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:g8(this,this._t0,qle(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,g8(this,qle(this,n=Hle(this,e,t)),n);break;default:g8(this,this._t0,n=Hle(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MTe(e){this._context=new LTe(e)}(MTe.prototype=Object.create(k3.prototype)).point=function(e,t){k3.prototype.point.call(this,t,e)};function LTe(e){this._context=e}LTe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function qmt(e){return new k3(e)}function Wmt(e){return new MTe(e)}function FTe(e){this._context=e}FTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Wle(e),i=Wle(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Wle(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Gmt(e){return new FTe(e)}function v6(e,t){this._context=e,this._t=t}v6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Ymt(e){return new v6(e,.5)}function Kmt(e){return new v6(e,0)}function Xmt(e){return new v6(e,1)}function Gle(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Yle(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Qmt(e,t){return e[t]}function Jmt(e){const t=[];return t.key=e,t}function Zmt(){var e=_n([]),t=Yle,n=Gle,r=Qmt;function i(s){var o=Array.from(e.apply(this,arguments),Jmt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=g6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:_n(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:_n(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Yle:typeof s=="function"?s:_n(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Gle,i):n},i}function f2(e,t,n){this.k=e,this.x=t,this.y=n}f2.prototype={constructor:f2,scale:function(e){return e===1?this:new f2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new f2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};f2.prototype;function bK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=R.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=R.useCallback(c=>(s?d6("%B"):Qx(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(mm,{children:_.jsx(xs,{gap:3,children:_.jsx(et,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(mm,{children:_.jsx(vs,{withinPortal:!0,label:c,children:_.jsx(et,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const egt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:bK},Symbol.toStringTag,{value:"Module"}));function jTe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=R.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(mm,{children:_.jsx(xs,{gap:3,children:_.jsx(et,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(xs,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(et,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const tgt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:jTe},Symbol.toStringTag,{value:"Module"})),Zl={top:15,left:100,right:50,bottom:50};function Q7({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=hv(),o=R.useMemo(()=>s-Zl.left-Zl.right,[s]),a=R.useMemo(()=>i-Zl.top-Zl.bottom,[i]),u=R.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Zx(xTe).domain(d)},[n,t.category]),l=R.useMemo(()=>e?Em([Zl.left,o+Zl.left]).domain([0,m0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=R.useMemo(()=>e?lk([Zl.top,a+Zl.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=R.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Zl.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Zl.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(bK,{xScale:l,yRange:c.range(),vertPosition:a+Zl.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(jTe,{yScale:c,horizontalPosition:Zl.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(zm,{})}const ngt=Object.freeze(Object.defineProperty({__proto__:null,Bar:Q7,default:Q7},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Yu(e){return e!=null?dr(e)?e:[e]:[]}function rgt(e=0,t=1/0){return`${Kle(e)} < row_number() && row_number() <= ${Kle(t)}`}function Kle(e){return e<0?`count() + ${e}`:e}class BTe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(rgt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Yu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function wn(e){throw Error(e)}function Za(e){return typeof e=="number"}function pi(e){return typeof e=="function"}function b6(e,t){const n=Array(e);if(pi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let igt=class extends BTe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){wn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){wn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){wn("Not implemented")}getter(t){wn("Not implemented")}objects(t){wn("Not implemented")}object(t){wn("Not implemented")}[Symbol.iterator](){wn("Not implemented")}print(t={}){Za(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=b6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},sgt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},ogt=function(e){return e&&pi(e.get)?e:new sgt(e)};function Sm(e){return e instanceof Date}function ba(e){return e===Object(e)}function R3(e){return e instanceof RegExp}function jo(e){return typeof e=="string"}function agt(e,t){const n=r=>wn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Xle(e.entries(),t):Sm(e)?n("Date"):R3(e)?n("RegExp"):jo(e)?n():dr(e)?ugt(e,t):pi(e[Symbol.iterator])?lgt(e,t):ba(e)?Xle(Object.entries(e),t):n()}function Xle(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function ugt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function lgt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:cgt}=Object.prototype;function zf(e,t){return cgt.call(e,t)}function Kl(e){return e?new Qle({...e.data()},e.columnNames()):new Qle}class Qle{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return zf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,fgt=Object.getPrototypeOf(Int8Array);function fk(e){return e instanceof fgt}function ev(e){return dr(e)||fk(e)}function Af(e){return e!=null&&e===e}const vT=e=>ev(e)||jo(e),dgt={compact:e=>ev(e)?e.filter(t=>Af(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>vT(e)?e.includes(t,n):!1,indexof:(e,t)=>vT(e)?e.indexOf(t):-1,join:(e,t)=>ev(e)?e.join(t):ar,lastindexof:(e,t)=>vT(e)?e.lastIndexOf(t):-1,length:e=>vT(e)?e.length:0,pluck:(e,t)=>ev(e)?e.map(n=>Af(n)?n[t]:ar):ar,reverse:e=>ev(e)?e.slice().reverse():jo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>vT(e)?e.slice(t,n):ar};function hgt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function iD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const gd=e=>(e<10?"0":"")+e,pgt=e=>e<0?"-"+iD(-e,6):e>9999?"+"+iD(e,6):iD(e,4);function UTe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return pgt(e)+"-"+gd(t+1)+"-"+gd(n)+(!u||o?"T"+gd(r)+":"+gd(i)+":"+gd(s)+"."+iD(o,3)+l:s?"T"+gd(r)+":"+gd(i)+":"+gd(s)+l:i||r||!a?"T"+gd(r)+":"+gd(i)+l:"")}function zTe(e,t){return isNaN(e)?"Invalid Date":UTe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function _6(e,t){return isNaN(e)?"Invalid Date":UTe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const mgt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function ggt(e){return e.match(mgt)&&!isNaN(Date.parse(e))}function ygt(e,t=Date.parse){return ggt(e)?t(e):e}const VTe=6e4,HTe=864e5,qTe=6048e5,zi=new Date,Vi=new Date,Zi=e=>(zi.setTime(typeof e=="string"?ygt(e):e),zi);function vgt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function bgt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function _gt(e){Vi.setTime(+e),Vi.setHours(0,0,0,0),zi.setTime(+Vi),zi.setMonth(0),zi.setDate(1);const t=(Vi.getTimezoneOffset()-zi.getTimezoneOffset())*VTe;return Math.floor(1+(Vi-zi-t)/HTe)}function wgt(e){Vi.setTime(+e),Vi.setUTCHours(0,0,0,0);const t=Date.UTC(Vi.getUTCFullYear(),0,1);return Math.floor(1+(Vi-t)/HTe)}function Egt(e,t){const n=t||0;Vi.setTime(+e),Vi.setDate(Vi.getDate()-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0),zi.setTime(+e),zi.setMonth(0),zi.setDate(1),zi.setDate(1-(zi.getDay()+7-n)%7),zi.setHours(0,0,0,0);const r=(Vi.getTimezoneOffset()-zi.getTimezoneOffset())*VTe;return Math.floor((1+(Vi-zi)-r)/qTe)}function xgt(e,t){const n=t||0;return Vi.setTime(+e),Vi.setUTCDate(Vi.getUTCDate()-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),zi.setTime(+e),zi.setUTCMonth(0),zi.setUTCDate(1),zi.setUTCDate(1-(zi.getUTCDay()+7-n)%7),zi.setUTCHours(0,0,0,0),Math.floor((1+(Vi-zi))/qTe)}const Sgt={format_date:(e,t)=>zTe(Zi(e),!t),format_utcdate:(e,t)=>_6(Zi(e),!t),timestamp:e=>+Zi(e),year:e=>Zi(e).getFullYear(),quarter:e=>Math.floor(Zi(e).getMonth()/3),month:e=>Zi(e).getMonth(),date:e=>Zi(e).getDate(),dayofweek:e=>Zi(e).getDay(),hours:e=>Zi(e).getHours(),minutes:e=>Zi(e).getMinutes(),seconds:e=>Zi(e).getSeconds(),milliseconds:e=>Zi(e).getMilliseconds(),utcyear:e=>Zi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Zi(e).getUTCMonth()/3),utcmonth:e=>Zi(e).getUTCMonth(),utcdate:e=>Zi(e).getUTCDate(),utcdayofweek:e=>Zi(e).getUTCDay(),utchours:e=>Zi(e).getUTCHours(),utcminutes:e=>Zi(e).getUTCMinutes(),utcseconds:e=>Zi(e).getUTCSeconds(),utcmilliseconds:e=>Zi(e).getUTCMilliseconds(),datetime:vgt,dayofyear:_gt,week:Egt,utcdatetime:bgt,utcdayofyear:wgt,utcweek:xgt,now:Date.now};function _K(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Sm(e)||Sm(t)?+e==+t:R3(e)&&R3(t)?e+""==t+"":ba(e)&&ba(t)?Tgt(e,t):!1}function Tgt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Jle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Jle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!_K(e[o],t[o]))return!1}return!0}function Jle(e,t,n=_K){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Agt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Cgt=Math.random;function nS(){return Cgt()}const Igt={random:nS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function wK(e){return e instanceof Map}function kgt(e){return e instanceof Set}function sD(e){return wK(e)||kgt(e)}function y8(e){return Array.from(e)}const Rgt={has:(e,t)=>sD(e)?e.has(t):e!=null?zf(e,t):!1,keys:e=>wK(e)?y8(e.keys()):e!=null?Object.keys(e):[],values:e=>sD(e)?y8(e.values()):e!=null?Object.values(e):[],entries:e=>sD(e)?y8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function Ngt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(zf(t,e))return t[e];return n!==void 0?n:e}function Pgt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Dgt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},dw={bin:hgt,equal:_K,recode:Ngt,sequence:Pgt,...dgt,...Sgt,...Agt,...Igt,...Rgt,...Dgt};function RC(e){return typeof e=="bigint"}function _h(e){return e===void 0?e+"":RC(e)?e+"n":JSON.stringify(e)}function gn(e,t=[],n=[]){return new Ogt(e,Yu(t),Yu(n))}let Ogt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${_h(n)}]`),...this.params.map(_h)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const WTe=e=>gn("any",e),GTe=()=>gn("count"),YTe=e=>gn("array_agg",e),KTe=e=>gn("array_agg_distinct",e),XTe=(e,t)=>gn("map_agg",[e,t]),QTe=(e,t)=>gn("object_agg",[e,t]),JTe=(e,t)=>gn("entries_agg",[e,t]);({...dw});function $gt(e,t){e=sD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Mgt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Lgt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Fgt(e,t,n,r){const i=r==="map"||r===!0?XTe:r==="entries"?JTe:r==="object"?QTe:wn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=$gt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:YTe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const jgt="ArrayPattern",Bgt="ArrowFunctionExpression",Ugt="FunctionExpression",y0="Identifier",rS="Literal",ZTe="MemberExpression",zgt="ObjectExpression",e2e="ObjectPattern",t2e="Property",dk="Column",Vgt="Constant",Hgt="Dictionary",qgt="Function",Wgt="Parameter",n2e="Op",Jr=(e,t)=>{const n=Ggt[e.type];return n?n(e,t):wn(`Unsupported expression construct: ${e.type}`)},v8=(e,t)=>"("+Jr(e.left,t)+" "+e.operator+" "+Jr(e.right,t)+")",b8=(e,t)=>"("+Td(e.params,t)+")=>"+Jr(e.body,t),Zle=(e,t)=>Jr(e.callee,t)+"("+Td(e.arguments,t)+")",Td=(e,t,n=",")=>e.map(r=>Jr(r,t)).join(n),r2e=e=>e.computed?`[${_h(e.name)}]`:`.${e.name}`,ece=(e,t,n)=>{const r=e.table||"";return`data${r}${r2e(e)}.${n}(${t.index}${r})`},Ggt={Constant:e=>e.raw,Column:(e,t)=>ece(e,t,"get"),Dictionary:(e,t)=>ece(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${r2e(e)}`,Op:(e,t)=>`op(${_h(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Jr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Jr(e.object,t),i=Jr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Zle,NewExpression:(e,t)=>"new "+Zle(e,t),ArrayExpression:(e,t)=>"["+Td(e.elements,t)+"]",AssignmentExpression:v8,BinaryExpression:v8,LogicalExpression:v8,UnaryExpression:(e,t)=>"("+e.operator+Jr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Jr(e.test,t)+"?"+Jr(e.consequent,t)+":"+Jr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Td(e.properties,t)+"})",Property:(e,t)=>{const n=Jr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Jr(e.value,t)},ArrowFunctionExpression:b8,FunctionExpression:b8,FunctionDeclaration:b8,ArrayPattern:(e,t)=>"["+Td(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Td(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Td(e.declarations,t,","),VariableDeclarator:(e,t)=>Jr(e.id,t)+"="+Jr(e.init,t),SpreadElement:(e,t)=>"..."+Jr(e.argument,t),BlockStatement:(e,t)=>"{"+Td(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Jr(e.expression,t),IfStatement:(e,t)=>"if ("+Jr(e.test,t)+")"+Jr(e.consequent,t)+(e.alternate?" else "+Jr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Jr(e.discriminant,t)+") {"+Td(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Jr(e.test,t):"default")+": "+Td(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Jr(e.argument,t),Program:(e,t)=>Jr(e.body[0],t)};function N3(e,t={index:"row"}){return Jr(e,t)}function Ygt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function $E(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Sm(e)?+e:dr(e)||fk(e)?`[${e.map($E)}]`:R3(e)?e+"":Kgt(e)}function Kgt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${$E(e[r])}`;return t+="}",t}function P3(e,t){const n=e.length;return n===1?(r,i)=>$E(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=$E(a)}return s}}function Xgt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=$E(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=$E(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Ap(){}function Qgt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Cs(e){return e.init=e.init||Ap,e.add=e.add||Ap,e.rem=e.rem||Ap,e}function tce(e,t){return e.product_v=!1,e.product=t}const i2e={count:{create:()=>Cs({value:e=>e.count}),param:[]},array_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>Cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Xgt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Cs({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>RC(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>tce(e,1),value:e=>e.valid?e.product_v?tce(e,Qgt(e.list.values())):e.product:void 0,add:(e,t)=>RC(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Cs({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Cs({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Cs({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>Cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Cs({value:i=>Ygt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},nce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},rce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},s2e={row_number:{create(){return{init:Ap,value:e=>e.index+1}},param:[]},rank:nce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=nce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:rce,ntile:{create(e){e=+e,e>0||wn("ntile num must be greater than zero.");const{init:t,value:n}=rce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:Ap,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:Ap,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Ap,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Ap,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||wn("nth_value nth must be greater than zero."),{init:Ap,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Af(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Jgt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Jgt(e,t,n){for(const r=e.size;n<r;++n)if(Af(e.value(n,t)))return n;return-1}function EK(e){return zf(i2e,e)}function xK(e){return zf(s2e,e)}function o2e(e){return zf(dw,e)||e==="row_object"}function a2e(e){return EK(e)&&i2e[e]}function u2e(e){return xK(e)&&s2e[e]}function bT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const SK={escape:(e,t,n)=>bT(e,t,n),expr:(e,t)=>bT(`(row,data,op)=>${e}`,dw,t),expr2:(e,t)=>bT(`(row0,data0,row,data)=>${e}`,dw,t),join:(e,t)=>bT(`(row1,data1,row2,data2)=>${e}`,dw,t),param:(e,t)=>bT(e,dw,t)},Zgt={"==":1,"!=":1,"===":1,"!==":1};function l2e(e,t,n=0,r,i){if(e.type=dk,e.name=t,e.table=n,i&&r&&pi(r.keyFor)){const s=Zgt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===rS&&e0t(i,e,s,r.keyFor(s.value))}return e}function e0t(e,t,n,r){return r<0?(e.type=rS,e.value=!1,e.raw="false"):(t.type=Hgt,n.value=r,n.raw=r+""),!0}function w6(e){return dr(e)?e:wK(e)?e.entries():e?Object.entries(e):[]}const c2e="row_object";function f2e(e,t){e.type=zgt;const n=e.properties=[];for(const r of w6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:t2e,key:{type:rS,raw:_h(s)},value:l2e({computed:!0},i)})}return e}function d2e(e){return N3(f2e({},e))}function h2e(e){return SK.expr(d2e(e))}const t0t=new TextDecoder("utf-8"),J7=e=>t0t.decode(e),n0t=new TextEncoder,TK=e=>n0t.encode(e),r0t=e=>typeof e=="boolean",bu=e=>typeof e=="function",$y=e=>e!=null&&Object(e)===e,E6=e=>$y(e)&&bu(e.then),AK=e=>$y(e)&&bu(e[Symbol.iterator]),x6=e=>$y(e)&&bu(e[Symbol.asyncIterator]),i0t=e=>$y(e)&&"done"in e&&"value"in e,p2e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,s0t=e=>$y(e)&&bu(e.abort)&&bu(e.getWriter)&&!p2e(e),o0t=e=>$y(e)&&bu(e.end)&&bu(e.write)&&r0t(e.writable)&&!p2e(e),a0t=e=>$y(e)&&bu(e.clear)&&bu(e.bytes)&&bu(e.position)&&bu(e.setPosition)&&bu(e.capacity)&&bu(e.getBufferIdentifier)&&bu(e.createLong),CK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function u0t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function D3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function wh(e,t){const n=u0t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?D3(o,s,a):o=s;break}D3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ks(e,t){let n=i0t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=TK(n)),n instanceof ArrayBuffer?new e(n):n instanceof CK?new e(n):a0t(n)?Ks(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const _T=e=>Ks(Int32Array,e),Nr=e=>Ks(Uint8Array,e),Z7=e=>(e.next(),e);function*l0t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof CK?n(t):AK(t)?t:n(t);return yield*Z7(function*(i){let s=null;do s=i.next(yield Ks(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const c0t=e=>l0t(Uint8Array,e);function m2e(e,t){return Y1(this,arguments,function*(){if(E6(t))return yield Yn(yield Yn(yield*Z5(K2(m2e(e,yield Yn(t))))));const r=function(o){return Y1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return Y1(this,arguments,function*(){yield Yn(yield*Z5(K2(Z7(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof CK?r(t):AK(t)?i(t):x6(t)?t:r(t);return yield Yn(yield*Z5(K2(Z7(function(o){return Y1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ks(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const f0t=e=>m2e(Uint8Array,e);function g2e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function d0t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const ice={fromIterable(e){return PN(h0t(e))},fromAsyncIterable(e){return PN(p0t(e))},fromDOMStream(e){return PN(m0t(e))},fromNodeStream(e){return PN(y0t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},PN=e=>(e.next(),e);function*h0t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?wh(r,o)[0]:([i,r,a]=wh(r,o),i)}({cmd:s,size:o}=yield null);const l=c0t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function p0t(e){return Y1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?wh(i,a)[0]:([s,i,u]=wh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=f0t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function m0t(e){return Y1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?wh(i,a)[0]:([s,i,u]=wh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new g0t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Nr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class g0t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return kp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return kp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Nr(n)),n})}}const _8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function y0t(e){return Y1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?wh(l,a)[0]:([c,l,u]=wh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=_8(e,"end"),n[1]=_8(e,"error");do{if(n[2]=_8(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Nr(e.read(a-u)),c.byteLength<a-u&&(c=Nr(e.read()))):c=Nr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ua;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ua||(Ua={}));var Ku;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Ku||(Ku={}));var Po;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Po||(Po={}));var Eh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Eh||(Eh={}));var qt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(qt||(qt={}));var xh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(xh||(xh={}));var Js;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Js||(Js={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var _p;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(_p||(_p={}));const v0t=void 0;function Hv(e){if(e===null)return"null";if(e===v0t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Hv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const b0t=Symbol.for("isArrowBigNum");function nd(e,...t){return t.length===0?Object.setPrototypeOf(Ks(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}nd.prototype[b0t]=!0;nd.prototype.toJSON=function(){return`"${PC(this)}"`};nd.prototype.valueOf=function(){return y2e(this)};nd.prototype.toString=function(){return PC(this)};nd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return y2e(this);case"string":return PC(this);case"default":return _0t(this)}return PC(this)};function Lw(...e){return nd.apply(this,e)}function Fw(...e){return nd.apply(this,e)}function NC(...e){return nd.apply(this,e)}Object.setPrototypeOf(Lw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Fw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(NC.prototype,Object.create(Uint32Array.prototype));Object.assign(Lw.prototype,nd.prototype,{constructor:Lw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Fw.prototype,nd.prototype,{constructor:Fw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(NC.prototype,nd.prototype,{constructor:NC,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function y2e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const PC=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return w8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return w8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${w8(t)}`},_0t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:PC(e);function w8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class IK{static new(t,n){switch(n){case!0:return new Lw(t);case!1:return new Fw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Lw(t)}return t.byteLength===16?new NC(t):new Fw(t)}static signed(t){return new Lw(t)}static unsigned(t){return new Fw(t)}static decimal(t){return new NC(t)}constructor(t,n){return IK.new(t,n)}}function Vf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var v2e,b2e,_2e,w2e,E2e,x2e,S2e,T2e,A2e,C2e,I2e,k2e,R2e,N2e,P2e,D2e,O2e,$2e,M2e,L2e;let En=class ez{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return ez.isUnion(t)&&t.mode===Ku.Dense}static isSparseUnion(t){return ez.isUnion(t)&&t.mode===Ku.Sparse}get typeId(){return re.NONE}};v2e=Symbol.toStringTag;En[v2e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(En.prototype);let Tm=class extends En{toString(){return"Null"}get typeId(){return re.Null}};b2e=Symbol.toStringTag;Tm[b2e]=(e=>e[Symbol.toStringTag]="Null")(Tm.prototype);class eu extends En{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}_2e=Symbol.toStringTag;eu[_2e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(eu.prototype);class kK extends eu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class RK extends eu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class z0 extends eu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class NK extends eu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class PK extends eu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class DK extends eu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class OK extends eu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class $K extends eu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(kK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(RK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(z0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(NK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(PK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(DK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(OK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty($K.prototype,"ArrayType",{value:BigUint64Array});class V0 extends En{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Po.HALF:return Uint16Array;case Po.SINGLE:return Float32Array;case Po.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}w2e=Symbol.toStringTag;V0[w2e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(V0.prototype);class F2e extends V0{constructor(){super(Po.HALF)}}class MK extends V0{constructor(){super(Po.SINGLE)}}class LK extends V0{constructor(){super(Po.DOUBLE)}}Object.defineProperty(F2e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(MK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(LK.prototype,"ArrayType",{value:Float64Array});let DC=class extends En{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};E2e=Symbol.toStringTag;DC[E2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(DC.prototype);let ME=class extends En{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};x2e=Symbol.toStringTag;ME[x2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(ME.prototype);let OC=class extends En{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};S2e=Symbol.toStringTag;OC[S2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(OC.prototype);let O3=class extends En{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};T2e=Symbol.toStringTag;O3[T2e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(O3.prototype);class LE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Eh[this.unit]}>`}}A2e=Symbol.toStringTag;LE[A2e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(LE.prototype);class w0t extends LE{constructor(){super(Eh.DAY)}}class E0t extends LE{constructor(){super(Eh.MILLISECOND)}}class Am extends En{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${qt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}C2e=Symbol.toStringTag;Am[C2e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Am.prototype);class x0t extends Am{constructor(){super(qt.SECOND,32)}}class S0t extends Am{constructor(){super(qt.MILLISECOND,32)}}class T0t extends Am{constructor(){super(qt.MICROSECOND,64)}}class A0t extends Am{constructor(){super(qt.NANOSECOND,64)}}class $3 extends En{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${qt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}I2e=Symbol.toStringTag;$3[I2e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))($3.prototype);class FE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${xh[this.unit]}>`}}k2e=Symbol.toStringTag;FE[k2e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(FE.prototype);class C0t extends FE{constructor(){super(xh.DAY_TIME)}}class I0t extends FE{constructor(){super(xh.YEAR_MONTH)}}let M3=class extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${qt[this.unit]}>`}};R2e=Symbol.toStringTag;M3[R2e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(M3.prototype);let jE=class extends En{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};N2e=Symbol.toStringTag;jE[N2e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(jE.prototype);class la extends En{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}P2e=Symbol.toStringTag;la[P2e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(la.prototype);class $C extends En{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}D2e=Symbol.toStringTag;$C[D2e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))($C.prototype);let L3=class extends En{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};O2e=Symbol.toStringTag;L3[O2e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(L3.prototype);let BE=class extends En{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};$2e=Symbol.toStringTag;BE[$2e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(BE.prototype);class MC extends En{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}M2e=Symbol.toStringTag;MC[M2e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(MC.prototype);const k0t=(e=>()=>++e)(-1);class H0 extends En{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?k0t():Vf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}L2e=Symbol.toStringTag;H0[L2e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(H0.prototype);function Id(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class xn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return R0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return B_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function R0t(e,t,n=!0){return typeof t=="number"?B_(e,t,n):typeof t=="string"&&t in re?B_(e,re[t],n):t&&t instanceof En?B_(e,sce(t),n):t!=null&&t.type&&t.type instanceof En?B_(e,sce(t.type),n):B_(e,re.NONE,n)}function B_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function sce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Po.HALF:return re.Float16;case Po.SINGLE:return re.Float32;case Po.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case qt.SECOND:return re.TimeSecond;case qt.MILLISECOND:return re.TimeMillisecond;case qt.MICROSECOND:return re.TimeMicrosecond;case qt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case qt.SECOND:return re.TimestampSecond;case qt.MILLISECOND:return re.TimestampMillisecond;case qt.MICROSECOND:return re.TimestampMicrosecond;case qt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Eh.DAY:return re.DateDay;case Eh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case xh.DAY_TIME:return re.IntervalDayTime;case xh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case qt.SECOND:return re.DurationSecond;case qt.MILLISECOND:return re.DurationMillisecond;case qt.MICROSECOND:return re.DurationMicrosecond;case qt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Ku.Dense:return re.DenseUnion;case Ku.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}xn.prototype.visitInt8=null;xn.prototype.visitInt16=null;xn.prototype.visitInt32=null;xn.prototype.visitInt64=null;xn.prototype.visitUint8=null;xn.prototype.visitUint16=null;xn.prototype.visitUint32=null;xn.prototype.visitUint64=null;xn.prototype.visitFloat16=null;xn.prototype.visitFloat32=null;xn.prototype.visitFloat64=null;xn.prototype.visitDateDay=null;xn.prototype.visitDateMillisecond=null;xn.prototype.visitTimestampSecond=null;xn.prototype.visitTimestampMillisecond=null;xn.prototype.visitTimestampMicrosecond=null;xn.prototype.visitTimestampNanosecond=null;xn.prototype.visitTimeSecond=null;xn.prototype.visitTimeMillisecond=null;xn.prototype.visitTimeMicrosecond=null;xn.prototype.visitTimeNanosecond=null;xn.prototype.visitDenseUnion=null;xn.prototype.visitSparseUnion=null;xn.prototype.visitIntervalDayTime=null;xn.prototype.visitIntervalYearMonth=null;xn.prototype.visitDuration=null;xn.prototype.visitDurationSecond=null;xn.prototype.visitDurationMillisecond=null;xn.prototype.visitDurationMicrosecond=null;xn.prototype.visitDurationNanosecond=null;const j2e=new Float64Array(1),w_=new Uint32Array(j2e.buffer);function B2e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function U2e(e){if(e!==e)return 32256;j2e[0]=e;const t=(w_[1]&2147483648)>>16&65535;let n=w_[1]&2146435072,r=0;return n>=1089470464?w_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(w_[1]&1048575)>>10):n<=1056964608?(r=1048576+(w_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(w_[1]&1048575)+512>>10),t|n|r&65535}class Xt extends xn{}function nn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const N0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},FK=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},P0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},D0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},z2e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},O0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Km=({values:e},t,n)=>{e[t]=n},jK=({values:e},t,n)=>{e[t]=n},V2e=({values:e},t,n)=>{e[t]=U2e(n)},$0t=(e,t,n)=>{switch(e.type.precision){case Po.HALF:return V2e(e,t,n);case Po.SINGLE:case Po.DOUBLE:return jK(e,t,n)}},BK=({values:e},t,n)=>{N0t(e,t,n.valueOf())},UK=({values:e},t,n)=>{FK(e,t*2,n.valueOf())},H2e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},M0t=({values:e,valueOffsets:t},n,r)=>z2e(e,t,n,r),L0t=({values:e,valueOffsets:t},n,r)=>{z2e(e,t,n,TK(r))},q2e=(e,t,n)=>{e.type.unit===Eh.DAY?BK(e,t,n):UK(e,t,n)},zK=({values:e},t,n)=>FK(e,t*2,n/1e3),VK=({values:e},t,n)=>FK(e,t*2,n),HK=({values:e},t,n)=>P0t(e,t*2,n),qK=({values:e},t,n)=>D0t(e,t*2,n),W2e=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return zK(e,t,n);case qt.MILLISECOND:return VK(e,t,n);case qt.MICROSECOND:return HK(e,t,n);case qt.NANOSECOND:return qK(e,t,n)}},WK=({values:e},t,n)=>{e[t]=n},GK=({values:e},t,n)=>{e[t]=n},YK=({values:e},t,n)=>{e[t]=n},KK=({values:e},t,n)=>{e[t]=n},G2e=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return WK(e,t,n);case qt.MILLISECOND:return GK(e,t,n);case qt.MICROSECOND:return YK(e,t,n);case qt.NANOSECOND:return KK(e,t,n)}},Y2e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},F0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Nc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},j0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Nc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},B0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),U0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),z0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),V0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),H0t=(e,t,n)=>{const r=e.type.children.map(s=>Nc.getVisitFn(s.type)),i=n instanceof Map?z0t(t,n):n instanceof hr?U0t(t,n):Array.isArray(n)?B0t(t,n):V0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},q0t=(e,t,n)=>{e.type.mode===Ku.Dense?K2e(e,t,n):X2e(e,t,n)},K2e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Nc.visit(i,e.valueOffsets[t],n)},X2e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Nc.visit(i,t,n)},W0t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},Q2e=(e,t,n)=>{e.type.unit===xh.DAY_TIME?XK(e,t,n):QK(e,t,n)},XK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},QK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},JK=({values:e},t,n)=>{e[t]=n},ZK=({values:e},t,n)=>{e[t]=n},eX=({values:e},t,n)=>{e[t]=n},tX=({values:e},t,n)=>{e[t]=n},J2e=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return JK(e,t,n);case qt.MILLISECOND:return ZK(e,t,n);case qt.MICROSECOND:return eX(e,t,n);case qt.NANOSECOND:return tX(e,t,n)}},G0t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Nc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Xt.prototype.visitBool=nn(O0t);Xt.prototype.visitInt=nn(Km);Xt.prototype.visitInt8=nn(Km);Xt.prototype.visitInt16=nn(Km);Xt.prototype.visitInt32=nn(Km);Xt.prototype.visitInt64=nn(Km);Xt.prototype.visitUint8=nn(Km);Xt.prototype.visitUint16=nn(Km);Xt.prototype.visitUint32=nn(Km);Xt.prototype.visitUint64=nn(Km);Xt.prototype.visitFloat=nn($0t);Xt.prototype.visitFloat16=nn(V2e);Xt.prototype.visitFloat32=nn(jK);Xt.prototype.visitFloat64=nn(jK);Xt.prototype.visitUtf8=nn(L0t);Xt.prototype.visitBinary=nn(M0t);Xt.prototype.visitFixedSizeBinary=nn(H2e);Xt.prototype.visitDate=nn(q2e);Xt.prototype.visitDateDay=nn(BK);Xt.prototype.visitDateMillisecond=nn(UK);Xt.prototype.visitTimestamp=nn(W2e);Xt.prototype.visitTimestampSecond=nn(zK);Xt.prototype.visitTimestampMillisecond=nn(VK);Xt.prototype.visitTimestampMicrosecond=nn(HK);Xt.prototype.visitTimestampNanosecond=nn(qK);Xt.prototype.visitTime=nn(G2e);Xt.prototype.visitTimeSecond=nn(WK);Xt.prototype.visitTimeMillisecond=nn(GK);Xt.prototype.visitTimeMicrosecond=nn(YK);Xt.prototype.visitTimeNanosecond=nn(KK);Xt.prototype.visitDecimal=nn(Y2e);Xt.prototype.visitList=nn(F0t);Xt.prototype.visitStruct=nn(H0t);Xt.prototype.visitUnion=nn(q0t);Xt.prototype.visitDenseUnion=nn(K2e);Xt.prototype.visitSparseUnion=nn(X2e);Xt.prototype.visitDictionary=nn(W0t);Xt.prototype.visitInterval=nn(Q2e);Xt.prototype.visitIntervalDayTime=nn(XK);Xt.prototype.visitIntervalYearMonth=nn(QK);Xt.prototype.visitDuration=nn(J2e);Xt.prototype.visitDurationSecond=nn(JK);Xt.prototype.visitDurationMillisecond=nn(ZK);Xt.prototype.visitDurationMicrosecond=nn(eX);Xt.prototype.visitDurationNanosecond=nn(tX);Xt.prototype.visitFixedSizeList=nn(G0t);Xt.prototype.visitMap=nn(j0t);const Nc=new Xt,ff=Symbol.for("parent"),jw=Symbol.for("rowIndex");class nX{constructor(t,n){return this[ff]=t,this[jw]=n,new Proxy(this,new K0t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[jw],n=this[ff],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Xu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Hv(t)}: ${Hv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Y0t(this[ff],this[jw])}}class Y0t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Xu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(nX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ff]:{writable:!0,enumerable:!1,configurable:!1,value:null},[jw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class K0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ff].type.children.map(n=>n.name)}has(t,n){return t[ff].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[ff].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ff].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Xu.visit(t[ff].children[r],t[jw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ff].type.children.findIndex(s=>s.name===n);return i!==-1?(Nc.visit(t[ff].children[i],t[jw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Wt extends xn{}function Qt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const X0t=(e,t)=>864e5*e[t],rX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Q0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,J0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Z2e=e=>new Date(e),Z0t=(e,t)=>Z2e(X0t(e,t)),eyt=(e,t)=>Z2e(rX(e,t)),tyt=(e,t)=>null,eAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},nyt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},tAe=({values:e},t)=>Z0t(e,t),nAe=({values:e},t)=>eyt(e,t*2),My=({stride:e,values:t},n)=>t[e*n],ryt=({stride:e,values:t},n)=>B2e(t[e*n]),rAe=({values:e},t)=>e[t],iyt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),syt=({values:e,valueOffsets:t},n)=>eAe(e,t,n),oyt=({values:e,valueOffsets:t},n)=>{const r=eAe(e,t,n);return r!==null?J7(r):null},ayt=({values:e},t)=>e[t],uyt=({type:e,values:t},n)=>e.precision!==Po.HALF?t[n]:B2e(t[n]),lyt=(e,t)=>e.type.unit===Eh.DAY?tAe(e,t):nAe(e,t),iAe=({values:e},t)=>1e3*rX(e,t*2),sAe=({values:e},t)=>rX(e,t*2),oAe=({values:e},t)=>Q0t(e,t*2),aAe=({values:e},t)=>J0t(e,t*2),cyt=(e,t)=>{switch(e.type.unit){case qt.SECOND:return iAe(e,t);case qt.MILLISECOND:return sAe(e,t);case qt.MICROSECOND:return oAe(e,t);case qt.NANOSECOND:return aAe(e,t)}},uAe=({values:e},t)=>e[t],lAe=({values:e},t)=>e[t],cAe=({values:e},t)=>e[t],fAe=({values:e},t)=>e[t],fyt=(e,t)=>{switch(e.type.unit){case qt.SECOND:return uAe(e,t);case qt.MILLISECOND:return lAe(e,t);case qt.MICROSECOND:return cAe(e,t);case qt.NANOSECOND:return fAe(e,t)}},dyt=({values:e,stride:t},n)=>IK.decimal(e.subarray(t*n,t*(n+1))),hyt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},pyt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new S6(o.slice(i,s-i))},myt=(e,t)=>new nX(e,t),gyt=(e,t)=>e.type.mode===Ku.Dense?dAe(e,t):hAe(e,t),dAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Xu.visit(r,e.valueOffsets[t])},hAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Xu.visit(r,t)},yyt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},vyt=(e,t)=>e.type.unit===xh.DAY_TIME?pAe(e,t):mAe(e,t),pAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),mAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},gAe=({values:e},t)=>e[t],yAe=({values:e},t)=>e[t],vAe=({values:e},t)=>e[t],bAe=({values:e},t)=>e[t],byt=(e,t)=>{switch(e.type.unit){case qt.SECOND:return gAe(e,t);case qt.MILLISECOND:return yAe(e,t);case qt.MICROSECOND:return vAe(e,t);case qt.NANOSECOND:return bAe(e,t)}},_yt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};Wt.prototype.visitNull=Qt(tyt);Wt.prototype.visitBool=Qt(nyt);Wt.prototype.visitInt=Qt(ayt);Wt.prototype.visitInt8=Qt(My);Wt.prototype.visitInt16=Qt(My);Wt.prototype.visitInt32=Qt(My);Wt.prototype.visitInt64=Qt(rAe);Wt.prototype.visitUint8=Qt(My);Wt.prototype.visitUint16=Qt(My);Wt.prototype.visitUint32=Qt(My);Wt.prototype.visitUint64=Qt(rAe);Wt.prototype.visitFloat=Qt(uyt);Wt.prototype.visitFloat16=Qt(ryt);Wt.prototype.visitFloat32=Qt(My);Wt.prototype.visitFloat64=Qt(My);Wt.prototype.visitUtf8=Qt(oyt);Wt.prototype.visitBinary=Qt(syt);Wt.prototype.visitFixedSizeBinary=Qt(iyt);Wt.prototype.visitDate=Qt(lyt);Wt.prototype.visitDateDay=Qt(tAe);Wt.prototype.visitDateMillisecond=Qt(nAe);Wt.prototype.visitTimestamp=Qt(cyt);Wt.prototype.visitTimestampSecond=Qt(iAe);Wt.prototype.visitTimestampMillisecond=Qt(sAe);Wt.prototype.visitTimestampMicrosecond=Qt(oAe);Wt.prototype.visitTimestampNanosecond=Qt(aAe);Wt.prototype.visitTime=Qt(fyt);Wt.prototype.visitTimeSecond=Qt(uAe);Wt.prototype.visitTimeMillisecond=Qt(lAe);Wt.prototype.visitTimeMicrosecond=Qt(cAe);Wt.prototype.visitTimeNanosecond=Qt(fAe);Wt.prototype.visitDecimal=Qt(dyt);Wt.prototype.visitList=Qt(hyt);Wt.prototype.visitStruct=Qt(myt);Wt.prototype.visitUnion=Qt(gyt);Wt.prototype.visitDenseUnion=Qt(dAe);Wt.prototype.visitSparseUnion=Qt(hAe);Wt.prototype.visitDictionary=Qt(yyt);Wt.prototype.visitInterval=Qt(vyt);Wt.prototype.visitIntervalDayTime=Qt(pAe);Wt.prototype.visitIntervalYearMonth=Qt(mAe);Wt.prototype.visitDuration=Qt(byt);Wt.prototype.visitDurationSecond=Qt(gAe);Wt.prototype.visitDurationMillisecond=Qt(yAe);Wt.prototype.visitDurationMicrosecond=Qt(vAe);Wt.prototype.visitDurationNanosecond=Qt(bAe);Wt.prototype.visitFixedSizeList=Qt(_yt);Wt.prototype.visitMap=Qt(pyt);const Xu=new Wt,bf=Symbol.for("keys"),Bw=Symbol.for("vals");class S6{constructor(t){return this[bf]=new hr([t.children[0]]).memoize(),this[Bw]=t.children[1],new Proxy(this,new Eyt)}[Symbol.iterator](){return new wyt(this[bf],this[Bw])}get size(){return this[bf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[bf],n=this[Bw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Xu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Hv(t)}: ${Hv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class wyt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Xu.visit(this.vals,t)]})}}class Eyt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[bf].toArray().map(String)}has(t,n){return t[bf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[bf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[bf].indexOf(n);if(r!==-1){const i=Xu.visit(Reflect.get(t,Bw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[bf].indexOf(n);return i!==-1?(Nc.visit(Reflect.get(t,Bw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(S6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[bf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Bw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let oce;function _Ae(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(oce=s,s=o,o=oce),o>i&&(o=i),r?r(e,s,o):[s,o]}const ace=e=>e!==e;function iS(e){if(typeof e!=="object"||e===null)return ace(e)?ace:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?d0t(e,n):!1:e instanceof Map?Syt(e):Array.isArray(e)?xyt(e):e instanceof hr?Tyt(e):Ayt(e,!0)}function xyt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=iS(e[n]);return T6(t)}function Syt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=iS(r);return T6(n)}function Tyt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=iS(e.get(n));return T6(t)}function Ayt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=iS(e[n[i]]);return T6(r,n)}function T6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Cyt(e,n);case Map:return uce(e,n,n.keys());case S6:case nX:case Object:case void 0:return uce(e,n,t||Object.keys(n))}return n instanceof hr?Iyt(e,n):!1}}function Cyt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Iyt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function uce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function wAe(e,t,n,r){return(n&1<<r)!==0}function kyt(e,t,n,r){return(n&1<<r)>>r}function F3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):EAe(new iX(n,e,t,null,wAe)).subarray(0,r)),i}return n}function EAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class iX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function tz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new iX(e,t,n-t,e,kyt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return tz(e,t,i)+tz(e,r,n)+Ryt(e,i>>3,r-i>>3)}function Ryt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=E8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=E8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=E8(s.getUint8(i)),i+=1;return r}function E8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Nyt=-1;class Rr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return En.isSparseUnion(t)?this.children.some(n=>n.nullable):En.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(En.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Nyt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-tz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Rr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Id(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(En.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Ku.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(En.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Ku.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(F3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Rr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(F3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[_p.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[_p.TYPE])&&(o[_p.TYPE]=s.subarray(t,t+n)),(s=o[_p.OFFSET])&&(o[_p.OFFSET]=s.subarray(t,t+n+1))||(s=o[_p.DATA])&&(o[_p.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Rr.prototype.children=Object.freeze([]);class dA extends xn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Rr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=_T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=_T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Nr(t.nullBitmap),o=_T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Nr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ks(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(En.isSparseUnion(n))return new Rr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=_T(t.valueOffsets);return new Rr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new dA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new dA().visit({type:n.valueType})}=t,s=Nr(t.nullBitmap),{["length"]:o=i.length/Id(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new dA().visit({type:n.childType})}=t,s=Nr(t.nullBitmap),o=_T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,void 0,s],[i])}}const Pyt=new dA;function sa(e){return Pyt.visit(e)}class lce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function xAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function SAe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function TAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function sX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function oX(e,t){return e.getValid(t)}function Uw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return sX(r,this._offsets,n,t)}}function AAe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=sX(s,this._offsets,r,n);return t=void 0,o}}function CAe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):sX(s,this._offsets,i,n);return t=void 0,o}}class Gt extends xn{}function Dyt(e,t){return t===null&&e.length>0?0:-1}function Oyt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new iX(n,e.offset+(t||0),e.length,n,wAe)){if(!i)return r;++r}return-1}function ln(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return Oyt(e,n)}const r=Xu.getVisitFn(e),i=iS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function IAe(e,t,n){const r=Xu.getVisitFn(e),i=iS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Gt.prototype.visitNull=Dyt;Gt.prototype.visitBool=ln;Gt.prototype.visitInt=ln;Gt.prototype.visitInt8=ln;Gt.prototype.visitInt16=ln;Gt.prototype.visitInt32=ln;Gt.prototype.visitInt64=ln;Gt.prototype.visitUint8=ln;Gt.prototype.visitUint16=ln;Gt.prototype.visitUint32=ln;Gt.prototype.visitUint64=ln;Gt.prototype.visitFloat=ln;Gt.prototype.visitFloat16=ln;Gt.prototype.visitFloat32=ln;Gt.prototype.visitFloat64=ln;Gt.prototype.visitUtf8=ln;Gt.prototype.visitBinary=ln;Gt.prototype.visitFixedSizeBinary=ln;Gt.prototype.visitDate=ln;Gt.prototype.visitDateDay=ln;Gt.prototype.visitDateMillisecond=ln;Gt.prototype.visitTimestamp=ln;Gt.prototype.visitTimestampSecond=ln;Gt.prototype.visitTimestampMillisecond=ln;Gt.prototype.visitTimestampMicrosecond=ln;Gt.prototype.visitTimestampNanosecond=ln;Gt.prototype.visitTime=ln;Gt.prototype.visitTimeSecond=ln;Gt.prototype.visitTimeMillisecond=ln;Gt.prototype.visitTimeMicrosecond=ln;Gt.prototype.visitTimeNanosecond=ln;Gt.prototype.visitDecimal=ln;Gt.prototype.visitList=ln;Gt.prototype.visitStruct=ln;Gt.prototype.visitUnion=ln;Gt.prototype.visitDenseUnion=IAe;Gt.prototype.visitSparseUnion=IAe;Gt.prototype.visitDictionary=ln;Gt.prototype.visitInterval=ln;Gt.prototype.visitIntervalDayTime=ln;Gt.prototype.visitIntervalYearMonth=ln;Gt.prototype.visitDuration=ln;Gt.prototype.visitDurationSecond=ln;Gt.prototype.visitDurationMillisecond=ln;Gt.prototype.visitDurationMicrosecond=ln;Gt.prototype.visitDurationNanosecond=ln;Gt.prototype.visitFixedSizeList=ln;Gt.prototype.visitMap=ln;const j3=new Gt;class Yt extends xn{}function Jt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof eu&&t.bitWidth!==64||t instanceof Am&&t.bitWidth!==64||t instanceof V0&&t.precision!==Po.HALF))return new lce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new lce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new $yt(o)})}class $yt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Yt.prototype.visitNull=Jt;Yt.prototype.visitBool=Jt;Yt.prototype.visitInt=Jt;Yt.prototype.visitInt8=Jt;Yt.prototype.visitInt16=Jt;Yt.prototype.visitInt32=Jt;Yt.prototype.visitInt64=Jt;Yt.prototype.visitUint8=Jt;Yt.prototype.visitUint16=Jt;Yt.prototype.visitUint32=Jt;Yt.prototype.visitUint64=Jt;Yt.prototype.visitFloat=Jt;Yt.prototype.visitFloat16=Jt;Yt.prototype.visitFloat32=Jt;Yt.prototype.visitFloat64=Jt;Yt.prototype.visitUtf8=Jt;Yt.prototype.visitBinary=Jt;Yt.prototype.visitFixedSizeBinary=Jt;Yt.prototype.visitDate=Jt;Yt.prototype.visitDateDay=Jt;Yt.prototype.visitDateMillisecond=Jt;Yt.prototype.visitTimestamp=Jt;Yt.prototype.visitTimestampSecond=Jt;Yt.prototype.visitTimestampMillisecond=Jt;Yt.prototype.visitTimestampMicrosecond=Jt;Yt.prototype.visitTimestampNanosecond=Jt;Yt.prototype.visitTime=Jt;Yt.prototype.visitTimeSecond=Jt;Yt.prototype.visitTimeMillisecond=Jt;Yt.prototype.visitTimeMicrosecond=Jt;Yt.prototype.visitTimeNanosecond=Jt;Yt.prototype.visitDecimal=Jt;Yt.prototype.visitList=Jt;Yt.prototype.visitStruct=Jt;Yt.prototype.visitUnion=Jt;Yt.prototype.visitDenseUnion=Jt;Yt.prototype.visitSparseUnion=Jt;Yt.prototype.visitDictionary=Jt;Yt.prototype.visitInterval=Jt;Yt.prototype.visitIntervalDayTime=Jt;Yt.prototype.visitIntervalYearMonth=Jt;Yt.prototype.visitDuration=Jt;Yt.prototype.visitDurationSecond=Jt;Yt.prototype.visitDurationMillisecond=Jt;Yt.prototype.visitDurationMicrosecond=Jt;Yt.prototype.visitDurationNanosecond=Jt;Yt.prototype.visitFixedSizeList=Jt;Yt.prototype.visitMap=Jt;const aX=new Yt,Myt=(e,t)=>e+t;class Ly extends xn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===qt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Sh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Sh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Lyt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Fyt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),jyt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Sh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},Byt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Sh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},Uyt=(e,t)=>e.type.mode===Ku.Dense?kAe(e,t):RAe(e,t),kAe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Sh.visit(t[s],r[i])},RAe=({children:e},t)=>4+Sh.visitMany(e,e.map(()=>t)).reduce(Myt,0);Ly.prototype.visitUtf8=Lyt;Ly.prototype.visitBinary=Fyt;Ly.prototype.visitList=jyt;Ly.prototype.visitFixedSizeList=Byt;Ly.prototype.visitUnion=Uyt;Ly.prototype.visitDenseUnion=kAe;Ly.prototype.visitSparseUnion=RAe;const Sh=new Ly;var NAe;const PAe={},DAe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Rr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=PAe[o.typeId],f=s[0];this.isValid=d=>oX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,DAe[o.typeId]),this._offsets=SAe(s);break}this.data=s,this.type=o,this.stride=Id(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return xAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return aX.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(_Ae(this,t,n,({data:r,_offsets:i},s,o)=>TAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return En.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(En.isDictionary(this.type)){const t=new B3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new B3(this)}unmemoize(){if(En.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}NAe=Symbol.toStringTag;hr[NAe]=(e=>{e.type=En.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Xu.getVisitFnByTypeId(n),i=Nc.getVisitFnByTypeId(n),s=j3.getVisitFnByTypeId(n),o=Sh.getVisitFnByTypeId(n);PAe[n]={get:r,set:i,indexOf:s,byteLength:o},DAe[n]=Object.create(e,{isValid:{value:Uw(oX)},get:{value:Uw(Xu.getVisitFnByTypeId(n))},set:{value:AAe(Nc.getVisitFnByTypeId(n))},indexOf:{value:CAe(j3.getVisitFnByTypeId(n))},getByteLength:{value:Uw(Sh.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class B3 extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new B3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function zyt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Vyt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Vyt(e){return typeof e!="bigint"?Hv(e):`${Hv(e)}n`}const x8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,Hyt=(e,t=0)=>e.length>=t?e.subarray(0,t):D3(new e.constructor(t),e,0);class A6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?x8(r*1,this.BYTES_PER_ELEMENT):x8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=x8(t*this.stride,this.BYTES_PER_ELEMENT);const n=Hyt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=D3(new this.ArrayType(t),this.buffer)}}A6.prototype.offset=0;class hk extends A6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class OAe extends hk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class $Ae extends hk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let rl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Id(t),this._nulls=new OAe,n&&n.length>0&&(this._isValid=zyt(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),sa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};rl.prototype.length=1;rl.prototype.stride=1;rl.prototype.children=null;rl.prototype.finished=!1;rl.prototype.nullValues=null;rl.prototype._isValid=()=>!0;class Xm extends rl{constructor(t){super(t),this._values=new hk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class C6 extends rl{constructor(t){super(t),this._pendingLength=0,this._offsets=new $Ae}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof S6?n[bf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class nz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const S8=2,Ld=4,Pp=4,Br=4,Cg=new Int32Array(2),cce=new Float32Array(Cg.buffer),fce=new Float64Array(Cg.buffer),DN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var rz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(rz||(rz={}));let U3=class MAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new MAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Cg[0]=this.readInt32(t),cce[0]}readFloat64(t){return Cg[DN?0:1]=this.readInt32(t),Cg[DN?1:0]=this.readInt32(t+4),fce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){cce[0]=n,this.writeInt32(t,Cg[0])}writeFloat64(t,n){fce[0]=n,this.writeInt32(t,Cg[DN?0:1]),this.writeInt32(t+4,Cg[DN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ld+Pp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Pp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Ld+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Ld;const i=this.bytes_.subarray(t,t+r);return n===rz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Ld}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Pp)throw new Error("FlatBuffers: file identifier must be length "+Pp);for(let n=0;n<Pp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Ld+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},LAe=class FAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=U3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=FAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=U3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Ld,0),this.writeInt32(this.offset()-t+Ld)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*S8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=S8;l<s;l+=S8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Br:0;if(n){const s=n;if(this.prep(this.minalign,Ld+Pp+i),s.length!=Pp)throw new TypeError("FlatBuffers: file identifier must be length "+Pp);for(let o=Pp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ld+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Ld,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Br),(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ns.startKeyValue(t),Ns.addKey(t,n),Ns.addValue(t,r),Ns.endKeyValue(t)}}var UE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(UE||(UE={}));var zE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(zE||(zE={}));var z3;(function(e){e[e.DenseArray=0]="DenseArray"})(z3||(z3={}));class gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Br),(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return gl.startInt(t),gl.addBitWidth(t,n),gl.addIsSigned(t,r),gl.endInt(t)}}class Dp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Br),(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new gl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):z3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,z3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class tv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Br),(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return tv.startBinary(t),tv.endBinary(t)}}class nv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new nv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Br),(n||new nv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return nv.startBool(t),nv.endBool(t)}}var V3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(V3||(V3={}));let oD=class U_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new U_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Br),(n||new U_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):V3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,V3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return U_.startDate(t),U_.addUnit(t,n),U_.endDate(t)}};class _u{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new _u).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Br),(n||new _u).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return _u.startDecimal(t),_u.addPrecision(t,n),_u.addScale(t,r),_u.addBitWidth(t,i),_u.endDecimal(t)}}var q0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(q0||(q0={}));class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Br),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,q0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Fd.startDuration(t),Fd.addUnit(t,n),Fd.endDuration(t)}}class jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Br),(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return jd.startFixedSizeBinary(t),jd.addByteWidth(t,n),jd.endFixedSizeBinary(t)}}class Bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Br),(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Bd.startFixedSizeList(t),Bd.addListSize(t,n),Bd.endFixedSizeList(t)}}var H3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(H3||(H3={}));class Ud{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Ud).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Br),(n||new Ud).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,H3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Ud.startFloatingPoint(t),Ud.addPrecision(t,n),Ud.endFloatingPoint(t)}}var q3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(q3||(q3={}));class zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Br),(n||new zd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,q3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return zd.startInterval(t),zd.addUnit(t,n),zd.endInterval(t)}}class rv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new rv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Br),(n||new rv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return rv.startList(t),rv.endList(t)}}let aD=class z_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new z_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Br),(n||new z_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return z_.startMap(t),z_.addKeysSorted(t,n),z_.endMap(t)}};class iv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new iv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Br),(n||new iv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return iv.startNull(t),iv.endNull(t)}}class sv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new sv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Br),(n||new sv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return sv.startStruct_(t),sv.endStruct_(t)}}let d2=class E1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new E1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Br),(n||new E1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,q0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return E1.startTime(t),E1.addUnit(t,n),E1.addBitWidth(t,r),E1.endTime(t)}},h2=class x1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new x1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Br),(n||new x1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,q0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return x1.startTimestamp(t),x1.addUnit(t,n),x1.addTimezone(t,r),x1.endTimestamp(t)}};var W3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(W3||(W3={}));let S1=class T1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new T1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Br),(n||new T1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):W3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,W3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return T1.startUnion(t),T1.addMode(t,n),T1.addTypeIds(t,r),T1.endUnion(t)}};class ov{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new ov).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Br),(n||new ov).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ov.startUtf8(t),ov.endUtf8(t)}}var yi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(yi||(yi={}));let sc=class uD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new uD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Br),(n||new uD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):yi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Dp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new uD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,yi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ad=class vp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new vp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Br),(n||new vp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new sc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,zE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return vp.startSchema(t),vp.addEndianness(t,n),vp.addFields(t,r),vp.addCustomMetadata(t,i),vp.addFeatures(t,s),vp.endSchema(t)}};class fl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new fl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Br),(n||new fl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):UE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ad).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new nz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new nz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,UE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Sr{constructor(t=[],n,r,i=Ua.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=sz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Sr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Sr(n,this.metadata)}assign(...t){const n=t[0]instanceof Sr?t[0]:Array.isArray(t[0])?new Sr(t[0]):new Sr(t),r=[...this.fields],i=ON(ON(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:ON(ON(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=sz(s,new Map);return new Sr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Sr.prototype.fields=null;Sr.prototype.metadata=null;Sr.prototype.dictionaries=null;let Lr=class iz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new iz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],iz.new(n,r,i,s)}};Lr.prototype.type=null;Lr.prototype.name=null;Lr.prototype.nullable=null;Lr.prototype.metadata=null;function ON(e,t){return new Map([...e||new Map,...t||new Map])}function sz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(En.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&sz(s.children,t)}return t}var qyt=LAe,Wyt=U3;class oz{static decode(t){t=new Wyt(Nr(t));const n=fl.getRootAsFooter(t),r=Sr.decode(n.schema(),new Map,n.version());return new Gyt(r,n)}static encode(t){const n=new qyt,r=Sr.encode(n,t.schema);fl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())W0.encode(n,o);const i=n.endVector();fl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())W0.encode(n,o);const s=n.endVector();return fl.startFooter(n),fl.addSchema(n,r),fl.addVersion(n,Ua.V5),fl.addRecordBatches(n,i),fl.addDictionaries(n,s),fl.finishFooterBuffer(n,fl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ua.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Gyt extends oz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return W0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return W0.decode(n)}return null}}class W0{static decode(t){return new W0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return nz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Vf(r),this.bodyLength=Vf(n)}}const $N=Object.freeze({done:!0,value:void 0});class jAe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Yyt extends jAe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return kp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve($N);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ice.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ice.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return kp(this,void 0,void 0,function*(){return yield this.abort(t),$N})}return(t){return kp(this,void 0,void 0,function*(){return yield this.close(),$N})}read(t){return kp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return kp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve($N)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class T8 extends Yyt{write(t){if((t=Nr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?J7(this.toUint8Array(!0)):this.toUint8Array(!1).then(J7)}toUint8Array(t=!1){return t?wh(this._values)[0]:kp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=K2(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return wh(o,a)[0]})}}class BAe extends C6{constructor(t){super(t),this._values=new A6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Nr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Kyt extends rl{constructor(t){super(t),this._values=new OAe}setValue(t,n){this._values.set(t,+n)}}class I6 extends Xm{}I6.prototype._setValue=q2e;class UAe extends I6{}UAe.prototype._setValue=BK;class zAe extends I6{}zAe.prototype._setValue=UK;class VAe extends Xm{}VAe.prototype._setValue=Y2e;class Xyt extends rl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new H0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=G3({type:this.type.indices,nullValues:n}),this.dictionary=G3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class HAe extends Xm{}HAe.prototype._setValue=H2e;class Qyt extends rl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new BE(this.type.listSize,new Lr(n,t.type,!0)),r}}class k6 extends Xm{setValue(t,n){this._values.set(t,n)}}class Jyt extends k6{setValue(t,n){super.setValue(t,U2e(n))}}class Zyt extends k6{}class e1t extends k6{}class R6 extends Xm{}R6.prototype._setValue=Q2e;class qAe extends R6{}qAe.prototype._setValue=XK;class WAe extends R6{}WAe.prototype._setValue=QK;class sS extends Xm{}sS.prototype._setValue=J2e;class GAe extends sS{}GAe.prototype._setValue=JK;class YAe extends sS{}YAe.prototype._setValue=ZK;class KAe extends sS{}KAe.prototype._setValue=eX;class XAe extends sS{}XAe.prototype._setValue=tX;class Qm extends Xm{setValue(t,n){this._values.set(t,n)}}class t1t extends Qm{}class n1t extends Qm{}class r1t extends Qm{}class i1t extends Qm{}class s1t extends Qm{}class o1t extends Qm{}class a1t extends Qm{}class u1t extends Qm{}class l1t extends C6{constructor(t){super(t),this._offsets=new $Ae}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new jE(new Lr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class c1t extends C6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new MC(new Lr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class f1t extends rl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class d1t extends rl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new la([...this.type.children,new Lr(n,t.type,!0)]),r}}class oS extends Xm{}oS.prototype._setValue=W2e;class QAe extends oS{}QAe.prototype._setValue=zK;class JAe extends oS{}JAe.prototype._setValue=VK;class ZAe extends oS{}ZAe.prototype._setValue=HK;class eCe extends oS{}eCe.prototype._setValue=qK;class aS extends Xm{}aS.prototype._setValue=G2e;class tCe extends aS{}tCe.prototype._setValue=WK;class nCe extends aS{}nCe.prototype._setValue=GK;class rCe extends aS{}rCe.prototype._setValue=YK;class iCe extends aS{}iCe.prototype._setValue=KK;class uX extends rl{constructor(t){super(t),this._typeIds=new hk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Lr(n,t.type)];return this.type=new $C(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class h1t extends uX{}class p1t extends uX{constructor(t){super(t),this._offsets=new hk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class sCe extends C6{constructor(t){super(t),this._values=new A6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,TK(n))}_flushPending(t,n){}}sCe.prototype._flushPending=BAe.prototype._flushPending;class m1t extends xn{visitNull(){return f1t}visitBool(){return Kyt}visitInt(){return Qm}visitInt8(){return t1t}visitInt16(){return n1t}visitInt32(){return r1t}visitInt64(){return i1t}visitUint8(){return s1t}visitUint16(){return o1t}visitUint32(){return a1t}visitUint64(){return u1t}visitFloat(){return k6}visitFloat16(){return Jyt}visitFloat32(){return Zyt}visitFloat64(){return e1t}visitUtf8(){return sCe}visitBinary(){return BAe}visitFixedSizeBinary(){return HAe}visitDate(){return I6}visitDateDay(){return UAe}visitDateMillisecond(){return zAe}visitTimestamp(){return oS}visitTimestampSecond(){return QAe}visitTimestampMillisecond(){return JAe}visitTimestampMicrosecond(){return ZAe}visitTimestampNanosecond(){return eCe}visitTime(){return aS}visitTimeSecond(){return tCe}visitTimeMillisecond(){return nCe}visitTimeMicrosecond(){return rCe}visitTimeNanosecond(){return iCe}visitDecimal(){return VAe}visitList(){return l1t}visitStruct(){return d1t}visitUnion(){return uX}visitDenseUnion(){return p1t}visitSparseUnion(){return h1t}visitDictionary(){return Xyt}visitInterval(){return R6}visitIntervalDayTime(){return qAe}visitIntervalYearMonth(){return WAe}visitDuration(){return sS}visitDurationSecond(){return GAe}visitDurationMillisecond(){return YAe}visitDurationMicrosecond(){return KAe}visistDurationNanosecond(){return XAe}visitFixedSizeList(){return Qyt}visitMap(){return c1t}}const g1t=new m1t;class Kt extends xn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function su(e,t){return t instanceof e.constructor}function pk(e,t){return e===t||su(e,t)}function Jm(e,t){return e===t||su(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function N6(e,t){return e===t||su(e,t)&&e.precision===t.precision}function y1t(e,t){return e===t||su(e,t)&&e.byteWidth===t.byteWidth}function lX(e,t){return e===t||su(e,t)&&e.unit===t.unit}function mk(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function gk(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function v1t(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&G0.compareManyFields(e.children,t.children)}function b1t(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&G0.compareManyFields(e.children,t.children)}function cX(e,t){return e===t||su(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&G0.compareManyFields(e.children,t.children)}function _1t(e,t){return e===t||su(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&G0.visit(e.indices,t.indices)&&G0.visit(e.dictionary,t.dictionary)}function fX(e,t){return e===t||su(e,t)&&e.unit===t.unit}function yk(e,t){return e===t||su(e,t)&&e.unit===t.unit}function w1t(e,t){return e===t||su(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&G0.compareManyFields(e.children,t.children)}function E1t(e,t){return e===t||su(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&G0.compareManyFields(e.children,t.children)}Kt.prototype.visitNull=pk;Kt.prototype.visitBool=pk;Kt.prototype.visitInt=Jm;Kt.prototype.visitInt8=Jm;Kt.prototype.visitInt16=Jm;Kt.prototype.visitInt32=Jm;Kt.prototype.visitInt64=Jm;Kt.prototype.visitUint8=Jm;Kt.prototype.visitUint16=Jm;Kt.prototype.visitUint32=Jm;Kt.prototype.visitUint64=Jm;Kt.prototype.visitFloat=N6;Kt.prototype.visitFloat16=N6;Kt.prototype.visitFloat32=N6;Kt.prototype.visitFloat64=N6;Kt.prototype.visitUtf8=pk;Kt.prototype.visitBinary=pk;Kt.prototype.visitFixedSizeBinary=y1t;Kt.prototype.visitDate=lX;Kt.prototype.visitDateDay=lX;Kt.prototype.visitDateMillisecond=lX;Kt.prototype.visitTimestamp=mk;Kt.prototype.visitTimestampSecond=mk;Kt.prototype.visitTimestampMillisecond=mk;Kt.prototype.visitTimestampMicrosecond=mk;Kt.prototype.visitTimestampNanosecond=mk;Kt.prototype.visitTime=gk;Kt.prototype.visitTimeSecond=gk;Kt.prototype.visitTimeMillisecond=gk;Kt.prototype.visitTimeMicrosecond=gk;Kt.prototype.visitTimeNanosecond=gk;Kt.prototype.visitDecimal=pk;Kt.prototype.visitList=v1t;Kt.prototype.visitStruct=b1t;Kt.prototype.visitUnion=cX;Kt.prototype.visitDenseUnion=cX;Kt.prototype.visitSparseUnion=cX;Kt.prototype.visitDictionary=_1t;Kt.prototype.visitInterval=fX;Kt.prototype.visitIntervalDayTime=fX;Kt.prototype.visitIntervalYearMonth=fX;Kt.prototype.visitDuration=yk;Kt.prototype.visitDurationSecond=yk;Kt.prototype.visitDurationMillisecond=yk;Kt.prototype.visitDurationMicrosecond=yk;Kt.prototype.visitDurationNanosecond=yk;Kt.prototype.visitFixedSizeList=w1t;Kt.prototype.visitMap=E1t;const G0=new Kt;function az(e,t){return G0.compareSchemas(e,t)}function G3(e){const t=e.type,n=new(g1t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(G3(Object.assign(Object.assign({},l),{type:u})))}}return n}function A8(e,t){return x1t(e,t.map(n=>n.data.concat()))}function x1t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=S1t(n,o,c,t,i),o>0&&(r[s++]=sa({type:new la(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new yl(e,f))]}function S1t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:sa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var oCe;class Tu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Sr([]),this._offsets=[0],this;let i,s;t[0]instanceof Sr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof yl)return[u];if(u instanceof Tu)return u.batches;if(u instanceof Rr){if(u.type instanceof la)return[new yl(new Sr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Sr(l.map((h,p)=>new Lr(String(h),c[p].type))),[,d]=A8(f,c);return d.length===0?[new yl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Sr([]),!(i instanceof Sr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof yl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!az(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??SAe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=xAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?aX.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Tu(n,r.map(i=>new yl(n,i)))}slice(t,n){const r=this.schema;[t,n]=_Ae({length:this.numRows},t,n);const i=TAe(this.data,this._offsets,t,n);return new Tu(r,i.map(s=>new yl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=sa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([sa({type:new Tm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=A8(r,a)}return new Tu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Tu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Tu(...A8(s,o))}}oCe=Symbol.toStringTag;Tu[oCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Uw(oX),e.get=Uw(Xu.getVisitFn(re.Struct)),e.set=AAe(Nc.getVisitFn(re.Struct)),e.indexOf=CAe(j3.getVisitFn(re.Struct)),e.getByteLength=Uw(Sh.getVisitFn(re.Struct)),"Table"))(Tu.prototype);var aCe;let yl=class p2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Sr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=sa({nullCount:0,type:new la(this.schema.fields),children:this.schema.fields.map(n=>sa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Rr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=dce(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Lr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Sr(r),a=sa({type:new la(r),length:s,children:i,nullCount:0});[this.schema,this.data]=dce(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=uCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Xu.visit(this.data,t)}set(t,n){return Nc.visit(this.data,t,n)}indexOf(t,n){return j3.visit(this.data,t,n)}getByteLength(t){return Sh.visit(this.data,t)}[Symbol.iterator](){return aX.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new Tu(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new p2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([sa({type:new Tm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Sr(s,new Map(this.schema.metadata)),i=sa({type:new la(s),children:o})}return new p2(r,i)}select(t){const n=this.schema.select(t),r=new la(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new p2(n,sa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=sa({type:new la(n.fields),length:this.numRows,children:r});return new p2(n,i)}};aCe=Symbol.toStringTag;yl[aCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(yl.prototype);function dce(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:sa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),sa({type:new la(i),length:n,children:s})]}function uCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])uCe(a.children,l==null?void 0:l.children,n);if(En.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class T1t extends yl{constructor(t){const n=t.fields.map(i=>sa({type:i.type})),r=sa({type:new la(t.fields),nullCount:0,children:n});super(t,r)}}var Y3;(function(e){e[e.BUFFER=0]="BUFFER"})(Y3||(Y3={}));var K3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(K3||(K3={}));class Ig{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ig).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Br),(n||new Ig).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):K3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Y3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,K3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Y3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ig.startBodyCompression(t),Ig.addCodec(t,n),Ig.addMethod(t,r),Ig.endBodyCompression(t)}}let lCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},cCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},wp=class uz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new uz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Br),(n||new uz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new cCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new lCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ig).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},V_=class lz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new lz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Br),(n||new lz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new wp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var X3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(X3||(X3={}));let hg=class vd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new vd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Br),(n||new vd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):UE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):X3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,UE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,X3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return vd.startMessage(t),vd.addVersion(t,n),vd.addHeaderType(t,r),vd.addHeader(t,i),vd.addBodyLength(t,s),vd.addCustomMetadata(t,o),vd.endMessage(t)}};class A1t extends xn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return iv.startNull(n),iv.endNull(n)}visitInt(t,n){return gl.startInt(n),gl.addBitWidth(n,t.bitWidth),gl.addIsSigned(n,t.isSigned),gl.endInt(n)}visitFloat(t,n){return Ud.startFloatingPoint(n),Ud.addPrecision(n,t.precision),Ud.endFloatingPoint(n)}visitBinary(t,n){return tv.startBinary(n),tv.endBinary(n)}visitBool(t,n){return nv.startBool(n),nv.endBool(n)}visitUtf8(t,n){return ov.startUtf8(n),ov.endUtf8(n)}visitDecimal(t,n){return _u.startDecimal(n),_u.addScale(n,t.scale),_u.addPrecision(n,t.precision),_u.addBitWidth(n,t.bitWidth),_u.endDecimal(n)}visitDate(t,n){return oD.startDate(n),oD.addUnit(n,t.unit),oD.endDate(n)}visitTime(t,n){return d2.startTime(n),d2.addUnit(n,t.unit),d2.addBitWidth(n,t.bitWidth),d2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return h2.startTimestamp(n),h2.addUnit(n,t.unit),r!==void 0&&h2.addTimezone(n,r),h2.endTimestamp(n)}visitInterval(t,n){return zd.startInterval(n),zd.addUnit(n,t.unit),zd.endInterval(n)}visitDuration(t,n){return Fd.startDuration(n),Fd.addUnit(n,t.unit),Fd.endDuration(n)}visitList(t,n){return rv.startList(n),rv.endList(n)}visitStruct(t,n){return sv.startStruct_(n),sv.endStruct_(n)}visitUnion(t,n){S1.startTypeIdsVector(n,t.typeIds.length);const r=S1.createTypeIdsVector(n,t.typeIds);return S1.startUnion(n),S1.addMode(n,t.mode),S1.addTypeIds(n,r),S1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Dp.startDictionaryEncoding(n),Dp.addId(n,BigInt(t.id)),Dp.addIsOrdered(n,t.isOrdered),r!==void 0&&Dp.addIndexType(n,r),Dp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return jd.startFixedSizeBinary(n),jd.addByteWidth(n,t.byteWidth),jd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Bd.startFixedSizeList(n),Bd.addListSize(n,t.listSize),Bd.endFixedSizeList(n)}visitMap(t,n){return aD.startMap(n),aD.addKeysSorted(n,t.keysSorted),aD.endMap(n)}}const C8=new A1t;function C1t(e,t=new Map){return new Sr(k1t(e,t),lD(e.metadata),t)}function fCe(e){return new Ll(e.count,dCe(e.columns),hCe(e.columns))}function I1t(e){return new Th(fCe(e.data),e.id,e.isDelta)}function k1t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Lr.fromJSON(n,t))}function hce(e,t){return(e.children||[]).filter(Boolean).map(n=>Lr.fromJSON(n,t))}function dCe(e){return(e||[]).reduce((t,n)=>[...t,new Y0(n.count,R1t(n.VALIDITY)),...dCe(n.children)],[])}function hCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Kd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Kd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Kd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Kd(t.length,i.DATA.length)),t=hCe(i.children,t)}return t}function R1t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function N1t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=mce(e,hce(e,t)),i=new Lr(e.name,o,e.nullable,lD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?pce(r):new z0,a=new H0(t.get(n),r,n,s.isOrdered),i=new Lr(e.name,a,e.nullable,lD(e.metadata))):(r=(r=s.indexType)?pce(r):new z0,t.set(n,o=mce(e,hce(e,t))),a=new H0(o,r,n,s.isOrdered),i=new Lr(e.name,a,e.nullable,lD(e.metadata))),i||null}function lD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function pce(e){return new eu(e.isSigned,e.bitWidth)}function mce(e,t){const n=e.type.name;switch(n){case"NONE":return new Tm;case"null":return new Tm;case"binary":return new DC;case"utf8":return new ME;case"bool":return new OC;case"list":return new jE((t||[])[0]);case"struct":return new la(t||[]);case"struct_":return new la(t||[])}switch(n){case"int":{const r=e.type;return new eu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new V0(Po[r.precision])}case"decimal":{const r=e.type;return new O3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new LE(Eh[r.unit])}case"time":{const r=e.type;return new Am(qt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new $3(qt[r.unit],r.timezone)}case"interval":{const r=e.type;return new FE(xh[r.unit])}case"duration":{const r=e.type;return new M3(qt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new $C(Ku[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new L3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new BE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new MC((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var P1t=LAe,D1t=U3;class Vd{static fromJSON(t,n){const r=new Vd(0,Ua.V5,n);return r._createHeader=O1t(t,n),r}static decode(t){t=new D1t(Nr(t));const n=hg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Vd(r,i,s);return o._createHeader=$1t(n,s),o}static encode(t){const n=new P1t;let r=-1;return t.isSchema()?r=Sr.encode(n,t.header()):t.isRecordBatch()?r=Ll.encode(n,t.header()):t.isDictionaryBatch()&&(r=Th.encode(n,t.header())),hg.startMessage(n),hg.addVersion(n,Ua.V5),hg.addHeader(n,r),hg.addHeaderType(n,t.headerType),hg.addBodyLength(n,BigInt(t.bodyLength)),hg.finishMessageBuffer(n,hg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Sr)return new Vd(0,Ua.V5,Js.Schema,t);if(t instanceof Ll)return new Vd(n,Ua.V5,Js.RecordBatch,t);if(t instanceof Th)return new Vd(n,Ua.V5,Js.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Js.Schema}isRecordBatch(){return this.headerType===Js.RecordBatch}isDictionaryBatch(){return this.headerType===Js.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Vf(t)}}class Ll{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Vf(t)}}class Th{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Vf(n)}}class Kd{constructor(t,n){this.offset=Vf(t),this.length=Vf(n)}}class Y0{constructor(t,n){this.length=Vf(t),this.nullCount=Vf(n)}}function O1t(e,t){return()=>{switch(t){case Js.Schema:return Sr.fromJSON(e);case Js.RecordBatch:return Ll.fromJSON(e);case Js.DictionaryBatch:return Th.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Js[t]}, type: ${t} }`)}}function $1t(e,t){return()=>{switch(t){case Js.Schema:return Sr.decode(e.header(new Ad),new Map,e.version());case Js.RecordBatch:return Ll.decode(e.header(new wp),e.version());case Js.DictionaryBatch:return Th.decode(e.header(new V_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Js[t]}, type: ${t} }`)}}Lr.encode=W1t;Lr.decode=H1t;Lr.fromJSON=N1t;Sr.encode=q1t;Sr.decode=M1t;Sr.fromJSON=C1t;Ll.encode=G1t;Ll.decode=L1t;Ll.fromJSON=fCe;Th.encode=Y1t;Th.decode=F1t;Th.fromJSON=I1t;Y0.encode=K1t;Y0.decode=B1t;Kd.encode=X1t;Kd.decode=j1t;function M1t(e,t=new Map,n=Ua.V5){const r=V1t(e,t);return new Sr(r,cD(e),t,n)}function L1t(e,t=Ua.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ll(e.length(),U1t(e),z1t(e,t))}function F1t(e,t=Ua.V5){return new Th(Ll.decode(e.data(),t),e.id(),e.isDelta())}function j1t(e){return new Kd(e.offset(),e.length())}function B1t(e){return new Y0(e.length(),e.nullCount())}function U1t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Y0.decode(n));return t}function z1t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ua.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Kd.decode(r));return n}function V1t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Lr.decode(r,t));return n}function gce(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Lr.decode(r,t));return n}function H1t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=vce(e,gce(e,t)),r=new Lr(e.name(),i,e.nullable(),cD(e))):t.has(n=Vf(a.id()))?(s=(s=a.indexType())?yce(s):new z0,o=new H0(t.get(n),s,n,a.isOrdered()),r=new Lr(e.name(),o,e.nullable(),cD(e))):(s=(s=a.indexType())?yce(s):new z0,t.set(n,i=vce(e,gce(e,t))),o=new H0(i,s,n,a.isOrdered()),r=new Lr(e.name(),o,e.nullable(),cD(e))),r||null}function cD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function yce(e){return new eu(e.isSigned(),e.bitWidth())}function vce(e,t){const n=e.typeType();switch(n){case yi.NONE:return new Tm;case yi.Null:return new Tm;case yi.Binary:return new DC;case yi.Utf8:return new ME;case yi.Bool:return new OC;case yi.List:return new jE((t||[])[0]);case yi.Struct_:return new la(t||[])}switch(n){case yi.Int:{const r=e.type(new gl);return new eu(r.isSigned(),r.bitWidth())}case yi.FloatingPoint:{const r=e.type(new Ud);return new V0(r.precision())}case yi.Decimal:{const r=e.type(new _u);return new O3(r.scale(),r.precision(),r.bitWidth())}case yi.Date:{const r=e.type(new oD);return new LE(r.unit())}case yi.Time:{const r=e.type(new d2);return new Am(r.unit(),r.bitWidth())}case yi.Timestamp:{const r=e.type(new h2);return new $3(r.unit(),r.timezone())}case yi.Interval:{const r=e.type(new zd);return new FE(r.unit())}case yi.Duration:{const r=e.type(new Fd);return new M3(r.unit())}case yi.Union:{const r=e.type(new S1);return new $C(r.mode(),r.typeIdsArray()||[],t||[])}case yi.FixedSizeBinary:{const r=e.type(new jd);return new L3(r.byteWidth())}case yi.FixedSizeList:{const r=e.type(new Bd);return new BE(r.listSize(),(t||[])[0])}case yi.Map:{const r=e.type(new aD);return new MC((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${yi[n]}" (${n})`)}function q1t(e,t){const n=t.fields.map(s=>Lr.encode(e,s));Ad.startFieldsVector(e,n.length);const r=Ad.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Ad.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ns.startKeyValue(e),Ns.addKey(e,a),Ns.addValue(e,u),Ns.endKeyValue(e)})):-1;return Ad.startSchema(e),Ad.addFields(e,r),Ad.addEndianness(e,Q1t?zE.Little:zE.Big),i!==-1&&Ad.addCustomMetadata(e,i),Ad.endSchema(e)}function W1t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;En.isDictionary(s)?(o=s.dictionary.typeId,i=C8.visit(s,e),r=C8.visit(s.dictionary,e)):r=C8.visit(s,e);const a=(s.children||[]).map(c=>Lr.encode(e,c)),u=sc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?sc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ns.startKeyValue(e),Ns.addKey(e,d),Ns.addValue(e,h),Ns.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),sc.startField(e),sc.addType(e,r),sc.addTypeType(e,o),sc.addChildren(e,u),sc.addNullable(e,!!t.nullable),n!==-1&&sc.addName(e,n),i!==-1&&sc.addDictionary(e,i),l!==-1&&sc.addCustomMetadata(e,l),sc.endField(e)}function G1t(e,t){const n=t.nodes||[],r=t.buffers||[];wp.startNodesVector(e,n.length);for(const o of n.slice().reverse())Y0.encode(e,o);const i=e.endVector();wp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Kd.encode(e,o);const s=e.endVector();return wp.startRecordBatch(e),wp.addLength(e,BigInt(t.length)),wp.addNodes(e,i),wp.addBuffers(e,s),wp.endRecordBatch(e)}function Y1t(e,t){const n=Ll.encode(e,t.data);return V_.startDictionaryBatch(e),V_.addId(e,BigInt(t.id)),V_.addIsDelta(e,t.isDelta),V_.addData(e,n),V_.endDictionaryBatch(e)}function K1t(e,t){return cCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function X1t(e,t){return lCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Q1t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),cz="ARROW1",dX=new Uint8Array(cz.length);for(let e=0;e<cz.length;e+=1)dX[e]=cz.codePointAt(e);dX.length;class as extends xn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof yl?s.data.children:s.data),r=new as;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!En.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(En.isUnion(n))this.nodes.push(new Y0(r,0));else{const{nullCount:i}=t;En.isNull(n)||Of.call(this,i<=0?new Uint8Array(0):F3(t.offset,r,t.nullBitmap)),this.nodes.push(new Y0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Of(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Kd(this._byteLength,t)),this._byteLength+=t,this}function J1t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Of.call(this,i),n.mode===Ku.Sparse)return fz.call(this,e);if(n.mode===Ku.Dense){if(e.offset<=0)return Of.call(this,s),fz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Of.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function Z1t(e){let t;return e.nullCount>=e.length?Of.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Of.call(this,F3(e.offset,e.length,t)):Of.call(this,EAe(e.values))}function Zm(e){return Of.call(this,e.values.subarray(0,e.length*e.stride))}function pCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Of.call(this,g2e(-i,t+1,r)),Of.call(this,n.subarray(i,i+o)),this}function hX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Of.call(this,g2e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function fz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}as.prototype.visitBool=Z1t;as.prototype.visitInt=Zm;as.prototype.visitFloat=Zm;as.prototype.visitUtf8=pCe;as.prototype.visitBinary=pCe;as.prototype.visitFixedSizeBinary=Zm;as.prototype.visitDate=Zm;as.prototype.visitTimestamp=Zm;as.prototype.visitTime=Zm;as.prototype.visitDecimal=Zm;as.prototype.visitList=hX;as.prototype.visitStruct=fz;as.prototype.visitUnion=J1t;as.prototype.visitInterval=Zm;as.prototype.visitDuration=Zm;as.prototype.visitFixedSizeList=hX;as.prototype.visitMap=hX;class mCe extends jAe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new T8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,$y(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return E6(t)?t.then(n=>this.writeAll(n)):x6(t)?yX(this,t):gX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof T8?this._sink=t:(this._sink=new T8,t&&s0t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&o0t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!az(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Tu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof yl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!az(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof yl?t instanceof T1t||this._writeRecordBatch(t):t instanceof Tu?this.writeAll(t.batches):AK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Vd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Js.RecordBatch?this._recordBatchBlocks.push(new W0(a,t.bodyLength,this._position)):t.headerType===Js.DictionaryBatch&&this._dictionaryBlocks.push(new W0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Nr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Vd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(dX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=as.assemble(t),o=new Ll(t.numRows,r,i),a=Vd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=as.assemble(new hr([t])),u=new Ll(t.length,s,o),l=new Th(u,n,r),c=Vd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class pX extends mCe{static writeAll(t,n){const r=new pX(n);return E6(t)?t.then(i=>r.writeAll(i)):x6(t)?yX(r,t):gX(r,t)}}class mX extends mCe{static writeAll(t){const n=new mX;return E6(t)?t.then(r=>n.writeAll(r)):x6(t)?yX(n,t):gX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=oz.encode(new oz(t,Ua.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function gX(e,t){let n=t;t instanceof Tu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function yX(e,t){var n,r,i,s,o,a,u;return kp(this,void 0,void 0,function*(){try{for(n=!0,r=K2(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function evt(e,t="stream"){return(t==="stream"?pX:mX).writeAll(e).toUint8Array(!0)}function vX(e,t=1){return(e*t+63&-64||64)/t}function K0(e,t,n=e.BYTES_PER_ELEMENT){return new e(vX(t,n))}function bX(e){return e instanceof Rr?e:new Rr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function tvt(e){return new hr([bX(e)])}const _X=new TextEncoder;function nvt(e,t,n){const r=_X.encode(n);return e.set(r,t),r.length}function rvt(e,t,n){return _X.encodeInto(n,e.subarray(t)).written}const ivt=_X.encodeInto?rvt:nvt;function bce(e,t){const n=K0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function svt(e,t){const n=K0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function ovt(e,t){const n=K0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function avt(e,t){const n=K0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function uvt(e){const t=G3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function lvt(e,t,n){const r=K0(Int32Array,t+1),i=K0(Uint8Array,3*n);let s=0;return{set(o,a){s+=ivt(i,s,o),r[a+1]=s},data:()=>{const o=vX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function cvt(e,t){const n=[],r=K0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:fvt(e.dictionary,n,o)})}}function fvt(e,t,n){const r=lvt(e,t.length,n);return t.forEach(r.set),tvt(r.data())}function dvt(e,t){const n=K0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function hvt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?bce:null;break;case re.Float:r=e.precision>0?bce:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?cvt:null;break;case re.Bool:r=svt;break;case re.Date:r=e.unit?avt:ovt;break}return r==null?uvt(e):n?dvt(r(e,t),t):r(e,t)}function pvt(e,t){const n=e.length,r=vX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),bX({type:t,length:n,buffers:[null,i]})}function gCe(e,t,n,r,i=!0){const s=hvt(r,e,i);return t(n,s.set),bX(s.data())}function wX(e){if(e instanceof En||e==null)return e;switch(e){case re.Binary:return new DC;case re.Bool:return new OC;case re.DateDay:return new w0t;case re.DateMillisecond:case re.Date:return new E0t;case re.Dictionary:return new H0(new ME,new z0);case re.Float16:return new F2e;case re.Float32:return new MK;case re.Float64:case re.Float:return new LK;case re.Int8:return new kK;case re.Int16:return new RK;case re.Int32:case re.Int:return new z0;case re.Int64:return new NK;case re.IntervalDayTime:return new C0t;case re.Interval:case re.IntervalYearMonth:return new I0t;case re.Null:return new Tm;case re.TimeMicrosecond:return new T0t;case re.TimeMillisecond:case re.Time:return new S0t;case re.TimeNanosecond:return new A0t;case re.TimeSecond:return new x0t;case re.Uint8:return new PK;case re.Uint16:return new DK;case re.Uint32:return new OK;case re.Uint64:return new $K;case re.Utf8:return new ME;default:wn(`Unsupported type code: ${_h(e)}. Use a data type constructor instead?`)}}function mvt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function yCe(e,t){const n=dz();return e(t,n.add),n}function dz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Sm(t))++e.dates,mvt(t)&&++e.utcdays;else if(ev(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=dz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=dz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return wX(gvt(e))}};return e}function gvt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:wn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:wn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Lr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new BE(e.minlen,n):new jE(n)}else if(e.structs===t){const n=e.struct_prof;return new la(Object.keys(n).map(r=>Lr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;wn("Type inference failure")}}}}function yvt(e,t,n,r,i,s=!0){if(i=wX(i),!i){const o=yCe(r,t);s=o.nulls>0,i=o.type()}return gCe(n,r,t,i,s)}function vvt(e,t,n,r,i,s=!0){i=wX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=bvt(o);if(u&&a&&_ce(u.type,i))return u;const l=o.data;if(fk(l)){const c=_vt(l);if(a&&c&&_ce(c,i))return pvt(l,c);i=i||c,s=!1}if(!i){const c=yCe(r,o);s=c.nulls>0,i=c.type()}return gCe(n,r,o,i,s)}function bvt(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function _vt(e){const n={Float32Array:MK,Float64Array:LK,Int8Array:kK,Int16Array:RK,Int32Array:z0,Uint8Array:PK,Uint16Array:DK,Uint32Array:OK,BigInt64Array:NK,BigUint64Array:$K}[e.constructor.name];return n?new n:null}function _ce(e,t){return!e||!t?!0:e.compareTo(t)}function wvt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function Evt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&ev(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const xvt=()=>wn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Svt(){try{return Tu}catch{xvt()}}function vCe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=Tvt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&wn("Column length mismatch"),a[l]=c});const u=Svt();return new u(a)}function Tvt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=pi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:yvt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:wvt(e,r,i)};if(Avt(e))return{dataFrom:vvt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:Evt(e,r,i)};wn("Unsupported input data type")}function Avt(e){return e&&pi(e.reify)}function Cvt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return evt(vCe(e,r),n)}function Ivt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function kvt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Sm(u))++i,Ivt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function P6(e,t){return pi(t)?t(e):t||e.columnNames()}function bCe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=kvt(Rvt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function Rvt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function EX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function Nvt(e,t={}){const n=P6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Sm(l)?_6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return EX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function _Ce(e,t={}){if(pi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Sm(e))return t.utc?_6(e):zTe(e);{const r=JSON.stringify(e,(s,o)=>fk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function D6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function Pvt(e,t={}){const n=P6(e,t.columns),{align:r,format:i}=bCe(e,n,t),s=Dvt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(_Ce(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return EX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function Dvt(e){return D6(e.style,t=>pi(t)?t:()=>t)}function Ovt(e,t=!0,n=!1){return e===void 0||e?t:n}const $vt=e=>Sm(e)?_6(e,!0):e;function Mvt(e,t={}){const n=Ovt(t.schema),r=t.format||{},i=P6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||$vt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Lvt(e,t={}){const n=P6(e,t.columns),{align:r,format:i}=bCe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return EX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(_Ce(u,i[l]))+"|"}}),a+`
`}function wCe(e,t){for(const[n,r]of w6(t))e.set(n,r);return e}function Fvt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Cm(e,t,n=new Map){return t=Za(t)?e.columnName(t):t,jo(t)?n.set(t,t):dr(t)?t.forEach(r=>Cm(e,r,n)):pi(t)?Cm(e,t(e),n):ba(t)?wCe(n,t):wn(`Invalid column selection: ${_h(t)}`),n}function O6(e,t){return e.toObject=t,e}function ECe(e){return dr(e)?e.map(ECe):e&&e.toObject?e.toObject():e}function VE(){return O6(e=>e.columnNames(),()=>({all:[]}))}function xCe(...e){return e=e.flat(),O6(t=>{const n=Cm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:ECe(e)}))}function jvt(e,t){return O6(n=>{let r=Za(e)?e:n.columnIndex(e),i=Za(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function Bvt(e){return jo(e)&&(e=RegExp(Fvt(e))),O6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Uvt(e){return fk(e.data)?e.data.constructor:Array}class Op extends igt{static from(t,n){return new Op(agt(t,n),n)}static new(t,n){if(t instanceof Op)return t;const r={},i=[];for(const[s,o]of w6(t))r[s]=o,i.push(s);return new Op(r,n||i)}constructor(t,n,r,i,s,o){D6(t,ogt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Op(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Mgt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Kl(r).groupby(r.groups());return t.forEach(s=>{s=Op.new(s),s.numRows()!==n&&wn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):wn(`Unrecognized column: ${t}`)}object(t=0){return wce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Cm(this,t.columns||VE()),o=h2e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Fgt(this,u,a,n)}return a}*[Symbol.iterator](){const t=wce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(Uvt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Lgt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return vCe(this,t)}toArrowBuffer(t){return Cvt(this,t)}toCSV(t){return Nvt(this,t)}toHTML(t){return Pvt(this,t)}toJSON(t){return Mvt(this,t)}toMarkdown(t){return Lvt(this,t)}}function wce(e){let t=e._builder;if(!t){const n=h2e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class zvt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Vvt[e.type];s&&s(e,t,n)}const MN=(e,t,n)=>{er(e.argument,t,n,e)},I8=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},Ece=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},k8=(e,t,n)=>{Cd(e.params,t,n,e),er(e.body,t,n,e)},xce=(e,t,n)=>{er(e.callee,t,n,e),Cd(e.arguments,t,n,e)},Cd=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},Vvt={TemplateLiteral:(e,t,n)=>{Cd(e.expressions,t,n,e),Cd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:xce,NewExpression:xce,ArrayExpression:(e,t,n)=>{Cd(e.elements,t,n,e)},AssignmentExpression:I8,AwaitExpression:MN,BinaryExpression:I8,LogicalExpression:I8,UnaryExpression:MN,UpdateExpression:MN,ConditionalExpression:Ece,ObjectExpression:(e,t,n)=>{Cd(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:k8,FunctionExpression:k8,FunctionDeclaration:k8,VariableDeclaration:(e,t,n)=>{Cd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Cd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:Ece,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),Cd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),Cd(e.consequent,t,n,e)},ReturnStatement:MN,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function SCe(e){delete e.start,delete e.end,delete e.optional}function Sce(e){SCe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Hvt(e){return er(e,null,{Column:Sce,Constant:Sce,Default:SCe}),e}function Ds(e,t){return t&&t.type===e}function qvt(e){return Ds(Ugt,e)||Ds(Bgt,e)}function Wvt(e){return pi(e)?e:()=>e}const Gvt="Escaped functions are not valid as rollup or pivot values.";function Yvt(e,t,n){e.aggronly&&wn(Gvt);const r="(row,data)=>fn("+d2e(e.table.columnNames())+",$)";return{escape:SK.escape(r,Wvt(t.expr),n)}}var Kvt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],TCe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Xvt="-----------------------------------------------------------------------------------------------------------------------------------------------------",ACe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",R8={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},N8="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Qvt={5:N8,"5module":N8+" export import",6:N8+" const class extends export import super"},Jvt=/^in(stanceof)?$/,Zvt=new RegExp("["+ACe+"]"),ebt=new RegExp("["+ACe+Xvt+"]");function hz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Im(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Zvt.test(String.fromCharCode(e)):t===!1?!1:hz(e,TCe)}function HE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&ebt.test(String.fromCharCode(e)):t===!1?!1:hz(e,TCe)||hz(e,Kvt)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ec(e,t){return new or(e,{beforeExpr:!0,binop:t})}var tc={beforeExpr:!0},hu={startsExpr:!0},xX={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,xX[e]=new or(e,t)}var K={num:new or("num",hu),regexp:new or("regexp",hu),string:new or("string",hu),name:new or("name",hu),privateId:new or("privateId",hu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",tc),semi:new or(";",tc),colon:new or(":",tc),dot:new or("."),question:new or("?",tc),questionDot:new or("?."),arrow:new or("=>",tc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",tc),backQuote:new or("`",hu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ec("||",1),logicalAND:ec("&&",2),bitwiseOR:ec("|",3),bitwiseXOR:ec("^",4),bitwiseAND:ec("&",5),equality:ec("==/!=/===/!==",6),relational:ec("</>/<=/>=",7),bitShift:ec("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ec("%",10),star:ec("*",10),slash:ec("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:ec("??",1),_break:Wn("break"),_case:Wn("case",tc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",tc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",tc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",hu),_if:Wn("if"),_return:Wn("return",tc),_switch:Wn("switch"),_throw:Wn("throw",tc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",hu),_super:Wn("super",hu),_class:Wn("class",hu),_extends:Wn("extends",tc),_export:Wn("export"),_import:Wn("import",hu),_null:Wn("null",hu),_true:Wn("true",hu),_false:Wn("false",hu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},qc=/\r\n?|\n|\u2028|\u2029/,tbt=new RegExp(qc.source,"g");function uS(e){return e===10||e===13||e===8232||e===8233}function CCe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(uS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var ICe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,hc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,kCe=Object.prototype,nbt=kCe.hasOwnProperty,rbt=kCe.toString,vk=Object.hasOwn||function(e,t){return nbt.call(e,t)},Tce=Array.isArray||function(e){return rbt.call(e)==="[object Array]"},Ace=Object.create(null);function Gg(e){return Ace[e]||(Ace[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function X0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var ibt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,LC=function(t,n){this.line=t,this.column=n};LC.prototype.offset=function(t){return new LC(this.line,this.column+t)};var $6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function RCe(e,t){for(var n=1,r=0;;){var i=CCe(e,r,t);if(i<0)return new LC(n,t-r);++n,r=i}}var pz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Cce=!1;function sbt(e){var t={};for(var n in pz)t[n]=e&&vk(e,n)?e[n]:pz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Cce&&typeof console=="object"&&console.warn&&(Cce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Tce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Tce(t.onComment)&&(t.onComment=obt(t,t.onComment)),t}function obt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new $6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var FC=1,lS=2,SX=4,NCe=8,PCe=16,DCe=32,TX=64,OCe=128,bk=256,AX=FC|lS|bk;function CX(e,t){return lS|(e?SX:0)|(t?NCe:0)}var Q3=0,IX=1,eg=2,$Ce=3,MCe=4,LCe=5,Us=function(t,n,r){this.options=t=sbt(t),this.sourceFile=t.sourceFile,this.keywords=Gg(Qvt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=R8[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Gg(i);var s=(i?i+" ":"")+R8.strict;this.reservedWordsStrict=Gg(s),this.reservedWordsStrictBind=Gg(s+" "+R8.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(qc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(FC),this.regexpState=null,this.privateNameStack=[]},qh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Us.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};qh.inFunction.get=function(){return(this.currentVarScope().flags&lS)>0};qh.inGenerator.get=function(){return(this.currentVarScope().flags&NCe)>0&&!this.currentVarScope().inClassFieldInit};qh.inAsync.get=function(){return(this.currentVarScope().flags&SX)>0&&!this.currentVarScope().inClassFieldInit};qh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&bk)return!1;if(t.flags&lS)return(t.flags&SX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};qh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&TX)>0||n||this.options.allowSuperOutsideMethod};qh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&OCe)>0};qh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};qh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(lS|bk))>0||n};qh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&bk)>0};Us.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Us.parse=function(t,n){return new this(n,t).parse()};Us.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Us.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Us.prototype,qh);var ou=Us.prototype,abt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ou.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){hc.lastIndex=e,e+=hc.exec(this.input)[0].length;var t=abt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){hc.lastIndex=e+t[0].length;var n=hc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||qc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,hc.lastIndex=e,e+=hc.exec(this.input)[0].length,this.input[e]===";"&&e++}};ou.eat=function(e){return this.type===e?(this.next(),!0):!1};ou.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};ou.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ou.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ou.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||qc.test(this.input.slice(this.lastTokEnd,this.start))};ou.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ou.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};ou.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ou.expect=function(e){this.eat(e)||this.unexpected()};ou.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var M6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ou.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ou.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ou.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ou.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Us.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var kX={kind:"loop"},ubt={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;hc.lastIndex=this.pos;var t=hc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Im(r,!0)){for(var i=n+1;HE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!Jvt.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;hc.lastIndex=this.pos;var e=hc.exec(this.input),t=this.pos+e[0].length,n;return!qc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(HE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){hc.lastIndex=this.pos;var o=hc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(kX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(kX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new M6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,hA|(n?0:mz),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(ubt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),qc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var lbt=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?DCe:0),this.checkLValPattern(e,t?MCe:eg),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(kX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?IX:eg,!1)};var hA=1,mz=2,FCe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&mz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&hA&&(e.id=t&FCe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&mz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?IX:eg:$Ce));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(CX(e.async,e.generator)),t&hA||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&hA?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&cbt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&J3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&J3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(J3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&J3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(bk|TX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,eg,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];vk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function cbt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function J3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,hA|FCe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),vk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=lbt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,eg),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,eg),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,eg),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return ibt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Wc=Us.prototype;Wc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Wc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Wc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Wc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Wc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Wc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Wc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Wc.parseBindingListItem=function(e){return e};Wc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Wc.checkLValSimple=function(e,t,n){t===void 0&&(t=Q3);var r=t!==Q3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===eg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(vk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==LCe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Wc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Q3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Wc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Q3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var tf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Si={b_stat:new tf("{",!1),b_expr:new tf("{",!0),b_tmpl:new tf("${",!1),p_stat:new tf("(",!1),p_expr:new tf("(",!0),q_tmpl:new tf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new tf("function",!1),f_expr:new tf("function",!0),f_expr_gen:new tf("function",!0,!1,null,!0),f_gen:new tf("function",!1,!1,null,!0)},cS=Us.prototype;cS.initialContext=function(){return[Si.b_stat]};cS.curContext=function(){return this.context[this.context.length-1]};cS.braceIsBlock=function(e){var t=this.curContext();return t===Si.f_expr||t===Si.f_stat?!0:e===K.colon&&(t===Si.b_stat||t===Si.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?qc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Si.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};cS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};cS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};cS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Si.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Si.b_stat:Si.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Si.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Si.p_stat:Si.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Si.p_stat)&&!(e===K._return&&qc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Si.b_stat)?this.context.push(Si.f_expr):this.context.push(Si.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Si.q_tmpl?this.context.pop():this.context.push(Si.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Si.f_expr?this.context[t]=Si.f_expr_gen:this.context[t]=Si.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var an=Us.prototype;an.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};an.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};an.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new M6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};an.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};an.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};an.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};an.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};an.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&jCe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function jCe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&jCe(e.expression)}an.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};an.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};an.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};an.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};an.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new M6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};an.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Si.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Si.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};an.parseExprAtomDefault=function(){this.unexpected()};an.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};an.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};an.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};an.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};an.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};an.shouldParseArrow=function(e){return!this.canInsertSemicolon()};an.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new M6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};an.parseParenItem=function(e){return e};an.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var fbt=[];an.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=fbt,this.finishNode(e,"NewExpression")};an.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};an.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};an.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!qc.test(this.input.slice(this.lastTokEnd,this.start))};an.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};an.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};an.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};an.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};an.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};an.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};an.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(CX(t,r.generator)|TX|(n?OCe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};an.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(CX(n,!1)|PCe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};an.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,LCe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};an.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};an.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,IX,t?null:n)}};an.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};an.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};an.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};an.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};an.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};an.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};an.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Z3=Us.prototype;Z3.raise=function(e,t){var n=RCe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};Z3.raiseRecoverable=Z3.raise;Z3.curPosition=function(){if(this.options.locations)return new LC(this.curLine,this.pos-this.lineStart)};var Fy=Us.prototype,dbt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Fy.enterScope=function(e){this.scopeStack.push(new dbt(e))};Fy.exitScope=function(){this.scopeStack.pop()};Fy.treatFunctionsAsVarInScope=function(e){return e.flags&lS||!this.inModule&&e.flags&FC};Fy.declareName=function(e,t,n){var r=!1;if(t===eg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&FC&&delete this.undefinedExports[e]}else if(t===MCe){var s=this.currentScope();s.lexical.push(e)}else if(t===$Ce){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&DCe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&FC&&delete this.undefinedExports[e],u.flags&AX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Fy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Fy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Fy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&AX)return t}};Fy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&AX&&!(t.flags&PCe))return t}};var L6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new $6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},_k=Us.prototype;_k.startNode=function(){return new L6(this,this.start,this.startLoc)};_k.startNodeAt=function(e,t){return new L6(this,e,t)};function BCe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}_k.finishNode=function(e,t){return BCe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};_k.finishNodeAt=function(e,t,n,r){return BCe.call(this,e,t,n,r)};_k.copyNode=function(e){var t=new L6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var UCe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",zCe=UCe+" Extended_Pictographic",VCe=zCe,HCe=VCe+" EBase EComp EMod EPres ExtPict",qCe=HCe,hbt=qCe,pbt={9:UCe,10:zCe,11:VCe,12:HCe,13:qCe,14:hbt},mbt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",gbt={9:"",10:"",11:"",12:"",13:"",14:mbt},Ice="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",WCe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",GCe=WCe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",YCe=GCe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",KCe=YCe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",XCe=KCe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ybt=XCe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",vbt={9:WCe,10:GCe,11:YCe,12:KCe,13:XCe,14:ybt},QCe={};function bbt(e){var t=QCe[e]={binary:Gg(pbt[e]+" "+Ice),binaryOfStrings:Gg(gbt[e]),nonBinary:{General_Category:Gg(Ice),Script:Gg(vbt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var P8=0,kce=[9,10,11,12,13,14];P8<kce.length;P8+=1){var _bt=kce[P8];bbt(_bt)}var At=Us.prototype,Wh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=QCe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Wh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Wh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Wh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Wh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Wh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Wh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Wh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Wh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Wh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return JCe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function JCe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!JCe(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=X0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=X0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),wbt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function wbt(e){return Im(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Ebt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Ebt(e){return HE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!F6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return ZCe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function ZCe(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&xbt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function xbt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var eIe=0,km=1,yc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Sbt(t))return e.lastIntValue=-1,e.advance(),km;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===yc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return eIe};function Sbt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),km}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return eIe};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){vk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return km;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return yc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";tIe(t=e.current());)e.lastStringValue+=X0(t),e.advance();return e.lastStringValue!==""};function tIe(e){return ZCe(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Tbt(t=e.current());)e.lastStringValue+=X0(t),e.advance();return e.lastStringValue!==""};function Tbt(e){return tIe(e)||F6(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===yc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?km:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),km)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||iIe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=km,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===yc&&(t=yc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==yc&&(t=km);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===yc&&(t=yc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?km:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===yc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===yc&&(t=yc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?km:yc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&Abt(n)||Cbt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function Abt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function Cbt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Ibt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Ibt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return F6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;F6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function F6(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;nIe(n=e.current());)e.lastIntValue=16*e.lastIntValue+rIe(n),e.advance();return e.pos!==t};function nIe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function rIe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return iIe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function iIe(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!nIe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+rIe(i),e.advance()}return!0};var RX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new $6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Us.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new RX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new RX(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Im(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=CCe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!uS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&ICe.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||qc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Im(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+X0(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+X0(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(qc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Wh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function kbt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function sIe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=sIe(this.input.slice(t,this.pos)),++this.pos):Im(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=sIe(this.input.slice(t,this.pos));return++this.pos,Im(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Im(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=kbt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(uS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var oIe={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===oIe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw oIe;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(uS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return X0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return uS(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(HE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Im:HE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=X0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=xX[e]),this.finishToken(t,e)};var Rbt="8.11.3";Us.acorn={Parser:Us,version:Rbt,defaultOptions:pz,Position:LC,SourceLocation:$6,getLineInfo:RCe,Node:L6,TokenType:or,tokTypes:K,keywordTypes:xX,TokContext:tf,tokContexts:Si,isIdentifierChar:HE,isIdentifierStart:Im,Token:RX,isNewLine:uS,lineBreak:qc,lineBreakG:tbt,nonASCIIwhitespace:ICe};function Nbt(e,t){return Us.parse(e,t)}const NX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},Pbt={ecmaVersion:11},Rce="$",Dbt="d",Obt="d1",$bt="d2",So=e=>(t,n)=>n.error(t,e+" not allowed"),Mbt=So("Aggregate function"),Lbt=So("Window function"),Fbt="Invalid argument",PX="Invalid column reference",jbt=PX+" (must be input to an aggregate function)",aIe="Invalid function call",Bbt="Invalid member expression",Ubt="Invalid operator parameter",zbt="Invalid param reference",Vbt="Invalid variable reference",Hbt="Variable not accessible in operator call",qbt="Unsupported variable declaration",Wbt="Unsupported destructuring pattern",uIe="Table expressions do not support closures",lIe="Use aq.escape(fn) to use a function as-is (including closures)",Gbt="use table.params({ name: value }) to define dynamic parameters",Ybt="use aq.addFunction(name, fn) to add new op functions",Kbt=`
Note: ${uIe}. ${lIe}, or ${Gbt}.`,cIe=`
Note: ${uIe}. ${lIe}, or ${Ybt}.`,Xbt=`The ${c2e} method is not valid in multi-table expressions.`;function Qbt(e,t){const n=Jbt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,qvt(r)?(e_t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Obt),e.scope.add(e.tuple2=$bt),e.scope.add(e.$param=Rce)):(e.scope.add(e.tuple=Dbt),e.scope.add(e.$param=Rce)),er(r,e,DX),e.root}function Jbt(e){try{const t=e.field?Zbt(e):dr(e)?_h(e):e;return Nbt(`expr=(${t})`,Pbt).body[0].expression.right}catch{wn(`Expression parse error: ${e+""}`)}}function Zbt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const DX={FunctionDeclaration:So("Function definitions"),ForStatement:So("For loops"),ForOfStatement:So("For-of loops"),ForInStatement:So("For-in loops"),WhileStatement:So("While loops"),DoWhileStatement:So("Do-while loops"),AwaitExpression:So("Await expressions"),ArrowFunctionExpression:So("Function definitions"),AssignmentExpression:So("Assignments"),FunctionExpression:So("Function definitions"),NewExpression:So('Use of "new"'),UpdateExpression:So("Update expressions"),VariableDeclarator(e,t){vz(e.id,t)},Identifier(e,t,n){hIe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Vbt,Kbt)},CallExpression(e,t){const n=fIe(e.callee),r=a2e(n)||u2e(n);if(r){if((t.join||t.aggregate===!1)&&EK(n)&&Mbt(e,t),(t.join||t.window===!1)&&xK(n)&&Lbt(e,t),t.$op=1,t.ast)yz(e,n,t),e.arguments.forEach(i=>er(i,t,gz));else{const i=t.op(t_t(t,r,n,e.arguments));Object.assign(e,{type:n2e,name:i.id})}return t.$op=0,!1}else o2e(n)?yz(e,n,t):t.error(e,aIe,cIe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ds(y0,r))return;const{name:s}=r;if(dIe(e)&&Ds(y0,i)&&zf(NX,i.name)){gIe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Nce(e,o,t,pIe,n);if(s===t.$param)return Nce(e,o,t,r_t);t.paramsRef.has(s)?jC(e,t.paramsRef.get(s)):t.columnRef.has(s)?mIe(r,s,t,e):zf(t.params,s)&&jC(r,s)}};function Nce(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ds(rS,s))a=s.value;else try{er(s,n,DX,e),a=n.param(s)}catch{n.error(e,Bbt)}return r(e,a,t,n,i),!1}const gz={...DX,VariableDeclarator:So("Variable declaration in operator call"),Identifier(e,t,n){hIe(e,t,n)&&t.error(e,Hbt)},CallExpression(e,t){const n=fIe(e.callee);o2e(n)?yz(e,n,t):t.error(e,aIe,cIe)}};function e_t(e,t){e.generator&&So("Generator functions")(e,t),e.async&&So("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(wT(t,n[0],"tuple1",i(1)),r>1&&wT(t,n[1],"tuple2",i(2)),r>2&&wT(t,n[2],"$param",s)):(wT(t,n[0],"tuple",i(0)),r>1&&wT(t,n[1],"$param",s))),t.root=e.body}function wT(e,t,n,r){Ds(y0,t)?(e.scope.add(t.name),e[n]=t.name):Ds(e2e,t)&&t.properties.forEach(i=>{const s=Ds(y0,i.key)?i.key.name:Ds(rS,i.key)?i.key.value:e.error(i,Fbt);Ds(y0,i.value)||e.error(i.value,Wbt),r(i.value.name,s)})}function t_t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,gz),i.push(e.field(u))):l<a?(er(u,e,gz),s.push(e.param(u))):e.error(u,Ubt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function fIe(e){return Ds(y0,e)?e.name:Ds(ZTe,e)?dIe(e)?n_t(e.property.name):e.property.name:null}function dIe(e){return Ds(y0,e.object)&&e.object.name==="Math"}function n_t(e){return e==="max"?"greatest":e==="min"?"least":e}function hIe(e,t,n){const{name:r}=e;if(!(Ds(ZTe,n)&&n.property===e)){if(!(Ds(t2e,n)&&n.key===e))if(t.paramsRef.has(r))jC(e,t.paramsRef.get(r));else if(t.columnRef.has(r))mIe(e,r,t,n);else if(zf(t.params,r))jC(e,r);else if(zf(NX,r))gIe(e,r);else return!0}}function pIe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,PX),r.aggronly&&!r.$op&&r.error(e,jbt),l2e(e,t,n,o,i)}function mIe(e,t,n,r){const[i,s]=n.columnRef.get(t);pIe(e,i,s,n,r)}function r_t(e,t,n,r){r.params&&!zf(r.params,t)&&r.error(e,zbt),jC(e,t)}function jC(e,t){e.type=Wgt,e.name=t}function gIe(e,t){e.type=Vgt,e.name=t,e.raw=NX[t]}function yz(e,t,n){if(t===c2e){const r=n.table;r||n.error(e,Xbt),f2e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Za(s)?r.columnName(s):s;return r.column(o)||n.error(i,PX),o}):r.columnNames())}else e.callee={type:qgt,name:t}}function vz(e,t){Ds(y0,e)?t.scope.add(e.name):Ds(jgt,e)?e.elements.forEach(n=>vz(n,t)):Ds(e2e,e)?e.properties.forEach(n=>vz(n.value,t)):t.error(e.id,qbt)}const i_t={[dk]:1,[n2e]:1};function Qu(e,t={}){const n=t.generate||N3,r=t.compiler||SK,i=o_t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=s_t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ds(rS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?Hvt(g):f(n(g),i));u.push(y),i_t[g.type]&&y!==g&&ba(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);wn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of w6(e))d.value(m+"",g.escape?Yvt(d,g,i):Qbt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function s_t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function o_t(e){return(e.table?D8(e.table):e.join?{...D8(e.join[1]),...D8(e.join[0])}:{})||{}}function D8(e){return e&&pi(e.params)?e.params():{}}const yIe="Expr",nf="ExprList",vIe="ExprNumber",m2="ExprObject",hw="JoinKeys",e$="JoinValues",oc="Options",OX="OrderKeys",_g="SelectionList",M1="TableRef",pw="TableRefList",a_t="Descending",u_t="Query",l_t="Selection",c_t="Verb",f_t="Window";function j6(e,t){return e&&e.expr?new Pce({...e,...t}):new Pce(t,e)}class Pce{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...pi(this.expr)?{func:!0}:{}}}}function d_t(e){return j6(e,{desc:!0})}function qv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return j6(e,t?{expr:t,...r}:r)}function h_t(e,t,n){return j6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function p_t(e){const t=n=>n;return t.toString=()=>e,t}function Dce(e,t){return t=t&&pi(t.query)?t.query():t,t&&pi(t.evaluate)?t.evaluate(null,e):e(t)}function bIe(e){return ba(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function BC(e){return e&&pi(e.toObject)?e.toObject():pi(e)?{expr:String(e),func:!0}:dr(e)?e.map(BC):ba(e)?D6(e,t=>BC(t)):e}function $X(e){return dr(e)?e.map($X):ba(e)?dr(e.verbs)?LX.from(e):dr(e.all)?VE():dr(e.range)?jvt(...e.range):dr(e.match)?Bvt(RegExp(...e.match)):dr(e.not)?xCe(e.not.map(BC)):m_t(e):e}function m_t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=qv(n):e.func===!0&&(t=n=p_t(n)),ba(e.window)){const{frame:r,peers:i}=e.window;t=n=h_t(n,r,i)}e.desc===!0&&(t=d_t(n))}return e===t?D6(e,r=>$X(r)):t}function g_t(e){return dr(e)?e.map(y_t):e}function y_t(e){const t=[];return Yu(e).forEach(n=>{Za(n)?t.push(n):jo(n)?t.push(qv(n,null)):ba(n)&&n.expr||pi(n)?t.push(n):wn(`Invalid key value: ${n+""}`)}),t}function v_t(e){return dr(e)?e.map(b_t):e}function b_t(e,t){return t<2?Yu(e):e}function __t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ba(r)&&!pi(r))for(const i in r)t.push(r[i]);else n=Za(r)?r:jo(r)?qv(n):pi(r)?n:wn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const w_t={[yIe]:xIe,[nf]:qE,[vIe]:C_t,[m2]:Q0,[hw]:I_t,[e$]:k_t,[OX]:qE,[_g]:T_t};function E_t(e,t,n){return t===M1?Oce(e):t===pw?e.map(Oce):_Ie(BC(e),t,n)}function _Ie(e,t,n){return t===oc?e&&x_t(e,n):w_t[t](e)}function x_t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?_Ie(i,t[r]):i}return n}function S_t(e,t){return Qu({expr:e},{...t,ast:!0}).exprs[0]}function MX(e){return{type:dk,name:e}}function wIe(e){return{type:dk,index:e}}function Q0(e,t){if(jo(e))return S_t(e,t);if(e.expr){let n;if(e.field===!0?n=MX(e.expr):e.func===!0&&(n=Q0(e.expr,t)),n)return e.desc&&(n={type:a_t,expr:n}),e.window&&(n={type:f_t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Q0(e[n],t),as:n}))}function EIe(e){const t=l_t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:qE(e.not)}:e.range?{type:t,operator:"range",arguments:qE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:wn("Invalid input")}function T_t(e){return Yu(e).map(A_t).flat()}function A_t(e){return bIe(e)?EIe(e):Za(e)?wIe(e):jo(e)?MX(e):ba(e)?Object.keys(e).map(t=>({type:dk,name:t,as:e[t]})):wn("Invalid input")}function xIe(e){return bIe(e)?EIe(e):Za(e)?wIe(e):jo(e)?MX(e):ba(e)?Q0(e):wn("Invalid input")}function qE(e){return Yu(e).map(xIe).flat()}function C_t(e){return Za(e)?e:Q0(e)}function I_t(e){return dr(e)?e.map(qE):Q0(e,{join:!0})}function k_t(e){return dr(e)?e.map((t,n)=>n<2?qE(t):Q0(t,{join:!0})):Q0(e,{join:!0})}function Oce(e){return e&&pi(e.toAST)?e.toAST():e}class SIe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===hw?g_t(a):o===e$?v_t(a):o===OX?__t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=bz[t.verb],r=(n.schema||[]).map(({name:i})=>$X(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===M1?Dce(n,o):s===pw?o.map(a=>Dce(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=BC(this[n])}),t}toAST(){const t={type:c_t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=E_t(this[n],r,i)}),t}}function $r(e,t){return Object.assign((...n)=>new SIe(e,t,n),{schema:t})}const bz={count:$r("count",[{name:"options",type:oc}]),derive:$r("derive",[{name:"values",type:m2},{name:"options",type:oc,props:{before:_g,after:_g}}]),filter:$r("filter",[{name:"criteria",type:m2}]),groupby:$r("groupby",[{name:"keys",type:nf}]),orderby:$r("orderby",[{name:"keys",type:OX}]),relocate:$r("relocate",[{name:"columns",type:_g},{name:"options",type:oc,props:{before:_g,after:_g}}]),rename:$r("rename",[{name:"columns",type:_g}]),rollup:$r("rollup",[{name:"values",type:m2}]),sample:$r("sample",[{name:"size",type:vIe},{name:"options",type:oc,props:{weight:yIe}}]),select:$r("select",[{name:"columns",type:_g}]),ungroup:$r("ungroup"),unorder:$r("unorder"),reify:$r("reify"),dedupe:$r("dedupe",[{name:"keys",type:nf,default:[]}]),impute:$r("impute",[{name:"values",type:m2},{name:"options",type:oc,props:{expand:nf}}]),fold:$r("fold",[{name:"values",type:nf},{name:"options",type:oc}]),pivot:$r("pivot",[{name:"keys",type:nf},{name:"values",type:nf},{name:"options",type:oc}]),spread:$r("spread",[{name:"values",type:nf},{name:"options",type:oc}]),unroll:$r("unroll",[{name:"values",type:nf},{name:"options",type:oc,props:{drop:nf}}]),lookup:$r("lookup",[{name:"table",type:M1},{name:"on",type:hw},{name:"values",type:nf}]),join:$r("join",[{name:"table",type:M1},{name:"on",type:hw},{name:"values",type:e$},{name:"options",type:oc}]),cross:$r("cross",[{name:"table",type:M1},{name:"values",type:e$},{name:"options",type:oc}]),semijoin:$r("semijoin",[{name:"table",type:M1},{name:"on",type:hw}]),antijoin:$r("antijoin",[{name:"table",type:M1},{name:"on",type:hw}]),concat:$r("concat",[{name:"tables",type:pw}]),union:$r("union",[{name:"tables",type:pw}]),intersect:$r("intersect",[{name:"tables",type:pw}]),except:$r("except",[{name:"tables",type:pw}])};let LX=class TIe extends BTe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new TIe(t.map(SIe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return $ce(this,"toObject")}toJSON(){return this.toObject()}toAST(){return $ce(this,"toAST",{type:u_t})}};function $ce(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function R_t(e,t){return new LX(e._verbs.concat(t),e._params,e._table)}for(const e in bz){const t=bz[e];LX.prototype["__"+e]=function(n,...r){return R_t(n,t(...r))}}function fS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function N_t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function FX(e,t){const n=Kl();return t.forEach((r,i)=>{const s=jo(r)?r:i;if(s){const o=e.column(i)||wn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function AIe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||wn("relocate requires a before or after option."),i&&s&&wn("relocate accepts only one of the before or after options."),t=Cm(e,t);const o=[...Cm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),FX(e,u)}function wk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function jX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function P_t(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function D_t(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function LN(e){return RC(e)?e:+e}function O_t(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return LN(e[0]);if(t>=1)return LN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=LN(e[i]);return RC(s)?s:s+(LN(e[i+1])-s)*(r-i)}class $_t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:P_t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:D_t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(jX)),O_t(this._sorted,t)}}const t$=(e,t,n)=>fS(t,"{"+wk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function M_t(e,t){const{ops:n,output:r}=L_t(e,t),i=e[0].fields,s=i.length,o=s===0?BX:s===1?F_t:s===2?j_t:wn("Unsupported field count: "+s);return new o(i,n,r,t)}function L_t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=a2e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class BX extends zvt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new $_t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class F_t extends BX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=t$(n,s,"add"),this._rem=t$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Af(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Af(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class j_t extends BX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=t$(n,s,"add"),this._rem=t$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Af(i)&&Af(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Af(i)&&Af(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Lb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=dS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function dS(e,t,n){if(!t.length)return n;const r=CIe(t),i=e.groups(),s=i?i.size:1;return n=n||b6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=kIe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=IIe(e,o);o.write(a,n,0)}),n}function CIe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(M_t(r[i],t));return n}function IIe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function kIe(e,t,n){const{keys:r,size:i}=n,s=b6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function RIe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function NIe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Mce=NIe(jX);function B_t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?fS(["w","r","k"],"{"+wk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Mce.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Mce.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],S=a[E];for(let A=b;A<p.i0;++A)T.rem(S,s[A],e);for(let A=w;A<p.i1;++A)T.add(S,s[A],e);T.write(S,u,l)}return h(p,u,l),u}};return p}const U_t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),z_t=e=>!!e.peers;function V_t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=u2e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function H_t(e,t,n,r={},i){const s=e.data(),o=q_t(i,s),a=o.length,u=fS(["r","d","op"],"{"+wk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=W_t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function q_t(e,t){const n={};return e.forEach(r=>{const i=U_t(r),s=z_t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});EK(r.name)?a.push(r):u.push(V_t(r))}),Object.values(n).map(r=>B_t(t,r.frame,r.peers,r.winOps,CIe(r.aggOps,r.frame[0]!=null?-1:1)))}function W_t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function G_t(e){return xK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function UX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Kl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Y_t(r),c=e.isGrouped()?e.groups().size:1,f=dS(e,u,b6(r.length,()=>Array(c)));return l.length?H_t(e,a,n,f,l):K_t(e,a,n,f),e.create(o)}function Y_t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(G_t(s)?n:t).push(s)}return[t,n]}function K_t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function X_t(e,t,n={}){const r=UX(e,Qu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:AIe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function Q_t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const FN=2147483648,J_t=4294967295;class PIe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&FN>>>t}set(t){this._bits[t>>5]|=FN>>>t}clear(t){this._bits[t>>5]&=~(FN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&J_t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=FN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function Z_t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new PIe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function ewt(e,t){const n=Qu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=UX(e,n,{drop:!0}).column("p");r=s=>i[s]}return Z_t(e,r)}function DIe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Lb(e,r,n),l=Kl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(w),m,m+E)},b=p?(w,E)=>{for(let T=0;T<E;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((T,S)=>{const A=Yu(w(T,S)),C=Math.min(A.length,s);v(T,C);for(let I=0;I<C;++I)E[m+I]=A[I];b(m,C),m+=C})}else e.scan((w,E)=>{let T=0;const S=u.map(A=>{const C=Yu(A(w,E));return T=Math.min(Math.max(T,C.length),s),C});v(w,T);for(let A=0;A<y;++A){const C=h[A],I=S[A];for(let N=0;N<T;++N)C[m+N]=I[N]}b(m,T),m+=T});return e.create(l.new())}function twt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Lb(e,r,n);return DIe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Hf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Za(o)?t.columnName(o):o,jo(o)?i.set(o,qv(o)):pi(o)?Cm(t,o).forEach(s):ba(o)?wCe(i,o):wn(`Invalid ${e} value: ${o+""}`)};return Yu(n).forEach(s),r.preparse&&r.preparse(i),Qu(i,{table:t,...r})}function nwt(e,t,n){return twt(e,Hf("fold",e,t),n)}function Lce(e,t,n,r){const i=n&&n.length;return rwt(i?iwt(e,n,r):e,t,i)}function rwt(e,{names:t,exprs:n,ops:r},i){const s=Lb(e,r,n),o=i?null:Kl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Af(p)?p:d(h)})}),i?e:e.create(o)}function iwt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=P3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Kl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=P3(o.map((p,m)=>g=>g[m])),h=fS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Fce(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Fce(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Fce(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function zX(e,{names:t,exprs:n,ops:r}){const i=Kl(),s=e.groups();return s&&RIe(i,s),swt(t,n,s,dS(e,r),i),e.create(i.new())}function swt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function owt(e,t,n={}){if(t=Qu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:wn(`Invalid impute column ${_h(r)}`)),n.expand){const r={preparse:awt,aggronly:!0},i=Hf("impute",e,n.expand,r),s=zX(e.ungroup(),i);return Lce(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Lce(e,t)}function awt(e){e.forEach((t,n)=>t.field?e.set(n,KTe(t+"")):0)}function uwt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function OIe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function lwt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function cwt(e,t){const n=["i","a","j","b"];return fS(n,"{"+wk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function fwt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Kl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=cwt(g,y);if((dr(n)?hwt:dwt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function dwt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function hwt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(T,S,A,C)=>e(A,C,T,S));const w=lwt(v,m,g),E=p.length;for(let T=0;T<E;++T){const S=p[T],A=w.get(d(S,f));if(A){const C=A.length;for(let I=0;I<C;++I){const N=A[I];b(S,f,v[N],m),y[N]=1}h[T]=1}}}function n$(e,t,n){const r=new Map;Yu(n).forEach((s,o)=>{s=Za(s)?t.columnName(s):s,jo(s)?r.set(o,qv(s)):pi(s)||ba(s)&&s.expr?r.set(o,s):wn(`Invalid ${e} key value: ${s+""}`)});const i=Qu(r,{table:t,aggregate:!1,window:!1});return P3(i.exprs,!0)}function pwt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function VX(e,t,n){if(n)jo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=pwt(e.columnNames(),t.columnNames());r.length||wn("Natural join requires shared column names."),n=[r,r]}return n}function $Ie(e,t,n,r){return n.length!==r.length&&wn("Mismatched number of join keys"),[n$("join",e,n),n$("join",t,r)]}const mwt={aggregate:!1,window:!1},gwt={...mwt,index:1};function jce(e,t,n,r,i={}){n=VX(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Yu);o=$Ie(e,t,a,u),r||(r=ywt(e,a,u,i))}else o=Qu({on:n},s).exprs[0],r||(r=[VE(),VE()]);return fwt(e,t,o,vwt(e,t,r,s,i&&i.suffix),i)}function ywt(e,t,n,r){const i=[];t.forEach((o,a)=>jo(o)&&o===n[a]?i.push(o):0);const s=xCe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${_h(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,VE()]:[VE(),s]}function vwt(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Hf("join",e,n[0],r)),u--&&(o=Hf("join",t,n[1],gwt)),u--&&(a=Qu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Bce(s.names,l,i[0]||"_1"),i[1]!==""&&Bce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Qu(n,r)}function Bce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function bwt(e,t,n,r={}){const i=new PIe(e.totalRows());return(dr(n)?_wt:wwt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function _wt(e,t,n,[r,i]){const s=OIe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function wwt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Uce(e,t,n,r){n=VX(e,t,n);const i=dr(n)?$Ie(e,t,...n.map(Yu)):Qu({on:n},{join:[e,t]}).exprs[0];return bwt(e,t,i,r)}function Ewt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Kl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=OIe(t,r),c=fS(["lr","rr","data"],"{"+wk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Lb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function xwt(e,t,n,r){return n=VX(e,t,n),Ewt(e,t,[n$("lookup",e,n[0]),n$("lookup",t,n[1])],Hf("lookup",t,r))}const _z=(e,t)=>e??t;function Swt(e,t,n,r={}){const{keys:i,keyColumn:s}=Twt(e,t,r),o=_z(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>dS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(Awt(n,a,e.groups(),u))}function Twt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=_z(n.sort,!0),s=_z(n.keySeparator,"_"),o=Lb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=dS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function Awt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Kl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&RIe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function Cwt(e,t,n,r){return Swt(e,Hf("fold",e,t),Hf("fold",e,n,{preparse:Iwt,aggronly:!0}),r)}function Iwt(e){e.forEach((t,n)=>t.field?e.set(n,WTe(t+"")):0)}function kwt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),FX(e,Cm(e,t,n))}function zce(e,t){return zX(e,Qu(t,{table:e,aggronly:!0,window:!1}))}function Rwt(e,t,n,r){return(t?r?Pwt:Nwt:r?Owt:Dwt)(e.length,e,n,r)}function Nwt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*nS()|0];return t}function Pwt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=NIe(jX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*nS())];return t}function Dwt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*nS();s<e&&(t[s|0]=n[i])}return t}function Owt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(nS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function $wt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=nS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function Mwt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):Rwt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&$wt(u),e.reify(u)}function Lwt(e,t,n={}){return Mwt(e,Fwt(e,t),jwt(e,n.weight),n)}const MIe=e=>t=>e.get(t)||0;function Fwt(e,t){return Za(t)?()=>t:MIe(zX(e,Qu({size:t},{table:e,window:!1})).column("size"))}function jwt(e,t){return t==null?null:(t=Za(t)?e.columnName(t):t,MIe(jo(t)?e.column(t):UX(e,Qu({w:t},{table:e}),{drop:!0}).column("w")))}function Bwt(e,t){return FX(e,Cm(e,t))}function Uwt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Lb(e,r,n),l=Kl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=zwt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function zwt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Yu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function Vwt(e,t,n){return Uwt(e,Hf("spread",e,t),n)}function Hwt(e,t){return e.concat(t).dedupe()}function qwt(e,t,n){return DIe(e,Hf("unroll",e,t),n&&n.drop?{...n,drop:Hf("unroll",e,n.drop).names}:n)}function Wwt(e,t){return e.create({groups:Gwt(e,t)})}function Gwt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Lb(e,r,n);const o=P3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Ywt(e,t){return Wwt(e,Hf("groupby",e,t))}function Kwt(e,t){return e.create({order:t})}const Xwt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Qwt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Qu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([N3(p,{index:"a",op:o}),N3(p,{index:"b",op:a})])},window:!1}),l=dS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Xwt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Jwt(e,t){return Kwt(e,Zwt(e,t))}function Zwt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ba(o)&&!pi(o))for(const a in o)i(o[a]);else i(Za(o)?qv(s,e.columnName(o)):jo(o)?qv(s):pi(o)?s:wn(`Invalid orderby field: ${s+""}`))}),Qwt(e,r)}function eEt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Kl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function tEt(e,t){const n=Kl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?kIe(e,t,r):[IIe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function nEt(e){return e.isGrouped()?e.create({groups:null}):e}function rEt(e){return e.isOrdered()?e.create({order:null}):e}const iEt={__antijoin:(e,t,n)=>Uce(e,t,n,{anti:!0}),__count:(e,t={})=>zce(e,{[t.as||"count"]:GTe()}),__cross:(e,t,n,r)=>jce(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:eEt,__dedupe:N_t,__derive:X_t,__except:Q_t,__filter:ewt,__fold:nwt,__impute:owt,__intersect:uwt,__join:jce,__lookup:xwt,__pivot:Cwt,__relocate:AIe,__rename:kwt,__rollup:zce,__sample:Lwt,__select:Bwt,__semijoin:Uce,__spread:Vwt,__union:Hwt,__unroll:qwt,__groupby:Ywt,__orderby:Jwt,__ungroup:nEt,__unorder:rEt,__reduce:tEt};Object.assign(Op.prototype,iEt);function sEt(e,t){return Op.from(e,t)}function O8(e){return j6(e,{escape:!0,toString(){wn("Escaped values can not be serialized.")}})}Op.prototype;function _f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function J0(e){return!!e&&!!e[bi]}function Rm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===pEt}(e)||Array.isArray(e)||!!e[Kce]||!!(!((t=e.constructor)===null||t===void 0)&&t[Kce])||HX(e)||qX(e))}function Wv(e,t,n){n===void 0&&(n=!1),hS(e)===0?(n?Object.keys:Vw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function hS(e){var t=e[bi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:HX(e)?2:qX(e)?3:0}function zw(e,t){return hS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function oEt(e,t){return hS(e)===2?e.get(t):e[t]}function LIe(e,t,n){var r=hS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function FIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function HX(e){return dEt&&e instanceof Map}function qX(e){return hEt&&e instanceof Set}function A1(e){return e.o||e.t}function WX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=BIe(e);delete t[bi];for(var n=Vw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function GX(e,t){return t===void 0&&(t=!1),YX(e)||J0(e)||!Rm(e)||(hS(e)>1&&(e.set=e.add=e.clear=e.delete=aEt),Object.freeze(e),t&&Wv(e,function(n,r){return GX(r,!0)},!0)),e}function aEt(){_f(2)}function YX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function sh(e){var t=Sz[e];return t||_f(18,e),t}function uEt(e,t){Sz[e]||(Sz[e]=t)}function wz(){return UC}function $8(e,t){t&&(sh("Patches"),e.u=[],e.s=[],e.v=t)}function r$(e){Ez(e),e.p.forEach(lEt),e.p=null}function Ez(e){e===UC&&(UC=e.l)}function Vce(e){return UC={p:[],l:UC,h:e,m:!0,_:0}}function lEt(e){var t=e[bi];t.i===0||t.i===1?t.j():t.g=!0}function M8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||sh("ES5").S(t,e,r),r?(n[bi].P&&(r$(t),_f(4)),Rm(e)&&(e=i$(t,e),t.l||s$(t,e)),t.u&&sh("Patches").M(n[bi].t,e,t.u,t.s)):e=i$(t,n,[]),r$(t),t.u&&t.v(t.u,t.s),e!==jIe?e:void 0}function i$(e,t,n){if(YX(t))return t;var r=t[bi];if(!r)return Wv(t,function(a,u){return Hce(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return s$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=WX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Wv(s,function(a,u){return Hce(e,r,i,a,u,n,o)}),s$(e,i,!1),n&&e.u&&sh("Patches").N(r,n,e.u,e.s)}return r.o}function Hce(e,t,n,r,i,s,o){if(J0(i)){var a=i$(e,i,s&&t&&t.i!==3&&!zw(t.R,r)?s.concat(r):void 0);if(LIe(n,r,a),!J0(a))return;e.m=!1}else o&&n.add(i);if(Rm(i)&&!YX(i)){if(!e.h.D&&e._<1)return;i$(e,i),t&&t.A.l||s$(e,i)}}function s$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&GX(t,n)}function L8(e,t){var n=e[bi];return(n?A1(n):e)[t]}function qce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Lg(e){e.P||(e.P=!0,e.l&&Lg(e.l))}function F8(e){e.o||(e.o=WX(e.t))}function xz(e,t,n){var r=HX(t)?sh("MapSet").F(t,n):qX(t)?sh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:wz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=zC;o&&(u=[a],l=g2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):sh("ES5").J(t,n);return(n?n.A:wz()).p.push(r),r}function cEt(e){return J0(e)||_f(22,e),function t(n){if(!Rm(n))return n;var r,i=n[bi],s=hS(n);if(i){if(!i.P&&(i.i<4||!sh("ES5").K(i)))return i.t;i.I=!0,r=Wce(n,s),i.I=!1}else r=Wce(n,s);return Wv(r,function(o,a){i&&oEt(i.t,o)===a||LIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Wce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return WX(e)}function fEt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[bi];return zC.get(u,s)},set:function(u){var l=this[bi];zC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][bi];if(!a.P)switch(a.i){case 5:r(a)&&Lg(a);break;case 4:n(a)&&Lg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Vw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==bi){var f=o[c];if(f===void 0&&!zw(o,c))return!0;var d=a[c],h=d&&d[bi];if(h?h.t!==f:!FIe(d,f))return!0}}var p=!!o[bi];return u.length!==Vw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};uEt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=BIe(f);delete p[bi];for(var m=Vw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:wz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,bi,{value:l,writable:!0}),u},S:function(s,o,a){a?J0(o)&&o[bi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[bi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Wv(d,function(b){b!==bi&&(f[b]!==void 0||zw(f,b)?h[b]||u(d[b]):(h[b]=!0,Lg(c)))}),Wv(f,function(b){d[b]!==void 0||zw(d,b)||(h[b]=!1,Lg(c))});else if(p===5){if(r(c)&&(Lg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Gce,UC,KX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",dEt=typeof Map<"u",hEt=typeof Set<"u",Yce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jIe=KX?Symbol.for("immer-nothing"):((Gce={})["immer-nothing"]=!0,Gce),Kce=KX?Symbol.for("immer-draftable"):"__$immer_draftable",bi=KX?Symbol.for("immer-state"):"__$immer_state",pEt=""+Object.prototype.constructor,Vw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,BIe=Object.getOwnPropertyDescriptors||function(e){var t={};return Vw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Sz={},zC={get:function(e,t){if(t===bi)return e;var n=A1(e);if(!zw(n,t))return function(i,s,o){var a,u=qce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Rm(r)?r:r===L8(e.t,t)?(F8(e),e.o[t]=xz(e.A.h,r,e)):r},has:function(e,t){return t in A1(e)},ownKeys:function(e){return Reflect.ownKeys(A1(e))},set:function(e,t,n){var r=qce(A1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=L8(A1(e),t),s=i==null?void 0:i[bi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(FIe(n,i)&&(n!==void 0||zw(e.t,t)))return!0;F8(e),Lg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return L8(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,F8(e),Lg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=A1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){_f(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_f(12)}},g2={};Wv(zC,function(e,t){g2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),g2.deleteProperty=function(e,t){return g2.set.call(this,e,t,void 0)},g2.set=function(e,t,n){return zC.set.call(this,e[0],t,n,e[0])};var mEt=function(){function e(n){var r=this;this.O=Yce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&_f(6),o!==void 0&&typeof o!="function"&&_f(7),Rm(i)){var c=Vce(r),f=xz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?r$(c):Ez(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return $8(c,o),M8(m,c)},function(m){throw r$(c),m}):($8(c,o),M8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===jIe&&(l=void 0),r.D&&GX(l,!0),o){var h=[],p=[];sh("Patches").M(i,l,h,p),o(h,p)}return l}_f(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Rm(n)||_f(8),J0(n)&&(n=cEt(n));var r=Vce(this),i=xz(this,n,void 0);return i[bi].C=!0,Ez(r),i},t.finishDraft=function(n,r){var i=n&&n[bi],s=i.A;return $8(s,r),M8(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Yce&&_f(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=sh("Patches").$;return J0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Fl=new mEt,gEt=Fl.produce;Fl.produceWithPatches.bind(Fl);Fl.setAutoFreeze.bind(Fl);Fl.setUseProxies.bind(Fl);Fl.applyPatches.bind(Fl);Fl.createDraft.bind(Fl);Fl.finishDraft.bind(Fl);const UIe=gEt;function VC(e){"@babel/helpers - typeof";return VC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VC(e)}function yEt(e,t){if(VC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(VC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vEt(e){var t=yEt(e,"string");return VC(t)=="symbol"?t:t+""}function bEt(e,t,n){return(t=vEt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Qce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xce(Object(n),!0).forEach(function(r){bEt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ra(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Jce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),j8=function(){return Math.random().toString(36).substring(7).split("").join(".")},o$={INIT:"@@redux/INIT"+j8(),REPLACE:"@@redux/REPLACE"+j8(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+j8()}};function _Et(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zIe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ra(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ra(1));return n(zIe)(e,t)}if(typeof e!="function")throw new Error(ra(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ra(3));return s}function f(m){if(typeof m!="function")throw new Error(ra(4));if(u)throw new Error(ra(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ra(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!_Et(m))throw new Error(ra(7));if(typeof m.type>"u")throw new Error(ra(8));if(u)throw new Error(ra(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ra(10));i=m,d({type:o$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ra(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Jce]=function(){return this},m}return d({type:o$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Jce]=p,r}function wEt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:o$.INIT});if(typeof r>"u")throw new Error(ra(12));if(typeof n(void 0,{type:o$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ra(13))})}function EEt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{wEt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ra(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function a$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function xEt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ra(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=a$.apply(void 0,a)(i.dispatch),Qce(Qce({},i),{},{dispatch:s})}}}function VIe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Tz=VIe();Tz.withExtraArgument=VIe;var HIe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ek=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Gv=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},SEt=Object.defineProperty,TEt=Object.defineProperties,AEt=Object.getOwnPropertyDescriptors,Zce=Object.getOwnPropertySymbols,CEt=Object.prototype.hasOwnProperty,IEt=Object.prototype.propertyIsEnumerable,efe=function(e,t,n){return t in e?SEt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},v0=function(e,t){for(var n in t||(t={}))CEt.call(t,n)&&efe(e,n,t[n]);if(Zce)for(var r=0,i=Zce(t);r<i.length;r++){var n=i[r];IEt.call(t,n)&&efe(e,n,t[n])}return e},B8=function(e,t){return TEt(e,AEt(t))},xk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},kEt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?a$:a$.apply(null,arguments)};function qIe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var REt=function(e){return e&&typeof e.match=="function"};function oh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return v0(v0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function NEt(e){return qIe(e)&&"type"in e}var PEt=function(e){HIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Gv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Gv([void 0],n.concat(this))))},t}(Array),DEt=function(e){HIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Gv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Gv([void 0],n.concat(this))))},t}(Array);function Az(e){return Rm(e)?UIe(e,function(){}):e}function OEt(e){return typeof e=="boolean"}function $Et(){return function(t){return MEt(t)}}function MEt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new PEt;return n&&(OEt(n)?r.push(Tz):r.push(Tz.withExtraArgument(n.extraArgument))),r}var LEt=!0;function FEt(e){var t=$Et(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(qIe(i))h=EEt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=xEt.apply(void 0,p),g=a$;u&&(g=kEt(v0({trace:!LEt},typeof u=="object"&&u)));var y=new DEt(m),v=y;Array.isArray(d)?v=Gv([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return zIe(h,c,b)}function WIe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function jEt(e){return typeof e=="function"}function BEt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?WIe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(jEt(e))u=function(){return Az(e())};else{var l=Az(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Gv([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(J0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Rm(p))return UIe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function UEt(e,t){return e+"/"+t}function zEt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Az(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=UEt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?oh(d,p):oh(d)});function u(){var c=typeof e.extraReducers=="function"?WIe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=v0(v0({},d),o);return BEt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var T=E[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var VEt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",GIe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=VEt[Math.random()*64|0];return t},HEt=["name","message","stack","code"],U8=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),tfe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),qEt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=HEt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=oh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:B8(v0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=oh(t+"/pending",function(l,c,f){return{payload:void 0,meta:B8(v0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=oh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||qEt)(l||"Rejected"),meta:B8(v0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):GIe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return xk(this,null,function(){var v,b,w,E,T,S,A;return Ek(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),GEt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(I,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,N){return new U8(I,N)},fulfillWithValue:function(I,N){return new tfe(I,N)}})).then(function(I){if(I instanceof U8)throw I;return I instanceof tfe?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return S=C.sent(),w=S instanceof U8?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(WEt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function WEt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function GEt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var YEt=function(e,t){return REt(e)?e.match(t):e(t)};function nfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return YEt(r,n)})}}var XX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Cz=function(){},YIe=function(e,t){return t===void 0&&(t=Cz),e.catch(t),e},KIe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Hw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},KEt="task",XIe="listener",QIe="completed",QX="cancelled",XEt="task-"+QX,QEt="task-"+QIe,JIe=XIe+"-"+QX,JEt=XIe+"-"+QIe,B6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=KEt+" "+QX+" (reason: "+t+")"}return e}(),qw=function(e){if(e.aborted)throw new B6(e.reason)};function ZIe(e,t){var n=Cz;return new Promise(function(r,i){var s=function(){return i(new B6(e.reason))};if(e.aborted){s();return}n=KIe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Cz})}var ZEt=function(e,t){return xk(void 0,null,function(){var n,r;return Ek(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof B6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},u$=function(e){return function(t){return YIe(ZIe(e,t).then(function(n){return qw(e),n}))}},eke=function(e){var t=u$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},ext=Object.assign,rfe={},Sk="listenerMiddleware",txt=function(e,t){var n=function(r){return KIe(e,function(){return Hw(r,e.reason)})};return function(r,i){XX(r,"taskExecutor");var s=new AbortController;n(s);var o=ZEt(function(){return xk(void 0,null,function(){var a;return Ek(this,function(u){switch(u.label){case 0:return qw(e),qw(s.signal),[4,r({pause:u$(s.signal),delay:eke(s.signal),signal:s.signal})];case 1:return a=u.sent(),qw(s.signal),[2,a]}})})},function(){return Hw(s,QEt)});return i!=null&&i.autoJoin&&t.push(o),{result:u$(e)(o),cancel:function(){Hw(s,XEt)}}}},nxt=function(e,t){var n=function(r,i){return xk(void 0,null,function(){var s,o,a,u;return Ek(this,function(l){switch(l.label){case 0:qw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,ZIe(t,Promise.race(a))];case 2:return u=l.sent(),qw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return YIe(n(r,i))}},tke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=oh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return XX(s,"options.listener"),{predicate:i,type:t,effect:s}},rxt=function(e){var t=tke(e),n=t.type,r=t.predicate,i=t.effect,s=GIe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Iz=function(e){e.pending.forEach(function(t){Hw(t,JIe)})},ixt=function(e){return function(){e.forEach(Iz),e.clear()}},ife=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},sxt=oh(Sk+"/add"),oxt=oh(Sk+"/removeAll"),axt=oh(Sk+"/remove"),uxt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Gv([Sk+"/error"],e))};function lxt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?uxt:i;XX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Iz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=rxt(h)),o(p)},l=function(h){var p=tke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&Iz(v)),!!v},c=function(h,p,m,g){return xk(t,null,function(){var y,v,b,w;return Ek(this,function(E){switch(E.label){case 0:y=new AbortController,v=nxt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,ext({},m,{getOriginalState:g,condition:function(T,S){return v(T,S).then(Boolean)},take:v,delay:eke(y.signal),pause:u$(y.signal),extra:r,signal:y.signal,fork:txt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,A){T!==y&&(Hw(T,JIe),A.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof B6||ife(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Hw(y,JEt),h.pending.delete(y),[7];case 6:return[2]}})})},f=ixt(n),d=function(h){return function(p){return function(m){if(!NEt(m))return p(m);if(sxt.match(m))return u(m.payload);if(oxt.match(m)){f();return}if(axt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===rfe)throw new Error(Sk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,T=w;E<T.length;E++){var S=T[E],A=!1;try{A=S.predicate(m,b,g)}catch(C){A=!1,ife(s,C,{raisedBy:"predicate"})}A&&c(S,m,h,y)}}finally{g=rfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var sfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);fEt();function cxt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let jN;const fxt=new Uint8Array(16);function dxt(){if(!jN&&(jN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!jN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jN(fxt)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function hxt(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}const pxt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ofe={randomUUID:pxt};function afe(e,t,n){if(ofe.randomUUID&&!t&&!e)return ofe.randomUUID();e=e||{};const r=e.random||(e.rng||dxt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hxt(r)}class ah{static get(){let t=afe();for(;this.ids.has(t);)t=afe();return this.ids.set(t,!0),t}}ah.ids=new Map;function uh(e){return"parent"in e}function mxt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:ah.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:ah.get(),createdOn:Date.now(),val:r}]:[];return{id:ah.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function gxt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:ah.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:ah.get(),createdOn:Date.now(),val:s}]:[];return{id:ah.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Hi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Txt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Yv(e){return!!e&&!!e[jl]}function Z0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Axt}(e)||Array.isArray(e)||!!e[pA]||!!(!((t=e.constructor)===null||t===void 0)&&t[pA])||U6(e)||z6(e))}function WE(e,t,n){n===void 0&&(n=!1),ey(e)===0?(n?Object.keys:rQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ey(e){var t=e[jl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:U6(e)?2:z6(e)?3:0}function HC(e,t){return ey(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fD(e,t){return ey(e)===2?e.get(t):e[t]}function nke(e,t,n){var r=ey(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function yxt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function U6(e){return xxt&&e instanceof Map}function z6(e){return Sxt&&e instanceof Set}function C1(e){return e.o||e.t}function JX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Cxt(e);delete t[jl];for(var n=rQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ZX(e,t){return t===void 0&&(t=!1),eQ(e)||Yv(e)||!Z0(e)||(ey(e)>1&&(e.set=e.add=e.clear=e.delete=vxt),Object.freeze(e),t&&WE(e,function(n,r){return ZX(r,!0)},!0)),e}function vxt(){Hi(2)}function eQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function lh(e){var t=Pz[e];return t||Hi(18,e),t}function bxt(e,t){Pz[e]||(Pz[e]=t)}function ufe(){return{}.NODE_ENV==="production"||GE||Hi(0),GE}function z8(e,t){t&&(lh("Patches"),e.u=[],e.s=[],e.v=t)}function l$(e){kz(e),e.p.forEach(_xt),e.p=null}function kz(e){e===GE&&(GE=e.l)}function lfe(e){return GE={p:[],l:GE,h:e,m:!0,_:0}}function _xt(e){var t=e[jl];t.i===0||t.i===1?t.j():t.O=!0}function V8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||lh("ES5").S(t,e,r),r?(n[jl].P&&(l$(t),Hi(4)),Z0(e)&&(e=c$(t,e),t.l||f$(t,e)),t.u&&lh("Patches").M(n[jl].t,e,t.u,t.s)):e=c$(t,n,[]),l$(t),t.u&&t.v(t.u,t.s),e!==nQ?e:void 0}function c$(e,t,n){if(eQ(t))return t;var r=t[jl];if(!r)return WE(t,function(s,o){return cfe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return f$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=JX(r.k):r.o;WE(r.i===3?new Set(i):i,function(s,o){return cfe(e,r,i,s,o,n)}),f$(e,i,!1),n&&e.u&&lh("Patches").R(r,n,e.u,e.s)}return r.o}function cfe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Hi(5),Yv(i)){var o=c$(e,i,s&&t&&t.i!==3&&!HC(t.D,r)?s.concat(r):void 0);if(nke(n,r,o),!Yv(o))return;e.m=!1}if(Z0(i)&&!eQ(i)){if(!e.h.F&&e._<1)return;c$(e,i),t&&t.A.l||f$(e,i)}}function f$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&ZX(t,n)}function H8(e,t){var n=e[jl];return(n?C1(n):e)[t]}function ffe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Rz(e){e.P||(e.P=!0,e.l&&Rz(e.l))}function q8(e){e.o||(e.o=JX(e.t))}function Nz(e,t,n){var r=U6(t)?lh("MapSet").N(t,n):z6(t)?lh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:ufe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Dz;o&&(u=[a],l=y2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):lh("ES5").J(t,n);return(n?n.A:ufe()).p.push(r),r}function wxt(e){return Yv(e)||Hi(22,e),function t(n){if(!Z0(n))return n;var r,i=n[jl],s=ey(n);if(i){if(!i.P&&(i.i<4||!lh("ES5").K(i)))return i.t;i.I=!0,r=dfe(n,s),i.I=!1}else r=dfe(n,s);return WE(r,function(o,a){i&&fD(i.t,o)===a||nke(r,o,t(a))}),s===3?new Set(r):r}(e)}function dfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return JX(e)}function Ext(){function e(r){if(!Z0(r))return r;if(Array.isArray(r))return r.map(e);if(U6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(z6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return HC(r,pA)&&(i[pA]=r[pA]),i}function t(r){return Yv(r)?e(r):r}var n="add";bxt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=ey(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Hi(24),typeof u=="function"&&f==="prototype"&&Hi(24),typeof(u=fD(u,f))!="object"&&Hi(15,o.join("/"))}var d=ey(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Hi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Hi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;WE(a.D,function(h,p){var m=fD(f,h),g=fD(d,h),y=p?HC(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===nQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var hfe,GE,tQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xxt=typeof Map<"u",Sxt=typeof Set<"u",pfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",nQ=tQ?Symbol.for("immer-nothing"):((hfe={})["immer-nothing"]=!0,hfe),pA=tQ?Symbol.for("immer-draftable"):"__$immer_draftable",jl=tQ?Symbol.for("immer-state"):"__$immer_state",Txt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Axt=""+Object.prototype.constructor,rQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Cxt=Object.getOwnPropertyDescriptors||function(e){var t={};return rQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Pz={},Dz={get:function(e,t){if(t===jl)return e;var n=C1(e);if(!HC(n,t))return function(i,s,o){var a,u=ffe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Z0(r)?r:r===H8(e.t,t)?(q8(e),e.o[t]=Nz(e.A.h,r,e)):r},has:function(e,t){return t in C1(e)},ownKeys:function(e){return Reflect.ownKeys(C1(e))},set:function(e,t,n){var r=ffe(C1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=H8(C1(e),t),s=i==null?void 0:i[jl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(yxt(n,i)&&(n!==void 0||HC(e.t,t)))return!0;q8(e),Rz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return H8(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,q8(e),Rz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=C1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Hi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Hi(12)}},y2={};WE(Dz,function(e,t){y2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),y2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Hi(13),y2.set.call(this,e,t,void 0)},y2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Hi(14),Dz.set.call(this,e[0],t,n,e[0])};var Ixt=function(){function e(n){var r=this;this.g=pfe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Hi(6),o!==void 0&&typeof o!="function"&&Hi(7),Z0(i)){var c=lfe(r),f=Nz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?l$(c):kz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return z8(c,o),V8(m,c)},function(m){throw l$(c),m}):(z8(c,o),V8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===nQ&&(l=void 0),r.F&&ZX(l,!0),o){var h=[],p=[];lh("Patches").M(i,l,h,p),o(h,p)}return l}Hi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Z0(n)||Hi(8),Yv(n)&&(n=wxt(n));var r=lfe(this),i=Nz(this,n,void 0);return i[jl].C=!0,kz(r),i},t.finishDraft=function(n,r){var i=n&&n[jl];({}).NODE_ENV!=="production"&&(i&&i.C||Hi(9),i.I&&Hi(10));var s=i.A;return z8(s,r),V8(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!pfe&&Hi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=lh("Patches").$;return Yv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Bl=new Ixt,kxt=Bl.produce;Bl.produceWithPatches.bind(Bl);Bl.setAutoFreeze.bind(Bl);Bl.setUseProxies.bind(Bl);Bl.applyPatches.bind(Bl);Bl.createDraft.bind(Bl);Bl.finishDraft.bind(Bl);function Rxt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=mxt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return zEt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ah.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:ah.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function Nxt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=Rxt(e),s=lxt();s.startListening({matcher:nfe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=nfe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=FEt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:ah.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Pxt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dxt=Object.prototype.hasOwnProperty;function Oz(e,t){return Dxt.call(e,t)}function $z(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Oz(e,i)&&r.push(i);return r}function Ou(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Mz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function I1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function rke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Lz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Lz(e[t]))return!0}else if(typeof e=="object"){for(var r=$z(e),i=r.length,s=0;s<i;s++)if(Lz(e[r[s]]))return!0}}return!1}function mfe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var ike=function(e){Pxt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,mfe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=mfe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ji=ike,Oxt=Ou,mw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=d$(n,this.path);r&&(r=Ou(r));var i=bv(n,{op:"remove",path:this.from}).removed;return bv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=d$(n,this.from);return bv(n,{op:"add",path:this.path,value:Ou(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:qC(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},$xt={add:function(e,t,n){return Mz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:mw.move,copy:mw.copy,test:mw.test,_get:mw._get};function d$(e,t){if(t=="")return e;var n={op:"_get",path:t};return bv(e,n),n.value}function bv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):h$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=d$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=qC(e,t.value),o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ou(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=h$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=rke(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Mz(h))throw new ji("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Mz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ji("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=$xt[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=mw[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ji("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function V6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ou(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=bv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Mxt(e,t,n){var r=bv(e,t);if(r.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function h$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ji("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(mw[e.op]){if(typeof e.path!="string")throw new ji("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ji('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ji("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Lz(e.value))throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ji("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ji("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=ske([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ji("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function ske(e,t,n){try{if(!Array.isArray(e))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)V6(Ou(t),Ou(e),n||!0);else{n=n||h$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ji)return i;throw i}}function qC(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!qC(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!qC(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Lxt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ji,_areEquals:qC,applyOperation:bv,applyPatch:V6,applyReducer:Mxt,deepClone:Oxt,getValueByPointer:d$,validate:ske,validator:h$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var iQ=new WeakMap,Fxt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),jxt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Bxt(e){return iQ.get(e)}function Uxt(e,t){return e.observers.get(t)}function zxt(e,t){e.observers.delete(t.callback)}function Vxt(e,t){t.unobserve()}function Hxt(e,t){var n=[],r,i=Bxt(e);if(!i)i=new Fxt(e),iQ.set(e,i);else{var s=Uxt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ou(e),t){r.callback=t,r.next=null;var o=function(){Fz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Fz(r),clearTimeout(r.next),zxt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new jxt(t,r)),r}function Fz(e,t){t===void 0&&(t=!1);var n=iQ.get(e.object);sQ(n.value,e.object,e.patches,"",t),e.patches.length&&V6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function sQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=$z(t),o=$z(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Oz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?sQ(c,f,n,r+"/"+I1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+I1(l),value:Ou(c)}),n.push({op:"replace",path:r+"/"+I1(l),value:Ou(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+I1(l),value:Ou(c)}),n.push({op:"remove",path:r+"/"+I1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Oz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+I1(l),value:Ou(t[l])})}}}function oke(e,t,n){n===void 0&&(n=!1);var r=[];return sQ(e,t,r,"",n),r}const qxt=Object.freeze(Object.defineProperty({__proto__:null,compare:oke,generate:Fz,observe:Hxt,unobserve:Vxt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Lxt,qxt,{JsonPatchError:ike,deepClone:Ou,escapePathComponent:I1,unescapePathComponent:rke});var v2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(v2||{});function dD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=uke(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=dD(i,t);return V6(a,Ou(o),!0,!1).newDocument}function Wxt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function ake({registry:e,initialState:t}){let n=!1;const r=cxt(),i=Nxt(t);function s(c){return i.backend.nodes[c]}r.listen(v2.TRAVERSAL_START,()=>{n=!0}),r.listen(v2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return dD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=dD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=oke(y,f);if(Wxt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=gxt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=dD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(v2.TRAVERSAL_START);const f=uke(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Yxt(p,m)?uh(p)&&d.push(...p.sideEffects.undo):uh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(v2.TRAVERSAL_END)},undo(){const{current:c}=i;return uh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return lke(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Gxt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;uh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)uh(r)&&(r=n[r.parent]),uh(i)&&(i=n[i.parent]);return r.id}function uke(e,t,n){const r=Gxt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),uh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),uh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Yxt(e,t){if(uh(e)&&e.parent===t.id)return!0;if(uh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function lke(e,t){return{...e,children:e.children.map(n=>lke(t[n],t)),name:`${e.label}`}}Ext();function Kxt(e){return e.length===2?kxt(e):e}class H6{static create(){return new H6}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Kxt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),oh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var Xxt="Expected a function",gfe=NaN,Qxt="[object Symbol]",Jxt=/^\s+|\s+$/g,Zxt=/^[-+]0x[0-9a-f]+$/i,eSt=/^0b[01]+$/i,tSt=/^0o[0-7]+$/i,nSt=parseInt,rSt=typeof no=="object"&&no&&no.Object===Object&&no,iSt=typeof self=="object"&&self&&self.Object===Object&&self,sSt=rSt||iSt||Function("return this")(),oSt=Object.prototype,aSt=oSt.toString,uSt=Math.max,lSt=Math.min,W8=function(){return sSt.Date.now()};function cSt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Xxt);t=yfe(t)||0,jz(n)&&(c=!!n.leading,f="maxWait"in n,s=f?uSt(yfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var S=r,A=i;return r=i=void 0,l=T,o=e.apply(A,S),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var S=T-u,A=T-l,C=t-S;return f?lSt(C,s-A):C}function g(T){var S=T-u,A=T-l;return u===void 0||S>=t||S<0||f&&A>=s}function y(){var T=W8();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(W8())}function E(){var T=W8(),S=g(T);if(r=arguments,i=this,u=T,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function jz(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fSt(e){return!!e&&typeof e=="object"}function dSt(e){return typeof e=="symbol"||fSt(e)&&aSt.call(e)==Qxt}function yfe(e){if(typeof e=="number")return e;if(dSt(e))return gfe;if(jz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Jxt,"");var n=eSt.test(e);return n||tSt.test(e)?nSt(e.slice(2),n?2:8):Zxt.test(e)?gfe:+e}var hSt=cSt;const bd=Wl(hSt);function cke({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=R.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=R.useMemo(()=>Qx(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(mm,{children:_.jsx(xs,{gap:3,children:_.jsx(et,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const pSt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:cke},Symbol.toStringTag,{value:"Module"})),G8=15;function fke({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=R.useState([0,0]),[l,c]=R.useState(!1);return R.useEffect(()=>{const f=ms("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<G8&&Math.abs(t(g[r.y])-p[1])<G8);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:G8,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const mSt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:fke},Symbol.toStringTag,{value:"Module"})),mi={top:15,left:100,right:15,bottom:70};function Bz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=hv(),[c]=hv(),[f]=hv(),[d,h]=R.useState(!0),p=R.useMemo(()=>l-mi.left-mi.right,[l]),m=R.useMemo(()=>u-mi.top-mi.bottom,[u]),g=R.useMemo(()=>{const I=Array.from(new Set(s.map(N=>N[i.category])));return Zx(xTe).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=R.useMemo(()=>{const I=s.map(L=>+L[i.x]).filter(L=>L!==null),[N,O]=nue(I),P=s.map(L=>+L[i.y]).filter(L=>L!==null),[$,F]=nue(P);return{xMin:N,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=R.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?yTe([mi.left,p+mi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Em([mi.left,p+mi.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),T=R.useMemo(()=>{const I=w-v;return m<=0?null:Em([m+mi.top,mi.top]).domain([v-I/10,w+I/10]).nice()},[m,w,v]),S=R.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const I=lct().extent([[mi.left,mi.top+m-5],[mi.left+p,mi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,T,O.mode)}),N=cct().extent([[mi.left-5,mi.top],[mi.left+5,mi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,T,O.mode)});return c.current&&f.current&&(ms(f.current).call(N),ms(c.current).call(I),t.hasBrush||(ms(f.current).call(N.move,[T(w),T(v)]),ms(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{ms(f.current).call(N.move,[T(w),T(v)]),ms(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const I=fct().extent([[mi.left,mi.top],[mi.left+p,mi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(ms(a.current).call(I.move,null),e(null))});return ms(a.current).call(I),()=>{ms(a.current).call(I.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(b),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,T]),A=R.useMemo(()=>o.length===0?null:new Set(o),[o]),C=R.useMemo(()=>!E||!T?null:s.map((I,N)=>{if(I[i.x]===null||I[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(I[i.x])):E(I[i.x]);return _.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:O,cy:T(I[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return R.useEffect(()=>{r==="Axis Selection"&&tut(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Gd,{children:[_.jsxs(xs,{children:[_.jsx(Rn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx($G,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(xs,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(cke,{yScale:T,label:i.y,horizontalPosition:mi.left,xRange:E.range()}),_.jsx(bK,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+mi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:E(I)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(fke,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Gd,{style:{flexGrow:1},gap:50,children:[_.jsxs(Gd,{gap:0,children:[_.jsx(et,{children:i.x}),_.jsx(kO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[E(I[0]),t.y1],[E(I[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(I=>({value:I,label:I})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Gd,{gap:0,children:[_.jsx(et,{children:i.y}),_.jsx(kO,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:I=>{n([[t.x1,T(I[1])],[t.x2,T(I[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(I=>({value:I,label:I})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const gSt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Bz,default:Bz},Symbol.toStringTag,{value:"Module"}));function vfe({parameters:e,setAnswer:t}){const[n,r]=R.useState(null),[i,s]=R.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=R.useState(null);R.useEffect(()=>{zct(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=R.useMemo(()=>o?sEt(o):null,[o]),{actions:l,trrack:c}=R.useMemo(()=>{const g=H6.create(),y=g.register("brush",(T,S)=>(T.all={brush:S},T)),v=g.register("brushMove",(T,S)=>(T.all={brush:S},T)),b=g.register("brushResize",(T,S)=>(T.all={brush:S},T)),w=g.register("brushClear",(T,S)=>(T.all={brush:S},T)),E=ake({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=R.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=R.useMemo(()=>bd(f,100,{maxWait:100}),[f]),h=R.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const N=new Set(w);C=u.filter(O8(O=>N.has(O[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(O8(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=S&&N[e.y]<=A)):C=u.filter(O8(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=S&&N[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=R.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=R.useCallback(g=>{r(g)},[]);return o?_.jsxs(Gd,{gap:"xs",children:[_.jsx(Bz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(Q7,{data:o,parameters:e,barsTable:p})]}):_.jsx(zm,{})}const ySt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:vfe,default:vfe},Symbol.toStringTag,{value:"Module"})),vSt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),bfe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},pS=e=>{const t=R.useRef(null),n=bfe(e),[r,i]=R.useState(0),[s,o]=R.useState(0);R.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=bfe({...n,width:n.width||r,height:n.height||s});return[t,a]},bSt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:pS},Symbol.toStringTag,{value:"Module"}));function dke({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const _St=Object.freeze(Object.defineProperty({__proto__:null,Bars:dke},Symbol.toStringTag,{value:"Module"}));function oQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=R.useMemo(()=>{const o=Em().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const wSt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:oQ},Symbol.toStringTag,{value:"Module"}));function hke({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=R.useMemo(()=>{const o=lk().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const ESt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:hke},Symbol.toStringTag,{value:"Module"})),xSt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function SSt({parameters:e}){const[n,r]=pS(xSt),i=lk().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Em().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(hke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(oQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(dke,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const TSt=Object.freeze(Object.defineProperty({__proto__:null,default:SSt},Symbol.toStringTag,{value:"Module"}));function pke({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const ASt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:pke},Symbol.toStringTag,{value:"Module"}));function aQ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const CSt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:aQ},Symbol.toStringTag,{value:"Module"})),ISt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},kSt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=YSe().size([t-10,n-10]).padding(1.5),o=s6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},RSt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function NSt({parameters:e}){const[t,n]=pS(ISt),r=kSt(e,n.width,n.height),i=RSt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(pke,{data:r}),_.jsx(aQ,{positions:i})]})})})}const PSt=Object.freeze(Object.defineProperty({__proto__:null,default:NSt},Symbol.toStringTag,{value:"Module"}));function mke({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const DSt=Object.freeze(Object.defineProperty({__proto__:null,Slices:mke},Symbol.toStringTag,{value:"Module"}));function gke({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const OSt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:gke},Symbol.toStringTag,{value:"Module"})),$St={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},MSt=Nmt().value(e=>e.value),ET=150;function LSt({parameters:e}){const[t,n]=pS($St),r=MSt(e.data),i=r.map(o=>X7().innerRadius(0).outerRadius(ET).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>X7().outerRadius(ET+10).innerRadius(ET+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+ET,n.marginTop+ET].join(",")})`,children:[_.jsx(mke,{arcs:i}),_.jsx(gke,{positions:s})]})})})}const FSt=Object.freeze(Object.defineProperty({__proto__:null,default:LSt},Symbol.toStringTag,{value:"Module"}));function yke({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=R.useMemo(()=>{const o=Em().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const jSt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:yke},Symbol.toStringTag,{value:"Module"}));function vke({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const BSt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:vke},Symbol.toStringTag,{value:"Module"})),USt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function zSt({parameters:e}){const[n,r]=pS(USt),i=lk().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Em().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return Zmt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(yke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(oQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(vke,{data:c,barWidth:f,yScale:s}),_.jsx(aQ,{positions:d})]})]})})})}const VSt=Object.freeze(Object.defineProperty({__proto__:null,default:zSt},Symbol.toStringTag,{value:"Module"})),HSt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function qSt({parameters:e,setAnswer:t}){const[n,r]=pS(HSt),[i,s]=R.useState(100),[o,a]=R.useState(100),[u,l]=R.useState(300),{taskid:c}=e,{actions:f,trrack:d}=R.useMemo(()=>{const p=H6.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=ake({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=R.useCallback(p=>{const m=ms("#movingCircle"),g=ms("#clickAccuracySvg"),y=d7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return R.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ms(n.current).select("circle").transition().duration(y).ease(Klt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(ve,{children:["Adjust speed (px/s):",_.jsx(RL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const WSt=Object.freeze(Object.defineProperty({__proto__:null,default:qSt},Symbol.toStringTag,{value:"Module"}));function _fe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function GSt({parameters:e,setAnswer:t}){const n=Ny(),[r,i]=R.useState(""),{goToNextStep:s,isNextDisabled:o}=BEe(),a=R.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=R.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=R.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=R.useCallback(()=>{o||s()},[o,s]);R.useEffect(()=>{const h=VBe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(za,{children:[_.jsxs(za.Col,{span:2,children:[_.jsx(_fe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Rn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(Ioe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(za.Col,{span:2,children:[_.jsx(_fe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Rn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(Ioe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const YSt=Object.freeze(Object.defineProperty({__proto__:null,default:GSt},Symbol.toStringTag,{value:"Module"})),wfe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":ngt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":ySt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":mSt,"../public/demo-brush-interactions/assets/Scatter.tsx":gSt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":egt,"../public/demo-brush-interactions/assets/YAxis.tsx":pSt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":tgt,"../public/demo-brush-interactions/assets/types.ts":vSt,"../public/demo-cleveland/assets/BarChart.tsx":TSt,"../public/demo-cleveland/assets/BubbleChart.tsx":PSt,"../public/demo-cleveland/assets/PieChart.tsx":FSt,"../public/demo-cleveland/assets/StackedBarChart.tsx":VSt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":_St,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":ASt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":CSt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":jSt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":wSt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":ESt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":DSt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":OSt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":BSt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":bSt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":WSt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":YSt});function KSt({currentConfig:e}){const t=Gm(),n=Ny(),r=`../public/${e.path}`,i=r in wfe?wfe[r].default:null,s=zh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Uh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(R.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(Lv,{path:e.path})})}function XSt({currentConfig:e}){const[t,n]=R.useState(""),[r,i]=R.useState(!0);return R.useEffect(()=>{async function s(){const o=await NY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ka,{text:t}):_.jsx(Lv,{path:e.path})}const QSt={},JSt=Object.freeze(Object.defineProperty({__proto__:null,default:QSt},Symbol.toStringTag,{value:"Module"})),ZSt=oje(JSt);var eTt=ZSt;function tTt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function nTt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function rTt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function iTt(e){return e.__COMMENTS__}function sTt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var q6={EOL:eTt.EOL||`
`,tryParseNumber:tTt,createComment:nTt,removeComment:rTt,getComment:iTt,forceComment:sTt},oTt="3.2.1";function aTt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Efe}else if(e.length===0)return Efe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return lTt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),uTt.bind(null,n)}function uTt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Efe(){}function lTt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function bke(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}bke.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function _ke(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}_ke.description="parse hexadecimal numbers prefixed with 0x";function wke(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}wke.description="support ISO dates";var uQ={loadDsf:aTt,std:{math:bke,hex:_ke,date:wke}},cTt=function(e,t){var n=q6,r=uQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,L=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",L=o;h();){if(o===L)return h(),$&&L==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,z=0;z<4;z++){h();var q=o.charCodeAt(0),D;o>="0"&&o<="9"?D=q-48:o>="a"&&o<="f"?D=q-97+10:o>="A"&&o<="F"?D=q-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function z(){for(var q=L;o&&o<=" "&&o!==`
`&&q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),z()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,L=-1;;){if(o===":")return $?L>=0&&L!==$.length&&(s=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?L<0&&(L=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=$[0];switch(L){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var z=l($);return z!==void 0?z:$}}$+=o}}function w($,F){var L;for($--,L=s-2;L>$&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr($,L-$+1);for(L=0;L<B.length;L++)if(B[L]>" "){var z=B.indexOf(`
`);if(z>=0){var q=[B.substr(0,z),B.substr(z+1)];return F&&q[0].trim().length===0&&q.shift(),q}else return[B]}return[]}function E($){function F(B,z){var q,D,U,W;switch(typeof B){case"string":B.indexOf(z)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(q=0,U=B.length;q<U;q++)W=F(B[q],z)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],z)||W)}return W}function L(B){var z=F($,B);return z?"found '"+B+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function T(){var $=[],F,L,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),L=s,v(),F&&(B=w(L,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(A()),L=s,v(),o===","&&(h(),L=s,v()),F){var z=w(L);F.a.push([B||"",z[0]||""]),B=z[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(q){throw q.hint=q.hint||E($),q}}function S($){var F="",L={},B,z,q;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),$?z=1:(h(),z=s),v(),B&&(q=w(z,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[q]),h(),L;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[F]=A(),z=s,v(),o===","&&(h(),z=s,v()),B){var D=w(z);B.c[F]=[q||"",D[0]||""],q=D[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=q||""),L;v()}if($)return L;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||E(L),U}}function A(){switch(v(),o){case"{":return S();case"[":return T();case"'":case'"':return m(!0);default:return b()}}function C($,F){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),z=w(L).join(`
`);if(z||B){var q=n.createComment($,n.getComment($));q.r=[B,z]}}return $}function I(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$);default:return C(A(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$)}try{return C(S(!0),$)}catch(F){c();try{return C(A(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),P?N():I()},fTt=function(e,t){var n=q6,r=uQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",P=0;function $(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(T,function(j){var H=I[j];return typeof H=="string"?$(g.esc,H):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,H,G){return W?(S.lastIndex=0,C.lastIndex=0,c||H||S.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(T.lastIndex=0,A.lastIndex=0,T.test(W)?!A.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var H,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(H=0;H<G.length;H++)ne+=s,G[H]&&(ne+=j+G[H]);return ne+s+j+g.mstr[1]}function z(W){return W?l||N.test(W)?(T.lastIndex=0,$(g.qkey,T.test(W)?F(W):W)):$(g.key,W):'""'}function q(W,j,H,G){function ne(pn){return pn&&pn[pn[0]==="\r"?1:0]===`
`}function ce(pn){return pn&&!ne(pn)}function de(pn,Sn,nr){if(!pn)return"";pn=n.forceComment(pn);var rr,Uo=pn.length;for(rr=0;rr<Uo&&pn[rr]<=" ";rr++);return nr&&rr>0&&(pn=pn.substr(rr)),rr<Uo?Sn+$(g.rem,pn):pn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return L(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=O;O+=o;var Ke=s+be,Ue=s+O,yt=H||u?"":Ke,it=[],_e,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],We=0,me,dt,vt,pe,Ce,He,ut,_t,Ln;if(Ie){for(me=0,dt=W.length;me<dt;me++){if(_e=me<dt-1,ye?(He=ye.a[me]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),P=0,pe=W[me],it.push(q(pe,ye?ut:!1,!0)+(_e?h:"")),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,ke.push(q(pe,!1,!0)+(_e?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}_e&&(P+=g.com[0].length-g.com[2]),We+=P}ye&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}dt===0?ye&&ye.e&&it.push(de(ye.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.arr,Ln))))}else{var Tr=ye?ye.o.slice():[],Fn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Tr.indexOf(vt)<0&&Fn.push(vt);m&&Fn.sort();var cr=Tr.concat(Fn);for(me=0,dt=cr.length;me<dt;me++)if(_e=me<dt-1,vt=cr[me],ye?(He=ye.c[vt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),P=0,pe=W[vt],Ce=q(pe,ye&&ut),it.push(z(vt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(_e?h:"")),ye&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,Ce=q(pe,!1),c=ze,d=ct,ke.push(z(vt)+g.col[0]+" "+Ce+(_e?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}P+=g.col[0].length-g.col[2],_e&&(P+=g.com[0].length-g.com[2]),We+=P}dt===0?ye&&ye.e&&it.push(de(ye.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.obj,Ln))))}return O=be,_t}}w=r.loadDsf(p,"stringify");var D="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(D=U[0]+`
`),D+=q(e,null,!0,!0),U&&(D+=U[1]||""),D},Ww=q6;function mA(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function Uz(e,t){if(!(e===null||typeof e!="object")){var n=Ww.getComment(e);n&&Ww.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)xfe(o.a,r,n.a[r],Uz(e[r]))&&(s=!0);!s&&n.e&&(o.e=mA(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];xfe(o.s,l,n.c[l],Uz(e[l]))&&(s=!0)}!s&&n.e&&(o.e=mA(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=mA(n.r[0],n.r[1])),s?o:void 0}}function dTt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function hTt(e,t){var n=[];if(zz(e,t,n,[]),n.length>0){var r=p$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+dTt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),p$(t,r,1)}}function xfe(e,t,n,r){var i=mA(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function gA(e,t){var n=mA(t.b,t.a);return n.path=e,n}function yA(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(gA(s,o)),yA(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(gA(u,l)),yA(l.x,t,u))});e.e&&t.push(gA(n,e.e))}}function zz(e,t,n,r){if(e){if(t===null||typeof t!="object"){yA(e,n,r);return}var i,s=Ww.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],zz(u.x,t[i],n,l)):(n.push(gA(l,u)),yA(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],zz(d.x,t[c],n,f))):d&&(n.push(gA(f,d)),yA(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function p$(e,t,n){var r=Ww.createComment(e,Ww.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Ww.forceComment(t)),r.r[n]||""}var pTt={extract:function(e){return Uz(e,!0)},merge:hTt,header:function(e,t){return p$(e,t,0)},footer:function(e,t){return p$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Sfe=q6,mTt=oTt,Tfe=cTt,Afe=fTt,gTt=pTt,yTt=uQ,lQ={parse:Tfe,stringify:Afe,endOfLine:function(){return Sfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Sfe.EOL=e)},version:mTt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Tfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Afe(e,t)}},comments:gTt,dsf:yTt.std},Vz={exports:{}},Eke={},$f={},YE={},Tk={},Pn={},WC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(WC);var Hz={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=WC;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Hz);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=WC,n=Hz;var r=WC;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Hz;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,ne){super(),this.varKind=H,this.name=G,this.rhs=ne}render({es5:H,_n:G}){const ne=H?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,ne){super(),this.lhs=H,this.rhs=G,this.sideEffects=ne}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(H,this.rhs)}}class u extends a{constructor(H,G,ne,ce){super(H,ne,ce),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class l extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class f extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class d extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=$(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,ne)=>G+ne.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const ne=H[G].optimizeNodes();Array.isArray(ne)?H.splice(G,1,...ne):ne?H[G]=ne:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(H,G)||(F(H,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>O(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=$(this.condition,H,G),this}get names(){const H=super.names;return P(H,this.condition),this.else&&O(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=$(this.iteration,H,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(H,G,ne,ce){super(),this.varKind=H,this.name=G,this.from=ne,this.to=ce}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(H)}get names(){const H=P(super.names,this.from);return P(H,this.to)}}class E extends v{constructor(H,G,ne,ce){super(),this.loop=H,this.varKind=G,this.name=ne,this.iterable=ce}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=$(this.iterable,H,G),this}get names(){return O(super.names,this.iterable.names)}}class T extends p{constructor(H,G,ne){super(),this.name=H,this.args=G,this.async=ne}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}T.kind="func";class S extends h{render(H){return"return "+super.render(H)}}S.kind="return";class A extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var ne,ce;return super.optimizeNames(H,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(H,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&O(H,this.catch.names),this.finally&&O(H,this.finally.names),H}}class C extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}C.kind="catch";class I extends p{render(H){return"finally"+super.render(H)}}I.kind="finally";class N{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const ne=this._extScope.value(H,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(H,de,ne)),de}const(H,G,ne){return this._def(n.varKinds.const,H,G,ne)}let(H,G,ne){return this._def(n.varKinds.let,H,G,ne)}var(H,G,ne){return this._def(n.varKinds.var,H,G,ne)}assign(H,G,ne){return this._leafNode(new a(H,G,ne))}add(H,G){return this._leafNode(new u(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new d(H)),this}object(...H){const G=["{"];for(const[ne,ce]of H)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(H,G,ne){if(this._blockNode(new y(H)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new b(H),G)}forRange(H,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(H);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(H,G,ne,ce=n.varKinds.const){const de=this._scope.toName(H);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(H,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(H);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new l(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new S;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(H,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(H),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new I,this.code(ne)),this._endBlockNode(C,I)}throw(H){return this._leafNode(new f(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||H!==void 0&&ne!==H)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,ne,ce){return this._blockNode(new T(H,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const ne=this._currNode;if(ne instanceof H||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=N;function O(j,H){for(const G in H)j[G]=(j[G]||0)+(H[G]||0);return j}function P(j,H){return H instanceof t._CodeOrName?O(j,H.names):j}function $(j,H,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||H[de.str]!==1?de:(delete H[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&H[he.str]===1&&G[he.str]!==void 0)}}function F(j,H){for(const G in H)j[G]=(j[G]||0)-(H[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=U(e.operators.AND);function z(...j){return j.reduce(B)}e.and=z;const q=U(e.operators.OR);function D(...j){return j.reduce(q)}e.or=D;function U(j){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Pn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Wr=Pn,vTt=WC;function bTt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=bTt;function _Tt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(xke(e,t),!Ske(t,e.self.RULES.all))}wt.alwaysValidSchema=_Tt;function xke(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||Cke(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=xke;function Ske(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=Ske;function wTt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=wTt;function ETt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Wr._)`${n}`}return(0,Wr._)`${e}${t}${(0,Wr.getProperty)(r)}`}wt.schemaRefOrVal=ETt;function xTt(e){return Tke(decodeURIComponent(e))}wt.unescapeFragment=xTt;function STt(e){return encodeURIComponent(cQ(e))}wt.escapeFragment=STt;function cQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=cQ;function Tke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=Tke;function TTt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=TTt;function Cfe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Wr.Name?(s instanceof Wr.Name?e(i,s,o):t(i,s,o),o):s instanceof Wr.Name?(t(i,o,s),s):n(s,o);return a===Wr.Name&&!(u instanceof Wr.Name)?r(i,u):u}}wt.mergeEvaluated={props:Cfe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Wr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Wr._)`${n} || {}`).code((0,Wr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Wr._)`${n} || {}`),fQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Ake}),items:Cfe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Wr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Wr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Ake(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Wr._)`{}`);return t!==void 0&&fQ(e,n,t),n}wt.evaluatedPropsToName=Ake;function fQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Wr._)`${t}${(0,Wr.getProperty)(r)}`,!0))}wt.setEvaluated=fQ;const Ife={};function ATt(e,t){return e.scopeValue("func",{ref:t,code:Ife[t.code]||(Ife[t.code]=new vTt._Code(t.code))})}wt.useFunc=ATt;var qz;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(qz||(wt.Type=qz={}));function CTt(e,t,n){if(e instanceof Wr.Name){const r=t===qz.Num;return n?r?(0,Wr._)`"[" + ${e} + "]"`:(0,Wr._)`"['" + ${e} + "']"`:r?(0,Wr._)`"/" + ${e}`:(0,Wr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Wr.getProperty)(e).toString():"/"+cQ(e)}wt.getErrorPath=CTt;function Cke(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=Cke;var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});const Zo=Pn,ITt={data:new Zo.Name("data"),valCxt:new Zo.Name("valCxt"),instancePath:new Zo.Name("instancePath"),parentData:new Zo.Name("parentData"),parentDataProperty:new Zo.Name("parentDataProperty"),rootData:new Zo.Name("rootData"),dynamicAnchors:new Zo.Name("dynamicAnchors"),vErrors:new Zo.Name("vErrors"),errors:new Zo.Name("errors"),this:new Zo.Name("this"),self:new Zo.Name("self"),scope:new Zo.Name("scope"),json:new Zo.Name("json"),jsonPos:new Zo.Name("jsonPos"),jsonLen:new Zo.Name("jsonLen"),jsonPart:new Zo.Name("jsonPart")};Gh.default=ITt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=wt,r=Gh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:S}=w,A=f(g,y,v);b??(T||S)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:T}=b,S=f(g,y,v);u(w,S),E||T||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:T,it:S}=g,{opts:A,propertyName:C,topSchemaRef:I,schemaPath:N}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,T],[c.parentSchema,(0,t._)`${I}${N}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(Tk);Object.defineProperty(YE,"__esModule",{value:!0});YE.boolOrEmptySchema=YE.topBoolOrEmptySchema=void 0;const kTt=Tk,RTt=Pn,NTt=Gh,PTt={message:"boolean schema is false"};function DTt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?Ike(e,!1):typeof n=="object"&&n.$async===!0?t.return(NTt.default.data):(t.assign((0,RTt._)`${r}.errors`,null),t.return(!0))}YE.topBoolOrEmptySchema=DTt;function OTt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),Ike(e)):n.var(t,!0)}YE.boolOrEmptySchema=OTt;function Ike(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,kTt.reportError)(i,PTt,void 0,t)}var Rs={},Kv={};Object.defineProperty(Kv,"__esModule",{value:!0});Kv.getRules=Kv.isJSONType=void 0;const $Tt=["string","number","integer","boolean","null","object","array"],MTt=new Set($Tt);function LTt(e){return typeof e=="string"&&MTt.has(e)}Kv.isJSONType=LTt;function FTt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Kv.getRules=FTt;var em={};Object.defineProperty(em,"__esModule",{value:!0});em.shouldUseRule=em.shouldUseGroup=em.schemaHasRulesForType=void 0;function jTt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&kke(e,r)}em.schemaHasRulesForType=jTt;function kke(e,t){return t.rules.some(n=>Rke(e,n))}em.shouldUseGroup=kke;function Rke(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}em.shouldUseRule=Rke;Object.defineProperty(Rs,"__esModule",{value:!0});Rs.reportTypeError=Rs.checkDataTypes=Rs.checkDataType=Rs.coerceAndCheckDataType=Rs.getJSONTypes=Rs.getSchemaTypes=Rs.DataType=void 0;const BTt=Kv,UTt=em,zTt=Tk,bn=Pn,Nke=wt;var Gw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Gw||(Rs.DataType=Gw={}));function VTt(e){const t=Pke(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Rs.getSchemaTypes=VTt;function Pke(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(BTt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Rs.getJSONTypes=Pke;function HTt(e,t){const{gen:n,data:r,opts:i}=e,s=qTt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,UTt.schemaHasRulesForType)(e,t[0]));if(o){const a=dQ(t,r,i.strictNumbers,Gw.Wrong);n.if(a,()=>{s.length?WTt(e,t,s):hQ(e)})}return o}Rs.coerceAndCheckDataType=HTt;const Dke=new Set(["string","number","integer","boolean","null"]);function qTt(e,t){return t?e.filter(n=>Dke.has(n)||t==="array"&&n==="array"):[]}function WTt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,bn._)`typeof ${i}`),a=r.let("coerced",(0,bn._)`undefined`);s.coerceTypes==="array"&&r.if((0,bn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,bn._)`${i}[0]`).assign(o,(0,bn._)`typeof ${i}`).if(dQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,bn._)`${a} !== undefined`);for(const l of n)(Dke.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),hQ(e),r.endIf(),r.if((0,bn._)`${a} !== undefined`,()=>{r.assign(i,a),GTt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,bn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,bn._)`"" + ${i}`).elseIf((0,bn._)`${i} === null`).assign(a,(0,bn._)`""`);return;case"number":r.elseIf((0,bn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,bn._)`+${i}`);return;case"integer":r.elseIf((0,bn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,bn._)`+${i}`);return;case"boolean":r.elseIf((0,bn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,bn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,bn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,bn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,bn._)`[${i}]`)}}}function GTt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,bn._)`${t} !== undefined`,()=>e.assign((0,bn._)`${t}[${n}]`,r))}function Wz(e,t,n,r=Gw.Correct){const i=r===Gw.Correct?bn.operators.EQ:bn.operators.NEQ;let s;switch(e){case"null":return(0,bn._)`${t} ${i} null`;case"array":s=(0,bn._)`Array.isArray(${t})`;break;case"object":s=(0,bn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,bn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,bn._)`typeof ${t} ${i} ${e}`}return r===Gw.Correct?s:(0,bn.not)(s);function o(a=bn.nil){return(0,bn.and)((0,bn._)`typeof ${t} == "number"`,a,n?(0,bn._)`isFinite(${t})`:bn.nil)}}Rs.checkDataType=Wz;function dQ(e,t,n,r){if(e.length===1)return Wz(e[0],t,n,r);let i;const s=(0,Nke.toHash)(e);if(s.array&&s.object){const o=(0,bn._)`typeof ${t} != "object"`;i=s.null?o:(0,bn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=bn.nil;s.number&&delete s.integer;for(const o in s)i=(0,bn.and)(i,Wz(o,t,n,r));return i}Rs.checkDataTypes=dQ;const YTt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,bn._)`{type: ${e}}`:(0,bn._)`{type: ${t}}`};function hQ(e){const t=KTt(e);(0,zTt.reportError)(t,YTt)}Rs.reportTypeError=hQ;function KTt(e){const{gen:t,data:n,schema:r}=e,i=(0,Nke.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var W6={};Object.defineProperty(W6,"__esModule",{value:!0});W6.assignDefaults=void 0;const E_=Pn,XTt=wt;function QTt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)kfe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>kfe(e,s,i.default))}W6.assignDefaults=QTt;function kfe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,E_._)`${s}${(0,E_.getProperty)(t)}`;if(i){(0,XTt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,E_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,E_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,E_._)`${a} = ${(0,E_.stringify)(n)}`)}var Xd={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const ai=Pn,pQ=wt,pg=Gh,JTt=wt;function ZTt(e,t){const{gen:n,data:r,it:i}=e;n.if(gQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ai._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=ZTt;function e2t({gen:e,data:t,it:{opts:n}},r,i){return(0,ai.or)(...r.map(s=>(0,ai.and)(gQ(e,t,s,n.ownProperties),(0,ai._)`${i} = ${s}`)))}kn.checkMissingProp=e2t;function t2t(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=t2t;function Oke(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ai._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=Oke;function mQ(e,t,n){return(0,ai._)`${Oke(e)}.call(${t}, ${n})`}kn.isOwnProperty=mQ;function n2t(e,t,n,r){const i=(0,ai._)`${t}${(0,ai.getProperty)(n)} !== undefined`;return r?(0,ai._)`${i} && ${mQ(e,t,n)}`:i}kn.propertyInData=n2t;function gQ(e,t,n,r){const i=(0,ai._)`${t}${(0,ai.getProperty)(n)} === undefined`;return r?(0,ai.or)(i,(0,ai.not)(mQ(e,t,n))):i}kn.noPropertyInData=gQ;function $ke(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=$ke;function r2t(e,t){return $ke(t).filter(n=>!(0,pQ.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=r2t;function i2t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ai._)`${e}, ${t}, ${r}${i}`:t,f=[[pg.default.instancePath,(0,ai.strConcat)(pg.default.instancePath,s)],[pg.default.parentData,o.parentData],[pg.default.parentDataProperty,o.parentDataProperty],[pg.default.rootData,pg.default.rootData]];o.opts.dynamicRef&&f.push([pg.default.dynamicAnchors,pg.default.dynamicAnchors]);const d=(0,ai._)`${c}, ${n.object(...f)}`;return u!==ai.nil?(0,ai._)`${a}.call(${u}, ${d})`:(0,ai._)`${a}(${d})`}kn.callValidateCode=i2t;const s2t=(0,ai._)`new RegExp`;function o2t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ai._)`${i.code==="new RegExp"?s2t:(0,JTt.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=o2t;function a2t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ai._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:pQ.Type.Num},s),t.if((0,ai.not)(s),a)})}}kn.validateArray=a2t;function u2t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,pQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ai._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ai.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=u2t;Object.defineProperty(Xd,"__esModule",{value:!0});Xd.validateKeywordUsage=Xd.validSchemaType=Xd.funcKeywordCode=Xd.macroKeywordCode=void 0;const $a=Pn,L1=Gh,l2t=kn,c2t=Tk;function f2t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=Mke(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:$a.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Xd.macroKeywordCode=f2t;function d2t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;p2t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=Mke(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Rfe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Rfe(e),g(()=>h2t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,$a._)`await `),v=>r.assign(f,!1).if((0,$a._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,$a._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,$a._)`${c}.errors`;return r.assign(y,null),m($a.nil),y}function m(y=t.async?(0,$a._)`await `:$a.nil){const v=u.opts.passContext?L1.default.this:L1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,$a._)`${y}${(0,l2t.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,$a.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Xd.funcKeywordCode=d2t;function Rfe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,$a._)`${r.parentData}[${r.parentDataProperty}]`))}function h2t(e,t){const{gen:n}=e;n.if((0,$a._)`Array.isArray(${t})`,()=>{n.assign(L1.default.vErrors,(0,$a._)`${L1.default.vErrors} === null ? ${t} : ${L1.default.vErrors}.concat(${t})`).assign(L1.default.errors,(0,$a._)`${L1.default.vErrors}.length`),(0,c2t.extendErrors)(e)},()=>e.error())}function p2t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Mke(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,$a.stringify)(n)})}function m2t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Xd.validSchemaType=m2t;function g2t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Xd.validateKeywordUsage=g2t;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.extendSubschemaMode=b0.extendSubschemaData=b0.getSubschema=void 0;const Hd=Pn,Lke=wt;function y2t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Hd._)`${e.schemaPath}${(0,Hd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Hd._)`${e.schemaPath}${(0,Hd.getProperty)(t)}${(0,Hd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Lke.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}b0.getSubschema=y2t;function v2t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Hd._)`${t.data}${(0,Hd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Hd.str)`${l}${(0,Lke.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Hd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Hd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}b0.extendSubschemaData=v2t;function b2t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}b0.extendSubschemaMode=b2t;var Co={},Fke={exports:{}},Yg=Fke.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};hD(t,r,i,e,"",e)};Yg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Yg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Yg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Yg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function hD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Yg.arrayKeywords)for(var d=0;d<f.length;d++)hD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Yg.propsKeywords){if(f&&typeof f=="object")for(var h in f)hD(e,t,n,f[h],i+"/"+c+"/"+_2t(h),s,i,c,r,h)}else(c in Yg.keywords||e.allKeys&&!(c in Yg.skipKeywords))&&hD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function _2t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var w2t=Fke.exports;Object.defineProperty(Co,"__esModule",{value:!0});Co.getSchemaRefs=Co.resolveUrl=Co.normalizeId=Co._getFullPath=Co.getFullPath=Co.inlineRef=void 0;const E2t=wt,x2t=RY,S2t=w2t,T2t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function A2t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Gz(e):t?jke(e)<=t:!1}Co.inlineRef=A2t;const C2t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Gz(e){for(const t in e){if(C2t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(Gz)||typeof n=="object"&&Gz(n))return!0}return!1}function jke(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!T2t.has(n)&&(typeof e[n]=="object"&&(0,E2t.eachItem)(e[n],r=>t+=jke(r)),t===1/0))return 1/0}return t}function Bke(e,t="",n){n!==!1&&(t=Yw(t));const r=e.parse(t);return Uke(e,r)}Co.getFullPath=Bke;function Uke(e,t){return e.serialize(t).split("#")[0]+"#"}Co._getFullPath=Uke;const I2t=/#\/?$/;function Yw(e){return e?e.replace(I2t,""):""}Co.normalizeId=Yw;function k2t(e,t,n){return n=Yw(n),e.resolve(t,n)}Co.resolveUrl=k2t;const R2t=/^[a-z_][-a-z0-9._]*$/i;function N2t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Yw(e[n]||t),s={"":i},o=Bke(r,i,!1),a={},u=new Set;return S2t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Yw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Yw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!R2t.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!x2t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Co.getSchemaRefs=N2t;Object.defineProperty($f,"__esModule",{value:!0});$f.getData=$f.KeywordCxt=$f.validateFunctionCode=void 0;const zke=YE,Nfe=Rs,yQ=em,m$=Rs,P2t=W6,vA=Xd,Y8=b0,Pt=Pn,rn=Gh,D2t=Co,tm=wt,xT=Tk;function O2t(e){if(qke(e)&&(Wke(e),Hke(e))){L2t(e);return}Vke(e,()=>(0,zke.topBoolOrEmptySchema)(e))}$f.validateFunctionCode=O2t;function Vke({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${rn.default.data}, ${rn.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${Pfe(n,i)}`),M2t(e,i),e.code(s)}):e.func(t,(0,Pt._)`${rn.default.data}, ${$2t(i)}`,r.$async,()=>e.code(Pfe(n,i)).code(s))}function $2t(e){return(0,Pt._)`{${rn.default.instancePath}="", ${rn.default.parentData}, ${rn.default.parentDataProperty}, ${rn.default.rootData}=${rn.default.data}${e.dynamicRef?(0,Pt._)`, ${rn.default.dynamicAnchors}={}`:Pt.nil}}={}`}function M2t(e,t){e.if(rn.default.valCxt,()=>{e.var(rn.default.instancePath,(0,Pt._)`${rn.default.valCxt}.${rn.default.instancePath}`),e.var(rn.default.parentData,(0,Pt._)`${rn.default.valCxt}.${rn.default.parentData}`),e.var(rn.default.parentDataProperty,(0,Pt._)`${rn.default.valCxt}.${rn.default.parentDataProperty}`),e.var(rn.default.rootData,(0,Pt._)`${rn.default.valCxt}.${rn.default.rootData}`),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Pt._)`${rn.default.valCxt}.${rn.default.dynamicAnchors}`)},()=>{e.var(rn.default.instancePath,(0,Pt._)`""`),e.var(rn.default.parentData,(0,Pt._)`undefined`),e.var(rn.default.parentDataProperty,(0,Pt._)`undefined`),e.var(rn.default.rootData,rn.default.data),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Pt._)`{}`)})}function L2t(e){const{schema:t,opts:n,gen:r}=e;Vke(e,()=>{n.$comment&&t.$comment&&Yke(e),z2t(e),r.let(rn.default.vErrors,null),r.let(rn.default.errors,0),n.unevaluated&&F2t(e),Gke(e),q2t(e)})}function F2t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function Pfe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function j2t(e,t){if(qke(e)&&(Wke(e),Hke(e))){B2t(e,t);return}(0,zke.boolOrEmptySchema)(e,t)}function Hke({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function qke(e){return typeof e.schema!="boolean"}function B2t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&Yke(e),V2t(e),H2t(e);const s=r.const("_errs",rn.default.errors);Gke(e,s),r.var(t,(0,Pt._)`${s} === ${rn.default.errors}`)}function Wke(e){(0,tm.checkUnknownRules)(e),U2t(e)}function Gke(e,t){if(e.opts.jtd)return Dfe(e,[],!1,t);const n=(0,Nfe.getSchemaTypes)(e.schema),r=(0,Nfe.coerceAndCheckDataType)(e,n);Dfe(e,n,!r,t)}function U2t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,tm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function z2t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,tm.checkStrictMode)(e,"default is ignored in the schema root")}function V2t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,D2t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function H2t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Yke({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function q2t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${rn.default.errors} === 0`,()=>t.return(rn.default.data),()=>t.throw((0,Pt._)`new ${i}(${rn.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,rn.default.vErrors),s.unevaluated&&W2t(e),t.return((0,Pt._)`${rn.default.errors} === 0`))}function W2t({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function Dfe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,tm.schemaHasRulesButRef)(s,c))){i.block(()=>Qke(e,"$ref",c.all.$ref.definition));return}u.jtd||G2t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,yQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,m$.checkDataType)(d.type,o,u.strictNumbers)),Ofe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,m$.reportTypeError)(e)),i.endIf()):Ofe(e,d),a||i.if((0,Pt._)`${rn.default.errors} === ${r||0}`))}}function Ofe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,P2t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,yQ.shouldUseRule)(r,s)&&Qke(e,s.keyword,s.definition,t.type)})}function G2t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Y2t(e,t),e.opts.allowUnionTypes||K2t(e,t),X2t(e,e.dataTypes))}function Y2t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Kke(e.dataTypes,n)||vQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),J2t(e,t)}}function K2t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&vQ(e,"use allowUnionTypes to allow union type keyword")}function X2t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,yQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Q2t(t,o))&&vQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Q2t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Kke(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function J2t(e,t){const n=[];for(const r of e.dataTypes)Kke(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function vQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,tm.checkStrictMode)(e,t,e.opts.strictTypes)}class Xke{constructor(t,n,r){if((0,vA.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,tm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Jke(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,vA.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",rn.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?xT.reportExtraError:xT.reportError)(this,this.def.error,n)}$dataError(){(0,xT.reportError)(this,this.def.$dataError||xT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,xT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,m$.checkDataTypes)(u,n,s.opts.strictNumbers,m$.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,Y8.getSubschema)(this.it,t);(0,Y8.extendSubschemaData)(r,this.it,t),(0,Y8.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return j2t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=tm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=tm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}$f.KeywordCxt=Xke;function Qke(e,t,n,r){const i=new Xke(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,vA.funcKeywordCode)(i,n):"macro"in n?(0,vA.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,vA.funcKeywordCode)(i,n)}const Z2t=/^\/(?:[^~]|~0|~1)*$/,eAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Jke(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return rn.default.rootData;if(e[0]==="/"){if(!Z2t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=rn.default.rootData}else{const l=eAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,tm.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}$f.getData=Jke;var Ak={};Object.defineProperty(Ak,"__esModule",{value:!0});class tAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ak.default=tAt;var mS={};Object.defineProperty(mS,"__esModule",{value:!0});const K8=Co;class nAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,K8.resolveUrl)(t,n,r),this.missingSchema=(0,K8.normalizeId)((0,K8.getFullPath)(t,this.missingRef))}}mS.default=nAt;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.resolveSchema=Cu.getCompilingSchema=Cu.resolveRef=Cu.compileSchema=Cu.SchemaEnv=void 0;const Jc=Pn,rAt=Ak,o1=Gh,wf=Co,$fe=wt,iAt=$f;class G6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,wf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Cu.SchemaEnv=G6;function bQ(e){const t=Zke.call(this,e);if(t)return t;const n=(0,wf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Jc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:rAt.default,code:(0,Jc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:o1.default.data,parentData:o1.default.parentData,parentDataProperty:o1.default.parentDataProperty,dataNames:[o1.default.data],dataPathArr:[Jc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Jc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Jc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Jc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,iAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(o1.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${o1.default.self}`,`${o1.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Jc.Name?void 0:p,items:m instanceof Jc.Name?void 0:m,dynamicProps:p instanceof Jc.Name,dynamicItems:m instanceof Jc.Name},h.source&&(h.source.evaluated=(0,Jc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Cu.compileSchema=bQ;function sAt(e,t,n){var r;n=(0,wf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=uAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new G6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=oAt.call(this,s)}Cu.resolveRef=sAt;function oAt(e){return(0,wf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:bQ.call(this,e)}function Zke(e){for(const t of this._compilations)if(aAt(t,e))return t}Cu.getCompilingSchema=Zke;function aAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function uAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Y6.call(this,e,t)}function Y6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,wf._getFullPath)(this.opts.uriResolver,n);let i=(0,wf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return X8.call(this,n,e);const s=(0,wf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=Y6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:X8.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||bQ.call(this,o),s===(0,wf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,wf.resolveUrl)(this.opts.uriResolver,i,l)),new G6({schema:a,schemaId:u,root:e,baseId:i})}return X8.call(this,n,o)}}Cu.resolveSchema=Y6;const lAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function X8(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,$fe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!lAt.has(a)&&l&&(t=(0,wf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,$fe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,wf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=Y6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new G6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const cAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",fAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",dAt="object",hAt=["$data"],pAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},mAt=!1,gAt={$id:cAt,description:fAt,type:dAt,required:hAt,properties:pAt,additionalProperties:mAt};var _Q={},Yz={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(no,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Te=ee.length-1,Se=1;Se<Te;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Te]=ee[Te].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Te in ee)ae[Te]=ee[Te];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Te=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+i("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+i("%"+Te+Te)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ht=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",dn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(dn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Cr=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Vt=i(Te+"{1,4}"),sr=i(i(Vt+"\\:"+Vt)+"|"+Cr),zr=i(i(Vt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+sr),Ii=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+sr),qs=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+sr),Qr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+sr),go=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+sr),Mi=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+sr),Li=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),zo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ia=i([zr,Jn,Ii,qs,Qr,go,Mi,Li,zo].join("|")),Ws=i(i(dn+"|"+Se)+"+");i("[vV]"+Te+"+\\."+r(dn,St,"[\\:]")+"+"),i(i(Se+"|"+r(dn,St))+"*");var Ql=i(Se+"|"+r(dn,St,"[\\:\\@]"));return i(i(Se+"|"+r(dn,St,"[\\@]"))+"+"),i(i(Ql+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",dn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",dn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",dn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",dn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",dn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",dn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",dn,St),"g"),UNRESERVED:new RegExp(dn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",dn,Ht),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Cr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ia+")"+i(i("\\%25|\\%(?!"+Te+"{2})")+"("+Ws+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Te=[],Se=!0,ot=!1,St=void 0;try{for(var Ht=ee[Symbol.iterator](),On;!(Se=(On=Ht.next()).done)&&(Te.push(On.value),!(ae&&Te.length===ae));Se=!0);}catch(jn){ot=!0,St=jn}finally{try{!Se&&Ht.return&&Ht.return()}finally{if(ot)throw St}}return Te}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,T="-",S=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,P=String.fromCharCode;function $(oe){throw new RangeError(I[oe])}function F(oe,ee){for(var ae=[],Te=oe.length;Te--;)ae[Te]=ee(oe[Te]);return ae}function L(oe,ee){var ae=oe.split("@"),Te="";ae.length>1&&(Te=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Te+ot}function B(oe){for(var ee=[],ae=0,Te=oe.length;ae<Te;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Te){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var z=function(ee){return String.fromCodePoint.apply(String,h(ee))},q=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},U=function(ee,ae,Te){var Se=0;for(ee=Te?O(ee/b):ee>>1,ee+=O(ee/ae);ee>N*y>>1;Se+=m)ee=O(ee/N);return O(Se+(N+1)*ee/(ee+v))},W=function(ee){var ae=[],Te=ee.length,Se=0,ot=E,St=w,Ht=ee.lastIndexOf(T);Ht<0&&(Ht=0);for(var On=0;On<Ht;++On)ee.charCodeAt(On)>=128&&$("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=Ht>0?Ht+1:0;jn<Te;){for(var dn=Se,ir=1,Cr=m;;Cr+=m){jn>=Te&&$("invalid-input");var Vt=q(ee.charCodeAt(jn++));(Vt>=m||Vt>O((p-Se)/ir))&&$("overflow"),Se+=Vt*ir;var sr=Cr<=St?g:Cr>=St+y?y:Cr-St;if(Vt<sr)break;var zr=m-sr;ir>O(p/zr)&&$("overflow"),ir*=zr}var Jn=ae.length+1;St=U(Se-dn,Jn,dn==0),O(Se/Jn)>p-ot&&$("overflow"),ot+=O(Se/Jn),Se%=Jn,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Te=ee.length,Se=E,ot=0,St=w,Ht=!0,On=!1,jn=void 0;try{for(var dn=ee[Symbol.iterator](),ir;!(Ht=(ir=dn.next()).done);Ht=!0){var Cr=ir.value;Cr<128&&ae.push(P(Cr))}}catch(Oe){On=!0,jn=Oe}finally{try{!Ht&&dn.return&&dn.return()}finally{if(On)throw jn}}var Vt=ae.length,sr=Vt;for(Vt&&ae.push(T);sr<Te;){var zr=p,Jn=!0,Ii=!1,qs=void 0;try{for(var Qr=ee[Symbol.iterator](),go;!(Jn=(go=Qr.next()).done);Jn=!0){var Mi=go.value;Mi>=Se&&Mi<zr&&(zr=Mi)}}catch(Oe){Ii=!0,qs=Oe}finally{try{!Jn&&Qr.return&&Qr.return()}finally{if(Ii)throw qs}}var Li=sr+1;zr-Se>O((p-ot)/Li)&&$("overflow"),ot+=(zr-Se)*Li,Se=zr;var zo=!0,Ia=!1,Ws=void 0;try{for(var Ql=ee[Symbol.iterator](),dd;!(zo=(dd=Ql.next()).done);zo=!0){var Y=dd.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,le=m-fe;ae.push(P(D(fe+ge%le,0))),se=O(ge/le)}ae.push(P(D(se,0))),St=U(ot,Li,sr==Vt),ot=0,++sr}}}catch(Oe){Ia=!0,Ws=Oe}finally{try{!zo&&Ql.return&&Ql.return()}finally{if(Ia)throw Ws}}++ot,++Se}return ae.join("")},H=function(ee){return L(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:z},decode:W,encode:j,toASCII:G,toUnicode:H},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Te=oe.length;ae<Te;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Te-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Te-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Ht=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(St&63)<<6|Ht&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Te){var Se=he(Te);return Se.match(ee.UNRESERVED)?Se:Te}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Te=d(ae,2),Se=Te[1];return Se?Se.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Te=d(ae,3),Se=Te[1],ot=Te[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),Ht=d(St,2),On=Ht[0],jn=Ht[1],dn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),Cr=ee.IPV4ADDRESS.test(ir[ir.length-1]),Vt=Cr?7:8,sr=ir.length-Vt,zr=Array(Vt),Jn=0;Jn<Vt;++Jn)zr[Jn]=dn[Jn]||ir[sr+Jn]||"";Cr&&(zr[Vt-1]=be(zr[Vt-1],ee));var Ii=zr.reduce(function(Li,zo,Ia){if(!zo||zo==="0"){var Ws=Li[Li.length-1];Ws&&Ws.index+Ws.length===Ia?Ws.length++:Li.push({index:Ia,length:1})}return Li},[]),qs=Ii.sort(function(Li,zo){return zo.length-Li.length})[0],Qr=void 0;if(qs&&qs.length>1){var go=zr.slice(0,qs.index),Mi=zr.slice(qs.index+qs.length);Qr=go.join(":")+"::"+Mi.join(":")}else Qr=zr.join(":");return ot&&(Qr+="%"+ot),Qr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Te=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ke(be(ae.host,Te),Te)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Te.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Te);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Te=[];return oe.userinfo!==void 0&&(Te.push(oe.userinfo),Te.push("@")),oe.host!==void 0&&Te.push(Ke(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Te.push(":"),Te.push(String(oe.port))),Te.length?Te.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Te=ae[0];oe=oe.slice(Te.length),ee.push(Te)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function me(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Te=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Ht){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Ht}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Te.push(oe.scheme),Te.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Te.push("//"),Te.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Te.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Te.push(St)}return oe.query!==void 0&&(Te.push("?"),Te.push(oe.query)),oe.fragment!==void 0&&(Te.push("#"),Te.push(oe.fragment)),Te.join("")}function dt(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Se={};return Te||(oe=it(me(oe,ae),ae),ee=it(me(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=We(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Te=u({scheme:"null"},ae);return me(dt(it(oe,Te),it(ee,Te),Te,!0),Te)}function pe(oe,ee){return typeof oe=="string"?oe=me(it(oe,ee),ee):s(oe)==="object"&&(oe=it(me(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=me(it(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof ee=="string"?ee=me(it(ee,ae),ae):s(ee)==="object"&&(ee=me(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Te=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Te?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Tr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Te=ee;return Te.secure=Tr(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function(ee,ae){if((ee.port===(Tr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Te=ee.resourceName.split("?"),Se=d(Te,2),ot=Se[0],St=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},pn={},Sn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),Uo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Oi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Tn=r(Oi,'[\\"\\\\]'),$i="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ar=new RegExp(Sn,"g"),ds=new RegExp(rr,"g"),sp=new RegExp(r("[^]",Uo,"[\\.]",'[\\"]',Tn),"g"),ol=new RegExp(r("[^]",Sn,$i),"g"),fd=ol;function Er(oe){var ee=he(oe);return ee.match(Ar)?ee:oe}var Ci={scheme:"mailto",parse:function(ee,ae){var Te=ee,Se=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var ot=!1,St={},Ht=Te.query.split("&"),On=0,jn=Ht.length;On<jn;++On){var dn=Ht[On].split("=");switch(dn[0]){case"to":for(var ir=dn[1].split(","),Cr=0,Vt=ir.length;Cr<Vt;++Cr)Se.push(ir[Cr]);break;case"subject":Te.subject=ut(dn[1],ae);break;case"body":Te.body=ut(dn[1],ae);break;default:ot=!0,St[ut(dn[0],ae)]=ut(dn[1],ae);break}}ot&&(Te.headers=St)}Te.query=void 0;for(var sr=0,zr=Se.length;sr<zr;++sr){var Jn=Se[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(Ii){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ii}Se[sr]=Jn.join("@")}return Te},serialize:function(ee,ae){var Te=ee,Se=a(ee.to);if(Se){for(var ot=0,St=Se.length;ot<St;++ot){var Ht=String(Se[ot]),On=Ht.lastIndexOf("@"),jn=Ht.slice(0,On).replace(ds,Er).replace(ds,o).replace(sp,de),dn=Ht.slice(On+1);try{dn=ae.iri?ne.toUnicode(dn):ne.toASCII(ut(dn,ae).toLowerCase())}catch(sr){Te.error=Te.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[ot]=jn+"@"+dn}Te.path=Se.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Cr=[];for(var Vt in ir)ir[Vt]!==pn[Vt]&&Cr.push(Vt.replace(ds,Er).replace(ds,o).replace(ol,de)+"="+ir[Vt].replace(ds,Er).replace(ds,o).replace(fd,de));return Cr.length&&(Te.query=Cr.join("&")),Te}},Xr=/^([^\:]+)\:(.*)/,uu={scheme:"urn",parse:function(ee,ae){var Te=ee.path&&ee.path.match(Xr),Se=ee;if(Te){var ot=ae.scheme||Se.scheme||"urn",St=Te[1].toLowerCase(),Ht=Te[2],On=ot+":"+(ae.nid||St),jn=ce[On];Se.nid=St,Se.nss=Ht,Se.path=void 0,jn&&(Se=jn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Te=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Te+":"+(ae.nid||Se),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Ht=ee,On=ee.nss;return Ht.path=(Se||ae.nid)+":"+On,Ht}},Aa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ca={scheme:"urn:uuid",parse:function(ee,ae){var Te=ee;return Te.uuid=Te.nss,Te.nss=void 0,!ae.tolerant&&(!Te.uuid||!Te.uuid.match(Aa))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function(ee,ae){var Te=ee;return Te.nss=(ee.uuid||"").toLowerCase(),Te}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ci.scheme]=Ci,ce[uu.scheme]=uu,ce[Ca.scheme]=Ca,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=me,n.resolveComponents=dt,n.resolve=vt,n.normalize=pe,n.equal=Ce,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(Yz,Yz.exports);var yAt=Yz.exports;Object.defineProperty(_Q,"__esModule",{value:!0});const eRe=yAt;eRe.code='require("ajv/dist/runtime/uri").default';_Q.default=eRe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=$f;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Ak,i=mS,s=Kv,o=Cu,a=Pn,u=Co,l=Rs,c=wt,f=gAt,d=_Q,h=(D,U)=>new RegExp(D,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var U,W,j,H,G,ne,ce,de,he,ye,Ie,be,Ke,Ue,yt,it,_e,ke,ze,ct,Ot,We,me,dt,vt;const pe=D.strict,Ce=(U=D.code)===null||U===void 0?void 0:U.optimize,He=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(H=D.uriResolver)!==null&&H!==void 0?H:d.default;return{strictSchema:(ne=(G=D.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=D.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=D.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ye!==void 0?ye:"log",strictTuples:(be=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&be!==void 0?be:"log",strictRequired:(Ue=(Ke=D.strictRequired)!==null&&Ke!==void 0?Ke:pe)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(yt=D.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=D.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=D.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=D.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(We=D.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(me=D.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(dt=D.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(vt=D.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...b(U)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(U.logger);const H=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,U,"NOT SUPPORTED"),E.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=I.call(this),U.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&C.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),S.call(this),U.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:j}=this.opts;let H=f;j==="id"&&(H={...f},H.id=H.$id,delete H.$id),W&&U&&this.addMetaSchema(H,H[j],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let j;if(typeof U=="string"){if(j=this.getSchema(U),!j)throw new Error(`no schema with key or ref "${U}"`)}else j=this.compile(U);const H=j(W);return"$async"in j||(this.errors=j.errors),H}compile(U,W){const j=this._addSchema(U,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return H.call(this,U,W);async function H(ye,Ie){await G.call(this,ye.$schema);const be=this._addSchema(ye,Ie);return be.validate||ne.call(this,be)}async function G(ye){ye&&!this.getSchema(ye)&&await H.call(this,{$ref:ye},!0)}async function ne(ye){try{return this._compileSchemaEnv(ye)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ye)}}function ce({missingSchema:ye,missingRef:Ie}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ie} cannot be resolved`)}async function de(ye){const Ie=await he.call(this,ye);this.refs[ye]||await G.call(this,Ie.$schema),this.refs[ye]||this.addSchema(Ie,ye,W)}async function he(ye){const Ie=this._loading[ye];if(Ie)return Ie;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(U,W,j,H=this.opts.validateSchema){if(Array.isArray(U)){for(const ne of U)this.addSchema(ne,void 0,j,H);return this}let G;if(typeof U=="object"){const{schemaId:ne}=this.opts;if(G=U[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(U,j,W,H,!0),this}addMetaSchema(U,W,j=this.opts.validateSchema){return this.addSchema(U,W,!0,j),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let j;if(j=U.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(j,U);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(U){let W;for(;typeof(W=T.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:j}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,H,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let j=U[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let j;if(typeof U=="string")j=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof U=="object"&&W===void 0){if(W=U,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const H={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,H.type.length===0?G=>F.call(this,G,H):G=>H.type.forEach(ne=>F.call(this,G,H,ne))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const j of W.rules){const H=j.rules.findIndex(G=>G.keyword===U);H>=0&&j.rules.splice(H,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!U||U.length===0?"No errors":U.map(H=>`${j}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(U,W){const j=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const H of W){const G=H.split("/").slice(1);let ne=U;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ne[ce];he&&ye&&(ne[ce]=q(ye))}}return U}_removeAllSchemas(U,W){for(const j in U){const H=U[j];(!W||W.test(j))&&(typeof H=="string"?delete U[j]:H&&!H.meta&&(this._cache.delete(H.schema),delete U[j]))}}_addSchema(U,W,j,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof U=="object")ne=U[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(U);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,U,j);return de=new o.SchemaEnv({schema:U,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),H&&this.validateSchema(U,!0),de}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,U,W,j="error"){for(const H in D){const G=H;G in U&&this.logger[j](`${W}: option ${H}. ${D[G]}`)}}function T(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function S(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const U in D)this.addSchema(D[U],U)}function A(){for(const D in this.opts.formats){const U=this.opts.formats[D];U&&this.addFormat(D,U)}}function C(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in D){const W=D[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function I(){const D={...this.opts};for(const U of p)delete D[U];return D}const N={log(){},warn(){},error(){}};function O(D){if(D===!1)return N;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function $(D,U){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,U,W){var j;const H=U==null?void 0:U.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=H?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[D]=!0,!U)return;const ce={keyword:D,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?L.call(this,ne,ce,U.before):ne.rules.push(ce),G.all[D]=ce,(j=U.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function L(D,U,W){const j=D.rules.findIndex(H=>H.keyword===W);j>=0?D.rules.splice(j,0,U):(D.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:U}=D;U!==void 0&&(D.$data&&this.opts.$data&&(U=q(U)),D.validateSchema=this.compile(U,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function q(D){return{anyOf:[D,z]}}})(Eke);var wQ={},EQ={},xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const vAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};xQ.default=vAt;var Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.callRef=Xv.getValidate=void 0;const bAt=mS,Mfe=kn,gu=Pn,x_=Gh,Lfe=Cu,BN=wt,_At={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Lfe.resolveRef.call(u,l,i,n);if(c===void 0)throw new bAt.default(r.opts.uriResolver,i,n);if(c instanceof Lfe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return pD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return pD(e,(0,gu._)`${p}.validate`,l,l.$async)}function d(p){const m=tRe(e,p);pD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,gu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:gu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function tRe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,gu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Xv.getValidate=tRe;function pD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?x_.default.this:gu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,gu._)`await ${(0,Mfe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,gu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Mfe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,gu._)`${p}.errors`;i.assign(x_.default.vErrors,(0,gu._)`${x_.default.vErrors} === null ? ${m} : ${x_.default.vErrors}.concat(${m})`),i.assign(x_.default.errors,(0,gu._)`${x_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=BN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,gu._)`${p}.evaluated.props`);s.props=BN.mergeEvaluated.props(i,y,s.props,gu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=BN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,gu._)`${p}.evaluated.items`);s.items=BN.mergeEvaluated.items(i,y,s.items,gu.Name)}}}Xv.callRef=pD;Xv.default=_At;Object.defineProperty(EQ,"__esModule",{value:!0});const wAt=xQ,EAt=Xv,xAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",wAt.default,EAt.default];EQ.default=xAt;var SQ={},TQ={};Object.defineProperty(TQ,"__esModule",{value:!0});const g$=Pn,mg=g$.operators,y$={maximum:{okStr:"<=",ok:mg.LTE,fail:mg.GT},minimum:{okStr:">=",ok:mg.GTE,fail:mg.LT},exclusiveMaximum:{okStr:"<",ok:mg.LT,fail:mg.GTE},exclusiveMinimum:{okStr:">",ok:mg.GT,fail:mg.LTE}},SAt={message:({keyword:e,schemaCode:t})=>(0,g$.str)`must be ${y$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,g$._)`{comparison: ${y$[e].okStr}, limit: ${t}}`},TAt={keyword:Object.keys(y$),type:"number",schemaType:"number",$data:!0,error:SAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,g$._)`${n} ${y$[t].fail} ${r} || isNaN(${n})`)}};TQ.default=TAt;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0});const bA=Pn,AAt={message:({schemaCode:e})=>(0,bA.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,bA._)`{multipleOf: ${e}}`},CAt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:AAt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,bA._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,bA._)`${o} !== parseInt(${o})`;e.fail$data((0,bA._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};AQ.default=CAt;var CQ={},IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});function nRe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}IQ.default=nRe;nRe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(CQ,"__esModule",{value:!0});const F1=Pn,IAt=wt,kAt=IQ,RAt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,F1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,F1._)`{limit: ${e}}`},NAt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:RAt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?F1.operators.GT:F1.operators.LT,o=i.opts.unicode===!1?(0,F1._)`${n}.length`:(0,F1._)`${(0,IAt.useFunc)(e.gen,kAt.default)}(${n})`;e.fail$data((0,F1._)`${o} ${s} ${r}`)}};CQ.default=NAt;var kQ={};Object.defineProperty(kQ,"__esModule",{value:!0});const PAt=kn,v$=Pn,DAt={message:({schemaCode:e})=>(0,v$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,v$._)`{pattern: ${e}}`},OAt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:DAt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,v$._)`(new RegExp(${i}, ${o}))`:(0,PAt.usePattern)(e,r);e.fail$data((0,v$._)`!${a}.test(${t})`)}};kQ.default=OAt;var RQ={};Object.defineProperty(RQ,"__esModule",{value:!0});const _A=Pn,$At={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,_A.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,_A._)`{limit: ${e}}`},MAt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:$At,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?_A.operators.GT:_A.operators.LT;e.fail$data((0,_A._)`Object.keys(${n}).length ${i} ${r}`)}};RQ.default=MAt;var NQ={};Object.defineProperty(NQ,"__esModule",{value:!0});const ST=kn,wA=Pn,LAt=wt,FAt={message:({params:{missingProperty:e}})=>(0,wA.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,wA._)`{missingProperty: ${e}}`},jAt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:FAt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,LAt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(wA.nil,f);else for(const h of n)(0,ST.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,ST.checkMissingProp)(e,n,h)),(0,ST.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,ST.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,ST.propertyInData)(t,i,h,a.ownProperties)),t.if((0,wA.not)(p),()=>{e.error(),t.break()})},wA.nil)}}};NQ.default=jAt;var PQ={};Object.defineProperty(PQ,"__esModule",{value:!0});const EA=Pn,BAt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,EA.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,EA._)`{limit: ${e}}`},UAt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:BAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?EA.operators.GT:EA.operators.LT;e.fail$data((0,EA._)`${n}.length ${i} ${r}`)}};PQ.default=UAt;var DQ={},Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});const rRe=RY;rRe.code='require("ajv/dist/runtime/equal").default';Ck.default=rRe;Object.defineProperty(DQ,"__esModule",{value:!0});const Q8=Rs,wo=Pn,zAt=wt,VAt=Ck,HAt={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},qAt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:HAt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Q8.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Q8.checkDataTypes)(l,g,a.opts.strictNumbers,Q8.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,zAt.useFunc)(t,VAt.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};DQ.default=qAt;var OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});const Kz=Pn,WAt=wt,GAt=Ck,YAt={message:"must be equal to constant",params:({schemaCode:e})=>(0,Kz._)`{allowedValue: ${e}}`},KAt={keyword:"const",$data:!0,error:YAt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,Kz._)`!${(0,WAt.useFunc)(t,GAt.default)}(${n}, ${i})`):e.fail((0,Kz._)`${s} !== ${n}`)}};OQ.default=KAt;var $Q={};Object.defineProperty($Q,"__esModule",{value:!0});const b2=Pn,XAt=wt,QAt=Ck,JAt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,b2._)`{allowedValues: ${e}}`},ZAt={keyword:"enum",schemaType:"array",$data:!0,error:JAt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,XAt.useFunc)(t,QAt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,b2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,b2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,b2._)`${l()}(${n}, ${h}[${p}])`:(0,b2._)`${n} === ${m}`}}};$Q.default=ZAt;Object.defineProperty(SQ,"__esModule",{value:!0});const eCt=TQ,tCt=AQ,nCt=CQ,rCt=kQ,iCt=RQ,sCt=NQ,oCt=PQ,aCt=DQ,uCt=OQ,lCt=$Q,cCt=[eCt.default,tCt.default,nCt.default,rCt.default,iCt.default,sCt.default,oCt.default,aCt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},uCt.default,lCt.default];SQ.default=cCt;var MQ={},gS={};Object.defineProperty(gS,"__esModule",{value:!0});gS.validateAdditionalItems=void 0;const j1=Pn,Xz=wt,fCt={message:({params:{len:e}})=>(0,j1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,j1._)`{limit: ${e}}`},dCt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:fCt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Xz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}iRe(e,r)}};function iRe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,j1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,j1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,Xz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,j1._)`${a} <= ${t.length}`);n.if((0,j1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:Xz.Type.Num},l),o.allErrors||n.if((0,j1.not)(l),()=>n.break())})}}gS.validateAdditionalItems=iRe;gS.default=dCt;var LQ={},yS={};Object.defineProperty(yS,"__esModule",{value:!0});yS.validateTuple=void 0;const Ffe=Pn,mD=wt,hCt=kn,pCt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return sRe(e,"additionalItems",t);n.items=!0,!(0,mD.alwaysValidSchema)(n,t)&&e.ok((0,hCt.validateArray)(e))}};function sRe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=mD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Ffe._)`${s}.length`);n.forEach((f,d)=>{(0,mD.alwaysValidSchema)(a,f)||(r.if((0,Ffe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,mD.checkStrictMode)(a,g,d.strictTuples)}}}yS.validateTuple=sRe;yS.default=pCt;Object.defineProperty(LQ,"__esModule",{value:!0});const mCt=yS,gCt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,mCt.validateTuple)(e,"items")};LQ.default=gCt;var FQ={};Object.defineProperty(FQ,"__esModule",{value:!0});const jfe=Pn,yCt=wt,vCt=kn,bCt=gS,_Ct={message:({params:{len:e}})=>(0,jfe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,jfe._)`{limit: ${e}}`},wCt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:_Ct,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,yCt.alwaysValidSchema)(r,t)&&(i?(0,bCt.validateAdditionalItems)(e,i):e.ok((0,vCt.validateArray)(e)))}};FQ.default=wCt;var jQ={};Object.defineProperty(jQ,"__esModule",{value:!0});const uc=Pn,UN=wt,ECt={message:({params:{min:e,max:t}})=>t===void 0?(0,uc.str)`must contain at least ${e} valid item(s)`:(0,uc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,uc._)`{minContains: ${e}}`:(0,uc._)`{minContains: ${e}, maxContains: ${t}}`},xCt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ECt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,uc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,UN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,UN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,UN.alwaysValidSchema)(s,n)){let m=(0,uc._)`${c} >= ${o}`;a!==void 0&&(m=(0,uc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,uc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:UN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,uc._)`${m}++`),a===void 0?t.if((0,uc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,uc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,uc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};jQ.default=xCt;var oRe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=wt,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(oRe);var BQ={};Object.defineProperty(BQ,"__esModule",{value:!0});const aRe=Pn,SCt=wt,TCt={message:"property name must be valid",params:({params:e})=>(0,aRe._)`{propertyName: ${e.propertyName}}`},ACt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:TCt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,SCt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,aRe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};BQ.default=ACt;var K6={};Object.defineProperty(K6,"__esModule",{value:!0});const zN=kn,rf=Pn,CCt=Gh,VN=wt,ICt={message:"must NOT have additional properties",params:({params:e})=>(0,rf._)`{additionalProperty: ${e.additionalProperty}}`},kCt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ICt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,VN.alwaysValidSchema)(o,n))return;const l=(0,zN.allSchemaProperties)(r.properties),c=(0,zN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,rf._)`${s} === ${CCt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,VN.schemaRefOrVal)(o,r.properties,"properties");y=(0,zN.isOwnProperty)(t,v,g)}else l.length?y=(0,rf.or)(...l.map(v=>(0,rf._)`${g} === ${v}`)):y=rf.nil;return c.length&&(y=(0,rf.or)(y,...c.map(v=>(0,rf._)`${(0,zN.usePattern)(e,v)}.test(${g})`))),(0,rf.not)(y)}function h(g){t.code((0,rf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,VN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,rf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,rf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:VN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};K6.default=kCt;var UQ={};Object.defineProperty(UQ,"__esModule",{value:!0});const RCt=$f,Bfe=kn,J8=wt,Ufe=K6,NCt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Ufe.default.code(new RCt.KeywordCxt(s,Ufe.default,"additionalProperties"));const o=(0,Bfe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=J8.mergeEvaluated.props(t,(0,J8.toHash)(o),s.props));const a=o.filter(f=>!(0,J8.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Bfe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};UQ.default=NCt;var zQ={};Object.defineProperty(zQ,"__esModule",{value:!0});const zfe=kn,HN=Pn,Vfe=wt,Hfe=wt,PCt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,zfe.allSchemaProperties)(n),u=a.filter(m=>(0,Vfe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof HN.Name)&&(s.props=(0,Hfe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Vfe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,HN._)`${(0,zfe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Hfe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,HN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,HN.not)(c),()=>t.break())})})}}};zQ.default=PCt;var VQ={};Object.defineProperty(VQ,"__esModule",{value:!0});const DCt=wt,OCt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,DCt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};VQ.default=OCt;var HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});const $Ct=kn,MCt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:$Ct.validateUnion,error:{message:"must match a schema in anyOf"}};HQ.default=MCt;var qQ={};Object.defineProperty(qQ,"__esModule",{value:!0});const gD=Pn,LCt=wt,FCt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,gD._)`{passingSchemas: ${e.passing}}`},jCt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:FCt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,LCt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,gD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,gD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,gD.Name)})})}}};qQ.default=jCt;var WQ={};Object.defineProperty(WQ,"__esModule",{value:!0});const BCt=wt,UCt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,BCt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};WQ.default=UCt;var GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const b$=Pn,uRe=wt,zCt={message:({params:e})=>(0,b$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,b$._)`{failingKeyword: ${e.ifClause}}`},VCt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:zCt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,uRe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=qfe(r,"then"),s=qfe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,b$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,b$._)`${c}`):e.setParams({ifClause:c})}}}};function qfe(e,t){const n=e.schema[t];return n!==void 0&&!(0,uRe.alwaysValidSchema)(e,n)}GQ.default=VCt;var YQ={};Object.defineProperty(YQ,"__esModule",{value:!0});const HCt=wt,qCt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,HCt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};YQ.default=qCt;Object.defineProperty(MQ,"__esModule",{value:!0});const WCt=gS,GCt=LQ,YCt=yS,KCt=FQ,XCt=jQ,QCt=oRe,JCt=BQ,ZCt=K6,eIt=UQ,tIt=zQ,nIt=VQ,rIt=HQ,iIt=qQ,sIt=WQ,oIt=GQ,aIt=YQ;function uIt(e=!1){const t=[nIt.default,rIt.default,iIt.default,sIt.default,oIt.default,aIt.default,JCt.default,ZCt.default,QCt.default,eIt.default,tIt.default];return e?t.push(GCt.default,KCt.default):t.push(WCt.default,YCt.default),t.push(XCt.default),t}MQ.default=uIt;var KQ={},XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const es=Pn,lIt={message:({schemaCode:e})=>(0,es.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,es._)`{format: ${e}}`},cIt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:lIt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,es._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,es._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,es._)`${m}.type || "string"`).assign(y,(0,es._)`${m}.validate`),()=>n.assign(g,(0,es._)`"string"`).assign(y,m)),e.fail$data((0,es.or)(v(),b()));function v(){return u.strictSchema===!1?es.nil:(0,es._)`${o} && !${y}`}function b(){const w=c.$async?(0,es._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,es._)`${y}(${r})`,E=(0,es._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,es._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const T=E instanceof RegExp?(0,es.regexpCode)(E):u.code.formats?(0,es._)`${u.code.formats}${(0,es.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,es._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,es._)`await ${y}(${r})`}return typeof g=="function"?(0,es._)`${y}(${r})`:(0,es._)`${y}.test(${r})`}}}};XQ.default=cIt;Object.defineProperty(KQ,"__esModule",{value:!0});const fIt=XQ,dIt=[fIt.default];KQ.default=dIt;var KE={};Object.defineProperty(KE,"__esModule",{value:!0});KE.contentVocabulary=KE.metadataVocabulary=void 0;KE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];KE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(wQ,"__esModule",{value:!0});const hIt=EQ,pIt=SQ,mIt=MQ,gIt=KQ,Wfe=KE,yIt=[hIt.default,pIt.default,(0,mIt.default)(),gIt.default,Wfe.metadataVocabulary,Wfe.contentVocabulary];wQ.default=yIt;var QQ={},X6={};Object.defineProperty(X6,"__esModule",{value:!0});X6.DiscrError=void 0;var Gfe;(function(e){e.Tag="tag",e.Mapping="mapping"})(Gfe||(X6.DiscrError=Gfe={}));Object.defineProperty(QQ,"__esModule",{value:!0});const H_=Pn,Qz=X6,Yfe=Cu,vIt=mS,bIt=wt,_It={message:({params:{discrError:e,tagName:t}})=>e===Qz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,H_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},wIt={keyword:"discriminator",type:"object",schemaType:"object",error:_It,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,H_._)`${n}${(0,H_.getProperty)(a)}`);t.if((0,H_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:Qz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,H_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:Qz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,H_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,bIt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=Yfe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof Yfe.SchemaEnv&&(E=E.schema),E===void 0)throw new vIt.default(s.opts.uriResolver,s.baseId,S)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const T of w.enum)b(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};QQ.default=wIt;const EIt="http://json-schema.org/draft-07/schema#",xIt="http://json-schema.org/draft-07/schema#",SIt="Core schema meta-schema",TIt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},AIt=["object","boolean"],CIt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},IIt={$schema:EIt,$id:xIt,title:SIt,definitions:TIt,type:AIt,properties:CIt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Eke,r=wQ,i=QQ,s=IIt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=$f;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Ak;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=mS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Vz,Vz.exports);var kIt=Vz.exports;const lRe=Wl(kIt),RIt="#/definitions/StudyConfig",NIt="http://json-schema.org/draft-07/schema#",PIt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},DIt={$ref:RIt,$schema:NIt,definitions:PIt},OIt="#/definitions/GlobalConfig",$It="http://json-schema.org/draft-07/schema#",MIt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},LIt={$ref:OIt,$schema:$It,definitions:MIt},cRe=new lRe;cRe.addSchema(LIt);const Kfe=cRe.getSchema("#/definitions/GlobalConfig"),fRe=new lRe;fRe.addSchema(DIt);const Z8=fRe.getSchema("#/definitions/StudyConfig");function FIt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Q6(e){return e.baseComponent!==void 0}function jIt(e){const t=lQ.parse(e),n=Kfe(t),r=FIt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Kfe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function dRe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):dRe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function BIt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;Q6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=DEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return dRe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function UIt(e){let t=!1,n;try{n=lQ.parse(e),t=Z8(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=BIt(n);r=[...Z8.errors||[],...s],i=o}else r=Z8.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function hRe(){const e=Gm(),{setAlertModal:t}=Uh(),n=zh();R.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Xfe=Object.prototype.hasOwnProperty;function Qfe(e,t,n){for(n of e.keys())if(xA(n,t))return n}function xA(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&xA(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Qfe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Qfe(t,i),!i)||!xA(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Xfe.call(e,n)&&++r&&!Xfe.call(t,n)||!(n in t)||!xA(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function zIt(e){var t=R.useRef(e),n=R.useRef(0);return xA(e,t.current)||(t.current=e,n.current+=1),R.useMemo(function(){return t.current},[n.current])}function VIt(e,t){return R.useEffect(e,zIt(t))}const HIt=(e,t=null)=>{const[n,r]=R.useState("idle"),[i,s]=R.useState(null),[o,a]=R.useState(null),u=R.useRef(),l=R.useRef(!1);R.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=R.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return VIt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Jfe=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],pRe=["participantId","trialId","trialOrder","responseId"];function JQ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function qIt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(bm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=Q6(u)&&u.baseComponent&&n.baseComponents?IY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function WIt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...pRe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await qIt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function GIt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=R.useState([...Jfe].filter(h=>h!=="meta")),a=As(),{value:u,status:l,error:c}=HIt(WIt,[s,r,a.storageEngine,i]),f=R.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);JQ(h,n)},[n,u]),d=R.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(ws,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(CG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Jfe],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(KKe,{}),variant:"filled"}),_.jsx(Il,{h:"md"}),_.jsxs(ve,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(An,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:u.header.map(h=>_.jsx(An.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Dt,{direction:"row",justify:"space-between",align:"center",children:[h,!pRe.includes(h)&&_.jsx(O0,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(eY,{size:16})})]})},h))})}),_.jsx(An.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(An.Tr,{children:u.header.map(m=>_.jsx(An.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx($x,{variant:"light",children:c.message}):null,_.jsx(Ol,{visible:l==="pending"||l==="idle"})]}),_.jsx(Il,{h:"sm"}),_.jsx(Dt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(et,{children:d})}),_.jsx(Il,{h:"md"}),_.jsxs(xs,{justify:"right",children:[_.jsx(Rn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Rn,{leftSection:_.jsx(j_e,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function YIt(){const e=L0(),{storageEngine:t}=As(),{answers:n}=Hc(v=>v),[r,i]=R.useState(!1);R.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),hRe();const[s,o]=R.useState(),[a,u]=R.useState(""),l=e.studyMetadata.title.replace(" ","_");R.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=R.useCallback(async()=>{JQ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=R.useState(Math.floor(d/1e3));R.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Pb(),[g,y]=R.useState(!1);return R.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(mm,{style:{height:"100%"},children:_.jsx(Dt,{direction:"column",children:r||!g?_.jsx(et,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ka,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(et,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Il,{h:"lg"}),_.jsx(mm,{children:_.jsx(zm,{color:"blue"})})]})})})}function KIt(){var d;const e=L0(),t=Gm(),n=Ny()||"Notfound",r=e.components[n],i=kY();hRe();const{storageEngine:s}=As(),o=zh(),{setAlertModal:a}=Uh();if(R.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(YIt,{});if(n==="Notfound")return _.jsx(Lv,{email:e.uiConfig.contactEmail});const u=Q6(r)&&e.baseComponents?IY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Ka,{text:l}),_.jsx(UO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(R.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(XSt,{currentConfig:u}),u.type==="website"&&_.jsx(tot,{currentConfig:u}),u.type==="image"&&_.jsx(rot,{currentConfig:u}),u.type==="react-component"&&_.jsx(KSt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Ka,{text:l}),_.jsx(UO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function Jz(e){const[t]=QG();return _.jsx(XG,{...e,to:{pathname:e.to,search:t.toString()}})}function mRe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=mRe(o,t,n,r),r.includes(o.orderPath))break}return i}function gRe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=gRe(s,r)}}),n}function XIt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function QIt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Pb(),c=Wm(),f=Gm(),[d,{close:h,open:p}]=pv(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?mRe(n,e,r,a.orderPath):-1,{trialId:y}=gm(),v=y===e,b=s?f===g:f===`reviewer-${e}`,w=u?v:b,E=R.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return _.jsxs(ei,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(ei.Target,{children:_.jsx(ve,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(xL,{active:w,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(ve,{children:[i&&_.jsx(LKe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?_.jsx(et,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(et,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(ei.Dropdown,{onMouseLeave:h,children:_.jsx(et,{size:"sm",children:_.jsxs(ve,{children:[m.description&&_.jsxs(ve,{children:[_.jsx(et,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(et,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(et,{children:[_.jsx(et,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(et,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function _$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=p0(e.components);return n&&r&&(o=XIt(p0(e.components),p0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(QIt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?bm(c).length-gRe(u,c):0,d=bm(u);return _.jsx(xL,{label:_.jsxs(ve,{style:{opacity:f>0?1:.5},children:[_.jsx(et,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx($Ke,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(Xp,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(Xp,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(ve,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(_$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function yRe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Zfe({text:e}){return _.jsx(vs,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(M_e,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function JIt(){const{sequence:e,metadata:t}=Hc(f=>f),{toggleStudyBrowser:n}=Uh(),r=L0(),i=zh(),s=Pb(),o=R_e(`/${s}`),{storageEngine:a}=As(),u=R.useMemo(()=>{let f=p0(r.sequence);return f=AY(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=R.useState("participant");return _.jsxs(di.Aside,{p:"0",children:[_.jsx(di.Section,{children:_.jsxs(Dt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(et,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Rn,{variant:"light",leftSection:_.jsx(ZG,{size:14}),onClick:()=>yRe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Ty,{onClick:()=>i(n()),mt:1})]})}),_.jsx(di.Section,{grow:!0,component:dm,p:"xs",pt:0,children:_.jsxs(ts,{value:l,onChange:c,children:[_.jsx(ve,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(ts.List,{grow:!0,children:[_.jsxs(ts.Tab,{value:"participant",children:["Participant View",_.jsx(Zfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(ts.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Zfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(ts.Panel,{value:"participant",children:_.jsx(_$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(ts.Panel,{value:"allTrials",children:_.jsx(_$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function ZIt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Hc(E=>E),i=CY(),s=zh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Uh(),{storageEngine:u}=As(),l=Gm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=R.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Pb(),y=R_e(`/${g}`),v=R.useRef(null),[b,w]=R.useState(!1);return R.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(di.Header,{p:"md",children:_.jsxs(za,{mt:-7,align:"center",children:[_.jsx(za.Col,{span:4,children:_.jsxs(Dt,{align:"center",children:[_.jsx(Cy,{w:40,src:`${jh}${p}`,alt:"Study Logo"}),_.jsx(Il,{w:"md"}),_.jsx(xi,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(za.Col,{span:4,children:m&&_.jsx(Ux,{radius:"md",size:"lg",value:f})}),_.jsx(za.Col,{span:4,children:_.jsxs(xs,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(vs,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(Xp,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(Rn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(xu,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(xu.Target,{children:_.jsx(O0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(qKe,{})})}),_.jsxs(xu.Dropdown,{children:[e&&_.jsx(xu.Item,{leftSection:_.jsx(tXe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(xu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(XKe,{size:14}),children:"Contact"}),e&&_.jsx(xu.Item,{leftSection:_.jsx(ZG,{size:14}),onClick:()=>yRe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function vRe(e,t){var n;return Q6(e)&&t.baseComponents?IY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function ekt(){var u;const e=(u=L0())==null?void 0:u.uiConfig.sidebar,t=L0(),n=Ny(),r=t.components[n],i=R.useMemo(()=>r?vRe(r,t):null,[r,t]),s=kY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(di.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(di.Section,{bg:"gray.3",p:"md",children:_.jsxs(et,{c:"gray.9",children:[_.jsx(et,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ka,{text:o})]})}),_.jsx(di.Section,{p:"md",children:_.jsx(UO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(di.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(UO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function tkt(){const{showHelpText:e,config:t}=Hc(u=>u),n=zh(),{toggleShowHelpText:r}=Uh(),[i,s]=R.useState(""),[o,a]=R.useState(!0);return R.useEffect(()=>{async function u(){const l=await NY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(ws,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ka,{text:i}):_.jsx(Lv,{path:t.uiConfig.helpTextPath})})}function nkt(){const{alertModal:e}=Hc(o=>o),{setAlertModal:t}=Uh(),n=zh(),[r,i]=R.useState(e.show),s=R.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return R.useEffect(()=>i(e.show),[e.show]),_.jsx(ws,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs($x,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(OKe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(et,{my:"md",children:e.message}),_.jsx(xs,{w:"100%",justify:"end",children:_.jsx(Rn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function rkt(){const e=R.useRef([]),t=L0(),n=t.uiConfig.windowEventDebounceTime??100,r=Hc(d=>d.showStudyBrowser);R.useEffect(()=>{const d=bd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=bd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=bd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=bd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=bd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=bd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=bd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=bd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=bd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=As(),o=Pb(),[a,u]=R.useState(!1),[l,c]=R.useState(!1);R.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=R.useMemo(()=>a&&r,[a,r]);return _.jsx(jEe.Provider,{value:e,children:_.jsxs(di,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(ekt,{}),_.jsx(JIt,{}),_.jsx(ZIt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(tkt,{}),_.jsx(nkt,{}),_.jsx(di.Main,{children:_.jsx(bKe,{})})]})})}function ikt(e,t=!1){return typeof e=="number"?ede(e,t):ede(e.length,t).map(r=>r.map(i=>e[i]))}function ede(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function bRe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=bRe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function skt(e,t){const n=p0(e);return bRe(n,t,"root")}function _Re(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&_Re(s,t,i,o)})}function okt(e){const t=[];return _Re(e,t,"",0),t}function tde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return ikt(i.sort(()=>.5-Math.random()),!0)}function akt(e){const n=okt(e.sequence).map(s=>({[s]:tde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=skt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=tde(e,o))})}),i}var ukt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function lkt(e){const t=await(await fetch(`${jh}${e}`)).text();return UIt(t)}async function J6(e,t){const n=t.configsList.find(r=>U_e(r)===e);if(n){const r=t.configs[n];return await lkt(`${r.path}`)}return null}async function ckt(e){const t={},n=e.configsList.filter(i=>ukt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>J6(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function fkt({globalConfig:e}){const t=Pb(),[n,r]=R.useState(null),i=e.configsList.includes(t);R.useEffect(()=>{J6(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=R.useState([]),[a,u]=R.useState(null),{storageEngine:l}=As(),[c]=QG();R.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await akt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(T=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await _st(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(rkt,{}),children:[{path:"/",element:_.jsx(Jz,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(xi,{order:2,mb:8,children:"Error loading config"}),_.jsx(XU,{issues:n.errors,type:"error"})]}):_.jsx(KIt,{})}]}])}h()},[l,n,t,c]);const f=P_e(s);let d=null;return i?s.length===0?d=_.jsx(Ol,{visible:!0}):d=f&&a?_.jsx(FEe.Provider,{value:a,children:_.jsx(pit,{store:a.store,children:f})}):_.jsx(Lv,{}):d=_.jsx(Lv,{}),d}var nde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wRe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},dkt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ZQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(wRe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):dkt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new hkt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hkt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pkt=function(e){const t=wRe(e);return ZQ.encodeByteArray(t,!0)},w$=function(e){return pkt(e).replace(/\./g,"")},ERe=function(e){try{return ZQ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xRe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mkt=()=>xRe().__FIREBASE_DEFAULTS__,gkt=()=>{if(typeof process>"u"||typeof nde>"u")return;const e=nde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ykt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ERe(e[1]);return t&&JSON.parse(t)},Z6=()=>{try{return mkt()||gkt()||ykt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},SRe=e=>{var t,n;return(n=(t=Z6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},vkt=e=>{const t=SRe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},TRe=()=>{var e;return(e=Z6())===null||e===void 0?void 0:e.config},ARe=e=>{var t;return(t=Z6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bkt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[w$(JSON.stringify(n)),w$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _kt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())}function wkt(){var e;const t=(e=Z6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ekt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function xkt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Skt(){const e=Lo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Tkt(){return!wkt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eJ(){try{return typeof indexedDB=="object"}catch{return!1}}function Akt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ckt="FirebaseError";class Yh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ckt,Object.setPrototypeOf(this,Yh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vS.prototype.create)}}class vS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Ikt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Yh(i,a,r)}}function Ikt(e,t){return e.replace(kkt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const kkt=/\{\$([^}]+)}/g;function Rkt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function YC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(rde(s)&&rde(o)){if(!YC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nkt(e,t){const n=new Pkt(e,t);return n.subscribe.bind(n)}class Pkt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Dkt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=e9),i.error===void 0&&(i.error=e9),i.complete===void 0&&(i.complete=e9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dkt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function e9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Okt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $kt=1e3,Mkt=2,Lkt=4*60*60*1e3,Fkt=.5;function jkt(e,t=$kt,n=Mkt){const r=t*Math.pow(n,e),i=Math.round(Fkt*r*(Math.random()-.5)*2);return Math.min(Lkt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e){return e&&e._delegate?e._delegate:e}class Ah{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bkt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new GC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(zkt(t))try{this.getOrInitializeService({instanceIdentifier:k1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=k1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=k1){return this.instances.has(t)}getOptions(t=k1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ukt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=k1){return this.component?this.component.multipleInstances?t:k1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ukt(e){return e===k1?void 0:e}function zkt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vkt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Bkt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const Hkt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},qkt=Gn.INFO,Wkt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},Gkt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Wkt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class e4{constructor(t){this.name=t,this._logLevel=qkt,this._logHandler=Gkt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Hkt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const Ykt=(e,t)=>t.some(n=>e instanceof n);let ide,sde;function Kkt(){return ide||(ide=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xkt(){return sde||(sde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CRe=new WeakMap,Zz=new WeakMap,IRe=new WeakMap,t9=new WeakMap,tJ=new WeakMap;function Qkt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(_0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&CRe.set(n,e)}).catch(()=>{}),tJ.set(t,e),t}function Jkt(e){if(Zz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Zz.set(e,t)}let eV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||IRe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Zkt(e){eV=e(eV)}function eRt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(n9(this),t,...n);return IRe.set(r,t.sort?t.sort():[t]),_0(r)}:Xkt().includes(e)?function(...t){return e.apply(n9(this),t),_0(CRe.get(this))}:function(...t){return _0(e.apply(n9(this),t))}}function tRt(e){return typeof e=="function"?eRt(e):(e instanceof IDBTransaction&&Jkt(e),Ykt(e,Kkt())?new Proxy(e,eV):e)}function _0(e){if(e instanceof IDBRequest)return Qkt(e);if(t9.has(e))return t9.get(e);const t=tRt(e);return t!==e&&(t9.set(e,t),tJ.set(t,e)),t}const n9=e=>tJ.get(e);function nRt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=_0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_0(o.result),u.oldVersion,u.newVersion,_0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const rRt=["get","getKey","getAll","getAllKeys","count"],iRt=["put","add","delete","clear"],r9=new Map;function ode(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(r9.get(t))return r9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=iRt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rRt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return r9.set(t,s),s}Zkt(e=>({...e,get:(t,n,r)=>ode(t,n)||e.get(t,n,r),has:(t,n)=>!!ode(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sRt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oRt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oRt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const tV="@firebase/app",ade="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new e4("@firebase/app"),aRt="@firebase/app-compat",uRt="@firebase/analytics-compat",lRt="@firebase/analytics",cRt="@firebase/app-check-compat",fRt="@firebase/app-check",dRt="@firebase/auth",hRt="@firebase/auth-compat",pRt="@firebase/database",mRt="@firebase/database-compat",gRt="@firebase/functions",yRt="@firebase/functions-compat",vRt="@firebase/installations",bRt="@firebase/installations-compat",_Rt="@firebase/messaging",wRt="@firebase/messaging-compat",ERt="@firebase/performance",xRt="@firebase/performance-compat",SRt="@firebase/remote-config",TRt="@firebase/remote-config-compat",ARt="@firebase/storage",CRt="@firebase/storage-compat",IRt="@firebase/firestore",kRt="@firebase/vertexai-preview",RRt="@firebase/firestore-compat",NRt="firebase",PRt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="[DEFAULT]",DRt={[tV]:"fire-core",[aRt]:"fire-core-compat",[lRt]:"fire-analytics",[uRt]:"fire-analytics-compat",[fRt]:"fire-app-check",[cRt]:"fire-app-check-compat",[dRt]:"fire-auth",[hRt]:"fire-auth-compat",[pRt]:"fire-rtdb",[mRt]:"fire-rtdb-compat",[gRt]:"fire-fn",[yRt]:"fire-fn-compat",[vRt]:"fire-iid",[bRt]:"fire-iid-compat",[_Rt]:"fire-fcm",[wRt]:"fire-fcm-compat",[ERt]:"fire-perf",[xRt]:"fire-perf-compat",[SRt]:"fire-rc",[TRt]:"fire-rc-compat",[ARt]:"fire-gcs",[CRt]:"fire-gcs-compat",[IRt]:"fire-fst",[RRt]:"fire-fst-compat",[kRt]:"fire-vertex","fire-js":"fire-js",[NRt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=new Map,ORt=new Map,rV=new Map;function ude(e,t){try{e.container.addComponent(t)}catch(n){Qv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Nm(e){const t=e.name;if(rV.has(t))return Qv.debug(`There were multiple attempts to register component ${t}.`),!1;rV.set(t,e);for(const n of E$.values())ude(n,e);for(const n of ORt.values())ude(n,e);return!0}function bS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Rt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},w0=new vS("app","Firebase",$Rt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MRt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ah("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw w0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=PRt;function kRe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:nV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw w0.create("bad-app-name",{appName:String(i)});if(n||(n=TRe()),!n)throw w0.create("no-options");const s=E$.get(i);if(s){if(YC(n,s.options)&&YC(r,s.config))return s;throw w0.create("duplicate-app",{appName:i})}const o=new Vkt(i);for(const u of rV.values())o.addComponent(u);const a=new MRt(n,r,o);return E$.set(i,a),a}function nJ(e=nV){const t=E$.get(e);if(!t&&e===nV&&TRe())return kRe();if(!t)throw w0.create("no-app",{appName:e});return t}function Mf(e,t,n){var r;let i=(r=DRt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Qv.warn(a.join(" "));return}Nm(new Ah(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LRt="firebase-heartbeat-database",FRt=1,KC="firebase-heartbeat-store";let i9=null;function RRe(){return i9||(i9=nRt(LRt,FRt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(KC)}catch(n){console.warn(n)}}}}).catch(e=>{throw w0.create("idb-open",{originalErrorMessage:e.message})})),i9}async function jRt(e){try{const n=(await RRe()).transaction(KC),r=await n.objectStore(KC).get(NRe(e));return await n.done,r}catch(t){if(t instanceof Yh)Qv.warn(t.message);else{const n=w0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Qv.warn(n.message)}}}async function lde(e,t){try{const r=(await RRe()).transaction(KC,"readwrite");await r.objectStore(KC).put(t,NRe(e)),await r.done}catch(n){if(n instanceof Yh)Qv.warn(n.message);else{const r=w0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qv.warn(r.message)}}}function NRe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BRt=1024,URt=30*24*60*60*1e3;class zRt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HRt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cde();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=URt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cde(),{heartbeatsToSend:r,unsentEntries:i}=VRt(this._heartbeatsCache.heartbeats),s=w$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function cde(){return new Date().toISOString().substring(0,10)}function VRt(e,t=BRt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HRt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eJ()?Akt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jRt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return lde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function fde(e){return w$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qRt(e){Nm(new Ah("platform-logger",t=>new sRt(t),"PRIVATE")),Nm(new Ah("heartbeat",t=>new zRt(t),"PRIVATE")),Mf(tV,ade,e),Mf(tV,ade,"esm2017"),Mf("fire-js","")}qRt("");function PRe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WRt=PRe,DRe=new vS("auth","Firebase",PRe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=new e4("@firebase/auth");function GRt(e,...t){x$.logLevel<=Gn.WARN&&x$.warn(`Auth (${Fb}): ${e}`,...t)}function yD(e,...t){x$.logLevel<=Gn.ERROR&&x$.error(`Auth (${Fb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(e,...t){throw iJ(e,...t)}function Lf(e,...t){return iJ(e,...t)}function rJ(e,t,n){const r=Object.assign(Object.assign({},WRt()),{[t]:n});return new vS("auth","Firebase",r).create(t,{appName:e.name})}function E0(e){return rJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YRt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Ch(e,"argument-error"),rJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return DRe.create(e,...t)}function sn(e,t,...n){if(!e)throw iJ(t,...n)}function Vp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw yD(t),new Error(t)}function Pm(e,t){e||Vp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function KRt(){return dde()==="http:"||dde()==="https:"}function dde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XRt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KRt()||Ekt()||"connection"in navigator)?navigator.onLine:!0}function QRt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Pm(n>t,"Short delay should be less than long delay!"),this.isMobile=_kt()||xkt()}get(){return XRt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJ(e,t){Pm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ORe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JRt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZRt=new kk(3e4,6e4);function t4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _S(e,t,n,r,i={}){return $Re(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ik(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),ORe.fetch()(LRe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function $Re(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},JRt),t);try{const i=new eNt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw qN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw qN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw qN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rJ(e,c,l);Ch(e,c)}}catch(i){if(i instanceof Yh)throw i;Ch(e,"network-request-failed",{message:String(i)})}}async function MRe(e,t,n,r,i={}){const s=await _S(e,t,n,r,i);return"mfaPendingCredential"in s&&Ch(e,"multi-factor-auth-required",{_serverResponse:s}),s}function LRe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?sJ(e.config,i):`${e.config.apiScheme}://${i}`}class eNt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Lf(this.auth,"network-request-failed")),ZRt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Lf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tNt(e,t){return _S(e,"POST","/v1/accounts:delete",t)}async function FRe(e,t){return _S(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nNt(e,t=!1){const n=ii(e),r=await n.getIdToken(t),i=oJ(r);sn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:SA(s9(i.auth_time)),issuedAtTime:SA(s9(i.iat)),expirationTime:SA(s9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function s9(e){return Number(e)*1e3}function oJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return yD("JWT malformed, contained fewer than 3 sections"),null;try{const i=ERe(n);return i?JSON.parse(i):(yD("Failed to decode base64 JWT payload"),null)}catch(i){return yD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hde(e){const t=oJ(e);return sn(t,"internal-error"),sn(typeof t.exp<"u","internal-error"),sn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Yh&&rNt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function rNt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iNt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=SA(this.lastLoginAt),this.creationTime=SA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await XC(e,FRe(n,{idToken:r}));sn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?jRe(s.providerUserInfo):[],a=oNt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function sNt(e){const t=ii(e);await S$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oNt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function jRe(e){return e.map(t=>{var{providerId:n}=t,r=LI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aNt(e,t){const n=await $Re(e,{},async()=>{const r=Ik({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=LRe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ORe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uNt(e,t){return _S(e,"POST","/v2/accounts:revokeToken",t4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){sn(t.idToken,"internal-error"),sn(typeof t.idToken<"u","internal-error"),sn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):hde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){sn(t.length!==0,"internal-error");const n=hde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(sn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await aNt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Kw;return r&&(sn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(sn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(sn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Kw,this.toJSON())}_performRefresh(){return Vp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(e,t){sn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Hp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=LI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iNt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await XC(this,this.stsTokenManager.getToken(this.auth,t));return sn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return nNt(this,t)}reload(){return sNt(this)}_assign(t){this!==t&&(sn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Hp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await S$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qd(this.auth.app))return Promise.reject(E0(this.auth));const t=await this.getIdToken();return await XC(this,tNt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:S}=n;sn(b&&S,t,"internal-error");const A=Kw.fromJSON(this.name,S);sn(typeof b=="string",t,"internal-error"),gg(f,t.name),gg(d,t.name),sn(typeof w=="boolean",t,"internal-error"),sn(typeof E=="boolean",t,"internal-error"),gg(h,t.name),gg(p,t.name),gg(m,t.name),gg(g,t.name),gg(y,t.name),gg(v,t.name);const C=new Hp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(C.providerData=T.map(I=>Object.assign({},I))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new Kw;i.updateFromServerResponse(n);const s=new Hp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await S$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];sn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jRe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Kw;a.updateFromIdToken(r);const u=new Hp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pde=new Map;function qp(e){Pm(e instanceof Function,"Expected a class definition");let t=pde.get(e);return t?(Pm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pde.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BRe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}BRe.type="NONE";const mde=BRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e,t,n){return`firebase:${e}:${t}:${n}`}class Xw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=vD(this.userKey,i.apiKey,s),this.fullPersistenceKey=vD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Hp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Xw(qp(mde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||qp(mde);const o=vD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Hp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Xw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Xw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VRe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(URe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qRe(t))return"Blackberry";if(WRe(t))return"Webos";if(aJ(t))return"Safari";if((t.includes("chrome/")||zRe(t))&&!t.includes("edge/"))return"Chrome";if(HRe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function URe(e=Lo()){return/firefox\//i.test(e)}function aJ(e=Lo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function zRe(e=Lo()){return/crios\//i.test(e)}function VRe(e=Lo()){return/iemobile/i.test(e)}function HRe(e=Lo()){return/android/i.test(e)}function qRe(e=Lo()){return/blackberry/i.test(e)}function WRe(e=Lo()){return/webos/i.test(e)}function n4(e=Lo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lNt(e=Lo()){var t;return n4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cNt(){return Skt()&&document.documentMode===10}function GRe(e=Lo()){return n4(e)||HRe(e)||WRe(e)||qRe(e)||/windows phone/i.test(e)||VRe(e)}function fNt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YRe(e,t=[]){let n;switch(e){case"Browser":n=gde(Lo());break;case"Worker":n=`${gde(Lo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dNt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hNt(e,t={}){return _S(e,"GET","/v2/passwordPolicy",t4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pNt=6;class mNt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pNt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gNt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yde(this),this.idTokenSubscription=new yde(this),this.beforeStateQueue=new dNt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DRe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Xw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await FRe(this,{idToken:t}),r=await Hp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Qd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await S$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=QRt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Qd(this.app))return Promise.reject(E0(this));const n=t?ii(t):null;return n&&sn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&sn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Qd(this.app)?Promise.reject(E0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Qd(this.app)?Promise.reject(E0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await hNt(this),n=new mNt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new vS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uNt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qp(t)||this._popupRedirectResolver;sn(n,this,"argument-error"),this.redirectPersistenceManager=await Xw.create(this,[qp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(sn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YRe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&GRt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Rk(e){return ii(e)}class yde{constructor(t){this.auth=t,this.observer=null,this.addObserver=Nkt(n=>this.observer=n)}get next(){return sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yNt(e){uJ=e}function vNt(e){return uJ.loadJS(e)}function bNt(){return uJ.gapiScript}function _Nt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wNt(e,t){const n=bS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(YC(s,t??{}))return i;Ch(i,"already-initialized")}return n.initialize({options:t})}function ENt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function xNt(e,t,n){const r=Rk(e);sn(r._canInitEmulator,r,"emulator-config-failed"),sn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=KRe(t),{host:o,port:a}=SNt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),TNt()}function KRe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function SNt(e){const t=KRe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:vde(o)}}}function vde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function TNt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XRe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Vp("not implemented")}_getIdTokenResponse(t){return Vp("not implemented")}_linkToIdToken(t,n){return Vp("not implemented")}_getReauthenticationResolver(t){return Vp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(e,t){return MRe(e,"POST","/v1/accounts:signInWithIdp",t4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANt="http://localhost";class Jv extends XRe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Jv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ch("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=LI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Jv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Qw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Qw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Qw(t,n)}buildRequest(){const t={requestUri:ANt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ik(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk extends lJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Nk{constructor(){super("facebook.com")}static credential(t){return Jv._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fg.credential(t.oauthAccessToken)}catch{return null}}}Fg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Nk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Jv._fromParams({providerId:$p.PROVIDER_ID,signInMethod:$p.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return $p.credentialFromTaggedObject(t)}static credentialFromError(t){return $p.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $p.credential(n,r)}catch{return null}}}$p.GOOGLE_SIGN_IN_METHOD="google.com";$p.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends Nk{constructor(){super("github.com")}static credential(t){return Jv._fromParams({providerId:jg.PROVIDER_ID,signInMethod:jg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return jg.credentialFromTaggedObject(t)}static credentialFromError(t){return jg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return jg.credential(t.oauthAccessToken)}catch{return null}}}jg.GITHUB_SIGN_IN_METHOD="github.com";jg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Nk{constructor(){super("twitter.com")}static credential(t,n){return Jv._fromParams({providerId:Bg.PROVIDER_ID,signInMethod:Bg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Bg.credentialFromTaggedObject(t)}static credentialFromError(t){return Bg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Bg.credential(n,r)}catch{return null}}}Bg.TWITTER_SIGN_IN_METHOD="twitter.com";Bg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CNt(e,t){return MRe(e,"POST","/v1/accounts:signUp",t4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Hp._fromIdTokenResponse(t,r,i),o=bde(r);return new ty({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=bde(r);return new ty({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function bde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function INt(e){var t;if(Qd(e.app))return Promise.reject(E0(e));const n=Rk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ty({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await CNt(n,{returnSecureToken:!0}),i=await ty._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T$ extends Yh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,T$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new T$(t,n,r,i)}}function QRe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?T$._fromErrorAndOperation(e,s,t,r):s})}async function kNt(e,t,n=!1){const r=await XC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ty._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RNt(e,t,n=!1){const{auth:r}=e;if(Qd(r.app))return Promise.reject(E0(r));const i="reauthenticate";try{const s=await XC(e,QRe(r,i,t,e),n);sn(s.idToken,r,"internal-error");const o=oJ(s.idToken);sn(o,r,"internal-error");const{sub:a}=o;return sn(e.uid===a,r,"user-mismatch"),ty._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ch(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NNt(e,t,n=!1){if(Qd(e.app))return Promise.reject(E0(e));const r="signIn",i=await QRe(e,r,t),s=await ty._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function PNt(e,t,n,r){return ii(e).onIdTokenChanged(t,n,r)}function DNt(e,t,n){return ii(e).beforeAuthStateChanged(t,n)}function ONt(e,t,n,r){return ii(e).onAuthStateChanged(t,n,r)}function $Nt(e){return ii(e).signOut()}const A$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JRe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(A$,"1"),this.storage.removeItem(A$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MNt(){const e=Lo();return aJ(e)||n4(e)}const LNt=1e3,FNt=10;class ZRe extends JRe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=MNt()&&fNt(),this.fallbackToPolling=GRe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cNt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,FNt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},LNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ZRe.type="LOCAL";const jNt=ZRe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eNe extends JRe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}eNe.type="SESSION";const tNe=eNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BNt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new r4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await BNt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UNt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=cJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(){return window}function zNt(e){ch().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nNe(){return typeof ch().WorkerGlobalScope<"u"&&typeof ch().importScripts=="function"}async function VNt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HNt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function qNt(){return nNe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rNe="firebaseLocalStorageDb",WNt=1,C$="firebaseLocalStorage",iNe="fbase_key";class Pk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function i4(e,t){return e.transaction([C$],t?"readwrite":"readonly").objectStore(C$)}function GNt(){const e=indexedDB.deleteDatabase(rNe);return new Pk(e).toPromise()}function oV(){const e=indexedDB.open(rNe,WNt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(C$,{keyPath:iNe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(C$)?t(r):(r.close(),await GNt(),t(await oV()))})})}async function _de(e,t,n){const r=i4(e,!0).put({[iNe]:t,value:n});return new Pk(r).toPromise()}async function YNt(e,t){const n=i4(e,!1).get(t),r=await new Pk(n).toPromise();return r===void 0?null:r.value}function wde(e,t){const n=i4(e,!0).delete(t);return new Pk(n).toPromise()}const KNt=800,XNt=3;class sNe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>XNt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nNe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r4._getInstance(qNt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await VNt(),!this.activeServiceWorker)return;this.sender=new UNt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||HNt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await oV();return await _de(t,A$,"1"),await wde(t,A$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_de(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>YNt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=i4(i,!1).getAll();return new Pk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sNe.type="LOCAL";const QNt=sNe;new kk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oNe(e,t){return t?qp(t):(sn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fJ extends XRe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Qw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Qw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function JNt(e){return NNt(e.auth,new fJ(e),e.bypassAuthState)}function ZNt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),RNt(n,new fJ(e),e.bypassAuthState)}async function ePt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),kNt(n,new fJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aNe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return JNt;case"linkViaPopup":case"linkViaRedirect":return ePt;case"reauthViaPopup":case"reauthViaRedirect":return ZNt;default:Ch(this.auth,"internal-error")}}resolve(t){Pm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Pm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tPt=new kk(2e3,1e4);async function nPt(e,t,n){if(Qd(e.app))return Promise.reject(Lf(e,"operation-not-supported-in-this-environment"));const r=Rk(e);YRt(e,t,lJ);const i=oNe(r,n);return new av(r,"signInViaPopup",t,i).executeNotNull()}class av extends aNe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,av.currentPopupAction&&av.currentPopupAction.cancel(),av.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return sn(t,this.auth,"internal-error"),t}async onExecution(){Pm(this.filter.length===1,"Popup operations only handle one event");const t=cJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Lf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,av.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,tPt.get())};t()}}av.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rPt="pendingRedirect",bD=new Map;class iPt extends aNe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=bD.get(this.auth._key());if(!t){try{const r=await sPt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}bD.set(this.auth._key(),t)}return this.bypassAuthState||bD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sPt(e,t){const n=uPt(t),r=aPt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function oPt(e,t){bD.set(e._key(),t)}function aPt(e){return qp(e._redirectPersistence)}function uPt(e){return vD(rPt,e.config.apiKey,e.name)}async function lPt(e,t,n=!1){if(Qd(e.app))return Promise.reject(E0(e));const r=Rk(e),i=oNe(r,t),o=await new iPt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cPt=10*60*1e3;class fPt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!dPt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!uNe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Lf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=cPt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ede(t))}saveEventToCache(t){this.cachedEventUids.add(Ede(t)),this.lastProcessedEventTime=Date.now()}}function Ede(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function uNe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function dPt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uNe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hPt(e,t={}){return _S(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pPt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mPt=/^https?/;async function gPt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await hPt(e);for(const n of t)try{if(yPt(n))return}catch{}Ch(e,"unauthorized-domain")}function yPt(e){const t=iV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mPt.test(n))return!1;if(pPt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vPt=new kk(3e4,6e4);function xde(){const e=ch().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function bPt(e){return new Promise((t,n)=>{var r,i,s;function o(){xde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xde(),n(Lf(e,"network-request-failed"))},timeout:vPt.get()})}if(!((i=(r=ch().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=ch().gapi)===null||s===void 0)&&s.load)o();else{const a=_Nt("iframefcb");return ch()[a]=()=>{gapi.load?o():n(Lf(e,"network-request-failed"))},vNt(`${bNt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw _D=null,t})}let _D=null;function _Pt(e){return _D=_D||bPt(e),_D}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wPt=new kk(5e3,15e3),EPt="__/auth/iframe",xPt="emulator/auth/iframe",SPt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TPt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function APt(e){const t=e.config;sn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sJ(t,xPt):`https://${e.config.authDomain}/${EPt}`,r={apiKey:t.apiKey,appName:e.name,v:Fb},i=TPt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ik(r).slice(1)}`}async function CPt(e){const t=await _Pt(e),n=ch().gapi;return sn(n,e,"internal-error"),t.open({where:document.body,url:APt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SPt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Lf(e,"network-request-failed"),a=ch().setTimeout(()=>{s(o)},wPt.get());function u(){ch().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IPt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kPt=500,RPt=600,NPt="_blank",PPt="http://localhost";class Sde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DPt(e,t,n,r=kPt,i=RPt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},IPt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Lo().toLowerCase();n&&(a=zRe(l)?NPt:n),URe(l)&&(t=t||PPt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(lNt(l)&&a!=="_self")return OPt(t||"",a),new Sde(null);const f=window.open(t||"",a,c);sn(f,e,"popup-blocked");try{f.focus()}catch{}return new Sde(f)}function OPt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Pt="__/auth/handler",MPt="emulator/auth/handler",LPt=encodeURIComponent("fac");async function Tde(e,t,n,r,i,s){sn(e.config.authDomain,e,"auth-domain-config-required"),sn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Fb,eventId:i};if(t instanceof lJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Rkt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Nk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${LPt}=${encodeURIComponent(u)}`:"";return`${FPt(e)}?${Ik(a).slice(1)}${l}`}function FPt({config:e}){return e.emulator?sJ(e,MPt):`https://${e.authDomain}/${$Pt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9="webStorageSupport";class jPt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tNe,this._completeRedirectFn=lPt,this._overrideRedirectResult=oPt}async _openPopup(t,n,r,i){var s;Pm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Tde(t,n,r,iV(),i);return DPt(t,o,cJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Tde(t,n,r,iV(),i);return zNt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Pm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await CPt(t),r=new fPt(t);return n.register("authEvent",i=>(sn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(o9,{type:o9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[o9];o!==void 0&&n(!!o),Ch(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gPt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return GRe()||aJ()||n4()}}const lNe=jPt;var Ade="@firebase/auth",Cde="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BPt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zPt(e){Nm(new Ah("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;sn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YRe(e)},l=new gNt(r,i,s,u);return ENt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Nm(new Ah("auth-internal",t=>{const n=Rk(t.getProvider("auth").getImmediate());return(r=>new BPt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mf(Ade,Cde,UPt(e)),Mf(Ade,Cde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VPt=5*60,HPt=ARe("authIdTokenMaxAge")||VPt;let Ide=null;const qPt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HPt)return;const i=n==null?void 0:n.token;Ide!==i&&(Ide=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I$(e=nJ()){const t=bS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=wNt(e,{popupRedirectResolver:lNe,persistence:[QNt,jNt,tNe]}),r=ARe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=qPt(s.toString());DNt(n,o,()=>o(n.currentUser)),PNt(n,a=>o(a))}}const i=SRe("auth");return i&&xNt(n,`http://${i}`),n}function WPt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}yNt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Lf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",WPt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zPt("Browser");var GPt="firebase",YPt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mf(GPt,YPt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cNe="firebasestorage.googleapis.com",fNe="storageBucket",KPt=2*60*1e3,XPt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Yh{constructor(t,n,r=0){super(a9(t),`Firebase Storage: ${n} (${a9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return a9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xi||(Xi={}));function a9(e){return"storage/"+e}function dJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Qi(Xi.UNKNOWN,e)}function QPt(e){return new Qi(Xi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function JPt(e){return new Qi(Xi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZPt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qi(Xi.UNAUTHENTICATED,e)}function eDt(){return new Qi(Xi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tDt(e){return new Qi(Xi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function nDt(){return new Qi(Xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rDt(){return new Qi(Xi.CANCELED,"User canceled the upload/download.")}function iDt(e){return new Qi(Xi.INVALID_URL,"Invalid URL '"+e+"'.")}function sDt(e){return new Qi(Xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function oDt(){return new Qi(Xi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fNe+"' property when initializing the app?")}function aDt(){return new Qi(Xi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uDt(){return new Qi(Xi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lDt(e){return new Qi(Xi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function aV(e){return new Qi(Xi.INVALID_ARGUMENT,e)}function dNe(){return new Qi(Xi.APP_DELETED,"The Firebase app was deleted.")}function cDt(e){return new Qi(Xi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function TA(e,t){return new Qi(Xi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function TT(e){throw new Qi(Xi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ha.makeFromUrl(t,n)}catch{return new Ha(t,"")}if(r.path==="")return r;throw sDt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===cNe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],T=E.regex.exec(t);if(T){const S=T[E.indices.bucket];let A=T[E.indices.path];A||(A=""),r=new Ha(S,A),E.postModify(r);break}}if(r==null)throw iDt(t);return r}}class fDt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dDt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function hDt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pDt(e){return e!==void 0}function mDt(e){return typeof e=="object"&&!Array.isArray(e)}function hJ(e){return typeof e=="string"||e instanceof String}function kde(e){return pJ()&&e instanceof Blob}function pJ(){return typeof Blob<"u"}function uV(e,t,n,r){if(r<t)throw aV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw aV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function hNe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _v;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(_v||(_v={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gDt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yDt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new WN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===_v.NO_ERROR,u=s.getStatus();if(!a||gDt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===_v.ABORT;r(!1,new WN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new WN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());pDt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=dJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?dNe():rDt();o(u)}else{const u=nDt();o(u)}};this.canceled_?n(!1,new WN(!1,null,!0)):this.backoffId_=dDt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&hDt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class WN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function vDt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function bDt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function _Dt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function wDt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function EDt(e,t,n,r,i,s,o=!0){const a=hNe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return _Dt(l,t),vDt(l,n),bDt(l,s),wDt(l,r),new yDt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xDt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function SDt(...e){const t=xDt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(pJ())return new Blob(e);throw new Qi(Xi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TDt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ADt(e){if(typeof atob>"u")throw lDt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class u9{constructor(t,n){this.data=t,this.contentType=n||null}}function CDt(e,t){switch(e){case Jd.RAW:return new u9(pNe(t));case Jd.BASE64:case Jd.BASE64URL:return new u9(mNe(e,t));case Jd.DATA_URL:return new u9(kDt(t),RDt(t))}throw dJ()}function pNe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function IDt(e){let t;try{t=decodeURIComponent(e)}catch{throw TA(Jd.DATA_URL,"Malformed data URL.")}return pNe(t)}function mNe(e,t){switch(e){case Jd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw TA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw TA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ADt(t)}catch(i){throw i.message.includes("polyfill")?i:TA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class gNe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw TA(Jd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=NDt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function kDt(e){const t=new gNe(e);return t.base64?mNe(Jd.BASE64,t.rest):IDt(t.rest)}function RDt(e){return new gNe(e).contentType}function NDt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,n){let r=0,i="";kde(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(kde(this.data_)){const r=this.data_,i=TDt(r,t,n);return i===null?null:new Ug(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Ug(r,!0)}}static getBlob(...t){if(pJ()){const n=t.map(r=>r instanceof Ug?r.data_:r);return new Ug(SDt.apply(null,n))}else{const n=t.map(o=>hJ(o)?CDt(Jd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ug(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mJ(e){let t;try{t=JSON.parse(e)}catch{return null}return mDt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PDt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function DDt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function yNe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ODt(e,t){return t}class Na{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||ODt}}let GN=null;function $Dt(e){return!hJ(e)||e.length<2?e:yNe(e)}function vNe(){if(GN)return GN;const e=[];e.push(new Na("bucket")),e.push(new Na("generation")),e.push(new Na("metageneration")),e.push(new Na("name","fullPath",!0));function t(s,o){return $Dt(o)}const n=new Na("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Na("size");return i.xform=r,e.push(i),e.push(new Na("timeCreated")),e.push(new Na("updated")),e.push(new Na("md5Hash",null,!0)),e.push(new Na("cacheControl",null,!0)),e.push(new Na("contentDisposition",null,!0)),e.push(new Na("contentEncoding",null,!0)),e.push(new Na("contentLanguage",null,!0)),e.push(new Na("contentType",null,!0)),e.push(new Na("metadata","customMetadata",!0)),GN=e,GN}function MDt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ha(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function LDt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return MDt(r,e),r}function bNe(e,t,n){const r=mJ(t);return r===null?null:LDt(e,r,n)}function FDt(e,t,n,r){const i=mJ(t);if(i===null||!hJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Dk(d,n,r),p=hNe({alt:"media",token:l});return h+p})[0]}function jDt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rde="prefixes",Nde="items";function BDt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Rde])for(const i of n[Rde]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ha(t,s));r.prefixes.push(o)}if(n[Nde])for(const i of n[Nde]){const s=e._makeStorageReference(new Ha(t,i.name));r.items.push(s)}return r}function UDt(e,t,n){const r=mJ(n);return r===null?null:BDt(e,t,r)}class s4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(e){if(!e)throw dJ()}function zDt(e,t){function n(r,i){const s=bNe(e,i,t);return gJ(s!==null),s}return n}function VDt(e,t){function n(r,i){const s=UDt(e,t,i);return gJ(s!==null),s}return n}function HDt(e,t){function n(r,i){const s=bNe(e,i,t);return gJ(s!==null),FDt(s,i,e.host,e._protocol)}return n}function yJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=eDt():i=ZPt():n.getStatus()===402?i=JPt(e.bucket):n.getStatus()===403?i=tDt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function _Ne(e){const t=yJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=QPt(e.path)),s.serverResponse=i.serverResponse,s}return n}function qDt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Dk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new s4(a,u,VDt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=yJ(t),c}function WDt(e,t,n){const r=t.fullServerUrl(),i=Dk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new s4(i,s,HDt(e,n),o);return a.errorHandler=_Ne(t),a}function GDt(e,t){const n=t.fullServerUrl(),r=Dk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new s4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=_Ne(t),a}function YDt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function KDt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=YDt(null,t)),r}function XDt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=KDt(t,r,i),c=jDt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Ug.getBlob(f,r,d);if(h===null)throw aDt();const p={name:l.fullPath},m=Dk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new s4(m,g,zDt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=yJ(t),v}class QDt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_v.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_v.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_v.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw TT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw TT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw TT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw TT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw TT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class JDt extends QDt{initXhr(){this.xhr_.responseType="text"}}function o4(){return new JDt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,n){this._service=t,n instanceof Ha?this._location=n:this._location=Ha.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Zv(t,n)}get root(){const t=new Ha(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yNe(this._location.path)}get storage(){return this._service}get parent(){const t=PDt(this._location.path);if(t===null)return null;const n=new Ha(this._location.bucket,t);return new Zv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw cDt(t)}}function ZDt(e,t,n){e._throwIfRoot("uploadBytes");const r=XDt(e.storage,e._location,vNe(),new Ug(t,!0),n);return e.storage.makeRequestWithTokens(r,o4).then(i=>({metadata:i,ref:e}))}function eOt(e){const t={prefixes:[],items:[]};return wNe(e,t).then(()=>t)}async function wNe(e,t,n){const i=await tOt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await wNe(e,t,i.nextPageToken)}function tOt(e,t){t!=null&&typeof t.maxResults=="number"&&uV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=qDt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,o4)}function nOt(e){e._throwIfRoot("getDownloadURL");const t=WDt(e.storage,e._location,vNe());return e.storage.makeRequestWithTokens(t,o4).then(n=>{if(n===null)throw uDt();return n})}function rOt(e){e._throwIfRoot("deleteObject");const t=GDt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,o4)}function iOt(e,t){const n=DDt(e._location.path,t),r=new Ha(e._location.bucket,n);return new Zv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sOt(e){return/^[A-Za-z]+:\/\//.test(e)}function oOt(e,t){return new Zv(e,t)}function ENe(e,t){if(e instanceof vJ){const n=e;if(n._bucket==null)throw oDt();const r=new Zv(n,n._bucket);return t!=null?ENe(r,t):r}else return t!==void 0?iOt(e,t):e}function aOt(e,t){if(t&&sOt(t)){if(e instanceof vJ)return oOt(e,t);throw aV("To use ref(service, url), the first argument must be a Storage instance.")}else return ENe(e,t)}function Pde(e,t){const n=t==null?void 0:t[fNe];return n==null?null:Ha.makeFromBucketSpec(n,e)}function uOt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:bkt(i,e.app.options.projectId))}class vJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=cNe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KPt,this._maxUploadRetryTime=XPt,this._requests=new Set,i!=null?this._bucket=Ha.makeFromBucketSpec(i,this._host):this._bucket=Pde(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ha.makeFromBucketSpec(this._url,t):this._bucket=Pde(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){uV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){uV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new fDt(dNe());{const o=EDt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Dde="@firebase/storage",Ode="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xNe="storage";function l9(e,t,n){return e=ii(e),ZDt(e,t,n)}function AT(e){return e=ii(e),eOt(e)}function c9(e){return e=ii(e),nOt(e)}function $de(e){return e=ii(e),rOt(e)}function nc(e,t){return e=ii(e),aOt(e,t)}function lOt(e=nJ(),t){e=ii(e);const r=bS(e,xNe).getImmediate({identifier:t}),i=vkt("storage");return i&&cOt(r,...i),r}function cOt(e,t,n,r={}){uOt(e,t,n,r)}function fOt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new vJ(n,r,i,t,Fb)}function dOt(){Nm(new Ah(xNe,fOt,"PUBLIC").setMultipleInstances(!0)),Mf(Dde,Ode,""),Mf(Dde,Ode,"esm2017")}dOt();var Mde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wv,SNe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,A){function C(){}C.prototype=A.prototype,S.D=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(I,N,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return A.prototype[N].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,A,C){C||(C=0);var I=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)I[N]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(N=0;16>N;++N)I[N]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],N=S.g[2];var O=S.g[3],P=A+(O^C&(N^O))+I[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+I[1]+3905402710&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+I[2]+606105819&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+I[3]+3250441966&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(O^C&(N^O))+I[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+I[5]+1200080426&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+I[6]+2821735955&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+I[7]+4249261313&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(O^C&(N^O))+I[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+I[9]+2336552879&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+I[10]+4294925233&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+I[11]+2304563134&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(O^C&(N^O))+I[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(N^A&(C^N))+I[13]+4254626195&4294967295,O=A+(P<<12&4294967295|P>>>20),P=N+(C^O&(A^C))+I[14]+2792965006&4294967295,N=O+(P<<17&4294967295|P>>>15),P=C+(A^N&(O^A))+I[15]+1236535329&4294967295,C=N+(P<<22&4294967295|P>>>10),P=A+(N^O&(C^N))+I[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+I[6]+3225465664&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+I[11]+643717713&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+I[0]+3921069994&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(N^O&(C^N))+I[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+I[10]+38016083&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+I[15]+3634488961&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+I[4]+3889429448&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(N^O&(C^N))+I[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+I[14]+3275163606&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+I[3]+4107603335&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+I[8]+1163531501&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(N^O&(C^N))+I[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^N&(A^C))+I[2]+4243563512&4294967295,O=A+(P<<9&4294967295|P>>>23),P=N+(A^C&(O^A))+I[7]+1735328473&4294967295,N=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(N^O))+I[12]+2368359562&4294967295,C=N+(P<<20&4294967295|P>>>12),P=A+(C^N^O)+I[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+I[8]+2272392833&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+I[11]+1839030562&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+I[14]+4259657740&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(C^N^O)+I[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+I[4]+1272893353&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+I[7]+4139469664&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+I[10]+3200236656&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(C^N^O)+I[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+I[0]+3936430074&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+I[3]+3572445317&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+I[6]+76029189&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(C^N^O)+I[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^N)+I[12]+3873151461&4294967295,O=A+(P<<11&4294967295|P>>>21),P=N+(O^A^C)+I[15]+530742520&4294967295,N=O+(P<<16&4294967295|P>>>16),P=C+(N^O^A)+I[2]+3299628645&4294967295,C=N+(P<<23&4294967295|P>>>9),P=A+(N^(C|~O))+I[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+I[7]+1126891415&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+I[14]+2878612391&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+I[5]+4237533241&4294967295,C=N+(P<<21&4294967295|P>>>11),P=A+(N^(C|~O))+I[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+I[3]+2399980690&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+I[10]+4293915773&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+I[1]+2240044497&4294967295,C=N+(P<<21&4294967295|P>>>11),P=A+(N^(C|~O))+I[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+I[15]+4264355552&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+I[6]+2734768916&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+I[13]+1309151649&4294967295,C=N+(P<<21&4294967295|P>>>11),P=A+(N^(C|~O))+I[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~N))+I[11]+3174756917&4294967295,O=A+(P<<10&4294967295|P>>>22),P=N+(A^(O|~C))+I[2]+718787259&4294967295,N=O+(P<<15&4294967295|P>>>17),P=C+(O^(N|~A))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var C=A-this.blockSize,I=this.B,N=this.h,O=0;O<A;){if(N==0)for(;O<=C;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<A;)if(I[N++]=S.charCodeAt(O++),N==this.blockSize){i(this,I),N=0;break}}else for(;O<A;)if(I[N++]=S[O++],N==this.blockSize){i(this,I),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var C=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=C&255,C/=256;for(this.u(S),S=Array(16),A=C=0;4>A;++A)for(var I=0;32>I;I+=8)S[C++]=this.g[A]>>>I&255;return S};function s(S,A){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function o(S,A){this.h=A;for(var C=[],I=!0,N=S.length-1;0<=N;N--){var O=S[N]|0;I&&O==A||(C[N]=O,I=!1)}this.g=C}var a={};function u(S){return-128<=S&&128>S?s(S,function(A){return new o([A|0],0>A?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var A=[],C=1,I=0;S>=C;I++)A[I]=S/C|0,C*=4294967296;return new o(A,0)}function c(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return g(c(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),I=f,N=0;N<S.length;N+=8){var O=Math.min(8,S.length-N),P=parseInt(S.substring(N,N+O),A);8>O?(O=l(Math.pow(A,O)),I=I.j(O).add(l(P))):(I=I.j(C),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,A=1,C=0;C<this.g.length;C++){var I=this.i(C);S+=(0<=I?I:4294967296+I)*A,A*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var A=l(Math.pow(S,6)),C=this,I="";;){var N=w(C,A).g;C=y(C,N.j(A));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=N,p(C))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var A=S.g.length,C=[],I=0;I<A;I++)C[I]=~S.g[I];return new o(C,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],I=0,N=0;N<=A;N++){var O=I+(this.i(N)&65535)+(S.i(N)&65535),P=(O>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);I=P>>>16,O&=65535,P&=65535,C[N]=P<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(S,A){return S.add(g(A))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var A=this.g.length+S.g.length,C=[],I=0;I<2*A;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var N=0;N<S.g.length;N++){var O=this.i(I)>>>16,P=this.i(I)&65535,$=S.i(N)>>>16,F=S.i(N)&65535;C[2*I+2*N]+=P*F,v(C,2*I+2*N),C[2*I+2*N+1]+=O*F,v(C,2*I+2*N+1),C[2*I+2*N+1]+=P*$,v(C,2*I+2*N+1),C[2*I+2*N+2]+=O*$,v(C,2*I+2*N+2)}for(I=0;I<A;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=A;I<2*A;I++)C[I]=0;return new o(C,0)};function v(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function b(S,A){this.g=S,this.h=A}function w(S,A){if(p(A))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return A=w(g(S),A),new b(g(A.g),g(A.h));if(m(A))return A=w(S,g(A)),new b(g(A.g),A.h);if(30<S.g.length){if(m(S)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,I=A;0>=I.l(S);)C=E(C),I=E(I);var N=T(C,1),O=T(I,1);for(I=T(I,2),C=T(C,2);!p(I);){var P=O.add(I);0>=P.l(S)&&(N=N.add(C),O=P),I=T(I,1),C=T(C,1)}return A=y(S,N.j(A)),new b(N,A)}for(N=f;0<=S.l(A);){for(C=Math.max(1,Math.floor(S.m()/A.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=l(C),P=O.j(A);m(P)||0<P.l(S);)C-=I,O=l(C),P=O.j(A);p(O)&&(O=d),N=N.add(O),S=y(S,P)}return new b(N,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)&S.i(I);return new o(C,this.h&S.h)},e.or=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)|S.i(I);return new o(C,this.h|S.h)},e.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)^S.i(I);return new o(C,this.h^S.h)};function E(S){for(var A=S.g.length+1,C=[],I=0;I<A;I++)C[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(C,S.h)}function T(S,A){var C=A>>5;A%=32;for(var I=S.g.length-C,N=[],O=0;O<I;O++)N[O]=0<A?S.i(O+C)>>>A|S.i(O+C+1)<<32-A:S.i(O+C);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SNe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,wv=o}).apply(typeof Mde<"u"?Mde:typeof self<"u"?self:typeof window<"u"?window:{});var YN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TNe,ANe,_2,CNe,wD,lV,INe,kNe,RNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,M,V){return x==Array.prototype||x==Object.prototype||(x[M]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof YN=="object"&&YN];for(var M=0;M<x.length;++M){var V=x[M];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,M){if(M)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var we=x[Q];if(!(we in V))break e;V=V[we]}x=x[x.length-1],Q=V[x],M=M(Q),M!=Q&&M!=null&&t(V,x,{configurable:!0,writable:!0,value:M})}}function s(x,M){x instanceof String&&(x+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<x.length){var De=V++;return{value:M(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(x){return x||function(){return s(this,function(M,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var M=typeof x;return M=M!="object"?M:x?Array.isArray(x)?"array":M:"null",M=="array"||M=="object"&&typeof x.length=="number"}function l(x){var M=typeof x;return M=="object"&&x!=null||M=="function"}function c(x,M,V){return x.call.apply(x.bind,arguments)}function f(x,M,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),x.apply(M,we)}}return function(){return x.apply(M,arguments)}}function d(x,M,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,M){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,M){function V(){}V.prototype=M.prototype,x.aa=M.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,we,De){for(var ft=Array(arguments.length-2),qr=2;qr<arguments.length;qr++)ft[qr-2]=arguments[qr];return M.prototype[we].apply(Q,ft)}}function m(x){const M=x.length;if(0<M){const V=Array(M);for(let Q=0;Q<M;Q++)V[Q]=x[Q];return V}return[]}function g(x,M){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=x.length||0,De=Q.length||0;x.length=we+De;for(let ft=0;ft<De;ft++)x[we+ft]=Q[ft]}else x.push(Q)}}class y{constructor(M,V){this.i=M,this.j=V,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(x,M,V){for(const Q in x)M.call(V,x[Q],Q,x)}function S(x,M){for(const V in x)M.call(void 0,x[V],V,x)}function A(x){const M={};for(const V in x)M[V]=x[V];return M}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(x,M){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)x[V]=Q[V];for(let De=0;De<C.length;De++)V=C[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function N(x){var M=1;x=x.split(":");const V=[];for(;0<M&&x.length;)V.push(x.shift()),M--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function P(){var x=q;let M=null;return x.g&&(M=x.g,x.g=x.g.next,x.g||(x.h=null),M.next=null),M}class ${constructor(){this.h=this.g=null}add(M,V){const Q=F.get();Q.set(M,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new L,x=>x.reset());class L{constructor(){this.next=this.g=this.h=null}set(M,V){this.h=M,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,q=new $,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(U)}};var U=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){O(V)}var M=F;M.j(x),100>M.h&&(M.h++,x.next=M.g,M.g=x)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,M){this.type=x,this.g=this.target=M,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,M=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,M),a.removeEventListener("test",V,M)}catch{}return x}();function G(x,M){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=M,M=x.relatedTarget){if(E){e:{try{w(M.nodeName);var we=!0;break e}catch{}we=!1}we||(M=null)}}else V=="mouseover"?M=x.fromElement:V=="mouseout"&&(M=x.toElement);this.relatedTarget=M,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,M,V,Q,we){this.listener=x,this.proxy=null,this.src=M,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,M,V,Q,we){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,M,Q,we);return-1<ft?(M=x[ft],V||(M.fa=!1)):(M=new he(M,this.src,De,!!Q,we),M.fa=V,x.push(M)),M};function be(x,M){var V=M.type;if(V in x.g){var Q=x.g[V],we=Array.prototype.indexOf.call(Q,M,void 0),De;(De=0<=we)&&Array.prototype.splice.call(Q,we,1),De&&(ye(M),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,M,V,Q){for(var we=0;we<x.length;++we){var De=x[we];if(!De.da&&De.listener==M&&De.capture==!!V&&De.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(x,M,V,Q,we){if(Array.isArray(M)){for(var De=0;De<M.length;De++)it(x,M[De],V,Q,we);return null}return V=vt(V),x&&x[ce]?x.K(M,V,l(Q)?!!Q.capture:!!Q,we):_e(x,M,V,!1,Q,we)}function _e(x,M,V,Q,we,De){if(!M)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,qr=me(x);if(qr||(x[Ue]=qr=new Ie(x)),V=qr.add(M,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)H||(we=ft),we===void 0&&(we=!1),x.addEventListener(M.toString(),Q,we);else if(x.attachEvent)x.attachEvent(Ot(M.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return M.call(x.src,x.listener,V)}const M=We;return x}function ze(x,M,V,Q,we){if(Array.isArray(M))for(var De=0;De<M.length;De++)ze(x,M[De],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),x&&x[ce]?(x=x.i,M=String(M).toString(),M in x.g&&(De=x.g[M],V=Ke(De,V,Q,we),-1<V&&(ye(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[M],x.h--)))):x&&(x=me(x))&&(M=x.g[M.toString()],x=-1,M&&(x=Ke(M,V,Q,we)),(V=-1<x?M[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var M=x.src;if(M&&M[ce])be(M.i,x);else{var V=x.type,Q=x.proxy;M.removeEventListener?M.removeEventListener(V,Q,x.capture):M.detachEvent?M.detachEvent(Ot(V),Q):M.addListener&&M.removeListener&&M.removeListener(Q),(V=me(M))?(be(V,x),V.h==0&&(V.src=null,M[Ue]=null)):ye(x)}}}function Ot(x){return x in yt?yt[x]:yt[x]="on"+x}function We(x,M){if(x.da)x=!0;else{M=new G(M,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,M)}return x}function me(x){return x=x[Ue],x instanceof Ie?x:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[dt]||(x[dt]=function(M){return x.handleEvent(M)}),x[dt])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,M,V,Q){ze(this,x,M,V,Q)};function Ce(x,M){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=M.type||M,typeof M=="string")M=new j(M,x);else if(M instanceof j)M.target=M.target||x;else{var we=M;M=new j(Q,x),I(M,we)}if(we=!0,V)for(var De=V.length-1;0<=De;De--){var ft=M.g=V[De];we=He(ft,Q,!0,M)&&we}if(ft=M.g=x,we=He(ft,Q,!0,M)&&we,we=He(ft,Q,!1,M)&&we,V)for(De=0;De<V.length;De++)ft=M.g=V[De],we=He(ft,Q,!1,M)&&we}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,M;for(M in x.g){for(var V=x.g[M],Q=0;Q<V.length;Q++)ye(V[Q]);delete x.g[M],x.h--}}this.F=null},pe.prototype.K=function(x,M,V,Q){return this.i.add(String(x),M,!1,V,Q)},pe.prototype.L=function(x,M,V,Q){return this.i.add(String(x),M,!0,V,Q)};function He(x,M,V,Q){if(M=x.i.g[String(M)],!M)return!0;M=M.concat();for(var we=!0,De=0;De<M.length;++De){var ft=M[De];if(ft&&!ft.da&&ft.capture==V){var qr=ft.listener,yo=ft.ha||ft.src;ft.fa&&be(x.i,ft),we=qr.call(yo,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(x,M,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(x,M||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const M=x.h;x.h=null,x.m.apply(null,M)}class Ln extends W{constructor(M,V){super(),this.m=M,this.l=V,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(x){W.call(this),this.h=x,this.g={}}p(Tr,W);var Fn=[];function cr(x){T(x.g,function(M,V){this.g.hasOwnProperty(V)&&ct(M)},x),x.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),cr(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=a.JSON.stringify,Sn=a.JSON.parse,nr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function rr(){}rr.prototype.h=null;function Uo(x){return x.h||(x.h=x.i())}function Oi(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $i(){j.call(this,"d")}p($i,j);function Ar(){j.call(this,"c")}p(Ar,j);var ds={},sp=null;function ol(){return sp=sp||new pe}ds.La="serverreachability";function fd(x){j.call(this,ds.La,x)}p(fd,j);function Er(x){const M=ol();Ce(M,new fd(M))}ds.STAT_EVENT="statevent";function Ci(x,M){j.call(this,ds.STAT_EVENT,x),this.stat=M}p(Ci,j);function Xr(x){const M=ol();Ce(M,new Ci(M,x))}ds.Ma="timingevent";function uu(x,M){j.call(this,ds.Ma,x),this.size=M}p(uu,j);function Aa(x,M){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},M)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function oe(x,M,V,Q,we,De){x.info(function(){if(x.g)if(De)for(var ft="",qr=De.split("&"),yo=0;yo<qr.length;yo++){var fr=qr[yo].split("=");if(1<fr.length){var qo=fr[0];fr=fr[1];var Wo=qo.split("_");ft=2<=Wo.length&&Wo[1]=="type"?ft+(qo+"="+fr+"&"):ft+(qo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+M+`
`+V+`
`+ft})}function ee(x,M,V,Q,we,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+M+`
`+V+`
`+De+" "+ft})}function ae(x,M,V,Q){x.info(function(){return"XMLHTTP TEXT ("+M+"): "+Se(x,V)+(Q?" "+Q:"")})}function Te(x,M){x.info(function(){return"TIMEOUT: "+M})}Ca.prototype.info=function(){};function Se(x,M){if(!x.g)return M;if(!M)return null;try{var V=JSON.parse(M);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return pn(V)}catch{return M}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ht;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Ht=new On;function jn(x,M,V,Q){this.j=x,this.i=M,this.l=V,this.R=Q||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dn}function dn(){this.i=null,this.g="",this.h=!1}var ir={},Cr={};function Vt(x,M,V){x.L=1,x.v=Bn(Ge(M)),x.m=V,x.P=!0,sr(x,null)}function sr(x,M){x.F=Date.now(),Ii(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),kR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new dn,x.g=tie(x.j,V?M:null,!x.m),0<x.O&&(x.M=new Ln(d(x.Y,x,x.g),x.O)),M=x.U,V=x.g,Q=x.ca;var we="readystatechange";Array.isArray(we)||(we&&(Fn[0]=we.toString()),we=Fn);for(var De=0;De<we.length;De++){var ft=it(V,we[De],Q||M.handleEvent,!1,M.h||M);if(!ft)break;M.g[ft.key]=ft}M=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,M)):(x.u="GET",x.g.ea(x.A,x.u,null,M)),Er(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}jn.prototype.ca=function(x){x=x.target;const M=this.M;M&&Ji(x)==3?M.j():this.Y(x)},jn.prototype.Y=function(x){try{if(x==this.g)e:{const Wo=Ji(this.g);var M=this.g.Ba();const u_=this.g.Z();if(!(3>Wo)&&(Wo!=3||this.g&&(this.h.h||this.g.oa()||Ho(this.g)))){this.J||Wo!=4||M==7||(M==8||0>=u_?Er(3):Er(2)),Qr(this);var V=this.g.Z();this.X=V;t:if(zr(this)){var Q=Ho(this.g);x="";var we=Q.length,De=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),go(this);var ft="";break t}this.h.i=new a.TextDecoder}for(M=0;M<we;M++)this.h.h=!0,x+=this.h.i.decode(Q[M],{stream:!(De&&M==we-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Wo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var qr,yo=this.g;if((qr=yo.g?yo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(qr)){var fr=qr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Li(this,V);else{this.o=!1,this.s=3,Xr(12),Mi(this),go(this);break e}}if(this.P){V=!0;let Xc;for(;!this.J&&this.C<ft.length;)if(Xc=Jn(this,ft),Xc==Cr){Wo==4&&(this.s=4,Xr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Xc==ir){this.s=4,Xr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,Xc,null),Li(this,Xc);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wo!=4||ft.length!=0||this.h.h||(this.s=1,Xr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Mi(this),go(this);else if(0<ft.length&&!this.W){this.W=!0;var qo=this.j;qo.g==this&&qo.ba&&!qo.M&&(qo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),T5(qo),qo.M=!0,Xr(11))}}else ae(this.i,this.l,ft,null),Li(this,ft);Wo==4&&Mi(this),this.o&&!this.J&&(Wo==4?Qre(this.j,this):(this.o=!1,Ii(this)))}else r1(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Xr(12)):(this.s=0,Xr(13)),Mi(this),go(this)}}}catch{}finally{}};function zr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Jn(x,M){var V=x.C,Q=M.indexOf(`
`,V);return Q==-1?Cr:(V=Number(M.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>M.length?Cr:(M=M.slice(Q,Q+V),x.C=Q+V,M)))}jn.prototype.cancel=function(){this.J=!0,Mi(this)};function Ii(x){x.S=Date.now()+x.I,qs(x,x.I)}function qs(x,M){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Aa(d(x.ba,x),M)}function Qr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}jn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Te(this.i,this.A),this.L!=2&&(Er(),Xr(17)),Mi(this),this.s=2,go(this)):qs(this,this.S-x)};function go(x){x.j.G==0||x.J||Qre(x.j,x)}function Mi(x){Qr(x);var M=x.M;M&&typeof M.ma=="function"&&M.ma(),x.M=null,cr(x.U),x.g&&(M=x.g,x.g=null,M.abort(),M.ma())}function Li(x,M){try{var V=x.j;if(V.G!=0&&(V.g==x||dd(V.h,x))){if(!x.K&&dd(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse(M)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)MR(V),OR(V);else break e;S5(V),Xr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Aa(d(V.Za,V),6e3));if(1>=Ql(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else i1(V,11)}else if((x.K||V.g==x)&&MR(V),!v(M))for(we=V.Da.g.parse(M),M=0;M<we.length;M++){let fr=we[M];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const qo=fr[3];qo!=null&&(V.la=qo,V.j.info("VER="+V.la));const Wo=fr[4];Wo!=null&&(V.Aa=Wo,V.j.info("SVER="+V.Aa));const u_=fr[5];u_!=null&&typeof u_=="number"&&0<u_&&(Q=1.5*u_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const Xc=x.g;if(Xc){const FR=Xc.g?Xc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(FR){var De=Q.h;De.g||FR.indexOf("spdy")==-1&&FR.indexOf("quic")==-1&&FR.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const A5=Xc.g?Xc.g.getResponseHeader("X-HTTP-Session-Id"):null;A5&&(Q.ya=A5,Nt(Q.I,Q.D,A5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=eie(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var qr=ft,yo=Q.L;yo&&(qr.I=yo),qr.B&&(Qr(qr),Ii(qr)),Q.g=ft}else Kre(Q);0<V.i.length&&$R(V)}else fr[0]!="stop"&&fr[0]!="close"||i1(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?i1(V,7):o_(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}Er(4)}catch{}}var zo=class{constructor(x,M){this.g=x,this.map=M}};function Ia(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ws(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Ql(x){return x.h?1:x.g?x.g.size:0}function dd(x,M){return x.h?x.h==M:x.g?x.g.has(M):!1}function Y(x,M){x.g?x.g.add(M):x.h=M}function se(x,M){x.h&&x.h==M?x.h=null:x.g&&x.g.has(M)&&x.g.delete(M)}Ia.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let M=x.i;for(const V of x.g.values())M=M.concat(V.D);return M}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var M=[],V=x.length,Q=0;Q<V;Q++)M.push(x[Q]);return M}M=[],V=0;for(Q in x)M[V++]=x[Q];return M}function ge(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var M=[];x=x.length;for(var V=0;V<x;V++)M.push(V);return M}M=[],V=0;for(const Q in x)M[V++]=Q;return M}}}function le(x,M){if(x.forEach&&typeof x.forEach=="function")x.forEach(M,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,M,void 0);else for(var V=ge(x),Q=fe(x),we=Q.length,De=0;De<we;De++)M.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,M){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),we=null;if(0<=Q){var De=x[V].substring(0,Q);we=x[V].substring(Q+1)}else De=x[V];M(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,st(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var M=x.i,V=new Jl;V.i=M.i,M.g&&(V.g=new Map(M.g),V.h=M.h),hn(this,V),this.m=x.m}else x&&(M=String(x).match(Oe))?(this.h=!1,st(this,M[1]||"",!0),this.o=Ir(M[2]||""),this.g=Ir(M[3]||"",!0),Et(this,M[4]),this.l=Ir(M[5]||"",!0),hn(this,M[6]||"",!0),this.m=Ir(M[7]||"")):(this.h=!1,this.i=new Jl(null,this.h))}qe.prototype.toString=function(){var x=[],M=this.j;M&&x.push(kr(M,hd,!0),":");var V=this.g;return(V||M=="file")&&(x.push("//"),(M=this.o)&&x.push(kr(M,hd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(kr(V,V.charAt(0)=="/"?WS:op,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",kr(V,IR)),x.join("")};function Ge(x){return new qe(x)}function st(x,M,V){x.j=V?Ir(M,!0):M,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);x.s=M}else x.s=null}function hn(x,M,V){M instanceof Jl?(x.i=M,GS(x.i,x.h)):(V||(M=kr(M,Zy)),x.i=new Jl(M,x.h))}function Nt(x,M,V){x.i.set(M,V)}function Bn(x){return Nt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Ir(x,M){return x?M?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function kr(x,M,V){return typeof x=="string"?(x=encodeURI(x).replace(M,Vo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Vo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var hd=/[#\/\?@]/g,op=/[#\?:]/g,WS=/[#\?]/g,Zy=/[#\?@]/g,IR=/#/g;function Jl(x,M){this.h=this.g=null,this.i=x||null,this.j=!!M}function lu(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function(M,V){x.add(decodeURIComponent(M.replace(/\+/g," ")),V)}))}e=Jl.prototype,e.add=function(x,M){lu(this),this.i=null,x=up(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(M),this.h+=1,this};function ap(x,M){lu(x),M=up(x,M),x.g.has(M)&&(x.i=null,x.h-=x.g.get(M).length,x.g.delete(M))}function i_(x,M){return lu(x),M=up(x,M),x.g.has(M)}e.forEach=function(x,M){lu(this),this.g.forEach(function(V,Q){V.forEach(function(we){x.call(M,we,Q,this)},this)},this)},e.na=function(){lu(this);const x=Array.from(this.g.values()),M=Array.from(this.g.keys()),V=[];for(let Q=0;Q<M.length;Q++){const we=x[Q];for(let De=0;De<we.length;De++)V.push(M[Q])}return V},e.V=function(x){lu(this);let M=[];if(typeof x=="string")i_(this,x)&&(M=M.concat(this.g.get(up(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)M=M.concat(x[V])}return M},e.set=function(x,M){return lu(this),this.i=null,x=up(this,x),i_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[M]),this.h+=1,this},e.get=function(x,M){return x?(x=this.V(x),0<x.length?String(x[0]):M):M};function kR(x,M,V){ap(x,M),0<V.length&&(x.i=null,x.g.set(up(x,M),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],M=Array.from(this.g.keys());for(var V=0;V<M.length;V++){var Q=M[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=De;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),x.push(we)}}return this.i=x.join("&")};function up(x,M){return M=String(M),x.j&&(M=M.toLowerCase()),M}function GS(x,M){M&&!x.j&&(lu(x),x.i=null,x.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(ap(this,Q),kR(this,we,V))},x)),x.j=M}function RR(x,M){const V=new Ca;if(a.Image){const Q=new Image;Q.onload=h(cu,V,"TestLoadImage: loaded",!0,M,Q),Q.onerror=h(cu,V,"TestLoadImage: error",!1,M,Q),Q.onabort=h(cu,V,"TestLoadImage: abort",!1,M,Q),Q.ontimeout=h(cu,V,"TestLoadImage: timeout",!1,M,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else M(!1)}function lp(x,M){const V=new Ca,Q=new AbortController,we=setTimeout(()=>{Q.abort(),cu(V,"TestPingServer: timeout",!1,M)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(we),De.ok?cu(V,"TestPingServer: ok",!0,M):cu(V,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(we),cu(V,"TestPingServer: error",!1,M)})}function cu(x,M,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function x5(){this.g=new nr}function NR(x,M,V){const Q=V||"";try{le(x,function(we,De){let ft=we;l(we)&&(ft=pn(we)),M.push(Q+De+"="+encodeURIComponent(ft))})}catch(we){throw M.push(Q+"type="+encodeURIComponent("_badmap")),we}}function e1(x){this.l=x.Ub||null,this.j=x.eb||!1}p(e1,rr),e1.prototype.g=function(){return new t1(this.l,this.j)},e1.prototype.i=function(x){return function(){return x}}({});function t1(x,M){pe.call(this),this.D=x,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(t1,pe),e=t1.prototype,e.open=function(x,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=M,this.readyState=1,cg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(M.body=x),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,n1(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,cg(this)),this.g&&(this.readyState=3,cg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function PR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var M=x.value?x.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!x.done}))&&(this.response=this.responseText+=M)}x.done?n1(this):cg(this),this.readyState==3&&PR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,n1(this))},e.Qa=function(x){this.g&&(this.response=x,n1(this))},e.ga=function(){this.g&&n1(this)};function n1(x){x.readyState=4,x.l=null,x.j=null,x.v=null,cg(x)}e.setRequestHeader=function(x,M){this.u.append(x,M)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],M=this.h.entries();for(var V=M.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=M.next();return x.join(`\r
`)};function cg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(t1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function DR(x){let M="";return T(x,function(V,Q){M+=Q,M+=":",M+=V,M+=`\r
`}),M}function te(x,M,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=DR(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Nt(x,M,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,Ct=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,M,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);M=M?M.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ht.g(),this.v=this.o?Uo(this.o):Uo(Ht),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(M,String(x),!0),this.B=!1}catch(De){$n(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,M,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){$n(this,De)}};function $n(x,M){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=M,x.m=5,xr(x),Un(x)}function xr(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vr(this):this.bb())},e.bb=function(){Vr(this)};function Vr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Ji(x)!=4||x.Z()!=2)){if(x.u&&Ji(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),Ji(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var V;if(!(V=M)){var Q;if(Q=ft===0){var we=String(x.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var De=2<Ji(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",xr(x)}}finally{Un(x)}}}}function Un(x,M){if(x.g){Hr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,M||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Hr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Ji(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var M=this.g.responseText;return x&&M.indexOf(x)==0&&(M=M.substring(x.length)),Sn(M)}};function Ho(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function r1(x){const M={};x=(x.g&&2<=Ji(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=N(x[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=M[we]||[];M[we]=De,De.push(V)}S(M,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cp(x,M,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||M}function s_(x){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cp("baseRetryDelayMs",5e3,x),this.cb=cp("retryDelaySeedMs",1e4,x),this.Wa=cp("forwardChannelMaxRetries",2,x),this.wa=cp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ia(x&&x.concurrentRequestLimit),this.Da=new x5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=s_.prototype,e.la=8,e.G=1,e.connect=function(x,M,V,Q){Xr(0),this.W=x,this.H=M||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=eie(this,null,this.W),$R(this)};function o_(x){if(Wre(x),x.G==3){var M=x.U++,V=Ge(x.I);if(Nt(V,"SID",x.K),Nt(V,"RID",M),Nt(V,"TYPE","terminate"),YS(x,V),M=new jn(x,x.j,M),M.L=2,M.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=M.v,V=!0),V||(M.g=tie(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Ii(M)}Zre(x)}function OR(x){x.g&&(T5(x),x.g.cancel(),x.g=null)}function Wre(x){OR(x),x.u&&(a.clearTimeout(x.u),x.u=null),MR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function $R(x){if(!Ws(x.h)&&!x.s){x.s=!0;var M=x.Ga;B||D(),z||(B(),z=!0),q.add(M,x),x.B=0}}function tje(x,M){return Ql(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=M.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Aa(d(x.Ga,x,M),Jre(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const we=new jn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=A(De),I(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var M=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(M+=Q,4096<M){M=V;break e}if(M===4096||V===this.i.length-1){M=V+1;break e}}M=1e3}else M=1e3;M=Yre(this,we,M),V=Ge(this.I),Nt(V,"RID",x),Nt(V,"CVER",22),this.D&&Nt(V,"X-HTTP-Session-Id",this.D),YS(this,V),De&&(this.O?M="headers="+encodeURIComponent(String(DR(De)))+"&"+M:this.m&&te(V,this.m,De)),Y(this.h,we),this.Ua&&Nt(V,"TYPE","init"),this.P?(Nt(V,"$req",M),Nt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,M),this.G=2}}else this.G==3&&(x?Gre(this,x):this.i.length==0||Ws(this.h)||Gre(this))};function Gre(x,M){var V;M?V=M.l:V=x.U++;const Q=Ge(x.I);Nt(Q,"SID",x.K),Nt(Q,"RID",V),Nt(Q,"AID",x.T),YS(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new jn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),M&&(x.i=M.D.concat(x.i)),M=Yre(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),Vt(V,Q,M)}function YS(x,M){x.H&&T(x.H,function(V,Q){Nt(M,Q,V)}),x.l&&le({},function(V,Q){Nt(M,Q,V)})}function Yre(x,M,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var we=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=we[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let qr=!0;for(let yo=0;yo<V;yo++){let fr=we[yo].g;const qo=we[yo].map;if(fr-=De,0>fr)De=Math.max(0,we[yo].g-100),qr=!1;else try{NR(qo,ft,"req"+fr+"_")}catch{Q&&Q(qo)}}if(qr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),M.D=x,Q}function Kre(x){if(!x.g&&!x.u){x.Y=1;var M=x.Fa;B||D(),z||(B(),z=!0),q.add(M,x),x.v=0}}function S5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Aa(d(x.Fa,x),Jre(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Xre(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Aa(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xr(10),OR(this),Xre(this))};function T5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Xre(x){x.g=new jn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var M=Ge(x.qa);Nt(M,"RID","rpc"),Nt(M,"SID",x.K),Nt(M,"AID",x.T),Nt(M,"CI",x.F?"0":"1"),!x.F&&x.ja&&Nt(M,"TO",x.ja),Nt(M,"TYPE","xmlhttp"),YS(x,M),x.m&&x.o&&te(M,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Bn(Ge(M)),V.m=null,V.P=!0,sr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,OR(this),S5(this),Xr(19))};function MR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Qre(x,M){var V=null;if(x.g==M){MR(x),T5(x),x.g=null;var Q=2}else if(dd(x.h,M))V=M.D,se(x.h,M),Q=1;else return;if(x.G!=0){if(M.o)if(Q==1){V=M.m?M.m.length:0,M=Date.now()-M.F;var we=x.B;Q=ol(),Ce(Q,new uu(Q,V)),$R(x)}else Kre(x);else if(we=M.s,we==3||we==0&&0<M.X||!(Q==1&&tje(x,M)||Q==2&&S5(x)))switch(V&&0<V.length&&(M=x.h,M.i=M.i.concat(V)),we){case 1:i1(x,5);break;case 4:i1(x,10);break;case 3:i1(x,6);break;default:i1(x,2)}}}function Jre(x,M){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*M}function i1(x,M){if(x.j.info("Error code "+M),M==2){var V=d(x.fb,x),Q=x.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),we?RR(Q.toString(),V):lp(Q.toString(),V)}else Xr(2);x.G=0,x.l&&x.l.sa(M),Zre(x),Wre(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Xr(2)):(this.j.info("Failed to ping google.com"),Xr(1))};function Zre(x){if(x.G=0,x.ka=[],x.l){const M=Z(x.h);(M.length!=0||x.i.length!=0)&&(g(x.ka,M),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function eie(x,M,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")M&&(Q.g=M+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,M=M?M+"."+we.hostname:we.hostname,we=+we.port;var De=new qe(null);Q&&st(De,Q),M&&(De.g=M),we&&Et(De,we),V&&(De.l=V),Q=De}return V=x.D,M=x.ya,V&&M&&Nt(Q,V,M),Nt(Q,"VER",x.la),YS(x,Q),Q}function tie(x,M,V){if(M&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=x.Ca&&!x.pa?new ue(new e1({eb:V})):new ue(x.pa),M.Ha(x.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function nie(){}e=nie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function LR(){}LR.prototype.g=function(x,M){return new al(x,M)};function al(x,M){pe.call(this),this.g=new s_(M),this.l=x,this.h=M&&M.messageUrlParams||null,x=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(x?x["X-WebChannel-Content-Type"]=M.messageContentType:x={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(x?x["X-WebChannel-Client-Profile"]=M.va:x={"X-WebChannel-Client-Profile":M.va}),this.g.S=x,(x=M&&M.Sb)&&!v(x)&&(this.g.m=x),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!v(M)&&(this.g.D=M,x=this.h,x!==null&&M in x&&(x=this.h,M in x&&delete x[M])),this.j=new a_(this)}p(al,pe),al.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},al.prototype.close=function(){o_(this.g)},al.prototype.o=function(x){var M=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=pn(x),x=V);M.i.push(new zo(M.Ya++,x)),M.G==3&&$R(M)},al.prototype.N=function(){this.g.l=null,delete this.j,o_(this.g),delete this.g,al.aa.N.call(this)};function rie(x){$i.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var M=x.__sm__;if(M){e:{for(const V in M){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,M=M!==null&&x in M?M[x]:void 0),this.data=M}else this.data=x}p(rie,$i);function iie(){Ar.call(this),this.status=1}p(iie,Ar);function a_(x){this.g=x}p(a_,nie),a_.prototype.ua=function(){Ce(this.g,"a")},a_.prototype.ta=function(x){Ce(this.g,new rie(x))},a_.prototype.sa=function(x){Ce(this.g,new iie)},a_.prototype.ra=function(){Ce(this.g,"b")},LR.prototype.createWebChannel=LR.prototype.g,al.prototype.send=al.prototype.o,al.prototype.open=al.prototype.m,al.prototype.close=al.prototype.close,RNe=function(){return new LR},kNe=function(){return ol()},INe=ds,lV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,wD=ot,St.COMPLETE="complete",CNe=St,Oi.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",pe.prototype.listen=pe.prototype.K,_2=Oi,ANe=e1,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,TNe=ue}).apply(typeof YN<"u"?YN:typeof self<"u"?self:typeof window<"u"?window:{});const Lde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}yu.UNAUTHENTICATED=new yu(null),yu.GOOGLE_CREDENTIALS=new yu("google-credentials-uid"),yu.FIRST_PARTY=new yu("first-party-uid"),yu.MOCK_USER=new yu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new e4("@firebase/firestore");function CT(){return eb.logLevel}function It(e,...t){if(eb.logLevel<=Gn.DEBUG){const n=t.map(bJ);eb.debug(`Firestore (${wS}): ${e}`,...n)}}function Dm(e,...t){if(eb.logLevel<=Gn.ERROR){const n=t.map(bJ);eb.error(`Firestore (${wS}): ${e}`,...n)}}function QC(e,...t){if(eb.logLevel<=Gn.WARN){const n=t.map(bJ);eb.warn(`Firestore (${wS}): ${e}`,...n)}}function bJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e="Unexpected state"){const t=`FIRESTORE (${wS}) INTERNAL ASSERTION FAILED: `+e;throw Dm(t),new Error(t)}function ri(e,t){e||on()}function fn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Yh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hOt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pOt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(yu.UNAUTHENTICATED))}shutdown(){}}class mOt{constructor(t){this.t=t,this.currentUser=yu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new nm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ri(typeof r.accessToken=="string"),new hOt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ri(t===null||typeof t=="string"),new yu(t)}}class gOt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=yu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yOt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new gOt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(yu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vOt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bOt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ri(typeof n.token=="string"),this.R=n.token,new vOt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ot(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NNe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=_Ot(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function XE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Fs.fromMillis(Date.now())}static fromDate(t){return Fs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Fs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new cn(t)}static min(){return new cn(new Fs(0,0))}static max(){return new cn(new Fs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t,n,r){n===void 0?n=0:n>t.length&&on(),r===void 0?r=t.length-n:r>t.length-n&&on(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return JC.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof JC?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ui extends JC{construct(t,n,r){return new ui(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ui(n)}static emptyPath(){return new ui([])}}const wOt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Io extends JC{construct(t,n,r){return new Io(t,n,r)}static isValidIdentifier(t){return wOt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Io.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Io(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Io(n)}static emptyPath(){return new Io([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(ui.fromString(t))}static fromName(t){return new Ut(ui.fromString(t).popFirst(5))}static empty(){return new Ut(ui.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ui.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ui.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new ui(t.slice()))}}function EOt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cn.fromTimestamp(r===1e9?new Fs(n+1,0):new Fs(n,r));return new ny(i,Ut.empty(),t)}function xOt(e){return new ny(e.readTime,e.key,-1)}class ny{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ny(cn.min(),Ut.empty(),-1)}static max(){return new ny(cn.max(),Ut.empty(),-1)}}function SOt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TOt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AOt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==TOt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function COt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $k(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}_J.oe=-1;function a4(e){return e==null}function k$(e){return e===0&&1/e==-1/0}function IOt(e){return typeof e=="number"&&Number.isInteger(e)&&!k$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function PNe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n){this.comparator=t,this.root=n||To.EMPTY}insert(t,n){return new Di(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new Di(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new KN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new KN(this.root,t,this.comparator,!1)}getReverseIterator(){return new KN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new KN(this.root,t,this.comparator,!0)}}class KN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new To(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const t=this.left.check();if(t!==this.right.check())throw on();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(t,n,r,i,s){return this}insert(t,n,r){return new To(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this.comparator=t,this.data=new Di(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new jde(this.data.getIterator())}getIteratorFrom(t){return new jde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Do(this.comparator);return n.data=t,n}}class jde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t){this.fields=t,t.sort(Io.comparator)}static empty(){return new Sl([])}unionWith(t){let n=new Do(Io.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Sl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return XE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DNe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DNe("Invalid base64 string: "+s):s}}(t);return new _a(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new _a(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_a.EMPTY_BYTE_STRING=new _a("");const kOt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ry(e){if(ri(!!e),typeof e=="string"){let t=0;const n=kOt.exec(e);if(ri(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gs(e.seconds),nanos:gs(e.nanos)}}function gs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function tb(e){return typeof e=="string"?_a.fromBase64String(e):_a.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function EJ(e){const t=e.mapValue.fields.__previous_value__;return wJ(t)?EJ(t):t}function ZC(e){const t=ry(e.mapValue.fields.__local_write_time__.timestampValue);return new Fs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ROt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class eI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new eI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof eI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wJ(e)?4:NOt(e)?9007199254740991:10:on()}function Ih(e,t){if(e===t)return!0;const n=nb(e);if(n!==nb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ZC(e).isEqual(ZC(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ry(i.timestampValue),a=ry(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return tb(i.bytesValue).isEqual(tb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return gs(i.geoPointValue.latitude)===gs(s.geoPointValue.latitude)&&gs(i.geoPointValue.longitude)===gs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gs(i.integerValue)===gs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gs(i.doubleValue),a=gs(s.doubleValue);return o===a?k$(o)===k$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return XE(e.arrayValue.values||[],t.arrayValue.values||[],Ih);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Fde(o)!==Fde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ih(o[u],a[u])))return!1;return!0}(e,t);default:return on()}}function tI(e,t){return(e.values||[]).find(n=>Ih(n,t))!==void 0}function QE(e,t){if(e===t)return 0;const n=nb(e),r=nb(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=gs(s.integerValue||s.doubleValue),u=gs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Bde(e.timestampValue,t.timestampValue);case 4:return Bde(ZC(e),ZC(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=tb(s),u=tb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(gs(s.latitude),gs(o.latitude));return a!==0?a:vr(gs(s.longitude),gs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=QE(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===XN.mapValue&&o===XN.mapValue)return 0;if(s===XN.mapValue)return 1;if(o===XN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=QE(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw on()}}function Bde(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=ry(e),r=ry(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function JE(e){return cV(e)}function cV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ry(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return tb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=cV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${cV(n.fields[o])}`;return i+"}"}(e.mapValue):on()}function Ude(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function fV(e){return!!e&&"integerValue"in e}function xJ(e){return!!e&&"arrayValue"in e}function zde(e){return!!e&&"nullValue"in e}function Vde(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ED(e){return!!e&&"mapValue"in e}function AA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=AA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=AA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function NOt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t){this.value=t}static empty(){return new Iu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!ED(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=AA(n)}setAll(t){let n=Io.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=AA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());ED(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ih(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];ED(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){jb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Iu(AA(this.value))}}function ONe(e){const t=[];return jb(e.fields,(n,r)=>{const i=new Io([n]);if(ED(r)){const s=ONe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Sl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ua(t,0,cn.min(),cn.min(),cn.min(),Iu.empty(),0)}static newFoundDocument(t,n,r,i){return new ua(t,1,n,cn.min(),r,i,0)}static newNoDocument(t,n){return new ua(t,2,n,cn.min(),cn.min(),Iu.empty(),0)}static newUnknownDocument(t,n){return new ua(t,3,n,cn.min(),cn.min(),Iu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(cn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Iu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Iu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ua&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ua(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Hde(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=QE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qde(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ih(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(t,n="asc"){this.field=t,this.dir=n}}function POt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $Ne=class{};class bs extends $Ne{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new OOt(t,n,r):n==="array-contains"?new LOt(t,r):n==="in"?new FOt(t,r):n==="not-in"?new jOt(t,r):n==="array-contains-any"?new BOt(t,r):new bs(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new $Ot(t,r):new MOt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(QE(n,this.value)):n!==null&&nb(this.value)===nb(n)&&this.matchesComparison(QE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qf extends $Ne{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new qf(t,n)}matches(t){return MNe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MNe(e){return e.op==="and"}function LNe(e){return DOt(e)&&MNe(e)}function DOt(e){for(const t of e.filters)if(t instanceof qf)return!1;return!0}function dV(e){if(e instanceof bs)return e.field.canonicalString()+e.op.toString()+JE(e.value);if(LNe(e))return e.filters.map(t=>dV(t)).join(",");{const t=e.filters.map(n=>dV(n)).join(",");return`${e.op}(${t})`}}function FNe(e,t){return e instanceof bs?function(r,i){return i instanceof bs&&r.op===i.op&&r.field.isEqual(i.field)&&Ih(r.value,i.value)}(e,t):e instanceof qf?function(r,i){return i instanceof qf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&FNe(o,i.filters[a]),!0):!1}(e,t):void on()}function jNe(e){return e instanceof bs?function(n){return`${n.field.canonicalString()} ${n.op} ${JE(n.value)}`}(e):e instanceof qf?function(n){return n.op.toString()+" {"+n.getFilters().map(jNe).join(" ,")+"}"}(e):"Filter"}class OOt extends bs{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class $Ot extends bs{constructor(t,n){super(t,"in",n),this.keys=BNe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class MOt extends bs{constructor(t,n){super(t,"not-in",n),this.keys=BNe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function BNe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class LOt extends bs{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xJ(n)&&tI(n.arrayValue,this.value)}}class FOt extends bs{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&tI(this.value.arrayValue,n)}}class jOt extends bs{constructor(t,n){super(t,"not-in",n)}matches(t){if(tI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!tI(this.value.arrayValue,n)}}class BOt extends bs{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Wde(e,t=null,n=[],r=[],i=null,s=null,o=null){return new UOt(e,t,n,r,i,s,o)}function SJ(e){const t=fn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>dV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),a4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>JE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>JE(r)).join(",")),t.ue=n}return t.ue}function TJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!POt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!FNe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qde(e.startAt,t.startAt)&&qde(e.endAt,t.endAt)}function hV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zOt(e,t,n,r,i,s,o,a){return new ES(e,t,n,r,i,s,o,a)}function AJ(e){return new ES(e)}function Gde(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function UNe(e){return e.collectionGroup!==null}function CA(e){const t=fn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Do(Io.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new nI(s,r))}),n.has(Io.keyField().canonicalString())||t.ce.push(new nI(Io.keyField(),r))}return t.ce}function fh(e){const t=fn(e);return t.le||(t.le=VOt(t,CA(e))),t.le}function VOt(e,t){if(e.limitType==="F")return Wde(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new nI(i.field,s)});const n=e.endAt?new R$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new R$(e.startAt.position,e.startAt.inclusive):null;return Wde(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function pV(e,t){const n=e.filters.concat([t]);return new ES(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function mV(e,t,n){return new ES(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function u4(e,t){return TJ(fh(e),fh(t))&&e.limitType===t.limitType}function zNe(e){return`${SJ(fh(e))}|lt:${e.limitType}`}function q_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jNe(i)).join(", ")}]`),a4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>JE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>JE(i)).join(",")),`Target(${r})`}(fh(e))}; limitType=${e.limitType})`}function l4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of CA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Hde(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,CA(r),i)||r.endAt&&!function(o,a,u){const l=Hde(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,CA(r),i))}(e,t)}function HOt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function VNe(e){return(t,n)=>{let r=!1;for(const i of CA(e)){const s=qOt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qOt(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?QE(u,l):on()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return on()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return PNe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WOt=new Di(Ut.comparator);function Om(){return WOt}const HNe=new Di(Ut.comparator);function w2(...e){let t=HNe;for(const n of e)t=t.insert(n.key,n);return t}function qNe(e){let t=HNe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function uv(){return IA()}function WNe(){return IA()}function IA(){return new xS(e=>e.toString(),(e,t)=>e.isEqual(t))}const GOt=new Di(Ut.comparator),YOt=new Do(Ut.comparator);function zn(...e){let t=YOt;for(const n of e)t=t.add(n);return t}const KOt=new Do(vr);function XOt(){return KOt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GNe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k$(t)?"-0":t}}function YNe(e){return{integerValue:""+e}}function QOt(e,t){return IOt(t)?YNe(t):GNe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this._=void 0}}function JOt(e,t,n){return e instanceof rI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wJ(s)&&(s=EJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof iI?XNe(e,t):e instanceof sI?QNe(e,t):function(i,s){const o=KNe(i,s),a=Yde(o)+Yde(i.Pe);return fV(o)&&fV(i.Pe)?YNe(a):GNe(i.serializer,a)}(e,t)}function ZOt(e,t,n){return e instanceof iI?XNe(e,t):e instanceof sI?QNe(e,t):n}function KNe(e,t){return e instanceof N$?function(r){return fV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class rI extends c4{}class iI extends c4{constructor(t){super(),this.elements=t}}function XNe(e,t){const n=JNe(t);for(const r of e.elements)n.some(i=>Ih(i,r))||n.push(r);return{arrayValue:{values:n}}}class sI extends c4{constructor(t){super(),this.elements=t}}function QNe(e,t){let n=JNe(t);for(const r of e.elements)n=n.filter(i=>!Ih(i,r));return{arrayValue:{values:n}}}class N$ extends c4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Yde(e){return gs(e.integerValue||e.doubleValue)}function JNe(e){return xJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3t{constructor(t,n){this.field=t,this.transform=n}}function t3t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof iI&&i instanceof iI||r instanceof sI&&i instanceof sI?XE(r.elements,i.elements,Ih):r instanceof N$&&i instanceof N$?Ih(r.Pe,i.Pe):r instanceof rI&&i instanceof rI}(e.transform,t.transform)}class n3t{constructor(t,n){this.version=t,this.transformResults=n}}class zu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new zu}static exists(t){return new zu(void 0,t)}static updateTime(t){return new zu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class f4{}function ZNe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new d4(e.key,zu.none()):new Mk(e.key,e.data,zu.none());{const n=e.data,r=Iu.empty();let i=new Do(Io.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new jy(e.key,r,new Sl(i.toArray()),zu.none())}}function r3t(e,t,n){e instanceof Mk?function(i,s,o){const a=i.value.clone(),u=Xde(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof jy?function(i,s,o){if(!xD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Xde(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ePe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function kA(e,t,n,r){return e instanceof Mk?function(s,o,a,u){if(!xD(s.precondition,o))return a;const l=s.value.clone(),c=Qde(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof jy?function(s,o,a,u){if(!xD(s.precondition,o))return a;const l=Qde(s.fieldTransforms,u,o),c=o.data;return c.setAll(ePe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return xD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function i3t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=KNe(r.transform,i||null);s!=null&&(n===null&&(n=Iu.empty()),n.set(r.field,s))}return n||null}function Kde(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&XE(r,i,(s,o)=>t3t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mk extends f4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jy extends f4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ePe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xde(e,t,n){const r=new Map;ri(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ZOt(o,a,n[i]))}return r}function Qde(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,JOt(s,o,t))}return r}class d4 extends f4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s3t extends f4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&r3t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=kA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=kA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=WNe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ZNe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(cn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&XE(this.mutations,t.mutations,(n,r)=>Kde(n,r))&&XE(this.baseMutations,t.baseMutations,(n,r)=>Kde(n,r))}}class CJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ri(t.mutations.length===r.length);let i=function(){return GOt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new CJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs,Zn;function l3t(e){switch(e){default:return on();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function tPe(e){if(e===void 0)return Dm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case hs.OK:return Be.OK;case hs.CANCELLED:return Be.CANCELLED;case hs.UNKNOWN:return Be.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Be.INTERNAL;case hs.UNAVAILABLE:return Be.UNAVAILABLE;case hs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case hs.NOT_FOUND:return Be.NOT_FOUND;case hs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case hs.ABORTED:return Be.ABORTED;case hs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case hs.DATA_LOSS:return Be.DATA_LOSS;default:return on()}}(Zn=hs||(hs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3t=new wv([4294967295,4294967295],0);function Jde(e){const t=c3t().encode(e),n=new SNe;return n.update(t),new Uint8Array(n.digest())}function Zde(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new wv([n,r],0),new wv([i,s],0)]}class IJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new E2(`Invalid padding: ${n}`);if(r<0)throw new E2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new E2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new E2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=wv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(wv.fromNumber(r)));return i.compare(f3t)===1&&(i=new wv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Jde(t),[r,i]=Zde(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new IJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Jde(t),[r,i]=Zde(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class E2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Lk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new h4(cn.min(),i,new Di(vr),Om(),zn())}}class Lk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Lk(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class nPe{constructor(t,n){this.targetId=t,this.me=n}}class rPe{constructor(t,n,r=_a.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ehe{constructor(){this.fe=0,this.ge=nhe(),this.pe=_a.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:on()}}),new Lk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=nhe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ri(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class d3t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Om(),this.qe=the(),this.Qe=new Di(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:on()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(hV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,ua.newNoDocument(o,cn.min()))}else ri(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=tb(r).toUint8Array()}catch(u){if(u instanceof DNe)return QC("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new IJ(o,i,s)}catch(u){return QC(u instanceof E2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ua.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new h4(t,n,this.Qe,this.ke,r);return this.ke=Om(),this.qe=the(),this.Qe=new Di(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new ehe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Do(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ehe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function the(){return new Di(Ut.comparator)}function nhe(){return new Di(Ut.comparator)}const h3t={asc:"ASCENDING",desc:"DESCENDING"},p3t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m3t={and:"AND",or:"OR"};class g3t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gV(e,t){return e.useProto3Json||a4(t)?t:{value:t}}function P$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function iPe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function y3t(e,t){return P$(e,t.toTimestamp())}function dh(e){return ri(!!e),cn.fromTimestamp(function(n){const r=ry(n);return new Fs(r.seconds,r.nanos)}(e))}function kJ(e,t){return yV(e,t).canonicalString()}function yV(e,t){const n=function(i){return new ui(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function sPe(e){const t=ui.fromString(e);return ri(cPe(t)),t}function vV(e,t){return kJ(e.databaseId,t.path)}function f9(e,t){const n=sPe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(aPe(n))}function oPe(e,t){return kJ(e.databaseId,t)}function v3t(e){const t=sPe(e);return t.length===4?ui.emptyPath():aPe(t)}function bV(e){return new ui(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function aPe(e){return ri(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function rhe(e,t,n){return{name:vV(e,t),fields:n.value.mapValue.fields}}function b3t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:on()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ri(c===void 0||typeof c=="string"),_a.fromBase64String(c||"")):(ri(c===void 0||c instanceof Buffer||c instanceof Uint8Array),_a.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:tPe(l.code);return new bt(c,l.message||"")}(o);n=new rPe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=f9(e,r.document.name),s=dh(r.document.updateTime),o=r.document.createTime?dh(r.document.createTime):cn.min(),a=new Iu({mapValue:{fields:r.document.fields}}),u=ua.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new SD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=f9(e,r.document),s=r.readTime?dh(r.readTime):cn.min(),o=ua.newNoDocument(i,s),a=r.removedTargetIds||[];n=new SD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=f9(e,r.document),s=r.removedTargetIds||[];n=new SD([],s,i,null)}else{if(!("filter"in t))return on();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new u3t(i,s),a=r.targetId;n=new nPe(a,o)}}return n}function _3t(e,t){let n;if(t instanceof Mk)n={update:rhe(e,t.key,t.value)};else if(t instanceof d4)n={delete:vV(e,t.key)};else if(t instanceof jy)n={update:rhe(e,t.key,t.data),updateMask:k3t(t.fieldMask)};else{if(!(t instanceof s3t))return on();n={verify:vV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof iI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof N$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw on()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:y3t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:on()}(e,t.precondition)),n}function w3t(e,t){return e&&e.length>0?(ri(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?dh(i.updateTime):dh(s);return o.isEqual(cn.min())&&(o=dh(s)),new n3t(o,i.transformResults||[])}(n,t))):[]}function E3t(e,t){return{documents:[oPe(e,t.path)]}}function x3t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oPe(e,i);const s=function(l){if(l.length!==0)return lPe(qf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:W_(d.field),direction:A3t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function S3t(e){let t=v3t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ri(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=uPe(f);return d instanceof qf&&LNe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new nI(G_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,a4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new R$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new R$(h,d)}(n.endAt)),zOt(t,i,o,s,a,"F",u,l)}function T3t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function uPe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=G_(n.unaryFilter.field);return bs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=G_(n.unaryFilter.field);return bs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=G_(n.unaryFilter.field);return bs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=G_(n.unaryFilter.field);return bs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(e):e.fieldFilter!==void 0?function(n){return bs.create(G_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return qf.create(n.compositeFilter.filters.map(r=>uPe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(e):on()}function A3t(e){return h3t[e]}function C3t(e){return p3t[e]}function I3t(e){return m3t[e]}function W_(e){return{fieldPath:e.canonicalString()}}function G_(e){return Io.fromServerFormat(e.fieldPath)}function lPe(e){return e instanceof bs?function(n){if(n.op==="=="){if(Vde(n.value))return{unaryFilter:{field:W_(n.field),op:"IS_NAN"}};if(zde(n.value))return{unaryFilter:{field:W_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vde(n.value))return{unaryFilter:{field:W_(n.field),op:"IS_NOT_NAN"}};if(zde(n.value))return{unaryFilter:{field:W_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:W_(n.field),op:C3t(n.op),value:n.value}}}(e):e instanceof qf?function(n){const r=n.getFilters().map(i=>lPe(i));return r.length===1?r[0]:{compositeFilter:{op:I3t(n.op),filters:r}}}(e):on()}function k3t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function cPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n,r,i,s=cn.min(),o=cn.min(),a=_a.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Kg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3t{constructor(t){this.ct=t}}function N3t(e){const t=S3t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?mV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3t{constructor(){this._n=new D3t}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(ny.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(ny.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class D3t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Do(ui.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Do(ui.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new ZE(0)}static Ln(){return new ZE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3t{constructor(){this.changes=new xS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ua.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3t{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3t{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&kA(r.mutation,i,Sl.empty(),Fs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=uv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=w2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=uv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Om();const o=IA(),a=function(){return IA()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof jy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),kA(c.mutation,l,c.mutation.getFieldMask(),Fs.now())):o.set(l.key,Sl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new $3t(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=IA();let i=new Di((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Sl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=WNe();c.forEach(d=>{if(!s.has(d)){const h=ZNe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):UNe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(uv());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:qNe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=w2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=w2();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new ES(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ua.newInvalidDocument(c)))});let a=w2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&kA(c.mutation,l,Sl.empty(),Fs.now()),l4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3t{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:N3t(i.bundledQuery),readTime:dh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3t{constructor(){this.overlays=new Di(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=uv();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=uv(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Di((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=uv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=uv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new a3t(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(){this.Pr=new Do(Xs.Ir),this.Tr=new Do(Xs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Xs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Xs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new ui([])),r=new Xs(n,t),i=new Xs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new ui([])),r=new Xs(n,t),i=new Xs(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Xs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Xs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3t{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Do(Xs.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new o3t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Xs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Xs(n,0),i=new Xs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Do(vr);return n.forEach(i=>{const s=new Xs(i,0),o=new Xs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Xs(new Ut(s),0);let a=new Do(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ri(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Xs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Xs(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3t{constructor(t){this.vr=t,this.docs=function(){return new Di(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():ua.newInvalidDocument(n))}getEntries(t,n){let r=Om();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ua.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Om();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||SOt(xOt(c),r)<=0||(i.has(c.key)||l4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){on()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new U3t(this)}getSize(t){return Xe.resolve(this.size)}}class U3t extends O3t{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3t{constructor(t){this.persistence=t,this.Mr=new xS(n=>SJ(n),TJ),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new RJ,this.targetCount=0,this.Lr=ZE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new ZE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3t{constructor(t,n){this.Br={},this.overlays={},this.kr=new _J(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new z3t(this),this.indexManager=new P3t,this.remoteDocumentCache=function(i){return new B3t(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new R3t(n),this.$r=new L3t(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new F3t,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new j3t(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new H3t(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class H3t extends AOt{constructor(t){super(),this.currentSequenceNumber=t}}class NJ{constructor(t){this.persistence=t,this.zr=new RJ,this.jr=null}static Hr(t){return new NJ(t)}get Jr(){if(this.jr)return this.jr;throw on()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,cn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new PJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3t{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Tkt()?8:COt(Lo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new q3t;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(CT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",q_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(CT()<=Gn.DEBUG&&It("QueryEngine","Query:",q_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(CT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",q_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fh(n))):Xe.resolve())}ji(t,n){if(Gde(n))return Xe.resolve(null);let r=fh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=mV(n,null,"F"),r=fh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,mV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Gde(n)||i.isEqual(cn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(CT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),q_(n)),this.es(t,o,n,EOt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Do(VNe(t));return n.forEach((i,s)=>{l4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return CT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",q_(n)),this.zi.getDocumentsMatchingQuery(t,n,ny.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3t{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Di(vr),this.rs=new xS(s=>SJ(s),TJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new M3t(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function Y3t(e,t,n,r){return new G3t(e,t,n,r)}async function fPe(e,t){const n=fn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function K3t(e,t){const n=fn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ri(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function dPe(e){const t=fn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function X3t(e,t){const n=fn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(_a.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Om(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Q3t(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(cn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function Q3t(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Om();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(cn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function J3t(e,t){const n=fn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Z3t(e,t){const n=fn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Kg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function _V(e,t,n){const r=fn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$k(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function ihe(e,t,n){const r=fn(e);let i=cn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=fn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,fh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:cn.min(),n?s:zn())).next(a=>(e$t(r,HOt(t),a),{documents:a,hs:s})))}function e$t(e,t,n){let r=e.ss.get(t)||cn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class she{constructor(){this.activeTargetIds=XOt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class t$t{constructor(){this.no=new she,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new she,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n$t{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ohe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QN=null;function d9(){return QN===null?QN=function(){return 268435456+Math.round(2147483648*Math.random())}():QN++,"0x"+QN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i$t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="WebChannelConnection";class s$t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=d9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw QC("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=r$t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=d9();return new Promise((o,a)=>{const u=new TNe;u.setWithCredentials(!0),u.listenOnce(CNe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wD.NO_ERROR:const c=u.getResponseJson();It(ea,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case wD.TIMEOUT:It(ea,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case wD.HTTP_ERROR:const f=u.getStatus();if(It(ea,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{It(ea,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(ea,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=d9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=RNe(),a=kNe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new ANe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(ea,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new i$t({lo:g=>{h?It(ea,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(ea,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(ea,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,_2.EventType.OPEN,()=>{h||(It(ea,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,_2.EventType.CLOSE,()=>{h||(h=!0,It(ea,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,_2.EventType.ERROR,g=>{h||(h=!0,QC(ea,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,_2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ri(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(ea,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let T=function(C){const I=hs[C];if(I!==void 0)return tPe(I)}(E),S=w.message;T===void 0&&(T=Be.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(T,S)),f.close()}else It(ea,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,INe.STAT_EVENT,g=>{g.stat===lV.PROXY?It(ea,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===lV.NOPROXY&&It(ea,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function h9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(e){return new g3t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pPe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new hPe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Dm(n.toString()),Dm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o$t extends pPe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=b3t(this.serializer,t),r=function(s){if(!("targetChange"in s))return cn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?cn.min():o.readTime?dh(o.readTime):cn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=bV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=hV(u)?{documents:E3t(s,u)}:{query:x3t(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=iPe(s,o.resumeToken);const l=gV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(cn.min())>0){a.readTime=P$(s,o.snapshotVersion.toTimestamp());const l=gV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=T3t(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=bV(this.serializer),n.removeTarget=t,this.i_(n)}}class a$t extends pPe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ri(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=w3t(t.writeResults,t.commitTime),r=dh(t.commitTime);return this.listener.A_(r,n)}return ri(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=bV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>_3t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u$t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,yV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,yV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class l$t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Dm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c$t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Bb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=fn(u);l.M_.add(4),await jk(l),l.N_.set("Unknown"),l.M_.delete(4),await Fk(l)}(this))})}),this.N_=new l$t(r,i)}}async function Fk(e){if(Bb(e))for(const t of e.x_)await t(!0)}async function jk(e){for(const t of e.x_)await t(!1)}function mPe(e,t){const n=fn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),MJ(n)?$J(n):SS(n).Xo()&&OJ(n,t))}function DJ(e,t){const n=fn(e),r=SS(n);n.F_.delete(t),r.Xo()&&gPe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Bb(n)&&n.N_.set("Unknown"))}function OJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(cn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}SS(e).P_(t)}function gPe(e,t){e.L_.xe(t),SS(e).I_(t)}function $J(e){e.L_=new d3t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),SS(e).start(),e.N_.w_()}function MJ(e){return Bb(e)&&!SS(e).Zo()&&e.F_.size>0}function Bb(e){return fn(e).M_.size===0}function yPe(e){e.L_=void 0}async function f$t(e){e.N_.set("Online")}async function d$t(e){e.F_.forEach((t,n)=>{OJ(e,t)})}async function h$t(e,t){yPe(e),MJ(e)?(e.N_.D_(t),$J(e)):e.N_.set("Unknown")}async function p$t(e,t,n){if(e.N_.set("Online"),t instanceof rPe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await D$(e,r)}else if(t instanceof SD?e.L_.Ke(t):t instanceof nPe?e.L_.He(t):e.L_.We(t),!n.isEqual(cn.min()))try{const r=await dPe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(_a.EMPTY_BYTE_STRING,c.snapshotVersion)),gPe(s,u);const f=new Kg(c.target,u,l,c.sequenceNumber);OJ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await D$(e,r)}}async function D$(e,t,n){if(!$k(t))throw t;e.M_.add(1),await jk(e),e.N_.set("Offline"),n||(n=()=>dPe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Fk(e)})}function vPe(e,t){return t().catch(n=>D$(e,n,t))}async function m4(e){const t=fn(e),n=iy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;m$t(t);)try{const i=await J3t(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,g$t(t,i)}catch(i){await D$(t,i)}bPe(t)&&_Pe(t)}function m$t(e){return Bb(e)&&e.v_.length<10}function g$t(e,t){e.v_.push(t);const n=iy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function bPe(e){return Bb(e)&&!iy(e).Zo()&&e.v_.length>0}function _Pe(e){iy(e).start()}async function y$t(e){iy(e).V_()}async function v$t(e){const t=iy(e);for(const n of e.v_)t.d_(n.mutations)}async function b$t(e,t,n){const r=e.v_.shift(),i=CJ.from(r,t,n);await vPe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await m4(e)}async function _$t(e,t){t&&iy(e).E_&&await async function(r,i){if(function(o){return l3t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();iy(r).t_(),await vPe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await m4(r)}}(e,t),bPe(e)&&_Pe(e)}async function ahe(e,t){const n=fn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Bb(n);n.M_.add(3),await jk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Fk(n)}async function w$t(e,t){const n=fn(e);t?(n.M_.delete(2),await Fk(n)):t||(n.M_.add(2),await jk(n),n.N_.set("Unknown"))}function SS(e){return e.B_||(e.B_=function(n,r,i){const s=fn(n);return s.f_(),new o$t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:f$t.bind(null,e),To:d$t.bind(null,e),Ao:h$t.bind(null,e),h_:p$t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),MJ(e)?$J(e):e.N_.set("Unknown")):(await e.B_.stop(),yPe(e))})),e.B_}function iy(e){return e.k_||(e.k_=function(n,r,i){const s=fn(n);return s.f_(),new a$t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:y$t.bind(null,e),Ao:_$t.bind(null,e),R_:v$t.bind(null,e),A_:b$t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await m4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new nm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new LJ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FJ(e,t){if(Dm("AsyncQueue",`${t}: ${e}`),$k(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=w2(),this.sortedSet=new Di(this.comparator)}static emptySet(t){return new Jw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Jw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Jw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uhe{constructor(){this.q_=new Di(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):on():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class ex{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ex(t,n,Jw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&u4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E$t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class x$t{constructor(){this.queries=new xS(t=>zNe(t),u4),this.onlineState="Unknown",this.z_=new Set}}async function wPe(e,t){const n=fn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new E$t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=FJ(o,`Initialization of query '${q_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&jJ(n)}async function EPe(e,t){const n=fn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S$t(e,t){const n=fn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&jJ(n)}function T$t(e,t,n){const r=fn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function jJ(e){e.z_.forEach(t=>{t.next()})}var wV,lhe;(lhe=wV||(wV={})).J_="default",lhe.Cache="cache";class xPe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new ex(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=ex.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==wV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SPe{constructor(t){this.key=t}}class TPe{constructor(t){this.key=t}}class A$t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=VNe(t),this.Ta=new Jw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new uhe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=l4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new ex(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new uhe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new TPe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new SPe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return ex.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class C$t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class I$t{constructor(t){this.key=t,this.wa=!1}}class k$t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new xS(a=>zNe(a),u4),this.Da=new Map,this.Ca=new Set,this.va=new Di(Ut.comparator),this.Fa=new Map,this.Ma=new RJ,this.xa={},this.Oa=new Map,this.Na=ZE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function R$t(e,t,n=!0){const r=NPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await APe(r,t,n,!0),i}async function N$t(e,t){const n=NPe(e);await APe(n,t,!0,!1)}async function APe(e,t,n,r){const i=await Z3t(e.localStore,fh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await P$t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&mPe(e.remoteStore,i),a}async function P$t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await ihe(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,m.isPrimaryClient,w,E);return fhe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await ihe(e.localStore,t,!0),o=new A$t(t,s.hs),a=o.da(s.documents),u=Lk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);fhe(e,n,l.fa);const c=new C$t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function D$t(e,t,n){const r=fn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!u4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _V(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&DJ(r.remoteStore,i.targetId),EV(r,i.targetId)}).catch(Ok)):(EV(r,i.targetId),await _V(r.localStore,i.targetId,!0))}async function O$t(e,t){const n=fn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),DJ(n.remoteStore,r.targetId))}async function $$t(e,t,n){const r=z$t(e);try{const i=await function(o,a){const u=fn(o),l=Fs.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Om(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=i3t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new jy(v.key,b,ONe(b.value.mapValue),zu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:qNe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Di(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Bk(r,i.changes),await m4(r.remoteStore)}catch(i){const s=FJ(i,"Failed to persist write");n.reject(s)}}async function CPe(e,t){const n=fn(e);try{const r=await X3t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ri(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ri(o.wa):i.removedDocuments.size>0&&(ri(o.wa),o.wa=!1))}),await Bk(n,r,t)}catch(r){await Ok(r)}}function che(e,t,n){const r=fn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=fn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&jJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function M$t(e,t,n){const r=fn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Di(Ut.comparator);o=o.insert(s,ua.newNoDocument(s,cn.min()));const a=zn().add(s),u=new h4(cn.min(),new Map,new Di(vr),o,a);await CPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),BJ(r)}else await _V(r.localStore,t,!1).then(()=>EV(r,t,n)).catch(Ok)}async function L$t(e,t){const n=fn(e),r=t.batch.batchId;try{const i=await K3t(n.localStore,t);kPe(n,r,null),IPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bk(n,i)}catch(i){await Ok(i)}}async function F$t(e,t,n){const r=fn(e);try{const i=await function(o,a){const u=fn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ri(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);kPe(r,t,n),IPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Bk(r,i)}catch(i){await Ok(i)}}function IPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function kPe(e,t,n){const r=fn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function EV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||RPe(e,r)})}function RPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(DJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),BJ(e))}function fhe(e,t,n){for(const r of n)r instanceof SPe?(e.Ma.addReference(r.key,t),j$t(e,r)):r instanceof TPe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||RPe(e,r.key)):on()}function j$t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),BJ(e))}function BJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(ui.fromString(t)),r=e.Na.next();e.Fa.set(r,new I$t(n)),e.va=e.va.insert(n,r),mPe(e.remoteStore,new Kg(fh(AJ(n.path)),r,"TargetPurposeLimboResolution",_J.oe))}}async function Bk(e,t,n){const r=fn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=PJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=fn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!$k(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function B$t(e,t){const n=fn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await fPe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Bk(n,r.us)}}function U$t(e,t){const n=fn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function NPe(e){const t=fn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=CPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=U$t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=M$t.bind(null,t),t.Sa.h_=S$t.bind(null,t.eventManager),t.Sa.ka=T$t.bind(null,t.eventManager),t}function z$t(e){const t=fn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=L$t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=F$t.bind(null,t),t}class dhe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=p4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Y3t(this.persistence,new W3t,t.initialUser,this.serializer)}createPersistence(t){return new V3t(NJ.Hr,this.serializer)}createSharedClientState(t){return new t$t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class V$t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>che(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B$t.bind(null,this.syncEngine),await w$t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new x$t}()}createDatastore(t){const n=p4(t.databaseInfo.databaseId),r=function(s){return new s$t(s)}(t.databaseInfo);return function(s,o,a,u){return new u$t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new c$t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>che(this.syncEngine,n,0),function(){return ohe.D()?new ohe:new n$t}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new k$t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=fn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await jk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Dm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yu.UNAUTHENTICATED,this.clientId=NNe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=FJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function p9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await fPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function hhe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await DPe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ahe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>ahe(t.remoteStore,i)),e._onlineComponents=t}function q$t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function DPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await p9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!q$t(n))throw n;QC("Error using user provided cache. Falling back to memory cache: "+n),await p9(e,new dhe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await p9(e,new dhe);return e._offlineComponents}async function UJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await hhe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await hhe(e,new V$t))),e._onlineComponents}function W$t(e){return DPe(e).then(t=>t.persistence)}function G$t(e){return UJ(e).then(t=>t.remoteStore)}function Y$t(e){return UJ(e).then(t=>t.syncEngine)}async function OPe(e){const t=await UJ(e),n=t.eventManager;return n.onListen=R$t.bind(null,t.syncEngine),n.onUnlisten=D$t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=N$t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=O$t.bind(null,t.syncEngine),n}function K$t(e){return e.asyncQueue.enqueue(async()=>{const t=await W$t(e),n=await G$t(e);return t.setNetworkEnabled(!0),function(i){const s=fn(i);return s.M_.delete(0),Fk(s)}(n)})}function X$t(e,t,n={}){const r=new nm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new PPe({next:d=>{o.enqueueAndForget(()=>EPe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new xPe(AJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return wPe(s,f)}(await OPe(e),e.asyncQueue,t,n,r)),r.promise}function Q$t(e,t,n={}){const r=new nm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new PPe({next:d=>{o.enqueueAndForget(()=>EPe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new xPe(a,c,{includeMetadataChanges:!0,ra:!0});return wPe(s,f)}(await OPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Pe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const phe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MPe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function J$t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function mhe(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ghe(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function g4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":on()}function Wf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=g4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}J$t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$Pe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yhe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yhe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pOt;switch(r.type){case"firstParty":return new yOt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=phe.get(n);r&&(It("ComponentProvider","Removing Datastore"),phe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ub(this.firestore,t,this._query)}}class Ga{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new x0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ga(this.firestore,t,this._key)}}class x0 extends Ub{constructor(t,n,r){super(t,n,AJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ga(this.firestore,null,new Ut(t))}withConverter(t){return new x0(this.firestore,t,this._path)}}function Zc(e,t,...n){if(e=ii(e),MPe("collection","path",t),e instanceof zJ){const r=ui.fromString(t,...n);return ghe(r),new x0(e,null,r)}{if(!(e instanceof Ga||e instanceof x0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return ghe(r),new x0(e.firestore,null,r)}}function Is(e,t,...n){if(e=ii(e),arguments.length===1&&(t=NNe.newId()),MPe("doc","path",t),e instanceof zJ){const r=ui.fromString(t,...n);return mhe(r),new Ga(e,null,new Ut(r))}{if(!(e instanceof Ga||e instanceof x0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return mhe(r),new Ga(e.firestore,e instanceof x0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z$t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new hPe(this,"async_queue_retry"),this.hu=()=>{const n=h9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=h9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=h9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new nm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!$k(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Dm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=LJ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&on()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class By extends zJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Z$t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||LPe(this),this._firestoreClient.terminate()}}function eMt(e,t,n){n||(n="(default)");const r=bS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(YC(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Uk(e){return e._firestoreClient||LPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function LPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new ROt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,$Pe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new H$t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function tMt(e){return K$t(Uk(e=Wf(e,By)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new tx(_a.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new tx(_a.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nMt=/^__.*__$/;class rMt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new jy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Mk(t,this.data,n,this.fieldTransforms)}}class FPe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new jy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function jPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class HJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new HJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return O$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(jPe(this.fu)&&nMt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class iMt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||p4(t)}Fu(t,n,r,i=!1){return new HJ({fu:t,methodName:n,vu:r,path:Io.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function v4(e){const t=e._freezeSettings(),n=p4(e._databaseId);return new iMt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function BPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);WJ("Data must be an object, but it was:",o,r);const a=VPe(r,o);let u,l;if(s.merge)u=new Sl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=xV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);qPe(c,d)||c.push(d)}u=new Sl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new rMt(new Iu(a),u,l)}class b4 extends y4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof b4}}class qJ extends y4{_toFieldTransform(t){return new e3t(t.path,new rI)}isEqual(t){return t instanceof qJ}}function UPe(e,t,n,r){const i=e.Fu(1,t,n);WJ("Data must be an object, but it was:",i,r);const s=[],o=Iu.empty();jb(r,(u,l)=>{const c=GJ(t,u,n);l=ii(l);const f=i.Su(c);if(l instanceof b4)s.push(c);else{const d=Vk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Sl(s);return new FPe(o,a,i.fieldTransforms)}function zPe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[xV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(xV(t,s[d])),u.push(s[d+1]);const l=[],c=Iu.empty();for(let d=a.length-1;d>=0;--d)if(!qPe(l,a[d])){const h=a[d];let p=u[d];p=ii(p);const m=o.Su(h);if(p instanceof b4)l.push(h);else{const g=Vk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Sl(l);return new FPe(c,f,o.fieldTransforms)}function sMt(e,t,n,r=!1){return Vk(n,e.Fu(r?4:3,t))}function Vk(e,t){if(HPe(e=ii(e)))return WJ("Unsupported field value:",t,e),VPe(e,t);if(e instanceof y4)return function(r,i){if(!jPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Vk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ii(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QOt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Fs.fromDate(r);return{timestampValue:P$(i.serializer,s)}}if(r instanceof Fs){const s=new Fs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:P$(i.serializer,s)}}if(r instanceof VJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tx)return{bytesValue:iPe(i.serializer,r._byteString)};if(r instanceof Ga){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${g4(r)}`)}(e,t)}function VPe(e,t){const n={};return PNe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jb(e,(r,i)=>{const s=Vk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Fs||e instanceof VJ||e instanceof tx||e instanceof Ga||e instanceof y4)}function WJ(e,t,n){if(!HPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=g4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function xV(e,t,n){if((t=ii(t))instanceof zk)return t._internalPath;if(typeof t=="string")return GJ(e,t);throw O$("Field path arguments must be of type string or ",e,!1,void 0,n)}const oMt=new RegExp("[~\\*/\\[\\]]");function GJ(e,t,n){if(t.search(oMt)>=0)throw O$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zk(...t.split("."))._internalPath}catch{throw O$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function O$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function qPe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ga(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new aMt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(_4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aMt extends WPe{data(){return super.data()}}function _4(e,t){return typeof t=="string"?GJ(e,t):t instanceof zk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uMt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YJ{}class GPe extends YJ{}function vhe(e,t,...n){let r=[];t instanceof YJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof KJ).length,a=s.filter(u=>u instanceof w4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class w4 extends GPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new w4(t,n,r)}_apply(t){const n=this._parse(t);return YPe(t._query,n),new Ub(t.firestore,t.converter,pV(t._query,n))}_parse(t){const n=v4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){_he(f,c);const h=[];for(const p of f)h.push(bhe(u,s,p));d={arrayValue:{values:h}}}else d=bhe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||_he(f,c),d=sMt(a,o,f,c==="in"||c==="not-in");return bs.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function lMt(e,t,n){const r=t,i=_4("where",e);return w4._create(i,r,n)}class KJ extends YJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new KJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)YPe(o,u),o=pV(o,u)}(t._query,n),new Ub(t.firestore,t.converter,pV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class XJ extends GPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new XJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nI(s,o)}(t._query,this._field,this._direction);return new Ub(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ES(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function cMt(e,t="asc"){const n=t,r=_4("orderBy",e);return XJ._create(r,n)}function bhe(e,t,n){if(typeof(n=ii(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UNe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ui.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ude(e,new Ut(r))}if(n instanceof Ga)return Ude(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${g4(n)}.`)}function _he(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function YPe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class fMt{convertValue(t,n="none"){switch(nb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(tb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw on()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return jb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new VJ(gs(t.latitude),gs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=EJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ZC(t));default:return null}}convertTimestamp(t){const n=ry(t);return new Fs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ui.fromString(t);ri(cPe(r));const i=new eI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Dm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KPe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class XPe extends WPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new TD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(_4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class TD extends XPe{data(t={}){return super.data(t)}}class dMt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new x2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new TD(this._firestore,this._userDataWriter,r.key,r,new x2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new TD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new x2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new TD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new x2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:hMt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hMt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(e){e=Wf(e,Ga);const t=Wf(e.firestore,By);return X$t(Uk(t),e._key).then(n=>gMt(t,e,n))}class QPe extends fMt{constructor(t){super(),this.firestore=t}convertBytes(t){return new tx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ga(this.firestore,null,n)}}function IT(e){e=Wf(e,Ub);const t=Wf(e.firestore,By),n=Uk(t),r=new QPe(t);return uMt(e._query),Q$t(n,e._query).then(i=>new dMt(t,r,e,i))}function ul(e,t,n){e=Wf(e,Ga);const r=Wf(e.firestore,By),i=KPe(e.converter,t,n);return E4(r,[BPe(v4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,zu.none())])}function pMt(e,t,n,...r){e=Wf(e,Ga);const i=Wf(e.firestore,By),s=v4(i);let o;return o=typeof(t=ii(t))=="string"||t instanceof zk?zPe(s,"updateDoc",e._key,t,n,r):UPe(s,"updateDoc",e._key,t),E4(i,[o.toMutation(e._key,zu.exists(!0))])}function mMt(e){return E4(Wf(e.firestore,By),[new d4(e._key,zu.none())])}function E4(e,t){return function(r,i){const s=new nm;return r.asyncQueue.enqueueAndForget(async()=>$$t(await Y$t(r),i,s)),s.promise}(Uk(e),t)}function gMt(e,t,n){const r=n.docs.get(t._key),i=new QPe(e);return new XPe(e,i,t._key,r,new x2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yMt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=v4(t)}set(t,n,r){this._verifyNotCommitted();const i=g9(t,this._firestore),s=KPe(i.converter,n,r),o=BPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,zu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=g9(t,this._firestore);let o;return o=typeof(n=ii(n))=="string"||n instanceof zk?zPe(this._dataReader,"WriteBatch.update",s._key,n,r,i):UPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,zu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=g9(t,this._firestore);return this._mutations=this._mutations.concat(new d4(n._key,zu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function g9(e,t){if((e=ii(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function vMt(){return new qJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function whe(e){return Uk(e=Wf(e,By)),new yMt(e,t=>E4(e,t))}(function(t,n=!0){(function(i){wS=i})(Fb),Nm(new Ah("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new By(new mOt(r.getProvider("auth-internal")),new bOt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Mf(Lde,"4.6.3",t),Mf(Lde,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new Map,JPe={activated:!1,tokenObservers:[]},bMt={initialized:!1,enabled:!1};function js(e){return SV.get(e)||Object.assign({},JPe)}function _Mt(e,t){return SV.set(e,t),SV.get(e)}function x4(){return bMt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZPe="https://content-firebaseappcheck.googleapis.com/v1",wMt="exchangeRecaptchaV3Token",EMt="exchangeDebugToken",Ehe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},xMt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SMt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new GC,this.pending.promise.catch(n=>{}),await TMt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new GC,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function TMt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AMt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$u=new vS("appCheck","AppCheck",AMt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xhe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function QJ(e){if(!js(e).activated)throw $u.create("use-before-activation",{appName:e.name})}function eDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=JN(n)+"d:"),r&&(o+=JN(r)+"h:"),o+=JN(i)+"m:"+JN(s)+"s",o}function JN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JJ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw $u.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw $u.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw $u.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw $u.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function CMt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${ZPe}/projects/${n}/apps/${r}:${wMt}?key=${i}`,body:{recaptcha_v3_token:t}}}function tDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${ZPe}/projects/${n}/apps/${r}:${EMt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IMt="firebase-app-check-database",kMt=1,oI="firebase-app-check-store",nDe="debug-token";let ZN=null;function rDe(){return ZN||(ZN=new Promise((e,t)=>{try{const n=indexedDB.open(IMt,kMt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t($u.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(oI,{keyPath:"compositeKey"})}}}catch(n){t($u.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ZN)}function RMt(e){return sDe(oDe(e))}function NMt(e,t){return iDe(oDe(e),t)}function PMt(e){return iDe(nDe,e)}function DMt(){return sDe(nDe)}async function iDe(e,t){const r=(await rDe()).transaction(oI,"readwrite"),s=r.objectStore(oI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a($u.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function sDe(e){const n=(await rDe()).transaction(oI,"readonly"),i=n.objectStore(oI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o($u.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function oDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=new e4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OMt(e){if(eJ()){let t;try{t=await RMt(e)}catch(n){aI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function y9(e,t){return eJ()?NMt(e,t).catch(n=>{aI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function $Mt(){let e;try{e=await DMt()}catch{}if(e)return e;{const t=Okt();return PMt(t).catch(n=>aI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(){return x4().enabled}async function eZ(){const e=x4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function MMt(){const e=xRe(),t=x4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new GC;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve($Mt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LMt={error:"UNKNOWN_ERROR"};function FMt(e){return ZQ.encodeString(JSON.stringify(e),!1)}async function TV(e,t=!1){const n=e.app;QJ(n);const r=js(n);let i=r.token,s;if(i&&!gw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(gw(u)?i=u:await y9(n,void 0))}if(!t&&i&&gw(i))return{token:i.token};let o=!1;if(ZJ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=JJ(tDe(n,await eZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await y9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await js(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?aI.warn(u.message):aI.error(u),s=u}let a;return i?s?gw(i)?a={token:i.token,internalError:s}:a=The(s):(a={token:i.token},r.token=i,await y9(n,i)):a=The(s),o&&lDe(n,a),a}async function jMt(e){const t=e.app;QJ(t);const{provider:n}=js(t);if(ZJ()){const r=await eZ(),{token:i}=await JJ(tDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function aDe(e,t,n,r){const{app:i}=e,s=js(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&gw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),She(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>She(e))}function uDe(e,t){const n=js(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function She(e){const{app:t}=e,n=js(t);let r=n.tokenRefresher;r||(r=BMt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function BMt(e){const{app:t}=e;return new SMt(async()=>{const n=js(t);let r;if(n.token?r=await TV(e,!0):r=await TV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=js(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Ehe.RETRIAL_MIN_WAIT,Ehe.RETRIAL_MAX_WAIT)}function lDe(e,t){const n=js(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function gw(e){return e.expireTimeMillis-Date.now()>0}function The(e){return{token:FMt(LMt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UMt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=js(this.app);for(const n of t)uDe(this.app,n.next);return Promise.resolve()}}function zMt(e,t){return new UMt(e,t)}function VMt(e){return{getToken:t=>TV(e,t),getLimitedUseToken:()=>jMt(e),addTokenListener:t=>aDe(e,"INTERNAL",t),removeTokenListener:t=>uDe(e.app,t)}}const HMt="@firebase/app-check",qMt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WMt="https://www.google.com/recaptcha/api.js";function GMt(e,t){const n=new GC,r=js(e);r.reCAPTCHAState={initialized:n};const i=YMt(e),s=xhe(!1);return s?Ahe(e,t,s,i,n):QMt(()=>{const o=xhe(!1);if(!o)throw new Error("no recaptcha");Ahe(e,t,o,i,n)}),n.promise}function Ahe(e,t,n,r,i){n.ready(()=>{XMt(e,t,n,r),i.resolve(n)})}function YMt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function KMt(e){QJ(e);const n=await js(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=js(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function XMt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{js(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{js(e).reCAPTCHAState.succeeded=!1}}),s=js(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function QMt(e){const t=document.createElement("script");t.src=WMt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;ZMt(this._throttleData);const i=await KMt(this._app).catch(o=>{throw $u.create("recaptcha-error")});if(!(!((t=js(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw $u.create("recaptcha-error");let s;try{s=await JJ(CMt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=JMt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),$u.create("throttled",{time:eDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=bS(t,"heartbeat"),GMt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof tZ?this._siteKey===t._siteKey:!1}}function JMt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+xMt,httpStatus:e};{const n=t?t.backoffCount:0,r=jkt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function ZMt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw $u.create("throttled",{time:eDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eLt(e=nJ(),t){e=ii(e);const n=bS(e,"app-check");if(x4().initialized||MMt(),ZJ()&&eZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw $u.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return tLt(e,t.provider,t.isTokenAutoRefreshEnabled),js(e).isTokenAutoRefreshEnabled&&aDe(r,"INTERNAL",()=>{}),r}function tLt(e,t,n){const r=_Mt(e,Object.assign({},JPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=OMt(e).then(i=>(i&&gw(i)&&(r.token=i,lDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const nLt="app-check",Che="app-check-internal";function rLt(){Nm(new Ah(nLt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return zMt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Che).initialize()})),Nm(new Ah(Che,e=>{const t=e.getProvider("app-check").getImmediate();return VMt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Mf(HMt,qMt)}rLt();function eP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof eP=="function"&&eP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof eP=="function"&&eP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof no<"u"?no:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:T;h(S,A,this.outcome)}else this.queue.push(new d(S,E,T));return S};function d(E,T,S){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,S){s(function(){var A;try{A=T(S)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,T){var S=g(p,T);if(S.status==="error")return a.reject(E,S.value);var A=S.value;if(A)m(E,A);else{E.state=l,E.outcome=T;for(var C=-1,I=E.queue.length;++C<I;)E.queue[C].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var S=-1,A=E.queue.length;++S<A;)E.queue[S].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var S=!1;function A(O){S||(S=!0,a.reject(E,O))}function C(O){S||(S=!0,a.resolve(E,O))}function I(){T(C,A)}var N=g(I);N.status==="error"&&A(N.value)}function g(E,T){var S={};try{S.value=E(T),S.status="success"}catch(A){S.status="error",S.value=A}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var T=new this(o);return a.reject(T,E)}f.all=b;function b(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),I=0,N=-1,O=new this(o);++N<S;)P(E[N],N);return O;function P($,F){T.resolve($).then(L,function(B){A||(A=!0,a.reject(O,B))});function L(B){C[F]=B,++I===S&&!A&&(A=!0,a.resolve(O,C))}}}f.race=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,I=new this(o);++C<S;)N(E[C]);return I;function N(O){T.resolve(O).then(function(P){A||(A=!0,a.resolve(I,P))},function(P){A||(A=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof no<"u"?no:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function T(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function I(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function N(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var le=u.open.apply(u,ge);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),I(Y)}})}function P(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function L(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var le=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=T(atob(Y.data));return c([se],{type:Y.type})}function z(Y){return Y&&Y.__local_forage_encoded_blob}function q(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw N(Y,le),le})}function U(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return D(Y).then(function(){U(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=q);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ge.forages.length;Ve++){var qe=ge.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ge.forages.slice(0);return f.all(le).then(function(){return Z.db=ge.db,P(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ge.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var hn=Ge[Et];hn!==se&&(hn._dbInfo.db=Z.db,hn._dbInfo.version=Z.version)}})}function H(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),z(st)&&(st=B(st)),ge(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var hn=Et.value;z(hn)&&(hn=B(hn));var Nt=Y(hn,Et.key,st++);Nt!==void 0?ge(Nt):Et.continue()}else ge()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?A(Ve.db).then(function(qe){return qe?se:L(se)}):se}).then(function(qe){U(fe._dbInfo,E,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var hn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Nt=hn.error?hn.error:hn.transaction.error;Oe(Nt)}}catch(Nt){Oe(Nt)}})}).catch(Oe)});return d(ge,Z),ge}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){U(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ge()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){U(se._dbInfo,E,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ge(Ge)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){U(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ge(qe.error)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,le){if(Y<0){ge(null);return}Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ge(null);return}Y===0||Ge?ge(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){U(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ge(qe.error)}}catch(st){ge(st)}})}).catch(ge)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):P(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ge=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;C(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var hn=st[Et];hn._dbInfo.db=null,hn._dbInfo.version=qe}var Nt=new f(function(Bn,Ir){var kr=u.open(Y.name,qe);kr.onerror=function(Vo){var hd=kr.result;hd.close(),Ir(Vo)},kr.onupgradeneeded=function(){var Vo=kr.result;Vo.deleteObjectStore(Y.storeName)},kr.onsuccess=function(){var Vo=kr.result;Vo.close(),Bn(Vo)}});return Nt.then(function(Bn){Ge.db=Bn;for(var Ir=0;Ir<st.length;Ir++){var kr=st[Ir];kr._dbInfo.db=Bn,I(kr._dbInfo)}}).catch(function(Bn){throw(N(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ge=Oe.then(function(Ve){C(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var hn=new f(function(Nt,Bn){var Ir=u.deleteDatabase(Y.name);Ir.onerror=function(){var kr=Ir.result;kr&&kr.close(),Bn(Ir.error)},Ir.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Ir.onsuccess=function(){var kr=Ir.result;kr&&kr.close(),Nt(kr)}});return hn.then(function(Nt){qe.db=Nt;for(var Bn=0;Bn<Ge.length;Bn++){var Ir=Ge[Bn];I(Ir._dbInfo)}}).catch(function(Nt){throw(N(Y,Nt)||f.resolve()).catch(function(){}),Nt})})}return d(ge,se),ge}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:H,setItem:ne,removeItem:ce,clear:de,length:he,key:ye,keys:Ie,dropInstance:be};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",We="si08",me="ui08",dt="uic8",vt="si16",pe="si32",Ce="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Tr=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),Oe=yt.indexOf(Y[fe+1]),Ve=yt.indexOf(Y[fe+2]),qe=yt.indexOf(Y[fe+3]),st[ge++]=le<<2|Oe>>4,st[ge++]=(Oe&15)<<4|Ve>>2,st[ge++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function pn(Y,se){var Z="";if(Y&&(Z=Tr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Tr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=ke;Y instanceof ArrayBuffer?(fe=Y,ge+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=We:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=dt:Z==="[object Int16Array]"?ge+=vt:Z==="[object Uint16Array]"?ge+=Ce:Z==="[object Int32Array]"?ge+=pe:Z==="[object Uint32Array]"?ge+=He:Z==="[object Float32Array]"?ge+=ut:Z==="[object Float64Array]"?ge+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ge+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Ot+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Sn(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Ot&&_e.test(se)){var ge=se.match(_e);fe=ge[1],se=se.substring(ge[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Ot:return c([le],{type:fe});case We:return new Int8Array(le);case me:return new Uint8Array(le);case dt:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:pn,deserialize:Sn,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Uo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ge}function Oi(Y,se,Z,fe,ge,le){Y.executeSql(Z,fe,ge,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ge,le)},le)},le):le(Oe,Ve)},le)}function Tn(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ge(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function $i(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,hn=0;hn<Et;hn++){var Nt=st.item(hn),Bn=Nt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Nt.key,hn+1),Bn!==void 0){ge(Bn);return}}ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ar(Y,se,Z,fe){var ge=this;Y=p(Y);var le=new f(function(Oe,Ve){ge.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ge._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(hn){Oi(hn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Nt,Bn){Ve(Bn)})},function(hn){if(hn.code===hn.QUOTA_ERR){if(fe>0){Oe(Ar.apply(ge,[Y,qe,Z,fe-1]));return}Ve(hn)}})})}).catch(Ve)});return d(le,Z),le}function ds(Y,se,Z){return Ar.apply(this,[Y,se,Z,1])}function sp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function ol(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Oi(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function fd(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Oi(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Er(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ge(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ci(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Oi(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Xr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ge,le){Z(le)})},function(fe){Z(fe)})})}function uu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Xr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Nt){return new f(function(Bn,Ir){qe.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){Bn()},function(kr,Vo){Ir(Vo)})})}for(var st=[],Et=0,hn=le.storeNames.length;Et<hn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Nt){Ve(Nt)})},function(qe){Ve(qe)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Aa={_driver:"webSQLStorage",_initStorage:Uo,_support:Ue(),iterate:$i,getItem:Tn,setItem:ds,removeItem:sp,clear:ol,length:fd,key:Er,keys:Ci,dropInstance:uu};function Ca(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Te(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var le=localStorage.key(ge);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,le=localStorage.getItem(ge.keyPrefix+Y);return le&&(le=ge.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,le=ge.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ge.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Ht(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ge.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,le=[],Oe=0;Oe<ge;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function dn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ge,Z),ge}function Cr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Vt={_driver:"localStorageWrapper",_initStorage:Te,_support:Ca(),iterate:St,getItem:ot,setItem:ir,removeItem:dn,clear:Se,length:jn,key:Ht,keys:On,dropInstance:Cr},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},zr=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(sr(se[ge],Z))return!0;ge++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ii={},qs={},Qr={INDEXEDDB:Ke,WEBSQL:Aa,LOCALSTORAGE:Vt},go=[Qr.INDEXEDDB._driver,Qr.WEBSQL._driver,Qr.LOCALSTORAGE._driver],Mi=["dropInstance"],Li=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Mi),zo={description:"",driver:go.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ia(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Ws(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Ql=function(){function Y(se){o(this,Y);for(var Z in Qr)if(Qr.hasOwnProperty(Z)){var fe=Qr[Z],ge=fe._driver;this[Z]=ge,Ii[ge]||this.defineDriver(fe)}this._defaultConfig=Ws({},zo),this._config=Ws({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=Li.concat("_initStorage"),Et=0,hn=st.length;Et<hn;Et++){var Nt=st[Et],Bn=!zr(Mi,Nt);if((Bn||Z[Nt])&&typeof Z[Nt]!="function"){Ve(Ge);return}}var Ir=function(){for(var hd=function(Jl){return function(){var lu=new Error("Method "+Jl+" is not implemented by the current driver"),ap=f.reject(lu);return d(ap,arguments[arguments.length-1]),ap}},op=0,WS=Mi.length;op<WS;op++){var Zy=Mi[op];Z[Zy]||(Z[Zy]=hd(Zy))}};Ir();var kr=function(hd){Ii[qe]&&console.info("Redefining LocalForage driver: "+qe),Ii[qe]=Z,qs[qe]=hd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(kr,Ve):kr(!!Z._support):kr(!0)}catch(Vo){Ve(Vo)}});return h(le,fe,ge),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var le=Ii[Z]?f.resolve(Ii[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ge),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var hn=0;function Nt(){for(;hn<Et.length;){var Bn=Et[hn];return hn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Nt)}Ve();var Ir=new Error("No available storage method found.");return le._driverSet=f.reject(Ir),le._driverSet}return Nt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(hn){le._driver=hn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!qs[Z]},Y.prototype._extend=function(Z){Ws(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,le=Z.length;ge<le;ge++){var Oe=Z[ge];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Li.length;Z<fe;Z++)Ia(this,Li[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),dd=new Ql;r.exports=dd},{3:3}]},{},[4])(4)})})(cDe);var iLt=cDe.exports;const Y_=Wl(iLt);var _o=[];for(var v9=0;v9<256;++v9)_o.push((v9+256).toString(16).slice(1));function sLt(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}var tP,oLt=new Uint8Array(16);function aLt(){if(!tP&&(tP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tP(oLt)}var uLt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ihe={randomUUID:uLt};function $$(e,t,n){if(Ihe.randomUUID&&!t&&!e)return Ihe.randomUUID();e=e||{};var r=e.random||(e.rng||aLt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sLt(r)}class fDe{constructor(t){fu(this,"engine");fu(this,"connected",!1);fu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function M$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function kT(e){return e.participantId!==void 0}class pc extends fDe{constructor(){super("firebase");fu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");fu(this,"firestore");fu(this,"collectionPrefix","prod-");fu(this,"studyCollection");fu(this,"storage");fu(this,"studyId","");fu(this,"localForage",Y_.createInstance({name:"currentParticipantId"}));fu(this,"participantData",null);const n=lQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=kRe(n);this.firestore=eMt(r,{}),this.storage=lOt();try{eLt(r,{provider:new tZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await tMt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=I$();if(!i.currentUser&&(await INt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await M$(JSON.stringify(r));if(this.studyCollection=Zc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(kT(a))return this.participantData=a,a;const l=await M$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=nc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=$$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Is(this.studyCollection,"sequenceAssignment");await ul(i,{});const s=Zc(i,"sequenceAssignment"),o=Is(s,this.currentParticipantId),a=vhe(s,lMt("participantId","==","")),u=await IT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await mMt(m.ref),await ul(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await ul(o,{participantId:this.currentParticipantId,timestamp:vMt()});const l=vhe(s,cMt("timestamp","asc")),d=(await IT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=nc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await AT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");kT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return kT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=$$();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Zc(this.firestore,"user-management"),i=await IT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await ul(Is(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await ul(Is(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await ul(Is(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await ul(Is(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await ul(Is(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=nc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await AT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");kT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Zc(this.firestore,`${this.collectionPrefix}${n}`),s=nc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!kT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Is(i,"sequenceAssignment"),u=Zc(a,"sequenceAssignment"),l=Is(u,r);await pMt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=Is(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await ul(s,{[r]:i},{merge:!0})}async getModes(n){const r=Is(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await m9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await ul(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Is(this.firestore,"metadata","collections"),i=await m9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Is(this.firestore,"metadata","collections");await ul(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Is(this.firestore,"metadata","collections"),i=await m9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await ul(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=nc(this.storage,n),s=(await AT(r)).items.map(o=>$de(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=nc(this.storage,n),o=(await AT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=nc(this.storage,n),s=nc(this.storage,r),o=await c9(i),u=await(await fetch(o)).blob();await l9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Zc(this.firestore,n),s=Is(i,"sequenceAssignment"),o=Zc(s,"sequenceAssignment"),a=Zc(this.firestore,r),u=Is(a,"sequenceAssignment");await ul(u,{});const l=Zc(u,"sequenceAssignment"),c=await IT(o),f=whe(this.firestore);c.docs.forEach(d=>{const h=Is(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Zc(this.firestore,n),i=Is(r,"sequenceAssignment"),s=Zc(i,"sequenceAssignment"),o=await IT(s),a=whe(this.firestore);o.forEach(u=>{const l=Is(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=nc(this.storage,n);return(await AT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await c9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await c9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await l9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await l9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await $de(i)}}const dDe=R.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),zb=()=>R.useContext(dDe);function lLt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=R.useState(t),[o,a]=R.useState(!1),{storageEngine:u}=As(),l=async()=>{const h=I$();try{await $Nt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;R.useEffect(()=>{s(t);let h;if(u instanceof pc)try{h=I$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof pc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=ONt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=R.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(dDe.Provider,{value:d,children:i.determiningStatus?_.jsx(Ol,{visible:!0}):e})}function RA({studyIds:e}){const t=Wm(),{studyId:n}=gm(),r=Iy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=As(),{user:o,logout:a}=zb(),[u,l]=R.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(GKe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(jKe,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(F_e,{}),href:"/settings",needAdmin:!0}];return _.jsx(di.Header,{p:"md",children:_.jsxs(za,{mt:-7,align:"center",children:[_.jsx(za.Col,{span:6,children:_.jsxs(Dt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Cy,{w:40,src:`${jh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Il,{w:"md"}),_.jsx(xi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(za.Col,{span:6,children:_.jsxs(Dt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(GI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(dG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Lh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Dt,{direction:"column",mt:20,children:[_.jsx(et,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(ve,{ml:10,children:[_.jsx(bE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function hDe({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=pv(!1),[s,{close:o,open:a}]=pv(!1),[u,{open:l,close:c}]=pv(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(xs,{children:[_.jsxs(ei,{opened:n,children:[_.jsx(ei.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:()=>{JQ(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:_.jsx(HKe,{})})}),_.jsx(ei.Dropdown,{children:_.jsx(et,{children:"Download all participants data as JSON"})})]}),_.jsxs(ei,{opened:s,children:[_.jsx(ei.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:_.jsx(j_e,{})})}),_.jsx(ei.Dropdown,{children:_.jsx(et,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&_.jsx(GIt,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function cLt({cellData:e}){return _.jsx(An.Td,{children:_.jsx(Gd,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(ve,{children:[_.jsxs(et,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(et,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function khe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(An.Td,{children:[t.toFixed(1)," ","s"]})}function fLt(e){const{metaData:t}=e;return _.jsx(An.Td,{children:_.jsx(jG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Gd,{gap:"xs",children:[_.jsxs(ve,{children:["IP:"," ",t.ip]}),_.jsxs(ve,{children:["Language:"," ",t.language]}),_.jsxs(ve,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(ve,{children:["User Agent:"," ",t.userAgent]})]})})})}function dLt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=As(),{studyId:o}=gm(),{user:a}=zb(),u=async b=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,b),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=R.useState([]),[f,d]=R.useState(!1),h=()=>$U({title:"Confirm rejecting participants",children:_.jsxs(et,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(et,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const b=l.map(async w=>await u(w));await Promise.all(b),c([]),await i(),d(!1)}}),p=R.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(b){b==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(b)?c(l.filter(w=>w!==b)):c([...l,b])}const g=LEe(r.sequence),y=[_.jsx(An.Th,{children:_.jsx(Dt,{justify:"center",children:_.jsx(wl,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),_.jsx(An.Th,{children:"ID"},"ID"),_.jsx(An.Th,{children:"Status"},"status"),_.jsx(An.Th,{children:"Meta"},"meta"),...g.flatMap(b=>[_.jsx(An.Th,{children:b.componentName},`header-${b.componentName}-${b.timesSeenInBlock}`),_.jsxs(An.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:b.componentName})," ","Duration"]},`header-${b.componentName}-${b.timesSeenInBlock}-duration`)]),_.jsx(An.Th,{children:"Total Duration"},"total-duration")],v=p.map(b=>_.jsxs(An.Tr,{children:[_.jsx(An.Td,{children:_.jsx(Dt,{justify:"center",children:_.jsx(wl,{mb:-4,checked:l.includes(b.participantId),onChange:()=>m(b.participantId)})})}),_.jsx(An.Td,{style:{whiteSpace:"nowrap"},children:b.participantId}),_.jsx(An.Td,{children:_.jsxs(Dt,{direction:"row",align:"center",children:[b.rejected?_.jsx(vs,{label:"Rejected",children:_.jsx(eY,{size:16,color:"red",style:{marginBottom:-3}})}):b.completed?_.jsx(vs,{label:"Completed",children:_.jsx($_e,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(vs,{label:"In Progress",children:_.jsx(L_e,{size:16,color:"orange",style:{marginBottom:-3}})}),!b.completed&&_.jsxs(et,{size:"sm",mb:-1,ml:4,children:[(Object.entries(b.answers).filter(([w,E])=>E.endTime!==void 0).length/(bm(b.sequence).length-1)*100).toFixed(2),"%"]})]})}),b.metadata?_.jsx(fLt,{metaData:b.metadata}):_.jsx(An.Td,{children:"N/A"}),g.map(w=>{const E=$Ee(b.sequence,w.orderPath),T=E&&Object.entries(b.answers).sort((S,A)=>{const C=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),I=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10);return C-I}).filter(([S])=>{const A=S.slice(0,S.lastIndexOf("_")),C=parseInt(S.slice(S.lastIndexOf("_")+1),10);return A===w.componentName&&C<=E[0].lastIndex&&C>=E[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1?_.jsxs(Wi.Fragment,{children:[_.jsx(cLt,{cellData:T[w.timesSeenInBlock][1]}),_.jsx(khe,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`):_.jsxs(Wi.Fragment,{children:[_.jsx(An.Td,{children:"N/A"}),_.jsx(An.Td,{children:"N/A"})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),_.jsx(khe,{cellData:{startTime:Math.min(...Object.values(b.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(b.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${b.participantId}-total-duration`)]},b.participantId));return p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ol,{visible:f,overlayProps:{blur:2}}),_.jsxs(Dt,{justify:"space-between",mb:8,p:8,children:[_.jsx(xs,{children:_.jsx(GI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(b=>({value:b.participantId,label:b.participantId})),searchable:!0,value:null,leftSection:_.jsx(nXe,{size:14}),onChange:b=>b&&m(b)})}),_.jsxs(xs,{children:[_.jsx(hDe,{allParticipants:[...e,...t],studyId:o||""}),_.jsx(Rn,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),_.jsx(Dt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(An,{striped:!0,withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:y})}),_.jsx(An.Tbody,{children:v})]})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Il,{h:"xl"}),_.jsx(Dt,{justify:"center",align:"center",children:_.jsx(et,{children:"No data available"})})]})}function hLt({studyId:e,refresh:t}){const[n,r]=R.useState(!1),[i,s]=R.useState(!1),[o,a]=R.useState(!1),[u,l]=R.useState(""),[c,f]=R.useState([]),[d,h]=R.useState(""),[p,m]=R.useState(!1),[g,y]=R.useState(!1),{storageEngine:v}=As(),b=v,w=R.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);R.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},T=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},S=async O=>{m(!0),await b.restoreSnapshot(e,O),w(),m(!1),await t()},A=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},C=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},I=()=>$U({title:"Create a Snapshot",children:_.jsx(et,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),N=O=>$U({title:"Restore Snapshot",children:_.jsx(et,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>S(O)});return _.jsxs(_.Fragment,{children:[_.jsx(Ol,{visible:p}),_.jsxs(Dt,{justify:"space-between",align:"center",children:[_.jsxs(ve,{style:{width:"70%"},children:[_.jsx(xi,{order:5,children:"Create a Snapshot"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(et,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(vs,{label:"Create a snapshot",children:_.jsx(Rn,{onClick:I,children:"Snapshot"})})]}),_.jsx(Il,{h:"lg"}),_.jsxs(Dt,{justify:"space-between",align:"center",children:[_.jsxs(ve,{style:{width:"70%"},children:[_.jsx(xi,{order:5,children:"Archive Data"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(vs,{label:"Snapshot and Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Il,{h:"lg"}),_.jsxs(Dt,{justify:"space-between",align:"center",children:[_.jsxs(ve,{style:{width:"70%"},children:[_.jsx(xi,{order:5,children:"Delete Data"}),_.jsxs(et,{children:["This will delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(vs,{label:"Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(Il,{h:"xl"}),_.jsxs(Dt,{direction:"column",children:[_.jsx(Dt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(xi,{order:5,children:"Snapshots"})}),_.jsxs(ve,{style:{position:"relative"},children:[_.jsx(Ol,{visible:g}),c.length>0?c.map(O=>_.jsxs(Dt,{justify:"space-between",mb:"xs",children:[_.jsx(et,{children:O}),_.jsxs(Dt,{direction:"row",gap:"xs",children:[_.jsx(vs,{label:"Restore Snapshot",children:_.jsx(O0,{color:"blue",variant:"subtle",onClick:()=>{N(O)},children:_.jsx(eXe,{})})}),_.jsx(vs,{label:"Delete Snapshot",children:_.jsx(O0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:_.jsx(B_e,{})})})]})]},O)):_.jsx(et,{children:"No snapshots."})]})]}),_.jsxs(ws,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(et,{children:"Archive Data"}),children:[_.jsx(et,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(gv,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(Dt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:T,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(ws,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(et,{children:"Delete Snapshot"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(gv,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(Dt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(ws,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(et,{children:"Delete Live Data"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(gv,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(Dt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]})]})}function pLt({studyId:e}){const{storageEngine:t}=As(),[n,r]=R.useState(!1),[i,s]=R.useState(!1),[o,a]=R.useState(!1),[u,l]=R.useState(!1);R.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(Gd,{children:[_.jsx(Nw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Nw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Nw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function mLt({studyId:e,refresh:t}){const{storageEngine:n}=As();return _.jsx(kc,{children:_.jsxs(vu,{multiple:!0,variant:"contained",children:[_.jsxs(vu.Item,{value:"ReVISit Modes",children:[_.jsx(vu.Control,{children:_.jsx(xi,{order:5,children:"ReVISit Modes"})}),_.jsx(vu.Panel,{children:_.jsx(pLt,{studyId:e})})]},"modes"),_.jsxs(vu.Item,{value:"Data Management",children:[_.jsx(vu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(xi,{order:5,children:"Data Management"})}),_.jsx(vu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(hLt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const S_=14;function pDe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Dt,{ml:4,gap:4,children:[_.jsx(vs,{label:"Completed",children:_.jsx(Xp,{variant:"light",color:"green",leftSection:_.jsx($_e,{width:S_,height:S_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(vs,{label:"In Progress",children:_.jsx(Xp,{variant:"light",color:"orange",leftSection:_.jsx(L_e,{width:S_,height:S_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(vs,{label:"Rejected",children:_.jsx(Xp,{variant:"light",color:"red",leftSection:_.jsx(eY,{width:S_,height:S_,style:{paddingTop:1}}),pb:1,children:n})})]})}var mDe={exports:{}},gLt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yLt=gLt,vLt=yLt;function gDe(){}function yDe(){}yDe.resetWarningCache=gDe;var bLt=function(){function e(r,i,s,o,a,u){if(u!==vLt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yDe,resetWarningCache:gDe};return n.PropTypes=n,n};mDe.exports=bLt();var _Lt=mDe.exports;const Rhe=Wl(_Lt),Nhe={};function AV(e,t){e===void 0&&(e=Nhe),t===void 0&&(t=Nhe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var wLt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ELt=Object.prototype.hasOwnProperty;function CV(e,t){return ELt.call(e,t)}function IV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)CV(e,i)&&r.push(i);return r}function Tl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function kV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function R1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function vDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function RV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(RV(e[t]))return!0}else if(typeof e=="object"){for(var r=IV(e),i=r.length,s=0;s<i;s++)if(RV(e[r[s]]))return!0}}return!1}function Phe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var bDe=function(e){wLt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Phe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Phe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=bDe,xLt=Tl,yw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=L$(n,this.path);r&&(r=Tl(r));var i=Ev(n,{op:"remove",path:this.from}).removed;return Ev(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=L$(n,this.from);return Ev(n,{op:"add",path:this.path,value:Tl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:uI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},SLt={add:function(e,t,n){return kV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:yw.move,copy:yw.copy,test:yw.test,_get:yw._get};function L$(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ev(e,n),n.value}function Ev(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):F$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=L$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=uI(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Tl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=F$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=vDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!kV(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);kV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=SLt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=yw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function S4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Tl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Ev(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function TLt(e,t,n){var r=Ev(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function F$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(yw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&RV(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=_De([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function _De(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)S4(Tl(t),Tl(e),n||!0);else{n=n||F$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function uI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!uI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!uI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const ALt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:uI,applyOperation:Ev,applyPatch:S4,applyReducer:TLt,deepClone:xLt,getValueByPointer:L$,validate:_De,validator:F$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var nZ=new WeakMap,CLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ILt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function kLt(e){return nZ.get(e)}function RLt(e,t){return e.observers.get(t)}function NLt(e,t){e.observers.delete(t.callback)}function PLt(e,t){t.unobserve()}function DLt(e,t){var n=[],r,i=kLt(e);if(!i)i=new CLt(e),nZ.set(e,i);else{var s=RLt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Tl(e),t){r.callback=t,r.next=null;var o=function(){NV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){NV(r),clearTimeout(r.next),NLt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new ILt(t,r)),r}function NV(e,t){t===void 0&&(t=!1);var n=nZ.get(e.object);rZ(n.value,e.object,e.patches,"",t),e.patches.length&&S4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function rZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=IV(t),o=IV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(CV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?rZ(c,f,n,r+"/"+R1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+R1(l),value:Tl(c)}),n.push({op:"replace",path:r+"/"+R1(l),value:Tl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+R1(l),value:Tl(c)}),n.push({op:"remove",path:r+"/"+R1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!CV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+R1(l),value:Tl(t[l])})}}}function OLt(e,t,n){n===void 0&&(n=!1);var r=[];return rZ(e,t,r,"",n),r}const $Lt=Object.freeze(Object.defineProperty({__proto__:null,compare:OLt,generate:NV,observe:DLt,unobserve:PLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},ALt,$Lt,{JsonPatchError:bDe,deepClone:Tl,escapePathComponent:R1,unescapePathComponent:vDe});var MLt=/("(?:[^\\"]|\\.)*")|[:,]/g,LLt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(MLt,function(T,S){return S||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const b9=Wl(LLt);function il(e,t,n){return e.fields=t||[],e.fname=n,e}function Yi(e){return e==null?null:e.fname}function pa(e){return e==null?null:e.fields}function wDe(e){return e.length===1?FLt(e[0]):jLt(e)}const FLt=e=>function(t){return t[e]},jLt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function Kh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Pc(e,t,n){const r=Kh(e);return e=r.length===1?r[0]:e,il((n&&n.get||wDe)(r),[e],t||e)}const Hk=Pc("id"),wa=il(e=>e,[],"identity"),zg=il(()=>0,[],"zero"),TS=il(()=>1,[],"one"),Dc=il(()=>!0,[],"true"),wg=il(()=>!1,[],"false");function BLt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const EDe=0,iZ=1,sZ=2,xDe=3,SDe=4;function oZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:BLt,r=e||EDe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=iZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=sZ&&n(t||"warn","WARN",arguments),this},info(){return r>=xDe&&n(t||"log","INFO",arguments),this},debug(){return r>=SDe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function mt(e){return e===Object(e)}const Dhe=e=>e!=="__proto__";function AS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=ULt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;CS(r,s,i[s],o)}return r},{})}function CS(e,t,n,r){if(!Dhe(t))return;let i,s;if(mt(n)&&!je(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?CS(s,i,n[i]):Dhe(i)&&(s[i]=n[i])}else e[t]=n}function ULt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function fa(e){return e==null||e===""?null:+e}const TDe=e=>t=>e*Math.exp(t),ADe=e=>t=>Math.log(e*t),CDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),IDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,j$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function T4(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function kDe(e,t){return T4(e,t,fa,wa)}function RDe(e,t){var n=Math.sign(e[0]);return T4(e,t,ADe(n),TDe(n))}function NDe(e,t,n){return T4(e,t,j$(n),j$(1/n))}function PDe(e,t,n){return T4(e,t,CDe(n),IDe(n))}function A4(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function aZ(e,t,n){return A4(e,t,n,fa,wa)}function uZ(e,t,n){const r=Math.sign(e[0]);return A4(e,t,n,ADe(r),TDe(r))}function B$(e,t,n,r){return A4(e,t,n,j$(r),j$(1/r))}function lZ(e,t,n,r){return A4(e,t,n,CDe(r),IDe(r))}function DDe(e){return 1+~~(new Date(e).getMonth()/3)}function ODe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ht(e){return e!=null?je(e)?e:[e]:[]}function $De(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function vn(e){return typeof e=="function"}const zLt="descending";function cZ(e,t,n){n=n||{},t=ht(t)||[];const r=[],i=[],s={},o=n.comparator||VLt;return ht(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===zLt?-1:1),i.push(a=vn(a)?a:Pc(a,null,n)),(pa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:il(o(i,r),Object.keys(s))}const C4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),VLt=(e,t)=>e.length===1?HLt(e[0],t[0]):qLt(e,t,e.length),HLt=(e,t)=>function(n,r){return C4(e(n),e(r))*t},qLt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=C4(s(r),s(i));return o*t[a]});function Ea(e){return vn(e)?e:()=>e}function fZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function yn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function kh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function MDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const WLt=Object.prototype.hasOwnProperty;function jt(e,t){return WLt.call(e,t)}const nP={};function IS(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==nP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===nP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=nP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==nP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function LDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),yn(r,n)}function vw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Uy(e){return typeof e=="boolean"}function S0(e){return Object.prototype.toString.call(e)==="[object Date]"}function FDe(e){return e&&vn(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function jDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pt(e){return typeof e=="string"}function dZ(e,t,n){e&&(e=t?ht(e).map(a=>a.replace(/\\(.)/g,"$1")):ht(e));const r=e&&e.length,i=n&&n.get||wDe,s=a=>i(t?[a]:Kh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return il(o,e,"key")}function BDe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const GLt=1e4;function UDe(e){e=+e||GLt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function zDe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function S2(e,t){let n="";for(;--t>=0;)n+=e;return n}function VDe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?S2(i,o)+s:r==="center"?S2(i,~~(o/2))+s+S2(i,Math.ceil(o/2)):s+S2(i,o)}function qk(e){return e&&Qn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":mt(e)||pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function hZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const YLt=e=>lr(e)||S0(e)?e:Date.parse(e);function pZ(e,t){return t=t||YLt,e==null||e===""?null:t(e)}function mZ(e){return e==null||e===""?null:e+""}function Gf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function HDe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function kg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function KLt(e){return e}function XLt(e){if(e==null)return KLt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function QLt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function JLt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Ohe(e,n)})}:Ohe(e,t)}function Ohe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=qDe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function qDe(e,t){var n=XLt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&QLt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function ZLt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function e6t(e){return qDe(e,t6t.apply(this,arguments))}function t6t(e,t,n){var r,i,s;if(arguments.length>1)r=n6t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:ZLt(e,r)}}function n6t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Oo="year",Ju="quarter",ma="month",Ms="week",Zu="date",ca="day",Rh="dayofyear",Ul="hours",zl="minutes",Oc="seconds",Yf="milliseconds",gZ=[Oo,Ju,ma,Ms,Zu,ca,Rh,Ul,zl,Oc,Yf],_9=gZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function yZ(e){const t=ht(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{jt(_9,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Ms]||n[ca]?1:0)+(n[Ju]||n[ma]||n[Zu]?1:0)+(n[Rh]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>_9[i]-_9[s]),t}const r6t={[Oo]:"%Y ",[Ju]:"Q%q ",[ma]:"%b ",[Zu]:"%d ",[Ms]:"W%U ",[ca]:"%a ",[Rh]:"%j ",[Ul]:"%H:00",[zl]:"00:%M",[Oc]:":%S",[Yf]:".%L",[`${Oo}-${ma}`]:"%Y-%m ",[`${Oo}-${ma}-${Zu}`]:"%Y-%m-%d ",[`${Ul}-${zl}`]:"%H:%M"};function WDe(e,t){const n=yn({},r6t,t),r=yZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const B1=new Date;function vZ(e){return B1.setFullYear(e),B1.setMonth(0),B1.setDate(1),B1.setHours(0,0,0,0),B1}function GDe(e){return KDe(new Date(e))}function YDe(e){return PV(new Date(e))}function KDe(e){return Zp.count(vZ(e.getFullYear())-1,e)}function PV(e){return eS.count(vZ(e.getFullYear())-1,e)}function DV(e){return vZ(e).getDay()}function i6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function XDe(e){return JDe(new Date(e))}function QDe(e){return OV(new Date(e))}function JDe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return g0.count(t-1,e)}function OV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return tS.count(t-1,e)}function $V(e){return B1.setTime(Date.UTC(e,0,1)),B1.getUTCDay()}function s6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function ZDe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,o6t(n[b],r[b],y===o&&s,v)),u=new Date,l=Gf(e),c=l[Oo]?a(Oo):Ea(2012),f=l[ma]?a(ma):l[Ju]?a(Ju):zg,d=l[Ms]&&l[ca]?a(ca,1,Ms+ca):l[Ms]?a(Ms,1):l[ca]?a(ca,1):l[Zu]?a(Zu,1):l[Rh]?a(Rh,1):TS,h=l[Ul]?a(Ul):zg,p=l[zl]?a(zl):zg,m=l[Oc]?a(Oc):zg,g=l[Yf]?a(Yf):zg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function o6t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function nx(e,t,n){return t+e*7-(n+6)%7}const a6t={[Oo]:e=>e.getFullYear(),[Ju]:e=>Math.floor(e.getMonth()/3),[ma]:e=>e.getMonth(),[Zu]:e=>e.getDate(),[Ul]:e=>e.getHours(),[zl]:e=>e.getMinutes(),[Oc]:e=>e.getSeconds(),[Yf]:e=>e.getMilliseconds(),[Rh]:e=>KDe(e),[Ms]:e=>PV(e),[Ms+ca]:(e,t)=>nx(PV(e),e.getDay(),DV(t)),[ca]:(e,t)=>nx(1,e.getDay(),DV(t))},u6t={[Ju]:e=>3*e,[Ms]:(e,t)=>nx(e,0,DV(t))};function eOe(e,t){return ZDe(e,t||1,a6t,u6t,i6t)}const l6t={[Oo]:e=>e.getUTCFullYear(),[Ju]:e=>Math.floor(e.getUTCMonth()/3),[ma]:e=>e.getUTCMonth(),[Zu]:e=>e.getUTCDate(),[Ul]:e=>e.getUTCHours(),[zl]:e=>e.getUTCMinutes(),[Oc]:e=>e.getUTCSeconds(),[Yf]:e=>e.getUTCMilliseconds(),[Rh]:e=>JDe(e),[Ms]:e=>OV(e),[ca]:(e,t)=>nx(1,e.getUTCDay(),$V(t)),[Ms+ca]:(e,t)=>nx(OV(e),e.getUTCDay(),$V(t))},c6t={[Ju]:e=>3*e,[Ms]:(e,t)=>nx(e,0,$V(t))};function tOe(e,t){return ZDe(e,t||1,l6t,c6t,s6t)}const f6t={[Oo]:vh,[Ju]:IC.every(3),[ma]:IC,[Ms]:eS,[Zu]:Zp,[ca]:Zp,[Rh]:Zp,[Ul]:c6,[zl]:u6,[Oc]:zp,[Yf]:NE},d6t={[Oo]:bh,[Ju]:kC.every(3),[ma]:kC,[Ms]:tS,[Zu]:g0,[ca]:g0,[Rh]:g0,[Ul]:f6,[zl]:l6,[Oc]:zp,[Yf]:NE};function kS(e){return f6t[e]}function RS(e){return d6t[e]}function nOe(e,t,n){return e?e.offset(t,n):void 0}function rOe(e,t,n){return nOe(kS(e),t,n)}function iOe(e,t,n){return nOe(RS(e),t,n)}function sOe(e,t,n,r){return e?e.range(t,n,r):void 0}function oOe(e,t,n,r){return sOe(kS(e),t,n,r)}function aOe(e,t,n,r){return sOe(RS(e),t,n,r)}const T2=1e3,A2=T2*60,C2=A2*60,I4=C2*24,h6t=I4*7,$he=I4*30,MV=I4*365,uOe=[Oo,ma,Zu,Ul,zl,Oc,Yf],I2=uOe.slice(0,-1),k2=I2.slice(0,-1),R2=k2.slice(0,-1),p6t=R2.slice(0,-1),m6t=[Oo,Ms],Mhe=[Oo,ma],lOe=[Oo],RT=[[I2,1,T2],[I2,5,5*T2],[I2,15,15*T2],[I2,30,30*T2],[k2,1,A2],[k2,5,5*A2],[k2,15,15*A2],[k2,30,30*A2],[R2,1,C2],[R2,3,3*C2],[R2,6,6*C2],[R2,12,12*C2],[p6t,1,I4],[m6t,1,h6t],[Mhe,1,$he],[Mhe,3,3*$he],[lOe,1,MV]];function cOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(qk(t))/n;let i=Kx(a=>a[2]).right(RT,r),s,o;return i===RT.length?(s=lOe,o=j0(t[0]/MV,t[1]/MV,n)):i?(i=RT[r/RT[i-1][2]<RT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=uOe,o=Math.max(j0(t[0],t[1],n),1)),{units:s,step:o}}function N2(e){const t={};return n=>t[n]||(t[n]=e(n))}function g6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=y6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function y6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function fOe(e){const t=N2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Uv(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return g6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Uv(o??",f");const a=j0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=tSe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=nSe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=eSe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let LV;dOe();function dOe(){return LV=fOe({format:Qx,formatPrefix:XY})}function hOe(e){return fOe(Zxe(e))}function U$(e){return arguments.length?LV=hOe(e):LV}function Lhe(e,t,n){n=n||{},mt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Oc),i=t(zl),s=t(Ul),o=t(Zu),a=t(Ms),u=t(ma),l=t(Ju),c=t(Oo),f=e(n[Yf]||".%L"),d=e(n[Oc]||":%S"),h=e(n[zl]||"%I:%M"),p=e(n[Ul]||"%I %p"),m=e(n[Zu]||n[ca]||"%a %d"),g=e(n[Ms]||"%b %d"),y=e(n[ma]||"%B"),v=e(n[Ju]||"%B"),b=e(n[Oo]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function pOe(e){const t=N2(e.format),n=N2(e.utcFormat);return{timeFormat:r=>pt(r)?t(r):Lhe(t,kS,r),utcFormat:r=>pt(r)?n(r):Lhe(n,RS,r),timeParse:N2(e.parse),utcParse:N2(e.utcParse)}}let FV;mOe();function mOe(){return FV=pOe({format:lK,parse:mTe,utcFormat:d6,utcParse:gTe})}function gOe(e){return pOe(cTe(e))}function lI(e){return arguments.length?FV=gOe(e):FV}const jV=(e,t)=>yn({},e,t);function yOe(e,t){const n=e?hOe(e):U$(),r=t?gOe(t):lI();return jV(n,r)}function bZ(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?jV(U$(e),lI(t)):jV(U$(),lI())}function v6t(){return dOe(),mOe(),bZ()}const b6t=/^(data:|([A-Za-z]+:)?\/\/)/,_6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,w6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Fhe="file://";function E6t(e,t){return n=>({options:n||{},sanitize:S6t,load:x6t,fileAccess:!!t,file:T6t(t),http:C6t(e)})}async function x6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function S6t(e,t){t=yn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=_6t.test(e.replace(w6t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+rt(e));const u=b6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Fhe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Fhe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function T6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):A6t}async function A6t(){Me("No file system access.")}function C6t(e){return e?async function(t,n){const r=yn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?vn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:I6t}async function I6t(){Me("No HTTP fetch method available.")}const k6t=e=>e!=null&&e===e,R6t=e=>e==="true"||e==="false"||e===!0||e===!1,N6t=e=>!Number.isNaN(Date.parse(e)),vOe=e=>!Number.isNaN(+e)&&!(e instanceof Date),P6t=e=>vOe(e)&&Number.isInteger(+e),BV={boolean:hZ,integer:fa,number:fa,date:pZ,string:mZ,unknown:wa},rP=[R6t,P6t,vOe,N6t],D6t=["boolean","integer","number","date"];function bOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=rP.length,i=rP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&k6t(u)&&!rP[a](u)&&(i[a]=0,++o,o===rP.length))return"string";return D6t[i.reduce((s,o)=>s===0?o:s,0)-1]}function _Oe(e,t){return t.reduce((n,r)=>(n[r]=bOe(e,r),n),{})}function jhe(e){const t=function(n,r){const i={delimiter:e};return _Z(n,r?yn(r,i):i)};return t.responseType="text",t}function _Z(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),Xxe(t.delimiter).parse(e+"")}_Z.responseType="text";function O6t(e){return typeof Buffer=="function"&&vn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function wZ(e,t){const n=t&&t.property?Pc(t.property):wa;return mt(e)&&!O6t(e)?$6t(n(e),t):n(JSON.parse(e))}wZ.responseType="json";function $6t(e,t){return!je(e)&&FDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const M6t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function wOe(e,t){let n,r,i,s;return e=wZ(e,t),t&&t.feature?(n=JLt,i=t.feature):t&&t.mesh?(n=e6t,i=t.mesh,s=M6t[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}wOe.responseType="json";const AD={dsv:_Z,csv:jhe(","),tsv:jhe("	"),json:wZ,topojson:wOe};function EZ(e,t){return arguments.length>1?(AD[e]=t,this):jt(AD,e)?AD[e]:null}function EOe(e){const t=EZ(e);return t&&t.responseType||"text"}function xOe(e,t,n,r){t=t||{};const i=EZ(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&L6t(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function L6t(e,t,n,r){if(!e.length)return;const i=lI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=_Oe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!BV[p])throw Error("Illegal format pattern: "+h+":"+p);return BV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const k4=E6t(typeof fetch<"u"&&fetch,null);function R4(e){const t=e||wa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function CD(e,t){try{await t(e)}catch(n){e.error(n)}}const SOe=Symbol("vega_id");let F6t=1;function N4(e){return!!(e&&Lt(e))}function Lt(e){return e[SOe]}function TOe(e,t){return e[SOe]=t,e}function wr(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:TOe(t,F6t++)}function xZ(e){return P4(e,wr({}))}function P4(e,t){for(const n in e)t[n]=e[n];return t}function AOe(e,t){return TOe(t,Lt(e))}function Vb(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function COe(e){return e&&e.constructor===Hb}function Hb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Hb,insert(a){const u=ht(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=vn(a)?r:t,l=ht(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ea(l)};return vn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return vn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(wr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const ID="_:mod:_";function D4(){Object.defineProperty(this,ID,{writable:!0,value:{}})}D4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[ID];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[ID];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[ID]={},this}};let j6t=0;const B6t="pulse",U6t=new D4,z6t=1,V6t=2;function Gr(e,t,n,r){this.id=++j6t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Bhe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Gr.prototype={targets(){return this._targets||(this._targets=R4(Hk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Bhe(z6t),modified:Bhe(V6t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new D4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Gr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===B6t)ht(a).forEach(f=>{f instanceof Gr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||U6t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function H6t(e,t,n,r){let i=1,s;return e instanceof Gr?s=e:e&&e.prototype instanceof Gr?s=new e:vn(e)?s=new Gr(null,e):(i=0,s=new Gr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function q6t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let W6t=0;function O4(e,t,n){this.id=++W6t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Eg(e,t,n){return new O4(e,t,n)}O4.prototype={_filter:Dc,_apply:wa,targets(){return this._targets||(this._targets=R4(Hk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Eg(e);return this.targets().add(t),t},apply(e){const t=Eg(null,e);return this.targets().add(t),t},merge(){const e=Eg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Eg();return this.targets().add(Eg(null,null,fZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Eg(null,null,()=>n=!0)),t.targets().add(Eg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Dc,this._targets=null}};function G6t(e,t,n,r){const i=this,s=Eg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ht(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Y6t(e,t){const n=this.locale();return xOe(e,t,n.timeParse,n.utcParse)}function K6t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function X6t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:EOe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Q6t(e,t,n){const r=this,i=r._pending||J6t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Dc).insert(s.data||[])),i.done(),s}function J6t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Z6t={skip:!0};function e4t(e,t,n,r,i){return(e instanceof Gr?n4t:t4t)(this,e,t,n,r,i),this}function t4t(e,t,n,r,i,s){const o=yn({},s,Z6t);let a,u;vn(n)||(n=Ea(n)),r===void 0?a=l=>e.touch(n(l)):vn(r)?(u=new Gr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;COe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function n4t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Gr(null,r4t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function r4t(e,t){return t=vn(t)?t:Ea(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function i4t(e){e.rank=++this._rank}function s4t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const z$={},kd=1,Rg=2,Ep=4,o4t=kd|Rg,Uhe=kd|Ep,T_=kd|Rg|Ep,zhe=8,NT=16,Vhe=32,Hhe=64;function T0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function w9(e,t){const n=[];return kg(e,t,r=>n.push(r)),n}function qhe(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function iP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}T0.prototype={StopPropagation:z$,ADD:kd,REM:Rg,MOD:Ep,ADD_REM:o4t,ADD_MOD:Uhe,ALL:T_,REFLOW:zhe,SOURCE:NT,NO_SOURCE:Vhe,NO_FIELDS:Hhe,fork(e){return new T0(this.dataflow).init(this,e)},clone(){const e=this.fork(T_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(T_|NT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new T0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Hhe)&&(n.fields=e.fields),t&kd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Rg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ep?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Vhe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||T_;return t&kd&&this.add.length||t&Rg&&this.rem.length||t&Ep&&this.mod.length},reflow(e){if(e)return this.fork(T_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ep,qhe(this,kd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&kd&&(n.addF=iP(n.addF,t)),e&Rg&&(n.remF=iP(n.remF,t)),e&Ep&&(n.modF=iP(n.modF,t)),e&NT&&(n.srcF=iP(n.srcF,t)),n},materialize(e){e=e||T_;const t=this;return e&kd&&t.addF&&(t.add=w9(t.add,t.addF),t.addF=null),e&Rg&&t.remF&&(t.rem=w9(t.rem,t.remF),t.remF=null),e&Ep&&t.modF&&(t.mod=w9(t.mod,t.modF),t.modF=null),e&NT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&NT)return kg(n.source,n.srcF,r),n;e&kd&&kg(n.add,n.addF,r),e&Rg&&kg(n.rem,n.remF,r),e&Ep&&kg(n.mod,n.modF,r);const i=n.source;if(e&zhe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?kg(i,qhe(n,Uhe),r):kg(i,n.srcF,r))}return n}};function SZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(SZ,T0,{fork(e){const t=new T0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function a4t(e,t,n){const r=this,i=[];if(r._pulse)return IOe(r);if(r._pending&&await r._pending,t&&await CD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new T0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=R4(Hk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=z$),u!==z$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await CD(r,c[f].callback)}return n&&await CD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function u4t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function l4t(e,t,n){return this._pulse?IOe(this):(this.evaluate(e,t,n),this)}function c4t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function IOe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function f4t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function d4t(e,t){const n=e.source,r=this._clock;return n&&je(n)?new SZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||h4t(this._pulse,n&&n.pulse)}function h4t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==z$&&(e.source=t.source),e)}const TZ={skip:!1,force:!1};function p4t(e,t){const n=t||TZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function m4t(e,t,n){const r=n||TZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function g4t(e,t,n){this.touch(e,n||TZ);const r=new T0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function y4t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),kOe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,v4t(t,0,e)):r=n,r}}}function kOe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function v4t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,kOe(e,r,t,n)}function Zw(){this.logger(oZ()),this.logLevel(iZ),this._clock=0,this._rank=0,this._locale=bZ();try{this._loader=k4()}catch{}this._touched=R4(Hk),this._input={},this._pulse=null,this._heap=y4t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function PT(e){return function(){return this._log[e].apply(this,arguments)}}Zw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:PT("error"),warn:PT("warn"),info:PT("info"),debug:PT("debug"),logLevel:PT("level"),cleanThreshold:1e4,add:H6t,connect:q6t,rank:i4t,rerank:s4t,pulse:g4t,touch:p4t,update:m4t,changeset:Hb,ingest:K6t,parse:Y6t,preload:Q6t,request:X6t,events:G6t,on:e4t,evaluate:a4t,run:l4t,runAsync:u4t,runAfter:c4t,_enqueue:f4t,_getPulse:d4t};function Pe(e,t){Gr.call(this,e,null,t)}lt(Pe,Gr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const rx={};function ROe(e){const t=NOe(e);return t&&t.Definition||null}function NOe(e){return e=e&&e.toLowerCase(),jt(rx,e)?rx[e]:null}function*POe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function AZ(e,t,n){const r=Float64Array.from(POe(e,n));return r.sort(Qp),t.map(i=>ZEe(r,i))}function CZ(e,t){return AZ(e,[.25,.5,.75],t)}function IZ(e,t){const n=e.length,r=lot(e,t),i=CZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function DOe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var $c=Math.random;function b4t(e){$c=e}function OOe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(POe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~($c()*s)];c[l]=a/s}return c.sort(Qp),[c7(c,n/2),c7(c,1-n/2)]}function $Oe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?_4t(s,t+t/4):s}function _4t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function w4t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function E4t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*$c())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const MOe=Math.sqrt(2*Math.PI),x4t=Math.SQRT2;let DT=NaN;function $4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(DT===DT)n=DT,DT=NaN;else{do n=$c()*2-1,r=$c()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,DT=r*s}return e+n*t}function kZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*MOe)}function M4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function L4(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*x4t*S4t(2*e-1)}function S4t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function RZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>$4(n,r),pdf:s=>kZ(s,n,r),cdf:s=>M4(s,n,r),icdf:s=>L4(s,n,r)};return i.mean(e).stdev(t)}function NZ(e,t){const n=RZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=IZ(e)),i):t},sample(){return e[~~($c()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function PZ(e,t){return e=e||0,t=t??1,Math.exp(e+$4()*t)}function DZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*MOe*e)}function OZ(e,t,n){return M4(Math.log(e),t,n)}function $Z(e,t,n){return Math.exp(L4(e,t,n))}function LOe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>PZ(n,r),pdf:s=>DZ(s,n,r),cdf:s=>OZ(s,n,r),icdf:s=>$Z(s,n,r)};return i.mean(e).stdev(t)}function FOe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=$c();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function MZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*$c()}function LZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function FZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function jZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function jOe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>MZ(n,r),pdf:s=>LZ(s,n,r),cdf:s=>FZ(s,n,r),icdf:s=>jZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function BZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Wk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function F4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Gk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function NS(e,t,n,r,i){let s=0,o=0;return Gk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function UZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Gk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Wk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:NS(e,t,n,i,l)}}function BOe(e,t,n){let r=0,i=0,s=0,o=0,a=0;Gk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Wk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:NS(e,t,n,i,l)}}function UOe(e,t,n){const[r,i,s,o]=F4(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Gk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Wk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:NS(e,t,n,o,y)}}function zOe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Gk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Wk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:NS(e,t,n,a,c)}}function zZ(e,t,n){const[r,i,s,o]=F4(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,T=S=>(S=S-s,b*S*S+w*S+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:T,rSquared:NS(e,t,n,o,T)}}function VOe(e,t,n,r){if(r===0)return BZ(e,t,n);if(r===1)return UZ(e,t,n);if(r===2)return zZ(e,t,n);const[i,s,o,a]=F4(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=A4t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:T4t(f,y,-o,a),predict:v,rSquared:NS(e,t,n,a,v)}}function T4t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function A4t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Whe=2,Ghe=1e-12;function HOe(e,t,n,r){const[i,s,o,a]=F4(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Whe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,T=0,S=0,A=0,C=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const $=i[P],F=s[P],L=C4t(Math.abs(y-$)*I)*d[P],B=$*L;E+=L,T+=B,S+=F*L,A+=F*B,C+=$*B}const[N,O]=Wk(T/E,S/E,A/E,C/E);c[g]=N+O*y,f[g]=Math.abs(s[g]-c[g]),I4t(i,g+1,p)}if(h===Whe)break;const m=exe(f);if(Math.abs(m)<Ghe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Ghe:(v=1-y*y)*v}return k4t(i,c,o,a)}function C4t(e){return(e=1-e*e*e)*e*e}function I4t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function k4t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const R4t=.5*Math.PI/180;function j4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=N4t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&P4t(f,m,d,h,p)>R4t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function N4t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function P4t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function D4t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function UV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:D4t(e)}function qOe(e,t,n){return n||e+(t?"_"+t:"")}const E9=()=>{},O4t={init:E9,add:E9,rem:E9,idx:0},cI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Yk=Object.keys(cI).filter(e=>e!=="__count__");function $4t(e,t){return(n,r)=>yn({name:e,aggregate_param:r,out:n||e},O4t,t)}[...Yk,"__count__"].forEach(e=>{cI[e]=$4t(e,cI[e])});function WOe(e,t,n){return cI[e](n,t)}function GOe(e,t){return e.idx-t.idx}function M4t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=cI[i]())})};return e.forEach(n),Object.values(t).sort(GOe)}function L4t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function F4t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function j4t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function B4t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function YOe(e,t){const n=t||wa,r=M4t(e),i=e.slice().sort(GOe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=L4t,s.prototype.add=F4t,s.prototype.rem=j4t,s.prototype.set=B4t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function VZ(e){this._key=e?Pc(e):Lt,this.reset()}const Bo=VZ.prototype;Bo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Bo.add=function(e){this._add.push(e)};Bo.rem=function(e){this._rem.push(e)};Bo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Bo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Bo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=MDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Bo.argmin=function(e){return this.extent(e)[0]||{}};Bo.argmax=function(e){return this.extent(e)[1]||{}};Bo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Bo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Bo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=CZ(this.values(),e),this._get=e),this._q};Bo.q1=function(e){return this.quartile(e)[0]};Bo.q2=function(e){return this.quartile(e)[1]};Bo.q3=function(e){return this.quartile(e)[2]};Bo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=OOe(this.values(),1e3,.05,e),this._get=e),this._ci};Bo.ci0=function(e){return this.ci(e)[0]};Bo.ci1=function(e){return this.ci(e)[1]};function sy(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}sy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Yk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(sy,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ht(pa(v)),w=b.length;let E=0,T;for(;E<w;++E)r[T=b[E]]||(r[T]=1,t.push(T))}this._dims=ht(e.groupby),this._dnames=this._dims.map(v=>{const b=Yi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:UV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Yi(f),g=qOe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(WOe(d,h,g))}return this._measures=this._measures.map(v=>YOe(v,v.field)),Object.create(null)},cellkey:UV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new VZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?AOe(t.tuple,s):wr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const U4t=1e-14;function HZ(e){Pe.call(this,null,e)}HZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(HZ,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(pa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=DOe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=fa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(U4t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=il(u,pa(t),e.name||"bin_"+Yi(t))}});function KOe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?zDe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function qZ(e){Pe.call(this,[],e)}qZ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(qZ,Pe,{transform(e,t){const n=t.fork(t.ALL),r=KOe(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Vb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function XOe(e){Gr.call(this,null,z4t,e)}lt(XOe,Gr);function z4t(e){return this.value&&!e.modified()?this.value:cZ(e.fields,e.orders)}function WZ(e){Pe.call(this,null,e)}WZ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function V4t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(WZ,Pe,{transform(e,t){const n=f=>d=>{for(var h=V4t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=wr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function GZ(e){Pe.call(this,null,e)}GZ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(GZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=H4t(a,i,s,e.filter||Dc)):n.mod=a,n.source=this.value,n.modifies(r)}});function H4t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(wr(s)),s={},s[t]=l);return i}const Yhe={kde:NZ,mixture:FOe,normal:RZ,lognormal:LOe,uniform:jOe},q4t="distributions",Khe="function",W4t="field";function QOe(e,t){const n=e[Khe];jt(Yhe,n)||Me("Unknown distribution function: "+n);const r=Yhe[n]();for(const i in e)i===W4t?r.data((e.from||t()).map(e[i])):i===q4t?r[i](e[i].map(s=>QOe(s,t))):typeof r[i]===Khe&&r[i](e[i]);return r}function YZ(e){Pe.call(this,null,e)}const JOe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],G4t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:JOe},{name:"weights",type:"number",array:!0}]};YZ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:JOe.concat(G4t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(YZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=QOe(e.distribution,Y4t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||kh(r.data()),l=j4(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],wr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Y4t(e){return()=>e.materialize(e.SOURCE).source}function ZOe(e,t){return e?e.map((n,r)=>t[r]||Yi(n)):null}function KZ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const e3e="bin";function XZ(e){Pe.call(this,null,e)}XZ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:e3e}]};const K4t=(e,t)=>qk(kh(e,t))/30;lt(XZ,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=KZ(t.source,e.groupby,wa),i=e.smooth||!1,s=e.field,o=e.step||K4t(n,s),a=Vb((p,m)=>s(p)-s(m)),u=e.as||e3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of $Oe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function t3e(e){Gr.call(this,null,X4t,e),this.modified(!0)}lt(t3e,Gr);function X4t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:il(n=>t(n,e),pa(t),Yi(t))}function QZ(e){Pe.call(this,[void 0,void 0],e)}QZ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(QZ,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=fa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Yi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function JZ(e,t){Gr.call(this,e),this.parent=t,this.count=0}lt(JZ,Gr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function B4(e){Pe.call(this,{},e),this._keys=IS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(B4,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new JZ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function n3e(e){Gr.call(this,null,Q4t,e)}lt(n3e,Gr);function Q4t(e){return this.value&&!e.modified()?this.value:je(e.name)?ht(e.name).map(t=>Pc(t)):Pc(e.name,e.as)}function ZZ(e){Pe.call(this,IS(),e)}ZZ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(ZZ,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function eee(e){Pe.call(this,[],e)}eee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(eee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ZOe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=xZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function tee(e){Pe.call(this,[],e)}tee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(tee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Yi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=xZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function nee(e){Pe.call(this,null,e)}nee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(nee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function r3e(e){Pe.call(this,[],e)}lt(r3e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=wr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const sP={value:"value",median:exe,mean:mot,min:l7,max:m0},J4t=[];function ree(e){Pe.call(this,[],e)}ree.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Z4t(e){var t=e.method||sP.value,n;if(sP[t]==null)Me("Unrecognized imputation method: "+t);else return t===sP.value?(n=e.value!==void 0?e.value:0,()=>n):sP[t]}function eFt(e){const t=e.field;return n=>n?t(n):NaN}lt(ree,Pe,{transform(e,t){var n=t.fork(t.ALL),r=Z4t(e),i=eFt(e),s=Yi(e.field),o=Yi(e.key),a=(e.groupby||[]).map(Yi),u=tFt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(wr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function tFt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):J4t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function iee(e){sy.call(this,e)}iee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Yk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(iee,sy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{yn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function see(e){Pe.call(this,null,e)}see.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(see,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=KZ(r,e.groupby,e.field),s=(e.groupby||[]).map(Yi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=kh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=NZ(h,o)[a],m=e.counts?h.length:1,g=c||kh(h);j4(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(wr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function i3e(e){Gr.call(this,null,nFt,e)}lt(i3e,Gr);function nFt(e){return this.value&&!e.modified()?this.value:dZ(e.fields,e.flat)}function s3e(e){Pe.call(this,[],e),this._pending=null}lt(s3e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?x9(this,t,this._pending):rFt(e)?t.StopPropagation:e.values?x9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>x9(this,t,ht(r.data)))}});function rFt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function x9(e,t,n){n.forEach(wr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function oee(e){Pe.call(this,{},e)}oee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(oee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Yi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function o3e(e){Gr.call(this,null,iFt,e)}lt(o3e,Gr);function iFt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function a3e(e){Gr.call(this,null,sFt,e)}lt(a3e,Gr);function sFt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function u3e(e){Pe.call(this,null,e)}lt(u3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function aee(e){sy.call(this,e)}aee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Yk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(aee,sy,{_transform:sy.prototype.transform,transform(e,t){return this._transform(oFt(e,t),t)}});function oFt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=pa(n).concat(pa(r)),o=uFt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>aFt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function aFt(e,t,n,r){return il(i=>t(i)===e?n(i):NaN,r,e+"")}function uFt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(C4),t?i.slice(0,t):i}function l3e(e){B4.call(this,e)}lt(l3e,B4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(pa(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(wr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function uee(e){Pe.call(this,null,e)}uee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(uee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ZOe(e.fields,e.as||[]),s=r?(a,u)=>lFt(a,u,r,i):P4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,wr({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function lFt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function c3e(e){Pe.call(this,null,e)}lt(c3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function lee(e){Pe.call(this,null,e)}lee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const cFt=1e-14;lt(lee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=KZ(i,e.groupby,e.field),o=(e.groupby||[]).map(Yi),a=[],u=e.step||.01,l=e.probs||Pu(u/2,1-cFt,u),c=l.length;return s.forEach(f=>{const d=AZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(wr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function f3e(e){Pe.call(this,null,e)}lt(f3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=xZ(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function cee(e){Pe.call(this,[],e),this.count=0}cee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(cee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*$c()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function fee(e){Pe.call(this,null,e)}fee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(fee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Pu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,wr(s)}),n.add=t.add.concat(this.value),n}});function d3e(e){Pe.call(this,null,e),this.modified(!0)}lt(d3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function dee(e){Pe.call(this,null,e)}const h3e=["unit0","unit1"];dee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:gZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:h3e}]};lt(dee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?RS:kS)(s.unit).offset,a=e.as||h3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(pa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:cOe({extent:e.extent||kh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=yZ(r),o=this.value||{},a=(n?tOe:eOe)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function p3e(e){Pe.call(this,IS(),e)}lt(p3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function m3e(e){Pe.call(this,null,e)}lt(m3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Vb(e.sort)):t.source).map(e.field))}});function fFt(e,t,n,r){const i=fI[e](t,n);return{init:i.init||zg,update:function(s,o){o[r]=i.next(s)}}}const fI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=fI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=fI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=dFt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function dFt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const hFt=Object.keys(fI);function g3e(e){const t=ht(e.ops),n=ht(e.fields),r=ht(e.params),i=ht(e.aggregate_params),s=ht(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ht(pa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Yi(g),w=qOe(p,b,s[m]);if(h(g),o.push(w),jt(fI,p))a.push(fFt(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(WOe(p,v,w))}}),(c.length||f.length)&&(this.cell=pFt(f,c,d)),this.inputs=Object.keys(u)}const y3e=g3e.prototype;y3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};y3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function pFt(e,t,n){e=e.map(u=>YOe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new VZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function hee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}hee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:hFt.concat(Yk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(hee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Vb(e.sort),i=UV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new g3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)mFt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=KOe(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function mFt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Kx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ea(-1)};t.init();for(let f=0;f<u;++f)gFt(c,o,f,u),s&&yFt(c,l),t.update(c,a[f])}function gFt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function yFt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const vFt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:sy,bin:HZ,collect:qZ,compare:XOe,countpattern:WZ,cross:GZ,density:YZ,dotbin:XZ,expression:t3e,extent:QZ,facet:B4,field:n3e,filter:ZZ,flatten:eee,fold:tee,formula:nee,generate:r3e,impute:ree,joinaggregate:iee,kde:see,key:i3e,load:s3e,lookup:oee,multiextent:o3e,multivalues:a3e,params:u3e,pivot:aee,prefacet:l3e,project:uee,proxy:c3e,quantile:lee,relay:f3e,sample:cee,sequence:fee,sieve:d3e,subflow:JZ,timeunit:dee,tupleindex:p3e,values:m3e,window:hee},Symbol.toStringTag,{value:"Module"}));function A0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const bFt=()=>typeof Image<"u"?Image:null;function pee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const _Ft="identity",ix="linear",$m="log",Kk="pow",Xk="sqrt",U4="symlog",rb="time",ib="utc",hh="sequential",PS="diverging",sx="quantile",z4="quantize",V4="threshold",mee="ordinal",zV="point",v3e="band",gee="bin-ordinal",Hs="continuous",Qk="discrete",Jk="discretizing",Gc="interpolating",yee="temporal";function wFt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function EFt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function vee(){const e=Zx().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=pee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Pu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,F0(h,m)-1),v=m===g?y:F0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return vee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function b3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return b3e(t())},e}function xFt(){return b3e(vee().paddingInner(1))}var SFt=Array.prototype.map;function TFt(e){return SFt.call(e,fa)}const AFt=Array.prototype.slice;function _3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(F0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=TFt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=AFt.call(r),n):t.slice()},n.tickFormat=function(r,i){return eTe(e[0],Qn(e),r??10,i)},n.copy=function(){return _3e().domain(n.domain()).range(n.range())},n}const V$=new Map,w3e=Symbol("vega_scale");function E3e(e){return e[w3e]=!0,e}function CFt(e){return e&&e[w3e]===!0}function IFt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?wFt(s):s.invertExtent?EFt(s):void 0),s.type=e,E3e(s)};return r.metadata=Gf(ht(n)),r}function gr(e,t,n){return arguments.length>1?(V$.set(e,IFt(e,t,n)),this):x3e(e)?V$.get(e):void 0}gr(_Ft,tTe);gr(ix,Em,Hs);gr($m,rTe,[Hs,$m]);gr(Kk,aK,Hs);gr(Xk,Ght,Hs);gr(U4,iTe,Hs);gr(rb,yTe,[Hs,yee]);gr(ib,umt,[Hs,yee]);gr(hh,fK,[Hs,Gc]);gr(`${hh}-${ix}`,fK,[Hs,Gc]);gr(`${hh}-${$m}`,vTe,[Hs,Gc,$m]);gr(`${hh}-${Kk}`,dK,[Hs,Gc]);gr(`${hh}-${Xk}`,lmt,[Hs,Gc]);gr(`${hh}-${U4}`,bTe,[Hs,Gc]);gr(`${PS}-${ix}`,_Te,[Hs,Gc]);gr(`${PS}-${$m}`,wTe,[Hs,Gc,$m]);gr(`${PS}-${Kk}`,hK,[Hs,Gc]);gr(`${PS}-${Xk}`,cmt,[Hs,Gc]);gr(`${PS}-${U4}`,ETe,[Hs,Gc]);gr(sx,sTe,[Jk,sx]);gr(z4,oTe,Jk);gr(V4,aTe,Jk);gr(gee,_3e,[Qk,Jk]);gr(mee,Zx,Qk);gr(v3e,vee,Qk);gr(zV,xFt,Qk);function x3e(e){return V$.has(e)}function qb(e,t){const n=V$.get(e);return n&&n.metadata[t]}function bee(e){return qb(e,Hs)}function ox(e){return qb(e,Qk)}function VV(e){return qb(e,Jk)}function S3e(e){return qb(e,$m)}function kFt(e){return qb(e,yee)}function T3e(e){return qb(e,Gc)}function A3e(e){return qb(e,sx)}const RFt=["clamp","base","constant","exponent"];function C3e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function H4(e,t,n){return BY(_ee(t||"rgb",n),e)}function I3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function k3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ea(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),RFt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function _ee(e,t){const n=But[NFt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function NFt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const PFt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},DFt={accent:dmt,category10:fmt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:hmt,observable10:pmt,paired:mmt,pastel1:gmt,pastel2:ymt,set1:vmt,set2:bmt,set3:_mt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function R3e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function N3e(e,t){for(const n in e)wee(n,t(e[n]))}const Xhe={};N3e(DFt,R3e);N3e(PFt,e=>H4(R3e(e)));function wee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Xhe[e]=t,this):Xhe[e]}const kD="symbol",OFt="discrete",$Ft="gradient",MFt=e=>je(e)?e.map(t=>String(t)):String(e),LFt=(e,t)=>e[1]-t[1],FFt=(e,t)=>t[1]-e[1];function Eee(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(qk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),pt(t)&&(t=e.type===rb?kS(t):e.type==ib?RS(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function P3e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=LFt;if(i>s&&(r=s,s=i,i=r,o=FFt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function xee(e,t){return e.bins?P3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function D3e(e,t,n,r,i,s){const o=t.type;let a=MFt;if(o===rb||i===rb)a=e.timeFormat(r);else if(o===ib||i===ib)a=e.utcFormat(r);else if(S3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=O3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function O3e(e,t,n){const r=xee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const HV={[sx]:"quantiles",[z4]:"thresholds",[V4]:"domain"},$3e={[sx]:"quantiles",[z4]:"domain"};function M3e(e,t){return e.bins?UFt(e.bins):e.type===$m?O3e(e,t,!0):HV[e.type]?BFt(e[HV[e.type]]()):xee(e,t)}function jFt(e,t,n){const r=t[$3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function BFt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function UFt(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const zFt=e=>HV[e.type]||e.bins;function L3e(e,t,n,r,i,s,o){const a=$3e[t.type]&&s!==rb&&s!==ib?jFt(e,t,i):D3e(e,t,n,i,s,o);return r===kD&&zFt(t)?VFt(a):r===OFt?HFt(a):qFt(a)}const VFt=e=>(t,n,r)=>{const i=Qhe(r[n+1],Qhe(r.max,1/0)),s=Jhe(t,e),o=Jhe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Qhe=(e,t)=>e??t,HFt=e=>(t,n)=>n?e(t):null,qFt=e=>t=>e(t),Jhe=(e,t)=>Number.isFinite(e)?t(e):null;function WFt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===V4){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function GFt(e,t,n,r){const i=r||t.type;return pt(n)&&kFt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===rb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===ib?e.utcFormat("%A, %d %B %Y, %X UTC"):L3e(e,t,5,null,n,r,!0)}function F3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=GFt(e,t,n.format,n.formatType);if(VV(t.type)){const s=M3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(ox(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let j3e=0;function YFt(){j3e=0}const H$="p_";function See(e){return e&&e.gradient}function B3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?H$:"";return i||(i=e.id="gradient_"+j3e++,r==="radial"?(e.x1=yd(e.x1,.5),e.y1=yd(e.y1,.5),e.r1=yd(e.r1,0),e.x2=yd(e.x2,.5),e.y2=yd(e.y2,.5),e.r2=yd(e.r2,.5),s=H$):(e.x1=yd(e.x1,0),e.y1=yd(e.y1,0),e.x2=yd(e.x2,1),e.y2=yd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function yd(e,t){return e??t}function U3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Zhe={basis:{curve:Omt},"basis-closed":{curve:$mt},"basis-open":{curve:Mmt},bundle:{curve:Lmt,tension:"beta",value:.85},cardinal:{curve:Fmt,tension:"tension",value:0},"cardinal-open":{curve:Bmt,tension:"tension",value:0},"cardinal-closed":{curve:jmt,tension:"tension",value:0},"catmull-rom":{curve:Umt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:zmt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Vmt,tension:"alpha",value:.5},linear:{curve:pK},"linear-closed":{curve:Hmt},monotone:{horizontal:Wmt,vertical:qmt},natural:{curve:Gmt},step:{curve:Ymt},"step-after":{curve:Xmt},"step-before":{curve:Kmt}};function Tee(e,t,n){var r=jt(Zhe,e)&&Zhe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const KFt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},XFt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,QFt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,JFt=/^((\s+,?\s*)|(,\s*))/,ZFt=/^[01]/;function ax(e){const t=[];return(e.match(XFt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=KFt[s],a=e5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function e5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?ZFt:QFt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(JFt);u!==null&&(i+=u[0].length)}return r}const oy=Math.PI/180,t5t=1e-14,U1=Math.PI/2,qd=Math.PI*2,A_=Math.sqrt(3)/2;var S9={},T9={},z3e=[].join;function n5t(e,t,n,r,i,s,o,a,u){const l=z3e.call(arguments);if(S9[l])return S9[l];const c=o*oy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,T=g*e+y*t,S=v*e+b*t;let C=1/((T-w)*(T-w)+(S-E)*(S-E))-.25;C<0&&(C=0);let I=Math.sqrt(C);s==i&&(I=-I);const N=.5*(w+T)-I*(S-E),O=.5*(E+S)+I*(T-w),P=Math.atan2(E-O,w-N);let F=Math.atan2(S-O,T-N)-P;F<0&&s===1?F+=qd:F>0&&s===0&&(F-=qd);const L=Math.ceil(Math.abs(F/(U1+.001))),B=[];for(let z=0;z<L;++z){const q=P+z*F/L,D=P+(z+1)*F/L;B[z]=[N,O,q,D,n,r,f,d]}return S9[l]=B}function r5t(e){const t=z3e.call(e);if(T9[t])return T9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,T=r+m+w*p,S=n+g,A=r+y,C=S+w*y,I=A-w*g;return T9[t]=[c*E+f*T,d*E+h*T,c*C+f*I,d*C+h*I,c*S+f*A,d*S+h*A]}const rc=["l",0,0,0,0,0,0,0];function i5t(e,t,n){const r=rc[0]=e[0];if(r==="a"||r==="A")rc[1]=t*e[1],rc[2]=n*e[2],rc[3]=e[3],rc[4]=e[4],rc[5]=e[5],rc[6]=t*e[6],rc[7]=n*e[7];else if(r==="h"||r==="H")rc[1]=t*e[1];else if(r==="v"||r==="V")rc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)rc[i]=(i%2==1?t:n)*e[i];return rc}function dI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=i5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":epe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":epe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function epe(e,t,n,r){const i=n5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=r5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const tpe=.5773502691896257,npe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,qd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=A_*n,i=r-n*tpe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=A_*n,i=r-n*tpe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function V3e(e){return jt(npe,e)?npe[e]:s5t(e)}var A9={};function s5t(e){if(!jt(A9,e)){const t=ax(e);A9[e]={draw:function(n,r){dI(n,t,0,0,Math.sqrt(r)/2)}}}return A9[e]}const yg=.448084975506;function o5t(e){return e.x}function a5t(e){return e.y}function u5t(e){return e.width}function l5t(e){return e.height}function hp(e){return typeof e=="function"?e:()=>+e}function oP(e,t,n){return Math.max(t,Math.min(e,n))}function H3e(){var e=o5t,t=a5t,n=u5t,r=l5t,i=hp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=oP(+i.call(this,c),0,v),w=oP(+s.call(this,c),0,v),E=oP(+o.call(this,c),0,v),T=oP(+a.call(this,c),0,v);if(u||(u=h=t6()),b<=0&&w<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var S=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-yg*w,m,S,m+yg*w,S,m+w),u.lineTo(S,A-T),u.bezierCurveTo(S,A-yg*T,S-yg*T,A,S-T,A),u.lineTo(p+E,A),u.bezierCurveTo(p+yg*E,A,p,A-yg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+yg*b,p+yg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=hp(c),l):e},l.y=function(c){return arguments.length?(t=hp(c),l):t},l.width=function(c){return arguments.length?(n=hp(c),l):n},l.height=function(c){return arguments.length?(r=hp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=hp(c),s=f!=null?hp(f):i,a=d!=null?hp(d):i,o=h!=null?hp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function q3e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,qd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=t6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Zk(e,t){return e??t}const eR=e=>e.x||0,tR=e=>e.y||0,c5t=e=>e.width||0,f5t=e=>e.height||0,d5t=e=>(e.x||0)+(e.width||0),h5t=e=>(e.y||0)+(e.height||0),p5t=e=>e.startAngle||0,m5t=e=>e.endAngle||0,g5t=e=>e.padAngle||0,y5t=e=>e.innerRadius||0,v5t=e=>e.outerRadius||0,b5t=e=>e.cornerRadius||0,_5t=e=>Zk(e.cornerRadiusTopLeft,e.cornerRadius)||0,w5t=e=>Zk(e.cornerRadiusTopRight,e.cornerRadius)||0,E5t=e=>Zk(e.cornerRadiusBottomRight,e.cornerRadius)||0,x5t=e=>Zk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,S5t=e=>Zk(e.size,64),T5t=e=>e.size||1,q4=e=>e.defined!==!1,A5t=e=>V3e(e.shape||"circle"),C5t=X7().startAngle(p5t).endAngle(m5t).padAngle(g5t).innerRadius(y5t).outerRadius(v5t).cornerRadius(b5t),I5t=ITe().x(eR).y1(tR).y0(h5t).defined(q4),k5t=ITe().y(tR).x1(eR).x0(d5t).defined(q4),R5t=CTe().x(eR).y(tR).defined(q4),N5t=H3e().x(eR).y(tR).width(c5t).height(f5t).cornerRadius(_5t,w5t,E5t,x5t),P5t=Dmt().type(A5t).size(S5t),D5t=q3e().x(eR).y(tR).defined(q4).size(T5t);function Aee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function O5t(e,t){return C5t.context(e)(t)}function $5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?k5t:I5t).curve(Tee(r,n.orient,n.tension)).context(e)(t)}function M5t(e,t){const n=t[0],r=n.interpolate||"linear";return R5t.curve(Tee(r,n.orient,n.tension)).context(e)(t)}function DS(e,t,n,r){return N5t.context(e)(t,n,r)}function L5t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function F5t(e,t){return P5t.context(e)(t)}function j5t(e,t){return D5t.context(e)(t)}var W3e=1;function G3e(){W3e=1}function Cee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+W3e++),o=i.clipping[s]||(i.clipping[s]={id:s});return vn(r)?o.path=r(null):Aee(n)?o.path=DS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ss(e){this.clear(),e&&this.union(e)}Ss.prototype={clone(){return new Ss(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function W4(e){this.mark=e,this.bounds=this.bounds||new Ss}function G4(e){W4.call(this,e),this.items=this.items||[]}lt(G4,W4);class Y3e{constructor(t){this._pending=0,this._loader=t||k4()}pending(){return this._pending}sanitizeURL(t){const n=this;return rpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(OT(n),r)).catch(()=>(OT(n),null))}loadImage(t){const n=this,r=bFt();return rpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>OT(n),o.onerror=()=>OT(n),o.src=s,o}).catch(i=>(OT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function rpe(e){e._pending+=1}function OT(e){e._pending-=1}function tg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?B5t(t,r):0))}return e}function B5t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const U5t=qd-1e-8;let Y4,RD,ND,lv,qV,PD,WV,GV;const Xg=(e,t)=>Y4.add(e,t),DD=(e,t)=>Xg(RD=e,ND=t),ipe=e=>Xg(e,Y4.y1),spe=e=>Xg(Y4.x1,e),z1=(e,t)=>qV*e+WV*t,V1=(e,t)=>PD*e+GV*t,C9=(e,t)=>Xg(z1(e,t),V1(e,t)),I9=(e,t)=>DD(z1(e,t),V1(e,t));function nR(e,t){return Y4=e,t?(lv=t*oy,qV=GV=Math.cos(lv),PD=Math.sin(lv),WV=-PD):(qV=GV=1,lv=PD=WV=0),z5t}const z5t={beginPath(){},closePath(){},moveTo:I9,lineTo:I9,rect(e,t,n,r){lv?(C9(e+n,t),C9(e+n,t+r),C9(e,t+r),I9(e,t)):(Xg(e+n,t+r),DD(e,t))},quadraticCurveTo(e,t,n,r){const i=z1(e,t),s=V1(e,t),o=z1(n,r),a=V1(n,r);ope(RD,i,o,ipe),ope(ND,s,a,spe),DD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=z1(e,t),a=V1(e,t),u=z1(n,r),l=V1(n,r),c=z1(i,s),f=V1(i,s);ape(RD,o,u,c,ipe),ape(ND,a,l,f,spe),DD(c,f)},arc(e,t,n,r,i,s){if(r+=lv,i+=lv,RD=n*Math.cos(i)+e,ND=n*Math.sin(i)+t,Math.abs(i-r)>U5t)Xg(e-n,t-n),Xg(e+n,t+n);else{const o=l=>Xg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%qd,r<0&&(r+=qd),i=i%qd,i<0&&(i+=qd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=qd,a=r-r%U1,u=0;u<4&&a>i;++u,a-=U1)o(a);else for(a=r-r%U1+U1,u=0;u<4&&a<i;++u,a=a+U1)o(a)}}};function ope(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function ape(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>t5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(upe(u,e,t,n,r)),0<l&&l<1&&i(upe(l,e,t,n,r))}function upe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var C0=(C0=A0(1,1))?C0.getContext("2d"):null;const YV=new Ss;function Iee(e){return function(t,n){if(!C0)return!0;e(C0,t),YV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=YV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(C0.isPointInPath(u,a))return!0;return!1}}function kee(e,t){return t.contains(e.x||0,e.y||0)}function K3e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(YV.set(n,r,n+i,r+s))}function X3e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return bw(t,n,r,i,s)}function bw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function ux(e,t){e.globalCompositeOperation=t.blend||"source-over"}function sf(e,t){return e??t}function lpe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function V5t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+sf(t.x1,.5)*r,n.y1+sf(t.y1,.5)*i,Math.max(r,i)*sf(t.r1,0),n.x1+sf(t.x2,.5)*r,n.y1+sf(t.y2,.5)*i,Math.max(r,i)*sf(t.r2,.5));else{const o=sf(t.x1,0),a=sf(t.y1,0),u=sf(t.x2,1),l=sf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=A0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=lpe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return lpe(s,t.stops)}function Q3e(e,t,n){return See(n)?V5t(e,n,t.bounds):n}function q$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Q3e(e,t,t.fill),!0):!1}var H5t=[];function lx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Q3e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||H5t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function q5t(e,t){return e.zindex-t.zindex||e.index-t.index}function Ree(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(q5t)}function Kf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Ree(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function W$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Ree(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Nee(e){return function(t,n,r){Kf(n,i=>{(!r||r.intersects(i.bounds))&&J3e(e,t,i,i)})}}function W5t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&J3e(e,t,n.items[0],n.items)}}function J3e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ux(t,n),n.fill&&q$(t,n,i)&&t.fill(),n.stroke&&lx(t,n,i)&&t.stroke()))}function K4(e){return e=e||Dc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,W$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function rR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Pee(e){return K4(rR(e))}function xv(e,t){return"translate("+e+","+t+")"}function Dee(e){return"rotate("+e+")"}function G5t(e,t){return"scale("+e+","+t+")"}function Z3e(e){return xv(e.x||0,e.y||0)}function Y5t(e){return xv(e.x||0,e.y||0)+(e.angle?" "+Dee(e.angle):"")}function K5t(e){return xv(e.x||0,e.y||0)+(e.angle?" "+Dee(e.angle):"")+(e.scaleX||e.scaleY?" "+G5t(e.scaleX||1,e.scaleY||1):"")}function Oee(e,t,n){function r(o,a){o("transform",Y5t(a)),o("d",t(null,a))}function i(o,a){return t(nR(o,a.angle),a),tg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=oy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Nee(s),pick:Pee(s),isect:n||Iee(s)}}var X5t=Oee("arc",O5t);function Q5t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function J5t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Z5t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function $ee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(nR(u),c),tg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=rR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:W5t(s),pick:a,isect:kee,tip:n}}var ejt=$ee("area",$5t,Q5t);function tjt(e,t){var n=t.clip;e.save(),vn(n)?(e.beginPath(),n(e),e.clip()):e$e(e,t.group)}function e$e(e,t){e.beginPath(),Aee(t)?DS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function t$e(e){const t=sf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function njt(e,t){e("transform",Z3e(t))}function n$e(e,t){const n=t$e(t);e("d",DS(null,t,n,n))}function rjt(e,t){e("class","background"),e("aria-hidden",!0),n$e(e,t)}function ijt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?n$e(e,t):e("d","")}function sjt(e,t,n){const r=t.clip?Cee(n,t,t):null;e("clip-path",r)}function ojt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),tg(e,t),e.translate(t.x||0,t.y||0)}function hI(e,t,n,r){const i=t$e(t);e.beginPath(),DS(e,t,(n||0)+i,(r||0)+i)}const ajt=rR(hI),ujt=rR(hI,!1),ljt=rR(hI,!0);function cjt(e,t,n,r){Kf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(hI(e,i,s,o),ux(e,i),i.fill&&q$(e,i,u)&&e.fill(),i.stroke&&!a&&lx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&e$e(e,i),n&&n.translate(-s,-o),Kf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(hI(e,i,s,o),ux(e,i),lx(e,i,u)&&e.stroke())})}function fjt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return W$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Aee(u)&&!ljt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&ujt(e,u,o,a)?(e.restore(),u):(l=W$(u,v=>djt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&ajt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function djt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var hjt={type:"group",tag:"g",nested:!1,attr:njt,bound:ojt,draw:cjt,pick:fjt,isect:K3e,content:sjt,background:rjt,foreground:ijt},pI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Mee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Lee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Fee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function X4(e,t){return e==="center"?t/2:e==="right"?t:0}function Q4(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function pjt(e,t,n){const r=Mee(t,n),i=Lee(t,r),s=Fee(t,r),o=(t.x||0)-X4(t.align,i),a=(t.y||0)-Q4(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,pI["xmlns:xlink"],"xlink:href"),e("transform",xv(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function mjt(e,t){const n=t.image,r=Lee(t,n),i=Fee(t,n),s=(t.x||0)-X4(t.align,r),o=(t.y||0)-Q4(t.baseline,i);return e.set(s,o,s+r,o+i)}function gjt(e,t,n){Kf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Mee(r,this);let s=Lee(r,i),o=Fee(r,i);if(s===0||o===0)return;let a=(r.x||0)-X4(r.align,s),u=(r.y||0)-Q4(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(ux(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var yjt={type:"image",tag:"image",nested:!1,attr:pjt,bound:mjt,draw:gjt,pick:K4(),isect:Dc,get:Mee,xOffset:X4,yOffset:Q4},vjt=$ee("line",M5t,J5t);function bjt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",K5t(t)),e("d",t.path)}function OD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*oy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=ax(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),dI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):dI(e,u,r,i,s,o)}function _jt(e,t){return OD(nR(e,t.angle),t)?e.set(0,0,0,0):tg(e,t,!0)}var wjt={type:"path",tag:"path",nested:!1,attr:bjt,bound:_jt,draw:Nee(OD),pick:Pee(OD),isect:Iee(OD)};function Ejt(e,t){e("d",DS(null,t))}function xjt(e,t){var n,r;return tg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function cpe(e,t){e.beginPath(),DS(e,t)}var Sjt={type:"rect",tag:"path",nested:!1,attr:Ejt,bound:xjt,draw:Nee(cpe),pick:Pee(cpe),isect:K3e};function Tjt(e,t){e("transform",Z3e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Ajt(e,t){var n,r;return tg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function r$e(e,t,n){var r,i,s,o;return t.stroke&&lx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Cjt(e,t,n){Kf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&r$e(e,r,i)&&(ux(e,r),e.stroke())}})}function Ijt(e,t,n,r){return e.isPointInStroke?r$e(e,t,1)&&e.isPointInStroke(n,r):!1}var kjt={type:"rule",tag:"line",nested:!1,attr:Tjt,bound:Ajt,draw:Cjt,pick:K4(Ijt),isect:X3e},Rjt=Oee("shape",L5t),Njt=Oee("symbol",F5t,kee);const fpe=UDe();var kl={height:Xh,measureWidth:jee,estimateWidth:G$,width:G$,canvas:i$e};i$e(!0);function i$e(e){kl.width=e&&C0?jee:G$}function G$(e,t){return s$e(uy(e,t),Xh(e))}function s$e(e,t){return~~(.8*e.length*t)}function jee(e,t){return Xh(e)<=0||!(t=uy(e,t))?0:o$e(t,J4(e))}function o$e(e,t){const n=`(${t}) ${e}`;let r=fpe.get(n);return r===void 0&&(C0.font=t,r=C0.measureText(e).width,fpe.set(n,r)),r}function Xh(e){return e.fontSize!=null?+e.fontSize||0:11}function ay(e){return e.lineHeight!=null?e.lineHeight:Xh(e)+2}function Pjt(e){return je(e)?e.length>1?e:e[0]:e}function iR(e){return Pjt(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function Bee(e){const t=iR(e);return(je(t)?t.length-1:0)*ay(e)}function uy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Ojt(e,n):n}function Djt(e){if(kl.width===jee){const t=J4(e);return n=>o$e(n,t)}else if(kl.width===G$){const t=Xh(e);return n=>s$e(n,t)}else return t=>kl.width(e,t)}function Ojt(e,t){var n=+e.limit,r=Djt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function sR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function J4(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Xh(e)+"px "+sR(e,t)}function Uee(e){var t=e.baseline,n=Xh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ay(e):t==="line-bottom"?.29*n-.5*ay(e):0)}const $jt={left:"start",center:"middle",right:"end"},NA=new Ss;function Z4(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-U1,t+=r*Math.cos(i),n+=r*Math.sin(i)),NA.x1=t,NA.y1=n,NA}function Mjt(e,t){var n=t.dx||0,r=(t.dy||0)+Uee(t),i=Z4(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",$jt[t.align]||"start"),a?(u=xv(s,o)+" "+Dee(a),(n||r)&&(u+=" "+xv(n,r))):u=xv(s+n,o+r),e("transform",u)}function zee(e,t,n){var r=kl.height(t),i=t.align,s=Z4(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Uee(t)-Math.round(.8*r),c=iR(t),f;if(je(c)?(r+=ay(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,kl.width(t,h)),0)):f=kl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*oy,o,a);else if(n===2)return e.rotatedPoints(t.angle*oy,o,a);return e}function Ljt(e,t,n){Kf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=J4(r),e.textAlign=r.align||"left",s=Z4(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*oy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Uee(r),c=iR(r),ux(e,r),je(c))for(l=ay(r),u=0;u<c.length;++u)f=uy(r,c[u]),r.fill&&q$(e,r,i)&&e.fillText(f,o,a),r.stroke&&lx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=uy(r,c),r.fill&&q$(e,r,i)&&e.fillText(f,o,a),r.stroke&&lx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Fjt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Z4(t),a=o.x1,u=o.y1,l=zee(NA,t,1),c=-t.angle*oy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function jjt(e,t){const n=zee(NA,e,2);return bw(t,n[0],n[1],n[2],n[3])||bw(t,n[0],n[1],n[4],n[5])||bw(t,n[4],n[5],n[6],n[7])||bw(t,n[2],n[3],n[6],n[7])}var Bjt={type:"text",tag:"text",nested:!1,attr:Mjt,bound:zee,draw:Ljt,pick:K4(Fjt),isect:jjt},Ujt=$ee("trail",j5t,Z5t),Vl={arc:X5t,area:ejt,group:hjt,image:yjt,line:vjt,path:wjt,rect:Sjt,rule:kjt,shape:Rjt,symbol:Njt,text:Bjt,trail:Ujt};function KV(e,t,n){var r=Vl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ss),e,n)}var dpe={mark:null};function a$e(e,t,n){var r=Vl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(dpe.mark=e,l=dpe),c=KV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ss,o)for(a=0,u=s.length;a<u;++a)t.union(KV(s[a],i,n));return e.bounds=t}const zjt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function u$e(e,t){return JSON.stringify(e,zjt,t)}function l$e(e){const t=typeof e=="string"?JSON.parse(e):e;return c$e(t)}function c$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&c$e(n[i]);return t&&a$e(e),e}class f$e{constructor(t){arguments.length?this.root=l$e(t):(this.root=hpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new G4(this.root)])}toJSON(t){return u$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=hpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function hpe(e,t){const n={bounds:new Ss,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Qg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Vee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Os(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Qg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function mc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function d$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function eF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Vjt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Vl[i.marktype]).tip){for(o=eF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Hee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||k4(),this._tooltip=n||Hjt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Qg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Vjt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function Hjt(e,t,n,r){e.element().setAttribute("title",r||"")}class oR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Y3e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const qjt="keydown",Wjt="keypress",Gjt="keyup",h$e="dragenter",$D="dragleave",p$e="dragover",XV="pointerdown",Yjt="pointerup",Y$="pointermove",MD="pointerout",m$e="pointerover",QV="mousedown",Kjt="mouseup",g$e="mousemove",K$="mouseout",y$e="mouseover",X$="click",Xjt="dblclick",Qjt="wheel",v$e="mousewheel",Q$="touchstart",J$="touchmove",Z$="touchend",Jjt=[qjt,Wjt,Gjt,h$e,$D,p$e,XV,Yjt,Y$,MD,m$e,QV,Kjt,g$e,K$,y$e,X$,Xjt,Qjt,v$e,Q$,J$,Z$],JV=Y$,PA=K$,ZV=X$;class aR extends Hee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Jjt,this.pointermove=mpe([Y$,g$e],[m$e,y$e],[MD,K$]),this.dragover=mpe([p$e],[h$e],[$D]),this.pointerout=gpe([MD,K$]),this.dragleave=gpe([$D])}initialize(t,n,r){return this._canvas=t&&Vee(t,"canvas"),[X$,QV,XV,Y$,MD,$D].forEach(i=>ppe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(v$e,t)}pointerdown(t){this._down=this._active,this.fire(XV,t)}mousedown(t){this._down=this._active,this.fire(QV,t)}click(t){this._down===this._active&&(this.fire(X$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Q$,t,!0)}touchmove(t){this.fire(J$,t,!0)}touchend(t){this.fire(Z$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===ZV&&i&&i.href?this.handleHref(n,i,i.href):(t===JV||t===PA)&&this.handleTooltip(n,i,t!==PA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(ppe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=eF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Vl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const Zjt=e=>e===Q$||e===J$||e===Z$?[Q$,J$,Z$]:[e];function ppe(e,t){Zjt(t).forEach(n=>e8t(e,n))}function e8t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function P2(e,t,n){t.forEach(r=>e.fire(r,n))}function mpe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?P2(this,e,r):((!i||!i.exit)&&P2(this,n,r),this._active=s,P2(this,t,r),P2(this,e,r))}}function gpe(e){return function(t){P2(this,e,t),this._active=null}}function t8t(){return typeof window<"u"&&window.devicePixelRatio||1}function n8t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?t8t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class eM extends oR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ss,this._tempb=new Ss}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:A0(1,1,this._options.type),t&&this._canvas&&(mc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)n8t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=r8t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):i8t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Vl[n.marktype];n.clip&&tjt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const r8t=(e,t,n)=>new Ss().set(0,0,t,n).translate(-e[0],-e[1]);function i8t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class b$e extends Hee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=k9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=k9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==PA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(ZV,this._hrefHandler),i.removeEventListener(JV,this._tooltipHandler),i.removeEventListener(PA,this._tooltipHandler)),this._svg=i=t&&Vee(t,"svg"),i&&(i.addEventListener(ZV,this._hrefHandler),i.addEventListener(JV,this._tooltipHandler),i.addEventListener(PA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:k9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const k9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},_$e="aria-hidden",qee="aria-label",Wee="role",Gee="aria-roledescription",w$e="graphics-object",Yee="graphics-symbol",E$e=(e,t,n)=>({[Wee]:e,[Gee]:t,[qee]:n||void 0}),s8t=Gf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ype={axis:{desc:"axis",caption:u8t},legend:{desc:"legend",caption:l8t},"title-text":{desc:"title",caption:e=>`Title text '${bpe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${bpe(e)}'`}},vpe={ariaRole:Wee,ariaRoleDescription:Gee,description:qee};function x$e(e,t){const n=t.aria===!1;if(e(_$e,n||void 0),n||t.description==null)for(const r in vpe)e(vpe[r],void 0);else{const r=t.mark.marktype;e(qee,t.description),e(Wee,t.ariaRole||(r==="group"?w$e:Yee)),e(Gee,t.ariaRoleDescription||`${r} mark`)}}function S$e(e){return e.aria===!1?{[_$e]:!0}:s8t[e.role]?null:ype[e.role]?a8t(e,ype[e.role]):o8t(e)}function o8t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return E$e(n?w$e:Yee,`${t} mark container`,e.description)}function a8t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return E$e(t.role||Yee,t.desc,n.description||r(n))}catch{return null}}function bpe(e){return ht(e.text).join(" ")}function u8t(e){const t=e.datum,n=e.orient,r=t.title?T$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${ox(a)?"discrete":a} scale with ${F3e(o,s,e)}`}function l8t(e){const t=e.datum,n=t.title?T$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return f8t(r)+(n?` titled '${n}'`:"")+` for ${c8t(s)} with ${F3e(u,a,e)}`}function T$e(e){try{return ht(Qn(e.items).items[0].text).join(" ")}catch{return null}}function c8t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function f8t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const A$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),d8t=e=>A$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Kee(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${d8t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=A$e(u),a),toString:()=>e};return a}const C$e=e=>I$e(Kee(),e)+"";function I$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):I$e(e,r)}return e.close()}const tM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},nM={blend:"mix-blend-mode"},k$e={fill:"none","stroke-miterlimit":10},$T=0,_pe="http://www.w3.org/2000/xmlns/",Ps=pI.xmlns;class Xee extends oR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Os(t,0,"svg",Ps),this._svg.setAttributeNS(_pe,"xmlns",Ps),this._svg.setAttributeNS(_pe,"xmlns:xlink",pI["xmlns:xlink"]),this._svg.setAttribute("version",pI.version),this._svg.setAttribute("class","marks"),mc(t,1),this._root=Os(this._svg,$T,"g",Ps),Jg(this._root,k$e),mc(this._svg,$T+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Jg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Os(t,$T,"rect",Ps),Jg(r,{width:this._width,height:this._height,fill:n}));const i=C$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),mc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Vl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,wpe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,wpe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Vl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Epe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return mc(c,0),n._svg;c.setAttribute("class",d$e(n));const f=S$e(n);for(const m in f)Da(c,m,f[m]);l||Da(c,"pointer-events",u),Da(c,"clip-path",n.clip?Cee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Epe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&m8t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Kf(n,p),mc(c,h),c}_update(t,n,r){Wp=n,ia=n.__values__,x$e(DA,r),t.attr(DA,r,this);const i=y8t[t.type];i&&i.call(this,t,n,r),Wp&&this.style(Wp,r)}style(t,n){if(n!=null){for(const r in tM){let i=r==="font"?sR(n):n[r];if(i===ia[r])continue;const s=tM[r];i==null?t.removeAttribute(s):(See(i)&&(i=B3e(i,this._defs.gradient,R$e())),t.setAttribute(s,i+"")),ia[r]=i}for(const r in nM)LD(t,nM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Os(t,$T+1,"defs",Ps)),i=h8t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Os(t,$T+1,"defs",Ps)),i=p8t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):mc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function wpe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function h8t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Os(e,n++,"pattern",Ps);Jg(o,{id:H$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Os(o,0,"rect",Ps),Jg(o,{width:1,height:1,fill:`url(${R$e()}#${t.id})`}),e=Os(e,n++,"radialGradient",Ps),Jg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Os(e,n++,"linearGradient",Ps),Jg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Os(e,r,"stop",Ps),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return mc(e,r),n}function p8t(e,t,n){let r;return e=Os(e,n,"clipPath",Ps),e.setAttribute("id",t.id),t.path?(r=Os(e,0,"path",Ps),r.setAttribute("d",t.path)):(r=Os(e,0,"rect",Ps),Jg(r,{x:0,y:0,width:t.width,height:t.height})),mc(e,1),n+1}function m8t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Kf(n,o=>{i=e.mark(t,o,i,r),++s}),mc(t,1+s)}function Epe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Qg(o,r,Ps),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Qg(o,"path",Ps);s.appendChild(a),a.__data__=e;const u=Qg(o,"g",Ps);s.appendChild(u),u.__data__=e;const l=Qg(o,"path",Ps);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||g8t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function g8t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Wp=null,ia=null;const y8t={group(e,t,n){const r=Wp=t.childNodes[2];ia=r.__values__,e.foreground(DA,n,this),ia=t.__values__,Wp=t.childNodes[1],e.content(DA,n,this);const i=Wp=t.childNodes[0];e.background(DA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ia.events&&(Da(r,"pointer-events",s),Da(i,"pointer-events",s),ia.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Da(r,"display",null),this.style(i,n),Da(i,"stroke",null),o&&(n.fill=null),ia=r.__values__,this.style(r,n),o&&(n.fill=o),Wp=null}else Da(r,"display","none")},image(e,t,n){n.smooth===!1?(LD(t,"image-rendering","optimizeSpeed"),LD(t,"image-rendering","pixelated")):LD(t,"image-rendering",null)},text(e,t,n){const r=iR(n);let i,s,o,a;je(r)?(s=r.map(u=>uy(n,u)),i=s.join(`
`),i!==ia.text&&(mc(t,0),o=t.ownerDocument,a=ay(n),s.forEach((u,l)=>{const c=Qg(o,"tspan",Ps);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ia.text=i)):(s=uy(n,r),s!==ia.text&&(t.textContent=s,ia.text=s)),Da(t,"font-family",sR(n)),Da(t,"font-size",Xh(n)+"px"),Da(t,"font-style",n.fontStyle),Da(t,"font-variant",n.fontVariant),Da(t,"font-weight",n.fontWeight)}};function DA(e,t,n){t!==ia[e]&&(n?v8t(Wp,e,t,n):Da(Wp,e,t),ia[e]=t)}function LD(e,t,n){n!==ia[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ia[t]=n)}function Jg(e,t){for(const n in t)Da(e,n,t[n])}function Da(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function v8t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function R$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class N$e extends oR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Kee();n.open("svg",yn({},pI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",k$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Vl[n.marktype],i=r.tag,s=[x$e,r.attr];t.open("g",{class:d$e(n),"clip-path":n.clip?Cee(this,n,n.group):null},S$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=iR(a);if(je(l)){const c={x:0,dy:ay(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(uy(a,l[f])).close()}else t.text(uy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Kf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Kf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&b8t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:H$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function b8t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=sR(t),e["font-size"]=Xh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in tM){let a=t[o];const u=tM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(See(a)&&(a=B3e(a,i.gradient,"")),e[u]=a)}for(const o in nM){const a=t[o];a!=null&&(s=s||[],s.push(`${nM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const df={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function _8t(e){df.svgMarkTypes=e.svgMarkTypes??["text"],df.svgOnTop=e.svgOnTop??!0,df.debug=e.debug??!1}class eH extends oR{constructor(t){super(t),this._svgRenderer=new Xee(t),this._canvasRenderer=new eM(t)}initialize(t,n,r,i,s){this._root_el=Os(t,0,"div");const o=Os(this._root_el,0,"div"),a=Os(this._root_el,1,"div");return this._root_el.style.position="relative",df.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=df.svgOnTop?a:o,this._canvasEl=df.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return df.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!df.svgMarkTypes.includes(s));this._svgRenderer.render(t,df.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return df.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class P$e extends aR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Os(Os(t,0,"div"),df.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const D$e="canvas",O$e="hybrid",$$e="png",M$e="svg",L$e="none",Zg={Canvas:D$e,PNG:$$e,SVG:M$e,Hybrid:O$e,None:L$e},sb={};sb[D$e]=sb[$$e]={renderer:eM,headless:eM,handler:aR};sb[M$e]={renderer:Xee,headless:N$e,handler:b$e};sb[O$e]={renderer:eH,headless:eH,handler:P$e};sb[L$e]={};function tF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(sb[e]=t,this):sb[e]}function F$e(e,t,n){const r=[],i=new Ss().union(t),s=e.marktype;return s?j$e(e,i,n,r):s==="group"?B$e(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function j$e(e,t,n,r){if(w8t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)B$e(i[a],t,n,r);else for(const u=Vl[s].isect;a<o;++a){const l=i[a];U$e(l,t,u)&&r.push(l)}}return r}function w8t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function B$e(e,t,n,r){n&&n(e.mark)&&U$e(e,t,Vl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)j$e(i[u],t,n,r);t.translate(o,a)}return r}function U$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const R9=new Ss;function z$e(e){const t=e.clip;if(vn(t))t(nR(R9.clear()));else if(t)R9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(R9)}const E8t=1e-9;function Qee(e,t,n){return e===t?!0:n==="path"?V$e(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=E8t:!e||!t||!mt(e)&&!mt(t)?e==t:x8t(e,t)}function V$e(e,t){return Qee(ax(e),ax(t))}function x8t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Qee(e[i],t[i],i))return!1;return typeof e==typeof t}function S8t(){G3e(),YFt()}const cx="top",Ef="left",Cf="right",ly="bottom",T8t="top-left",A8t="top-right",C8t="bottom-left",I8t="bottom-right",Jee="start",tH="middle",Ma="end",k8t="x",R8t="y",nF="group",Zee="axis",ete="title",N8t="frame",P8t="scope",tte="legend",H$e="row-header",q$e="row-footer",W$e="row-title",G$e="column-header",Y$e="column-footer",K$e="column-title",D8t="padding",O8t="symbol",X$e="fit",Q$e="fit-x",J$e="fit-y",$8t="pad",nte="none",aP="all",nH="each",rte="flush",e0="column",t0="row";function Z$e(e){Pe.call(this,null,e)}lt(Z$e,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Vl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=uP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===nF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(uP(l,o))),r.role){case Zee:case tte:case ete:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(uP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(uP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return z$e(r),t.modifies("bounds")}});function uP(e,t,n){return t(e.bounds.clear(),e,n)}const xpe=":vega_identifier:";function ite(e){Pe.call(this,0,e)}ite.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(ite,Pe,{transform(e,t){const n=M8t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function M8t(e){return e._signals[xpe]||(e._signals[xpe]=e.add(0))}function eMe(e){Pe.call(this,null,e)}lt(eMe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,L8t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===nF?G4:W4;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function L8t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function tMe(e){Pe.call(this,null,e)}const Spe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!nMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},nMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Tpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(nMe(i,s=e[n].bounds,t))return!0},F8t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},j8t=(e,t,n)=>{var r=e.range(),i=new Ss;return t===cx||t===ly?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Ape=e=>(e.forEach(t=>t.opacity=1),e),Cpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(tMe,Pe,{transform(e,t){const n=Spe[e.method]||Spe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Ape(i),t=Cpe(t,e)),t;if(i=i.filter(F8t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Ape(i),t=Cpe(t,e),s.length>=3&&Tpe(s,r)){do s=n(s,r);while(s.length>=3&&Tpe(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=j8t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function rMe(e){Pe.call(this,null,e)}lt(rMe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const na=new Ss;function _w(e,t,n){return e[t]===n?0:(e[t]=n,1)}function B8t(e){var t=e.items[0].orient;return t===Ef||t===Cf}function U8t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function z8t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=U8t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Bee(p),v=0,b=0,w,E;switch(na.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case cx:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&lP(e,p,E,m,y,0,-1,g);break;case Ef:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&lP(e,p,E,m,y,1,-1,g);break;case Cf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&lP(e,p,E,m,y,1,1,g);break;case ly:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&lP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return tg(g.translate(v,b),i),_w(i,"x",v+o)|_w(i,"y",b+o)&&(i.bounds=na,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function lP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Ipe=(e,t)=>Math.floor(Math.min(e,t)),kpe=(e,t)=>Math.ceil(Math.max(e,t));function V8t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===nF)switch(i.role){case Zee:case tte:case ete:break;case H$e:o.rowheaders.push(...s);break;case q$e:o.rowfooters.push(...s);break;case G$e:o.colheaders.push(...s);break;case Y$e:o.colfooters.push(...s);break;case W$e:o.rowtitle=s[0];break;case K$e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function H8t(e){return new Ss().set(0,0,e.width||0,e.height||0)}function q8t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Rpe(e){return e<0?Math.ceil(-e):0}function iMe(e,t,n){var r=!n.nodirty,i=n.bounds===rte?H8t:q8t,s=na.set(0,0,0,0),o=vi(n.align,e0),a=vi(n.align,t0),u=vi(n.padding,e0),l=vi(n.padding,t0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),T,S,A,C,I,N,O,P,$,F,L;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)N=t[S],I=E[S]=i(N),N.x=N.x||0,b[S]=0,N.y=N.y||0,w[S]=0,A=S%c,C=~~(S/c),m=Math.max(m,O=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[A]=Math.max(p[A],O),y[C]=Math.max(y[C],P),h[S]=u+Rpe(I.x1),g[S]=l+Rpe(I.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===nH)for(A=1;A<c;++A){for(L=0,S=A;S<d;S+=c)L<h[S]&&(L=h[S]);for(S=A;S<d;S+=c)h[S]=L+p[A-1]}else if(o===aP){for(L=0,S=0;S<d;++S)S%c&&L<h[S]&&(L=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=L+m)}else for(o=!1,A=1;A<c;++A)for(S=A;S<d;S+=c)h[S]+=p[A-1];if(a===nH)for(C=1;C<f;++C){for(L=0,S=C*c,T=S+c;S<T;++S)L<g[S]&&(L=g[S]);for(S=C*c;S<T;++S)g[S]=L+y[C-1]}else if(a===aP){for(L=0,S=c;S<d;++S)L<g[S]&&(L=g[S]);for(S=c;S<d;++S)g[S]=L+v}else for(a=!1,C=1;C<f;++C)for(S=C*c,T=S+c;S<T;++S)g[S]+=y[C-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(A=0;A<c;++A)for(F=0,S=A;S<d;S+=c)F+=g[S],w[S]+=F-t[S].y;if(o&&vi(n.center,e0)&&f>1)for(S=0;S<d;++S)I=o===aP?m:p[S%c],$=I-E[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&vi(n.center,t0)&&c!==1)for(S=0;S<d;++S)I=a===aP?v:y[~~(S/c)],F=I-E[S].y2-t[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<d;++S)s.union(E[S].translate(b[S],w[S]));switch($=vi(n.anchor,k8t),F=vi(n.anchor,R8t),vi(n.anchor,e0)){case Ma:$-=s.width();break;case tH:$-=s.width()/2}switch(vi(n.anchor,t0)){case Ma:F-=s.height();break;case tH:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)N=t[S],N.x+=b[S]+=$,N.y+=w[S]+=F,s.union(N.mark.bounds.union(N.bounds.translate(b[S],w[S]))),r&&e.dirty(N);return s}function W8t(e,t,n){var r=V8t(t),i=r.marks,s=n.bounds===rte?G8t:Y8t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=iMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=vi(n.headerBand,t0,null),c=cP(e,r.rowheaders,i,a,u,-vi(o,"rowHeader"),Ipe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=vi(n.headerBand,e0,null),f=cP(e,r.colheaders,i,a,a,-vi(o,"columnHeader"),Ipe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=vi(n.footerBand,t0,null),d=cP(e,r.rowfooters,i,a,u,vi(o,"rowFooter"),kpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=vi(n.footerBand,e0,null),h=cP(e,r.colfooters,i,a,a,vi(o,"columnFooter"),kpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=vi(n.titleAnchor,t0),g=vi(o,"rowTitle"),g=p===Ma?d+g:c-g,m=vi(n.titleBand,t0,.5),Npe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=vi(n.titleAnchor,e0),g=vi(o,"columnTitle"),g=p===Ma?h+g:f-g,m=vi(n.titleBand,e0,.5),Npe(e,r.coltitle,g,1,y,m))}function G8t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Y8t(e,t){return e.bounds[t]}function cP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,T,S,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],E=T.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(A=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),C=m):(A=m,C=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(T.bounds.translate(A-(T.x||0),C-(T.y||0))),T.x=A,T.y=C,e.dirty(T),g=o(g,E[l])}return g}function Npe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function K8t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function X8t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Q8t(e,t,n,r,i,s,o){const a=K8t(n,t),u=X8t(e,a("offset",0)),l=a("anchor",Jee),c=l===Ma?1:l===tH?.5:0,f={align:nH,bounds:a("bounds",rte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Ef:f.anchor={x:Math.floor(r.x1)-u,column:Ma,y:c*(o||r.height()+2*r.y1),row:l};break;case Cf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case cx:f.anchor={y:Math.floor(i.y1)-u,row:Ma,x:c*(s||i.width()+2*i.x1),column:l};break;case ly:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case T8t:f.anchor={x:u,y:u};break;case A8t:f.anchor={x:s-u,y:u,column:Ma};break;case C8t:f.anchor={x:u,y:o-u,row:Ma};break;case I8t:f.anchor={x:s-u,y:o-u,column:Ma,row:Ma};break}return f}function J8t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),e9t(e,n,n.items[0].items[0]),s=Z8t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===O8t&&t9t(n.items[0].items[0].items[0].items),i!==nte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,tg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Z8t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function e9t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&MT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Ef:i+=Math.ceil(o.bounds.width())+u;break;case Cf:case ly:break;default:s+=o.bounds.height()+u}switch((i||s)&&MT(e,n,i,s),o.orient){case Ef:c+=C_(t,n,o,a,1,1);break;case Cf:l+=C_(t,n,o,Ma,0,0)+u,c+=C_(t,n,o,a,1,1);break;case ly:l+=C_(t,n,o,a,0,0),c+=C_(t,n,o,Ma,-1,0,1)+u;break;default:l+=C_(t,n,o,a,0,0)}(l||c)&&MT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(MT(e,n,-l,0),MT(e,o,-l,0))}}function C_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Bee(n);return Math.round(r===Jee?f:r===Ma?d-h:.5*(c-h))}function MT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function t9t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function n9t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Ef||a===Cf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==nF?a===Ef?(p=i.y2,h=i.y1):a===Cf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Ef&&(p=r,h=0),b=u===Jee?p:u===Ma?h:(p+h)/2,d&&d.text){switch(a){case cx:case ly:v=f.bounds.height()+c;break;case Ef:y=f.bounds.width()+c;break;case Cf:y=-f.bounds.width()-c;break}na.clear().union(d.bounds),na.translate(y-(d.x||0),v-(d.y||0)),_w(d,"x",y)|_w(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(na),d.mark.bounds.clear().union(na),e.dirty(d)),na.clear().union(d.bounds)}else na.clear();switch(na.union(f.bounds),a){case cx:m=b,g=i.y1-na.height()-l;break;case Ef:m=i.x1-na.width()-l,g=b;break;case Cf:m=i.x2+na.width()+l,g=b;break;case ly:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return _w(s,"x",m)|_w(s,"y",g)&&(na.translate(m,g),e.dirty(s),s.bounds.clear().union(na),t.bounds.clear().union(na),e.dirty(s)),s.bounds}function sMe(e){Pe.call(this,null,e)}lt(sMe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&W8t(n,r,e.layout),i9t(n,r,e)}),r9t(e.mark.group)?t.reflow():t}});function r9t(e){return e&&e.mark.role!=="legend-entry"}function i9t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ss().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Zee:h=B8t(f)?a:u,h.union(z8t(e,f,i,s));break;case ete:c=f;break;case tte:l.push(J8t(e,f));break;case N8t:case P8t:case H$e:case q$e:case W$e:case G$e:case Y$e:case K$e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Cf,d!==nte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];iMe(e,v,Q8t(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===X$e||n.autosize.type===Q$e||n.autosize.type===J$e))switch(y.orient){case Ef:case Cf:o.add(v.x1,0).add(v.x2,0);break;case cx:case ly:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(n9t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),s9t(e,t,o,n)}function s9t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===D8t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===nte?(l=0,f=0,u=o,c=a):s===X$e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Q$e?(u=Math.max(0,o-l-d),a=c+f+h):s===J$e?(o=u+l+d,c=Math.max(0,a-f-h)):s===$8t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const o9t=Object.freeze(Object.defineProperty({__proto__:null,bound:Z$e,identifier:ite,mark:eMe,overlap:tMe,render:rMe,viewlayout:sMe},Symbol.toStringTag,{value:"Module"}));function oMe(e){Pe.call(this,null,e)}lt(oMe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Eee(s,o,e.minstep),u=e.format||D3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?P3e(s,e.values,a):xee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>wr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(wr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aMe(e){Pe.call(this,null,e)}function a9t(){return wr({})}function u9t(e){const t=IS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(aMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||a9t,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=u9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function uMe(e){Pe.call(this,null,e)}lt(uMe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||wg,u=i.enter||wg,l=i.exit||wg,c=(s&&!o?i[s]:a)||wg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==wg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==wg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==wg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function lMe(e){Pe.call(this,[],e)}lt(lMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||kD,o=e.scale,a=+e.limit,u=Eee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===kD,c=e.format||L3e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||M3e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===kD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,vn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ea(m=p||8),i=i.map((y,v)=>wr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(wr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===$Ft?(d=o.domain(),h=k3e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=WFt(o),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const l9t=e=>e.source.x,c9t=e=>e.source.y,f9t=e=>e.target.x,d9t=e=>e.target.y;function ste(e){Pe.call(this,{},e)}ste.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(ste,Pe,{transform(e,t){var n=e.sourceX||l9t,r=e.sourceY||c9t,i=e.targetX||f9t,s=e.targetY||d9t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Ppe.get(u+"-"+a)||Ppe.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const cMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,h9t=(e,t,n,r)=>cMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},p9t=(e,t,n,r)=>fMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},m9t=(e,t,n,r)=>dMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),g9t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,y9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,v9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},b9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},_9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},w9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Ppe=IS({line:cMe,"line-radial":h9t,arc:fMe,"arc-radial":p9t,curve:dMe,"curve-radial":m9t,"orthogonal-horizontal":g9t,"orthogonal-vertical":y9t,"orthogonal-radial":v9t,"diagonal-horizontal":b9t,"diagonal-vertical":_9t,"diagonal-radial":w9t});function ote(e){Pe.call(this,null,e)}ote.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(ote,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||TS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/nxe(l),h=Pu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const E9t=5;function x9t(e){const t=e.type;return!e.bins&&(t===ix||t===Kk||t===Xk)}function hMe(e){return bee(e)&&e!==hh}const S9t=Gf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pMe(e){Pe.call(this,null,e),this.modified(!0)}lt(pMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=T9t(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!S9t[i]){if(i==="padding"&&hMe(r.type))continue;vn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return N9t(r,e,R9t(r,e,C9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function T9t(e){var t=e.type,n="",r;return t===hh?hh+"-"+ix:(A9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?hh+"-":r===3?PS+"-":""),(n+t||ix).toLowerCase())}function A9t(e){const t=e.type;return bee(t)&&t!==rb&&t!==ib&&(e.scheme||e.range&&e.range.length&&e.range.every(pt))}function C9t(e,t,n){const r=I9t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&x9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return hMe(s)&&t.padding&&i[0]!==Qn(i)&&(i=k9t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(mMe(s,i,n)),s===mee&&e.unknown(t.domainImplicit?G7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Eee(e,t.nice)||null),i.length}function I9t(e,t,n){return t?(e.domain(mMe(e.type,t,n)),t.length):-1}function k9t(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===$m?uZ(t,null,a):e===Xk?B$(t,null,a,.5):e===Kk?B$(t,null,a,i||1):e===U4?lZ(t,null,a,s||1):aZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function mMe(e,t,n){if(S3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function R9t(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Pu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===gee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function N9t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=P9t(r,t,n);else if(t.scheme&&(s=D9t(r,t,n),vn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&T3e(r))return e.interpolator(H4(rH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(_ee(t.interpolate,t.interpolateGamma)):vn(e.round)?e.round(i):vn(e.rangeRound)&&e.interpolate(i?ik:Ym),s&&e.range(rH(s,t.reverse))}function P9t(e,t,n){e!==v3e&&e!==zV&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===zV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*pee(n,i,r)]}function D9t(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=H4(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=wee(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===V4?n+1:e===gee?n-1:e===sx||e===z4?+t.schemeCount||E9t:n,T3e(e)?Dpe(s,r,t.reverse):vn(s)?I3e(Dpe(s,r),n):e===mee?s:s.slice(0,n)}function Dpe(e,t,n){return vn(e)&&(t||n)?C3e(e,rH(t||[0,1],n)):e}function rH(e,t){return t?e.slice().reverse():e}function gMe(e){Pe.call(this,null,e)}lt(gMe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Vb(e.sort)),this.modified(n),t}});const Ope="zero",yMe="center",vMe="normalize",bMe=["y0","y1"];function ate(e){Pe.call(this,null,e)}ate.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Ope,values:[Ope,yMe,vMe]},{name:"as",type:"string",array:!0,length:2,default:bMe}]};lt(ate,Pe,{transform(e,t){var n=e.as||bMe,r=n[0],i=n[1],s=Vb(e.sort),o=e.field||TS,a=e.offset===yMe?O9t:e.offset===vMe?$9t:M9t,u,l,c,f;for(u=L9t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function O9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function $9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function M9t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function L9t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const F9t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:oMe,datajoin:aMe,encode:uMe,legendentries:lMe,linkpath:ste,pie:ote,scale:pMe,sortitems:gMe,stack:ate},Symbol.toStringTag,{value:"Module"}));var j9t=Math.abs,iH=Math.cos,rM=Math.sin,B9t=1e-6,_Me=Math.PI,sH=_Me/2,$pe=U9t(2);function Mpe(e){return e>1?sH:e<-1?-sH:Math.asin(e)}function U9t(e){return e>0?Math.sqrt(e):0}function z9t(e,t){var n=e*rM(t),r=30,i;do t-=i=(t+rM(t)-n)/(1+iH(t));while(j9t(i)>B9t&&--r>0);return t/2}function V9t(e,t,n){function r(i,s){return[e*i*iH(s=z9t(n,s)),t*rM(s)]}return r.invert=function(i,s){return s=Mpe(s/t),[i/(e*iH(s)),Mpe((2*s+rM(2*s))/n)]},r}var H9t=V9t($pe/sH,$pe,_Me);function q9t(){return Hh(H9t).scale(169.529)}const W9t=NSe(),oH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function G9t(e,t){return function n(){const r=t();return r.type=e,r.path=NSe().projection(r),r.copy=r.copy||function(){const i=n();return oH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},E3e(r)}}function ute(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(iM[e]=G9t(e,t),this):iM[e]||null}function wMe(e){return e&&e.path||W9t}const iM={albers:DSe,albersusa:_dt,azimuthalequalarea:wdt,azimuthalequidistant:Edt,conicconformal:Tdt,conicequalarea:w3,conicequidistant:Idt,equalEarth:Rdt,equirectangular:Adt,gnomonic:Ndt,identity:Pdt,mercator:xdt,mollweide:q9t,naturalEarth1:Ddt,orthographic:Odt,stereographic:$dt,transversemercator:Mdt};for(const e in iM)ute(e,iM[e]);function Y9t(){}const pp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function EMe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),K9t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(X9t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,pp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,pp[m|g<<1].forEach(b);for(pp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,pp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,pp[m|g<<1|y<<2|v<<3].forEach(b);pp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,pp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,pp[y<<2|v<<3].forEach(b);pp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],S=o(E),A=o(T),C,I;(C=d[S])?(I=f[A])?(delete d[C.end],delete f[I.start],C===I?(C.ring.push(T),c(C.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete d[C.end],C.ring.push(T),d[C.end=A]=C):(C=f[A])?(I=d[S])?(delete f[C.start],delete d[I.end],C===I?(C.ring.push(T),c(C.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=S]=C):f[S]=d[A]={start:S,end:A,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:Y9t,r):n===a},r}function K9t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function X9t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Q9t(e,t[n]))return i;return 0}function Q9t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(J9t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function J9t(e,t,n){var r;return Z9t(e,t,n)&&eBt(e[r=+(e[0]===t[0])],n[r],t[r])}function Z9t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function eBt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xMe(e,t,n){return function(r){var i=kh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?j0(s,o,e):a/(e+1);return Pu(s+u,o,u)}}function lte(e){Pe.call(this,null,e)}lte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(lte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||wa,s=EMe().smooth(e.smooth!==!1),o=e.thresholds||tBt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));nBt(f,c,l,e),f.forEach(d=>{u.push(P4(l,wr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function tBt(e,t,n){const r=xMe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>m0(t(i).values)))}function nBt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(vn(i)&&(i=i(n,r)),vn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(SMe(t,o,a,u,l))}function SMe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Lpe(e,t,n){const r=e>=0?e:IZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function N9(e){return vn(e)?e:Ea(+e)}function TMe(){var e=u=>u[0],t=u=>u[1],n=TS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Lpe(r[0],u,e)>>o,f=Lpe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),T=h+(+t(w)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(w))}),c>0&&f>0?(I_(p,m,g,y,c),k_(p,m,y,g,f),I_(p,m,g,y,c),k_(p,m,y,g,f),I_(p,m,g,y,c),k_(p,m,y,g,f)):c>0?(I_(p,m,g,y,c),I_(p,m,y,g,c),I_(p,m,g,y,c),v=y):f>0&&(k_(p,m,g,y,f),k_(p,m,y,g,f),k_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/nxe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=N9(u),a):e},a.y=function(u){return arguments.length?(t=N9(u),a):t},a.weight=function(u){return arguments.length?(n=N9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ht(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function I_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function k_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function cte(e){Pe.call(this,null,e)}cte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const rBt=["x","y","weight","size","cellSize","bandwidth"];function AMe(e,t){return rBt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(cte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=iBt(r,e.groupby),s=(e.groupby||[]).map(Yi),o=AMe(TMe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>wr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function iBt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function fte(e){Pe.call(this,null,e)}fte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(fte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=EMe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||xMe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=AMe(TMe(),e)(i,!0),u=SMe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(wr),n}});const aH="Feature",dte="FeatureCollection",sBt="MultiPoint";function hte(e){Pe.call(this,null,e)}hte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(hte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&wa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(pa(a))||s&&t.modified(pa(s))||o&&t.modified(pa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:aH,geometry:{type:sBt,coordinates:r}})),this.value={type:dte,features:n}}});function pte(e){Pe.call(this,null,e)}pte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(pte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||wa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=wMe(e.projection),n.materialize().reflow()):o=i===wa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=oBt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function oBt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function mte(e){Pe.call(this,null,e)}mte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(mte,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function gte(e){Pe.call(this,null,e)}gte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(gte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=aBt(wMe(e.projection),e.field||Pc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function aBt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function yte(e){Pe.call(this,[],e),this.generator=Zft()}yte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(yte,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)vn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(AOe(n[0],i)):t.add.push(wr(i)),n[0]=i,t}});function vte(e){Pe.call(this,null,e)}vte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(vte,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||wa,s=lBt(e.opacity,e),o=uBt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?m0(n.map(l=>m0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=yn({},l,u);r||(f.$max=m0(c.values||[])),l[a]=cBt(c,f,o.dep?o:Ea(o(f)),s.dep?s:Ea(s(f)))}),t.reflow(!0).modifies(a)}});function uBt(e,t){let n;return vn(e)?(n=r=>B0(e(r,t)),n.dep=CMe(e)):n=Ea(B0(e||"#888")),n}function lBt(e,t){let n;return vn(e)?(n=r=>e(r,t),n.dep=CMe(e)):e?n=Ea(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function CMe(e){if(!vn(e))return!1;const t=Gf(pa(e));return t.$x||t.$y||t.$value||t.$max}function cBt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:zg,d=A0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function IMe(e){Pe.call(this,null,e),this.modified(!0)}lt(IMe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=dBt(e.type),oH.forEach(r=>{e[r]!=null&&Fpe(n,r,e[r])})):oH.forEach(r=>{e.modified(r)&&Fpe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&fBt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function fBt(e,t){const n=hBt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function dBt(e){const t=ute((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function Fpe(e,t,n){vn(e[t])&&e[t](n)}function hBt(e){return e=ht(e),e.length===1?e[0]:{type:dte,features:e.reduce((t,n)=>t.concat(pBt(n)),[])}}function pBt(e){return e.type===dte?e.features:ht(e).filter(t=>t!=null).map(t=>t.type===aH?t:{type:aH,geometry:t})}const mBt=Object.freeze(Object.defineProperty({__proto__:null,contour:fte,geojson:hte,geopath:pte,geopoint:mte,geoshape:gte,graticule:yte,heatmap:vte,isocontour:lte,kde2d:cte,projection:IMe},Symbol.toStringTag,{value:"Module"})),jpe={center:Vct,collide:uft,nbody:bft,link:cft,x:_ft,y:wft},D2="forces",uH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],gBt=["static","iterations"],kMe=["x","y","vx","vy"];function bte(e){Pe.call(this,null,e)}bte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kMe}]};lt(bte,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(uH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&RMe(n,e,0,t)):(this.value=n=vBt(t.source,e),n.on("tick",yBt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(gBt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==D2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(kMe)}});function yBt(e,t){return()=>e.touch(t).run()}function vBt(e,t){const n=vft(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),RMe(n,t,!0).on("end",()=>s=!0)}function RMe(e,t,n,r){var i=ht(t.forces),s,o,a,u;for(s=0,o=uH.length;s<o;++s)a=uH[s],a!==D2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=D2+s,a=n||t.modified(D2,s)?_Bt(i[s]):r&&bBt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(D2+s,null);return e.numForces=i.length,e}function bBt(e,t){var n,r;for(n in e)if(vn(r=e[n])&&t.modified(pa(r)))return 1;return 0}function _Bt(e){var t,n;jt(jpe,e.force)||Me("Unrecognized force: "+e.force),t=jpe[e.force]();for(n in e)vn(t[n])&&wBt(t[n],e[n],e);return t}function wBt(e,t,n){e(vn(t)?r=>t(r,n):t)}const EBt=Object.freeze(Object.defineProperty({__proto__:null,force:bte},Symbol.toStringTag,{value:"Module"}));function lH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function _te(e){Pe.call(this,null,e)}_te.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const xBt=e=>e.values;lt(_te,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&N4(o.data)&&i.rem.push(o.data)}),this.value=s=s6({values:ht(e.keys).reduce((o,a)=>(o.key(a),o),SBt()).entries(i.source)},xBt),n&&s.each(o=>{o.children&&(o=wr(o.data),i.add.push(o),i.source.push(o))}),lH(s,Lt,Lt)),i.source.root=s,i}});function SBt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ng(e){Pe.call(this,null,e)}const TBt=(e,t)=>e.parent===t.parent?1:2;lt(ng,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Vb(e.sort,o=>o.data)),ABt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?TBt:TS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>CBt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function ABt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function CBt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const cH=["x","y","r","depth","children"];function wte(e){ng.call(this,e)}wte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cH.length,default:cH}]};lt(wte,ng,{layout:YSe,params:["radius","size","padding"],fields:cH});const fH=["x0","y0","x1","y1","depth","children"];function Ete(e){ng.call(this,e)}Ete.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fH.length,default:fH}]};lt(Ete,ng,{layout:wht,params:["size","round","padding"],fields:fH});function xte(e){Pe.call(this,null,e)}xte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(xte,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?lH(wle().id(e.key).parentId(e.parentKey)(i.source),e.key,Dc):lH(wle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Bpe={tidy:Nht,cluster:Hdt},dH=["x","y","depth","children"];function Ste(e){ng.call(this,e)}Ste.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:dH.length,default:dH}]};lt(Ste,ng,{layout(e){const t=e||"tidy";if(jt(Bpe,t))return Bpe[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:dH});function Tte(e){Pe.call(this,[],e)}Tte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Tte,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(wr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const Upe={binary:Dht,dice:uk,slice:o6,slicedice:Oht,squarify:JSe,resquarify:$ht},hH=["x0","y0","x1","y1","depth","children"];function Ate(e){ng.call(this,e)}Ate.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hH.length,default:hH}]};lt(Ate,ng,{layout(){const e=Pht();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(Upe,t)?e.tile(Upe[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:hH});const IBt=Object.freeze(Object.defineProperty({__proto__:null,nest:_te,pack:wte,partition:Ete,stratify:xte,tree:Ste,treelinks:Tte,treemap:Ate},Symbol.toStringTag,{value:"Module"})),P9=4278190080;function kBt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function RBt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=A0(s,o).getContext("2d"),l=A0(s,o).getContext("2d"),c=a&&A0(s,o).getContext("2d");n.forEach(A=>FD(u,A,!1)),FD(l,t,!1),a&&FD(c,t,!0);const f=D9(u,s,o),d=D9(l,s,o),h=a&&D9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,T,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&P9,S=d[w]&P9,T=a&&h[w]&P9,(E||T||S)&&(v=e(g),b=e(y),!i&&(E||S)&&p.set(v,b),a&&(E||T)&&m.set(v,b));return[p,m]}function D9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function FD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>FD(e,s.items,n))}):Vl[r].draw(e,{items:n?t.map(NBt):t})}function NBt(e){const t=P4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const mp=5,Pa=31,mI=32,Ng=new Uint32Array(mI+1),gf=new Uint32Array(mI+1);gf[0]=0;Ng[0]=~gf[0];for(let e=1;e<=mI;++e)gf[e]=gf[e-1]<<1|1,Ng[e]=~gf[e];function PBt(e,t){const n=new Uint32Array(~~((e*t+mI)/mI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>mp]&1<<(a&Pa)},set:(s,o)=>{const a=o*e+s;r(a>>>mp,1<<(a&Pa))},clear:(s,o)=>{const a=o*e+s;i(a>>>mp,~(1<<(a&Pa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>mp,h=f>>>mp,d===h){if(n[d]&Ng[c&Pa]&gf[(f&Pa)+1])return!0}else{if(n[d]&Ng[c&Pa]||n[h]&gf[(f&Pa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>mp,d=c>>>mp,f===d)r(f,Ng[l&Pa]&gf[(c&Pa)+1]);else for(r(f,Ng[l&Pa]),r(d,gf[(c&Pa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>mp,d=c>>>mp,f===d)i(f,gf[l&Pa]|Ng[(c&Pa)+1]);else for(i(f,gf[l&Pa]),i(d,Ng[(c&Pa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function DBt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>PBt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function OBt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=kl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function sM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function n0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function $Bt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!sM(p,m,d,h,i,s)&&!n0(e,p,m,h,d,g,o,a)&&!n0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,n0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=kl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,T,S,A,C,I,N,O,P,$,F,L,B,z;for(let q=0;q<f;++q){for(v=c[q].x,w=c[q].y,b=c[q].x2===void 0?v:c[q].x2,E=c[q].y2===void 0?w:c[q].y2,v>b&&(z=v,v=b,b=z),w>E&&(z=w,w=E,E=z),I=e(v),O=e(b),N=~~((I+O)/2),P=e(w),F=e(E),$=~~((P+F)/2),A=N;A>=I;--A)for(C=$;C>=P;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=N;A<=O;++A)for(C=$;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(b-v+E-w),T=(v+b)/2,S=(w+E)/2,L>=y&&!sM(T,S,h,d,i,s)&&!n0(e,T,S,d,h,d,o,null)&&(y=L,l.x=T,l.y=S,g=!0))}return m||g?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const MBt=[-1,-1,1,1],LBt=[-1,1,-1,1];function FBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=kl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,T,S,A,C,I,N,O,P,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,T=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+T)/2)]);p.length;)if([C,I]=p.pop(),!(o.get(C,I)||a.get(C,I)||u.get(C,I))){u.set(C,I);for(let L=0;L<4;++L)S=C+MBt[L],A=I+LBt[L],u.outOfBounds(S,A,S,A)||p.push([S,A]);if(S=e.invert(C),A=e.invert(I),N=m,O=s,!sM(S,A,h,d,i,s)&&!n0(e,S,A,d,h,N,o,a)&&!n0(e,S,A,d,h,d,o,null)){for(;O-N>=1;)P=(N+O)/2,n0(e,S,A,d,h,P,o,a)?O=P:N=P;N>m&&(l.x=S,l.y=A,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-b+T-E),S=(b+w)/2,A=(E+T)/2,$>=v&&!sM(S,A,h,d,i,s)&&!n0(e,S,A,d,h,d,o,null)&&(v=$,l.x=S,l.y=A,y=!0))}return g||y?(S=h/2,A=d/2,o.setRange(e(l.x-S),e(l.y-A),e(l.x+S),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const jBt=["right","center","left"],BBt=["bottom","middle","top"];function UBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,T,S,A,C,I,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,E=S+f/2,A=e(v),I=e(w),N=e(E),!d)if(zpe(A,A,I,N,o,a,v,v,w,E,c,m))d=kl.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,b=T+d/2,A=e(v),C=e(b),zpe(A,C,I,N,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:T,l.y=p?p*y<0?E:w:S,l.align=jBt[h*y+1],l.baseline=BBt[p*y+1],o.setRange(A,I,C,N),!0}return!1}}function zpe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const O9=0,$9=4,M9=8,L9=0,F9=1,j9=2,zBt={"top-left":O9+L9,top:O9+F9,"top-right":O9+j9,left:$9+L9,middle:$9+F9,right:$9+j9,"bottom-left":M9+L9,bottom:M9+F9,"bottom-right":M9+j9},VBt={naive:OBt,"reduced-search":$Bt,floodfill:FBt};function HBt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=qBt(r,f),h=WBt(i,f),p=GBt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=YBt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const T=e.map(I=>{const N=v?kl.width(I,I.text):void 0;return w=Math.max(w,N),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=DBt(t[0],t[1],l);let A;if(!b){n&&T.sort((O,P)=>n(O.datum,P.datum));let I=!1;for(let O=0;O<h.length&&!I;++O)I=h[O]===5||d[O]<0;const N=(p&&o||g)&&e.map(O=>O.datum);A=s.length||N?RBt(S,N||[],s,I,g):kBt(S,o&&T)}const C=g?VBt[c](S,A,o,u):UBt(S,A,h,d);return T.forEach(I=>I.opacity=+C(I)),T}function qBt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function WBt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=zBt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function GBt(e){return e&&e.mark&&e.mark.marktype}function YBt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const pH=["x","y","opacity","align","baseline"],NMe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Cte(e){Pe.call(this,null,e)}Cte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:NMe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:pH.length,default:pH}]};lt(Cte,Pe,{transform(e,t){function n(s){const o=e[s];return vn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||pH;return HBt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ht(e.offset==null?1:e.offset),ht(e.anchor||NMe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const KBt=Object.freeze(Object.defineProperty({__proto__:null,label:Cte},Symbol.toStringTag,{value:"Module"}));function PMe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ite(e){Pe.call(this,null,e)}Ite.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(Ite,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=s.length,a=e.as||[Yi(e.x),Yi(e.y)],u=[];i.forEach(l=>{HOe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(wr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const mH={constant:BZ,linear:UZ,log:BOe,exp:UOe,pow:zOe,quad:zZ,poly:VOe},XBt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function kte(e){Pe.call(this,null,e)}kte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(mH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(kte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=e.method||"linear",a=e.order==null?3:e.order,u=XBt(o,a),l=e.as||[Yi(e.x),Yi(e.y)],c=mH[o],f=[];let d=e.extent;jt(mH,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(wr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||kh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(wr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):j4(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const QBt=Object.freeze(Object.defineProperty({__proto__:null,loess:Ite,regression:kte},Symbol.toStringTag,{value:"Module"}));function Rte(e){Pe.call(this,null,e)}Rte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const JBt=[-1e5,-1e5,1e5,1e5];lt(Rte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:JBt;const s=this.value=WY.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!eUt(u)?ZBt(u):null}return t.reflow(e.modified()).modifies(n)}});function ZBt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function eUt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const tUt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Rte},Symbol.toStringTag,{value:"Module"}));var B9=Math.PI/180,O2=64,jD=2048;function nUt(){var e=[256,256],t,n,r,i,s,o,a,u=DMe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(A0()),m=uUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,rUt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?sUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(O2<<5)/m,p.height=jD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,T=-E,S,A,C;(S=w(T+=E))&&(A=~~S[0],C=~~S[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!iUt(m,p,e[0]))&&(!g||oUt(m,g))){for(var I=m.sprite,N=m.width>>5,O=e[0]>>5,P=m.x-(N<<4),$=P&127,F=32-$,L=m.y1-m.y0,B=(m.y+m.y0)*O+(P>>5),z,q=0;q<L;q++){z=0;for(var D=0;D<=N;D++)p[B+D]|=z<<F|(D<N?(z=I[q*N+D])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=a1(p),f):n},f.fontStyle=function(p){return arguments.length?(i=a1(p),f):i},f.fontWeight=function(p){return arguments.length?(s=a1(p),f):s},f.rotate=function(p){return arguments.length?(o=a1(p),f):o},f.text=function(p){return arguments.length?(t=a1(p),f):t},f.spiral=function(p){return arguments.length?(u=lUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=a1(p),f):r},f.padding=function(p){return arguments.length?(a=a1(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function rUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(O2<<5)/s,jD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*B9),g=Math.cos(t.rotate*B9),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=O2<<5&&(o=0,a+=u,u=0),a+d>=jD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*B9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(O2<<5)/s,jD/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),I=E[(a+p)*(O2<<5)+(o+h)<<2]?1<<31-h%32:0;T[C]|=I,S|=I}S?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function iUt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function sUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function oUt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function DMe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function aUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function uUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function a1(e){return typeof e=="function"?e:function(){return e}}var lUt={archimedean:DMe,rectangular:aUt};const OMe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],cUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Nte(e){Pe.call(this,nUt(),e)}Nte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:OMe}]};lt(Nte,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return vn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||cUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||OMe;let a=e.fontSize||14,u;if(vn(a)?u=e.fontSizeRange:a=Ea(a),u){const p=a,m=gr("sqrt")().domain(kh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random($c).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const fUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Nte},Symbol.toStringTag,{value:"Module"})),dUt=e=>new Uint8Array(e),hUt=e=>new Uint16Array(e),OA=e=>new Uint32Array(e);function pUt(){let e=8,t=[],n=OA(0),r=fP(0,e),i=fP(0,e);return{data:()=>t,seen:()=>n=mUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=fP(s,e,r),i=fP(s,e))}}}function mUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function fP(e,t,n){const r=(t<257?dUt:t<65537?hUt:OA)(e);return n&&r.set(n),r}function Vpe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Hpe(){let e=OA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=OA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=gUt(h,d),c)p=t,m=e,t=Array(c+f),e=OA(c+f),yUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[aot(u,a[0],0,l),F0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function gUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),cot(e,t)}function yUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Pte(e){Pe.call(this,pUt(),e),this._indices=null,this._dims=null}Pte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(Pte,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Hpe()),s.push(Vpe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,T,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,T=v.length;E<T;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Hpe(),p[y]=m=g.insert(S,t.source,0)),o[E]=Vpe(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Dte(e){Pe.call(this,null,e)}Dte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(Dte,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const vUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Pte,resolvefilter:Dte},Symbol.toStringTag,{value:"Module"})),bUt="RawCode",ob="Literal",_Ut="Property",wUt="Identifier",EUt="ArrayExpression",xUt="BinaryExpression",$Me="CallExpression",SUt="ConditionalExpression",TUt="LogicalExpression",AUt="MemberExpression",CUt="ObjectExpression",IUt="UnaryExpression";function rd(e){this.type=e}rd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=kUt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function kUt(e){switch(e.type){case EUt:return e.elements;case xUt:case TUt:return[e.left,e.right];case $Me:return[e.callee].concat(e.arguments);case SUt:return[e.test,e.consequent,e.alternate];case AUt:return[e.object,e.property];case CUt:return e.properties;case _Ut:return[e.key,e.value];case IUt:return[e.argument];case wUt:case ob:case bUt:default:return[]}}var Qh,kt,$e,ga,Pr,rF=1,uR=2,ab=3,zy=4,iF=5,Wb=6,wu=7,lR=8,RUt=9;Qh={};Qh[rF]="Boolean";Qh[uR]="<end>";Qh[ab]="Identifier";Qh[zy]="Keyword";Qh[iF]="Null";Qh[Wb]="Numeric";Qh[wu]="Punctuator";Qh[lR]="String";Qh[RUt]="RegularExpression";var NUt="ArrayExpression",PUt="BinaryExpression",DUt="CallExpression",OUt="ConditionalExpression",MMe="Identifier",$Ut="Literal",MUt="LogicalExpression",LUt="MemberExpression",FUt="ObjectExpression",jUt="Property",BUt="UnaryExpression",so="Unexpected token %0",UUt="Unexpected number",zUt="Unexpected string",VUt="Unexpected identifier",HUt="Unexpected reserved word",qUt="Unexpected end of input",gH="Invalid regular expression",U9="Invalid regular expression: missing /",LMe="Octal literals are not allowed in strict mode.",WUt="Duplicate data property in object literal not allowed in strict mode",Ro="ILLEGAL",gI="Disabled.",GUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),YUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function sF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Cp(e){return e>=48&&e<=57}function Ote(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function $A(e){return"01234567".indexOf(e)>=0}function KUt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function yI(e){return e===10||e===13||e===8232||e===8233}function cR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&GUt.test(String.fromCharCode(e))}function oM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&YUt.test(String.fromCharCode(e))}const XUt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function FMe(){for(;$e<ga;){const e=kt.charCodeAt($e);if(KUt(e)||yI(e))++$e;else break}}function yH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ga&&Ote(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},so,Ro);return String.fromCharCode(i)}function QUt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},so,Ro);$e<ga&&(e=kt[$e++],!!Ote(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},so,Ro),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function jMe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},so,Ro),++$e,e=yH("u"),(!e||e==="\\"||!cR(e.charCodeAt(0)))&&pr({},so,Ro),t=e);$e<ga&&(e=kt.charCodeAt($e),!!oM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},so,Ro),++$e,e=yH("u"),(!e||e==="\\"||!oM(e.charCodeAt(0)))&&pr({},so,Ro),t+=e);return t}function JUt(){var e,t;for(e=$e++;$e<ga;){if(t=kt.charCodeAt($e),t===92)return $e=e,jMe();if(oM(t))++$e;else break}return kt.slice(e,$e)}function ZUt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?jMe():JUt(),t.length===1?n=ab:XUt.hasOwnProperty(t)?n=zy:t==="null"?n=iF:t==="true"||t==="false"?n=rF:n=ab,{type:n,value:t,start:e,end:$e}}function z9(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:wu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:wu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:wu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:wu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:wu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:wu,value:i,start:e,end:$e};if(i==="//"&&pr({},so,Ro),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:wu,value:r,start:e,end:$e};pr({},so,Ro)}function e7t(e){let t="";for(;$e<ga&&Ote(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},so,Ro),cR(kt.charCodeAt($e))&&pr({},so,Ro),{type:Wb,value:parseInt("0x"+t,16),start:e,end:$e}}function t7t(e){let t="0"+kt[$e++];for(;$e<ga&&$A(kt[$e]);)t+=kt[$e++];return(cR(kt.charCodeAt($e))||Cp(kt.charCodeAt($e)))&&pr({},so,Ro),{type:Wb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function qpe(){var e,t,n;if(n=kt[$e],sF(Cp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,e7t(t);if($A(n))return t7t(t);n&&Cp(n.charCodeAt(0))&&pr({},so,Ro)}for(;Cp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Cp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Cp(kt.charCodeAt($e)))for(;Cp(kt.charCodeAt($e));)e+=kt[$e++];else pr({},so,Ro);return cR(kt.charCodeAt($e))&&pr({},so,Ro),{type:Wb,value:parseFloat(e),start:t,end:$e}}function n7t(){var e="",t,n,r,i,s=!1;for(t=kt[$e],sF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ga;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!yI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=QUt()):e+=yH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$A(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ga&&$A(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<ga&&$A(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(yI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},so,Ro),{type:lR,value:e,octal:s,start:n,end:$e}}function r7t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},gH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},gH)}try{return new RegExp(e,t)}catch{return null}}function i7t(){var e,t,n,r,i;for(e=kt[$e],sF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<ga;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],yI(e.charCodeAt(0))&&pr({},U9),t+=e;else if(yI(e.charCodeAt(0)))pr({},U9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},U9),i=t.substr(1,t.length-2),{value:i,literal:t}}function s7t(){var e,t,n;for(t="",n="";$e<ga&&(e=kt[$e],!!oM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ga?pr({},so,Ro):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},gH,n),{value:n,literal:t}}function o7t(){var e,t,n,r;return Pr=null,FMe(),e=$e,t=i7t(),n=s7t(),r=r7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function a7t(e){return e.type===ab||e.type===zy||e.type===rF||e.type===iF}function BMe(){if(FMe(),$e>=ga)return{type:uR,start:$e,end:$e};const e=kt.charCodeAt($e);return cR(e)?ZUt():e===40||e===41||e===59?z9():e===39||e===34?n7t():e===46?Cp(kt.charCodeAt($e+1))?qpe():z9():Cp(e)?qpe():z9()}function ku(){const e=Pr;return $e=e.end,Pr=BMe(),$e=e.end,e}function UMe(){const e=$e;Pr=BMe(),$e=e}function u7t(e){const t=new rd(NUt);return t.elements=e,t}function Wpe(e,t,n){const r=new rd(e==="||"||e==="&&"?MUt:PUt);return r.operator=e,r.left=t,r.right=n,r}function l7t(e,t){const n=new rd(DUt);return n.callee=e,n.arguments=t,n}function c7t(e,t,n){const r=new rd(OUt);return r.test=e,r.consequent=t,r.alternate=n,r}function $te(e){const t=new rd(MMe);return t.name=e,t}function $2(e){const t=new rd($Ut);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Gpe(e,t,n){const r=new rd(LUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function f7t(e){const t=new rd(FUt);return t.properties=e,t}function Ype(e,t,n){const r=new rd(jUt);return r.key=t,r.value=n,r.kind=e,r}function d7t(e,t){const n=new rd(BUt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(sF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function oF(e){e.type===uR&&pr(e,qUt),e.type===Wb&&pr(e,UUt),e.type===lR&&pr(e,zUt),e.type===ab&&pr(e,VUt),e.type===zy&&pr(e,HUt),pr(e,so,e.value)}function ya(e){const t=ku();(t.type!==wu||t.value!==e)&&oF(t)}function li(e){return Pr.type===wu&&Pr.value===e}function V9(e){return Pr.type===zy&&Pr.value===e}function h7t(){const e=[];for($e=Pr.start,ya("[");!li("]");)li(",")?(ku(),e.push(null)):(e.push(ub()),li("]")||ya(","));return ku(),u7t(e)}function Kpe(){$e=Pr.start;const e=ku();return e.type===lR||e.type===Wb?(e.octal&&pr(e,LMe),$2(e)):$te(e.value)}function p7t(){var e,t,n,r;if($e=Pr.start,e=Pr,e.type===ab)return n=Kpe(),ya(":"),r=ub(),Ype("init",n,r);if(e.type===uR||e.type===wu)oF(e);else return t=Kpe(),ya(":"),r=ub(),Ype("init",t,r)}function m7t(){var e=[],t,n,r,i={},s=String;for($e=Pr.start,ya("{");!li("}");)t=p7t(),t.key.type===MMe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},WUt):i[r]=!0,e.push(t),li("}")||ya(",");return ya("}"),f7t(e)}function g7t(){ya("(");const e=Mte();return ya(")"),e}const y7t={if:1};function v7t(){var e,t,n;if(li("("))return g7t();if(li("["))return h7t();if(li("{"))return m7t();if(e=Pr.type,$e=Pr.start,e===ab||y7t[Pr.value])n=$te(ku().value);else if(e===lR||e===Wb)Pr.octal&&pr(Pr,LMe),n=$2(ku());else{if(e===zy)throw new Error(gI);e===rF?(t=ku(),t.value=t.value==="true",n=$2(t)):e===iF?(t=ku(),t.value=null,n=$2(t)):li("/")||li("/=")?(n=$2(o7t()),UMe()):oF(ku())}return n}function b7t(){const e=[];if(ya("("),!li(")"))for(;$e<ga&&(e.push(ub()),!li(")"));)ya(",");return ya(")"),e}function _7t(){$e=Pr.start;const e=ku();return a7t(e)||oF(e),$te(e.value)}function w7t(){return ya("."),_7t()}function E7t(){ya("[");const e=Mte();return ya("]"),e}function x7t(){var e,t,n;for(e=v7t();;)if(li("."))n=w7t(),e=Gpe(".",e,n);else if(li("("))t=b7t(),e=l7t(e,t);else if(li("["))n=E7t(),e=Gpe("[",e,n);else break;return e}function Xpe(){const e=x7t();if(Pr.type===wu&&(li("++")||li("--")))throw new Error(gI);return e}function BD(){var e,t;if(Pr.type!==wu&&Pr.type!==zy)t=Xpe();else{if(li("++")||li("--"))throw new Error(gI);if(li("+")||li("-")||li("~")||li("!"))e=ku(),t=BD(),t=d7t(e.value,t);else{if(V9("delete")||V9("void")||V9("typeof"))throw new Error(gI);t=Xpe()}}return t}function Qpe(e){let t=0;if(e.type!==wu&&e.type!==zy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function S7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Pr,u=BD(),r=Pr,i=Qpe(r),i===0)return u;for(r.prec=i,ku(),t=[e,Pr],o=BD(),s=[u,r,o];(i=Qpe(Pr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Wpe(a,u,o),s.push(n);r=ku(),r.prec=i,s.push(r),t.push(Pr),n=BD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Wpe(s[l-1].value,s[l-2],n),l-=2;return n}function ub(){var e,t,n;return e=S7t(),li("?")&&(ku(),t=ub(),ya(":"),n=ub(),e=c7t(e,t,n)),e}function Mte(){const e=ub();if(li(","))throw new Error(gI);return e}function Lte(e){kt=e,$e=0,ga=kt.length,Pr=null,UMe();const t=Mte();if(Pr.type!==uR)throw new Error("Unexpect token after expression.");return t}var zMe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function VMe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function T7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function HMe(e){e=e||{};const t=e.allowed?Gf(e.allowed):{},n=e.forbidden?Gf(e.forbidden):{},r=e.constants||zMe,i=(e.functions||VMe)(f),s=e.globalvar,o=e.fieldvar,a=vn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(pt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Me("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[T7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Me("Unrecognized function: "+m),vn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Jpe=Symbol("vega_selection_getter");function qMe(e){return(!e.getter||!e.getter[Jpe])&&(e.getter=Pc(e.field),e.getter[Jpe]=!0),e.getter}const Fte="intersect",Zpe="union",A7t="vlMulti",C7t="vlPoint",eme="or",I7t="and",Nd="_vgsid_",vI=Pc(Nd),k7t="E",R7t="R",N7t="R-E",P7t="R-LE",D7t="R-RE",aM="index:unit";function tme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=qMe(a)(e),S0(o)&&(o=fa(o)),S0(r[s])&&(r[s]=fa(r[s])),je(r[s])&&S0(r[s][0])&&(r[s]=r[s].map(fa)),a.type===k7t){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===R7t){if(!vw(o,r[s]))return!1}else if(a.type===D7t){if(!vw(o,r[s],!0,!1))return!1}else if(a.type===N7t){if(!vw(o,r[s],!1,!1))return!1}else if(a.type===P7t&&!vw(o,r[s],!1,!0))return!1;return!0}function O7t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[aM]&&r[aM].value:void 0,o=n===Fte,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=tme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=tme(t,l),o^h)return h;return a&&o}const WMe=Kx(vI),$7t=WMe.left,M7t=WMe.right;function L7t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[aM]&&r[aM].value:void 0,o=n===Fte,a=vI(t),u=$7t(i,a);if(u===i.length||vI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(M7t(i,a)-u<s.size)return!1}return!0}function F7t(e,t){return e.map(n=>yn(t.fields?{values:t.fields.map(r=>qMe(r)(n.datum))}:{[Nd]:vI(n.datum)},t))}function j7t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,T;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=H9[`${y}_union`],m[d]=v(g,ht(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(ht(f).reduce((S,A,C)=>(S[c[C].field]=A,S),{})))}else h=Nd,p=vI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Nd]:p}));if(t=t||Zpe,o[Nd]?o[Nd]=H9[`${Nd}_${t}`](...Object.values(o[Nd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(A=>o[S][A]).reduce((A,C)=>A===void 0?C:H9[`${u[S]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const S=r?C7t:A7t;o[S]=t===Zpe?{[eme]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[I7t]:s.map(A=>({[eme]:a[A]}))}}return o}var H9={[`${Nd}_union`]:bot,[`${Nd}_intersect`]:yot,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=fa(t[0]),r=fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=fa(t[0]),r=fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const B7t=":",U7t="@";function jte(e,t,n,r){t[0].type!==ob&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=U7t+o,u=B7t+i;s===Fte&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function GMe(e){const t=this.context.data[e];return t?t.values.value:[]}function z7t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function V7t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Dc).insert(t)),1}function H7t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const fR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},q7t=fR("format"),YMe=fR("timeFormat"),W7t=fR("utcFormat"),G7t=fR("timeParse"),Y7t=fR("utcParse"),dP=new Date(2e3,0,1);function aF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(dP.setYear(2e3),dP.setMonth(e),dP.setDate(t),YMe.call(this,dP,n))}function K7t(e){return aF.call(this,e,1,"%B")}function X7t(e){return aF.call(this,e,1,"%b")}function Q7t(e){return aF.call(this,0,2+e,"%A")}function J7t(e){return aF.call(this,0,2+e,"%a")}const Z7t=":",ezt="@",vH="%",KMe="$";function Bte(e,t,n,r){t[0].type!==ob&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=Z7t+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function tzt(e,t,n,r){t[0].type!==ob&&Me("First argument to indata must be a string literal."),t[1].type!==ob&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=ezt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ya(e,t,n,r){if(t[0].type===ob)nme(n,r,t[0].value);else for(e in n.scales)nme(n,r,e)}function nme(e,t,n){const r=vH+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Jh(e,t){if(vn(e))return e;if(pt(e)){const n=t.scales[e];return n&&CFt(n.value)?n.value:void 0}}function nzt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ya,n._range=Ya,n._scale=Ya;const r=i=>"_["+(i.type===ob?rt(vH+i.value):rt(vH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Ute(e,t){return function(n,r,i){if(n){const s=Jh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const rzt=Ute("area",Pft),izt=Ute("bounds",Mft),szt=Ute("centroid",zft);function ozt(e,t){const n=Jh(e,(t||this).context);return n&&n.scale()}function azt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function zte(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function uzt(){return zte(this.context.dataflow,"warn",arguments)}function lzt(){return zte(this.context.dataflow,"info",arguments)}function czt(){return zte(this.context.dataflow,"debug",arguments)}function q9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bH(e){const t=B0(e),n=q9(t.r),r=q9(t.g),i=q9(t.b);return .2126*n+.7152*r+.0722*i}function fzt(e,t){const n=bH(e),r=bH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function dzt(){const e=[].slice.call(arguments);return e.unshift({}),yn(...e)}function XMe(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?hzt(e,t):!1:mt(e)&&mt(t)?QMe(e,t):!1}function hzt(e,t){for(let n=0,r=e.length;n<r;++n)if(!XMe(e[n],t[n]))return!1;return!0}function QMe(e,t){for(const n in e)if(!XMe(e[n],t[n]))return!1;return!0}function rme(e){return t=>QMe(e,t)}function pzt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Dc:je(n)||N4(n)?n:rme(n),c.remove(f)),t&&c.insert(t),r&&(f=rme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function mzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function gzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const ime={};function yzt(e,t){const n=ime[t]||(ime[t]=Pc(t));return je(e)?e.map(n):n(e)}function Vte(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Hte(e){return Vte(e)||(pt(e)?e:null)}function vzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vte(e).join(...n)}function bzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hte(e).indexOf(...n)}function _zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hte(e).lastIndexOf(...n)}function wzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hte(e).slice(...n)}function Ezt(e,t,n){return vn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function xzt(e){return Vte(e).slice().reverse()}function Szt(e,t,n){return pee(e||0,t||0,n||0)}function Tzt(e,t){const n=Jh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Azt(e,t){const n=Jh(e,(t||this).context);return n?n.copy():void 0}function Czt(e,t){const n=Jh(e,(t||this).context);return n?n.domain():[]}function Izt(e,t,n){const r=Jh(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function kzt(e,t){const n=Jh(e,(t||this).context);return n&&n.range?n.range():[]}function Rzt(e,t,n){const r=Jh(e,(n||this).context);return r?r(t):void 0}function Nzt(e,t,n,r,i){e=Jh(e,(i||this).context);const s=U3e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=wa;return u-a?l=k3e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Pzt(e,t,n){const r=Jh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Dzt(e){let t=null;return function(n){return n?dI(n,t=t||ax(e)):e}}const JMe=e=>e.data;function ZMe(e,t){const n=GMe.call(t,e);return n.root&&n.root.lookup||{}}function Ozt(e,t,n){const r=ZMe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(JMe):void 0}function $zt(e,t){const n=ZMe(e,this)[t];return n?n.ancestors().map(JMe):void 0}const eLe=()=>typeof window<"u"&&window||null;function Mzt(){const e=eLe();return e?e.screen:{}}function Lzt(){const e=eLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Fzt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function tLe(e,t,n){if(!e)return[];const[r,i]=e,s=new Ss().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return F$e(o,s,jzt(t))}function jzt(e){let t=null;if(e){const n=ht(e.marktype),r=ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Bzt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Uzt(e){return ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function zzt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ss().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),tLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Vzt(u.x,u.y,t))}function Vzt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const bI={random(){return $c()},cumulativeNormal:M4,cumulativeLogNormal:OZ,cumulativeUniform:FZ,densityNormal:kZ,densityLogNormal:DZ,densityUniform:LZ,quantileNormal:L4,quantileLogNormal:$Z,quantileUniform:jZ,sampleNormal:$4,sampleLogNormal:PZ,sampleUniform:MZ,isArray:je,isBoolean:Uy,isDate:S0,isDefined(e){return e!==void 0},isNumber:lr,isObject:mt,isRegExp:jDe,isString:pt,isTuple:N4,isValid(e){return e!=null&&e===e},toBoolean:hZ,toDate(e){return pZ(e)},toNumber:fa,toString:mZ,indexof:bzt,join:vzt,lastindexof:_zt,replace:Ezt,reverse:xzt,slice:wzt,flush:LDe,lerp:BDe,merge:dzt,pad:VDe,peek:Qn,pluck:yzt,span:qk,inrange:vw,truncate:HDe,rgb:B0,lab:YO,hcl:KO,hsl:WO,luminance:bH,contrast:fzt,sequence:Pu,format:q7t,utcFormat:W7t,utcParse:Y7t,utcOffset:iOe,utcSequence:aOe,timeFormat:YMe,timeParse:G7t,timeOffset:rOe,timeSequence:oOe,timeUnitSpecifier:WDe,monthFormat:K7t,monthAbbrevFormat:X7t,dayFormat:Q7t,dayAbbrevFormat:J7t,quarter:DDe,utcquarter:ODe,week:YDe,utcweek:QDe,dayofyear:GDe,utcdayofyear:XDe,warn:uzt,info:lzt,debug:czt,extent(e){return kh(e)},inScope:azt,intersect:tLe,clampRange:$De,pinchDistance:mzt,pinchAngle:gzt,screen:Mzt,containerSize:Fzt,windowSize:Lzt,bandspace:Szt,setdata:V7t,pathShape:Dzt,panLinear:kDe,panLog:RDe,panPow:NDe,panSymlog:PDe,zoomLinear:aZ,zoomLog:uZ,zoomPow:B$,zoomSymlog:lZ,encode:H7t,modify:pzt,lassoAppend:Bzt,lassoPath:Uzt,intersectLasso:zzt},Hzt=["view","item","group","xy","x","y"],qzt="event.vega.",nLe="this.",qte={},rLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(KMe+e)}]`,functions:Wzt,constants:zMe,visitors:qte},_H=HMe(rLe);function Wzt(e){const t=VMe(e);Hzt.forEach(n=>t[n]=qzt+n);for(const n in bI)t[n]=nLe+n;return yn(t,nzt(e,bI,qte)),t}function fs(e,t,n){return arguments.length===1?bI[e]:(bI[e]=t,n&&(qte[e]=n),_H&&(_H.functions[e]=nLe+e),this)}fs("bandwidth",Tzt,Ya);fs("copy",Azt,Ya);fs("domain",Czt,Ya);fs("range",kzt,Ya);fs("invert",Izt,Ya);fs("scale",Rzt,Ya);fs("gradient",Nzt,Ya);fs("geoArea",rzt,Ya);fs("geoBounds",izt,Ya);fs("geoCentroid",szt,Ya);fs("geoShape",Pzt,Ya);fs("geoScale",ozt,Ya);fs("indata",z7t,tzt);fs("data",GMe,Bte);fs("treePath",Ozt,Bte);fs("treeAncestors",$zt,Bte);fs("vlSelectionTest",O7t,jte);fs("vlSelectionIdTest",L7t,jte);fs("vlSelectionResolve",j7t,jte);fs("vlSelectionTuples",F7t);function Nh(e,t){const n={};let r;try{e=pt(e)?e:rt(e)+"",r=Lte(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==$Me)return;const o=s.callee.name,a=rLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=_H(r);return i.globals.forEach(s=>{const o=KMe+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:yn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Gzt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Yzt=Gf(["rule"]),sme=Gf(["group","image","rect"]);function Kzt(e,t){let n="";return Yzt[t]||(e.x2&&(e.x?(sme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(sme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Wte(e){return(e+"").toLowerCase()}function Xzt(e){return Wte(e)==="operator"}function Qzt(e){return Wte(e)==="collect"}function LT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Jzt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Zzt={operator:(e,t)=>LT(e,["_"],t.code),parameter:(e,t)=>LT(e,["datum","_"],t.code),event:(e,t)=>LT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return LT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Kzt(r,n),i+="return m;",LT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Jzt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function eVt(e){const t=this;Xzt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function tVt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function nVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>ome(s,n,t)):ome(i,n,t)}return t}function ome(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=ame.length,s;r<i;++r)if(s=ame[r],jt(e,s.key))return s.parse(e,t,n);return e}var ame=[{key:"$ref",parse:rVt},{key:"$key",parse:sVt},{key:"$expr",parse:iVt},{key:"$field",parse:oVt},{key:"$encode",parse:uVt},{key:"$compare",parse:aVt},{key:"$context",parse:lVt},{key:"$subflow",parse:cVt},{key:"$tupleid",parse:fVt}];function rVt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function iVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=il(t.parameterExpression(e.$expr),e.$fields))}function sVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=dZ(e.$key,e.$flat,t.expr.codegen))}function oVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Pc(e.$field,e.$name,t.expr.codegen))}function aVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ht(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=cZ(r,e.$order,t.expr.codegen))}function uVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=il(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function lVt(e,t){return t}function cVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function fVt(){return Lt}function dVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function hVt(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const pVt={skip:!0};function mVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function gVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],pVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Dc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function iLe(e,t,n,r){return new sLe(e,t,n,r)}function sLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Zzt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ume(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}sLe.prototype=ume.prototype={fork(){const e=new ume(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Qzt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Wte(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Gzt,parseOperator:eVt,parseOperatorParameters:tVt,parseParameters:nVt,parseStream:dVt,parseUpdate:hVt,getState:mVt,setState:gVt};function yVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),oLe(t,e.description()))}function oLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function vVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const W9="default";function bVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:W9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?pt(i)?i:i.user:W9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pt(r)||(i=r.item,r=r.user),wH(e,r&&r!==W9?r:i||r),i},{cursor:t})}function wH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function uM(e,t){var n=e._runtime.data;return jt(n,t)||Me("Unrecognized data set: "+t),n[t]}function _Vt(e,t){return arguments.length<2?uM(this,e).values.value:uF.call(this,e,Hb().remove(Dc).insert(t))}function uF(e,t){COe(t)||Me("Second argument to changes must be a changeset.");const n=uM(this,e);return n.modified=!0,this.pulse(n.input,t)}function wVt(e,t){return uF.call(this,e,Hb().insert(t))}function EVt(e,t){return uF.call(this,e,Hb().remove(t))}function aLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function uLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function lF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function xVt(e){var t=lF(e),n=aLe(e),r=uLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function SVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=lF(e),o=t.changedTouches?t.changedTouches[0]:t,s=eF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=TVt(e,n,s),t}function TVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ea(e),item:Ea(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const lme="view",AVt="timer",CVt="window",IVt={trap:!1};function kVt(e){const t=yn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=Gf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function lLe(e,t,n,r){e._eventListeners.push({type:n,sources:ht(t),handler:r})}function RVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function hP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function NVt(e,t,n){var r=this,i=new O4(n),s=function(l,c){r.runAsync(null,()=>{e===lme&&RVt(r,t)&&l.preventDefault(),i.receive(SVt(r,l,c))})},o;if(e===AVt)hP(r,"timer",t)&&r.timer(s,t);else if(e===lme)hP(r,"view",t)&&r.addEventListener(t,s,IVt);else if(e===CVt?hP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&hP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);lLe(r,o,t,s)}return i}function cme(e){return e.item}function fme(e){return e.item.mark.source}function dme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function PVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",cme),fme,dme(e)),this.on(this.events("view","pointerout",cme),fme,dme(t)),this}function DVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Rl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const OVt="vega-bind",$Vt="vega-bind-name",MVt="vega-bind-radio";function LVt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=fZ(r.debounce,i.update))),(r.input==null&&r.element?FVt:BVt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function FVt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),lLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(jVt(i))}}function jVt(e){return typeof Event<"u"?new Event(e):{type:e}}function BVt(e,t,n,r){const i=r.signal(n.signal),s=Rl("div",{class:OVt}),o=n.input==="radio"?s:s.appendChild(Rl("label"));o.appendChild(Rl("span",{class:$Vt},n.name||n.signal)),t.appendChild(s);let a=UVt;switch(n.input){case"checkbox":a=zVt;break;case"select":a=VVt;break;case"radio":a=HVt;break;case"range":a=qVt;break}a(e,o,n,i)}function UVt(e,t,n,r){const i=Rl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function zVt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Rl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function VVt(e,t,n,r){const i=Rl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};lM(o,r)&&(u.selected=!0),i.appendChild(Rl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(lM(n.options[a],o)){i.selectedIndex=a;return}}}function HVt(e,t,n,r){const i=Rl("span",{class:MVt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};lM(o,r)&&(u.checked=!0);const l=Rl("input",u);l.addEventListener("change",()=>e.update(o));const c=Rl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)lM(a[l].value,o)&&(a[l].checked=!0)}}function qVt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||j0(s,i,100),a=Rl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Rl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function lM(e,t){return e===t||e+""==t+""}function cLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,aLe(e),uLe(e),lF(e),i,s).background(e.background())}function Gte(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function WVt(e,t,n,r){const i=new r(e.loader(),Gte(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,lF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function GVt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=tF(r);e=n._el=e?G9(n,e,!0):null,yVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||aR,a=e?s.renderer:s.headless;return n._renderer=a?cLe(n,n._renderer,e,a):null,n._handler=WVt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=G9(n,t,!0):e.appendChild(Rl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=G9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{LVt(n,u.element||t,u)})),n}function G9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const FT=e=>+e||0,YVt=e=>({top:e,bottom:e,left:e,right:e});function hme(e){return mt(e)?{top:FT(e.top),bottom:FT(e.bottom),left:FT(e.left),right:FT(e.right)}:YVt(FT(e))}async function Yte(e,t,n,r){const i=tF(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),cLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function KVt(e,t){e!==Zg.Canvas&&e!==Zg.SVG&&e!==Zg.PNG&&Me("Unrecognized image type: "+e);const n=await Yte(this,e,t);return e===Zg.SVG?XVt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function XVt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function QVt(e,t){return(await Yte(this,Zg.Canvas,e,t)).canvas()}async function JVt(e){return(await Yte(this,Zg.SVG,e)).svg()}function ZVt(e,t,n){return iLe(e,rx,bI,n).parse(t)}function eHt(e){var t=this._runtime.scales;return jt(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var fLe="width",dLe="height",Kte="padding",pme={skip:!0};function hLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Kte?r.left+r.right:0)}function pLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Kte?r.top+r.bottom:0)}function tHt(e){var t=e._signals,n=t[fLe],r=t[dLe],i=t[Kte];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=hLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=pLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function nHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(fLe,n,pme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(dLe,r,pme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function rHt(e){return this._runtime.getState(e||{data:iHt,signals:sHt,recurse:!0})}function iHt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function sHt(e,t){return!(e==="parent"||t instanceof rx.proxy)}function oHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function aHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(qut(n,t))}function uHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",lHt(r))}function lHt(e){return e==null?"":je(e)?mLe(e):mt(e)&&!S0(e)?cHt(e):e+""}function cHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?mLe(n):gLe(n))}).join(`
`)}function mLe(e){return"["+e.map(gLe).join(", ")+"]"}function gLe(e){return je(e)?"[]":mt(e)&&!S0(e)?"{}":e}function fHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function yLe(e,t){const n=this;if(t=t||{},Zw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=yn({},e.locale,t.locale);n.locale(yOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Zg.Canvas,n._scenegraph=new f$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||uHt,n._redraw=!0,n._handler=new aR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=kVt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=ZVt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:yn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=hLe(n,n._width),n._viewHeight=pLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,tHt(n),vVt(n),bVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function pP(e,t){return jt(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+rt(t))}function vLe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function mme(e,t,n,r){let i=vLe(n,r);return i||(i=Gte(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function gme(e,t,n){const r=vLe(t,n);return r&&t._targets.remove(r),e}lt(yLe,Zw,{async evaluate(e,t,n){if(await Zw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,xVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&CD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&oLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=pP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",hme(e)):hme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(tF(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Zw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(pP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:nHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Gte(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return mme(this,e,pP(this,e),t)},removeSignalListener(e,t){return gme(this,pP(this,e),t)},addDataListener(e,t){return mme(this,e,uM(this,e).values,t)},removeDataListener(e,t){return gme(this,uM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=wH(this,null);this._globalCursor=!!e,t&&wH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:aHt,events:NVt,finalize:DVt,hover:PVt,data:_Vt,change:uF,insert:wVt,remove:EVt,scale:eHt,initialize:GVt,toImageURL:KVt,toCanvas:QVt,toSVG:JVt,getState:rHt,setState:oHt,_watchPixelRatio:fHt});const dHt="view",cM="[",fM="]",bLe="{",_Le="}",hHt=":",wLe=",",pHt="@",mHt=">",gHt=/[[\]{}]/,yHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let ELe,xLe;function Vy(e,t,n){return ELe=t||dHt,xLe=n||yHt,SLe(e.trim()).map(EH)}function vHt(e){return xLe[e]}function MA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function SLe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=MA(e,i,wLe,cM+bLe,fM+_Le),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function EH(e){return e[0]==="["?bHt(e):_Ht(e)}function bHt(e){const t=e.length;let n=1,r;if(n=MA(e,n,fM,cM,fM),n===t)throw"Empty between selector: "+e;if(r=SLe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==mHt)throw"Expected '>' after between selector: "+e;r=r.map(EH);const i=EH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function _Ht(e){const t={source:ELe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===_Le){if(a=e.lastIndexOf(bLe),a>=0){try{r=wHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===pHt&&(i=++a),u=MA(e,a,hHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=MA(e,a,cM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=MA(e,a,fM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==cM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||gHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):vHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function wHt(e){const t=e.split(wLe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function EHt(e){return mt(e)?e:{type:e||"pad"}}const jT=e=>+e||0,xHt=e=>({top:e,bottom:e,left:e,right:e});function SHt(e){return mt(e)?e.signal?e:{top:jT(e.top),bottom:jT(e.bottom),left:jT(e.left),right:jT(e.right)}:xHt(jT(e))}const oo=e=>mt(e)&&!je(e)?yn({},e):{value:e};function yme(e,t,n,r){return n!=null?(mt(n)&&!je(n)||je(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Fo(e,t,n){for(const r in t)yme(e,r,t[r]);for(const r in n)yme(e,r,n[r],"update")}function OS(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=yn(e[r]||{},t[r]));return e}function K_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Xte="mark",Qte="frame",Jte="scope",THt="axis",AHt="axis-domain",CHt="axis-grid",IHt="axis-label",kHt="axis-tick",RHt="axis-title",NHt="legend",PHt="legend-band",DHt="legend-entry",OHt="legend-gradient",TLe="legend-label",$Ht="legend-symbol",MHt="legend-title",LHt="title",FHt="title-text",jHt="title-subtitle";function BHt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!K_(u,e)&&Y9(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Qte?i.group:n===Xte?yn({},i.mark,i[t]):null;for(u in c)l=K_(u,e)||(u==="fill"||u==="stroke")&&(K_("fill",e)||K_("stroke",e)),l||Y9(s,u,c[u]);ht(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)K_(h,e)||Y9(s,h,d[h])}),e=yn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=yn(o,e.enter),a&&(e.update=yn(a,e.update)),e}function Y9(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const ALe=e=>pt(e)?rt(e):e.signal?`(${e.signal})`:CLe(e);function cF(e){if(e.gradient!=null)return zHt(e);let t=e.signal?`(${e.signal})`:e.color?UHt(e.color):e.field!=null?CLe(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=VHt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${UD(e.exponent)})`),e.mult!=null&&(t+=`*${UD(e.mult)}`),e.offset!=null&&(t+=`+${UD(e.offset)}`),e.round&&(t=`round(${t})`),t}const mP=(e,t,n,r)=>`(${e}(${[t,n,r].map(cF).join(",")})+'')`;function UHt(e){return e.c?mP("hcl",e.h,e.c,e.l):e.h||e.s?mP("hsl",e.h,e.s,e.l):e.l||e.a?mP("lab",e.l,e.a,e.b):e.r||e.g||e.b?mP("rgb",e.r,e.g,e.b):null}function zHt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(ALe(e.gradient)),`gradient(${t.join(",")})`}function UD(e){return mt(e)?"("+cF(e)+")":e}function CLe(e){return ILe(mt(e)?e:{datum:e})}function ILe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+rt(e));return e.signal||(r=pt(r)?Kh(r).map(rt).join("]["):ILe(r)),t+"["+r+"]"}function VHt(e,t){const n=ALe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+UD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function HHt(e){let t="";return e.forEach(n=>{const r=cF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function kLe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=BHt(e,t,n,r,i.config);for(const a in e)o[a]=qHt(e[a],t,s,i);return s}function qHt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=GHt(WHt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function WHt(e){return je(e)?HHt(e):cF(e)}function GHt(e,t,n,r){const i=Nh(e,t);return i.$fields.forEach(s=>r[s]=1),yn(n,i.$params),i.$expr}const YHt="outer",KHt=["value","update","init","react","bind"];function vme(e,t){Me(e+' for "outer" push: '+rt(t))}function RLe(e,t){const n=e.name;if(e.push===YHt)t.signals[n]||vme("No prior signal definition",n),KHt.forEach(r=>{e[r]!==void 0&&vme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function xH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function fF(e,t,n,r){return new xH(e,t,n,r)}function dM(e,t){return fF("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function _I(e,t){return t?{$field:e,$name:t}:{$field:e}}const SH=_I("key");function bme(e,t){return{$compare:e,$order:t}}function XHt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const QHt="ascending",JHt="descending";function ZHt(e){return mt(e)?(e.order===JHt?"-":"+")+dF(e.op,e.field):""}function dF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Zte="scope",TH="view";function Bs(e){return e&&e.signal}function eqt(e){return e&&e.expr}function zD(e){if(Bs(e))return!0;if(mt(e)){for(const t in e)if(zD(e[t]))return!0}return!1}function hf(e,t){return e??t}function Sv(e){return e&&e.signal||e}const _me="timer";function wI(e,t){return(e.merge?nqt:e.stream?rqt:e.type?iqt:Me("Invalid stream specification: "+rt(e)))(e,t)}function tqt(e){return e===Zte?TH:e||TH}function nqt(e,t){const n=e.merge.map(i=>wI(i,t)),r=ene({merge:n},e,t);return t.addStream(r).id}function rqt(e,t){const n=wI(e.stream,t),r=ene({stream:n},e,t);return t.addStream(r).id}function iqt(e,t){let n;e.type===_me?(n=t.event(_me,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(tqt(e.source),e.type);const r=ene({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function ene(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[wI(r[0],n),wI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(sqt(t.marktype,t.markname,t.markrole)),t.source===Zte&&r.push("inScope(event.item)"),r.length&&(e.filter=Nh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function sqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const oqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function aqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),pt(s)&&(s=Vy(s,t.isSubscope()?Zte:TH)),s=ht(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[lqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=pt(o)?Nh(o,t):o.expr!=null?Nh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:oqt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(yn(uqt(u,t),i)))}function uqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):wI(e,t)}}function lqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function cqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Nh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>aqt(i,t,n.id))}const Ur=e=>(t,n,r)=>fF(e,n,t||void 0,r),NLe=Ur("aggregate"),fqt=Ur("axisticks"),PLe=Ur("bound"),id=Ur("collect"),wme=Ur("compare"),dqt=Ur("datajoin"),DLe=Ur("encode"),hqt=Ur("expression"),pqt=Ur("facet"),mqt=Ur("field"),gqt=Ur("key"),yqt=Ur("legendentries"),vqt=Ur("load"),bqt=Ur("mark"),_qt=Ur("multiextent"),wqt=Ur("multivalues"),Eqt=Ur("overlap"),xqt=Ur("params"),OLe=Ur("prefacet"),Sqt=Ur("projection"),Tqt=Ur("proxy"),Aqt=Ur("relay"),$Le=Ur("render"),Cqt=Ur("scale"),Gb=Ur("sieve"),Iqt=Ur("sortitems"),MLe=Ur("viewlayout"),kqt=Ur("values");let Rqt=0;const LLe={min:"min",max:"max",count:"sum"};function Nqt(e,t){const n=e.type||"linear";x3e(n)||Me("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Pqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=FLe(e.domain,e,t),e.range!=null&&(n.range=BLe(e,t,n)),e.interpolate!=null&&zqt(e.interpolate,n),e.nice!=null&&(n.nice=Uqt(e.nice,t)),e.bins!=null&&(n.bins=Bqt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=wc(e[r],t))}function wc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+rt(e)):e}function VD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>wc(n,t))}function hF(e){Me("Can not find data set: "+rt(e))}function FLe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?Dqt:e.fields?$qt:Oqt)(e,t,n)}function Dqt(e,t,n){return e.map(r=>wc(r,n))}function Oqt(e,t,n){const r=n.getData(e.data);return r||hF(e.data),ox(t.type)?r.valuesRef(n,e.field,jLe(e.sort,!1)):A3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function $qt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=pt(o)?{data:r,field:o}:je(o)||o.signal?Mqt(o,n):o,s.push(o),s),[]);return(ox(t.type)?Lqt:A3e(t.type)?Fqt:jqt)(e,n,i)}function Mqt(e,t){const n="_:vega:_"+Rqt++,r=id({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Gb({})]),{data:n,field:"data"}}function Lqt(e,t,n){const r=jLe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||hF(l.data),c.countsRef(t,l.field,r)}),a={groupby:SH,pulse:o};r&&(i=r.op||"count",s=r.field?dF(i,r.field):"count",a.ops=[LLe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(NLe(a));const u=t.add(id({pulse:Mt(i)}));return s=t.add(kqt({field:SH,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function jLe(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!LLe[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function Fqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||hF(i.data),s.domainRef(t,i.field)});return Mt(t.add(wqt({values:r})))}function jqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||hF(i.data),s.extentRef(t,i.field)});return Mt(t.add(_qt({extents:r})))}function Bqt(e,t){return e.signal||je(e)?VD(e,t):t.objectProperty(e)}function Uqt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:wc(e.interval),step:wc(e.step)}:wc(e)}function zqt(e,t){t.interpolate=wc(e.type||e),e.gamma!=null&&(t.interpolateGamma=wc(e.gamma))}function BLe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pt(i)){if(r&&jt(r,i))return e=yn({},e,{range:r[i]}),BLe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=ox(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?VD(i.scheme,t):wc(i.scheme,t),i.extent&&(n.schemeExtent=VD(i.extent,t)),i.count&&(n.schemeCount=wc(i.count,t));return}else if(i.step){n.rangeStep=wc(i.step,t);return}else{if(ox(e.type)&&!je(i))return FLe(i,e,t);je(i)||Me("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?VD:wc)(s,t))}function Vqt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=AH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=AH(n[i],i,t));t.addProjection(e.name,r)}function AH(e,t,n){return je(e)?e.map(r=>AH(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+rt(e)):e}const sd="top",$S="left",MS="right",cy="bottom",ULe="center",Hqt="vertical",qqt="start",Wqt="middle",Gqt="end",CH="index",tne="label",Yqt="offset",fx="perc",Kqt="perc2",Sc="value",dR="guide-label",nne="guide-title",Xqt="group-title",Qqt="group-subtitle",Eme="symbol",HD="gradient",IH="discrete",kH="size",Jqt="shape",Zqt="fill",eWt="stroke",tWt="strokeWidth",nWt="strokeDash",rWt="opacity",rne=[kH,Jqt,Zqt,eWt,tWt,nWt,rWt],hR={name:1,style:1,interactive:1},tr={value:0},Tc={value:1},pF="group",zLe="rect",ine="rule",iWt="symbol",Yb="text";function EI(e){return e.type=pF,e.interactive=e.interactive||!1,e}function sl(e,t){const n=(r,i)=>hf(e[r],hf(t[r],i));return n.isVertical=r=>Hqt===hf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>hf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>hf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>hf(e.columns,hf(t.columns,+n.isVertical(!0))),n}function VLe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function sWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function mF(e,t,n){return`item.anchor === '${qqt}' ? ${e} : item.anchor === '${Gqt}' ? ${t} : ${n}`}const sne=mF(rt($S),rt(MS),rt(ULe));function oWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function HLe(e,t){return t?e?mt(e)?Object.assign({},e,{offset:HLe(e.offset,t)}):{value:e,offset:t}:t:e}function Hl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=OS(e.encode,t,hR)):e.interactive=!1,e}function aWt(e,t,n,r){const i=sl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:oo(f),height:oo(d)},update:yn({},u,{opacity:Tc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return Fo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Hl({type:zLe,role:OHt,encode:h},r)}function uWt(e,t,n,r,i){const s=sl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:Sc}};p[l]={signal:h+"datum."+fx,mult:u},p[c]=tr,p[f]={signal:h+"datum."+Kqt,mult:u},p[d]=oo(a);const m={enter:p,update:yn({},p,{opacity:Tc}),exit:{opacity:tr}};return Fo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Hl({type:zLe,role:PHt,key:Sc,from:i,encode:m},r)}const lWt=`datum.${fx}<=0?"${$S}":datum.${fx}>=1?"${MS}":"${ULe}"`,cWt=`datum.${fx}<=0?"${cy}":datum.${fx}>=1?"${sd}":"${Wqt}"`;function xme(e,t,n,r){const i=sl(e,t),s=i.isVertical(),o=oo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:Tc,text:{field:tne}},exit:{opacity:tr}};return Fo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:hf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:cWt},f="y",d="x",h="1-"):(l.align=c.align={signal:lWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+fx,mult:a},l[d]=c[d]=o,o.offset=hf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+CH}:void 0,Hl({type:Yb,role:TLe,style:dR,key:Sc,from:r,encode:p,overlap:u},n)}function fWt(e,t,n,r,i){const s=sl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Yqt} : datum.${kH}`,h=l?oo(l):{field:kH},p=`datum.${CH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Tc,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),Fo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),rne.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:Sc})});const S=Hl({type:iWt,role:$Ht,key:Sc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=oo(c);A.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:A},y:h},update:v={opacity:Tc,text:{field:tne},x:y.x,y:y.y},exit:{opacity:tr}},Fo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=Hl({type:Yb,role:TLe,style:dR,key:Sc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?oo(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:Tc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:CH}},EI({role:Jte,from:r,encode:OS(g,o,hR),marks:[S,C],name:u,interactive:a,sort:w})}function dWt(e,t){const n=sl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const one='item.orient === "left"',ane='item.orient === "right"',gF=`(${one} || ${ane})`,hWt=`datum.vgrad && ${gF}`,pWt=mF('"top"','"bottom"','"middle"'),mWt=mF('"right"','"left"','"center"'),gWt=`datum.vgrad && ${ane} ? (${mWt}) : (${gF} && !(datum.vgrad && ${one})) ? "left" : ${sne}`,yWt=`item._anchor || (${gF} ? "middle" : "start")`,vWt=`${hWt} ? (${one} ? -90 : 90) : 0`,bWt=`${gF} ? (datum.vgrad ? (${ane} ? "bottom" : "top") : ${pWt}) : "top"`;function _Wt(e,t,n,r){const i=sl(e,t),s={enter:{opacity:tr},update:{opacity:Tc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return Fo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:yWt},angle:{signal:vWt},align:{signal:gWt},baseline:{signal:bWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Hl({type:Yb,role:MHt,style:nne,from:r,encode:s},n)}function wWt(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Sme(e.path)+")":e.sphere&&(n="geoShape("+Sme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Sme(e){return mt(e)&&e.signal?e.signal:rt(e)}function qLe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===pF?Jte:t||Xte}function EWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||qLe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function xWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function une(e,t){const n=ROe(e.type);n||Me("Unrecognized transform type: "+rt(e.type));const r=fF(n.type.toLowerCase(),null,WLe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function WLe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=SWt(o,t,n)}return r}function SWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return TWt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return AWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Bs(i)?i.map(s=>Tme(e,s,n)):Tme(e,i,n)}function Tme(e,t,n){const r=e.type;if(Bs(t))return Cme(r)?Me("Expression references can not be signals."):K9(r)?n.fieldRef(t):Ime(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||K9(r);return i&&CWt(t)?n.exprRef(t.expr,t.as):i&&IWt(t)?_I(t.field,t.as):Cme(r)?Nh(t,n):kWt(r)?Mt(n.getData(t).values):K9(r)?_I(t):Ime(r)?n.compareRef(t):t}}function TWt(e,t,n){return pt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function AWt(e,t,n){const r=t[e.name];return e.array?(je(r)||Me("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>Ame(e,i,n))):Ame(e,r,n)}function Ame(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+rt(t));const s=yn(WLe(i,t,n),i.key);return Mt(n.add(xqt(s)))}const CWt=e=>e&&e.expr,IWt=e=>e&&e.field,kWt=e=>e==="data",Cme=e=>e==="expr",K9=e=>e==="field",Ime=e=>e==="compare";function RWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=qD(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=une(yn({type:"aggregate",groupby:ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=qD(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(id(null,[{}]))),o||(o=qD(e,n)),{key:i,pulse:o,parent:a}}function qD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function lb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}lb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new lb(e,s,i,r,o)};function GLe(e){return pt(e)?e:null}function kme(e,t,n){const r=dF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function BT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=ZHt(s);let l=GLe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:SH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(fF(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}lb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=GLe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&kme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&kme(e,u,n),a=e.add(NLe(u)),o=e.add(id({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return BT(e,this,"extent","extent",t,!1)},domainRef(e,t){return BT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return BT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return BT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return BT(e,this,"indata","tupleindex",t,!0,!0)}};function NWt(e,t,n){const r=e.from.facet,i=r.name,s=qD(r,t);let o;r.name||Me("Facet must have a name: "+rt(r)),r.data||Me("Facet must reference a data set: "+rt(r)),r.field?o=t.add(OLe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(pqt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(id()),l=a.add(Gb({pulse:Mt(u)}));a.addData(i,new lb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function PWt(e,t,n){const r=t.add(OLe({pulse:n.pulse})),i=t.fork();i.add(Gb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function YLe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(dM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Nh(l,t);u.update=c.$expr,u.params=c.$params}function yF(e,t){const n=qLe(e),r=e.type===pF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Jte||n===Qte,a,u,l,c,f,d,h;const p=n===Xte||o||i,m=RWt(e.from,r,t);u=t.add(dqt({key:m.key||(e.key?_I(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(id({pulse:g})),u=t.add(bqt({markdef:EWt(e),interactive:xWt(e.interactive,t),clip:wWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(DLe(kLe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=une(T,t),A=S.metadata;(A.generates||A.changes)&&Me("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),S.params.pulse=Mt(u),t.add(u=S)}),e.sort&&(u=t.add(Iqt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(MLe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const b=t.add(PLe({mark:y,pulse:d||v}));h=Mt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?NWt(e,t,m):p?PWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=DWt(s,h,t));const w=t.add($Le({pulse:h})),E=t.add(Gb({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new lb(t,l,w,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Me("Marks only support modify triggers."),YLe(T,t,f)}))}function DWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Bs(s)?n.signalRef(s.signal):s,method:Bs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Bs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(Eqt(o)))}function OWt(e,t){const n=t.config.legend,r=e.encode||{},i=sl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;rne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=$Wt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(id(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(yqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===HD?(h=[aWt(e,c,n,r.gradient),xme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Sv(i.gradientLength())})/100))`)):p===IH?h=[uWt(e,c,n,r.gradient,v),xme(e,n,r.labels,v)]:(f=dWt(e,n),h=[fWt(e,n,r,v,Sv(f.columns))],d.size=FWt(e,t,h[0].marks)),h=[EI({role:DHt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(_Wt(e,n,r.title,g)),yF(EI({role:NHt,from:g,encode:OS(LWt(i,e,n),s,hR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function $Wt(e,t){let n=e.type||Eme;return!e.type&&MWt(e)===1&&(e.fill||e.stroke)&&(n=bee(t)?HD:VV(t)?IH:Eme),n!==HD?n:VV(t)?IH:HD}function MWt(e){return rne.reduce((t,n)=>t+(e[n]?1:0),0)}function LWt(e,t,n){const r={enter:{},update:{}};return Fo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function FWt(e,t,n){const r=Sv(Rme("size",e,n)),i=Sv(Rme("strokeWidth",e,n)),s=Sv(jWt(n[1].encode,t,dR));return Nh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Rme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:VLe(e,n[0].encode)}function jWt(e,t,n){return VLe("fontSize",e)||sWt("fontSize",t,n)}const BWt=`item.orient==="${$S}"?-90:item.orient==="${MS}"?90:0`;function UWt(e,t){e=pt(e)?{text:e}:e;const n=sl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(id(null,[l])));return u.push(HWt(e,n,zWt(e),c)),e.subtitle&&u.push(qWt(e,n,r.subtitle,c)),yF(EI({role:LHt,from:c,encode:VWt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function zWt(e){const t=e.encode;return t&&t.title||yn({name:e.name,interactive:e.interactive,style:e.style},t)}function VWt(e,t){const n={enter:{},update:{}};return Fo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:sne},angle:{signal:BWt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),OS(n,t,hR)}function HWt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Fo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Hl({type:Yb,role:FHt,style:Xqt,from:r,encode:o},n)}function qWt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Fo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Hl({type:Yb,role:jHt,style:Qqt,from:r,encode:o},n)}function WWt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(une(r,t))}),e.on&&e.on.forEach(r=>{YLe(r,t,e.name)}),t.addDataPipeline(e.name,GWt(e,t,n))}function GWt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Bs(e.values)||zD(e.format)?(r.push(Nme(t,e)),r.push(i=u1())):r.push(i=u1({$ingest:e.values,$format:e.format})):e.url?zD(e.url)||zD(e.format)?(r.push(Nme(t,e)),r.push(i=u1())):r.push(i=u1({$request:e.url,$format:e.format})):e.source&&(i=a=ht(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=u1()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Aqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,u1())),i||r.push(u1()),r.push(Gb({})),r}function u1(e){const t=id({},e);return t.metadata={source:!0},t}function Nme(e,t){return vqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const KLe=e=>e===cy||e===sd,vF=(e,t,n)=>Bs(e)?QWt(e.signal,t,n):e===$S||e===sd?t:n,ao=(e,t,n)=>Bs(e)?KWt(e.signal,t,n):KLe(e)?t:n,Ff=(e,t,n)=>Bs(e)?XWt(e.signal,t,n):KLe(e)?n:t,XLe=(e,t,n)=>Bs(e)?JWt(e.signal,t,n):e===sd?{value:t}:{value:n},YWt=(e,t,n)=>Bs(e)?ZWt(e.signal,t,n):e===MS?{value:t}:{value:n},KWt=(e,t,n)=>QLe(`${e} === '${sd}' || ${e} === '${cy}'`,t,n),XWt=(e,t,n)=>QLe(`${e} !== '${sd}' && ${e} !== '${cy}'`,t,n),QWt=(e,t,n)=>lne(`${e} === '${$S}' || ${e} === '${sd}'`,t,n),JWt=(e,t,n)=>lne(`${e} === '${sd}'`,t,n),ZWt=(e,t,n)=>lne(`${e} === '${MS}'`,t,n),QLe=(e,t,n)=>(t=t!=null?oo(t):t,n=n!=null?oo(n):n,Pme(t)&&Pme(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[yn({test:e},t)].concat(n||[])),Pme=e=>e==null||Object.keys(e).length===1,lne=(e,t,n)=>({signal:`${e} ? (${ww(t)}) : (${ww(n)})`}),eGt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${$S}' ? (${ww(r)}) : `:"")+(n!=null?`${e} === '${cy}' ? (${ww(n)}) : `:"")+(i!=null?`${e} === '${MS}' ? (${ww(i)}) : `:"")+(t!=null?`${e} === '${sd}' ? (${ww(t)}) : `:"")+"(null)"}),ww=e=>Bs(e)?e.signal:e==null?null:rt(e),tGt=(e,t)=>t===0?0:Bs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},eE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function R_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[nne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[dR][i]}return null}function Dme(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function nGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Bs(o)){const f=Dme([n.axisX,n.axisY]),d=Dme([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ao(o,R_(l,n.axisX,i,r),R_(l,n.axisY,i,r));u={};for(l of d)u[l]=eGt(o.signal,R_(l,n.axisTop,i,r),R_(l,n.axisBottom,i,r),R_(l,n.axisLeft,i,r),R_(l,n.axisRight,i,r))}else a=o===sd||o===cy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?yn({},i,a,u,s):i}function rGt(e,t,n,r){const i=sl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:Tc},exit:{opacity:tr}};Fo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Ome(e,0),c=Ome(e,1);return o.x=a.x=ao(s,l,tr),o.x2=a.x2=ao(s,c),o.y=a.y=Ff(s,l,tr),o.y2=a.y2=Ff(s,c),Hl({type:ine,role:AHt,from:r,encode:u},n)}function Ome(e,t){return{scale:e.scale,range:t}}function iGt(e,t,n,r,i){const s=sl(e,t),o=e.orient,a=e.gridScale,u=vF(o,1,-1),l=sGt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:Tc},exit:f={opacity:tr}};Fo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Sc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ao(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:yn(m,{mult:u,offset:l});return c.x=d.x=ao(o,p,g),c.y=d.y=Ff(o,p,g),c.x2=d.x2=Ff(o,y),c.y2=d.y2=ao(o,y),f.x=ao(o,p),f.y=Ff(o,p),Hl({type:ine,role:CHt,key:Sc,from:r,encode:h},n)}function sGt(e,t){if(t!==1)if(!mt(e))e=Bs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=yn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=yn({},n.mult);else return n.mult=Bs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function oGt(e,t,n,r,i,s){const o=sl(e,t),a=e.orient,u=vF(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:Tc},exit:c={opacity:tr}};Fo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=oo(i);h.mult=u;const p={scale:e.scale,field:Sc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ao(a,tr,p),f.y2=l.y2=ao(a,h),c.x=ao(a,p),f.x=l.x=Ff(a,tr,p),f.x2=l.x2=Ff(a,h),c.y=Ff(a,p),Hl({type:ine,role:kHt,key:Sc,from:r,encode:d},n)}function X9(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function aGt(e,t,n,r,i,s){const o=sl(e,t),a=e.orient,u=e.scale,l=vF(a,-1,1),c=Sv(o("labelFlush")),f=Sv(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=oo(i);g.mult=l,g.offset=oo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Sc,band:.5,offset:HLe(s.offset,o("labelOffset"))},v=ao(a,p?X9(u,c,'"left"','"right"','"center"'):{value:"center"},YWt(a,"left","right")),b=ao(a,XLe(a,"bottom","top"),p?X9(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=X9(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:ao(a,y,g),y:Ff(a,y,g)},T={enter:E,update:m={opacity:Tc,text:{field:tne},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:tr,x:E.x,y:E.y}};Fo(T,{dx:!d&&p?ao(a,w):null,dy:!h&&p?Ff(a,w):null}),Fo(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let A=o("labelOverlap");return A=A||S?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=eE(m.align,v)),m.baseline!==b&&(m.baseline=eE(m.baseline,b)),Hl({type:Yb,role:IHt,style:dR,key:Sc,from:r,encode:T,overlap:A},n)}function uGt(e,t,n,r){const i=sl(e,t),s=e.orient,o=vF(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:oo(i("titleAnchor",null)),align:{signal:sne}},update:u=yn({},a,{opacity:Tc,text:oo(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${mF(0,1,.5)})`};return u.x=ao(s,c),u.y=Ff(s,c),a.angle=ao(s,tr,tGt(o,90)),a.baseline=ao(s,XLe(s,cy,sd),{value:cy}),u.angle=a.angle,u.baseline=a.baseline,Fo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),lGt(i,s,l,n),l.update.align=eE(l.update.align,a.align),l.update.angle=eE(l.update.angle,a.angle),l.update.baseline=eE(l.update.baseline,a.baseline),Hl({type:Yb,role:RHt,style:nne,from:r,encode:l},n)}function lGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=eE(oo(a),n.update[u]),!1):!K_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?oo(o):ao(t,oo(o),oo(s))}function cGt(e,t){const n=nGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=sl(e,n),l=oWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(id({},[c]))),d=Mt(t.add(fqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(iGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(oGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(aGt(e,n,r.labels,d,p,l))),c.domain&&h.push(rGt(e,n,r.domain,f)),c.title&&h.push(uGt(e,n,r.title,f)),yF(EI({role:THt,from:f,encode:OS(fGt(u,e),i,hR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function fGt(e,t){const n={enter:{},update:{}};return Fo(n,{orient:e("orient"),offset:e("offset")||0,position:hf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function JLe(e,t,n){const r=ht(e.signals),i=ht(e.scales);return n||r.forEach(s=>RLe(s,t)),ht(e.projections).forEach(s=>Vqt(s,t)),i.forEach(s=>Nqt(s,t)),ht(e.data).forEach(s=>WWt(s,t)),i.forEach(s=>Pqt(s,t)),(n||r).forEach(s=>cqt(s,t)),ht(e.axes).forEach(s=>cGt(s,t)),ht(e.marks).forEach(s=>yF(s,t)),ht(e.legends).forEach(s=>OWt(s,t)),e.title&&UWt(e.title,t),t.parseLambdas(),t}const dGt=e=>OS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function hGt(e,t){const n=t.config,r=Mt(t.root=t.add(dM())),i=pGt(e,n);i.forEach(l=>RLe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(id()),o=t.add(DLe(kLe(dGt(e.encode),pF,Qte,e.style,t,{pulse:Mt(s)}))),a=t.add(MLe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),JLe(e,t,i),t.operators.push(a);let u=t.add(PLe({mark:r,pulse:Mt(a)}));return u=t.add($Le({pulse:Mt(u)})),u=t.add(Gb({pulse:Mt(u)})),t.addData("root",new lb(t,s,s,u)),t}function UT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function pGt(e,t){const n=o=>hf(e[o],t[o]),r=[UT("background",n("background")),UT("autosize",EHt(n("autosize"))),UT("padding",SHt(n("padding"))),UT("width",n("width")||0),UT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ht(e.signals).forEach(o=>{jt(i,o.name)?o=yn(i[o.name],o):r.push(o),s[o.name]=o}),ht(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function ZLe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function $me(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}ZLe.prototype=$me.prototype={parse(e){return JLe(e,this)},fork(){return new $me(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof xH?Mt(e):e;return this.add(Tqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(Gb({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pt(e))return _I(e,t);e.signal||Me("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(mqt(i)))}return r},compareRef(e){let t=!1;const n=s=>Bs(s)?(t=!0,this.signalRef(s.signal)):eqt(s)?(t=!0,this.exprRef(s.expr)):s,r=ht(e.field).map(n),i=ht(e.order).map(n);return t?Mt(this.add(wme({fields:r,orders:i}))):bme(r,i)},keyRef(e,t){let n=!1;const r=s=>Bs(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=ht(e).map(r),n?Mt(this.add(gqt({fields:e,flat:t}))):XHt(e,t)},sortRef(e){if(!e)return e;const t=dF(e.op,e.field),n=e.order||QHt;return n.signal?Mt(this.add(wme({fields:t,orders:this.signalRef(n.signal)}))):bme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+rt(e));const n=t instanceof xH?t:this.add(dM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(dM(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Nh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||cne(e))},exprRef(e,t){const n={expr:Nh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(hqt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+rt(e)),this.bindings.push(yn({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Me("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Cqt(t))},addProjection(e,t){this.addScaleProj(e,Sqt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.addData(e,lb.fromEntries(this,t))}};function cne(e){return(je(e)?mGt:gGt)(e)}function mGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||cne(i):rt(i))}return n+"]"}function gGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(mt(i)?i.signal||cne(i):rt(i));return t+"}"}function yGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function vGt(e,t,n){return mt(e)||Me("Input Vega specification must be an object."),t=AS(yGt(),t,e.config),hGt(e,new ZLe(t,n)).toRuntime()}var bGt="5.29.0";yn(rx,vFt,o9t,F9t,mBt,EBt,KBt,IBt,QBt,tUt,fUt,vUt);const _Gt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ss,CanvasHandler:aR,CanvasRenderer:eM,DATE:Zu,DAY:ca,DAYOFYEAR:Rh,Dataflow:Zw,Debug:SDe,Error:iZ,EventStream:O4,Gradient:U3e,GroupItem:G4,HOURS:Ul,Handler:Hee,HybridHandler:P$e,HybridRenderer:eH,Info:xDe,Item:W4,MILLISECONDS:Yf,MINUTES:zl,MONTH:ma,Marks:Vl,MultiPulse:SZ,None:EDe,Operator:Gr,Parameters:D4,Pulse:T0,QUARTER:Ju,RenderType:Zg,Renderer:oR,ResourceLoader:Y3e,SECONDS:Oc,SVGHandler:b$e,SVGRenderer:Xee,SVGStringRenderer:N$e,Scenegraph:f$e,TIME_UNITS:gZ,Transform:Pe,View:yLe,WEEK:Ms,Warn:sZ,YEAR:Oo,accessor:il,accessorFields:pa,accessorName:Yi,array:ht,ascending:C4,bandwidthNRD:IZ,bin:DOe,bootstrapCI:OOe,boundClip:z$e,boundContext:nR,boundItem:KV,boundMark:a$e,boundStroke:tg,changeset:Hb,clampRange:$De,codegenExpression:HMe,compare:cZ,constant:Ea,cumulativeLogNormal:OZ,cumulativeNormal:M4,cumulativeUniform:FZ,dayofyear:GDe,debounce:fZ,defaultLocale:bZ,definition:ROe,densityLogNormal:DZ,densityNormal:kZ,densityUniform:LZ,domChild:Os,domClear:mc,domCreate:Qg,domFind:Vee,dotbin:$Oe,error:Me,expressionFunction:fs,extend:yn,extent:kh,extentIndex:MDe,falsy:wg,fastmap:IS,field:Pc,flush:LDe,font:J4,fontFamily:sR,fontSize:Xh,format:AD,formatLocale:U$,formats:EZ,hasOwnProperty:jt,id:Hk,identity:wa,inferType:bOe,inferTypes:_Oe,ingest:wr,inherits:lt,inrange:vw,interpolate:_ee,interpolateColors:H4,interpolateRange:C3e,intersect:F$e,intersectBoxLine:bw,intersectPath:Iee,intersectPoint:kee,intersectRule:X3e,isArray:je,isBoolean:Uy,isDate:S0,isFunction:vn,isIterable:FDe,isNumber:lr,isObject:mt,isRegExp:jDe,isString:pt,isTuple:N4,key:dZ,lerp:BDe,lineHeight:ay,loader:k4,locale:yOe,logger:oZ,lruCache:UDe,markup:Kee,merge:zDe,mergeConfig:AS,multiLineOffset:Bee,one:TS,pad:VDe,panLinear:kDe,panLog:RDe,panPow:NDe,panSymlog:PDe,parse:vGt,parseExpression:Lte,parseSelector:Vy,path:t6,pathCurves:Tee,pathEqual:V$e,pathParse:ax,pathRectangle:H3e,pathRender:dI,pathSymbols:V3e,pathTrail:q3e,peek:Qn,point:eF,projection:ute,quantileLogNormal:$Z,quantileNormal:L4,quantileUniform:jZ,quantiles:AZ,quantizeInterpolator:I3e,quarter:DDe,quartiles:CZ,get random(){return $c},randomInteger:E4t,randomKDE:NZ,randomLCG:w4t,randomLogNormal:LOe,randomMixture:FOe,randomNormal:RZ,randomUniform:jOe,read:xOe,regressionConstant:BZ,regressionExp:UOe,regressionLinear:UZ,regressionLoess:HOe,regressionLog:BOe,regressionPoly:VOe,regressionPow:zOe,regressionQuad:zZ,renderModule:tF,repeat:S2,resetDefaultLocale:v6t,resetSVGClipId:G3e,resetSVGDefIds:S8t,responseType:EOe,runtimeContext:iLe,sampleCurve:j4,sampleLogNormal:PZ,sampleNormal:$4,sampleUniform:MZ,scale:gr,sceneEqual:Qee,sceneFromJSON:l$e,scenePickVisit:W$,sceneToJSON:u$e,sceneVisit:Kf,sceneZOrder:Ree,scheme:wee,serializeXML:C$e,setHybridRendererOptions:_8t,setRandom:b4t,span:qk,splitAccessPath:Kh,stringValue:rt,textMetrics:kl,timeBin:cOe,timeFloor:eOe,timeFormatLocale:lI,timeInterval:kS,timeOffset:rOe,timeSequence:oOe,timeUnitSpecifier:WDe,timeUnits:yZ,toBoolean:hZ,toDate:pZ,toNumber:fa,toSet:Gf,toString:mZ,transform:NOe,transforms:rx,truncate:HDe,truthy:Dc,tupleid:Lt,typeParsers:BV,utcFloor:tOe,utcInterval:RS,utcOffset:iOe,utcSequence:aOe,utcdayofyear:XDe,utcquarter:ODe,utcweek:QDe,version:bGt,visitArray:kg,week:YDe,writeConfig:CS,zero:zg,zoomLinear:aZ,zoomLog:uZ,zoomPow:B$,zoomSymlog:lZ},Symbol.toStringTag,{value:"Module"}));function wGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var EGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},xGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},SGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const TGt=Array.prototype.slice,l1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,TGt.call(t,1))},AGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var CGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:AGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return l1("join",arguments)},indexof:function(){return l1("indexOf",arguments)},lastindexof:function(){return l1("lastIndexOf",arguments)},slice:function(){return l1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return l1("substring",arguments,String)},split:function(){return l1("split",arguments,String)},replace:function(){return l1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const IGt=["view","item","group","xy","x","y"],RH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&RH.add(setImmediate);const kGt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:EGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),RH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||CGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>xGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>SGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,RH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function zT(e,t,n,r,i,s){const o=a=>kGt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,IGt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var RGt={operator(e,t){const n=t.ast,r=e.functions;return i=>zT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>zT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>zT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return zT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=zT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&wGt(o,r,s),l}}};const NGt="vega-lite",PGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',DGt="5.18.1",OGt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],$Gt="https://vega.github.io/vega-lite/",MGt="Vega-Lite is a concise high-level language for interactive visualization.",LGt=["vega","chart","visualization"],FGt="build/vega-lite.js",jGt="build/vega-lite.min.js",BGt="build/vega-lite.min.js",UGt="build/src/index",zGt="build/src/index.d.ts",VGt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},HGt=["bin","build","src","vega-lite*","tsconfig.json"],qGt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},WGt={type:"git",url:"https://github.com/vega/vega-lite.git"},GGt="BSD-3-Clause",YGt={url:"https://github.com/vega/vega-lite/issues"},KGt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},XGt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},QGt={vega:"^5.24.0"},JGt={node:">=18"},ZGt="yarn@1.22.19",eYt={name:NGt,author:PGt,version:DGt,collaborators:OGt,homepage:$Gt,description:MGt,keywords:LGt,main:FGt,unpkg:jGt,jsdelivr:BGt,module:UGt,types:zGt,bin:VGt,files:HGt,scripts:qGt,repository:WGt,license:GGt,bugs:YGt,devDependencies:KGt,dependencies:XGt,peerDependencies:QGt,engines:JGt,packageManager:ZGt};function fne(e){return!!e.or}function dne(e){return!!e.and}function hne(e){return!!e.not}function WD(e,t){if(hne(e))WD(e.not,t);else if(dne(e))for(const n of e.and)WD(n,t);else if(fne(e))for(const n of e.or)WD(n,t);else t(e)}function tE(e,t){return hne(e)?{not:tE(e.not,t)}:dne(e)?{and:e.and.map(n=>tE(n,t))}:fne(e)?{or:e.or.map(n=>tE(n,t))}:t(e)}const tn=structuredClone;function e6e(e){throw new Error(e)}function dx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Vu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>jr(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=pt(e)?e:jr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function NH(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function cb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function pne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function t6e(e,...t){for(const n of t)tYt(e,n??{});return e}function tYt(e,t){for(const n of Ye(t))CS(e,n,t[n],!0)}function Zd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function nYt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function n6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function mne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function PH(e){const t=new Set;for(const n of e){const i=Kh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function gne(e,t){return e===void 0||t===void 0?!0:mne(PH(e),PH(t))}function Fr(e){return Ye(e).length===0}const Ye=Object.keys,$o=Object.values,fy=Object.entries;function xI(e){return e===!0||e===!1}function Ti(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function LA(e,t){return hne(e)?`!(${LA(e.not,t)})`:dne(e)?`(${e.and.map(n=>LA(n,t)).join(") && (")})`:fne(e)?`(${e.or.map(n=>LA(n,t)).join(") || (")})`:t(e)}function hM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&hM(e[n],t)&&delete e[n],Fr(e)}function pR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function yne(e,t="datum"){const n=Kh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function r6e(e,t="datum"){return`${t}[${rt(Kh(e).join("."))}]`}function rYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Mc(e){return`${Kh(e).map(rYt).join("\\.")}`}function fb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function LS(e){return`${Kh(e).join(".")}`}function hx(e){return e?Kh(e).length:0}function us(...e){for(const t of e)if(t!==void 0)return t}let i6e=42;function s6e(e){const t=++i6e;return e?String(e)+t:t}function iYt(){i6e=42}function o6e(e){return a6e(e)?e:`__${e}`}function a6e(e){return e.startsWith("__")}function SI(e){if(e!==void 0)return(e%360+360)%360}function bF(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Mme=Object.getPrototypeOf(structuredClone({}));function Al(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Al(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Al(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Mme.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Mme.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Al(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function jr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const rm="row",im="column",_F="facet",Ai="x",mo="y",od="x2",Zh="y2",Hy="xOffset",FS="yOffset",ad="radius",rg="radius2",Yc="theta",ig="theta2",ud="latitude",ld="longitude",cd="latitude2",Lc="longitude2",el="color",ep="fill",tp="stroke",tl="shape",sg="size",Kb="angle",og="opacity",qy="fillOpacity",Wy="strokeOpacity",Gy="strokeWidth",Yy="strokeDash",mR="text",px="order",gR="detail",wF="key",db="tooltip",EF="href",xF="url",SF="description",sYt={x:1,y:1,x2:1,y2:1},u6e={theta:1,theta2:1,radius:1,radius2:1};function l6e(e){return e in u6e}const vne={longitude:1,longitude2:1,latitude:1,latitude2:1};function c6e(e){switch(e){case ud:return"y";case cd:return"y2";case ld:return"x";case Lc:return"x2"}}function f6e(e){return e in vne}const oYt=Ye(vne),bne={...sYt,...u6e,...vne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function nE(e){return e===el||e===ep||e===tp}const d6e={row:1,column:1,facet:1},Ec=Ye(d6e),_ne={...bne,...d6e},aYt=Ye(_ne),{order:Fon,detail:jon,tooltip:Bon,...uYt}=_ne,{row:Uon,column:zon,facet:Von,...lYt}=uYt;function cYt(e){return!!lYt[e]}function h6e(e){return!!_ne[e]}const fYt=[od,Zh,cd,Lc,ig,rg];function p6e(e){return Xb(e)!==e}function Xb(e){switch(e){case od:return Ai;case Zh:return mo;case cd:return ud;case Lc:return ld;case ig:return Yc;case rg:return ad}return e}function dy(e){if(l6e(e))switch(e){case Yc:return"startAngle";case ig:return"endAngle";case ad:return"outerRadius";case rg:return"innerRadius"}return e}function np(e){switch(e){case Ai:return od;case mo:return Zh;case ud:return cd;case ld:return Lc;case Yc:return ig;case ad:return rg}}function nl(e){switch(e){case Ai:case od:return"width";case mo:case Zh:return"height"}}function m6e(e){switch(e){case Ai:return"xOffset";case mo:return"yOffset";case od:return"x2Offset";case Zh:return"y2Offset";case Yc:return"thetaOffset";case ad:return"radiusOffset";case ig:return"theta2Offset";case rg:return"radius2Offset"}}function wne(e){switch(e){case Ai:return"xOffset";case mo:return"yOffset"}}function dYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const hYt=Ye(bne),{x:Hon,y:qon,x2:Won,y2:Gon,xOffset:Yon,yOffset:Kon,latitude:Xon,longitude:Qon,latitude2:Jon,longitude2:Zon,theta:ean,theta2:tan,radius:nan,radius2:ran,...Ene}=bne,pYt=Ye(Ene),xne={x:1,y:1},rp=Ye(xne);function ls(e){return e in xne}const Sne={theta:1,radius:1},mYt=Ye(Sne);function TF(e){return e==="width"?Ai:mo}const g6e={xOffset:1,yOffset:1};function yR(e){return e in g6e}const{text:ian,tooltip:san,href:oan,url:aan,description:uan,detail:lan,key:can,order:fan,...y6e}=Ene,gYt=Ye(y6e);function yYt(e){return!!Ene[e]}function vYt(e){switch(e){case el:case ep:case tp:case sg:case tl:case og:case Gy:case Yy:return!0;case qy:case Wy:case Kb:return!1}}const v6e={...xne,...Sne,...g6e,...y6e},AF=Ye(v6e);function ag(e){return!!v6e[e]}function bYt(e,t){return wYt(e)[t]}const b6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dan,..._Yt}=b6e;function wYt(e){switch(e){case el:case ep:case tp:case SF:case gR:case wF:case db:case EF:case px:case og:case qy:case Wy:case Gy:case _F:case rm:case im:return b6e;case Ai:case mo:case Hy:case FS:case ud:case ld:return _Yt;case od:case Zh:case cd:case Lc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case sg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Yy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case tl:return{point:"always",geoshape:"always"};case mR:return{text:"always"};case Kb:return{point:"always",square:"always",text:"always"};case xF:return{image:"always"};case Yc:return{text:"always",arc:"always"};case ad:return{text:"always",arc:"always"};case ig:case rg:return{arc:"always"}}}function Q9(e){switch(e){case Ai:case mo:case Yc:case ad:case Hy:case FS:case sg:case Kb:case Gy:case og:case qy:case Wy:case od:case Zh:case ig:case rg:return;case _F:case rm:case im:case tl:case Yy:case mR:case db:case EF:case xF:case SF:return"discrete";case el:case ep:case tp:return"flexible";case ud:case ld:case cd:case Lc:case gR:case wF:case px:return}}const EYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},xYt={count:1,min:1,max:1};function Mm(e){return!!e&&!!e.argmin}function Ky(e){return!!e&&!!e.argmax}function Tne(e){return pt(e)&&!!EYt[e]}const SYt=new Set(["count","valid","missing","distinct"]);function _6e(e){return pt(e)&&SYt.has(e)}function TYt(e){return pt(e)&&Hn(["min","max"],e)}const AYt=new Set(["count","sum","distinct","valid","missing"]),CYt=new Set(["mean","average","median","q1","q3","min","max"]);function w6e(e){return Uy(e)&&(e=FF(e,void 0)),"bin"+Ye(e).map(t=>CF(e[t])?Ti(`_${t}_${fy(e[t])}`):Ti(`_${t}_${e[t]}`)).join("")}function si(e){return e===!0||Qb(e)&&!e.binned}function Ao(e){return e==="binned"||Qb(e)&&e.binned===!0}function Qb(e){return mt(e)}function CF(e){return e==null?void 0:e.param}function Lme(e){switch(e){case rm:case im:case sg:case el:case ep:case tp:case Gy:case og:case qy:case Wy:case tl:return 6;case Yy:return 4;default:return 10}}function vR(e){return!!(e!=null&&e.expr)}function Au(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=vl(e[r]);return n}function E6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=dx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Pg(e){return pt(e)||je(e)&&pt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function Xy(e){return!!e.step}function IYt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function kYt(e){return je(e)?!1:"fields"in e&&"data"in e}function Gp(e){return je(e)?!1:"field"in e&&"data"in e}const RYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},NYt=Ye(RYt),PYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},DH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function x6e(e){const t=je(e.condition)?e.condition.map(Fme):Fme(e.condition);return{...vl(e),condition:t}}function vl(e){if(vR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Fme(e){if(vR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ci(e){if(vR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function DYt(e){return Rt(e)?e.signal:rt(e)}function jme(e){return Rt(e)?e.signal:rt(e.value)}function If(e){return Rt(e)?e.signal:e==null?null:rt(e)}function OYt(e,t,n){for(const r of n){const i=Lm(r,t.markDef,t.config);i!==void 0&&(e[r]=ci(i))}return e}function S6e(e){return[].concat(e.type,e.style??[])}function _r(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Lm(e,t,n,r)}function Lm(e,t,n,{vgChannel:r}={}){return us(r?pM(e,t,n.style):void 0,pM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function pM(e,t,n){return T6e(e,S6e(t),n)}function T6e(e,t,n){t=ht(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function A6e(e,t){return ht(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function C6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Al(i,r))return;n.push(r)}),n}function I6e(e,t){return Al(e,t)||!t?e:e?[...ht(e),...ht(t)].join(", "):t}function k6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Pg(n)||Rt(n))&&(Pg(r)||Rt(r)))return{explicit:e.explicit,value:I6e(n,r)};if(Pg(n)||Rt(n))return{explicit:e.explicit,value:n};if(Pg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Pg(n)&&!Rt(n)&&!Pg(r)&&!Rt(r))return{explicit:e.explicit,value:C6e(n,r)};throw new Error("It should never reach here")}function Ane(e){return`Invalid specification ${jr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const $Yt='Autosize "fit" only works for single views and layered views.';function Bme(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Ume(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function zme(e){return e?`Dropping "fit-${e}" because spec has discrete ${nl(e)}.`:'Dropping "fit" because spec has discrete size.'}function Cne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Vme(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function MYt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function LYt(e){return`The "nearest" transform is not supported for ${e} marks.`}function R6e(e){return`Selection not supported for ${e} yet.`}function FYt(e){return`Cannot find a selection named "${e}".`}const jYt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",BYt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",UYt="Legend bindings are only supported for selections over an individual field or encoding channel.";function zYt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function VYt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const HYt="The same selection must be used to override scale domains in a layered view.",qYt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function WYt(e){return`Unknown repeated value "${e}".`}function Hme(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const GYt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function YYt(e){return`Unrecognized parse "${e}".`}function qme(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const KYt="Attempt to add the same child twice.";function XYt(e){return`Ignoring an invalid transform: ${jr(e)}.`}const QYt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Wme(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function JYt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${jr(t)} is overridden by a child projection ${jr(n)}.`}const ZYt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function eKt(e){return`${e}Offset dropped because ${e} is continuous`}function tKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${jr(n)}}.`}function N6e(e){return`Invalid field type "${e}".`}function nKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function rKt(e){return`Invalid aggregation operator "${e}".`}function P6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function iKt(e){return`Position range does not support relative band size for ${e}.`}function OH(e,t){return`Dropping ${jr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const sKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function IF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function oKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function aKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function uKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function lKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function J9(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function cKt(e){return`The ${e} for range marks cannot be an expression`}function fKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function dKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function hKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function pKt(e){return`Cannot use the relative band size with ${e} scale.`}function mKt(e){return`Using unaggregated domain with raw field has no effect (${jr(e)}).`}function gKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function yKt(e){return`Unaggregated domain is currently unsupported for log scale (${jr(e)}).`}function vKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function bKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function _Kt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function D6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function O6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function wKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${jr(n)} and ${jr(r)}). Using ${jr(n)}.`}function EKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${jr(n)} and ${jr(r)}). Using the union of the two domains.`}function xKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function SKt(e){return`Dropping sort property ${jr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Gme="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",TKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",AKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",CKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function IKt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function kKt(e){return`Stack is applied to a non-linear scale (${e}).`}function RKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function mM(e,t){return`Invalid ${e}: ${jr(t)}.`}function NKt(e){return`Dropping day from datetime ${jr(e)} as day cannot be combined with other units.`}function PKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function DKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function OKt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Yme(e){return`1D error band does not support ${e}.`}function $6e(e){return`Channel ${e} is required for "binned" bin.`}function $Kt(e){return`Channel ${e} should not be used with "binned" bin.`}function MKt(e){return`Domain for ${e} is required for threshold scale.`}const M6e=oZ(sZ);let mx=M6e;function LKt(e){return mx=e,mx}function FKt(){return mx=M6e,mx}function Je(...e){mx.warn(...e)}function jKt(...e){mx.debug(...e)}function Jb(e){if(e&&mt(e)){for(const t of kne)if(t in e)return!0}return!1}const L6e=["january","february","march","april","may","june","july","august","september","october","november","december"],BKt=L6e.map(e=>e.substr(0,3)),F6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],UKt=F6e.map(e=>e.substr(0,3));function zKt(e){if(bF(e)&&(e=+e),lr(e))return e>4&&Je(mM("quarter",e)),e-1;throw new Error(mM("quarter",e))}function VKt(e){if(bF(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=L6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=BKt.indexOf(r);if(i!==-1)return i;throw new Error(mM("month",e))}}function HKt(e){if(bF(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=F6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=UKt.indexOf(r);if(i!==-1)return i;throw new Error(mM("day",e))}}function Ine(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Je(NKt(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?VKt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?zKt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?HKt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function hb(e){const n=Ine(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function qKt(e){const n=Ine(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function WKt(e){const t=Ine(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const j6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},kne=Ye(j6e);function GKt(e){return!!j6e[e]}function Zb(e){return mt(e)?e.binned:B6e(e)}function B6e(e){return e&&e.startsWith("binned")}function Rne(e){return e.startsWith("utc")}function YKt(e){return e.substring(3)}const KKt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function kF(e){return kne.filter(t=>z6e(e,t))}function U6e(e){const t=kF(e);return t[t.length-1]}function z6e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function XKt(e,t,{end:n}={end:!1}){const r=yne(t),i=Rne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of kne)z6e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),qKt(a)}function V6e(e){if(!e)return;const t=kF(e);return`timeUnitSpecifier(${jr(t)}, ${jr(KKt)})`}function QKt(e,t,n){if(!e)return;const r=V6e(e);return`${n||Rne(e)?"utc":"time"}Format(${t}, ${r})`}function co(e){if(!e)return;let t;return pt(e)?B6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Rne(t.unit)&&(t.utc=!0,t.unit=YKt(t.unit)),t}function JKt(e){const{utc:t,...n}=co(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Ti(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Ti(`_${r}_${n[r]}`)).join("")}function H6e(e,t=n=>n){const n=co(e),r=U6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=q6e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(hb(a))} - ${t(hb(i))}`}}const ZKt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function eXt(e){return!!ZKt[e]}function q6e(e,t=1){if(eXt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function tXt(e){return e==null?void 0:e.param}function Nne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Pne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Dne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function One(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function $ne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Mne(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function Lne(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function nXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function W6e(e){return Lne(e)||Nne(e)||Mne(e)||Pne(e)||One(e)||Dne(e)||$ne(e)}function _d(e,t){return jF(e,{timeUnit:t,wrapTime:!0})}function rXt(e,t){return e.map(n=>_d(n,t))}function G6e(e,t=!0){const{field:n}=e,r=co(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:XKt(i,n)})`:o;if(Nne(e))return`${a}===${_d(e.equal,i)}`;if(Pne(e)){const u=e.lt;return`${a}<${_d(u,i)}`}else if(One(e)){const u=e.gt;return`${a}>${_d(u,i)}`}else if(Dne(e)){const u=e.lte;return`${a}<=${_d(u,i)}`}else if($ne(e)){const u=e.gte;return`${a}>=${_d(u,i)}`}else{if(Lne(e))return`indexof([${rXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(nXt(e))return Fne(a,e.valid);if(Mne(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+_d(l,i)+", "+_d(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${_d(l,i)}`),c!==null&&f.push(`${a} <= ${_d(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${jr(e)}`)}function Fne(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function iXt(e){return W6e(e)&&e.timeUnit?{...e,timeUnit:co(e.timeUnit)}:e}const bR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function sXt(e){return e==="quantitative"||e==="temporal"}function Y6e(e){return e==="ordinal"||e==="nominal"}const pb=bR.quantitative,jne=bR.ordinal,gx=bR.temporal,Bne=bR.nominal,jS=bR.geojson;function oXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case pb:return"quantitative";case"t":case gx:return"temporal";case"o":case jne:return"ordinal";case"n":case Bne:return"nominal";case jS:return"geojson"}}const Hu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},$H={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function aXt(e,t){const n=$H[e],r=$H[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const uXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Kme(e){return uXt[e]}const K6e=new Set(["linear","log","pow","sqrt","symlog"]),X6e=new Set([...K6e,"time","utc"]);function Q6e(e){return K6e.has(e)}const J6e=new Set(["quantile","quantize","threshold"]),lXt=new Set([...X6e,...J6e,"sequential","identity"]),cXt=new Set(["ordinal","bin-ordinal","point","band"]);function fo(e){return cXt.has(e)}function ql(e){return lXt.has(e)}function kf(e){return X6e.has(e)}function yx(e){return J6e.has(e)}const fXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function dXt(e){return!pt(e)&&!!e.name}function Z6e(e){return e==null?void 0:e.param}function hXt(e){return e==null?void 0:e.unionWith}function pXt(e){return mt(e)&&"field"in e}const mXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:han,domain:pan,range:man,rangeMax:gan,rangeMin:yan,scheme:van,...gXt}=mXt,yXt=Ye(gXt);function MH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return kf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return kf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return kf(e);case"nice":return kf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ql(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function e4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return nE(e)?void 0:hKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function vXt(e,t){return Hn([jne,Bne],t)?e===void 0||fo(e):t===gx?Hn([Hu.TIME,Hu.UTC,void 0],e):t===pb?Q6e(e)||yx(e)||e===void 0:!0}function bXt(e,t,n=!1){if(!ag(e))return!1;switch(e){case Ai:case mo:case Hy:case FS:case Yc:case ad:return kf(t)||t==="band"?!0:t==="point"?!n:!1;case sg:case Gy:case og:case qy:case Wy:case Kb:return kf(t)||yx(t)||Hn(["band","point","ordinal"],t);case el:case ep:case tp:return t!=="band";case Yy:case tl:return t==="ordinal"||yx(t)}}function Une(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Vne(e);return Ze(n)&&!_6e(n.aggregate)&&i&&kf(i.get("type"))?_Xt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function _Xt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return _r("invalid",n,i)===null?[wXt(e,t),r]:r}function wXt(e,t){const n=zne(e,!0),i=Xb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function zne(e,t=!0){return Fne(pt(e)?e:at(e,{expr:"datum"}),!t)}function EXt(e){const{datum:t}=e;return Jb(t)?hb(t):`${jr(t)}`}function Tv(e,t,n,r){const i={};if(t&&(i.scale=t),ip(e)){const{datum:s}=e;Jb(s)?i.signal=hb(s):Rt(s)?i.signal=s.signal:vR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function gM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function xXt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Vne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(un(t)){const f=o==null?void 0:o.get("type");if(tu(t)){c??(c=hy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(si(d)||c&&h&&p===gx)return a!=null&&a.impute?Tv(t,s,{binSuffix:"mid"},{offset:u}):c&&!fo(f)?gM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Tv(t,s,xR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ao(d)){if(Ze(n))return gM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je($6e(e===Ai?od:Zh))}}return Tv(t,s,fo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Xf(t)){const f=t.value,d=u?{offset:u}:{};return{...FA(e,f),...d}}}return vn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function FA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ci(t)}function mb(e){return e&&e!=="number"&&e!=="time"}function t4e(e,t,n){return`${e}(${t}${n?`, ${jr(n)}`:""})`}const SXt="  ";function Hne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(mb(n))return Rf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=n4e(e,r,i),a=vx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Rf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Rf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Rf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(_x(e)){const c=AXt({field:o,timeUnit:Ze(e)?(u=co(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:t_(e)&&((l=e.scale)==null?void 0:l.type)===Hu.UTC});return c?{signal:c}:void 0}if(t=LH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&si(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:_R(o,c,t,n,s)}}else return t||vx(e)==="quantitative"?{signal:`${s4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function n4e(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):EXt(e)}function Rf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=n4e(e,r,i)),o!=="datum.value"&&Ze(e)&&si(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:_R(o,a,t,n,s)}}return{signal:t4e(n,o,t)}}function r4e(e,t,n,r,i,s){var o;if(!(pt(r)&&mb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&vx(e)==="quantitative"&&(i.normalizedNumberFormatType&&bx(e)&&e.stack==="normalize"||i.numberFormatType))){if(bx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return LH({type:"quantitative",config:i,normalizeStack:!0});if(_x(e)){const a=Ze(e)?(o=co(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:TXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return LH({type:t,specifiedFormat:n,config:i})}}function i4e(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(_x(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=co(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function LH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pt(t))return t;if(e===pb)return r?n.normalizedNumberFormat:n.numberFormat}function TXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:V6e(t)}:r?void 0:n.timeFormat)}function s4e(e,t){return`format(${e}, "${t||""}")`}function Xme(e,t,n,r){return mb(n)?t4e(n,e,t):s4e(e,(pt(t)?t:void 0)??r.numberFormat)}function _R(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return _R(e,t,i.numberFormat,i.numberFormatType,i);const s=Xme(e,n,r,i),o=Xme(t,n,r,i);return`${Fne(e,!1)} ? "null" : ${s} + "${SXt}" + ${o}`}function AXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):QKt(t,e,s)}const au={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},o4e=au.arc,RF=au.area,NF=au.bar,CXt=au.image,PF=au.line,DF=au.point,IXt=au.rect,yM=au.rule,a4e=au.text,qne=au.tick,kXt=au.trail,Wne=au.circle,Gne=au.square,u4e=au.geoshape;function e_(e){return["line","area","trail"].includes(e)}function TI(e){return["rect","bar","image","arc"].includes(e)}const RXt=new Set(Ye(au));function Ph(e){return e.type}const NXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],PXt=["fill","fillOpacity"],DXt=[...NXt,...PXt],OXt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Qme=Ye(OXt),$Xt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},MXt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},LXt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},l4e=Ye(LXt);function gb(e){return e&&e.band!=null}const FXt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},c4e=5,jXt={binSpacing:1,continuousBandSize:c4e,minBandSize:.25,timeUnitBandPosition:.5},BXt={binSpacing:0,continuousBandSize:c4e,minBandSize:.25,timeUnitBandPosition:.5},UXt={thickness:1};function zXt(e){return Ph(e)?e.type:e}const OF="min",VXt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Jme(e){return e in VXt}function f4e(e){return!!(e!=null&&e.encoding)}function ph(e){return e&&(e.op==="count"||!!e.field)}function d4e(e){return e&&je(e)}function wR(e){return"row"in e||"column"in e}function Yne(e){return!!e&&"header"in e}function $F(e){return"facet"in e}function HXt(e){return e.param}function qXt(e){return e&&!pt(e)&&"repeat"in e}function Zme(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Kne(e){return"sort"in e}function hy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(un(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Lm("timeUnitBandPosition",n,r);if(si(s))return .5}}function h4e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=nl(e),u=_r(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Lm("timeUnitBandSize",r,i)};if(si(h)&&!fo(s))return{band:1}}if(TI(r.type))return s?fo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function p4e(e,t,n,r){return si(e.bin)||e.timeUnit&&tu(e)&&e.type==="temporal"?hy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function m4e(e){return e&&!!e.sort&&!e.field}function MF(e){return e&&"condition"in e}function LF(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&Ze(t)}function ER(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&un(t)}function WXt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||Xf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function vx(e){return e==null?void 0:e.type}function ip(e){return e&&"datum"in e}function r0(e){return tu(e)&&!bM(e)||vM(e)}function ege(e){return tu(e)&&e.type==="quantitative"&&!e.bin||vM(e)}function vM(e){return ip(e)&&lr(e.datum)}function un(e){return Ze(e)||ip(e)}function tu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Xf(e){return e&&"value"in e&&"value"in e}function t_(e){return e&&("scale"in e||"sort"in e)}function bx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function g4e(e){return e&&"legend"in e}function y4e(e){return e&&("format"in e||"formatType"in e)}function GXt(e){return Vu(e,["legend","axis","header","scale"])}function YXt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(XXt(e))n=o6e("count");else{let o;if(!t.nofn)if(YXt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;si(a)?(o=w6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Ky(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Mm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Zb(l)&&(o=JKt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?LS(n):t.expr?r6e(n,t.expr)+s:Mc(n)+s}function bM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(N6e(e.type))}function KXt(e){var t;return t_(e)&&yx((t=e.scale)==null?void 0:t.type)}function XXt(e){return e.aggregate==="count"}function QXt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(si(r))return`${n} (binned)`;if(i&&!Zb(i)){const a=(o=co(i))==null?void 0:o.unit;if(a)return`${n} (${kF(a).join("-")})`}else if(s)return Ky(s)?`${n} for max ${s.argmax}`:Mm(s)?`${n} for min ${s.argmin}`:`${pR(s)} of ${n}`;return n}function JXt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ky(t))return`${i} for argmax(${t.argmax})`;if(Mm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Zb(r)?co(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||si(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const v4e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return JXt(e);default:return QXt(e,t)}};let b4e=v4e;function _4e(e){b4e=e}function ZXt(){_4e(v4e)}function rE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Xne(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Qne(s,t):void 0;return n?us(i,s.title,o):i??s.title??o}function Xne(e){if(bx(e)&&e.axis)return e.axis;if(g4e(e)&&e.legend)return e.legend;if(Yne(e)&&e.header)return e.header}function Qne(e,t){return b4e(e,t)}function _M(e){if(y4e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Xne(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function eQt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Kne(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ky(n)&&!Mm(n))return"quantitative";if(t_(e)&&((s=e.scale)!=null&&s.type))switch($H[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Dh(e){if(Ze(e))return e;if(LF(e))return e.condition}function Ls(e){if(un(e))return e;if(ER(e))return e.condition}function w4e(e,t,n,r={}){if(pt(e)||lr(e)||Uy(e)){const i=pt(e)?"string":lr(e)?"number":"boolean";return Je(tKt(t,i,e)),{value:e}}return un(e)?wM(e,t,n,r):ER(e)?{...e,condition:wM(e.condition,t,n,r)}:e}function wM(e,t,n,r){if(y4e(e)){const{format:i,formatType:s,...o}=e;if(mb(s)&&!n.customFormatTypes)return Je(Wme(t)),wM(o,t,n,r)}else{const i=bx(e)?"axis":g4e(e)?"legend":Yne(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(mb(o)&&!n.customFormatTypes)return Je(Wme(t)),wM({...e,[i]:a},t,n,r)}}return Ze(e)?Jne(e,t,r):tQt(e)}function tQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":pt(n)?"nominal":Jb(n)?"temporal":void 0,{...e,type:t}}function Jne(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Tne(r)&&!Ky(r)&&!Mm(r)&&(Je(rKt(r)),delete a.aggregate),i&&(a.timeUnit=co(i)),o&&(a.field=`${o}`),si(s)&&(a.bin=FF(s,t)),Ao(s)&&!ls(t)&&Je($Kt(t)),tu(a)){const{type:u}=a,l=oXt(u);u!==l&&(a.type=l),u!=="quantitative"&&_6e(r)&&(Je(nKt(u,r)),a.type="quantitative")}else if(!p6e(t)){const u=eQt(a,t);a.type=u}if(tu(a)){const{compatible:u,warning:l}=nQt(a,t)||{};u===!1&&Je(l)}if(Kne(a)&&pt(a.sort)){const{sort:u}=a;if(Jme(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Jme(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Yne(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function FF(e,t){return Uy(e)?{maxbins:Lme(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Lme(t)}:e}const N_={compatible:!0};function nQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case rm:case im:case _F:return bM(e)?N_:{compatible:!1,warning:aKt(t)};case Ai:case mo:case Hy:case FS:case el:case ep:case tp:case mR:case gR:case wF:case db:case EF:case xF:case Kb:case Yc:case ad:case SF:return N_;case ld:case Lc:case ud:case cd:return n!==pb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:N_;case og:case qy:case Wy:case Gy:case sg:case ig:case rg:case od:case Zh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:N_;case tl:case Yy:return!bM(e)&&!KXt(e)?{compatible:!1,warning:uKt(t)}:N_;case px:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:N_}}function _x(e){const{formatType:t}=_M(e);return t==="time"||!t&&rQt(e)}function rQt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function jF(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=co(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return vR(e)?a=e.expr:Rt(e)?a=e.signal:Jb(e)?(o=!0,a=hb(e)):(pt(e)||lr(e))&&o&&(a=`datetime(${jr(e)})`,GKt(s)&&(lr(e)&&e<1e4||pt(e)&&isNaN(Date.parse(e)))&&(a=hb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:jr(e)}function E4e(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!Zb(e.timeUnit)?e.timeUnit:void 0,s=jF(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function xR(e,t){return si(e.bin)?ag(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const tge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function SR(e){return e==null?void 0:e.condition}const x4e=["domain","grid","labels","ticks","title"],iQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},S4e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},sQt={...S4e,style:1,labelExpr:1,encoding:1};function nge(e){return!!sQt[e]}const oQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},T4e=Ye(oQt);function ug(e){return"mark"in e}class BF{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ug(t)?zXt(t.mark)===this.name:!1}}function Av(e,t){const n=e&&e[t];return n?je(n)?cb(n,r=>!!r.field):Ze(n)||LF(n):!1}function A4e(e,t){const n=e&&e[t];return n?je(n)?cb(n,r=>!!r.field):Ze(n)||ip(n)||ER(n):!1}function C4e(e,t){if(ls(t)){const n=e[t];if((Ze(n)||ip(n))&&(Y6e(n.type)||Ze(n)&&n.timeUnit)){const r=wne(t);return A4e(e,r)}}return!1}function Zne(e){return cb(aYt,t=>{if(Av(e,t)){const n=e[t];if(je(n))return cb(n,r=>!!r.aggregate);{const r=Dh(n);return r&&!!r.aggregate}}return!1})}function I4e(e,t){const n=[],r=[],i=[],s=[],o={};return ere(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Xne(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:rE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Ky(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Mm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),tu(a)&&si(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),xR(a,u)&&n.push(at(a,{binSuffix:"range"})),ls(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",p6e(u)||(y.type=pb)}else if(d&&!Zb(d)){i.push({timeUnit:d,field:l,as:g});const v=tu(a)&&a.type!==gx&&"time";v&&(u===mR||u===db?y.formatType=v:yYt(u)?y.legend={formatType:v,...y.legend}:ls(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function aQt(e,t,n){const r=bYt(t,n);if(r){if(r==="binned"){const i=e[t===od?Ai:mo];return!!(Ze(i)&&Ze(e[t])&&Ao(i.bin))}}else return!1;return!0}function uQt(e,t,n,r){const i={};for(const s of Ye(e))h6e(s)||Je(oKt(s));for(let s of hYt){if(!e[s])continue;const o=e[s];if(yR(s)){const a=dYt(s),u=i[a];if(Ze(u)&&sXt(u.type)&&Ze(o)&&!u.timeUnit){Je(eKt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(ZYt),s=Yc),!aQt(e,s,t)){Je(IF(s,t));continue}if(s===sg&&t==="line"){const a=Dh(e[s]);if(a!=null&&a.aggregate){Je(sKt);continue}}if(s===el&&(n?"fill"in e:"stroke"in e)){Je(P6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===gR||s===px&&!je(o)&&!Xf(o)||s===db&&je(o)){if(o){if(s===px){const a=e[s];if(m4e(a)){i[s]=a;continue}}i[s]=ht(o).reduce((a,u)=>(Ze(u)?a.push(Jne(u,s)):Je(OH(u,s)),a),[])}}else{if(s===db&&o===null)i[s]=null;else if(!Ze(o)&&!ip(o)&&!Xf(o)&&!MF(o)&&!Rt(o)){Je(OH(o,s));continue}i[s]=w4e(o,s,r)}}return i}function UF(e,t){const n={};for(const r of Ye(e)){const i=w4e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function lQt(e){const t=[];for(const n of Ye(e))if(Av(e,n)){const r=e[n],i=ht(r);for(const s of i)Ze(s)?t.push(s):LF(s)&&t.push(s.condition)}return t}function ere(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function cQt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function k4e(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ai:case mo:case EF:case SF:case xF:case od:case Zh:case Hy:case FS:case Yc:case ig:case ad:case rg:case ud:case ld:case cd:case Lc:case mR:case tl:case Kb:case db:return n;case px:if(e==="line"||e==="trail")return n;case gR:case wF:{const i=t[r];if(je(i)||Ze(i))for(const s of ht(i))s.aggregate||n.push(at(s,{}));return n}case sg:if(e==="trail")return n;case el:case ep:case tp:case og:case qy:case Wy:case Yy:case Gy:{const i=Dh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function fQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function FH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${tre(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=lQt(n).map(GXt);return{tooltip:[...i,...Zd(s,Vn)]}}function tre(e){const{title:t,field:n}=e;return us(t,n)}function nre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=tre(n);return R4e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function R4e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Ph(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Uy(e[t])?{}:e[t]}}]:[]}function N4e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:gP(s,n),continuousAxisChannelDef2:gP(o,n),continuousAxisChannelDefError:gP(a,n),continuousAxisChannelDefError2:gP(u,n),continuousAxis:i}}function gP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(OKt(n,t)),r}else return e}function P4e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Ph(n)&&n.orient)return n.orient;if(r0(i)){if(r0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _x(s)&&!_x(i)?"horizontal":"vertical"}return"horizontal"}else{if(r0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const EM="boxplot",dQt=["box","median","outliers","rule","ticks"],hQt=new BF(EM,O4e);function D4e(e){return lr(e)?"tukey":e}function O4e(e,{config:t}){e={...e,encoding:UF(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Ph(n)?n:{type:n};i&&Je(R6e("boxplot"));const u=a.extent??t.boxplot.extent,l=_r("size",a,t),c=a.invalid,f=D4e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:T}=pQt(e,u,t),S=LS(m.field),{color:A,size:C,...I}=b,N=ke=>nre(a,g,m,ke,t.boxplot),O=N(I),P=N(b),$=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...I,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:$}}}}),L=FH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},z=f==="min-max"?L:FH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),q=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:z}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:z})],D=[...f!=="tukey"?q:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${U})`,H=`${U} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:$4e(m.field),groupby:y},de={transform:[{filter:`(${H} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:q},{tooltip:he,...ye}=I,{scale:Ie,axis:be}=m,Ke=tre(m),Ue=Vu(be,["title"]),yt=R4e(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${H}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...Fr(Ue)?{}:{axis:Ue}},...ye,...A?{color:A}:{},...T?{tooltip:T}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:D}]}}function $4e(e){const t=LS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function pQt(e,t,n){const r=P4e(e,EM),{continuousAxisChannelDef:i,continuousAxis:s}=N4e(e,r,EM),o=i.field,a=LS(o),u=D4e(t),l=[...$4e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=fQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=I4e(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const rre="errorbar",mQt=["ticks","rule"],gQt=new BF(rre,M4e);function M4e(e,{config:t}){e={...e,encoding:UF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=L4e(e,rre,t);delete s.size;const c=nre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function yQt(e,t){const{encoding:n}=e;if(vQt(n))return{orient:P4e(e,t),inputType:"raw"};const r=bQt(n),i=_Qt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(un(a)&&un(u))throw new Error(`${t} cannot have both x2 and y2`);if(un(a)){if(r0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(un(u)){if(r0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(un(u)&&!un(a))throw new Error(`${t} cannot have xError2 without xError`);if(un(c)&&!un(l))throw new Error(`${t} cannot have yError2 without yError`);if(un(a)&&un(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(un(a)){if(r0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(un(l)){if(r0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function vQt(e){return(un(e.x)||un(e.y))&&!un(e.x2)&&!un(e.y2)&&!un(e.xError)&&!un(e.xError2)&&!un(e.yError)&&!un(e.yError2)}function bQt(e){return un(e.x2)||un(e.y2)}function _Qt(e){return un(e.xError)||un(e.xError2)||un(e.yError)||un(e.yError2)}function L4e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Ph(r)?r:{type:r};s&&Je(R6e(t));const{orient:l,inputType:c}=yQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=N4e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=wQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:S,...A}=i,{bins:C,timeUnits:I,aggregate:N,groupby:O,encoding:P}=I4e(A,n),$=[...N,...g],F=c!=="raw"?[]:O,L=FH(v,f,P,b);return{transform:[...a.transform??[],...C,...I,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function wQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(DKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:pR(h)},{fieldPrefix:"upper_",titlePrefix:rge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:rge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:rE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:rE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:rE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(PKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:fb(fb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function rge(e,t,n){return`${pR(e)} ${n} ${t}`}const ire="errorband",EQt=["band","borders"],xQt=new BF(ire,F4e);function F4e(e,{config:t}){e={...e,encoding:UF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=L4e(e,ire,t),l=o,c=nre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(Yme("interpolate")):l.tension&&Je(Yme("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const j4e={};function sre(e,t,n){const r=new BF(e,t);j4e[e]={normalizer:r,parts:n}}function SQt(){return Ye(j4e)}sre(EM,O4e,dQt);sre(rre,M4e,mQt);sre(ire,F4e,EQt);const TQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],B4e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},U4e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},AQt=Ye(B4e),CQt=Ye(U4e),IQt={header:1,headerRow:1,headerColumn:1,headerFacet:1},z4e=Ye(IQt),V4e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],kQt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},RQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Qf="_vgsid_",NQt={point:{on:"click",fields:[Qf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function ore(e){return e==="legend"||!!(e!=null&&e.legend)}function Z9(e){return ore(e)&&mt(e)}function are(e){return!!(e!=null&&e.select)}function H4e(e){const t=[];for(const n of e||[]){if(are(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function PQt(e){return zF(e)||lre(e)||ure(e)}function ure(e){return"concat"in e}function zF(e){return"vconcat"in e}function lre(e){return"hconcat"in e}function q4e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Oh(e){return mt(e)&&e.step!==void 0}function ige(e){return e.view||e.width||e.height}const sge=20,DQt={align:1,bounds:1,center:1,columns:1,spacing:1},OQt=Ye(DQt);function $Qt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&($F(e)&&!wR(e.facet)||ure(e))&&(i.columns=o),zF(e)&&(i.columns=1);for(const a of OQt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function jH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function xM(e,t){const n=SM(e,t);return Oh(n)?n.step:W4e}function SM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return us(n,{step:e.step})}const W4e=20,MQt={continuousWidth:200,continuousHeight:200,step:W4e},LQt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:MQt,mark:MXt,arc:{},area:{},bar:jXt,circle:{},geoshape:{},image:{},line:{},point:{},rect:BXt,rule:{color:"black"},square:{},text:{color:"black"},tick:UXt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:fXt,projection:{},legend:kQt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:NQt,style:{},title:{},facet:{spacing:sge},concat:{spacing:sge},normalizedNumberFormat:".0%"},gp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],oge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},age={blue:gp[0],orange:gp[1],red:gp[2],teal:gp[3],green:gp[4],yellow:gp[5],purple:gp[6],pink:gp[7],brown:gp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function FQt(e={}){return{signals:[{name:"color",value:mt(e)?{...age,...e}:age}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function jQt(e){return{signals:[{name:"fontSize",value:mt(e)?{...oge,...e}:oge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function BQt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function G4e(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=SR(i)?x6e(i):vl(i)}return n}function UQt(e){const t=Ye(e),n={};for(const r of t)n[r]=G4e(e[r]);return n}const zQt=[...l4e,...T4e,...z4e,"background","padding","legend","lineBreak","scale","style","title","view"];function Y4e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=AS({},tn(LQt),n?BQt(n):{},t?FQt(t):{},r?jQt(r):{},s||{});i&&CS(o,"selection",i,!0);const a=Vu(o,zQt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=vl(o[u]));for(const u of l4e)o[u]&&(a[u]=Au(o[u]));for(const u of T4e)o[u]&&(a[u]=G4e(o[u]));for(const u of z4e)o[u]&&(a[u]=Au(o[u]));return o.legend&&(a.legend=Au(o.legend)),o.scale&&(a.scale=Au(o.scale)),o.style&&(a.style=UQt(o.style)),o.title&&(a.title=Au(o.title)),o.view&&(a.view=Au(o.view)),a}const VQt=new Set(["view",...RXt]),HQt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],qQt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...$Xt};function WQt(e){e=tn(e);for(const t of HQt)delete e[t];if(e.axis)for(const t in e.axis)SR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of TQt)delete e.legend[t];if(e.mark){for(const t of Qme)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(H4e(e.params)),delete e.params);for(const t of VQt){for(const r of Qme)delete e[t][r];const n=qQt[t];if(n)for(const r of n)delete e[t][r];YQt(e,t)}for(const t of SQt())delete e[t];GQt(e);for(const t in e)mt(e[t])&&Fr(e[t])&&delete e[t];return Fr(e)?void 0:e}function GQt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=E6e(e.title);Fr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Fr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Fr(r)?delete e.title:e.title=r}function YQt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Fr(s)||(e.style[n??t]=s),delete e[t]}function VF(e){return"layer"in e}function KQt(e){return"repeat"in e}function XQt(e){return!je(e.repeat)&&e.repeat.layer}class cre{map(t,n){return $F(t)?this.mapFacet(t,n):KQt(t)?this.mapRepeat(t,n):lre(t)?this.mapHConcat(t,n):zF(t)?this.mapVConcat(t,n):ure(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(VF(t))return this.mapLayer(t,n);if(ug(t))return this.mapUnit(t,n);throw new Error(Ane(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const QQt={zero:1,center:1,normalize:1};function JQt(e){return e in QQt}const ZQt=new Set([o4e,NF,RF,yM,DF,Wne,Gne,PF,a4e,qne]),eJt=new Set([NF,RF,o4e]);function P_(e){return Ze(e)&&vx(e)==="quantitative"&&!e.bin}function uge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(P_(o)&&P_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(P_(o))return t;if(P_(a))return i}else{if(P_(o))return s&&n==="vertical"?void 0:t;if(P_(a))return s&&n==="horizontal"?void 0:i}}function tJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function K4e(e,t){var m,g;const n=Ph(e)?e:{type:e},r=n.type;if(!ZQt.has(r))return null;const i=uge(t,"x",n)||uge(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=tJt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=pYt.reduce((y,v)=>{if(v!=="tooltip"&&Av(t,v)){const b=t[v];for(const w of ht(b)){const E=Dh(w);if(E.aggregate)continue;const T=at(E,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Uy(s.stack)?p=s.stack?"zero":null:p=s.stack:eJt.has(r)&&(p="zero"),!p||!JQt(p)||Zne(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Hu.LINEAR&&s!=null&&s.stack&&Je(kKt(s.scale.type)),un(t[np(i)])?(s.stack!==void 0&&Je(IKt(i)),null):(Ze(s)&&s.aggregate&&!AYt.has(s.aggregate)&&Je(RKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:e_(r),stackBy:h,offset:p}))}function X4e(e,t,n){const r=Au(e),i=_r("orient",r,n);if(r.orient=sJt(r.type,t,i),i!==void 0&&i!==r.orient&&Je(dKt(r.orient,i)),r.type==="bar"&&r.orient){const u=_r("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:FXt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=_r("opacity",r,n),o=_r("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=rJt(r.type,t)),_r("cursor",r,n)===void 0&&(r.cursor=nJt(r,t,n)),r}function nJt(e,t,n){return t.href||e.href||_r("href",e,n)?"pointer":e.cursor}function rJt(e,t){if(Hn([DF,qne,Wne,Gne],e)&&!Zne(t))return .7}function iJt(e,t,{graticule:n}){if(n)return!1;const r=Lm("filled",e,t),i=e.type;return us(r,i!==DF&&i!==PF&&i!==yM)}function sJt(e,t,n){switch(e){case DF:case Wne:case Gne:case a4e:case IXt:case CXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case NF:if(Ze(r)&&(Ao(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Ao(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===pb&&!si(r.bin)||vM(r))&&Ze(i)&&Ao(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===pb&&!si(i.bin)||vM(i))&&Ze(r)&&Ao(r.bin)?"vertical":"horizontal"}case yM:if(s&&!(Ze(r)&&Ao(r.bin))&&o&&!(Ze(i)&&Ao(i.bin)))return;case RF:if(o)return Ze(i)&&Ao(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Ao(r.bin)?"vertical":"horizontal";if(e===yM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case PF:case qne:{const a=ege(r),u=ege(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=tu(r)&&r.type===gx,c=tu(i)&&i.type===gx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function oJt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function aJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Vu(e[t],["point","line"])});return e}function eB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function lge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class uJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ug(t)){const{mark:r,encoding:i}=t,s=Ph(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!eB(s,n[s.type],i);case"area":return!!eB(s,n[s.type],i)||!!lge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=UF(l,i),d=Ph(a)?a:{type:a},h=eB(d,i[d.type],f),p=d.type==="area"&&lge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:oJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Vu(f,["shape"])}],g=K4e(X4e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Vu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...dx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...dx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:aJt(i)})}}function lJt(e,t){return t?wR(e)?J4e(e,t):Q4e(e,t):e}function tB(e,t){return t?J4e(e,t):e}function BH(e,t,n){const r=t[e];if(qXt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(WYt(r.repeat));return}return t}function Q4e(e,t){if(e=BH("field",e,t),e!==void 0){if(e===null)return null;if(Kne(e)&&ph(e.sort)){const n=BH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function cge(e,t){if(Ze(e))return Q4e(e,t);{const n=BH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function fge(e,t){if(un(e)){const n=cge(e,t);if(n)return n;if(MF(e))return{condition:e.condition}}else{if(ER(e)){const n=cge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function J4e(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>fge(s,t)).filter(s=>s);else{const s=fge(i,t);s!==void 0&&(n[r]=s)}}return n}class cJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ug(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ph(r)&&r.type==="line")for(const i of fYt){const s=Xb(i),o=n[s];if(n[i]&&(Ze(o)&&!Ao(o.bin)||ip(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(fKt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class fJt extends cre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[hQt,gQt,xQt,new uJt,new cJt]}map(t,n){if(ug(t)){const r=Av(t.encoding,rm),i=Av(t.encoding,im),s=Av(t.encoding,_F);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=tB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return XQt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ti(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=Vu(t,["columns"]),Je(Hme("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ti(p)}`:(r.row?`row_${Ti(m)}`:"")+(r.column?`column_${Ti(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Vu(b,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return wR(r)&&t.columns&&(t=Vu(t,["columns"]),Je(Hme("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=hge({parentProjection:o,projection:i}),l=dge({parentEncoding:s,encoding:tB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=tB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(lKt([...r?[rm]:[],...i?[im]:[]]));const o={},a={};for(const u of[rm,im]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:lJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:dge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:hge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function dge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(un(o)){const u={...a,...o};r[s]=u}else ER(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Xf(a)||Rt(a)||un(a)||je(a))&&(r[s]=a)}}else r=t;return!r||Fr(r)?void 0:r}function hge(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(JYt({parentProjection:t,projection:n})),n??t}function fre(e){return"filter"in e}function dJt(e){return(e==null?void 0:e.stop)!==void 0}function Z4e(e){return"lookup"in e}function hJt(e){return"data"in e}function pJt(e){return"param"in e}function mJt(e){return"pivot"in e}function gJt(e){return"density"in e}function yJt(e){return"quantile"in e}function vJt(e){return"regression"in e}function bJt(e){return"loess"in e}function _Jt(e){return"sample"in e}function wJt(e){return"window"in e}function EJt(e){return"joinaggregate"in e}function xJt(e){return"flatten"in e}function SJt(e){return"calculate"in e}function eFe(e){return"bin"in e}function TJt(e){return"impute"in e}function AJt(e){return"timeUnit"in e}function CJt(e){return"aggregate"in e}function IJt(e){return"stack"in e}function kJt(e){return"fold"in e}function RJt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function NJt(e){return e.map(t=>fre(t)?{filter:tE(t.filter,iXt)}:t)}class PJt extends cre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=pge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=pge(t,n),t.encoding){const r={};for(const[i,s]of fy(t.encoding))r[i]=tFe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:fy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of $o(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function pge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(fre(s))return{filter:UH(s,t)};if(eFe(s)&&Qb(s.bin))return{...s,bin:nFe(s.bin)};if(Z4e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function tFe(e,t){var r,i;const n=tn(e);if(Ze(n)&&Qb(n.bin)&&(n.bin=nFe(n.bin)),t_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(MF(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:UH(s,t)}});else{const{selection:s,param:o,test:a,...u}=tFe(n.condition,t);n.condition=o?n.condition:{...u,test:UH(n.condition,t)}}return n}function nFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function UH(e,t){const n=r=>tE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):tE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class zH extends cre{map(t,n){const r=n.selections??[];if(t.params&&!ug(t)){const i=[];for(const s of t.params)are(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(pt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=zH.prototype[e];zH.prototype[e]=function(n,r){return t.call(this,n,DJt(n,r))}}function DJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function rFe(e,t){t===void 0&&(t=Y4e(e.config));const n=LJt(e,t),{width:r,height:i}=e,s=FJt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const OJt=new fJt,$Jt=new PJt,MJt=new zH;function LJt(e,t={}){const n={config:t};return MJt.map(OJt.map($Jt.map(e,n),n),n)}function mge(e){return pt(e)?{type:e}:e??{}}function FJt(e,t,n){let{width:r,height:i}=t;const s=ug(e)||VF(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(Bme("width")),r=void 0),i=="container"&&(Je(Bme("height")),i=void 0));const a={type:"pad",...o,...n?mge(n.autosize):{},...mge(e.autosize)};if(a.type==="fit"&&!s&&(Je($Yt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(Ume("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(Ume("height")),!Al(a,{type:"pad"}))return a}function jJt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function BJt(e){return e?`fit-${TF(e)}`:"fit"}const UJt=["background","padding"];function gge(e,t){const n={};for(const r of UJt)e&&e[r]!==void 0&&(n[r]=vl(e[r]));return t&&(n.params=e.params),n}class lg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new lg(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return us(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Rd(e){return{explicit:!0,value:e}}function cl(e){return{explicit:!1,value:e}}function iFe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:HF(t,n,r,i)}}function HF(e,t,n,r){return e.explicit&&t.explicit&&Je(wKt(n,r,e.value,t.value)),e}function py(e,t,n,r,i=HF){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Al(e.value,t.value)?e:i(e,t,n,r)}class zJt extends lg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function wx(e){return"url"in e}function AI(e){return"values"in e}function sFe(e){return"name"in e&&!wx(e)&&!AI(e)&&!I0(e)}function I0(e){return e&&(oFe(e)||aFe(e)||dre(e))}function oFe(e){return"sequence"in e}function aFe(e){return"sphere"in e}function dre(e){return"graticule"in e}var _i;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(_i||(_i={}));function uFe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Mc(i.field),i}function yb(e,t=!0,n=wa){if(je(e)){const r=e.map(i=>yb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Jb(e))return n(t?hb(e):WKt(e));return t?n(jr(e)):e}function VJt(e,t){for(const n of $o(e.component.selection??{})){const r=n.name;let i=`${r}${gy}, ${n.resolve==="global"?"true":`{unit: ${Cv(e)}}`}`;for(const s of YF)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+wZt,on:[{events:{signal:n.name+gy},update:`modify(${rt(n.name+vb)}, ${i})`}]})}return hre(t)}function HJt(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Vy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return hre(t)}function qJt(e,t){let n=!1;for(const r of $o(e.component.selection??{})){const i=r.name,s=rt(i+vb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${AFe}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of YF)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),hre(t)}function WJt(e,t){const n=[...t],r=Cv(e,{escape:!1});for(const i of $o(e.component.selection??{})){const s={name:i.name+vb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Qf}}]),i.init){const a=i.project.items.map(uFe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Qf]:yb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:yb(u,!1)}))}n.filter(a=>a.name===i.name+vb).length||n.push(s)}return n}function lFe(e,t){for(const n of $o(e.component.selection??{}))for(const r of YF)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function GJt(e,t){for(const n of e.children)qi(n)&&(t=lFe(n,t));return t}function YJt(e,t,n,r){const i=NFe(e,t.param,t);return{signal:ql(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function hre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Or{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(KYt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class qu extends Or{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${s6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function nB(e){return e.as!==void 0}function yge(e){return`${e}_end`}class mh extends Or{clone(){return new mh(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Zb(u)){if(qi(n)){const{mark:c,markDef:f,config:d}=n,h=hy({fieldDef:s,markDef:f,config:d});(TI(c)||h)&&(l={timeUnit:co(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(qi(n)){const{mark:c,markDef:f,config:d}=n,h=hy({fieldDef:s,markDef:f,config:d});TI(c)&&ls(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return Fr(r)?null:new mh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=co(r),o={...i,timeUnit:s};return new mh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of fy(this.timeUnits)){const s=nB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set($o(this.timeUnits).map(t=>nB(t)?t.as:yge(t.field)))}dependentFields(){return new Set($o(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of $o(this.timeUnits)){const{rectBandPosition:r}=n,i=co(n.timeUnit);if(nB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Mc(s),type:"timeunit",...a?{units:kF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...vge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=cFe({timeUnit:i,field:o}),u=yge(o);t.push({type:"formula",expr:a,as:u}),t.push(...vge([o,u],r,i))}}return t}}const qF="offsetted_rect_start",WF="offsetted_rect_end";function cFe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=U6e(r),{part:o,step:a}=q6e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function vge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:bge([cFe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${qF}`},{type:"formula",expr:bge([i,s],n+.5),as:`${e}_${WF}`}]}return[]}function bge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const TR="_tuple_fields";class KJt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const XJt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new KJt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ti(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ti(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ht(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Ye(p))cYt(m)?(h||(h=[])).push(m):l==="interval"?(Je(qYt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(MYt(p,m.aggregate));continue}else if(!g){Je(Vme(p));continue}if(m.timeUnit&&!Zb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&ag(p)&&ql(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Qf,f6e(p)?(v.geoChannel=p,v.channel=c6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(Vme(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Qf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Fr(o)||(i.timeUnit=new mh(null,o))},signals:(e,t,n)=>{const r=t.name+TR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(uFe)})}},sm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ag(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(BYt),!s||!ql(o)){Je(jYt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||_ge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(AFe)>=0)i.update=`{${r.map(o=>`${rt(Mc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Mc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!_ge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function VH(e,t){return`domain(${rt(e.scaleName(t))})`}function _ge(e){return e.parent&&HS(e.parent)&&!e.parent.parent}const iE="_brush",fFe="_scale_trigger",VT="geo_interval_init_tick",dFe="_init",QJt="_center",JJt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[Qf],i.encodings||(i.encodings=n.value?Ye(n.value):[ld,ud]),n.select={type:"interval",...i}}if(t.translate&&!sm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+iE)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ht((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+gy,s=$o(t.project.hasChannel).filter(a=>a.channel===Ai||a.channel===mo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(ZJt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+QJt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+dFe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Cv(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:VT}]:[]],update:b}]})}else{if(!sm.defined(t)){const l=r+fFe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=ql(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Cv(e)}, fields: ${r+TR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${yb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(qi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===VT).length||n.unshift({name:VT,value:null,on:[{events:"timer{1}",update:`${VT} === null ? {} : ${VT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+vb)})`;if(sm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Cv(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+iE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+iE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function ZJt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ai?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=sm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:yb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+fFe},update:ql(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:yb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ai?0:1,h=t.name+dFe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const eZt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+TR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=$o(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+iE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Cv(e)}, `;if(t.project.hasSelectionId)l+=`${Qf}: ${o}[${rt(Qf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+gy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function BS(e,t,n,r){const i=MF(t)&&t.condition,s=r(t);if(i){const a=ht(i).map(u=>{const l=r(u);if(HXt(u)){const{param:c,empty:f}=u;return{test:RFe(e,{param:c,empty:f}),...l}}else return{test:CM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function pre(e,t="text"){const n=e.encoding[t];return BS(e,n,t,r=>GF(r,e.config))}function GF(e,t,n="datum"){if(e){if(Xf(e))return ci(e.value);if(un(e)){const{format:r,formatType:i}=_M(e);return Hne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function hFe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:wge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return BS(e,o,"tooltip",u=>{const l=GF(u,i,a);if(l)return l;if(u===null)return;let c=_r("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pt(c))return{value:c};if(mt(c))return Rt(c)?c:c.content==="encoding"?wge(n,s,i,t):{signal:a}})}}function pFe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Xb(f),h=tu(c)?c:{...c,type:e[d].type},p=h.title||Qne(h,i),m=ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ls(f)){const y=f==="x"?"x2":"y2",v=Dh(e[y]);if(Ao(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:T}=_M(h);g=_R(b,w,E,T,i),s[y]=!0}}if((ls(f)||f===Yc||f===ad)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=_M(h);g=Hne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=GF(h,i,o).signal),a.push({channel:f,key:m,value:g})}ere(e,(c,f)=>{Ze(c)?u(c,f):LF(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function wge(e,t,n,{reactiveGeom:r}={}){const i=pFe(e,t,n,{reactiveGeom:r}),s=fy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function tZt(e){const{markDef:t,config:n}=e,r=_r("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...nZt(e),...rZt(e)}}function nZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=_r("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in PYt?{}:{ariaRoleDescription:{value:t}}}function rZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return BS(e,s,"description",u=>GF(u,e.config));const o=_r("description",n,r);if(o!=null)return{description:ci(o)};if(r.aria===!1)return{};const a=pFe(t,i,r);if(!Fr(a))return{description:{signal:fy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function to(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=_r(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ci(u)));const l=i[e];return BS(t,l,o??e,c=>Vne({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function mFe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??_r("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=_r(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=_r(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ci(u)}:{},...l?{stroke:ci(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(P6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...to("color",e,{vgChannel:c,defaultValue:o?u:l}),...to("fill",e,{defaultValue:r.fill?u:void 0}),...to("stroke",e,{defaultValue:r.stroke?l:void 0})}}function iZt(e){const{encoding:t,mark:n}=e,r=t.order;return!e_(n)&&Xf(r)?BS(e,r,"zindex",i=>ci(i.value)):{}}function Ex({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Vne({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ci(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function da(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[np(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Ex({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=mre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ls(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:sZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function sZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(un(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return gM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Tv(n,r,{suffix:"end"},{offset:s})}return Une(e)}function mre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Xb(n),u=dy(n),l=_r(n,s,o,{vgChannel:u});if(l!==void 0)return FA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Hu.LOG,Hu.TIME,Hu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[nl(n)],mult:.5}}}}const oZt={left:"x",center:"xc",right:"x2"},aZt={top:"y",middle:"yc",bottom:"y2"};function gFe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return dy(e);const i=e==="x"?"align":"baseline",s=_r(i,t,n);let o;return Rt(s)?(Je(cKt(i)),o=void 0):o=s,e==="x"?oZt[o||(r==="top"?"left":"center")]:aZt[o||r]}function TM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?yFe(e,t,{defaultPos:n,defaultPos2:r}):da(e,t,{defaultPos:n})}function yFe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=np(e),a=nl(e),u=uZt(t,r,o),l=u[a]?gFe(e,i,s):dy(e);return{...da(e,t,{defaultPos:n,vgChannel:l}),...u}}function uZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Xb(n),l=nl(n),c=dy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Ex({channel:n,markDef:s,encoding:r,model:e}):Ex({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=nl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=lZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:yP(n,s)||yP(n,{[n]:pM(n,s,a.style),[l]:pM(l,s,a.style)})||yP(n,a[i])||yP(n,a.mark)||{[c]:mre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function lZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return un(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Tv(t,s,{suffix:"start"},{offset:u}):Une({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function yP(e,t){const n=nl(e),r=dy(e);if(t[r]!==void 0)return{[r]:FA(e,t[r])};if(t[e]!==void 0)return{[r]:FA(e,t[e])};if(t[n]){const i=t[n];if(gb(i))Je(iKt(n));else return{[n]:FA(e,i)}}}function my(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=np(t),a=nl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??_r("size",i,n,{vgChannel:a}),p=m6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(si(u.bin)||Ao(u.bin)||u.timeUnit&&!l)&&!(h&&!gb(h))&&!r[p]&&!fo(f)?dZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(un(u)&&fo(f)||m)&&!l?fZt(u,t,e):yFe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function cZt(e,t,n,r,i,s,o){if(gb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Lm("minBandSize",{type:o},r);return{signal:c?`max(${If(c)}, ${l})`:l}}else i.band!==1&&(Je(pKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Xy(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=us(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:xM(r.view,e)-2}}function fZt(e,t,n){var C,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=nl(t),f=np(t),d=m6e(t),h=n.scaleName(d),p=n.getScaleComponent(wne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=to("size",n,{vgChannel:c,defaultRef:ci(r.size)}):Je(vKt(r.type)));const y=!!g,v=h4e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:cZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&gb(v)&&!y?"top":"middle",w=gFe(t,r,s,b),E=w==="xc"||w==="yc",{offset:T,offsetType:S}=Ex({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=Une({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:mre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:gb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const N=dy(f),O=g[c],P=T?{...O,offset:T}:O;return{[w]:A,[N]:je(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function Ege(e,t,n,r,i,s,o){if(l6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=If(n),c=If(i),f=If(r),d=If(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function dZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=h4e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=ls(n)?_r("binSpacing",s,i)??0:0,m=np(n),g=dy(n),y=dy(m),v=Lm("minBandSize",s,i),{offset:b}=Ex({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Ex({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=xXt({fieldDef:e,scaleName:u}),T=Ege(n,p,c,h,b,v,E),S=Ege(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:gb(f)?(1-f.band)/2:.5,C=hy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(si(e.bin)||e.timeUnit){const N=e.timeUnit&&C!==.5;return{[y]:xge({fieldDef:e,scaleName:u,bandPosition:A,offset:S,useRectOffsetField:N}),[g]:xge({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:T,useRectOffsetField:N})}}else if(Ao(e.bin)){const N=Tv(e,u,{},{offset:S});if(Ze(t))return{[y]:N,[g]:Tv(t,u,{},{offset:T})};if(Qb(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Je($6e(m))}function xge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return gM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:qF,endSuffix:WF}:{}})}const hZt=new Set(["aria","width","height"]);function Kc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?mFe(e):{};return{...pZt(e.markDef,t),...Sge(e,"fill",n),...Sge(e,"stroke",r),...to("opacity",e),...to("fillOpacity",e),...to("strokeOpacity",e),...to("strokeWidth",e),...to("strokeDash",e),...iZt(e),...hFe(e),...pre(e,"href"),...tZt(e)}}function Sge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(_r("invalid",s,r)==="hide"&&n&&!e_(i)){const a=mZt(e,{invalid:!0,channels:AF});if(a)return{[t]:[{test:a,value:null},...ht(n)]}}return n?{[t]:n}:{}}function pZt(e,t){return NYt.reduce((n,r)=>(!hZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ci(e[r])),n),{})}function mZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&ql(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>zne(o,t)).join(` ${s} `)}}function gre(e){const{config:t,markDef:n}=e;if(_r("invalid",n,t)){const i=gZt(e,{channels:rp});if(i)return{defined:{signal:i}}}return{}}function gZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&ql(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>zne(o,t)).join(` ${s} `)}}function Tge(e,t){if(t!==void 0)return{[e]:ci(t)}}const rB="voronoi",vFe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(rB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(e_(s))return Je(LYt(s)),n;const o={name:e.getName(rB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...hFe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(rB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},bFe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!ore(e.bind),parse:(e,t,n)=>CFe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=vFe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ti(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:yb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+gy)[0],o=r+TR,a=i.items.map(l=>Ti(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},AM="_toggle",_Fe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+AM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+gy,r=t.name+AM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Cv(e)}}, `)+`${r} ? ${n} : null`}},yZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=pt(t.clear)?Vy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(bFe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ti(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+gy);r(i,"null"),_Fe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+AM),r(i,"false"))}return n}},wFe={defined:e=>{const t=e.resolve==="global"&&e.bind&&ore(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Qf;return t&&!n&&Je(UYt),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},CFe(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=Z9(t.bind)?t.bind.legend:"click",s=pt(i)?Vy(i,"view"):ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Z9(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ti(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+gy),o=r+TR,a=i.items.filter(d=>d.hasLegend).map(d=>Ti(`${r}_${Ti(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+AM),f=Z9(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function vZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of $o(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&wFe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const EFe="_translate_anchor",xFe="_translate_delta",bZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=sm.defined(t),s=r+EFe,{x:o,y:a}=t.project.hasChannel;let u=Vy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+iE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?VH(e,Ai):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?VH(e,mo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+xFe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Age(e,t,o,"width",n),a!==void 0&&Age(e,t,a,"height",n),n}};function Age(e,t,n,r,i){const s=t.name,o=s+EFe,a=s+xFe,u=n.channel,l=sm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ai?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const SFe="_zoom_anchor",TFe="_zoom_delta",_Zt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=sm.defined(t),s=r+TFe,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ai)),l=rt(e.scaleName(mo));let c=Vy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+iE,f))),n.push({name:r+SFe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Cge(e,t,o,"width",n),a!==void 0&&Cge(e,t,a,"height",n),n}};function Cge(e,t,n,r,i){const s=t.name,o=n.channel,a=sm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?VH(e,o):u.name,h=s+TFe,p=`${s}${SFe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const vb="_store",gy="_tuple",wZt="_modify",AFe="vlSelectionResolve",YF=[eZt,JJt,XJt,_Fe,bFe,sm,wFe,yZt,bZt,_Zt,vFe];function EZt(e){let t=e.parent;for(;t&&!Nl(t);)t=t.parent;return t}function Cv(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=EZt(e);if(r){const{facet:i}=r;for(const s of Ec)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function yre(e){return $o(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function CFe(e,t){(pt(t.select)||!t.select.on)&&delete e.events,(pt(t.select)||!t.select.clear)&&delete e.clear,(pt(t.select)||!t.select.toggle)&&delete e.toggle}function HH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...HH(e.object)),t.push(...HH(e.property))),t)}function IFe(e){return e.object.type==="MemberExpression"?IFe(e.object):e.object.name==="datum"}function kFe(e){const t=Lte(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&IFe(r)&&n.add(HH(r).slice(1).join("."))}),n}class US extends Or{clone(){return new US(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=CM(this.model,this.filter,this),this._dependentFields=kFe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function xZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ti(i.name),o=i.select,a=pt(o)?o:o.type,u=mt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:pt(u.on)?Vy(u.on,"scope"):ht(tn(u.on))},f=tn(i);for(const d of YF)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function RFe(e,t,n,r="datum"){const i=pt(t)?t:t.param,s=Ti(i),o=rt(s+vb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function NFe(e,t,n){const r=Ti(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Mc(s))}]`}function SZt(e,t){for(const[n,r]of fy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new qu(new US(t,e,{param:n}),i,_i.Lookup,e.component.data.outputNodeRefCounts)}}function CM(e,t,n){return LA(t,r=>pt(r)?r:tXt(r)?RFe(e,r,n):G6e(r))}function TZt(e,t){if(e)return je(e)&&!Pg(e)?e.map(n=>Qne(n,t)).join(", "):e}function iB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function M2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=iQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(SR(m)){const{condition:g,...y}=m,v=ht(g),b=tge[h];if(b){const{vgProp:w,part:E}=b,T=[...v.map(S=>{const{test:A,...C}=S;return{test:CM(null,A),...C}}),y];iB(c,E,w,T),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:T,...S}=E;return`${CM(null,T)} ? ${jme(S)} : `}).join("")+jme(y)};c[h]=w}}else if(Rt(m)){const g=tge[h];if(g){const{vgProp:y,part:v}=g;iB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Fr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:us(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=fb(a,"datum.label",c.encode.labels.update.text.signal)),iB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of x4e)e.hasAxisPart(p)||delete c.encode[p];Fr(c.encode)&&delete c.encode}const h=TZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:us(l,0)}}}}function PFe(e){const{axes:t}=e.component,n=[];for(const r of rp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function AZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>M2(i,"grid",t)),...r.map(i=>M2(i,"grid",t)),...n.map(i=>M2(i,"main",t)),...r.map(i=>M2(i,"main",t))].filter(i=>i)}function Ige(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${If(o[c])} : ${If(a[c])}`};return l}return t[i]})])}function CZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Q6e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${pR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Ige(a,r,e,n),vgAxisConfig:Ige(u,r,e,n),axisConfigStyle:IZt([...u,...a],r)}}function IZt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ht(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function qH(e,t,n,r={}){var s;const i=T6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const kge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??kZt(n,e),gridScale:({model:e,channel:t})=>RZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||OFe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||DFe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??PZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??DZt(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??$Zt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:MZt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$Fe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return C6e(i?[Zme(i)]:[],Ze(o)?[Zme(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>LZt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??FZt(n,t)};function kZt(e,t){return!fo(e)&&Ze(t)&&!si(t==null?void 0:t.bin)&&!Ao(t==null?void 0:t.bin)}function RZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function NZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:SI(s);{const{configValue:o}=qH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?SI(o):n===Ai&&Hn([Bne,jne],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function WH(e){return`(((${e.signal} % 360) + 360) % 360)`}function DFe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=WH(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=WH(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function OFe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=WH(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function PZt(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function DZt(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function OZt(e){return e==="x"?"bottom":"left"}function $Zt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!fo(t)&&t!=="log"){if(Ze(e)){if(si(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=co(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function MZt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=H6e(n);if(r)return{signal:r}}}}function $Fe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return I6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function LZt(e,t){const n=e.values;if(je(n))return E4e(t,n);if(Rt(n))return n}function FZt(e,t){return e==="rect"&&bM(t)?1:0}class xx extends Or{clone(){return new xx(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=kFe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(t_(r)&&d4e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${G6e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new xx(t,{calculate:u,as:Sx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function Sx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function KF(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function Tx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return us((t||{})[e],i[e],n.header[e])}function XF(e,t,n,r){const i={};for(const s of e){const o=Tx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const vre=["row","column"],bre=["header","footer"];function jZt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=XF(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=KF(t,a),l=SI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...LFe(l,u),...MFe(u,l,s),...FFe(r,i,t,AQt,B4e)}}}function MFe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=OFe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function LFe(e,t){const n=DFe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function BZt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of bre)if(n[i])for(const s of n[i]){const o=zZt(e,t,i,n,s);o!=null&&r.push(o)}return r}function UZt(e,t){const{sort:n}=e;return ph(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:Sx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function GH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=XF(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Hne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=KF(t,a);return{text:{signal:u?fb(fb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...LFe(s,c),...MFe(c,s,o),...FFe(n,e,t,CQt,U4e)}}function zZt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=XF(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=GH(o,t,a))}const u=Nl(e)&&!wR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:UZt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const VZt={column:{start:0,end:1},row:{start:1,end:0}};function HZt(e,t){return VZt[t][e]}function qZt(e,t){const n={};for(const r of Ec){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=XF(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=KF(r,o),u=HZt(s,a);u!==void 0&&(n[a]=u)}}return Fr(n)?void 0:n}function FFe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Tx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function _re(e){return[...vP(e,"width"),...vP(e,"height"),...vP(e,"childWidth"),...vP(e,"childHeight")]}function vP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(fo(o)&&Xy(a)){const u=e.scaleName(n);return Nl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Rge(u,a)]:[Rge(u,a),{name:i,update:jFe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=jH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Rge(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function jFe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=us(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${If(o)}, ${If(s)}) * ${e}_step`}function BFe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function UFe(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...BS(t,i,r,s=>ci(s.value))}},{})}function zFe(e,t){if(Nl(t))return e==="theta"?"independent":"shared";if(HS(t))return"shared";if(Cre(t))return ls(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function wre(e,t){const n=e.scale[t],r=ls(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(xKt(t)),"independent"):e[r][t]||"shared"}const WZt={...RQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},VFe=Ye(WZt);class GZt extends lg{}const Nge={symbols:YZt,gradient:KZt,labels:XZt,entries:QZt};function YZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...OYt({},n,DXt),...mFe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?HFe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===el)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ci(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ci(m??1));else if(je(f.fill)){const g=YH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ci(g))}}if(f.stroke){if(r==="stroke"||!c&&r===el)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=us(YH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==og){const g=Ze(t)&&WFe(n,i,t);g?f.opacity=[{test:g,...ci(m??1)},ci(u.legend.unselectedOpacity)]:m&&(f.opacity=ci(m))}return f={...f,...e},Fr(f)?void 0:f}function KZt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?HFe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ci(l)),a={...a,...e},Fr(a)?void 0:a}function XZt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?WFe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;mb(c)?f=Rf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Rf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Rf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Fr(d)?void 0:d}function QZt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function HFe(e){return qFe(e,(t,n)=>Math.max(t,n.value))}function YH(e){return qFe(e,(t,n)=>us(t,n.value))}function qFe(e,t){if(WXt(e))return ht(e.condition).reduce(t,e.value);if(Xf(e))return e.value}function WFe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ti(s)+vb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Pge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return r4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return i4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??ien(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??sen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??ZZt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>rE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(nE(n)&&kf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>JZt(t,e)};function JZt(e,t){const n=e.values;if(je(n))return E4e(t,n);if(Rt(n))return n}function ZZt(e,t,n,r){if(t!=="shape"){const i=YH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function een(e){const{legend:t}=e;return us(t.type,ten(e))}function ten({channel:e,timeUnit:t,scaleType:n}){if(nE(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(kf(n))return"gradient"}return"symbol"}function nen({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ren(n,t)}function ren(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function ien({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(kf(i))return n==="horizontal"?r==="top"||r==="bottom"?Dge(t,"width",o,s):o:Dge(t,"height",u,a)}function Dge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function sen(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function GFe(e){const t=qi(e)?oen(e):cen(e);return e.component.legends=t,t}function oen(e){const{encoding:t}=e,n={};for(const r of[el,...V4e]){const i=Ls(t[r]);!i||!e.getScaleComponent(r)||r===tl&&Ze(i)&&i.type===jS||(n[r]=len(e,r))}return n}function aen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function uen(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function len(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new GZt({},aen(e,t));vZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ls(i[t]),f=Ze(c)?(w=co(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=een({legend:n,channel:t,timeUnit:f,scaleType:l}),p=nen({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of VFe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in Pge?Pge[E](m):n[E];if(T!==void 0){const S=uen(T,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,T,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=UFe(g[E]??{},e),S=E in Nge?Nge[E](T,b):T;S!==void 0&&!Fr(S)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${Ti(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Fr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function cen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){GFe(r);for(const i of Ye(r.component.legends))n.legend[i]=wre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=YFe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function YFe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of VFe){const c=py(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return fen(f,d);case"title":return k6e(f,d);case"type":return i=!0,cl("symbol")}return HF(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&hM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&hM(e.explicit,["encode","gradient"])),e}function fen(e,t){return t.value==="circle"?t:e}function den(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function KFe(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=jr(s.get("domains"));if(n[o])for(const a of n[o])YFe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return $o(n).flat().map(i=>hen(i,e.config)).filter(i=>i!==void 0)}function hen(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of V4e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=fb(r,"datum.label",s.encode.labels.update.text.signal)),den(s,"labels","text",{signal:l})}return s}}function pen(e){return HS(e)||Cre(e)?men(e):XFe(e)}function men(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),XFe(e))}function XFe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const gen=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class QFe extends lg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function JFe(e){e.component.projection=qi(e)?yen(e):_en(e)}function yen(e){if(e.hasProjection){const t=Au(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ven(e):void 0,s=new QFe(e.projectionName(!0),{...Au(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ven(e){const t=[],{encoding:n}=e;for(const r of[[ld,ud],[Lc,cd]])(Ls(n[r[0]])||Ls(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(tl)&&e.typedFieldDef(tl).type===jS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(_i.Main)),t}function ben(e,t){const n=pne(gen,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&Al(e.get(i),t.get(i))));if(Al(e.size,t.size)){if(n)return e;if(Al(e.explicit,{}))return t;if(Al(t.explicit,{}))return e}return null}function _en(e){if(e.children.length===0)return;let t;for(const r of e.children)JFe(r);const n=pne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=ben(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new QFe(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function wen(e,t,n,r){if(xR(t,n)){const i=qi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:_R(s,o,i.format,i.formatType,r)}}return{}}function ZFe(e,t){return`${w6e(e)}_${t}`}function Een(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Ere(e,t,n){const r=FF(n,void 0)??{},i=ZFe(r,t);return e.getName(`${i}_bins`)}function xen(e){return"as"in e}function Oge(e,t,n){let r,i;xen(e)?r=pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...FF(t,void 0)},o=ZFe(s,e.field),{signal:a,extentSignal:u}=Een(n,o);if(CF(s.extent)){const c=s.extent;i=NFe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class gh extends Or{clone(){return new gh(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(tu(s)&&si(s.bin)){const{key:a,binComponent:u}=Oge(s,s.bin,n);i[a]={...u,...i[a],...wen(n,s,o,n.config)}}return i},{});return Fr(r)?null:new gh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Oge(n,n.bin,r);return new gh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Zd([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set($o(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set($o(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return $o(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Mc(t.field),as:r,signal:t.signal,...CF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Mc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Sen(e,t,n,r){var s;const i=qi(r)?r.encoding[np(t)]:void 0;if(tu(n)&&qi(r)&&p4e(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=hy({fieldDef:n,markDef:a,config:u});TI(o)&&l!==.5&&ls(t)&&(e.add(at(n,{suffix:qF})),e.add(at(n,{suffix:WF}))),n.bin&&xR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(f6e(t)){const o=c6e(t);e.add(r.getName(o))}else e.add(at(n));return t_(n)&&pXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Ten(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class jf extends Or{clone(){return new jf(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Mm(u)||Ky(u)){const c=Mm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);ag(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Sen(s,a,o,n)}),s.size+Ye(i).length===0)?null:new jf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new jf(t,r,i)}merge(t){return n6e(this.dimensions,t.dimensions)?(Ten(this.measures,t.measures),!0):(jKt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Mc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Mc),ops:t,fields:n,as:r}}}class zS extends Or{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ec){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...si(a)?[at(o,{binSuffix:"end"})]:[]],...ph(u)?{sortField:u}:je(u)?{sortIndexField:Sx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ec)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ec)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ec)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of rp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(fo(i)&&Xy(s)){const o=QF(this.childModel,n),a=Are(o);a?t[n]=a:Je(Cne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=OF,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of vre){for(const c of bre){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[im,rm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function $ge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Aen(e,t){const n=yne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=$ge(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=$ge(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(YYt(t)),null}function Cen(e){const t={};return WD(e.filter,n=>{if(W6e(n)){let r=null;Nne(n)?r=vl(n.equal):Dne(n)?r=vl(n.lte):Pne(n)?r=vl(n.lt):One(n)?r=vl(n.gt):$ne(n)?r=vl(n.gte):Mne(n)?r=n.range[0]:Lne(n)&&(r=(n.oneOf??n.in)[0]),r&&(Jb(r)?t[n.field]="date":lr(r)?t[n.field]="number":pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Ien(e){const t={};function n(r){_x(r)?t[r.field]="date":r.type==="quantitative"&&TYt(r.aggregate)?t[r.field]="number":hx(r.field)>1?r.field in t||(t[r.field]="flatten"):t_(r)&&ph(r.sort)&&hx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((qi(e)||Nl(e))&&e.forEachFieldDef((r,i)=>{if(tu(r))n(r);else{const s=Xb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),qi(e)){const{mark:r,markDef:i,encoding:s}=e;if(e_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function ken(e){const t={};if(qi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&hx(i.field)>1&&(t[i.field]="flatten")}return t}class ha extends Or{clone(){return new ha(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!I0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(qme(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(qme(a,n[a],u)))}const s=new lg(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ha(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];hx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?hx(n)>1:!0).map(n=>{const r=Aen(n,this._parse[n]);return r?{type:"formula",expr:r,as:LS(n)}:null}).filter(n=>n!==null)}}class yy extends Or{clone(){return new yy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Qf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Qf}}}class AR extends Or{clone(){return new AR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class CR extends Or{clone(){return new CR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class bb extends Or{constructor(t){super(null),t??(t={name:"source"});let n;if(I0(t)||(n=t.format?{...Vu(t.format,["parse"])}:{}),AI(t))this._data={values:t.values};else if(wx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else aFe(t)?this._data={values:[{type:"Sphere"}]}:(sFe(t)||I0(t))&&(this._data={});this._generator=I0(t),t.name&&(this._name=t.name),n&&!Fr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Mge=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ren=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},L2;function xre(e){return e instanceof bb||e instanceof AR||e instanceof CR}class Sre{constructor(){L2.set(this,void 0),Mge(this,L2,!1,"f")}setModified(){Mge(this,L2,!0,"f")}get modifiedFlag(){return Ren(this,L2,"f")}}L2=new WeakMap;class n_ extends Sre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Tre extends Sre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Nen extends Tre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Pen extends Tre{constructor(t){super(),this.requiresSelectionId=t&&yre(t)}run(t){t instanceof yy&&(this.requiresSelectionId&&(xre(t.parent)||t.parent instanceof jf||t.parent instanceof ha)||(this.setModified(),t.remove()))}}class Den extends Sre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof mh&&(r=t.producedFields(),mne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Oen extends Tre{constructor(){super()}run(t){t instanceof qu&&!t.isRequired()&&(this.setModified(),t.remove())}}class $en extends n_{run(t){if(!xre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ha)if(t instanceof ha)this.setModified(),t.merge(n);else{if(gne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Men extends n_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ha);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Fr(i)){this.setModified();const o=new ha(t,i);for(const a of n){if(a instanceof ha)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ha&&Ye(a.parse).length===0&&a.remove()}}}}}class Len extends n_{run(t){t instanceof qu||t.numChildren()>0||t instanceof zS||t instanceof bb||(this.setModified(),t.remove())}}class Fen extends n_{run(t){const n=t.children.filter(i=>i instanceof mh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class jen extends n_{run(t){const n=t.children.filter(i=>i instanceof jf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Ben extends n_{constructor(t){super(),this.model=t}run(t){const n=!(xre(t)||t instanceof US||t instanceof ha||t instanceof yy),r=[],i=[];for(const s of t.children)s instanceof gh&&(n&&!gne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof gh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Uen extends n_{run(t){const n=[...t.children];if(!cb(n,o=>o instanceof qu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof qu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof qu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class r_ extends Or{clone(){return new r_(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Zd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function zen(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function Ven(e){return je(e)&&e.every(t=>pt(t))&&e.length>1}class om extends Or{clone(){return new om(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(us(f.order,"ascending"));const l={field:a,order:u};let c;return Ven(s)?c=s:pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new om(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Dh(p)}).filter(h=>!!h),c=zen(n),f=n.encoding.order;let d;if(je(f)||Ze(f))d=A6e(f);else{const h=m4e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new om(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class VS extends Or{clone(){return new VS(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Zd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Tne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Hen(e){function t(n){if(!(n instanceof zS)){const r=n.clone();if(r instanceof qu){const i=XH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof jf||r instanceof om||r instanceof VS||r instanceof r_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function KH(e){if(e instanceof zS)if(e.numChildren()===1&&!(e.children[0]instanceof qu)){const t=e.children[0];(t instanceof jf||t instanceof om||t instanceof VS||t instanceof r_)&&t.addDimensions(e.fields),t.swapWithParent(),KH(e)}else{const t=e.model.component.data.main;e5e(t);const n=Hen(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(KH)}function e5e(e){if(e instanceof qu&&e.type===_i.Main&&e.numChildren()===1){const t=e.children[0];t instanceof zS||(t.swapWithParent(),e5e(e))}}const XH="scale_",bP=5;function QH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!QH(t.children))return!1}return!0}function ef(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Lge(e,t,n){let r=e.sources,i=!1;return i=ef(new Oen,r)||i,i=ef(new Pen(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=ef(new Len,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=ef(new $en,r)||i,i=ef(new Ben(t),r)||i,i=ef(new Den,r)||i,i=ef(new Men,r)||i,i=ef(new jen,r)||i,i=ef(new Fen,r)||i,i=ef(new Nen,r)||i,i=ef(new Uen,r)||i),e.sources=r,i}function qen(e,t){QH(e.sources);let n=0,r=0;for(let i=0;i<bP&&Lge(e,t,!0);i++)n++;e.sources.map(KH);for(let i=0;i<bP&&Lge(e,t,!1);i++)r++;QH(e.sources),Math.max(n,r)===bP&&Je(`Maximum optimization runs(${bP}) reached.`)}class Zs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Zs(()=>t(n))}}function t5e(e){qi(e)?Wen(e):Gen(e)}function Wen(e){const t=e.component.scales;for(const n of Ye(t)){const r=Ken(e,n);if(t[n].setWithExplicit("domains",r),Qen(e,n),e.component.data.isFaceted){let s=e;for(;!Nl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Gp(a)&&(a.data=XH+a.data.replace(XH,""))}}}function Gen(e){for(const n of e.children)t5e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=py(r,o.getWithExplicit("domains"),"domains","scale",JH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(HYt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Yen(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Fge(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Fge(t,n);if(i)return"unaggregated"}return e}function Ken(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Yen(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ls(r.x2)?Ls(r.x)?py(xg(n,i,e,"x"),xg(n,i,e,"x2"),"domain","scale",JH):xg(n,i,e,"x2"):t==="y"&&Ls(r.y2)?Ls(r.y)?py(xg(n,i,e,"y"),xg(n,i,e,"y2"),"domain","scale",JH):xg(n,i,e,"y2"):xg(n,i,e,t)}function Xen(e,t,n){return e.map(r=>({signal:`{data: ${jF(r,{timeUnit:n,type:t})}}`}))}function sB(e,t,n){var i;const r=(i=co(n))==null?void 0:i.unit;return t==="temporal"||r?Xen(e,t,r):[e]}function xg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ls(i[r]),{type:c}=l,f=l.timeUnit;if(hXt(t)){const p=xg(e,void 0,n,r),m=sB(t.unionWith,c,f);return Rd([...m,...p.value])}else{if(Rt(t))return Rd([t]);if(t&&t!=="unaggregated"&&!Z6e(t))return Rd(sB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return cl([[0,1]]);const p=n.requestDataName(_i.Main);return cl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=ag(r)&&Ze(l)?Jen(n,r,e):void 0;if(ip(l)){const p=sB([l.datum],c,f);return cl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(_i.Main),{field:m}=l;return cl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(si(h.bin)){if(fo(e))return cl(e==="bin-ordinal"?[]:[{data:xI(d)?n.requestDataName(_i.Main):n.requestDataName(_i.Raw),field:n.vgField(r,xR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(si(p)){const m=Ere(n,h.field,p);return cl([new Zs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return cl([{data:n.requestDataName(_i.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[np(r)];if(p4e(h,p,s,a)){const m=n.requestDataName(_i.Main),g=hy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=TI(o)&&g!==.5&&ls(r);return cl([{data:m,field:n.vgField(r,y?{suffix:qF}:{})},{data:m,field:n.vgField(r,{suffix:y?WF:"end"})}])}}return cl(d?[{data:xI(d)?n.requestDataName(_i.Main):n.requestDataName(_i.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(_i.Main),field:n.vgField(r)}])}function oB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":OF),...r?{field:Mc(r)}:{},...i?{order:i}:{}}}function Qen(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=Z6e(r)&&r,o=Qb(i)&&CF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Jen(e,t,n){if(!fo(n))return;const r=e.fieldDef(t),i=r.sort;if(d4e(i))return{op:"min",field:Sx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(ph(i)){const a=s&&!o.has(i.field);return oB(i,a)}else if(f4e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Mm(c)||Ky(c))return oB({field:at(l),order:u},d);if(Tne(c)||!c)return oB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function Fge(e,t){const{aggregate:n,type:r}=e;return n?pt(n)&&!CYt.has(n)?{valid:!1,reason:gKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:yKt(e)}:{valid:!0}:{valid:!1,reason:mKt(e)}}function JH(e,t,n,r){return e.explicit&&t.explicit&&Je(EKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Zen(e){const t=Zd(e.map(o=>{if(Gp(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=Zd(e.map(o=>{if(Gp(o)){const a=o.sort;return a!==void 0&&!xI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Gp(o)&&n.length>0){let a=n[0];if(n.length>1){Je(Gme);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Zd(n.map(o=>xI(o)||!("op"in o)||pt(o.op)&&o.op in xYt?o:(Je(SKt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Je(Gme),i=!0);const s=Zd(e.map(o=>Gp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Are(e){if(Gp(e)&&pt(e.field))return e.field;if(IYt(e)){let t;for(const n of e.fields)if(Gp(n)&&pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(TKt),t}return Je(AKt),t}else if(kYt(e)){Je(CKt);const t=e.fields[0];return pt(t)?t:void 0}}function QF(e,t){const r=e.component.scales[t].get("domains").map(i=>(Gp(i)&&(i.data=e.lookupDataSource(i.data)),i));return Zen(r)}function n5e(e){return HS(e)||Cre(e)?e.children.reduce((t,n)=>t.concat(n5e(n)),jge(e)):jge(e)}function jge(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=etn(i.range,s,n,e),h=QF(e,n),p=a?YJt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function etn(e,t,n,r){if(ls(n)){if(Xy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&Gp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class r5e extends lg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:cb(this.get("domains"),t=>je(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const ttn=["range","scheme"];function ntn(e){const t=e.component.scales;for(const n of AF){const r=t[n];if(!r)continue;const i=rtn(n,e);r.setWithExplicit("range",i)}}function Bge(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=nl(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Zs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(si(r)){const a=Ere(e,i,r);return new Zs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function rtn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of ttn)if(n[f]!==void 0){const d=MH(s,f),h=e4e(e,f);if(!d)Je(D6e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(ls(e))return Rd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Zs.fromName(y,g)}return m}))}else if(mt(p))return Rd({data:t.requestDataName(_i.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Rd(p)}case"scheme":return Rd(itn(n[f]))}}const o=e===Ai||e==="xOffset"?"width":"height",a=r[o];if(Oh(a)){if(ls(e))if(fo(s)){const f=s5e(a,t,e);if(f)return Rd({step:f})}else Je(O6e(o));else if(yR(e)){const f=e===Hy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=o5e(a,s);if(p)return Rd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=stn(e,t);return(u!==void 0||l!==void 0)&&MH(s,"rangeMin")&&je(c)&&c.length===2?Rd([u??c[0],l??c[1]]):cl(c)}function itn(e){return dXt(e)?{scheme:e.name,...Vu(e,["name"])}:{scheme:e}}function i5e(e,t,n,{center:r}={}){const i=nl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===mo&&ql(n)?r?[Zs.fromName(a=>`${o(a)}/2`,s),Zs.fromName(a=>`-${o(a)}/2`,s)]:[Zs.fromName(o,s),0]:r?[Zs.fromName(a=>`-${o(a)}/2`,s),Zs.fromName(a=>`${o(a)}/2`,s)]:[0,Zs.fromName(o,s)]}function stn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ls(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ai:case mo:{if(Hn(["point","band"],u)){const f=a5e(e,n,r.view);if(Oh(f))return{step:s5e(f,t,e)}}return i5e(e,t,u)}case Hy:case FS:return otn(e,t,u);case sg:{const f=t.component.scales[e].get("zero"),d=u5e(i,f,r),h=ltn(i,n,t,r);return yx(u)?utn(d,h,atn(u,r,l,e)):[d,h]}case Yc:return[0,Math.PI*2];case Kb:return[0,360];case ad:return[0,new Zs(()=>{const f=t.getSignalName(Nl(t.parent)?"child_width":"width"),d=t.getSignalName(Nl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Gy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Yy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case tl:return"symbol";case el:case ep:case tp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case og:case qy:case Wy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function s5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=wne(n),o=r[s];if(q4e({step:e,offsetIsDiscrete:un(o)&&Y6e(o.type)})==="offset"&&A4e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${DYt(f)})`}}else return e.step}function o5e(e,t){if(q4e({step:e,offsetIsDiscrete:fo(t)})==="offset")return{step:e.step}}function otn(e,t,n){const r=e===Hy?"x":"y",i=t.getScaleComponent(r);if(!i)return i5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=a5e(r,t.size,t.config.view);if(Oh(l)){const c=o5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=H6e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=hy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return e6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function a5e(e,t,n){const r=e===Ai?"width":"height",i=t[r];return i||SM(n,r)}function atn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Je(MKt(r)),3)}}function utn(e,t,n){const r=()=>{const i=If(t),s=If(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Zs(r):{signal:r()}}function u5e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${u5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(IF("size",e))}const Uge=.95;function ltn(e,t,n,r){const i={x:Bge(n,"x"),y:Bge(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=zge(t,i,r.view);return lr(s)?s-1:new Zs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=zge(t,i,r.view);return lr(s)?Math.pow(Uge*s,2):new Zs(()=>`pow(${Uge} * ${s.signal}, 2)`)}}throw new Error(IF("size",e))}function zge(e,t,n){const r=Oh(e.width)?e.width.step:xM(n,"width"),i=Oh(e.height)?e.height.step:xM(n,"height");return t.x||t.y?new Zs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function l5e(e,t){qi(e)?ctn(e,t):f5e(e,t)}function ctn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ls(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=MH(h,t),y=e4e(a,t);if(d!==void 0&&(g?y&&Je(y):Je(D6e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Jb(u[t])||b==="temporal"||v?l.set(t,{signal:jF(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Vge?Vge[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:C4e(i,a),hasSecondaryRangeChannel:!!i[np(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Vge={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?ftn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>dtn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>htn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>ptn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>mtn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>gtn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return ytn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>vtn(e,t,n,r,i,s.scale,o)};function c5e(e){qi(e)?ntn(e):f5e(e,"range")}function f5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?c5e(r):l5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=py(i,a,t,"scale",iFe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function ftn(e,t){const n=t.bin;if(si(n)){const r=Ere(e,t.field,n);return new Zs(()=>e.getSignalName(r))}else if(Ao(n)&&Qb(n)&&n.step!==void 0)return{step:n.step}}function dtn(e,t){if(Hn([el,ep,tp],e)&&t!=="nominal")return"hcl"}function htn(e,t,n,r,i,s){var o;if(!((o=Dh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Hn([Hu.TIME,Hu.UTC],e)))return ls(t)?!0:void 0}function ptn(e,t,n,r,i,s){if(ls(e)){if(kf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Hu.POINT)return n.pointPadding}}function mtn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:us(o,n==="bar"?a:u)}else if(yR(t)&&r===Hu.BAND)return i.offsetBandPaddingInner}}function gtn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Hu.BAND)return us(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(yR(t)){if(n===Hu.POINT)return .5;if(n===Hu.BAND)return i.offsetBandPaddingOuter}}}function ytn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ql(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ql(e)&&t==="descending")return!0}function vtn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&ql(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!yx(i))return!0;if(!(Ze(t)&&t.bin)&&Hn([...rp,...mYt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function btn(e,t,n,r,i=!1){const s=_tn(t,n,r,i),{type:o}=e;return ag(t)?o!==void 0?bXt(t,o)?Ze(n)&&!vXt(o,n.type)?(Je(_Kt(o,s)),s):o:(Je(bKt(t,o,s)),s):s:null}function _tn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(nE(e)||Q9(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(J9(e,"ordinal")),"ordinal";if(ls(e)||yR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Sne)return"band";const s=n[nl(e)];return gb(s)||bx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return nE(e)?"time":Q9(e)==="discrete"?(Je(J9(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&co(t.timeUnit).utc?"utc":"time";case"quantitative":return nE(e)?Ze(t)&&si(t.bin)?"bin-ordinal":"linear":Q9(e)==="discrete"?(Je(J9(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(N6e(t.type))}function wtn(e,{ignoreRange:t}={}){d5e(e),t5e(e);for(const n of yXt)l5e(e,n);t||c5e(e)}function d5e(e){qi(e)?e.component.scales=Etn(e):e.component.scales=Stn(e)}function Etn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of AF){const o=Ls(t[s]);if(o&&n===u4e&&s===tl&&o.type===jS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=C4e(t,s),l=btn(a,s,o,r,u);i[s]=new r5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const xtn=iFe((e,t)=>Kme(e)-Kme(t));function Stn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){d5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=zFe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?aXt(a.value,u.value)?r[o]=py(a,u,"type","scale",xtn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new r5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class aB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function qi(e){return(e==null?void 0:e.type)==="unit"}function Nl(e){return(e==null?void 0:e.type)==="facet"}function Cre(e){return(e==null?void 0:e.type)==="concat"}function HS(e){return(e==null?void 0:e.type)==="layer"}class Ire{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Au(a),this.name=t.name??i,this.title=Pg(t.title)?{text:t.title}:t.title?Au(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new aB,this.projectionNameMap=r?r.projectionNameMap:new aB,this.signalNameMap=r?r.signalNameMap:new aB,this.data=t.data,this.description=t.description,this.transforms=NJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:$Qt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:$F(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new lg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){wtn(this)}parseProjection(){JFe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){GFe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=ci(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ci(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Fr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=qZt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ec)t[r].title&&n.push(jZt(this,r));for(const r of vre)n=n.concat(BZt(this,r));return n}assembleAxes(){return AZt(this.component.axes,this.config)}assembleLegends(){return KFe(this)}assembleProjections(){return pen(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...E6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Fr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Nl(this.parent)?n5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ti((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(_i[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Nl(this.parent)){const n=BFe(t),r=TF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(fo(s)&&Xy(o)){const a=i.get("name"),u=QF(this,r),l=Are(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:jFe(a,i,c)}}else return Je(Cne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(h6e(t)&&ag(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(FYt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class h5e extends Ire{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return cQt(this.getMapping(),(r,i,s)=>{const o=Dh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){ere(this.getMapping(),(r,i)=>{const s=Dh(r);s&&t(s,i)},n)}}class JF extends Or{clone(){return new JF(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class ZF extends Or{clone(){return new ZF(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class CI extends Or{clone(){return new CI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(_r("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=ag(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");ql(d)&&l.aggregate!=="count"&&!e_(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new CI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class e5 extends Or{clone(){return new e5(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class t5 extends Or{clone(){return new t5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class sE extends Or{clone(){return new sE(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ld,ud],[Lc,cd]]){const s=i.map(o=>{const a=Ls(n.encoding[o]);return Ze(a)?a.field:ip(a)?{expr:`${a.datum}`}:Xf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new sE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(tl)){const i=n.typedFieldDef(tl);i.type===jS&&(t=new sE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class II extends Or{clone(){return new II(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ld,ud],[Lc,cd]]){const i=r.map(o=>{const a=Ls(n.encoding[o]);return Ze(a)?a.field:ip(a)?{expr:`${a.datum}`}:Xf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Lc?"2":"";(i[0]||i[1])&&(t=new II(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Iv extends Or{clone(){return new Iv(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Iv(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=k4e(n.mark,r);return new Iv(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:dJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class n5 extends Or{clone(){return new n5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class kI extends Or{clone(){return new kI(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(hJt(o)){let u=g5e(o.data,s);u||(u=new bb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new qu(u,l,_i.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(pJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ti(u),u)}catch{throw new Error(zYt(u))}if(a=l.materialized,!a)throw new Error(VYt(u))}return new kI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ht(this.transform.as)}:{}};else{let n=this.transform.as;pt(n)||(Je(QYt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class r5 extends Or{clone(){return new r5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class i5 extends Or{clone(){return new i5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class s5 extends Or{clone(){return new s5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Zd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class o5 extends Or{clone(){return new o5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function p5e(e){let t=0;function n(r,i){if(r instanceof bb&&!r.isGenerator&&!wx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ha&&(r.parent instanceof bb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof zS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof AR||r instanceof CR||r instanceof CI||r instanceof US||r instanceof xx||r instanceof II||r instanceof jf||r instanceof kI||r instanceof VS||r instanceof r_||r instanceof t5||r instanceof e5||r instanceof JF||r instanceof n5||r instanceof r5||r instanceof i5||r instanceof yy||r instanceof o5||r instanceof s5||r instanceof ZF)&&i.transform.push(r.assemble()),(r instanceof gh||r instanceof mh||r instanceof Iv||r instanceof om||r instanceof sE)&&i.transform.push(...r.assemble()),r instanceof qu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof qu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof qu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Ttn(e){const t=[],n=p5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Atn(e,t){const n=[],r=p5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Ctn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function Itn(e){for(const t of Ec)ktn(e,t);Hge(e,"x"),Hge(e,"y")}function ktn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Tx("title",null,r,t);let l=rE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Tx("labelOrient",a.header,r,t),f=a.header!==null?us((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[m5e(e,t,f)]}}}function m5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Hge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=wre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Ctn(a.get("orient"));o[u]??(o[u]=[m5e(e,s,!1)]);const l=M2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Rtn(e){kre(e),IM(e,"width"),IM(e,"height")}function Ntn(e){kre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";IM(e,t),IM(e,n)}function kre(e){for(const t of e.children)t.parseLayoutSize()}function IM(e,t){const n=BFe(t),r=TF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??zFe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=py(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Ptn(e){const{size:t,component:n}=e;for(const r of rp){const i=nl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Oh(s)?"step":s,!0)}else{const s=Dtn(e,i);n.layoutSize.set(i,s,!1)}}}function Dtn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(fo(s)){const a=SM(r.view,t);return Xy(o)||Oh(a)?"step":a}else return jH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return jH(r.view,t);{const s=SM(r.view,t);return Oh(s)?s.step:s}}}function ZH(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class jA extends h5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Ore(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!wR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![rm,im].includes(i)){Je(IF(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(OH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Jne(t,n);return r.header?r.header=Au(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=a5(this),this.child.parseData()}parseLayoutSize(){kre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Itn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ec)for(const r of bre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Tx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=KF(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof jA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof jA?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof jA){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of rp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(fo(o)&&Xy(a)){const u=QF(this.child,i),l=Are(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(Cne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Ec){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(si(d)&&u.push(at(f,{binSuffix:"end"})),ph(h)){const{field:p,op:m=OF}=h,g=ZH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=Sx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?ph(r.sort)?[ZH(r,r.sort,{expr:"datum"})]:je(r.sort)?[Sx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(ph(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return GH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of vre)if(t[s]){const o=Tx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return GH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Ttn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ec.map(u=>this.facetSortFields(u)).flat(),order:Ec.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(HJt(this,[]))}]}getMapping(){return this.facet}}function Otn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(ph(s.sort)){const{field:o,op:a=OF}=s.sort;e=i=new r_(e,{joinaggregate:[{op:a,field:o,as:ZH(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function g5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(AI(e)&&AI(a)){if(Al(e.values,a.values))return o}else if(wx(e)&&wx(a)){if(e.url===a.url)return o}else if(sFe(e)&&e.name===o.dataName)return o}}return null}function $tn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new bb({values:[]});return t.push(r),r}const n=g5e(e.data,t);if(n)return I0(e.data)||(n.data.format=t6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new bb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Mtn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(SJt(i))o=e=new xx(e,i),s="derived";else if(fre(i)){const a=Cen(i);o=e=ha.makeWithAncestors(e,{},a,n)??e,e=new US(e,t,i.filter)}else if(eFe(i))o=e=gh.makeFromTransform(e,i,t),s="number";else if(AJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ha(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=mh.makeFromTransform(e,i);else if(CJt(i))o=e=jf.makeFromTransform(e,i),s="number",yre(t)&&(e=new yy(e));else if(Z4e(i))o=e=kI.make(e,t,i,r++),s="derived";else if(wJt(i))o=e=new VS(e,i),s="number";else if(EJt(i))o=e=new r_(e,i),s="number";else if(IJt(i))o=e=om.makeFromTransform(e,i),s="derived";else if(kJt(i))o=e=new t5(e,i),s="derived";else if(RJt(i))o=e=new ZF(e,i),s="derived";else if(xJt(i))o=e=new e5(e,i),s="derived";else if(mJt(i))o=e=new s5(e,i),s="derived";else if(_Jt(i))e=new o5(e,i);else if(TJt(i))o=e=Iv.makeFromTransform(e,i),s="derived";else if(gJt(i))o=e=new JF(e,i),s="derived";else if(yJt(i))o=e=new r5(e,i),s="derived";else if(vJt(i))o=e=new i5(e,i),s="derived";else if(bJt(i))o=e=new n5(e,i),s="derived";else{Je(XYt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function a5(e){var h;let t=$tn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(I0(i)||wx(i)||AI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new zJt;I0(i)?(oFe(i)?t=new CR(t,i.sequence):dre(i)&&(t=new AR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ha.makeExplicit(t,e,o)??t,t=new yy(t);const a=e.parent&&HS(e.parent);(qi(e)||Nl(e))&&a&&(t=gh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Mtn(t,e,o));const u=ken(e),l=Ien(e);t=ha.makeWithAncestors(t,{},{...u,...l},o)??t,qi(e)&&(t=sE.parseAll(t,e),t=II.parseAll(t,e)),(qi(e)||Nl(e))&&(a||(t=gh.makeFromEncoding(t,e)??t),t=mh.makeFromEncoding(t,e)??t,t=xx.parseAllForSortIndex(t,e));const c=t=qge(_i.Raw,e,t);if(qi(e)){const p=jf.makeFromEncoding(t,e);p&&(t=p,yre(e)&&(t=new yy(t))),t=Iv.makeFromEncoding(t,e)??t,t=om.makeFromEncoding(t,e)??t}qi(e)&&(t=CI.make(t,e)??t);const f=t=qge(_i.Main,e,t);qi(e)&&SZt(e,f);let d=null;if(Nl(e)){const p=e.getName("facet");t=Otn(t,e.facet)??t,d=new zS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function qge(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new qu(n,s,e,i);return r[s]=o,o}class Ltn extends Ire{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(GYt),this.children=this.getChildren(t).map((l,c)=>Ore(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=a5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return zF(t)?t.vconcat:lre(t)?t.hconcat:t.concat}parseLayoutSize(){Ntn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=_re(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Ftn(e){return e===!1||e===null}const jtn={disable:1,gridScale:1,scale:1,...S4e,labelExpr:1,encode:1},y5e=Ye(jtn);class Rre extends lg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Rre(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Ftn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Btn(e,t,n){const{encoding:r,config:i}=e,s=Ls(r[t])??Ls(r[np(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(mb(u))return{text:Rf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(vx(s)==="quantitative"){if(bx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Rf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Rf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(vx(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Rf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Utn(e){return rp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Ytn(n,e)]),t),{})}const ztn={bottom:"top",top:"bottom",left:"right",right:"left"};function Vtn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=wre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Htn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of rp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=ztn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Htn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=qtn(i,s)}}}else return t.map(n=>n.clone());return e}function qtn(e,t){for(const n of y5e){const r=py(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return k6e(i,s);case"gridScale":return{explicit:i.explicit,value:us(i.value,s.value)}}return HF(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Wtn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:SI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$Fe(r,i))return!0}return e===n[t]}const Gtn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Ytn(e,t){var y,v;let n=t.axis(e);const r=new Rre,i=Ls(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||OZt(e),u=t.getScaleComponent(e).get("type"),l=CZt(e,u,a,t.config),c=n!==void 0?!n:qH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=NZt(i,n,e,o.style,l),d=i4e(n.formatType,i,u),h=r4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of y5e){const w=b in kge?kge[b](p):nge(b)?n[b]:void 0,E=w!==void 0,T=Wtn(w,b,n,t,e);if(E&&T)r.set(b,w,T);else{const{configValue:S=void 0,configFrom:A=void 0}=nge(b)&&b!=="values"?qH(b,o.style,n.style,l):{},C=S!==void 0;E&&!C?r.set(b,w,T):(A!=="vgAxisConfig"||Gtn.has(b)&&C||SR(S)||Rt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=x4e.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=UFe(m[w]??{},t),T=w==="labels"?Btn(t,e,E):E;return T!==void 0&&!Fr(T)&&(b[w]={update:T}),b},{});return Fr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Ktn({encoding:e,size:t}){for(const n of rp){const r=nl(n);Oh(t[r])&&r0(e[n])&&(delete t[r],Je(O6e(r)))}return t}const Xtn={vgMark:"arc",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...my(e,"radius"),...my(e,"theta")})},Qtn={vgMark:"area",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...TM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...TM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...gre(e)})},Jtn={vgMark:"rect",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...my(e,"x"),...my(e,"y")})},Ztn={vgMark:"shape",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===jS?{field:at(n,{expr:"datum"})}:{}}]}},enn={vgMark:"image",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...my(e,"x"),...my(e,"y"),...pre(e,"url")})},tnn={vgMark:"line",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...to("size",e,{vgChannel:"strokeWidth"}),...gre(e)})},nnn={vgMark:"trail",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...to("size",e),...gre(e)})};function Nre(e,t){const{config:n}=e;return{...Kc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...to("size",e),...to("angle",e),...rnn(e,n,t)}}function rnn(e,t,n){return n?{shape:{value:n}}:to("shape",e)}const inn={vgMark:"symbol",encodeEntry:e=>Nre(e)},snn={vgMark:"symbol",encodeEntry:e=>Nre(e,"circle")},onn={vgMark:"symbol",encodeEntry:e=>Nre(e,"square")},ann={vgMark:"rect",encodeEntry:e=>({...Kc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...my(e,"x"),...my(e,"y")})},unn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Kc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...TM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...TM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...to("size",e,{vgChannel:"strokeWidth"})}}},lnn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Kc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...pre(e),...to("size",e,{vgChannel:"fontSize"}),...to("angle",e),...Tge("align",cnn(e.markDef,n,t)),...Tge("baseline",fnn(e.markDef,n,t)),...da("radius",e,{defaultPos:null}),...da("theta",e,{defaultPos:null})}}};function cnn(e,t,n){if(_r("align",e,n)===void 0)return"center"}function fnn(e,t,n){if(_r("baseline",e,n)===void 0)return"middle"}const dnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Kc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid",vgChannel:"xc"}),...da("y",e,{defaultPos:"mid",vgChannel:"yc"}),...to("size",e,{defaultValue:hnn(e),vgChannel:i}),[s]:ci(_r("thickness",n,t))}}};function hnn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=_r("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Xy(a)&&lr(a.step)?a.step*3/4:xM(t.view,i)*3/4}}const _P={arc:Xtn,area:Qtn,bar:Jtn,circle:snn,geoshape:Ztn,image:enn,line:tnn,point:inn,rect:ann,rule:unn,square:onn,text:lnn,tick:dnn,trail:nnn};function pnn(e){if(Hn([PF,RF,kXt],e.mark)){const t=k4e(e.mark,e.encoding);if(t.length>0)return mnn(e,t)}else if(e.mark===NF){const t=DH.some(n=>_r(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return gnn(e)}return Pre(e)}const Wge="faceted_path_";function mnn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Wge+e.requestDataName(_i.Main),data:e.requestDataName(_i.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Pre(e,{fromPrefix:Wge})}]}const Gge="stack_group_";function gnn(e){var l;const[t]=Pre(e,{fromPrefix:Gge}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...dx(t.encode.update,["y","yc","y2","height",...DH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Vu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...dx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Vu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of DH){const f=Lm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ci(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Lm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ci(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(_i.Main),name:Gge+e.requestDataName(_i.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function ynn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&Xf(o)&&NH(o.value)||!o&&NH(_r("order",i,s)))){if((je(o)||Ze(o))&&!n)return A6e(o,{expr:"datum"});if(e_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(ph(c))return{field:at({aggregate:Zne(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(f4e(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Pre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=us(r.clip,vnn(e),bnn(e)),a=S6e(r),u=i.key,l=ynn(e),c=_nn(e),f=_r("aria",r,s),d=_P[n].postEncodingTransform?_P[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:_P[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(_i.Main)},encode:{update:_P[n].encodeEntry(e)},...d?{transform:d}:{}}]}function vnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function bnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function _nn(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class v5e extends h5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,ige(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Ph(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=iJt(o,s,{graticule:t.data&&dre(t.data)}));const u=this.encoding=uQt(t.encoding||{},a,o.filled,s);this.markDef=X4e(o,u,s),this.size=Ktn({encoding:u,size:ige(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=K4e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>are(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===u4e,r=t&&oYt.some(i=>un(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return AF.reduce((r,i)=>{const s=Ls(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Au(t);return je(n)&&(i.domain=n.map(vl)),je(r)&&(i.range=r.map(vl)),i}initAxes(t){return rp.reduce((n,r)=>{const i=t[r];if(un(i)||r===Ai&&un(t.x2)||r===mo&&un(t.y2)){const s=un(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=SR(s)?x6e(s):vl(s)}return r}initLegends(t){return gYt.reduce((n,r)=>{const i=Ls(t[r]);if(i&&vYt(r)){const s=i.legend;n[r]=s&&Au(s)}return n},{})}parseData(){this.component.data=a5(this)}parseLayoutSize(){Ptn(this)}parseSelections(){this.component.selection=xZt(this,this.selection)}parseMarkGroup(){this.component.mark=pnn(this)}parseAxesAndHeaders(){this.component.axes=Utn(this)}assembleSelectionTopLevelSignals(t){return qJt(this,t)}assembleSignals(){return[...PFe(this),...VJt(this,[])]}assembleSelectionData(t){return WJt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return _re(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!HS(this.parent))&&(t=lFe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Av(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Dh(n)}typedFieldDef(t){const n=this.fieldDef(t);return tu(n)?n:null}}class Dre extends Ire{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(VF(a))return new Dre(a,this,this.getName(`layer_${u}`),o,s);if(ug(a))return new v5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Ane(a))})}parseData(){this.component.data=a5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Rtn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Vtn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),PFe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),_re(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return GJt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),KFe(this))}}function Ore(e,t,n,r,i){if($F(e))return new jA(e,t,n,i);if(VF(e))return new Dre(e,t,n,r,i);if(ug(e))return new v5e(e,t,n,r,i);if(PQt(e))return new Ltn(e,t,n,i);throw new Error(Ane(e))}function wnn(e,t={}){t.logger&&LKt(t.logger),t.fieldTitle&&_4e(t.fieldTitle);try{const n=Y4e(AS(t.config,e.config)),r=rFe(e,n),i=Ore(r,null,"",void 0,n);return i.parse(),qen(i.component.data,i),{spec:xnn(i,Enn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&FKt(),t.fieldTitle&&ZXt()}}function Enn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pt(t)&&(t={type:t}),i&&s&&jJt(t.type)){if(i==="step"&&s==="step")Je(zme()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(zme(TF(o)));const a=o==="width"?"height":"width";t.type=BJt(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...gge(n,!1),...gge(e,!0)}}function xnn(e,t,n={},r){const i=e.config?WQt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Atn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...H4e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Snn=eYt.version,Tnn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:hx,accessPathWithDatum:yne,compile:wnn,contains:Hn,deepEqual:Al,deleteNestedProperty:hM,duplicate:tn,entries:fy,every:pne,fieldIntersection:gne,flatAccessWithDatum:r6e,getFirstDefined:us,hasIntersection:mne,hash:Vn,internalField:o6e,isBoolean:xI,isEmpty:Fr,isEqual:nYt,isInternalField:a6e,isNullOrFalse:NH,isNumeric:bF,keys:Ye,logicalExpr:LA,mergeDeep:t6e,never:e6e,normalize:rFe,normalizeAngle:SI,omit:Vu,pick:dx,prefixGenerator:PH,removePathFromField:LS,replaceAll:fb,replacePathInField:Mc,resetIdCounter:iYt,setEqual:n6e,some:cb,stringify:jr,titleCase:pR,unique:Zd,uniqueId:s6e,vals:$o,varName:Ti,version:Snn},Symbol.toStringTag,{value:"Module"}));function b5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Ann="vega-themes",Cnn="2.15.0",Inn="Themes for stylized Vega and Vega-Lite visualizations.",knn=["vega","vega-lite","themes","style"],Rnn="BSD-3-Clause",Nnn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Pnn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Dnn="build/vega-themes.js",$re="build/vega-themes.module.js",Onn="build/vega-themes.min.js",$nn="build/vega-themes.min.js",Mnn="build/vega-themes.module.d.ts",Lnn={type:"git",url:"https://github.com/vega/vega-themes.git"},Fnn=["src","build"],jnn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Bnn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Unn={vega:"*","vega-lite":"*"},znn={},Vnn={name:Ann,version:Cnn,description:Inn,keywords:knn,license:Rnn,author:Nnn,contributors:Pnn,main:Dnn,module:$re,unpkg:Onn,jsdelivr:$nn,types:Mnn,repository:Lnn,files:Fnn,scripts:jnn,devDependencies:Bnn,peerDependencies:Unn,dependencies:znn};const D_="#fff",Yge="#888",Hnn={background:"#333",view:{stroke:Yge},title:{color:D_,subtitleColor:D_},style:{"guide-label":{fill:D_},"guide-title":{fill:D_}},axis:{domainColor:D_,gridColor:Yge,tickColor:D_}},c1="#4572a7",qnn={background:"#fff",arc:{fill:c1},area:{fill:c1},line:{stroke:c1,strokeWidth:2},path:{stroke:c1},rect:{fill:c1},shape:{stroke:c1},symbol:{fill:c1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},f1="#30a2da",uB="#cbcbcb",Wnn="#999",Gnn="#333",Kge="#f0f0f0",Xge="#333",Ynn={arc:{fill:f1},area:{fill:f1},axis:{domainColor:uB,grid:!0,gridColor:uB,gridWidth:1,labelColor:Wnn,labelFontSize:10,titleColor:Gnn,tickColor:uB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Kge,group:{fill:Kge},legend:{labelColor:Xge,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Xge,titleFontSize:14,titlePadding:10},line:{stroke:f1,strokeWidth:2},path:{stroke:f1,strokeWidth:.5},rect:{fill:f1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:f1},bar:{binSpacing:2,fill:f1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},d1="#000",Knn={group:{fill:"#e5e5e5"},arc:{fill:d1},area:{fill:d1},line:{stroke:d1},path:{stroke:d1},rect:{fill:d1},shape:{stroke:d1},symbol:{fill:d1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Xnn=22,Qnn="normal",Qge="Benton Gothic, sans-serif",Jge=11.5,Jnn="normal",h1="#82c6df",lB="Benton Gothic Bold, sans-serif",Zge="normal",e0e=13,HT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Znn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:lB,fontSize:Xnn,fontWeight:Qnn},arc:{fill:h1},area:{fill:h1},line:{stroke:h1,strokeWidth:2},path:{stroke:h1},rect:{fill:h1},shape:{stroke:h1},symbol:{fill:h1,size:30},axis:{labelFont:Qge,labelFontSize:Jge,labelFontWeight:Jnn,titleFont:lB,titleFontSize:e0e,titleFontWeight:Zge},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Qge,labelFontSize:Jge,symbolType:"square",titleFont:lB,titleFontSize:e0e,titleFontWeight:Zge},range:{category:HT["category-6"],diverging:HT["fireandice-6"],heatmap:HT["fire-7"],ordinal:HT["fire-7"],ramp:HT["fire-7"]}},p1="#ab5787",wP="#979797",ern={background:"#f9f9f9",arc:{fill:p1},area:{fill:p1},line:{stroke:p1},path:{stroke:p1},rect:{fill:p1},shape:{stroke:p1},symbol:{fill:p1,size:30},axis:{domainColor:wP,domainWidth:.5,gridWidth:.2,labelColor:wP,tickColor:wP,tickWidth:.2,titleColor:wP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},m1="#3e5c69",trn={background:"#fff",arc:{fill:m1},area:{fill:m1},line:{stroke:m1},path:{stroke:m1},rect:{fill:m1},shape:{stroke:m1},symbol:{fill:m1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ic="#1696d2",t0e="#000000",nrn="#FFFFFF",EP="Lato",cB="Lato",rrn="Lato",irn="#DEDDDD",srn=18,qT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},orn={background:nrn,title:{anchor:"start",fontSize:srn,font:EP},axisX:{domain:!0,domainColor:t0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:cB,labelAngle:0,tickColor:t0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:EP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:irn,gridWidth:1,labelFontSize:12,labelFont:cB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:EP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:cB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:EP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:qT["six-groups-cat-1"],diverging:qT["diverging-colors"],heatmap:qT["diverging-colors"],ordinal:qT["six-groups-seq"],ramp:qT["shades-blue"]},area:{fill:ic},rect:{fill:ic},line:{color:ic,stroke:ic,strokeWidth:5},trail:{color:ic,stroke:ic,strokeWidth:0,size:1},path:{stroke:ic,strokeWidth:.5},point:{filled:!0},text:{font:rrn,color:ic,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:ic,stroke:null}},arc:{fill:ic},shape:{stroke:ic},symbol:{fill:ic,size:30}},g1="#3366CC",n0e="#ccc",xP="Arial, sans-serif",arn={arc:{fill:g1},area:{fill:g1},path:{stroke:g1},rect:{fill:g1},shape:{stroke:g1},symbol:{stroke:g1},circle:{fill:g1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:xP,fontSize:12},"guide-title":{font:xP,fontSize:12},"group-title":{font:xP,fontSize:12}},title:{font:xP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:n0e,tickColor:n0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Mre=e=>e*(1/3+1),r0e=Mre(9),i0e=Mre(10),s0e=Mre(12),WT="Segoe UI",o0e="wf_standard-font, helvetica, arial, sans-serif",a0e="#252423",GT="#605E5C",u0e="transparent",urn="#C8C6C4",of="#118DFF",lrn="#12239E",crn="#E66C37",frn="#6B007B",drn="#E044A7",hrn="#744EC2",prn="#D9B300",mrn="#D64550",_5e=of,w5e="#DEEFFF",l0e=[w5e,_5e],grn=[w5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",_5e],yrn={view:{stroke:u0e},background:u0e,font:WT,header:{titleFont:o0e,titleFontSize:s0e,titleColor:a0e,labelFont:WT,labelFontSize:i0e,labelColor:GT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:GT,labelFontSize:r0e,titleFont:o0e,titleColor:a0e,titleFontSize:s0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:urn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:of},line:{stroke:of,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:WT,fontSize:r0e,fill:GT},arc:{fill:of},area:{fill:of,line:!0,opacity:.6},path:{stroke:of},rect:{fill:of},point:{fill:of,filled:!0,size:75},shape:{stroke:of},symbol:{fill:of,strokeWidth:1.5,size:50},legend:{titleFont:WT,titleFontWeight:"bold",titleColor:GT,labelFont:WT,labelFontSize:i0e,labelColor:GT,symbolType:"circle",symbolSize:75},range:{category:[of,lrn,crn,frn,drn,hrn,prn,mrn],diverging:l0e,heatmap:l0e,ordinal:grn}},fB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',vrn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',dB=400,SP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},brn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],_rn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function u5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=SP.gridBg[e],i=SP.textPrimary[e],s=SP.textSecondary[e],o=n==="dark"?brn:_rn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:fB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:vrn,labelFontWeight:dB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:SP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:fB,fill:s,fontWeight:dB},"guide-title":{font:fB,fill:s,fontWeight:dB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const wrn=u5({theme:"white",background:"#ffffff"}),Ern=u5({theme:"g10",background:"#f4f4f4"}),xrn=u5({theme:"g90",background:"#262626"}),Srn=u5({theme:"g100",background:"#161616"}),Trn=Vnn.version,Arn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Ern,carbong100:Srn,carbong90:xrn,carbonwhite:wrn,dark:Hnn,excel:qnn,fivethirtyeight:Ynn,ggplot2:Knn,googlecharts:arn,latimes:Znn,powerbi:yrn,quartz:ern,urbaninstitute:orn,version:Trn,vox:trn},Symbol.toStringTag,{value:"Module"}));function Crn(e,t,n,r){if(je(e))return`[${e.map(i=>t(pt(i)?i:c0e(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=c0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Irn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function c0e(e,t){return JSON.stringify(e,Irn(t))}var krn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const E5e="vg-tooltip-element",Rrn={offsetX:10,offsetY:10,id:E5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Nrn,maxDepth:2,formatTooltip:Crn,baseURL:""};function Nrn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Prn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return krn.toString().replace(E5e,e)}function Drn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Orn{constructor(t){this.options={...Rrn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Prn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Drn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var hB={};function $rn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pB,f0e;function Mrn(){return f0e||(f0e=1,pB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),pB}var Lrn=yr;yr.Node=_b;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)jrn(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Brn(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Frn(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Frn(e,t,n){var r=t===e.head?new _b(n,null,t,e):new _b(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function jrn(e,t){e.tail=new _b(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Brn(e,t){e.head=new _b(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function _b(e,t,n,r){if(!(this instanceof _b))return new _b(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Mrn()(yr)}catch{}const Urn=Lrn,H1=Symbol("max"),Ip=Symbol("length"),O_=Symbol("lengthCalculator"),BA=Symbol("allowStale"),cv=Symbol("maxAge"),xp=Symbol("dispose"),d0e=Symbol("noDisposeOnSet"),Ys=Symbol("lruList"),af=Symbol("cache"),x5e=Symbol("updateAgeOnGet"),mB=()=>1;class zrn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[H1]=t.max||1/0;const n=t.length||mB;if(this[O_]=typeof n!="function"?mB:n,this[BA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[cv]=t.maxAge||0,this[xp]=t.dispose,this[d0e]=t.noDisposeOnSet||!1,this[x5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[H1]=t||1/0,YT(this)}get max(){return this[H1]}set allowStale(t){this[BA]=!!t}get allowStale(){return this[BA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[cv]=t,YT(this)}get maxAge(){return this[cv]}set lengthCalculator(t){typeof t!="function"&&(t=mB),t!==this[O_]&&(this[O_]=t,this[Ip]=0,this[Ys].forEach(n=>{n.length=this[O_](n.value,n.key),this[Ip]+=n.length})),YT(this)}get lengthCalculator(){return this[O_]}get length(){return this[Ip]}get itemCount(){return this[Ys].length}rforEach(t,n){n=n||this;for(let r=this[Ys].tail;r!==null;){const i=r.prev;h0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ys].head;r!==null;){const i=r.next;h0e(this,t,r,n),r=i}}keys(){return this[Ys].toArray().map(t=>t.key)}values(){return this[Ys].toArray().map(t=>t.value)}reset(){this[xp]&&this[Ys]&&this[Ys].length&&this[Ys].forEach(t=>this[xp](t.key,t.value)),this[af]=new Map,this[Ys]=new Urn,this[Ip]=0}dump(){return this[Ys].map(t=>kM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ys]}set(t,n,r){if(r=r||this[cv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[O_](n,t);if(this[af].has(t)){if(s>this[H1])return oE(this,this[af].get(t)),!1;const u=this[af].get(t).value;return this[xp]&&(this[d0e]||this[xp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Ip]+=s-u.length,u.length=s,this.get(t),YT(this),!0}const o=new Vrn(t,n,s,i,r);return o.length>this[H1]?(this[xp]&&this[xp](t,n),!1):(this[Ip]+=o.length,this[Ys].unshift(o),this[af].set(t,this[Ys].head),YT(this),!0)}has(t){if(!this[af].has(t))return!1;const n=this[af].get(t).value;return!kM(this,n)}get(t){return gB(this,t,!0)}peek(t){return gB(this,t,!1)}pop(){const t=this[Ys].tail;return t?(oE(this,t),t.value):null}del(t){oE(this,this[af].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[af].forEach((t,n)=>gB(this,n,!1))}}const gB=(e,t,n)=>{const r=e[af].get(t);if(r){const i=r.value;if(kM(e,i)){if(oE(e,r),!e[BA])return}else n&&(e[x5e]&&(r.value.now=Date.now()),e[Ys].unshiftNode(r));return i.value}},kM=(e,t)=>{if(!t||!t.maxAge&&!e[cv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[cv]&&n>e[cv]},YT=e=>{if(e[Ip]>e[H1])for(let t=e[Ys].tail;e[Ip]>e[H1]&&t!==null;){const n=t.prev;oE(e,t),t=n}},oE=(e,t)=>{if(t){const n=t.value;e[xp]&&e[xp](n.key,n.value),e[Ip]-=n.length,e[af].delete(n.key),e[Ys].removeNode(t)}};class Vrn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const h0e=(e,t,n,r)=>{let i=n.value;kM(e,i)&&(oE(e,n),e[BA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Hrn=zrn;const qrn=Object.freeze({loose:!0}),Wrn=Object.freeze({}),Grn=e=>e?typeof e!="object"?qrn:e:Wrn;var Lre=Grn,eq={exports:{}};const Yrn="2.0.0",S5e=256,Krn=Number.MAX_SAFE_INTEGER||9007199254740991,Xrn=16,Qrn=S5e-6,Jrn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Fre={MAX_LENGTH:S5e,MAX_SAFE_COMPONENT_LENGTH:Xrn,MAX_SAFE_BUILD_LENGTH:Qrn,MAX_SAFE_INTEGER:Krn,RELEASE_TYPES:Jrn,SEMVER_SPEC_VERSION:Yrn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Zrn=typeof process=="object"&&hB&&hB.NODE_DEBUG&&/\bsemver\b/i.test(hB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var l5=Zrn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Fre,s=l5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(eq,eq.exports);var jre=eq.exports;const p0e=/^[0-9]+$/,T5e=(e,t)=>{const n=p0e.test(e),r=p0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ein=(e,t)=>T5e(t,e);var tin={compareIdentifiers:T5e,rcompareIdentifiers:ein};const TP=l5,{MAX_LENGTH:m0e,MAX_SAFE_INTEGER:AP}=Fre,{safeRe:g0e,t:y0e}=jre,nin=Lre,{compareIdentifiers:$_}=tin;let rin=class wd{constructor(t,n){if(n=nin(n),t instanceof wd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>m0e)throw new TypeError(`version is longer than ${m0e} characters`);TP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?g0e[y0e.LOOSE]:g0e[y0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>AP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>AP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>AP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<AP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(TP("SemVer.compare",this.version,this.options,t),!(t instanceof wd)){if(typeof t=="string"&&t===this.version)return 0;t=new wd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof wd||(t=new wd(t,this.options)),$_(this.major,t.major)||$_(this.minor,t.minor)||$_(this.patch,t.patch)}comparePre(t){if(t instanceof wd||(t=new wd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(TP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return $_(r,i)}while(++n)}compareBuild(t){t instanceof wd||(t=new wd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(TP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return $_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),$_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Bre=rin;const v0e=Bre,iin=(e,t,n)=>new v0e(e,n).compare(new v0e(t,n));var qS=iin;const sin=qS,oin=(e,t,n)=>sin(e,t,n)===0;var ain=oin;const uin=qS,lin=(e,t,n)=>uin(e,t,n)!==0;var cin=lin;const fin=qS,din=(e,t,n)=>fin(e,t,n)>0;var hin=din;const pin=qS,min=(e,t,n)=>pin(e,t,n)>=0;var gin=min;const yin=qS,vin=(e,t,n)=>yin(e,t,n)<0;var bin=vin;const _in=qS,win=(e,t,n)=>_in(e,t,n)<=0;var Ein=win;const xin=ain,Sin=cin,Tin=hin,Ain=gin,Cin=bin,Iin=Ein,kin=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return xin(e,n,r);case"!=":return Sin(e,n,r);case">":return Tin(e,n,r);case">=":return Ain(e,n,r);case"<":return Cin(e,n,r);case"<=":return Iin(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Rin=kin,yB,b0e;function Nin(){if(b0e)return yB;b0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}yB=t;const n=Lre,{safeRe:r,t:i}=jre,s=Rin,o=l5,a=Bre,u=A5e();return yB}var vB,_0e;function A5e(){if(_0e)return vB;_0e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(L);if(B)return B;const z=this.options.loose,q=z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(q,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let D=$.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>I(H,this.options));z&&(D=D.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[u.COMPARATORLOOSE])))),s("range list",D);const U=new Map,W=D.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];U.set(H.value,H)}U.size>1&&U.has("")&&U.delete("");const j=[...U.values()];return n.set(L,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&$.set.some(B=>g(B,F)&&L.every(z=>B.every(q=>z.intersects(q,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}vB=e;const t=Hrn,n=new t({max:1e3}),r=Lre,i=Nin(),s=l5,o=Bre,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=jre,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Fre,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,$)=>{let F=!0;const L=P.slice();let B=L.pop();for(;F&&L.length;)F=L.every(z=>B.intersects(z,$)),B=L.pop();return F},y=(P,$)=>(s("comp",P,$),P=E(P,$),s("caret",P),P=b(P,$),s("tildes",P),P=S(P,$),s("xrange",P),P=C(P,$),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,$)=>P.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(P,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(L,B,z,q,D)=>{s("tilde",P,L,B,z,q,D);let U;return v(B)?U="":v(z)?U=`>=${B}.0.0 <${+B+1}.0.0-0`:v(q)?U=`>=${B}.${z}.0 <${B}.${+z+1}.0-0`:D?(s("replaceTilde pr",D),U=`>=${B}.${z}.${q}-${D} <${B}.${+z+1}.0-0`):U=`>=${B}.${z}.${q} <${B}.${+z+1}.0-0`,s("tilde return",U),U})},E=(P,$)=>P.trim().split(/\s+/).map(F=>T(F,$)).join(" "),T=(P,$)=>{s("caret",P,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],L=$.includePrerelease?"-0":"";return P.replace(F,(B,z,q,D,U)=>{s("caret",P,B,z,q,D,U);let W;return v(z)?W="":v(q)?W=`>=${z}.0.0${L} <${+z+1}.0.0-0`:v(D)?z==="0"?W=`>=${z}.${q}.0${L} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.0${L} <${+z+1}.0.0-0`:U?(s("replaceCaret pr",U),z==="0"?q==="0"?W=`>=${z}.${q}.${D}-${U} <${z}.${q}.${+D+1}-0`:W=`>=${z}.${q}.${D}-${U} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.${D}-${U} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?q==="0"?W=`>=${z}.${q}.${D}${L} <${z}.${q}.${+D+1}-0`:W=`>=${z}.${q}.${D}${L} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.${D} <${+z+1}.0.0-0`),s("caret return",W),W})},S=(P,$)=>(s("replaceXRanges",P,$),P.split(/\s+/).map(F=>A(F,$)).join(" ")),A=(P,$)=>{P=P.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(L,B,z,q,D,U)=>{s("xRange",P,L,B,z,q,D,U);const W=v(z),j=W||v(q),H=j||v(D),G=H;return B==="="&&G&&(B=""),U=$.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(q=0),D=0,B===">"?(B=">=",j?(z=+z+1,q=0,D=0):(q=+q+1,D=0)):B==="<="&&(B="<",j?z=+z+1:q=+q+1),B==="<"&&(U="-0"),L=`${B+z}.${q}.${D}${U}`):j?L=`>=${z}.0.0${U} <${+z+1}.0.0-0`:H&&(L=`>=${z}.${q}.0${U} <${z}.${+q+1}.0-0`),s("xRange return",L),L})},C=(P,$)=>(s("replaceStars",P,$),P.trim().replace(a[u.STAR],"")),I=(P,$)=>(s("replaceGTE0",P,$),P.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=P=>($,F,L,B,z,q,D,U,W,j,H,G,ne)=>(v(L)?F="":v(B)?F=`>=${L}.0.0${P?"-0":""}`:v(z)?F=`>=${L}.${B}.0${P?"-0":""}`:q?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?U="":v(j)?U=`<${+W+1}.0.0-0`:v(H)?U=`<${W}.${+j+1}.0-0`:G?U=`<=${W}.${j}.${H}-${G}`:P?U=`<${W}.${j}.${+H+1}-0`:U=`<=${U}`,`${F} ${U}`.trim()),O=(P,$,F)=>{for(let L=0;L<P.length;L++)if(!P[L].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let L=0;L<P.length;L++)if(s(P[L].semver),P[L].semver!==i.ANY&&P[L].semver.prerelease.length>0){const B=P[L].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return vB}const Pin=A5e(),Din=(e,t,n)=>{try{t=new Pin(t,n)}catch{return!1}return t.test(e)};var Oin=Din,C5e=$rn(Oin);function $in(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Min=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function I5e(e,...t){for(const n of t)Lin(e,n);return e}function Lin(e,t){for(const n of Object.keys(t))CS(e,n,t[n],!0)}const lf=_Gt;let RI=Tnn;const CP=typeof window<"u"?window:void 0;var k0e;RI===void 0&&((k0e=CP==null?void 0:CP.vl)!=null&&k0e.compile)&&(RI=CP.vl);const Fin={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},jin={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},F2={vega:"Vega","vega-lite":"Vega-Lite"},RM={vega:lf.version,"vega-lite":RI?RI.version:"not available"},Bin={vega:e=>e,"vega-lite":(e,t)=>RI.compile(e,{config:t}).spec},Uin=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,zin="chart-wrapper";function Vin(e){return typeof e=="function"}function w0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${F2[r]} JSON Source`}function Hin(e,t){if(e.$schema){const n=b5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${F2[n.library]}, but mode argument sets ${F2[t]??t}.`);const r=n.library;return C5e(RM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${F2[r]} ${n.version}, but the current version of ${F2[r]} is v${RM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function k5e(e){return!!(e&&"load"in e)}function E0e(e){return k5e(e)?e:lf.loader(e)}function qin(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Win(e,t,n={}){let r,i;pt(t)?(i=E0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=qin(r),o=s.loader;(!i||o)&&(i=E0e(n.loader??o));const a=await x0e(s,i),u=await x0e(n,i),l={...I5e(u,a),config:AS(u.config??{},a.config??{})};return await Yin(e,r,l,i)}async function x0e(e,t){const n=pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Gin(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Yin(e,t,n={},r){const i=n.theme?AS(Arn[n.theme],n.config??{}):n.config,s=Uy(n.actions)?n.actions:I5e({},Fin,n.actions??{}),o={...jin,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??lf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:S}=Gin(c);if(!T.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Min.toString():n.defaultStyle,S.appendChild(A)}}const f=Hin(t,n.mode);let d=Bin[f](t,i);if(f==="vega-lite"&&d.$schema){const E=b5e(d.$schema);C5e(RM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${RM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(zin),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):S4(d,p,!0,!1).newDocument),n.formatLocale&&lf.formatLocale(n.formatLocale),n.timeFormatLocale&&lf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?lf.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&lf.expressionFunction(E,T)}const{ast:m}=n,g=lf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||lf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:lf.expressionInterpreter??n.expr??RGt}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,S=E&&!k5e(E)?E==null?void 0:E.baseURL:void 0,A=Vin(T)?T:new Orn({baseURL:S,...T===!0?{}:T}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const A=document.createElement("summary");A.innerHTML=Uin,S.append(A),b=C=>{S.contains(C.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const A=o[`${S.toUpperCase()}_ACTION`],C=document.createElement("a"),I=mt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${S}`,C.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(S,I);this.href=O}),T.append(C)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(A){w0e(b9(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(A){w0e(b9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),T.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){$in(window,S,{config:i,mode:f,renderer:a,spec:b9(t)}),C.preventDefault()}),T.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Kin(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Xin(e,t,n){n&&(Kin(n)?n(e.data(t)):e.change(t,lf.changeset().remove(()=>!0).insert(n)))}function Qin(e,t){Object.keys(t).forEach(n=>{Xin(e,n,t[n])})}function R5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const N5e=()=>{};function bB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Jin(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=R5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!KP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function S0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function _B(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function j2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P5e extends Wi.PureComponent{constructor(){super(...arguments),j2(this,"containerRef",Wi.createRef()),j2(this,"resultPromise",void 0),j2(this,"handleError",t=>{const{onError:n=N5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),j2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=R5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Jin(_B(this.props),_B(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!AV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&S0e(a,s),i&&bB(a,i)),a.run()})}else AV(i,s)||this.modifyView(o=>{s&&S0e(o,s),i&&bB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=_B(this.props);this.resultPromise=Win(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;bB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Wi.createElement("div",{ref:this.containerRef,className:t,style:n})}}j2(P5e,"propTypes",{className:Rhe.string,onError:Rhe.func});function tq(){return tq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tq.apply(this,arguments)}function nq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zin={};class D5e extends Wi.PureComponent{constructor(){super(...arguments),nq(this,"vegaEmbed",Wi.createRef()),nq(this,"handleNewView",t=>{this.update();const{onNewView:n=N5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){AV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Qin(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Wi.createElement(P5e,tq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}nq(D5e,"defaultProps",{data:Zin});function rq(){return rq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rq.apply(this,arguments)}function iq(e){return Wi.createElement(D5e,rq({},e,{mode:"vega-lite"}))}function esn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=pv(!0),[o,a]=hv(),u=R.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=R.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=R.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(Nx,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Dt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Dt,{align:"center",children:[e.type==="metadata"&&_.jsx(VKe,{size:20}),e.type==="numerical"&&_.jsx(QKe,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(FKe,{size:20}),e.type==="likert"&&_.jsx(WKe,{size:20}),e.type==="dropdown"&&_.jsx(rXe,{size:20}),e.type==="slider"&&_.jsx(DKe,{size:20}),e.type==="radio"&&_.jsx(ZKe,{size:20}),e.type==="checkbox"&&_.jsx(iXe,{size:20}),e.type==="iframe"&&_.jsx(YKe,{size:20}),_.jsx(xi,{order:5,ml:4,children:e.id})]}),_.jsx(zKe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(QM,{in:i,mah:400,children:[_.jsx(ve,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(bE,{})}),_.jsxs(MG,{cols:2,h:360,children:[_.jsx(dm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(iq,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Dt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(Q2,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Dt,{align:"center",gap:"xs",children:_.jsx(et,{children:f[e.id]})},d))]})]})}),_.jsx(dm,{mih:200,children:e.type==="metadata"?_.jsx(iq,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Response Specification: "}),_.jsx(Q2,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Correct Answer: "}),_.jsx(Q2,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function tsn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&vRe(t.components[n],t),i=R.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Dt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(esn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Dt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(et,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function nsn({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=R.useState([...n]),o=R.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=R.useMemo(()=>{let l=p0(e.sequence);return l=AY(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=gm();return _.jsxs(Nx,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Dt,{direction:"row",justify:"space-between",children:_.jsx(wl.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(xs,{children:[_.jsx(wl,{value:"completed",label:"Completed"}),_.jsx(wl,{value:"inprogress",label:"In Progress"}),_.jsx(wl,{value:"rejected",label:"Rejected"})]})})}),_.jsx(bE,{my:"xs"}),i.length===0?_.jsx(Dt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(et,{children:"No data available."})}):_.jsxs(Dt,{direction:"row",children:[_.jsx(ve,{w:340,children:_.jsx(_$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(bE,{orientation:"vertical",mx:"md"}),_.jsx(tsn,{participantData:i,studyConfig:e,trialId:u})]})]})}function rsn({globalConfig:e}){const{studyId:t}=gm(),[n,r]=R.useState([]),[i,s]=R.useState(void 0),[o,a]=R.useState(!1),{storageEngine:u}=As(),l=Wm(),{tab:c}=gm(),{user:f}=zb(),d=R.useCallback(async()=>{if(a(!0),t){const g=await J6(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);R.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=R.useMemo(()=>{const g=n.filter(b=>!b.rejected&&b.completed),y=n.filter(b=>!b.rejected&&!b.completed),v=n.filter(b=>b.rejected);return[g,y,v]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(RA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsxs(kc,{fluid:!0,style:{height:"100%"},children:[_.jsx(Ol,{visible:o}),_.jsxs(Dt,{direction:"row",align:"center",children:[_.jsx(xi,{order:5,children:t}),_.jsx(pDe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(Il,{h:"xs"}),_.jsxs(ts,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(ts.List,{children:[_.jsx(ts.Tab,{value:"table",leftSection:_.jsx(sXe,{size:16}),children:"Table View"}),_.jsx(ts.Tab,{value:"stats",leftSection:_.jsx(BKe,{size:16}),children:"Trial Stats"}),_.jsx(vs,{label:"Coming soon",position:"bottom",children:_.jsx(ts.Tab,{value:"replay",leftSection:_.jsx(JKe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(ts.Tab,{value:"manage",leftSection:_.jsx(F_e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(ts.Panel,{value:"table",pt:"xs",children:i&&_.jsx(dLt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(ts.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(nsn,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(ts.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(ts.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(mLt,{studyId:t,refresh:d}):_.jsx(kc,{mt:20,children:_.jsx($x,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(M_e,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function T0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=zb(),{storageEngine:o}=As(),[a,u]=R.useState(!1),l=gm();return R.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Ol,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(XG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function O5e(e,t,n){if(e instanceof pc){t(!0);const r=new $p,i=I$();try{await nPt(i,r,lNe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function isn(){const{user:e}=zb(),[t,n]=R.useState(null),[r,i]=R.useState(!1),{storageEngine:s}=As();return R.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(XG,{to:"/"}):_.jsx(kc,{children:_.jsx(Cb,{padding:"lg",children:_.jsxs(Dt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Cy,{maw:200,mt:50,mb:100,src:`${jh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(et,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Rn,{onClick:()=>O5e(s,i,n),leftSection:_.jsx(oXe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Xp,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(Ol,{visible:r})]})})})}var $5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(no,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],L=$%100;return"["+$+(F[(L-20)%10]||F[L]||F[0])+"]"}},b=function($,F,L){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(L)+$},w={s:b,z:function($){var F=-$.utcOffset(),L=Math.abs(F),B=Math.floor(L/60),z=L%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(z,2,"0")},m:function $(F,L){if(F.date()<L.date())return-$(L,F);var B=12*(L.year()-F.year())+(L.month()-F.month()),z=F.clone().add(B,f),q=L-z<0,D=F.clone().add(B+(q?-1:1),f);return+(-(B+(L-z)/(q?z-D:D-z))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",T={};T[E]=v;var S="$isDayjsObject",A=function($){return $ instanceof O||!(!$||!$[S])},C=function $(F,L,B){var z;if(!F)return E;if(typeof F=="string"){var q=F.toLowerCase();T[q]&&(z=q),L&&(T[q]=L,z=q);var D=F.split("-");if(!z&&D.length>1)return $(D[0])}else{var U=F.name;T[U]=F,z=U}return!B&&z&&(E=z),z||!B&&E},I=function($,F){if(A($))return $.clone();var L=typeof F=="object"?F:{};return L.date=$,L.args=arguments,new O(L)},N=w;N.l=C,N.i=A,N.w=function($,F){return I($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(L){this.$L=C(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[S]=!0}var F=$.prototype;return F.parse=function(L){this.$d=function(B){var z=B.date,q=B.utc;if(z===null)return new Date(NaN);if(N.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var D=z.match(g);if(D){var U=D[2]-1||0,W=(D[7]||"0").substring(0,3);return q?new Date(Date.UTC(D[1],U,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],U,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(z)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,B){var z=I(L);return this.startOf(B)<=z&&z<=this.endOf(B)},F.isAfter=function(L,B){return I(L)<this.startOf(B)},F.isBefore=function(L,B){return this.endOf(B)<I(L)},F.$g=function(L,B,z){return N.u(L)?this[B]:this.set(z,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,B){var z=this,q=!!N.u(B)||B,D=N.p(L),U=function(he,ye){var Ie=N.w(z.$u?Date.UTC(z.$y,ye,he):new Date(z.$y,ye,he),z);return q?Ie:Ie.endOf(l)},W=function(he,ye){return N.w(z.toDate()[he].apply(z.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(ye)),z)},j=this.$W,H=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case h:return q?U(1,0):U(31,11);case f:return q?U(1,H):U(0,H+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return U(q?G-de:G+(6-de),H);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,B){var z,q=N.p(L),D="set"+(this.$u?"UTC":""),U=(z={},z[l]=D+"Date",z[p]=D+"Date",z[f]=D+"Month",z[h]=D+"FullYear",z[u]=D+"Hours",z[a]=D+"Minutes",z[o]=D+"Seconds",z[s]=D+"Milliseconds",z)[q],W=q===l?this.$D+(B-this.$W):B;if(q===f||q===h){var j=this.clone().set(p,1);j.$d[U](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function(L,B){return this.clone().$set(L,B)},F.get=function(L){return this[N.p(L)]()},F.add=function(L,B){var z,q=this;L=Number(L);var D=N.p(B),U=function(H){var G=I(q);return N.w(G.date(G.date()+Math.round(H*L)),q)};if(D===f)return this.set(f,this.$M+L);if(D===h)return this.set(h,this.$y+L);if(D===l)return U(1);if(D===c)return U(7);var W=(z={},z[a]=r,z[u]=i,z[o]=n,z)[D]||1,j=this.$d.getTime()+L*W;return N.w(j,this)},F.subtract=function(L,B){return this.add(-1*L,B)},F.format=function(L){var B=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var q=L||"YYYY-MM-DDTHH:mm:ssZ",D=N.z(this),U=this.$H,W=this.$m,j=this.$M,H=z.weekdays,G=z.months,ne=z.meridiem,ce=function(ye,Ie,be,Ke){return ye&&(ye[Ie]||ye(B,q))||be[Ie].slice(0,Ke)},de=function(ye){return N.s(U%12||12,ye,"0")},he=ne||function(ye,Ie,be){var Ke=ye<12?"AM":"PM";return be?Ke.toLowerCase():Ke};return q.replace(y,function(ye,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return ce(z.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(z.weekdaysMin,B.$W,H,2);case"ddd":return ce(z.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(U);case"HH":return N.s(U,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(U,W,!0);case"A":return he(U,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,B,z){var q,D=this,U=N.p(B),W=I(L),j=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return N.m(D,W)};switch(U){case h:q=G()/12;break;case f:q=G();break;case d:q=G()/3;break;case c:q=(H-j)/6048e5;break;case l:q=(H-j)/864e5;break;case u:q=H/i;break;case a:q=H/r;break;case o:q=H/n;break;default:q=H}return z?q:N.a(q)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return T[this.$L]},F.locale=function(L,B){if(!L)return this.$L;var z=this.clone(),q=C(L,B,!0);return q&&(z.$L=q),z},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),P=O.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){P[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),I.extend=function($,F){return $.$i||($(F,O,I),$.$i=!0),I},I.locale=C,I.isDayjs=A,I.unix=function($){return I(1e3*$)},I.en=T[E],I.Ls=T,I.p={},I})})($5e);var ssn=$5e.exports;const Tt=Wl(ssn);function osn({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function asn({formatter:e,...t}){return(e||osn)(t)}function usn({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function M5e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=usn({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?M5e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function lsn(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function csn(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Ure({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=lsn(i.key);if(s){i.preventDefault();const o=csn(e);M5e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var L5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(no,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],T=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(S).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(T,S,A){var C=T-60*S*1e3,I=l(C,A);if(S===I)return[C,S];var N=l(C-=60*(I-S)*1e3,A);return I===N?[C,I]:[T-60*Math.min(I,N)*1e3,Math.max(I,N)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(L5e);var fsn=L5e.exports;const dsn=Wl(fsn);var F5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(no,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var S=(""+T[0]).match(i)||["-",0,0],A=S[0],C=60*+S[1]+ +S[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(F5e);var hsn=F5e.exports;const psn=Wl(hsn);Tt.extend(psn);Tt.extend(dsn);function msn(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const A0e=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=msn(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function k0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>A0e(i,n,e)):A0e(t,n,e)}function gsn({minDate:e,maxDate:t,timezone:n}){const r=k0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const ysn={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},vsn=R.createContext(ysn);function Xl(){const e=R.useContext(vsn),t=R.useCallback(o=>o||e.locale,[e.locale]),n=R.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=R.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=R.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=R.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function bsn(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function j5e({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:bsn(e,t),name:n,form:r})}j5e.displayName="@mantine/dates/HiddenDatesInput";var B5e={day:"m_396ce5cb"};const _sn={},wsn=(e,{size:t})=>({day:{"--day-size":en(t,"day-size")}}),zre=Le((e,t)=>{const n=xe("Day",_sn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,T=gt({name:f||"Day",classes:B5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wsn,rootSelector:"day"}),S=Xl();return _.jsx(_s,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(k0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});zre.classes=B5e;zre.displayName="@mantine/dates/Day";function Esn({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var U5e={weekday:"m_18a3eca"};const xsn={},Ssn=(e,{size:t})=>({weekdaysRow:{"--wr-fz":lo(t),"--wr-spacing":ss(t)}}),Vre=Le((e,t)=>{const n=xe("WeekdaysRow",xsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=gt({name:h||"WeekdaysRow",classes:U5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ssn,rootSelector:"weekdaysRow"}),g=Xl(),y=Esn({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(ve,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Vre.classes=U5e;Vre.displayName="@mantine/dates/WeekdaysRow";function Tsn(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Asn(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function Csn({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=Tsn(s,t),a=Asn(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function z5e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function V5e(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function H5e(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function Isn(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return H5e(c,n)&&V5e(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||z5e(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var q5e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const ksn={withCellSpacing:!0},c5=Le((e,t)=>{const n=xe("Month",ksn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:T,static:S,__getDayRef:A,__onDayKeyDown:C,__onDayClick:I,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:P,withCellSpacing:$,size:F,...L}=n,B=gt({name:l||"Month",classes:q5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),z=Xl(),q=Csn({month:h,firstDayOfWeek:z.getFirstDayOfWeek(f),consistentWeeks:z.consistentWeeks}),D=Isn(q,y,v,m,g,w,h),{resolvedClassNames:U,resolvedStyles:W}=jm({classNames:r,styles:o,props:n}),j=q.map((H,G)=>{const ne=H.map((ce,de)=>{const he=!z5e(ce,h),ye=(T==null?void 0:T(ce))||Tt(ce).locale(c||z.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=Tt(ce).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(zre,{__staticSelector:l||"Month",classNames:U,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:ce,size:F,weekend:z.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ye,static:S,disabled:(g==null?void 0:g(ce))||!H5e(ce,v)||!V5e(ce,y),ref:Ke=>A==null?void 0:A(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),C==null||C(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),N==null||N(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),I==null||I(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),O&&Ke.preventDefault()},tabIndex:O||!be?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(ve,{component:"table",...B("month"),size:F,ref:t,...L,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(Vre,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:U,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});c5.classes=q5e;c5.displayName="@mantine/dates/Month";var W5e={pickerControl:"m_dc6a3c71"};const Rsn={},Nsn=(e,{size:t})=>({pickerControl:{"--dpc-fz":lo(t),"--dpc-size":en(t,"dpc-size")}}),f5=Le((e,t)=>{const n=xe("PickerControl",Rsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=gt({name:d||"PickerControl",classes:W5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nsn,rootSelector:"pickerControl"});return _.jsx(_s,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});f5.classes=W5e;f5.displayName="@mantine/dates/PickerControl";function G5e(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function Psn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!G5e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function Y5e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var K5e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Dsn={yearsListFormat:"YYYY",withCellSpacing:!0},d5=Le((e,t)=>{const n=xe("YearsList",Dsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=gt({name:m||"YearsList",classes:K5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),I=Xl(),N=Y5e(l),O=Psn(N,d,h,p),P=N.map(($,F)=>{const L=$.map((B,z)=>{const q=p==null?void 0:p(B),D=Tt(B).isSame(O,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(f5,{...C("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:G5e(B,d,h),ref:U=>g==null?void 0:g(F,z,U),...q,onKeyDown:U=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:B})},onClick:U=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,U),v==null||v(U,B)},onMouseEnter:U=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,U),b==null||b(U,B)},onMouseDown:U=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,U),w&&U.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(f)).format(c)})},z)});return _.jsx("tr",{...C("yearsListRow"),children:L},F)});return _.jsx(ve,{component:"table",ref:t,size:S,...C("yearsList"),...A,children:_.jsx("tbody",{children:P})})});d5.classes=K5e;d5.displayName="@mantine/dates/YearsList";function X5e(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function Osn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!X5e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function $sn(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var Q5e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Msn={monthsListFormat:"MMM",withCellSpacing:!0},h5=Le((e,t)=>{const n=xe("MonthsList",Msn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=gt({name:l||"MonthsList",classes:Q5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),I=Xl(),N=$sn(c),O=Osn(N,h,p,m),P=N.map(($,F)=>{const L=$.map((B,z)=>{const q=m==null?void 0:m(B),D=Tt(B).isSame(O,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(f5,{...C("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:X5e(B,h,p),ref:U=>g==null?void 0:g(F,z,U),...q,onKeyDown:U=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:B})},onClick:U=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,U),v==null||v(U,B)},onMouseEnter:U=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,U),b==null||b(U,B)},onMouseDown:U=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,U),w&&U.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(d)).format(f)})},z)});return _.jsx("tr",{...C("monthsListRow"),children:L},F)});return _.jsx(ve,{component:"table",ref:t,size:S,...C("monthsList"),...A,children:_.jsx("tbody",{children:P})})});h5.classes=Q5e;h5.displayName="@mantine/dates/MonthsList";var J5e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Lsn={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Fsn=(e,{size:t})=>({calendarHeader:{"--dch-control-size":en(t,"dch-control-size"),"--dch-fz":lo(t)}}),Qy=Le((e,t)=>{const n=xe("CalendarHeader",Lsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:T,__staticSelector:S,__preventFocus:A,__stopPropagation:C,...I}=n,N=gt({name:S||"CalendarHeader",classes:J5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fsn,rootSelector:"calendarHeader"}),O=A?P=>P.preventDefault():void 0;return _.jsxs(ve,{...N("calendarHeader"),ref:t,...I,children:[T&&_.jsx(_s,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(yE,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(_s,{component:b?"button":"div",...N("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(_s,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(yE,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Qy.classes=J5e;Qy.displayName="@mantine/dates/CalendarHeader";function jsn(e){const t=Y5e(e);return[t[0][0],t[3][0]]}const Bsn={decadeLabelFormat:"YYYY"},p5=Le((e,t)=>{const n=xe("DecadeLevel",Bsn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:S,withNext:A,withPrevious:C,decadeLabelFormat:I,classNames:N,styles:O,unstyled:P,__staticSelector:$,__stopPropagation:F,size:L,...B}=n,z=Xl(),[q,D]=jsn(r),U={__staticSelector:$||"DecadeLevel",classNames:N,styles:O,unstyled:P,size:L},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(q).startOf("year").isAfter(s):!1,H=(G,ne)=>Tt(G).locale(i||z.locale).format(ne);return _.jsxs(ve,{"data-decade-level":!0,size:L,ref:t,...B,children:[_.jsx(Qy,{label:typeof I=="function"?I(q,D):`${H(q,I)}  ${H(D,I)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:A,withPrevious:C,...U}),_.jsx(d5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...U})]})});p5.classes={...d5.classes,...Qy.classes};p5.displayName="@mantine/dates/DecadeLevel";const Usn={yearLabelFormat:"YYYY"},m5=Le((e,t)=>{const n=xe("YearLevel",Usn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:T,previousDisabled:S,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:N,yearLabelFormat:O,__staticSelector:P,__stopPropagation:$,size:F,classNames:L,styles:B,unstyled:z,...q}=n,D=Xl(),U={__staticSelector:P||"YearLevel",classNames:L,styles:B,unstyled:z,size:F},W=typeof T=="boolean"?T:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(ve,{"data-year-level":!0,size:F,ref:t,...q,children:[_.jsx(Qy,{label:typeof O=="function"?O(r):Tt(r).locale(i||D.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:N,...U}),_.jsx(h5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...U})]})});m5.classes={...Qy.classes,...h5.classes};m5.displayName="@mantine/dates/YearLevel";const zsn={monthLabelFormat:"MMMM YYYY"},g5=Le((e,t)=>{const n=xe("MonthLevel",zsn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:I,onNext:N,onPrevious:O,onLevelClick:P,nextDisabled:$,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:B,withNext:z,withPrevious:q,monthLabelFormat:D,classNames:U,styles:W,unstyled:j,__staticSelector:H,size:G,static:ne,...ce}=n,de=Xl(),he={__staticSelector:H||"MonthLevel",classNames:U,styles:W,unstyled:j,size:G},ye=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(ve,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx(Qy,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:I,onNext:N,onPrevious:O,onLevelClick:P,nextDisabled:ye,previousDisabled:Ie,hasNextLevel:L,levelControlAriaLabel:B,withNext:z,withPrevious:q,...he}),_.jsx(c5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:T,static:ne,withCellSpacing:w,...he})]})});g5.classes={...c5.classes,...Qy.classes};g5.displayName="@mantine/dates/MonthLevel";var Z5e={levelsGroup:"m_30b26e33"};const Vsn={},Jy=Le((e,t)=>{const n=xe("LevelsGroup",Vsn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=gt({name:l||"LevelsGroup",classes:Z5e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(ve,{ref:t,...f("levelsGroup"),...c})});Jy.classes=Z5e;Jy.displayName="@mantine/dates/LevelsGroup";const Hsn={numberOfColumns:1},y5=Le((e,t)=>{const n=xe("DecadeLevelGroup",Hsn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:T,unstyled:S,__staticSelector:A,__stopPropagation:C,numberOfColumns:I,levelControlAriaLabel:N,decadeLabelFormat:O,size:P,vars:$,...F}=n,L=R.useRef([]),B=Array(I).fill(0).map((z,q)=>{const D=Tt(r).add(q*10,"years").toDate();return _.jsx(p5,{size:P,yearsListFormat:a,decade:D,withNext:q===I-1,withPrevious:q===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,W)=>Ure({levelIndex:q,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:U,controlsRef:L}),__getControlRef:(U,W,j)=>{Array.isArray(L.current[q])||(L.current[q]=[]),Array.isArray(L.current[q][U])||(L.current[q][U]=[]),L.current[q][U][W]=j},levelControlAriaLabel:typeof N=="function"?N(D):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:T,unstyled:S,withCellSpacing:f},q)});return _.jsx(Jy,{classNames:E,styles:T,__staticSelector:A||"DecadeLevelGroup",ref:t,size:P,unstyled:S,...F,children:B})});y5.classes={...Jy.classes,...p5.classes};y5.displayName="@mantine/dates/DecadeLevelGroup";const qsn={numberOfColumns:1},v5=Le((e,t)=>{const n=xe("YearLevelGroup",qsn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,classNames:S,styles:A,unstyled:C,__staticSelector:I,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:P,yearLabelFormat:$,size:F,vars:L,...B}=n,z=R.useRef([]),q=Array(O).fill(0).map((D,U)=>{const W=Tt(r).add(U,"years").toDate();return _.jsx(m5,{size:F,monthsListFormat:a,year:W,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,H)=>Ure({levelIndex:U,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:j,controlsRef:z}),__getControlRef:(j,H,G)=>{Array.isArray(z.current[U])||(z.current[U]=[]),Array.isArray(z.current[U][j])||(z.current[U][j]=[]),z.current[U][j][H]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:S,styles:A,unstyled:C,__staticSelector:I||"YearLevelGroup",withCellSpacing:f},U)});return _.jsx(Jy,{classNames:S,styles:A,__staticSelector:I||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:q})});v5.classes={...m5.classes,...Jy.classes};v5.displayName="@mantine/dates/YearLevelGroup";const Wsn={numberOfColumns:1},b5=Le((e,t)=>{const n=xe("MonthLevelGroup",Wsn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:N,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:L,numberOfColumns:B,levelControlAriaLabel:z,monthLabelFormat:q,__staticSelector:D,__stopPropagation:U,size:W,static:j,vars:H,...G}=n,ne=R.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return _.jsx(g5,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:q,__stopPropagation:U,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>Ure({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Ke},levelControlAriaLabel:typeof z=="function"?z(ye):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:N,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:L,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(Jy,{classNames:$,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});b5.classes={...Jy.classes,...g5.classes};b5.displayName="@mantine/dates/MonthLevelGroup";var eje={input:"m_6fa5e2aa"};const Gsn={},_5=Le((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:T,value:S,name:A,form:C,type:I,...N}=obe("PickerInputBase",Gsn,e),O=b||(g&&w&&!E&&!T?_.jsx(Ty,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{I==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(ws,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(hi.Wrapper,{...r,children:_.jsxs(ei,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),P()},children:[_.jsx(ei.Target,{children:_.jsx(hi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Ki(eje.input,s==null?void 0:s.input)},...N,children:d||_.jsx(hi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(ei.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(j5e,{value:S,name:A,form:C,type:I})]})});_5.classes=eje;_5.displayName="@mantine/dates/PickerInputBase";const C0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Hre({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=R.useRef(e),o=Xl(),[a,u,l]=Es({value:k0("add",t,o.getTimezone(),!i),defaultValue:k0("add",n,o.getTimezone(),!i),finalValue:C0e(e),onChange:f=>{r==null||r(k0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:C0e(e),u(c))),[c,u,l]}function wB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function Ysn(e){return e===0?"month":e===1?"year":"decade"}function KT(e,t,n){return Ysn(Wd(wB(e,0),wB(t,0),wB(n,2)))}const Ksn={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},w5=Le((e,t)=>{const n=xe("Calendar",Ksn,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:P,monthLabelFormat:$,nextIcon:F,previousIcon:L,__onDayClick:B,__onDayMouseEnter:z,withCellSpacing:q,monthsListFormat:D,getMonthControlProps:U,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:H,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ye,locale:Ie,__staticSelector:be,size:Ke,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:We,__timezoneApplied:me,...dt}=n,{resolvedClassNames:vt,resolvedStyles:pe}=jm({classNames:ne,styles:ce,props:n}),[Ce,He]=Es({value:a?KT(a,s,i):void 0,defaultValue:o?KT(o,s,i):void 0,finalValue:KT(void 0,s,i),onChange:u}),[ut,_t]=Hre({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Ln={__staticSelector:be||"Calendar",styles:pe,classNames:vt,unstyled:de,size:Ke},Tr=Xl(),Fn=h||d||1,cr=ut||k0("add",new Date,Tr.getTimezone()),pn=()=>{const Tn=Tt(cr).add(Fn,"month").toDate();ct==null||ct(Tn),_t(Tn)},Sn=()=>{const Tn=Tt(cr).subtract(Fn,"month").toDate();Ot==null||Ot(Tn),_t(Tn)},nr=()=>{const Tn=Tt(cr).add(Fn,"year").toDate();ke==null||ke(Tn),_t(Tn)},rr=()=>{const Tn=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(Tn),_t(Tn)},Uo=()=>{const Tn=Tt(cr).add(10*Fn,"year").toDate();it==null||it(Tn),_t(Tn)},Oi=()=>{const Tn=Tt(cr).subtract(10*Fn,"year").toDate();_e==null||_e(Tn),_t(Tn)};return _.jsxs(ve,{ref:t,size:Ke,"data-calendar":!0,...dt,children:[Ce==="month"&&_.jsx(b5,{month:cr,minDate:he,maxDate:ye,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:P,onNext:pn,onPrevious:Sn,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:z,__preventFocus:Ue,__stopPropagation:yt,static:We,withCellSpacing:q,...Ln}),Ce==="year"&&_.jsx(v5,{year:cr,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:D,getMonthControlProps:U,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Tn,$i)=>{w&&_t($i),He(KT("month",s,i)),g==null||g($i)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:q,...Ln}),Ce==="decade"&&_.jsx(y5,{decade:cr,minDate:he,maxDate:ye,yearsListFormat:j,getYearControlProps:H,locale:Ie,onNext:Uo,onPrevious:Oi,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Tn,$i)=>{b&&_t($i),He(KT("year",s,i)),m==null||m($i)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:q,...Ln})]})});w5.classes={...y5.classes,...v5.classes,...b5.classes};w5.displayName="@mantine/dates/Calendar";function Xsn(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:N,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:z,getDayAriaLabel:q,monthLabelFormat:D,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:N,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:z,getDayAriaLabel:q,monthLabelFormat:D,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie},others:be}}function I0e(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function Qsn({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Hre({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=R.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=R.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[T,f];S.sort((A,C)=>A.getTime()-C.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(S=>Tt(S).isSame(T,t))?c(l.filter(S=>!Tt(S).isSame(T,t))):c([...l,T]);return}l&&o&&Tt(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?I0e(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?I0e(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,v=T=>l[0]instanceof Date&&Tt(T).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=T=>l[1]instanceof Date?Tt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(T).isSame(l[0],t),w=T=>{if(e==="range")return{selected:l.some(A=>A&&Tt(A).isSame(T,t)),inRange:g(T),firstInRange:v(T),lastInRange:b(T),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Tt(A).isSame(T,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};const S=Tt(l).isSame(T,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return R.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const Jsn={type:"default",defaultLevel:"month",numberOfColumns:1},E5=Le((e,t)=>{const n=xe("DatePicker",Jsn,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:S,getControlProps:A}=Qsn({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:I}=jm({classNames:r,styles:i,props:n}),N=Xl();return _.jsx(w5,{ref:t,minLevel:"month",classNames:C,styles:I,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,P)=>{S(P),y==null||y(O,P)},__onDayClick:(O,P)=>{E(P),v==null||v(O,P)},getDayProps:O=>({...A(O),...f==null?void 0:f(O)}),...w,date:k0("add",w.date,N.getTimezone(),b),__timezoneApplied:!0})});E5.classes=w5.classes;E5.displayName="@mantine/dates/DatePicker";function Zsn({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Xl(),[f,d]=pv(!1),[h,p]=Hre({type:e,value:t,defaultValue:n,onChange:r}),m=asn({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const eon={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},qre=Le((e,t)=>{const n=xe("DatePickerInput",eon,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:T,...S}=n,{resolvedClassNames:A,resolvedStyles:C}=jm({classNames:c,styles:f,props:n}),{calendarProps:I,others:N}=Xsn(S),{_value:O,setValue:P,formattedValue:$,dropdownHandlers:F,dropdownOpened:L,onClear:B,shouldClear:z}=Zsn({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),q=Array.isArray(O)?O[0]||E:O||E,D=Xl();return _.jsx(_5,{formattedValue:$,dropdownOpened:L,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:z,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:_.jsx(E5,{...I,size:p,variant:m,type:r,value:O,defaultDate:q||gsn({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:k0("add",I.date,D.getTimezone()),__timezoneApplied:!0})})});qre.classes={..._5.classes,...E5.classes};qre.displayName="@mantine/dates/DatePickerInput";function ton(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function non({studyId:e,allParticipants:t}){const n=Wm(),[r,i]=hv(),s=t.filter(y=>y.completed).map(y=>Math.max(...Object.values(y.answers).map(v=>v.endTime).filter(v=>v!==void 0))).filter(y=>Number.isFinite(y)),[o,a]=R.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=R.useMemo(()=>{const y=t.filter(w=>!w.rejected&&w.completed),v=t.filter(w=>!w.rejected&&!w.completed),b=t.filter(w=>w.rejected);return[y,v,b,y.filter(w=>ton(w.answers,o))]},[t,o]),d=R.useMemo(()=>{var y,v;return f.length>0?[{Date:(y=o[0])==null?void 0:y.getTime(),Participants:0},...f.map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).flat())).sort((b,w)=>b-w).map((b,w)=>({Date:b,Participants:w})),{Date:(v=o[1])==null?void 0:v.getTime(),Participants:f.length}]:[]},[f,o]),h=R.useMemo(()=>{var y,v;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(y=o[0])==null?void 0:y.getTime(),(v=o[1])==null?void 0:v.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]),[p,{close:m,open:g}]=pv(!1);return _.jsx(kc,{children:_.jsxs(Cb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Dt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Dt,{direction:"row",align:"center",children:[_.jsx(xi,{order:5,children:e}),_.jsx(pDe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(xs,{children:[_.jsx(hDe,{allParticipants:t,studyId:e}),_.jsxs(ei,{opened:p,children:[_.jsx(ei.Target,{children:_.jsx(Rn,{onClick:y=>{!y.ctrlKey&&!y.metaKey&&(y.preventDefault(),n(`/analysis/stats/${e}`))},onMouseEnter:g,onMouseLeave:m,px:4,component:"a",href:`/analysis/stats/${e}`,children:_.jsx(UKe,{})})}),_.jsx(ei.Dropdown,{children:_.jsx(et,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(qre,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{mt:16,children:"Finished Participants"}),_.jsx(iq,{spec:h,actions:!1})]}):_.jsx(ve,{h:293.4,children:_.jsx(mm,{style:{height:"100%"},children:_.jsx(et,{children:"Not enough participants for chart"})})})]})})}function ron({globalConfig:e}){const[t,n]=R.useState(!1),[r,i]=R.useState({}),[s,o]=R.useState({}),{storageEngine:a}=As(),{user:u}=zb();R.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await J6(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof pc){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(za.Col,{span:{md:12,xl:6},children:_.jsx(non,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(RA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(kc,{fluid:!0,children:_.jsxs(ve,{children:[_.jsx(xi,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(za,{children:[l.length>0?l:_.jsx(kc,{mt:100,children:_.jsx(et,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Ol,{visible:t})]})]})})})]})}function ion(){const{user:e,triggerAuth:t}=zb(),{storageEngine:n}=As(),[r,i]=R.useState(!1),[s,o]=R.useState([]),[a,u]=R.useState(!1),[l,c]=R.useState(!1),[f,d]=R.useState(!1),[h,p]=R.useState(!1),[m,g]=R.useState(""),[y,v]=R.useState(null),b=VEe({initialValues:{email:""},validate:{email:Bst("Invalid email")}});R.useEffect(()=>{(async()=>{if(u(!0),n instanceof pc){const N=await(n==null?void 0:n.getUserManagementData("authentication"));i(N==null?void 0:N.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof pc){const I=await O5e(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},E=async I=>{u(!0),n instanceof pc&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},T=async()=>{if(u(!0),n instanceof pc){await n.addAdminUser({email:b.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(N=>N.email))}u(!1),c(!1),b.setValues({email:""})},S=I=>{d(!0),g(I)},A=async()=>{if(u(!0),n instanceof pc){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(N=>N.email))}d(!1),u(!1)},C=R.useMemo(()=>n instanceof pc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(kc,{children:_.jsxs(Cb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(xi,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Dt,{children:_.jsx(et,{children:"Authentication is enabled."})}):_.jsxs(Dt,{justify:"space-between",children:[_.jsx(ve,{children:_.jsx(et,{children:"Authentication is currently disabled."})}),_.jsx(vs,{label:"You can only enable auth when using Firebase",disabled:C,children:_.jsx(Rn,{onClick:I=>C?w():I.preventDefault(),color:"green","data-disabled":C?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Dt,{mt:40,direction:"column",children:[_.jsxs(Dt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(xi,{order:6,children:"Enabled Users"}),_.jsx(ZG,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var N;return _.jsxs(Dt,{justify:"space-between",mb:10,children:[_.jsx(et,{children:I}),I===((N=e.user)==null?void 0:N.email)?_.jsx(et,{color:"blue",size:"xs",children:"You"}):_.jsx(O0,{variant:"subtle",onClick:()=>S(I),children:_.jsx(B_e,{color:"red"})})]},I)}):null]}):null]})}),_.jsx(ws,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(ve,{component:"form",onSubmit:b.onSubmit(()=>T()),children:[_.jsx(gv,{leftSection:_.jsx(MKe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(Dt,{mt:30,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Rn,{type:"submit",children:"Save"})]})]})}),_.jsxs(ws,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(et,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(et,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(Dt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>A(),children:"Yes, I'm sure."})]})]}),_.jsxs(ws,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(et,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(et,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Dt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(Ol,{visible:a})]})}class son extends fDe{constructor(){super("localStorage");fu(this,"studyDatabase");fu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Y_.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await M$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await M$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Y_.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=$$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Y_.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=$$();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Y_.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Y_.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function oon(){let e,t=!1;{const n=new pc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new son;await n.connect(),e=n}return e}function M_({title:e}){const t=Iy();return R.useEffect(()=>{document.title=e},[t,e]),null}async function aon(){const t=await(await fetch(`${jh}global.json`)).text();return jIt(t)}function uon(){const[e,t]=R.useState(null),[n,r]=R.useState({});R.useEffect(()=>{async function a(){e&&r(await ckt(e))}a()},[e]),R.useEffect(()=>{e||aon().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=As();R.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await oon();s(u)}a()},[s,i]);const o=async a=>i instanceof pc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(TKe,{basename:jh,children:_.jsx(lLt,{children:_.jsx(NKe,{children:_.jsx(di,{padding:"md",header:{height:70},children:_.jsxs(wKe,{children:[_.jsx(yp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(M_,{title:"ReVISit | Home"}),_.jsx(RA,{studyIds:e.configsList}),_.jsx(Wrt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(yp,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(M_,{title:"ReVISit | Study"}),_.jsx(fkt,{globalConfig:e})]})}),_.jsx(yp,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(M_,{title:"ReVISit | Analysis"}),_.jsx(ron,{globalConfig:e})]})}),_.jsx(yp,{path:"/analysis",element:_.jsx(Jz,{to:"/analysis/dashboard"})}),_.jsx(yp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(M_,{title:"ReVISit | Analysis"}),_.jsx(T0e,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(rsn,{globalConfig:e})})]})}),_.jsx(yp,{path:"/analysis/stats/:studyId",element:_.jsx(Jz,{to:"./table",replace:!0})}),_.jsx(yp,{path:"/settings",element:_.jsxs(T0e,{children:[_.jsx(M_,{title:"ReVISit | Settings"}),_.jsx(RA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(ion,{})})]})}),_.jsx(yp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(M_,{title:"ReVISit | Login"}),_.jsx(RA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(isn,{})})]})})]})})})})}):null}EB.createRoot(document.getElementById("root")).render(_.jsx(Wi.StrictMode,{children:_.jsx(NYe,{children:_.jsx(cve,{children:_.jsx(uon,{})})})}))});export default lon();
